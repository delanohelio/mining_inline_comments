{"pr_number": 1461, "pr_title": "Psse importer version 33 and 35 (raw and rawx formats)", "pr_createdAt": "2020-09-05T16:45:24Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1461", "timeline": [{"oid": "cbf9484af645e102c035f902b9e56e2e29d5a954", "url": "https://github.com/powsybl/powsybl-core/commit/cbf9484af645e102c035f902b9e56e2e29d5a954", "message": "refactoring: package for power flow model; io packages; consistent naming\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T18:32:31Z", "type": "commit"}, {"oid": "e68a78a42dd8218a25a859488d10ff32494f1a24", "url": "https://github.com/powsybl/powsybl-core/commit/e68a78a42dd8218a25a859488d10ff32494f1a24", "message": "add missing copyright and author comments\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T18:36:12Z", "type": "commit"}, {"oid": "9acd9bf86dbcab0d5a56ede017f3a937f3a38b62", "url": "https://github.com/powsybl/powsybl-core/commit/9acd9bf86dbcab0d5a56ede017f3a937f3a38b62", "message": "obtain field names for PSSE Json data objects\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T21:03:56Z", "type": "commit"}, {"oid": "f035fb8047757d14fb40fd492f17302e171094d2", "url": "https://github.com/powsybl/powsybl-core/commit/f035fb8047757d14fb40fd492f17302e171094d2", "message": "remove unused methods\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T21:06:08Z", "type": "commit"}, {"oid": "2b73f4dec4b5231791ce5b8f0b582e2263547604", "url": "https://github.com/powsybl/powsybl-core/commit/2b73f4dec4b5231791ce5b8f0b582e2263547604", "message": "simplify reading of Json data objects; remove methods from Util\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T21:48:12Z", "type": "commit"}, {"oid": "fa6d7d3d0bcad3d046b2a90b29187e80056864a7", "url": "https://github.com/powsybl/powsybl-core/commit/fa6d7d3d0bcad3d046b2a90b29187e80056864a7", "message": "simplify: intersection of string arrays in util; excluded fields writing case identification\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-15T23:02:37Z", "type": "commit"}, {"oid": "63033ba45ca07c2966382097a71ef3251a7e8c37", "url": "https://github.com/powsybl/powsybl-core/commit/63033ba45ca07c2966382097a71ef3251a7e8c37", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-15T23:03:52Z", "type": "commit"}, {"oid": "7acf15562ab4e0f649771b45ab45c1467407b496", "url": "https://github.com/powsybl/powsybl-core/commit/7acf15562ab4e0f649771b45ab45c1467407b496", "message": "use a constant for valid delimiters\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T09:00:29Z", "type": "commit"}, {"oid": "8fb0365b1e6cc6607cb42cd6cedb582fe476fca4", "url": "https://github.com/powsybl/powsybl-core/commit/8fb0365b1e6cc6607cb42cd6cedb582fe476fca4", "message": "Merge branch 'psse_Version33Version35' of https://github.com/powsybl/powsybl-core into psse_Version33Version35\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T10:36:45Z", "type": "commit"}, {"oid": "6cf7137daacfebe551ba63858fff340605054934", "url": "https://github.com/powsybl/powsybl-core/commit/6cf7137daacfebe551ba63858fff340605054934", "message": "move method to count fields from util to its only use\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T10:46:57Z", "type": "commit"}, {"oid": "9608084840e131797551f8e453317d60f7b98215", "url": "https://github.com/powsybl/powsybl-core/commit/9608084840e131797551f8e453317d60f7b98215", "message": "use unusued variables\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T10:54:59Z", "type": "commit"}, {"oid": "55e02e3849758660a9eecb8366b41bba475bc72e", "url": "https://github.com/powsybl/powsybl-core/commit/55e02e3849758660a9eecb8366b41bba475bc72e", "message": "define quote and delimiter chars in a single place\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T12:26:59Z", "type": "commit"}, {"oid": "4abda4e99490b57639e7b9e26495fee445c96674", "url": "https://github.com/powsybl/powsybl-core/commit/4abda4e99490b57639e7b9e26495fee445c96674", "message": "fix sonar issues\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T12:43:11Z", "type": "commit"}, {"oid": "b41c4039f9d970172372926b4509b78c136daa9e", "url": "https://github.com/powsybl/powsybl-core/commit/b41c4039f9d970172372926b4509b78c136daa9e", "message": "introduce the concept of multi-line records: use for reading transformers\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T14:31:01Z", "type": "commit"}, {"oid": "d173e5fd97410152ae5c4a659c7e48b9e501bf84", "url": "https://github.com/powsybl/powsybl-core/commit/d173e5fd97410152ae5c4a659c7e48b9e501bf84", "message": "sonar code smells\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T16:10:35Z", "type": "commit"}, {"oid": "7cbf2ab66b4c2f924873c8dc3293a88e1593c24e", "url": "https://github.com/powsybl/powsybl-core/commit/7cbf2ab66b4c2f924873c8dc3293a88e1593c24e", "message": "writing multi-line records; use for transformers\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T17:11:23Z", "type": "commit"}, {"oid": "95c9cca89b3ae79cf17fa66623c45ca5fb7ba404", "url": "https://github.com/powsybl/powsybl-core/commit/95c9cca89b3ae79cf17fa66623c45ca5fb7ba404", "message": "avoid passing class as a parameter to methods building/writing records\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-16T17:27:37Z", "type": "commit"}, {"oid": "4d38c771dff38b9f8f618119eb80dbdaf02abcd7", "url": "https://github.com/powsybl/powsybl-core/commit/4d38c771dff38b9f8f618119eb80dbdaf02abcd7", "message": "separate classes for reading and writing record groups in different formats\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-17T00:15:17Z", "type": "commit"}, {"oid": "bb07e8d81df4eb25aac42e2519a12db98ee7b0ee", "url": "https://github.com/powsybl/powsybl-core/commit/bb07e8d81df4eb25aac42e2519a12db98ee7b0ee", "message": "fix sonar smells; reduce duplicates (rates and ownership are common to various psse objects)\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-17T10:12:46Z", "type": "commit"}, {"oid": "e1f2259c34677b45b9cddce491e3a08451c130f3", "url": "https://github.com/powsybl/powsybl-core/commit/e1f2259c34677b45b9cddce491e3a08451c130f3", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-17T11:25:00Z", "type": "commit"}, {"oid": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "url": "https://github.com/powsybl/powsybl-core/commit/c1b57e1e61f537d5f070857277f8e0084f4099d9", "message": "keep rates at 1st level of nested data in transformer\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-17T14:05:27Z", "type": "commit"}, {"oid": "9bfd5d923acced177557b78e60db2021e3a3d7e5", "url": "https://github.com/powsybl/powsybl-core/commit/9bfd5d923acced177557b78e60db2021e3a3d7e5", "message": "Lot of small fixes\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>", "committedDate": "2020-12-17T18:44:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTIyMzk2Mg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545223962", "bodyText": "I think that adding the PsseVersionFilter annotation on each subclass of the PsseVersioned is error prone. It seems sufficient to add it once on PsseVersioned.\nI'm not a big fan to add annotations that are used only for testing, but I suppose we cannot do anything else.", "author": "mathbagu", "createdAt": "2020-12-17T16:26:56Z", "path": "psse/psse-converter/src/test/java/com/powsybl/psse/converter/PsseImporterTest.java", "diffHunk": "@@ -107,15 +126,75 @@ public void importTestT3W() throws IOException {\n         importTest(\"ThreeMIB_T3W_modified\", \"ThreeMIB_T3W_modified.RAW\", true);\n     }\n \n-    @Test(expected = PsseException.class)\n-    public void badVersionTest() {\n-        ReadOnlyDataSource dataSource = new ResourceDataSource(\"case-flag-not-supported\", new ResourceSet(\"/\", \"case-flag-not-supported.raw\"));\n-        new PsseImporter().importData(dataSource, new NetworkFactoryImpl(), null);\n+    @Test\n+    public void testRates() throws IOException {\n+        Context context = new Context();\n+        ReadOnlyDataSource ds = new ResourceDataSource(\"ThreeMIB_T3W_modified\", new ResourceSet(\"/\", \"ThreeMIB_T3W_modified.RAW\"));\n+        PssePowerFlowModel model = new PowerFlowRawData33().read(ds, \"RAW\", context);\n+        assertEquals(10451.0, model.getNonTransformerBranches().get(0).getRates().getRatea(), 0);\n+        assertEquals(10452.0, model.getNonTransformerBranches().get(0).getRates().getRateb(), 0);\n+        assertEquals(10453.0, model.getNonTransformerBranches().get(0).getRates().getRatec(), 0);\n+        assertEquals(10561.0, model.getNonTransformerBranches().get(1).getRates().getRatea(), 0);\n+        assertEquals(10562.0, model.getNonTransformerBranches().get(1).getRates().getRateb(), 0);\n+        assertEquals(10563.0, model.getNonTransformerBranches().get(1).getRates().getRatec(), 0);\n+        assertEquals(10140.0, model.getTransformers().get(0).getWinding1Rates().getRatea(), 0);\n+        assertEquals(10141.0, model.getTransformers().get(0).getWinding1Rates().getRateb(), 0);\n+        assertEquals(10142.0, model.getTransformers().get(0).getWinding1Rates().getRatec(), 0);\n+        assertEquals(101.0, model.getTransformers().get(1).getWinding1Rates().getRatea(), 0);\n+        assertEquals(102.0, model.getTransformers().get(1).getWinding1Rates().getRateb(), 0);\n+        assertEquals(103.0, model.getTransformers().get(1).getWinding1Rates().getRatec(), 0);\n+        assertEquals(201.0, model.getTransformers().get(1).getWinding2Rates().getRatea(), 0);\n+        assertEquals(202.0, model.getTransformers().get(1).getWinding2Rates().getRateb(), 0);\n+        assertEquals(203.0, model.getTransformers().get(1).getWinding2Rates().getRatec(), 0);\n+        assertEquals(301.0, model.getTransformers().get(1).getWinding3Rates().getRatea(), 0);\n+        assertEquals(302.0, model.getTransformers().get(1).getWinding3Rates().getRateb(), 0);\n+        assertEquals(303.0, model.getTransformers().get(1).getWinding3Rates().getRatec(), 0);\n     }\n \n-    @Test(expected = PsseException.class)\n+    private static String toJson(PssePowerFlowModel model) throws JsonProcessingException {\n+        PsseVersion version = fromRevision(model.getCaseIdentification().getRev());\n+        SimpleBeanPropertyFilter filter = new SimpleBeanPropertyFilter() {\n+            @Override\n+            protected boolean include(PropertyWriter writer) {\n+                Revision rev = writer.getAnnotation(Revision.class);\n+                return rev == null || PsseVersioned.isValidVersion(version, rev);\n+            }\n+        };\n+        FilterProvider filters = new SimpleFilterProvider().addFilter(\"PsseVersionFilter\", filter);", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyMTgzNQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545621835", "bodyText": "Agree, adding the annotation at the PsseVersioned level is the right thing. You are right this annotation is only used for testing, but having it only once doesn't hurt and will ease the development and testing when we add support for new versions.", "author": "zamarrenolm", "createdAt": "2020-12-18T07:35:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTIyMzk2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTIzNDM0MA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545234340", "bodyText": "Could probably be improved by introducing a PsseBranch interface with all the required getters (getI(), getJ(), getK(), getR() and getX())", "author": "mathbagu", "createdAt": "2020-12-17T16:40:41Z", "path": "psse/psse-converter/src/main/java/com/powsybl/psse/converter/PsseImporter.java", "diffHunk": "@@ -624,98 +499,235 @@ private static void createTransformer(PsseTransformer psseTfo, ContainersMapping\n         }\n     }\n \n+    @Override\n+    public String getFormat() {\n+        return FORMAT;\n+    }\n+\n+    @Override\n+    public List<Parameter> getParameters() {\n+        return Collections.singletonList(IGNORE_BASE_VOLTAGE_PARAMETER);\n+    }\n+\n+    @Override\n+    public String getComment() {\n+        return \"PSS/E Format to IIDM converter\";\n+    }\n+\n+    @Override\n+    public boolean exists(ReadOnlyDataSource dataSource) {\n+        try {\n+            String ext = findExtension(dataSource);\n+            return exists(dataSource, ext);\n+        } catch (IOException e) {\n+            throw new UncheckedIOException(e);\n+        }\n+    }\n+\n     @Override\n     public Network importData(ReadOnlyDataSource dataSource, NetworkFactory networkFactory, Properties parameters) {\n         Objects.requireNonNull(dataSource);\n         Objects.requireNonNull(networkFactory);\n+        try {\n+            String ext = findExtension(dataSource);\n+            if (ext == null) {\n+                throw new PsseException(String.format(\"No Power Flow Data file found. Basename: %s, supported extensions: %s\",\n+                        dataSource.getBaseName(),\n+                        String.join(\"|\", EXTENSIONS)));\n+            }\n+            PsseVersion version = PowerFlowDataFactory.create(ext).readVersion(dataSource, ext);\n+            Context context = new Context();\n+            PssePowerFlowModel pssePowerFlowModel = PowerFlowDataFactory.create(ext, version).read(dataSource, ext, context);\n+            pssePowerFlowModel.getCaseIdentification().validate();\n+\n+            Network network = networkFactory.createNetwork(dataSource.getBaseName(), FORMAT);\n+            // TODO store the PsseContext with the Network to be able to export back using its information\n+            convert(pssePowerFlowModel, network, parameters);\n+            return network;\n+        } catch (IOException e) {\n+            throw new UncheckedIOException(e);\n+        }\n+    }\n+\n+    private String findExtension(ReadOnlyDataSource dataSource) throws IOException {\n+        for (String ext : EXTENSIONS) {\n+            if (dataSource.exists(null, ext)) {\n+                return ext;\n+            }\n+        }\n+        return null;\n+    }\n \n-        Network network = networkFactory.createNetwork(dataSource.getBaseName(), FORMAT);\n+    private boolean exists(ReadOnlyDataSource dataSource, String ext) throws IOException {\n+        if (ext != null) {\n+            try {\n+                return PowerFlowDataFactory.create(ext).isValidFile(dataSource, ext);\n+            } catch (PsseException | IOException e) {\n+                LOGGER.error(String.format(\"Invalid content in filename %s.%s: %s\",\n+                        dataSource.getBaseName(),\n+                        ext,\n+                        e.getMessage()));\n+            }\n+        }\n+        return false;\n+    }\n \n+    @Override\n+    public void copy(ReadOnlyDataSource fromDataSource, DataSource toDataSource) {\n+        Objects.requireNonNull(fromDataSource);\n+        Objects.requireNonNull(toDataSource);\n         try {\n-            String ext = findExtension(dataSource, true);\n-            try (BufferedReader reader = new BufferedReader(new InputStreamReader(dataSource.newInputStream(null, ext)))) {\n+            String ext = findExtension(fromDataSource);\n+            if (!exists(fromDataSource, ext)) {\n+                throw new PowsyblException(\"From data source is not importable\");\n+            }\n+            try (InputStream is = fromDataSource.newInputStream(null, ext);\n+                 OutputStream os = toDataSource.newOutputStream(null, ext, false)) {\n+                ByteStreams.copy(is, os);\n+            }\n+        } catch (IOException e) {\n+            throw new UncheckedIOException(e);\n+        }\n+    }\n \n-                // parse file\n-                PsseRawModel psseModel = new PsseRawReader().read(reader);\n+    private void createSwitchedShuntBlockMap(PssePowerFlowModel psseModel, Map<PsseSwitchedShunt, ShuntBlockTab> stoBlockiTab) {\n \n-                // check version\n-                if (psseModel.getCaseIdentification().getRev() > PsseConstants.SUPPORTED_VERSION) {\n-                    throw new PsseException(\"PSS/E version higher than \" + PsseConstants.SUPPORTED_VERSION + \" not supported\");\n-                }\n-                if (psseModel.getCaseIdentification().getIc() == 1) {\n-                    throw new PsseException(\"Incremental load of PSS/E data option (IC = 1) not supported\");\n-                }\n+        /* Creates a map between the PSSE switched shunt and the blocks info of this shunt\n+        A switched shunt may contain up to 8 blocks and each block may contain up to 9 steps of the same value (in MVAR)\n+        A block may be capacitive or inductive */\n+        for (PsseSwitchedShunt psseSwShunt : psseModel.getSwitchedShunts()) {\n+            ShuntBlockTab sbt = new ShuntBlockTab();\n \n-                // set date and time\n-                // TODO\n-\n-                // build container to fit IIDM requirements\n-                List<Object> branches = ImmutableList.builder()\n-                        .addAll(psseModel.getNonTransformerBranches())\n-                        .addAll(psseModel.getTransformers())\n-                        .build();\n-                ToIntFunction<Object> branchToNum1 = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getI() : ((PsseTransformer) branch).getI();\n-                ToIntFunction<Object> branchToNum2 = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getJ() : ((PsseTransformer) branch).getJ();\n-                ToIntFunction<Object> branchToNum3 = branch -> branch instanceof PsseNonTransformerBranch ? 0 : ((PsseTransformer) branch).getK();\n-                ToDoubleFunction<Object> branchToResistance = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getR() : ((PsseTransformer) branch).getR12();\n-                ToDoubleFunction<Object> branchToReactance = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getX() : ((PsseTransformer) branch).getX12();\n-                Predicate<Object> branchToIsTransformer = branch -> branch instanceof PsseTransformer;\n-                ContainersMapping containerMapping = ContainersMapping.create(psseModel.getBuses(), branches, PsseBus::getI, branchToNum1,\n-                    branchToNum2, branchToNum3, branchToResistance, branchToReactance, branchToIsTransformer,\n-                    busNums -> \"VL\" + busNums.iterator().next(), substationNum -> \"S\" + substationNum++);\n-\n-                boolean ignoreBaseVoltage = ConversionParameters.readBooleanParameter(FORMAT, parameters, IGNORE_BASE_VOLTAGE_PARAMETER,\n-                        ParameterDefaultValueConfig.INSTANCE);\n-                PerUnitContext perUnitContext = new PerUnitContext(psseModel.getCaseIdentification().getSbase(), ignoreBaseVoltage);\n-\n-                //The map gives access to PsseBus object with the int bus Number\n-                Map<Integer, PsseBus> busNumToPsseBus = new HashMap<>();\n-\n-                // create buses\n-                createBuses(psseModel, containerMapping, perUnitContext, network, busNumToPsseBus);\n-\n-                //Create loads\n-                for (PsseLoad psseLoad : psseModel.getLoads()) {\n-                    createLoad(psseLoad, containerMapping, network);\n-                }\n+            int[] ni = {\n+                    psseSwShunt.getN1(), psseSwShunt.getN2(), psseSwShunt.getN3(), psseSwShunt.getN4(),\n+                    psseSwShunt.getN5(), psseSwShunt.getN6(), psseSwShunt.getN7(), psseSwShunt.getN8()\n+            };\n \n-                //Create fixed shunts\n-                for (PsseFixedShunt psseShunt : psseModel.getFixedShunts()) {\n-                    createShuntCompensator(psseShunt, containerMapping, network);\n-                }\n+            double[] bi = {\n+                    psseSwShunt.getB1(), psseSwShunt.getB2(), psseSwShunt.getB3(), psseSwShunt.getB4(),\n+                    psseSwShunt.getB5(), psseSwShunt.getB6(), psseSwShunt.getB7(), psseSwShunt.getB8()\n+            };\n \n-                //Create switched shunts\n-                Map<PsseSwitchedShunt, ShuntBlockTab > stoBlockiTab = new HashMap<>();\n-                createSwitchedShuntBlockMap(psseModel, stoBlockiTab);\n-                for (PsseSwitchedShunt psseSwShunt : psseModel.getSwitchedShunts()) {\n-                    createSwitchedShunt(psseSwShunt, perUnitContext, containerMapping, network, stoBlockiTab);\n-                }\n+            int i = 0;\n+            while (i <= 7 && ni[i] > 0) {\n+                sbt.add(i + 1, ni[i], bi[i]);\n+                i++;\n+            }\n \n-                for (PsseGenerator psseGen : psseModel.getGenerators()) {\n-                    createGenerator(psseGen, busNumToPsseBus.get(psseGen.getI()), containerMapping, network);\n-                }\n+            stoBlockiTab.put(psseSwShunt, sbt);\n+        }\n+    }\n \n-                for (PsseNonTransformerBranch psseLine : psseModel.getNonTransformerBranches()) {\n-                    createLine(psseLine, containerMapping, perUnitContext, network);\n-                }\n+    private Network convert(PssePowerFlowModel psseModel, Network network, Properties parameters) {\n+        // set date and time\n+        // TODO\n+\n+        // build container to fit IIDM requirements\n+        List<Object> branches = ImmutableList.builder()\n+                .addAll(psseModel.getNonTransformerBranches())\n+                .addAll(psseModel.getTransformers())\n+                .build();\n+        ToIntFunction<Object> branchToNum1 = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getI() : ((PsseTransformer) branch).getI();\n+        ToIntFunction<Object> branchToNum2 = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getJ() : ((PsseTransformer) branch).getJ();\n+        ToIntFunction<Object> branchToNum3 = branch -> branch instanceof PsseNonTransformerBranch ? 0 : ((PsseTransformer) branch).getK();\n+        ToDoubleFunction<Object> branchToResistance = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getR() : ((PsseTransformer) branch).getR12();\n+        ToDoubleFunction<Object> branchToReactance = branch -> branch instanceof PsseNonTransformerBranch ? ((PsseNonTransformerBranch) branch).getX() : ((PsseTransformer) branch).getX12();", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYxNzgxMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545617810", "bodyText": "The ContainersMapping object that is using these functions is located in the iidm-api util package, and it is used to process in a generic way objects from different network models: IEEE CDF, Matpower, PSSE. An interface like this should be introduced at iidm-api level, and these external network models should implement it (adding a dependency to iidm).", "author": "zamarrenolm", "createdAt": "2020-12-18T07:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTIzNDM0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI3MTk2Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545271966", "bodyText": "This method is not used: will you use in a future pull request?", "author": "mathbagu", "createdAt": "2020-12-17T17:33:16Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseVersioned.java", "diffHunk": "@@ -0,0 +1,90 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model;\n+\n+import com.powsybl.psse.model.pf.PssePowerFlowModel;\n+\n+import java.lang.reflect.Field;\n+import java.util.Arrays;\n+import java.util.List;\n+\n+import static com.powsybl.psse.model.PsseVersion.MAX_VERSION;\n+import static com.powsybl.psse.model.PsseVersion.fromRevision;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class PsseVersioned {\n+    private PssePowerFlowModel model = null;\n+\n+    public void setModel(PssePowerFlowModel model) {\n+        this.model = model;\n+    }\n+\n+    public void checkVersion(String fieldName) {\n+        // If we do not have a reference back to a model\n+        // We can not obtain current version and we can not perform checks\n+        if (model == null) {\n+            return;\n+        }\n+        Field field = null;\n+        try {\n+            field = this.getClass().getDeclaredField(fieldName);\n+        } catch (NoSuchFieldException e) {\n+            throw new PsseException(\"Wrong field name \" + fieldName, e);\n+        }\n+\n+        checkVersionField(field, fieldName);\n+    }\n+\n+    public void checkVersion(String innerClassName, String fieldName) {", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyMjkzOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545622939", "bodyText": "It is not needed. It was used in a previous stage of the refactoring. I have removed it.", "author": "zamarrenolm", "createdAt": "2020-12-18T07:38:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI3MTk2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5NzAwMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545297000", "bodyText": "I wonder if we should split this interface in two different interfaces. I think the implementation will result in huge files", "author": "mathbagu", "createdAt": "2020-12-17T18:09:32Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/io/AbstractRecordGroup.java", "diffHunk": "@@ -0,0 +1,160 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.io;\n+\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseVersion;\n+import com.univocity.parsers.common.processor.BeanListProcessor;\n+import com.univocity.parsers.common.processor.BeanWriterProcessor;\n+import com.univocity.parsers.csv.CsvParser;\n+import com.univocity.parsers.csv.CsvParserSettings;\n+import com.univocity.parsers.csv.CsvWriter;\n+import com.univocity.parsers.csv.CsvWriterSettings;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.util.*;\n+\n+import static com.powsybl.psse.model.io.FileFormat.JSON;\n+import static com.powsybl.psse.model.io.FileFormat.LEGACY_TEXT;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public abstract class AbstractRecordGroup<T> {\n+\n+    protected final RecordGroupIdentification identification;\n+    private final String[] fieldNames;\n+    private final Map<PsseVersion.Major, String[]> fieldNamesByVersionMajor = new EnumMap<>(PsseVersion.Major.class);\n+    private String[] quotedFields;\n+    private final Map<FileFormat, RecordGroupReaderWriter<T>> readersWriters = new EnumMap<>(FileFormat.class);", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyNTYxMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545625612", "bodyText": "I am not sure we have to split readers and writers. The implementation of read/write methods are quite compact, and seeing them together in the same class helps understanding the processing.", "author": "zamarrenolm", "createdAt": "2020-12-18T07:44:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5NzAwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5NzgwMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545297802", "bodyText": "I dislike this interface name: I think we should split this interface in two different interfaces.", "author": "mathbagu", "createdAt": "2020-12-17T18:10:53Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/io/RecordGroupReaderWriter.java", "diffHunk": "@@ -0,0 +1,26 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.io;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.util.List;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+interface RecordGroupReaderWriter<T> {", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYyNjcwNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545626707", "bodyText": "Ok, I am not against splitting readers and writers.", "author": "zamarrenolm", "createdAt": "2020-12-18T07:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5NzgwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5OTMwMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545299300", "bodyText": "Could maybe lead to a performance issue: I would implement this using sets, but not sure if it's interesting here", "author": "mathbagu", "createdAt": "2020-12-17T18:13:07Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/io/Util.java", "diffHunk": "@@ -0,0 +1,23 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.io;\n+\n+import org.apache.commons.lang3.ArrayUtils;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public final class Util {\n+\n+    private Util() {\n+    }\n+\n+    public static String[] intersection(String[] strings1, String[] strings2) {\n+        return ArrayUtils.removeElements(strings1, ArrayUtils.removeElements(strings1, strings2));", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYzMTYxMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545631612", "bodyText": "The arrays used here are quite small, and the method is called only once per record group during write. But I will profile it using a big input file.", "author": "zamarrenolm", "createdAt": "2020-12-18T07:59:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5OTMwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY0NjA2NQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545646065", "bodyText": "We have to keep in mind that order of elements in first array must be preserved. It is not really a set intersection, maybe the name of the method should be changed to keep(strings, stringsToKeep).\nAgree that a possible optimisation would be to build  a Set from stringsToKeep and iterate over strings, keeping each item only if it is found in the stringsToKeep set.", "author": "zamarrenolm", "createdAt": "2020-12-18T08:26:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTI5OTMwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMwODk3OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545308978", "bodyText": "I we can prepare the design for newer version?", "author": "mathbagu", "createdAt": "2020-12-17T18:28:09Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/pf/io/PowerFlowDataFactory.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.pf.io;\n+\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseVersion;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public final class PowerFlowDataFactory {\n+\n+    private PowerFlowDataFactory() {\n+    }\n+\n+    public static PowerFlowData create(String extension) {\n+        // When only extension is given,\n+        // We create PowerFlowData objects that are able to read the case identification\n+        // To determine if the file is valid and get its version\n+        if (extension.equalsIgnoreCase(\"rawx\")) {\n+            return new PowerFlowRawxDataAllVersions();\n+        } else {\n+            return new PowerFlowRawDataAllVersions();\n+        }\n+    }\n+\n+    public static PowerFlowData create(String extension, PsseVersion version) {\n+        if (extension.equalsIgnoreCase(\"rawx\")) {\n+            return new PowerFlowRawxData35();", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY1OTc0Mg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545659742", "bodyText": "Not sure if this is what you were suggesting: I added a switch clause with explicit V35 case. Rest of versions are unsupported at the moment.", "author": "zamarrenolm", "createdAt": "2020-12-18T08:40:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMwODk3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxMDQ2OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545310468", "bodyText": "Do you forgot something or is planned later? The mapping is filled but not used.", "author": "mathbagu", "createdAt": "2020-12-17T18:30:31Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/pf/io/TransformerData.java", "diffHunk": "@@ -0,0 +1,185 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.pf.io;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseVersion;\n+import com.powsybl.psse.model.io.*;\n+import com.powsybl.psse.model.pf.PsseTransformer;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Scanner;\n+import java.util.stream.Collectors;\n+\n+import static com.powsybl.psse.model.io.FileFormat.VALID_DELIMITERS;\n+import static com.powsybl.psse.model.pf.io.PowerFlowRecordGroup.*;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class TransformerData extends AbstractRecordGroup<PsseTransformer> {\n+\n+    TransformerData() {\n+        super(TRANSFORMER);\n+        withQuotedFields(\"ckt\", \"name\", \"vecgrp\");\n+        withReaderWriter(FileFormat.LEGACY_TEXT, new TransformersLegacyText(this));\n+        withReaderWriter(FileFormat.JSON, new TransformersJson(this));\n+        // Fix mappings in nested beans that Univocity did not recognize from annotations\n+        // The same mappings are specified in PsseTransformer class\n+        // using a headerTransformer processing for @Nested annotation\n+        Map<String, String> mapping = new HashMap<>(12 * 3 + 3);\n+        for (int k = 1; k <= 12; k++) {\n+            mapping.put(\"winding1Rates.rate\" + k, \"wdg1rate\" + k);\n+            mapping.put(\"winding2Rates.rate\" + k, \"wdg2rate\" + k);\n+            mapping.put(\"winding3Rates.rate\" + k, \"wdg3rate\" + k);\n+        }\n+        for (char x = 'a'; x <= 'c'; x++) {\n+            mapping.put(\"winding1Rates.rate\" + x, \"rat\" + x + \"1\");\n+            mapping.put(\"winding2Rates.rate\" + x, \"rat\" + x + \"2\");\n+            mapping.put(\"winding3Rates.rate\" + x, \"rat\" + x + \"3\");\n+        }\n+        //withAttributesToColumnNamesForBeanWriterProcessor(mapping);", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYzMzMwNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545633307", "bodyText": "Sorry, I wrote the code to try to fix an issue with Univocity when using Rates as a nested object in TransformerWinding that is nested in Transformer. Finally I decided to move the Rates directly as nested objects in Transformer to avoid the problem. I have removed the mapping, it is not needed.", "author": "zamarrenolm", "createdAt": "2020-12-18T08:03:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxMDQ2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxNDk4MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545314981", "bodyText": "We should extract WindingHeaderTransformer and WindingRatesHeaderTransformer from this class because they are related to I/O", "author": "mathbagu", "createdAt": "2020-12-17T18:37:50Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/pf/PsseTransformer.java", "diffHunk": "@@ -0,0 +1,406 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.pf;\n+\n+import com.fasterxml.jackson.annotation.JsonFilter;\n+import com.fasterxml.jackson.annotation.JsonPropertyOrder;\n+import com.powsybl.psse.model.PsseVersioned;\n+import com.powsybl.psse.model.Revision;\n+import com.univocity.parsers.annotations.HeaderTransformer;\n+import com.univocity.parsers.annotations.Nested;\n+import com.univocity.parsers.annotations.Parsed;\n+\n+import java.lang.reflect.Field;\n+\n+/**\n+ *\n+ * @author Geoffroy Jamgotchian <geoffroy.jamgotchian at rte-france.com>\n+ */\n+\n+@JsonPropertyOrder(alphabetic = true)\n+@JsonFilter(\"PsseVersionFilter\")\n+public class PsseTransformer extends PsseVersioned {\n+\n+    @Override\n+    public void setModel(PssePowerFlowModel model) {\n+        super.setModel(model);\n+        ownership.setModel(model);\n+        winding1.setModel(model);\n+        winding2.setModel(model);\n+        winding3.setModel(model);\n+        winding1Rates.setModel(model);\n+        winding2Rates.setModel(model);\n+        winding3Rates.setModel(model);\n+    }\n+\n+    @Parsed(field = {\"i\", \"ibus\"})\n+    private int i;\n+\n+    @Parsed(field = {\"j\", \"jbus\"})\n+    private int j;\n+\n+    @Parsed(field = {\"k\", \"kbus\"})\n+    private int k = 0;\n+\n+    @Parsed(defaultNullRead = \"1\")\n+    private String ckt;\n+\n+    @Parsed\n+    private int cw = 1;\n+\n+    @Parsed\n+    private int cz = 1;\n+\n+    @Parsed\n+    private int cm = 1;\n+\n+    @Parsed\n+    private double mag1 = 0;\n+\n+    @Parsed\n+    private double mag2 = 0;\n+\n+    @Parsed(field = {\"nmetr\", \"nmet\"})\n+    private int nmetr = 2;\n+\n+    @Parsed(defaultNullRead = \"            \")\n+    private String name;\n+\n+    @Parsed\n+    private int stat = 1;\n+\n+    @Nested\n+    private PsseOwnership ownership;\n+\n+    @Parsed(defaultNullRead = \"            \")\n+    // If the issue 432 in Univocity is fixed,\n+    // the previous annotation will be correctly processed\n+    // and there would be no need to initialize vecgrp with default value\n+    // (https://github.com/uniVocity/univocity-parsers/issues/432)\n+    private String vecgrp = \"            \";\n+\n+    @Parsed\n+    @Revision(since = 35)\n+    private int zcod = 0;\n+\n+    @Parsed(field = {\"r12\", \"r1_2\"})\n+    private double r12 = 0;\n+\n+    @Parsed(field = {\"x12\", \"x1_2\"})\n+    private double x12;\n+\n+    @Parsed(field = {\"sbase12\", \"sbase1_2\"})\n+    private double sbase12 = Double.NaN;\n+\n+    @Parsed(field = {\"r23\", \"r2_3\"})\n+    private double r23 = 0;\n+\n+    @Parsed(field = {\"x23\", \"x2_3\"})\n+    private double x23 = Double.NaN;\n+\n+    @Parsed(field = {\"sbase23\", \"sbase2_3\"})\n+    private double sbase23 = Double.NaN;\n+\n+    @Parsed(field = {\"r31\", \"r3_1\"})\n+    private double r31 = 0;\n+\n+    @Parsed(field = {\"x31\", \"x3_1\"})\n+    private double x31 = Double.NaN;\n+\n+    @Parsed(field = {\"sbase31\", \"sbase3_1\"})\n+    private double sbase31 = Double.NaN;\n+\n+    @Parsed\n+    private double vmstar = 1;\n+\n+    @Parsed\n+    private double anstar = 0;\n+\n+    @Nested(headerTransformer = WindingHeaderTransformer.class, args = \"1\")\n+    private PsseTransformerWinding winding1;\n+\n+    @Nested(headerTransformer = WindingRatesHeaderTransformer.class, args = \"1\")\n+    private PsseRates winding1Rates;\n+\n+    @Nested(headerTransformer = WindingHeaderTransformer.class, args = \"2\")\n+    private PsseTransformerWinding winding2;\n+\n+    @Nested(headerTransformer = WindingRatesHeaderTransformer.class, args = \"2\")\n+    private PsseRates winding2Rates;\n+\n+    @Nested(headerTransformer = WindingHeaderTransformer.class, args = \"3\")\n+    private PsseTransformerWinding winding3;\n+\n+    @Nested(headerTransformer = WindingRatesHeaderTransformer.class, args = \"3\")\n+    private PsseRates winding3Rates;\n+\n+    public static class WindingHeaderTransformer extends HeaderTransformer {", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY1MzYzNQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545653635", "bodyText": "Moved", "author": "zamarrenolm", "createdAt": "2020-12-18T08:34:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxNDk4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxNTkxMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545315910", "bodyText": "License header is missing", "author": "mathbagu", "createdAt": "2020-12-17T18:39:21Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/pf/io/PowerFlowRecordGroup.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.powsybl.psse.model.pf.io;", "originalCommit": "c1b57e1e61f537d5f070857277f8e0084f4099d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY1Mzc0Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545653747", "bodyText": "Added", "author": "zamarrenolm", "createdAt": "2020-12-18T08:34:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTMxNTkxMA=="}], "type": "inlineReview"}, {"oid": "d51c7ff404003ae9a97cd1b57829b79b9118c914", "url": "https://github.com/powsybl/powsybl-core/commit/d51c7ff404003ae9a97cd1b57829b79b9118c914", "message": "remove unused method\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T07:38:05Z", "type": "commit"}, {"oid": "3a405a05ef1cef00a8f5c0e2c484aedbaddae9b6", "url": "https://github.com/powsybl/powsybl-core/commit/3a405a05ef1cef00a8f5c0e2c484aedbaddae9b6", "message": "remove unused code\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T08:03:01Z", "type": "commit"}, {"oid": "2368593d5fb9df6def0925eee3881c2110fb1d36", "url": "https://github.com/powsybl/powsybl-core/commit/2368593d5fb9df6def0925eee3881c2110fb1d36", "message": "relocate univocity header transformer classes in io package; add license and author headers\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T08:34:03Z", "type": "commit"}, {"oid": "e91de4ddfc2e7fcf00576a5d5bc4995f461674da", "url": "https://github.com/powsybl/powsybl-core/commit/e91de4ddfc2e7fcf00576a5d5bc4995f461674da", "message": "RAWX support starts at version 35\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T08:39:55Z", "type": "commit"}, {"oid": "de44355c7c6f3db60204fc4f76e72287791eb971", "url": "https://github.com/powsybl/powsybl-core/commit/de44355c7c6f3db60204fc4f76e72287791eb971", "message": "optimize util.retainAll for string arrays\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T09:07:56Z", "type": "commit"}, {"oid": "040c17adfc90accdb24ade36de57c90f052a0c93", "url": "https://github.com/powsybl/powsybl-core/commit/040c17adfc90accdb24ade36de57c90f052a0c93", "message": "rename ReaderWriter classes to IO (input-output); util.retainAll considers nulls\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T09:26:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxNjgyMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545716820", "bodyText": "Add an assertion here", "author": "mathbagu", "createdAt": "2020-12-18T09:44:10Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/io/RecordGroupIOJson.java", "diffHunk": "@@ -0,0 +1,194 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.io;\n+\n+import com.fasterxml.jackson.core.*;\n+import com.fasterxml.jackson.core.util.DefaultIndenter;\n+import com.fasterxml.jackson.core.util.DefaultPrettyPrinter;\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.powsybl.commons.PowsyblException;\n+import com.powsybl.psse.model.PsseException;\n+import org.apache.commons.lang3.StringUtils;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.io.OutputStream;\n+import java.util.ArrayList;\n+import java.util.List;\n+import java.util.Objects;\n+\n+import static com.powsybl.psse.model.io.RecordGroupIdentification.JsonObjectType.DATA_TABLE;\n+import static com.powsybl.psse.model.io.RecordGroupIdentification.JsonObjectType.PARAMETER_SET;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class RecordGroupIOJson<T> implements RecordGroupIO<T> {\n+    private final AbstractRecordGroup<T> recordGroup;\n+\n+    public RecordGroupIOJson(AbstractRecordGroup<T> recordGroup) {\n+        this.recordGroup = recordGroup;", "originalCommit": "040c17adfc90accdb24ade36de57c90f052a0c93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyODk4Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545728983", "bodyText": "Done. Also for RecordGroupIOLegacyText", "author": "zamarrenolm", "createdAt": "2020-12-18T10:06:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcxNjgyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyNTE3Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545725173", "bodyText": "To be removed", "author": "mathbagu", "createdAt": "2020-12-18T09:58:27Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/pf/PsseTransformerWinding.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.pf;\n+\n+import com.powsybl.psse.model.PsseVersioned;\n+import com.powsybl.psse.model.Revision;\n+import com.univocity.parsers.annotations.Parsed;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class PsseTransformerWinding extends PsseVersioned {\n+    @Override\n+    public void setModel(PssePowerFlowModel model) {\n+        super.setModel(model);\n+    }", "originalCommit": "040c17adfc90accdb24ade36de57c90f052a0c93", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyOTgzMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r545729832", "bodyText": "Done. Override was needed when trying to use Rates nested in each TransformerWinding instead of a Transformer level. Now it is not required.", "author": "zamarrenolm", "createdAt": "2020-12-18T10:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcyNTE3Mw=="}], "type": "inlineReview"}, {"oid": "3a212d908ba50af05dd60e6688105cf22971a3ec", "url": "https://github.com/powsybl/powsybl-core/commit/3a212d908ba50af05dd60e6688105cf22971a3ec", "message": "small fixes\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-18T10:05:39Z", "type": "commit"}, {"oid": "a8fbee8c3d0355efb30cc8d2d84af2f971d365cd", "url": "https://github.com/powsybl/powsybl-core/commit/a8fbee8c3d0355efb30cc8d2d84af2f971d365cd", "message": "Parser by fields. Read fields. Support whitespace delimiter.\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-06T07:49:48Z", "type": "commit"}, {"oid": "62931aebcb3ec8a332deb8185e236355f9f7e83e", "url": "https://github.com/powsybl/powsybl-core/commit/62931aebcb3ec8a332deb8185e236355f9f7e83e", "message": "Merge branch 'master' into psse_parserByField\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>\n\n# Conflicts:\n#\tpsse/psse-converter/src/main/java/com/powsybl/psse/converter/PsseImporter.java", "committedDate": "2020-07-07T22:05:27Z", "type": "commit"}, {"oid": "d0553714036fd1838244530677b4276437a12391", "url": "https://github.com/powsybl/powsybl-core/commit/d0553714036fd1838244530677b4276437a12391", "message": "Delete duplicated code\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-07T22:29:03Z", "type": "commit"}, {"oid": "144e2f9f8403a724657e2efdecd89cc96484cf83", "url": "https://github.com/powsybl/powsybl-core/commit/144e2f9f8403a724657e2efdecd89cc96484cf83", "message": "Support version 33 and 35\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-09T17:46:59Z", "type": "commit"}, {"oid": "19e1006791ea3d3b64dd4cbd784fc2af81349920", "url": "https://github.com/powsybl/powsybl-core/commit/19e1006791ea3d3b64dd4cbd784fc2af81349920", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-07-13T12:53:59Z", "type": "commit"}, {"oid": "32f6c11a1a9c642704f9056893d10c8ab6ec0413", "url": "https://github.com/powsybl/powsybl-core/commit/32f6c11a1a9c642704f9056893d10c8ab6ec0413", "message": "Extend to version 33 and 35", "committedDate": "2020-07-14T09:41:07Z", "type": "commit"}, {"oid": "b16f455fc5c7ffa4cc4614e76324f52090689016", "url": "https://github.com/powsybl/powsybl-core/commit/b16f455fc5c7ffa4cc4614e76324f52090689016", "message": "SwitchedShunt, extend to version 35.\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-14T15:53:03Z", "type": "commit"}, {"oid": "fd81ec9ac8883e50652c26420a63413437d68a6b", "url": "https://github.com/powsybl/powsybl-core/commit/fd81ec9ac8883e50652c26420a63413437d68a6b", "message": "Transformers, extend to version 35\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-15T21:59:46Z", "type": "commit"}, {"oid": "e25edaa51fb90a11ed2702ab7d5b5c2f62095c0c", "url": "https://github.com/powsybl/powsybl-core/commit/e25edaa51fb90a11ed2702ab7d5b5c2f62095c0c", "message": "Adjustments. Read IEEE_14_buses_rev34.rawx\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-16T16:54:04Z", "type": "commit"}, {"oid": "a467927a4aeac8b5c89048f61684c3d1366b222e", "url": "https://github.com/powsybl/powsybl-core/commit/a467927a4aeac8b5c89048f61684c3d1366b222e", "message": "Add unitary tests\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-17T06:58:21Z", "type": "commit"}, {"oid": "a5115de10d388f2b549a9b7f1e456f46afc8d58e", "url": "https://github.com/powsybl/powsybl-core/commit/a5115de10d388f2b549a9b7f1e456f46afc8d58e", "message": "set defaultNullRead\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-19T16:24:19Z", "type": "commit"}, {"oid": "9f3750fdb55d1fc2a6648fa37ae1568f59c7b04c", "url": "https://github.com/powsybl/powsybl-core/commit/9f3750fdb55d1fc2a6648fa37ae1568f59c7b04c", "message": "PsseConstants. Read rev35.\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-19T16:34:23Z", "type": "commit"}, {"oid": "d04713ac8e62c3758444813500f005a23c4f3825", "url": "https://github.com/powsybl/powsybl-core/commit/d04713ac8e62c3758444813500f005a23c4f3825", "message": "Fix supported versiones\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-19T17:30:24Z", "type": "commit"}, {"oid": "b8e5aab753a965482b822520480302f5525fbdd5", "url": "https://github.com/powsybl/powsybl-core/commit/b8e5aab753a965482b822520480302f5525fbdd5", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-07-19T18:34:03Z", "type": "commit"}, {"oid": "5616158e49fefda1fe4cc590739b5910752b3f39", "url": "https://github.com/powsybl/powsybl-core/commit/5616158e49fefda1fe4cc590739b5910752b3f39", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-07-26T15:37:14Z", "type": "commit"}, {"oid": "99fa3d7bbc3357d62c6654f1dd7364297e9c362c", "url": "https://github.com/powsybl/powsybl-core/commit/99fa3d7bbc3357d62c6654f1dd7364297e9c362c", "message": "Fix sonar warnings\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-07-26T16:27:22Z", "type": "commit"}, {"oid": "580370a54b661c1822eaed794ab85f5249ba1107", "url": "https://github.com/powsybl/powsybl-core/commit/580370a54b661c1822eaed794ab85f5249ba1107", "message": "Merge branch 'master' into psse_Version33Version35\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>\n\n# Conflicts:\n#\tpsse/psse-converter/src/main/java/com/powsybl/psse/converter/PsseImporter.java", "committedDate": "2020-07-30T08:57:32Z", "type": "commit"}, {"oid": "38b227326acc4b77d59cea612da3e635de373b72", "url": "https://github.com/powsybl/powsybl-core/commit/38b227326acc4b77d59cea612da3e635de373b72", "message": "Pretty code\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-08-03T14:04:55Z", "type": "commit"}, {"oid": "639cf06bde0835d2b739ef66514d5bcc0d442938", "url": "https://github.com/powsybl/powsybl-core/commit/639cf06bde0835d2b739ef66514d5bcc0d442938", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-08-04T14:40:28Z", "type": "commit"}, {"oid": "1b97c9621b23a0de4b88f0dce2ddfaa74e1a1c81", "url": "https://github.com/powsybl/powsybl-core/commit/1b97c9621b23a0de4b88f0dce2ddfaa74e1a1c81", "message": "Fix patterns\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-08-04T16:35:21Z", "type": "commit"}, {"oid": "84510c86a3ca1c3826d8d771d5b571adb2cb3135", "url": "https://github.com/powsybl/powsybl-core/commit/84510c86a3ca1c3826d8d771d5b571adb2cb3135", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-08-29T16:42:58Z", "type": "commit"}, {"oid": "3abed8a0db6b2bb99f23a4a8c186c9ac2bcdcafd", "url": "https://github.com/powsybl/powsybl-core/commit/3abed8a0db6b2bb99f23a4a8c186c9ac2bcdcafd", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-09-03T16:23:42Z", "type": "commit"}, {"oid": "24102d5f47b15ab6f3cc95cad5cb3d877666ba6a", "url": "https://github.com/powsybl/powsybl-core/commit/24102d5f47b15ab6f3cc95cad5cb3d877666ba6a", "message": "Fix sonar warnings\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-09-03T22:19:07Z", "type": "commit"}, {"oid": "29d9b94e2efc02fc4d7195d49b7d8232c6aece49", "url": "https://github.com/powsybl/powsybl-core/commit/29d9b94e2efc02fc4d7195d49b7d8232c6aece49", "message": "Fix sonar warnings\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-09-03T23:08:39Z", "type": "commit"}, {"oid": "3daf4001648cb8961f8d95b3659578a1dee6e186", "url": "https://github.com/powsybl/powsybl-core/commit/3daf4001648cb8961f8d95b3659578a1dee6e186", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-09-05T16:04:09Z", "type": "commit"}, {"oid": "e0293b2d49ecc20120d98bc43eab976944d4461e", "url": "https://github.com/powsybl/powsybl-core/commit/e0293b2d49ecc20120d98bc43eab976944d4461e", "message": "Merge branch 'master' into psse_Version33Version35\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>\n\n# Conflicts:\n#\tpsse/psse-converter/src/main/java/com/powsybl/psse/converter/PsseImporter.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseArea.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseBus.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseCaseIdentification.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseContext.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseFixedShunt.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseGenerator.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseLoad.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseNonTransformerBranch.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseOwner.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseRawReader.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseSwitchedShunt.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseTransformer.java\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseZone.java\n#\tpsse/psse-model/src/test/java/com/powsybl/psse/model/PsseRawReaderTest.java\n#\tpsse/psse-model/src/test/resources/IEEE_14_bus.json", "committedDate": "2020-11-10T09:34:20Z", "type": "commit"}, {"oid": "d091eb3f5b4018a550f6e278ef0f7eb24f2d59cf", "url": "https://github.com/powsybl/powsybl-core/commit/d091eb3f5b4018a550f6e278ef0f7eb24f2d59cf", "message": "Fix exists method, should not throw an exception if the content is invalid (not a PSS/E file.\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-11-10T12:03:19Z", "type": "commit"}, {"oid": "8dcd5ac5932a699402a0794167b06ad954ca53cf", "url": "https://github.com/powsybl/powsybl-core/commit/8dcd5ac5932a699402a0794167b06ad954ca53cf", "message": "BlockData as abstract class\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-11-10T13:37:04Z", "type": "commit"}, {"oid": "8cc39fa5add2916f631531c8e187324ebc96941e", "url": "https://github.com/powsybl/powsybl-core/commit/8cc39fa5add2916f631531c8e187324ebc96941e", "message": "Fix code smells\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-11-10T15:56:36Z", "type": "commit"}, {"oid": "0594d9f9b4a3e9a04e01d136732488c22ead04e6", "url": "https://github.com/powsybl/powsybl-core/commit/0594d9f9b4a3e9a04e01d136732488c22ead04e6", "message": "Fix new code smell\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-11-10T16:21:25Z", "type": "commit"}, {"oid": "c2c9d82489340f817f9272ff482f2ceac5a3fdde", "url": "https://github.com/powsybl/powsybl-core/commit/c2c9d82489340f817f9272ff482f2ceac5a3fdde", "message": "move test resources to the right folder\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-11T12:03:17Z", "type": "commit"}, {"oid": "8a21c6b5791939ca066b0b20fd4575c3ba73cfcd", "url": "https://github.com/powsybl/powsybl-core/commit/8a21c6b5791939ca066b0b20fd4575c3ba73cfcd", "message": "refactoring (work in progress): reduce duplicated code, separate classes for reading by version and format\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-13T15:25:28Z", "type": "commit"}, {"oid": "19a9c2e0071f2a7c07c46fc7e3dee383bff49b78", "url": "https://github.com/powsybl/powsybl-core/commit/19a9c2e0071f2a7c07c46fc7e3dee383bff49b78", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-11-13T15:36:27Z", "type": "commit"}, {"oid": "241424a310b86746c80716da442abca15ee00da7", "url": "https://github.com/powsybl/powsybl-core/commit/241424a310b86746c80716da442abca15ee00da7", "message": "refactoring (work in progress): uniform naming, use record group following PSSE documentation\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T12:52:04Z", "type": "commit"}, {"oid": "9ee29d0232029d3d579b91cacf6dbc6875094fd4", "url": "https://github.com/powsybl/powsybl-core/commit/9ee29d0232029d3d579b91cacf6dbc6875094fd4", "message": "refactoring (work in progress): uniform naming read from Json node\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T12:57:36Z", "type": "commit"}, {"oid": "39b06f0e7d5419fc08939eb121d61d81beaa4172", "url": "https://github.com/powsybl/powsybl-core/commit/39b06f0e7d5419fc08939eb121d61d81beaa4172", "message": "refactoring (work in progress): simplify case identification\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T13:11:56Z", "type": "commit"}, {"oid": "9a8a12bff82fb12f0722d1a6fa0cba6a172e9e61", "url": "https://github.com/powsybl/powsybl-core/commit/9a8a12bff82fb12f0722d1a6fa0cba6a172e9e61", "message": "refactoring (work in progress): simplify case identification read from Json RAWX\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T15:01:11Z", "type": "commit"}, {"oid": "42e65446f4f58de216d9169cabd76330f7dd57bd", "url": "https://github.com/powsybl/powsybl-core/commit/42e65446f4f58de216d9169cabd76330f7dd57bd", "message": "refactoring (work in progress): simplify case identification read from Json RAWX\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T15:01:29Z", "type": "commit"}, {"oid": "9b606af0f600718863aa65892fb078a84b875546", "url": "https://github.com/powsybl/powsybl-core/commit/9b606af0f600718863aa65892fb078a84b875546", "message": "refactoring (work in progress): naming, overload read instead of separate method readx\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T15:04:44Z", "type": "commit"}, {"oid": "b7dbd7573811b0c2ce7dd87beb3d224f676bf100", "url": "https://github.com/powsybl/powsybl-core/commit/b7dbd7573811b0c2ce7dd87beb3d224f676bf100", "message": "refactoring (work in progress): simplify reading transformers from rawx\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T15:22:13Z", "type": "commit"}, {"oid": "2976909d00e1ff74013224d0e560ad71eb3484c5", "url": "https://github.com/powsybl/powsybl-core/commit/2976909d00e1ff74013224d0e560ad71eb3484c5", "message": "refactoring (work in progress): single instance of CSV parser settings stored in context\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T16:20:06Z", "type": "commit"}, {"oid": "ceb2a6cfc71f38ce091e573baac9680e0a92526e", "url": "https://github.com/powsybl/powsybl-core/commit/ceb2a6cfc71f38ce091e573baac9680e0a92526e", "message": "refactoring (work in progress): simplify transformer records read\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T22:26:07Z", "type": "commit"}, {"oid": "a97e6ef1b973f65c7c3d223fbd094a38a21e9f26", "url": "https://github.com/powsybl/powsybl-core/commit/a97e6ef1b973f65c7c3d223fbd094a38a21e9f26", "message": "refactoring (work in progress): fix code smells\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-14T23:29:39Z", "type": "commit"}, {"oid": "ed351ea8f85550943cec09632749818168cd6214", "url": "https://github.com/powsybl/powsybl-core/commit/ed351ea8f85550943cec09632749818168cd6214", "message": "refactoring: record groups\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-15T17:20:54Z", "type": "commit"}, {"oid": "b995e8486e69dcf1a2066d60b8b37753fde43801", "url": "https://github.com/powsybl/powsybl-core/commit/b995e8486e69dcf1a2066d60b8b37753fde43801", "message": "separate raw data classes for checking valid file and get version\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-16T09:38:26Z", "type": "commit"}, {"oid": "645acd4773a586f4dbf37025e2ec9636e74b07b7", "url": "https://github.com/powsybl/powsybl-core/commit/645acd4773a586f4dbf37025e2ec9636e74b07b7", "message": "fix code smell\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-16T09:42:37Z", "type": "commit"}, {"oid": "b6f59fc0f45928d1a6f06f92efbabfd208488a2d", "url": "https://github.com/powsybl/powsybl-core/commit/b6f59fc0f45928d1a6f06f92efbabfd208488a2d", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-11-16T09:43:15Z", "type": "commit"}, {"oid": "bc00cd2c7e13d3bd0127febeea84079b4032b947", "url": "https://github.com/powsybl/powsybl-core/commit/bc00cd2c7e13d3bd0127febeea84079b4032b947", "message": "fix code smell\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-16T10:31:53Z", "type": "commit"}, {"oid": "dbadda4049e754776ace168370962fae85bb49a7", "url": "https://github.com/powsybl/powsybl-core/commit/dbadda4049e754776ace168370962fae85bb49a7", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-11-16T10:32:28Z", "type": "commit"}, {"oid": "7a2ef89edd308aca87073c8263a6144317c3657d", "url": "https://github.com/powsybl/powsybl-core/commit/7a2ef89edd308aca87073c8263a6144317c3657d", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-11-16T18:22:10Z", "type": "commit"}, {"oid": "29aa57bcb203f86c63bdf1d6ce6592acc7fcb597", "url": "https://github.com/powsybl/powsybl-core/commit/29aa57bcb203f86c63bdf1d6ce6592acc7fcb597", "message": "Support whitespace as delimiter\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-11-18T16:48:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MDIyOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526850229", "bodyText": "I don't know if it would be useful but I would create an assertThrows custom version that also assert the message:\n PsseException x = assertThrows(PsseException.class, expectedMessage, () -> {\n            psseImporter.importData(dataSource, networkFactory, null);\n        });", "author": "mathbagu", "createdAt": "2020-11-19T12:41:39Z", "path": "psse/psse-converter/src/test/java/com/powsybl/psse/converter/PsseImporterTest.java", "diffHunk": "@@ -107,15 +112,36 @@ public void importTestT3W() throws IOException {\n         importTest(\"ThreeMIB_T3W_modified\", \"ThreeMIB_T3W_modified.RAW\", true);\n     }\n \n-    @Test(expected = PsseException.class)\n-    public void badVersionTest() {\n+    @Test()\n+    public void badModeTest() {\n         ReadOnlyDataSource dataSource = new ResourceDataSource(\"case-flag-not-supported\", new ResourceSet(\"/\", \"case-flag-not-supported.raw\"));\n-        new PsseImporter().importData(dataSource, new NetworkFactoryImpl(), null);\n+        PsseImporter psseImporter = new PsseImporter();\n+        NetworkFactory networkFactory = new NetworkFactoryImpl();\n+        PsseException x = assertThrows(PsseException.class, () -> {\n+            psseImporter.importData(dataSource, networkFactory, null);\n+        });\n+        assertEquals(\"Incremental load of data option (IC = 1) is not supported\", x.getMessage());", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUxNTg5Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527515897", "bodyText": "I like the way this can be expressed using assertj. Even people from junit recommend it (junit-team/junit5#2128). And we already have assertj in the project, is not a new dependency.", "author": "zamarrenolm", "createdAt": "2020-11-20T08:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MDIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MDYxMw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526850613", "bodyText": "We prefer to sort dependencies by groupId:artifactId and regroup dependencies by scope", "author": "mathbagu", "createdAt": "2020-11-19T12:42:19Z", "path": "psse/psse-model/pom.xml", "diffHunk": "@@ -48,6 +48,10 @@\n         <dependency>\n             <groupId>com.univocity</groupId>\n             <artifactId>univocity-parsers</artifactId>\n+        </dependency>\n+\t\t<dependency>\n+            <groupId>com.fasterxml.jackson.core</groupId>\n+            <artifactId>jackson-databind</artifactId>", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUxODM4Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527518383", "bodyText": "adjusted", "author": "zamarrenolm", "createdAt": "2020-11-20T08:23:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MDYxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MTIxMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526851212", "bodyText": "Would be more pretty to wrtie PsseVersion.isSupported(rev) or maybe a PsseVersion.checkVersion(rev) method", "author": "mathbagu", "createdAt": "2020-11-19T12:43:33Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseCaseIdentification.java", "diffHunk": "@@ -101,4 +104,21 @@ public String getTitle2() {\n     public void setTitle2(String title2) {\n         this.title2 = title2;\n     }\n+\n+    public void validate() {\n+        if (ic == 1) {\n+            throw new PsseException(\"Incremental load of data option (IC = 1) is not supported\");\n+        }\n+        if (!PsseVersion.supportedVersions().contains(rev)) {", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNjc3Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527636777", "bodyText": "Like it. PsseVersion now answers isVersionSupported(rev) and returns a string with all supportedVersions().", "author": "zamarrenolm", "createdAt": "2020-11-20T11:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1MTIxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NTQxNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526855417", "bodyText": "I don't know if it's recommanded or not to use static initializer. Maybe we can replace by an initialization like this:\nprivate static final Map<Integer, PsseVersion> BY_NUMBER = Arrays.stream(values()).collect(Collectors.toMap(...));", "author": "mathbagu", "createdAt": "2020-11-19T12:50:15Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseConstants.java", "diffHunk": "@@ -6,14 +6,45 @@\n  */\n package com.powsybl.psse.model;\n \n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n /**\n- *\n  * @author Geoffroy Jamgotchian <geoffroy.jamgotchian at rte-france.com>\n  */\n public final class PsseConstants {\n \n     private PsseConstants() {\n     }\n \n-    public static final int SUPPORTED_VERSION = 33;\n+    public enum PsseVersion {\n+        VERSION_33(33),\n+        VERSION_35(35);\n+\n+        private final int number;\n+        private static final Map<Integer, PsseVersion> BY_NUMBER = new HashMap<>();\n+\n+        static {\n+            for (PsseVersion v : PsseVersion.values()) {\n+                BY_NUMBER.put(v.getNumber(), v);\n+            }\n+        }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzUyMzY4Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527523687", "bodyText": "Agree, static initializer blocks makes sense only when more complex code is required.", "author": "zamarrenolm", "createdAt": "2020-11-20T08:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NTQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NjM3NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526856374", "bodyText": "If you follow my advice, maybe the BY_NUMBER map is not needed anymore.", "author": "mathbagu", "createdAt": "2020-11-19T12:51:48Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseConstants.java", "diffHunk": "@@ -6,14 +6,45 @@\n  */\n package com.powsybl.psse.model;\n \n+import java.util.HashMap;\n+import java.util.Map;\n+import java.util.Set;\n+\n /**\n- *\n  * @author Geoffroy Jamgotchian <geoffroy.jamgotchian at rte-france.com>\n  */\n public final class PsseConstants {\n \n     private PsseConstants() {\n     }\n \n-    public static final int SUPPORTED_VERSION = 33;\n+    public enum PsseVersion {\n+        VERSION_33(33),\n+        VERSION_35(35);\n+\n+        private final int number;\n+        private static final Map<Integer, PsseVersion> BY_NUMBER = new HashMap<>();\n+\n+        static {\n+            for (PsseVersion v : PsseVersion.values()) {\n+                BY_NUMBER.put(v.getNumber(), v);\n+            }\n+        }\n+\n+        private PsseVersion(int number) {\n+            this.number = number;\n+        }\n+\n+        public static PsseVersion fromNumber(int number) {\n+            return BY_NUMBER.get(number);\n+        }\n+\n+        public static Set<Integer> supportedVersions() {\n+            return BY_NUMBER.keySet();\n+        }\n+\n+        public int getNumber() {\n+            return number;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0MDY3MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527640671", "bodyText": "It is required to obtain the proper Enum value given an integer value read from the case. We want the version to be passed along the different methods that will manage the conversion using a specific type instead of a generic int.", "author": "zamarrenolm", "createdAt": "2020-11-20T11:51:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1NjM3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1ODcxOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526858719", "bodyText": "To be discussed: I notice that you create sub classes to support the v35 model. Maybe we should consider to have a single class for both version, but have access to the model version to throw exception when some getters/setters are not available. Something equivalent to what we have in the XIIDM parser", "author": "mathbagu", "createdAt": "2020-11-19T12:55:39Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseNonTransformerBranch35.java", "diffHunk": "@@ -0,0 +1,194 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.univocity.parsers.annotations.Parsed;\n+\n+/**\n+ *\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+\n+@JsonIgnoreProperties({ \"ratea\", \"rateb\", \"ratec\" })\n+\n+public class PsseNonTransformerBranch35 extends PsseNonTransformerBranch {\n+\n+    @Parsed(defaultNullRead = \" \")\n+    private String name;\n+\n+    @Parsed\n+    private double rate1 = 0;\n+\n+    @Parsed\n+    private double rate2 = 0;\n+\n+    @Parsed\n+    private double rate3 = 0;\n+\n+    @Parsed\n+    private double rate4 = 0;\n+\n+    @Parsed\n+    private double rate5 = 0;\n+\n+    @Parsed\n+    private double rate6 = 0;\n+\n+    @Parsed\n+    private double rate7 = 0;\n+\n+    @Parsed\n+    private double rate8 = 0;\n+\n+    @Parsed\n+    private double rate9 = 0;\n+\n+    @Parsed\n+    private double rate10 = 0;\n+\n+    @Parsed\n+    private double rate11 = 0;\n+\n+    @Parsed\n+    private double rate12 = 0;\n+\n+    @Override\n+    public double getRatea() {\n+        throw new PsseException(\"Ratea not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRatea(double ratea) {\n+        throw new PsseException(\"Ratea not available in version 35\");\n+    }\n+\n+    @Override\n+    public double getRateb() {\n+        throw new PsseException(\"Rateb not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRateb(double rateb) {\n+        throw new PsseException(\"Rateb not available in version 35\");\n+    }\n+\n+    @Override\n+    public double getRatec() {\n+        throw new PsseException(\"Ratec not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRatec(double ratec) {\n+        throw new PsseException(\"Ratec not available in version 35\");\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1ODkwOA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526858908", "bodyText": "Could it be null?", "author": "mathbagu", "createdAt": "2020-11-19T12:55:58Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/PsseNonTransformerBranch35.java", "diffHunk": "@@ -0,0 +1,194 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model;\n+\n+import com.fasterxml.jackson.annotation.JsonIgnoreProperties;\n+import com.univocity.parsers.annotations.Parsed;\n+\n+/**\n+ *\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+\n+@JsonIgnoreProperties({ \"ratea\", \"rateb\", \"ratec\" })\n+\n+public class PsseNonTransformerBranch35 extends PsseNonTransformerBranch {\n+\n+    @Parsed(defaultNullRead = \" \")\n+    private String name;\n+\n+    @Parsed\n+    private double rate1 = 0;\n+\n+    @Parsed\n+    private double rate2 = 0;\n+\n+    @Parsed\n+    private double rate3 = 0;\n+\n+    @Parsed\n+    private double rate4 = 0;\n+\n+    @Parsed\n+    private double rate5 = 0;\n+\n+    @Parsed\n+    private double rate6 = 0;\n+\n+    @Parsed\n+    private double rate7 = 0;\n+\n+    @Parsed\n+    private double rate8 = 0;\n+\n+    @Parsed\n+    private double rate9 = 0;\n+\n+    @Parsed\n+    private double rate10 = 0;\n+\n+    @Parsed\n+    private double rate11 = 0;\n+\n+    @Parsed\n+    private double rate12 = 0;\n+\n+    @Override\n+    public double getRatea() {\n+        throw new PsseException(\"Ratea not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRatea(double ratea) {\n+        throw new PsseException(\"Ratea not available in version 35\");\n+    }\n+\n+    @Override\n+    public double getRateb() {\n+        throw new PsseException(\"Rateb not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRateb(double rateb) {\n+        throw new PsseException(\"Rateb not available in version 35\");\n+    }\n+\n+    @Override\n+    public double getRatec() {\n+        throw new PsseException(\"Ratec not available in version 35\");\n+    }\n+\n+    @Override\n+    public void setRatec(double ratec) {\n+        throw new PsseException(\"Ratec not available in version 35\");\n+    }\n+\n+    public String getName() {\n+        return name;\n+    }\n+\n+    public void setName(String name) {\n+        this.name = name;", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0MzY0OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527643649", "bodyText": "No, it never should be null. Parser should provide an empty string. Added Objects.requireNonNull.", "author": "zamarrenolm", "createdAt": "2020-11-20T11:57:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg1ODkwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDE2Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526860163", "bodyText": "Replace by a switch case to prepare to support additional versions. The default case should throw an exception", "author": "mathbagu", "createdAt": "2020-11-19T12:58:03Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/AreaInterchangeData.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseArea;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class AreaInterchangeData extends AbstractRecordGroup<PsseArea> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"iarea\", \"isw\", \"pdes\", \"ptol\", \"arname\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"isw\", \"pdes\", \"ptol\", \"arname\"};\n+\n+    AreaInterchangeData() {\n+        super(PsseRecordGroup.AREA_INTERCHANGE_DATA);\n+    }\n+\n+    @Override\n+    public Class<PsseArea> psseTypeClass(PsseVersion version) {\n+        return PsseArea.class;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NTc2Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527755766", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:10:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDE2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDI2Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526860266", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T12:58:15Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/BusData.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseBus;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class BusData extends AbstractRecordGroup<PsseBus> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"ibus\", \"name\", \"baskv\", \"ide\", \"area\", \"zone\", \"owner\", \"vm\", \"va\", \"nvhi\", \"nvlo\", \"evhi\", \"evlo\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"name\", \"baskv\", \"ide\", \"area\", \"zone\", \"owner\", \"vm\", \"va\", \"nvhi\", \"nvlo\", \"evhi\", \"evlo\"};\n+\n+    BusData() {\n+        super(PsseRecordGroup.BUS_DATA);\n+    }\n+\n+    @Override\n+    public Class<PsseBus> psseTypeClass(PsseVersion version) {\n+        return PsseBus.class;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NTgzMw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527755833", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:10:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDI2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDg2Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526860867", "bodyText": "Not sure that the super is needed", "author": "mathbagu", "createdAt": "2020-11-19T12:59:11Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/CaseIdentificationData.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class CaseIdentificationData extends AbstractRecordGroup<PsseCaseIdentification> {\n+\n+    private static final String[] FIELD_NAMES = {\"ic\", \"sbase\", \"rev\", \"xfrrat\", \"nxfrat\", \"basfrq\", \"title1\", \"title2\"};\n+\n+    CaseIdentificationData() {\n+        super(PsseRecordGroup.CASE_IDENTIFICATION_DATA);\n+    }\n+\n+    public PsseCaseIdentification read1(BufferedReader reader, Context context) throws IOException {\n+        String line = Util.readLineAndRemoveComment(reader);\n+        context.detectDelimiter(line);\n+\n+        String[] headers = fieldNames(context.getVersion());\n+        PsseCaseIdentification caseIdentification = parseSingleRecord(line, headers, context);\n+        caseIdentification.setTitle1(reader.readLine());\n+        caseIdentification.setTitle2(reader.readLine());\n+\n+        context.setFieldNames(getRecordGroup(), headers);\n+        context.setVersion(PsseVersion.fromNumber(caseIdentification.getRev()));\n+        return caseIdentification;\n+    }\n+\n+    PsseCaseIdentification read1(JsonNode networkNode, Context context) {\n+        context.setDelimiter(\",\");\n+        PsseCaseIdentification caseIdentification = super.read(networkNode, context).get(0);", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MDQwNg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527650406", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:10:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MDg2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MTEyMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526861120", "bodyText": "Why this method is private package and the other one public?", "author": "mathbagu", "createdAt": "2020-11-19T12:59:34Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/CaseIdentificationData.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class CaseIdentificationData extends AbstractRecordGroup<PsseCaseIdentification> {\n+\n+    private static final String[] FIELD_NAMES = {\"ic\", \"sbase\", \"rev\", \"xfrrat\", \"nxfrat\", \"basfrq\", \"title1\", \"title2\"};\n+\n+    CaseIdentificationData() {\n+        super(PsseRecordGroup.CASE_IDENTIFICATION_DATA);\n+    }\n+\n+    public PsseCaseIdentification read1(BufferedReader reader, Context context) throws IOException {\n+        String line = Util.readLineAndRemoveComment(reader);\n+        context.detectDelimiter(line);\n+\n+        String[] headers = fieldNames(context.getVersion());\n+        PsseCaseIdentification caseIdentification = parseSingleRecord(line, headers, context);\n+        caseIdentification.setTitle1(reader.readLine());\n+        caseIdentification.setTitle2(reader.readLine());\n+\n+        context.setFieldNames(getRecordGroup(), headers);\n+        context.setVersion(PsseVersion.fromNumber(caseIdentification.getRev()));\n+        return caseIdentification;\n+    }\n+\n+    PsseCaseIdentification read1(JsonNode networkNode, Context context) {", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MDQ1OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527650458", "bodyText": "Fixed. Both read1 methods should be private package. Not expected to be used outside.", "author": "zamarrenolm", "createdAt": "2020-11-20T12:10:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MTEyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MTkzMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526861932", "bodyText": "Why this method is private package and the other one public?", "author": "mathbagu", "createdAt": "2020-11-19T13:00:49Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/CaseIdentificationData.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class CaseIdentificationData extends AbstractRecordGroup<PsseCaseIdentification> {\n+\n+    private static final String[] FIELD_NAMES = {\"ic\", \"sbase\", \"rev\", \"xfrrat\", \"nxfrat\", \"basfrq\", \"title1\", \"title2\"};\n+\n+    CaseIdentificationData() {\n+        super(PsseRecordGroup.CASE_IDENTIFICATION_DATA);\n+    }\n+\n+    public PsseCaseIdentification read1(BufferedReader reader, Context context) throws IOException {\n+        String line = Util.readLineAndRemoveComment(reader);\n+        context.detectDelimiter(line);\n+\n+        String[] headers = fieldNames(context.getVersion());\n+        PsseCaseIdentification caseIdentification = parseSingleRecord(line, headers, context);\n+        caseIdentification.setTitle1(reader.readLine());\n+        caseIdentification.setTitle2(reader.readLine());\n+\n+        context.setFieldNames(getRecordGroup(), headers);\n+        context.setVersion(PsseVersion.fromNumber(caseIdentification.getRev()));\n+        return caseIdentification;\n+    }\n+\n+    PsseCaseIdentification read1(JsonNode networkNode, Context context) {", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MDYyMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527650622", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:10:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MTkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MjI1Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526862256", "bodyText": "Remove the this prefix", "author": "mathbagu", "createdAt": "2020-11-19T13:01:21Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/Context.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.univocity.parsers.common.DataProcessingException;\n+import com.univocity.parsers.common.ParsingContext;\n+import com.univocity.parsers.common.RetryableErrorHandler;\n+import com.univocity.parsers.csv.CsvParser;\n+import com.univocity.parsers.csv.CsvParserSettings;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.EnumMap;\n+import java.util.Map;\n+\n+import static com.powsybl.psse.model.data.AbstractRecordGroup.PsseRecordGroup;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class Context {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(Context.class);\n+\n+    private final Map<PsseRecordGroup, String[]> fieldNames = new EnumMap<>(PsseRecordGroup.class);\n+    private final CsvParserSettings csvParserSettings;\n+    private String delimiter;\n+    private PsseVersion version;\n+    private int currentRecordGroupMaxNumFields;\n+\n+    public Context() {\n+        csvParserSettings = new CsvParserSettings();\n+        csvParserSettings.setHeaderExtractionEnabled(false);\n+        csvParserSettings.setQuoteDetectionEnabled(true);\n+        csvParserSettings.setProcessorErrorHandler(new RetryableErrorHandler<ParsingContext>() {\n+            @Override\n+            public void handleError(DataProcessingException error, Object[] inputRow, ParsingContext context) {\n+                LOGGER.error(error.getMessage());\n+            }\n+        });\n+    }\n+\n+    public PsseVersion getVersion() {\n+        return this.version;", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MDY2MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527650661", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:10:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2MjI1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2Mjc3Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r526862777", "bodyText": "Consider toString vs getMessage", "author": "mathbagu", "createdAt": "2020-11-19T13:02:10Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/Context.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.univocity.parsers.common.DataProcessingException;\n+import com.univocity.parsers.common.ParsingContext;\n+import com.univocity.parsers.common.RetryableErrorHandler;\n+import com.univocity.parsers.csv.CsvParser;\n+import com.univocity.parsers.csv.CsvParserSettings;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.EnumMap;\n+import java.util.Map;\n+\n+import static com.powsybl.psse.model.data.AbstractRecordGroup.PsseRecordGroup;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class Context {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(Context.class);\n+\n+    private final Map<PsseRecordGroup, String[]> fieldNames = new EnumMap<>(PsseRecordGroup.class);\n+    private final CsvParserSettings csvParserSettings;\n+    private String delimiter;\n+    private PsseVersion version;\n+    private int currentRecordGroupMaxNumFields;\n+\n+    public Context() {\n+        csvParserSettings = new CsvParserSettings();\n+        csvParserSettings.setHeaderExtractionEnabled(false);\n+        csvParserSettings.setQuoteDetectionEnabled(true);\n+        csvParserSettings.setProcessorErrorHandler(new RetryableErrorHandler<ParsingContext>() {\n+            @Override\n+            public void handleError(DataProcessingException error, Object[] inputRow, ParsingContext context) {\n+                LOGGER.error(error.getMessage());", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MTM5NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527651394", "bodyText": "Adjusted, we log the ParsingContext and the Throwable error for easier identification of the potential problems.", "author": "zamarrenolm", "createdAt": "2020-11-20T12:12:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjg2Mjc3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Mjg3NQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527092875", "bodyText": "Remove extra this prefix", "author": "mathbagu", "createdAt": "2020-11-19T18:06:08Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/Context.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.univocity.parsers.common.DataProcessingException;\n+import com.univocity.parsers.common.ParsingContext;\n+import com.univocity.parsers.common.RetryableErrorHandler;\n+import com.univocity.parsers.csv.CsvParser;\n+import com.univocity.parsers.csv.CsvParserSettings;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.EnumMap;\n+import java.util.Map;\n+\n+import static com.powsybl.psse.model.data.AbstractRecordGroup.PsseRecordGroup;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class Context {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(Context.class);\n+\n+    private final Map<PsseRecordGroup, String[]> fieldNames = new EnumMap<>(PsseRecordGroup.class);\n+    private final CsvParserSettings csvParserSettings;\n+    private String delimiter;\n+    private PsseVersion version;\n+    private int currentRecordGroupMaxNumFields;\n+\n+    public Context() {\n+        csvParserSettings = new CsvParserSettings();\n+        csvParserSettings.setHeaderExtractionEnabled(false);\n+        csvParserSettings.setQuoteDetectionEnabled(true);\n+        csvParserSettings.setProcessorErrorHandler(new RetryableErrorHandler<ParsingContext>() {\n+            @Override\n+            public void handleError(DataProcessingException error, Object[] inputRow, ParsingContext context) {\n+                LOGGER.error(error.getMessage());\n+            }\n+        });\n+    }\n+\n+    public PsseVersion getVersion() {\n+        return this.version;\n+    }\n+\n+    public Context setVersion(PsseVersion version) {\n+        this.version = version;\n+        return this;\n+    }\n+\n+    public String getDelimiter() {\n+        return this.delimiter;", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MjIzMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527652230", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:14:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Mjg3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzA4OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093088", "bodyText": "Remove extra this prefix", "author": "mathbagu", "createdAt": "2020-11-19T18:06:30Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/Context.java", "diffHunk": "@@ -0,0 +1,108 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.univocity.parsers.common.DataProcessingException;\n+import com.univocity.parsers.common.ParsingContext;\n+import com.univocity.parsers.common.RetryableErrorHandler;\n+import com.univocity.parsers.csv.CsvParser;\n+import com.univocity.parsers.csv.CsvParserSettings;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import java.util.EnumMap;\n+import java.util.Map;\n+\n+import static com.powsybl.psse.model.data.AbstractRecordGroup.PsseRecordGroup;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class Context {\n+\n+    private static final Logger LOGGER = LoggerFactory.getLogger(Context.class);\n+\n+    private final Map<PsseRecordGroup, String[]> fieldNames = new EnumMap<>(PsseRecordGroup.class);\n+    private final CsvParserSettings csvParserSettings;\n+    private String delimiter;\n+    private PsseVersion version;\n+    private int currentRecordGroupMaxNumFields;\n+\n+    public Context() {\n+        csvParserSettings = new CsvParserSettings();\n+        csvParserSettings.setHeaderExtractionEnabled(false);\n+        csvParserSettings.setQuoteDetectionEnabled(true);\n+        csvParserSettings.setProcessorErrorHandler(new RetryableErrorHandler<ParsingContext>() {\n+            @Override\n+            public void handleError(DataProcessingException error, Object[] inputRow, ParsingContext context) {\n+                LOGGER.error(error.getMessage());\n+            }\n+        });\n+    }\n+\n+    public PsseVersion getVersion() {\n+        return this.version;\n+    }\n+\n+    public Context setVersion(PsseVersion version) {\n+        this.version = version;\n+        return this;\n+    }\n+\n+    public String getDelimiter() {\n+        return this.delimiter;\n+    }\n+\n+    public void setDelimiter(String delimiter) {\n+        this.delimiter = delimiter;\n+    }\n+\n+    public void detectDelimiter(String record) {\n+        // The order of delimiters is relevant\n+        csvParserSettings.setDelimiterDetectionEnabled(true, ',', ' ');\n+        CsvParser parser = new CsvParser(csvParserSettings);\n+        parser.parseLine(record);\n+        csvParserSettings.setFormat(parser.getDetectedFormat());\n+        csvParserSettings.setDelimiterDetectionEnabled(false);\n+        this.delimiter = parser.getDetectedFormat().getDelimiterString();\n+    }\n+\n+    public void setFieldNames(PsseRecordGroup recordGroup, String[] fieldNames) {\n+        this.fieldNames.put(recordGroup, fieldNames);\n+    }\n+\n+    public String[] getFieldNames(PsseRecordGroup recordGroup) {\n+        return this.fieldNames.get(recordGroup);", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1MjI4OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527652289", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:14:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzA4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzI4Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093287", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:06:50Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/FixedBusShuntData.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseFixedShunt;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class FixedBusShuntData extends AbstractRecordGroup<PsseFixedShunt> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"ibus\", \"shntid\", \"stat\", \"gl\", \"bl\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"id\", \"status\", \"gl\", \"bl\"};\n+\n+    public FixedBusShuntData() {\n+        super(PsseRecordGroup.FIXED_BUS_SHUNT_DATA);\n+    }\n+\n+    @Override\n+    public Class<PsseFixedShunt> psseTypeClass(PsseVersion version) {\n+        return PsseFixedShunt.class;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NjEzNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527756137", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:10:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzI4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzQ0OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093448", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:07:05Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/GeneratorData.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseGenerator;\n+import com.powsybl.psse.model.PsseGenerator35;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class GeneratorData extends AbstractRecordGroup<PsseGenerator> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"ibus\", \"machid\", \"pg\", \"qg\", \"qt\", \"qb\", \"vs\", \"ireg\", \"nreg\", \"mbase\", \"zr\", \"zx\", \"rt\", \"xt\", \"gtap\", \"stat\", \"rmpct\", \"pt\", \"pb\", \"baslod\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"wmod\", \"wpf\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"id\", \"pg\", \"qg\", \"qt\", \"qb\", \"vs\", \"ireg\", \"mbase\", \"zr\", \"zx\", \"rt\", \"xt\", \"gtap\", \"stat\", \"rmpct\", \"pt\", \"pb\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"wmod\", \"wpf\"};\n+\n+    GeneratorData() {\n+        super(PsseRecordGroup.GENERATOR_DATA);\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }\n+\n+    @Override\n+    public Class<? extends PsseGenerator> psseTypeClass(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return PsseGenerator35.class;\n+        } else {\n+            return PsseGenerator.class;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NjI0Mg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527756242", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzQ0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzU3Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093576", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:07:15Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/LoadData.java", "diffHunk": "@@ -0,0 +1,43 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseLoad;\n+import com.powsybl.psse.model.PsseLoad35;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class LoadData extends AbstractRecordGroup<PsseLoad> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"ibus\", \"loadid\", \"stat\", \"area\", \"zone\", \"pl\", \"ql\", \"ip\", \"iq\", \"yp\", \"yq\", \"owner\", \"scale\", \"intrpt\", \"dgenp\", \"dgenq\", \"dgenm\", \"loadtype\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"id\", \"status\", \"area\", \"zone\", \"pl\", \"ql\", \"ip\", \"iq\", \"yp\", \"yq\", \"owner\", \"scale\", \"intrpt\"};\n+\n+    LoadData() {\n+        super(PsseRecordGroup.LOAD_DATA);\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }\n+\n+    @Override\n+    public Class<? extends PsseLoad> psseTypeClass(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return PsseLoad35.class;\n+        } else {\n+            return PsseLoad.class;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzY3Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093677", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:07:26Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/NonTransformerBranchData.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseNonTransformerBranch;\n+import com.powsybl.psse.model.PsseNonTransformerBranch35;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class NonTransformerBranchData extends AbstractRecordGroup<PsseNonTransformerBranch> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"ibus\", \"jbus\", \"ckt\", \"rpu\", \"xpu\", \"bpu\", \"name\", \"rate1\", \"rate2\", \"rate3\", \"rate4\", \"rate5\",\n+        \"rate6\", \"rate7\", \"rate8\", \"rate9\", \"rate10\", \"rate11\", \"rate12\", \"gi\", \"bi\", \"gj\", \"bj\",\n+        \"stat\", \"met\", \"len\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"j\", \"ckt\", \"r\", \"x\", \"b\", \"ratea\", \"rateb\", \"ratec\", \"gi\", \"bi\", \"gj\", \"bj\",\n+        \"st\", \"met\", \"len\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\"};\n+\n+    NonTransformerBranchData() {\n+        super(PsseRecordGroup.NON_TRANSFORMER_BRANCH_DATA);\n+    }\n+\n+    @Override\n+    public Class<? extends PsseNonTransformerBranch> psseTypeClass(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return PsseNonTransformerBranch35.class;\n+        } else {\n+            return PsseNonTransformerBranch.class;\n+        }\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NjM3NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527756374", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:11:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5MzY3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Mzg0Mg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527093842", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:07:39Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/OwnerData.java", "diffHunk": "@@ -0,0 +1,38 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseOwner;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class OwnerData extends AbstractRecordGroup<PsseOwner> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"iowner\", \"owname\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"owname\"};\n+\n+    OwnerData() {\n+        super(PsseRecordGroup.OWNER_DATA);\n+    }\n+\n+    @Override\n+    public Class<PsseOwner> psseTypeClass(PsseVersion version) {\n+        return PsseOwner.class;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc1NjQ0Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527756446", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:11:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Mzg0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NDc3Ng==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527094776", "bodyText": "As explain previously, I would prefer to throw an exception instead of having a fall back. This would prepare the code for another version.", "author": "mathbagu", "createdAt": "2020-11-19T18:09:10Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/RawDataFactory.java", "diffHunk": "@@ -0,0 +1,41 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public final class RawDataFactory {\n+\n+    private RawDataFactory() {\n+    }\n+\n+    public static RawData create(String extension) {\n+        // When only extension is given,\n+        // We create Raw Data objects that are able to read the case identification\n+        // To determine if the file is valid and get its version\n+        if (extension.equalsIgnoreCase(\"rawx\")) {\n+            return new RawXDataCommon();\n+        } else {\n+            return new RawDataCommon();\n+        }\n+    }\n+\n+    public static RawData create(String extension, PsseVersion version) {\n+        if (extension.equalsIgnoreCase(\"rawx\")) {\n+            return new RawXData35();\n+        } else {\n+            if (version == PsseVersion.VERSION_35) {\n+                return new RawData35();\n+            }\n+            return new RawData33();\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc2OTI5Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527769293", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:30:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NDc3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjA3NQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527096075", "bodyText": "The name of this variable is not ok: it's more a content than a file. I wonder if it's a good idea to put the content in a string and if it's possible to read the input stream directly. Moreover, the input stream should be closed.", "author": "mathbagu", "createdAt": "2020-11-19T18:11:03Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/RawXData35.java", "diffHunk": "@@ -0,0 +1,52 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.google.common.io.ByteStreams;\n+import com.powsybl.commons.datasource.ReadOnlyDataSource;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseRawModel;\n+\n+import java.io.IOException;\n+import java.nio.charset.StandardCharsets;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class RawXData35 extends RawXDataCommon {\n+\n+    @Override\n+    public PsseRawModel read(ReadOnlyDataSource dataSource, String ext, Context context) throws IOException {\n+        String jsonFile = new String(ByteStreams.toByteArray(dataSource.newInputStream(null, ext)), StandardCharsets.UTF_8);", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1OTY4MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527659681", "bodyText": "Agree. Changed the name of the variable. Used try-with-resources statement.\nWe were already investigating how to obtain json content without having to read the entire file. Current approach is valid only for the small test files we have now, but will fix it in separate PR, if you accept it.", "author": "zamarrenolm", "createdAt": "2020-11-20T12:29:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA4NjY3NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r531086674", "bodyText": "I change the code to pass the stream directly to the ObjectMapper().readTree() method instead of storing the content in a String. I'm pretty sure it doesn't change anything but it should be more efficient because the file won't be read twice (one time to fill the string, and one time by the parser).", "author": "mathbagu", "createdAt": "2020-11-26T15:02:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjA3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjM2OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527096369", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:11:31Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/RawXDataCommon.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.google.common.io.ByteStreams;\n+import com.powsybl.commons.datasource.ReadOnlyDataSource;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseRawModel;\n+\n+import java.io.IOException;\n+import java.nio.charset.StandardCharsets;\n+\n+/**\n+ * PSSE raw data common to all versions\n+ * Should be able to read the case identification to obtain the version (case identification \"rev\" attribute)\n+ *\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class RawXDataCommon implements RawData {\n+\n+    @Override\n+    public boolean isValidFile(ReadOnlyDataSource dataSource, String ext) throws IOException {\n+        String jsonFile = new String(ByteStreams.toByteArray(dataSource.newInputStream(null, ext)), StandardCharsets.UTF_8);", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1OTc1Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527659753", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:30:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjM2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjUwMQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527096501", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:11:43Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/RawXDataCommon.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.fasterxml.jackson.databind.ObjectMapper;\n+import com.google.common.io.ByteStreams;\n+import com.powsybl.commons.datasource.ReadOnlyDataSource;\n+import com.powsybl.psse.model.PsseCaseIdentification;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseRawModel;\n+\n+import java.io.IOException;\n+import java.nio.charset.StandardCharsets;\n+\n+/**\n+ * PSSE raw data common to all versions\n+ * Should be able to read the case identification to obtain the version (case identification \"rev\" attribute)\n+ *\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+public class RawXDataCommon implements RawData {\n+\n+    @Override\n+    public boolean isValidFile(ReadOnlyDataSource dataSource, String ext) throws IOException {\n+        String jsonFile = new String(ByteStreams.toByteArray(dataSource.newInputStream(null, ext)), StandardCharsets.UTF_8);\n+        PsseCaseIdentification caseIdentification = new CaseIdentificationData().read1(networkNode(jsonFile), new Context());\n+        caseIdentification.validate();\n+        return true;\n+    }\n+\n+    @Override\n+    public PsseVersion readVersion(ReadOnlyDataSource dataSource, String ext) throws IOException {\n+        String jsonFile = new String(ByteStreams.toByteArray(dataSource.newInputStream(null, ext)), StandardCharsets.UTF_8);", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY1OTgwNg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527659806", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T12:30:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NjUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Njg3MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527096871", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:12:18Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/SwitchedShuntData.java", "diffHunk": "@@ -0,0 +1,46 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseSwitchedShunt;\n+import com.powsybl.psse.model.PsseSwitchedShunt35;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class SwitchedShuntData extends AbstractRecordGroup<PsseSwitchedShunt> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"i\", \"id\", \"modsw\", \"adjm\", \"stat\", \"vswhi\", \"vswlo\", \"swreg\", \"nreg\", \"rmpct\", \"rmidnt\", \"binit\",\n+        \"s1\", \"n1\", \"b1\", \"s2\", \"n2\", \"b2\", \"s3\", \"n3\", \"b3\", \"s4\", \"n4\", \"b4\", \"s5\", \"n5\", \"b5\", \"s6\", \"n6\", \"b6\",\n+        \"s7\", \"n7\", \"b7\", \"s8\", \"n8\", \"b8\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"modsw\", \"adjm\", \"stat\", \"vswhi\", \"vswlo\", \"swrem\", \"rmpct\", \"rmidnt\", \"binit\",\n+        \"n1\", \"b1\", \"n2\", \"b2\", \"n3\", \"b3\", \"n4\", \"b4\", \"n5\", \"b5\", \"n6\", \"b6\", \"n7\", \"b7\", \"n8\", \"b8\"};\n+\n+    SwitchedShuntData() {\n+        super(PsseRecordGroup.SWITCHED_SHUNT_DATA);\n+    }\n+\n+    @Override\n+    public Class<? extends PsseSwitchedShunt> psseTypeClass(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return PsseSwitchedShunt35.class;\n+        } else {\n+            return PsseSwitchedShunt.class;\n+        }\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc2OTQzMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527769432", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:30:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5Njg3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NzE0NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527097144", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:12:42Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/TransformerData.java", "diffHunk": "@@ -0,0 +1,159 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.fasterxml.jackson.databind.JsonNode;\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseException;\n+import com.powsybl.psse.model.PsseTransformer;\n+import com.powsybl.psse.model.PsseTransformer35;\n+import org.apache.commons.lang3.ArrayUtils;\n+\n+import java.io.BufferedReader;\n+import java.io.IOException;\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+/**\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class TransformerData extends AbstractRecordGroup<PsseTransformer> {\n+\n+    private static final String[][] FIELD_NAMES_3_35 = {\n+        {\"ibus\", \"jbus\", \"kbus\", \"ckt\", \"cw\", \"cz\", \"cm\", \"mag1\", \"mag2\", \"nmet\", \"name\", \"stat\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"vecgrp\", \"zcod\"},\n+        {\"r1_2\", \"x1_2\", \"sbase1_2\", \"r2_3\", \"x2_3\", \"sbase2_3\", \"r3_1\", \"x3_1\", \"sbase3_1\", \"vmstar\", \"anstar\"},\n+        {\"windv1\", \"nomv1\", \"ang1\", \"wdg1rate1\", \"wdg1rate2\", \"wdg1rate3\", \"wdg1rate4\", \"wdg1rate5\", \"wdg1rate6\", \"wdg1rate7\", \"wdg1rate8\", \"wdg1rate9\", \"wdg1rate10\", \"wdg1rate11\", \"wdg1rate12\", \"cod1\", \"cont1\", \"node1\", \"rma1\", \"rmi1\", \"vma1\", \"vmi1\", \"ntp1\", \"tab1\", \"cr1\", \"cx1\", \"cnxa1\"},\n+        {\"windv2\", \"nomv2\", \"ang2\", \"wdg2rate1\", \"wdg2rate2\", \"wdg2rate3\", \"wdg2rate4\", \"wdg2rate5\", \"wdg2rate6\", \"wdg2rate7\", \"wdg2rate8\", \"wdg2rate9\", \"wdg2rate10\", \"wdg2rate11\", \"wdg2rate12\", \"cod2\", \"cont2\", \"node2\", \"rma2\", \"rmi2\", \"vma2\", \"vmi2\", \"ntp2\", \"tab2\", \"cr2\", \"cx2\", \"cnxa2\"},\n+        {\"windv3\", \"nomv3\", \"ang3\", \"wdg3rate1\", \"wdg3rate2\", \"wdg3rate3\", \"wdg3rate4\", \"wdg3rate5\", \"wdg3rate6\", \"wdg3rate7\", \"wdg3rate8\", \"wdg3rate9\", \"wdg3rate10\", \"wdg3rate11\", \"wdg3rate12\", \"cod3\", \"cont3\", \"node3\", \"rma3\", \"rmi3\", \"vma3\", \"vmi3\", \"ntp3\", \"tab3\", \"cr3\", \"cx3\", \"cnxa3\"}\n+    };\n+    private static final String[][] FIELD_NAMES_3_33 = {\n+        {\"i\", \"j\", \"k\", \"ckt\", \"cw\", \"cz\", \"cm\", \"mag1\", \"mag2\", \"nmetr\", \"name\", \"stat\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"vecgrp\"},\n+        {\"r12\", \"x12\", \"sbase12\", \"r23\", \"x23\", \"sbase23\", \"r31\", \"x31\", \"sbase31\", \"vmstar\", \"anstar\"},\n+        {\"windv1\", \"nomv1\", \"ang1\", \"rata1\", \"ratb1\", \"ratc1\", \"cod1\", \"cont1\", \"rma1\", \"rmi1\", \"vma1\", \"vmi1\", \"ntp1\", \"tab1\", \"cr1\", \"cx1\", \"cnxa1\"},\n+        {\"windv2\", \"nomv2\", \"ang2\", \"rata2\", \"ratb2\", \"ratc2\", \"cod2\", \"cont2\", \"rma2\", \"rmi2\", \"vma2\", \"vmi2\", \"ntp2\", \"tab2\", \"cr2\", \"cx2\", \"cnxa2\"},\n+        {\"windv3\", \"nomv3\", \"ang3\", \"rata3\", \"ratb3\", \"ratc3\", \"cod3\", \"cont3\", \"rma3\", \"rmi3\", \"vma3\", \"vmi3\", \"ntp3\", \"tab3\", \"cr3\", \"cx3\", \"cnxa3\"}\n+    };\n+    private static final String[][] FIELD_NAMES_2_35 = {\n+        {\"ibus\", \"jbus\", \"kbus\", \"ckt\", \"cw\", \"cz\", \"cm\", \"mag1\", \"mag2\", \"nmet\", \"name\", \"stat\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"vecgrp\"},\n+        {\"r1_2\", \"x1_2\", \"sbase1_2\"},\n+        {\"windv1\", \"nomv1\", \"ang1\", \"wdg1rate1\", \"wdg1rate2\", \"wdg1rate3\", \"wdg1rate4\", \"wdg1rate5\", \"wdg1rate6\", \"wdg1rate7\", \"wdg1rate8\", \"wdg1rate9\", \"wdg1rate10\", \"wdg1rate11\", \"wdg1rate12\", \"cod1\", \"cont1\", \"node1\", \"rma1\", \"rmi1\", \"vma1\", \"vmi1\", \"ntp1\", \"tab1\", \"cr1\", \"cx1\", \"cnxa1\"},\n+        {\"windv2\", \"nomv2\"}\n+    };\n+    private static final String[][] FIELD_NAMES_2_33 = {\n+        {\"i\", \"j\", \"k\", \"ckt\", \"cw\", \"cz\", \"cm\", \"mag1\", \"mag2\", \"nmetr\", \"name\", \"stat\", \"o1\", \"f1\", \"o2\", \"f2\", \"o3\", \"f3\", \"o4\", \"f4\", \"vecgrp\"},\n+        {\"r12\", \"x12\", \"sbase12\"},\n+        {\"windv1\", \"nomv1\", \"ang1\", \"rata1\", \"ratb1\", \"ratc1\", \"cod1\", \"cont1\", \"rma1\", \"rmi1\", \"vma1\", \"vmi1\", \"ntp1\", \"tab1\", \"cr1\", \"cx1\", \"cnxa1\"},\n+        {\"windv2\", \"nomv2\"}\n+    };\n+\n+    TransformerData() {\n+        super(PsseRecordGroup.TRANSFORMER_DATA);\n+    }\n+\n+    private static boolean is3winding(String record, String delimiter) {\n+        String[] tokens = record.split(delimiter);\n+        if (tokens.length < 3) {\n+            return false;\n+        }\n+        return Integer.parseInt(tokens[2].trim()) != 0;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        throw new PsseException(\"Should not occur\");\n+    }\n+\n+    public String[][] fieldNames3(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_3_35;\n+        } else {\n+            return FIELD_NAMES_3_33;\n+        }\n+    }\n+\n+    public String[][] fieldNames2(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_2_35;\n+        } else {\n+            return FIELD_NAMES_2_33;\n+        }\n+    }\n+\n+    @Override\n+    public Class<? extends PsseTransformer> psseTypeClass(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return PsseTransformer35.class;\n+        } else {\n+            return PsseTransformer.class;\n+        }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc2OTUzOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527769539", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:30:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5NzE0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5ODA1NQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527098055", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-11-19T18:14:09Z", "path": "psse/psse-model/src/main/java/com/powsybl/psse/model/data/ZoneData.java", "diffHunk": "@@ -0,0 +1,39 @@\n+/**\n+ * Copyright (c) 2020, RTE (http://www.rte-france.com)\n+ * This Source Code Form is subject to the terms of the Mozilla Public\n+ * License, v. 2.0. If a copy of the MPL was not distributed with this\n+ * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n+ */\n+package com.powsybl.psse.model.data;\n+\n+import com.powsybl.psse.model.PsseConstants.PsseVersion;\n+import com.powsybl.psse.model.PsseZone;\n+\n+/**\n+ *\n+ * @author Luma Zamarre\u00f1o <zamarrenolm at aia.es>\n+ * @author Jos\u00e9 Antonio Marqu\u00e9s <marquesja at aia.es>\n+ */\n+class ZoneData extends AbstractRecordGroup<PsseZone> {\n+\n+    private static final String[] FIELD_NAMES_35 = {\"izone\", \"zoname\"};\n+    private static final String[] FIELD_NAMES_33 = {\"i\", \"zoname\"};\n+\n+    ZoneData() {\n+        super(PsseRecordGroup.ZONE_DATA);\n+    }\n+\n+    @Override\n+    public Class<PsseZone> psseTypeClass(PsseVersion version) {\n+        return PsseZone.class;\n+    }\n+\n+    @Override\n+    public String[] fieldNames(PsseVersion version) {\n+        if (version == PsseVersion.VERSION_35) {\n+            return FIELD_NAMES_35;\n+        } else {\n+            return FIELD_NAMES_33;\n+        }\n+    }", "originalCommit": "7a2ef89edd308aca87073c8263a6144317c3657d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzc2OTYwMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1461#discussion_r527769602", "bodyText": "Fixed", "author": "zamarrenolm", "createdAt": "2020-11-20T15:30:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzA5ODA1NQ=="}], "type": "inlineReview"}, {"oid": "17bf7c4190a03353de74e925301cd998720ef84a", "url": "https://github.com/powsybl/powsybl-core/commit/17bf7c4190a03353de74e925301cd998720ef84a", "message": "check exception thrown and message using assertj\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T08:19:06Z", "type": "commit"}, {"oid": "df47a35852d56b3ff930fc1d5145f3c66a9e34d5", "url": "https://github.com/powsybl/powsybl-core/commit/df47a35852d56b3ff930fc1d5145f3c66a9e34d5", "message": "dependencies sorted by group-artifact, grouped by scope\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T08:23:33Z", "type": "commit"}, {"oid": "ac9082391128967ed6295c69332d997040918baf", "url": "https://github.com/powsybl/powsybl-core/commit/ac9082391128967ed6295c69332d997040918baf", "message": "single line map initialization\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T08:33:02Z", "type": "commit"}, {"oid": "4a3a550021686ed07d272d0af2c493aac697ed90", "url": "https://github.com/powsybl/powsybl-core/commit/4a3a550021686ed07d272d0af2c493aac697ed90", "message": "check and report supported versions in class PsseVersion\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T11:41:45Z", "type": "commit"}, {"oid": "619187e4c407cfbb7e3b7ed38370eb6c2cd91bbf", "url": "https://github.com/powsybl/powsybl-core/commit/619187e4c407cfbb7e3b7ed38370eb6c2cd91bbf", "message": "non-transformer branch name must be non-null\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T11:57:09Z", "type": "commit"}, {"oid": "501d5968b4d077185ce74ac1352533f1884cd801", "url": "https://github.com/powsybl/powsybl-core/commit/501d5968b4d077185ce74ac1352533f1884cd801", "message": "remove unneeded this and super; log parsing context and exception on error\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T12:16:02Z", "type": "commit"}, {"oid": "713c302271759b2f766fda1205e0a3ad637aebcf", "url": "https://github.com/powsybl/powsybl-core/commit/713c302271759b2f766fda1205e0a3ad637aebcf", "message": "try-with-resources when obtaining RAWX content\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T13:47:58Z", "type": "commit"}, {"oid": "e6c325618d481573775ce090f067c73fc4f10bc4", "url": "https://github.com/powsybl/powsybl-core/commit/e6c325618d481573775ce090f067c73fc4f10bc4", "message": "log context of parsing error\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T13:51:05Z", "type": "commit"}, {"oid": "bfc003fb513f3343416d13c62a3fe54e09a2d502", "url": "https://github.com/powsybl/powsybl-core/commit/bfc003fb513f3343416d13c62a3fe54e09a2d502", "message": "init bean list processor with expected count\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T14:52:25Z", "type": "commit"}, {"oid": "5b46ff9096bd64eab2bd1796203a741d8546c43d", "url": "https://github.com/powsybl/powsybl-core/commit/5b46ff9096bd64eab2bd1796203a741d8546c43d", "message": "field names by version using switch; throw exception if version not supported\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T15:09:59Z", "type": "commit"}, {"oid": "8a965cbad28854e5777f8358984cae995319393d", "url": "https://github.com/powsybl/powsybl-core/commit/8a965cbad28854e5777f8358984cae995319393d", "message": "raw data by version using switch; throw exception if version not supported\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T15:14:57Z", "type": "commit"}, {"oid": "b7b8dc69ec9922f7f74530b762ae9cc76627440f", "url": "https://github.com/powsybl/powsybl-core/commit/b7b8dc69ec9922f7f74530b762ae9cc76627440f", "message": "expected message in test\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-11-20T15:30:06Z", "type": "commit"}, {"oid": "ebb83b089050f3a0d17926cd9c197cb19b88c01b", "url": "https://github.com/powsybl/powsybl-core/commit/ebb83b089050f3a0d17926cd9c197cb19b88c01b", "message": "Small fixes\n\nSigned-off-by: Mathieu BAGUE <mathieu.bague@rte-france.com>", "committedDate": "2020-11-26T15:04:50Z", "type": "commit"}, {"oid": "6539e65e40971a33822aba0c19d553f326030779", "url": "https://github.com/powsybl/powsybl-core/commit/6539e65e40971a33822aba0c19d553f326030779", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-11-26T16:39:20Z", "type": "commit"}, {"oid": "8d733f8cb1a92254fb991b3249d30cad59737a4e", "url": "https://github.com/powsybl/powsybl-core/commit/8d733f8cb1a92254fb991b3249d30cad59737a4e", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-02T16:33:54Z", "type": "commit"}, {"oid": "029ca06f3b1ad6fae14539e5983d386aea313c9f", "url": "https://github.com/powsybl/powsybl-core/commit/029ca06f3b1ad6fae14539e5983d386aea313c9f", "message": "all attributes of different versions in a single class; define valid version using annotations\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-02T16:39:10Z", "type": "commit"}, {"oid": "4e41c5c652efd5b340d3f49b5aae7fa1b6fc6d50", "url": "https://github.com/powsybl/powsybl-core/commit/4e41c5c652efd5b340d3f49b5aae7fa1b6fc6d50", "message": "Different versions in a single class. Switched shunt data.\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-03T08:24:59Z", "type": "commit"}, {"oid": "2491b0ac6f1992d821056f36cc1bb0e59e3cc266", "url": "https://github.com/powsybl/powsybl-core/commit/2491b0ac6f1992d821056f36cc1bb0e59e3cc266", "message": "Different versions in a single class. Transformers\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-03T15:56:20Z", "type": "commit"}, {"oid": "62c7554e844f025bd5acbcdeff4132ad74d3bcca", "url": "https://github.com/powsybl/powsybl-core/commit/62c7554e844f025bd5acbcdeff4132ad74d3bcca", "message": "delete version argument in psseTypeClass\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-03T16:20:25Z", "type": "commit"}, {"oid": "99fb4afd4790933a4c60a43161c257d08aa3004b", "url": "https://github.com/powsybl/powsybl-core/commit/99fb4afd4790933a4c60a43161c257d08aa3004b", "message": "check version in innerClasses\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-04T08:05:03Z", "type": "commit"}, {"oid": "0867ba1285d5fba545207406132082baecc0ba4f", "url": "https://github.com/powsybl/powsybl-core/commit/0867ba1285d5fba545207406132082baecc0ba4f", "message": "Fix code smells\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-04T08:34:30Z", "type": "commit"}, {"oid": "379903942e0ca84eb1249497d51dd30bbbe14695", "url": "https://github.com/powsybl/powsybl-core/commit/379903942e0ca84eb1249497d51dd30bbbe14695", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-04T13:59:23Z", "type": "commit"}, {"oid": "0c7e15ada8fb6641f4b84cecfb3e6f4d15d2e3bc", "url": "https://github.com/powsybl/powsybl-core/commit/0c7e15ada8fb6641f4b84cecfb3e6f4d15d2e3bc", "message": "Merge branch 'psse_Version33Version35' into psse_WhiteSpaceAsDelimiter\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>\n\n# Conflicts:\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/data/Context.java\n#\tpsse/psse-model/src/test/java/com/powsybl/psse/model/PsseRawDataTest.java", "committedDate": "2020-12-05T11:19:03Z", "type": "commit"}, {"oid": "57a23c36c73d418482a1e3074ca4be09a101be20", "url": "https://github.com/powsybl/powsybl-core/commit/57a23c36c73d418482a1e3074ca4be09a101be20", "message": "Exported according to single class\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-06T10:44:04Z", "type": "commit"}, {"oid": "278e75e1a310971ce7a9adbb32d77106ab42f3ef", "url": "https://github.com/powsybl/powsybl-core/commit/278e75e1a310971ce7a9adbb32d77106ab42f3ef", "message": "test associtated with whitespace delimiter\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>", "committedDate": "2020-12-06T11:05:26Z", "type": "commit"}, {"oid": "155dd60fbf8611a26be273f1aaf66fe2f0ee0faf", "url": "https://github.com/powsybl/powsybl-core/commit/155dd60fbf8611a26be273f1aaf66fe2f0ee0faf", "message": "no need to suppress java access control checks\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-07T15:30:14Z", "type": "commit"}, {"oid": "592876adad181846ff0b25e95d778b5c752e2e5b", "url": "https://github.com/powsybl/powsybl-core/commit/592876adad181846ff0b25e95d778b5c752e2e5b", "message": "simplify transformer windings using @nested annotations\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-09T18:54:45Z", "type": "commit"}, {"oid": "e82808eabfb154e644898b23708a42a014a60229", "url": "https://github.com/powsybl/powsybl-core/commit/e82808eabfb154e644898b23708a42a014a60229", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-09T18:55:37Z", "type": "commit"}, {"oid": "1f409fde227403e3c953b7c52e7d51985a4e9c9f", "url": "https://github.com/powsybl/powsybl-core/commit/1f409fde227403e3c953b7c52e7d51985a4e9c9f", "message": "Merge branch 'psse_Version33Version35' into psse_WhiteSpaceAsDelimiter", "committedDate": "2020-12-10T08:26:04Z", "type": "commit"}, {"oid": "dc7c41e2e9b877989ae6f30261c5685e4dd49bbd", "url": "https://github.com/powsybl/powsybl-core/commit/dc7c41e2e9b877989ae6f30261c5685e4dd49bbd", "message": "Merge branch 'psse_WhiteSpaceAsDelimiter' into psse_exporterSingleClass\n\nSigned-off-by: Jos\u00e9 Antonio Marqu\u00e9s <marquesja@aia.es>\n\n# Conflicts:\n#\tpsse/psse-model/src/main/java/com/powsybl/psse/model/PsseTransformer.java", "committedDate": "2020-12-10T09:44:37Z", "type": "commit"}, {"oid": "42e847aa67a8bc4143dfb3018af3df526fd65a9d", "url": "https://github.com/powsybl/powsybl-core/commit/42e847aa67a8bc4143dfb3018af3df526fd65a9d", "message": "indentation\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-10T16:52:31Z", "type": "commit"}, {"oid": "f27c25af78ce0f28fc78d6cb0327e0d1eb1c2483", "url": "https://github.com/powsybl/powsybl-core/commit/f27c25af78ce0f28fc78d6cb0327e0d1eb1c2483", "message": "Merge branch 'psse_exporterSingleClass' into psse_Version33Version35\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-10T17:32:30Z", "type": "commit"}, {"oid": "9cf7c7e461f906072d28219b99c64551ba1216ee", "url": "https://github.com/powsybl/powsybl-core/commit/9cf7c7e461f906072d28219b99c64551ba1216ee", "message": "simplify write; remove method to get objects from model in AbstractRecordGroup\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-10T18:08:53Z", "type": "commit"}, {"oid": "858e0787bc364f49efd635fa520c64fa38df9277", "url": "https://github.com/powsybl/powsybl-core/commit/858e0787bc364f49efd635fa520c64fa38df9277", "message": "simplify write; avoid explicit comments that refer to previous and next record groups\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T08:33:19Z", "type": "commit"}, {"oid": "ea8eb5a5c417f1154ac75e253ca302b644c60494", "url": "https://github.com/powsybl/powsybl-core/commit/ea8eb5a5c417f1154ac75e253ca302b644c60494", "message": "ignored record groups: no need to split every line\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T09:03:57Z", "type": "commit"}, {"oid": "77dd8a33fc7f0b7bd3ae4549aa520c4b68548e2c", "url": "https://github.com/powsybl/powsybl-core/commit/77dd8a33fc7f0b7bd3ae4549aa520c4b68548e2c", "message": "fix bug detected by sonar using Scanner\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T10:41:02Z", "type": "commit"}, {"oid": "05d236163b57d84c7827784dda311b30ee311ce0", "url": "https://github.com/powsybl/powsybl-core/commit/05d236163b57d84c7827784dda311b30ee311ce0", "message": "psse version refactoring: not enum, store field names by version in record group, minor/major stored as int\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T13:14:34Z", "type": "commit"}, {"oid": "ba13661b4baa27c21ade9476b7cf698322194921", "url": "https://github.com/powsybl/powsybl-core/commit/ba13661b4baa27c21ade9476b7cf698322194921", "message": "compact field name configuration; version major and minor; valid version from annotation\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T16:19:31Z", "type": "commit"}, {"oid": "9f77080baafe9dc3731dd341a5744908722a2267", "url": "https://github.com/powsybl/powsybl-core/commit/9f77080baafe9dc3731dd341a5744908722a2267", "message": "proper decimal format for revision when using univocity csv output\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-11T16:26:00Z", "type": "commit"}, {"oid": "2e6a4f6f2ba352bf3c75701f554a29ba0e15213a", "url": "https://github.com/powsybl/powsybl-core/commit/2e6a4f6f2ba352bf3c75701f554a29ba0e15213a", "message": "RAWX case identification is read using streaming API when checking valid file and version\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-14T08:13:21Z", "type": "commit"}, {"oid": "c17688cb537c837c87465d8bc282916e9767b26f", "url": "https://github.com/powsybl/powsybl-core/commit/c17688cb537c837c87465d8bc282916e9767b26f", "message": "refactor RAWX Json output (step 1): avoid using JsonModel big object\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-14T09:28:04Z", "type": "commit"}, {"oid": "79a33fc50324a915858fdb81bca5d712f1eb7ac4", "url": "https://github.com/powsybl/powsybl-core/commit/79a33fc50324a915858fdb81bca5d712f1eb7ac4", "message": "refactor RAWX Json output (step 2): remove JsonModel, pretty print headers and pre-formatted records\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-14T21:38:58Z", "type": "commit"}, {"oid": "9341006a1ce892207eedae9c9a8cb37cc6ca8bce", "url": "https://github.com/powsybl/powsybl-core/commit/9341006a1ce892207eedae9c9a8cb37cc6ca8bce", "message": "fix sonar bug : Json generator try-with-resources\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-14T21:43:15Z", "type": "commit"}, {"oid": "63d7162bf579eae66099aff2b767c539dba5d0f7", "url": "https://github.com/powsybl/powsybl-core/commit/63d7162bf579eae66099aff2b767c539dba5d0f7", "message": "remove comments, adjust method name\n\nSigned-off-by: Luma <zamarrenolm@aia.es>", "committedDate": "2020-12-14T22:07:42Z", "type": "commit"}, {"oid": "59d5e525b68eca40bf0ab2a5ef6f21015ee2dd88", "url": "https://github.com/powsybl/powsybl-core/commit/59d5e525b68eca40bf0ab2a5ef6f21015ee2dd88", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-14T22:08:51Z", "type": "commit"}, {"oid": "50e2466c9c28fc7ef8562dfc5e4bf28aa552583a", "url": "https://github.com/powsybl/powsybl-core/commit/50e2466c9c28fc7ef8562dfc5e4bf28aa552583a", "message": "Merge branch 'master' into psse_Version33Version35", "committedDate": "2020-12-15T14:39:56Z", "type": "commit"}]}