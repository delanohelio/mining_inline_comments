{"pr_number": 1396, "pr_title": "Terminals getters added to Bus interface", "pr_createdAt": "2020-07-13T14:52:54Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1396", "timeline": [{"oid": "80c56e67992576a3ed8d2ecbd41fb77cd15054d6", "url": "https://github.com/powsybl/powsybl-core/commit/80c56e67992576a3ed8d2ecbd41fb77cd15054d6", "message": "Adding terminals getters to the Bus interface\n\nThe two getters already existed in BusExt interface but needed to be added in the Bus interface for the SlackTerminal issue #1307\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-13T14:34:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkxMjIwNQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r454912205", "bodyText": "I think you should to provide a default behavior to not break existing code (powsybl-network-store)", "author": "mathbagu", "createdAt": "2020-07-15T09:19:02Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Bus.java", "diffHunk": "@@ -240,4 +240,14 @@\n      */\n     void visitConnectedOrConnectableEquipments(TopologyVisitor visitor);\n \n+    /**\n+     * Get an iterable of the terminals connected to the bus.\n+     */\n+    Iterable<? extends Terminal> getConnectedTerminals();", "originalCommit": "80c56e67992576a3ed8d2ecbd41fb77cd15054d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkxMjI0Nw==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r454912247", "bodyText": "Same remark", "author": "mathbagu", "createdAt": "2020-07-15T09:19:07Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Bus.java", "diffHunk": "@@ -240,4 +240,14 @@\n      */\n     void visitConnectedOrConnectableEquipments(TopologyVisitor visitor);\n \n+    /**\n+     * Get an iterable of the terminals connected to the bus.\n+     */\n+    Iterable<? extends Terminal> getConnectedTerminals();\n+\n+    /**\n+     * Get a stream of the terminals connected to the bus.\n+     */\n+    Stream<? extends Terminal> getConnectedTerminalStream();", "originalCommit": "80c56e67992576a3ed8d2ecbd41fb77cd15054d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5d581aff022a618aad3b1fc62c5747ad21fcd5b6", "url": "https://github.com/powsybl/powsybl-core/commit/5d581aff022a618aad3b1fc62c5747ad21fcd5b6", "message": "Terminals getters: default implementations in Bus interface\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-15T13:37:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTMxMzg1OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r455313859", "bodyText": "Why a LinkedList and not an ArrayList?", "author": "geofjamg", "createdAt": "2020-07-15T20:12:36Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Bus.java", "diffHunk": "@@ -240,4 +241,18 @@\n      */\n     void visitConnectedOrConnectableEquipments(TopologyVisitor visitor);\n \n+    /**\n+     * Get an iterable of the terminals connected to the bus.\n+     */\n+    default Iterable<? extends Terminal> getConnectedTerminals() {\n+        return new LinkedList<>();", "originalCommit": "5d581aff022a618aad3b1fc62c5747ad21fcd5b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY1NDgwNA==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r455654804", "bodyText": "An old pre-Java 8 habit, as it is a constant empty list. Thus it does not require the whole ArrayList mechanism.", "author": "flo-dup", "createdAt": "2020-07-16T09:33:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTMxMzg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM1MTI3NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r457351274", "bodyText": "replaced by Collections.emptyList() (and not the raw type Collections.EMPTY_LIST)", "author": "flo-dup", "createdAt": "2020-07-20T12:47:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTMxMzg1OQ=="}], "type": "inlineReview"}, {"oid": "5b45ed1a79afc067b51a3518338b6efabf24479e", "url": "https://github.com/powsybl/powsybl-core/commit/5b45ed1a79afc067b51a3518338b6efabf24479e", "message": "Minor corrections\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-20T12:50:35Z", "type": "commit"}, {"oid": "5b45ed1a79afc067b51a3518338b6efabf24479e", "url": "https://github.com/powsybl/powsybl-core/commit/5b45ed1a79afc067b51a3518338b6efabf24479e", "message": "Minor corrections\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-20T12:50:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNjUwNA==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r457706504", "bodyText": "To remove as it is already in Bus?", "author": "geofjamg", "createdAt": "2020-07-20T21:38:13Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/BusExt.java", "diffHunk": "@@ -16,8 +16,10 @@\n  */\n interface BusExt extends Bus {\n \n+    @Override", "originalCommit": "5b45ed1a79afc067b51a3518338b6efabf24479e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA1NDQ2OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r458054468", "bodyText": "Leaving it forced the classes inheriting BusExt to use TerminalExt, and not another class extending Terminal.", "author": "flo-dup", "createdAt": "2020-07-21T12:23:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNjUwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA4MzY4MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r458083681", "bodyText": "For instance, if removing it, MergedBus.getConnectedTerminals() would return Iterable and not Iterable, and dealing with ConfiguredBus.getConnectedTerminals() hence with terminals whose type is ? extends Terminal.", "author": "flo-dup", "createdAt": "2020-07-21T13:11:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNjUwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNzEwMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r457707100", "bodyText": "Not necessary as it is already added to ConfiguredBusImpl and CalculaedBusImpl", "author": "geofjamg", "createdAt": "2020-07-20T21:39:48Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractBus.java", "diffHunk": "@@ -52,8 +52,10 @@ public VoltageLevel getVoltageLevel() {\n         return voltageLevel;\n     }\n \n+    @Override", "originalCommit": "5b45ed1a79afc067b51a3518338b6efabf24479e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODA1NzQ3OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1396#discussion_r458057479", "bodyText": "It is already added in ConfiguredBusImpl and CalculatedBusImpl but the methods using it in AbstractBus assume it returns a TerminalExt and not a Terminal. As mentionned earlier, these methods can deal with a Terminal though.", "author": "flo-dup", "createdAt": "2020-07-21T12:28:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNzEwMA=="}], "type": "inlineReview"}, {"oid": "639dde32c79fde16e77387dd0b3bf2cab33ec862", "url": "https://github.com/powsybl/powsybl-core/commit/639dde32c79fde16e77387dd0b3bf2cab33ec862", "message": "Terminal getters: removing intermediate override\n\n- Classes extending AbstractBus can deal with Terminals which are not TerminalExt\n- Classes implementing BusExt can deal with Terminals which are not TerminalExt\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-21T13:01:05Z", "type": "forcePushed"}, {"oid": "5b45ed1a79afc067b51a3518338b6efabf24479e", "url": "https://github.com/powsybl/powsybl-core/commit/5b45ed1a79afc067b51a3518338b6efabf24479e", "message": "Minor corrections\n\nSigned-off-by: Florian Dupuy <florian.dupuy@rte-france.com>", "committedDate": "2020-07-20T12:50:35Z", "type": "forcePushed"}, {"oid": "60f459f734c2f7f55316571c09a9e3b57d290cec", "url": "https://github.com/powsybl/powsybl-core/commit/60f459f734c2f7f55316571c09a9e3b57d290cec", "message": "Merge branch 'master' into bus_terminalaccessor", "committedDate": "2020-07-21T13:20:37Z", "type": "commit"}, {"oid": "d0cf9ff284f3cd5c8af6244ba553ac0a1cdeea8b", "url": "https://github.com/powsybl/powsybl-core/commit/d0cf9ff284f3cd5c8af6244ba553ac0a1cdeea8b", "message": "Merge branch 'master' into bus_terminalaccessor", "committedDate": "2020-07-21T19:08:58Z", "type": "commit"}]}