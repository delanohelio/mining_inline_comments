{"pr_number": 1209, "pr_title": "fictitious should be an Identifiable's attribute, not only a Switch's attribute", "pr_createdAt": "2020-03-06T16:52:53Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1209", "timeline": [{"oid": "3aeabe7c50fad12487b633efd57bee86d840143f", "url": "https://github.com/powsybl/powsybl-core/commit/3aeabe7c50fad12487b633efd57bee86d840143f", "message": "Move isFictitious & setFictitious from Switch to Identifiable\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-05T14:14:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNjQ2OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390126469", "bodyText": "You should compare old and new value and notify only if there is a modification? Check how it\u2019s done for other attributes", "author": "mathbagu", "createdAt": "2020-03-10T07:10:34Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractIdentifiable.java", "diffHunk": "@@ -39,6 +46,18 @@ public String getName() {\n         return name != null ? name : id;\n     }\n \n+    @Override\n+    public boolean isFictitious() {\n+        return fictitious;\n+    }\n+\n+    @Override\n+    public void setFictitious(boolean fictitious) {\n+        boolean oldValue = this.fictitious;\n+        this.fictitious = fictitious;\n+        getNetwork().getListeners().notifyUpdate(this, \"fictitious\", oldValue, fictitious);", "originalCommit": "3aeabe7c50fad12487b633efd57bee86d840143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzOTQ0OA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390239448", "bodyText": "NetworkListenerList::notifyUpdate already check if there is a modification", "author": "tadam50", "createdAt": "2020-03-10T11:05:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNjQ2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNzMxNA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390127314", "bodyText": "You should revert this change", "author": "mathbagu", "createdAt": "2020-03-10T07:13:24Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/TieLineImpl.java", "diffHunk": "@@ -6,11 +6,11 @@\n  */\n package com.powsybl.iidm.network.impl;\n \n-import java.util.Objects;\n-\n import com.powsybl.iidm.network.TieLine;\n import com.powsybl.iidm.network.ValidationException;\n \n+import java.util.Objects;\n+", "originalCommit": "3aeabe7c50fad12487b633efd57bee86d840143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0MDEzMg==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390240132", "bodyText": "Sorry, my bad\nUse Intellij configuration \"Optimize imports on the fly\"", "author": "tadam50", "createdAt": "2020-03-10T11:06:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNzMxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNzYxMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390127610", "bodyText": "Maybe there is something in your IDE configuration. The import order should remain the same. Maybe we can share our configuration", "author": "mathbagu", "createdAt": "2020-03-10T07:14:28Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/TwoWindingsTransformerImpl.java", "diffHunk": "@@ -6,15 +6,11 @@\n  */\n package com.powsybl.iidm.network.impl;\n \n+import com.powsybl.iidm.network.*;\n+\n import java.util.HashSet;\n import java.util.Set;\n \n-import com.powsybl.iidm.network.ConnectableType;\n-import com.powsybl.iidm.network.Identifiable;\n-import com.powsybl.iidm.network.TapChanger;\n-import com.powsybl.iidm.network.TwoWindingsTransformer;\n-import com.powsybl.iidm.network.ValidationUtil;", "originalCommit": "3aeabe7c50fad12487b633efd57bee86d840143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0MDM5Mw==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390240393", "bodyText": "Sorry, my bad\nUse Intellij configuration \"Optimize imports on the fly\"", "author": "tadam50", "createdAt": "2020-03-10T11:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyNzYxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyODE4MA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390128180", "bodyText": "Do you confirm that HvdcLineAdderAdapter doesn\u2019t inherit from a class which is responsible of the fictitious attribute", "author": "mathbagu", "createdAt": "2020-03-10T07:16:23Z", "path": "iidm/iidm-mergingview/src/main/java/com/powsybl/iidm/mergingview/HvdcLineAdderAdapter.java", "diffHunk": "@@ -130,6 +133,12 @@ public HvdcLineAdder setEnsureIdUnicity(final boolean ensureIdUnicity) {\n         return this;\n     }\n \n+    @Override\n+    public HvdcLineAdder setFictitious(final boolean fictitious) {\n+        this.fictitious = fictitious;\n+        return this;\n+    }", "originalCommit": "3aeabe7c50fad12487b633efd57bee86d840143f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIzODc2NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390238764", "bodyText": "HvdcLineAdderAdapter does not inherit from AbstractIdentifiableAdderAdapter\nTo be discussed:\nI can create a new class which is responsible of the id, name, ensureIdUnicity, fictitious & MergingViewIndex\nHvdcLineAdderAdapter & LineAdderAdapter could inherit from it", "author": "tadam50", "createdAt": "2020-03-10T11:03:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDEyODE4MA=="}], "type": "inlineReview"}, {"oid": "23680fe7f3d838203c5d8087e7244016897c7c92", "url": "https://github.com/powsybl/powsybl-core/commit/23680fe7f3d838203c5d8087e7244016897c7c92", "message": "Merging view step : taking into account PR reviews\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-10T11:44:51Z", "type": "commit"}, {"oid": "8b08184a217a488e54c4774d62b12ecd579e618f", "url": "https://github.com/powsybl/powsybl-core/commit/8b08184a217a488e54c4774d62b12ecd579e618f", "message": "Merging view step : increase code coverage\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-10T15:02:28Z", "type": "commit"}, {"oid": "af647432c90c7e3f37be43fa08db60912e89aab0", "url": "https://github.com/powsybl/powsybl-core/commit/af647432c90c7e3f37be43fa08db60912e89aab0", "message": "Merge branch 'master' into issue_1104_fictitious\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-10T15:04:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM0NzA2OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390347069", "bodyText": "Add default implementation", "author": "MioRtia", "createdAt": "2020-03-10T14:19:20Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/IdentifiableAdder.java", "diffHunk": "@@ -18,4 +18,5 @@\n \n     T setName(String name);\n \n+    T setFictitious(boolean fictitious);", "originalCommit": "23680fe7f3d838203c5d8087e7244016897c7c92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDgwNzg4NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r390807884", "bodyText": "Good catch", "author": "tadam50", "createdAt": "2020-03-11T08:26:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDM0NzA2OQ=="}], "type": "inlineReview"}, {"oid": "e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "url": "https://github.com/powsybl/powsybl-core/commit/e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "message": "Merging view step : fix default implementation IdentifiableAdder\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-11T08:26:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NjY0MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r392266641", "bodyText": "This method could return false by default instead of throwing an exception.\n@MioRtia What do you think?", "author": "mathbagu", "createdAt": "2020-03-13T14:36:14Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Identifiable.java", "diffHunk": "@@ -74,4 +74,18 @@ default Properties getProperties() {\n      * Get properties key values.\n      */\n     Set<String> getPropertyNames();\n+\n+    /**\n+     * Get the fictitious status of the switch\n+     */\n+    default boolean isFictitious() {\n+        throw new UnsupportedOperationException();\n+    }", "originalCommit": "e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjkwOTk2NA==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r392909964", "bodyText": "Both solutions are good to me!", "author": "miovd", "createdAt": "2020-03-16T10:18:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NjY0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NjY5MQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r392266691", "bodyText": "Fix the javadoc", "author": "mathbagu", "createdAt": "2020-03-13T14:36:20Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Identifiable.java", "diffHunk": "@@ -74,4 +74,18 @@ default Properties getProperties() {\n      * Get properties key values.\n      */\n     Set<String> getPropertyNames();\n+\n+    /**\n+     * Get the fictitious status of the switch", "originalCommit": "e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2Njc2OQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r392266769", "bodyText": "Fix the javadoc", "author": "mathbagu", "createdAt": "2020-03-13T14:36:28Z", "path": "iidm/iidm-api/src/main/java/com/powsybl/iidm/network/Identifiable.java", "diffHunk": "@@ -74,4 +74,18 @@ default Properties getProperties() {\n      * Get properties key values.\n      */\n     Set<String> getPropertyNames();\n+\n+    /**\n+     * Get the fictitious status of the switch\n+     */\n+    default boolean isFictitious() {\n+        throw new UnsupportedOperationException();\n+    }\n+\n+    /**\n+     * Set the fictitious status of the switch", "originalCommit": "e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2OTMzOQ==", "url": "https://github.com/powsybl/powsybl-core/pull/1209#discussion_r392269339", "bodyText": "I think the tests are useless: why don't you delegate the call automatically", "author": "mathbagu", "createdAt": "2020-03-13T14:40:42Z", "path": "iidm/iidm-mergingview/src/main/java/com/powsybl/iidm/mergingview/MergedLine.java", "diffHunk": "@@ -432,6 +432,21 @@ public boolean hasProperty(final String key) {\n         return properties.keySet().stream().map(Object::toString).collect(Collectors.toSet());\n     }\n \n+    @Override\n+    public boolean isFictitious() {\n+        return dl1.isFictitious() || dl2.isFictitious();\n+    }\n+\n+    @Override\n+    public void setFictitious(boolean fictitious) {\n+        if (dl1.isFictitious() != fictitious) {\n+            dl1.setFictitious(fictitious);\n+        }\n+        if (dl2.isFictitious() != fictitious) {\n+            dl2.setFictitious(fictitious);\n+        }\n+    }", "originalCommit": "e9a6e2de6280febd26fbbbdf0b8f33bdb2fc8277", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "afb3ae7ab4e88f82ce5c44f2c7ea67d58599c92a", "url": "https://github.com/powsybl/powsybl-core/commit/afb3ae7ab4e88f82ce5c44f2c7ea67d58599c92a", "message": "Merging view step : taking into account PR reviews\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-03-13T15:21:04Z", "type": "commit"}, {"oid": "b4620c1e9c59d7ae0072c40fb355c2dafa55447b", "url": "https://github.com/powsybl/powsybl-core/commit/b4620c1e9c59d7ae0072c40fb355c2dafa55447b", "message": "Merge branch 'master' into issue_1104_fictitious", "committedDate": "2020-03-16T10:40:51Z", "type": "commit"}]}