{"pr_number": 1258, "pr_title": "Fix SynchronousComponent buses filtering", "pr_createdAt": "2020-04-03T15:19:41Z", "pr_url": "https://github.com/powsybl/powsybl-core/pull/1258", "timeline": [{"oid": "2781a40836b4a4c897c7589d0cb360c3f9683f80", "url": "https://github.com/powsybl/powsybl-core/commit/2781a40836b4a4c897c7589d0cb360c3f9683f80", "message": "Fix SynchronousComponent buses filtering\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-04-03T15:11:51Z", "type": "commit"}, {"oid": "25b0c4c445b8ec65912d99ebfcd7228319291466", "url": "https://github.com/powsybl/powsybl-core/commit/25b0c4c445b8ec65912d99ebfcd7228319291466", "message": "Increase code coverage\n\nSigned-off-by: Thomas ADAM <tadam@silicom.fr>", "committedDate": "2020-04-03T15:45:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzNTAxMA==", "url": "https://github.com/powsybl/powsybl-core/pull/1258#discussion_r404635010", "bodyText": "We should rename this method to give it a better name like getBusFilter() or getBusPredicate()", "author": "mathbagu", "createdAt": "2020-04-07T08:36:40Z", "path": "iidm/iidm-impl/src/main/java/com/powsybl/iidm/network/impl/AbstractComponentImpl.java", "diffHunk": "@@ -44,11 +46,15 @@ public int getSize() {\n \n     @Override\n     public Iterable<Bus> getBuses() {\n-        return Iterables.filter(networkRef.get().getBusView().getBuses(), bus -> bus.getConnectedComponent() == ComponentImpl.this);\n+        return StreamSupport.stream(networkRef.get().getBusView().getBuses().spliterator(), false)\n+                            .filter(filterOnThis())\n+                            .collect(Collectors.toList());\n     }\n \n     @Override\n     public Stream<Bus> getBusStream() {\n-        return networkRef.get().getBusView().getBusStream().filter(bus -> bus.getConnectedComponent() == ComponentImpl.this);\n+        return networkRef.get().getBusView().getBusStream().filter(filterOnThis());\n     }\n+\n+    protected abstract Predicate<Bus> filterOnThis();", "originalCommit": "25b0c4c445b8ec65912d99ebfcd7228319291466", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc5NDMzNw==", "url": "https://github.com/powsybl/powsybl-core/pull/1258#discussion_r404794337", "bodyText": "I did it, if it is okay for you, you can merge.", "author": "miovd", "createdAt": "2020-04-07T13:08:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYzNTAxMA=="}], "type": "inlineReview"}, {"oid": "bec3739355a1092bf74610852aee7717f5e40fa4", "url": "https://github.com/powsybl/powsybl-core/commit/bec3739355a1092bf74610852aee7717f5e40fa4", "message": "rename filterOnthis as getBusPredicate\n\nSigned-off-by: RALAMBOTIANA MIORA <miora.ralambotiana@rte-france.com>", "committedDate": "2020-04-07T13:05:42Z", "type": "commit"}, {"oid": "940ca34df2de0c06a0e2e5fa9d863bd85ad3d406", "url": "https://github.com/powsybl/powsybl-core/commit/940ca34df2de0c06a0e2e5fa9d863bd85ad3d406", "message": "Merge branch 'master' into fix_synchronousComponent_computation", "committedDate": "2020-04-07T14:10:55Z", "type": "commit"}]}