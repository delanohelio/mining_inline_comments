{"pr_number": 286, "pr_title": "[MOB-1012] Migrate to Github Actions", "pr_createdAt": "2020-11-21T02:17:46Z", "pr_url": "https://github.com/Iterable/iterable-android-sdk/pull/286", "timeline": [{"oid": "d2d398b3a376dd13a100af6cb2b0b2f84e1fde95", "url": "https://github.com/Iterable/iterable-android-sdk/commit/d2d398b3a376dd13a100af6cb2b0b2f84e1fde95", "message": "Test", "committedDate": "2020-11-21T02:19:21Z", "type": "forcePushed"}, {"oid": "fba4dded1261bc48e9c91a728190e43c30fa7592", "url": "https://github.com/Iterable/iterable-android-sdk/commit/fba4dded1261bc48e9c91a728190e43c30fa7592", "message": "Test", "committedDate": "2020-11-21T02:22:19Z", "type": "forcePushed"}, {"oid": "f6fc6438b1f01274e8a42f85764d720d0f490fb7", "url": "https://github.com/Iterable/iterable-android-sdk/commit/f6fc6438b1f01274e8a42f85764d720d0f490fb7", "message": "Test", "committedDate": "2020-11-21T02:27:13Z", "type": "forcePushed"}, {"oid": "abf04227854883fa3654448109f19492525e21dc", "url": "https://github.com/Iterable/iterable-android-sdk/commit/abf04227854883fa3654448109f19492525e21dc", "message": "Test", "committedDate": "2020-11-21T02:35:39Z", "type": "forcePushed"}, {"oid": "3b74306fbac40b5d92020acc895fcf819ee12505", "url": "https://github.com/Iterable/iterable-android-sdk/commit/3b74306fbac40b5d92020acc895fcf819ee12505", "message": "Test", "committedDate": "2020-11-21T02:39:07Z", "type": "forcePushed"}, {"oid": "892abb9e49ce1f5443b2126c9bfbacf97016dfcf", "url": "https://github.com/Iterable/iterable-android-sdk/commit/892abb9e49ce1f5443b2126c9bfbacf97016dfcf", "message": "Test", "committedDate": "2020-11-21T04:14:02Z", "type": "forcePushed"}, {"oid": "6c08158403a52d700e2f589f8b8254affe1be626", "url": "https://github.com/Iterable/iterable-android-sdk/commit/6c08158403a52d700e2f589f8b8254affe1be626", "message": "Set up Github Actions CI", "committedDate": "2020-11-21T04:15:59Z", "type": "commit"}, {"oid": "6c08158403a52d700e2f589f8b8254affe1be626", "url": "https://github.com/Iterable/iterable-android-sdk/commit/6c08158403a52d700e2f589f8b8254affe1be626", "message": "Set up Github Actions CI", "committedDate": "2020-11-21T04:15:59Z", "type": "forcePushed"}, {"oid": "65c58638e9cbd5cd45bf926c0dfc42dd11c02d2a", "url": "https://github.com/Iterable/iterable-android-sdk/commit/65c58638e9cbd5cd45bf926c0dfc42dd11c02d2a", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T01:18:19Z", "type": "forcePushed"}, {"oid": "18aea682dce1f81e3c2b9bcf6a6e3052a0a2d150", "url": "https://github.com/Iterable/iterable-android-sdk/commit/18aea682dce1f81e3c2b9bcf6a6e3052a0a2d150", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T01:34:04Z", "type": "forcePushed"}, {"oid": "1044fa5796efadf0e8335e65ab714935a5db635c", "url": "https://github.com/Iterable/iterable-android-sdk/commit/1044fa5796efadf0e8335e65ab714935a5db635c", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T02:04:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTE1MjY4Ng==", "url": "https://github.com/Iterable/iterable-android-sdk/pull/286#discussion_r529152686", "bodyText": "I've disabled CodeClimate reporting for now.. Codecov works though.", "author": "vbabenkoru", "createdAt": "2020-11-24T02:26:31Z", "path": ".github/workflows/build.yml", "diffHunk": "@@ -0,0 +1,119 @@\n+name: Build and Test\n+on:\n+  push:\n+    branches:\n+      - master\n+  pull_request:\n+jobs:\n+  check:\n+    name: Check\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Validate Gradle Wrapper\n+        uses: gradle/wrapper-validation-action@v1\n+\n+      - name: Configure JDK\n+        uses: actions/setup-java@v1\n+        with:\n+            java-version: 1.8\n+\n+      - run: touch local.properties\n+\n+      - name: Test\n+        run: ./gradlew :iterableapi:checkstyle :iterableapi-ui:assembleDebug :iterableapi:javadoc :iterableapi-ui:javadoc\n+\n+  unit-tests:\n+    name: Unit tests\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Validate Gradle Wrapper\n+        uses: gradle/wrapper-validation-action@v1\n+\n+      - name: Configure JDK\n+        uses: actions/setup-java@v1\n+        with:\n+            java-version: 1.8\n+\n+      - run: touch local.properties\n+\n+      - name: Test\n+        run: ./gradlew :iterableapi:jacocoTestDebugUnitTestReport :app:jacocoDebugTestReport\n+\n+      - name: Upload coverage data\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: unit-tests\n+          path: |\n+            ./**/build/**/jacoco*.xml\n+            ./**/build/**/report.xml\n+\n+  instrumentation-tests:\n+    name: Instrumentation tests\n+    runs-on: macos-latest\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Validate Gradle Wrapper\n+        uses: gradle/wrapper-validation-action@v1\n+\n+      - name: Configure JDK\n+        uses: actions/setup-java@v1\n+        with:\n+            java-version: 1.8\n+\n+      - run: touch local.properties\n+\n+      - name: Test\n+        uses: reactivecircus/android-emulator-runner@v2\n+        with:\n+          api-level: 28\n+          script: ./gradlew :iterableapi:connectedCheck :app:jacocoDebugAndroidTestReport\n+\n+      - name: Upload coverage data\n+        uses: actions/upload-artifact@v2\n+        with:\n+          name: instrumentation-tests\n+          path: |\n+            ./**/build/**/jacoco*.xml\n+            ./**/build/**/report.xml\n+\n+  report-coverage:\n+    name: Report coverage\n+    runs-on: ubuntu-latest\n+    needs: [unit-tests, instrumentation-tests]\n+    steps:\n+      - name: Checkout\n+        uses: actions/checkout@v2\n+\n+      - name: Configure JDK\n+        uses: actions/setup-java@v1\n+        with:\n+            java-version: 1.8\n+\n+      - run: curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter\n+      - run: chmod +x ./cc-test-reporter\n+      #- run: ./cc-test-reporter before-build\n+\n+      - name: Download unit tests coverage\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: unit-tests\n+\n+      - name: Download instrumentation tests coverage\n+        uses: actions/download-artifact@v2\n+        with:\n+          name: instrumentation-tests\n+\n+      - run: bash <(curl -s https://codecov.io/bash)\n+      #- run: ./cc-test-reporter format-coverage app/build/reports/jacoco/jacocoDebugTestReport/jacocoDebugTestReport.xml --input-type jacoco -d", "originalCommit": "1044fa5796efadf0e8335e65ab714935a5db635c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5da69f186ac5fbf97a993bd90eb78db8badc7ee6", "url": "https://github.com/Iterable/iterable-android-sdk/commit/5da69f186ac5fbf97a993bd90eb78db8badc7ee6", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T07:32:13Z", "type": "forcePushed"}, {"oid": "94808deacdcb42994d47579a946644341c46d3fb", "url": "https://github.com/Iterable/iterable-android-sdk/commit/94808deacdcb42994d47579a946644341c46d3fb", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T07:33:46Z", "type": "forcePushed"}, {"oid": "220f674979841460ae4e793923172e33799279b2", "url": "https://github.com/Iterable/iterable-android-sdk/commit/220f674979841460ae4e793923172e33799279b2", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T07:49:36Z", "type": "commit"}, {"oid": "220f674979841460ae4e793923172e33799279b2", "url": "https://github.com/Iterable/iterable-android-sdk/commit/220f674979841460ae4e793923172e33799279b2", "message": "Set up code coverage reporting", "committedDate": "2020-11-24T07:49:36Z", "type": "forcePushed"}]}