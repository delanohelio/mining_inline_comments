{"pr_number": 732, "pr_title": "Adds an event for blob conversion analytics", "pr_createdAt": "2020-04-23T13:12:11Z", "pr_url": "https://github.com/scireum/sirius-biz/pull/732", "timeline": [{"oid": "7c5682bc76d2496871e8c2dca33f14f296f8586f", "url": "https://github.com/scireum/sirius-biz/commit/7c5682bc76d2496871e8c2dca33f14f296f8586f", "message": "Adds an event for blob conversion analytics\n\nFixes: SIRI-206", "committedDate": "2020-04-23T13:10:44Z", "type": "commit"}, {"oid": "fb0853e207d02fccd8ad082b4827bff0499aa66b", "url": "https://github.com/scireum/sirius-biz/commit/fb0853e207d02fccd8ad082b4827bff0499aa66b", "message": "Removes tool version as it cant be easily be filled most of the time\n\nFixes: SIRI-206", "committedDate": "2020-04-23T13:24:01Z", "type": "commit"}, {"oid": "ef0831f124e0526fcef715880ef1574377a22dc5", "url": "https://github.com/scireum/sirius-biz/commit/ef0831f124e0526fcef715880ef1574377a22dc5", "message": "Stores tenant id instead of full user data\n\nThe other fields of user data are probably empty most of the time during conversion as the conversion is executed in the background not triggered by a user.\n\nFixes: SIRI-206", "committedDate": "2020-04-23T13:45:09Z", "type": "commit"}, {"oid": "e29a21b9b782801b957f5a923cdd4c0bcf28b0b5", "url": "https://github.com/scireum/sirius-biz/commit/e29a21b9b782801b957f5a923cdd4c0bcf28b0b5", "message": "Marks some optional fields of the event as nullable\n\nFixes: SIRI-206", "committedDate": "2020-04-23T14:01:16Z", "type": "commit"}, {"oid": "af9f9b681882d2733eda2d6c2a02c0e773aa80dc", "url": "https://github.com/scireum/sirius-biz/commit/af9f9b681882d2733eda2d6c2a02c0e773aa80dc", "message": "Also logs handled exceptions occurring while checking a written event\n\nThese include nullability or length checks of fields which should be logged to help troubleshooting failed event writes.", "committedDate": "2020-04-23T14:05:31Z", "type": "commit"}, {"oid": "5d9271e898b67983e1b3869f28138d7550f23392", "url": "https://github.com/scireum/sirius-biz/commit/5d9271e898b67983e1b3869f28138d7550f23392", "message": "JavaDoc", "committedDate": "2020-04-23T14:33:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM1MzE1Ng==", "url": "https://github.com/scireum/sirius-biz/pull/732#discussion_r414353156", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Contains the database ID (if available) of the file used as a source for the conversion.\n          \n          \n            \n                 * Contains the database ID (if available) of the file used as the target or destination for the conversion.", "author": "andyHa", "createdAt": "2020-04-24T07:22:06Z", "path": "src/main/java/sirius/biz/storage/layer2/variants/ConversionEvent.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.storage.layer2.variants;\n+\n+import sirius.biz.analytics.events.Event;\n+import sirius.db.mixing.Mapping;\n+import sirius.db.mixing.annotations.NullAllowed;\n+\n+/**\n+ * Records the successful/failed conversion of a {@link BlobVariant} by a {@link Converter}.\n+ */\n+public class ConversionEvent extends Event {\n+\n+    /**\n+     * Contains the database ID (if available) of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_ID = Mapping.named(\"sourceId\");\n+    @NullAllowed\n+    private String sourceId;\n+\n+    /**\n+     * Contains the file name of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_FILE_NAME = Mapping.named(\"sourceFileName\");\n+    private String sourceFileName;\n+\n+    /**\n+     * Contains the file type / extension of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_TYPE = Mapping.named(\"sourceType\");\n+    private String sourceType;\n+\n+    /**\n+     * Contains the database ID (if available) of the file used as a source for the conversion.", "originalCommit": "5d9271e898b67983e1b3869f28138d7550f23392", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c1a3f0770a12e031f09dab0d7b8c4ad822ac219b", "url": "https://github.com/scireum/sirius-biz/commit/c1a3f0770a12e031f09dab0d7b8c4ad822ac219b", "message": "Typo\n\nCo-Authored-By: Andreas Haufler <aha@scireum.de>", "committedDate": "2020-04-24T07:23:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDM1Njk3MQ==", "url": "https://github.com/scireum/sirius-biz/pull/732#discussion_r414356971", "bodyText": "in the other 2 events with tenants already defined in biz, this field is simply called \"tenant\"  - unify these?", "author": "meg1502", "createdAt": "2020-04-24T07:28:56Z", "path": "src/main/java/sirius/biz/storage/layer2/variants/ConversionEvent.java", "diffHunk": "@@ -0,0 +1,179 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.storage.layer2.variants;\n+\n+import sirius.biz.analytics.events.Event;\n+import sirius.db.mixing.Mapping;\n+import sirius.db.mixing.annotations.NullAllowed;\n+\n+/**\n+ * Records the successful/failed conversion of a {@link BlobVariant} by a {@link Converter}.\n+ */\n+public class ConversionEvent extends Event {\n+\n+    /**\n+     * Contains the database ID (if available) of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_ID = Mapping.named(\"sourceId\");\n+    @NullAllowed\n+    private String sourceId;\n+\n+    /**\n+     * Contains the file name of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_FILE_NAME = Mapping.named(\"sourceFileName\");\n+    private String sourceFileName;\n+\n+    /**\n+     * Contains the file type / extension of the file used as a source for the conversion.\n+     */\n+    public static final Mapping SOURCE_TYPE = Mapping.named(\"sourceType\");\n+    private String sourceType;\n+\n+    /**\n+     * Contains the database ID (if available) of the file used as the target or destination for the conversion.\n+     */\n+    public static final Mapping TARGET_ID = Mapping.named(\"targetId\");\n+    @NullAllowed\n+    private String targetId;\n+\n+    /**\n+     * Contains the name of the type / variant being created during conversion.\n+     */\n+    public static final Mapping TARGET_TYPE = Mapping.named(\"targetType\");\n+    private String targetType;\n+\n+    /**\n+     * Contains the key of the {@link Converter} running the conversion.\n+     */\n+    public static final Mapping CONVERTER = Mapping.named(\"converter\");\n+    @NullAllowed\n+    private String converter;\n+\n+    /**\n+     * Contains the name of the actual tool / application used for the conversion.\n+     */\n+    public static final Mapping TOOL_NAME = Mapping.named(\"toolName\");\n+    @NullAllowed\n+    private String toolName;\n+\n+    /**\n+     * Contains whether or not the conversion resulted in the desired output file.\n+     */\n+    public static final Mapping SUCCESSFUL = Mapping.named(\"successful\");\n+    private boolean successful;\n+\n+    /**\n+     * Contains an optional descriptive reason when the conversion failed.\n+     */\n+    public static final Mapping FAIL_REASON = Mapping.named(\"failReason\");\n+    @NullAllowed\n+    private String failReason;\n+\n+    /**\n+     * Contains how long the conversion took in milliseconds.\n+     */\n+    public static final Mapping DURATION = Mapping.named(\"duration\");\n+    private long duration = 0;\n+\n+    /**\n+     * Contains the tenant owning the source and target files being converted.\n+     */\n+    public static final Mapping TENANT_ID = Mapping.named(\"tenantId\");\n+    @NullAllowed\n+    private String tenantId;", "originalCommit": "c1a3f0770a12e031f09dab0d7b8c4ad822ac219b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b8ae48fcd355e2631d62f2fe1d33cba7891d0a82", "url": "https://github.com/scireum/sirius-biz/commit/b8ae48fcd355e2631d62f2fe1d33cba7891d0a82", "message": "Renames tenant field to be more unified\n\nFixes: SIRI-206", "committedDate": "2020-04-24T10:35:38Z", "type": "commit"}]}