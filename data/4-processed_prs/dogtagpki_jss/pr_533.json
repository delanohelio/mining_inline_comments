{"pr_number": 533, "pr_title": "Hack: provide SSLContext's SSLSocket via SunJSSE", "pr_createdAt": "2020-04-30T21:21:20Z", "pr_url": "https://github.com/dogtagpki/jss/pull/533", "timeline": [{"oid": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "url": "https://github.com/dogtagpki/jss/commit/15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "message": "Hack: provide SSLContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-04-30T21:22:32Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwMjA3Ng==", "url": "https://github.com/dogtagpki/jss/pull/533#discussion_r418302076", "bodyText": "Let's rethrow the exception to help troubleshooting:\nthrow new RuntimeException(e);", "author": "edewata", "createdAt": "2020-04-30T21:33:55Z", "path": "org/mozilla/jss/provider/javax/net/JSSContextSpi.java", "diffHunk": "@@ -88,13 +88,23 @@ public SSLSessionContext engineGetServerSessionContext() {\n     }\n \n     public SSLServerSocketFactory engineGetServerSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getServerSocketFactory();\n+        } catch (Exception e) {\n+            return null;", "originalCommit": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwMjEzNQ==", "url": "https://github.com/dogtagpki/jss/pull/533#discussion_r418302135", "bodyText": "Same thing.", "author": "edewata", "createdAt": "2020-04-30T21:34:02Z", "path": "org/mozilla/jss/provider/javax/net/JSSContextSpi.java", "diffHunk": "@@ -88,13 +88,23 @@ public SSLSessionContext engineGetServerSessionContext() {\n     }\n \n     public SSLServerSocketFactory engineGetServerSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetServerSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getServerSocketFactory();\n+        } catch (Exception e) {\n+            return null;\n+        }\n     }\n \n     public SSLSocketFactory engineGetSocketFactory() {\n-        logger.debug(\"JSSContextSpi.engineGetSocketFactory() - not implemented\");\n-        return null;\n+        logger.warn(\"JSSContextSpi.engineGetSocketFactory() - not implemented - stubbing with SunJSSE\");\n+        try {\n+            SSLContext jsse = SSLContext.getInstance(\"TLS\", \"SunJSSE\");\n+            return jsse.getSocketFactory();\n+        } catch (Exception e) {\n+            return null;", "originalCommit": "15861dcedd37284f0483ad2ebefb2ef7fa26d13c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e91d42dcb34ef721fecde283a00ac8fc26bea43", "url": "https://github.com/dogtagpki/jss/commit/2e91d42dcb34ef721fecde283a00ac8fc26bea43", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-04-30T21:38:57Z", "type": "forcePushed"}, {"oid": "3c05528a8c5fe982e32dadb2439c28d850a419b0", "url": "https://github.com/dogtagpki/jss/commit/3c05528a8c5fe982e32dadb2439c28d850a419b0", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-04-30T21:45:28Z", "type": "commit"}, {"oid": "3c05528a8c5fe982e32dadb2439c28d850a419b0", "url": "https://github.com/dogtagpki/jss/commit/3c05528a8c5fe982e32dadb2439c28d850a419b0", "message": "Hack: provide JSSContext's SSLSocket via SunJSSE\n\nUse the default SunJSSE provider to implement getSocketFactory and\ngetServerSocketFactory rather than returning null. This should appease\nimplementations expecting a SocketFactory instance.\n\nSigned-off-by: Alexander Scheel <ascheel@redhat.com>", "committedDate": "2020-04-30T21:45:28Z", "type": "forcePushed"}]}