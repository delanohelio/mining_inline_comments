{"pr_number": 6901, "pr_title": "ability to reserve DOIs through DataCite #5093", "pr_createdAt": "2020-05-08T17:52:20Z", "pr_url": "https://github.com/IQSS/dataverse/pull/6901", "timeline": [{"oid": "49a5091ce71609ab14a580db5a77517afa3448cb", "url": "https://github.com/IQSS/dataverse/commit/49a5091ce71609ab14a580db5a77517afa3448cb", "message": "for DataCite, get PID (draft state) on create #5093", "committedDate": "2020-05-08T17:44:32Z", "type": "commit"}, {"oid": "cba83f573f57e6a44be4cac889317ff6d26b69d8", "url": "https://github.com/IQSS/dataverse/commit/cba83f573f57e6a44be4cac889317ff6d26b69d8", "message": "add API to query PID state (e.g. draft vs. findable) #5093", "committedDate": "2020-05-11T19:18:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzMwMTcxNw==", "url": "https://github.com/IQSS/dataverse/pull/6901#discussion_r423301717", "bodyText": "Since this is specific to DataCite, it might be better to name it for that - doi.dataciteapibaseurl or something. (FWIW - I could swear that at some point I discussed adding a second option versus swapping mds for api in baseurlstring with someone and decided against having a second option, but I can't find code nor conversation...)", "author": "qqmyers", "createdAt": "2020-05-11T20:32:14Z", "path": "doc/sphinx-guides/source/installation/config.rst", "diffHunk": "@@ -1038,6 +1038,20 @@ See also these related database settings below:\n - :ref:`:Authority`\n - :ref:`:Shoulder`\n \n+.. _doi.baseurlstringnext\n+\n+doi.baseurlstringnext\n++++++++++++++++++++++\n+\n+Dataverse uses multiple APIs from DataCite:\n+\n+- The DataCite MDS API is older, XML-based, and configured using :ref:`doi.baseurlstring`.\n+- The DataCite REST API is newer, JSON-based, and configured using ``doi.baseurlstringnext``.\n+\n+In production, ``doi.baseurlstringnext`` should be set to ``https://api.datacite.org``", "originalCommit": "cba83f573f57e6a44be4cac889317ff6d26b69d8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e72616f9998965b2866aef58021b2ac7b3885ac5", "url": "https://github.com/IQSS/dataverse/commit/e72616f9998965b2866aef58021b2ac7b3885ac5", "message": "add APIs to reserve PIDs and list unreserved PIDs #5093", "committedDate": "2020-05-21T21:10:46Z", "type": "commit"}, {"oid": "431ee35588bdf1e067b3fcc84e57efa9c4ae2f72", "url": "https://github.com/IQSS/dataverse/commit/431ee35588bdf1e067b3fcc84e57efa9c4ae2f72", "message": "have \"get DOI\" accept normal form with doi: #5093", "committedDate": "2020-05-22T18:10:53Z", "type": "commit"}, {"oid": "9cbd5d3fd0ece200241d85365f6078c1ca55041d", "url": "https://github.com/IQSS/dataverse/commit/9cbd5d3fd0ece200241d85365f6078c1ca55041d", "message": "allow dataset to be created if DataCite is down #5093", "committedDate": "2020-05-22T20:32:27Z", "type": "commit"}, {"oid": "e8e4c9877de227d539a689b3350fba43bc5b8bbc", "url": "https://github.com/IQSS/dataverse/commit/e8e4c9877de227d539a689b3350fba43bc5b8bbc", "message": "add docs for undocumented APIs (list, reserve) #5093", "committedDate": "2020-05-22T21:09:18Z", "type": "commit"}, {"oid": "28f32220f7ed7ea19cf251e9c06d54ee5f9d1a2a", "url": "https://github.com/IQSS/dataverse/commit/28f32220f7ed7ea19cf251e9c06d54ee5f9d1a2a", "message": "grey out publish button if DataCite and no PID create time #5093", "committedDate": "2020-05-26T20:58:05Z", "type": "commit"}, {"oid": "8aacc9251c8d1288a3c0cc725a39ee9909a353c8", "url": "https://github.com/IQSS/dataverse/commit/8aacc9251c8d1288a3c0cc725a39ee9909a353c8", "message": "add API to delete DOIs when possible #5093", "committedDate": "2020-05-27T21:54:43Z", "type": "commit"}, {"oid": "f58b24ef9a87edd8e6965acb55a2f449d1609a8b", "url": "https://github.com/IQSS/dataverse/commit/f58b24ef9a87edd8e6965acb55a2f449d1609a8b", "message": "prevent publishing of unreserved PIDs #5093", "committedDate": "2020-05-28T16:38:23Z", "type": "commit"}, {"oid": "85fd5be13b1be303a1e590914f3cc7ecc0098a5c", "url": "https://github.com/IQSS/dataverse/commit/85fd5be13b1be303a1e590914f3cc7ecc0098a5c", "message": "get deleteIdentifier working for DataCite DOIs #5093", "committedDate": "2020-05-28T18:42:36Z", "type": "commit"}, {"oid": "62509c89fff6f77b062ab1a34e2221b2586c7337", "url": "https://github.com/IQSS/dataverse/commit/62509c89fff6f77b062ab1a34e2221b2586c7337", "message": "only set the create time if createIdentifier succeeded #5093\n\nThe fix required removing the throwing of RuntimeException in\nDataCiteRESTfullClient. This is considered a system exception and rolls\nback the entire \"create dataset\" command and transaction.\n\nThis commit also remove the temporary fix I had put in to allow datasets\nto be created when DataCite is down: 9cbd5d3\n\nBasically, it's a better fix. We need the create time to be null if\nDataCite is down so that we can query for unreserved DOIs and then\nreserve them.", "committedDate": "2020-05-29T18:38:35Z", "type": "commit"}, {"oid": "1dfe944775b638a86c03d4bc28b593ddb2950656", "url": "https://github.com/IQSS/dataverse/commit/1dfe944775b638a86c03d4bc28b593ddb2950656", "message": "finish removing RuntimeException (see 62509c89f) #5093", "committedDate": "2020-05-29T20:29:13Z", "type": "commit"}, {"oid": "786a7a4430547b3555d789f1069e9f930aee5012", "url": "https://github.com/IQSS/dataverse/commit/786a7a4430547b3555d789f1069e9f930aee5012", "message": "move English to bundle #5093", "committedDate": "2020-05-29T21:02:51Z", "type": "commit"}, {"oid": "27da57a02a41573832fd930856f977bcbe6fdbd8", "url": "https://github.com/IQSS/dataverse/commit/27da57a02a41573832fd930856f977bcbe6fdbd8", "message": "document \"delete PID\" API endpoint #5093", "committedDate": "2020-05-29T21:10:41Z", "type": "commit"}, {"oid": "c700f617ef13641095869aac2728a9a44c25064c", "url": "https://github.com/IQSS/dataverse/commit/c700f617ef13641095869aac2728a9a44c25064c", "message": "Merge branch 'develop' into 5093-datacite #5093\n\nConflicts:\nsrc/main/java/propertyFiles/Bundle.properties", "committedDate": "2020-06-01T14:10:08Z", "type": "commit"}, {"oid": "e1914ee20d58966dfdff1f263730fbf791065841", "url": "https://github.com/IQSS/dataverse/commit/e1914ee20d58966dfdff1f263730fbf791065841", "message": "correct docs: \"doi:\" required for get PID API #5093", "committedDate": "2020-06-03T20:28:10Z", "type": "commit"}, {"oid": "dde481c4cce48a50696fc78939f2a2c21fd15085", "url": "https://github.com/IQSS/dataverse/commit/dde481c4cce48a50696fc78939f2a2c21fd15085", "message": "add release note #5093", "committedDate": "2020-06-03T20:57:25Z", "type": "commit"}, {"oid": "c1be93f07cb0a0ef2c628ace5593d91d11d9be04", "url": "https://github.com/IQSS/dataverse/commit/c1be93f07cb0a0ef2c628ace5593d91d11d9be04", "message": "correct PID API docs for delete and reserve #5093", "committedDate": "2020-06-04T15:11:37Z", "type": "commit"}, {"oid": "7821ac7a5ab0e372b86e9337db262dec71abe7b2", "url": "https://github.com/IQSS/dataverse/commit/7821ac7a5ab0e372b86e9337db262dec71abe7b2", "message": "more descriptive error on bad API token than \"ERROR\" #5093", "committedDate": "2020-06-04T16:25:27Z", "type": "commit"}, {"oid": "6bc7d93e726b1e22ff6b75e9469176f1df23faea", "url": "https://github.com/IQSS/dataverse/commit/6bc7d93e726b1e22ff6b75e9469176f1df23faea", "message": "cross ref PID-related docs #5093", "committedDate": "2020-06-04T18:37:10Z", "type": "commit"}]}