{"pr_number": 7126, "pr_title": "post 6823 edit file form update fixes", "pr_createdAt": "2020-07-23T18:32:32Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7126", "timeline": [{"oid": "59a5ad0f9b810ebf35c6a0489af61cbdb6cd4c12", "url": "https://github.com/IQSS/dataverse/commit/59a5ad0f9b810ebf35c6a0489af61cbdb6cd4c12", "message": "fix file upload form updating in create and edit modes", "committedDate": "2020-07-23T18:15:05Z", "type": "commit"}, {"oid": "a79366d6a30247fac683352c2ec10d16186c8965", "url": "https://github.com/IQSS/dataverse/commit/a79366d6a30247fac683352c2ec10d16186c8965", "message": "remove blank line", "committedDate": "2020-07-23T18:16:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2NTA1Mg==", "url": "https://github.com/IQSS/dataverse/pull/7126#discussion_r459665052", "bodyText": "Does the addition of the contentOfHttpPanel to the update here make the fileUpload component redundant?", "author": "mheppler", "createdAt": "2020-07-23T19:02:51Z", "path": "src/main/webapp/editFilesFragment.xhtml", "diffHunk": "@@ -282,7 +282,7 @@\n                     \n                     <p:commandButton id=\"updateEditDataFilesButtonsForUpload\" action=\"#{EditDatafilesPage.uploadFinished()}\" update=\"datasetForm:editDataFilesButtons\" rendered=\"#{showFileButtonUpdate}\" style=\"display:none\"/>\n                     <p:commandButton id=\"updateEditDataFilesButtonsForDelete\" action=\"#{EditDatafilesPage.deleteFilesCompleted()}\" update=\"datasetForm:editDataFilesButtons\" rendered=\"#{showFileButtonUpdate}\" style=\"display:none\"/>\n-                    <p:commandButton id=\"AllUploadsFinished\" action=\"#{EditDatafilesPage.uploadFinished()}\" update=\"datasetForm:fileUpload,datasetForm:dropBoxUserButton,datasetForm:uploadMessage,datasetForm:rsyncPanel,datasetForm:filesCounts,datasetForm:filesTable\" oncomplete=\"javascript:bind_bsui_components();javascript:uploadWidgetDropMsg();\" style=\"display:none\"/> \n+                    <p:commandButton id=\"AllUploadsFinished\" action=\"#{EditDatafilesPage.uploadFinished()}\" update=\"datasetForm:completionButtons,datasetForm:contentOfHttpPanel,datasetForm:fileUpload,datasetForm:dropBoxUserButton,datasetForm:uploadMessage,datasetForm:rsyncPanel,datasetForm:filesCounts,datasetForm:filesTable\" oncomplete=\"javascript:bind_bsui_components();javascript:uploadWidgetDropMsg();\" style=\"display:none\"/> ", "originalCommit": "a79366d6a30247fac683352c2ec10d16186c8965", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY5NTUxNw==", "url": "https://github.com/IQSS/dataverse/pull/7126#discussion_r459695517", "bodyText": "maybe? It was there when @Form was in it too, so I wasn't sure - if it was redundant then too then maybe it can be removed. Some of the other elements could also be redundant - I didn't check.", "author": "qqmyers", "createdAt": "2020-07-23T20:01:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2NTA1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2NjMzMQ==", "url": "https://github.com/IQSS/dataverse/pull/7126#discussion_r459666331", "bodyText": "Isn't this a duplicate ID of the new completionButtons outputPanel added to the dataset?", "author": "mheppler", "createdAt": "2020-07-23T19:05:09Z", "path": "src/main/webapp/filesFragment.xhtml", "diffHunk": "@@ -117,7 +117,7 @@\n                     </div>\n                 </div>\n                 <div class=\"col-xs-7 text-right\">\n-                    <p:outputPanel id=\"filesButtons\">\n+                    <p:outputPanel id=\"completionButtons\">", "originalCommit": "a79366d6a30247fac683352c2ec10d16186c8965", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY5MjQyMg==", "url": "https://github.com/IQSS/dataverse/pull/7126#discussion_r459692422", "bodyText": "~yes, but the editFileFragment is either embedded in the dataset.xhtml or filesFragement.xhtml, but not both, so I think there is only ever one element with this id. Having them the same is really the point - as the AllUploadsFinished command tries to update 'completionButtons' and fails if it can't find it, which is what happened when I tried this without having the empty element in dataset.xhtml with this name. If there's  a way to update an element only if it exists, that should work instead.", "author": "qqmyers", "createdAt": "2020-07-23T19:56:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTY2NjMzMQ=="}], "type": "inlineReview"}, {"oid": "398459cf4b7c67b1b6e5eab96e24ddfef89eabaf", "url": "https://github.com/IQSS/dataverse/commit/398459cf4b7c67b1b6e5eab96e24ddfef89eabaf", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/7123_edit_file-form_updates", "committedDate": "2020-07-28T14:33:53Z", "type": "commit"}, {"oid": "dc19fdc8affd412167f56992c1526775273d47ea", "url": "https://github.com/IQSS/dataverse/commit/dc19fdc8affd412167f56992c1526775273d47ea", "message": "simplify by using 'optional' update of filesButtons", "committedDate": "2020-07-28T14:37:22Z", "type": "commit"}]}