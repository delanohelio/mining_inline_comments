{"pr_number": 6659, "pr_title": "6587 deleted files shown on grant permission", "pr_createdAt": "2020-02-18T19:17:33Z", "pr_url": "https://github.com/IQSS/dataverse/pull/6659", "timeline": [{"oid": "0c1f53f775c27edeae4105c0288da74f35c6f37a", "url": "https://github.com/IQSS/dataverse/commit/0c1f53f775c27edeae4105c0288da74f35c6f37a", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-10T21:39:29Z", "type": "commit"}, {"oid": "a016b12087eb7eafb22428f7bd64ed23493b2bd1", "url": "https://github.com/IQSS/dataverse/commit/a016b12087eb7eafb22428f7bd64ed23493b2bd1", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-11T14:37:52Z", "type": "commit"}, {"oid": "1d5983a5b06711b379f3cee075d2ec70178ce203", "url": "https://github.com/IQSS/dataverse/commit/1d5983a5b06711b379f3cee075d2ec70178ce203", "message": "#6587 check file status before adding to map", "committedDate": "2020-02-11T19:38:30Z", "type": "commit"}, {"oid": "ba0c7f75721e5b94a4511c231bfe00cb3e26e83b", "url": "https://github.com/IQSS/dataverse/commit/ba0c7f75721e5b94a4511c231bfe00cb3e26e83b", "message": "#6587 add boolean for show deleted files\n\nhard-coded to false for now", "committedDate": "2020-02-11T22:19:27Z", "type": "commit"}, {"oid": "641a0e13afe53dce8e4d4d46e5e7dae013ddf197", "url": "https://github.com/IQSS/dataverse/commit/641a0e13afe53dce8e4d4d46e5e7dae013ddf197", "message": "#6587 Add toggle for Include Deleted Files", "committedDate": "2020-02-12T16:59:32Z", "type": "commit"}, {"oid": "b3e8ccfbb774fcba7dcb49f86a80087b35ad07df", "url": "https://github.com/IQSS/dataverse/commit/b3e8ccfbb774fcba7dcb49f86a80087b35ad07df", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-12T16:59:45Z", "type": "commit"}, {"oid": "b9ba76ee3a88ed17ba2f72f1da72568e682c0e86", "url": "https://github.com/IQSS/dataverse/commit/b9ba76ee3a88ed17ba2f72f1da72568e682c0e86", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-12T18:48:41Z", "type": "commit"}, {"oid": "d83c88187bb7db04bf7436775729866afa326d19", "url": "https://github.com/IQSS/dataverse/commit/d83c88187bb7db04bf7436775729866afa326d19", "message": "#6587 add file directory label to manage permissions", "committedDate": "2020-02-12T19:26:28Z", "type": "commit"}, {"oid": "3556433329eab511673471184e677a38974216f2", "url": "https://github.com/IQSS/dataverse/commit/3556433329eab511673471184e677a38974216f2", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-13T18:27:25Z", "type": "commit"}, {"oid": "b56df57115debf20e0a66cf7175e2d1f25cdb9d4", "url": "https://github.com/IQSS/dataverse/commit/b56df57115debf20e0a66cf7175e2d1f25cdb9d4", "message": "#6587 add status annotation to file list", "committedDate": "2020-02-13T19:26:30Z", "type": "commit"}, {"oid": "0d1a72689d3f5dcbf33800cbdc7ee63232916825", "url": "https://github.com/IQSS/dataverse/commit/0d1a72689d3f5dcbf33800cbdc7ee63232916825", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-13T22:24:55Z", "type": "commit"}, {"oid": "38f4885bc3dc9722aae800e8f16ef844322b1c77", "url": "https://github.com/IQSS/dataverse/commit/38f4885bc3dc9722aae800e8f16ef844322b1c77", "message": "#6587 add notations for deleted files", "committedDate": "2020-02-18T16:29:21Z", "type": "commit"}, {"oid": "64bca69a7adb5a6cfb1fed4be26055f79ac03c69", "url": "https://github.com/IQSS/dataverse/commit/64bca69a7adb5a6cfb1fed4be26055f79ac03c69", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-18T16:29:41Z", "type": "commit"}, {"oid": "86b7aeeef68c2195e19062ff138f7cf71ac691e4", "url": "https://github.com/IQSS/dataverse/commit/86b7aeeef68c2195e19062ff138f7cf71ac691e4", "message": "#6587 cleanup formatting of Grant Access popup", "committedDate": "2020-02-18T18:52:17Z", "type": "commit"}, {"oid": "7112a83b5574ced4ea3728a1d968b7bb3639a5af", "url": "https://github.com/IQSS/dataverse/commit/7112a83b5574ced4ea3728a1d968b7bb3639a5af", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-18T18:52:38Z", "type": "commit"}, {"oid": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "url": "https://github.com/IQSS/dataverse/commit/8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-18T19:32:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380936139", "bodyText": "This checkbox for \"Include Deleted Files\" displays at the top of page, rather than at the top of the table it relates to. I suggest moving it down, next to the file count, above the file table in the Restricted Files panel.", "author": "mheppler", "createdAt": "2020-02-18T21:09:46Z", "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -25,6 +25,11 @@\n             <ui:param name=\"showMessagePanel\" value=\"false\"/>\n             <ui:define name=\"body\">\n                 <h:form id=\"rolesPermissionsForm\" styleClass=\"margin-top\">\n+                    <div class=\"panel-group\">\n+                    <p:selectBooleanCheckbox value=\"#{manageFilePermissionsPage.showDeleted}\" itemLabel=\"#{bundle['dataverse.permissionsFiles.files.includeDeleted']}\" onchange=\"#{manageFilePermissionsPage.init()}\" >", "originalCommit": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM1NTQyMw==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381355423", "bodyText": "I think we need to leave it where it ism because including deleted files also effects the role assignments table and if the check box is hidden in the restricted files panel it will be cumbersome to update the role assignments table.", "author": "sekmiller", "createdAt": "2020-02-19T15:11:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3MzU2Ng==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381473566", "bodyText": "In that case I would suggest that each table gets its own checkbox, rather than one checkbox, which I would say is just as hidden away at the top of the page. If we did mockups before development, the checkboxes would be directly above each of the restricted file tables, next to the file count.", "author": "mheppler", "createdAt": "2020-02-19T18:48:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3Nzg2Mg==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381477862", "bodyText": "@mheppler To reiterate what I said in Slack, it would be good if the two of you sat down together to discuss this and other feedback regarding this issue.", "author": "djbrooke", "createdAt": "2020-02-19T18:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3ODc3Ng==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381478776", "bodyText": "@djbrooke Right. I sent him a Slack msg offering to discuss.", "author": "mheppler", "createdAt": "2020-02-19T18:58:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3OTMxOQ==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381479319", "bodyText": "@mheppler perfect, thanks", "author": "djbrooke", "createdAt": "2020-02-19T18:59:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ3OTg1MQ==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381479851", "bodyText": "Thank you.", "author": "mheppler", "createdAt": "2020-02-19T19:00:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkzNjEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MDA1Mw==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380940053", "bodyText": "Not sure about the UX of the second column here for \"Draft\", while it may help when file has been deleted, it appears to be visual noise for all other use cases, by just have \"Restricted\" in two columns.", "author": "mheppler", "createdAt": "2020-02-18T21:17:20Z", "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -314,7 +321,9 @@\n                                     <p:ajax event=\"toggleSelect\"  update=\":rolesPermissionsForm:selectionCounter\" />\n \n                                     <p:column selectionMode=\"multiple\" style=\"width:2%;text-align:center\"/>\n-                                    <p:column headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                    <p:column width=\"98%\"  headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">", "originalCommit": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM2NzUzMA==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381367530", "bodyText": "The second column for Draft was not something I introduced here. I think it was done previously for the \"same file name\" issue that we talked about last week", "author": "sekmiller", "createdAt": "2020-02-19T15:58:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MDA1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0Mjc2OA==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380942768", "bodyText": "I think the \"(Deleted)\" text should be after the file name, not before, so you can easily scan the file names, since that is the value the table rows are sorted on. The same could be said about the file directory path that is added to this column (e.g \"one/001.txt\", \"two/002.txt\" \"three/003.txt\" shouldn't be the order in the table, if sorting by file path).", "author": "mheppler", "createdAt": "2020-02-18T21:23:01Z", "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -227,7 +233,8 @@\n                                     <h:outputText value=\"#{roleAssignment.assigneeDisplayInfo.title}\"/> <h:outputText value=\" (#{roleAssignment.assigneeDisplayInfo.affiliation})\" rendered=\"#{!empty roleAssignment.assigneeDisplayInfo.affiliation}\"/>\n                                 </p:column>\n                                 <p:column width=\"98%\" headerText=\"#{bundle['dataverse.permissionsFiles.files.tabHeader.fileName']}\" rendered=\"#{!empty manageFilePermissionsPage.selectedRoleAssignee}\">\n-                                    <h:outputText value=\"#{roleAssignment.definitionPoint.displayName}\"/>\n+                                    <h:outputText value=\" (#{bundle['dataverse.permissionsFiles.files.deleted']}) \" rendered=\"#{roleAssignment.deleted}\"/>", "originalCommit": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM2NTg2OA==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r381365868", "bodyText": "Yup. moved Deleted to after File Name", "author": "sekmiller", "createdAt": "2020-02-19T15:56:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0Mjc2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDk0MzgzMg==", "url": "https://github.com/IQSS/dataverse/pull/6659#discussion_r380943832", "bodyText": "See comment above at line 236 about the file.directoryLabel, in the Grant File Access popup, looking out of order because the table rows are sorted by File Name. Same applies here to the Restricted Files table.", "author": "mheppler", "createdAt": "2020-02-18T21:25:22Z", "path": "src/main/webapp/permissions-manage-files.xhtml", "diffHunk": "@@ -314,7 +321,9 @@\n                                     <p:ajax event=\"toggleSelect\"  update=\":rolesPermissionsForm:selectionCounter\" />\n \n                                     <p:column selectionMode=\"multiple\" style=\"width:2%;text-align:center\"/>\n-                                    <p:column headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                    <p:column width=\"98%\"  headerText=\"#{bundle['dataverse.permissionsFiles.assignDialog.fileName']}\">\n+                                        <h:outputText value=\" (#{bundle['dataverse.permissionsFiles.files.deleted']}) \" rendered=\"#{file.deleted}\"/>\n+                                        <h:outputText rendered=\"#{!empty file.directoryLabel}\"  value=\"#{file.directoryLabel}/\"/>", "originalCommit": "8fbc2b41ce741014e6db1c4a655f64b3c94e76ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "faceebc78ab794a3fbdc446e42da2848121f5117", "url": "https://github.com/IQSS/dataverse/commit/faceebc78ab794a3fbdc446e42da2848121f5117", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-18T22:17:16Z", "type": "commit"}, {"oid": "e6276d73007cf89a7f16cd7be08fbe871e0710c6", "url": "https://github.com/IQSS/dataverse/commit/e6276d73007cf89a7f16cd7be08fbe871e0710c6", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-19T14:22:09Z", "type": "commit"}, {"oid": "32d5feff768278a0ab9a83b79f538aa304b2e0d3", "url": "https://github.com/IQSS/dataverse/commit/32d5feff768278a0ab9a83b79f538aa304b2e0d3", "message": "#6587 move \"Deleted\" to after file name", "committedDate": "2020-02-19T15:34:54Z", "type": "commit"}, {"oid": "222bf508a84fc0253859ef693c72811be3b5f0e0", "url": "https://github.com/IQSS/dataverse/commit/222bf508a84fc0253859ef693c72811be3b5f0e0", "message": "#6587 remove directory label", "committedDate": "2020-02-19T16:06:20Z", "type": "commit"}, {"oid": "7aca3e81596cc5d26ed5b3cdd3f808f59513be30", "url": "https://github.com/IQSS/dataverse/commit/7aca3e81596cc5d26ed5b3cdd3f808f59513be30", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-19T19:18:55Z", "type": "commit"}, {"oid": "c279350e54c6cb97838c4518ae7b35befc2524ad", "url": "https://github.com/IQSS/dataverse/commit/c279350e54c6cb97838c4518ae7b35befc2524ad", "message": "#6587 include deleted on both panels", "committedDate": "2020-02-19T19:39:40Z", "type": "commit"}, {"oid": "76c393e9680349cda212ece16f140a733d766104", "url": "https://github.com/IQSS/dataverse/commit/76c393e9680349cda212ece16f140a733d766104", "message": "#6587 suppress deleted files for assign access", "committedDate": "2020-02-20T15:24:31Z", "type": "commit"}, {"oid": "1aaa01f1e7831b063ec8d0595051820069e35dbb", "url": "https://github.com/IQSS/dataverse/commit/1aaa01f1e7831b063ec8d0595051820069e35dbb", "message": "Merge branch 'develop' into 6587-deleted-files-shown-on-grant-permission", "committedDate": "2020-02-20T19:43:08Z", "type": "commit"}, {"oid": "f2748b7968371974d55acc6fc96edabc53261b2b", "url": "https://github.com/IQSS/dataverse/commit/f2748b7968371974d55acc6fc96edabc53261b2b", "message": "Added text-muted styles to file path in Manage Restricted Files pg [ref #6587]", "committedDate": "2020-02-20T21:26:06Z", "type": "commit"}, {"oid": "61b24ee4833b386f9c24ea40f49e0941f1105f40", "url": "https://github.com/IQSS/dataverse/commit/61b24ee4833b386f9c24ea40f49e0941f1105f40", "message": "#6587 fix refresh - default show deleted", "committedDate": "2020-02-20T22:19:33Z", "type": "commit"}, {"oid": "c682249ec89fba7130cfd8dfeac24bc0a03f8a50", "url": "https://github.com/IQSS/dataverse/commit/c682249ec89fba7130cfd8dfeac24bc0a03f8a50", "message": "#6587 remove stray ;", "committedDate": "2020-02-21T14:24:58Z", "type": "commit"}]}