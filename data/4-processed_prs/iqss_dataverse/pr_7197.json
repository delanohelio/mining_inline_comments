{"pr_number": 7197, "pr_title": "6798 create dv validation", "pr_createdAt": "2020-08-13T15:38:14Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7197", "timeline": [{"oid": "e894b9ab5c9a6037c4a474e72824ccf220075257", "url": "https://github.com/IQSS/dataverse/commit/e894b9ab5c9a6037c4a474e72824ccf220075257", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-13T13:43:46Z", "type": "commit"}, {"oid": "d820612a5d5bd6ee35620e313c4806372d4e95eb", "url": "https://github.com/IQSS/dataverse/commit/d820612a5d5bd6ee35620e313c4806372d4e95eb", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-13T13:57:05Z", "type": "commit"}, {"oid": "1d63e49e708c9790798e68d863ef5a0516d5e736", "url": "https://github.com/IQSS/dataverse/commit/1d63e49e708c9790798e68d863ef5a0516d5e736", "message": "#6798 remove required=true to get BeanValidation messages", "committedDate": "2020-08-13T15:16:08Z", "type": "commit"}, {"oid": "c569c9429301ca15fdc0811dd5c8ba94589bd72a", "url": "https://github.com/IQSS/dataverse/commit/c569c9429301ca15fdc0811dd5c8ba94589bd72a", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-13T15:31:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470044976", "bodyText": "How was this not there before??", "author": "scolapasta", "createdAt": "2020-08-13T15:39:27Z", "path": "src/main/webapp/dataverse.xhtml", "diffHunk": "@@ -110,7 +110,8 @@\n                                           data-toggle=\"tooltip\" data-placement=\"auto right\" data-original-title=\"#{bundle['dataverse.name.title']}\"></span>\n                                 </h:outputLabel>\n                                 <div class=\"form-col-container\">\n-                                    <p:inputText id=\"name\" styleClass=\"form-control\" value=\"#{DataversePage.dataverse.name}\" required=\"true\"/>\n+                                    <p:inputText id=\"name\" styleClass=\"form-control\" value=\"#{DataversePage.dataverse.name}\" />", "originalCommit": "c569c9429301ca15fdc0811dd5c8ba94589bd72a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA1NDc3OA==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470054778", "bodyText": "These required attributes were adding in 4.18 for issue #5615 in an attempt to improve accessibility of the forms.", "author": "mheppler", "createdAt": "2020-08-13T15:54:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA3NTA3OQ==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470075079", "bodyText": "I can take the approach of trying to get the required message from the ValidationMessages.properties file and see if that works.", "author": "sekmiller", "createdAt": "2020-08-13T16:26:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4MTc3MQ==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470081771", "bodyText": "Looks like it was just a miss. No one leaves the name blank? or something.", "author": "sekmiller", "createdAt": "2020-08-13T16:37:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA4NTA4OA==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470085088", "bodyText": "The attributes do not appear necessary for the validation to function, but it is in order to put an accessibility friendly aria-required=\"true\" in the input component code, as the red asterisk visual indicator is not sufficient.", "author": "mheppler", "createdAt": "2020-08-13T16:43:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1MDc5OA==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470150798", "bodyText": "@mheppler So do all the others ones need to have it added back?", "author": "scolapasta", "createdAt": "2020-08-13T18:10:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MTgzOQ==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470161839", "bodyText": "I believe so. I tried using pt:aria-required=\"true\" in the p:input component to get the attribute in there another way, but it was just ignored.", "author": "mheppler", "createdAt": "2020-08-13T18:30:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY1OTg4Mg==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r471659882", "bodyText": "I returned all of the required='true' where applicable. I am now getting the requiredMessage from the Bundle because the ValidationMessages.properties are only used by the Bean Validations", "author": "sekmiller", "createdAt": "2020-08-17T17:51:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NDk3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NTE4Ng==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470045186", "bodyText": "Why remove required on this (and other) fields?", "author": "scolapasta", "createdAt": "2020-08-13T15:39:45Z", "path": "src/main/webapp/dataverse.xhtml", "diffHunk": "@@ -135,7 +136,7 @@\n                                 <div class=\"form-col-container\">\n                                     <div class=\"input-group\">\n                                         <div class=\"input-group-addon\"><span class=\"small\">#{systemConfig.dataverseSiteUrl}/dataverse/</span></div>\n-                                        <p:inputText id=\"identifier\" styleClass=\"form-control\" validator=\"#{DataversePage.validateAlias}\" value=\"#{DataversePage.dataverse.alias}\" required=\"true\"/>\n+                                        <p:inputText id=\"identifier\" styleClass=\"form-control\" validator=\"#{DataversePage.validateAlias}\" value=\"#{DataversePage.dataverse.alias}\" />", "originalCommit": "c569c9429301ca15fdc0811dd5c8ba94589bd72a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA3NDA2Mg==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r470074062", "bodyText": "The required is handled by the @notblank bean validation on the fields in Dataverse. All of them are annotated with NotBlank", "author": "sekmiller", "createdAt": "2020-08-13T16:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NTE4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTY2MDYyOQ==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r471660629", "bodyText": "again, returned the required=true based on Mike's need of them for accessibility.", "author": "sekmiller", "createdAt": "2020-08-17T17:52:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDA0NTE4Ng=="}], "type": "inlineReview"}, {"oid": "e9e1994abb37a4634fb6f9e38a9c7984baf0f7c8", "url": "https://github.com/IQSS/dataverse/commit/e9e1994abb37a4634fb6f9e38a9c7984baf0f7c8", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-17T13:26:04Z", "type": "commit"}, {"oid": "b12f635bece3e5f848b67d99f2f6b0cc5e12f499", "url": "https://github.com/IQSS/dataverse/commit/b12f635bece3e5f848b67d99f2f6b0cc5e12f499", "message": "#6798 copy \"required message\" to Bundle", "committedDate": "2020-08-17T15:18:12Z", "type": "commit"}, {"oid": "35e3ae058797a1df86169bf0523be926a004fc6e", "url": "https://github.com/IQSS/dataverse/commit/35e3ae058797a1df86169bf0523be926a004fc6e", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-17T17:38:20Z", "type": "commit"}, {"oid": "e7df7847f10368d9dbfb89862fb87747a43688aa", "url": "https://github.com/IQSS/dataverse/commit/e7df7847f10368d9dbfb89862fb87747a43688aa", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-19T14:25:35Z", "type": "commit"}, {"oid": "dbe4fcdc118579bdfc149e770878cb067238b006", "url": "https://github.com/IQSS/dataverse/commit/dbe4fcdc118579bdfc149e770878cb067238b006", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-08-24T19:10:35Z", "type": "commit"}, {"oid": "e0b23ba6d249f4a2e2283f57abe53b470669cd06", "url": "https://github.com/IQSS/dataverse/commit/e0b23ba6d249f4a2e2283f57abe53b470669cd06", "message": "#6798 load val messages as a bundle for read msgs", "committedDate": "2020-09-04T15:27:28Z", "type": "commit"}, {"oid": "8dbc343c02c8f282a63683d54092ca6ecf1061ab", "url": "https://github.com/IQSS/dataverse/commit/8dbc343c02c8f282a63683d54092ca6ecf1061ab", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-09-04T15:27:43Z", "type": "commit"}, {"oid": "2b7b1e7fd228c40592169d48e978d216f86f8427", "url": "https://github.com/IQSS/dataverse/commit/2b7b1e7fd228c40592169d48e978d216f86f8427", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-09-08T13:38:39Z", "type": "commit"}, {"oid": "4a8ff71c15b784b0314bd55a6a18ed7c06c89715", "url": "https://github.com/IQSS/dataverse/commit/4a8ff71c15b784b0314bd55a6a18ed7c06c89715", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-09-09T19:06:41Z", "type": "commit"}, {"oid": "2a5eae7ffd0dd81fded1ffed05b4cffc3a983217", "url": "https://github.com/IQSS/dataverse/commit/2a5eae7ffd0dd81fded1ffed05b4cffc3a983217", "message": "#6798 add required message for dv contact email", "committedDate": "2020-09-09T19:40:24Z", "type": "commit"}, {"oid": "b2c1afcda479d817fea8a34743a635cf0b589e3b", "url": "https://github.com/IQSS/dataverse/commit/b2c1afcda479d817fea8a34743a635cf0b589e3b", "message": "#6798 remove duplicate validation messages", "committedDate": "2020-09-09T20:12:02Z", "type": "commit"}, {"oid": "76c731f2ae750f87c4455ea597f26df2b999e407", "url": "https://github.com/IQSS/dataverse/commit/76c731f2ae750f87c4455ea597f26df2b999e407", "message": "#6798 defer empty email test until save doc. return valmessages to original location", "committedDate": "2020-09-10T13:28:32Z", "type": "commit"}, {"oid": "85c36d5b20be62cee86ec8fc07645c128bebc692", "url": "https://github.com/IQSS/dataverse/commit/85c36d5b20be62cee86ec8fc07645c128bebc692", "message": "Merge branch 'develop' into 6798-create-dv-validation", "committedDate": "2020-09-10T17:10:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyMDAwMg==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r486520002", "bodyText": "@sekmiller Looks like the only change here is an extra return. We should resort that change.", "author": "mheppler", "createdAt": "2020-09-10T17:39:49Z", "path": "src/main/java/propertyFiles/Bundle.properties", "diffHunk": "@@ -2116,6 +2116,7 @@ dataverse.search.user=Only authenticated users can save a search.\n dataverse.alias=alias\n dataverse.alias.taken=This Alias is already taken.\n \n+", "originalCommit": "85c36d5b20be62cee86ec8fc07645c128bebc692", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyNzMwNg==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r486527306", "bodyText": "yup.", "author": "sekmiller", "createdAt": "2020-09-10T17:52:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyMDAwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyMDI0MA==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r486520240", "bodyText": "@sekmiller These extra returns at the bottom are not needed either.", "author": "mheppler", "createdAt": "2020-09-10T17:40:15Z", "path": "src/main/java/ValidationMessages.properties", "diffHunk": "@@ -47,3 +48,5 @@ password.current=Please enter your current password.\n password.validate=Password reset page default email message.\n \n guestbook.name=Enter a name for the guestbook\n+", "originalCommit": "85c36d5b20be62cee86ec8fc07645c128bebc692", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyNzE3Mg==", "url": "https://github.com/IQSS/dataverse/pull/7197#discussion_r486527172", "bodyText": "Ok. will do.", "author": "sekmiller", "createdAt": "2020-09-10T17:52:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUyMDI0MA=="}], "type": "inlineReview"}, {"oid": "9db0898165fc182fee62f3b81ba290dda39120d2", "url": "https://github.com/IQSS/dataverse/commit/9db0898165fc182fee62f3b81ba290dda39120d2", "message": "#6798 remove blank lines", "committedDate": "2020-09-10T17:52:47Z", "type": "commit"}]}