{"pr_number": 7378, "pr_title": "Handle non-ascii chars in search", "pr_createdAt": "2020-11-02T20:15:45Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7378", "timeline": [{"oid": "36ede87d12859a310d98e0afdfc57f61588997f7", "url": "https://github.com/IQSS/dataverse/commit/36ede87d12859a310d98e0afdfc57f61588997f7", "message": "Add ASCIIFoldingFilterFactory to handle non-ascii chars in search", "committedDate": "2020-11-02T19:56:54Z", "type": "commit"}, {"oid": "e2be556b43e19ff379bc3686c9c20d704970fb8e", "url": "https://github.com/IQSS/dataverse/commit/e2be556b43e19ff379bc3686c9c20d704970fb8e", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820", "committedDate": "2020-11-03T20:28:59Z", "type": "commit"}, {"oid": "fde40b59ec3327c0caba8b5310ed5858f2a199f2", "url": "https://github.com/IQSS/dataverse/commit/fde40b59ec3327c0caba8b5310ed5858f2a199f2", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820", "committedDate": "2021-01-08T20:05:14Z", "type": "commit"}, {"oid": "5efe3f0b14d61453ce649d5a1958a000aee162b7", "url": "https://github.com/IQSS/dataverse/commit/5efe3f0b14d61453ce649d5a1958a000aee162b7", "message": "placeholder release notes", "committedDate": "2021-01-08T20:49:51Z", "type": "commit"}, {"oid": "fdc529ebfdbaf4a47adf38f5d840da15dad45390", "url": "https://github.com/IQSS/dataverse/commit/fdc529ebfdbaf4a47adf38f5d840da15dad45390", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820", "committedDate": "2021-01-29T18:53:41Z", "type": "commit"}, {"oid": "308294616b48791fd91a300bfff12344b544415f", "url": "https://github.com/IQSS/dataverse/commit/308294616b48791fd91a300bfff12344b544415f", "message": "Merge remote-tracking branch 'IQSS/develop' into IQSS/820", "committedDate": "2021-02-23T18:05:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3NzUwNg==", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r588477506", "bodyText": "When PR #7645 gets merged (in QA), this PR will need to be updated, as this edit is made to the soon-to-be older 7.7.2 schema.", "author": "mheppler", "createdAt": "2021-03-05T17:03:58Z", "path": "conf/solr/7.7.2/schema.xml", "diffHunk": "@@ -38,7 +38,7 @@\n     catchall \"text\" field, and use that for searching.\n -->\n \n-<schema name=\"default-config\" version=\"1.6\">\n+<schema name=\"default-config\" version=\"1.7\">", "originalCommit": "308294616b48791fd91a300bfff12344b544415f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3ODI1MA==", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r588478250", "bodyText": "When PR #7645 gets merged (in QA), this PR will need to be updated, as these release notes should be merged with the release notes included in that Solr update PR.", "author": "mheppler", "createdAt": "2021-03-05T17:04:48Z", "path": "doc/release-notes/820-non-ascii-chars-in-search.md", "diffHunk": "@@ -0,0 +1,8 @@\n+### Search with non-ascii characters\n+\n+Many languages include characters that have close analogs in ascii, e.g. (\u00e1, \u00e0, \u00e2, \u00e7, \u00e9, \u00e8, \u00ea, \u00eb, \u00ed, \u00f3, \u00f6, \u00fa, \u00f9, \u00fb, \u00fc\u2026). This release changes the default Solr configuration to allow search to match words based on these associations, e.g. a search for Merc\u00e8 would match the word Merce in a Dataset, and vice versa. This should generally be helpful, but can result in false positives.,e.g. \"canon\" will be found searching for \"ca\u00f1on\". \n+\n+## Upgrade Instructions\n+\n+1. You will need to replace or modify your `schema.xml` and restart solr. Re-indexing is required to get full-functionality from this change - the standard instructions for an incremental reindex could be added here.", "originalCommit": "308294616b48791fd91a300bfff12344b544415f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4OTQ0NDg1Mw==", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r589444853", "bodyText": "Here are the release notes from the Solr upgrade PR.\n\nSolr Update\nWith this release we upgrade to the latest available stable release in the Solr 8.x branch. We recommend a fresh installation of Solr 8.8.1 (the index will be empty)\nfollowed by an \"index all\".\nBefore you start the \"index all\", Dataverse will appear to be empty because\nthe search results come from Solr. As indexing progresses, partial results will\nappear until indexing is complete.\nSee http://guides.dataverse.org/installation/prerequisites.html#installing-solr\n[for the additional upgrade steps section]\nRun the script updateSchemaMDB.sh to generate updated solr schema files and preserve any other custom fields in your Solr configuration.\nFor example: (modify the path names as needed)\ncd /usr/local/solr-8.8.1/server/solr/collection1/conf\nwget https://github.com/IQSS/dataverse/releases/download/v5.4/updateSchemaMDB.sh\nchmod +x updateSchemaMDB.sh\n./updateSchemaMDB.sh -t .\nSee http://guides.dataverse.org/en/5.4/admin/metadatacustomization.html?highlight=updateschemamdb for more information.", "author": "mheppler", "createdAt": "2021-03-08T14:06:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3ODI1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDcwMDk0Ng==", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r590700946", "bodyText": "@djbrooke in tech hours, @scolapasta suggested moving this PR forward with the note to REMOVE this \"Upload Instructions\" section, as a duplicate of the steps already included in the Solr upgrade PR #7645.", "author": "mheppler", "createdAt": "2021-03-09T20:36:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3ODI1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5MDcwNTkxNw==", "url": "https://github.com/IQSS/dataverse/pull/7378#discussion_r590705917", "bodyText": "@mheppler great, thanks, I'll leave a note in this PR at the top of the notes so I don't forget, in case something slips and we don't get this into the release we expect to.", "author": "djbrooke", "createdAt": "2021-03-09T20:44:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODQ3ODI1MA=="}], "type": "inlineReview"}, {"oid": "1267b91bc93fdd2bcc3c8e382a5ae434ec4eb1ce", "url": "https://github.com/IQSS/dataverse/commit/1267b91bc93fdd2bcc3c8e382a5ae434ec4eb1ce", "message": "Merge remote-tracking branch 'origin/develop' into IQSS/820", "committedDate": "2021-03-05T20:47:18Z", "type": "commit"}, {"oid": "9779b8bce4224e1ce6e0ef4d3b5b229db4945103", "url": "https://github.com/IQSS/dataverse/commit/9779b8bce4224e1ce6e0ef4d3b5b229db4945103", "message": "Merge remote-tracking branch 'origin/develop' into IQSS/820", "committedDate": "2021-03-05T21:10:36Z", "type": "commit"}, {"oid": "768ed3c7b5d879f6dc8792bf4d56b887d6a0a1eb", "url": "https://github.com/IQSS/dataverse/commit/768ed3c7b5d879f6dc8792bf4d56b887d6a0a1eb", "message": "flagging release note", "committedDate": "2021-03-09T21:06:29Z", "type": "commit"}]}