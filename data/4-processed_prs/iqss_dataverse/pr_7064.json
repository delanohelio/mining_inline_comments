{"pr_number": 7064, "pr_title": "7054 payara bom", "pr_createdAt": "2020-07-08T15:01:30Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7064", "timeline": [{"oid": "3348723b579414834500f1da86662d8f27f653f1", "url": "https://github.com/IQSS/dataverse/commit/3348723b579414834500f1da86662d8f27f653f1", "message": "Make pom.xml use Payara BOM to keep dependencies inline with provided app server versions (no need to package those). #7054", "committedDate": "2020-07-08T09:56:40Z", "type": "commit"}, {"oid": "b584a06444774f5dd5578948ca07f9e4488f529b", "url": "https://github.com/IQSS/dataverse/commit/b584a06444774f5dd5578948ca07f9e4488f529b", "message": "Move Payara patches repo to top of the repo list, being used first. #7054", "committedDate": "2020-07-08T12:58:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0NTU0NA==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452345544", "bodyText": "Does this mean that this new \"payara.version\" property needs to be bumped every time we want to move to a new version of Payara?", "author": "pdurbin", "createdAt": "2020-07-09T16:33:35Z", "path": "pom.xml", "diffHunk": "@@ -26,11 +26,8 @@\n         <skipUnitTests>false</skipUnitTests>\n     \n         <jakartaee-api.version>8.0.0</jakartaee-api.version>\n-        <!-- Make this correspond to the version used in Payara: 5.201 uses (patched) 2.3.14 -->\n-        <mojarra.version>2.3.14</mojarra.version>\n+        <payara.version>5.2020.2</payara.version>", "originalCommit": "b584a06444774f5dd5578948ca07f9e4488f529b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5MDg3MA==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452390870", "bodyText": "It should be moved. This is not a must, but a strong should.\nThis hasn't happened in the past with GF 4.1, as that appserver hadn't any updates. It won't be much of a hassle to do this and it makes testing with newer appserver versions easier.", "author": "poikilotherm", "createdAt": "2020-07-09T17:52:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0NTU0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5MzI3OA==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452393278", "bodyText": "By the way, as the article outlined, too: you would do this with the Wildfly/Jetty/Liberty BOM when using those appservers.\nYou might think about creating different maven profiles when multi appserver compatibility becomes a feature.", "author": "poikilotherm", "createdAt": "2020-07-09T17:57:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0NTU0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQwMTM5Mg==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452401392", "bodyText": "Ok. Maybe after we've done a few of these Payara upgrades (pull request #7036 was the last one), we'll get into a nice pattern of which files need to be touched (similar to how we know which files to touch when making a release, and even document them). So heads up here to @donsizemore (who made the last bump) that a new line is being added.", "author": "pdurbin", "createdAt": "2020-07-09T18:12:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM0NTU0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NTY5MA==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452355690", "bodyText": "Does this further tie us to Payara? Will it be harder to move to Liberty or Wildfly?", "author": "pdurbin", "createdAt": "2020-07-09T16:50:24Z", "path": "pom.xml", "diffHunk": "@@ -90,24 +87,35 @@\n             <name>Local repository for hosting jars not available from network repositories.</name>\n             <url>file://${project.basedir}/local_lib</url>\n         </repository>\n+        <repository>\n+            <id>payara-patched-externals</id>", "originalCommit": "3348723b579414834500f1da86662d8f27f653f1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5MTYyNQ==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452391625", "bodyText": "Yes. But we are pretty bound to Pasta anyway, as we rely on their patched lib releases. As long as those don't hit upstream, it would lead to troubles when deploying to Wildfly/Liberty/... anyway.", "author": "poikilotherm", "createdAt": "2020-07-09T17:54:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NTY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NzYzNQ==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452357635", "bodyText": "Does this further tie us to Payara? Would it be harder to switch to Liberty or Wildfly, for example?", "author": "pdurbin", "createdAt": "2020-07-09T16:53:49Z", "path": "pom.xml", "diffHunk": "@@ -63,6 +60,17 @@\n     <!--Maven checks for dependendies from these repos in the order shown in the pom.xml\n         This isn't well documented and seems to change between maven versions -MAD 4.9.4 -->\n     <repositories>\n+        <repository>\n+            <id>payara-patched-externals</id>", "originalCommit": "b584a06444774f5dd5578948ca07f9e4488f529b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5Njg2OQ==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452396869", "bodyText": "Whoops. I asked this twice. Here's the answer from @poikilotherm from #7064 (comment)\n\"Yes. But we are pretty bound to Payara anyway, as we rely on their patched lib releases. As long as those don't hit upstream, it would lead to troubles when deploying to Wildfly/Liberty/... anyway.\"", "author": "pdurbin", "createdAt": "2020-07-09T18:03:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1NzYzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1ODE1Ng==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452358156", "bodyText": "Does the version of Mojarra no longer matter?", "author": "pdurbin", "createdAt": "2020-07-09T16:54:43Z", "path": "pom.xml", "diffHunk": "@@ -26,11 +26,8 @@\n         <skipUnitTests>false</skipUnitTests>\n     \n         <jakartaee-api.version>8.0.0</jakartaee-api.version>\n-        <!-- Make this correspond to the version used in Payara: 5.201 uses (patched) 2.3.14 -->\n-        <mojarra.version>2.3.14</mojarra.version>", "originalCommit": "b584a06444774f5dd5578948ca07f9e4488f529b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM5MjY0NQ==", "url": "https://github.com/IQSS/dataverse/pull/7064#discussion_r452392645", "bodyText": "It does, but it is already included in the BOM. It should be kept the same as the appserver anyway, so that updating is now obsolete.\nInstead, we change the appserver version in payara.version.", "author": "poikilotherm", "createdAt": "2020-07-09T17:56:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM1ODE1Ng=="}], "type": "inlineReview"}]}