{"pr_number": 7419, "pr_title": "7417 - Update to Payara 5.2020.6", "pr_createdAt": "2020-11-17T17:36:50Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7419", "timeline": [{"oid": "15100f4cc4a3dcb9785e650ddc6e417217838512", "url": "https://github.com/IQSS/dataverse/commit/15100f4cc4a3dcb9785e650ddc6e417217838512", "message": "Update to Payara 5.2020.6. #7417", "committedDate": "2020-11-17T17:34:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r525391731", "bodyText": "Can you please update this in the dev guide too? Here:\ndoc/sphinx-guides/source/developers/dev-environment.rst\n88:sudo curl -O -L https://github.com/payara/Payara/releases/download/payara-server-5.2020.2/payara-5.2020.2.zip\n90:sudo unzip payara-5.2020.2.zip", "author": "pdurbin", "createdAt": "2020-11-17T18:29:53Z", "path": "doc/sphinx-guides/source/installation/prerequisites.rst", "diffHunk": "@@ -58,8 +58,8 @@ Installing Payara\n \n - Download and install Payara (installed in ``/usr/local/payara5`` in the example commands below)::\n \n-\t# wget https://github.com/payara/Payara/releases/download/payara-server-5.2020.2/payara-5.2020.2.zip\n-\t# unzip payara-5.2020.2.zip\n+\t# wget https://s3-eu-west-1.amazonaws.com/payara.fish/Payara+Downloads/5.2020.6/payara-5.2020.6.zip\n+\t# unzip payara-5.2020.6.zip", "originalCommit": "15100f4cc4a3dcb9785e650ddc6e417217838512", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MjMxNw==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r525392317", "bodyText": "Can you please update this in Vagrant too? Here:\nscripts/vagrant/setup.sh\n46:PAYARA_ZIP=\"$DOWNLOAD_DIR/payara-5.2020.2.zip\"\nAnd here:\ndownloads/download.sh\n2:curl -L -O https://github.com/payara/Payara/releases/download/payara-server-5.2020.2/payara-5.2020.2.zip", "author": "pdurbin", "createdAt": "2020-11-17T18:30:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MzA1MQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r525393051", "bodyText": "Can you please update this for docker-aio too? Here:\nconf/docker-aio/c8.dockerfile\n21:RUN cd /opt ; unzip /tmp/dv/deps/payara-5.2020.2.zip ; ln -s /opt/payara5 /opt/glassfish4\nconf/docker-aio/testdata/scripts/vagrant/setup.sh\n46:PAYARA_ZIP=\"$DOWNLOAD_DIR/payara-5.2020.2.zip\"\nconf/docker-aio/0prep_deps.sh\n7:if [ ! -e dv/deps/payara-5.2020.2.zip ]; then\n10:\twget https://github.com/payara/Payara/releases/download/payara-server-5.2020.2/payara-5.2020.2.zip  -O dv/deps/payara-5.2020.2.zip", "author": "pdurbin", "createdAt": "2020-11-17T18:31:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQxMDI1OQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r525410259", "bodyText": "All done in 7bdbb7c . Thx for pointing out!", "author": "poikilotherm", "createdAt": "2020-11-17T18:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTQzMTk3Mg==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r525431972", "bodyText": "@poikilotherm sure. It looks like you missed this one:\nconf/docker-aio/testdata/scripts/vagrant/setup.sh\n46:PAYARA_ZIP=\"$DOWNLOAD_DIR/payara-5.2020.2.zip\"\nI'm not actually sure if it's used or not. @pameyer might know.", "author": "pdurbin", "createdAt": "2020-11-17T19:31:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAxMjg3MA==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r526012870", "bodyText": "@pdurbin I'm sorry, but this file is not part of the git repo. Maybe you are symlinking somewhere during docker-aio setup?", "author": "poikilotherm", "createdAt": "2020-11-18T11:26:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjI0Nzk2OQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r526247969", "bodyText": "@poikilotherm ah, you're right, git ls-files conf/docker-aio/testdata/scripts/vagrant/setup.sh returns empty so there's nothing to fix or change. Thanks.", "author": "pdurbin", "createdAt": "2020-11-18T16:55:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQ2MzgzMQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r526463831", "bodyText": "@pdurbin already figured it out - conf/docker-aio/testdata is used as a temporary cache during image build.", "author": "pameyer", "createdAt": "2020-11-18T22:24:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM5MTczMQ=="}], "type": "inlineReview"}, {"oid": "7bdbb7c30fff98e709bf81e2f22fb70ea3ef681f", "url": "https://github.com/IQSS/dataverse/commit/7bdbb7c30fff98e709bf81e2f22fb70ea3ef681f", "message": "Change more Payara 5.2020.2 to 5.2020.6. #7417", "committedDate": "2020-11-17T18:58:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjI1NDIwMQ==", "url": "https://github.com/IQSS/dataverse/pull/7419#discussion_r526254201", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [Payara documentation](https://docs.payara.fish/community/docs/5.2020.5/documentation/user-guides/upgrade-payara.html)\n          \n          \n            \n            [Payara documentation](https://docs.payara.fish/community/docs/5.2020.6/documentation/user-guides/upgrade-payara.html)\n          \n      \n    \n    \n  \n\nThis should be for .6 instead of .5, right? Either way, the Payara doc is somewhat involved. Should we write up our own steps for our users (and developers) and link to the Payara doc as an additional resource? I'm thinking of the \"Upgrade from Glassfish 4.1 to Payara 5\" steps described in the Dataverse 5.0 release notes: https://github.com/IQSS/dataverse/releases/tag/v5.0", "author": "pdurbin", "createdAt": "2020-11-18T17:04:02Z", "path": "doc/release-notes/7417-payara-5.2020.6.md", "diffHunk": "@@ -0,0 +1,12 @@\n+## Update to Payara Platform 5.2020.6\n+\n+In contrast to good old Glassfish 4, the Payara application server\n+is a maintained product, receiving both feature and - more important -\n+security and dependent technology updates. You should update the\n+application server platform on a regular basis, as it is a key component\n+of a running Dataverse deployment.\n+\n+<!-- REQUIREMENT MARKER FOR LATER USE WITH #6819 AS HTML COMMENT. MAY BE OMMITED. -->\n+\n+Instructions how to update can be found in the\n+[Payara documentation](https://docs.payara.fish/community/docs/5.2020.5/documentation/user-guides/upgrade-payara.html)", "originalCommit": "7bdbb7c30fff98e709bf81e2f22fb70ea3ef681f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "40b0b4c7925d7c5bd810d44ba0e786ab8a389b37", "url": "https://github.com/IQSS/dataverse/commit/40b0b4c7925d7c5bd810d44ba0e786ab8a389b37", "message": "Update doc/release-notes/7417-payara-5.2020.6.md\n\nCo-authored-by: Philip Durbin <philip_durbin@harvard.edu>", "committedDate": "2020-11-18T17:08:25Z", "type": "commit"}]}