{"pr_number": 7481, "pr_title": "Release Notes Update: Timer", "pr_createdAt": "2020-12-16T03:40:10Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7481", "timeline": [{"oid": "d22e1d822499f995996dffbda346e9c0b10a93a2", "url": "https://github.com/IQSS/dataverse/commit/d22e1d822499f995996dffbda346e9c0b10a93a2", "message": "adding timer update", "committedDate": "2020-12-16T03:39:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzkzNDI4OA==", "url": "https://github.com/IQSS/dataverse/pull/7481#discussion_r543934288", "bodyText": "this step is only necessary for those who are coming from what was originally a glassfish4 domain.xml. (and if we also do add this to the 5.0 release notes, per the multiple server issue from the mailing list, we may want text like \"if you haven't already done this during the 5.0 release, it is now necessary due to the changes to how ejb timers are now handled\". we can discuss this in person, if you'd like to understand this better - the whys and whens.", "author": "scolapasta", "createdAt": "2020-12-16T04:32:57Z", "path": "doc/release-notes/5.3-release-notes.md", "diffHunk": "@@ -132,27 +132,37 @@ Please configure your connection details, replacing all the `${DB_...}`.\n - `<payara install path>/bin/asadmin create-password-alias --passwordfile /tmp/password.txt dataverse.db.password`\n - `rm /tmp/password.txt`\n \n-4\\. Reset the EJB timer database back to default:\n+4\\. Replace relevant portions of domain.xml", "originalCommit": "d22e1d822499f995996dffbda346e9c0b10a93a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMwNjkyNw==", "url": "https://github.com/IQSS/dataverse/pull/7481#discussion_r544306927", "bodyText": "@scolapasta sure, I'll take you up on that. It'll be good to talk about this.", "author": "djbrooke", "createdAt": "2020-12-16T13:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzkzNDI4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1NTY0OA==", "url": "https://github.com/IQSS/dataverse/pull/7481#discussion_r544155648", "bodyText": "suggestion\nIn the dataverse-community thread @jmjamison mentioned deleting the directory targeted by the property.\nThis might be necessary due to the change from Derby to H2. Not sure if the directory is re-created by Payara though. Also, as @scolapasta outlined above, this might only be necessary when coming from a GF4 installation.", "author": "poikilotherm", "createdAt": "2020-12-16T09:46:38Z", "path": "doc/release-notes/5.3-release-notes.md", "diffHunk": "@@ -132,27 +132,37 @@ Please configure your connection details, replacing all the `${DB_...}`.\n - `<payara install path>/bin/asadmin create-password-alias --passwordfile /tmp/password.txt dataverse.db.password`\n - `rm /tmp/password.txt`\n \n-4\\. Reset the EJB timer database back to default:\n+4\\. Replace relevant portions of domain.xml\n+\n+- In domain.xml, replace \n+ \n+- `<jdbc-connection-pool datasource-classname=\"org.apache.derby.jdbc.EmbeddedXADataSource\" name=\"__TimerPool\" res-type=\"javax.sql.XADataSource\"> <property name=\"databaseName\" value=\"${com.sun.aas.instanceRoot}/lib/databases/ejbtimer\"></property><property name=\"connectionAttributes\" value=\";create=true\"></property></jdbc-connection-pool>`\n+\n+with\n+\n+- `<jdbc-connection-pool datasource-classname=\"org.h2.jdbcx.JdbcDataSource\" name=\"__TimerPool\" res-type=\"javax.sql.XADataSource\"> <property name=\"URL\" value=\"jdbc:h2:${com.sun.aas.instanceRoot}/lib/databases/ejbtimer;AUTO_SERVER=TRUE\"></property> </jdbc-connection-pool>`", "originalCommit": "d22e1d822499f995996dffbda346e9c0b10a93a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDMwNzMzMQ==", "url": "https://github.com/IQSS/dataverse/pull/7481#discussion_r544307331", "bodyText": "Thanks @poikilotherm - I'll discuss with @scolapasta and get the right content in here.", "author": "djbrooke", "createdAt": "2020-12-16T13:42:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1NTY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTQ2NDk1Mg==", "url": "https://github.com/IQSS/dataverse/pull/7481#discussion_r545464952", "bodyText": "LGTM", "author": "poikilotherm", "createdAt": "2020-12-17T23:10:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDE1NTY0OA=="}], "type": "inlineReview"}, {"oid": "b27274fb78fd16165b51ef9f9db623327b94c1d0", "url": "https://github.com/IQSS/dataverse/commit/b27274fb78fd16165b51ef9f9db623327b94c1d0", "message": "Update 5.0-release-notes.md", "committedDate": "2020-12-16T21:28:49Z", "type": "commit"}, {"oid": "0d53872c634bd14c17e54d06b648a07c00ab130c", "url": "https://github.com/IQSS/dataverse/commit/0d53872c634bd14c17e54d06b648a07c00ab130c", "message": "clarifying timer documentation", "committedDate": "2020-12-16T21:39:49Z", "type": "commit"}, {"oid": "5df5b747cf71773258b31d22fd09b9bfc08a4d5e", "url": "https://github.com/IQSS/dataverse/commit/5df5b747cf71773258b31d22fd09b9bfc08a4d5e", "message": "Update 5.0-release-notes.md", "committedDate": "2020-12-17T20:40:05Z", "type": "commit"}, {"oid": "837df641642113abba534c29d757191e2e25acc9", "url": "https://github.com/IQSS/dataverse/commit/837df641642113abba534c29d757191e2e25acc9", "message": "Update 5.0-release-notes.md", "committedDate": "2020-12-17T20:41:43Z", "type": "commit"}, {"oid": "4e89a3dc9ae9a9224afb25c8c3a4f2122cc050ea", "url": "https://github.com/IQSS/dataverse/commit/4e89a3dc9ae9a9224afb25c8c3a4f2122cc050ea", "message": "Remove ejbtimer database directory", "committedDate": "2020-12-17T20:48:25Z", "type": "commit"}, {"oid": "c42bc701bec1ba90a2c6904c166417365464317b", "url": "https://github.com/IQSS/dataverse/commit/c42bc701bec1ba90a2c6904c166417365464317b", "message": "fixed timer pool connection pool step", "committedDate": "2020-12-18T18:42:58Z", "type": "commit"}]}