{"pr_number": 7416, "pr_title": "5345 Make EJB timers nonpersistent", "pr_createdAt": "2020-11-17T16:38:49Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7416", "timeline": [{"oid": "a75aadf5f258fe6abc6e90bc006c6f249b0bb3b7", "url": "https://github.com/IQSS/dataverse/commit/a75aadf5f258fe6abc6e90bc006c6f249b0bb3b7", "message": "Remove unused resources from DataverseTimerServiceBean. #5345", "committedDate": "2020-11-17T16:24:47Z", "type": "commit"}, {"oid": "ebcd1e0c3577c9c234e4fac4a6b1c1ab228b9e27", "url": "https://github.com/IQSS/dataverse/commit/ebcd1e0c3577c9c234e4fac4a6b1c1ab228b9e27", "message": "Make timers non-persistent. #5345", "committedDate": "2020-11-17T16:31:44Z", "type": "commit"}, {"oid": "56a6bd4125cca0fa224d6b5329031f772be24f15", "url": "https://github.com/IQSS/dataverse/commit/56a6bd4125cca0fa224d6b5329031f772be24f15", "message": "Add doc changes due to timers now non-persistent. #5345", "committedDate": "2020-11-17T17:05:48Z", "type": "commit"}, {"oid": "80393b70568828c456b870e1036a5d40730df51f", "url": "https://github.com/IQSS/dataverse/commit/80393b70568828c456b870e1036a5d40730df51f", "message": "Release note about EJB timer change. #5345", "committedDate": "2020-11-18T13:03:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxMzk0MQ==", "url": "https://github.com/IQSS/dataverse/pull/7416#discussion_r527913941", "bodyText": "very minor comment, but I think this would read better the way it was before (outside of the removing the aside): \" The configuration values might need to be changed to reflect your environment (the Payara directory).\"", "author": "scolapasta", "createdAt": "2020-11-20T19:05:41Z", "path": "doc/sphinx-guides/source/admin/troubleshooting.rst", "diffHunk": "@@ -98,14 +98,12 @@ We don't know what's causing this issue, but here's a known workaround:\n \n - Stop Payara; \n \n-- Remove the ``generated`` and ``osgi-cache`` directories; \n-\n-- Delete all the rows from the ``EJB__TIMER__TBL`` table in the database;\n+- Remove the ``generated`` and ``osgi-cache`` directories;\n \n - Start Payara\n \n The shell script below performs the steps above. \n-Note that it may or may not work on your system, so it is provided as an example only, downloadable :download:`here </_static/util/clear_timer.sh>`. Aside from the configuration values that need to be changed to reflect your environment (the Payara directory, name of the database, etc.) the script relies on the database being configured in a certain way for access. (See the comments in the script for more information)\n+Note that it may or may not work on your system, so it is provided as an example only, downloadable :download:`here </_static/util/clear_timer.sh>`. The configuration values to reflect your environment (the Payara directory) might need to be changed. (See the comments in the script for more information)", "originalCommit": "80393b70568828c456b870e1036a5d40730df51f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxODQ1MA==", "url": "https://github.com/IQSS/dataverse/pull/7416#discussion_r527918450", "bodyText": "I went ahead and made the change myself.", "author": "scolapasta", "createdAt": "2020-11-20T19:14:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxMzk0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxNDQ4NA==", "url": "https://github.com/IQSS/dataverse/pull/7416#discussion_r527914484", "bodyText": "typo: \"it's\" should be \"its\"", "author": "scolapasta", "createdAt": "2020-11-20T19:06:50Z", "path": "doc/sphinx-guides/source/admin/troubleshooting.rst", "diffHunk": "@@ -127,9 +125,9 @@ followed by an Exception stack trace with these lines in it:\n :fixedwidthplain:`Exception Description: Could not deserialize object from byte array` ...\n \n \n-... it most likely means that it is the JDBC driver incompatibility that's preventing the timer from working correctly. \n-Make sure you install the correct version of the driver. For example, if you are running the version 9.3 of PostgreSQL, make sure you have the driver postgresql-9.3-1104.jdbc4.jar in your :fixedwidthplain:`<PAYARA FOLDER>/glassfish/lib` directory. Go `here <https://jdbc.postgresql.org/download.html>`_\n-to download the correct version of the driver. If you have an older driver in glassfish/lib, make sure to remove it, replace it with the new version and restart Payara. (You may need to remove the entire contents of :fixedwidthplain:`<PAYARA FOLDER>/glassfish/domains/domain1/generated` before you start Payara). \n+... you should reach out by opening an issue. In the good old days of running Dataverse 4 running on Glassfish 4, this\n+was a hint for an unsupported JDBC driver. In Dataverse 5 this would be a new regression and it's cause would need to be", "originalCommit": "80393b70568828c456b870e1036a5d40730df51f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxODUxMg==", "url": "https://github.com/IQSS/dataverse/pull/7416#discussion_r527918512", "bodyText": "I went ahead and made the change myself.", "author": "scolapasta", "createdAt": "2020-11-20T19:14:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzkxNDQ4NA=="}], "type": "inlineReview"}, {"oid": "67172d7c02de585ac8bfb1bf923bb520ded61270", "url": "https://github.com/IQSS/dataverse/commit/67172d7c02de585ac8bfb1bf923bb520ded61270", "message": "small doc changes", "committedDate": "2020-11-20T19:13:42Z", "type": "commit"}]}