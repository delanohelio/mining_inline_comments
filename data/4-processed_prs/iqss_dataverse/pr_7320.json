{"pr_number": 7320, "pr_title": "persist debug=true in session, toggle with query parameter #7273", "pr_createdAt": "2020-10-09T14:57:26Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7320", "timeline": [{"oid": "45172469e2f7042bc2183957b876452eacee0c04", "url": "https://github.com/IQSS/dataverse/commit/45172469e2f7042bc2183957b876452eacee0c04", "message": "persist debug=true in session, toggle with query parameter #7273", "committedDate": "2020-10-09T14:40:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc2MDU3NA==", "url": "https://github.com/IQSS/dataverse/pull/7320#discussion_r504760574", "bodyText": "why not still isDebug?", "author": "scolapasta", "createdAt": "2020-10-14T15:14:10Z", "path": "src/main/java/edu/harvard/iq/dataverse/search/SearchIncludeFragment.java", "diffHunk": "@@ -1017,13 +1017,15 @@ public void setRootDv(boolean rootDv) {\n         this.rootDv = rootDv;\n     }\n \n-    public boolean isDebug() {\n-        return (debug && session.getUser().isSuperuser())\n+    public Boolean getDebug() {", "originalCommit": "45172469e2f7042bc2183957b876452eacee0c04", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg1Mzg3Nw==", "url": "https://github.com/IQSS/dataverse/pull/7320#discussion_r504853877", "bodyText": "Because with isDebug I get this error:\n/dataverse.xhtml @47,87 value=\"#{SearchIncludeFragment.debug}\": The class 'edu.harvard.iq.dataverse.search.SearchIncludeFragment' does not have a readable property 'debug'.\njavax.el.PropertyNotFoundException: /dataverse.xhtml @47,87 value=\"#{SearchIncludeFragment.debug}\": The class 'edu.harvard.iq.dataverse.search.SearchIncludeFragment' does not have a readable property 'debug'.", "author": "pdurbin", "createdAt": "2020-10-14T17:34:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc2MDU3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc2MTM5MQ==", "url": "https://github.com/IQSS/dataverse/pull/7320#discussion_r504761391", "bodyText": "Should all this logic go to the session? i.e. to use in other future pages it would be easier to not have to repeat the superuser check or the settings check?", "author": "scolapasta", "createdAt": "2020-10-14T15:15:13Z", "path": "src/main/java/edu/harvard/iq/dataverse/search/SearchIncludeFragment.java", "diffHunk": "@@ -1017,13 +1017,15 @@ public void setRootDv(boolean rootDv) {\n         this.rootDv = rootDv;\n     }\n \n-    public boolean isDebug() {\n-        return (debug && session.getUser().isSuperuser())\n+    public Boolean getDebug() {\n+        return (session.isDebug() && session.getUser().isSuperuser())", "originalCommit": "45172469e2f7042bc2183957b876452eacee0c04", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0NjAxNw==", "url": "https://github.com/IQSS/dataverse/pull/7320#discussion_r504946017", "bodyText": "Not a bad idea. Consolidated in a4582f0 (where I also removed that undocumented :Debug database setting, as we discussed).\nIn ce78897 I made another change we discussed in Slack which is to remove the getters and setters from the search code and to rely on the getters and setters in the session code. In that commit I also attempted to explain why I'm using a Boolean with the viewParam. In short, I'm using null to mean \"don't change the state\".", "author": "pdurbin", "createdAt": "2020-10-14T20:15:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDc2MTM5MQ=="}], "type": "inlineReview"}, {"oid": "a4582f05e18a95f744c0db39b26afed4d1ed45bb", "url": "https://github.com/IQSS/dataverse/commit/a4582f05e18a95f744c0db39b26afed4d1ed45bb", "message": "consolidate logic, remove :Debug database setting #7273", "committedDate": "2020-10-14T17:45:57Z", "type": "commit"}, {"oid": "ce78897f7c630dca5261f5b9bba42a9b3537db0e", "url": "https://github.com/IQSS/dataverse/commit/ce78897f7c630dca5261f5b9bba42a9b3537db0e", "message": "switch to getters and setters in session bean #7273", "committedDate": "2020-10-14T20:09:32Z", "type": "commit"}]}