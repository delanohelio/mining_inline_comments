{"pr_number": 7345, "pr_title": "7307 get user by token", "pr_createdAt": "2020-10-21T20:06:47Z", "pr_url": "https://github.com/IQSS/dataverse/pull/7345", "timeline": [{"oid": "5f7572070622969fb1e2e9ba3786cd9d93535b34", "url": "https://github.com/IQSS/dataverse/commit/5f7572070622969fb1e2e9ba3786cd9d93535b34", "message": "Merge branch 'develop' into 7307-get-user-by-token", "committedDate": "2020-10-21T19:15:58Z", "type": "commit"}, {"oid": "9c52e10456b5e4db82e39bdc0ea54694c49c12fd", "url": "https://github.com/IQSS/dataverse/commit/9c52e10456b5e4db82e39bdc0ea54694c49c12fd", "message": "#7307 add endpoint to get user by token", "committedDate": "2020-10-21T19:26:40Z", "type": "commit"}, {"oid": "722b4619053a43d75d42a358c278fcc3088a947a", "url": "https://github.com/IQSS/dataverse/commit/722b4619053a43d75d42a358c278fcc3088a947a", "message": "Update native-api.rst", "committedDate": "2020-10-21T19:51:44Z", "type": "commit"}, {"oid": "3d955193d5d2b2971d7398ad431ee9a70c35ffa3", "url": "https://github.com/IQSS/dataverse/commit/3d955193d5d2b2971d7398ad431ee9a70c35ffa3", "message": "adding release note", "committedDate": "2020-10-21T20:02:49Z", "type": "commit"}, {"oid": "977188f635095b340663888cfc3ad97502f91f25", "url": "https://github.com/IQSS/dataverse/commit/977188f635095b340663888cfc3ad97502f91f25", "message": "updating header\n\nwill clean this up in eventual release notes, just wanted to make sure I have something to pull from. :)", "committedDate": "2020-10-21T20:33:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511118735", "bodyText": "Unless I'm missing something, he admin api is blocked off (rightly so), so external tools would not be able to call this. Do we have other user APIs, if so this should go there. (if not, we should create something like \"/api/users/\"*)\n\nI've never been a fan of the plural, but we should be consistent with \"datasets\", \"dataverses\", etc.\n\nAlso, we should be getting the token from the header, like we do from other APIs.", "author": "scolapasta", "createdAt": "2020-10-23T19:44:40Z", "path": "doc/sphinx-guides/source/api/native-api.rst", "diffHunk": "@@ -2875,8 +2875,15 @@ Sample output using \"dataverseAdmin\" as the ``identifier``::\n       \"superuser\": true,\n       \"affiliation\": \"Dataverse.org\"\n     }\n+    \n+Alternatively you may pass a user's api ``token`` to retrieve the same output::\n+   \n+    GET http://$SERVER/api/admin/authenticatedUsers/token/$token", "originalCommit": "977188f635095b340663888cfc3ad97502f91f25", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTEyNzQzMw==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511127433", "bodyText": "My bad, I assumed that since it was getting the same info it should have the same permissions required. I will change/fix.", "author": "sekmiller", "createdAt": "2020-10-23T19:57:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE0NjA4OA==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511146088", "bodyText": "I think as it is, the only token you can get info about is the one you already have, and it really functions like a /api/users/me call. Does anyone need to use one apitoken to check other ones? If not, and if this call should allow a header, then perhaps it shouldn't also have a token path parameter (just the header or &key= query param) to avoid scanners.", "author": "qqmyers", "createdAt": "2020-10-23T20:42:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTE2MTMzNA==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r511161334", "bodyText": "Yes, I left that part out, but by getting the token from the header, it doesn't need to have a token path parameter.", "author": "scolapasta", "createdAt": "2020-10-23T21:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjA1ODIxNw==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r512058217", "bodyText": "For documentation purposes, we already have a \"Get All Notifications by User\" endpoint and it probably makes sense to put the new docs about getting your user info near these older docs, or vice versa: https://guides.dataverse.org/en/5.1.1/api/native-api.html#get-all-notifications-by-user", "author": "pdurbin", "createdAt": "2020-10-26T15:38:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjY4ODU4MQ==", "url": "https://github.com/IQSS/dataverse/pull/7345#discussion_r512688581", "bodyText": "As discussed, I moved the endpoint to the api/users path. I also moved the doc as suggested by Phil. that whole native api doc needs some reorganization work especially with respect to user related end points.", "author": "sekmiller", "createdAt": "2020-10-27T13:26:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTExODczNQ=="}], "type": "inlineReview"}, {"oid": "d9854e4314c80595cd3d4d23e89ec9985374f626", "url": "https://github.com/IQSS/dataverse/commit/d9854e4314c80595cd3d4d23e89ec9985374f626", "message": "Merge branch 'develop' into 7307-get-user-by-token", "committedDate": "2020-10-23T20:00:09Z", "type": "commit"}, {"oid": "f428250e7ce79bc8418fa9b6201bf3738bdfa362", "url": "https://github.com/IQSS/dataverse/commit/f428250e7ce79bc8418fa9b6201bf3738bdfa362", "message": "#7307 move endpoint to users", "committedDate": "2020-10-26T19:54:43Z", "type": "commit"}, {"oid": "060d35ed410e9d4744bc8387736dec2ac594f98b", "url": "https://github.com/IQSS/dataverse/commit/060d35ed410e9d4744bc8387736dec2ac594f98b", "message": "Merge branch 'develop' into 7307-get-user-by-token", "committedDate": "2020-10-26T19:55:05Z", "type": "commit"}, {"oid": "d530a628421728649931c2c1b6fbeae038576993", "url": "https://github.com/IQSS/dataverse/commit/d530a628421728649931c2c1b6fbeae038576993", "message": "Update native-api.rst", "committedDate": "2020-10-26T20:24:14Z", "type": "commit"}, {"oid": "4ea431035070426ea1a9c9200fe71315205d5adc", "url": "https://github.com/IQSS/dataverse/commit/4ea431035070426ea1a9c9200fe71315205d5adc", "message": "Update native-api.rst", "committedDate": "2020-10-26T21:22:24Z", "type": "commit"}, {"oid": "c500b0575c8a81166a75a2a5dc6bd5866dd8a6b0", "url": "https://github.com/IQSS/dataverse/commit/c500b0575c8a81166a75a2a5dc6bd5866dd8a6b0", "message": "#7307 remove debug code", "committedDate": "2020-10-27T13:18:03Z", "type": "commit"}, {"oid": "bb9eefe6deea90bd8ec949a82901cb6e491b9f48", "url": "https://github.com/IQSS/dataverse/commit/bb9eefe6deea90bd8ec949a82901cb6e491b9f48", "message": "Merge branch 'develop' into 7307-get-user-by-token", "committedDate": "2020-11-03T20:09:38Z", "type": "commit"}]}