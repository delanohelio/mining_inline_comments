{"pr_number": 10808, "pr_title": "Reflect 4.3.2 release", "pr_createdAt": "2020-11-25T09:09:06Z", "pr_url": "https://github.com/crate/crate/pull/10808", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMTc4MQ==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530231781", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n          \n          \n            \n            - Fixed a regression introduced in CrateDB ``4.1`` resulting in duplicated recovery", "author": "amotl", "createdAt": "2020-11-25T09:38:38Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMjAzNA==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530232034", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              This causes log entries of `Transport handler not found ...`.\n          \n          \n            \n              This causes log entries of ``Transport handler not found ...``.", "author": "amotl", "createdAt": "2020-11-25T09:38:59Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of `Transport handler not found ...`.", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMjMwOA==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530232308", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              this information and without it the users received an error like ``The CLR\n          \n          \n            \n              this information and without it, the users received an error like ``The CLR", "author": "amotl", "createdAt": "2020-11-25T09:39:25Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of `Transport handler not found ...`.\n+\n+- Fixed an issue that resulted in records in ``pg_catalog.pg_proc`` which\n+  wouldn't be joined with ``pg_catalog.pg_type``. Clients like ``npgsql`` use\n+  this information and without it the users received an error like ``The CLR", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMzAyOQ==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530233029", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` if\n          \n          \n            \n              array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` when", "author": "amotl", "createdAt": "2020-11-25T09:40:29Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of `Transport handler not found ...`.\n+\n+- Fixed an issue that resulted in records in ``pg_catalog.pg_proc`` which\n+  wouldn't be joined with ``pg_catalog.pg_type``. Clients like ``npgsql`` use\n+  this information and without it the users received an error like ``The CLR\n+  array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` if", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMzM0MQ==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530233341", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              This fixed the broken AdminUI->Montoring tab as it uses such an statement.\n          \n          \n            \n              This fixed the broken AdminUI->Montoring tab as it uses such a statement.", "author": "amotl", "createdAt": "2020-11-25T09:40:58Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of `Transport handler not found ...`.\n+\n+- Fixed an issue that resulted in records in ``pg_catalog.pg_proc`` which\n+  wouldn't be joined with ``pg_catalog.pg_type``. Clients like ``npgsql`` use\n+  this information and without it the users received an error like ``The CLR\n+  array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` if\n+  using array types.\n+\n+- Fixed an issue that could lead to stuck ``INSERT INTO .. RETURNING`` queries.\n+\n+- Fixed a regression introduced in CrateDB >= ``4.3`` which prevents using\n+  ``regexp_matches()`` wrapped inside a subscript expression from being used\n+  as a ``GROUP BY`` expression.\n+  This fixed the broken AdminUI->Montoring tab as it uses such an statement.", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzNDQ1OA==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530234458", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Fixed an issue that led to an error if a user nested multiple table\n          \n          \n            \n              functions.\n          \n          \n            \n            - Fixed an issue that led to an error when nesting multiple table\n          \n          \n            \n              functions.\n          \n      \n    \n    \n  \n\nWould \"cascading\" be more appropriate?", "author": "amotl", "createdAt": "2020-11-25T09:42:32Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced Crate ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of `Transport handler not found ...`.\n+\n+- Fixed an issue that resulted in records in ``pg_catalog.pg_proc`` which\n+  wouldn't be joined with ``pg_catalog.pg_type``. Clients like ``npgsql`` use\n+  this information and without it the users received an error like ``The CLR\n+  array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` if\n+  using array types.\n+\n+- Fixed an issue that could lead to stuck ``INSERT INTO .. RETURNING`` queries.\n+\n+- Fixed a regression introduced in CrateDB >= ``4.3`` which prevents using\n+  ``regexp_matches()`` wrapped inside a subscript expression from being used\n+  as a ``GROUP BY`` expression.\n+  This fixed the broken AdminUI->Montoring tab as it uses such an statement.\n+\n+- Fixed validation of ``GROUP BY`` expressions if an alias is used. The\n+  validation was by passed and resulted in an execution exception instead of\n+  an user friendly validation exception.\n+\n+- Fixed an issue that caused ``IS NULL`` and ``IS NOT NULL`` operators on\n+  columns of type ``OBJECT`` with the column policy ``IGNORED`` to match\n+  incorrect records.\n+\n+- Fixed an issue that led to an error like ``UnsupportedOperationException:\n+  Can't handle Symbol [ParameterSymbol: $1]`` if using ``INSERT INTO`` with a\n+  query that contains parameter place holders and a ``LIMIT`` clause.\n+\n+- Fixed an issue that led to an error if a user nested multiple table\n+  functions.", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI0MjQwMQ==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530242401", "bodyText": "Would \"cascading\" be more appropriate?\n\nNot sure, I'd tend to keep the current version.", "author": "mfussenegger", "createdAt": "2020-11-25T09:53:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzNDQ1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzNjQxMw==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530236413", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n          \n          \n            \n                When upgrading a cluster, you must be running CrateDB 4.0.2 or higher before", "author": "amotl", "createdAt": "2020-11-25T09:45:14Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before", "originalCommit": "b5b1b620a998172a4075668d1001dca5822a3058", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI0MzQ3Ng==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530243476", "bodyText": "We've this line in pretty much every release and I think that was also already reviewed by @mechanomi\nNot sure about the if vs when cases. I'll keep it as is for now.", "author": "mfussenegger", "createdAt": "2020-11-25T09:55:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzNjQxMw=="}], "type": "inlineReview"}, {"oid": "82555dc2b817d73d6d820e4a93e6d49246f529b4", "url": "https://github.com/crate/crate/commit/82555dc2b817d73d6d820e4a93e6d49246f529b4", "message": "Reflect 4.3.2 release", "committedDate": "2020-11-25T09:52:41Z", "type": "commit"}, {"oid": "82555dc2b817d73d6d820e4a93e6d49246f529b4", "url": "https://github.com/crate/crate/commit/82555dc2b817d73d6d820e4a93e6d49246f529b4", "message": "Reflect 4.3.2 release", "committedDate": "2020-11-25T09:52:41Z", "type": "forcePushed"}, {"oid": "98fa342e8fda08290c030e7648548d4b034aa112", "url": "https://github.com/crate/crate/commit/98fa342e8fda08290c030e7648548d4b034aa112", "message": "Merge branch 'master' into j/reflect-4.3.2", "committedDate": "2020-11-25T10:30:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDI3MDY5NQ==", "url": "https://github.com/crate/crate/pull/10808#discussion_r530270695", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              validation was by passed and resulted in an execution exception instead of\n          \n          \n            \n              validation was bypassed and resulted in an execution exception instead of\n          \n      \n    \n    \n  \n\nAs suggested by @MarkusH within #10810. Thanks!", "author": "amotl", "createdAt": "2020-11-25T10:36:14Z", "path": "docs/appendices/release-notes/4.3.2.rst", "diffHunk": "@@ -0,0 +1,68 @@\n+.. _version_4.3.2:\n+\n+=============\n+Version 4.3.2\n+=============\n+\n+Released on 2020-11-25.\n+\n+.. NOTE::\n+\n+    If upgrading a cluster, you must be running CrateDB 4.0.2 or higher before\n+    you upgrade to 4.3.2.\n+\n+    We recommend that you upgrade to the latest 4.2 release before moving to\n+    4.3.2.\n+\n+    A rolling upgrade from 4.2.6+ to 4.3.2 is supported.\n+\n+    Before upgrading, you should `back up your data`_.\n+\n+.. _back up your data: https://crate.io/a/backing-up-and-restoring-crate/\n+\n+\n+\n+.. rubric:: Table of Contents\n+\n+.. contents::\n+   :local:\n+\n+\n+Fixes\n+=====\n+\n+- Fixed an issue that could cause browsers to prompt for a client certificate\n+  if ``SSL`` is enabled on the server side, even if no cert authentication\n+  method is configured.\n+\n+- Fixed a regression introduced in CrateDB ``4.1`` resulting in duplicated recovery\n+  file chunk responses sent.\n+  This causes log entries of ``Transport handler not found ...``.\n+\n+- Fixed an issue that resulted in records in ``pg_catalog.pg_proc`` which\n+  wouldn't be joined with ``pg_catalog.pg_type``. Clients like ``npgsql`` use\n+  this information and without it, the users received an error like ``The CLR\n+  array type System.Int32[] isn't supported by Npgsql or your PostgreSQL`` if\n+  using array types.\n+\n+- Fixed an issue that could lead to stuck ``INSERT INTO .. RETURNING`` queries.\n+\n+- Fixed a regression introduced in CrateDB >= ``4.3`` which prevents using\n+  ``regexp_matches()`` wrapped inside a subscript expression from being used\n+  as a ``GROUP BY`` expression.\n+  This fixed the broken AdminUI->Montoring tab as it uses such a statement.\n+\n+- Fixed validation of ``GROUP BY`` expressions if an alias is used. The\n+  validation was by passed and resulted in an execution exception instead of", "originalCommit": "98fa342e8fda08290c030e7648548d4b034aa112", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}