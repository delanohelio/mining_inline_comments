{"pr_number": 10845, "pr_title": "Fix handling of spaces in `$CRATE_HOME`", "pr_createdAt": "2020-12-02T15:54:06Z", "pr_url": "https://github.com/crate/crate/pull/10845", "timeline": [{"oid": "06681845a687c302bfcdadee443b40e90a965b17", "url": "https://github.com/crate/crate/commit/06681845a687c302bfcdadee443b40e90a965b17", "message": "Fix handling of spaces in `$CRATE_HOME`\n\nIncluded changes:\n\n- Drops the unnecessary and potentially misleading hashbang from `crate.in.sh`\n  because the file is meant to be sourced not executed.\n\n- Puts `$CRATE_HOME` in double quotes when used in a for loop. This prevents sh\n  from interpreting a space in this variable as an item terminator.\n\n- Wraps every file name added to `$CRATE_CLASSPATH` in double quotes (cf.\n  <https://stackoverflow.com/a/3003908>) and subsequently removes the (now\n  unnecessary) double quotes used to pass `$CRATE_CLASSPATH` as an argument.\n\n- Wraps `${LOGGC}` in nested double quotes. This prevents sh from interpreting\n  a space in this variable as an argument terminator when used in `$JAVA_OPTS`.\n\n- Sets `-e` on the `bin/crate` hashbang, ensuring the script exits immediately\n  if an error is encountered. This prevents cascading errors.\n\n- Wrap the arguments passed to `exec` in double quotes. This preserves the use\n  of double quotes in the subcommand being executed.", "committedDate": "2020-12-02T22:01:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDk4MjI4Mg==", "url": "https://github.com/crate/crate/pull/10845#discussion_r534982282", "bodyText": "We usually try to include a symptom that users may have seen when running into the fixed issue.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - Fixed handling of spaces in `$CRATE_HOME`.\n          \n          \n            \n            - Fixed handling of spaces in `$CRATE_HOME`. Users would get a `No such file or directory` error if the path set via `$CRATE_HOME` contained spaces.", "author": "mfussenegger", "createdAt": "2020-12-03T09:10:25Z", "path": "docs/appendices/release-notes/unreleased.rst", "diffHunk": "@@ -94,3 +94,5 @@ Fixes\n \n - Fixed a regression introduced in CrateDB ``4.0`` preventing the global setting\n   ``cluster.info.update.interval`` to be changed.\n+\n+- Fixed handling of spaces in `$CRATE_HOME`.", "originalCommit": "06681845a687c302bfcdadee443b40e90a965b17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzYwMTQ2MA==", "url": "https://github.com/crate/crate/pull/10845#discussion_r537601460", "bodyText": "thx!", "author": "norosa", "createdAt": "2020-12-07T15:34:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNDk4MjI4Mg=="}], "type": "inlineReview"}, {"oid": "6b08309a2f41ea2f241339d8627db81f0912d843", "url": "https://github.com/crate/crate/commit/6b08309a2f41ea2f241339d8627db81f0912d843", "message": "Fix handling of spaces in `$CRATE_HOME`\n\nIncluded changes:\n\n- Drops the unnecessary and potentially misleading hashbang from `crate.in.sh`\n  because the file is meant to be sourced not executed.\n\n- Puts `$CRATE_HOME` in double quotes when used in a for loop. This prevents sh\n  from interpreting a space in this variable as an item terminator.\n\n- Wraps `${LOGGC}` in nested double quotes. This prevents sh from interpreting\n  a space in this variable as an argument terminator when used in `$JAVA_OPTS`.\n\n- Sets `-e` on the `bin/crate` hashbang, ensuring the script exits immediately\n  if an error is encountered. This prevents cascading errors.\n\n- Wrap the variables passed to `exec` in double quotes. This preserves the use\n  of double quotes in the subcommand being executed.", "committedDate": "2020-12-07T17:58:10Z", "type": "forcePushed"}, {"oid": "1e675c6155404a98246fd45d17bc131bea804759", "url": "https://github.com/crate/crate/commit/1e675c6155404a98246fd45d17bc131bea804759", "message": "Fix handling of spaces in `$CRATE_HOME`\n\nIncluded changes:\n\n- Drops the unnecessary and potentially misleading hashbang from `crate.in.sh`\n  because the file is meant to be sourced not executed.\n\n- Puts `$CRATE_HOME` in double quotes when used in a for loop. This prevents sh\n  from interpreting a space in this variable as an item terminator.\n\n- Wraps `${LOGGC}` in nested double quotes. This prevents sh from interpreting\n  a space in this variable as an argument terminator when used in `$JAVA_OPTS`.\n\n- Sets `-e` on the `bin/crate` hashbang, ensuring the script exits immediately\n  if an error is encountered. This prevents cascading errors.\n\n- Wraps the variables passed to `exec` in double quotes. This preserves the use\n  of double quotes in the subcommand being executed.", "committedDate": "2020-12-07T17:58:56Z", "type": "forcePushed"}, {"oid": "b1b7a3239969073b02b25eec4a94162ffb4a37bd", "url": "https://github.com/crate/crate/commit/b1b7a3239969073b02b25eec4a94162ffb4a37bd", "message": "Fix handling of spaces in `$CRATE_HOME`\n\nIncluded changes:\n\n- Drops the unnecessary and potentially misleading hashbang from `crate.in.sh`\n  because the file is meant to be sourced not executed.\n\n- Puts `$CRATE_HOME` in double quotes when used in a for loop. This prevents sh\n  from interpreting a space in this variable as an item terminator.\n\n- Wraps `${LOGGC}` in nested double quotes. This prevents sh from interpreting\n  a space in this variable as an argument terminator when used in `$JAVA_OPTS`.\n\n- Sets `-e` on the `bin/crate` hashbang, ensuring the script exits immediately\n  if an error is encountered. This prevents cascading errors.\n\n- Wraps the variables passed to `exec` in two sets of double quotes. This\n  preserves one set of double quotes in the subcommand being executed, which is\n  necessary for paths with a space in them.", "committedDate": "2020-12-07T17:59:36Z", "type": "commit"}, {"oid": "b1b7a3239969073b02b25eec4a94162ffb4a37bd", "url": "https://github.com/crate/crate/commit/b1b7a3239969073b02b25eec4a94162ffb4a37bd", "message": "Fix handling of spaces in `$CRATE_HOME`\n\nIncluded changes:\n\n- Drops the unnecessary and potentially misleading hashbang from `crate.in.sh`\n  because the file is meant to be sourced not executed.\n\n- Puts `$CRATE_HOME` in double quotes when used in a for loop. This prevents sh\n  from interpreting a space in this variable as an item terminator.\n\n- Wraps `${LOGGC}` in nested double quotes. This prevents sh from interpreting\n  a space in this variable as an argument terminator when used in `$JAVA_OPTS`.\n\n- Sets `-e` on the `bin/crate` hashbang, ensuring the script exits immediately\n  if an error is encountered. This prevents cascading errors.\n\n- Wraps the variables passed to `exec` in two sets of double quotes. This\n  preserves one set of double quotes in the subcommand being executed, which is\n  necessary for paths with a space in them.", "committedDate": "2020-12-07T17:59:36Z", "type": "forcePushed"}, {"oid": "e563d03f5f3546f9b5b738299b697808f875065b", "url": "https://github.com/crate/crate/commit/e563d03f5f3546f9b5b738299b697808f875065b", "message": "Merge branch 'master' into nomi/crate_home", "committedDate": "2020-12-09T15:18:49Z", "type": "commit"}, {"oid": "eb3f7f016b38c4d532779cfb22f5c5af1d249a40", "url": "https://github.com/crate/crate/commit/eb3f7f016b38c4d532779cfb22f5c5af1d249a40", "message": "Merge branch 'master' into nomi/crate_home", "committedDate": "2020-12-09T17:10:32Z", "type": "commit"}]}