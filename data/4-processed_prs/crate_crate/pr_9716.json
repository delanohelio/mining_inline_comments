{"pr_number": 9716, "pr_title": "Make sure undefined type can be streamed as text to clients", "pr_createdAt": "2020-03-02T09:24:38Z", "pr_url": "https://github.com/crate/crate/pull/9716", "timeline": [{"oid": "058816dfcdbe799b443bc0fdd1ca7f1e919b444f", "url": "https://github.com/crate/crate/commit/058816dfcdbe799b443bc0fdd1ca7f1e919b444f", "message": "Make sure undefined type can be streamed as text to clients\n\nf013bbeae63e7e73f11c6d96268d04faa46e8ed4 enabled support for queries\nlike:\n\n    SELECT obj['x'] FROM unnest([{x=10}]);\n\nThis worked via HTTP, but didn't via pg-wire because `obj['x']` has\ntype `undefined`. `undefined` is mapped to `VarCharType` which didn't\nhandle any instances other than `String`.", "committedDate": "2020-03-02T09:17:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI4OTY0OA==", "url": "https://github.com/crate/crate/pull/9716#discussion_r386289648", "bodyText": "lgtm\nNote: Maybe we can use BasePGTypeTest to test VarCharType and move other related tests there as well.", "author": "kovrus", "createdAt": "2020-03-02T09:50:18Z", "path": "sql/src/test/java/io/crate/protocols/postgres/types/PGTypesTest.java", "diffHunk": "@@ -65,6 +65,12 @@ public void testCrate2PGType() {\n             instanceOf(VarCharType.class));\n     }\n \n+    @Test\n+    public void test_undefined_type_can_stream_non_string_values() {", "originalCommit": "058816dfcdbe799b443bc0fdd1ca7f1e919b444f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}