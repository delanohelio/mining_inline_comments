{"pr_number": 10149, "pr_title": "Add oid type to pg_type table", "pr_createdAt": "2020-06-29T14:40:45Z", "pr_url": "https://github.com/crate/crate/pull/10149", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzAyNzM3MA==", "url": "https://github.com/crate/crate/pull/10149#discussion_r447027370", "bodyText": "oidvector and oid have the same typarray oid. I've looked it up and it should be 1028 for oid:\ntemplate1=# select typarray from pg_type where typname = 'oid';\n typarray\n----------\n     1028\n(1 row)", "author": "kovrus", "createdAt": "2020-06-29T14:45:43Z", "path": "docs/interfaces/postgres.rst", "diffHunk": "@@ -171,7 +171,8 @@ table available in CrateDB::\n     |   21 | int2                         |     1005 |       0 |      2 | b       | N           |\n     |   23 | int4                         |     1007 |       0 |      4 | b       | N           |\n     |   24 | regproc                      |     1008 |       0 |      4 | b       | N           |\n-    |   30 | oidvector                    |     1013 |       0 |     -1 | b       | A           |\n+    |   26 | oid                          |     1013 |       0 |      4 | b       | N           |", "originalCommit": "bb5cfad51f74a31ca232b5c2b80a438b352e29c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA0OTM1Ng==", "url": "https://github.com/crate/crate/pull/10149#discussion_r447049356", "bodyText": "Oh right, thanks for catching this \ud83d\udc4d", "author": "mfussenegger", "createdAt": "2020-06-29T15:15:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzAyNzM3MA=="}], "type": "inlineReview"}, {"oid": "ee28c23e6a3ec7022e776f1431656ac979edc507", "url": "https://github.com/crate/crate/commit/ee28c23e6a3ec7022e776f1431656ac979edc507", "message": "Add oid type to pg_type table\n\nAfter the introduction of the oidvector, the npgsql driver failed with:\n\n    Unhandled exception. System.Collections.Generic.KeyNotFoundException: The given key 'oid' was not present in the dictionary.\n       at System.Collections.Generic.Dictionary`2.get_Item(TKey key)\n       at Npgsql.TypeHandlers.InternalTypesHandlers.OIDVectorHandlerFactory.Create(PostgresType pgType, NpgsqlConnection conn)\n       at Npgsql.TypeMapping.ConnectorTypeMapper.BindType(NpgsqlTypeMapping mapping, NpgsqlConnector connector, Boolean externalCall)\n       at Npgsql.TypeMapping.ConnectorTypeMapper.BindTypes()\n       at Npgsql.TypeMapping.ConnectorTypeMapper.Bind(NpgsqlDatabaseInfo databaseInfo)\n       at Npgsql.NpgsqlConnector.LoadDatabaseInfo(NpgsqlTimeout timeout, Boolean async)\n       at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\n       at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\n       at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext()\n\nThis adds an Oid type entry to the `pg_type` table to fix the issue.\n(It doesn't add a oid cratedb type, looks like it is not necessary - we\ncan still follow up on that later)", "committedDate": "2020-06-29T15:23:27Z", "type": "commit"}, {"oid": "ee28c23e6a3ec7022e776f1431656ac979edc507", "url": "https://github.com/crate/crate/commit/ee28c23e6a3ec7022e776f1431656ac979edc507", "message": "Add oid type to pg_type table\n\nAfter the introduction of the oidvector, the npgsql driver failed with:\n\n    Unhandled exception. System.Collections.Generic.KeyNotFoundException: The given key 'oid' was not present in the dictionary.\n       at System.Collections.Generic.Dictionary`2.get_Item(TKey key)\n       at Npgsql.TypeHandlers.InternalTypesHandlers.OIDVectorHandlerFactory.Create(PostgresType pgType, NpgsqlConnection conn)\n       at Npgsql.TypeMapping.ConnectorTypeMapper.BindType(NpgsqlTypeMapping mapping, NpgsqlConnector connector, Boolean externalCall)\n       at Npgsql.TypeMapping.ConnectorTypeMapper.BindTypes()\n       at Npgsql.TypeMapping.ConnectorTypeMapper.Bind(NpgsqlDatabaseInfo databaseInfo)\n       at Npgsql.NpgsqlConnector.LoadDatabaseInfo(NpgsqlTimeout timeout, Boolean async)\n       at Npgsql.NpgsqlConnector.Open(NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\n       at Npgsql.ConnectorPool.AllocateLong(NpgsqlConnection conn, NpgsqlTimeout timeout, Boolean async, CancellationToken cancellationToken)\n       at Npgsql.NpgsqlConnection.<>c__DisplayClass32_0.<<Open>g__OpenLong|0>d.MoveNext()\n\nThis adds an Oid type entry to the `pg_type` table to fix the issue.\n(It doesn't add a oid cratedb type, looks like it is not necessary - we\ncan still follow up on that later)", "committedDate": "2020-06-29T15:23:27Z", "type": "forcePushed"}]}