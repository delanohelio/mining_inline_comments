{"pr_number": 5913, "pr_title": "windows platform unittest adapt", "pr_createdAt": "2020-03-24T11:27:11Z", "pr_url": "https://github.com/apache/dubbo/pull/5913", "timeline": [{"oid": "263b6c4ef39b469c536be0c1a3698d03d21a1660", "url": "https://github.com/apache/dubbo/commit/263b6c4ef39b469c536be0c1a3698d03d21a1660", "message": "fix:in Windows platform content get from resource contains \\r delimiter", "committedDate": "2020-03-24T03:21:25Z", "type": "commit"}, {"oid": "7efb3e7b1492f05e2a6d9bde48d7c0708e237338", "url": "https://github.com/apache/dubbo/commit/7efb3e7b1492f05e2a6d9bde48d7c0708e237338", "message": "fix:in some platform ServerSocket getting random port is not base on 30000", "committedDate": "2020-03-24T03:22:39Z", "type": "commit"}, {"oid": "0854f9f27807dec94f67392adc122c6f02c4695c", "url": "https://github.com/apache/dubbo/commit/0854f9f27807dec94f67392adc122c6f02c4695c", "message": "fix:EventDispatcherTest.testDefaultMethods may contain OnlyHelloWorldEventListener", "committedDate": "2020-03-24T03:23:26Z", "type": "commit"}, {"oid": "86b8b365781818ce2cb51f78adf726c62c4dab49", "url": "https://github.com/apache/dubbo/commit/86b8b365781818ce2cb51f78adf726c62c4dab49", "message": "fix:in Windows Platform hessian2 may unable serialize byte", "committedDate": "2020-03-24T03:25:32Z", "type": "commit"}, {"oid": "f70f26db179ca66beb629b1c904b5145a73513b5", "url": "https://github.com/apache/dubbo/commit/f70f26db179ca66beb629b1c904b5145a73513b5", "message": "fix:rename ExplicitCallbackTest to ArgumentCallbackTest owing to junit order", "committedDate": "2020-03-24T03:27:58Z", "type": "commit"}, {"oid": "1902f30670945a34b5a51ddafaf94905924cf6b6", "url": "https://github.com/apache/dubbo/commit/1902f30670945a34b5a51ddafaf94905924cf6b6", "message": "fix:Windows error 0x70 while starting redis", "committedDate": "2020-03-24T03:28:52Z", "type": "commit"}, {"oid": "1d8753afba51748bdad97ae00e9207e32a882349", "url": "https://github.com/apache/dubbo/commit/1d8753afba51748bdad97ae00e9207e32a882349", "message": "fix:fix static port may have been used", "committedDate": "2020-03-24T03:37:31Z", "type": "commit"}, {"oid": "a7b2f75f593fd4da08b763d2bfd2934519ba096b", "url": "https://github.com/apache/dubbo/commit/a7b2f75f593fd4da08b763d2bfd2934519ba096b", "message": "fix:fix static port in rest protocol test may have been used", "committedDate": "2020-03-24T04:08:42Z", "type": "commit"}, {"oid": "bcf5d0080ce7e68e99f7bb8ef8c52b6bec328c29", "url": "https://github.com/apache/dubbo/commit/bcf5d0080ce7e68e99f7bb8ef8c52b6bec328c29", "message": "fix:fix static port in redis protocol test may have been used", "committedDate": "2020-03-24T04:29:49Z", "type": "commit"}, {"oid": "660bc39779d00b85b589ead37b8732bc04bbb302", "url": "https://github.com/apache/dubbo/commit/660bc39779d00b85b589ead37b8732bc04bbb302", "message": "fix:fix static port in netty protocol test may have been used", "committedDate": "2020-03-24T04:30:02Z", "type": "commit"}, {"oid": "bc3d6b0958f52ef242fefbb254c4ee4dee8a1f45", "url": "https://github.com/apache/dubbo/commit/bc3d6b0958f52ef242fefbb254c4ee4dee8a1f45", "message": "fix:fix static port in multiple registry protocol test may have been used", "committedDate": "2020-03-24T05:02:43Z", "type": "commit"}, {"oid": "f29b3f0baaf22b45ca0e20e4ae0fa41129048050", "url": "https://github.com/apache/dubbo/commit/f29b3f0baaf22b45ca0e20e4ae0fa41129048050", "message": "fix:fix static port in multiple registry protocol test may have been used", "committedDate": "2020-03-24T06:14:56Z", "type": "commit"}, {"oid": "30c340706b1b370e4953aa009862481137e8680d", "url": "https://github.com/apache/dubbo/commit/30c340706b1b370e4953aa009862481137e8680d", "message": "fix:fix static port in rmi registry protocol test may have been used", "committedDate": "2020-03-24T06:28:55Z", "type": "commit"}, {"oid": "751343e25d5505150e02f5719c2c89d66121869e", "url": "https://github.com/apache/dubbo/commit/751343e25d5505150e02f5719c2c89d66121869e", "message": "fix:fix static port in dubbo registry protocol test may have been used", "committedDate": "2020-03-24T06:43:52Z", "type": "commit"}, {"oid": "0f862667c38dfe34d3b1703fc2bf32cb232888a4", "url": "https://github.com/apache/dubbo/commit/0f862667c38dfe34d3b1703fc2bf32cb232888a4", "message": "fix:fix static port in hessian rpc protocol test may have been used", "committedDate": "2020-03-24T06:46:26Z", "type": "commit"}, {"oid": "e3f5f392296402f09bcaaff7a7e5be8d402faad2", "url": "https://github.com/apache/dubbo/commit/e3f5f392296402f09bcaaff7a7e5be8d402faad2", "message": "fix:fix static port in http rpc protocol test may have been used", "committedDate": "2020-03-24T06:48:29Z", "type": "commit"}, {"oid": "31a56423faf079d1ae843ac04e7a96b22d323fd2", "url": "https://github.com/apache/dubbo/commit/31a56423faf079d1ae843ac04e7a96b22d323fd2", "message": "fix:fix static port in thrift rpc protocol test may have been used", "committedDate": "2020-03-24T06:50:39Z", "type": "commit"}, {"oid": "a299794c599a74ee3f9c8cd2914c687466fc1649", "url": "https://github.com/apache/dubbo/commit/a299794c599a74ee3f9c8cd2914c687466fc1649", "message": "fix:fix static port in thrift rpc protocol test may have been used", "committedDate": "2020-03-24T06:53:54Z", "type": "commit"}, {"oid": "fa7ac7b489632edcf2c77fbc242c4f50d6b085fe", "url": "https://github.com/apache/dubbo/commit/fa7ac7b489632edcf2c77fbc242c4f50d6b085fe", "message": "fix:fix static port in webservice rpc protocol test may have been used", "committedDate": "2020-03-24T06:54:15Z", "type": "commit"}, {"oid": "3e492e3309c5a2d426fa8728fc79a80206b68fcb", "url": "https://github.com/apache/dubbo/commit/3e492e3309c5a2d426fa8728fc79a80206b68fcb", "message": "fix:fix static port in xml rpc protocol test may have been used", "committedDate": "2020-03-24T06:56:48Z", "type": "commit"}, {"oid": "66de1ebfb45b7486dfae3a70e4cb2376a8cd5caf", "url": "https://github.com/apache/dubbo/commit/66de1ebfb45b7486dfae3a70e4cb2376a8cd5caf", "message": "fix:fix static port in dubbo qos test may have been used", "committedDate": "2020-03-24T07:05:19Z", "type": "commit"}, {"oid": "c9292127fb703b5468aed79ce37791dc9a8e800e", "url": "https://github.com/apache/dubbo/commit/c9292127fb703b5468aed79ce37791dc9a8e800e", "message": "fix:fix static port in registry test may have been used", "committedDate": "2020-03-24T11:45:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU4ODczMA==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r397588730", "bodyText": "apache common lang has a tool named 'SystemUtils' to do this check.\nconsider this is a unit test, I suggest add it as test scope dependency and use https://commons.apache.org/proper/commons-lang/apidocs/index.html?org/apache/commons/lang3/SystemUtils.html", "author": "htynkn", "createdAt": "2020-03-25T03:23:19Z", "path": "dubbo-metadata/dubbo-metadata-report-redis/src/test/java/org/apache/dubbo/metadata/store/redis/RedisMetadataReportTest.java", "diffHunk": "@@ -76,6 +87,10 @@ public void tearDown() throws Exception {\n         this.redisServer.stop();\n     }\n \n+    private boolean isWindowsPlatform() {", "originalCommit": "c9292127fb703b5468aed79ce37791dc9a8e800e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzYxMTU1Ng==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r397611556", "bodyText": "got it, i will fix it in the latest version", "author": "AlbumenJ", "createdAt": "2020-03-25T05:05:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzU4ODczMA=="}], "type": "inlineReview"}, {"oid": "b7a046e22eeecaf47c802e1e6be975bde024ca3a", "url": "https://github.com/apache/dubbo/commit/b7a046e22eeecaf47c802e1e6be975bde024ca3a", "message": "refactor: use SystemUtils to check platform", "committedDate": "2020-03-25T04:57:32Z", "type": "commit"}, {"oid": "14df5809ba6ccba4372e231dfaa077be3930727d", "url": "https://github.com/apache/dubbo/commit/14df5809ba6ccba4372e231dfaa077be3930727d", "message": "fix: fix error file push", "committedDate": "2020-03-25T04:59:22Z", "type": "commit"}, {"oid": "afbafffca058584974b7c02abc85275e85d343b1", "url": "https://github.com/apache/dubbo/commit/afbafffca058584974b7c02abc85275e85d343b1", "message": "fix:fix error push", "committedDate": "2020-03-25T05:00:46Z", "type": "commit"}, {"oid": "a6e93d9a840829159725ea73bca4d9b821fc2aab", "url": "https://github.com/apache/dubbo/commit/a6e93d9a840829159725ea73bca4d9b821fc2aab", "message": "Merge remote-tracking branch 'origin/unittest-windows-fix' into unittest-windows-fix\n\n# Conflicts:\n#\tdubbo-common/src/main/java/org/apache/dubbo/common/extension/ExtensionLoader.java", "committedDate": "2020-03-25T05:01:14Z", "type": "commit"}, {"oid": "547a1d1f3e9044a265eacaaf508cdbd43e31a334", "url": "https://github.com/apache/dubbo/commit/547a1d1f3e9044a265eacaaf508cdbd43e31a334", "message": "fix: remove unnecessary import", "committedDate": "2020-03-25T05:19:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxOTc2NQ==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r398319765", "bodyText": "what's the purpose for this one.\nwill it fail if remove this one?", "author": "htynkn", "createdAt": "2020-03-26T05:04:46Z", "path": "dubbo-rpc/dubbo-rpc-dubbo/pom.xml", "diffHunk": "@@ -91,4 +91,15 @@\n             <scope>test</scope>\n         </dependency>\n     </dependencies>\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-surefire-plugin</artifactId>\n+                <configuration>\n+                    <runOrder>alphabetical</runOrder>", "originalCommit": "c9292127fb703b5468aed79ce37791dc9a8e800e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMyMTE2MQ==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r398321161", "bodyText": "This will make ArgumentCallbackTest be the first one in the test suit.\nRunning ArgumentCallbackTest after other unit test will fail owing to NPE in arugument callback.\nIf remove this one, in Linux platform ArgumentCallbackTest still the first one to run, but in Windows platform it would be the last one.", "author": "AlbumenJ", "createdAt": "2020-03-26T05:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxOTc2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMyMjA0Mg==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r398322042", "bodyText": "The fail will show when other test like DubboInvokerAvilableTest execute ProtocolUtils.export twice or more and execute new DubboProtocol() in other test.", "author": "AlbumenJ", "createdAt": "2020-03-26T05:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxOTc2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMzMTA4OQ==", "url": "https://github.com/apache/dubbo/pull/5913#discussion_r398331089", "bodyText": "thanks for your explanation. Happy to accept your PR. thanks again.", "author": "htynkn", "createdAt": "2020-03-26T05:49:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODMxOTc2NQ=="}], "type": "inlineReview"}]}