{"pr_number": 1397, "pr_title": "Convert Account Screen code into MVVM pattern using kotlin", "pr_createdAt": "2020-04-17T11:26:14Z", "pr_url": "https://github.com/edx/edx-app-android/pull/1397", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NDE4NQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417184185", "bodyText": "newIntent should be in the first place as in java class.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:30:43Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountActivity.kt", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.edx.mobile.view\n+\n+import android.content.Context\n+import android.content.Intent\n+import androidx.fragment.app.Fragment\n+import org.edx.mobile.base.BaseSingleFragmentActivity\n+import org.edx.mobile.deeplink.ScreenDef\n+\n+class AccountActivity : BaseSingleFragmentActivity() {\n+\n+    override fun getFirstFragment(): Fragment {\n+        return AccountFragment.newInstance(intent.extras)\n+    }\n+\n+    companion object {\n+        @JvmStatic\n+        fun newIntent(activity: Context?, @ScreenDef screenName: String?): Intent {", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NDYxOQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417184619", "bodyText": "Need one new line as EOF.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:31:27Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountActivity.kt", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.edx.mobile.view\n+\n+import android.content.Context\n+import android.content.Intent\n+import androidx.fragment.app.Fragment\n+import org.edx.mobile.base.BaseSingleFragmentActivity\n+import org.edx.mobile.deeplink.ScreenDef\n+\n+class AccountActivity : BaseSingleFragmentActivity() {\n+\n+    override fun getFirstFragment(): Fragment {\n+        return AccountFragment.newInstance(intent.extras)\n+    }\n+\n+    companion object {\n+        @JvmStatic\n+        fun newIntent(activity: Context?, @ScreenDef screenName: String?): Intent {\n+            val intent = Intent(activity, AccountActivity::class.java)\n+            intent.putExtra(Router.EXTRA_SCREEN_NAME, screenName)\n+            intent.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT)\n+            return intent\n+        }\n+    }\n+}", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4NTkwOQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417185909", "bodyText": "Use return binding.root instated.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:33:48Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")\n+            }\n+        } else {\n+            binding.profileBtn.visibility = View.GONE\n+        }\n+        binding.settingsBtn.setOnClickListener { environment?.router?.showSettings(activity) }\n+        binding.feedbackBtn.setOnClickListener { environment?.router?.showFeedbackScreen(activity!!, getString(R.string.email_subject)) }\n+        binding.logoutBtn.setOnClickListener {\n+            environment?.router?.performManualLogout(activity,\n+                    environment.analyticsRegistry, environment.notificationDelegate)\n+        }\n+        binding.tvVersionNo.text = String.format(\"%s %s %s\", getString(R.string.label_version),\n+                BuildConfig.VERSION_NAME, environment?.config?.environmentDisplayName)\n+        return binding.getRoot()", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4ODQxMQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417188411", "bodyText": "Need one new line as EOF.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:38:22Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")\n+            }\n+        } else {\n+            binding.profileBtn.visibility = View.GONE\n+        }\n+        binding.settingsBtn.setOnClickListener { environment?.router?.showSettings(activity) }\n+        binding.feedbackBtn.setOnClickListener { environment?.router?.showFeedbackScreen(activity!!, getString(R.string.email_subject)) }\n+        binding.logoutBtn.setOnClickListener {\n+            environment?.router?.performManualLogout(activity,\n+                    environment.analyticsRegistry, environment.notificationDelegate)\n+        }\n+        binding.tvVersionNo.text = String.format(\"%s %s %s\", getString(R.string.label_version),\n+                BuildConfig.VERSION_NAME, environment?.config?.environmentDisplayName)\n+        return binding.getRoot()\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        handleIntentBundle(arguments)\n+    }\n+\n+    override fun onNewIntent(intent: Intent) {\n+        super.onNewIntent(intent)\n+        handleIntentBundle(intent.extras)\n+    }\n+\n+    private fun handleIntentBundle(bundle: Bundle?) {\n+        if (bundle != null) {\n+            @ScreenDef val screenName = bundle.getString(Router.EXTRA_SCREEN_NAME)\n+            if (!TextUtils.isEmpty(screenName) && screenName == Screen.SETTINGS) {\n+                environment?.router?.showSettings(activity)\n+            }\n+        }\n+    }\n+\n+    companion object {\n+        private val TAG = AccountFragment::class.java.canonicalName\n+        @JvmStatic\n+        fun newInstance(@Nullable bundle: Bundle?): AccountFragment {\n+            val fragment = AccountFragment()\n+            fragment.arguments = bundle\n+            return fragment\n+        }\n+    }\n+}", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4ODQxNA==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417188414", "bodyText": "should be in the first position as java file.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:38:22Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")\n+            }\n+        } else {\n+            binding.profileBtn.visibility = View.GONE\n+        }\n+        binding.settingsBtn.setOnClickListener { environment?.router?.showSettings(activity) }\n+        binding.feedbackBtn.setOnClickListener { environment?.router?.showFeedbackScreen(activity!!, getString(R.string.email_subject)) }\n+        binding.logoutBtn.setOnClickListener {\n+            environment?.router?.performManualLogout(activity,\n+                    environment.analyticsRegistry, environment.notificationDelegate)\n+        }\n+        binding.tvVersionNo.text = String.format(\"%s %s %s\", getString(R.string.label_version),\n+                BuildConfig.VERSION_NAME, environment?.config?.environmentDisplayName)\n+        return binding.getRoot()\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        handleIntentBundle(arguments)\n+    }\n+\n+    override fun onNewIntent(intent: Intent) {\n+        super.onNewIntent(intent)\n+        handleIntentBundle(intent.extras)\n+    }\n+\n+    private fun handleIntentBundle(bundle: Bundle?) {\n+        if (bundle != null) {\n+            @ScreenDef val screenName = bundle.getString(Router.EXTRA_SCREEN_NAME)\n+            if (!TextUtils.isEmpty(screenName) && screenName == Screen.SETTINGS) {\n+                environment?.router?.showSettings(activity)\n+            }\n+        }\n+    }\n+\n+    companion object {\n+        private val TAG = AccountFragment::class.java.canonicalName\n+        @JvmStatic\n+        fun newInstance(@Nullable bundle: Bundle?): AccountFragment {", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE4ODkwMg==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417188902", "bodyText": "TAG is unused and can be removed.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:39:11Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")\n+            }\n+        } else {\n+            binding.profileBtn.visibility = View.GONE\n+        }\n+        binding.settingsBtn.setOnClickListener { environment?.router?.showSettings(activity) }\n+        binding.feedbackBtn.setOnClickListener { environment?.router?.showFeedbackScreen(activity!!, getString(R.string.email_subject)) }\n+        binding.logoutBtn.setOnClickListener {\n+            environment?.router?.performManualLogout(activity,\n+                    environment.analyticsRegistry, environment.notificationDelegate)\n+        }\n+        binding.tvVersionNo.text = String.format(\"%s %s %s\", getString(R.string.label_version),\n+                BuildConfig.VERSION_NAME, environment?.config?.environmentDisplayName)\n+        return binding.getRoot()\n+    }\n+\n+    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n+        super.onViewCreated(view, savedInstanceState)\n+        handleIntentBundle(arguments)\n+    }\n+\n+    override fun onNewIntent(intent: Intent) {\n+        super.onNewIntent(intent)\n+        handleIntentBundle(intent.extras)\n+    }\n+\n+    private fun handleIntentBundle(bundle: Bundle?) {\n+        if (bundle != null) {\n+            @ScreenDef val screenName = bundle.getString(Router.EXTRA_SCREEN_NAME)\n+            if (!TextUtils.isEmpty(screenName) && screenName == Screen.SETTINGS) {\n+                environment?.router?.showSettings(activity)\n+            }\n+        }\n+    }\n+\n+    companion object {\n+        private val TAG = AccountFragment::class.java.canonicalName", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE5NTM4NQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417195385", "bodyText": "Use let method instated of !! as activity!! throws NullpointerException.\nRef: https://kotlinlang.org/docs/tutorials/kotlin-for-py/null-safety.html#not-null-assertion-operator", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:51:04Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE5ODk0MQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417198941", "bodyText": "Use let method instated of !! as activity!! throws NullpointerException.\nRef: https://kotlinlang.org/docs/tutorials/kotlin-for-py/null-safety.html#not-null-assertion-operator", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T09:57:40Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,80 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+    private lateinit var binding: FragmentAccountBinding\n+    @Inject\n+    private val config: Config? = null\n+    @Inject\n+    private val environment: IEdxEnvironment? = null\n+    @Inject\n+    private val loginPrefs: LoginPrefs? = null\n+\n+    override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?,\n+                              savedInstanceState: Bundle?): View? {\n+        binding = DataBindingUtil.inflate(inflater, R.layout.fragment_account, container, false)\n+        if (config?.isUserProfilesEnabled == true) {\n+            binding.profileBtn.setOnClickListener {\n+                environment?.router?.showUserProfile(activity!!, loginPrefs?.username ?: \"\")\n+            }\n+        } else {\n+            binding.profileBtn.visibility = View.GONE\n+        }\n+        binding.settingsBtn.setOnClickListener { environment?.router?.showSettings(activity) }\n+        binding.feedbackBtn.setOnClickListener { environment?.router?.showFeedbackScreen(activity!!, getString(R.string.email_subject)) }", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNjAzMQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417206031", "bodyText": "Are we need this dependency? if then why.\nas test cases are already running without this.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:11:09Z", "path": "OpenEdXMobile/build.gradle", "diffHunk": "@@ -209,6 +209,7 @@ dependencies {\n \n     // test project configuration\n     testImplementation 'junit:junit:4.12'\n+    testImplementation 'androidx.test.ext:junit:1.1.1'", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzk1OTUyMA==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417959520", "bodyText": "still pending.", "author": "farhan-arshad-dev", "createdAt": "2020-04-30T12:04:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNjAzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNjA1OQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417206059", "bodyText": "Are we need this dependency? if then why.\nas test cases are already running without this.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:11:11Z", "path": "OpenEdXMobile/build.gradle", "diffHunk": "@@ -239,6 +240,7 @@ dependencies {\n     androidTestImplementation 'junit:junit:4.12'\n     androidTestImplementation 'androidx.test.ext:junit:1.1.1'\n     androidTestImplementation 'androidx.test:rules:1.2.0'\n+    androidTestImplementation 'androidx.test:runner:1.2.0'", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzk1OTU1MQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417959551", "bodyText": "still pending.", "author": "farhan-arshad-dev", "createdAt": "2020-04-30T12:04:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNjA1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNzcwNA==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417207704", "bodyText": "config is already defined in BaseTestCase.java.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:14:18Z", "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/UiTest.java", "diffHunk": "@@ -21,11 +22,13 @@\n @Ignore\n public class UiTest extends HttpBaseTestCase {\n     protected IEdxEnvironment environment;\n+    protected Config config;", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIwNzg2Mw==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417207863", "bodyText": "config is already initialized in BaseTestCase.java.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:14:37Z", "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/UiTest.java", "diffHunk": "@@ -21,11 +22,13 @@\n @Ignore\n public class UiTest extends HttpBaseTestCase {\n     protected IEdxEnvironment environment;\n+    protected Config config;\n \n     @Override\n     protected void inject(Injector injector) throws Exception {\n         super.inject(injector);\n         environment = injector.getInstance(IEdxEnvironment.class);\n+        config = injector.getInstance(Config.class);", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIxNzc5MQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417217791", "bodyText": "Add new line as EOF.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:33:59Z", "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/AccountFragmentTest.kt", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.edx.mobile.view\n+\n+import android.os.Bundle\n+import android.view.View\n+import kotlinx.android.synthetic.main.fragment_account.*\n+import org.assertj.core.api.Assertions\n+import org.junit.Assert.assertNotNull\n+import org.junit.Test\n+import org.mockito.Mockito.mock\n+import org.robolectric.shadows.support.v4.SupportFragmentController\n+import roboguice.activity.RoboFragmentActivity\n+\n+class AccountFragmentTest : UiTest() {\n+\n+    private lateinit var fragment: AccountFragment\n+\n+    override fun setUp() {\n+        super.setUp()\n+        fragment = AccountFragment.newInstance(null)\n+        SupportFragmentController.setupFragment(fragment, RoboFragmentActivity::class.java, android.R.id.content, mock(Bundle::class.java))\n+    }\n+\n+    @Test\n+    fun initializeTest() {\n+        assertNotNull(fragment.view)\n+    }\n+\n+    @Test\n+    fun checkButtonsVisibility() {\n+        if (config.isUserProfilesEnabled) {\n+            Assertions.assertThat(fragment.profile_btn.visibility).isEqualTo(View.VISIBLE)\n+        } else {\n+            Assertions.assertThat(fragment.profile_btn.visibility).isEqualTo(View.GONE)\n+        }\n+    }\n+}", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIyMTQyNQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417221425", "bodyText": "Add new line as EOF.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T10:41:20Z", "path": "OpenEdXMobile/src/androidTest/java/org/edx/mobile/view/AccountActivityTest.kt", "diffHunk": "@@ -0,0 +1,70 @@\n+package org.edx.mobile.view\n+\n+import android.app.Activity\n+import androidx.test.espresso.Espresso\n+import androidx.test.espresso.action.ViewActions\n+import androidx.test.espresso.matcher.ViewMatchers\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.filters.LargeTest\n+import androidx.test.platform.app.InstrumentationRegistry\n+import androidx.test.rule.ActivityTestRule\n+import com.facebook.testing.screenshot.Screenshot\n+import org.edx.mobile.R\n+import org.junit.Assert.assertEquals\n+import org.junit.Before\n+import org.junit.Rule\n+import org.junit.Test\n+import org.junit.rules.TestName\n+import org.junit.runner.RunWith\n+\n+@RunWith(AndroidJUnit4::class)\n+@LargeTest\n+class AccountActivityTest {\n+\n+    @Rule\n+    @JvmField\n+    val rule: ActivityTestRule<AccountActivity> = ActivityTestRule(AccountActivity::class.java)\n+\n+    @Rule\n+    var testName = TestName()\n+\n+    private lateinit var activity: Activity\n+\n+    @Before\n+    fun before() {\n+        this.activity = rule.activity\n+    }\n+\n+    @Test\n+    fun useAppContext() {\n+        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n+        assertEquals(\"org.edx.mobile\", appContext.packageName)\n+        println(\"useAppContext : Test Ran\")\n+    }\n+\n+    @Test\n+    fun checkProfileClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.profile_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkSettingClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.settings_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkFeedbackClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.feedback_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkLogoutClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.logout_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    @Throws(Throwable::class)\n+    fun testScreenshotRecordAccountActivity() {\n+        activity.runOnUiThread { Screenshot.snap(activity.findViewById(R.id.my_groups_list_container)).setName(javaClass.name + \"_\" + testName.methodName).record() }\n+    }\n+}", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzIzNzc1Mw==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417237753", "bodyText": "The screenshot test case is not just to record the screenshot. They are also used to verify that screen design should not be changed.\ne.g DiscoveryLaunchScreenshotTests and their screenshots in screenshots directory.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T11:14:15Z", "path": "OpenEdXMobile/src/androidTest/java/org/edx/mobile/view/AccountActivityTest.kt", "diffHunk": "@@ -0,0 +1,70 @@\n+package org.edx.mobile.view\n+\n+import android.app.Activity\n+import androidx.test.espresso.Espresso\n+import androidx.test.espresso.action.ViewActions\n+import androidx.test.espresso.matcher.ViewMatchers\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.filters.LargeTest\n+import androidx.test.platform.app.InstrumentationRegistry\n+import androidx.test.rule.ActivityTestRule\n+import com.facebook.testing.screenshot.Screenshot\n+import org.edx.mobile.R\n+import org.junit.Assert.assertEquals\n+import org.junit.Before\n+import org.junit.Rule\n+import org.junit.Test\n+import org.junit.rules.TestName\n+import org.junit.runner.RunWith\n+\n+@RunWith(AndroidJUnit4::class)\n+@LargeTest\n+class AccountActivityTest {\n+\n+    @Rule\n+    @JvmField\n+    val rule: ActivityTestRule<AccountActivity> = ActivityTestRule(AccountActivity::class.java)\n+\n+    @Rule\n+    var testName = TestName()\n+\n+    private lateinit var activity: Activity\n+\n+    @Before\n+    fun before() {\n+        this.activity = rule.activity\n+    }\n+\n+    @Test\n+    fun useAppContext() {\n+        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n+        assertEquals(\"org.edx.mobile\", appContext.packageName)\n+        println(\"useAppContext : Test Ran\")\n+    }\n+\n+    @Test\n+    fun checkProfileClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.profile_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkSettingClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.settings_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkFeedbackClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.feedback_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkLogoutClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.logout_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    @Throws(Throwable::class)\n+    fun testScreenshotRecordAccountActivity() {\n+        activity.runOnUiThread { Screenshot.snap(activity.findViewById(R.id.my_groups_list_container)).setName(javaClass.name + \"_\" + testName.methodName).record() }", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI0MDkyMQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417240921", "bodyText": "IMO, there is no sense to just perform view click action, as we are not checking any flow after that.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T11:21:04Z", "path": "OpenEdXMobile/src/androidTest/java/org/edx/mobile/view/AccountActivityTest.kt", "diffHunk": "@@ -0,0 +1,70 @@\n+package org.edx.mobile.view\n+\n+import android.app.Activity\n+import androidx.test.espresso.Espresso\n+import androidx.test.espresso.action.ViewActions\n+import androidx.test.espresso.matcher.ViewMatchers\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.filters.LargeTest\n+import androidx.test.platform.app.InstrumentationRegistry\n+import androidx.test.rule.ActivityTestRule\n+import com.facebook.testing.screenshot.Screenshot\n+import org.edx.mobile.R\n+import org.junit.Assert.assertEquals\n+import org.junit.Before\n+import org.junit.Rule\n+import org.junit.Test\n+import org.junit.rules.TestName\n+import org.junit.runner.RunWith\n+\n+@RunWith(AndroidJUnit4::class)\n+@LargeTest\n+class AccountActivityTest {\n+\n+    @Rule\n+    @JvmField\n+    val rule: ActivityTestRule<AccountActivity> = ActivityTestRule(AccountActivity::class.java)\n+\n+    @Rule\n+    var testName = TestName()\n+\n+    private lateinit var activity: Activity\n+\n+    @Before\n+    fun before() {\n+        this.activity = rule.activity\n+    }\n+\n+    @Test\n+    fun useAppContext() {\n+        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n+        assertEquals(\"org.edx.mobile\", appContext.packageName)\n+        println(\"useAppContext : Test Ran\")\n+    }\n+\n+    @Test\n+    fun checkProfileClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.profile_btn)).perform(ViewActions.click())", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzI0MjkxOA==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417242918", "bodyText": "we have to check that pref should be clear or not, after perform the click action.", "author": "farhan-arshad-dev", "createdAt": "2020-04-29T11:24:57Z", "path": "OpenEdXMobile/src/androidTest/java/org/edx/mobile/view/AccountActivityTest.kt", "diffHunk": "@@ -0,0 +1,70 @@\n+package org.edx.mobile.view\n+\n+import android.app.Activity\n+import androidx.test.espresso.Espresso\n+import androidx.test.espresso.action.ViewActions\n+import androidx.test.espresso.matcher.ViewMatchers\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.filters.LargeTest\n+import androidx.test.platform.app.InstrumentationRegistry\n+import androidx.test.rule.ActivityTestRule\n+import com.facebook.testing.screenshot.Screenshot\n+import org.edx.mobile.R\n+import org.junit.Assert.assertEquals\n+import org.junit.Before\n+import org.junit.Rule\n+import org.junit.Test\n+import org.junit.rules.TestName\n+import org.junit.runner.RunWith\n+\n+@RunWith(AndroidJUnit4::class)\n+@LargeTest\n+class AccountActivityTest {\n+\n+    @Rule\n+    @JvmField\n+    val rule: ActivityTestRule<AccountActivity> = ActivityTestRule(AccountActivity::class.java)\n+\n+    @Rule\n+    var testName = TestName()\n+\n+    private lateinit var activity: Activity\n+\n+    @Before\n+    fun before() {\n+        this.activity = rule.activity\n+    }\n+\n+    @Test\n+    fun useAppContext() {\n+        val appContext = InstrumentationRegistry.getInstrumentation().targetContext\n+        assertEquals(\"org.edx.mobile\", appContext.packageName)\n+        println(\"useAppContext : Test Ran\")\n+    }\n+\n+    @Test\n+    fun checkProfileClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.profile_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkSettingClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.settings_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkFeedbackClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.feedback_btn)).perform(ViewActions.click())\n+    }\n+\n+    @Test\n+    fun checkLogoutClick() {\n+        Espresso.onView(ViewMatchers.withId(R.id.logout_btn)).perform(ViewActions.click())", "originalCommit": "0d7ee372a86fc571207baf42a8e387cba048346e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4d5b467aafb4fae0695792c1bbadc28223b5457f", "url": "https://github.com/edx/edx-app-android/commit/4d5b467aafb4fae0695792c1bbadc28223b5457f", "message": "Address the PR", "committedDate": "2020-04-30T11:09:04Z", "type": "forcePushed"}, {"oid": "da5a91b69d01a73af87bef907dda6ed64556f419", "url": "https://github.com/edx/edx-app-android/commit/da5a91b69d01a73af87bef907dda6ed64556f419", "message": "Address the PR", "committedDate": "2020-04-30T11:15:33Z", "type": "forcePushed"}, {"oid": "1b061abd2b44b8e3303ce2d572bbe77795d8caae", "url": "https://github.com/edx/edx-app-android/commit/1b061abd2b44b8e3303ce2d572bbe77795d8caae", "message": "Address the PR", "committedDate": "2020-04-30T11:17:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzkzMDMzMw==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417930333", "bodyText": "import needs to remove.", "author": "farhan-arshad-dev", "createdAt": "2020-04-30T11:04:43Z", "path": "OpenEdXMobile/src/test/java/org/edx/mobile/view/UiTest.java", "diffHunk": "@@ -8,6 +8,7 @@\n \n import org.edx.mobile.core.IEdxEnvironment;\n import org.edx.mobile.test.http.HttpBaseTestCase;\n+import org.edx.mobile.util.Config;", "originalCommit": "da130574b94c0d04e3f0122d84111b0a2af7787c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzk2MTE3OQ==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r417961179", "bodyText": "it should be defined just after the data members. in this case, just before the onCreateView method.", "author": "farhan-arshad-dev", "createdAt": "2020-04-30T12:07:52Z", "path": "OpenEdXMobile/src/main/java/org/edx/mobile/view/AccountFragment.kt", "diffHunk": "@@ -0,0 +1,86 @@\n+package org.edx.mobile.view\n+\n+import android.content.Intent\n+import android.os.Bundle\n+import android.text.TextUtils\n+import android.view.LayoutInflater\n+import android.view.View\n+import android.view.ViewGroup\n+import androidx.databinding.DataBindingUtil\n+import com.google.inject.Inject\n+import org.edx.mobile.BuildConfig\n+import org.edx.mobile.R\n+import org.edx.mobile.annotation.Nullable\n+import org.edx.mobile.base.BaseFragment\n+import org.edx.mobile.core.IEdxEnvironment\n+import org.edx.mobile.databinding.FragmentAccountBinding\n+import org.edx.mobile.deeplink.Screen\n+import org.edx.mobile.deeplink.ScreenDef\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.util.Config\n+\n+class AccountFragment : BaseFragment() {\n+\n+    companion object {", "originalCommit": "1b061abd2b44b8e3303ce2d572bbe77795d8caae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9fc95a4161ee9aab5ca8bcda3438ed76f680ab56", "url": "https://github.com/edx/edx-app-android/commit/9fc95a4161ee9aab5ca8bcda3438ed76f680ab56", "message": "Fix travis build issue", "committedDate": "2020-05-02T12:58:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTExMTA2Mw==", "url": "https://github.com/edx/edx-app-android/pull/1397#discussion_r419111063", "bodyText": "Need a new line as EOF.", "author": "farhan-arshad-dev", "createdAt": "2020-05-03T14:25:57Z", "path": "OpenEdXMobile/src/androidTest/java/org/edx/mobile/test/screenshot/test/AccountActivityScreenshotTests.kt", "diffHunk": "@@ -0,0 +1,47 @@\n+package org.edx.mobile.test.screenshot.test\n+\n+import android.view.View\n+import android.widget.TextView\n+import androidx.test.rule.ActivityTestRule\n+import com.facebook.testing.screenshot.Screenshot\n+import org.edx.mobile.R\n+import org.edx.mobile.base.MainApplication\n+import org.edx.mobile.module.prefs.LoginPrefs\n+import org.edx.mobile.test.feature.data.TestValues\n+import org.edx.mobile.view.AccountActivity\n+import org.junit.After\n+import org.junit.Before\n+import org.junit.Rule\n+import org.junit.Test\n+import org.junit.rules.TestName\n+\n+class AccountActivityScreenshotTests {\n+\n+    @get:Rule\n+    var mActivityRule = ActivityTestRule(AccountActivity::class.java, true, false)\n+    @get:Rule\n+    var testName = TestName()\n+    private var loginPrefs: LoginPrefs? = null\n+    private var activity: AccountActivity? = null\n+\n+    @Before\n+    fun before() {\n+        loginPrefs = LoginPrefs(MainApplication.application.baseContext)\n+        loginPrefs?.storeUserProfile(TestValues.DUMMY_PROFILE)\n+        activity = mActivityRule.launchActivity(null)\n+    }\n+\n+    @Test\n+    fun testScreenshot_recordAccountActivity() {\n+        activity?.runOnUiThread {\n+            (activity?.findViewById<View>(R.id.tv_version_no) as TextView).text = String.format(\"%s %s\",\n+                    activity?.getString(R.string.label_version), TestValues.DUMMY_APP_VERSION)\n+            Screenshot.snap(activity?.findViewById(android.R.id.content)).setName(javaClass.name + \"_\" + testName.methodName).record()\n+        }\n+    }\n+\n+    @After\n+    fun after() {\n+        loginPrefs?.clear()\n+    }\n+}", "originalCommit": "98c2a6ba56f2601df8764477a4460e5a944cfac8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bd0ac3f2bdc64b7ad1fb6e5311442d5197112de7", "url": "https://github.com/edx/edx-app-android/commit/bd0ac3f2bdc64b7ad1fb6e5311442d5197112de7", "message": "Address the PR", "committedDate": "2020-05-03T14:49:16Z", "type": "forcePushed"}, {"oid": "8574d20acb6e79cc8fd28300992d78d1f7875148", "url": "https://github.com/edx/edx-app-android/commit/8574d20acb6e79cc8fd28300992d78d1f7875148", "message": "Convert Account Screen code into MVVM pattern using kotlin + Unit Test and Instrument test", "committedDate": "2020-05-03T15:51:38Z", "type": "commit"}, {"oid": "8574d20acb6e79cc8fd28300992d78d1f7875148", "url": "https://github.com/edx/edx-app-android/commit/8574d20acb6e79cc8fd28300992d78d1f7875148", "message": "Convert Account Screen code into MVVM pattern using kotlin + Unit Test and Instrument test", "committedDate": "2020-05-03T15:51:38Z", "type": "forcePushed"}]}