{"pr_number": 3036, "pr_title": "support CSV import to schema \"person\"", "pr_createdAt": "2020-10-30T07:43:41Z", "pr_url": "https://github.com/DSpace/DSpace/pull/3036", "timeline": [{"oid": "f492415bcc368628b3ef3d216c2d8b4d112dc76a", "url": "https://github.com/DSpace/DSpace/commit/f492415bcc368628b3ef3d216c2d8b4d112dc76a", "message": "[Task 71780] added support for the person schema in the csv import and added a test for it", "committedDate": "2020-07-13T09:48:21Z", "type": "commit"}, {"oid": "f71a6ee5d5148b2e3299c7eeea666a6d0559b7fd", "url": "https://github.com/DSpace/DSpace/commit/f71a6ee5d5148b2e3299c7eeea666a6d0559b7fd", "message": "Merge remote-tracking branch 'community/main' into w2p-71780_support-csv-import-person-schema\n\n# Conflicts:\n#\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java", "committedDate": "2020-10-14T12:21:51Z", "type": "commit"}, {"oid": "86ddfc205c7f41abf36e7aa17934988a543331b6", "url": "https://github.com/DSpace/DSpace/commit/86ddfc205c7f41abf36e7aa17934988a543331b6", "message": "Merge remote-tracking branch 'dspace/main' into w2p-71780_support-csv-import-person-schema", "committedDate": "2020-10-26T10:37:45Z", "type": "commit"}, {"oid": "2cbbbf95b3115ae605a96639a65b2f080026a991", "url": "https://github.com/DSpace/DSpace/commit/2cbbbf95b3115ae605a96639a65b2f080026a991", "message": "Rewriting MetadataImportTest with builders", "committedDate": "2020-10-26T12:27:47Z", "type": "commit"}, {"oid": "6c8eb146a65f1aa27c52f563f3c6b5646617c89a", "url": "https://github.com/DSpace/DSpace/commit/6c8eb146a65f1aa27c52f563f3c6b5646617c89a", "message": "Merge remote-tracking branch 'dspace/main' into w2p-71780_support-csv-import-person-schema", "committedDate": "2020-11-12T10:07:40Z", "type": "commit"}, {"oid": "ca653ea0b55bb60bf3a5e688633f44f8a58825bc", "url": "https://github.com/DSpace/DSpace/commit/ca653ea0b55bb60bf3a5e688633f44f8a58825bc", "message": "Merge remote-tracking branch 'dspace/main' into w2p-71780_support-csv-import-person-schema\n\nConflicts:\n\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportTest.java", "committedDate": "2020-11-12T10:11:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTI2MDc1OQ==", "url": "https://github.com/DSpace/DSpace/pull/3036#discussion_r525260759", "bodyText": "@Raf-atmire : This test file does not appear to be used anywhere?  Am I misunderstanding how/where this configuration is used?  I'd expect it to appear in one of our IT classes.", "author": "tdonohue", "createdAt": "2020-11-17T15:39:08Z", "path": "dspace-api/src/test/resources/test-config.properties", "diffHunk": "@@ -13,3 +13,4 @@ test.folder = ./target/testing/\n test.bitstream = ./target/testing/dspace/assetstore/ConstitutionofIreland.pdf\n test.exportcsv = ./target/testing/dspace/assetstore/test.csv\n test.importcsv = ./target/testing/dspace/assetstore/testImport.csv\n+test.importpersoncsv = ./target/testing/dspace/assetstore/testImportPerson.csv", "originalCommit": "ca653ea0b55bb60bf3a5e688633f44f8a58825bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "86d39a92f74f1e4d43008d139ae7940a05de46a1", "url": "https://github.com/DSpace/DSpace/commit/86d39a92f74f1e4d43008d139ae7940a05de46a1", "message": "Re-added personMetadataImportTest in MetadataImportIT and deleted unused test params", "committedDate": "2020-11-18T12:54:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjQwMzIxMg==", "url": "https://github.com/DSpace/DSpace/pull/3036#discussion_r526403212", "bodyText": "Tiny thing I just realized.  You likely can simplify this line to be itemService.delete(context, importedItem);  I don't think you should need the itemService.find() here...unless I'm missing something.\nIn any case, this is extremely minor. The code overall is good.", "author": "tdonohue", "createdAt": "2020-11-18T20:34:58Z", "path": "dspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java", "diffHunk": "@@ -152,6 +152,22 @@ public void relationshipMetadataImporAlreadyExistingItemTest() throws Exception\n \n     }\n \n+    @Test\n+    public void personMetadataImportTest() throws Exception {\n+\n+        String[] csv = {\"id,collection,dc.title,person.birthDate\",\n+            \"+,\" + collection.getHandle() + \",\\\"Test Import 2\\\",\" + \"2000\"};\n+        performImportScript(csv);\n+        Item importedItem = findItemByName(\"Test Import 2\");\n+        assertTrue(\n+            StringUtils.equals(\n+                itemService.getMetadata(importedItem, \"person\", \"birthDate\", null, Item.ANY)\n+                           .get(0).getValue(), \"2000\"));\n+        context.turnOffAuthorisationSystem();\n+        itemService.delete(context, itemService.find(context, importedItem.getID()));", "originalCommit": "86d39a92f74f1e4d43008d139ae7940a05de46a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c442545fc136ae438f64e9af37fbe912257aaa0e", "url": "https://github.com/DSpace/DSpace/commit/c442545fc136ae438f64e9af37fbe912257aaa0e", "message": "Merge remote-tracking branch 'dspace/main' into w2p-71780_support-csv-import-person-schema\n\nConflicts:\n\tdspace-api/src/test/java/org/dspace/app/bulkedit/MetadataImportIT.java", "committedDate": "2020-11-19T08:44:19Z", "type": "commit"}, {"oid": "03c21de0eb064be63502699c0265911a7e693200", "url": "https://github.com/DSpace/DSpace/commit/03c21de0eb064be63502699c0265911a7e693200", "message": "simplified itemservice.delete in MetadataImportIT", "committedDate": "2020-11-19T08:44:45Z", "type": "commit"}]}