{"pr_number": 286, "pr_title": "Set up automated releases, improve helper scripts", "pr_createdAt": "2020-05-04T21:09:52Z", "pr_url": "https://github.com/linkedin/rest.li/pull/286", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczNjEzNA==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r419736134", "bodyText": "28.3.4 is already in master, please rebase master", "author": "nickibi", "createdAt": "2020-05-04T21:21:17Z", "path": "gradle.properties", "diffHunk": "@@ -1,4 +1,4 @@\n-version=28.3.3\n+version=28.3.4", "originalCommit": "9755a86732eeefc15f65d8b78d0b7a4fd26a75ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTc0NzEzNA==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r419747134", "bodyText": "Thanks for letting me know", "author": "evanw555", "createdAt": "2020-05-04T21:43:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTczNjEzNA=="}], "type": "inlineReview"}, {"oid": "fa2ee4d87e350e122d25e24921945aff50ef4ea3", "url": "https://github.com/linkedin/rest.li/commit/fa2ee4d87e350e122d25e24921945aff50ef4ea3", "message": "Set up automated releases, improve helper scripts\n\nSets up automatic Bintray publications in Travis whenever a tag is\npushed. Improves/moves the local-release and release scripts. Also bumps\nthe Bintray Gradle plugin, and bumps the project version to 28.3.5.", "committedDate": "2020-05-04T21:42:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkwNzM3Mw==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r419907373", "bodyText": "can you add super_secret, plain text credentials to our internal wiki? for hotfix releases and bookkeeping\nalso, are these required here? can we not add these in repository settings?", "author": "aman1309", "createdAt": "2020-05-05T07:15:53Z", "path": ".travis.yml", "diffHunk": "@@ -1,20 +1,40 @@\n language: java\n-\n-# Skip testing for now, since this is experimental\n-script: ./gradlew build -x test\n-\n jdk:\n   - oraclejdk8\n \n+# Anything after trusty doesn't have Java 8\n dist: trusty\n \n # Below skips the installation step completely (https://docs.travis-ci.com/user/customizing-the-build/#Skipping-the-Installation-Step)\n-# If we don't skip it, Travis runs unnecessary Gradle tasks like './gradlew assemble'\n-install:\n-  - true\n+# If we don't skip it Travis runs unnecessary Gradle tasks like './gradlew assemble'\n+install: true\n \n-# Only build on master and release tags\n+# Build and test commits to master, PRs to master, and release tags\n+# Skip testing for now, since this is experimental\n+script: ./gradlew build -x test\n branches:\n   only:\n-  - master\n-  - /^v\\d+\\.\\d+\\.\\d+$/\n+    - master\n+    - /^v\\d+\\.\\d+\\.\\d+$/\n+\n+# Set environment variables (includes Bintray credentials)\n+env:\n+  global:\n+    - secure: 'DJbT0+O3W57jxaXmpVvuY4AH5VDqAgvmAwtw9GLK7fHhntmKMh8o43xWU7Tmv5LUPDU/UChXzte5fRPSe75KvkS72Rie02M/MSizO9B9fWGQ5trzWqCqGO4mI38v9e2PfInOWa7R/FA3z1NYas11CulkTXQI+a10po7nzIMrEnM='\n+    - secure: 'b4Q5mdqAQJcyuDyvxZK6MiImxho18HteKMDT0UANpIyrFXEfzWKIlB110unofXSXKiI0bAg+ob/PLRULkB/wuj69WasXRiH83+Ao2WpNbWyMoqPwiY/DL8MN0M1RhHbuSMso/O6C34eRImhj5NDcN+nkI+py8pHAq9FNrmQ92O4='", "originalCommit": "69ed5a7408aedad77b10c4d612aaff53890f4ece", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxNDEwMA==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420314100", "bodyText": "I won't add these as plaintext, because these are my personal credentials. I'll add instructions for how to set them yourself or how to replace them.\nAs for configuring them via repo settings, I'd have to do it in Travis settings rather than GitHub settings (I don't think they can be accessed here). However, I don't have Travis admin permissions for LinkedIn. I see other repos setting it like this, so it seems to be a common practice.", "author": "evanw555", "createdAt": "2020-05-05T18:19:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkwNzM3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMzNTMwMQ==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420335301", "bodyText": "is it possible possible to create the account using our team email id? or can we have 1 common account?", "author": "aman1309", "createdAt": "2020-05-05T18:55:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkwNzM3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQwODQ0Ng==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420408446", "bodyText": "No, I asked Tools and the only way to authenticate as of now is to use personal credentials.", "author": "evanw555", "createdAt": "2020-05-05T21:10:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkwNzM3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI2NDk2NQ==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420264965", "bodyText": "What's the plan to delete this one?", "author": "nickibi", "createdAt": "2020-05-05T17:00:25Z", "path": "local-release", "diffHunk": "@@ -1,25 +1,5 @@\n #!/bin/sh\n-# The purpose of this script is to publish artifacts to ~/local-repo\n-\n-if [ ! -d \"$HOME\" ]; then\n-  echo 'Cannot perform local release, $HOME is not set to a valid directory'\n-  exit 1\n-fi\n-\n-LOCAL_REPO=\"${HOME}/local-repo\"\n-\n-if [ ! -d $LOCAL_REPO ]; then\n-  mkdir $LOCAL_REPO\n-fi\n-\n-VERSION=$(awk 'BEGIN { FS = \"=\" }; $1 == \"version\" { print $2 }' gradle.properties | awk '{ print $1 }')\n-echo \"Publishing pegasus $VERSION to ${LOCAL_REPO}...\"\n-\n-./gradlew -Dmaven.repo.local=$LOCAL_REPO publishReleasePublicationToMavenLocal\n-\n-if [ $? -eq 0 ]; then\n-  echo \"Published pegasus $VERSION to $LOCAL_REPO\"\n-else\n-  exit 1\n-fi\n \n+# TODO: delete this eventually\n+echo 'This script has been moved to ./scripts/local-release'", "originalCommit": "69ed5a7408aedad77b10c4d612aaff53890f4ece", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxMjY0MQ==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420312641", "bodyText": "Wait until we're comfortable with using the new scripts, then delete these. Probably in a month or two.", "author": "evanw555", "createdAt": "2020-05-05T18:17:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI2NDk2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxMzM3Mg==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420313372", "bodyText": "Good to know that.", "author": "nickibi", "createdAt": "2020-05-05T18:18:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDI2NDk2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxNDk5OA==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420314998", "bodyText": "The script is still doing only build (-x test), so this comment should be updated?", "author": "karthikbalasub", "createdAt": "2020-05-05T18:21:17Z", "path": ".travis.yml", "diffHunk": "@@ -1,20 +1,40 @@\n language: java\n-\n-# Skip testing for now, since this is experimental\n-script: ./gradlew build -x test\n-\n jdk:\n   - oraclejdk8\n \n+# Anything after trusty doesn't have Java 8\n dist: trusty\n \n # Below skips the installation step completely (https://docs.travis-ci.com/user/customizing-the-build/#Skipping-the-Installation-Step)\n-# If we don't skip it, Travis runs unnecessary Gradle tasks like './gradlew assemble'\n-install:\n-  - true\n+# If we don't skip it Travis runs unnecessary Gradle tasks like './gradlew assemble'\n+install: true\n \n-# Only build on master and release tags\n+# Build and test commits to master, PRs to master, and release tags", "originalCommit": "69ed5a7408aedad77b10c4d612aaff53890f4ece", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMyMDcxNQ==", "url": "https://github.com/linkedin/rest.li/pull/286#discussion_r420320715", "bodyText": "Oops you're right. I blindly copied this from parseq. I'll update it", "author": "evanw555", "createdAt": "2020-05-05T18:30:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDMxNDk5OA=="}], "type": "inlineReview"}, {"oid": "43015213a4f043515fb22697796dbf4e28b06568", "url": "https://github.com/linkedin/rest.li/commit/43015213a4f043515fb22697796dbf4e28b06568", "message": "Set up automated releases, improve helper scripts\n\nSets up automatic Bintray publications in Travis whenever a tag is\npushed. Improves/moves the local-release and release scripts. Also bumps\nthe Bintray Gradle plugin, and bumps the project version to 28.3.6.", "committedDate": "2020-05-07T02:19:21Z", "type": "commit"}, {"oid": "43015213a4f043515fb22697796dbf4e28b06568", "url": "https://github.com/linkedin/rest.li/commit/43015213a4f043515fb22697796dbf4e28b06568", "message": "Set up automated releases, improve helper scripts\n\nSets up automatic Bintray publications in Travis whenever a tag is\npushed. Improves/moves the local-release and release scripts. Also bumps\nthe Bintray Gradle plugin, and bumps the project version to 28.3.6.", "committedDate": "2020-05-07T02:19:21Z", "type": "forcePushed"}]}