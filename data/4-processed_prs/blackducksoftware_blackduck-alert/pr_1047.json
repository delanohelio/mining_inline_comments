{"pr_number": 1047, "pr_title": "Creaing descriptor and UI configs for Azure Boards", "pr_createdAt": "2020-07-06T16:05:38Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047", "timeline": [{"oid": "236a3e12b2be86d61191a28d882a5f54f8f748de", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/236a3e12b2be86d61191a28d882a5f54f8f748de", "message": "feat: Create descriptors and UI configs for Azure Boards", "committedDate": "2020-07-06T15:41:13Z", "type": "commit"}, {"oid": "b0de7ebebee907040db59aa4feff2ee7cd76d59a", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b0de7ebebee907040db59aa4feff2ee7cd76d59a", "message": "Merge remote-tracking branch 'origin/master' into mc_azureboards_descriptor", "committedDate": "2020-07-06T15:47:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM1ODUzNA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450358534", "bodyText": "There isn't a custom endpoint registered in this PR to handle the oauth connection?  Is that intended for a different PR.  Right now this field will not do anything on the server side.  You could at the least register the custom endpoint for this field and log a message to ensure that the server recieves the request when this button is pushed.", "author": "psantos1113", "createdAt": "2020-07-06T16:58:55Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.channel.azure.boards.descriptor;\n+\n+import java.util.List;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.PasswordConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.TextInputConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.URLInputConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.endpoint.EndpointButtonField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.validators.EncryptionValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+\n+@Component\n+public class AzureBoardsGlobalUIConfig extends UIConfig {\n+    public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n+    public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n+    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n+    public static final String LABEL_PRIVATE_KEY = \"Private Key\";\n+    public static final String LABEL_OAUTH = \"Initialize OAuth\";\n+    public static final String LABEL_ACCESS_TOKEN = \"Access Token\";\n+\n+    public static final String DESCRIPTION_AZURE_BOARDS_URL = \"FILL OUT THIS DESCRIPTION\";\n+    public static final String DESCRIPTION_ORGANIZATION_NAME = \"FILL OUT THIS DESCRIPTION\";\n+    public static final String DESCRIPTION_CONSUMER_KEY = \"FILL OUT THIS DESCRIPTION\";\n+    public static final String DESCRIPTION_PRIVATE_KEY = \"FILL OUT THIS DESCRIPTION\";\n+    public static final String DESCRIPTION_OAUTH = \"FILL OUT THIS DESCRIPTION\";\n+    public static final String DESCRIPTION_ACCESS_TOKEN = \"FILL OUT THIS DESCRIPTION\";\n+\n+    public static final String BUTTON_LABEL_OAUTH = \"FILL OUT THIS BUTTON LABEL\";\n+\n+    private final EncryptionValidator encryptionValidator;\n+\n+    @Autowired\n+    public AzureBoardsGlobalUIConfig(EncryptionValidator encryptionValidator) {\n+        super(AzureBoardsDescriptor.AZURE_BOARDS_LABEL, AzureBoardsDescriptor.AZURE_BOARDS_DESCRIPTION, AzureBoardsDescriptor.AZURE_BOARDS_URL);\n+        this.encryptionValidator = encryptionValidator;\n+    }\n+\n+    @Override\n+    public List<ConfigField> createFields() {\n+        ConfigField azureBoardsUrlField = new URLInputConfigField(AzureBoardsDescriptor.KEY_AZURE_BOARDS_URL, LABEL_AZURE_BOARDS_URL, DESCRIPTION_AZURE_BOARDS_URL).applyRequired(true);\n+        ConfigField organizationName = new TextInputConfigField(AzureBoardsDescriptor.KEY_ORGANIZATION_NAME, LABEL_ORGANIZATION_NAME, DESCRIPTION_ORGANIZATION_NAME).applyRequired(true);\n+        ConfigField consumerKey = new PasswordConfigField(AzureBoardsDescriptor.KEY_CONSUMER_KEY, LABEL_CONSUMER_KEY, DESCRIPTION_CONSUMER_KEY, encryptionValidator).applyRequired(true);\n+        ConfigField privateKey = new PasswordConfigField(AzureBoardsDescriptor.KEY_PRIVATE_KEY, LABEL_PRIVATE_KEY, DESCRIPTION_PRIVATE_KEY, encryptionValidator).applyRequired(true);\n+        ConfigField configureOAuth = new EndpointButtonField(AzureBoardsDescriptor.KEY_OAUTH, LABEL_OAUTH, DESCRIPTION_OAUTH, BUTTON_LABEL_OAUTH);", "originalCommit": "b0de7ebebee907040db59aa4feff2ee7cd76d59a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM3ODM1Nw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450378357", "bodyText": "I agree with Paulo, can you setup a custom endpoint so when the button is pushed it logs a message for now, that way we can easily add the implementation later.", "author": "jamesrichard91", "createdAt": "2020-07-06T17:36:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM1ODUzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM2MjYyMA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450362620", "bodyText": "We might want to use some variables for prefixes. This method of writing the entire KEY name is prone to error.", "author": "bamandel", "createdAt": "2020-07-06T17:06:26Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsDescriptor.java", "diffHunk": "@@ -0,0 +1,56 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.channel.azure.boards.descriptor;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.channel.azure.boards.AzureBoardsChannelKey;\n+import com.synopsys.integration.alert.common.descriptor.ChannelDescriptor;\n+\n+@Component\n+public class AzureBoardsDescriptor extends ChannelDescriptor {\n+    public static final String KEY_AZURE_PROJECT = \"channel.azure.boards.project\";\n+    public static final String KEY_AZURE_BOARD = \"channel.azure.boards.board\";\n+    public static final String KEY_WORK_ITEM_TYPE = \"channel.azure.boards.work.item.type\";\n+    public static final String KEY_WORK_ITEM_COMPLETED_STATE = \"channel.azure.boards.work.item.completed.state\";\n+    public static final String KEY_WORK_ITEM_REOPEN_STATE = \"channel.azure.boards.work.item.reopen.state\";\n+\n+    public static final String KEY_AZURE_BOARDS_URL = \"azure.boards.url\";\n+    public static final String KEY_ORGANIZATION_NAME = \"azure.boards.organization.name\";\n+    public static final String KEY_CONSUMER_KEY = \"azure.boards.consumer.key\";\n+    public static final String KEY_PRIVATE_KEY = \"azure.boards.private.key\";\n+    public static final String KEY_OAUTH = \"azure.boards.oauth\";\n+    public static final String KEY_ACCESS_TOKEN = \"azure.boards.access.token\";\n+\n+    public static final String AZURE_BOARDS_LABEL = \"Azure Boards\";\n+    public static final String AZURE_BOARDS_URL = \"azure_boards\";\n+    public static final String AZURE_BOARDS_DESCRIPTION = \"Configure the Azure Boards instance that Alert will send issue updates to.\";", "originalCommit": "b0de7ebebee907040db59aa4feff2ee7cd76d59a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM3Nzk1MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450377950", "bodyText": "Please create static strings to use as the prefixes for the keys. That way each key only needs to add its unique part", "author": "jamesrichard91", "createdAt": "2020-07-06T17:36:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM2MjYyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDM2Mzk0NQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450363945", "bodyText": "At least a FIXME should be added here just so we are aware this isn't finished yet.", "author": "bamandel", "createdAt": "2020-07-06T17:08:59Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsGlobalUIConfig.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.channel.azure.boards.descriptor;\n+\n+import java.util.List;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.common.descriptor.config.field.ConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.PasswordConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.TextInputConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.URLInputConfigField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.endpoint.EndpointButtonField;\n+import com.synopsys.integration.alert.common.descriptor.config.field.validators.EncryptionValidator;\n+import com.synopsys.integration.alert.common.descriptor.config.ui.UIConfig;\n+\n+@Component\n+public class AzureBoardsGlobalUIConfig extends UIConfig {\n+    public static final String LABEL_AZURE_BOARDS_URL = \"Url\";\n+    public static final String LABEL_ORGANIZATION_NAME = \"Organization Name\";\n+    public static final String LABEL_CONSUMER_KEY = \"Consumer Key\";\n+    public static final String LABEL_PRIVATE_KEY = \"Private Key\";\n+    public static final String LABEL_OAUTH = \"Initialize OAuth\";\n+    public static final String LABEL_ACCESS_TOKEN = \"Access Token\";\n+\n+    public static final String DESCRIPTION_AZURE_BOARDS_URL = \"FILL OUT THIS DESCRIPTION\";", "originalCommit": "b0de7ebebee907040db59aa4feff2ee7cd76d59a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d7364fdc3ff7a8558d228336e9ed6d3e85c3bca6", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d7364fdc3ff7a8558d228336e9ed6d3e85c3bca6", "message": "feat: Add new template for custom endpoint for azure boards", "committedDate": "2020-07-06T20:03:50Z", "type": "commit"}, {"oid": "ce5ef888d2c46d98ada758f25ea2a2a9d8bf15c3", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/ce5ef888d2c46d98ada758f25ea2a2a9d8bf15c3", "message": "refactor: Created string prefix for azure boards descriptors", "committedDate": "2020-07-06T20:04:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDgyMDUwMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450820501", "bodyText": "Do we have a constant we can use for the \".channel\" prefix?", "author": "gkillough", "createdAt": "2020-07-07T12:18:00Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsDescriptor.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.channel.azure.boards.descriptor;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.channel.azure.boards.AzureBoardsChannelKey;\n+import com.synopsys.integration.alert.common.descriptor.ChannelDescriptor;\n+\n+@Component\n+public class AzureBoardsDescriptor extends ChannelDescriptor {\n+    public static final String AZURE_BOARDS_PREFIX = \"azure.boards\";\n+\n+    public static final String KEY_AZURE_PROJECT = \"channel.\" + AZURE_BOARDS_PREFIX + \".project\";\n+    public static final String KEY_AZURE_BOARD = \"channel.\" + AZURE_BOARDS_PREFIX + \".board\";\n+    public static final String KEY_WORK_ITEM_TYPE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.type\";\n+    public static final String KEY_WORK_ITEM_COMPLETED_STATE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.completed.state\";\n+    public static final String KEY_WORK_ITEM_REOPEN_STATE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.reopen.state\";", "originalCommit": "ce5ef888d2c46d98ada758f25ea2a2a9d8bf15c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDgyMTQ1OQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1047#discussion_r450821459", "bodyText": "We may only end up needing the access token because it is OAuth 2.0. Do you mind adding a TODO above line 43 to revisit these fields?", "author": "gkillough", "createdAt": "2020-07-07T12:19:57Z", "path": "src/main/java/com/synopsys/integration/alert/channel/azure/boards/descriptor/AzureBoardsDescriptor.java", "diffHunk": "@@ -0,0 +1,58 @@\n+/**\n+ * blackduck-alert\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.alert.channel.azure.boards.descriptor;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import com.synopsys.integration.alert.channel.azure.boards.AzureBoardsChannelKey;\n+import com.synopsys.integration.alert.common.descriptor.ChannelDescriptor;\n+\n+@Component\n+public class AzureBoardsDescriptor extends ChannelDescriptor {\n+    public static final String AZURE_BOARDS_PREFIX = \"azure.boards\";\n+\n+    public static final String KEY_AZURE_PROJECT = \"channel.\" + AZURE_BOARDS_PREFIX + \".project\";\n+    public static final String KEY_AZURE_BOARD = \"channel.\" + AZURE_BOARDS_PREFIX + \".board\";\n+    public static final String KEY_WORK_ITEM_TYPE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.type\";\n+    public static final String KEY_WORK_ITEM_COMPLETED_STATE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.completed.state\";\n+    public static final String KEY_WORK_ITEM_REOPEN_STATE = \"channel.\" + AZURE_BOARDS_PREFIX + \".work.item.reopen.state\";\n+\n+    public static final String KEY_AZURE_BOARDS_URL = AZURE_BOARDS_PREFIX + \".url\";\n+    public static final String KEY_ORGANIZATION_NAME = AZURE_BOARDS_PREFIX + \".organization.name\";\n+    public static final String KEY_CONSUMER_KEY = AZURE_BOARDS_PREFIX + \".consumer.key\";\n+    public static final String KEY_PRIVATE_KEY = AZURE_BOARDS_PREFIX + \".private.key\";\n+    public static final String KEY_OAUTH = AZURE_BOARDS_PREFIX + \".oauth\";\n+    public static final String KEY_ACCESS_TOKEN = AZURE_BOARDS_PREFIX + \".access.token\";", "originalCommit": "ce5ef888d2c46d98ada758f25ea2a2a9d8bf15c3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aa5748890815e71e252f46b89af08feaf044efb8", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/aa5748890815e71e252f46b89af08feaf044efb8", "message": "refactor: Adding a new prefix for channel ids in AzureBoardsDescriptor", "committedDate": "2020-07-07T13:47:10Z", "type": "commit"}, {"oid": "dfafc2f769626e83df18fda2ef9f8e2fc798befc", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/dfafc2f769626e83df18fda2ef9f8e2fc798befc", "message": "refactor: Moving period for azure boards descriptor to prefix for improved readability", "committedDate": "2020-07-07T17:33:30Z", "type": "commit"}]}