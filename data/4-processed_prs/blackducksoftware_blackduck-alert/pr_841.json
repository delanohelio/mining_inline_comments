{"pr_number": 841, "pr_title": "Reformat old database classes and reorganize liquibase files", "pr_createdAt": "2020-02-04T18:17:08Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/841", "timeline": [{"oid": "beefb2ebac7a9ac8c61e7fb670b894eb3495db28", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/beefb2ebac7a9ac8c61e7fb670b894eb3495db28", "message": "Feat(Database): Remove old liquibase files and move migration scripts to database sub-project", "committedDate": "2020-02-04T14:10:59Z", "type": "commit"}, {"oid": "12f6bdde4129db54d74d66aa53768d5224c57dc3", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/12f6bdde4129db54d74d66aa53768d5224c57dc3", "message": "Fix(Java): Remove final from method parameters in alert-database", "committedDate": "2020-02-04T14:35:28Z", "type": "commit"}, {"oid": "a2006fd62612a8c7d7f253d104762b75ccce9802", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a2006fd62612a8c7d7f253d104762b75ccce9802", "message": "Fix(Liquibase): Keep old changelogs for the sake of upgrades, but move new changelogs to alert-database", "committedDate": "2020-02-04T18:15:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDgzOTkyMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/841#discussion_r374839921", "bodyText": "This was unused.", "author": "gkillough", "createdAt": "2020-02-04T18:18:28Z", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/configuration/repository/RegisteredDescriptorRepository.java", "diffHunk": "@@ -35,16 +34,10 @@\n \n @Component\n public interface RegisteredDescriptorRepository extends JpaRepository<RegisteredDescriptorEntity, Long> {\n-    Optional<RegisteredDescriptorEntity> findFirstByName(final String descriptorName);\n+    Optional<RegisteredDescriptorEntity> findFirstByName(String descriptorName);\n \n     List<RegisteredDescriptorEntity> findByTypeId(Long descriptorTypeId);\n \n-    @Query(value = \"SELECT entity FROM RegisteredDescriptorEntity entity \"\n-                       + \"INNER JOIN entity.descriptorConfigEntities config ON entity.id = config.descriptorId \"\n-                       + \"INNER JOIN config.configGroupEntity configGroup ON config.id = configGroup.configId \"\n-                       + \"WHERE configGroup.jobId = ?1\")\n-    List<RegisteredDescriptorEntity> findByJobId(final UUID jobId);\n-", "originalCommit": "a2006fd62612a8c7d7f253d104762b75ccce9802", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MDM1Mg==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/841#discussion_r374840352", "bodyText": "This was unused.", "author": "gkillough", "createdAt": "2020-02-04T18:19:15Z", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/user/RoleRepository.java", "diffHunk": "@@ -34,9 +34,6 @@\n \n     boolean existsRoleEntityByRoleName(String roleName);\n \n-    @Query(\"SELECT entity.roleName FROM RoleEntity entity WHERE entity.id IN (?1)\")\n-    List<String> getRoleNames(List<Long> roleIds);\n-", "originalCommit": "a2006fd62612a8c7d7f253d104762b75ccce9802", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDg0MDY0NQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/841#discussion_r374840645", "bodyText": "Most of the actual changes are here.", "author": "gkillough", "createdAt": "2020-02-04T18:19:52Z", "path": "build.gradle", "diffHunk": "@@ -120,9 +120,9 @@ distributions {\n             }\n             from('src/main/resources/db/changelog-master.xml') { into 'upgradeResources' }\n             from('src/main/resources/db/changelog/') { into 'upgradeResources/changelog/' }\n-            from('src/main/resources/db/release-locks-changelog.xml') { into 'upgradeResources' }\n-            from('src/main/resources/db/export_h2_tables.sql') { into 'upgradeResources' }\n-            from('src/main/resources/db/import_postgres_tables.sql') { into 'upgradeResources' }", "originalCommit": "a2006fd62612a8c7d7f253d104762b75ccce9802", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}