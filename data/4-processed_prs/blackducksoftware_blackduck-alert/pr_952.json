{"pr_number": 952, "pr_title": "deployment fixes", "pr_createdAt": "2020-04-14T20:31:37Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/952", "timeline": [{"oid": "4036c30e78e6f65ea335b98ad0295752e82be22c", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4036c30e78e6f65ea335b98ad0295752e82be22c", "message": "feat: Remove the user to run Alert in deployment files.", "committedDate": "2020-04-13T13:09:42Z", "type": "commit"}, {"oid": "4930c25412fdab3096b0eb7e6d52fd3e1a13dc2e", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/4930c25412fdab3096b0eb7e6d52fd3e1a13dc2e", "message": "build: Update the version for testing.", "committedDate": "2020-04-13T13:33:53Z", "type": "commit"}, {"oid": "8e5a1867016d91f3dc79aa287195bad427545c23", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8e5a1867016d91f3dc79aa287195bad427545c23", "message": "feat: Create datbase directory in database container.", "committedDate": "2020-04-13T14:17:17Z", "type": "commit"}, {"oid": "e453df79b6916f818a31c5c74680f8d57d31d4f1", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/e453df79b6916f818a31c5c74680f8d57d31d4f1", "message": "refactor: Update the volume created by the container.", "committedDate": "2020-04-13T17:40:21Z", "type": "commit"}, {"oid": "d10036857be65737b38a822bdb2e4b4be1d28bfb", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d10036857be65737b38a822bdb2e4b4be1d28bfb", "message": "refactor: Change permissions on volume directory.", "committedDate": "2020-04-13T18:21:50Z", "type": "commit"}, {"oid": "31ee006fe4fca82c2cb932361611b10b90ad1353", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/31ee006fe4fca82c2cb932361611b10b90ad1353", "message": "refactor: Add a separate volume for the postgres db.", "committedDate": "2020-04-13T19:39:25Z", "type": "commit"}, {"oid": "f65f2eaa64e696661d5fd654d363b527c8311640", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/f65f2eaa64e696661d5fd654d363b527c8311640", "message": "feat: Fix kubernetes deployment to include alert DB.", "committedDate": "2020-04-14T20:10:12Z", "type": "commit"}, {"oid": "d5dc01a65a90167f7d802d164d86e845c6334c60", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d5dc01a65a90167f7d802d164d86e845c6334c60", "message": "Merge remote-tracking branch 'origin/master' into ps_deployment_fixes", "committedDate": "2020-04-14T20:30:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc5ODk4Mw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#discussion_r408798983", "bodyText": "Let's make sure we upgrade our gradle dependencies as well.", "author": "gkillough", "createdAt": "2020-04-15T12:21:17Z", "path": "alert-database/Dockerfile", "diffHunk": "@@ -1,4 +1,4 @@\n-FROM postgres:11.6-alpine\n+FROM postgres:11.7-alpine", "originalCommit": "d5dc01a65a90167f7d802d164d86e845c6334c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwMDgwMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#discussion_r408800801", "bodyText": "Should we document and/or parameterize these since they are shared?", "author": "gkillough", "createdAt": "2020-04-15T12:24:28Z", "path": "deployment/kubernetes/hub/3-alertdb.yml", "diffHunk": "@@ -0,0 +1,68 @@\n+kind: List\n+apiVersion: v1\n+items:\n+  - apiVersion: apps/v1\n+    kind: Deployment\n+    metadata:\n+      name: alertdb\n+    spec:\n+      selector:\n+        matchLabels:\n+          app: alertdb\n+          tier: alertdb\n+      replicas: 1\n+      template:\n+        metadata:\n+          name: alertdb\n+          labels:\n+            app: alertdb\n+            tier: alertdb\n+        spec:\n+          volumes:\n+            # NOTE: replace the emptyDir volume with a persistent volume or all the data will be lost when the pod is destroyed.\n+            - emptyDir: {}", "originalCommit": "d5dc01a65a90167f7d802d164d86e845c6334c60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODkwMjY4MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/952#discussion_r408902680", "bodyText": "I think once the helm charts are finalized we should document that approach.  I will add to the comment here.", "author": "psantos1113", "createdAt": "2020-04-15T14:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODgwMDgwMQ=="}], "type": "inlineReview"}, {"oid": "40eef223d91c2e0ba518f9a977148e19ddf3fd7a", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/40eef223d91c2e0ba518f9a977148e19ddf3fd7a", "message": "refactor: Implement PR changes.", "committedDate": "2020-04-15T15:26:34Z", "type": "commit"}]}