{"pr_number": 1061, "pr_title": "Method called in a for loop so flush the repository at the end.", "pr_createdAt": "2020-07-09T20:04:44Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1061", "timeline": [{"oid": "99ad5901cf7305724f825f61229525463bb3b254", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/99ad5901cf7305724f825f61229525463bb3b254", "message": "fix: Method called in a for loop so flush the repository at the end.", "committedDate": "2020-07-09T19:34:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ2MDUzOQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1061#discussion_r452460539", "bodyText": "What happens to the transaction when flush is called? (Will it still roll back correctly?)", "author": "gkillough", "createdAt": "2020-07-09T20:06:52Z", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultProviderDataAccessor.java", "diffHunk": "@@ -177,6 +177,7 @@ private void mapUsersToProjectByEmail(Long providerConfigId, String projectHref,\n         logger.debug(\"Removing {} user relations from project {} \", userRelationsToRemove.size(), project.getName());\n         providerUserProjectRelationRepository.saveAll(userRelationsToAdd);\n         providerUserProjectRelationRepository.deleteAll(userRelationsToRemove);\n+        providerUserProjectRelationRepository.flush();", "originalCommit": "99ad5901cf7305724f825f61229525463bb3b254", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgwMzAxOA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1061#discussion_r452803018", "bodyText": "The transaction still protects us.\nhttps://stackoverflow.com/questions/9908082/does-a-hibernate-transaction-rollback-delete-session-flushed-entities", "author": "psantos1113", "createdAt": "2020-07-10T12:08:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ2MDUzOQ=="}], "type": "inlineReview"}]}