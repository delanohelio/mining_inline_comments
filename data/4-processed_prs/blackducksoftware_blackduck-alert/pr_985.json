{"pr_number": 985, "pr_title": " helm docs", "pr_createdAt": "2020-05-21T18:57:02Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/985", "timeline": [{"oid": "0bcef9d45aea9c3d724a61244993c3a9ddcdb3f0", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0bcef9d45aea9c3d724a61244993c3a9ddcdb3f0", "message": "docs: Update the helm documentation.", "committedDate": "2020-05-21T18:52:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1NDM5MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/985#discussion_r429254390", "bodyText": "I believe this needs to be https://<EXTERNAL_NODE_IP>:<EXTERNAL_PORT>/alert. Users can get that information by doing a kubectl get nodes -o wide or by setting up an ingress.", "author": "mphammer", "createdAt": "2020-05-22T13:44:39Z", "path": "deployment/helm/synopsys-alert/README.md", "diffHunk": "@@ -29,36 +43,63 @@ $ helm install . --name <name> --namespace <namespace>\n \n ## Installing the Chart -- Helm 3\n \n-#### Create the Namespace and TLS Secrets\n+### Create the Namespace and TLS Secrets\n ```console\n $ kubectl create ns <namespace>\n ```\n-#### Configure your Black Duck Instance\n+### Configure your Alert Instance\n Modify the values.yaml file or pass in values to `helm install` with --set.  \n+Please see the [Configuration](#configuration) section for more details.\n \n-#### Install the Black Duck Chart\n-```\n+### Install the Alert Chart\n+```console\n $ helm install <name> . --namespace <namespace>\n ```\n \n-## Quick Start with Helm 3\n+### Quick Start with Helm 3\n #### Step 1\n Navigate to the alert-helm chart repository in your terminal\n-```\n+```console\n $ cd <path>/alert-helm\n ```\n \n #### Step 2\n-```\n+```console\n $ kubectl create ns myalert\n ```\n \n #### Step 3\n Deploy Alert\n-```\n+```console\n $ helm install myalert . --namespace myalert\n ```\n \n+## Finding Alert External Port\n+ Once Alert has been deployed if the `exposeui` parameter is true, then Alert will be available via an exposed port.\n+ To determine the port to access the Alert UI execute the following command:\n+ ```console \n+ $ kubectl -n <NAMESPACE> get services\n+ ```\n+ From the output find the Alert exposed service. This service will be your Alert installation name with the `-exposed` suffix in the name. \n+ If the installation name is 'myalert' then there will be a service `myalert-exposed` in the list of services.\n+ \n+ It will display a port with the following format:\n+  \n+  `<INTERNAL_PORT>:<EXTERNAL_PORT>/TCP`\n+  \n+  For example:\n+  \n+  `8443:31594/TCP`\n+  \n+  The internal port is 8443 and the external port is 31594. When accessing the Alert UI the external port will be used in the URL.\n+  Once the external port is identified the URL to access the UI will be in the following format:\n+  \n+  `https://my.kubernetes.host:<EXTERNAL_PORT>/alert`", "originalCommit": "0bcef9d45aea9c3d724a61244993c3a9ddcdb3f0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1NzAzMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/985#discussion_r429257031", "bodyText": "I will update this.", "author": "psantos1113", "createdAt": "2020-05-22T13:49:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1NDM5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI1Nzk1Ng==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/985#discussion_r429257956", "bodyText": "It only needs to be created first if they don't have a dynamic provisioner - which will see the pvc and create a persistent volume for it", "author": "mphammer", "createdAt": "2020-05-22T13:50:46Z", "path": "deployment/helm/synopsys-alert/README.md", "diffHunk": "@@ -130,3 +190,237 @@ Alternatively, a YAML file that specifies the values for the above parameters ca\n ```console\n $ helm install . --name <name> --namespace <namespace> --set enableStandalone=true\n ```\n+\n+### Persistent Storage\n+The section will describe the changes needed to configure persistent storage.  \n+**Please note:** By default the 'values.yaml' file has persistent storage disabled in order for Alert to work out of the box.\n+\n+#### Enable Persistent Storage\n+- In the 'values.yaml' file change \n+  ```yaml\n+  enablePersistentStorage: true \n+  ```\n+#### With Storage Claims\n+This section defines configuration using Persistent Volume Claims.  Claims can be optionally used rather than just a Persistent volume.\n+You must have a claim created for the 'alert' service regardless of an on-premise or external database.\n+For the on-premise database deployment a second Persistent Volume Claim must be created to store the database data.\n+\n+##### Alert Volume Claim Configuration\n+- A persistent volume must be created first", "originalCommit": "0bcef9d45aea9c3d724a61244993c3a9ddcdb3f0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d493c319456581089a08b404de6a626e51a15aa3", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/d493c319456581089a08b404de6a626e51a15aa3", "message": "docs: Update based on PR feedback.", "committedDate": "2020-05-22T14:33:44Z", "type": "commit"}, {"oid": "8e724be151e634f9d6a081d4109f35e7733cdb3c", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8e724be151e634f9d6a081d4109f35e7733cdb3c", "message": "docs: Update persistent storage section.", "committedDate": "2020-05-22T14:46:48Z", "type": "commit"}, {"oid": "2ceff2ee1c43eb261efb56ac0269d0f69b6d2f93", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2ceff2ee1c43eb261efb56ac0269d0f69b6d2f93", "message": "docs: Update information about persistent storage.", "committedDate": "2020-05-22T15:01:38Z", "type": "commit"}]}