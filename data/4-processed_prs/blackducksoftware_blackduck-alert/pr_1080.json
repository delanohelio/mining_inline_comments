{"pr_number": 1080, "pr_title": " helm hostname", "pr_createdAt": "2020-07-23T14:08:33Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080", "timeline": [{"oid": "1d80eda1dfbc7e0a0a18af6d58be0de4cfc57186", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/1d80eda1dfbc7e0a0a18af6d58be0de4cfc57186", "message": "feat: Implment a variable for the alert hostname.", "committedDate": "2020-07-07T15:24:12Z", "type": "commit"}, {"oid": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "message": "Merge remote-tracking branch 'origin/master' into ps_helm_hostname", "committedDate": "2020-07-23T12:25:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4NjI2Nw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459486267", "bodyText": "I don't think we need to put \"-alert\"\nThis PR removed the \"-alert\" from other areas of the Chart: #941", "author": "mphammer", "createdAt": "2020-07-23T14:20:26Z", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert", "originalCommit": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459488193", "bodyText": "I don't think \"ALERT_SERVER_PORT\" needs to be configurable. But this is okay if you want it :)\nWhat do you think @msenmurugan ?", "author": "mphammer", "createdAt": "2020-07-23T14:23:03Z", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}-alert\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}", "originalCommit": "0044f65e871e0b5d0ed4e05c8f4bcf4fc1767e11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5MDYzMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459490631", "bodyText": "I have removed '-alert' from the hostname.  If it should be added back then I can add it back.", "author": "psantos1113", "createdAt": "2020-07-23T14:26:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ5Nzg5OA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459497898", "bodyText": "Will that impact existing customers using the helm charts? Would changing the host name impact the volumes or any of the data?", "author": "jamesrichard91", "createdAt": "2020-07-23T14:36:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTUyMDIzNA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459520234", "bodyText": "the original host name was always localhost and that is the default so this should not affect existing customers.  The -alert was a way to provide a different default host name unique to alert if the hostname was missing from values.yml", "author": "psantos1113", "createdAt": "2020-07-23T15:05:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQ4ODE5Mw=="}], "type": "inlineReview"}, {"oid": "5553a88ec036bc00181c9b8d1f3babab3c3e454b", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/5553a88ec036bc00181c9b8d1f3babab3c3e454b", "message": "refactor: Remove the -alert from the default hostname value.", "committedDate": "2020-07-23T14:25:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU4OTMwMw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459589303", "bodyText": "@psantos1113 can you pls remove if and else for ALERT_SERVER_PORT and set them to values.alert.port always? Since the default is 8443, we don't need if-else", "author": "msenmurugan", "createdAt": "2020-07-23T16:50:12Z", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}\n+  {{- end}}\n+  {{- if .Values.alert.port }}\n+  ALERT_SERVER_PORT: {{ .Values.alert.port | quote }}\n+  {{- else }}", "originalCommit": "5553a88ec036bc00181c9b8d1f3babab3c3e454b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU5MDQxMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1080#discussion_r459590411", "bodyText": "Since the default value is provided as localhost, it will always go to if condition. And also, if someone want to set a different hostname, then they can set them in the flag. So ideally, we can remove the if-else condition and always read it from .Values.alert.hostname", "author": "msenmurugan", "createdAt": "2020-07-23T16:52:02Z", "path": "deployment/helm/synopsys-alert/templates/alert-environ-configmap.yaml", "diffHunk": "@@ -1,13 +1,20 @@\n apiVersion: v1\n kind: ConfigMap\n data:\n+  {{- if .Values.alert.hostname }}\n+  ALERT_HOSTNAME: {{ .Values.alert.hostname | quote }}\n+  {{- else }}\n+  ALERT_HOSTNAME: {{ .Release.Name | quote }}", "originalCommit": "5553a88ec036bc00181c9b8d1f3babab3c3e454b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c7dd06f457ee4d64a76e6198b5fc35d8e30bfd5", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/8c7dd06f457ee4d64a76e6198b5fc35d8e30bfd5", "message": "refactor: Remove the if/else statments.", "committedDate": "2020-07-23T17:24:34Z", "type": "commit"}]}