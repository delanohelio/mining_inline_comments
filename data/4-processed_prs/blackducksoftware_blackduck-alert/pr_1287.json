{"pr_number": 1287, "pr_title": "feat(audit-accessor): DefaultAuditAccessor now uses the new JobAccessor.", "pr_createdAt": "2020-12-04T19:49:05Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1287", "timeline": [{"oid": "2cfd58f3ae539c84db3d9c246ea3c225112548f4", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/2cfd58f3ae539c84db3d9c246ea3c225112548f4", "message": "feat(audit-accessor): DefaultAuditAccessor now uses the new JobAccessor.", "committedDate": "2020-12-04T19:47:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM0MjM4NQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1287#discussion_r536342385", "bodyText": "You may want to call distributionJobModel.get() once, rather than pulling out the DistributionJobModel from the optional on both lines.", "author": "jamesrichard91", "createdAt": "2020-12-04T19:51:14Z", "path": "alert-database/src/main/java/com/synopsys/integration/alert/database/api/DefaultAuditAccessor.java", "diffHunk": "@@ -261,12 +261,12 @@ public AuditEntryModel convertToAuditEntryModelFromNotification(AlertNotificatio\n             String errorMessage = auditEntryEntity.getErrorMessage();\n             String errorStackTrace = auditEntryEntity.getErrorStackTrace();\n \n-            Optional<ConfigurationJobModel> commonConfig = jobAccessor.getJobById(jobId);\n+            Optional<DistributionJobModel> distributionJobModel = jobAccessor.getJobById(jobId);\n             String distributionConfigName = null;\n             String eventType = null;\n-            if (commonConfig.isPresent()) {\n-                distributionConfigName = commonConfig.get().getName();\n-                eventType = commonConfig.get().getChannelName();\n+            if (distributionJobModel.isPresent()) {\n+                distributionConfigName = distributionJobModel.get().getName();\n+                eventType = distributionJobModel.get().getChannelDescriptorName();", "originalCommit": "2cfd58f3ae539c84db3d9c246ea3c225112548f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM1Nzk2OA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1287#discussion_r536357968", "bodyText": "I changed it to\nString distributionConfigName = distributionJobModel.map(DistributionJobModelData::getName).orElse(null);\nString eventType = distributionJobModel.map(DistributionJobModelData::getChannelDescriptorName).orElse(null);", "author": "JakeMathews", "createdAt": "2020-12-04T20:21:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjM0MjM4NQ=="}], "type": "inlineReview"}, {"oid": "68d9da8781c9b0892f0d23dfd96211d4c6f700a8", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/68d9da8781c9b0892f0d23dfd96211d4c6f700a8", "message": "test-fix(audit-accessor): Fixed DefaultAuditAccessorTest.", "committedDate": "2020-12-04T20:20:20Z", "type": "commit"}, {"oid": "251b7ce89a86f87b0a40a3abeb57eb224631b4be", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/251b7ce89a86f87b0a40a3abeb57eb224631b4be", "message": "refactor(audit-accessor): Utilized Optionals better.", "committedDate": "2020-12-04T20:20:53Z", "type": "commit"}]}