{"pr_number": 1066, "pr_title": "Fix Jira Server Plugin Installation Validation", "pr_createdAt": "2020-07-14T15:19:06Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066", "timeline": [{"oid": "749fc78163d71aac0e85128a5e393f3265c49c83", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/749fc78163d71aac0e85128a5e393f3265c49c83", "message": "Fix(Jira): Fix plugin installation validation by returning the error that was created but not returned", "committedDate": "2020-07-14T15:18:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzMyMA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437320", "bodyText": "Having the return Optional.empty() after the try-catch makes it easy to forget to return/throw errors.", "author": "gkillough", "createdAt": "2020-07-14T15:19:57Z", "path": "src/main/java/com/synopsys/integration/alert/channel/jira/cloud/web/JiraCustomEndpoint.java", "diffHunk": "@@ -95,8 +96,6 @@ public JiraCustomEndpoint(JiraChannelKey jiraChannelKey, CustomEndpointManager c\n             Thread.currentThread().interrupt();\n             return Optional.of(responseFactory.createInternalServerErrorResponse(\"\", \"Thread was interrupted while validating Jira plugin installation: \" + e.getMessage()));\n         }\n-\n-        return Optional.empty();", "originalCommit": "749fc78163d71aac0e85128a5e393f3265c49c83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzcyOA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437728", "bodyText": "The actual fix.", "author": "gkillough", "createdAt": "2020-07-14T15:20:29Z", "path": "src/main/java/com/synopsys/integration/alert/channel/jira/server/web/JiraServerCustomEndpoint.java", "diffHunk": "@@ -92,15 +92,14 @@ public JiraServerCustomEndpoint(JiraServerChannelKey jiraChannelKey, CustomEndpo\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira server successfully installed the Jira Server plugin. Please verify the installation on you Jira server.\"));\n             }\n+            return Optional.empty();\n         } catch (IntegrationException e) {\n-            createBadRequestIntegrationException(e);\n+            return createBadRequestIntegrationException(e);", "originalCommit": "749fc78163d71aac0e85128a5e393f3265c49c83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzgxMw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454437813", "bodyText": "Is this change so we are consistent with the jira server change?", "author": "jamesrichard91", "createdAt": "2020-07-14T15:20:37Z", "path": "src/main/java/com/synopsys/integration/alert/channel/jira/cloud/web/JiraCustomEndpoint.java", "diffHunk": "@@ -87,6 +87,7 @@ public JiraCustomEndpoint(JiraChannelKey jiraChannelKey, CustomEndpointManager c\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira Cloud successfully installed the Jira Cloud plugin. Please verify the installation on you Jira Cloud server.\"));\n             }\n+            return Optional.empty();", "originalCommit": "749fc78163d71aac0e85128a5e393f3265c49c83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQ0MDY2Mg==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454440662", "bodyText": "Yes. Just to ensure that we don't forget to actually return the error message.", "author": "gkillough", "createdAt": "2020-07-14T15:24:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzNzgxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDQzODAxMQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/1066#discussion_r454438011", "bodyText": "Was this the cause of the issue?", "author": "jamesrichard91", "createdAt": "2020-07-14T15:20:55Z", "path": "src/main/java/com/synopsys/integration/alert/channel/jira/server/web/JiraServerCustomEndpoint.java", "diffHunk": "@@ -92,15 +92,14 @@ public JiraServerCustomEndpoint(JiraServerChannelKey jiraChannelKey, CustomEndpo\n             if (!jiraPluginInstalled) {\n                 return Optional.of(responseFactory.createNotFoundResponse(\"Was not able to confirm Jira server successfully installed the Jira Server plugin. Please verify the installation on you Jira server.\"));\n             }\n+            return Optional.empty();\n         } catch (IntegrationException e) {\n-            createBadRequestIntegrationException(e);\n+            return createBadRequestIntegrationException(e);", "originalCommit": "749fc78163d71aac0e85128a5e393f3265c49c83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}