{"pr_number": 928, "pr_title": "Add a delete button to the global configurations.", "pr_createdAt": "2020-03-23T21:00:01Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/928", "timeline": [{"oid": "b544c4717ad0d30e040463b26dbf0bc257978c87", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/b544c4717ad0d30e040463b26dbf0bc257978c87", "message": "fix: Add a delete confirmation modal dialog.", "committedDate": "2020-03-23T20:56:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NjM2NA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/928#discussion_r396756364", "bodyText": "Do we have a modal component that can be used effectively here?", "author": "bamandel", "createdAt": "2020-03-23T21:05:43Z", "path": "src/main/js/component/common/ConfirmModal.js", "diffHunk": "@@ -0,0 +1,86 @@\n+import React, { Component } from 'react';\n+import { Modal } from 'react-bootstrap';\n+import PropTypes from 'prop-types';\n+\n+class ConfirmModal extends Component {\n+    constructor(props) {\n+        super(props);\n+        this.handleAffirmativeClick = this.handleAffirmativeClick.bind(this);\n+        this.handleNegativeClick = this.handleNegativeClick.bind(this);\n+        this.resetState = this.resetState.bind(this);\n+        this.state = {\n+            show: props.showModal,\n+            confirmed: false\n+        };\n+    }\n+\n+    componentDidUpdate(prevProps) {\n+        if (prevProps.showModal != this.props.showModal) {\n+            this.setState({\n+                show: this.props.showModal\n+            });\n+        }\n+    }\n+\n+    handleAffirmativeClick(event) {\n+        if (event) {\n+            event.preventDefault();\n+            event.stopPropagation();\n+        }\n+        this.props.affirmativeAction();\n+        this.resetState();\n+    }\n+\n+    handleNegativeClick(event) {\n+        if (event) {\n+            event.preventDefault();\n+            event.stopPropagation();\n+        }\n+        this.props.negativeAction();\n+        this.resetState();\n+    }\n+\n+    resetState() {\n+        this.setState({\n+            show: false,\n+            confirmed: false\n+        });\n+    }\n+\n+    render() {\n+        const { affirmativeButtonText, message, negativeButtonText, title } = this.props;\n+        return (\n+            <Modal show={this.state.show} onHide={this.handleNegativeClick}>\n+                <Modal.Header closeButton>\n+                    <Modal.Title>{title}</Modal.Title>\n+                </Modal.Header>\n+                <Modal.Body>\n+                    {message}\n+                </Modal.Body>\n+                <Modal.Footer>\n+                    <button id=\"confirmNegative\" type=\"button\" className=\"btn btn-link\" onClick={this.handleNegativeClick}>{negativeButtonText}</button>\n+                    <button id=\"confirmAffirmative\" type=\"button\" className=\"btn btn-danger\" onClick={this.handleAffirmativeClick}>{affirmativeButtonText}</button>\n+                </Modal.Footer>\n+            </Modal>", "originalCommit": "b544c4717ad0d30e040463b26dbf0bc257978c87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA5OTg5MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/928#discussion_r397099890", "bodyText": "I think this component is exactly that.", "author": "gkillough", "createdAt": "2020-03-24T12:02:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NjM2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEyNzA3Nw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/928#discussion_r397127077", "bodyText": "You're talking about Popup.js which should move into the component folder.  But that uses our config buttons.  This is to confirm an action and it has the same look and feel as LogoutConfirmation. Which is also a confirmation dialog.", "author": "psantos1113", "createdAt": "2020-03-24T12:50:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NjM2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE0MDA3MA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/928#discussion_r397140070", "bodyText": "We could try building on top of the pop up button a couple different types of pop ups. But that would be for the next version", "author": "bamandel", "createdAt": "2020-03-24T13:12:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njc1NjM2NA=="}], "type": "inlineReview"}, {"oid": "428b85463f891c8feb63e66bdeabc2ce88a13073", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/428b85463f891c8feb63e66bdeabc2ce88a13073", "message": "fix: Submit will only update the configuration.", "committedDate": "2020-03-24T11:27:21Z", "type": "commit"}]}