{"pr_number": 846, "pr_title": "fix: Update SAML settings after database save and log exceptions.", "pr_createdAt": "2020-02-07T19:00:49Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/846", "timeline": [{"oid": "a172b93ed0d77fa7549f51b4257736b15593897b", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/a172b93ed0d77fa7549f51b4257736b15593897b", "message": "fix: Update SAML settings after database save and log exceptions.", "committedDate": "2020-02-07T18:58:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU1NzUwOA==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846#discussion_r376557508", "bodyText": "Do we need to call addSAMLMetadata(fieldModel); in both the afterSaveAction and in the afterUpdateAction?", "author": "jamesrichard91", "createdAt": "2020-02-07T19:07:55Z", "path": "src/main/java/com/synopsys/integration/alert/component/settings/actions/SettingsGlobalApiAction.java", "diffHunk": "@@ -75,96 +76,111 @@ public FieldModel afterGetAction(final FieldModel fieldModel) {\n     }\n \n     @Override\n-    public FieldModel beforeSaveAction(final FieldModel fieldModel) {\n+    public FieldModel beforeSaveAction(FieldModel fieldModel) {\n         return handleNewAndUpdatedConfig(fieldModel);\n     }\n \n     @Override\n-    public FieldModel beforeUpdateAction(final FieldModel fieldModel) {\n+    public FieldModel beforeUpdateAction(FieldModel fieldModel) {\n         return handleNewAndUpdatedConfig(fieldModel);\n     }\n \n-    private FieldModel createFieldModelCopy(final FieldModel fieldModel) {\n-        final HashMap<String, FieldValueModel> fields = new HashMap<>();\n+    private FieldModel createFieldModelCopy(FieldModel fieldModel) {\n+        HashMap<String, FieldValueModel> fields = new HashMap<>();\n         fields.putAll(fieldModel.getKeyToValues());\n \n-        final FieldModel modelToSave = new FieldModel(fieldModel.getDescriptorName(), fieldModel.getContext(), fields);\n+        FieldModel modelToSave = new FieldModel(fieldModel.getDescriptorName(), fieldModel.getContext(), fields);\n         modelToSave.setId(fieldModel.getId());\n         return modelToSave;\n     }\n \n-    private FieldModel handleNewAndUpdatedConfig(final FieldModel fieldModel) {\n+    @Override\n+    public FieldModel afterSaveAction(FieldModel fieldModel) throws AlertException {\n+        addSAMLMetadata(fieldModel);", "originalCommit": "a172b93ed0d77fa7549f51b4257736b15593897b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU2MDcxMw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/846#discussion_r376560713", "bodyText": "yes the save is for a POST and update is for the PUT rest call.", "author": "psantos1113", "createdAt": "2020-02-07T19:15:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU1NzUwOA=="}], "type": "inlineReview"}]}