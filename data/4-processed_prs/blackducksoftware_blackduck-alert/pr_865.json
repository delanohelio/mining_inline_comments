{"pr_number": 865, "pr_title": "Add provider task properties table and fix BlackDuckAccumulator", "pr_createdAt": "2020-02-20T21:02:44Z", "pr_url": "https://github.com/blackducksoftware/blackduck-alert/pull/865", "timeline": [{"oid": "03f323b5245170cd104a2c58a3d649208d425083", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/03f323b5245170cd104a2c58a3d649208d425083", "message": "Feat(Database): Add provider task properties table and fix BlackDuckAccumulator", "committedDate": "2020-02-20T21:01:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI1OTQ5Nw==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/865#discussion_r382259497", "bodyText": "There is a separate ticket for this.", "author": "gkillough", "createdAt": "2020-02-20T21:09:32Z", "path": "alert-database/src/main/resources/liquibase/6.0.0/provider-task-properties.xml", "diffHunk": "@@ -0,0 +1,35 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<databaseChangeLog xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd\">\n+    <changeSet author=\"gavink\" id=\"2020-02-20-14-35-09-961\">\n+        <preConditions onFail=\"MARK_RAN\">\n+            <not>\n+                <tableExists schemaName=\"alert\" tableName=\"provider_task_properties\"/>\n+            </not>\n+        </preConditions>\n+        <createTable schemaName=\"alert\" tableName=\"provider_task_properties\">\n+            <column name=\"provider_config_id\" type=\"BIGINT\"/>\n+            <column name=\"task_name\" type=\"VARCHAR\"/>\n+            <column name=\"property_name\" type=\"VARCHAR\"/>\n+            <column name=\"value\" type=\"VARCHAR\"/>\n+        </createTable>\n+    </changeSet>\n+    <changeSet author=\"gavink\" id=\"2020-02-20-14-55-54-948\">\n+        <preConditions onFail=\"MARK_RAN\">\n+            <not>\n+                <foreignKeyConstraintExists schemaName=\"alert\" foreignKeyName=\"provider_task_properties_provider_config_id_fk\"/>\n+            </not>\n+        </preConditions>\n+        <addForeignKeyConstraint\n+                baseTableSchemaName=\"alert\"\n+                baseTableName=\"provider_task_properties\"\n+                baseColumnNames=\"provider_config_id\"\n+                constraintName=\"provider_task_properties_provider_config_id_fk\"\n+                referencedTableSchemaName=\"alert\"\n+                referencedTableName=\"descriptor_configs\"\n+                referencedColumnNames=\"id\"\n+                onDelete=\"CASCADE\"\n+        />\n+    </changeSet>\n+    <!-- FIXME create upgrade script for existing tasks -->", "originalCommit": "03f323b5245170cd104a2c58a3d649208d425083", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "743702204bef69916e4c44078051729a6a75f773", "url": "https://github.com/blackducksoftware/blackduck-alert/commit/743702204bef69916e4c44078051729a6a75f773", "message": "Fix(Java): Make provider task properties extend the correct entity", "committedDate": "2020-02-20T21:23:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI3MDk2MQ==", "url": "https://github.com/blackducksoftware/blackduck-alert/pull/865#discussion_r382270961", "bodyText": "Should the getTaskProperty also take the configId?  Even though the task name is unique because it currently has the config id in the task name.", "author": "psantos1113", "createdAt": "2020-02-20T21:36:25Z", "path": "alert-common/src/main/java/com/synopsys/integration/alert/common/persistence/accessor/ProviderTaskPropertiesAccessor.java", "diffHunk": "@@ -0,0 +1,12 @@\n+package com.synopsys.integration.alert.common.persistence.accessor;\n+\n+import java.util.Optional;\n+\n+import com.synopsys.integration.alert.common.exception.AlertDatabaseConstraintException;\n+\n+public interface ProviderTaskPropertiesAccessor {\n+    Optional<String> getTaskProperty(String taskName, String propertyKey);", "originalCommit": "743702204bef69916e4c44078051729a6a75f773", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}