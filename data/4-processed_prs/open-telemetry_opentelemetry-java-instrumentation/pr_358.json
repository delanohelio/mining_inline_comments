{"pr_number": 358, "pr_title": "Clarifications about various test tasks", "pr_createdAt": "2020-04-28T16:00:15Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358", "timeline": [{"oid": "6a3d6a2dde1b937f7ee46afcef29b6e7d87dfdc2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6a3d6a2dde1b937f7ee46afcef29b6e7d87dfdc2", "message": "Clarifications about various test tasks\n\nIn addition this commit replaces eager tasks generation for running tests using different java versions with rule based task created on-demand.", "committedDate": "2020-04-28T15:51:30Z", "type": "commit"}, {"oid": "7577a9e4eca7372caadc1b25747f80a5b390f6f5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7577a9e4eca7372caadc1b25747f80a5b390f6f5", "message": "Test fixes", "committedDate": "2020-04-28T19:47:45Z", "type": "commit"}, {"oid": "7577a9e4eca7372caadc1b25747f80a5b390f6f5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7577a9e4eca7372caadc1b25747f80a5b390f6f5", "message": "Test fixes", "committedDate": "2020-04-28T19:47:45Z", "type": "forcePushed"}, {"oid": "5f771488628868246149ee6d08244fd18c3b073f", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5f771488628868246149ee6d08244fd18c3b073f", "message": "Merge branch 'master' into tests-doc", "committedDate": "2020-04-29T00:23:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417430519", "bodyText": "@iNikem I can't build with Java 8 anymore, can we make building this module optional? Or should we update CONTRIBUTING doc to require Java 11?\n* Where:\nBuild file 'C:\\git\\opentelemetry-auto-instr-java\\smoke-tests\\java9-modules\\java9-modules.gradle' line: 17\n\n* What went wrong:\nA problem occurred evaluating project ':smoke-tests:java9-modules'.\n> path may not be null or empty string. path='null'", "author": "trask", "createdAt": "2020-04-29T16:01:29Z", "path": "smoke-tests/java9-modules/java9-modules.gradle", "diffHunk": "@@ -12,60 +12,22 @@ jar {\n   }\n }\n \n-// If the current JDK version (the one running gradle) is < 9, we need to find a version >= 9\n-// to compile this project.  java.gradle creates a map of java executables \n-// called \"javaExecutableVersionCache\" pulled from the environment.\n-// This loops over the cache to find a usable jdk.\n-// Since this project is the only one that requires a version above Java 8\n-// it's special cased here instead of putting a generic version matcher in java.gradle\n-if (JavaVersion.VERSION_1_9.compareTo(JavaVersion.current()) > 0) {\n-  def targetJavaHome\n+compileMain_java9Java {\n+  options.fork = true\n+  options.forkOptions.javaHome = file(findJavaHome(JavaVersion.VERSION_1_9))", "originalCommit": "5f771488628868246149ee6d08244fd18c3b073f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzNDMwMA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417434300", "bodyText": "This fails because you don't have JAVA_9_HOME env variable pointing to java 9 installation. Can you try as a workaround define it in your env with any value? Don't need to have actual java9 installed.", "author": "iNikem", "createdAt": "2020-04-29T16:07:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ0NTY1MA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417445650", "bodyText": "This is what I get:\n$ export JAVA_9_HOME=xyz\n\n$ ./gradlew :smoke-tests:java9-modules:build\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nA problem occurred evaluating project ':smoke-tests:java9-modules'.\n> A problem occurred starting process 'command 'xyz/bin/java''\n\n$ export JAVA_9_HOME=/c/dev/java/zulu-11\n\n$ ./gradlew :smoke-tests:java9-modules:build\n\nFAILURE: Build failed with an exception.\n\n* Where:\nBuild file 'C:\\git\\opentelemetry-auto-instr-java\\smoke-tests\\java9-modules\\java9-modules.gradle' line: 17\n\n* What went wrong:\nA problem occurred evaluating project ':smoke-tests:java9-modules'.\n> path may not be null or empty string. path='null'\n\n$ export JAVA_9_HOME=/c/dev/java/zulu-9\n\n$ ./gradlew :smoke-tests:java9-modules:build\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 7.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee https://docs.gradle.org/6.3/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD SUCCESSFUL in 8s\n241 actionable tasks: 241 up-to-date", "author": "trask", "createdAt": "2020-04-29T16:23:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ2MzA5Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417463092", "bodyText": "Correct, this is indeed as it was \"intended\" by my change. Not ideal, but works for now, I think.", "author": "iNikem", "createdAt": "2020-04-29T16:50:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ2NTA5NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417465094", "bodyText": "Ok, can you update CONTRIBUTING.md?", "author": "trask", "createdAt": "2020-04-29T16:53:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQ2ODUyNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/358#discussion_r417468525", "bodyText": "Yes, will do", "author": "iNikem", "createdAt": "2020-04-29T16:58:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzQzMDUxOQ=="}], "type": "inlineReview"}]}