{"pr_number": 1203, "pr_title": "Add configuration for error prone / nullaway to allow opting in packa\u2026", "pr_createdAt": "2020-09-15T08:26:26Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1203", "timeline": [{"oid": "0d440154c029dbe041e092b30466c51e9167fd6a", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/0d440154c029dbe041e092b30466c51e9167fd6a", "message": "Add configuration for error prone / nullaway to allow opting in package by package.", "committedDate": "2020-09-15T08:25:52Z", "type": "commit"}, {"oid": "d318bd26bbef14929655cfb344e22bc68dedd82e", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d318bd26bbef14929655cfb344e22bc68dedd82e", "message": "Guava annotated too", "committedDate": "2020-09-15T08:40:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ5OTk3Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1203#discussion_r488499973", "bodyText": "Does IDEA recognise this annotation?", "author": "iNikem", "createdAt": "2020-09-15T08:54:30Z", "path": "instrumentation-api/src/main/java/io/opentelemetry/instrumentation/api/tracer/HttpServerTracer.java", "diffHunk": "@@ -40,6 +40,7 @@\n import java.net.URISyntaxException;\n import java.util.Iterator;\n import java.util.List;\n+import org.checkerframework.checker.nullness.qual.Nullable;", "originalCommit": "d318bd26bbef14929655cfb344e22bc68dedd82e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUxMDI1Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1203#discussion_r488510252", "bodyText": "Yeah - IDEA (and every tool I've seen) recognizes any annotation named Nullable regardless of package :)", "author": "anuraaga", "createdAt": "2020-09-15T09:10:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ5OTk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUwMDc2Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1203#discussion_r488500763", "bodyText": "My experience with errorprone from Java repo is very negative. I hope it will not became such an annoying asshole as it is over there.", "author": "iNikem", "createdAt": "2020-09-15T08:55:41Z", "path": "gradle/java.gradle", "diffHunk": "@@ -305,4 +307,24 @@ tasks.withType(Test).configureEach {\n tasks.withType(AbstractArchiveTask) {\n   preserveFileTimestamps = false\n   reproducibleFileOrder = true\n-}\n\\ No newline at end of file\n+}\n+\n+plugins.withId('net.ltgt.errorprone') {\n+  dependencies {\n+    annotationProcessor group: \"com.uber.nullaway\", name: \"nullaway\", version: versions.nullaway\n+    errorprone group: \"com.google.errorprone\", name: \"error_prone_core\", version: versions.errorprone\n+  }\n+\n+  tasks.withType(JavaCompile) {\n+    if (!name.toLowerCase().contains(\"test\")) {\n+      options.errorprone {", "originalCommit": "d318bd26bbef14929655cfb344e22bc68dedd82e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUxMTcwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1203#discussion_r488511702", "bodyText": "You'll see I'm already fairly liberal in disabling checks that are annoying :) There are some checks of questionable value that we can disable when we run into them, on the flip side I have had a few bad bugs caught by it before so do like it in general. Worst case, we'll disableAllChecks to only have nullness checking activated.", "author": "anuraaga", "createdAt": "2020-09-15T09:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUwMDc2Mw=="}], "type": "inlineReview"}]}