{"pr_number": 948, "pr_title": "Run smoke tests on different java versions", "pr_createdAt": "2020-08-12T10:54:42Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/948", "timeline": [{"oid": "773467f61c4792ab9f5aba560d46a05e9b79758e", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/773467f61c4792ab9f5aba560d46a05e9b79758e", "message": "Run smoke tests on different java versions", "committedDate": "2020-08-12T10:53:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM5NTE1Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/948#discussion_r469395157", "bodyText": "same\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-springboot-$targetJDK\"\n          \n          \n            \n              to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-springboot-jdk$targetJDK\"", "author": "trask", "createdAt": "2020-08-12T16:41:03Z", "path": "smoke-tests/springboot/build.gradle", "diffHunk": "@@ -2,22 +2,28 @@ plugins {\n   id 'org.springframework.boot' version '2.3.2.RELEASE'\n   id 'io.spring.dependency-management' version '1.0.9.RELEASE'\n   id 'java'\n-  id 'com.google.cloud.tools.jib' version '2.4.0'\n+  id 'com.google.cloud.tools.jib' version '2.5.0'\n }\n \n group = 'io.opentelemetry'\n version = '0.0.1-SNAPSHOT'\n-sourceCompatibility = '8'\n \n repositories {\n   jcenter()\n }\n \n dependencies {\n   implementation 'org.springframework.boot:spring-boot-starter-web'\n+  implementation 'io.opentelemetry:opentelemetry-extension-auto-annotations:0.7.0'\n }\n \n+compileJava {\n+  options.release = 8\n+}\n+\n+def targetJDK = project.hasProperty(\"targetJDK\") ? project.targetJDK : 11\n+\n jib {\n-  from.image = \"bellsoft/liberica-openjdk-alpine:11\"\n-  to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-springboot\"\n+  from.image = \"bellsoft/liberica-openjdk-alpine:$targetJDK\"\n+  to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-springboot-$targetJDK\"", "originalCommit": "773467f61c4792ab9f5aba560d46a05e9b79758e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM5NTU4NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/948#discussion_r469395584", "bodyText": "just to make image name a little clearer\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-play-$targetJDK\"\n          \n          \n            \n              to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-play-jdk$targetJDK\"", "author": "trask", "createdAt": "2020-08-12T16:41:48Z", "path": "smoke-tests/play/build.gradle", "diffHunk": "@@ -35,8 +35,10 @@ dependencies {\n   implementation \"com.typesafe.play:filters-helpers_$scalaVersion:$playVersion\"\n }\n \n+def targetJDK = project.hasProperty(\"targetJDK\") ? project.targetJDK : 11\n+\n jib {\n-  from.image = \"bellsoft/liberica-openjdk-alpine:11\"\n-  to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-play\"\n+  from.image = \"bellsoft/liberica-openjdk-alpine:$targetJDK\"\n+  to.image = \"docker.pkg.github.com/open-telemetry/opentelemetry-java-instrumentation/smoke-play-$targetJDK\"", "originalCommit": "773467f61c4792ab9f5aba560d46a05e9b79758e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTM5NzA2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/948#discussion_r469397062", "bodyText": "\ud83d\udc4d", "author": "trask", "createdAt": "2020-08-12T16:44:14Z", "path": "smoke-tests/src/test/groovy/io/opentelemetry/smoketest/PlaySmokeTest.groovy", "diffHunk": "@@ -39,6 +40,12 @@ class PlaySmokeTest extends SmokeTest {\n     //Both play and akka-http support produce spans with the same name.\n     //One internal, one SERVER\n     countSpansByName(traces, 'GET /welcome') == 2\n+\n+    cleanup:\n+    stopTarget()\n+\n+    where:\n+    jdk << [8, 11, 14]", "originalCommit": "773467f61c4792ab9f5aba560d46a05e9b79758e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5c5e0437aaf7b02f0be10200426464a637aa8015", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5c5e0437aaf7b02f0be10200426464a637aa8015", "message": "Cleaner Docker images names", "committedDate": "2020-08-12T17:11:19Z", "type": "commit"}]}