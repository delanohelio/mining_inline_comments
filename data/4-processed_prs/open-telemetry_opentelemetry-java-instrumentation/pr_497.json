{"pr_number": 497, "pr_title": "Empty gradle project", "pr_createdAt": "2020-06-11T20:26:05Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497", "timeline": [{"oid": "e9ebfaa556729ff0c4bda019c8b92c716b42334e", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e9ebfaa556729ff0c4bda019c8b92c716b42334e", "message": "first draft of readme with initial details\nchanged author from corporate email to personal", "committedDate": "2020-06-11T14:27:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA1OTQzMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439059433", "bodyText": "I'd suggest supporting Java 8+, unless there's a specific reason to only support Java 11+\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sourceCompatibility = '11'\n          \n          \n            \n            sourceCompatibility = '8'", "author": "trask", "createdAt": "2020-06-11T20:41:17Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '11'", "originalCommit": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2MTE2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439061162", "bodyText": "0.5.0 is the latest version, I'd suggest using\napply from: \"$rootDir/gradle/java.gradle\"\n\nat the top of the gradle file, and then you can use\ncompile deps.opentelemetryApi\ncompile deps.opentelemetrySdk", "author": "trask", "createdAt": "2020-06-11T20:45:08Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '11'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n+\timplementation 'org.springframework.boot:spring-boot-starter-web'\n+\tcompileOnly 'org.projectlombok:lombok'\n+\tannotationProcessor 'org.projectlombok:lombok'\n+\ttestImplementation('org.springframework.boot:spring-boot-starter-test') {\n+\t\texclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n+\t}\n+\tcompile \"io.opentelemetry:opentelemetry-api:0.4.0\"\n+\tcompile \"io.opentelemetry:opentelemetry-sdk:0.4.0\"", "originalCommit": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2MjUyOA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439062528", "bodyText": "instead of making this a root project, let's add this new module to the existing root project", "author": "trask", "createdAt": "2020-06-11T20:48:08Z", "path": "instrumentation-core/spring/settings.gradle", "diffHunk": "@@ -0,0 +1 @@\n+rootProject.name = 'spring'", "originalCommit": "6f556ef3eef39d4ee5128464a3a9c8a9b07ed883", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNDQ3NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439134474", "bodyText": "I'm sure things will get sorted out as the code gets in but one thought is that most dependencies should be compileOnly since spring boot starters actually enable features in a user's app. Instead, the general design should be recognizing when a user app is using a feature and instrumenting only those. @ConditionalOnClass tends to be very important for it :)\nI guess this project will be similar to sleuth (maybe it could use it too? not sure). So will be a good reference point I think https://github.com/spring-cloud/spring-cloud-sleuth/tree/master/spring-cloud-sleuth-core", "author": "anuraaga", "createdAt": "2020-06-12T00:05:44Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,36 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.contrib'\n+version = '0.0.1-SNAPSHOT'\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'", "originalCommit": "a9e6e06700c0d07b9fbfb2b660e6e495a411f064", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNTQ2NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439135464", "bodyText": "@trask Is this the right package? The other instrumentation in instrumentation-core doesn't use the word contrib. If this is something separate from \"official instrumentation\", then we may need a contrib folder as well to group them together. But I guess this could just be instrumentation?", "author": "anuraaga", "createdAt": "2020-06-12T00:07:49Z", "path": "instrumentation-core/spring/src/main/java/io/opentelemetry/contrib/spring/Application.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package io.opentelemetry.contrib.spring;", "originalCommit": "a9e6e06700c0d07b9fbfb2b660e6e495a411f064", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNjY2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439136662", "bodyText": "\ud83d\udc4d we aren't using the contrib terminology for things in this repo", "author": "trask", "createdAt": "2020-06-12T00:10:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzNTQ2NA=="}], "type": "inlineReview"}, {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4074f224e9a76c379783a9a60d24ebed738007e3", "message": "clean up project setup", "committedDate": "2020-06-12T00:35:43Z", "type": "commit"}, {"oid": "4074f224e9a76c379783a9a60d24ebed738007e3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4074f224e9a76c379783a9a60d24ebed738007e3", "message": "clean up project setup", "committedDate": "2020-06-12T00:35:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MDQ1Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439150452", "bodyText": "I don't think you need this now that you are applying the common \"java.gradle\" above\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            repositories {\n          \n          \n            \n            \tmavenCentral()\n          \n          \n            \n            }", "author": "trask", "createdAt": "2020-06-12T00:50:04Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+", "originalCommit": "4074f224e9a76c379783a9a60d24ebed738007e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MDkwMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439150903", "bodyText": "I think you get this now from \"java.gradle\" also\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \tcompileOnly 'org.projectlombok:lombok'\n          \n          \n            \n            \tannotationProcessor 'org.projectlombok:lombok'", "author": "trask", "createdAt": "2020-06-12T00:51:41Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+\n+repositories {\n+\tmavenCentral()\n+}\n+\n+dependencies {\n+\timplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n+\timplementation 'org.springframework.boot:spring-boot-starter-web'\n+\tcompileOnly 'org.projectlombok:lombok'\n+\tannotationProcessor 'org.projectlombok:lombok'", "originalCommit": "4074f224e9a76c379783a9a60d24ebed738007e3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MTcxNA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439151714", "bodyText": "is this for lombok? maybe u don't need this anymore also with \"java.gradle\" above", "author": "trask", "createdAt": "2020-06-12T00:55:06Z", "path": "instrumentation-core/spring/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+\tid 'org.springframework.boot' version '2.3.0.RELEASE'\n+\tid 'io.spring.dependency-management' version '1.0.9.RELEASE'\n+\tid 'java'\n+}\n+\n+group = 'io.opentelemetry.instrumentation'\n+version = '0.0.1-SNAPSHOT'\n+\n+apply from: \"$rootDir/gradle/java.gradle\"\n+\n+sourceCompatibility = '8'\n+\n+configurations {\n+\tcompileOnly {\n+\t\textendsFrom annotationProcessor\n+\t}\n+}\n+", "originalCommit": "4074f224e9a76c379783a9a60d24ebed738007e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1Mjg1NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/497#discussion_r439152854", "bodyText": "Yes, it's just for lombok. I'll remove it now.", "author": "mabdinur", "createdAt": "2020-06-12T00:59:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE1MTcxNA=="}], "type": "inlineReview"}, {"oid": "39368ca80f5bf955069fb6bd469c185619516ef2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/39368ca80f5bf955069fb6bd469c185619516ef2", "message": "Merge branch 'master' into master", "committedDate": "2020-06-12T00:56:58Z", "type": "commit"}, {"oid": "250b2f954d8a80c04d6e0da3837ac6f7d3d265e3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/250b2f954d8a80c04d6e0da3837ac6f7d3d265e3", "message": "Update instrumentation-core/spring/build.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2020-06-12T00:59:16Z", "type": "commit"}, {"oid": "2cfddd7d3615ff374c997f6ee8a16c0b0cbcf018", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2cfddd7d3615ff374c997f6ee8a16c0b0cbcf018", "message": "Update instrumentation-core/spring/build.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2020-06-12T00:59:46Z", "type": "commit"}, {"oid": "a5bb265fcf61597363f28399ccbeaf926ce45971", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a5bb265fcf61597363f28399ccbeaf926ce45971", "message": "remove unnecessary configuration", "committedDate": "2020-06-12T01:00:42Z", "type": "commit"}]}