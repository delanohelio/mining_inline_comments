{"pr_number": 672, "pr_title": "Remove Lombok", "pr_createdAt": "2020-07-12T17:29:51Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672", "timeline": [{"oid": "e4ebb71b21cd54f105642dfe2724011ecf0966c0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e4ebb71b21cd54f105642dfe2724011ecf0966c0", "message": "Gradle 6.5.1.", "committedDate": "2020-07-12T10:16:12Z", "type": "commit"}, {"oid": "d61eb8eb6a81b098f3906883fd3bbed4bfac1471", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d61eb8eb6a81b098f3906883fd3bbed4bfac1471", "message": "Skip download javadoc and sources automatically in IntelliJ IDEA.", "committedDate": "2020-07-12T10:19:48Z", "type": "commit"}, {"oid": "90cfa618997a8ff9d9f4e8b05b63fd585b094668", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/90cfa618997a8ff9d9f4e8b05b63fd585b094668", "message": "Added mavenLocal to repositories.", "committedDate": "2020-07-12T10:26:35Z", "type": "commit"}, {"oid": "dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "message": "Removed Lombok usage.", "committedDate": "2020-07-12T17:24:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzEzNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453347135", "bodyText": "is this needed since also in allprojects block below?", "author": "trask", "createdAt": "2020-07-12T18:16:50Z", "path": "build.gradle", "diffHunk": "@@ -16,6 +16,13 @@ plugins {\n   id \"com.github.spotbugs\" version \"4.0.1\"\n }\n \n+idea {\n+    module {\n+        downloadJavadoc = false\n+        downloadSources = false\n+    }\n+}\n+", "originalCommit": "dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ1NTQ0MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453455441", "bodyText": "Actually no need, I'll remove it.", "author": "donbeave", "createdAt": "2020-07-13T06:16:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM0NzEzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NTE5Ng==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453395196", "bodyText": "requireNonNull shouldn't be used with return statements, it's really for validating parameters. I understand it's to replace the usage of @lombok.NonNull but I think we can just delete it here, especially since they're all private methods. Best would be for us to consistently add @Nullable and enable NullAway (not for this PR).", "author": "anuraaga", "createdAt": "2020-07-13T01:47:29Z", "path": "agent-bootstrap/src/main/java/io/opentelemetry/auto/config/Config.java", "diffHunk": "@@ -329,15 +329,13 @@ public static String getSettingFromEnvironment(final String name, final String d\n    * Calls {@link #getSettingFromEnvironment(String, String)} and converts the result to a list by\n    * splitting on `,`.\n    */\n-  @NonNull\n   private static List<String> getListSettingFromEnvironment(\n       final String name, final String defaultValue) {\n-    return parseList(getSettingFromEnvironment(name, defaultValue));\n+    return Objects.requireNonNull(parseList(getSettingFromEnvironment(name, defaultValue)));", "originalCommit": "dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2NDc2OA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453464768", "bodyText": "Agree, I'll remove them.", "author": "donbeave", "createdAt": "2020-07-13T06:45:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NTE5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NTI4Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453395287", "bodyText": "This is ok, though also rare to validate parameters for a private method.", "author": "anuraaga", "createdAt": "2020-07-13T01:47:55Z", "path": "agent-bootstrap/src/main/java/io/opentelemetry/auto/config/Config.java", "diffHunk": "@@ -401,7 +397,8 @@ private static String propertyNameToSystemPropertyName(final String setting) {\n    * @throws NumberFormatException\n    */\n   private static <T> T valueOf(\n-      final String value, @NonNull final Class<T> tClass, final T defaultValue) {\n+      final String value, final Class<T> tClass, final T defaultValue) {\n+    Objects.requireNonNull(tClass);", "originalCommit": "dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ2NTQyMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453465422", "bodyText": "I'll remove it, if dig into public methods which use this variable, they already have Objects.requireNonNull validation.", "author": "donbeave", "createdAt": "2020-07-13T06:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NTI4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NjAyNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453396025", "bodyText": "Use !(o instanceof DbInfo) pattern throughout", "author": "anuraaga", "createdAt": "2020-07-13T01:51:32Z", "path": "agent-bootstrap/src/main/java/io/opentelemetry/auto/bootstrap/instrumentation/jdbc/DBInfo.java", "diffHunk": "@@ -32,5 +31,139 @@\n   private final String host;\n   private final Integer port;\n \n-  public static class Builder {}\n+  public DBInfo(String type, String subtype, String shortUrl, String user, String instance, String db, String host,\n+                Integer port) {\n+    this.type = type;\n+    this.subtype = subtype;\n+    this.shortUrl = shortUrl;\n+    this.user = user;\n+    this.instance = instance;\n+    this.db = db;\n+    this.host = host;\n+    this.port = port;\n+  }\n+\n+  public String getType() {\n+    return type;\n+  }\n+\n+  public String getSubtype() {\n+    return subtype;\n+  }\n+\n+  public String getShortUrl() {\n+    return shortUrl;\n+  }\n+\n+  public String getUser() {\n+    return user;\n+  }\n+\n+  public String getInstance() {\n+    return instance;\n+  }\n+\n+  public String getDb() {\n+    return db;\n+  }\n+\n+  public String getHost() {\n+    return host;\n+  }\n+\n+  public Integer getPort() {\n+    return port;\n+  }\n+\n+  public Builder toBuilder() {\n+    return new Builder()\n+            .type(type)\n+            .subtype(subtype)\n+            .shortUrl(shortUrl)\n+            .user(user)\n+            .instance(instance)\n+            .db(db)\n+            .host(host)\n+            .port(port);\n+  }\n+\n+  @Override\n+  public boolean equals(Object o) {\n+    if (this == o) {\n+      return true;\n+    }\n+    if (o == null || getClass() != o.getClass()) {", "originalCommit": "dfe4906f8cfd0c88bb2802b89e02c5b972dd0abe", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzQ4NzUxOA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/672#discussion_r453487518", "bodyText": "Fixed.", "author": "donbeave", "createdAt": "2020-07-13T08:41:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM5NjAyNQ=="}], "type": "inlineReview"}, {"oid": "b9c7630ba15be37504fdd98d5dca40ceea52d6ec", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/b9c7630ba15be37504fdd98d5dca40ceea52d6ec", "message": "Removed duplicated idea config.", "committedDate": "2020-07-13T06:22:04Z", "type": "commit"}, {"oid": "4d8e55fd7354b7883cec913e5f217e05dd722ecd", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4d8e55fd7354b7883cec913e5f217e05dd722ecd", "message": "Code format.", "committedDate": "2020-07-13T06:23:02Z", "type": "commit"}, {"oid": "77cc440728f3649b8e5c3129aff8efaad925540c", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/77cc440728f3649b8e5c3129aff8efaad925540c", "message": "Removed useless usage of Objects.requireNonNull.", "committedDate": "2020-07-13T06:49:58Z", "type": "commit"}, {"oid": "16fa5d6f1aa10eb744e05ddfaa56e55cc62a8dfa", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/16fa5d6f1aa10eb744e05ddfaa56e55cc62a8dfa", "message": "Use instanceof to comparing objects.", "committedDate": "2020-07-13T08:40:53Z", "type": "commit"}, {"oid": "4289d28d472d3f29740977d00cd18bce87949718", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/4289d28d472d3f29740977d00cd18bce87949718", "message": "Code format.", "committedDate": "2020-07-13T08:50:36Z", "type": "commit"}, {"oid": "5b52442b2bd2e27334087e351ce10f0e262f930a", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5b52442b2bd2e27334087e351ce10f0e262f930a", "message": "Code format.", "committedDate": "2020-07-13T09:06:39Z", "type": "commit"}, {"oid": "f3c5e8e37e087a634f6577bdf1138bd6b3188453", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f3c5e8e37e087a634f6577bdf1138bd6b3188453", "message": "Merge branch 'master' of https://github.com/open-telemetry/opentelemetry-java-instrumentation into open-telemetry-master", "committedDate": "2020-07-18T11:37:57Z", "type": "commit"}, {"oid": "9e08511aac9e840889f16a2547e03771fce72687", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9e08511aac9e840889f16a2547e03771fce72687", "message": "Merge branch 'open-telemetry-master'", "committedDate": "2020-07-18T11:38:10Z", "type": "commit"}, {"oid": "59f11d29f3b6ce074a3390cd8b84503a81a2fef1", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/59f11d29f3b6ce074a3390cd8b84503a81a2fef1", "message": "Fixes after merge.", "committedDate": "2020-07-18T11:40:54Z", "type": "commit"}, {"oid": "9ac8e7b9677e5804709704d6c7191637767d267d", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/9ac8e7b9677e5804709704d6c7191637767d267d", "message": "Fixed sneakyThrow exception.", "committedDate": "2020-07-18T12:02:37Z", "type": "commit"}, {"oid": "d7836ebbcb5aa2f01e265d5ed84f2098c92c2320", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d7836ebbcb5aa2f01e265d5ed84f2098c92c2320", "message": "Code format.", "committedDate": "2020-07-18T12:07:18Z", "type": "commit"}]}