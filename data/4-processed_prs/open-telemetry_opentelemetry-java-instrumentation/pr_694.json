{"pr_number": 694, "pr_title": "Create instrumentation-core apache-httpclient-4.0", "pr_createdAt": "2020-07-14T14:30:45Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694", "timeline": [{"oid": "c4deffdca02878ec57224df15a6f1bcdf013d77b", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c4deffdca02878ec57224df15a6f1bcdf013d77b", "message": "create instrumentation-core apache-httpclient-4.0", "committedDate": "2020-07-14T14:29:09Z", "type": "commit"}, {"oid": "d6f1a2b89b4483cf2e8eadd25bc844234abd7cb2", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/d6f1a2b89b4483cf2e8eadd25bc844234abd7cb2", "message": "just gonna slip this in here clean up webflux group name", "committedDate": "2020-07-14T14:32:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUzMTc1Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694#discussion_r454531757", "bodyText": "I think let's not create maven subgroups, and put manual instrumentation directly in io.opentelemetry.instrumentation (which matches what we are doing in io.opentelemetry.instrumentation.auto)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            group = 'io.opentelemetry.instrumentation.spring'\n          \n          \n            \n            group = 'io.opentelemetry.instrumentation'", "author": "trask", "createdAt": "2020-07-14T17:43:37Z", "path": "instrumentation-core/spring/spring-webflux-5.0/spring-webflux-5.0.gradle", "diffHunk": "@@ -9,7 +9,7 @@ ext {\n \n apply from: \"$rootDir/gradle/java.gradle\"\n \n-group = 'io.opentelemetry.instrumentation.spring.webflux'\n+group = 'io.opentelemetry.instrumentation.spring'", "originalCommit": "d6f1a2b89b4483cf2e8eadd25bc844234abd7cb2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY4MjM3Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694#discussion_r454682377", "bodyText": "I'll make this change in the spring-web and spring-webmvc projects as well", "author": "mabdinur", "createdAt": "2020-07-14T22:30:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDUzMTc1Nw=="}], "type": "inlineReview"}, {"oid": "5a22e681f40bf5fcead1fb3eeb77eca2f5675ba3", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5a22e681f40bf5fcead1fb3eeb77eca2f5675ba3", "message": "extract http client helper and fix group names", "committedDate": "2020-07-14T22:20:46Z", "type": "commit"}, {"oid": "7d02d9dbff4d28a34dcb8910fbb6b54dee5100e5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/7d02d9dbff4d28a34dcb8910fbb6b54dee5100e5", "message": "move request helper class to instrumentation-core", "committedDate": "2020-07-15T01:32:25Z", "type": "commit"}, {"oid": "e61049f43bee9059b6f15cd5da972d90d3436633", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e61049f43bee9059b6f15cd5da972d90d3436633", "message": "moved default tracer to clienthelper and made decorator class public", "committedDate": "2020-07-16T15:03:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAzODc5OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694#discussion_r456038799", "bodyText": "Can you try again with this package-private, now that muzzle is fixed? Better not to expose this to manual instrumenters if possible.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class ApacheHttpClientDecorator extends HttpClientDecorator<HttpUriRequest, HttpResponse> {\n          \n          \n            \n            class ApacheHttpClientDecorator extends HttpClientDecorator<HttpUriRequest, HttpResponse> {", "author": "trask", "createdAt": "2020-07-16T19:51:00Z", "path": "instrumentation-core/apache-httpclient-4.0/src/main/java/io/opentelemetry/instrumentation/apachehttpclient/v4_0/ApacheHttpClientDecorator.java", "diffHunk": "@@ -19,19 +19,15 @@\n import io.grpc.Context;\n import io.opentelemetry.OpenTelemetry;\n import io.opentelemetry.auto.bootstrap.instrumentation.decorator.HttpClientDecorator;\n-import io.opentelemetry.trace.Tracer;\n import java.net.URI;\n import org.apache.http.Header;\n import org.apache.http.HttpMessage;\n import org.apache.http.HttpResponse;\n import org.apache.http.client.methods.HttpUriRequest;\n \n-class ApacheHttpClientDecorator extends HttpClientDecorator<HttpUriRequest, HttpResponse> {\n+public class ApacheHttpClientDecorator extends HttpClientDecorator<HttpUriRequest, HttpResponse> {", "originalCommit": "e61049f43bee9059b6f15cd5da972d90d3436633", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAzOTAyNw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694#discussion_r456039027", "bodyText": "same here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class HttpHeadersInjectAdapter implements HttpTextFormat.Setter<HttpUriRequest> {\n          \n          \n            \n            class HttpHeadersInjectAdapter implements HttpTextFormat.Setter<HttpUriRequest> {", "author": "trask", "createdAt": "2020-07-16T19:51:28Z", "path": "instrumentation-core/apache-httpclient-4.0/src/main/java/io/opentelemetry/instrumentation/apachehttpclient/v4_0/HttpHeadersInjectAdapter.java", "diffHunk": "@@ -19,7 +19,7 @@\n import io.opentelemetry.context.propagation.HttpTextFormat;\n import org.apache.http.client.methods.HttpUriRequest;\n \n-class HttpHeadersInjectAdapter implements HttpTextFormat.Setter<HttpUriRequest> {\n+public class HttpHeadersInjectAdapter implements HttpTextFormat.Setter<HttpUriRequest> {", "originalCommit": "e61049f43bee9059b6f15cd5da972d90d3436633", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjE0NTcyNw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/694#discussion_r456145727", "bodyText": "Done", "author": "mabdinur", "createdAt": "2020-07-17T00:08:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAzOTAyNw=="}], "type": "inlineReview"}, {"oid": "c72917ee9ce81aedffe189cdc927602d21a2c676", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/c72917ee9ce81aedffe189cdc927602d21a2c676", "message": "Update instrumentation-core/apache-httpclient-4.0/src/main/java/io/opentelemetry/instrumentation/apachehttpclient/v4_0/ApacheHttpClientDecorator.java\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2020-07-17T00:05:16Z", "type": "commit"}, {"oid": "a5a0f2756041469788a7f65091d71c30b3d9a183", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a5a0f2756041469788a7f65091d71c30b3d9a183", "message": "make injectAdapator package private", "committedDate": "2020-07-17T00:07:55Z", "type": "commit"}]}