{"pr_number": 734, "pr_title": "Add GA requirements doc", "pr_createdAt": "2020-07-20T05:40:23Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734", "timeline": [{"oid": "2b750ad69653c37ff0342036c0627f5dcb2a0573", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2b750ad69653c37ff0342036c0627f5dcb2a0573", "message": "Add GA requirements doc", "committedDate": "2020-07-20T05:33:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDYyMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457070623", "bodyText": "This list seems sort of arbitrary. Is it P0 to test 3 servlet implementations? My suggestion based on back-of-hand estimation of popularity nowadays is one servlet, spring-boot, and grpc, while others could be P1 or P2", "author": "anuraaga", "createdAt": "2020-07-20T05:42:21Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P0 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Tomcat, Wildfly, Spring Boot", "originalCommit": "2b750ad69653c37ff0342036c0627f5dcb2a0573", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA4NTAwMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457085003", "bodyText": "Spring Boot certainly covers Tomcat or Jetty, which is all the same. Wildfly is useful, because JBoss is tricky classloader-wise. It uses its own module system and is very sensitive to logging infra problems.\nI think current smoke tests selection, Boot, Wildfly and Play, is quite good and propose to continue with that", "author": "iNikem", "createdAt": "2020-07-20T06:12:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDYyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA4NTA1NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457085054", "bodyText": "Wildfly is problematic for us, because of both jboss modules (class loading) and jboss logging (we need avoid touching java.util.logging before it loads).\nI think our normal instrumentation tests cover Tomcat, Spring Boot and gRPC decently, so I would be good with pushing them to lower priority.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              * Tomcat, Wildfly, Spring Boot\n          \n          \n            \n              * Wildfly, due to common regressions around jboss modules (class loading) and jboss logging (we need avoid touching java.util.logging before it loads)", "author": "trask", "createdAt": "2020-07-20T06:12:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDYyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDY3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457070679", "bodyText": "This feels lower than P0, maybe P2.", "author": "anuraaga", "createdAt": "2020-07-20T05:42:30Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P0 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Tomcat, Wildfly, Spring Boot\n+  * All Java LTS versions + latest Java version if non-LTS\n+* Benchmarking\n+  * Startup overhead benchmark", "originalCommit": "2b750ad69653c37ff0342036c0627f5dcb2a0573", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA4NTIxMA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457085210", "bodyText": "Not sure. P1 - can agree, P2 - probably not.", "author": "iNikem", "createdAt": "2020-07-20T06:12:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDY3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE5NjE5NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459196195", "bodyText": "kept this at P0 for now (well, now P0 is P1) since the next priority level is all about \"contributor experience\", but agree this is flexible", "author": "trask", "createdAt": "2020-07-23T03:26:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDY3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDc2MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457070761", "bodyText": "I don't think I've ever seen such detailed documentation per-instrumentation in other tracing libraries. More docs is always better than less, but I don't think it's P0, maybe P2, and it needs to come with the commitment that we will keep the docs up to date.", "author": "anuraaga", "createdAt": "2020-07-20T05:42:40Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P0 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Tomcat, Wildfly, Spring Boot\n+  * All Java LTS versions + latest Java version if non-LTS\n+* Benchmarking\n+  * Startup overhead benchmark\n+  * Runtime overhead benchmark\n+* Implement all required semantic attributes\n+  * Non-required semantic attributes are nice to have, but not required for GA\n+* Basic configuration points\n+  * Add custom auto-instrumentation\n+  * Ability to build \"custom distro\"\n+* Documentation (tag \"documentation\" minus tag \"contributor experience\")\n+  * All configuration options\n+    * Standard OpenTelemetry SDK + Exporter configuration options\n+    * Auto-instrumentation configuration options (e.g. disable/enable, peer.service mapping)\n+  * For each instrumentation\n+    * Document all spans that it captures", "originalCommit": "2b750ad69653c37ff0342036c0627f5dcb2a0573", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA4NTQ0Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457085443", "bodyText": "Unfortunately must agree with Anuraag.", "author": "iNikem", "createdAt": "2020-07-20T06:12:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDc2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzA3MDg2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r457070869", "bodyText": "I consider Brave to have very high instrumentation coverage, and it's a total of 25 (including some that are multi-version)\nhttps://github.com/openzipkin/brave/tree/master/instrumentation\n20 feels very high for a P0, my suggestion would be making this more use-case oriented.\nLibraries commonly used on Android\nLibraries commonly used with spring-boot\n\nfor example.", "author": "anuraaga", "createdAt": "2020-07-20T05:42:51Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P0 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Tomcat, Wildfly, Spring Boot\n+  * All Java LTS versions + latest Java version if non-LTS\n+* Benchmarking\n+  * Startup overhead benchmark\n+  * Runtime overhead benchmark\n+* Implement all required semantic attributes\n+  * Non-required semantic attributes are nice to have, but not required for GA\n+* Basic configuration points\n+  * Add custom auto-instrumentation\n+  * Ability to build \"custom distro\"\n+* Documentation (tag \"documentation\" minus tag \"contributor experience\")\n+  * All configuration options\n+    * Standard OpenTelemetry SDK + Exporter configuration options\n+    * Auto-instrumentation configuration options (e.g. disable/enable, peer.service mapping)\n+  * For each instrumentation\n+    * Document all spans that it captures\n+      * Span names\n+      * Span attributes (including explanation of any non-semantic attributes)\n+      * Events\n+    * Document any instrumentation-specific configuration\n+    * Document any other effects (e.g. updating SERVER span name with route)\n+  * Document the basic configuration points (above)\n+    * How to write your own auto-instrumentation\n+      * (much of this can be shared with contributor documentation below)\n+    * How to build your own \"custom distro\"\n+  * How to troubleshoot (start documenting common issues somewhere)\n+* Library (manual) instrumentations corresponding to at least 20 auto-instrumentations, with shared code and tests", "originalCommit": "2b750ad69653c37ff0342036c0627f5dcb2a0573", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f280882ab57c3cd88b8bdd3a726294b0490867a5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/f280882ab57c3cd88b8bdd3a726294b0490867a5", "message": "Merge remote-tracking branch 'upstream/master' into ga-requirements", "committedDate": "2020-07-23T03:15:10Z", "type": "commit"}, {"oid": "a1c1fbdc2c9d0a10e455fbfb8747b1f1feea6220", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a1c1fbdc2c9d0a10e455fbfb8747b1f1feea6220", "message": "Address feedback", "committedDate": "2020-07-23T03:23:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIwOTI4MA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459209280", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              * All Java LTS versions + latest Java version if non-LTS\n          \n          \n            \n              * Java 8, 11, and the latest Java version\n          \n      \n    \n    \n  \n\nI want to be optimistic we GA before Java 17 :)", "author": "anuraaga", "createdAt": "2020-07-23T04:32:49Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P1 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Spring Boot and Wildfly\n+    * (Wildfly chosen due to common javaagent issues around jboss modules and jboss logging)\n+  * All Java LTS versions + latest Java version if non-LTS", "originalCommit": "a1c1fbdc2c9d0a10e455fbfb8747b1f1feea6220", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6c06f173978abf65974d6edce63dff0d71744ac5", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6c06f173978abf65974d6edce63dff0d71744ac5", "message": "Update docs/ga-requirements.md\n\nCo-authored-by: Anuraag Agrawal <anuraaga@gmail.com>", "committedDate": "2020-07-23T04:35:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIwOTk3Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459209973", "bodyText": "There is this idea: open-telemetry/opentelemetry-specification#653 (comment)", "author": "iNikem", "createdAt": "2020-07-23T04:36:19Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P1 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Spring Boot and Wildfly\n+    * (Wildfly chosen due to common javaagent issues around jboss modules and jboss logging)\n+  * Java 8, 11, and the latest Java version\n+* Benchmarking\n+  * Runtime overhead benchmark\n+  * Startup overhead benchmark\n+* Implement all required semantic attributes", "originalCommit": "6c06f173978abf65974d6edce63dff0d71744ac5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIxMDQyMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459210421", "bodyText": "But P1 already has \"How to write your own auto-instrumentation\". And I think that without these documentation here nobody will be able to \"Add custom auto-instrumentation\". But putting all \"New contributor documentation\" in P1 seems like too aggressive to me :(", "author": "iNikem", "createdAt": "2020-07-23T04:38:45Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P1 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Spring Boot and Wildfly\n+    * (Wildfly chosen due to common javaagent issues around jboss modules and jboss logging)\n+  * Java 8, 11, and the latest Java version\n+* Benchmarking\n+  * Runtime overhead benchmark\n+  * Startup overhead benchmark\n+* Implement all required semantic attributes\n+  * Non-required semantic attributes are nice to have, but not required for GA\n+* Basic configuration points\n+  * Add custom auto-instrumentation\n+  * Ability to build \"custom distro\"\n+* Documentation (tag \"documentation\" minus tag \"contributor experience\")\n+  * All configuration options\n+    * Standard OpenTelemetry SDK + Exporter configuration options\n+    * Auto-instrumentation configuration options (e.g. disable/enable, peer.service mapping)\n+  * For each instrumentation\n+    * Document any instrumentation-specific configuration\n+  * Document the basic configuration points (above)\n+    * How to write your own auto-instrumentation\n+      * (much of this can be shared with contributor documentation below)\n+    * How to build your own \"custom distro\"\n+  * How to troubleshoot (start documenting common issues somewhere)\n+* Library (manual) instrumentations for libraries commonly used with Spring\n+  * Spring WebMVC, Spring WebFlux, Spring RestTemplate, Spring Kafka, Spring AMQP,\n+    Reactor, JDBC, java.util.concurrent\n+* Library (manual) instrumentations for libraries commonly used with Android\n+  * OkHttp, gRPC\n+\n+P2:\n+* Contributor experience (tag \"contributor experience\" plus tag \"cleanup\" plus tag \"sporadic test failure\")\n+  * New contributor documentation\n+    * How to write new instrumentation (auto, library, tests)", "originalCommit": "6c06f173978abf65974d6edce63dff0d71744ac5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIxMTE1NA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459211154", "bodyText": "I am not sure this is hard requirement for GA", "author": "iNikem", "createdAt": "2020-07-23T04:42:14Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P1 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Spring Boot and Wildfly\n+    * (Wildfly chosen due to common javaagent issues around jboss modules and jboss logging)\n+  * Java 8, 11, and the latest Java version\n+* Benchmarking\n+  * Runtime overhead benchmark\n+  * Startup overhead benchmark\n+* Implement all required semantic attributes\n+  * Non-required semantic attributes are nice to have, but not required for GA\n+* Basic configuration points\n+  * Add custom auto-instrumentation\n+  * Ability to build \"custom distro\"\n+* Documentation (tag \"documentation\" minus tag \"contributor experience\")\n+  * All configuration options\n+    * Standard OpenTelemetry SDK + Exporter configuration options\n+    * Auto-instrumentation configuration options (e.g. disable/enable, peer.service mapping)\n+  * For each instrumentation\n+    * Document any instrumentation-specific configuration\n+  * Document the basic configuration points (above)\n+    * How to write your own auto-instrumentation\n+      * (much of this can be shared with contributor documentation below)\n+    * How to build your own \"custom distro\"\n+  * How to troubleshoot (start documenting common issues somewhere)\n+* Library (manual) instrumentations for libraries commonly used with Spring", "originalCommit": "6c06f173978abf65974d6edce63dff0d71744ac5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI1Mzg0Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459253842", "bodyText": "I'd like to have some kind of hard requirement for manual instrumentation, in order to show our commitment to supporting both auto and manual instrumentation.", "author": "trask", "createdAt": "2020-07-23T07:10:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIxMTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTI1Njk5MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459256991", "bodyText": "Not sure if it matters much, but FWIW, the work for extracting manual instrumentation for okhttp and grpc seems very small compared to Spring which is a lot of new instrumentation, though @mabdinur is doing a great job tackling it :)", "author": "anuraaga", "createdAt": "2020-07-23T07:18:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIxMTE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTIxMTE4MA==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/734#discussion_r459211180", "bodyText": "I am not sure this is hard requirement for GA", "author": "iNikem", "createdAt": "2020-07-23T04:42:22Z", "path": "docs/ga-requirements.md", "diffHunk": "@@ -0,0 +1,51 @@\n+P1 (e.g. cannot GA without these):\n+* End-to-end tests\n+  * OTLP, Jaeger and Zipkin\n+  * Spring Boot and Wildfly\n+    * (Wildfly chosen due to common javaagent issues around jboss modules and jboss logging)\n+  * Java 8, 11, and the latest Java version\n+* Benchmarking\n+  * Runtime overhead benchmark\n+  * Startup overhead benchmark\n+* Implement all required semantic attributes\n+  * Non-required semantic attributes are nice to have, but not required for GA\n+* Basic configuration points\n+  * Add custom auto-instrumentation\n+  * Ability to build \"custom distro\"\n+* Documentation (tag \"documentation\" minus tag \"contributor experience\")\n+  * All configuration options\n+    * Standard OpenTelemetry SDK + Exporter configuration options\n+    * Auto-instrumentation configuration options (e.g. disable/enable, peer.service mapping)\n+  * For each instrumentation\n+    * Document any instrumentation-specific configuration\n+  * Document the basic configuration points (above)\n+    * How to write your own auto-instrumentation\n+      * (much of this can be shared with contributor documentation below)\n+    * How to build your own \"custom distro\"\n+  * How to troubleshoot (start documenting common issues somewhere)\n+* Library (manual) instrumentations for libraries commonly used with Spring\n+  * Spring WebMVC, Spring WebFlux, Spring RestTemplate, Spring Kafka, Spring AMQP,\n+    Reactor, JDBC, java.util.concurrent\n+* Library (manual) instrumentations for libraries commonly used with Android", "originalCommit": "6c06f173978abf65974d6edce63dff0d71744ac5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2898306154f1fd5e38dbdd352ee5d487ac3d32f0", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/2898306154f1fd5e38dbdd352ee5d487ac3d32f0", "message": "Address feedback", "committedDate": "2020-07-23T07:08:43Z", "type": "commit"}]}