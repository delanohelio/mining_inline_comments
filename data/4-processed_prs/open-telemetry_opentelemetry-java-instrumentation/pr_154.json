{"pr_number": 154, "pr_title": "Make some tests fail faster", "pr_createdAt": "2020-02-11T18:05:42Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/154", "timeline": [{"oid": "027d420e6973371a6f4e71e45c8002a4d3d7d4b7", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/027d420e6973371a6f4e71e45c8002a4d3d7d4b7", "message": "Make some tests fail faster", "committedDate": "2020-02-11T05:04:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgwNzE3NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/154#discussion_r377807175", "bodyText": "is there a way with spock to put a timeout on the test itself, rather than having to put it in the middle here?", "author": "jkwatson", "createdAt": "2020-02-11T18:09:13Z", "path": "testing/src/main/groovy/io/opentelemetry/auto/test/asserts/TraceAssert.groovy", "diffHunk": "@@ -25,10 +25,7 @@ class TraceAssert {\n                           @DelegatesTo(value = TraceAssert, strategy = Closure.DELEGATE_FIRST) Closure spec) {\n     def spans = getTrace(writer, traceId)\n     Stopwatch stopwatch = Stopwatch.createStarted()\n-    while (stopwatch.elapsed(TimeUnit.SECONDS) < 10) {\n-      if (spans.size() == expectedSize) {\n-        break\n-      }\n+    while (spans.size() < expectedSize && stopwatch.elapsed(TimeUnit.SECONDS) < 10) {", "originalCommit": "027d420e6973371a6f4e71e45c8002a4d3d7d4b7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgwODc0Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/154#discussion_r377808743", "bodyText": "yes, but then we would have to apply timeout appropriately for each tests (and tests vary a lot in time since they are more integration test than unit test)", "author": "trask", "createdAt": "2020-02-11T18:12:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzgwNzE3NQ=="}], "type": "inlineReview"}, {"oid": "a9b8a6a3aa93fe546784dc7c0e565eb9d0476257", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/a9b8a6a3aa93fe546784dc7c0e565eb9d0476257", "message": "Merge branch 'master' into make-some-tests-fail-faster", "committedDate": "2020-02-11T20:25:29Z", "type": "commit"}]}