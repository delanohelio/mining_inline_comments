{"pr_number": 1507, "pr_title": "Fix Redisson latestDep tests", "pr_createdAt": "2020-10-28T12:15:39Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1507", "timeline": [{"oid": "18bb06c51991e04ca071a14d83f7050af982b763", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/18bb06c51991e04ca071a14d83f7050af982b763", "message": "Fix Redisson latestDep tests", "committedDate": "2020-10-28T12:13:59Z", "type": "commit"}, {"oid": "e7e1360a45d42d97bc82e9685f45785539c57b18", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e7e1360a45d42d97bc82e9685f45785539c57b18", "message": "spotless", "committedDate": "2020-10-28T12:19:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5NzYzMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1507#discussion_r513397631", "bodyText": "This magic would benefit from some comment", "author": "iNikem", "createdAt": "2020-10-28T12:19:36Z", "path": "instrumentation/redisson-3.0/src/test/groovy/RedissonClientTest.groovy", "diffHunk": "@@ -276,10 +279,7 @@ class RedissonClientTest extends AgentTestRunner {\n     assertTraces(2) {\n       trace(0, 1) {\n         span(0) {\n-          def lockScript = \"if (redis.call('exists', KEYS[1]) == 0) then redis.call('hset', KEYS[1], ARGV[2], 1);\" +\n-            \" redis.call('pexpire', KEYS[1], ARGV[1]); return nil; end;\" +\n-            \" if (redis.call('hexists', KEYS[1], ARGV[2]) == 1) then redis.call('hincrby', KEYS[1], ARGV[2], 1);\" +\n-            \" redis.call('pexpire', KEYS[1], ARGV[1]); return nil; end; return redis.call('pttl', KEYS[1]);\"\n+          def lockScriptPattern = compile(\"^\" + quote(\"EVAL \") + \".*\" + quote(\" 1 lock ? ?\") + \"\\$\")", "originalCommit": "18bb06c51991e04ca071a14d83f7050af982b763", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzQwNDYyMw==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1507#discussion_r513404623", "bodyText": "Done", "author": "mateuszrzeszutek", "createdAt": "2020-10-28T12:31:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzM5NzYzMQ=="}], "type": "inlineReview"}, {"oid": "04c4cca7995a0df6ed44b5412745e189626d3a55", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/04c4cca7995a0df6ed44b5412745e189626d3a55", "message": "Add comment", "committedDate": "2020-10-28T12:31:37Z", "type": "commit"}]}