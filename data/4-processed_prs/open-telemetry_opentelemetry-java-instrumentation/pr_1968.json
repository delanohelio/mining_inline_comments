{"pr_number": 1968, "pr_title": "Enable servlet forward and include tests", "pr_createdAt": "2020-12-30T14:55:28Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1968", "timeline": [{"oid": "6af1e8a7b85e98698dcb9a9292c9a5efc78deba8", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/6af1e8a7b85e98698dcb9a9292c9a5efc78deba8", "message": "enable disabled servlet tests", "committedDate": "2020-12-30T14:53:08Z", "type": "commit"}, {"oid": "5701893cd521c6e1d28b1c41136056341ebe4b42", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/5701893cd521c6e1d28b1c41136056341ebe4b42", "message": "alternative", "committedDate": "2021-01-05T21:34:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY4NTg3Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1968#discussion_r551685872", "bodyText": "left over debugging?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  if (servletPath.contains(\"exception\")) {\n          \n          \n            \n                    System.err.println(servletPath)\n          \n          \n            \n                  }", "author": "trask", "createdAt": "2021-01-05T02:43:17Z", "path": "instrumentation/servlet/servlet-3.0/javaagent/src/test/groovy/TestServlet3.groovy", "diffHunk": "@@ -22,7 +25,14 @@ class TestServlet3 {\n   static class Sync extends AbstractHttpServlet {\n     @Override\n     protected void service(HttpServletRequest req, HttpServletResponse resp) {\n-      HttpServerTest.ServerEndpoint endpoint = HttpServerTest.ServerEndpoint.forPath(req.servletPath)\n+      String servletPath = req.getAttribute(RequestDispatcher.INCLUDE_SERVLET_PATH)\n+      if (servletPath == null) {\n+        servletPath = req.servletPath\n+      }\n+      if (servletPath.contains(\"exception\")) {\n+        System.err.println(servletPath)\n+      }", "originalCommit": "6af1e8a7b85e98698dcb9a9292c9a5efc78deba8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjIzOTYwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/pull/1968#discussion_r552239602", "bodyText": "thanks", "author": "laurit", "createdAt": "2021-01-05T22:34:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY4NTg3Mg=="}], "type": "inlineReview"}, {"oid": "62e4649fd9f68c5e3decf564ff98a55dd049d6dc", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/62e4649fd9f68c5e3decf564ff98a55dd049d6dc", "message": "Update instrumentation/servlet/servlet-3.0/javaagent/src/test/groovy/TestServlet3.groovy\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2021-01-05T22:28:16Z", "type": "commit"}, {"oid": "e848689696898384732ac8f6df3afbeb6e088426", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/e848689696898384732ac8f6df3afbeb6e088426", "message": "Merge pull request #1 from trask/fix-disabled-servlet-tests-alt\n\nalternative: instead of adding a new endpoint, allow customization of exception class", "committedDate": "2021-01-05T22:40:03Z", "type": "commit"}, {"oid": "074dbafb8d4c92568cc0240a1527b13bd1f35523", "url": "https://github.com/open-telemetry/opentelemetry-java-instrumentation/commit/074dbafb8d4c92568cc0240a1527b13bd1f35523", "message": "fix failing test", "committedDate": "2021-01-05T23:53:02Z", "type": "commit"}]}