{"pr_number": 5945, "pr_title": "Try to fix linux pdf opening again", "pr_createdAt": "2020-02-13T19:47:08Z", "pr_url": "https://github.com/JabRef/jabref/pull/5945", "timeline": [{"oid": "c430b0e72ce5843313373275335ac00c521acc9e", "url": "https://github.com/JabRef/jabref/commit/c430b0e72ce5843313373275335ac00c521acc9e", "message": "Try to fix linux pdf opening again", "committedDate": "2020-02-13T19:46:20Z", "type": "commit"}, {"oid": "6d93b17fac3641617a4b069d93f339eea0f1ff79", "url": "https://github.com/JabRef/jabref/commit/6d93b17fac3641617a4b069d93f339eea0f1ff79", "message": "Merge remote-tracking branch 'upstream/master' into linuxOutputstream\n\n* upstream/master:\n  fix missing gson", "committedDate": "2020-02-14T18:50:54Z", "type": "commit"}, {"oid": "2dad2221bee92b0a31f57d706be5b1081c27bef7", "url": "https://github.com/JabRef/jabref/commit/2dad2221bee92b0a31f57d706be5b1081c27bef7", "message": "execute stream gobbler in own task", "committedDate": "2020-02-14T19:23:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY4MDU4Mw==", "url": "https://github.com/JabRef/jabref/pull/5945#discussion_r379680583", "bodyText": "I guess the whole process starting has to be done in a different thread...", "author": "tobiasdiez", "createdAt": "2020-02-14T22:55:00Z", "path": "src/main/java/org/jabref/gui/desktop/os/Linux.java", "diffHunk": "@@ -53,17 +56,18 @@ public void openFileWithApplication(String filePath, String application) throws\n         } else {\n             openWith = new String[] {\"xdg-open\"};\n         }\n-\n         String[] cmdArray = new String[openWith.length + 1];\n         System.arraycopy(openWith, 0, cmdArray, 0, openWith.length);\n         cmdArray[cmdArray.length - 1] = filePath;\n-        Process p = Runtime.getRuntime().exec(cmdArray);\n+\n+        Process process = Runtime.getRuntime().exec(cmdArray);", "originalCommit": "2dad2221bee92b0a31f57d706be5b1081c27bef7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY4OTM1Ng==", "url": "https://github.com/JabRef/jabref/pull/5945#discussion_r379689356", "bodyText": "That's totally weird as to what I read about is that the process is executed and only if you call waitFor the app blocks. https://www.javaworld.com/article/2071275/when-runtime-exec---won-t.html\nAnd the stream gobbler is there to capture the output", "author": "Siedlerchr", "createdAt": "2020-02-14T23:33:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY4MDU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgwODYzOA==", "url": "https://github.com/JabRef/jabref/pull/5945#discussion_r379808638", "bodyText": "Strange... can you please try the ProcessBuilder, which anyway seems to be the preferred way to start subprocesses. https://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html", "author": "tobiasdiez", "createdAt": "2020-02-15T08:44:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY4MDU4Mw=="}], "type": "inlineReview"}, {"oid": "fa516acde2068a10fede07b28e657593407776c0", "url": "https://github.com/JabRef/jabref/commit/fa516acde2068a10fede07b28e657593407776c0", "message": "add to other open method as well", "committedDate": "2020-02-14T23:41:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTM5NzI2Ng==", "url": "https://github.com/JabRef/jabref/pull/5945#discussion_r381397266", "bodyText": "Does this need to be closed? Do we need try-with-resources here? If not, please add a comment why the buffered reader is not closed.", "author": "koppor", "createdAt": "2020-02-19T16:39:54Z", "path": "src/main/java/org/jabref/gui/util/StreamGobbler.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package org.jabref.gui.util;\n+\n+import java.io.BufferedReader;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.util.function.Consumer;\n+\n+public class StreamGobbler implements Runnable {\n+\n+    private InputStream inputStream;\n+    private Consumer<String> consumer;\n+\n+    public StreamGobbler(InputStream inputStream, Consumer<String> consumer) {\n+        this.inputStream = inputStream;\n+        this.consumer = consumer;\n+    }\n+\n+    @Override\n+    public void run() {\n+        new BufferedReader(new InputStreamReader(inputStream)).lines().forEach(consumer);", "originalCommit": "fa516acde2068a10fede07b28e657593407776c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQwMDY1NQ==", "url": "https://github.com/JabRef/jabref/pull/5945#discussion_r381400655", "bodyText": "Please add a new line at the end of the file", "author": "koppor", "createdAt": "2020-02-19T16:44:49Z", "path": "src/main/java/org/jabref/gui/util/StreamGobbler.java", "diffHunk": "@@ -0,0 +1,22 @@\n+package org.jabref.gui.util;\n+\n+import java.io.BufferedReader;\n+import java.io.InputStream;\n+import java.io.InputStreamReader;\n+import java.util.function.Consumer;\n+\n+public class StreamGobbler implements Runnable {\n+\n+    private InputStream inputStream;\n+    private Consumer<String> consumer;\n+\n+    public StreamGobbler(InputStream inputStream, Consumer<String> consumer) {\n+        this.inputStream = inputStream;\n+        this.consumer = consumer;\n+    }\n+\n+    @Override\n+    public void run() {\n+        new BufferedReader(new InputStreamReader(inputStream)).lines().forEach(consumer);\n+    }\n+}", "originalCommit": "fa516acde2068a10fede07b28e657593407776c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3a54d22dff3a52dd177f36f0c7b7f9558bc5c6d2", "url": "https://github.com/JabRef/jabref/commit/3a54d22dff3a52dd177f36f0c7b7f9558bc5c6d2", "message": "Merge remote-tracking branch 'upstream/master' into linuxOutputstream\n\n* upstream/master:\n  followup fix\n  Fixfetcher (#5948)\n  Bump byte-buddy-parent from 1.10.7 to 1.10.8 (#5952)\n  Added MenuButtons to IntegrityCheckDialog (#5955)\n  Reimplement custom entry types dialog (#5799)\n  Bump unirest-java from 3.4.03 to 3.5.00 (#5953)\n  MySQL: Allow public key retrieval (#5909)\n  Restructure and improve docs for setting up IntelliJ (#5960)\n  Change syntax for Oracle multi-row insert SQL statement (#5837)\n  Bump classgraph from 4.8.62 to 4.8.64 (#5954)\n  Squashed 'src/main/resources/csl-styles/' changes from c5315283dd..9e818577ab\n  Fix not escaping special characters in search pattern (#5938)", "committedDate": "2020-02-19T18:17:59Z", "type": "commit"}, {"oid": "032b063ae315bc71b981e592eb0069281f464962", "url": "https://github.com/JabRef/jabref/commit/032b063ae315bc71b981e592eb0069281f464962", "message": "use process builder and close reader", "committedDate": "2020-02-19T18:30:32Z", "type": "commit"}]}