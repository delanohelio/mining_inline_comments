{"pr_number": 6475, "pr_title": "Fixed #6472 that multiple background task popups stacked over each other", "pr_createdAt": "2020-05-13T13:43:39Z", "pr_url": "https://github.com/JabRef/jabref/pull/6475", "timeline": [{"oid": "a05cbbdfb6873c17c4b228d5ca02899a1b55cea7", "url": "https://github.com/JabRef/jabref/commit/a05cbbdfb6873c17c4b228d5ca02899a1b55cea7", "message": "fix https://github.com/JabRef/jabref/issues/6127\n\nadd concise tips when SaveException happend", "committedDate": "2020-05-07T23:52:32Z", "type": "commit"}, {"oid": "1409dff18287c3be2dddff2334bb919f3d5fbe0f", "url": "https://github.com/JabRef/jabref/commit/1409dff18287c3be2dddff2334bb919f3d5fbe0f", "message": "Update SaveDatabaseAction.java\n\nadd space...", "committedDate": "2020-05-07T23:59:50Z", "type": "commit"}, {"oid": "ac009e6c465fe5efda7b893b9e98df6356c85048", "url": "https://github.com/JabRef/jabref/commit/ac009e6c465fe5efda7b893b9e98df6356c85048", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-13T11:36:19Z", "type": "commit"}, {"oid": "c995fb92ce082c1acd092cbfc66bcecbcedd16b8", "url": "https://github.com/JabRef/jabref/commit/c995fb92ce082c1acd092cbfc66bcecbcedd16b8", "message": "fixed https://github.com/JabRef/jabref/issues/6472\n\nfixed the problem that multiple background task popups stacked over each other.\n\nAdded a globle PopOver variable to hide existed PopOver(if any).", "committedDate": "2020-05-13T13:33:29Z", "type": "commit"}, {"oid": "86684fb9b1ee9a7fd0515960cd629443e4b1f034", "url": "https://github.com/JabRef/jabref/commit/86684fb9b1ee9a7fd0515960cd629443e4b1f034", "message": "Update CHANGELOG.md", "committedDate": "2020-05-13T13:43:50Z", "type": "commit"}, {"oid": "c18f92885a9f8dde451979b9c52669c76f066d47", "url": "https://github.com/JabRef/jabref/commit/c18f92885a9f8dde451979b9c52669c76f066d47", "message": "checkstyle fix", "committedDate": "2020-05-13T13:55:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDk4ODg1OA==", "url": "https://github.com/JabRef/jabref/pull/6475#discussion_r424988858", "bodyText": "Another option would be to reuse the existing pop over and only change the content. That is:\nif (existedProgressViewPopOver == null) {\n   existedProgressViewPopOver = new ...\n} else {\n   existedProgressViewPopOver.setContentNode(taskProgressView).\n}\n\nThis should be a slightly better user experience as there is no flicker of hiding/showing a new pop over.\nThen you can also rename the global variable to progressViewPopOver", "author": "tobiasdiez", "createdAt": "2020-05-14T09:13:16Z", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -988,10 +989,14 @@ hide it and clip it to a square of (width x width) each time width is updated.\n             taskProgressView.setGraphicFactory(BackgroundTask::getIcon);\n \n             PopOver progressViewPopOver = new PopOver(taskProgressView);\n+            if (this.existedProgressViewPopOver == null) {\n+                this.existedProgressViewPopOver = progressViewPopOver;\n+            }\n             progressViewPopOver.setTitle(Localization.lang(\"Background Tasks\"));\n             progressViewPopOver.setArrowLocation(PopOver.ArrowLocation.RIGHT_TOP);\n-\n+            this.existedProgressViewPopOver.hide();", "originalCommit": "c18f92885a9f8dde451979b9c52669c76f066d47", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1MDg3NA==", "url": "https://github.com/JabRef/jabref/pull/6475#discussion_r425150874", "bodyText": "In this context, it would be nice if the progress button serves as a toggle: if the pop over is currently shown, and the button is clicked again then the pop over should be hidden.", "author": "tobiasdiez", "createdAt": "2020-05-14T13:48:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDk4ODg1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjg2NDA1Mw==", "url": "https://github.com/JabRef/jabref/pull/6475#discussion_r432864053", "bodyText": "Yes, that's great! I have made the change, it works.", "author": "chenyuheng", "createdAt": "2020-05-30T15:30:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDk4ODg1OA=="}], "type": "inlineReview"}, {"oid": "a58c67eb93810633094c0cd4c3ae701df56a66e3", "url": "https://github.com/JabRef/jabref/commit/a58c67eb93810633094c0cd4c3ae701df56a66e3", "message": "make the progress button a toggle\n\nAs tobiasdiez suggests in https://github.com/JabRef/jabref/pull/6475", "committedDate": "2020-05-30T15:26:08Z", "type": "commit"}, {"oid": "ba67c5b09f28e9daaf4847a724d8f719a64d45d7", "url": "https://github.com/JabRef/jabref/commit/ba67c5b09f28e9daaf4847a724d8f719a64d45d7", "message": "Merge branch 'master' into master", "committedDate": "2020-05-30T15:27:22Z", "type": "commit"}, {"oid": "4d88f3a42dbb658c33246f7502ddb9ca332ad07f", "url": "https://github.com/JabRef/jabref/commit/4d88f3a42dbb658c33246f7502ddb9ca332ad07f", "message": "remove unneeded comment", "committedDate": "2020-05-30T15:59:48Z", "type": "commit"}]}