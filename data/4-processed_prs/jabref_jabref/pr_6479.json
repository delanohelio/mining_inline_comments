{"pr_number": 6479, "pr_title": "Fixes generated bibtex key and display of institute authors", "pr_createdAt": "2020-05-14T12:52:53Z", "pr_url": "https://github.com/JabRef/jabref/pull/6479", "timeline": [{"oid": "fd405cf1600bb2fb4225c3fef34cfd3580b04e75", "url": "https://github.com/JabRef/jabref/commit/fd405cf1600bb2fb4225c3fef34cfd3580b04e75", "message": "Fix Pattern.compile for frequently used regexes", "committedDate": "2020-05-13T15:06:51Z", "type": "commit"}, {"oid": "a6354e39e96938e731f59e166c876d9fe32432a6", "url": "https://github.com/JabRef/jabref/commit/a6354e39e96938e731f59e166c876d9fe32432a6", "message": "Fix one additional Pattern.compile", "committedDate": "2020-05-13T17:07:16Z", "type": "commit"}, {"oid": "149ed4f18e55d451b6335f6740e9a70b84cf221b", "url": "https://github.com/JabRef/jabref/commit/149ed4f18e55d451b6335f6740e9a70b84cf221b", "message": "Fix style and unnecessary escape sequences", "committedDate": "2020-05-13T17:09:49Z", "type": "commit"}, {"oid": "b57f1b2e970fc30f41cd6e307863f10d93e4e1f8", "url": "https://github.com/JabRef/jabref/commit/b57f1b2e970fc30f41cd6e307863f10d93e4e1f8", "message": "Fix invalid index in call to substring\n\nThe original condition is evaluated to false.\nThe substring is shorter than \"uni\".", "committedDate": "2020-05-13T17:13:16Z", "type": "commit"}, {"oid": "fae093bb05f79ea69ffca36abf96cc237aa1931e", "url": "https://github.com/JabRef/jabref/commit/fae093bb05f79ea69ffca36abf96cc237aa1931e", "message": "Refactor name and javadoc of a regex", "committedDate": "2020-05-13T17:34:21Z", "type": "commit"}, {"oid": "5a23a9a09c485f5beefbb8607d3bcb86d3d659a3", "url": "https://github.com/JabRef/jabref/commit/5a23a9a09c485f5beefbb8607d3bcb86d3d659a3", "message": "Fix use of compiled regex for matching department", "committedDate": "2020-05-13T17:35:52Z", "type": "commit"}, {"oid": "6af8c7e3549eca925967476c737e919a990d4f01", "url": "https://github.com/JabRef/jabref/commit/6af8c7e3549eca925967476c737e919a990d4f01", "message": "Fix check for uppercase letter\n\nPerhaps the assumption should be that the letters are ASCII.\nIf all letters are ASCII checking 'A' <= k.charAt(0) <= 'Z'\nmight make more sense.\nI am not convinced about doing this with a regex.", "committedDate": "2020-05-13T17:38:41Z", "type": "commit"}, {"oid": "716f885e97a49433853aeb0c73064e7d25a4faae", "url": "https://github.com/JabRef/jabref/commit/716f885e97a49433853aeb0c73064e7d25a4faae", "message": "Fix usage of uncompiled regex", "committedDate": "2020-05-13T19:06:24Z", "type": "commit"}, {"oid": "cdfd56a1b2f50f9b781e7129e45dc3d9e61c1967", "url": "https://github.com/JabRef/jabref/commit/cdfd56a1b2f50f9b781e7129e45dc3d9e61c1967", "message": "Fix readability?", "committedDate": "2020-05-13T20:44:59Z", "type": "commit"}, {"oid": "b227edb72040f1e3b5184d35faa9bea24dd4429e", "url": "https://github.com/JabRef/jabref/commit/b227edb72040f1e3b5184d35faa9bea24dd4429e", "message": "Add test cases\n\nBoth test cases involves an author name containing department or school\n without university or institute of technology.", "committedDate": "2020-05-13T21:25:52Z", "type": "commit"}, {"oid": "ef7f9798339d53f28e64c7801dab0eb0b6099724", "url": "https://github.com/JabRef/jabref/commit/ef7f9798339d53f28e64c7801dab0eb0b6099724", "message": "Fix `null` appearing as part of author name\n\nCorporate authors without university/institute of technology", "committedDate": "2020-05-13T21:29:12Z", "type": "commit"}, {"oid": "9ac3993cb84e814ef3318ab12bf79461a6c1a84b", "url": "https://github.com/JabRef/jabref/commit/9ac3993cb84e814ef3318ab12bf79461a6c1a84b", "message": "Refactor name of capital regex pattern", "committedDate": "2020-05-14T12:57:07Z", "type": "commit"}, {"oid": "85c96ceecd81f2b43c2eb2480ab37ab07b97f062", "url": "https://github.com/JabRef/jabref/commit/85c96ceecd81f2b43c2eb2480ab37ab07b97f062", "message": "Merge branch 'master' into fix-for-issue-6459\n\n# Conflicts:\n#\tsrc/main/java/org/jabref/logic/bibtexkeypattern/BracketedPattern.java", "committedDate": "2020-05-15T17:23:13Z", "type": "commit"}, {"oid": "6ded410cdfc14fd4100080face795204a07e25bd", "url": "https://github.com/JabRef/jabref/commit/6ded410cdfc14fd4100080face795204a07e25bd", "message": "Add debug output for reordering of names in fields", "committedDate": "2020-05-15T18:50:20Z", "type": "commit"}, {"oid": "e8c3007c7160d02e7c730683131ea57636728927", "url": "https://github.com/JabRef/jabref/commit/e8c3007c7160d02e7c730683131ea57636728927", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-18T18:02:38Z", "type": "commit"}, {"oid": "72eb1fe361426bf5d46679ccea1330487ad49b9d", "url": "https://github.com/JabRef/jabref/commit/72eb1fe361426bf5d46679ccea1330487ad49b9d", "message": "Add helper methods", "committedDate": "2020-05-18T19:33:11Z", "type": "commit"}, {"oid": "2eee8dd9768091649c7ca815beed10b161f6c6e5", "url": "https://github.com/JabRef/jabref/commit/2eee8dd9768091649c7ca815beed10b161f6c6e5", "message": "Fix missing negation in \"uni\" matching", "committedDate": "2020-05-18T20:31:10Z", "type": "commit"}, {"oid": "cc540298ab5ddceb0ed3b85599817ff3cd862a2f", "url": "https://github.com/JabRef/jabref/commit/cc540298ab5ddceb0ed3b85599817ff3cd862a2f", "message": "Fix test cases for corporate authors", "committedDate": "2020-05-18T20:33:54Z", "type": "commit"}, {"oid": "1063ae1c721def7edcf845a942c97575f825eb1e", "url": "https://github.com/JabRef/jabref/commit/1063ae1c721def7edcf845a942c97575f825eb1e", "message": "Fix to keep all uppercase letters in abbreviation", "committedDate": "2020-05-19T13:56:29Z", "type": "commit"}, {"oid": "ef94758a932e3dd171530352aa48551dbaa107cf", "url": "https://github.com/JabRef/jabref/commit/ef94758a932e3dd171530352aa48551dbaa107cf", "message": "Fix commented out code", "committedDate": "2020-05-19T14:06:52Z", "type": "commit"}, {"oid": "e80bd8be5e8dd9f5d3f60a189b862ea7579047bb", "url": "https://github.com/JabRef/jabref/commit/e80bd8be5e8dd9f5d3f60a189b862ea7579047bb", "message": "Fix key for institution's name containing keyword\n\nIf the name of an institution can't be split, assume that\n\"School\"/\"Department\" is part of the name.", "committedDate": "2020-05-19T14:54:30Z", "type": "commit"}, {"oid": "a0ed455bd7d164fd37d30dcbcbd9abfe0d4f02eb", "url": "https://github.com/JabRef/jabref/commit/a0ed455bd7d164fd37d30dcbcbd9abfe0d4f02eb", "message": "Fix test case for short institution name", "committedDate": "2020-05-19T15:10:15Z", "type": "commit"}, {"oid": "4db082435d021941ada53c8091de5786dac38480", "url": "https://github.com/JabRef/jabref/commit/4db082435d021941ada53c8091de5786dac38480", "message": "Refactor check for institution types", "committedDate": "2020-05-19T15:11:35Z", "type": "commit"}, {"oid": "383fc14680a90c8d77e8739e60ce9f6294895812", "url": "https://github.com/JabRef/jabref/commit/383fc14680a90c8d77e8739e60ce9f6294895812", "message": "Refactor comments and names improving readability?", "committedDate": "2020-05-19T15:28:13Z", "type": "commit"}, {"oid": "c3e5f097f843288a4aa38d833062c8384c2880f1", "url": "https://github.com/JabRef/jabref/commit/c3e5f097f843288a4aa38d833062c8384c2880f1", "message": "Refactor to improve readability and closure", "committedDate": "2020-05-19T15:39:37Z", "type": "commit"}, {"oid": "5990c2a248f63283cd676449c4f89f63968baf2a", "url": "https://github.com/JabRef/jabref/commit/5990c2a248f63283cd676449c4f89f63968baf2a", "message": "Fix JavaDoc\n\nMinor typos and the \"rest\" part is now created differently.", "committedDate": "2020-05-19T16:00:04Z", "type": "commit"}, {"oid": "0df3cdbdf6730ae2d82c8fb2c0d9e7ca3e3cd683", "url": "https://github.com/JabRef/jabref/commit/0df3cdbdf6730ae2d82c8fb2c0d9e7ca3e3cd683", "message": "Fix JavaDoc typos", "committedDate": "2020-05-19T16:02:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzQzOTUxMQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r427439511", "bodyText": "Maybe better to return an empty string instead of null in the orElse part", "author": "Siedlerchr", "createdAt": "2020-05-19T16:32:43Z", "path": "src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java", "diffHunk": "@@ -119,17 +123,30 @@ public BibEntry getEntry() {\n                 boolean isName = false;\n \n                 Optional<String> content = Optional.empty();\n+                Field anEntry = null;\n                 for (Field field : fields) {\n                     content = entry.getResolvedFieldOrAliasLatexFree(field, database);\n                     if (content.isPresent()) {\n+                        anEntry = field;\n                         isName = field.getProperties().contains(FieldProperty.PERSON_NAMES);\n                         break;\n                     }\n                 }\n \n                 String result = content.orElse(null);\n                 if (isName) {\n-                    return nameFormatter.formatName(result);\n+                    String latexFreeBeforeNameFormatter = nameFormatter.formatName(result);\n+\n+                    String unformattedName = entry.getResolvedFieldOrAlias(anEntry, database).orElse(null);", "originalCommit": "0df3cdbdf6730ae2d82c8fb2c0d9e7ca3e3cd683", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f0d9601b9d479a7ec2fb72e4df5ba638f3260fb5", "url": "https://github.com/JabRef/jabref/commit/f0d9601b9d479a7ec2fb72e4df5ba638f3260fb5", "message": "Fix preliminary order for authors -> latexfree", "committedDate": "2020-05-19T21:04:26Z", "type": "commit"}, {"oid": "6f26a736129aeb2002290cbaa1d65470b314c964", "url": "https://github.com/JabRef/jabref/commit/6f26a736129aeb2002290cbaa1d65470b314c964", "message": "Drop logger", "committedDate": "2020-05-19T21:12:39Z", "type": "commit"}, {"oid": "9b717c5b448bb18f26c872bc42207a142d491453", "url": "https://github.com/JabRef/jabref/commit/9b717c5b448bb18f26c872bc42207a142d491453", "message": "Add convenience methods for cached latexfree names", "committedDate": "2020-05-20T13:45:07Z", "type": "commit"}, {"oid": "5ed9c54abbac1b632d7500e78cda8649268e6b6f", "url": "https://github.com/JabRef/jabref/commit/5ed9c54abbac1b632d7500e78cda8649268e6b6f", "message": "Add name format method for names containing latex", "committedDate": "2020-05-20T13:48:04Z", "type": "commit"}, {"oid": "d6e9e7035c198199a0ca4ac7b7adf9d8679ecece", "url": "https://github.com/JabRef/jabref/commit/d6e9e7035c198199a0ca4ac7b7adf9d8679ecece", "message": "Add call to formatNameLatexFree", "committedDate": "2020-05-20T13:51:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA0MTUyMw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r428041523", "bodyText": "The changes in AuthorList are intended to create a similar behaviour to the already existing getAsNatBib. An alternative would be to create the cache as a weakhashmap in MainTableNameFormatter (and move the functionality from model to gui if that is appropriate)", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-20T14:07:45Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -11,6 +11,8 @@\n import java.util.WeakHashMap;\n import java.util.stream.Collectors;\n \n+import org.jabref.model.strings.LatexToUnicodeAdapter;\n+", "originalCommit": "d6e9e7035c198199a0ca4ac7b7adf9d8679ecece", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODEwMjM3OQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r428102379", "bodyText": "I think it's reasonable to have it in the AuthorList class.", "author": "Siedlerchr", "createdAt": "2020-05-20T15:25:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA0MTUyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE2NjIzNg==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r428166236", "bodyText": "Good! Then I will start writing test cases for it and see if I can find something that doesn't work :)\nThank you for taking a look at it!", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-20T16:56:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODA0MTUyMw=="}], "type": "inlineReview"}, {"oid": "2dc664de4522dd58c0e427a3c03172a9ebb22134", "url": "https://github.com/JabRef/jabref/commit/2dc664de4522dd58c0e427a3c03172a9ebb22134", "message": "Fix unclear statement in JavaDoc", "committedDate": "2020-05-20T14:42:58Z", "type": "commit"}, {"oid": "f0fd4f1cb84007b0cb7e490313d68b5db217519f", "url": "https://github.com/JabRef/jabref/commit/f0fd4f1cb84007b0cb7e490313d68b5db217519f", "message": "Fix to only keep the first character of each word\n\nThere are some examples that will turn out wrong if only capital letters\n are kept, e.g., \"iOS Developer University Program\".\n The original problem with \"The School of Life\" becoming too short is\n avoided by only removing school/department for names containing two or\n  more ',' separated strings. This will still produce an unexpected\n   result if the address of the institution is part of the authors field", "committedDate": "2020-05-20T17:47:10Z", "type": "commit"}, {"oid": "feebf8152671d0d212c1fbdf0e744fbaefe3f1e9", "url": "https://github.com/JabRef/jabref/commit/feebf8152671d0d212c1fbdf0e744fbaefe3f1e9", "message": "Add latexfree Natbib test cases", "committedDate": "2020-05-21T22:14:36Z", "type": "commit"}, {"oid": "d4c2ce38c48e8af98ecf2a0e70dd763d540a3352", "url": "https://github.com/JabRef/jabref/commit/d4c2ce38c48e8af98ecf2a0e70dd763d540a3352", "message": "Fix typo in latex-free test cases", "committedDate": "2020-05-21T22:17:39Z", "type": "commit"}, {"oid": "04abe5e45fa5d01edb2f4c358907759326fa1e14", "url": "https://github.com/JabRef/jabref/commit/04abe5e45fa5d01edb2f4c358907759326fa1e14", "message": "Add Natbib test with escaped brackets", "committedDate": "2020-05-22T13:08:46Z", "type": "commit"}, {"oid": "3f3ef6270fb4461a92a9cd3de0dc2ddfe4196e11", "url": "https://github.com/JabRef/jabref/commit/3f3ef6270fb4461a92a9cd3de0dc2ddfe4196e11", "message": "Add Natbib institution test with escaped brackets", "committedDate": "2020-05-22T13:26:26Z", "type": "commit"}, {"oid": "f4fbec134bc6de3e3dad7756df021b1b0f49e54d", "url": "https://github.com/JabRef/jabref/commit/f4fbec134bc6de3e3dad7756df021b1b0f49e54d", "message": "Add test for latex-free comma separated lastnames", "committedDate": "2020-05-22T13:43:08Z", "type": "commit"}, {"oid": "a256fa810abc0ae03d1175a03b769c9e579fb466", "url": "https://github.com/JabRef/jabref/commit/a256fa810abc0ae03d1175a03b769c9e579fb466", "message": "Add test for latex-free comma separated first name\n\nFirst name first and abbreviated first name first", "committedDate": "2020-05-22T14:08:06Z", "type": "commit"}, {"oid": "4961c534e9feae10a213f82a1a4a1f1c4b058078", "url": "https://github.com/JabRef/jabref/commit/4961c534e9feae10a213f82a1a4a1f1c4b058078", "message": "Add test for latex-free comma separated last name\n\nLast name first and abbreviated first names", "committedDate": "2020-05-22T14:21:17Z", "type": "commit"}, {"oid": "a443db07282ee198365dc080fdbd3faaca603b1c", "url": "https://github.com/JabRef/jabref/commit/a443db07282ee198365dc080fdbd3faaca603b1c", "message": "Fix adherence to JavaDoc and readability(?)", "committedDate": "2020-05-22T14:46:55Z", "type": "commit"}, {"oid": "dd492e61922a89717f984e9f00d585d980ab7617", "url": "https://github.com/JabRef/jabref/commit/dd492e61922a89717f984e9f00d585d980ab7617", "message": "Fix readability(?)", "committedDate": "2020-05-22T18:01:33Z", "type": "commit"}, {"oid": "71e45d48e9b2d4c0ffd997044fc6873094cce19d", "url": "https://github.com/JabRef/jabref/commit/71e45d48e9b2d4c0ffd997044fc6873094cce19d", "message": "Fix CheckStyle issues\n\nThe deprecated static methods BibtexKeyGenerator.generateKey are moved\nto the test file as a similar convenience method is required for\nthe test cases. Suppress warning has been added for some methods.", "committedDate": "2020-05-22T20:12:33Z", "type": "commit"}, {"oid": "2748dcd5962d7cca651f9d7223e2278396cdafe7", "url": "https://github.com/JabRef/jabref/commit/2748dcd5962d7cca651f9d7223e2278396cdafe7", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-22T20:23:27Z", "type": "commit"}, {"oid": "3b0dda3af6bd2d3ea90dad99f73c0377d1af603c", "url": "https://github.com/JabRef/jabref/commit/3b0dda3af6bd2d3ea90dad99f73c0377d1af603c", "message": "Fix CHANGELOG.md", "committedDate": "2020-05-22T20:29:55Z", "type": "commit"}, {"oid": "78b66f7d9206224c7b48f70baee1219eeed7e6d4", "url": "https://github.com/JabRef/jabref/commit/78b66f7d9206224c7b48f70baee1219eeed7e6d4", "message": "Fix mistake in BibtexKeyGeneratorTest\n\ngenerateKey was not copy-pasted properly.", "committedDate": "2020-05-22T20:45:20Z", "type": "commit"}, {"oid": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "url": "https://github.com/JabRef/jabref/commit/55ef8e7bede442fe2de7ab5c453d067205e0befc", "message": "Add test for oxford comma", "committedDate": "2020-05-24T14:40:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3ODYyNw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430078627", "bodyText": "The old formatName method is still used?", "author": "tobiasdiez", "createdAt": "2020-05-25T21:26:39Z", "path": "src/main/java/org/jabref/gui/maintable/MainTableNameFormatter.java", "diffHunk": "@@ -19,6 +19,31 @@\n         abbrAuthorNames = preferences.getBoolean(JabRefPreferences.ABBR_AUTHOR_NAMES);\n     }\n \n+    /**\n+     * Format a name field for the table, according to user preferences and with latex expressions translated if\n+     * possible.\n+     *\n+     * @param nameToFormat The contents of the name field.\n+     * @return The formatted name field.\n+     */\n+    public String formatNameLatexFree(final String nameToFormat) {", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM5MjA4OQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430392089", "bodyText": "I don't think so.\nI have been avoiding removing functionality or methods. As I am very junior, from a Java experience point of view, I was hoping that it would make reviewing and merging my code easier. If it has the opposite effect, I'll try to be more aggressive in adding, removing, and reformatting :P", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T12:58:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3ODYyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk1Nzg4OA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430957888", "bodyText": "Thanks, that's a good approach and indeed makes reviewing easier. However, if you a method is no longer used you can safely remove it.", "author": "tobiasdiez", "createdAt": "2020-05-27T08:49:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3ODYyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3OTEzMQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430079131", "bodyText": "Enum should have normal capitalization, i.e. Institution. The same holds true for the enum values", "author": "tobiasdiez", "createdAt": "2020-05-25T21:29:21Z", "path": "src/main/java/org/jabref/logic/bibtexkeypattern/BracketedPattern.java", "diffHunk": "@@ -41,9 +43,54 @@\n public class BracketedPattern {\n     private static final Logger LOGGER = LoggerFactory.getLogger(BracketedPattern.class);\n \n-    private static final String STARTING_CAPITAL_PATTERN = \"[^A-Z]\";\n     private static final int CHARS_OF_FIRST = 5;\n-    private static final Pattern REGEX_PATTERN = Pattern.compile(\".*\\\\(\\\\{([A-Z]+)\\\\}\\\\).*\");\n+\n+    /** Matches everything that is not an uppercase ASCII letter */\n+    private static final Pattern NOT_CAPITAL_FIRST_CHARACTER = Pattern.compile(\"[^A-Z]\");\n+    /** Matches with \"({[A-Z]}+)\", which should be used to abbreviate the name of an institution */\n+    private static final Pattern ABBREVIATIONS = Pattern.compile(\".*\\\\(\\\\{[A-Z]+}\\\\).*\");\n+    /** Matches with \"dep\"/\"dip\", case insensitive */\n+    private static final Pattern DEPARTMENTS = Pattern.compile(\"^d[ei]p.*\", Pattern.CASE_INSENSITIVE);\n+    private enum INSTITUTION {", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM3OTY2MA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430379660", "bodyText": "@tobiasdiez  No! In java Enum values are all Uppercase see here:\n\nBecause they are constants, the names of an enum type's fields are in uppercase letters.\nhttps://docs.oracle.com/javase/tutorial/java/javaOO/enum.html", "author": "Siedlerchr", "createdAt": "2020-05-26T12:38:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3OTEzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQwMTUwNw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430401507", "bodyText": "Good catch and thanks for the link! Updating INSTITUTION -> Institution and I'll try to add it to my checkstyle. Hopefully I'll never leave that in again o.O", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T13:13:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3OTEzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA3OTQ5NA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430079494", "bodyText": "I'm not a big fan of the fix... methods (I know you didn't introduced them) and would propose to inline all of them. With a bit of refactoring and extracting AuthorList.parse(authors) this shouldn't introduce that much more code elsewhere.", "author": "tobiasdiez", "createdAt": "2020-05-25T21:31:33Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -227,6 +233,15 @@ public static String fixAuthorFirstNameFirstCommas(String authors, boolean abbr,\n         return AuthorList.parse(authors).getAsFirstLastNames(abbr, oxfordComma);\n     }\n \n+    /**\n+     * This is a convenience method for getAuthorsFirstFirstLatexFree()\n+     *\n+     * @see AuthorList#getAsFirstLastNames\n+     */\n+    public static String fixAuthorFirstNameFirstCommasLatexFree(String authors, boolean abbr, boolean oxfordComma) {", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDg0Nw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430080847", "bodyText": "Thanks for adding so many tests. This is really good. I would propose to split them a bit into two categories: tests for parsing and test for representation. The former should take a string and test against a AuthorList. The latter should take a AuthorList and test against a string. In this way, problems can be diagnosed more easily as it is clear in which part of the code the problem occurs.\n(I'm aware that the existing tests also often don't adhere to this splitting...that's the problem with legacy code :( )", "author": "tobiasdiez", "createdAt": "2020-05-25T21:39:56Z", "path": "src/test/java/org/jabref/model/entry/AuthorListTest.java", "diffHunk": "@@ -31,6 +41,82 @@ public void testFixAuthorNatbib() {\n                         .fixAuthorNatbib(\"John von Neumann and John Smith and Black Brown, Peter\")));\n     }\n \n+    @Test\n+    public void fixAuthorNatbibLatexFreeNullAuthorStringThrowsException() {\n+        assertThrows(NullPointerException.class, () -> AuthorList.fixAuthorNatbibLatexFree(null));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeEmptyAuthorStringForEmptyInput() {\n+        assertEquals(\"\", AuthorList.fixAuthorNatbibLatexFree(\"\"));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeCachesLatexFreeString() {\n+        String cachedString = AuthorList\n+                .fixAuthorNatbibLatexFree(MUHAMMAD_ALKHWARIZMI);\n+        assertSame(cachedString, AuthorList\n+                .fixAuthorNatbibLatexFree(MUHAMMAD_ALKHWARIZMI));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeOneAuthorNameFromLatex() {\n+        assertEquals(\"al-Khw\u0101rizm\u012b\",\n+                AuthorList.fixAuthorNatbibLatexFree(MUHAMMAD_ALKHWARIZMI));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeTwoAuthorNamesFromLatex() {\n+        assertEquals(\"al-Khw\u0101rizm\u012b and B\u00f6hm\",\n+                AuthorList.fixAuthorNatbibLatexFree(MUHAMMAD_ALKHWARIZMI\n+                + \" and \" + CORRADO_BOHM));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeAuthorEtAlFromLatex() {\n+        assertEquals(\"al-Khw\u0101rizm\u012b et al.\",\n+                AuthorList.fixAuthorNatbibLatexFree(MUHAMMAD_ALKHWARIZMI\n+                        + \" and \" + CORRADO_BOHM + \" and \" + KURT_GODEL));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeOneInsitutionNameFromLatex() {\n+        assertEquals(\"The Ban\u016b M\u016bs\u0101 brothers\",\n+                AuthorList.fixAuthorNatbibLatexFree(BANU_MOSA));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeTwoInsitutionNameFromLatex() {\n+        assertEquals(\"The Ban\u016b M\u016bs\u0101 brothers and The Ban\u016b M\u016bs\u0101 brothers\",\n+                AuthorList.fixAuthorNatbibLatexFree(BANU_MOSA\n+                + \" and \" + BANU_MOSA));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeUnicodeMixedAuthorsFromLatex() {\n+        assertEquals(\"The Ban\u016b M\u016bs\u0101 brothers and B\u00f6hm\",\n+                AuthorList.fixAuthorNatbibLatexFree(BANU_MOSA\n+                + \" and \" + CORRADO_BOHM));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeOneInstitutionWithParanthesisAtStart() {\n+        assertEquals(\"\u0141ukasz Micha\u0142\",\n+                AuthorList.fixAuthorNatbibLatexFree(\"{{\\\\L{}}ukasz Micha\\\\l{}}\"));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeAuthorWithEscapedBrackets() {\n+        assertEquals(\"Mic}h{a\u0142\",\n+                AuthorList.fixAuthorNatbibLatexFree(\"{\\\\L{}}ukasz Mic\\\\}h\\\\{a\\\\l{}\"));\n+    }\n+\n+    @Test\n+    public void fixAuthorNatbibLatexFreeInstituteAuthorWithEscapedBrackets() {", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQxNjgyNg==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430416826", "bodyText": "If I understand you correctly, all the tests I have added belongs to the latter category.\nAnd, under the assumption that I do understand you correctly, I'll see if I can come up with some tests for the former (parsing) category.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T13:35:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk0NTMzNw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430945337", "bodyText": "I think you can easily split the tests you added in these categories. For the parsing, simply parse the new strings Mu{\\\\d{h}}ammad al-Khw{\\\\={a}}rizm{\\\\={i}} etc you added and compare them to the hand-created AuthorList (say MUHAMMAD_ALKHWARIZMI = new AuthorList(...)%. Then the tests you already added can be converted to operate on MUHAMMAD_ALKHWARIZMI  (which is now an AuthorList and no longer the string).", "author": "tobiasdiez", "createdAt": "2020-05-27T08:28:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ1MzE2Nw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r431453167", "bodyText": "I have updated with an attempt at implementing this split. However, I am struggling a bit with creating test cases for parsing as I don't know enough about JabRef/BibTeX/BibLaTeX/Biber.\n\nIn JabRef an author's first name can contain } as in Ku{\\}}rt G{\\\"{o}}del -> Ku}rt G\u00f6del. This doesn't work in any combination* of BibTeX/BibLaTeX/Biber that I have tried.\nThe test case I am trying contains { as in Ku{\\{}rt G{\\\"{o}}del -> Ku{rt G\u00f6del which is not supported by JabRef nor any combination* of BibTeX/BibLaTeX/Biber.\n\nSo for now I am limiting the scope to not include escaped latex brackets. It is a very contrived case that is unlikely to happen, and since I don't understand why it doesn't work I probably shouldn't be writing test cases for it :P\nWith combinations of BibTeX/BibLaTeX/Biber, I mean that I tried BibTeX by itself, BibLaTeX with BibTeX backend, and BibLaTeX with biber backend.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-27T21:28:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDg0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ2NjUyMQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r431466521", "bodyText": "Sounds good to me. I think an escaped bracket in an author name is indeed very rare!", "author": "tobiasdiez", "createdAt": "2020-05-27T21:58:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MDg0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4Mjg2Ng==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430082866", "bodyText": "This now has the problem that latex code in other fields such as the title is no longer resolved. I think the isName check needs to be used before getting the field content.", "author": "tobiasdiez", "createdAt": "2020-05-25T21:52:53Z", "path": "src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java", "diffHunk": "@@ -115,28 +115,27 @@ public BibEntry getEntry() {\n         ObservableValue<String> value = fieldValues.get(fields);\n         if (value != null) {\n             return value;\n-        } else {\n-            value = Bindings.createStringBinding(() -> {\n-                boolean isName = false;\n-\n-                Optional<String> content = Optional.empty();\n-                for (Field field : fields) {\n-                    content = entry.getResolvedFieldOrAliasLatexFree(field, database);\n-                    if (content.isPresent()) {\n-                        isName = field.getProperties().contains(FieldProperty.PERSON_NAMES);\n-                        break;\n-                    }\n-                }\n+        }\n \n-                String result = content.orElse(null);\n-                if (isName) {\n-                    return nameFormatter.formatName(result);\n-                } else {\n-                    return result;\n+        value = Bindings.createStringBinding(() -> {\n+            boolean isName = false;\n+\n+            Optional<String> content = Optional.empty();\n+            for (Field field : fields) {\n+                content = entry.getResolvedFieldOrAlias(field, database);", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM3OTQyNg==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430379426", "bodyText": "This now has the problem that latex code in other fields such as the title is no longer resolved.\n\nThat is not great :P\nI am unable to find where this happens, if you can provide me with an example I can hopefully fix it? I'd guess there is a cached value somewhere that I have missed.\nAssuming it is only a caching mistake I should be able to improve the readability before this is merged into the master.\nMy thoughts regarding the changes were that,\nThe previous behaviour of these lines were to return a resolved and latex-free name (by the isName check) or null. The current behaviour (should be?) to return a resolved and latex-free name or an empty string (\"\"), with lines 133-135 performing the same functionality as the previous isName check.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T12:38:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4Mjg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ4OTIyNw==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430489227", "bodyText": "Scratch that, I found it.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T15:12:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4Mjg2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDYxMzE4Mg==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430613182", "bodyText": "Hum... I ran into an issue similar to #3356. I'll see if I can fix it/open up an issue on it later.", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T18:15:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4Mjg2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MzExMg==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430083112", "bodyText": "You can safely ignore the throws Exception for tests (although the intellj warnings are there). In fact, it's good practice to add this to test methods so that the tests don't need to change if you add an exception to the method under test.", "author": "tobiasdiez", "createdAt": "2020-05-25T21:54:32Z", "path": "src/test/java/org/jabref/logic/bibtexkeypattern/BibtexKeyGeneratorTest.java", "diffHunk": "@@ -996,105 +1042,105 @@ void testcrossrefShorttitleInitials() {\n         database.insertEntry(entry1);\n         entry2.setField(StandardField.TITLE, \"Green Scheduling of Whatever\");\n \n-        assertEquals(\"GSo\", BibtexKeyGenerator.generateKey(entry1, \"shorttitleINI\", database));\n+        assertEquals(\"GSo\", generateKey(entry1, \"shorttitleINI\", database));\n     }\n \n     @Test\n-    void generateKeyStripsColonFromTitle() throws Exception {\n+    void generateKeyStripsColonFromTitle() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"Green Scheduling of: Whatever\");\n-        assertEquals(\"GreenSchedulingOfWhatever\", BibtexKeyGenerator.generateKey(entry, \"title\"));\n+        assertEquals(\"GreenSchedulingOfWhatever\", generateKey(entry, \"title\"));\n     }\n \n     @Test\n-    void generateKeyStripsApostropheFromTitle() throws Exception {\n+    void generateKeyStripsApostropheFromTitle() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"Green Scheduling of `Whatever`\");\n-        assertEquals(\"GreenSchedulingofWhatever\", BibtexKeyGenerator.generateKey(entry, \"title\"));\n+        assertEquals(\"GreenSchedulingofWhatever\", generateKey(entry, \"title\"));\n     }\n \n     @Test\n-    void generateKeyWithOneModifier() throws Exception {\n+    void generateKeyWithOneModifier() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"The Interesting Title\");\n-        assertEquals(\"theinterestingtitle\", BibtexKeyGenerator.generateKey(entry, \"title:lower\"));\n+        assertEquals(\"theinterestingtitle\", generateKey(entry, \"title:lower\"));\n     }\n \n     @Test\n-    void generateKeyWithTwoModifiers() throws Exception {\n+    void generateKeyWithTwoModifiers() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"The Interesting Title\");\n-        assertEquals(\"theinterestingtitle\", BibtexKeyGenerator.generateKey(entry, \"title:lower:(_)\"));\n+        assertEquals(\"theinterestingtitle\", generateKey(entry, \"title:lower:(_)\"));\n     }\n \n     @Test\n-    void generateKeyWithTitleCapitalizeModifier() throws Exception {\n+    void generateKeyWithTitleCapitalizeModifier() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"the InTeresting title longer than THREE words\");\n-        assertEquals(\"TheInterestingTitleLongerThanThreeWords\", BibtexKeyGenerator.generateKey(entry, \"title:capitalize\"));\n+        assertEquals(\"TheInterestingTitleLongerThanThreeWords\", generateKey(entry, \"title:capitalize\"));\n     }\n \n     @Test\n-    void generateKeyWithShortTitleCapitalizeModifier() throws Exception {\n+    void generateKeyWithShortTitleCapitalizeModifier() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"the InTeresting title longer than THREE words\");\n-        assertEquals(\"InterestingTitleLonger\", BibtexKeyGenerator.generateKey(entry, \"shorttitle:capitalize\"));\n+        assertEquals(\"InterestingTitleLonger\", generateKey(entry, \"shorttitle:capitalize\"));\n     }\n \n     @Test\n-    void generateKeyWithTitleTitleCaseModifier() throws Exception {\n+    void generateKeyWithTitleTitleCaseModifier() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"A title WITH some of The key words\");\n-        assertEquals(\"ATitlewithSomeoftheKeyWords\", BibtexKeyGenerator.generateKey(entry, \"title:titlecase\"));\n+        assertEquals(\"ATitlewithSomeoftheKeyWords\", generateKey(entry, \"title:titlecase\"));\n     }\n \n     @Test\n-    void generateKeyWithShortTitleTitleCaseModifier() throws Exception {\n+    void generateKeyWithShortTitleTitleCaseModifier() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.TITLE, \"the InTeresting title longer than THREE words\");\n-        assertEquals(\"InterestingTitleLonger\", BibtexKeyGenerator.generateKey(entry, \"shorttitle:titlecase\"));\n+        assertEquals(\"InterestingTitleLonger\", generateKey(entry, \"shorttitle:titlecase\"));\n     }\n \n     @Test\n-    void generateKeyWithTitleSentenceCaseModifier() throws Exception {\n+    void generateKeyWithTitleSentenceCaseModifier() {", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQyODY5MQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430428691", "bodyText": "I don't have an opinion on this issue. I am, unfortunately, currently using Intellij recommendations to attempt to compensate for a lack of experience :P\nWould you like me to add it to all methods in BibtexKeyGeneratorTest and/or should I keep it in mind for any future changes?", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T13:52:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MzExMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk0MjA4OA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430942088", "bodyText": "It was just a minor remark to keep in mind for the next time.", "author": "tobiasdiez", "createdAt": "2020-05-27T08:23:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4MzExMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NTk5MA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430085990", "bodyText": "We normally try to avoid abbreviations. How ironic... \ud83d\ude09\nBut I can see that this particular abbreviation was used before in other places in this class too, so never mind.\nIf you like, change it in all places in this class.", "author": "calixtus", "createdAt": "2020-05-25T22:14:01Z", "path": "src/main/java/org/jabref/model/entry/AuthorList.java", "diffHunk": "@@ -437,6 +488,17 @@ public String getAsLastNames(boolean oxfordComma) {\n         return authorsLastOnly[abbrInt];\n     }\n \n+    public String getAsLastNamesLatexFree(boolean oxfordComma) {\n+        int abbrInt = oxfordComma ? 0 : 1;", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyNjk3OA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430726978", "bodyText": "I left one abbreviation because I am not really sure what it should be (firstabbr)", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T21:48:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NTk5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczMzM0NQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430733345", "bodyText": "If in doubt, just name it firstAbbreviation \ud83d\ude06", "author": "calixtus", "createdAt": "2020-05-26T22:04:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NTk5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg3Mjg1NA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r431872854", "bodyText": "If in doubt, just name it firstAbbreviation \ud83d\ude06\n\n\ud83d\ude31\nJoke aside. firstAbbreviation is actually an improvement on firstabbr, fair enough \ud83d\ude1d", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-28T14:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NTk5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NjQ4MQ==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430086481", "bodyText": "In other test cases you inline the argument for assertEquals.", "author": "calixtus", "createdAt": "2020-05-25T22:17:26Z", "path": "src/test/java/org/jabref/logic/bibtexkeypattern/BibtexKeyGeneratorTest.java", "diffHunk": "@@ -879,15 +925,15 @@ void keywordNKeywordsSeparatedBySpace() {\n         BibEntry entry = new BibEntry();\n         entry.setField(StandardField.KEYWORDS, \"w1, w2a w2b, w3\");\n \n-        String result = BibtexKeyGenerator.generateKey(entry, \"keyword1\");\n+        String result = generateKey(entry, \"keyword1\");", "originalCommit": "55ef8e7bede442fe2de7ab5c453d067205e0befc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ0MjM0MA==", "url": "https://github.com/JabRef/jabref/pull/6479#discussion_r430442340", "bodyText": "Yes. I don't have much experience with Java programming, therefore I mostly leave the original code unchanged. I try \"pushing my luck\" with readability \"improvements\" in BrackettedPattern.generateInstitutionKey(lines 1312-1429) as a way to balance improving my own Java programming knowledge without adding too much extra work for reviewers.\nAuthorListTest lines 39-41 is another example of where I have left previous code untouched while I'd like to change it to use assertSame.\nRight now, I view my PRs to JabRef as a balancing act. If I am being too cautious or bold, feel free to tell me. I'd be much happier if I leave JabRef's codebase better of without wasting too much time of reviewers :P", "author": "k3KAW8Pnf7mkmdSMPHz27", "createdAt": "2020-05-26T14:10:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDA4NjQ4MQ=="}], "type": "inlineReview"}, {"oid": "237dc35c4e4723a0c5a3df330a9c8b88503114a4", "url": "https://github.com/JabRef/jabref/commit/237dc35c4e4723a0c5a3df330a9c8b88503114a4", "message": "Merge branch 'master' into fix-for-issue-6459", "committedDate": "2020-05-26T12:10:03Z", "type": "commit"}, {"oid": "78fade6b39a45e537932f6ab029795193db7435d", "url": "https://github.com/JabRef/jabref/commit/78fade6b39a45e537932f6ab029795193db7435d", "message": "Fix miss-capitalization of enum", "committedDate": "2020-05-26T13:15:06Z", "type": "commit"}, {"oid": "3de984dcfe2956ef77060f47946a1f007cbee3f5", "url": "https://github.com/JabRef/jabref/commit/3de984dcfe2956ef77060f47946a1f007cbee3f5", "message": "Fix fields not displayed latex-free", "committedDate": "2020-05-26T18:53:45Z", "type": "commit"}, {"oid": "ecac6732788879ed2d2898e48af081fa7397bbfc", "url": "https://github.com/JabRef/jabref/commit/ecac6732788879ed2d2898e48af081fa7397bbfc", "message": "Fix in-line methods in MainTableNameFormatter", "committedDate": "2020-05-26T19:04:30Z", "type": "commit"}, {"oid": "1c4928bbd3b3b051943bccd54e3c88c76231b7d4", "url": "https://github.com/JabRef/jabref/commit/1c4928bbd3b3b051943bccd54e3c88c76231b7d4", "message": "Fix in-line of generateKey() method", "committedDate": "2020-05-26T20:24:26Z", "type": "commit"}, {"oid": "55f3f1826287d14d73c924719f32c92ad6dde713", "url": "https://github.com/JabRef/jabref/commit/55f3f1826287d14d73c924719f32c92ad6dde713", "message": "Fix separating tests into parsing/representation", "committedDate": "2020-05-26T21:28:40Z", "type": "commit"}, {"oid": "e6cda69de72610e492f8623df8d8fd44768fe74c", "url": "https://github.com/JabRef/jabref/commit/e6cda69de72610e492f8623df8d8fd44768fe74c", "message": "Fix cache check and simplify expressions", "committedDate": "2020-05-26T21:32:46Z", "type": "commit"}, {"oid": "2e120fd8b242958c8da3cc6032c97c5dfc1d66d0", "url": "https://github.com/JabRef/jabref/commit/2e120fd8b242958c8da3cc6032c97c5dfc1d66d0", "message": "Drop inlined methods", "committedDate": "2020-05-26T21:33:35Z", "type": "commit"}, {"oid": "8cc947c23f53087b97a05265a9d735e37cabc689", "url": "https://github.com/JabRef/jabref/commit/8cc947c23f53087b97a05265a9d735e37cabc689", "message": "Fix most abbreviated abbreviations", "committedDate": "2020-05-26T21:45:17Z", "type": "commit"}, {"oid": "2fc9e169282e5f5d9d2b0d1a8b5db452521afac2", "url": "https://github.com/JabRef/jabref/commit/2fc9e169282e5f5d9d2b0d1a8b5db452521afac2", "message": "Drop old formatName method", "committedDate": "2020-05-27T17:43:56Z", "type": "commit"}, {"oid": "b4b39937134920e0adc0947d44183fa476190248", "url": "https://github.com/JabRef/jabref/commit/b4b39937134920e0adc0947d44183fa476190248", "message": "Refactor formatNameLatexFree\n\nThe author list parsing is moved outside of the if/else statements", "committedDate": "2020-05-27T17:45:23Z", "type": "commit"}, {"oid": "3cb62328bac5bc0dcf48de337de097aee5c54dd9", "url": "https://github.com/JabRef/jabref/commit/3cb62328bac5bc0dcf48de337de097aee5c54dd9", "message": "Refactor new parse tests", "committedDate": "2020-05-27T17:48:08Z", "type": "commit"}, {"oid": "b3f0d1bbecd6ec1f9de572cb2570b770cd0bd84a", "url": "https://github.com/JabRef/jabref/commit/b3f0d1bbecd6ec1f9de572cb2570b770cd0bd84a", "message": "Add more parse tests", "committedDate": "2020-05-27T21:12:20Z", "type": "commit"}, {"oid": "5a27bbca52dd44d563d81d876a6f7b22f3a49ad6", "url": "https://github.com/JabRef/jabref/commit/5a27bbca52dd44d563d81d876a6f7b22f3a49ad6", "message": "Drop all test cases containing escaped brackets", "committedDate": "2020-05-27T21:28:28Z", "type": "commit"}, {"oid": "c7578b37f605085afb23068d4a615435cef661b4", "url": "https://github.com/JabRef/jabref/commit/c7578b37f605085afb23068d4a615435cef661b4", "message": "Refactor parse with latex tests\n\nMove them close to other parse tests", "committedDate": "2020-05-27T21:31:13Z", "type": "commit"}, {"oid": "b8bf4f374d70dedd9036b5f7ad24edf642f36fae", "url": "https://github.com/JabRef/jabref/commit/b8bf4f374d70dedd9036b5f7ad24edf642f36fae", "message": "Fix my own spelling mistakes", "committedDate": "2020-05-27T21:35:08Z", "type": "commit"}, {"oid": "cc23e29b0c205df2a0f135a80d896cfa4d8cc7ea", "url": "https://github.com/JabRef/jabref/commit/cc23e29b0c205df2a0f135a80d896cfa4d8cc7ea", "message": "Refactor abbreviation name", "committedDate": "2020-05-28T14:14:57Z", "type": "commit"}]}