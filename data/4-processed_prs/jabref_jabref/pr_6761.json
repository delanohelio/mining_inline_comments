{"pr_number": 6761, "pr_title": "Remember last choice of download files in import dialog", "pr_createdAt": "2020-08-13T11:44:39Z", "pr_url": "https://github.com/JabRef/jabref/pull/6761", "timeline": [{"oid": "08f8eab337d2c08e3c66558699fe16075aedce27", "url": "https://github.com/JabRef/jabref/commit/08f8eab337d2c08e3c66558699fe16075aedce27", "message": "Remember last choice of download files in import dialog", "committedDate": "2020-08-13T11:41:30Z", "type": "commit"}, {"oid": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "url": "https://github.com/JabRef/jabref/commit/0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "message": "Fix checkstyle issues", "committedDate": "2020-08-13T11:50:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDAwNDgzMw==", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470004833", "bodyText": "Is there a reason you removed the \"Download linked online files\"`?", "author": "Siedlerchr", "createdAt": "2020-08-13T14:42:49Z", "path": "src/main/java/org/jabref/gui/preferences/ImportTab.fxml", "diffHunk": "@@ -28,8 +27,7 @@\n                   prefWidth=\"300\" minWidth=\"300\" maxWidth=\"300\"/>\n \n         <Label text=\"%File directory pattern\" GridPane.rowIndex=\"1\"/>\n-        <TextField fx:id=\"fileDirPattern\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"1\"\n+        <TextField fx:id=\"fileDirectoryPattern\" GridPane.columnIndex=\"1\" GridPane.rowIndex=\"1\"\n                    prefWidth=\"300\" minWidth=\"300\" maxWidth=\"300\"/>\n-        <CheckBox fx:id=\"downloadLinkedFiles\" text=\"%Download linked online files\" GridPane.rowIndex=\"2\"/>", "originalCommit": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDAxNjc5OA==", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470016798", "bodyText": "Yes, there is no need for this checkbox in the preferences if its also displayed in the dialog anyway.", "author": "tobiasdiez", "createdAt": "2020-08-13T14:59:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDAwNDgzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI4NDI1Mw==", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470284253", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void setShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n          \n          \n            \n                    this.shouldDownloadLinkedFiles = shouldDownloadLinkedFiles;\n          \n          \n            \n                }\n          \n          \n            \n                public FilePreferences withShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n          \n          \n            \n                    return new FilePreferences(this.user,\n          \n          \n            \n                                       this.mainFileDirectory,\n          \n          \n            \n                                       this.bibLocationAsPrimary,\n          \n          \n            \n                                       this.fileNamePattern,\n          \n          \n            \n                                       this.fileDirPattern,\n          \n          \n            \n                                       shouldDownloadLinkedFiles);\n          \n          \n            \n                }", "author": "calixtus", "createdAt": "2020-08-13T22:30:20Z", "path": "src/main/java/org/jabref/model/metadata/FilePreferences.java", "diffHunk": "@@ -52,7 +52,11 @@ public String getFileDirPattern() {\n         return fileDirPattern;\n     }\n \n-    public boolean getDownloadLinkedFiles() {\n-        return downloadLinkedFiles;\n+    public boolean shouldDownloadLinkedFiles() {\n+        return shouldDownloadLinkedFiles;\n+    }\n+\n+    public void setShouldDownloadLinkedFiles(boolean shouldDownloadLinkedFiles) {\n+        this.shouldDownloadLinkedFiles = shouldDownloadLinkedFiles;\n     }", "originalCommit": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDI4Nzk5NA==", "url": "https://github.com/JabRef/jabref/pull/6761#discussion_r470287994", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    filePreferences.setShouldDownloadLinkedFiles(shouldDownloadFiles);\n          \n          \n            \n                    preferences.storeFilePreferences(filePreferences);\n          \n          \n            \n                    storeFilePreferences(filePreferences.withShouldDownloadLinkedFiles(shouldDownloadFiles));", "author": "calixtus", "createdAt": "2020-08-13T22:41:12Z", "path": "src/main/java/org/jabref/gui/importer/ImportEntriesViewModel.java", "diffHunk": "@@ -130,10 +131,15 @@ public void importEntries(List<BibEntry> entriesToImport, boolean downloadFiles)\n             buildImportHandlerThenImportEntries(entriesToImport);\n         }\n \n-        if (downloadFiles) {\n+        // Remember the selection in the dialog\n+        FilePreferences filePreferences = preferences.getFilePreferences();\n+        filePreferences.setShouldDownloadLinkedFiles(shouldDownloadFiles);\n+        preferences.storeFilePreferences(filePreferences);", "originalCommit": "0c22c4bc129db7a1f76c506b23eebfa6151c3dc7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}