{"pr_number": 7232, "pr_title": "Add a more descriptive path when Directory cannot be found", "pr_createdAt": "2020-12-23T05:01:29Z", "pr_url": "https://github.com/JabRef/jabref/pull/7232", "timeline": [{"oid": "ae109f91765e64e68f649ca33a4496a6843fd0de", "url": "https://github.com/JabRef/jabref/commit/ae109f91765e64e68f649ca33a4496a6843fd0de", "message": "added more descriptive path when Directory not found", "committedDate": "2020-12-23T05:00:00Z", "type": "commit"}, {"oid": "8aa35ba49cdd3899c114eae3458aa4c8a6133003", "url": "https://github.com/JabRef/jabref/commit/8aa35ba49cdd3899c114eae3458aa4c8a6133003", "message": "change the message of propmt to: Main file directory not set", "committedDate": "2020-12-24T02:29:04Z", "type": "commit"}, {"oid": "e56896f113b31deb7c897063dc086d91f1d14081", "url": "https://github.com/JabRef/jabref/commit/e56896f113b31deb7c897063dc086d91f1d14081", "message": "Changed message propmt", "committedDate": "2020-12-24T03:00:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r548519405", "bodyText": "It's better and easier for the translators if you put this in one string. See https://devdocs.jabref.org/getting-into-the-code/code-howtos#using-localization-correctly", "author": "Siedlerchr", "createdAt": "2020-12-24T12:41:25Z", "path": "src/main/java/org/jabref/gui/externalfiles/DownloadFullTextAction.java", "diffHunk": "@@ -112,9 +112,9 @@ private void downloadFullTexts(Map<BibEntry, Optional<URL>> downloads, BibDataba\n                 Optional<Path> dir = databaseContext.getFirstExistingFileDir(Globals.prefs.getFilePreferences());\n                 if (dir.isEmpty()) {\n                     dialogService.showErrorDialogAndWait(Localization.lang(\"Directory not found\"),\n-                            Localization.lang(\"Main file directory not set!\") + \" \"\n-                                    + Localization.lang(\"Preferences\")\n-                                    + \" -> \" + Localization.lang(\"File\"));\n+                            Localization.lang(\"Main file directory not set!\\n\")\n+                                    + Localization.lang(\"Check the Preferences (Linked files)\")\n+                                    + Localization.lang(\" or the Library properties.\"));", "originalCommit": "e56896f113b31deb7c897063dc086d91f1d14081", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzODgyMQ==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r548538821", "bodyText": "We should also take care about casing - maybe less is better?\nMain file directory not set. Check the preferences (linked files) or the library properties.", "author": "koppor", "createdAt": "2020-12-24T14:03:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODY5OTMxMg==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r548699312", "bodyText": "Great! I'll work on it", "author": "devjuliet", "createdAt": "2020-12-24T18:54:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTQzMzQ1NA==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549433454", "bodyText": "Changed to one string and also changed the message \ud83d\ude04", "author": "devjuliet", "createdAt": "2020-12-28T17:57:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTY5MzAyNg==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549693026", "bodyText": "Thanks! Now you need to add this to the resources/l10n/en.properties file as well (see the LocalizationConsistencyTest) under l10n.\nWhen the key contains spaces, you need to add a backslash after the word before the space. (see the other entries in the file)", "author": "Siedlerchr", "createdAt": "2020-12-29T12:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc3NDE1MA==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549774150", "bodyText": "Now the test fail complaining that a newline is illegal - see: https://github.com/JabRef/jabref/pull/7232/checks?check_run_id=1618423949#step:6:122\njava.lang.RuntimeException: Main file directory not set.nCheck the preferences (linked files) or the library properties. contains a new line character. As this is a localization key, this is illegal!\n\nYou can try with <br> or <p> in the localization - such as other localizations did. Could you please try and report back?", "author": "koppor", "createdAt": "2020-12-29T16:49:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc3NDkyMw==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549774923", "bodyText": "BTW: Hint: How to read error outputs.\n\nSee the red crosses\n\nExperience in JabRef tells: Click at Details at \"Tests / Unit Tests\"\nExperience tells to scroll up, until one sees a red \"Error\"\n\n\nThen try to understand the error message. I tried to explain the error message at my last commit. My wish, however, is that I am not the only one knowing how to click on \"Details\", scroll up and find \"Error\"", "author": "koppor", "createdAt": "2020-12-29T16:51:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTc4Njg3Mg==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549786872", "bodyText": "You can try with  or  in the localization - such as other localizations did. Could you please try and report back?\n\njavafx no longer uses html, so \\n is correct", "author": "Siedlerchr", "createdAt": "2020-12-29T17:27:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDU4NzAwNQ==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r550587005", "bodyText": "@Siedlerchr May I ask whether you've seent he screen shot error output? Here the deep link to the method throwing the exception: \n  \n    \n      jabref/src/test/java/org/jabref/logic/l10n/LocalizationParser.java\n    \n    \n         Line 287\n      in\n      afdb194\n    \n    \n    \n    \n\n        \n          \n           throw new RuntimeException(languageKey + \" contains a new line character. As this is a localization key, this is illegal!\"); \n        \n    \n  \n\n\nIt throws an exception if \\n is contained there. Thus, we cannot use \\n. Since you say that <p> and <br> cannot be used, we cannot have any newlines any more. Am I right?", "author": "koppor", "createdAt": "2020-12-31T17:35:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUxOTQwNQ=="}], "type": "inlineReview"}, {"oid": "2038ec68c598e5cf2fd4b6ec61627b9988007d72", "url": "https://github.com/JabRef/jabref/commit/2038ec68c598e5cf2fd4b6ec61627b9988007d72", "message": "Message in prompt changed to one string", "committedDate": "2020-12-28T17:56:54Z", "type": "commit"}, {"oid": "636088863fd445de1bdad96f1b21ce041f867121", "url": "https://github.com/JabRef/jabref/commit/636088863fd445de1bdad96f1b21ce041f867121", "message": "Deleted new line break in message propmpt due to error", "committedDate": "2020-12-29T19:45:25Z", "type": "commit"}, {"oid": "22e12b6adda8f85d61241b6fc36622484e6fa520", "url": "https://github.com/JabRef/jabref/commit/22e12b6adda8f85d61241b6fc36622484e6fa520", "message": "Added message in JabRef_en.properties", "committedDate": "2020-12-29T19:45:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg0MDA3MA==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r549840070", "bodyText": "I think the first argument \"Localization.lang(\"Directory not found\")\" should still be there, so that the error dialog gets a nice header.", "author": "tobiasdiez", "createdAt": "2020-12-29T20:39:53Z", "path": "src/main/java/org/jabref/gui/externalfiles/DownloadFullTextAction.java", "diffHunk": "@@ -111,10 +111,7 @@ private void downloadFullTexts(Map<BibEntry, Optional<URL>> downloads, BibDataba\n             if (result.isPresent()) {\n                 Optional<Path> dir = databaseContext.getFirstExistingFileDir(Globals.prefs.getFilePreferences());\n                 if (dir.isEmpty()) {\n-                    dialogService.showErrorDialogAndWait(Localization.lang(\"Directory not found\"),\n-                            Localization.lang(\"Main file directory not set!\") + \" \"\n-                                    + Localization.lang(\"Preferences\")\n-                                    + \" -> \" + Localization.lang(\"File\"));\n+                    dialogService.showErrorDialogAndWait(Localization.lang(\"Main file directory not set. Check the preferences (linked files) or the library properties.\"));", "originalCommit": "22e12b6adda8f85d61241b6fc36622484e6fa520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NDc5Mg==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r550354792", "bodyText": "Done! \ud83d\ude00", "author": "devjuliet", "createdAt": "2020-12-30T23:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg0MDA3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1NzcwNg==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r550357706", "bodyText": "Here is a screenshot!", "author": "devjuliet", "createdAt": "2020-12-30T23:43:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTg0MDA3MA=="}], "type": "inlineReview"}, {"oid": "fbb413395da2e9bf7b10f2cd62ce622de25c32b5", "url": "https://github.com/JabRef/jabref/commit/fbb413395da2e9bf7b10f2cd62ce622de25c32b5", "message": "Added header to error propmt dialog", "committedDate": "2020-12-30T23:24:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ2MTg2NQ==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r550461865", "bodyText": "I think you have now one extra brace here that is not necessary", "author": "Siedlerchr", "createdAt": "2020-12-31T11:21:31Z", "path": "src/main/java/org/jabref/gui/externalfiles/DownloadFullTextAction.java", "diffHunk": "@@ -112,9 +112,7 @@ private void downloadFullTexts(Map<BibEntry, Optional<URL>> downloads, BibDataba\n                 Optional<Path> dir = databaseContext.getFirstExistingFileDir(Globals.prefs.getFilePreferences());\n                 if (dir.isEmpty()) {\n                     dialogService.showErrorDialogAndWait(Localization.lang(\"Directory not found\"),\n-                            Localization.lang(\"Main file directory not set!\") + \" \"\n-                                    + Localization.lang(\"Preferences\")\n-                                    + \" -> \" + Localization.lang(\"File\"));\n+                            (Localization.lang(\"Main file directory not set. Check the preferences (linked files) or the library properties.\")));", "originalCommit": "fbb413395da2e9bf7b10f2cd62ce622de25c32b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTA3NjU4Mw==", "url": "https://github.com/JabRef/jabref/pull/7232#discussion_r551076583", "bodyText": "Great, is now resolved! \ud83d\ude03", "author": "devjuliet", "createdAt": "2021-01-04T00:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ2MTg2NQ=="}], "type": "inlineReview"}, {"oid": "a74c4cbf5a2d6c8ee36d65287ad9996be6be97a1", "url": "https://github.com/JabRef/jabref/commit/a74c4cbf5a2d6c8ee36d65287ad9996be6be97a1", "message": "deleted extra brace", "committedDate": "2021-01-04T00:40:44Z", "type": "commit"}]}