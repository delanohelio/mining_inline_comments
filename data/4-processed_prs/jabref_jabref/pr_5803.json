{"pr_number": 5803, "pr_title": "Add select all buttons to change dialog", "pr_createdAt": "2020-01-01T22:51:24Z", "pr_url": "https://github.com/JabRef/jabref/pull/5803", "timeline": [{"oid": "5e43db7ee1b88ee21d70c11aef67d544c9a68e85", "url": "https://github.com/JabRef/jabref/commit/5e43db7ee1b88ee21d70c11aef67d544c9a68e85", "message": "Add select all buttons to change dialog\n\nwhen merging entries\nFixes https://github.com/koppor/jabref/issues/385", "committedDate": "2020-01-01T22:50:54Z", "type": "commit"}, {"oid": "b3fa46e87a57f0dd73e69f0d05f4808aefd2c897", "url": "https://github.com/JabRef/jabref/commit/b3fa46e87a57f0dd73e69f0d05f4808aefd2c897", "message": "fix l10n", "committedDate": "2020-01-01T22:57:21Z", "type": "commit"}, {"oid": "9618e971eefda8acc1f5e15e18abd3b21efb99a8", "url": "https://github.com/JabRef/jabref/commit/9618e971eefda8acc1f5e15e18abd3b21efb99a8", "message": "add buttons for selecting all changes from jabref or disk\n\nTODO: Hide checkbox when switching between entry modified and added/deleted", "committedDate": "2020-01-02T00:31:50Z", "type": "commit"}, {"oid": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "url": "https://github.com/JabRef/jabref/commit/0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "message": "make merge entries column left right arrows clickable for select all\nadd mark/uunmark all to the left side", "committedDate": "2020-01-02T23:19:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc4NDI3OA==", "url": "https://github.com/JabRef/jabref/pull/5803#discussion_r362784278", "bodyText": "I think there is a selectFirst method.", "author": "tobiasdiez", "createdAt": "2020-01-03T11:50:33Z", "path": "src/main/java/org/jabref/gui/collab/ChangeDisplayDialog.java", "diffHunk": "@@ -21,47 +25,68 @@\n \n class ChangeDisplayDialog extends BaseDialog<Boolean> {\n \n-    private final ListView<DatabaseChangeViewModel> tree;\n+    private final ListView<DatabaseChangeViewModel> changesList;\n     private final BorderPane infoPanel = new BorderPane();\n     private final CheckBox cb = new CheckBox(Localization.lang(\"Accept change\"));\n \n     public ChangeDisplayDialog(BibDatabaseContext database, List<DatabaseChangeViewModel> changes) {\n         this.setTitle(Localization.lang(\"External changes\"));\n         this.getDialogPane().setPrefSize(800, 600);\n \n-        tree = new ListView<>(FXCollections.observableArrayList(changes));\n-        tree.setPrefWidth(160);\n-        EasyBind.subscribe(tree.getSelectionModel().selectedItemProperty(), this::selectedChangeChanged);\n+        changesList = new ListView<>(FXCollections.observableArrayList(changes));\n+        changesList.setPrefWidth(200);\n+        EasyBind.subscribe(changesList.getSelectionModel().selectedItemProperty(), this::selectedChangeChanged);\n \n         SplitPane pane = new SplitPane();\n         pane.setDividerPositions(0.2);\n-        ScrollPane scroll = new ScrollPane(tree);\n-        scroll.setFitToHeight(true);\n-        scroll.setFitToWidth(true);\n-        pane.getItems().addAll(scroll, infoPanel);\n-        pane.setResizableWithParent(scroll, false);\n \n-        getDialogPane().setContent(pane);\n+        Button selectAllChangesFromDisk = new Button(Localization.lang(\"Mark all changes as accepted\"));\n+        selectAllChangesFromDisk.setMinWidth(Region.USE_PREF_SIZE);\n+        selectAllChangesFromDisk.setOnAction(evt -> {\n+            for (DatabaseChangeViewModel change : changes) {\n+                change.setAccepted(true);\n+            }\n+        });\n+        Button unselectAllAcceptChanges = new Button(Localization.lang(\"Unmark all changes\"));\n+        unselectAllAcceptChanges.setOnAction(evt -> {\n+            for (DatabaseChangeViewModel change : changes) {\n+                change.setAccepted(false);\n+            }\n+        });\n \n+        VBox leftContent = new VBox(changesList,\n+                                    selectAllChangesFromDisk,\n+                                    unselectAllAcceptChanges);\n+\n+        ScrollPane leftScroll = new ScrollPane(leftContent);\n+        leftScroll.setFitToHeight(true);\n+        leftScroll.setFitToWidth(true);\n+\n+        pane.getItems().addAll(leftScroll, infoPanel);\n+        pane.setResizableWithParent(leftScroll, false);\n+\n+        getDialogPane().setContent(pane);\n \n         Label rootInfo = new Label(Localization.lang(\"Select the tree nodes to view and accept or reject changes\") + '.');\n         infoPanel.setCenter(rootInfo);\n-        tree.getSelectionModel().select(0);\n+        changesList.getSelectionModel().select(0);", "originalCommit": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc4NDkyNQ==", "url": "https://github.com/JabRef/jabref/pull/5803#discussion_r362784925", "bodyText": "This is no longer needed now, right?", "author": "tobiasdiez", "createdAt": "2020-01-03T11:53:40Z", "path": "src/main/java/org/jabref/gui/collab/EntryChangeViewModel.java", "diffHunk": "@@ -39,6 +41,19 @@ public EntryChangeViewModel(BibEntry entry, BibEntry newEntry, BibDatabaseContex\n \n     }\n \n+    /**\n+     *   We override this here to select the radio buttons accordingly\n+     */\n+    @Override\n+    public void setAccepted(boolean accepted) {\n+        super.setAccepted(accepted);\n+        if (accepted) {", "originalCommit": "0ff973f7556ea8e3e1001fc3cbaa8ec46f1974d5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjgyMzQwOQ==", "url": "https://github.com/JabRef/jabref/pull/5803#discussion_r362823409", "bodyText": "Nope, this is still needed. It ensures that when you click on \"mark all changes\" that the radio buttons on the right are selected and the merge entry will be the correct one.", "author": "Siedlerchr", "createdAt": "2020-01-03T14:18:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc4NDkyNQ=="}], "type": "inlineReview"}, {"oid": "86823c0b3ef3d061c668a2e720edabea50c0ce69", "url": "https://github.com/JabRef/jabref/commit/86823c0b3ef3d061c668a2e720edabea50c0ce69", "message": "fix test", "committedDate": "2020-01-03T14:19:26Z", "type": "commit"}]}