{"pr_number": 7121, "pr_title": "Extraction of Globals.prefs.put and .get", "pr_createdAt": "2020-11-23T19:14:35Z", "pr_url": "https://github.com/JabRef/jabref/pull/7121", "timeline": [{"oid": "87c0da9424fe05118a9c5ea3295db805b15cd804", "url": "https://github.com/JabRef/jabref/commit/87c0da9424fe05118a9c5ea3295db805b15cd804", "message": "Extracted Globals.prefs from SidePaneManager", "committedDate": "2020-11-21T16:24:31Z", "type": "commit"}, {"oid": "c0566c4ae9a7257f7693217ff4412427cddbb1d5", "url": "https://github.com/JabRef/jabref/commit/c0566c4ae9a7257f7693217ff4412427cddbb1d5", "message": "Merge remote-tracking branch 'upstream/master' into refactor-globals-prefs", "committedDate": "2020-11-21T16:57:33Z", "type": "commit"}, {"oid": "fd83cfe87d72b0532063f5a1a96700765b60a4f1", "url": "https://github.com/JabRef/jabref/commit/fd83cfe87d72b0532063f5a1a96700765b60a4f1", "message": "Fixed failing tests", "committedDate": "2020-11-21T21:19:40Z", "type": "commit"}, {"oid": "064e773ae72380435755b67e09dbf005914534f2", "url": "https://github.com/JabRef/jabref/commit/064e773ae72380435755b67e09dbf005914534f2", "message": "Extracted Globals.prefs from ClipBoardManager", "committedDate": "2020-11-21T21:29:18Z", "type": "commit"}, {"oid": "edc04c623ba1e22f5cc0dec2e4eac1d58856ace1", "url": "https://github.com/JabRef/jabref/commit/edc04c623ba1e22f5cc0dec2e4eac1d58856ace1", "message": "Introduced GuiPreferences", "committedDate": "2020-11-21T23:27:19Z", "type": "commit"}, {"oid": "1051c2c743c10907ef4260950173141618ce0571", "url": "https://github.com/JabRef/jabref/commit/1051c2c743c10907ef4260950173141618ce0571", "message": "Extracted prefs.get and put from ImportCommand and ExportCommand", "committedDate": "2020-11-22T13:47:18Z", "type": "commit"}, {"oid": "eafc356261e886a8fddec8e5715a7dca3183a21d", "url": "https://github.com/JabRef/jabref/commit/eafc356261e886a8fddec8e5715a7dca3183a21d", "message": "Extracted prefs.get and put from ExternalFileTypes", "committedDate": "2020-11-22T19:14:45Z", "type": "commit"}, {"oid": "0f9301b563a7ca4b7b7c277d3edc709da8811d51", "url": "https://github.com/JabRef/jabref/commit/0f9301b563a7ca4b7b7c277d3edc709da8811d51", "message": "Extracted more prefs.get and put", "committedDate": "2020-11-22T20:26:47Z", "type": "commit"}, {"oid": "ddfb8056cca8dd982dfbd4b1afed53be2aaf4d5a", "url": "https://github.com/JabRef/jabref/commit/ddfb8056cca8dd982dfbd4b1afed53be2aaf4d5a", "message": "Extracted more prefs.get and put from MergeEntries", "committedDate": "2020-11-22T23:06:13Z", "type": "commit"}, {"oid": "bf369598a59899a5daa20c65e6da22849e20486e", "url": "https://github.com/JabRef/jabref/commit/bf369598a59899a5daa20c65e6da22849e20486e", "message": "Extracted Globals.prefs.get and .put out of push package", "committedDate": "2020-11-29T21:30:33Z", "type": "commit"}, {"oid": "0d0369063c69bd6f9fa7c149a0b6acb003361f02", "url": "https://github.com/JabRef/jabref/commit/0d0369063c69bd6f9fa7c149a0b6acb003361f02", "message": "Merge remote-tracking branch 'upstream/master' into refactor-prefs-calls\n\n* upstream/master: (36 commits)\n  Fix remembering password for sql db (#7154)\n  Update to libre office 7.0.3 (#7150)\n  Add IdBasedSearchFetcher to jstor (#7145)\n  Squashed 'src/main/resources/csl-styles/' changes from 55200d0378..a20406dc45\n  Bump antlr4-runtime from 4.8-1 to 4.9 (#7136)\n  Bump antlr4 from 4.8-1 to 4.9 (#7138)\n  Bump mariadb-java-client from 2.7.0 to 2.7.1 (#7134)\n  Bump classgraph from 4.8.90 to 4.8.92 (#7139)\n  Bump mockito-core from 3.6.0 to 3.6.28 (#7135)\n  Bump gittools/actions from v0.9.6 to v0.9.7 (#7144)\n  Bump checkstyle from 8.37 to 8.38 (#7142)\n  Add missing author\n  Fix document viewer not showing first page (#7132)\n  Add githandler mock to crawler test to fix NPE (#7133)\n  Searchbar glyph icon colors in Dark Theme [FIXED] (#7131)\n  Fix binding issue for the regex and case sensitive search buttons (#7125)\n  Enable automated cross library search using a cross library query lan\u2026 (#7124)\n  Add tracking\n  Update Java Version\n  Welcome Dominik \u270c\n  ...", "committedDate": "2020-12-05T17:24:19Z", "type": "commit"}, {"oid": "0d190914b4cac6932be5726f320c056b0b3dd053", "url": "https://github.com/JabRef/jabref/commit/0d190914b4cac6932be5726f320c056b0b3dd053", "message": "Extrract calls to JabRefPreferences.getInstance()", "committedDate": "2020-12-05T18:04:12Z", "type": "commit"}, {"oid": "fb7e49990216eb9b8c6b85a9495bce77cf685b12", "url": "https://github.com/JabRef/jabref/commit/fb7e49990216eb9b8c6b85a9495bce77cf685b12", "message": "Extracted MrDlibPreferences, Fixed CrawlerTest, Removed some unnecessary calls to Globals", "committedDate": "2020-12-05T23:02:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAwNTI5MA==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r537005290", "bodyText": "The keyword separator and delimiter are different the delimiter is groups related", "author": "Siedlerchr", "createdAt": "2020-12-06T10:10:07Z", "path": "src/main/java/org/jabref/logic/crawler/StudyRepository.java", "diffHunk": "@@ -280,7 +279,7 @@ private String findQueryIDByQueryString(String query) {\n      * @param crawlResults The results that shall be persisted.\n      */\n     private void persistResults(List<QueryResult> crawlResults) throws IOException {\n-        DatabaseMerger merger = new DatabaseMerger(keywordDelimiter);\n+        DatabaseMerger merger = new DatabaseMerger(importFormatPreferences.getKeywordSeparator());", "originalCommit": "fb7e49990216eb9b8c6b85a9495bce77cf685b12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAwOTc3Mw==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r537009773", "bodyText": "Oh ok, I see. Think I was a little bit too sloppy here... Thanks", "author": "calixtus", "createdAt": "2020-12-06T10:36:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAwNTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ4NzI2MA==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r537487260", "bodyText": "Ok, I checked it, it's a bit confusing, but I think, this is correct here:\nimportFormatPreferences.getKeywordSeparator() returns prefs.getKeywordDelimiter(), which is by default ,. In this case, keywordDelimiter was originally initialized with an argument in the constructor in StudyRepository.java, which is called in StartLiteratureReviewAction.java, which is called by JabRefFrame.java with the argument prefs.getKeywordDelimiter(). As prefs.getImportExportPreferences().getKeywordSeparator() returns the same as `prefs.getKeywordDelimiter(), this should be right here: can you please doublecheck this?", "author": "calixtus", "createdAt": "2020-12-07T12:59:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAwNTI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQ5NDM0OQ==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r537494349", "bodyText": "Ah yeah, it's indeed the same. I overlooked that it's the same as in the ImportFormatPreferences, I thought it were two different ones.", "author": "Siedlerchr", "createdAt": "2020-12-07T13:10:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzAwNTI5MA=="}], "type": "inlineReview"}, {"oid": "9f57e3898a23683b4a17b5ce29945d1aaf096555", "url": "https://github.com/JabRef/jabref/commit/9f57e3898a23683b4a17b5ce29945d1aaf096555", "message": "Fixed tests", "committedDate": "2020-12-07T13:08:58Z", "type": "commit"}, {"oid": "9ee60c7e32c04e9a898a12bd00d7fae27711161f", "url": "https://github.com/JabRef/jabref/commit/9ee60c7e32c04e9a898a12bd00d7fae27711161f", "message": "Merge remote-tracking branch 'upstream/master' into refactor-prefs-calls", "committedDate": "2020-12-07T13:10:26Z", "type": "commit"}, {"oid": "85d0a6a181068e1b7280805a9c841863ced1275d", "url": "https://github.com/JabRef/jabref/commit/85d0a6a181068e1b7280805a9c841863ced1275d", "message": "Fixed more tests", "committedDate": "2020-12-07T13:23:44Z", "type": "commit"}, {"oid": "f2a62fd94251ddb13083fdbf9644923ea22e0a8a", "url": "https://github.com/JabRef/jabref/commit/f2a62fd94251ddb13083fdbf9644923ea22e0a8a", "message": "Fixed NPEs in tests and checkstyle", "committedDate": "2020-12-07T15:18:24Z", "type": "commit"}, {"oid": "426532bdeddd54cda9354b7895d2bbd155fdc47f", "url": "https://github.com/JabRef/jabref/commit/426532bdeddd54cda9354b7895d2bbd155fdc47f", "message": "l10n", "committedDate": "2020-12-07T15:28:42Z", "type": "commit"}, {"oid": "ac6d4b572c4116a352e0f6fcaaaf2de2ba416385", "url": "https://github.com/JabRef/jabref/commit/ac6d4b572c4116a352e0f6fcaaaf2de2ba416385", "message": "Fixed NPE in CrawlerTest", "committedDate": "2020-12-07T15:38:59Z", "type": "commit"}, {"oid": "9e85f9c8607052f49c2aeadda98f3cceb9d1a8ba", "url": "https://github.com/JabRef/jabref/commit/9e85f9c8607052f49c2aeadda98f3cceb9d1a8ba", "message": "Cleanups", "committedDate": "2020-12-07T18:31:08Z", "type": "commit"}, {"oid": "de26c7da19f80c6ef1d9f859060ef7e735a393fe", "url": "https://github.com/JabRef/jabref/commit/de26c7da19f80c6ef1d9f859060ef7e735a393fe", "message": "Merge remote-tracking branch 'upstream/master' into refactor-prefs-calls", "committedDate": "2020-12-07T21:39:21Z", "type": "commit"}, {"oid": "eeb679ba4afed86d3904f64877cc3aead8ef4407", "url": "https://github.com/JabRef/jabref/commit/eeb679ba4afed86d3904f64877cc3aead8ef4407", "message": "Extracted TelemetryPreferences", "committedDate": "2020-12-07T22:23:22Z", "type": "commit"}, {"oid": "43ced4c7ee112ad8a5af69210c62f30ed46a5345", "url": "https://github.com/JabRef/jabref/commit/43ced4c7ee112ad8a5af69210c62f30ed46a5345", "message": "Extracted calls to JabRefPreferences out of CustomImportList", "committedDate": "2020-12-08T00:12:39Z", "type": "commit"}, {"oid": "7b56a942eca43f5cdd5e786a7fea499cdb279f56", "url": "https://github.com/JabRef/jabref/commit/7b56a942eca43f5cdd5e786a7fea499cdb279f56", "message": "Made storing of ProtectedTermsPreferences consistent", "committedDate": "2020-12-09T19:27:17Z", "type": "commit"}, {"oid": "5a11a64215cfcde440c3bc7f239e3d5a653d4bbf", "url": "https://github.com/JabRef/jabref/commit/5a11a64215cfcde440c3bc7f239e3d5a653d4bbf", "message": "Extracted JabRefPreferences out ouf EntryEditor, reduced unnecessary calls to JabRefPreferences", "committedDate": "2020-12-09T19:48:38Z", "type": "commit"}, {"oid": "2d15f61b1209429bc8b0777f58557a429b8206ee", "url": "https://github.com/JabRef/jabref/commit/2d15f61b1209429bc8b0777f58557a429b8206ee", "message": "Finished extracting unnecessary calls to JabRefPreferences", "committedDate": "2020-12-09T22:14:06Z", "type": "commit"}, {"oid": "95882e509bcc27e916a691c56adf8fec059fdbf1", "url": "https://github.com/JabRef/jabref/commit/95882e509bcc27e916a691c56adf8fec059fdbf1", "message": "Merge remote-tracking branch 'upstream/master' into refactor-prefs-calls\n\n# Conflicts:\n#\tsrc/main/java/org/jabref/gui/copyfiles/CopySingleFileAction.java\n#\tsrc/main/java/org/jabref/gui/fieldeditors/LinkedFilesEditor.java", "committedDate": "2020-12-09T22:21:27Z", "type": "commit"}, {"oid": "14d509d6676b6aad75619f34e920af3b586ed2af", "url": "https://github.com/JabRef/jabref/commit/14d509d6676b6aad75619f34e920af3b586ed2af", "message": "l10n", "committedDate": "2020-12-09T22:38:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM3MjQ1OA==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r540372458", "bodyText": "I guees Tobi or Olli will complain about the empty space ;)\n\n  \n    \n      \n        Suggested change", "author": "Siedlerchr", "createdAt": "2020-12-10T17:46:40Z", "path": "src/main/java/org/jabref/gui/ClipBoardManager.java", "diffHunk": "@@ -47,15 +48,18 @@\n     private static Clipboard clipboard;\n     private static java.awt.datatransfer.Clipboard primary;\n     private static ImportFormatReader importFormatReader;\n+    private final PreferencesService preferencesService;\n \n-    public ClipBoardManager() {\n-        this(Clipboard.getSystemClipboard(), Toolkit.getDefaultToolkit().getSystemSelection(), Globals.IMPORT_FORMAT_READER);\n+    public ClipBoardManager(PreferencesService preferencesService) {\n+        this(Clipboard.getSystemClipboard(), Toolkit.getDefaultToolkit().getSystemSelection(), Globals.IMPORT_FORMAT_READER, preferencesService);\n     }\n \n-    public ClipBoardManager(Clipboard clipboard, java.awt.datatransfer.Clipboard primary, ImportFormatReader importFormatReader) {\n+    public ClipBoardManager(Clipboard clipboard, java.awt.datatransfer.Clipboard primary, ImportFormatReader importFormatReader, PreferencesService preferencesService) {\n         ClipBoardManager.clipboard = clipboard;\n         ClipBoardManager.primary = primary;\n         ClipBoardManager.importFormatReader = importFormatReader;\n+", "originalCommit": "14d509d6676b6aad75619f34e920af3b586ed2af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjAxNzI3NA==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r542017274", "bodyText": "No here it's fine...just don't add empty lines at the beginning or end of a method", "author": "tobiasdiez", "createdAt": "2020-12-13T22:12:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM3MjQ1OA=="}], "type": "inlineReview"}, {"oid": "465b18013ed48490c0f060170e0df8de5a7d8561", "url": "https://github.com/JabRef/jabref/commit/465b18013ed48490c0f060170e0df8de5a7d8561", "message": "Merge branch 'master' into refactor-prefs-calls", "committedDate": "2020-12-13T22:28:52Z", "type": "commit"}, {"oid": "abe7f4f6d54ba90b0319500c3683f44881f81bce", "url": "https://github.com/JabRef/jabref/commit/abe7f4f6d54ba90b0319500c3683f44881f81bce", "message": "Fixed merge error", "committedDate": "2020-12-14T10:21:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI5NzkxOQ==", "url": "https://github.com/JabRef/jabref/pull/7121#discussion_r542297919", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            //factory.createMenuItem(StandardActions.START_SYSTEMATIC_LITERATURE_REVIEW,\n          \n          \n            \n                            // factory.createMenuItem(StandardActions.START_SYSTEMATIC_LITERATURE_REVIEW,", "author": "Siedlerchr", "createdAt": "2020-12-14T11:04:08Z", "path": "src/main/java/org/jabref/gui/JabRefFrame.java", "diffHunk": "@@ -817,7 +817,7 @@ private MenuBar createMenu() {\n                 new SeparatorMenuItem(),\n \n                 factory.createMenuItem(StandardActions.SEND_AS_EMAIL, new SendAsEMailAction(dialogService, prefs, stateManager)),\n-                pushToApplicationMenuItem,\n+                pushToApplicationMenuItem\n                 // Disabled until PR #7126 can be merged\n                 // new SeparatorMenuItem(),\n                 //factory.createMenuItem(StandardActions.START_SYSTEMATIC_LITERATURE_REVIEW,", "originalCommit": "abe7f4f6d54ba90b0319500c3683f44881f81bce", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1b16cecc86eb6f8ac09a339bafcb915c7c30173", "url": "https://github.com/JabRef/jabref/commit/f1b16cecc86eb6f8ac09a339bafcb915c7c30173", "message": "Fix checkstyle", "committedDate": "2020-12-14T11:04:51Z", "type": "commit"}]}