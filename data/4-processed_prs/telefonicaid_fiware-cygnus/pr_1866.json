{"pr_number": 1866, "pr_title": "[docker][cygnus-ngsi][feature][NGSIPostgreSQLSink] configure \"postgresql_database\" in docker", "pr_createdAt": "2020-05-02T12:54:44Z", "pr_url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866", "timeline": [{"oid": "82298b83ccd320006e790dc4fe445ca09ae34529", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/82298b83ccd320006e790dc4fe445ca09ae34529", "message": "update files related to docker to be able to configure 'postgresql_database'", "committedDate": "2020-05-02T04:52:18Z", "type": "commit"}, {"oid": "c8b048f01e698da32801b379bb57458dddbd97b1", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/c8b048f01e698da32801b379bb57458dddbd97b1", "message": "update docs of CYGNUS_POSTGRESQL_DATABASE", "committedDate": "2020-05-02T05:13:41Z", "type": "commit"}, {"oid": "94a329243e3576a833faeae7444c1bf3761ffbf5", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/94a329243e3576a833faeae7444c1bf3761ffbf5", "message": "update docs to add 'cygnus-ngsi.sinks.postgresql-sink.postgresql_database'", "committedDate": "2020-05-03T08:20:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MjQ4NQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419252485", "bodyText": "I understand this (and the other similar change in the file) is a typo fix, right?", "author": "fgalan", "createdAt": "2020-05-04T07:25:17Z", "path": "doc/cygnus-ngsi/installation_and_administration_guide/install_with_docker.md", "diffHunk": "@@ -282,9 +282,10 @@ As seen above, the default configuration distributed with the image is tied to c\n * PostgreSQL:\n     * It only works for building historical context data in PostgreSQL.\n     * The endpoint for PostgreSQL is `iot-postgresql` but can be changed through the CYGNUS_POSTGRESQL_HOST environment variable.\n-    * The port for PostgreSQL is `3306` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n+    * The port for PostgreSQL is `5432` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.", "originalCommit": "94a329243e3576a833faeae7444c1bf3761ffbf5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUwOTk1MQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420509951", "bodyText": "yes, I fixed typo.", "author": "nmatsui", "createdAt": "2020-05-06T02:13:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MjQ4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU3ODA0MA==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420578040", "bodyText": "Ok, thanks. NTC.", "author": "fgalan", "createdAt": "2020-05-06T06:51:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MjQ4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MzA4MA==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419253080", "bodyText": "Maybe the new env var could be mentioned in the CHANGES_NEXT_RELEASE file. Something like:\n- Fix: new env var CYGNUS_POSTGRESQL_DATABASE to set Postgresql database in Docker", "author": "fgalan", "createdAt": "2020-05-04T07:26:41Z", "path": "docker/cygnus-ngsi/cygnus-entrypoint.sh", "diffHunk": "@@ -596,6 +596,9 @@ elif [ \"$CYGNUS_POSTGRESQL_HOST\" != \"\" ]; then\n     sed -i '/'${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_username/c '${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_username = '${CYGNUS_POSTGRESQL_USER} ${FLUME_HOME}/conf/${AGENT_CONF_FILE}\n     sed -i '/'${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_password/c '${CYGNUS_AGENT_NAME}'.sinks.postgresql-sink.postgresql_password = '${CYGNUS_POSTGRESQL_PASS} ${FLUME_HOME}/conf/${AGENT_CONF_FILE}\n     # The following are optional and disabled by default\n+    if [ \"$CYGNUS_POSTGRESQL_DATABASE\" != \"\" ]; then", "originalCommit": "94a329243e3576a833faeae7444c1bf3761ffbf5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1NTc5MA==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419255790", "bodyText": "In addition, maybe the new env var should be included in doc/cygnus-ngsi/installation_and_administration_guide/install_with_docker.md documentation? (Not fully sure...)", "author": "fgalan", "createdAt": "2020-05-04T07:32:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTM3OTQ2Nw==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r419379467", "bodyText": "I agree, It should be included in the install_with_docker doc.", "author": "IvanHdzC", "createdAt": "2020-05-04T11:49:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MzA4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU3OTQxMA==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420579410", "bodyText": "Fixed in b475f0e", "author": "fgalan", "createdAt": "2020-05-06T06:55:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI1MzA4MA=="}], "type": "inlineReview"}, {"oid": "981e642a5a531fbb242f70752f751648d1e6f0da", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/981e642a5a531fbb242f70752f751648d1e6f0da", "message": "Merge branch 'master' into feature/docker_environment_CYGNUS_POSTGRESQL_DATABASE", "committedDate": "2020-05-06T02:26:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUxNDM4NQ==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420514385", "bodyText": "added a sentence to describe CYGNUS_POSTGRESQL_DATABASE.", "author": "nmatsui", "createdAt": "2020-05-06T02:32:30Z", "path": "doc/cygnus-ngsi/installation_and_administration_guide/install_with_docker.md", "diffHunk": "@@ -282,9 +282,10 @@ As seen above, the default configuration distributed with the image is tied to c\n * PostgreSQL:\n     * It only works for building historical context data in PostgreSQL.\n     * The endpoint for PostgreSQL is `iot-postgresql` but can be changed through the CYGNUS_POSTGRESQL_HOST environment variable.\n-    * The port for PostgreSQL is `3306` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n+    * The port for PostgreSQL is `5432` but can be changed through the CYGNUS_POSTGRESQL_PORT environment variable.\n     * The user for PostgreSQL is `postgresql` but can be changed through the CYGNUS_POSTGRESQL_USER environment variable.\n     * The pass for PostgreSQL is `postgresql` but can be changed through the CYGNUS_POSTGRESQL_PASS environment variable.\n+    * The database for PostgreSQL is `postgres` but can be changed through the CYGNUS_POSTGRESQL_DATABASE environment variable.", "originalCommit": "c8b048f01e698da32801b379bb57458dddbd97b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU3OTMxNw==", "url": "https://github.com/telefonicaid/fiware-cygnus/pull/1866#discussion_r420579317", "bodyText": "Ok. Thanks! NTC", "author": "fgalan", "createdAt": "2020-05-06T06:54:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDUxNDM4NQ=="}], "type": "inlineReview"}, {"oid": "b475f0ec3f87d0606c3fb2de3c9270132a886b8d", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/b475f0ec3f87d0606c3fb2de3c9270132a886b8d", "message": "Update CHANGES_NEXT_RELEASE", "committedDate": "2020-05-06T02:36:55Z", "type": "commit"}, {"oid": "769b999e81f7f17fe0b5d4b65044ff2362eebf19", "url": "https://github.com/telefonicaid/fiware-cygnus/commit/769b999e81f7f17fe0b5d4b65044ff2362eebf19", "message": "Merge branch 'master' into feature/docker_environment_CYGNUS_POSTGRESQL_DATABASE", "committedDate": "2020-05-06T11:28:57Z", "type": "commit"}]}