{"pr_number": 9771, "pr_title": "BAEL-4025 : Spring Data Azure Cosmos DB", "pr_createdAt": "2020-07-26T12:14:07Z", "pr_url": "https://github.com/eugenp/tutorials/pull/9771", "timeline": [{"oid": "e90cc86f459677964d84a3b83599604bb74df035", "url": "https://github.com/eugenp/tutorials/commit/e90cc86f459677964d84a3b83599604bb74df035", "message": "Java Example of Hexagonal Architecture", "committedDate": "2020-03-25T16:23:40Z", "type": "commit"}, {"oid": "b66ddf07c55fb332111964fcb4d9477f0908a3c0", "url": "https://github.com/eugenp/tutorials/commit/b66ddf07c55fb332111964fcb4d9477f0908a3c0", "message": "removing unnecessary maven files from pull request and spaces in code", "committedDate": "2020-03-26T19:10:04Z", "type": "commit"}, {"oid": "fd72c9c40ab6db425fb06e4710e83ba11565d871", "url": "https://github.com/eugenp/tutorials/commit/fd72c9c40ab6db425fb06e4710e83ba11565d871", "message": "Removing unnecessary lines", "committedDate": "2020-03-26T19:13:33Z", "type": "commit"}, {"oid": "05e90365d81675d4ea5657efe7d20f2f78f5de62", "url": "https://github.com/eugenp/tutorials/commit/05e90365d81675d4ea5657efe7d20f2f78f5de62", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-04-09T21:39:43Z", "type": "commit"}, {"oid": "d1232ab2f93f499a836fb321faafaed7391338fc", "url": "https://github.com/eugenp/tutorials/commit/d1232ab2f93f499a836fb321faafaed7391338fc", "message": "Example code for using Multiple Cache Manager in SpringBoot", "committedDate": "2020-04-09T22:27:55Z", "type": "commit"}, {"oid": "79641e8dbea19d8f2af10c754db1d8cd4229e38c", "url": "https://github.com/eugenp/tutorials/commit/79641e8dbea19d8f2af10c754db1d8cd4229e38c", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-04-12T21:09:16Z", "type": "commit"}, {"oid": "b51d114568ab531e73e7dc06f7c36bce80dd8e86", "url": "https://github.com/eugenp/tutorials/commit/b51d114568ab531e73e7dc06f7c36bce80dd8e86", "message": "BAEL-3963:Using multiple cache managers in Spring", "committedDate": "2020-04-17T22:17:11Z", "type": "commit"}, {"oid": "06c6cae7570897b8196986800cf552b6ece0bd22", "url": "https://github.com/eugenp/tutorials/commit/06c6cae7570897b8196986800cf552b6ece0bd22", "message": "removing new module created in last pull request", "committedDate": "2020-04-17T22:22:29Z", "type": "commit"}, {"oid": "6ebdc82de77f888e6131cf7bb6436fcf5d7a9e57", "url": "https://github.com/eugenp/tutorials/commit/6ebdc82de77f888e6131cf7bb6436fcf5d7a9e57", "message": "Fixes as per editor Suggestions", "committedDate": "2020-04-18T10:22:19Z", "type": "commit"}, {"oid": "5fc198c38f8da91eb3a999dde5f33f49730a7b67", "url": "https://github.com/eugenp/tutorials/commit/5fc198c38f8da91eb3a999dde5f33f49730a7b67", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-04-25T17:45:39Z", "type": "commit"}, {"oid": "bc9f1ab743e7cee1a057e9d9686971c47c0d6566", "url": "https://github.com/eugenp/tutorials/commit/bc9f1ab743e7cee1a057e9d9686971c47c0d6566", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-04-26T20:09:27Z", "type": "commit"}, {"oid": "e97e23e375d928fd3df8881b06827dc920bea11a", "url": "https://github.com/eugenp/tutorials/commit/e97e23e375d928fd3df8881b06827dc920bea11a", "message": "fixing spacing issue in pom.xml", "committedDate": "2020-04-26T20:24:51Z", "type": "commit"}, {"oid": "a5421abdf042b2bb34f9feb99f79cab400d91c58", "url": "https://github.com/eugenp/tutorials/commit/a5421abdf042b2bb34f9feb99f79cab400d91c58", "message": "Fixing spacing issue in pom.xml", "committedDate": "2020-04-26T20:40:04Z", "type": "commit"}, {"oid": "cca029bf87593afc4b8bbd105614042c344f167f", "url": "https://github.com/eugenp/tutorials/commit/cca029bf87593afc4b8bbd105614042c344f167f", "message": "Fixing spacing issue 2", "committedDate": "2020-04-26T21:21:43Z", "type": "commit"}, {"oid": "1d01e691b16572ccde6a6b6c03997f8ec79ac963", "url": "https://github.com/eugenp/tutorials/commit/1d01e691b16572ccde6a6b6c03997f8ec79ac963", "message": "Formatting space issues in pom.xml", "committedDate": "2020-04-26T22:00:41Z", "type": "commit"}, {"oid": "edcce1e7d85fc7b76d5fef24777d40036ec2a51e", "url": "https://github.com/eugenp/tutorials/commit/edcce1e7d85fc7b76d5fef24777d40036ec2a51e", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-05-30T16:52:10Z", "type": "commit"}, {"oid": "82f8554d21c9574cc63b3a0ea37ffc3d86d28276", "url": "https://github.com/eugenp/tutorials/commit/82f8554d21c9574cc63b3a0ea37ffc3d86d28276", "message": "Changing the Test class name from IntegrationUnitTest to IntegrationTest", "committedDate": "2020-05-30T21:30:18Z", "type": "commit"}, {"oid": "a40d4698cf488e4c8e0a6ad01b395d1f135d94de", "url": "https://github.com/eugenp/tutorials/commit/a40d4698cf488e4c8e0a6ad01b395d1f135d94de", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-06-14T18:45:01Z", "type": "commit"}, {"oid": "ad0b5b3b68d70b84d48abc26ef16a2737d94d5db", "url": "https://github.com/eugenp/tutorials/commit/ad0b5b3b68d70b84d48abc26ef16a2737d94d5db", "message": "Fixing UT failure in build", "committedDate": "2020-06-20T20:43:35Z", "type": "commit"}, {"oid": "b49d4ff5feeda5b04d5760d9f0e865ccdd7559fe", "url": "https://github.com/eugenp/tutorials/commit/b49d4ff5feeda5b04d5760d9f0e865ccdd7559fe", "message": "resolving merge conflicts", "committedDate": "2020-06-20T21:05:59Z", "type": "commit"}, {"oid": "71926af7cde8bdcd17377f8a069ac129877523e2", "url": "https://github.com/eugenp/tutorials/commit/71926af7cde8bdcd17377f8a069ac129877523e2", "message": "Merge remote-tracking branch 'upstream/master'", "committedDate": "2020-07-25T20:23:40Z", "type": "commit"}, {"oid": "f9c88536e10048592e5c69d9328c6d0010346bbd", "url": "https://github.com/eugenp/tutorials/commit/f9c88536e10048592e5c69d9328c6d0010346bbd", "message": "BAEL-4025:Spring Data Azure Cosmos DB", "committedDate": "2020-07-26T11:21:40Z", "type": "commit"}, {"oid": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "url": "https://github.com/eugenp/tutorials/commit/3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "message": "cleaning up unnecessary changes", "committedDate": "2020-07-26T11:29:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMjUxOA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460702518", "bodyText": "4 space indentation on xml and java files", "author": "rpvilao", "createdAt": "2020-07-27T07:41:00Z", "path": "persistence-modules/spring-data-cosmosdb/pom.xml", "diffHunk": "@@ -0,0 +1,48 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\t<modelVersion>4.0.0</modelVersion>\n+\t<artifactId>spring-data-cosmosdb</artifactId>\n+\t<name>spring-data-cosmos-db</name>\n+\t<description>tutorial for spring-data-cosmosdb</description>\n+\n+\t<parent>\n+\t\t<groupId>com.baeldung</groupId>", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3ODY4Nw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462578687", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T20:47:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMjUxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMjU5OA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460702598", "bodyText": "promote these to properties", "author": "rpvilao", "createdAt": "2020-07-27T07:41:08Z", "path": "persistence-modules/spring-data-cosmosdb/pom.xml", "diffHunk": "@@ -0,0 +1,48 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+\txmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+\txsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+\t<modelVersion>4.0.0</modelVersion>\n+\t<artifactId>spring-data-cosmosdb</artifactId>\n+\t<name>spring-data-cosmos-db</name>\n+\t<description>tutorial for spring-data-cosmosdb</description>\n+\n+\t<parent>\n+\t\t<groupId>com.baeldung</groupId>\n+\t\t<artifactId>parent-boot-2</artifactId>\n+\t\t<version>0.0.1-SNAPSHOT</version>\n+\t\t<relativePath>../../parent-boot-2</relativePath>\n+\t</parent>\n+\n+\t<properties>\n+\t\t<java.version>1.8</java.version>\n+\t</properties>\n+\n+\t<dependencies>\n+\t\t<dependency>\n+\t\t\t<groupId>org.springframework.boot</groupId>\n+\t\t\t<artifactId>spring-boot-starter-web</artifactId>\n+\t\t</dependency>\n+\t\t<dependency>\n+\t\t\t<groupId>com.microsoft.azure</groupId>\n+\t\t\t<artifactId>spring-data-cosmosdb</artifactId>\n+\t\t\t<version>2.3.0</version>", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3ODYyNA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462578624", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T20:47:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMjU5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzUyMA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460703520", "bodyText": "/?category=...", "author": "rpvilao", "createdAt": "2020-07-27T07:42:58Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/controller/ProductController.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.baeldung.spring.data.cosmosdb.controller;\n+\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.service.ProductService;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.http.HttpStatus;\n+import org.springframework.web.bind.annotation.DeleteMapping;\n+import org.springframework.web.bind.annotation.GetMapping;\n+import org.springframework.web.bind.annotation.PathVariable;\n+import org.springframework.web.bind.annotation.PostMapping;\n+import org.springframework.web.bind.annotation.RequestBody;\n+import org.springframework.web.bind.annotation.RequestMapping;\n+import org.springframework.web.bind.annotation.RequestParam;\n+import org.springframework.web.bind.annotation.ResponseStatus;\n+import org.springframework.web.bind.annotation.RestController;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@RestController\n+@RequestMapping(\"/products\")\n+public class ProductController {\n+\n+    @Autowired\n+    private ProductService productService;\n+\n+    @PostMapping\n+    @ResponseStatus(HttpStatus.CREATED)\n+    public void create(@RequestBody Product product) {\n+        productService.saveProduct(product);\n+    }\n+\n+    @GetMapping(value = \"/{id}/category/{category}\")\n+    public Optional<Product> get(@PathVariable String id, @PathVariable String category) {\n+        return productService.findById(id, category);\n+    }\n+\n+    @DeleteMapping(value = \"/{id}/category/{category}\")\n+    public void delete(@PathVariable String id, @PathVariable String category) {\n+        productService.delete(id, category);\n+    }\n+\n+    @GetMapping\n+    public List<Product> getByName(@RequestParam String name) {\n+        return productService.findProductByName(name);\n+    }\n+\n+    @GetMapping(value = \"/category/{category}\")", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3ODQ3Mw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462578473", "bodyText": "Done.Could not remove category from the url value because of ambiguity with other getByName mthod. but converted path variable to request variable", "author": "ankurguptajec", "createdAt": "2020-07-29T20:47:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzUyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5MjMwNg==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462592306", "bodyText": "@rpvilao Does this sound ohkk to you?", "author": "ankurguptajec", "createdAt": "2020-07-29T21:12:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzUyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzc5Nw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460703797", "bodyText": "maybe we could use lombok here. the two string can also go way", "author": "rpvilao", "createdAt": "2020-07-27T07:43:32Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/entity/Product.java", "diffHunk": "@@ -0,0 +1,58 @@\n+package com.baeldung.spring.data.cosmosdb.entity;\n+\n+import com.microsoft.azure.spring.data.cosmosdb.core.mapping.Document;\n+import com.microsoft.azure.spring.data.cosmosdb.core.mapping.PartitionKey;\n+\n+import org.springframework.data.annotation.Id;\n+\n+@Document(collection = \"products\")\n+public class Product {", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3NzU2Nw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462577567", "bodyText": "Used Lombok", "author": "ankurguptajec", "createdAt": "2020-07-29T20:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzc5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3Nzk1OA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462577958", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T20:46:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzc5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwMzk5MA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460703990", "bodyText": "promote to a constructor init", "author": "rpvilao", "createdAt": "2020-07-27T07:43:58Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/service/ProductService.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.baeldung.spring.data.cosmosdb.service;\n+\n+import com.azure.data.cosmos.PartitionKey;\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@Component\n+public class ProductService {\n+\n+    @Autowired", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwNDE4OA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460704188", "bodyText": "no need to store it in the var, just return it", "author": "rpvilao", "createdAt": "2020-07-27T07:44:20Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/service/ProductService.java", "diffHunk": "@@ -0,0 +1,39 @@\n+package com.baeldung.spring.data.cosmosdb.service;\n+\n+import com.azure.data.cosmos.PartitionKey;\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.stereotype.Component;\n+\n+import java.util.List;\n+import java.util.Optional;\n+\n+@Component\n+public class ProductService {\n+\n+    @Autowired\n+    private ProductRepository repository;\n+\n+    public List<Product> findProductByName(String productName) {\n+        return repository.findByProductName(productName);\n+    }\n+\n+    public Optional<Product> findById(String productId, String category) {\n+        return repository.findById(productId, new PartitionKey(category));\n+    }\n+\n+    public List<Product> getProductsOfCategory(String category) {\n+        List<Product> products = repository.findByProductCategory(category);", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3NzgyNQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462577825", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T20:45:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcwNDE4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNjY0Mw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r460716643", "bodyText": "name this *ManualTest and put everything ready to run without uncommenting anything (assertions included)", "author": "rpvilao", "createdAt": "2020-07-27T08:08:20Z", "path": "persistence-modules/spring-data-cosmosdb/src/test/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplicationIntegrationTest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+package com.baeldung.spring.data.cosmosdb;\n+\n+import com.azure.data.cosmos.PartitionKey;\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.util.Assert;\n+\n+import java.util.Optional;\n+\n+//Uncomment this when configured URI and keys for Azure Cosmos DB in application.properties\n+//to run the integration test\n+//@SpringBootTest\n+public class AzurecosmodbApplicationIntegrationTest {", "originalCommit": "3a0346c0627f6d9ac3be00f0aa1cd68b7b5456ad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU3OTk2Nw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462579967", "bodyText": "I have changed the name of class to *ManualTest. I have uncommented the code in test case. I have not removed the commented part before @SpringBootTest and @test annotation because when I was running it locally it was failing.\nSo if you are sure uncommenting these will not break the integration build in future.Let me know I will uncomment these.", "author": "ankurguptajec", "createdAt": "2020-07-29T20:50:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNjY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU4MzE4Nw==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462583187", "bodyText": "Hi, that's what I meant. Our pom only looks for stuff ending in IntegrationTest and others alike, so it's safe to just do it. If for some reason it fails we'll immediately know and do something about that. But in general, our readers shouldn't need to uncomment or configure stuff to get things running.", "author": "rpvilao", "createdAt": "2020-07-29T20:55:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNjY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5MjQ5NA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462592494", "bodyText": "Cool , I will uncomment these then :)", "author": "ankurguptajec", "createdAt": "2020-07-29T21:12:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNjY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5NDgyMQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462594821", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T21:17:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDcxNjY0Mw=="}], "type": "inlineReview"}, {"oid": "32fcda4924b04710c5132bc60cfddbdc64e9d370", "url": "https://github.com/eugenp/tutorials/commit/32fcda4924b04710c5132bc60cfddbdc64e9d370", "message": "Implementing Code Review comments", "committedDate": "2020-07-29T20:13:57Z", "type": "commit"}, {"oid": "15b95f1cd2f6cc9a98bf8da54ac5dfd953168502", "url": "https://github.com/eugenp/tutorials/commit/15b95f1cd2f6cc9a98bf8da54ac5dfd953168502", "message": "Implementing Code Review comments-2", "committedDate": "2020-07-29T20:19:05Z", "type": "commit"}, {"oid": "3d72c69980f35ec914d1d8dfb5ac070687663231", "url": "https://github.com/eugenp/tutorials/commit/3d72c69980f35ec914d1d8dfb5ac070687663231", "message": "Fixing indentation Issue in pom.xml", "committedDate": "2020-07-29T20:24:23Z", "type": "commit"}, {"oid": "9f05cc31a87a4176e41970b8a6cdd71dc0799313", "url": "https://github.com/eugenp/tutorials/commit/9f05cc31a87a4176e41970b8a6cdd71dc0799313", "message": "Fixing indentation issues", "committedDate": "2020-07-29T20:33:32Z", "type": "commit"}, {"oid": "000d9250aba41326d8f3852f9329748d3c769d74", "url": "https://github.com/eugenp/tutorials/commit/000d9250aba41326d8f3852f9329748d3c769d74", "message": "Fixing Indentation Issues - 2", "committedDate": "2020-07-29T20:39:15Z", "type": "commit"}, {"oid": "c79493a5800634701a0acbcfacd319e5e187edc7", "url": "https://github.com/eugenp/tutorials/commit/c79493a5800634701a0acbcfacd319e5e187edc7", "message": "Fixing Indentation Issue -3", "committedDate": "2020-07-29T20:44:27Z", "type": "commit"}, {"oid": "a031379cefced432a827581c60670bec9acac804", "url": "https://github.com/eugenp/tutorials/commit/a031379cefced432a827581c60670bec9acac804", "message": "uncommenting the @SpringBootTest and @Test annotation", "committedDate": "2020-07-29T21:14:25Z", "type": "commit"}, {"oid": "29169662fb8d39fb79c9dab17b8e1b4ea2b74b62", "url": "https://github.com/eugenp/tutorials/commit/29169662fb8d39fb79c9dab17b8e1b4ea2b74b62", "message": "Merge branch 'master' of github.com:ankurguptajec/tutorials", "committedDate": "2020-07-29T21:15:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5ODk4OQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462598989", "bodyText": "the optional here will never be null, just the thing inside. so you need to retrieve the value and assert it", "author": "rpvilao", "createdAt": "2020-07-29T21:26:04Z", "path": "persistence-modules/spring-data-cosmosdb/src/test/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplicationManualTest.java", "diffHunk": "@@ -14,26 +14,24 @@\n //Uncomment this when configured URI and keys for Azure Cosmos DB in application.properties\n //to run the integration test\n //@SpringBootTest\n-public class AzurecosmodbApplicationIntegrationTest {\n+public class AzurecosmodbApplicationManualTest {\n \n     @Autowired\n     ProductRepository productRepository;\n \n     // Uncomment this when configured URI and keys for Azure Cosmos DB in application.properties\n     // to run the integration test\n-    // @Test\n+    //@Test\n     public void givenProductIsCreated_whenCallFindById_thenProductIsFound() {\n         Product product = new Product();\n         product.setProductid(\"1001\");\n         product.setProductCategory(\"Shirt\");\n         product.setPrice(110.0);\n         product.setProductName(\"Blue Shirt\");\n \n-        // Uncomment these lines when configured URI and keys for Azure Cosmos DB in application.properties\n-        // to run the integration test\n-        // productRepository.save(product);\n-        // Optional<Product> retrievedProduct = productRepository.findById(\"1001\", new PartitionKey(\"Shirt\"));\n-        // Assert.notNull(retrievedProduct, \"Retrieved Product is Null\");\n+        productRepository.save(product);\n+        Optional<Product> retrievedProduct = productRepository.findById(\"1001\", new PartitionKey(\"Shirt\"));\n+        Assert.notNull(retrievedProduct, \"Retrieved Product is Null\");", "originalCommit": "32fcda4924b04710c5132bc60cfddbdc64e9d370", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwMzg2MA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462603860", "bodyText": "Done", "author": "ankurguptajec", "createdAt": "2020-07-29T21:36:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5ODk4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5OTE1MA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462599150", "bodyText": "remove all commented code", "author": "rpvilao", "createdAt": "2020-07-29T21:26:29Z", "path": "persistence-modules/spring-data-cosmosdb/src/test/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplicationManualTest.java", "diffHunk": "@@ -14,26 +14,24 @@\n //Uncomment this when configured URI and keys for Azure Cosmos DB in application.properties\n //to run the integration test\n //@SpringBootTest\n-public class AzurecosmodbApplicationIntegrationTest {\n+public class AzurecosmodbApplicationManualTest {\n \n     @Autowired\n     ProductRepository productRepository;\n \n     // Uncomment this when configured URI and keys for Azure Cosmos DB in application.properties\n     // to run the integration test\n-    // @Test\n+    //@Test", "originalCommit": "32fcda4924b04710c5132bc60cfddbdc64e9d370", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwMzAyOA==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462603028", "bodyText": "Already done", "author": "ankurguptajec", "createdAt": "2020-07-29T21:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5OTE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5OTc1Mg==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462599752", "bodyText": "you can remove this. in the end the user should just do:\n.../products?category=bla and not products/category?category=bla", "author": "rpvilao", "createdAt": "2020-07-29T21:27:41Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/controller/ProductController.java", "diffHunk": "@@ -46,8 +50,8 @@ public void delete(@PathVariable String id, @PathVariable String category) {\n         return productService.findProductByName(name);\n     }\n \n-    @GetMapping(value = \"/category/{category}\")\n-    public List<Product> getByCategory(@PathVariable String category) {\n+    @GetMapping(value = \"/category\")", "originalCommit": "32fcda4924b04710c5132bc60cfddbdc64e9d370", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwMjczOQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462602739", "bodyText": "I can't actually because there is another method in the controller getByName which will have same URi as this if we remove category.\nWhich causes ambiguity at startup time", "author": "ankurguptajec", "createdAt": "2020-07-29T21:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5OTc1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwNDEwNg==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462604106", "bodyText": "ok then we remove this method make the params not required either one or the other and you find out which one is set and use it", "author": "rpvilao", "createdAt": "2020-07-29T21:36:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjU5OTc1Mg=="}], "type": "inlineReview"}, {"oid": "b5fbf6177578a9c67fa29bd939e89f40de1dec33", "url": "https://github.com/eugenp/tutorials/commit/b5fbf6177578a9c67fa29bd939e89f40de1dec33", "message": "retrieving the object from optional object", "committedDate": "2020-07-29T21:35:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjYwNTEzMQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r462605131", "bodyText": "no.. this will produce a null pointer if it's null and the test is not doing the same thing. just do:\nOptional retrievedProduct = productRepository.findById(\"1001\", new PartitionKey(\"Shirt\")).orElse(null); and then assert the variable", "author": "rpvilao", "createdAt": "2020-07-29T21:38:51Z", "path": "persistence-modules/spring-data-cosmosdb/src/test/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplicationManualTest.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package com.baeldung.spring.data.cosmosdb;\n+\n+import com.azure.data.cosmos.PartitionKey;\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.util.Assert;\n+\n+import java.util.Optional;\n+\n+@SpringBootTest\n+public class AzurecosmodbApplicationManualTest {\n+\n+    @Autowired\n+    ProductRepository productRepository;\n+\n+    @Test\n+    public void givenProductIsCreated_whenCallFindById_thenProductIsFound() {\n+        Product product = new Product();\n+        product.setProductid(\"1001\");\n+        product.setProductCategory(\"Shirt\");\n+        product.setPrice(110.0);\n+        product.setProductName(\"Blue Shirt\");\n+\n+        productRepository.save(product);\n+        Optional<Product> retrievedProduct = productRepository.findById(\"1001\", new PartitionKey(\"Shirt\"));\n+        Assert.notNull(retrievedProduct.get(), \"Retrieved Product is Null\");", "originalCommit": "b5fbf6177578a9c67fa29bd939e89f40de1dec33", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e624854b5ac9688c903dcca3872a1f9ea235e5cf", "url": "https://github.com/eugenp/tutorials/commit/e624854b5ac9688c903dcca3872a1f9ea235e5cf", "message": "Implementing Code Review comments -3", "committedDate": "2020-08-01T17:11:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk4ODQ1Mg==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r463988452", "bodyText": "AzureCosmosDb...", "author": "rpvilao", "createdAt": "2020-08-01T18:40:14Z", "path": "persistence-modules/spring-data-cosmosdb/src/test/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplicationManualTest.java", "diffHunk": "@@ -0,0 +1,33 @@\n+package com.baeldung.spring.data.cosmosdb;\n+\n+import com.azure.data.cosmos.PartitionKey;\n+import com.baeldung.spring.data.cosmosdb.entity.Product;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+\n+import org.junit.jupiter.api.Test;\n+import org.springframework.beans.factory.annotation.Autowired;\n+import org.springframework.boot.test.context.SpringBootTest;\n+import org.springframework.util.Assert;\n+\n+@SpringBootTest\n+public class AzurecosmodbApplicationManualTest {", "originalCommit": "e624854b5ac9688c903dcca3872a1f9ea235e5cf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk4ODQ4MQ==", "url": "https://github.com/eugenp/tutorials/pull/9771#discussion_r463988481", "bodyText": "AzureCosmosDb", "author": "rpvilao", "createdAt": "2020-08-01T18:40:30Z", "path": "persistence-modules/spring-data-cosmosdb/src/main/java/com/baeldung/spring/data/cosmosdb/AzurecosmodbApplication.java", "diffHunk": "@@ -0,0 +1,44 @@\n+package com.baeldung.spring.data.cosmosdb;\n+\n+import com.azure.data.cosmos.CosmosKeyCredential;\n+import com.baeldung.spring.data.cosmosdb.repository.ProductRepository;\n+import com.microsoft.azure.spring.data.cosmosdb.config.AbstractCosmosConfiguration;\n+import com.microsoft.azure.spring.data.cosmosdb.config.CosmosDBConfig;\n+import com.microsoft.azure.spring.data.cosmosdb.repository.config.EnableCosmosRepositories;\n+\n+import org.springframework.beans.factory.annotation.Value;\n+import org.springframework.boot.SpringApplication;\n+import org.springframework.boot.autoconfigure.SpringBootApplication;\n+import org.springframework.context.annotation.Bean;\n+\n+@SpringBootApplication\n+@EnableCosmosRepositories(basePackageClasses = ProductRepository.class)\n+public class AzurecosmodbApplication extends AbstractCosmosConfiguration {", "originalCommit": "e624854b5ac9688c903dcca3872a1f9ea235e5cf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "433e9f659bef6c3800004429e80d65c7f0c9996a", "url": "https://github.com/eugenp/tutorials/commit/433e9f659bef6c3800004429e80d65c7f0c9996a", "message": "Fixing Capitalization Issue in class names", "committedDate": "2020-08-02T19:30:01Z", "type": "commit"}, {"oid": "e672d605dae7e1062186aeba3fdd4d1b0dfb69d5", "url": "https://github.com/eugenp/tutorials/commit/e672d605dae7e1062186aeba3fdd4d1b0dfb69d5", "message": "keeping Configuration in Separate class", "committedDate": "2020-08-14T21:51:29Z", "type": "commit"}, {"oid": "b0cd173d6e6df71edfbd626c26b5d0a25fdbf817", "url": "https://github.com/eugenp/tutorials/commit/b0cd173d6e6df71edfbd626c26b5d0a25fdbf817", "message": "Update pom.xml\n\nAdding spring-data-cosmosdb module in the persistence module", "committedDate": "2020-08-16T08:05:04Z", "type": "commit"}, {"oid": "c6ec42f47f24b99c51cfa07da1c3ad243cda5794", "url": "https://github.com/eugenp/tutorials/commit/c6ec42f47f24b99c51cfa07da1c3ad243cda5794", "message": "Update pom.xml\n\nremoving extra spaces", "committedDate": "2020-08-16T08:06:23Z", "type": "commit"}]}