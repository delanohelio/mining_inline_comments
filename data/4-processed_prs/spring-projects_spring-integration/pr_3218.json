{"pr_number": 3218, "pr_title": "Add Kotlin wrappers for router specs", "pr_createdAt": "2020-03-17T15:33:39Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3218", "timeline": [{"oid": "34f640eaa255691a5aabbe6ad8479b45c22a9116", "url": "https://github.com/spring-projects/spring-integration/commit/34f640eaa255691a5aabbe6ad8479b45c22a9116", "message": "Add Kotlin wrappers for router specs\n\nTo avoid casting and extra logic logic in the end-user code,\nit is better to provide Kotlin-specific API to let end-users to\ndo whatever is really dictated by API and don't think about specific types to cast", "committedDate": "2020-03-17T15:32:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzgwMDQwNg==", "url": "https://github.com/spring-projects/spring-integration/pull/3218#discussion_r393800406", "bodyText": "This looks suspicious. The function is scatterGather and the variant below does not have this change.", "author": "garyrussell", "createdAt": "2020-03-17T16:16:16Z", "path": "spring-integration-core/src/main/kotlin/org/springframework/integration/dsl/KotlinIntegrationFlowDefinition.kt", "diffHunk": "@@ -971,31 +977,33 @@ class KotlinIntegrationFlowDefinition(@PublishedApi internal val delegate: Integ\n \n \t/**\n \t * Populate a [ScatterGatherHandler] to the current integration flow position\n-\t * based on the provided [RecipientListRouterSpec] for scattering function\n+\t * based on the provided [KotlinRecipientListRouterSpec] for scattering function\n \t * and default [AggregatorSpec] for gathering function.\n \t */\n-\tfun scatterGather(scatterer: RecipientListRouterSpec.() -> Unit) {\n-\t\tthis.delegate.scatterGather(scatterer)\n+\tfun scatterGather(scatterer: KotlinRecipientListRouterSpec.() -> Unit) {\n+\t\tthis.delegate.scatterGather(Consumer { scatterer(KotlinRecipientListRouterSpec(it)) })\n \t}\n \n \t/**\n-\t * Populate a [ScatterGatherHandler] to the current integration flow position\n-\t * based on the provided [RecipientListRouterSpec] for scattering function\n+\t * Populate a [KotlinRecipientListRouterSpec] to the current integration flow position", "originalCommit": "34f640eaa255691a5aabbe6ad8479b45c22a9116", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzgwMzcxMw==", "url": "https://github.com/spring-projects/spring-integration/pull/3218#discussion_r393803713", "bodyText": "Doh...\nWill fix soon", "author": "artembilan", "createdAt": "2020-03-17T16:20:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzgwMDQwNg=="}], "type": "inlineReview"}, {"oid": "f09e4ae962493b939aae5767aa9d2f98c8e0b439", "url": "https://github.com/spring-projects/spring-integration/commit/f09e4ae962493b939aae5767aa9d2f98c8e0b439", "message": "* Fix typos; code clean up", "committedDate": "2020-03-17T16:50:18Z", "type": "commit"}]}