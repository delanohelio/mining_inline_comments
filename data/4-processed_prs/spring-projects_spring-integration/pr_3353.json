{"pr_number": 3353, "pr_title": "AMQP: Support CorrelationData Message Headers", "pr_createdAt": "2020-07-30T21:55:38Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3353", "timeline": [{"oid": "74975ae8e7a3219fe6dfc2c7191f23732c19e818", "url": "https://github.com/spring-projects/spring-integration/commit/74975ae8e7a3219fe6dfc2c7191f23732c19e818", "message": "AMQP: Support CorrelationData Message Headers\n\nIn preparation for https://github.com/spring-cloud/spring-cloud-stream-binder-rabbit/issues/303\n\nNow that `CorrelationData` has a `Future<?>`, users might simply add\ncorrelation data in a header and not receive confirm/return messages.\n\n- No longer require channels for returns and confirms\n- don't build the confirm message if there are no channels\n- reduce the log level for no channels to DEBUG\n- complete the user's future when a message is returned (async GW)", "committedDate": "2020-07-30T21:54:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYwMzg1Mw==", "url": "https://github.com/spring-projects/spring-integration/pull/3353#discussion_r463603853", "bodyText": "I think this is a copy/paste artefact.\nProbably this new Also... sentence should go already after additional headers added.", "author": "artembilan", "createdAt": "2020-07-31T13:15:47Z", "path": "src/reference/asciidoc/amqp.adoc", "diffHunk": "@@ -1025,24 +1034,29 @@ When a publisher confirmation is received and correlation data is supplied, the\n The payload of the confirmation is the correlation data as defined by this expression, and the message has its 'amqp_publishConfirm' header set to `true` (`ack`) or `false` (`nack`).\n For `nack` instances, an additional header (`amqp_publishConfirmNackCause`) is provided.\n Examples: `headers['myCorrelationData']`, `payload`.\n-If the expression resolves to a `Message<?>` instance (such as \"`#this`\"), the message emitted on the `ack`/`nack` channel is based on that message, with the additional headers added.\n+If the expression resolves to a `Message<?>` instance (such as \"`#this`\"), the message emitted on the `ack`/`nack` channel is based on that message, with the Also see <<alternative-confirms-returns>>.\n+additional headers added.", "originalCommit": "74975ae8e7a3219fe6dfc2c7191f23732c19e818", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "83271aedf4b341117a32628bcc2b7e46214916d8", "url": "https://github.com/spring-projects/spring-integration/commit/83271aedf4b341117a32628bcc2b7e46214916d8", "message": "Fix typo.", "committedDate": "2020-07-31T13:40:53Z", "type": "commit"}]}