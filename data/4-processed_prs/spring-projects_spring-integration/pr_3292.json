{"pr_number": 3292, "pr_title": "GH-3280: NullChannel as reply for void gateways", "pr_createdAt": "2020-05-27T19:30:51Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3292", "timeline": [{"oid": "a6f6a01ff4a88320ffd03b6376673fdad65e40a6", "url": "https://github.com/spring-projects/spring-integration/commit/a6f6a01ff4a88320ffd03b6376673fdad65e40a6", "message": "GH-3280: NullChannel as reply for void gateways\n\nFixes https://github.com/spring-projects/spring-integration/issues/3280\n\nTo properly support a one-way gateway (`void` return type), it is\nbetter to ignore any possible replies from downstream instead of\nunexpected `no output-channel or replyChannel header available`\nerror\n\n* Populate a `nullChannel` into a `replyChannel` header\nfor `void` gateway methods when `replyChannel` is not set explicitly\n* Remove redundant `GatewayProxyFactoryBean.PARSER` in favor of\nsimilar `EXPRESSION_PARSER` in the super class\n* Test and document the feature", "committedDate": "2020-05-27T19:30:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwMTMyOA==", "url": "https://github.com/spring-projects/spring-integration/pull/3292#discussion_r431401328", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See for more information in the <<./gateway.adoc#gateway-default-reply-channel,Setting the Default Reply Channel>>.\n          \n          \n            \n            See <<./gateway.adoc#gateway-default-reply-channel,Setting the Default Reply Channel>> for more information.", "author": "garyrussell", "createdAt": "2020-05-27T19:45:47Z", "path": "src/reference/asciidoc/whats-new.adoc", "diffHunk": "@@ -12,3 +12,11 @@ If you are interested in the changes and features that were introduced in earlie\n \n If you are interested in more details, see the Issue Tracker tickets that were resolved as part of the 5.4 development process.\n \n+[[x5.4-new-components]]\n+=== New Components\n+\n+[[x5.4-general]]\n+=== General Changes\n+\n+The one-way messaging gateway (the `void` method return type) now sets a `nullChannel` explicitly into the `replyChannel` header to ignore any possible downstream replies.\n+See for more information in the <<./gateway.adoc#gateway-default-reply-channel,Setting the Default Reply Channel>>.", "originalCommit": "a6f6a01ff4a88320ffd03b6376673fdad65e40a6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQwMjMwNw==", "url": "https://github.com/spring-projects/spring-integration/pull/3292#discussion_r431402307", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Such a behavior allows to ignore possible reply from downstream flow meeting a one-way gateway contract.\n          \n          \n            \n            This allows any possible reply from the downstream flow to be discarded, meeting the one-way gateway contract.", "author": "garyrussell", "createdAt": "2020-05-27T19:47:39Z", "path": "src/reference/asciidoc/gateway.adoc", "diffHunk": "@@ -82,6 +82,9 @@ The gateway creates a bridge from it to the temporary, anonymous reply channel t\n You might also want to explicitly provide a reply channel for monitoring or auditing through an interceptor (for example, <<./channel.adoc#channel-wiretap,wiretap>>).\n To configure a channel interceptor, you need a named channel.\n \n+NOTE: Starting with version 5.4, when gateway method return type is `void`, the framework populates a `replyChannel` header as a `nullChannel` bean reference if such a header is not provided explicitly.\n+Such a behavior allows to ignore possible reply from downstream flow meeting a one-way gateway contract.", "originalCommit": "a6f6a01ff4a88320ffd03b6376673fdad65e40a6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "26fb8f2c142b138153bbd643513dcd70e87714e6", "url": "https://github.com/spring-projects/spring-integration/commit/26fb8f2c142b138153bbd643513dcd70e87714e6", "message": "* Fix language in the `whats-new.adoc`\n\nCo-authored-by: Gary Russell <grussell@vmware.com>", "committedDate": "2020-05-27T19:57:54Z", "type": "commit"}, {"oid": "1fad79c7c43e5da034eb5d85226d65386f0c6781", "url": "https://github.com/spring-projects/spring-integration/commit/1fad79c7c43e5da034eb5d85226d65386f0c6781", "message": "* Fix language in gateway.adoc\n\nCo-authored-by: Gary Russell <grussell@vmware.com>", "committedDate": "2020-05-27T19:58:13Z", "type": "commit"}]}