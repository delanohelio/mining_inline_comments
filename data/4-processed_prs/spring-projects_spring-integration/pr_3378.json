{"pr_number": 3378, "pr_title": "GH-3374: Fix scan for BF propagation", "pr_createdAt": "2020-09-09T21:44:56Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3378", "timeline": [{"oid": "e5f44af51a2bcf3c39817b2cbd7d864984b93193", "url": "https://github.com/spring-projects/spring-integration/commit/e5f44af51a2bcf3c39817b2cbd7d864984b93193", "message": "GH-3374: Fix scan for BF propagation\n\nFixes https://github.com/spring-projects/spring-integration/issues/3374\n\nAn internal `ClassPathScanningCandidateComponentProvider` instance in the `IntegrationComponentScanRegistrar`\ndoes not propagate a provided `registry`.\n\n* Implement `getRegistry()` on the internal `ClassPathScanningCandidateComponentProvider` to propagate\na provided into the `registerBeanDefinitions()` a `BeanDefinitionRegistry`\n* Add `@Conditional` on some scanned `@MessagingGateway` in the `EnableIntegrationTests`\n\n**Cherry-pick to 5.3.x & 5.2.x**", "committedDate": "2020-09-09T21:44:36Z", "type": "commit"}, {"oid": "c85d2170341c05aaf11df04366c15292ad8a24e4", "url": "https://github.com/spring-projects/spring-integration/commit/c85d2170341c05aaf11df04366c15292ad8a24e4", "message": "* Remove unused import", "committedDate": "2020-09-09T22:10:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYyNzQ1NQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3378#discussion_r486627455", "bodyText": "? It is still unused (this was added to suppress a Sonar issue).", "author": "garyrussell", "createdAt": "2020-09-10T20:54:20Z", "path": "spring-integration-core/src/main/java/org/springframework/integration/config/IntegrationComponentScanRegistrar.java", "diffHunk": "@@ -150,7 +154,7 @@ private void filter(BeanDefinitionRegistry registry, Map<String, Object> compone\n \t}\n \n \tprotected Collection<String> getBasePackages(AnnotationMetadata importingClassMetadata,\n-\t\t\t@SuppressWarnings(\"unused\") BeanDefinitionRegistry registry) {\n+\t\t\tBeanDefinitionRegistry registry) {", "originalCommit": "c85d2170341c05aaf11df04366c15292ad8a24e4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYzNTEyOA==", "url": "https://github.com/spring-projects/spring-integration/pull/3378#discussion_r486635128", "bodyText": "Hm. I'm always super suspicious for any code which IDEA shows as  redundant.\nI'm not sure what the problem sees Sonar, but that's fully OK to override the method and don't use all the provided params.\n\ud83e\udd37", "author": "artembilan", "createdAt": "2020-09-10T21:09:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYyNzQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY0MzE0NQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3378#discussion_r486643145", "bodyText": "Sounds like a bug in IDEA to me; the variable is clearly not used here; whether the super method uses it is irrelevant.", "author": "garyrussell", "createdAt": "2020-09-10T21:26:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYyNzQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY1Njk0MA==", "url": "https://github.com/spring-projects/spring-integration/pull/3378#discussion_r486656940", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tBeanDefinitionRegistry registry) {\n          \n          \n            \n            \t\t\t@SuppressWarnings(\"unused\") BeanDefinitionRegistry registry) {", "author": "artembilan", "createdAt": "2020-09-10T21:58:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjYyNzQ1NQ=="}], "type": "inlineReview"}, {"oid": "b018dd522269f3025201f891b79722dad51b27fa", "url": "https://github.com/spring-projects/spring-integration/commit/b018dd522269f3025201f891b79722dad51b27fa", "message": "Restore `unused` warning on the unused registry arg", "committedDate": "2020-09-10T21:59:14Z", "type": "commit"}]}