{"pr_number": 3264, "pr_title": "Upgrade to latest version of Asciidoctor", "pr_createdAt": "2020-04-24T20:18:19Z", "pr_url": "https://github.com/spring-projects/spring-integration/pull/3264", "timeline": [{"oid": "12407d840c5d8711f0d77f54995f763547c3aec2", "url": "https://github.com/spring-projects/spring-integration/commit/12407d840c5d8711f0d77f54995f763547c3aec2", "message": "Upgrade to latest version of Asciidoctor\n\nUpgrade to latest version of Asciidoctor because we were several\nversions behind and were steadily incurring more technical debt.", "committedDate": "2020-04-24T20:16:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4MzAzNQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415883035", "bodyText": "So, looks like project-version has gone.\nPlease, revise all our docs then to replace this one with a new revnumber.\nFor example right now now I see this:\n<version>{project-version}</version>\n\nOr this compile \"org.springframework.integration:spring-integration-amqp:{project-version}\"\nHas to be an actual project version we built these docs against.", "author": "artembilan", "createdAt": "2020-04-27T14:54:12Z", "path": "src/reference/asciidoc/index-header.adoc", "diffHunk": "@@ -3,7 +3,7 @@\n Mark Fisher; Marius Bogoevici; Iwein Fuld; Jonas Partner; Oleg Zhurakousky; Gary Russell; Dave Syer; Josh Long; David Turanski; Gunnar Hillert; Artem Bilan; Amol Nayak; Jay Bryant\n \n ifdef::backend-html5[]\n-*{project-version}*", "originalCommit": "12407d840c5d8711f0d77f54995f763547c3aec2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkxMjIyMQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415912221", "bodyText": "I added a project-version attribute back into the asciidoctor and asciidoctorPdf tasks. That fixed it.", "author": "Buzzardo", "createdAt": "2020-04-27T15:28:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4MzAzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4NTM5NQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415885395", "bodyText": "Sorry, forgot to ask: do we really need these extra repos?", "author": "artembilan", "createdAt": "2020-04-27T14:56:45Z", "path": "build.gradle", "diffHunk": "@@ -2,22 +2,25 @@ buildscript {\n \text.kotlinVersion = '1.3.71'\n \trepositories {\n \t\tmaven { url 'https://repo.spring.io/plugins-release' }\n+\t\tjcenter()\n+\t\tmavenCentral()", "originalCommit": "12407d840c5d8711f0d77f54995f763547c3aec2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkxMTU0OA==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415911548", "bodyText": "Yes, we do. I tried it without them, but it doesn't work. Those repos are where the asciidoctor and asciidoctorPdf tasks come from, so the build breaks without them. I share your pain here: It seems goofy to add those.\nEdit: I tried it again without those repositories, and it does work without them, so I removed them in another commit.", "author": "Buzzardo", "createdAt": "2020-04-27T15:27:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTg4NTM5NQ=="}], "type": "inlineReview"}, {"oid": "25eb7f5b4c8141d939119d6ad24ca6f203033fc4", "url": "https://github.com/spring-projects/spring-integration/commit/25eb7f5b4c8141d939119d6ad24ca6f203033fc4", "message": "Replace project-version attribute in Asciidoctor\n\nI had removed the project-version attribute, but the docs use it all\nover, so I put it back.", "committedDate": "2020-04-27T15:19:07Z", "type": "commit"}, {"oid": "80824a25579c494bd16e21a391edeab38353c5e5", "url": "https://github.com/spring-projects/spring-integration/commit/80824a25579c494bd16e21a391edeab38353c5e5", "message": "Removed unneeded repositories\n\nIt turns out that those repositories are not needed.", "committedDate": "2020-04-27T15:35:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkzMTU4Mg==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415931582", "bodyText": "Can we extract this as a asciidoctorVersion?\nAlongside with that ext.kotlinVersion = '1.3.71' above.\nThanks", "author": "artembilan", "createdAt": "2020-04-27T15:49:34Z", "path": "build.gradle", "diffHunk": "@@ -6,18 +6,19 @@ buildscript {\n \tdependencies {\n \t\tclasspath \"org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion\"\n \t\tclasspath \"org.jetbrains.kotlin:kotlin-allopen:$kotlinVersion\"\n-\t\tclasspath 'org.asciidoctor:asciidoctorj-pdf:1.5.0-beta.6'\n \t}\n }\n \n plugins {\n \tid 'org.sonarqube' version '2.8'\n-\tid 'org.asciidoctor.convert' version '1.6.1'\n \tid 'io.spring.nohttp' version '0.0.4.RELEASE' apply false\n \tid 'org.ajoberstar.grgit' version '4.0.1'\n \tid \"io.spring.dependency-management\" version '1.0.9.RELEASE'\n \tid 'com.jfrog.artifactory' version '4.15.1' apply false\n \tid 'org.jetbrains.dokka' version '0.10.1'\n+\tid 'org.asciidoctor.jvm.pdf' version '3.1.0'\n+\tid 'org.asciidoctor.jvm.gems' version '3.1.0'\n+\tid 'org.asciidoctor.jvm.convert' version '3.1.0'", "originalCommit": "80824a25579c494bd16e21a391edeab38353c5e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkzNjA4Ng==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415936086", "bodyText": "I don't think the asciidoctor folks are trying to keep them in sync. I think it's a coincidence that they are the same just now. We can do it, but we may end up with three variables down the road. I'll go ahead and do it, though, since it seems to be Spring's usual way of doing things.", "author": "Buzzardo", "createdAt": "2020-04-27T15:54:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTkzMTU4Mg=="}], "type": "inlineReview"}, {"oid": "079cd9bd5381363cbeaa0ba7cbf2d065a321cf3a", "url": "https://github.com/spring-projects/spring-integration/commit/079cd9bd5381363cbeaa0ba7cbf2d065a321cf3a", "message": "Use a variable for the asciidoctor versions\n\nUse a variable to specify the version of the various asciidoctor\ncomponents. If they do not remain in sync, we may need multiple\nvariables in the future. Also, the Gradle documentation says to\nset this up across three files.", "committedDate": "2020-04-27T16:13:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk1NTgxMw==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415955813", "bodyText": "No, I kinda agree with you about different versions in the future.\nAlso I don't like the change spreaded to several files which are fully not related to docs.\nCan we, please, revert this commit?", "author": "artembilan", "createdAt": "2020-04-27T16:19:36Z", "path": "gradle.properties", "diffHunk": "@@ -2,3 +2,4 @@ version=5.3.0.BUILD-SNAPSHOT\n org.gradle.jvmargs=-Xmx1536m -Dfile.encoding=UTF-8\n org.gradle.caching=true\n org.gradle.parallel=true\n+asciidoctorVersion=3.1.0", "originalCommit": "079cd9bd5381363cbeaa0ba7cbf2d065a321cf3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk2MDY4NA==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415960684", "bodyText": "I didn't like it rolling into three files, either. I'll revert it.", "author": "Buzzardo", "createdAt": "2020-04-27T16:25:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk1NTgxMw=="}], "type": "inlineReview"}, {"oid": "0e2e1285e7a0d108083654ff1edc13e7000bab31", "url": "https://github.com/spring-projects/spring-integration/commit/0e2e1285e7a0d108083654ff1edc13e7000bab31", "message": "Fix a broken cross-reference\n\nA cross-reference was incorrectly formatted (missing the # character).", "committedDate": "2020-04-27T16:23:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk2MDY0Nw==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415960647", "bodyText": "I think this is still wrong.\nMust be:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See more information in the <<./reactive-streams.adoc/#reactive-message-handler,ReactiveMessageHandler>>.\n          \n          \n            \n            See more information in the <<./reactive-streams.adoc#reactive-message-handler,ReactiveMessageHandler>>.", "author": "artembilan", "createdAt": "2020-04-27T16:25:53Z", "path": "src/reference/asciidoc/mongodb.adoc", "diffHunk": "@@ -548,7 +548,7 @@ Starting with version 5.3, the `ReactiveMongoDbStoringMessageHandler` and `React\n They are based on the `ReactiveMongoOperations` from Spring Data and requires a `org.mongodb:mongodb-driver-reactivestreams` dependency.\n \n The `ReactiveMongoDbStoringMessageHandler` is an implementation of the `ReactiveMessageHandler` which is supported natively in the framework when reactive streams composition is involved in the integration flow definition.\n-See more information in the <<./reactive-streams.adoc/reactive-message-handler,ReactiveMessageHandler>>.\n+See more information in the <<./reactive-streams.adoc/#reactive-message-handler,ReactiveMessageHandler>>.", "originalCommit": "0e2e1285e7a0d108083654ff1edc13e7000bab31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk2NzUzNQ==", "url": "https://github.com/spring-projects/spring-integration/pull/3264#discussion_r415967535", "bodyText": "Got it this time.", "author": "Buzzardo", "createdAt": "2020-04-27T16:34:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTk2MDY0Nw=="}], "type": "inlineReview"}, {"oid": "f2570556c1995be8676c3bbe56abdf20e0814d5b", "url": "https://github.com/spring-projects/spring-integration/commit/f2570556c1995be8676c3bbe56abdf20e0814d5b", "message": "Revert \"Use a variable for the asciidoctor versions\"\n\nThis reverts commit 079cd9bd5381363cbeaa0ba7cbf2d065a321cf3a.", "committedDate": "2020-04-27T16:26:32Z", "type": "commit"}, {"oid": "8c6e1eb000f4889b82107c7cb0a4dbb636d01a14", "url": "https://github.com/spring-projects/spring-integration/commit/8c6e1eb000f4889b82107c7cb0a4dbb636d01a14", "message": "Fixing a bad reference (again)\n\nI didn't realize the / character was also a problem.", "committedDate": "2020-04-27T16:32:54Z", "type": "commit"}]}