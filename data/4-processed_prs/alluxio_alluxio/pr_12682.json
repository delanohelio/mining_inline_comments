{"pr_number": 12682, "pr_title": "Add a native profile to build jnifuse in compile phase", "pr_createdAt": "2020-12-25T17:04:56Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12682", "timeline": [{"oid": "5afe4a40def0b2f28748044029b117c27fff063f", "url": "https://github.com/Alluxio/alluxio/commit/5afe4a40def0b2f28748044029b117c27fff063f", "message": "Add a native profile to build jnifuse in compile phase", "committedDate": "2020-12-25T17:03:57Z", "type": "commit"}, {"oid": "db830e99e50c33b198f1b9725cbe54e8431ade1c", "url": "https://github.com/Alluxio/alluxio/commit/db830e99e50c33b198f1b9725cbe54e8431ade1c", "message": "Improve makefile", "committedDate": "2020-12-30T07:33:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkxODQzNg==", "url": "https://github.com/Alluxio/alluxio/pull/12682#discussion_r552918436", "bodyText": "it seems I have to change this to <exec executable=\"make\" failonerror=\"true\" dir=\"${project.basedir}/src/main/native/libjnifuse\"/>\nor the build will fail", "author": "apc999", "createdAt": "2021-01-06T19:27:17Z", "path": "integration/fuse/pom.xml", "diffHunk": "@@ -63,7 +63,39 @@\n       <scope>test</scope>\n     </dependency>\n   </dependencies>\n-\n+  <profiles>\n+    <profile>\n+      <id>native</id>\n+      <activation>\n+        <activeByDefault>false</activeByDefault>\n+      </activation>\n+      <properties>\n+        <runningWithNative>true</runningWithNative>\n+      </properties>\n+      <build>\n+        <plugins>\n+          <plugin>\n+            <groupId>org.apache.maven.plugins</groupId>\n+            <artifactId>maven-antrun-plugin</artifactId>\n+            <executions>\n+              <execution>\n+                <id>native_fuse_compile</id>\n+                <phase>compile</phase>\n+                <goals><goal>run</goal></goals>\n+                <configuration>\n+                  <target>\n+                    <mkdir dir=\"${project.build.directory}/native\"/>\n+                    <exec executable=\"make\" failonerror=\"true\" dir=\"${project.build.directory}/native\">", "originalCommit": "db830e99e50c33b198f1b9725cbe54e8431ade1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzA5MjQzNg==", "url": "https://github.com/Alluxio/alluxio/pull/12682#discussion_r553092436", "bodyText": "@apc999 Maybe something wrong here, but, I aimed to change the working directory from the source directory to a generated directory ${project.build.directory}/native\". Let me check why it failed.", "author": "maobaolong", "createdAt": "2021-01-07T03:42:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkxODQzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzExMTUxOA==", "url": "https://github.com/Alluxio/alluxio/pull/12682#discussion_r553111518", "bodyText": "I forget to add a -f argument to specify the makefile. It's my bad.", "author": "maobaolong", "createdAt": "2021-01-07T05:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MjkxODQzNg=="}], "type": "inlineReview"}, {"oid": "f4e56ddb118162b53b2222fb000aed6879bb159b", "url": "https://github.com/Alluxio/alluxio/commit/f4e56ddb118162b53b2222fb000aed6879bb159b", "message": "Fix build error", "committedDate": "2021-01-07T05:05:47Z", "type": "commit"}]}