{"pr_number": 11545, "pr_title": "Update emr script", "pr_createdAt": "2020-06-10T23:35:38Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11545", "timeline": [{"oid": "f2df2ffeeec47719a47f840a4052f482a4f38c18", "url": "https://github.com/Alluxio/alluxio/commit/f2df2ffeeec47719a47f840a4052f482a4f38c18", "message": "Update emr script\n\nallow empty ufs uri (means local hdfs mount)\n-c flag which installs client jar and conf but do not start alluxio", "committedDate": "2020-06-10T23:33:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5ODYxOA==", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438498618", "bodyText": "alphabetical ordering of flags (but i may suggest using other characters in a bit)", "author": "Xenorith", "createdAt": "2020-06-11T01:49:39Z", "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -170,13 +171,15 @@ main() {\n   print_help() {\n     local -r USAGE=$(cat <<USAGE_END\n \n-Usage: alluxio-emr.sh <root-ufs-uri> [-b <backup_uri>]\n-                             [ -d <alluxio-download-uri>]\n-                             [-f <file_uri>]\n-                             [-i <journal_backup_uri>]\n-                             [-n <storage percentage>]\n-                             [-p <delimited_properties>]\n-                             [-s <property_delimiter>]\n+Usage: alluxio-emr.sh [-u <root-ufs-uri>]", "originalCommit": "f2df2ffeeec47719a47f840a4052f482a4f38c18", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ5ODkxNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438498915", "bodyText": "the getopts string should be \"b:cd:f:i:n:p:s:u:\"\n: means expect an argument value afterwards, so c doesn't get one", "author": "Xenorith", "createdAt": "2020-06-11T01:50:40Z", "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -244,17 +249,16 @@ USAGE_END\n   local restore_from_backup_uri=\"\"\n   local files_list=\"\"\n   local nvme_capacity_usage=\"\"\n-\n-  if [[ \"$#\" -lt \"1\" ]]; then\n-    echo -e \"No root UFS URI provided\"\n-    print_help 1\n-  fi\n-\n-  local root_ufs_uri=\"${1}\"\n-  shift\n-  while getopts \"b:d:f:i:n:p:s:\" option; do\n-    OPTARG=$(echo -e \"${OPTARG}\" | tr -d '[:space:]')\n+  local root_ufs_uri=\"\"\n+  local client_only=\"false\"\n+  while getopts \":u:b:d:f:i:n:p:s:c\" option; do", "originalCommit": "f2df2ffeeec47719a47f840a4052f482a4f38c18", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwNDg2NA==", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438504864", "bodyText": "@yuzhu why introduce a new flag? we are breaking backwards compatibility here", "author": "madanadit", "createdAt": "2020-06-11T02:14:49Z", "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -170,13 +171,15 @@ main() {\n   print_help() {\n     local -r USAGE=$(cat <<USAGE_END\n \n-Usage: alluxio-emr.sh <root-ufs-uri> [-b <backup_uri>]\n-                             [ -d <alluxio-download-uri>]\n-                             [-f <file_uri>]\n-                             [-i <journal_backup_uri>]\n-                             [-n <storage percentage>]\n-                             [-p <delimited_properties>]\n-                             [-s <property_delimiter>]\n+Usage: alluxio-emr.sh [-u <root-ufs-uri>]", "originalCommit": "f2df2ffeeec47719a47f840a4052f482a4f38c18", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwOTY0Mg==", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438509642", "bodyText": "the alternative is to use empty string to represent \"use local hdfs as root ufs\"\nI am fine with that too.", "author": "yuzhu", "createdAt": "2020-06-11T02:34:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwNDg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUxMzAxNw==", "url": "https://github.com/Alluxio/alluxio/pull/11545#discussion_r438513017", "bodyText": "is that possible? would bash read this correctly? alluxio-emr.sh \"\" -a someArg -b someArg ...", "author": "Xenorith", "createdAt": "2020-06-11T02:48:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODUwNDg2NA=="}], "type": "inlineReview"}, {"oid": "c8bf3ebc8e9faf706ae0cd467dfba999b356effb", "url": "https://github.com/Alluxio/alluxio/commit/c8bf3ebc8e9faf706ae0cd467dfba999b356effb", "message": "address comments, back compat", "committedDate": "2020-06-11T03:16:32Z", "type": "commit"}]}