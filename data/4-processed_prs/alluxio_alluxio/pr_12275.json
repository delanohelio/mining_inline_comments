{"pr_number": 12275, "pr_title": "Update Journal management doc and deprecated properties", "pr_createdAt": "2020-10-13T23:35:35Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12275", "timeline": [{"oid": "3302d7414fc5a4cc71ba418a7268db790ce698bf", "url": "https://github.com/Alluxio/alluxio/commit/3302d7414fc5a4cc71ba418a7268db790ce698bf", "message": "Update Journal management doc", "committedDate": "2020-10-13T23:31:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxNzY2OQ==", "url": "https://github.com/Alluxio/alluxio/pull/12275#discussion_r504317669", "bodyText": "@bf8086 are the following properties need to be added as advanced configuration:\nMASTER_EMBEDDED_JOURNAL_CATCHUP_RETRY_WAIT\nMASTER_EMBEDDED_JOURNAL_WRITE_LOCAL_FIRST_ENABLED \nMASTER_EMBEDDED_JOURNAL_SNAPSHOT_REPLICATION_CHUNK_SIZE", "author": "LuQQiu", "createdAt": "2020-10-13T23:36:39Z", "path": "docs/en/operation/Journal.md", "diffHunk": "@@ -104,11 +104,9 @@ If this is not set, clients will look for masters using the hostnames from `allu\n and the master rpc port (Default:`19998`).\n \n ### Advanced configuration\n+\n * `alluxio.master.embedded.journal.transport.request.timeout.ms`: The duration after which embedded journal masters will timeout messages sent between each other.\n  Lower values might cause leadership instability when network is slow. Default: `5s`.\n-* `alluxio.master.embedded.journal.appender.batch.size`: Size of a single internal knowledge batch sent from leader to secondary masters.", "originalCommit": "3302d7414fc5a4cc71ba418a7268db790ce698bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3NDU2Mg==", "url": "https://github.com/Alluxio/alluxio/pull/12275#discussion_r505774562", "bodyText": "Yes.", "author": "bf8086", "createdAt": "2020-10-15T19:03:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDMxNzY2OQ=="}], "type": "inlineReview"}, {"oid": "0402ab4f455365667eda7bbf826f5d7395c671e4", "url": "https://github.com/Alluxio/alluxio/commit/0402ab4f455365667eda7bbf826f5d7395c671e4", "message": "Add journal doc changes", "committedDate": "2020-10-14T00:02:08Z", "type": "commit"}, {"oid": "22987158e77409fe8a1b6d25ef2f925f73d4231d", "url": "https://github.com/Alluxio/alluxio/commit/22987158e77409fe8a1b6d25ef2f925f73d4231d", "message": "Modify journal docs", "committedDate": "2020-10-14T18:05:14Z", "type": "commit"}, {"oid": "8ae1a1dde4fece19667b963ca9236bf7d1b379bc", "url": "https://github.com/Alluxio/alluxio/commit/8ae1a1dde4fece19667b963ca9236bf7d1b379bc", "message": "Remove journal dump files", "committedDate": "2020-10-14T18:06:29Z", "type": "commit"}, {"oid": "86272b6784082d0112d985b8c5017232cf0805fc", "url": "https://github.com/Alluxio/alluxio/commit/86272b6784082d0112d985b8c5017232cf0805fc", "message": "Fix comment", "committedDate": "2020-10-14T18:09:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0OTUzMA==", "url": "https://github.com/Alluxio/alluxio/pull/12275#discussion_r504949530", "bodyText": "Could you clarify if the user needs to do anything on their end or if this is an automatic optimization?", "author": "calvinjia", "createdAt": "2020-10-14T20:22:14Z", "path": "docs/en/operation/Journal.md", "diffHunk": "@@ -343,6 +340,10 @@ Therefore, Alluxio primary master will not create checkpoints by default.\n Restarting the current primary master to transfer the leadership to another running master periodically\n can help avoiding primary master journal logs from growing unbounded when Alluxio is running in HA mode.\n \n+Starting from Alluxio 2.4.0, Alluxio primary master can download checkpoints from standby masters\n+and install in its journal folder in embedded journal HA mode. By doing so, Alluxio primary master \n+can truncate its journal size without causing temporary service unavailability.", "originalCommit": "86272b6784082d0112d985b8c5017232cf0805fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTAyMjIzMw==", "url": "https://github.com/Alluxio/alluxio/pull/12275#discussion_r505022233", "bodyText": "Modify the words, please take another look, thanks!", "author": "LuQQiu", "createdAt": "2020-10-14T22:26:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0OTUzMA=="}], "type": "inlineReview"}, {"oid": "500d8a0045709e927408a458ad1461fdc721d92f", "url": "https://github.com/Alluxio/alluxio/commit/500d8a0045709e927408a458ad1461fdc721d92f", "message": "Address comments", "committedDate": "2020-10-14T22:25:07Z", "type": "commit"}]}