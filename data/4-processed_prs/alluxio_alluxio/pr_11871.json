{"pr_number": 11871, "pr_title": "Replace alluxio.worker.memory.size with alluxio.worker.ramdisk.size", "pr_createdAt": "2020-08-01T01:05:41Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11871", "timeline": [{"oid": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "url": "https://github.com/Alluxio/alluxio/commit/8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "message": "replace alluxio.worker.memory.size with alluxio.worker.ramdisk.size", "committedDate": "2020-08-01T01:04:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyMjc3MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464722771", "bodyText": "Please update the description", "author": "calvinjia", "createdAt": "2020-08-03T23:58:33Z", "path": "docs/_data/table/en/worker-configuration.yml", "diffHunk": "@@ -40,7 +40,7 @@ alluxio.worker.keytab.file:\n   'Kerberos keytab file for Alluxio worker.'\n alluxio.worker.master.connect.retry.timeout:\n   'Retry period before workers give up on connecting to master and exit.'\n-alluxio.worker.memory.size:\n+alluxio.worker.ramdisk.size:", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcyMjk0Ng==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464722946", "bodyText": "Could we word this part differently? I think the idea is the difference should be clear cut now", "author": "calvinjia", "createdAt": "2020-08-03T23:59:13Z", "path": "docs/en/core-services/Caching.md", "diffHunk": "@@ -108,10 +108,10 @@ alluxio.worker.tieredstore.level0.dirs.quota=16GB,100GB,100GB\n Note that the ordering of the quotas must match with the ordering of the paths.\n \n \n-There is a subtle difference between `alluxio.worker.memory.size` and\n+There is a subtle difference between `alluxio.worker.ramdisk.size` and", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNjU4Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464736583", "bodyText": "MEM_SIZE -> RAMDISK_SIZE ?", "author": "apc999", "createdAt": "2020-08-04T00:49:32Z", "path": "bin/alluxio-mount.sh", "diffHunk": "@@ -23,7 +23,7 @@ USAGE=\"Usage: alluxio-mount.sh [Mount|SudoMount|Umount|SudoUmount] [MACHINE]\n function init_env() {\n   local libexec_dir=${ALLUXIO_LIBEXEC_DIR:-\"${BIN}\"/../libexec}\n   . ${libexec_dir}/alluxio-config.sh\n-  MEM_SIZE=$(${BIN}/alluxio getConf --unit B alluxio.worker.memory.size)\n+  MEM_SIZE=$(${BIN}/alluxio getConf --unit B alluxio.worker.ramdisk.size)", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczNzg0OA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464737848", "bodyText": "WORKER_RAMDISK_SIZE", "author": "apc999", "createdAt": "2020-08-04T00:54:46Z", "path": "core/common/src/main/java/alluxio/conf/PropertyKey.java", "diffHunk": "@@ -2639,7 +2639,7 @@ public String toString() {\n           .setScope(Scope.WORKER)\n           .build();\n   public static final PropertyKey WORKER_MEMORY_SIZE =", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODQ5Mg==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464738492", "bodyText": "setAlias to WORKER_MEMORY_SIZE", "author": "apc999", "createdAt": "2020-08-04T00:57:24Z", "path": "core/common/src/main/java/alluxio/conf/PropertyKey.java", "diffHunk": "@@ -2639,7 +2639,7 @@ public String toString() {\n           .setScope(Scope.WORKER)\n           .build();\n   public static final PropertyKey WORKER_MEMORY_SIZE =\n-      new Builder(Name.WORKER_MEMORY_SIZE)\n+      new Builder(Name.WORKER_RAMDISK_SIZE)", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODU5OA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464738598", "bodyText": "Update alluxio.conf.RemovedKey#REMOVED_KEYS", "author": "apc999", "createdAt": "2020-08-04T00:57:54Z", "path": "core/common/src/main/java/alluxio/conf/PropertyKey.java", "diffHunk": "@@ -5201,7 +5201,7 @@ private static String javadocLink(String fullyQualifiedClassname) {\n     public static final String WORKER_KEYTAB_FILE = \"alluxio.worker.keytab.file\";\n     public static final String WORKER_MASTER_CONNECT_RETRY_TIMEOUT =\n         \"alluxio.worker.master.connect.retry.timeout\";\n-    public static final String WORKER_MEMORY_SIZE = \"alluxio.worker.memory.size\";", "originalCommit": "8aca5a327455dc97cda1f0c6022bbf2c2cfa7973", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDg1MzAyOA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r464853028", "bodyText": "is it still a removed key if we have an alias for it?", "author": "yuzhu", "createdAt": "2020-08-04T07:26:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODU5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzMjc0OA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r465932748", "bodyText": "yes we still put them in RemovedKey, just check it out and you will find examples. Usage of RemovedKey is really about showing messages when users are using it. That's where we put hooks to alert", "author": "apc999", "createdAt": "2020-08-05T18:49:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDczODU5OA=="}], "type": "inlineReview"}, {"oid": "aab48e1ca1169eda8cf284cd20553e61e6abcbfc", "url": "https://github.com/Alluxio/alluxio/commit/aab48e1ca1169eda8cf284cd20553e61e6abcbfc", "message": "address comments", "committedDate": "2020-08-04T07:28:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzNDUyMA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r465934520", "bodyText": "nit: WORKER_MEM_SIZE -> WORKER_MEMORY_SIZE to keep consistent with our naming convention", "author": "apc999", "createdAt": "2020-08-05T18:52:41Z", "path": "core/common/src/main/java/alluxio/conf/PropertyKey.java", "diffHunk": "@@ -5201,7 +5202,7 @@ private static String javadocLink(String fullyQualifiedClassname) {\n     public static final String WORKER_KEYTAB_FILE = \"alluxio.worker.keytab.file\";\n     public static final String WORKER_MASTER_CONNECT_RETRY_TIMEOUT =\n         \"alluxio.worker.master.connect.retry.timeout\";\n-    public static final String WORKER_MEMORY_SIZE = \"alluxio.worker.memory.size\";\n+    public static final String WORKER_MEM_SIZE = \"alluxio.worker.memory.size\";", "originalCommit": "aab48e1ca1169eda8cf284cd20553e61e6abcbfc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzNTAwOQ==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r465935009", "bodyText": "ALLUXIO_WORKER_MEMORY_SIZE -> ALLUXIO_WORKER_RAMDISK_SIZE, or maybe we should keep both env var until 3.0 @calvinjia , what's our deprecation policy?", "author": "apc999", "createdAt": "2020-08-05T18:53:37Z", "path": "libexec/alluxio-config.sh", "diffHunk": "@@ -84,7 +84,7 @@ elif [[ -n \"${ALLUXIO_UNDERFS_ADDRESS}\" ]]; then\n fi\n \n if [[ -n \"${ALLUXIO_WORKER_MEMORY_SIZE}\" ]]; then", "originalCommit": "aab48e1ca1169eda8cf284cd20553e61e6abcbfc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE5MjE3Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r467192173", "bodyText": "@yuzhu can you add a comment saying this is depreciated and we keep this for compatibility?", "author": "apc999", "createdAt": "2020-08-07T18:05:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzNTAwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE5NDY2OA==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r467194668", "bodyText": "done", "author": "yuzhu", "createdAt": "2020-08-07T18:10:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTkzNTAwOQ=="}], "type": "inlineReview"}, {"oid": "2df3b48c45bda3aac3b2615e458b3ac65768fbcf", "url": "https://github.com/Alluxio/alluxio/commit/2df3b48c45bda3aac3b2615e458b3ac65768fbcf", "message": "add ALLUXIO_WORKER_RAMDISK_SIZE", "committedDate": "2020-08-06T20:09:33Z", "type": "commit"}, {"oid": "88e7feebeab8d26abad5a9cc6568043bc3f233be", "url": "https://github.com/Alluxio/alluxio/commit/88e7feebeab8d26abad5a9cc6568043bc3f233be", "message": "Update ALLUXIO_WORKER_MEMORY_SIZE to ALLUXIO_WORKER_RAMDISK_SIZE", "committedDate": "2020-08-06T20:11:22Z", "type": "commit"}, {"oid": "057dfcb68cb92659411b53d3d2565c07413069c9", "url": "https://github.com/Alluxio/alluxio/commit/057dfcb68cb92659411b53d3d2565c07413069c9", "message": "fix memory size", "committedDate": "2020-08-06T20:13:26Z", "type": "commit"}, {"oid": "b47a77e69848c5b1f62c7805dd8e7ab951679a14", "url": "https://github.com/Alluxio/alluxio/commit/b47a77e69848c5b1f62c7805dd8e7ab951679a14", "message": "add to removedKeys", "committedDate": "2020-08-06T20:27:21Z", "type": "commit"}, {"oid": "b87d0f075319a1262c4ace3b8ee76ef85942966c", "url": "https://github.com/Alluxio/alluxio/commit/b87d0f075319a1262c4ace3b8ee76ef85942966c", "message": "merge master with conflicts", "committedDate": "2020-08-06T22:42:38Z", "type": "commit"}, {"oid": "a9d7fd2af40357daff29c16c52a1a3f0735983a0", "url": "https://github.com/Alluxio/alluxio/commit/a9d7fd2af40357daff29c16c52a1a3f0735983a0", "message": "resolve conflict", "committedDate": "2020-08-06T22:45:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE5MTMwNg==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r467191306", "bodyText": "replacedSince(V2_4_0,  PropertyKey.Name.WORKER_RAMDISK_SIZE)", "author": "apc999", "createdAt": "2020-08-07T18:04:01Z", "path": "core/common/src/main/java/alluxio/conf/RemovedKey.java", "diffHunk": "@@ -132,6 +133,7 @@ private static String replacedSince(String version, String newProperty) {\n       put(\"alluxio.worker.file.persist.pool.size\", removedSince(V2_1_0));\n       put(\"alluxio.worker.file.persist.rate.limit\", removedSince(V2_1_0));\n       put(\"alluxio.worker.file.persist.rate.limit.enabled\", removedSince(V2_1_0));\n+      put(\"alluxio.worker.memory.size\", removedSince(V2_4_0));", "originalCommit": "a9d7fd2af40357daff29c16c52a1a3f0735983a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE5MzkyMw==", "url": "https://github.com/Alluxio/alluxio/pull/11871#discussion_r467193923", "bodyText": "fixed", "author": "yuzhu", "createdAt": "2020-08-07T18:09:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE5MTMwNg=="}], "type": "inlineReview"}, {"oid": "bd19594199281556802ff2099c2abfceac9f77e7", "url": "https://github.com/Alluxio/alluxio/commit/bd19594199281556802ff2099c2abfceac9f77e7", "message": "address comment", "committedDate": "2020-08-07T18:07:17Z", "type": "commit"}, {"oid": "8a79e3b9b39f9bd5b68de9b58e89550e5d9611de", "url": "https://github.com/Alluxio/alluxio/commit/8a79e3b9b39f9bd5b68de9b58e89550e5d9611de", "message": "add comment", "committedDate": "2020-08-07T18:11:18Z", "type": "commit"}, {"oid": "7abde9bef9c0e9ed5c9301c9acff3657e69ab96d", "url": "https://github.com/Alluxio/alluxio/commit/7abde9bef9c0e9ed5c9301c9acff3657e69ab96d", "message": "fix checkstyle", "committedDate": "2020-08-07T18:28:42Z", "type": "commit"}]}