{"pr_number": 11468, "pr_title": "Support alluxio.tar.gz in alluxio-emr.sh emr bootstrap", "pr_createdAt": "2020-05-23T01:23:21Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11468", "timeline": [{"oid": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "url": "https://github.com/Alluxio/alluxio/commit/28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "message": "Support alluxio.tar.gz in alluxio-emr.sh emr bootstrap", "committedDate": "2020-05-23T01:22:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwNTUxNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11468#discussion_r429505515", "bodyText": "should this be release_unzip?", "author": "Xenorith", "createdAt": "2020-05-23T02:16:02Z", "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -143,9 +143,12 @@ emr_install_alluxio() {\n   download_file \"${alluxio_tarball}\"\n \n   release=$(basename \"${alluxio_tarball}\")\n-  local release_unzip\n-  release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio\n-\n+  local release_prefix", "originalCommit": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwNTc2OQ==", "url": "https://github.com/Alluxio/alluxio/pull/11468#discussion_r429505769", "bodyText": "both of these expressions seem very fragile to me :/\nthe original expression of converting alluxio-* -> alluxio seems unnecessarily difficult\nis it not possible to trim the \".tar.gz\" suffix from the tarball and use that as the directory name that the tarball unzips to?", "author": "Xenorith", "createdAt": "2020-05-23T02:20:30Z", "path": "integration/emr/alluxio-emr.sh", "diffHunk": "@@ -143,9 +143,12 @@ emr_install_alluxio() {\n   download_file \"${alluxio_tarball}\"\n \n   release=$(basename \"${alluxio_tarball}\")\n-  local release_unzip\n-  release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio\n-\n+  local release_prefix\n+  if [[ \"${release}\" == *-* ]]; then\n+    release_unzip=\"${release%%-*}\" # trims everything after the first '-', ex. alluxio-foo-bar-whatever -> alluxio", "originalCommit": "28ce0f33accfe7678c6522f5f4d8036aa9d5f916", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwODQ0OA==", "url": "https://github.com/Alluxio/alluxio/pull/11468#discussion_r429508448", "bodyText": "emmm... the problem is the unzipped folder from  value.tar.gz doesn't name value", "author": "LuQQiu", "createdAt": "2020-05-23T03:05:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTUwNTc2OQ=="}], "type": "inlineReview"}, {"oid": "8590e1b3f4524b7ac7148fb491a9a2f30583eec5", "url": "https://github.com/Alluxio/alluxio/commit/8590e1b3f4524b7ac7148fb491a9a2f30583eec5", "message": "Fix error", "committedDate": "2020-05-23T03:02:32Z", "type": "commit"}]}