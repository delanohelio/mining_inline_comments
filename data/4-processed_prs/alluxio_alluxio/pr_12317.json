{"pr_number": 12317, "pr_title": "[DOCFIX] Improve contributor guide doc", "pr_createdAt": "2020-10-15T11:52:29Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12317", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MDI1MQ==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505480251", "bodyText": "Reduce duplicate sections", "author": "jiacheliu3", "createdAt": "2020-10-15T11:53:20Z", "path": "docs/en/contributor/Contributor-Tools.md", "diffHunk": "@@ -128,27 +127,13 @@ Please be patient as the first build may take a while.\n $ mvn -T 2C install -DskipTests\n ```\n \n-After the install target executes, you may configure and start a local cluster\n-with the following commands:\n-\n-> If you haven't configured or set up a local cluster yet, run the following commands to configure\n-a local installation.\n-\n-```console\n-$ cp conf/alluxio-site.properties.template conf/alluxio-site.properties\n-$ echo \"alluxio.master.hostname=localhost\" >> conf/alluxio-site.properties\n-$ ./bin/alluxio format\n-```\n-\n-Once you've run those commands steps you can start a local Alluxio instance with\n-\n-```console\n-$ ./bin/alluxio-start.sh local SudoMount\n-```\n+After the install target executes, you can follow the instructions at \n+[Running Alluxio Locally]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+to start a local cluster.", "originalCommit": "5e061e5f1337f9539a6df324c859dfd95f2f571a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MjkyOA==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505482928", "bodyText": "This link is gone", "author": "jiacheliu3", "createdAt": "2020-10-15T11:58:27Z", "path": "docs/en/contributor/Contributor-Tools.md", "diffHunk": "@@ -186,22 +172,21 @@ To run more comprehensive tests on HDFS under storage using a real and running H\n $ mvn test -pl underfs/hdfs -PufsContractTest -DtestHdfsBaseDir=hdfs://ip:port/alluxio_test\n ```\n \n-- To have the logs output to STDOUT, append the following arguments to the `mvn` command\n+#### Redirect logs to STDOUT\n+To have the logs output to STDOUT, append the following arguments to the `mvn` command\n \n ```\n -Dtest.output.redirect=false -Dalluxio.root.logger=DEBUG,CONSOLE\n ```\n \n-- To quickly test APIs in an interactive manner, you may leverage the Scala shell, as discussed in this \n-[blog](http://scala4fun.tumblr.com/post/84791653967/interactivejavacoding).", "originalCommit": "7d9ed42f6ca55f4023035194c07f6bab72981a07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505483406", "bodyText": "We no longer need the table here, as it's been outdated for a while. @Xenorith do you think we still need the csv resources?", "author": "jiacheliu3", "createdAt": "2020-10-15T11:59:20Z", "path": "docs/en/contributor/Contributor-Tools.md", "diffHunk": "@@ -227,26 +212,17 @@ $ mvn clean install -Pgenerate\n ```\n \n ## Usage of `./bin/alluxio`\n+ \n+Please refer to [Alluxio commands]({{ '/en/operation/User-CLI.html' | relativize_url }})\n+for all available commands.\n+\n+Some commands have different prerequisites.\n \n-Most commands in `bin/alluxio` are for developers. The following table explains the description and\n-the syntax of each command.\n-\n-<table class=\"table table-striped\">\n-    <tr><th>Command</th><th>Args</th><th>Description</th></tr>\n-    {% for dscp in site.data.table.developer-tips %}\n-        <tr>\n-            <td>{{dscp.command}}</td>\n-            <td>{{dscp.args}}</td>\n-            <td>{{site.data.table.en.developer-tips[dscp.command]}}</td>\n-        </tr>\n-    {% endfor %}\n-</table>\n-\n-In addition, these commands have different prerequisites. The prerequisite for the `format`,\n-`formatWorker`, `journalCrashTest`, `readJournal`, `runClass`, `version`, `validateConf` and `validateEnv` commands is\n-that you have already built Alluxio (see\n-[Build Alluxio Master Branch]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) about how to\n-build Alluxio manually).\n-Further, the prerequisite for the `fs`, `logLevel`, `runTest` and `runTests` commands is that\n-the Alluxio service is up and running.", "originalCommit": "7d9ed42f6ca55f4023035194c07f6bab72981a07", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzY1MA==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505483650", "bodyText": "I think the User-CLI page will do just fine listing all the commands in much more details.", "author": "jiacheliu3", "createdAt": "2020-10-15T11:59:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczMzc2NA==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505733764", "bodyText": "I think previously we want to separate commands under bin/alluxio to be\n\nusing by users -> put in User-CLI page (like format, fs, fsadmin, getConf...)\nusing by developers -> put in this page (like runUfsTests, confDocGen)", "author": "LuQQiu", "createdAt": "2020-10-15T17:57:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNDA5OQ==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505734099", "bodyText": "but yeah, maybe there are better ways to present those commands and descriptions", "author": "LuQQiu", "createdAt": "2020-10-15T17:57:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2OTI5Ng==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505769296", "bodyText": "i think it is better to reference user-cli page than to maintain a separate table here.\noptionally, we could update the grouping of the operations in the user-cli page to have a Developer operations section; then we could reference the subsection's link (ex. for general operations -> https://docs.alluxio.io/os/user/stable/en/operation/User-CLI.html#general-operations)", "author": "Xenorith", "createdAt": "2020-10-15T18:54:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg3MDEyMw==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505870123", "bodyText": "Developer operations section sounds good to me", "author": "LuQQiu", "createdAt": "2020-10-15T21:29:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTk1NTYxMA==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505955610", "bodyText": "On developer operations, I think the only one that's really developer tool per se is the runClass. Other ones may be better used and understood if you can read the code, but not developer-only to me.\nI prefer to make the difference \"when you run this command whether the Alluxio code has to be built and whether the cluster has to be up\". This can go to the User-CLI page, as this particular page is Contributor Tools after all.", "author": "jiacheliu3", "createdAt": "2020-10-16T01:11:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTk4ODU0OQ==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505988549", "bodyText": "i'm fine with omitting the duplicate explanation here and making the improvements in the user cli page as a later PR. important thing is to get rid of out of date table in the contribute tools page", "author": "Xenorith", "createdAt": "2020-10-16T02:17:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ4MzQwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczMTMzMQ==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505731331", "bodyText": "add an empty line between title and graph?", "author": "LuQQiu", "createdAt": "2020-10-15T17:53:16Z", "path": "docs/en/contributor/Contributor-Tools.md", "diffHunk": "@@ -186,22 +172,21 @@ To run more comprehensive tests on HDFS under storage using a real and running H\n $ mvn test -pl underfs/hdfs -PufsContractTest -DtestHdfsBaseDir=hdfs://ip:port/alluxio_test\n ```\n \n-- To have the logs output to STDOUT, append the following arguments to the `mvn` command\n+#### Redirect logs to STDOUT\n+To have the logs output to STDOUT, append the following arguments to the `mvn` command\n \n ```\n -Dtest.output.redirect=false -Dalluxio.root.logger=DEBUG,CONSOLE\n ```\n \n-- To quickly test APIs in an interactive manner, you may leverage the Scala shell, as discussed in this \n-[blog](http://scala4fun.tumblr.com/post/84791653967/interactivejavacoding).\n-\n-- The fuse tests are ignored if the `libfuse` library is missing.\n+#### Test FUSE\n+The FUSE tests are ignored if the `libfuse` library is missing.", "originalCommit": "7d9ed42f6ca55f4023035194c07f6bab72981a07", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODYxNg==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505778616", "bodyText": "when i read this entire section on Usage of ./bin/alluxio, i don't feel it's too useful in its current state. we list a few commands and don't give much context on how they should be used. i would rather see this section contain a reference to the user-cli docs and then show an example workflow to test/validate a cluster. for example, an outline for this section could be like:\n\ndevelopers can use the bin/alluxio command to manage and test your local Alluxio cluster\nsee the full list of commands in user cli docs\nassuming alluxio is properly configured for a local cluster (link to local cluster setup), an example usage of the bin/alluxio script:\n\n(not sure if exists) run validateEnv/validateConf for local cluster to validate your local setup\nrun format to clear metadata and worker storage\nstart a local alluxio cluster (dunno cmd)\nrun fsadmin report to check cluster status summary\nrun runTests to execute read/write operations through the local cluster to the configured UFS\nrun fs ls / to see test files\ndunno if there are other commands to test on a running cluster", "author": "Xenorith", "createdAt": "2020-10-15T19:11:21Z", "path": "docs/en/contributor/Contributor-Tools.md", "diffHunk": "@@ -227,26 +212,17 @@ $ mvn clean install -Pgenerate\n ```\n \n ## Usage of `./bin/alluxio`\n+ \n+Please refer to [Alluxio commands]({{ '/en/operation/User-CLI.html' | relativize_url }})\n+for all available commands.\n+\n+Some commands have different prerequisites.\n \n-Most commands in `bin/alluxio` are for developers. The following table explains the description and\n-the syntax of each command.\n-\n-<table class=\"table table-striped\">\n-    <tr><th>Command</th><th>Args</th><th>Description</th></tr>\n-    {% for dscp in site.data.table.developer-tips %}\n-        <tr>\n-            <td>{{dscp.command}}</td>\n-            <td>{{dscp.args}}</td>\n-            <td>{{site.data.table.en.developer-tips[dscp.command]}}</td>\n-        </tr>\n-    {% endfor %}\n-</table>\n-\n-In addition, these commands have different prerequisites. The prerequisite for the `format`,\n-`formatWorker`, `journalCrashTest`, `readJournal`, `runClass`, `version`, `validateConf` and `validateEnv` commands is\n-that you have already built Alluxio (see\n-[Build Alluxio Master Branch]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) about how to\n-build Alluxio manually).\n-Further, the prerequisite for the `fs`, `logLevel`, `runTest` and `runTests` commands is that\n-the Alluxio service is up and running.\n+The prerequisite for the `format`, `formatMaster`, `formatWorker`, `getConf`, `runClass`, `runHmsTests`, `runHdfsMountTests`, ", "originalCommit": "7d9ed42f6ca55f4023035194c07f6bab72981a07", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTg3MTA3NQ==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505871075", "bodyText": "Or maybe when we describe the command in User-CLI, we talked about whether it needs to be used in a running cluster", "author": "LuQQiu", "createdAt": "2020-10-15T21:31:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTk1NzI4MA==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505957280", "bodyText": "On Rico's comment for the new section, I think the new section surely adds useful information, but should not be in the Contributor Tools page. I would do this in 2 steps:\n\nAdd info according to Lu's suggestion, state if the command needs Alluxio cluster to be up in user CLI page. And in the contributor tool page, refer to that.\n(Another PR to-be) add a section about how validation commands work together, maybe in a separate page or in the User CLI page.", "author": "jiacheliu3", "createdAt": "2020-10-16T01:14:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTk4OTk3Ng==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r505989976", "bodyText": "sounds good to me", "author": "Xenorith", "createdAt": "2020-10-16T02:19:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODYxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzAxMzMxMw==", "url": "https://github.com/Alluxio/alluxio/pull/12317#discussion_r507013313", "bodyText": "Added.", "author": "jiacheliu3", "createdAt": "2020-10-18T03:59:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc3ODYxNg=="}], "type": "inlineReview"}, {"oid": "c98d030363550ceafe83689e0daf39a1dce7c707", "url": "https://github.com/Alluxio/alluxio/commit/c98d030363550ceafe83689e0daf39a1dce7c707", "message": "update contributor guide doc", "committedDate": "2020-10-18T04:01:00Z", "type": "commit"}, {"oid": "fa9cee775b5d4dbc2a8d96d1d3cd3c0f8e22c875", "url": "https://github.com/Alluxio/alluxio/commit/fa9cee775b5d4dbc2a8d96d1d3cd3c0f8e22c875", "message": "add and", "committedDate": "2020-10-18T04:01:00Z", "type": "commit"}, {"oid": "879fc05ae7d4e6c2182c710541668ad07f13d75c", "url": "https://github.com/Alluxio/alluxio/commit/879fc05ae7d4e6c2182c710541668ad07f13d75c", "message": "minor changes", "committedDate": "2020-10-18T04:01:01Z", "type": "commit"}, {"oid": "eb6881490f33aff9fe8caa707a278c97b5e39acc", "url": "https://github.com/Alluxio/alluxio/commit/eb6881490f33aff9fe8caa707a278c97b5e39acc", "message": "more fixes", "committedDate": "2020-10-18T04:01:01Z", "type": "commit"}, {"oid": "400dd75a413cd611d4e0b3358c5430286942ad01", "url": "https://github.com/Alluxio/alluxio/commit/400dd75a413cd611d4e0b3358c5430286942ad01", "message": "specify if command needs the cluster to be running", "committedDate": "2020-10-18T04:02:38Z", "type": "commit"}, {"oid": "c9fdafe673d00a96342cd2370e7177dd6b2b5776", "url": "https://github.com/Alluxio/alluxio/commit/c9fdafe673d00a96342cd2370e7177dd6b2b5776", "message": "format", "committedDate": "2020-10-18T04:02:38Z", "type": "commit"}, {"oid": "c9fdafe673d00a96342cd2370e7177dd6b2b5776", "url": "https://github.com/Alluxio/alluxio/commit/c9fdafe673d00a96342cd2370e7177dd6b2b5776", "message": "format", "committedDate": "2020-10-18T04:02:38Z", "type": "forcePushed"}]}