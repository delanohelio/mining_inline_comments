{"pr_number": 12111, "pr_title": "Add Filters to Job Failure History", "pr_createdAt": "2020-09-16T21:56:29Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12111", "timeline": [{"oid": "0260e88b8ae4b580c7d72e386b7ace5fe5590ea1", "url": "https://github.com/Alluxio/alluxio/commit/0260e88b8ae4b580c7d72e386b7ace5fe5590ea1", "message": "initial job history work", "committedDate": "2020-09-08T22:43:46Z", "type": "commit"}, {"oid": "229ebe7e0c859fa49bedc03a4185c4bac7244fe4", "url": "https://github.com/Alluxio/alluxio/commit/229ebe7e0c859fa49bedc03a4185c4bac7244fe4", "message": "Job Failure History V0", "committedDate": "2020-09-09T22:14:16Z", "type": "commit"}, {"oid": "15090864730d269928f746b92f874fe9c25bc003", "url": "https://github.com/Alluxio/alluxio/commit/15090864730d269928f746b92f874fe9c25bc003", "message": "checkstyle", "committedDate": "2020-09-09T22:37:00Z", "type": "commit"}, {"oid": "4e31f350a7d45f37dc868c5018d71ccfd43b7cc3", "url": "https://github.com/Alluxio/alluxio/commit/4e31f350a7d45f37dc868c5018d71ccfd43b7cc3", "message": "fix tests", "committedDate": "2020-09-09T23:21:14Z", "type": "commit"}, {"oid": "24a669d8db4f41717a75c2b6532e791302c00827", "url": "https://github.com/Alluxio/alluxio/commit/24a669d8db4f41717a75c2b6532e791302c00827", "message": "fix tests", "committedDate": "2020-09-10T00:06:46Z", "type": "commit"}, {"oid": "6cbe3a1c20dfa700a29d7ea2142355bc5cce0ea5", "url": "https://github.com/Alluxio/alluxio/commit/6cbe3a1c20dfa700a29d7ea2142355bc5cce0ea5", "message": "Merge remote-tracking branch 'upstream/master' into job_failure_history_0", "committedDate": "2020-09-10T21:45:06Z", "type": "commit"}, {"oid": "b89fc81b3759974821202cbcf5a3866be0e30d91", "url": "https://github.com/Alluxio/alluxio/commit/b89fc81b3759974821202cbcf5a3866be0e30d91", "message": "Leave error message in PlanInfo even when non verbose info is requested", "committedDate": "2020-09-10T21:45:10Z", "type": "commit"}, {"oid": "49384a7418bb77684bfb5c74af5945c978d1c894", "url": "https://github.com/Alluxio/alluxio/commit/49384a7418bb77684bfb5c74af5945c978d1c894", "message": "Add Limit and Ordering", "committedDate": "2020-09-11T21:50:04Z", "type": "commit"}, {"oid": "d3548e7921c024bfcca781458c656c2f93559a41", "url": "https://github.com/Alluxio/alluxio/commit/d3548e7921c024bfcca781458c656c2f93559a41", "message": "Merge remote-tracking branch 'upstream/master' into job_failure_history", "committedDate": "2020-09-11T21:50:45Z", "type": "commit"}, {"oid": "1e222d44a7324104935d360ed763f2d2804d618f", "url": "https://github.com/Alluxio/alluxio/commit/1e222d44a7324104935d360ed763f2d2804d618f", "message": "checkstyle", "committedDate": "2020-09-11T22:15:51Z", "type": "commit"}, {"oid": "b3c78e76c40d370ff22071332bcad19f0284b5fc", "url": "https://github.com/Alluxio/alluxio/commit/b3c78e76c40d370ff22071332bcad19f0284b5fc", "message": "work", "committedDate": "2020-09-14T22:34:58Z", "type": "commit"}, {"oid": "ce390fb234ff41525ac4656e9447a90f15546ca8", "url": "https://github.com/Alluxio/alluxio/commit/ce390fb234ff41525ac4656e9447a90f15546ca8", "message": "Merge remote-tracking branch 'upstream/master' into job_failure_history_0", "committedDate": "2020-09-14T22:36:21Z", "type": "commit"}, {"oid": "33ad3dd9160fd387aabbbf68d6c865a814637e5e", "url": "https://github.com/Alluxio/alluxio/commit/33ad3dd9160fd387aabbbf68d6c865a814637e5e", "message": "work", "committedDate": "2020-09-14T23:17:36Z", "type": "commit"}, {"oid": "7c3f6d8c3439b61ea71ddcaeee5c0f4dd755e3f2", "url": "https://github.com/Alluxio/alluxio/commit/7c3f6d8c3439b61ea71ddcaeee5c0f4dd755e3f2", "message": "checkstyle", "committedDate": "2020-09-14T23:21:28Z", "type": "commit"}, {"oid": "3228ed64e5d79bb76f178ce90db4bf1b36f3dafe", "url": "https://github.com/Alluxio/alluxio/commit/3228ed64e5d79bb76f178ce90db4bf1b36f3dafe", "message": "checkstyle", "committedDate": "2020-09-14T23:21:58Z", "type": "commit"}, {"oid": "561a647b9c86b38793a6be2d305b1344b84cedaa", "url": "https://github.com/Alluxio/alluxio/commit/561a647b9c86b38793a6be2d305b1344b84cedaa", "message": "Add ErrorType in WorkflowInfo", "committedDate": "2020-09-14T23:45:08Z", "type": "commit"}, {"oid": "d450809efa6eeafa463435fe5ca6b08b706cd30b", "url": "https://github.com/Alluxio/alluxio/commit/d450809efa6eeafa463435fe5ca6b08b706cd30b", "message": "refactor into ErrorUtils", "committedDate": "2020-09-15T18:20:54Z", "type": "commit"}, {"oid": "0e011d35a82833ec801a3ebca38448cf95193210", "url": "https://github.com/Alluxio/alluxio/commit/0e011d35a82833ec801a3ebca38448cf95193210", "message": "checkstyle", "committedDate": "2020-09-15T20:48:21Z", "type": "commit"}, {"oid": "6577a82c7ef9cd2daa4907f3606c7bb9093d9a10", "url": "https://github.com/Alluxio/alluxio/commit/6577a82c7ef9cd2daa4907f3606c7bb9093d9a10", "message": "Merge branch 'job_failure_history_0' into job_failure_history_1", "committedDate": "2020-09-15T22:40:44Z", "type": "commit"}, {"oid": "f2b7f137ed92e14331d71950acc11f6e2093fde4", "url": "https://github.com/Alluxio/alluxio/commit/f2b7f137ed92e14331d71950acc11f6e2093fde4", "message": "Merge remote-tracking branch 'upstream/master' into job_failure_history_1", "committedDate": "2020-09-15T23:13:05Z", "type": "commit"}, {"oid": "c4fcf71613de304bad49f265989da9dc8ad15308", "url": "https://github.com/Alluxio/alluxio/commit/c4fcf71613de304bad49f265989da9dc8ad15308", "message": "meant to add these", "committedDate": "2020-09-16T21:56:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTI0MDY3Mw==", "url": "https://github.com/Alluxio/alluxio/pull/12111#discussion_r491240673", "bodyText": "kind of unusual to pass stream back as return value, is the idea here to save a potential copy?", "author": "yuzhu", "createdAt": "2020-09-19T00:06:42Z", "path": "job/server/src/main/java/alluxio/master/job/plan/PlanTracker.java", "diffHunk": "@@ -276,7 +277,7 @@ private synchronized boolean removeFinished() {\n   /**\n    * @return list of failed plans\n    */\n-  public List<PlanInfo> failed() {\n-    return Lists.newArrayList(mFailed);\n+  public Stream<PlanInfo> failed() {", "originalCommit": "c4fcf71613de304bad49f265989da9dc8ad15308", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjE5ODY1Ng==", "url": "https://github.com/Alluxio/alluxio/pull/12111#discussion_r492198656", "bodyText": "I don't want to send the list back because that's basically making a copy. I don't want to send the underlying data structure back because that makes it accessible. So stream was both the most straightforward and most accessible thing to send back.", "author": "bradyoo", "createdAt": "2020-09-21T16:37:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTI0MDY3Mw=="}], "type": "inlineReview"}, {"oid": "33eea04404cfb8da3acd7d83cfaab65a80621aac", "url": "https://github.com/Alluxio/alluxio/commit/33eea04404cfb8da3acd7d83cfaab65a80621aac", "message": "Remove extraneous comment", "committedDate": "2020-09-21T16:58:16Z", "type": "commit"}]}