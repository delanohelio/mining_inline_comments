{"pr_number": 11044, "pr_title": "[DOCFIX] Update configuration documentation", "pr_createdAt": "2020-02-27T20:59:28Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11044", "timeline": [{"oid": "26abe274a9a7a06a8e90abd9f6b1112c70148465", "url": "https://github.com/Alluxio/alluxio/commit/26abe274a9a7a06a8e90abd9f6b1112c70148465", "message": "[DOCFIX] Update configuration documentation", "committedDate": "2020-02-27T20:58:58Z", "type": "commit"}, {"oid": "9f2347a81ab63b91c3e1474033bf862f6bf60e89", "url": "https://github.com/Alluxio/alluxio/commit/9f2347a81ab63b91c3e1474033bf862f6bf60e89", "message": "fix typo", "committedDate": "2020-02-27T21:00:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2ODg1OA==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385368858", "bodyText": "Is this correct with Cluster Defaults?", "author": "ns1123", "createdAt": "2020-02-27T21:01:18Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -20,16 +21,19 @@ The two major components to configure are\n Customizing how an application interacts with Alluxio is specific to each application.\n The following are recommendations for some common applications.\n \n-Note that it is only valid to set client-side configurations for applications,\n-such as properties prefixed with `alluxio.user`.\n-Similarly, setting server-side properties on a compute application has no effect,\n-such as properties prefixed with either `alluxio.master` or `alluxio.worker`.\n+Note that properties prefixes with `alluxio.user` are only valid to be set on machines which are", "originalCommit": "26abe274a9a7a06a8e90abd9f6b1112c70148465", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM3NzYyNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385377625", "bodyText": "updated", "author": "ZacBlanco", "createdAt": "2020-02-27T21:20:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2ODg1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2OTcyNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385369725", "bodyText": "\"cluster admins can set default client-side settings\"", "author": "ns1123", "createdAt": "2020-02-27T21:03:09Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -125,13 +129,12 @@ $ cp conf/alluxio-env.sh.template conf/alluxio-env.sh\n with the cluster-wide configuration values retrieved from Alluxio masters.\n \n When different client applications (Alluxio Shell CLI, Spark jobs, MapReduce jobs)\n-or Alluxio workers connect to an Alluxio master,\n-they will initialize their own Alluxio configuration properties with the default values\n-supplied by the masters based on the master-side `${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n-As a result, cluster admins can set client-side settings (e.g., `alluxio.user.*`),\n-or network transport settings (e.g., `alluxio.security.authentication.type`),\n-or worker settings (e.g., `alluxio.worker.*`)\n-in `${ALLUXIO_HOME}/conf/alluxio-site.properties` on all the masters,\n+or Alluxio workers connect to an Alluxio master, they will initialize their own Alluxio\n+configuration properties with the default values supplied by the masters based on the master-side\n+`${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n+As a result, cluster admins can set client-side settings (e.g., `alluxio.user.*`), or network", "originalCommit": "26abe274a9a7a06a8e90abd9f6b1112c70148465", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM3NzY5NQ==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385377695", "bodyText": "updated", "author": "ZacBlanco", "createdAt": "2020-02-27T21:20:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2OTcyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM3MDgzMA==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385370830", "bodyText": "Cluster defaults no longer propagates worker settings", "author": "ns1123", "createdAt": "2020-02-27T21:05:34Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -125,13 +129,12 @@ $ cp conf/alluxio-env.sh.template conf/alluxio-env.sh\n with the cluster-wide configuration values retrieved from Alluxio masters.\n \n When different client applications (Alluxio Shell CLI, Spark jobs, MapReduce jobs)\n-or Alluxio workers connect to an Alluxio master,\n-they will initialize their own Alluxio configuration properties with the default values\n-supplied by the masters based on the master-side `${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n-As a result, cluster admins can set client-side settings (e.g., `alluxio.user.*`),\n-or network transport settings (e.g., `alluxio.security.authentication.type`),\n-or worker settings (e.g., `alluxio.worker.*`)\n-in `${ALLUXIO_HOME}/conf/alluxio-site.properties` on all the masters,\n+or Alluxio workers connect to an Alluxio master, they will initialize their own Alluxio\n+configuration properties with the default values supplied by the masters based on the master-side\n+`${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n+As a result, cluster admins can set client-side settings (e.g., `alluxio.user.*`), or network\n+transport settings (e.g., `alluxio.security.authentication.type`), or worker settings", "originalCommit": "26abe274a9a7a06a8e90abd9f6b1112c70148465", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM3NzcyMA==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385377720", "bodyText": "updated", "author": "ZacBlanco", "createdAt": "2020-02-27T21:20:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM3MDgzMA=="}], "type": "inlineReview"}, {"oid": "1343a6cc5d4e9fe0febb5e1d8c9778d59626623c", "url": "https://github.com/Alluxio/alluxio/commit/1343a6cc5d4e9fe0febb5e1d8c9778d59626623c", "message": "address comments", "committedDate": "2020-02-27T21:13:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDA5Mg==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385380092", "bodyText": "remove workers from this line", "author": "ns1123", "createdAt": "2020-02-27T21:25:23Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -125,14 +127,13 @@ $ cp conf/alluxio-env.sh.template conf/alluxio-env.sh\n with the cluster-wide configuration values retrieved from Alluxio masters.\n \n When different client applications (Alluxio Shell CLI, Spark jobs, MapReduce jobs)\n-or Alluxio workers connect to an Alluxio master,\n-they will initialize their own Alluxio configuration properties with the default values\n-supplied by the masters based on the master-side `${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n-As a result, cluster admins can set client-side settings (e.g., `alluxio.user.*`),\n-or network transport settings (e.g., `alluxio.security.authentication.type`),\n-or worker settings (e.g., `alluxio.worker.*`)\n-in `${ALLUXIO_HOME}/conf/alluxio-site.properties` on all the masters,\n-which will be distributed and become cluster-wide default values when clients and workers connect.\n+or Alluxio workers connect to an Alluxio master, they will initialize their own Alluxio\n+configuration properties with the default values supplied by the masters based on the master-side\n+`${ALLUXIO_HOME}/conf/alluxio-site.properties` files.\n+As a result, cluster admins can set default client-side settings (e.g., `alluxio.user.*`), or\n+network transport settings (e.g., `alluxio.security.authentication.type`) in\n+`${ALLUXIO_HOME}/conf/alluxio-site.properties` on all the masters, which will be distributed and\n+become cluster-wide default values when clients and workers connect.", "originalCommit": "1343a6cc5d4e9fe0febb5e1d8c9778d59626623c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MzU2Nw==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385383567", "bodyText": "AFAIK alluxio workers contain an Alluxio client and will get cluster defaults for those from the master, so this is still correct.\nex:\nhttps://github.com/Alluxio/alluxio/blob/master/core/server/worker/src/main/java/alluxio/worker/block/BlockMasterSync.java#L107-L108", "author": "ZacBlanco", "createdAt": "2020-02-27T21:32:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDA5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDUwOQ==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385380509", "bodyText": "grammar? Make it two sentences, use a semi-colon, merge?", "author": "ns1123", "createdAt": "2020-02-27T21:26:10Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -142,32 +143,44 @@ master's `alluxio-site.properties` file.\n After restarting the cluster, all jobs will automatically set `alluxio.user.file.writetype.default`\n to `CACHE_THROUGH`.\n \n-Clients can ignore or overwrite the cluster-wide default values by following the approaches described in\n-[Configure Alluxio for Applications](#configure-applications) to overwrite the same properties.\n+Clients can ignore or overwrite the cluster-wide default values by following the approaches\n+described in [Configure Applications](#configure-applications) to overwrite the same properties.\n \n > Note that, before version 1.8, `${ALLUXIO_HOME}/conf/alluxio-site.properties` file is only loaded\n by Alluxio server processes and will be ignored by applications interacting with Alluxio service\n through Alluxio client, unless `${ALLUXIO_HOME}/conf` is on applications' classpath.\n \n ### Path Defaults\n \n-Since version 2.0, Alluxio administrators can set default client side configurations for Alluxio paths.\n-FileSystem client operations have options, FileSystem options are derived from client side configuration\n-properties. Only these configuration properties can be set as as path defaults.\n+Since version 2.0, Alluxio administrators can set default client side configurations for Alluxio\n+paths.\n+Filesystem client operations have options, Filesystem options are derived from client side", "originalCommit": "1343a6cc5d4e9fe0febb5e1d8c9778d59626623c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4NDYwOA==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385384608", "bodyText": "updated", "author": "ZacBlanco", "createdAt": "2020-02-27T21:34:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDUwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDk0Ng==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385380946", "bodyText": "\"all write operations on that path\"", "author": "ns1123", "createdAt": "2020-02-27T21:27:05Z", "path": "docs/en/operation/Configuration.md", "diffHunk": "@@ -142,32 +143,44 @@ master's `alluxio-site.properties` file.\n After restarting the cluster, all jobs will automatically set `alluxio.user.file.writetype.default`\n to `CACHE_THROUGH`.\n \n-Clients can ignore or overwrite the cluster-wide default values by following the approaches described in\n-[Configure Alluxio for Applications](#configure-applications) to overwrite the same properties.\n+Clients can ignore or overwrite the cluster-wide default values by following the approaches\n+described in [Configure Applications](#configure-applications) to overwrite the same properties.\n \n > Note that, before version 1.8, `${ALLUXIO_HOME}/conf/alluxio-site.properties` file is only loaded\n by Alluxio server processes and will be ignored by applications interacting with Alluxio service\n through Alluxio client, unless `${ALLUXIO_HOME}/conf` is on applications' classpath.\n \n ### Path Defaults\n \n-Since version 2.0, Alluxio administrators can set default client side configurations for Alluxio paths.\n-FileSystem client operations have options, FileSystem options are derived from client side configuration\n-properties. Only these configuration properties can be set as as path defaults.\n+Since version 2.0, Alluxio administrators can set default client side configurations for Alluxio\n+paths.\n+Filesystem client operations have options, Filesystem options are derived from client side\n+configuration properties.\n+Only these configuration properties can be set as as path defaults.\n \n-For example, `createFile` has an option to specify write type. By default, the write type is\n-the value of the configuration key `alluxio.user.file.writetype.default`.\n+For example, `createFile` has an option to specify write type. By default, the write type is the\n+value of the configuration key `alluxio.user.file.writetype.default`.\n The administrator can set default value of `alluxio.user.file.write.type.default` to `MUST_CACHE`\n-for all paths with prefix `/tmp` by\n-`bin/alluxio fsadmin pathConf add --property alluxio.user.file.writetype.default=MUST_CACHE /tmp`.\n-Then for any `createFile` on paths with prefix `/tmp`, by default, the write type will be `MUST_CACHE`.\n+for all paths with prefix `/tmp` by running:\n+\n+```console\n+$ bin/alluxio fsadmin pathConf add --property alluxio.user.file.writetype.default=MUST_CACHE /tmp`\n+```\n+\n+After executing this command any create operations on paths with prefix `/tmp` will use the\n+`MUST_CACHE` write type by default unless the application configuration overrides the cluster\n+defaults.\n \n Path defaults will be automatically propagated to long running clients if they are updated.\n-If the administrator updates path defaults by\n-`bin/alluxio fsadmin pathConf add --property alluxio.user.file.writetype.default=THROUGH /tmp`,\n-afterwards, all `createFile` will by default have write type `THROUGH`.\n+If the administrator updates path defaults using\n+\n+```console\n+$ bin/alluxio fsadmin pathConf add --property alluxio.user.file.writetype.default=THROUGH /tmp\n+```\n+\n+afterwards, all write operations will use the `THROUGH` write type by default.", "originalCommit": "1343a6cc5d4e9fe0febb5e1d8c9778d59626623c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4NDYzOQ==", "url": "https://github.com/Alluxio/alluxio/pull/11044#discussion_r385384639", "bodyText": "updated", "author": "ZacBlanco", "createdAt": "2020-02-27T21:34:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM4MDk0Ng=="}], "type": "inlineReview"}, {"oid": "f1b27ecba83fba158cfe66ce9effbc65b1949e70", "url": "https://github.com/Alluxio/alluxio/commit/f1b27ecba83fba158cfe66ce9effbc65b1949e70", "message": "address comments", "committedDate": "2020-02-27T21:34:40Z", "type": "commit"}]}