{"pr_number": 11658, "pr_title": "[DOCFIX] Add example Ozone configuration files", "pr_createdAt": "2020-06-26T15:36:04Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11658", "timeline": [{"oid": "21a6b74caaccabea3996ab6c28273ff78fc78af7", "url": "https://github.com/Alluxio/alluxio/commit/21a6b74caaccabea3996ab6c28273ff78fc78af7", "message": "Update Ozone.md", "committedDate": "2020-06-26T15:30:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMDg5Ng==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446300896", "bodyText": "can you put all the references to core-site.xml and ozone-site.xml inside of backticks (\"`\")? IMO it makes it easier to read and stand out more.", "author": "ZacBlanco", "createdAt": "2020-06-26T16:56:14Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -84,6 +84,65 @@ $ ./bin/alluxio fs mount \\\n   /ozone o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n ```\n \n+Possible core-site.xml and ozone-site.xml\n+- core-site.xml", "originalCommit": "21a6b74caaccabea3996ab6c28273ff78fc78af7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMxMjk5MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446312991", "bodyText": "Done", "author": "maobaolong", "createdAt": "2020-06-26T17:21:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMDg5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMTE4Nw==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446301187", "bodyText": "I would prefer that for these configs we use the bare-minimum amount of properties. In this case, I think fs.defaultFs is unnecessary - the other two are ok though", "author": "ZacBlanco", "createdAt": "2020-06-26T16:56:48Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -84,6 +84,65 @@ $ ./bin/alluxio fs mount \\\n   /ozone o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n ```\n \n+Possible core-site.xml and ozone-site.xml\n+- core-site.xml\n+\n+```xml\n+<configuration>\n+  <property>\n+    <name>fs.o3fs.impl</name>\n+    <value>org.apache.hadoop.fs.ozone.BasicOzoneFileSystem</value>\n+  </property>\n+  <property>\n+    <name>fs.AbstractFileSystem.o3fs.impl</name>\n+    <value>org.apache.hadoop.fs.ozone.BasicOzFs</value>\n+  </property>\n+  <property>\n+    <name>fs.defaultFS</name>\n+    <value>o3fs://mybucket.myvol</value>\n+  </property>", "originalCommit": "21a6b74caaccabea3996ab6c28273ff78fc78af7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMxMzI4NQ==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446313285", "bodyText": "Done.", "author": "maobaolong", "createdAt": "2020-06-26T17:22:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMTE4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMjYzOA==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446302638", "bodyText": "Again, I'd prefer to have only the necessary properties in these examples - Are any of these actually necessary? I don't know ozone that well, but I assume that the threshold, timeouts, and max requests are unnecessary. Based on my limited knowledge of ozone and my intuition, the only one here that looks like it might be required is ozone.scm.names. In that case I'd only like to have just that property here in the example.\nIf there are any others you think are definitely required, we may keep them in too. I would just like these trimmed as much as possible.", "author": "ZacBlanco", "createdAt": "2020-06-26T16:59:50Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -84,6 +84,65 @@ $ ./bin/alluxio fs mount \\\n   /ozone o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n ```\n \n+Possible core-site.xml and ozone-site.xml\n+- core-site.xml\n+\n+```xml\n+<configuration>\n+  <property>\n+    <name>fs.o3fs.impl</name>\n+    <value>org.apache.hadoop.fs.ozone.BasicOzoneFileSystem</value>\n+  </property>\n+  <property>\n+    <name>fs.AbstractFileSystem.o3fs.impl</name>\n+    <value>org.apache.hadoop.fs.ozone.BasicOzFs</value>\n+  </property>\n+  <property>\n+    <name>fs.defaultFS</name>\n+    <value>o3fs://mybucket.myvol</value>\n+  </property>\n+</configuration>\n+```\n+\n+- ozone-site.xml\n+\n+```xml\n+<configuration>\n+  <property>\n+    <name>ozone.replication</name>\n+    <value>1</value>\n+  </property>\n+  <property>\n+    <name>ozone.metadata.dirs</name>\n+    <value>metadata.dir</value>\n+  </property>\n+  <property>\n+    <name>ozone.scm.names</name>\n+    <value>localhost</value>\n+  </property>\n+  <property>\n+    <name>scm.container.client.max.size</name>\n+    <value>256</value>\n+  </property>\n+  <property>\n+    <name>scm.container.client.idle.threshold</name>\n+    <value>10s</value>\n+  </property>\n+  <property>\n+    <name>hdds.ratis.raft.client.rpc.request.timeout</name>\n+    <value>60s</value>\n+  </property>\n+  <property>\n+    <name>hdds.ratis.raft.client.async.outstanding-requests.max</name>\n+    <value>32</value>\n+  </property>\n+  <property>\n+    <name>hdds.ratis.raft.client.rpc.watch.request.timeout</name>\n+    <value>180s</value>\n+  </property>", "originalCommit": "21a6b74caaccabea3996ab6c28273ff78fc78af7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMxNTEwNA==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446315104", "bodyText": "Sorry for forgot to explain why these configs are necessary. Because there is a bug in Ozone, some configs without specific key would be set to 0, and the 0 cannot work. This bug related the fellowing configs\n<property>\n    <name>scm.container.client.max.size</name>\n    <value>256</value>\n  </property>\n  <property>\n    <name>scm.container.client.idle.threshold</name>\n    <value>10s</value>\n  </property>\n  <property>\n    <name>hdds.ratis.raft.client.rpc.request.timeout</name>\n    <value>60s</value>\n  </property>\n  <property>\n    <name>hdds.ratis.raft.client.async.outstanding-requests.max</name>\n    <value>32</value>\n  </property>\n  <property>\n    <name>hdds.ratis.raft.client.rpc.watch.request.timeout</name>\n    <value>180s</value>\n  </property>", "author": "maobaolong", "createdAt": "2020-06-26T17:25:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMjYzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMxODczNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11658#discussion_r446318735", "bodyText": "Thank you - that makes sense. We may leave them in then", "author": "ZacBlanco", "createdAt": "2020-06-26T17:33:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjMwMjYzOA=="}], "type": "inlineReview"}, {"oid": "7d35fe4b4fed50bd22c6d3fc3dff87a14f694756", "url": "https://github.com/Alluxio/alluxio/commit/7d35fe4b4fed50bd22c6d3fc3dff87a14f694756", "message": "Address comment, remove the unnecessary configs", "committedDate": "2020-06-26T17:21:17Z", "type": "commit"}]}