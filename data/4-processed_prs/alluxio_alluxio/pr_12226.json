{"pr_number": 12226, "pr_title": "Upgrade Ozone ufs to 1.0.0 version", "pr_createdAt": "2020-10-10T03:52:06Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/12226", "timeline": [{"oid": "be8e40345e64b3e0b642f3c7f70a0b6362923203", "url": "https://github.com/Alluxio/alluxio/commit/be8e40345e64b3e0b642f3c7f70a0b6362923203", "message": "Upgrade Ozone ufs to 1.0.0.", "committedDate": "2020-10-10T03:42:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1ODQ2MA==", "url": "https://github.com/Alluxio/alluxio/pull/12226#discussion_r503058460", "bodyText": "do we need this? this looks to run by default, do we currently support other way to build without this profile?\nIf not, we should simply have it in dependency rather than being selected by a profile", "author": "apc999", "createdAt": "2020-10-12T06:12:12Z", "path": "underfs/ozone/pom.xml", "diffHunk": "@@ -25,18 +25,25 @@\n     <!-- The following paths need to be defined here as well as in the parent pom so that mvn can -->\n     <!-- run properly from sub-project directories -->\n     <build.path>${project.parent.parent.basedir}/build</build.path>\n+    <ufs.ozone.version>1.0.0</ufs.ozone.version>\n   </properties>\n \n+  <profiles>", "originalCommit": "be8e40345e64b3e0b642f3c7f70a0b6362923203", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA2NTU0Ng==", "url": "https://github.com/Alluxio/alluxio/pull/12226#discussion_r503065546", "bodyText": "ok", "author": "maobaolong", "createdAt": "2020-10-12T06:32:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1ODQ2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1ODg2Ng==", "url": "https://github.com/Alluxio/alluxio/pull/12226#discussion_r503058866", "bodyText": "is shading this module required?\nIn UFS, by default all dependencies are loaded by a separate class loader, do we still see the exception you described?\nAdd a new ozone shade module to avoid classCaseException for the following code from org.apache.hadoop.ipc.ProtobufRpcEngine#invoke\n      final Message theRequest = (Message) args[1];", "author": "apc999", "createdAt": "2020-10-12T06:13:35Z", "path": "shaded/pom.xml", "diffHunk": "@@ -25,6 +25,7 @@\n   <modules>\n     <module>client</module>\n     <module>hadoop</module>\n+    <module>ozone</module>", "originalCommit": "be8e40345e64b3e0b642f3c7f70a0b6362923203", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzEzNzU3Mg==", "url": "https://github.com/Alluxio/alluxio/pull/12226#discussion_r503137572", "bodyText": "@apc999 I have to shade ozone, because ozone ufs module dependent hdfs ufs module, so the Message in the ProtobufRpcEngine has been shaded by hdfs shade module, if I don't shade ozone, the ozone proto Message have no alluxio.shade.hdfs prefix, so it will meet classCassException.", "author": "maobaolong", "createdAt": "2020-10-12T08:49:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA1ODg2Ng=="}], "type": "inlineReview"}, {"oid": "531f4d6956b4aba79d942e7718c457cd7851034e", "url": "https://github.com/Alluxio/alluxio/commit/531f4d6956b4aba79d942e7718c457cd7851034e", "message": "Address comment, use ozone dependencies directly.", "committedDate": "2020-10-12T08:52:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTExNTIwMQ==", "url": "https://github.com/Alluxio/alluxio/pull/12226#discussion_r505115201", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [\u6876\u547d\u4ee4](https://hadoop.apache.org/ozone /docs/1.0.0/shell/bucketcommands.html)\u521b\u5efaOzone\u96c6\u7fa4\u7684\u5377\u548c\u5b58\u50a8\u6876\u3002\n          \n          \n            \n            [\u6876\u547d\u4ee4](https://hadoop.apache.org/ozone/docs/1.0.0/shell/bucketcommands.html)\u521b\u5efaOzone\u96c6\u7fa4\u7684\u5377\u548c\u5b58\u50a8\u6876\u3002", "author": "apc999", "createdAt": "2020-10-15T01:42:45Z", "path": "docs/cn/ufs/Ozone.md", "diffHunk": "@@ -17,9 +17,9 @@ Ozone\u53ef\u4ee5\u5728\u5bb9\u5668\u5316\u73af\u5883(\u4f8b\u5982Kubernetes\u548cYARN)\u4e2d\u6709\u6548\u8fd0\u884c\u3002\n \u5177\u6709\u6b63\u786e\u7684Hadoop\u7248\u672c(\u63a8\u8350))\uff0c\u6216 \n [\u4eceAlluxio\u6e90\u4ee3\u7801\u7f16\u8bd1\u4e8c\u8fdb\u5236\u6587\u4ef6]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url}})(\u9002\u7528\u4e8e\u9ad8\u7ea7\u7528\u6237)\u3002\n \n-\u5728\u51c6\u5907Ozone\u4e0eAlluxio\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u8bf7\u9075\u5faa[Ozone\u672c\u5730\u5b89\u88c5](https://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n-\u5b89\u88c5Ozone\u96c6\u7fa4\uff0c\u5e76\u9075\u5faa[\u5377\u547d\u4ee4](https://hadoop.apache.org/ozone/docs/0.5.0-beta/shell/volumecommands.html)\u548c \n-[\u6876\u547d\u4ee4](https://hadoop.apache.org/ozone /docs/0.5.0-beta/shell/bucketcommands.html)\u521b\u5efaOzone\u96c6\u7fa4\u7684\u5377\u548c\u5b58\u50a8\u6876\u3002\n+\u5728\u51c6\u5907Ozone\u4e0eAlluxio\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u8bf7\u9075\u5faa[Ozone\u672c\u5730\u5b89\u88c5](https://hadoop.apache.org/ozone/docs/1.0.0/start/onprem.html)\n+\u5b89\u88c5Ozone\u96c6\u7fa4\uff0c\u5e76\u9075\u5faa[\u5377\u547d\u4ee4](https://hadoop.apache.org/ozone/docs/1.0.0/shell/volumecommands.html)\u548c \n+[\u6876\u547d\u4ee4](https://hadoop.apache.org/ozone /docs/1.0.0/shell/bucketcommands.html)\u521b\u5efaOzone\u96c6\u7fa4\u7684\u5377\u548c\u5b58\u50a8\u6876\u3002", "originalCommit": "531f4d6956b4aba79d942e7718c457cd7851034e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d9b511024566d3115da3a2fb078f12cc11e608ed", "url": "https://github.com/Alluxio/alluxio/commit/d9b511024566d3115da3a2fb078f12cc11e608ed", "message": "Update docs/cn/ufs/Ozone.md\n\nCo-authored-by: Bin Fan <fanbin103@gmail.com>", "committedDate": "2020-10-15T02:16:16Z", "type": "commit"}]}