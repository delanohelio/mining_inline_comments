{"pr_number": 11467, "pr_title": "Add Ozone UFS documentation", "pr_createdAt": "2020-05-22T15:51:49Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11467", "timeline": [{"oid": "961f803fd6907824a298febe6ade256ed4b2381d", "url": "https://github.com/Alluxio/alluxio/commit/961f803fd6907824a298febe6ade256ed4b2381d", "message": "Write a document for ozone as an ufs", "committedDate": "2020-05-22T15:50:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTUwMg==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430575502", "bodyText": "nit: can you make this https?", "author": "ZacBlanco", "createdAt": "2020-05-26T17:13:14Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. ", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMxODE0Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r436318143", "bodyText": "@ZacBlanco  Done.", "author": "maobaolong", "createdAt": "2020-06-07T02:32:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTUwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTczMQ==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430575731", "bodyText": "nit https://", "author": "ZacBlanco", "createdAt": "2020-05-26T17:13:40Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMxODE2MA==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r436318160", "bodyText": "@ZacBlanco Done.", "author": "maobaolong", "createdAt": "2020-06-07T02:32:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTczMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTc5Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430575793", "bodyText": "https://", "author": "ZacBlanco", "createdAt": "2020-05-26T17:13:47Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n+to install a Ozone cluster, and follow the [Command Line Interface](http://hadoop.apache.org/ozone/docs/0.5.0-beta/shell.html)", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMxODE4Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r436318183", "bodyText": "@ZacBlanco Done.", "author": "maobaolong", "createdAt": "2020-06-07T02:32:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU3NTc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4NjI0MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430586241", "bodyText": "It might be useful to provide the basic commands for the ozone shell to create the volume and bucket?\nOtherwise, I think we can probably link more specific documentation on exactly how to perform those operations", "author": "ZacBlanco", "createdAt": "2020-05-26T17:31:53Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n+to install a Ozone cluster, and follow the [Command Line Interface](http://hadoop.apache.org/ozone/docs/0.5.0-beta/shell.html)\n+to create volume and bucket for Ozone cluster.", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjMxODQ4MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r436318481", "bodyText": "@ZacBlanco  I agree to link to the specific document. Done.", "author": "maobaolong", "createdAt": "2020-06-07T02:37:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4NjI0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4NzExNA==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430587114", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Using HDFS shell or Ozone shell to Visit your Ozone directory `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>`\n          \n          \n            \n            Use the HDFS shell or Ozone shell to Visit your Ozone directory `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>`", "author": "ZacBlanco", "createdAt": "2020-05-26T17:33:30Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n+to install a Ozone cluster, and follow the [Command Line Interface](http://hadoop.apache.org/ozone/docs/0.5.0-beta/shell.html)\n+to create volume and bucket for Ozone cluster.\n+\n+## Basic Setup\n+\n+To configure Alluxio to use Ozone as under storage, you will need to modify the configuration file \n+`conf/alluxio-site.properties`. If the file does not exist, create the configuration file from the template.\n+\n+```\n+$ cp conf/alluxio-site.properties.template conf/alluxio-site.properties\n+```\n+\n+Edit `conf/alluxio-site.properties` file to set the under storage address to the Ozone bucket and \n+the Ozone directory you want to mount to Alluxio. For example, the under storage address can be `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/` if\n+you want to mount the whole bucket to Alluxio, or `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/alluxio/data` if only the directory `/alluxio/data`\n+inside the ozone bucket `<OZONE_BUCKET>` of `<OZONE_VOLUME>` is mapped to Alluxio.\n+\n+```\n+alluxio.master.mount.table.root.ufs=o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n+``` \n+\n+## Example: Running Alluxio Locally with Ozone\n+\n+Start the Alluxio servers:\n+\n+```console\n+$ ./bin/alluxio format\n+$ ./bin/alluxio-start.sh local\n+```\n+\n+This will start an Alluxio master and an Alluxio worker. You can see the master UI at\n+[http://localhost:19999](http://localhost:19999).\n+\n+Run a simple example program:\n+\n+```console\n+$ ./bin/alluxio runTests\n+```\n+\n+Using HDFS shell or Ozone shell to Visit your Ozone directory `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>`", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4NzUzNQ==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430587535", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Make sure the relates config file is on all servers nodes running Alluxio.\n          \n          \n            \n            Make sure the related config file is on all servers nodes running Alluxio.", "author": "ZacBlanco", "createdAt": "2020-05-26T17:34:13Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n+to install a Ozone cluster, and follow the [Command Line Interface](http://hadoop.apache.org/ozone/docs/0.5.0-beta/shell.html)\n+to create volume and bucket for Ozone cluster.\n+\n+## Basic Setup\n+\n+To configure Alluxio to use Ozone as under storage, you will need to modify the configuration file \n+`conf/alluxio-site.properties`. If the file does not exist, create the configuration file from the template.\n+\n+```\n+$ cp conf/alluxio-site.properties.template conf/alluxio-site.properties\n+```\n+\n+Edit `conf/alluxio-site.properties` file to set the under storage address to the Ozone bucket and \n+the Ozone directory you want to mount to Alluxio. For example, the under storage address can be `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/` if\n+you want to mount the whole bucket to Alluxio, or `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/alluxio/data` if only the directory `/alluxio/data`\n+inside the ozone bucket `<OZONE_BUCKET>` of `<OZONE_VOLUME>` is mapped to Alluxio.\n+\n+```\n+alluxio.master.mount.table.root.ufs=o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n+``` \n+\n+## Example: Running Alluxio Locally with Ozone\n+\n+Start the Alluxio servers:\n+\n+```console\n+$ ./bin/alluxio format\n+$ ./bin/alluxio-start.sh local\n+```\n+\n+This will start an Alluxio master and an Alluxio worker. You can see the master UI at\n+[http://localhost:19999](http://localhost:19999).\n+\n+Run a simple example program:\n+\n+```console\n+$ ./bin/alluxio runTests\n+```\n+\n+Using HDFS shell or Ozone shell to Visit your Ozone directory `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>`\n+to verify the files and directories created by Alluxio exist. For this test, you should see files named like\n+`<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>/default_tests_files/BasicFile_CACHE_PROMOTE_MUST_CACHE`.\n+\n+Stop Alluxio by running:\n+\n+```console\n+$ ./bin/alluxio-stop.sh local\n+```\n+\n+## Advanced Setup\n+\n+### Mount Ozone \n+\n+An Ozone location can be mounted at a nested directory in the Alluxio namespace to have unified\n+access to multiple under storage systems. Alluxio's\n+[Mount Command]({{ '/en/operation/User-CLI.html' | relativize_url }}#mount) can be used for this purpose.\n+For example, the following command mounts a directory inside an Ozone bucket into Alluxio directory\n+`/ozone`:\n+\n+```console\n+$ ./bin/alluxio fs mount \\\n+  --option alluxio.underfs.hdfs.configuration=<DIR>/ozone-site.xml:<DIR>/core-site.xml \\\n+  /ozone o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n+```\n+\n+Make sure the relates config file is on all servers nodes running Alluxio.", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4ODA1NA==", "url": "https://github.com/Alluxio/alluxio/pull/11467#discussion_r430588054", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Now, we tested ozone-0.5.0-beta work well with Alluxio.\n          \n          \n            \n            Currently, the only tested Ozone version with Alluxio is `0.5.0-beta`.", "author": "ZacBlanco", "createdAt": "2020-05-26T17:35:08Z", "path": "docs/en/ufs/Ozone.md", "diffHunk": "@@ -0,0 +1,91 @@\n+---\n+layout: global\n+title: Ozone\n+nickname: Ozone\n+group: Storage Integrations\n+priority: 10\n+---\n+\n+\n+This guide describes how to configure [Ozone](http://hadoop.apache.org/ozone) as Alluxio's under storage system. \n+Ozone is a scalable, redundant, and distributed object store for Hadoop. Apart from scaling to billions of objects of varying sizes, \n+Ozone can function effectively in containerized environments such as Kubernetes and YARN.\n+\n+## Prerequisites\n+\n+To run an Alluxio cluster on a set of machines, you must deploy Alluxio binaries to each of these\n+machines. You can either [download the precompiled binaries directly]({{ '/en/deploy/Running-Alluxio-Locally.html' | relativize_url }})\n+with the correct Hadoop version (recommended), or \n+[compile the binaries from Alluxio source code]({{ '/en/contributor/Building-Alluxio-From-Source.html' | relativize_url }}) (for advanced users).\n+\n+In preparation for using Ozone with Alluxio, follow the [Ozone On Premise Installation](http://hadoop.apache.org/ozone/docs/0.5.0-beta/start/onprem.html)\n+to install a Ozone cluster, and follow the [Command Line Interface](http://hadoop.apache.org/ozone/docs/0.5.0-beta/shell.html)\n+to create volume and bucket for Ozone cluster.\n+\n+## Basic Setup\n+\n+To configure Alluxio to use Ozone as under storage, you will need to modify the configuration file \n+`conf/alluxio-site.properties`. If the file does not exist, create the configuration file from the template.\n+\n+```\n+$ cp conf/alluxio-site.properties.template conf/alluxio-site.properties\n+```\n+\n+Edit `conf/alluxio-site.properties` file to set the under storage address to the Ozone bucket and \n+the Ozone directory you want to mount to Alluxio. For example, the under storage address can be `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/` if\n+you want to mount the whole bucket to Alluxio, or `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/alluxio/data` if only the directory `/alluxio/data`\n+inside the ozone bucket `<OZONE_BUCKET>` of `<OZONE_VOLUME>` is mapped to Alluxio.\n+\n+```\n+alluxio.master.mount.table.root.ufs=o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n+``` \n+\n+## Example: Running Alluxio Locally with Ozone\n+\n+Start the Alluxio servers:\n+\n+```console\n+$ ./bin/alluxio format\n+$ ./bin/alluxio-start.sh local\n+```\n+\n+This will start an Alluxio master and an Alluxio worker. You can see the master UI at\n+[http://localhost:19999](http://localhost:19999).\n+\n+Run a simple example program:\n+\n+```console\n+$ ./bin/alluxio runTests\n+```\n+\n+Using HDFS shell or Ozone shell to Visit your Ozone directory `o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>`\n+to verify the files and directories created by Alluxio exist. For this test, you should see files named like\n+`<OZONE_BUCKET>.<OZONE_VOLUME>/<OZONE_DIRECTORY>/default_tests_files/BasicFile_CACHE_PROMOTE_MUST_CACHE`.\n+\n+Stop Alluxio by running:\n+\n+```console\n+$ ./bin/alluxio-stop.sh local\n+```\n+\n+## Advanced Setup\n+\n+### Mount Ozone \n+\n+An Ozone location can be mounted at a nested directory in the Alluxio namespace to have unified\n+access to multiple under storage systems. Alluxio's\n+[Mount Command]({{ '/en/operation/User-CLI.html' | relativize_url }}#mount) can be used for this purpose.\n+For example, the following command mounts a directory inside an Ozone bucket into Alluxio directory\n+`/ozone`:\n+\n+```console\n+$ ./bin/alluxio fs mount \\\n+  --option alluxio.underfs.hdfs.configuration=<DIR>/ozone-site.xml:<DIR>/core-site.xml \\\n+  /ozone o3fs://<OZONE_BUCKET>.<OZONE_VOLUME>/\n+```\n+\n+Make sure the relates config file is on all servers nodes running Alluxio.\n+\n+### Supported Ozone Versions\n+\n+Now, we tested ozone-0.5.0-beta work well with Alluxio.", "originalCommit": "961f803fd6907824a298febe6ade256ed4b2381d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d51d72003726bcbfcd1262efd5e0c101b94df491", "url": "https://github.com/Alluxio/alluxio/commit/d51d72003726bcbfcd1262efd5e0c101b94df491", "message": "Update docs/en/ufs/Ozone.md\n\nCo-authored-by: Zac Blanco <zac@alluxio.com>", "committedDate": "2020-06-07T02:21:50Z", "type": "commit"}, {"oid": "79eb365dd5319457732a3d5e1ebf4a03088a6e15", "url": "https://github.com/Alluxio/alluxio/commit/79eb365dd5319457732a3d5e1ebf4a03088a6e15", "message": "Update docs/en/ufs/Ozone.md\n\nCo-authored-by: Zac Blanco <zac@alluxio.com>", "committedDate": "2020-06-07T02:22:10Z", "type": "commit"}, {"oid": "e79e3551c54ce85327663994fcfac18d376174a3", "url": "https://github.com/Alluxio/alluxio/commit/e79e3551c54ce85327663994fcfac18d376174a3", "message": "Update docs/en/ufs/Ozone.md\n\nCo-authored-by: Zac Blanco <zac@alluxio.com>", "committedDate": "2020-06-07T02:22:29Z", "type": "commit"}, {"oid": "a255008003d60725becb293e32e961e121a363df", "url": "https://github.com/Alluxio/alluxio/commit/a255008003d60725becb293e32e961e121a363df", "message": "Address comments. Use https protocol.", "committedDate": "2020-06-07T02:30:04Z", "type": "commit"}]}