{"pr_number": 10930, "pr_title": "Add more debug or info log to local cache", "pr_createdAt": "2020-02-18T08:35:56Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/10930", "timeline": [{"oid": "98903b3535b87246cf8d7f80c0487c2b2ff04bfe", "url": "https://github.com/Alluxio/alluxio/commit/98903b3535b87246cf8d7f80c0487c2b2ff04bfe", "message": "Add more debug info", "committedDate": "2020-02-18T08:35:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc5NjQ2OA==", "url": "https://github.com/Alluxio/alluxio/pull/10930#discussion_r380796468", "bodyText": "Should this be something like \"Creating LocalCacheManager with {} existing pages\" ?", "author": "gpang", "createdAt": "2020-02-18T16:43:46Z", "path": "core/client/fs/src/main/java/alluxio/client/file/cache/LocalCacheManager.java", "diffHunk": "@@ -76,6 +76,7 @@ public static LocalCacheManager create(AlluxioConfiguration conf) throws IOExcep\n     PageStore pageStore = PageStore.create(conf);\n     try {\n       Collection<PageInfo> pageInfos = pageStore.getPages();\n+      LOG.info(\"Loading {} existing pages\", pageInfos.size());", "originalCommit": "98903b3535b87246cf8d7f80c0487c2b2ff04bfe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDc5ODgzMQ==", "url": "https://github.com/Alluxio/alluxio/pull/10930#discussion_r380798831", "bodyText": "will the PageId instance already print out PageId? Will pageId= be redundant in the log?", "author": "gpang", "createdAt": "2020-02-18T16:47:31Z", "path": "core/client/fs/src/main/java/alluxio/client/file/cache/LocalCacheManager.java", "diffHunk": "@@ -143,6 +144,7 @@ private ReadWriteLock getPageLock(PageId pageId) {\n \n   @Override\n   public boolean put(PageId pageId, byte[] page) throws IOException {\n+    LOG.debug(\"put(pageId={},page={} bytes)\", pageId, page.length);", "originalCommit": "98903b3535b87246cf8d7f80c0487c2b2ff04bfe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2cd77905ba73bd51eae631694e1995059298cf9d", "url": "https://github.com/Alluxio/alluxio/commit/2cd77905ba73bd51eae631694e1995059298cf9d", "message": "Address comments", "committedDate": "2020-02-18T21:55:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAxMzEwMQ==", "url": "https://github.com/Alluxio/alluxio/pull/10930#discussion_r381013101", "bodyText": "Shall we differentiate when there is not enough space and the new page fails to add?", "author": "bf8086", "createdAt": "2020-02-19T00:23:41Z", "path": "core/client/fs/src/main/java/alluxio/client/file/cache/LocalCacheManager.java", "diffHunk": "@@ -205,6 +208,7 @@ public boolean put(PageId pageId, byte[] page) throws IOException {\n         mEvictor.updateOnPut(pageId);\n       }\n     }\n+    LOG.debug(\"put({},{} bytes) exits with evicting ({})\", pageId, page.length, victimPageInfo);", "originalCommit": "2cd77905ba73bd51eae631694e1995059298cf9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTExNjQ3Ng==", "url": "https://github.com/Alluxio/alluxio/pull/10930#discussion_r381116476", "bodyText": "fixed . good catch", "author": "apc999", "createdAt": "2020-02-19T07:29:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTAxMzEwMQ=="}], "type": "inlineReview"}, {"oid": "6290cec332685240f1264798f5de2f193e9270b7", "url": "https://github.com/Alluxio/alluxio/commit/6290cec332685240f1264798f5de2f193e9270b7", "message": "Address comments", "committedDate": "2020-02-19T07:16:44Z", "type": "commit"}]}