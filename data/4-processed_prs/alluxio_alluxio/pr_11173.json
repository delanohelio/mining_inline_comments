{"pr_number": 11173, "pr_title": "Change K8s Alluxio master to format journal in initContainer", "pr_createdAt": "2020-03-16T06:21:29Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11173", "timeline": [{"oid": "178d808d33f9e63c67b5027a9eaf5817b8bd3bae", "url": "https://github.com/Alluxio/alluxio/commit/178d808d33f9e63c67b5027a9eaf5817b8bd3bae", "message": "remove journal formatting job", "committedDate": "2020-03-16T06:13:24Z", "type": "commit"}, {"oid": "ddb78b6eac775111f21122cffe22da35d80326c9", "url": "https://github.com/Alluxio/alluxio/commit/ddb78b6eac775111f21122cffe22da35d80326c9", "message": "remove occurrence of the job", "committedDate": "2020-03-16T06:17:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjgwMTQ4MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11173#discussion_r392801481", "bodyText": "This is because we moved the if-else to inside the initContainers. It's fine to have initContainers as empty.", "author": "jiacheliu3", "createdAt": "2020-03-16T06:23:35Z", "path": "integration/kubernetes/singleMaster-hdfsJournal/master/alluxio-master-statefulset.yaml.template", "diffHunk": "@@ -45,6 +45,7 @@ spec:\n       nodeSelector:\n       securityContext:\n         fsGroup: 1000\n+      initContainers:", "originalCommit": "ddb78b6eac775111f21122cffe22da35d80326c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQyMzQxNw==", "url": "https://github.com/Alluxio/alluxio/pull/11173#discussion_r393423417", "bodyText": "is this chown still needed now that we use local pv instead of hostPath? i would like to get rid of runAsUser: 0 as that might be unavailable in security constrained environments", "author": "madanadit", "createdAt": "2020-03-17T03:18:22Z", "path": "integration/kubernetes/helm-chart/alluxio/templates/master/statefulset.yaml", "diffHunk": "@@ -60,8 +60,8 @@ spec:\n       {{- end }}\n       securityContext:\n         fsGroup: {{ .Values.fsGroup }}\n-      {{- if and $needJournalVolume (not $isRoot) }}\n       initContainers:\n+      {{- if and $needJournalVolume (not $isRoot) }}", "originalCommit": "ddb78b6eac775111f21122cffe22da35d80326c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzUwMjYxMQ==", "url": "https://github.com/Alluxio/alluxio/pull/11173#discussion_r393502611", "bodyText": "Yea this should be removed.", "author": "jiacheliu3", "createdAt": "2020-03-17T08:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQyMzQxNw=="}], "type": "inlineReview"}, {"oid": "739dc98f09e305e138ca7e8759a5ec6e2ed5705f", "url": "https://github.com/Alluxio/alluxio/commit/739dc98f09e305e138ca7e8759a5ec6e2ed5705f", "message": "remove journal chown", "committedDate": "2020-03-17T08:08:45Z", "type": "commit"}]}