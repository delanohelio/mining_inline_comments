{"pr_number": 11348, "pr_title": "Add doc for PrometheusMetricsServlet", "pr_createdAt": "2020-04-24T18:01:27Z", "pr_url": "https://github.com/Alluxio/alluxio/pull/11348", "timeline": [{"oid": "970652e16e0830e3a4df2f321efcf8c051312e39", "url": "https://github.com/Alluxio/alluxio/commit/970652e16e0830e3a4df2f321efcf8c051312e39", "message": "Add doc for PrometheusMetricsServlet", "committedDate": "2020-04-24T17:59:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5MzAzNw==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414793037", "bodyText": "a HTTP request to the /metrics/prometheus/ endpoint of the Alluxio leading master or workers", "author": "Xenorith", "createdAt": "2020-04-24T18:53:29Z", "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,43 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:\n+\n+```\n+# Enable PrometheusMetricsServlet\n+sink.prometheus.class=alluxio.metrics.sink.PrometheusMetricsServlet\n+```\n+\n+You can send an HTTP request to `/metrics/prometheus/` of the Alluxio leading master or workers to get a snapshot of metrics in Prometheus format. ", "originalCommit": "970652e16e0830e3a4df2f321efcf8c051312e39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MTg0Mw==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414881843", "bodyText": "Got it! thanks", "author": "LuQQiu", "createdAt": "2020-04-24T21:46:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5MzAzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5NDcwMQ==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414794701", "bodyText": "does the server need to be restarted after setting this property for it to work?", "author": "Xenorith", "createdAt": "2020-04-24T18:56:23Z", "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,43 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:", "originalCommit": "970652e16e0830e3a4df2f321efcf8c051312e39", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg4MTc0MQ==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414881741", "bodyText": "Added the distributed and server restarted part.", "author": "LuQQiu", "createdAt": "2020-04-24T21:46:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDc5NDcwMQ=="}], "type": "inlineReview"}, {"oid": "ab1c3527b509600443372d789e2dab4663bf474b", "url": "https://github.com/Alluxio/alluxio/commit/ab1c3527b509600443372d789e2dab4663bf474b", "message": "small fix", "committedDate": "2020-04-24T21:45:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkxNzEzOQ==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r414917139", "bodyText": "to activate the new configuration changes", "author": "Xenorith", "createdAt": "2020-04-24T23:28:25Z", "path": "docs/en/operation/Metrics-System.md", "diffHunk": "@@ -96,6 +97,46 @@ The filename will correspond with the metric name.\n \n Refer to `metrics.properties.template` for all possible sink specific configurations. \n \n+### Prometheus Sink Setup\n+\n+[Prometheus](https://prometheus.io/) is a monitoring tool that can help monitoring Alluxio metrics changes.\n+\n+In the metrics property file, `$ALLUXIO_HOME/conf/metrics.properties` by default, add the following properties:\n+\n+```\n+# Enable PrometheusMetricsServlet\n+sink.prometheus.class=alluxio.metrics.sink.PrometheusMetricsServlet\n+```\n+\n+If Alluxio is deployed in a cluster, this file needs to be distributed to all the nodes.\n+Restart the Alluxio servers to active new configuration changes.", "originalCommit": "ab1c3527b509600443372d789e2dab4663bf474b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTEyODcwMw==", "url": "https://github.com/Alluxio/alluxio/pull/11348#discussion_r415128703", "bodyText": "oh jeez the incorrect wording was in more than one place.... >.<", "author": "Xenorith", "createdAt": "2020-04-25T19:35:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkxNzEzOQ=="}], "type": "inlineReview"}, {"oid": "73b477b471c53bd8c7450715276568f6c1f4fb06", "url": "https://github.com/Alluxio/alluxio/commit/73b477b471c53bd8c7450715276568f6c1f4fb06", "message": "smallfix", "committedDate": "2020-04-25T18:35:41Z", "type": "commit"}, {"oid": "e77dc11cf5f2ae48e959a6d38d1180f73bba6a56", "url": "https://github.com/Alluxio/alluxio/commit/e77dc11cf5f2ae48e959a6d38d1180f73bba6a56", "message": "fix to activate", "committedDate": "2020-04-27T16:53:50Z", "type": "commit"}]}