{"pr_number": 119, "pr_title": "Individual file match property", "pr_createdAt": "2020-02-21T19:01:10Z", "pr_url": "https://github.com/blackducksoftware/synopsys-detect/pull/119", "timeline": [{"oid": "bec1b79cc9a443643bd718e1be0273a31eca1e6c", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/bec1b79cc9a443643bd718e1be0273a31eca1e6c", "message": "feat(property): Added property BLACKDUCK_BLACKDUCK_SIGNATURE_SCANNER_INDIVIDUAL_FILE_MATCHING, created configuration/enums folder (IDETECT-1860)", "committedDate": "2020-02-04T22:43:15Z", "type": "commit"}, {"oid": "07f02f5ef1b4611b2622207aef89c53e36e37f30", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/07f02f5ef1b4611b2622207aef89c53e36e37f30", "message": "feat(scanner): Add field individualFileMatching to SignatureScannerOptions (IDETECT-1860)", "committedDate": "2020-02-05T17:52:29Z", "type": "commit"}, {"oid": "5d21d37052b56a4342ea7d6b68f59b37de60c70a", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/5d21d37052b56a4342ea7d6b68f59b37de60c70a", "message": "Merge branch 'master' into individualFileMatchProperty", "committedDate": "2020-02-10T17:39:27Z", "type": "commit"}, {"oid": "4f0d53e414652420100decba9c045545c037995e", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4f0d53e414652420100decba9c045545c037995e", "message": "feat(property): Merge branch 'licenseStringSearchProperty' into individualFileMatchProperty, passed individualFileMatching to ScanCommand (IDETECT-1860)", "committedDate": "2020-02-10T19:35:09Z", "type": "commit"}, {"oid": "f3ee35bb618ab88fddbf58361f38119f6773f7c8", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/f3ee35bb618ab88fddbf58361f38119f6773f7c8", "message": "Merged master", "committedDate": "2020-02-21T18:59:26Z", "type": "commit"}, {"oid": "bd5b9dbd315cab42cf74af51602a61e55971502b", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/bd5b9dbd315cab42cf74af51602a61e55971502b", "message": "fix(scanner): Edited conditional to enable source upload when license Search is set", "committedDate": "2020-02-21T19:34:51Z", "type": "commit"}, {"oid": "4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "message": "Merge branch 'master' into individualFileMatchProperty", "committedDate": "2020-02-24T20:45:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NTY5Ng==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/119#discussion_r383545696", "bodyText": "You should be using a FilterableEnumListProperty. Use the detect.included.detector.types property as an example.", "author": "JakeMathews", "createdAt": "2020-02-24T22:12:37Z", "path": "src/main/java/com/synopsys/integration/detect/configuration/DetectProperties.kt", "diffHunk": "@@ -246,6 +236,11 @@ class DetectProperties {\n             setHelp(\"A comma-separated list of values to be used with the Signature Scanner --exclude flag.\", \"Each pattern provided is passed to the signature scanner (Black Duck scan CLI) as a value for an --exclude option. The signature scanner requires that these exclusion patterns start and end with a forward slash (/) and may not contain double asterisks (**). These patterns will be added to the paths created from detect.blackduck.signature.scanner.exclusion.name.patterns and passed as --exclude values. Use this property to pass patterns directly to the signature scanner as-is. For example: suppose you are running in bash on Linux, and have a subdirectory named blackduck-common that you want to exclude from signature scanning. Any of the following would exclude it: --detect.blackduck.signature.scanner.exclusion.patterns=/blackduck-common/, --detect.blackduck.signature.scanner.exclusion.patterns='/blackduck-common/', --detect.blackduck.signature.scanner.exclusion.patterns='/blackduck-*/'. Use detect.blackduck.signature.scanner.exclusion.name.patterns when you want Detect to convert the given patterns to actual paths.\")\n             setGroups(DetectGroup.SignatureScanner, DetectGroup.SourceScan)\n         }\n+        val DETECT_BLACKDUCK_SIGNATURE_SCANNER_INDIVIDUAL_FILE_MATCHING = EnumProperty(\"detect.blackduck.signature.scanner.individual.file.matching\", IndividualFileMatchMode.NONE, IndividualFileMatchMode::class.java).apply {\n+            setInfo(\"Individual File Matching\", \"6.2.0\")\n+            setHelp(\"Users may set this property to SOURCE, BINARY, ALL, or NONE, to indicate what types of files they want to match\")\n+            setGroups(DetectGroup.SignatureScanner)\n+        }", "originalCommit": "4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NjUzOQ==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/119#discussion_r383546539", "bodyText": "Also the help text should not include hard coded example values anymore. The new configuration system is aware of the potential values.", "author": "JakeMathews", "createdAt": "2020-02-24T22:14:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NTY5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NjgzMg==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/119#discussion_r383546832", "bodyText": "Remove these two options once the property is a FilterableEnumListProperty.", "author": "JakeMathews", "createdAt": "2020-02-24T22:15:14Z", "path": "src/main/java/com/synopsys/integration/detect/configuration/enums/IndividualFileMatchMode.kt", "diffHunk": "@@ -0,0 +1,30 @@\n+/**\n+ * synopsys-detect\n+ *\n+ * Copyright (c) 2020 Synopsys, Inc.\n+ *\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements. See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership. The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied. See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package com.synopsys.integration.detect.configuration.enums\n+\n+enum class IndividualFileMatchMode {\n+    NONE,\n+    ALL,", "originalCommit": "4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0Nzc4OA==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/119#discussion_r383547788", "bodyText": "Keep this as an enum!", "author": "JakeMathews", "createdAt": "2020-02-24T22:17:20Z", "path": "src/main/java/com/synopsys/integration/detect/tool/signaturescanner/BlackDuckSignatureScannerOptions.kt", "diffHunk": "@@ -41,5 +41,6 @@ class BlackDuckSignatureScannerOptions(\n         val codeLocationSuffix: String?,\n         val additionalArguments: String?,\n         val maxDepth: Int,\n+        val individualFileMatching: String?,", "originalCommit": "4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0ODA5Mw==", "url": "https://github.com/blackducksoftware/synopsys-detect/pull/119#discussion_r383548093", "bodyText": "Don't convert the enum to a String by calling \".name\". The configuration has done the heavy lifting of converting it to an enum for you. It should remain an enum in the BlackDuckSignatureScannerOptions and be converted to a String by the user of the BlackDuckSignatureScannerOptions if need be.", "author": "JakeMathews", "createdAt": "2020-02-24T22:18:03Z", "path": "src/main/java/com/synopsys/integration/detect/configuration/DetectConfigurationFactory.kt", "diffHunk": "@@ -314,6 +314,7 @@ open class DetectConfigurationFactory(private val detectConfiguration: PropertyC\n         val dryRun = PropertyConfigUtils.getFirstProvidedValueOrDefault(detectConfiguration, DetectProperties.DETECT_BLACKDUCK_SIGNATURE_SCANNER_DRY_RUN, DetectProperties.DETECT_HUB_SIGNATURE_SCANNER_DRY_RUN)\n         val uploadSource = detectConfiguration.getValue(DetectProperties.DETECT_BLACKDUCK_SIGNATURE_SCANNER_UPLOAD_SOURCE_MODE)\n         val licenseSearch = detectConfiguration.getValue(DetectProperties.DETECT_BLACKDUCK_SIGNATURE_SCANNER_LICENSE_SEARCH);\n+        val individualFileMatching = detectConfiguration.getValue(DetectProperties.DETECT_BLACKDUCK_SIGNATURE_SCANNER_INDIVIDUAL_FILE_MATCHING).name", "originalCommit": "4fa3d7fe3a373f382d33100ac452dfd2ce8cf531", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7778318638a906ffb3884510caf11c0e78759f4a", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/7778318638a906ffb3884510caf11c0e78759f4a", "message": "fix(property): Leaving individualFileMatch property as enum when extracted from config", "committedDate": "2020-02-24T23:14:06Z", "type": "commit"}, {"oid": "6f5697cd10ad89ef9778cee27b86cde3486e32c0", "url": "https://github.com/blackducksoftware/synopsys-detect/commit/6f5697cd10ad89ef9778cee27b86cde3486e32c0", "message": "fix(property): Moved ExtendedSnippetMode to com.synopsys.integration.detect.tool.signaturescanner.enums", "committedDate": "2020-02-24T23:55:36Z", "type": "commit"}]}