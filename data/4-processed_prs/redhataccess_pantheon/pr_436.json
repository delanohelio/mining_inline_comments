{"pr_number": 436, "pr_title": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up", "pr_createdAt": "2020-10-14T07:24:32Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/436", "timeline": [{"oid": "bf421bf9658b18849e163f4e196f901655492c28", "url": "https://github.com/redhataccess/pantheon/commit/bf421bf9658b18849e163f4e196f901655492c28", "message": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up", "committedDate": "2020-10-14T13:17:44Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5Nzg0OA==", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r504897848", "bodyText": "assemblyDisplay doesn't have issue with  \"\"View on Customer Portal\" link when publishing. This code is not neccessary.", "author": "xdavidson", "createdAt": "2020-10-14T18:48:24Z", "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "diffHunk": "@@ -254,6 +254,10 @@ class AssemblyDisplay extends Component<any, any, any> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "originalCommit": "bf421bf9658b18849e163f4e196f901655492c28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTEzNDEwMQ==", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r505134101", "bodyText": "I am seeing this issue on QA for assembly when I am publishing the assembly for the first time. Let's discuss this as well in the PR review meeting that I have setup.", "author": "aprajshekhar", "createdAt": "2020-10-15T02:53:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5Nzg0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5ODc4NQ==", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r504898785", "bodyText": "I don't believe this fix the underlining problem. The reason on Module display, \"View on Customer Portal\" link doesn't show up when publishing is because, you need add this method call in public componentDidMount() method:\nthis.getPortalUrl()", "author": "xdavidson", "createdAt": "2020-10-14T18:50:03Z", "path": "pantheon-bundle/frontend/src/app/moduleDisplay.tsx", "diffHunk": "@@ -306,6 +306,10 @@ class ModuleDisplay extends Component<any, IModuleDisplayState> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "originalCommit": "bf421bf9658b18849e163f4e196f901655492c28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTEyODcwMw==", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r505128703", "bodyText": "Thanks for the comment. this.getPortalUrl() already gets called from fetchModuleDetails() which gets called from  componentDidMount. Calling the this.getPortalUrl() will be required from publish event handler if the module has not been published at all or unpublished and republished.\nAlso, there is a time gap between 200 OK received and the actual JCR updates happening in the backend. I have setup a meeting on Monday to discuss this PR.", "author": "aprajshekhar", "createdAt": "2020-10-15T02:35:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5ODc4NQ=="}], "type": "inlineReview"}, {"oid": "d095c811847d0cac87b4d62de5ef692035b3b1f3", "url": "https://github.com/redhataccess/pantheon/commit/d095c811847d0cac87b4d62de5ef692035b3b1f3", "message": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up. Updating for the changes in master", "committedDate": "2020-10-15T03:26:42Z", "type": "commit"}, {"oid": "d095c811847d0cac87b4d62de5ef692035b3b1f3", "url": "https://github.com/redhataccess/pantheon/commit/d095c811847d0cac87b4d62de5ef692035b3b1f3", "message": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up. Updating for the changes in master", "committedDate": "2020-10-15T03:26:42Z", "type": "forcePushed"}]}