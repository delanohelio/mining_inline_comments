{"pr_number": 330, "pr_title": "CCS-3603 Migrate Pantheon 2 to Apache Karaf", "pr_createdAt": "2020-07-01T08:46:50Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/330", "timeline": [{"oid": "9139db4eecc44870e434f9502fd46c4f8ef0ed70", "url": "https://github.com/redhataccess/pantheon/commit/9139db4eecc44870e434f9502fd46c4f8ef0ed70", "message": "   CCS-3609:  Create Karaf distribution of Pantheon.", "committedDate": "2020-05-18T07:42:36Z", "type": "commit"}, {"oid": "69c0a49a9d0eec5de8b52cf8244e4fcee2305222", "url": "https://github.com/redhataccess/pantheon/commit/69c0a49a9d0eec5de8b52cf8244e4fcee2305222", "message": "typo fix. (#289)\n\n_PANTHEON_CODBASE_ to _PANTHEON_CODEBASE_", "committedDate": "2020-05-19T07:23:53Z", "type": "commit"}, {"oid": "47a69926c2020dd72ca5dcabbd7cc29dbaa68c13", "url": "https://github.com/redhataccess/pantheon/commit/47a69926c2020dd72ca5dcabbd7cc29dbaa68c13", "message": " CCS-3635:  Update travis build to work with karaf distribution (#295)\n\n* CCS-3635:  Update travis build to work with karaf distribution", "committedDate": "2020-05-27T06:40:46Z", "type": "commit"}, {"oid": "a5c965831453c38f361c28442d7f609c9aead2c4", "url": "https://github.com/redhataccess/pantheon/commit/a5c965831453c38f361c28442d7f609c9aead2c4", "message": "update pantheon feature with latest permissions (#302)\n\nPermissions updated from the main branch", "committedDate": "2020-06-01T14:40:49Z", "type": "commit"}, {"oid": "c47835b2f179d083d0bba138b1e16e4236aa299f", "url": "https://github.com/redhataccess/pantheon/commit/c47835b2f179d083d0bba138b1e16e4236aa299f", "message": "CCS-3639 Merge latest changes from master to pantheon_karaf_dist branch", "committedDate": "2020-06-02T10:54:14Z", "type": "commit"}, {"oid": "865ef6030aa7d1b6e2b0c6ca4420254ba3465693", "url": "https://github.com/redhataccess/pantheon/commit/865ef6030aa7d1b6e2b0c6ca4420254ba3465693", "message": "CCS-3634: Update the container creation files to use the karaf based distribution (#305)\n\n* CCS-3634: Update the container creation files to use the karaf based distribution", "committedDate": "2020-06-03T05:51:37Z", "type": "commit"}, {"oid": "213fa2936c0cbad2bdda46aee2e8b598f8bceaa4", "url": "https://github.com/redhataccess/pantheon/commit/213fa2936c0cbad2bdda46aee2e8b598f8bceaa4", "message": "CCS-3639 Merge latest changes from master to pantheon_karaf_dist branch", "committedDate": "2020-06-03T10:46:19Z", "type": "commit"}, {"oid": "be1d041e1508d5c46c84638fbf3e393accf74630", "url": "https://github.com/redhataccess/pantheon/commit/be1d041e1508d5c46c84638fbf3e393accf74630", "message": "Cosmetic changes for deployment preparations (#308)\n\n* Cosmetic changes for deployment preparations", "committedDate": "2020-06-09T09:15:30Z", "type": "commit"}, {"oid": "88eaa306ee54bd98c2851d3bd5ff82e8282526ed", "url": "https://github.com/redhataccess/pantheon/commit/88eaa306ee54bd98c2851d3bd5ff82e8282526ed", "message": "CCS-3663 Merge latest changes from master to pantheon_karaf_dist branch", "committedDate": "2020-06-10T10:43:37Z", "type": "commit"}, {"oid": "ed7ff984e4b5b81425bc582f5615c0e3a1e211ef", "url": "https://github.com/redhataccess/pantheon/commit/ed7ff984e4b5b81425bc582f5615c0e3a1e211ef", "message": "CCS-3640. Using https for apache repo", "committedDate": "2020-06-15T12:33:07Z", "type": "commit"}, {"oid": "14e14bd3d8b9feb2e8d0240b9eaf03e1bf998d81", "url": "https://github.com/redhataccess/pantheon/commit/14e14bd3d8b9feb2e8d0240b9eaf03e1bf998d81", "message": "CCS-3640. proxy changes", "committedDate": "2020-06-16T06:30:40Z", "type": "commit"}, {"oid": "0494a0bb1dadc17e58b50eda8bb3d8a47f8e0d99", "url": "https://github.com/redhataccess/pantheon/commit/0494a0bb1dadc17e58b50eda8bb3d8a47f8e0d99", "message": "update dependencies to latest provided by karaf (#320)", "committedDate": "2020-06-17T15:38:03Z", "type": "commit"}, {"oid": "ca39328ea7c96a5f66bfc3855a68d219f7c4667d", "url": "https://github.com/redhataccess/pantheon/commit/ca39328ea7c96a5f66bfc3855a68d219f7c4667d", "message": "CCS-3640. repo changes", "committedDate": "2020-06-22T06:47:16Z", "type": "commit"}, {"oid": "051c849e1f267f8ade880de8472049ba3125d606", "url": "https://github.com/redhataccess/pantheon/commit/051c849e1f267f8ade880de8472049ba3125d606", "message": "Reverse merge from master", "committedDate": "2020-06-23T11:49:35Z", "type": "commit"}, {"oid": "68c8190026517fdd862917c367afb86d742ae941", "url": "https://github.com/redhataccess/pantheon/commit/68c8190026517fdd862917c367afb86d742ae941", "message": "Reverse merge from master", "committedDate": "2020-06-24T08:21:20Z", "type": "commit"}, {"oid": "55a93dc2f1d5beef855ebecb71f0dfab481d48e6", "url": "https://github.com/redhataccess/pantheon/commit/55a93dc2f1d5beef855ebecb71f0dfab481d48e6", "message": "Reverse merge from master", "committedDate": "2020-06-25T10:26:03Z", "type": "commit"}, {"oid": "546a889d5a5220758a290f54dfbe211f9c282134", "url": "https://github.com/redhataccess/pantheon/commit/546a889d5a5220758a290f54dfbe211f9c282134", "message": "reverse merge from master", "committedDate": "2020-07-01T06:49:57Z", "type": "commit"}, {"oid": "59daee07bc03a1a21bcd71b9e99aff4d41475514", "url": "https://github.com/redhataccess/pantheon/commit/59daee07bc03a1a21bcd71b9e99aff4d41475514", "message": "CCS-3603: Migrate Pantheon 2 to Apache Karaf", "committedDate": "2020-07-01T07:07:30Z", "type": "commit"}, {"oid": "ed139a0dd70b3811683bbbbe751534b3778da18f", "url": "https://github.com/redhataccess/pantheon/commit/ed139a0dd70b3811683bbbbe751534b3778da18f", "message": "Merge branch 'master' into pantheon_karaf_dist", "committedDate": "2020-07-01T08:22:30Z", "type": "commit"}, {"oid": "18ef3190d0ec7d089d7c9b98b51e187360333a16", "url": "https://github.com/redhataccess/pantheon/commit/18ef3190d0ec7d089d7c9b98b51e187360333a16", "message": "CCS-3603: Migrate Pantheon 2 to Apache Karaf. Remove extraneous and whitespace related changes", "committedDate": "2020-07-01T08:37:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIxODYwOA==", "url": "https://github.com/redhataccess/pantheon/pull/330#discussion_r448218608", "bodyText": "Can we have this at project specific location instead of a user ?", "author": "rednitish", "createdAt": "2020-07-01T08:55:46Z", "path": ".travis.yml", "diffHunk": "@@ -2,15 +2,19 @@ matrix:\n   include:\n     - language: java\n       jdk: openjdk8\n-      install: true\n-      script: ./mvnw clean install\n+\n+      cache:\n+        directories:\n+          - $HOME/.m2\n+\n+      install:\n+        - curl -o $HOME/.m2/settings.xml     https://raw.githubusercontent.com/aprajshekhar/maven-settings/master/settings.xml", "originalCommit": "18ef3190d0ec7d089d7c9b98b51e187360333a16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIyNTE5NQ==", "url": "https://github.com/redhataccess/pantheon/pull/330#discussion_r448225195", "bodyText": "We can do that. However, I cannot seem to create a project in redhat access org. Having the XML file as a part of the source code could create issues in the future.", "author": "aprajshekhar", "createdAt": "2020-07-01T09:07:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIxODYwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIyMDcyMg==", "url": "https://github.com/redhataccess/pantheon/pull/330#discussion_r448220722", "bodyText": "Can we made it more generic ?", "author": "rednitish", "createdAt": "2020-07-01T08:59:27Z", "path": "container/Dockerfile", "diffHunk": "@@ -1,15 +1,22 @@\n FROM registry.access.redhat.com/ubi8/ubi\n RUN yum -y install java-1.8.0-openjdk\n \n-RUN mkdir -p /opt/sling\n+ENV MONGO_DB=\"sling\"\n+ENV REPOSITORY=\"sling/repository\"\n+ENV KARAF_DEBUG=true\n+RUN mkdir -p /opt/pantheon-karaf-dist\n+RUN mkdir /tmp/archive\n+WORKDIR /tmp/archive\n \n-COPY ../pantheon-slingstart/target/pantheon-slingstart-*.jar /opt/sling/pantheon.jar\n+COPY ../pantheon-karaf-dist/target/pantheon-karaf-dist-*.tar.gz /tmp/archive/pantheon-karaf-dist.tar.gz", "originalCommit": "18ef3190d0ec7d089d7c9b98b51e187360333a16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIyNTYzMw==", "url": "https://github.com/redhataccess/pantheon/pull/330#discussion_r448225633", "bodyText": "This is keeping auto-rev of version in mind.", "author": "aprajshekhar", "createdAt": "2020-07-01T09:08:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODIyMDcyMg=="}], "type": "inlineReview"}]}