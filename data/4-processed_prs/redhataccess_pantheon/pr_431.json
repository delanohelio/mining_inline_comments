{"pr_number": 431, "pr_title": "Fixing up hydra code, now provides url on unpublish", "pr_createdAt": "2020-10-01T17:20:11Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/431", "timeline": [{"oid": "387e7212b56e998c2753a1cd1e7807e72a860e70", "url": "https://github.com/redhataccess/pantheon/commit/387e7212b56e998c2753a1cd1e7807e72a860e70", "message": "Fixing up hydra code, now provides url on unpublish", "committedDate": "2020-10-01T17:14:47Z", "type": "commit"}, {"oid": "dc745a14ac2ebc571708f441caa85420a5df65e8", "url": "https://github.com/redhataccess/pantheon/commit/dc745a14ac2ebc571708f441caa85420a5df65e8", "message": "extra code cleanup", "committedDate": "2020-10-01T17:19:28Z", "type": "commit"}, {"oid": "347a423ceff1e28d1537694cc8aa46c784a5e681", "url": "https://github.com/redhataccess/pantheon/commit/347a423ceff1e28d1537694cc8aa46c784a5e681", "message": "Fixing url structure", "committedDate": "2020-10-01T17:38:15Z", "type": "commit"}, {"oid": "889eb4d9e5392f40210fff17657b68e8460f6eb1", "url": "https://github.com/redhataccess/pantheon/commit/889eb4d9e5392f40210fff17657b68e8460f6eb1", "message": "Possibly fixing uncaught throwable found by Lisa", "committedDate": "2020-10-07T20:27:22Z", "type": "commit"}, {"oid": "7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb", "url": "https://github.com/redhataccess/pantheon/commit/7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb", "message": "modifying locale to fit customer portal", "committedDate": "2020-10-09T14:13:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQ3Mjg3MA==", "url": "https://github.com/redhataccess/pantheon/pull/431#discussion_r502472870", "bodyText": "we have a method in ServletUtils that transforms the locale to language tag. see\nhttps://github.com/redhataccess/pantheon/blob/master/pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/module/VariantJsonServlet.java#L109", "author": "xdavidson", "createdAt": "2020-10-09T14:38:02Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/extension/url/CustomerPortalUrlUuidProvider.java", "diffHunk": "@@ -30,10 +30,10 @@ public String generateUrlString(DocumentVariant variant) {\n             ProductVersion pv = metadata.productVersion().getReference();\n             StringBuilder sb = new StringBuilder(getHost(variant.getResourceResolver()));\n             sb.append(URL_PREFIX)\n-                    .append(getLocale(variant)).append(\"/\")\n-                    .append(getDocumentType(variant)).append(\"/\")\n+                    .append(getLocale(variant).replaceAll(\"_\", \"-\").toLowerCase()).append(\"/\") // turns en_US into en-us which is likely a customer portal requirement (need to confirm)", "originalCommit": "7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "567624583f758849572f2843cc41b0edb51d3a88", "url": "https://github.com/redhataccess/pantheon/commit/567624583f758849572f2843cc41b0edb51d3a88", "message": "Refactor to use servlet utils", "committedDate": "2020-10-09T15:58:48Z", "type": "commit"}]}