{"pr_number": 391, "pr_title": "CCS-3775 Update view_uri  to match the ideal URL path", "pr_createdAt": "2020-08-28T09:32:55Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/391", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NTA5OQ==", "url": "https://github.com/redhataccess/pantheon/pull/391#discussion_r479455099", "bodyText": "instead of this.state.productValue/versionValue, it should be the urlFragment values. The urlFragment for product and version is introduced in PR#/390", "author": "xdavidson", "createdAt": "2020-08-28T17:57:13Z", "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "diffHunk": "@@ -69,7 +69,7 @@ class AssemblyDisplay extends Component<any, any, any> {\n                             {this.state.releaseUpdateDate.trim() !== \"\" && this.state.releaseUpdateDate !== '-'\n                                 && this.state.variantUUID !== \"\"\n                                 && this.state.portalHost !== \"\"\n-                                && <span><a href={this.state.portalHost + '/guides/en-us/' + this.state.variantUUID} target=\"_blank\">View on Customer Portal  <i className=\"fa pf-icon-arrow\" /></a> </span>\n+                                && <span><a href={this.state.portalHost + '/documentation/en-us/guide/' + this.state.productValue + '/' + this.state.versionValue + '/' + this.state.variantUUID} target=\"_blank\">View on Customer Portal  <i className=\"fa pf-icon-arrow\" /></a> </span>", "originalCommit": "8e78d3ee25813465c90a31b7ef7abdf86d0665de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NTM1OQ==", "url": "https://github.com/redhataccess/pantheon/pull/391#discussion_r479455359", "bodyText": "instead of this.state.productValue/versionValue, it should be the urlFragment values. The urlFragment for product and version is introduced in PR#/390", "author": "xdavidson", "createdAt": "2020-08-28T17:57:50Z", "path": "pantheon-bundle/frontend/src/app/moduleDisplay.tsx", "diffHunk": "@@ -70,7 +70,7 @@ class ModuleDisplay extends Component<any, any, any> {\n                         {this.state.releaseUpdateDate.trim() !== \"\" && this.state.releaseUpdateDate !== '-'\n                             && this.state.variantUUID !== \"\"\n                             && this.state.portalHost !== \"\"\n-                            && <span><a href={this.state.portalHost + '/topics/en-us/' + this.state.variantUUID} target=\"_blank\">View on Customer Portal  <i className=\"fa pf-icon-arrow\" /></a> </span>\n+                            && <span><a href={this.state.portalHost + '/documentation/en-us/topic/' + this.state.productValue + '/' + this.state.versionValue + '/' + this.state.variantUUID} target=\"_blank\">View on Customer Portal  <i className=\"fa pf-icon-arrow\" /></a> </span>", "originalCommit": "8e78d3ee25813465c90a31b7ef7abdf86d0665de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NjIyOQ==", "url": "https://github.com/redhataccess/pantheon/pull/391#discussion_r479456229", "bodyText": "we need use the urlFragment instead of product/version name", "author": "xdavidson", "createdAt": "2020-08-28T17:59:48Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/assembly/AssemblyJsonServlet.java", "diffHunk": "@@ -162,7 +162,7 @@ protected boolean isValidResource(@Nonnull SlingHttpServletRequest request, @Non\n \n         // Process view_uri\n         if (System.getenv(PORTAL_URL) != null) {\n-            String view_uri = System.getenv(PORTAL_URL) + \"/guides/\" + ServletUtils.toLanguageTag(locale) + \"/\" + assemblyId;\n+            String view_uri = System.getenv(PORTAL_URL) + \"/documentation/\" + ServletUtils.toLanguageTag(locale) + \"/guide/\" + pv.name().get() + \"/\" + pv.getProduct().name().get() + \"/\" + assembly_uuid;", "originalCommit": "8e78d3ee25813465c90a31b7ef7abdf86d0665de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTQ1NjM1OQ==", "url": "https://github.com/redhataccess/pantheon/pull/391#discussion_r479456359", "bodyText": "we need use the urlFragment instead of product/version name", "author": "xdavidson", "createdAt": "2020-08-28T18:00:03Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/module/ModuleJsonServlet.java", "diffHunk": "@@ -168,7 +168,7 @@ protected boolean isValidResource(@Nonnull SlingHttpServletRequest request, @Non\n \n         // Process view_uri\n         if (System.getenv(PORTAL_URL) != null) {\n-            String view_uri = System.getenv(PORTAL_URL) + \"/topics/\" + ServletUtils.toLanguageTag(locale) + \"/\" + module_uuid;\n+            String view_uri = System.getenv(PORTAL_URL) + \"/documentation/\" + ServletUtils.toLanguageTag(locale) + \"/topic/\" + pv.name().get() + \"/\" + pv.getProduct().name().get() + \"/\" + module_uuid;", "originalCommit": "8e78d3ee25813465c90a31b7ef7abdf86d0665de", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2927a9a6892c6c12e226a87c2d986f741ccb0be4", "url": "https://github.com/redhataccess/pantheon/commit/2927a9a6892c6c12e226a87c2d986f741ccb0be4", "message": "CCS-3775 Update view_uri to match the ideal URL path", "committedDate": "2020-09-02T14:07:39Z", "type": "commit"}, {"oid": "2927a9a6892c6c12e226a87c2d986f741ccb0be4", "url": "https://github.com/redhataccess/pantheon/commit/2927a9a6892c6c12e226a87c2d986f741ccb0be4", "message": "CCS-3775 Update view_uri to match the ideal URL path", "committedDate": "2020-09-02T14:07:39Z", "type": "forcePushed"}]}