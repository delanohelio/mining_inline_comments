{"pr_number": 469, "pr_title": "Ccs 3997 product version form", "pr_createdAt": "2020-11-16T20:14:02Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/469", "timeline": [{"oid": "3c5593f9d17333323fb7ec36ea342a67151b2971", "url": "https://github.com/redhataccess/pantheon/commit/3c5593f9d17333323fb7ec36ea342a67151b2971", "message": "CCS-3997-add-version-to-product-form", "committedDate": "2020-11-16T20:00:34Z", "type": "commit"}, {"oid": "2792535c956a7633c387203d7b65f84baacad52b", "url": "https://github.com/redhataccess/pantheon/commit/2792535c956a7633c387203d7b65f84baacad52b", "message": "CCS-3997: remove console.log", "committedDate": "2020-11-16T20:03:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1MDE1OA==", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524650158", "bodyText": "we don't need the lambda function for onClick event or the Button type. I recommend:\nSave", "author": "xdavidson", "createdAt": "2020-11-16T22:02:31Z", "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -94,8 +98,24 @@ class Product extends Component<any, IState> {\n                                     <TextInput id=\"product_description_text\" type=\"text\" placeholder=\"Product Description\" value={this.state.productDescription} onChange={this.handleProductInput} />\n                                 </FormGroup>\n                                 <br />\n+                                <FormGroup\n+                                        label=\"Product Version:\"\n+                                        isRequired={true}\n+                                        fieldId=\"version_name\"\n+                                >\n+                                    <TextInput id=\"new_version_name_text\" type=\"text\" placeholder=\"Product Version\" onChange={this.handleTextInputChange} value={this.state.versionName} />\n+                                </FormGroup>\n+                                <br />\n+                                <FormGroup\n+                                        label=\"Version URL Fragment:\"\n+                                        isRequired={true}\n+                                        fieldId=\"version_url_fragment\"\n+                                >\n+                                    <TextInput id=\"new_version_url_fragment\" type=\"text\" placeholder=\"Version URL Fragment\" onChange={this.handleUrlInputChange} value={this.state.versionUrlFragment} />\n+                                </FormGroup>\n+                                <br />\n                                 <ActionGroup>\n-                                    <Button aria-label=\"Creates a new Product Name with Description specified.\" onClick={this.saveProduct}>Save</Button>\n+                                    <Button type='submit' aria-label=\"Creates a new Product Name with Description specified.\" onClick={e => this.saveProduct(e)}>Save</Button>", "originalCommit": "2792535c956a7633c387203d7b65f84baacad52b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1MjI2OQ==", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524652269", "bodyText": "I don't believe we don't believe we the changes on line 44.", "author": "xdavidson", "createdAt": "2020-11-16T22:03:51Z", "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -26,18 +28,20 @@ class Product extends Component<any, IState> {\n             productDescription: \"\",\n             productName: \"\",\n             productUrlFragment: \"\",\n+            versionName: \"\",\n+            versionUrlFragment: \"\",\n             redirect: false\n         }\n \n     }\n-\n+    \n     // render method transforms the react components into DOM nodes for the browser.\n     public render() {\n         return (\n             <React.Fragment>\n                 {/* Bullseye makes sure everyhting is in the middle */}\n                 <Bullseye>\n-                    <Form>\n+                    <Form onSubmit={this.saveProduct} method='POST'>", "originalCommit": "2792535c956a7633c387203d7b65f84baacad52b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1ODE5NA==", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524658194", "bodyText": "line 162 does not check if users can enter an empty string in Version Name field. It would be better if we do something like this:\nif (this.state.versionName.trim() === \"\" || this.state.versionUrlFragment === \"\")", "author": "xdavidson", "createdAt": "2020-11-16T22:07:46Z", "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -125,8 +145,52 @@ class Product extends Component<any, IState> {\n         }\n     }\n \n-    private saveProduct = () => {\n-        if (this.state.productName === \"\"|| this.state.productUrlFragment === \"\") {\n+    private handleTextInputChange = versionName => {\n+        this.setState({ versionName })\n+    }\n+\n+    private handleUrlInputChange = versionUrlFragment => {\n+        if (/^[-.\\w]+$/.test(versionUrlFragment)) {\n+            this.setState({ versionUrlFragment, isUrlFragmentValid: true })\n+        } else {\n+            this.setState({ isUrlFragmentValid: false})\n+        }\n+    }\n+\n+    private saveVersion = () => {\n+        // confirming form state is valid\n+        if (this.state.versionName === \"\" || this.state.productUrlFragment === \"\") {", "originalCommit": "2792535c956a7633c387203d7b65f84baacad52b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8cce4260f4a38f8b3c445d7ec90c0554ca984698", "url": "https://github.com/redhataccess/pantheon/commit/8cce4260f4a38f8b3c445d7ec90c0554ca984698", "message": "CCS-3997: comment fixes", "committedDate": "2020-11-17T13:58:50Z", "type": "commit"}]}