{"pr_number": 410, "pr_title": "CCS-3743 - update labels on left nav and search results. add Assembly to the filter", "pr_createdAt": "2020-09-09T18:27:15Z", "pr_url": "https://github.com/redhataccess/pantheon/pull/410", "timeline": [{"oid": "f363b769c2411c5072747369c52da02666f26ea9", "url": "https://github.com/redhataccess/pantheon/commit/f363b769c2411c5072747369c52da02666f26ea9", "message": "update labels on left nav and search results. add Assembly to the filter", "committedDate": "2020-09-09T18:19:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMjg1Mw==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486102853", "bodyText": "comment is misleading", "author": "rednitish", "createdAt": "2020-09-10T06:47:10Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter", "originalCommit": "f363b769c2411c5072747369c52da02666f26ea9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjQ3NQ==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436475", "bodyText": "fixed", "author": "xdavidson", "createdAt": "2020-09-10T15:30:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMjg1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMzg5Nw==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486103897", "bodyText": "can we refactor/rename moduleType to contentType ?", "author": "rednitish", "createdAt": "2020-09-10T06:49:24Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()", "originalCommit": "f363b769c2411c5072747369c52da02666f26ea9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjU0MQ==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436541", "bodyText": "done", "author": "xdavidson", "createdAt": "2020-09-10T15:30:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMzg5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNDYxNw==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486104617", "bodyText": "can we have a more generic name i.e. instead of moduleTypeItems like contentTypeItems ?", "author": "rednitish", "createdAt": "2020-09-10T06:50:53Z", "path": "pantheon-bundle/frontend/src/app/searchFilter.tsx", "diffHunk": "@@ -47,6 +47,7 @@ class SearchFilter extends Component<any, any> {\n \n     const moduleTypeItems = [", "originalCommit": "f363b769c2411c5072747369c52da02666f26ea9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjYyOQ==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436629", "bodyText": "done", "author": "xdavidson", "createdAt": "2020-09-10T15:30:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNDYxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNDMyOA==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486114328", "bodyText": "Can we initialize moduleTypeCondition outside if blocks, as it will remove code duplication ?\ni.e.\nStringBuilder contentTypeCondition = new StringBuilder();", "author": "rednitish", "createdAt": "2020-09-10T07:10:52Z", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()\n+                        .append(\"@jcr:primaryType = 'pant:assembly'\");\n+            } else {\n+                moduleTypeCondition = new StringBuilder()", "originalCommit": "f363b769c2411c5072747369c52da02666f26ea9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjcyMg==", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436722", "bodyText": "done", "author": "xdavidson", "createdAt": "2020-09-10T15:30:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNDMyOA=="}], "type": "inlineReview"}, {"oid": "28ad8941bc911b01ed9e6259bdd20645e93d8d2b", "url": "https://github.com/redhataccess/pantheon/commit/28ad8941bc911b01ed9e6259bdd20645e93d8d2b", "message": "code reivew fixes", "committedDate": "2020-09-10T15:28:41Z", "type": "commit"}]}