{"pr_number": 215, "pr_title": "[master][KOGITO-1705] - Kogito Operator everywhere", "pr_createdAt": "2020-04-13T22:31:07Z", "pr_url": "https://github.com/kiegroup/kogito-examples/pull/215", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgyMTA1NQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r407821055", "bodyText": "@ricardozanini would it use maven centro or jboss nexus by default? Would be nice for instance, for the stable branch to have it set up by default, to simply try the example out.", "author": "cristianonicolai", "createdAt": "2020-04-14T02:00:10Z", "path": "decisiontable-quarkus-example/operator/decisiontable-quarkus-example.yaml", "diffHunk": "@@ -0,0 +1,15 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: decisiontable-quarkus-example\n+spec:\n+  build:\n+    #envs:\n+    # envs can be used to set variables during build\n+    #- name: MY_CUSTOM_ENV\n+    #  value: \"my value\"\n+    gitSource:\n+      contextDir: decisiontable-quarkus-example\n+      uri: 'https://github.com/kiegroup/kogito-examples'\n+    # set your maven nexus repository to speed up the build time\n+    #mavenMirrorURL: ", "originalCommit": "19594c65b3dce2a2b4597bc88cfbec7c259fc743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA5NDM0OA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408094348", "bodyText": "Will use maven central by default.", "author": "ricardozanini", "createdAt": "2020-04-14T12:25:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgyMTA1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5Nzk2Mw==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r407897963", "bodyText": "This line must be appended to the previous line?", "author": "Sgitario", "createdAt": "2020-04-14T06:35:54Z", "path": "README.md", "diffHunk": "@@ -102,3 +102,9 @@ shows timers (intermediate and boundary) that allows to introduce delays in proc\n - Rules on Quarkus with Unit: see [README.md](ruleunit-quarkus-example/README.md)\n - Process on Quarkus: see [README.md](process-quarkus-example/README.md)\n - Process on SpringBoot: see [README.md](process-springboot-example/README.md)\n+\n+## Trying the examples with the Kogito Operator\n+\n+Every example has a directory named `operator` including the YAML files to deploy it using the Kogito Operator in an OpenShift cluster.\n+Please refer to the [Kogito Documentation](https://docs.jboss.org/kogito/release/latest/html_single/#chap_kogito-deploying-on-openshift)\n+of how to install the operator to your environment in order to try it there.", "originalCommit": "19594c65b3dce2a2b4597bc88cfbec7c259fc743", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA3Mjg3Mg==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408072872", "bodyText": "@Sgitario it is appended, see https://github.com/kiegroup/kogito-examples/blob/19594c65b3dce2a2b4597bc88cfbec7c259fc743/README.md", "author": "sutaakar", "createdAt": "2020-04-14T11:46:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5Nzk2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODA3NDU1NQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408074555", "bodyText": "ok ok", "author": "Sgitario", "createdAt": "2020-04-14T11:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzg5Nzk2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzI3Mg==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408267272", "bodyText": "please add -quarkus suffix", "author": "radtriste", "createdAt": "2020-04-14T16:21:36Z", "path": "process-usertasks-custom-lifecycle-quarkus/operator/process-usertasks-custom-lifecycle-quarkus.yaml", "diffHunk": "@@ -0,0 +1,15 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: process-usertasks-custom-lifecycle", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNTk4OA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408315988", "bodyText": "I dropped because of: https://issues.redhat.com/browse/KOGITO-1595", "author": "ricardozanini", "createdAt": "2020-04-14T17:36:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzI3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYxNTkxOQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408615919", "bodyText": "can you then update the files so that there is a difference in naming ?\nfor example: process-usertasks-lifecycle-quarkus and  process-usertasks-lifecycle-springboot.\nI got the problem when trying to deploy in parallel in same namespace both quarkus and springboot yaml files, because they have the same name ...", "author": "radtriste", "createdAt": "2020-04-15T06:47:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzI3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc4OTU1Nw==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408789557", "bodyText": "Oh ok!", "author": "ricardozanini", "createdAt": "2020-04-15T12:03:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzI3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzcyMg==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408267722", "bodyText": "please add -springboot suffix", "author": "radtriste", "createdAt": "2020-04-14T16:22:11Z", "path": "process-usertasks-custom-lifecycle-springboot/operator/process-usertasks-custom-lifecycle-springboot.yaml", "diffHunk": "@@ -0,0 +1,16 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: process-usertasks-custom-lifecycle", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNjA1Nw==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408316057", "bodyText": "Same: https://issues.redhat.com/browse/KOGITO-1595", "author": "ricardozanini", "createdAt": "2020-04-14T17:37:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI2NzcyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTM5NA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408275394", "bodyText": "add -quarkus suffix", "author": "radtriste", "createdAt": "2020-04-14T16:33:04Z", "path": "process-usertasks-with-security-quarkus/operator/process-usertasks-with-security-quarkus.yaml", "diffHunk": "@@ -0,0 +1,15 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: process-usertasks-security", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4ODc4Mg==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408288782", "bodyText": "and keep naming convention", "author": "radtriste", "createdAt": "2020-04-14T16:53:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNjEyOA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408316128", "bodyText": "Same: https://issues.redhat.com/browse/KOGITO-1595", "author": "ricardozanini", "createdAt": "2020-04-14T17:37:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYxNjczNQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408616735", "bodyText": "same here with process-tasks-security-quarkus and process-tasks-security-springboot ?", "author": "radtriste", "createdAt": "2020-04-15T06:49:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc4OTM1MQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408789351", "bodyText": "OK!", "author": "ricardozanini", "createdAt": "2020-04-15T12:03:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTM5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTU5NA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408275594", "bodyText": "add -springboot suffix", "author": "radtriste", "createdAt": "2020-04-14T16:33:23Z", "path": "process-usertasks-with-security-springboot/operator/process-usertasks-with-security-springboot.yaml", "diffHunk": "@@ -0,0 +1,16 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: process-usertasks-security", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4ODkzMg==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408288932", "bodyText": "and keep naming convention", "author": "radtriste", "createdAt": "2020-04-14T16:53:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTU5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNjI0NQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408316245", "bodyText": "Same: https://issues.redhat.com/browse/KOGITO-1595", "author": "ricardozanini", "createdAt": "2020-04-14T17:37:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3NTU5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4NjEyMA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408286120", "bodyText": "please review the README, those labels have changed", "author": "radtriste", "createdAt": "2020-04-14T16:49:31Z", "path": "onboarding-example/operator/onboarding-example.yaml", "diffHunk": "@@ -0,0 +1,53 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: onboarding-service\n+spec:\n+  build:\n+    gitSource:\n+      uri: https://github.com/kiegroup/kogito-examples\n+      contextDir: onboarding-example/onboarding\n+    # set your maven nexus repository to speed up the build time\n+    #mavenMirrorURL: \n+  service:\n+    labels:\n+      onboarding: process\n+  envs:\n+    - name: NAMESPACE\n+      value: \"<namespace_where_this_app_is_deployed>\"\n+\n+---\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: hr-service\n+spec:\n+  build:\n+    gitSource:\n+      uri: https://github.com/kiegroup/kogito-examples\n+      contextDir: onboarding-example/hr\n+    # set your maven nexus repository to speed up the build time\n+    #mavenMirrorURL: \n+  service:\n+    labels:\n+      department: process", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMzMDczNA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408330734", "bodyText": "Only hr has changed", "author": "ricardozanini", "createdAt": "2020-04-14T18:00:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4NjEyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4NjczMA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408286730", "bodyText": "we are naming all our kogitoapp with the name of the folder. can we keep that in that example ?", "author": "radtriste", "createdAt": "2020-04-14T16:50:26Z", "path": "onboarding-example/operator/onboarding-example.yaml", "diffHunk": "@@ -0,0 +1,53 @@\n+apiVersion: app.kiegroup.org/v1alpha1\n+kind: KogitoApp\n+metadata:\n+  name: onboarding-service", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408287977", "bodyText": "that sentence should be in all READMEs or ?", "author": "radtriste", "createdAt": "2020-04-14T16:52:23Z", "path": "process-timer-quarkus/README.md", "diffHunk": "@@ -328,3 +327,10 @@ in both cases replace `{version}` with actual Kogito version to be used (Job Ser\n <p align=\"center\"><img src=\"docs/images/infinispanRunning.png\"></p>\n \n After that you can redo the timer queries described above\n+\n+## Deploy on OpenShift\n+\n+This sample can be ran just on OpenShift 4 instance as it requires communication with Job service.\n+Use [Kogito operator](https://github.com/kiegroup/kogito-cloud-operator/blob/master/README.md) to deploy this example and instantiate also Jobs service. Kogito operator will take care of configuring the example deployment to successfully connect to the Jobs service.\n+\n+In the [`operator`](operator) directory you'll find the custom resources needed to deploy this example on OpenShift with the Kogito Operator.", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNzI1NQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408317255", "bodyText": "Only this example has the OpenShift 4 section, I just added the operator stuff since might be confusing having only the first paragraph, which should be added in past PRs (see the springboot counterpart).", "author": "ricardozanini", "createdAt": "2020-04-14T17:39:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODYxNzM2MA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408617360", "bodyText": "and in other examples, the user may ask what is this operator folder ...\nA small piece of text could be set easily in each end or README files", "author": "radtriste", "createdAt": "2020-04-15T06:50:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc4OTA5MA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408789090", "bodyText": "We already have this note in the main README, I'll think of in a small sentence to put in each README. My main concern is to duplicate the same sentence in every file, that could be a hell to maintain in the long term.", "author": "ricardozanini", "createdAt": "2020-04-15T12:02:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg3OTMxMQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408879311", "bodyText": "What about?\n## Deploying with Kogito Operator\n\nIn the [`operator`](operator) directory you'll find the custom resources needed to deploy \nthis example on OpenShift with the \n[Kogito Operator](https://docs.jboss.org/kogito/release/latest/html_single/#chap_kogito-deploying-on-openshift).\nI'll update them all as soon as you approve this paragraph. I really don't want to go through all of them again :P", "author": "ricardozanini", "createdAt": "2020-04-15T14:19:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODk3NTI5OQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408975299", "bodyText": "good for me", "author": "radtriste", "createdAt": "2020-04-15T16:29:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4Nzk3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4OTUzMA==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408289530", "bodyText": "we deploy the serverless as a KogitoApp ?", "author": "radtriste", "createdAt": "2020-04-14T16:54:41Z", "path": "serverless-workflow-greeting-quarkus/operator/serverless-workflow-greeting-quarkus.yaml", "diffHunk": "@@ -0,0 +1,15 @@\n+apiVersion: app.kiegroup.org/v1alpha1", "originalCommit": "eec7ebb1c01a0916fd77acad2998b21c9f9209fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNzQyMQ==", "url": "https://github.com/kiegroup/kogito-examples/pull/215#discussion_r408317421", "bodyText": "Yes", "author": "ricardozanini", "createdAt": "2020-04-14T17:39:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI4OTUzMA=="}], "type": "inlineReview"}, {"oid": "d6b55bc6df876c0562e4ac1fed79acc50738e356", "url": "https://github.com/kiegroup/kogito-examples/commit/d6b55bc6df876c0562e4ac1fed79acc50738e356", "message": "[KOGITO-1705] - Kogito Operator everywhere\n\nSigned-off-by: Ricardo Zanini <zanini@redhat.com>", "committedDate": "2020-04-15T14:27:25Z", "type": "forcePushed"}, {"oid": "1055cf0602449363828dac10f8f677042af80960", "url": "https://github.com/kiegroup/kogito-examples/commit/1055cf0602449363828dac10f8f677042af80960", "message": "[KOGITO-1705] - Kogito Operator everywhere\n\nSigned-off-by: Ricardo Zanini <zanini@redhat.com>", "committedDate": "2020-04-15T17:39:04Z", "type": "commit"}, {"oid": "1055cf0602449363828dac10f8f677042af80960", "url": "https://github.com/kiegroup/kogito-examples/commit/1055cf0602449363828dac10f8f677042af80960", "message": "[KOGITO-1705] - Kogito Operator everywhere\n\nSigned-off-by: Ricardo Zanini <zanini@redhat.com>", "committedDate": "2020-04-15T17:39:04Z", "type": "forcePushed"}]}