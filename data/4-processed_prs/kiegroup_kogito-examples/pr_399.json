{"pr_number": 399, "pr_title": "KOGITO-3570 Correct settings file for release", "pr_createdAt": "2020-10-15T12:42:09Z", "pr_url": "https://github.com/kiegroup/kogito-examples/pull/399", "timeline": [{"oid": "f6de05db28e360297e19ddfb6d3acfe6a5936bb9", "url": "https://github.com/kiegroup/kogito-examples/commit/f6de05db28e360297e19ddfb6d3acfe6a5936bb9", "message": "KOGITO-3570 Correct settings file for release", "committedDate": "2020-10-15T12:40:59Z", "type": "commit"}, {"oid": "b95c47b7ab90d67601ba4853f669e60d1314ed77", "url": "https://github.com/kiegroup/kogito-examples/commit/b95c47b7ab90d67601ba4853f669e60d1314ed77", "message": "small correction", "committedDate": "2020-10-15T12:55:50Z", "type": "commit"}, {"oid": "da1456001e8495e0dfbca85591fc75ba2c52fd82", "url": "https://github.com/kiegroup/kogito-examples/commit/da1456001e8495e0dfbca85591fc75ba2c52fd82", "message": "corrected repo", "committedDate": "2020-10-15T12:57:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0MDUxMw==", "url": "https://github.com/kiegroup/kogito-examples/pull/399#discussion_r505540513", "bodyText": "May I ask why this line had to change? Did the previous configuration not work?", "author": "rsynek", "createdAt": "2020-10-15T13:26:59Z", "path": "Jenkinsfile.deploy", "diffHunk": "@@ -92,12 +92,12 @@ pipeline {\n             steps {\n                 script {\n                     echo 'Setup Maven release config'\n-                    configFileProvider([configFile(fileId: '771ff52a-a8b4-40e6-9b22-d54c7314aa1e', targetLocation: 'maven-settings.xml', variable: 'MAVEN_SETTINGS_FILE')]){\n+                    configFileProvider([configFile(fileId: '9239af2e-46e3-4ba3-8dd6-1a814fc8a56d', targetLocation: 'maven-settings.xml', variable: 'MAVEN_SETTINGS_FILE')]){\n                         sh \"echo '-B -s ${MAVEN_SETTINGS_FILE}' | tee kogito-{examples,examples-persistence,examples-events}/.mvn/maven.config\"\n                         if(params.MAVEN_DEPENDENCIES_REPOSITORY != ''){\n-                            sh \"sed -i 's|<repository>|<repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>\\\\n        <repository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|<pluginRepository>|<pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>\\\\n        <pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n-                            sh \"sed -i 's|external:\\\\*|central|g' ${MAVEN_SETTINGS_FILE}\" // Done to allow Maven to download release artificats from MAVEN_DEPENDENCIES_REPOSITORY\n+                            sh \"sed -i 's|<repositories>|<repositories><repository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></repository>|g' ${MAVEN_SETTINGS_FILE}\"\n+                            sh \"sed -i 's|<pluginRepositories>|<pluginRepositories><pluginRepository><id>staging</id><name>Staging Repository</name><url>${params.MAVEN_DEPENDENCIES_REPOSITORY}</url><layout>default</layout><snapshots><enabled>true</enabled></snapshots><releases><enabled>true</enabled></releases></pluginRepository>|g' ${MAVEN_SETTINGS_FILE}\"\n+                            sh \"sed -i 's|external:\\\\*|external:*,!staging|g' ${MAVEN_SETTINGS_FILE}\" // Done to allow Maven to download release artificats from MAVEN_DEPENDENCIES_REPOSITORY", "originalCommit": "da1456001e8495e0dfbca85591fc75ba2c52fd82", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0NjE2Nw==", "url": "https://github.com/kiegroup/kogito-examples/pull/399#discussion_r505546167", "bodyText": "nope because the new settings.xml file has many repository and pluginRepository tags and so we were introducing the change for each and the new repository tags are with different ids and not central ...\nThis new change is more clear and safe.", "author": "radtriste", "createdAt": "2020-10-15T13:34:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0MDUxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0OTkwOA==", "url": "https://github.com/kiegroup/kogito-examples/pull/399#discussion_r505549908", "bodyText": "moreover, we don't have to worry much in case the file is changing ;)", "author": "radtriste", "createdAt": "2020-10-15T13:39:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU0MDUxMw=="}], "type": "inlineReview"}, {"oid": "21ec19983b18391f852e83354233d3eefdd11d74", "url": "https://github.com/kiegroup/kogito-examples/commit/21ec19983b18391f852e83354233d3eefdd11d74", "message": "integrating shared lib change", "committedDate": "2020-10-15T13:41:57Z", "type": "commit"}]}