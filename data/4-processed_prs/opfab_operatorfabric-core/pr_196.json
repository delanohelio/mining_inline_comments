{"pr_number": 196, "pr_title": "Oc 549", "pr_createdAt": "2020-02-10T12:07:04Z", "pr_url": "https://github.com/opfab/operatorfabric-core/pull/196", "timeline": [{"oid": "bde6db6271c886d45c1aaab5075c71f3ff0b6e7c", "url": "https://github.com/opfab/operatorfabric-core/commit/bde6db6271c886d45c1aaab5075c71f3ff0b6e7c", "message": "[OC-549] Return 404 when a non existing bundle is requested\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-10T10:17:04Z", "type": "commit"}, {"oid": "65ca009377d458f4829455e6adf85335e365e746", "url": "https://github.com/opfab/operatorfabric-core/commit/65ca009377d458f4829455e6adf85335e365e746", "message": "Merge branch 'master' into OC-549", "committedDate": "2020-02-10T11:59:14Z", "type": "commit"}, {"oid": "3f9fc77681610fe37fe87d887704ffee8fb5a83f", "url": "https://github.com/opfab/operatorfabric-core/commit/3f9fc77681610fe37fe87d887704ffee8fb5a83f", "message": "[OC-549] Added release note\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-10T12:04:25Z", "type": "commit"}, {"oid": "27d2c94682014404c49a1c9d367f4b895d75beca", "url": "https://github.com/opfab/operatorfabric-core/commit/27d2c94682014404c49a1c9d367f4b895d75beca", "message": "[OC-549] Re-added unit test. Removed erronous unit-test\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-10T12:49:14Z", "type": "commit"}, {"oid": "8d520d76ec4fa8f885558526e278919d36119ec9", "url": "https://github.com/opfab/operatorfabric-core/commit/8d520d76ec4fa8f885558526e278919d36119ec9", "message": "Moved OC-549 test case\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-10T13:08:24Z", "type": "commit"}, {"oid": "261655a6a40168e8e69b2337e402aa321998c433", "url": "https://github.com/opfab/operatorfabric-core/commit/261655a6a40168e8e69b2337e402aa321998c433", "message": "OC 663 - 555 : Resolution of translation and infinite loop problems", "committedDate": "2020-02-11T07:20:54Z", "type": "commit"}, {"oid": "c7b0c364267287ae88bfde7b0d285ee3208ed12b", "url": "https://github.com/opfab/operatorfabric-core/commit/c7b0c364267287ae88bfde7b0d285ee3208ed12b", "message": "Merge pull request #194 from opfab/OC-663\n\nOC-663 Partial resolution of translation problem", "committedDate": "2020-02-11T12:53:52Z", "type": "commit"}, {"oid": "f6e0ffc8773794d52257ca7f61c1d9810d79025a", "url": "https://github.com/opfab/operatorfabric-core/commit/f6e0ffc8773794d52257ca7f61c1d9810d79025a", "message": "[OC-700] Skip sonar for external PRs", "committedDate": "2020-02-11T14:01:57Z", "type": "commit"}, {"oid": "f86b5d8d0c8f248f68a025db591ce0f4402e3f11", "url": "https://github.com/opfab/operatorfabric-core/commit/f86b5d8d0c8f248f68a025db591ce0f4402e3f11", "message": "Merge pull request #197 from opfab/OC-700\n\n[OC-700] Skip sonar for external PRs", "committedDate": "2020-02-11T14:28:51Z", "type": "commit"}, {"oid": "025a5a09d35622cbff27b4dc90d0a11e680b4572", "url": "https://github.com/opfab/operatorfabric-core/commit/025a5a09d35622cbff27b4dc90d0a11e680b4572", "message": "[OC-549] Return 404 when a non existing bundle is requested\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-11T15:12:31Z", "type": "commit"}, {"oid": "60dbcc8d42fcaf132e3216bea39e33d54372f505", "url": "https://github.com/opfab/operatorfabric-core/commit/60dbcc8d42fcaf132e3216bea39e33d54372f505", "message": "[OC-549] Added release note\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-11T15:12:31Z", "type": "commit"}, {"oid": "8b88ea745a86007b6676f61423354e2acda519ad", "url": "https://github.com/opfab/operatorfabric-core/commit/8b88ea745a86007b6676f61423354e2acda519ad", "message": "[OC-549] Re-added unit test. Removed erronous unit-test\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-11T15:12:31Z", "type": "commit"}, {"oid": "9718a2af88c9a1eaf5adc4d629170a31c7322b89", "url": "https://github.com/opfab/operatorfabric-core/commit/9718a2af88c9a1eaf5adc4d629170a31c7322b89", "message": "Moved OC-549 test case\n\nSigned-off-by: Jeroen Gommans <jeroen@anjersoftwaredesign.nl>", "committedDate": "2020-02-11T15:12:31Z", "type": "commit"}, {"oid": "782ebef5d50e51fbf2248c396451861fc3b56e62", "url": "https://github.com/opfab/operatorfabric-core/commit/782ebef5d50e51fbf2248c396451861fc3b56e62", "message": "Rebase", "committedDate": "2020-02-11T15:13:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NzY0Mw==", "url": "https://github.com/opfab/operatorfabric-core/pull/196#discussion_r377747643", "bodyText": "Everything looks good, and I do get the 404 status when requesting a third that doesn't exist, but not the message?\nHere's what I get if I do a GET on http://localhost:2100/third/DoesntExist using PostMan:\n{\n    \"timestamp\": \"2020-02-11T16:07:52.565+0000\",\n    \"status\": 404,\n    \"error\": \"Not Found\",\n    \"message\": \"Not Found\",\n    \"path\": \"/third/DoesntExist\"\n}\n\nI can't figure out what that is... If I try another similar method and do a GET on : http://localhost:2103/users/doesntexist/settings\nI do get the correct message:\n{\n    \"status\": \"NOT_FOUND\",\n    \"message\": \"User setting for user doesntexist not found\"\n}\n\nI've compared the two but can't find the difference ?", "author": "AlexGuironnetRTE", "createdAt": "2020-02-11T16:27:39Z", "path": "services/core/thirds/src/main/java/org/lfenergy/operatorfabric/thirds/controllers/ThirdsController.java", "diffHunk": "@@ -90,7 +90,14 @@ public ThirdsController(ThirdsService service) {\n \n     @Override\n     public Third getThird(HttpServletRequest request, HttpServletResponse response, @PathVariable String thirdName, String apiVersion) {\n-        return service.fetch(thirdName, apiVersion);\n+        Third third = service.fetch(thirdName, apiVersion);\n+        if (third == null) {\n+            throw new ApiErrorException(ApiError.builder()\n+                    .status(HttpStatus.NOT_FOUND)\n+                    .message(String.format(\"Third with name %s was not found\", thirdName))", "originalCommit": "782ebef5d50e51fbf2248c396451861fc3b56e62", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzg2NjAwMg==", "url": "https://github.com/opfab/operatorfabric-core/pull/196#discussion_r377866002", "bodyText": "Good find and interesting!\nIf I issue a curl it seems to work though:\ncurl -v \"http://localhost:2100/thirds/DoesNotExist\" -H  \"accept: application/json\" -H \"Authorization:Bearer $token\"\nI get the following response (removed uninterested parts):\n < HTTP/1.1 404 Not Found\n<...>\n* Connection #0 to host localhost left intact {\"status\":\"NOT_FOUND\",\"message\":\"Third with name DoesNotExist was not found\"}", "author": "JeroenGommans", "createdAt": "2020-02-11T19:58:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NzY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA3NzIzNw==", "url": "https://github.com/opfab/operatorfabric-core/pull/196#discussion_r378077237", "bodyText": "I think you made a mistake in the URL by omitting the last s in http://localhost:2100/thirds", "author": "JeroenGommans", "createdAt": "2020-02-12T07:27:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NzY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODEzMjg2MA==", "url": "https://github.com/opfab/operatorfabric-core/pull/196#discussion_r378132860", "bodyText": "Hi Jeroen, you're completely right, my mistake! Sorry!", "author": "AlexGuironnetRTE", "createdAt": "2020-02-12T09:34:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc0NzY0Mw=="}], "type": "inlineReview"}]}