{"pr_number": 471, "pr_title": "[OC-967] Front : view all user entity responses", "pr_createdAt": "2020-09-15T00:24:16Z", "pr_url": "https://github.com/opfab/operatorfabric-core/pull/471", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNzUxNw==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488527517", "bodyText": "EntityColor const never used --> to remove", "author": "freddidierRTE", "createdAt": "2020-09-15T09:38:19Z", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -69,12 +77,20 @@ const enum ResponseMsgColor {\n     GREEN = 'alert-success',\n     RED = 'alert-danger'\n }\n+const enum EntityMsgColor {\n+    GREEN = 'green',\n+    YELLOW = 'yellow'\n+}\n+const enum EntityColor {", "originalCommit": "9738a7f78228db766af4ab40e3326b3a981c91e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyNzcxNw==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488527717", "bodyText": "entityMessge never used --> to remove", "author": "freddidierRTE", "createdAt": "2020-09-15T09:38:40Z", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -85,20 +101,25 @@ export class DetailComponent implements OnChanges, OnInit, OnDestroy, AfterViewC\n     public active = false;\n     unsubscribe$: Subject<void> = new Subject<void>();\n     readonly hrefsOfCssLink = new Array<SafeResourceUrl>();\n+    private _listEntitiesToRespond = new Array<EntityMessage>();\n     private _htmlContent: SafeHtml;\n     private _userContext: UserContext;\n     private _lastCards$: Observable<LightCard[]>;\n     private _responseData: Response;\n     private _hasPrivilegeToRespond = false;\n     private _acknowledgementAllowed: boolean;\n-    lttdExpiredIsTrue:boolean;\n-    message: Message = {display: false, text: undefined, color: undefined};\n+    lttdExpiredIsTrue: boolean;\n+    message: Message = { display: false, text: undefined, color: undefined };\n+    entityMessge: EntityMessage = { name: undefined, color: EntityMsgColor.YELLOW };", "originalCommit": "9738a7f78228db766af4ab40e3326b3a981c91e7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyODU3NA==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488528574", "bodyText": "You introduce here a regression , you must keep method isButtonActivated instead instead of  isArchivePageType", "author": "freddidierRTE", "createdAt": "2020-09-15T09:39:59Z", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.ts", "diffHunk": "@@ -182,19 +203,18 @@ export class DetailComponent implements OnChanges, OnInit, OnDestroy, AfterViewC\n         this.tchekLttdExpired();\n     }\n \n-    tchekLttdExpired():void {\n-        this.lttdExpiredIsTrue =  (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n+    tchekLttdExpired(): void {\n+        this.lttdExpiredIsTrue = (this.card.lttd != null && Math.floor((this.card.lttd - new Date().getTime()) / 1000) <= 0);\n     }\n \n     get i18nPrefix() {\n         return `${this.card.process}.${this.card.processVersion}.`;\n     }\n \n-    get isButtonsActivated() {\n-        return !((this._appService.pageType === PageType.ARCHIVE) || (this._appService.pageType === PageType.CALENDAR));\n+    get isArchivePageType() {\n+        return this._appService.pageType === PageType.ARCHIVE;", "originalCommit": "9738a7f78228db766af4ab40e3326b3a981c91e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1MDM2MQ==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488850361", "bodyText": "?", "author": "taoufikbermaki", "createdAt": "2020-09-15T17:41:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyODU3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyOTQ0NQ==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488529445", "bodyText": "You introduce here a regression , you must keep isButtonsActivated instead of isArchivePageType", "author": "freddidierRTE", "createdAt": "2020-09-15T09:40:55Z", "path": "ui/main/src/app/modules/cards/components/detail/detail.component.html", "diffHunk": "@@ -9,21 +9,33 @@\n \n \n <link *ngFor=\"let cssUrl of hrefsOfCssLink\" [href]=\"cssUrl\" rel=\"stylesheet\" type=\"text/css\">\n+<div class=\"my-3\">\n+  <table>\n+    <tr>\n+      <td> <span class=\"h4\" translate>response.answers</span> : </td>\n+      <td *ngFor=\"let entity of listEntitiesToRespond; let isLast = last\"\n+        [ngStyle]=\"{'color': entity.color,'border-right': (!isLast) ? '3px solid white':'','width': '150px','font-size': '20px','text-align': 'center'}\">\n+        {{entity.name}}\n+      </td>\n+    </tr>\n+  </table>\n+</div>\n <div id=\"div-card-template\" [hidden]=\"!active\" [innerHtml]=\"htmlContent\"></div>\n \n+\n <div class=\"my-3\">\n-  <div id='div-detail-msg' *ngIf='message.display' class=\"alert alert-dismissible fade show text-center {{message.color}}\"\n-      role=\"alert\" translate>\n+  <div id='div-detail-msg' *ngIf='message.display'\n+    class=\"alert alert-dismissible fade show text-center {{message.color}}\" role=\"alert\" translate>\n     {{message.text}}\n     <button type=\"button\" class=\"close\" aria-label=\"Close\" (click)=\"message.display = false\">\n       <span aria-hidden=\"true\">&times;</span>\n     </button>\n   </div>\n \n-  <div id='div-detail-btn' *ngIf=\"isButtonsActivated\" class=\"mb-3\">\n-    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists'\n-      translate [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n-            (click)='submitResponse()'>{{btnText}}</button>\n+  <div id='div-detail-btn' *ngIf=\"!isArchivePageType\" class=\"mb-3\">\n+    <button class=\"btn mr-3 {{btnColor}}\" style=\"float: right;\" *ngIf='responseDataExists' translate\n+      [translateParams]=\"responseDataParameters\" [disabled]='lttdExpiredIsTrue || !isActionEnabled'\n+      (click)='submitResponse()'>{{btnText}}</button>", "originalCommit": "9738a7f78228db766af4ab40e3326b3a981c91e7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODg1MDQxMw==", "url": "https://github.com/opfab/operatorfabric-core/pull/471#discussion_r488850413", "bodyText": "?", "author": "taoufikbermaki", "createdAt": "2020-09-15T17:41:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODUyOTQ0NQ=="}], "type": "inlineReview"}, {"oid": "1f892a8cb8bf2db0b92af217300f2240576f8520", "url": "https://github.com/opfab/operatorfabric-core/commit/1f892a8cb8bf2db0b92af217300f2240576f8520", "message": "[OC-967] Front : view all user entity responses", "committedDate": "2020-09-16T18:14:53Z", "type": "commit"}, {"oid": "1f892a8cb8bf2db0b92af217300f2240576f8520", "url": "https://github.com/opfab/operatorfabric-core/commit/1f892a8cb8bf2db0b92af217300f2240576f8520", "message": "[OC-967] Front : view all user entity responses", "committedDate": "2020-09-16T18:14:53Z", "type": "forcePushed"}, {"oid": "e226b6981b96bd66925fb0f41e276c2561615ef0", "url": "https://github.com/opfab/operatorfabric-core/commit/e226b6981b96bd66925fb0f41e276c2561615ef0", "message": "[OC-967] Change color to orange for entity name", "committedDate": "2020-09-17T09:27:33Z", "type": "commit"}]}