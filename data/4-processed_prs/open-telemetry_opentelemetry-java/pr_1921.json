{"pr_number": 1921, "pr_title": "Update opentelemetry-proto to latest version.", "pr_createdAt": "2020-10-29T16:26:34Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921", "timeline": [{"oid": "c7129b720d487cbdbf85cb7700386c525ae8d5e2", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c7129b720d487cbdbf85cb7700386c525ae8d5e2", "message": "Update opentelemetry-proto to latest version.", "committedDate": "2020-10-29T16:25:42Z", "type": "commit"}, {"oid": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ebc8f7b6c66b4db04c14a9c2933d49860e0743ed", "message": "Fix spotlessCheck", "committedDate": "2020-10-29T16:31:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514409244", "bodyText": "I think there's a little more we need to do here. See the comments in the proto:  https://github.com/open-telemetry/opentelemetry-proto/blob/master/opentelemetry/proto/trace/v1/trace.proto#L239-L249", "author": "jkwatson", "createdAt": "2020-10-29T16:45:41Z", "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -172,7 +172,7 @@ static Status toStatusProto(SpanData.Status status) {\n     // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;\n     if (status.getCanonicalCode() == StatusCode.ERROR) {\n-      protoStatusCode = Status.StatusCode.STATUS_CODE_UNKNOWN_ERROR;\n+      protoStatusCode = Status.StatusCode.STATUS_CODE_ERROR;", "originalCommit": "ebc8f7b6c66b4db04c14a9c2933d49860e0743ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQzMzcxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514433716", "bodyText": "When status.getCanonicalCode() is StatusCode.UNSET, the protoStatusCode  should be set to Status.StatusCode.STATUS_CODE_OK. Is that right?", "author": "dengliming", "createdAt": "2020-10-29T17:20:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4MTMzNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514481334", "bodyText": "I think we're also supposed to be setting the deprecated_code as well, if I read those comments correctly.", "author": "jkwatson", "createdAt": "2020-10-29T18:34:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDg2NDYzOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514864638", "bodyText": "Can you help to confirm again? Thanks.", "author": "dengliming", "createdAt": "2020-10-30T05:02:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzc2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515227769", "bodyText": "looks good!", "author": "jkwatson", "createdAt": "2020-10-30T16:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQwOTI0NA=="}], "type": "inlineReview"}, {"oid": "14d78343af893c8d90584668bfd9875c3c66b610", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/14d78343af893c8d90584668bfd9875c3c66b610", "message": "set deprecated_code", "committedDate": "2020-10-30T04:45:19Z", "type": "commit"}, {"oid": "2f65052f7d6782e8e97925196740a29e174828ef", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2f65052f7d6782e8e97925196740a29e174828ef", "message": "set deprecated_code", "committedDate": "2020-10-30T05:01:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r514950917", "bodyText": "I think there is a mistake here: For UNSET, we should use UNSET, not OK.", "author": "Oberon00", "createdAt": "2020-10-30T08:54:47Z", "path": "exporters/otlp/src/main/java/io/opentelemetry/exporters/otlp/SpanAdapter.java", "diffHunk": "@@ -169,12 +171,16 @@ static Span toProtoSpan(SpanData spanData) {\n   }\n \n   static Status toStatusProto(SpanData.Status status) {\n-    // todo: Update this when the proto definitions are updated to include UNSET and ERROR\n     Status.StatusCode protoStatusCode = Status.StatusCode.STATUS_CODE_OK;", "originalCommit": "14d78343af893c8d90584668bfd9875c3c66b610", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAwNTUzMw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515005533", "bodyText": "Thanks. Can you review again?", "author": "dengliming", "createdAt": "2020-10-30T10:37:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTAxMTYxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515011616", "bodyText": "Thanks, looks good now!", "author": "Oberon00", "createdAt": "2020-10-30T10:49:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk1MDkxNw=="}], "type": "inlineReview"}, {"oid": "4d336cc67bfae68b7d1ac14d4b23674a122678f4", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4d336cc67bfae68b7d1ac14d4b23674a122678f4", "message": "Fix review", "committedDate": "2020-10-30T10:35:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzM4OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515227388", "bodyText": "this line of code makes me laugh, with the comment.  \ud83d\ude06", "author": "jkwatson", "createdAt": "2020-10-30T16:35:48Z", "path": "exporters/otlp/src/test/java/io/opentelemetry/exporters/otlp/SpanAdapterTest.java", "diffHunk": "@@ -109,17 +112,35 @@ void toProtoSpanKind() {\n   }\n \n   @Test\n+  @SuppressWarnings(\"deprecation\") // setDeprecatedCode is deprecated.", "originalCommit": "4d336cc67bfae68b7d1ac14d4b23674a122678f4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTI3OTkzOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1921#discussion_r515279938", "bodyText": "yes. without this line comment, the java compile will not pass.  : )", "author": "dengliming", "createdAt": "2020-10-30T17:53:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIyNzM4OA=="}], "type": "inlineReview"}]}