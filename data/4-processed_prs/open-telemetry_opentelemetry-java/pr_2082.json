{"pr_number": 2082, "pr_title": "Stub out nebula configuration if .git doesn't exist.", "pr_createdAt": "2020-11-16T08:43:13Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082", "timeline": [{"oid": "d874ce79aeb110e3521df7f34016a3ecee1311cf", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/d874ce79aeb110e3521df7f34016a3ecee1311cf", "message": "Stub out nebula configuration if .git doesn't exist.", "committedDate": "2020-11-16T08:42:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3NzUxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082#discussion_r523977516", "bodyText": "This looks a bit brittle. I think something like project.hasProperty('release') would be better.", "author": "Oberon00", "createdAt": "2020-11-16T08:46:56Z", "path": "build.gradle", "diffHunk": "@@ -14,17 +14,24 @@ ext {\n     opentelemetryProjects = subprojects - project(\":opentelemetry-bom\")\n }\n \n-release {\n-    defaultVersionStrategy = Strategies.getSNAPSHOT()\n-}\n+// Nebula plugin will not configure if .git doesn't exist, let's allow building on it by stubbing it\n+// out.\n+def releaseTask\n+if (file('.git').exists()) {", "originalCommit": "d874ce79aeb110e3521df7f34016a3ecee1311cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3ODQwNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082#discussion_r523978406", "bodyText": "I think we'll always have .git - on the flip side, I used this check because I want to explicitly handle it being missing, without accidentally handling a case where .git is actually there and release isn't for whatever reason which isn't ever expected.", "author": "anuraaga", "createdAt": "2020-11-16T08:48:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3NzUxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3OTYyNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082#discussion_r523979624", "bodyText": "I just checked and it is at least there in a git worktree. I guess it is also there when checked out as git submodule so probably you are right. But there might be cases I haven't thought of \ud83d\ude03", "author": "Oberon00", "createdAt": "2020-11-16T08:50:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzk3NzUxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUwMDAzMw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082#discussion_r524500033", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // Nebula plugin will not configure if .git doesn't exist, let's allow building on it by stubbing it\n          \n          \n            \n            // out.\n          \n          \n            \n            // Nebula plugin will not configure if .git doesn't exist, let's allow building on it by stubbing it\n          \n          \n            \n            // out. This supports building from the zip archive downloaded from GitHub.", "author": "trask", "createdAt": "2020-11-16T18:55:46Z", "path": "build.gradle", "diffHunk": "@@ -14,17 +14,24 @@ ext {\n     opentelemetryProjects = subprojects - project(\":opentelemetry-bom\")\n }\n \n-release {\n-    defaultVersionStrategy = Strategies.getSNAPSHOT()\n-}\n+// Nebula plugin will not configure if .git doesn't exist, let's allow building on it by stubbing it\n+// out.", "originalCommit": "d874ce79aeb110e3521df7f34016a3ecee1311cf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc5MDc0Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2082#discussion_r524790742", "bodyText": "Nice!", "author": "anuraaga", "createdAt": "2020-11-17T00:11:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDUwMDAzMw=="}], "type": "inlineReview"}, {"oid": "4ad27b867ac753f42e7b0c3d9b58640d5e055ffd", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/4ad27b867ac753f42e7b0c3d9b58640d5e055ffd", "message": "Update build.gradle\n\nCo-authored-by: Trask Stalnaker <trask.stalnaker@gmail.com>", "committedDate": "2020-11-17T00:10:56Z", "type": "commit"}]}