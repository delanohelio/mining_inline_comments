{"pr_number": 1550, "pr_title": "Document TraceConfig", "pr_createdAt": "2020-08-18T14:29:14Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550", "timeline": [{"oid": "c79d557514353def8c0d709f53642f7b42f858a1", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/c79d557514353def8c0d709f53642f7b42f858a1", "message": "#1496 Document TraceConfig\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-08-18T14:28:46Z", "type": "commit"}, {"oid": "e5adeb6d02e996b7a4f8fadab812e0688a3a0166", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e5adeb6d02e996b7a4f8fadab812e0688a3a0166", "message": "fix missing character\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-08-18T14:39:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzQxOQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472257419", "bodyText": "extra } after Link", "author": "iNikem", "createdAt": "2020-08-18T14:51:11Z", "path": "QUICKSTART.md", "diffHunk": "@@ -402,6 +403,43 @@ tracerProvider.addSpanProcessor(BatchSpanProcessor.newBuilder(\n ).build());\n ```\n \n+### TraceConfig\n+\n+`TraceConfig` associated with `TracerSdkProvider` can be updated via system properties, \n+environment variables and builder `set*` methods.  \n+\n+```java\n+// Get TraceConfig associated with TracerSdkProvider \n+TraceConfig traceConfig = OpenTelemetrySdk.getTracerProvider().getActiveTraceConfig();\n+\n+// Get TraceConfig Builder\n+Builder builder = traceConfig.toBuilder();\n+\n+// Read configuration options from system properties\n+builder.readSystemProperties();\n+\n+// Read configuration options from environment variables\n+builder.readEnvironmentVariables()\n+\n+// Set options via builder.set* methods, e.g.\n+builder.setMaxNumberOfLinks(10);\n+\n+// Update the resulting TraceConfig instance\n+OpenTelemetrySdk.getTracerProvider().updateActiveTraceConfig(builder.build());\n+```\n+\n+Supported system properties and environment variables:\n+\n+| System property                  | Environment variable             | Purpose                                            | \n+|----------------------------------|----------------------------------|----------------------------------------------------|       \n+| otel.config.sampler.probability  | OTEL_CONFIG_SAMPLER_PROBABILITY  | Sampler which is used when constructing a new span |                        \n+| otel.config.max.attrs            | OTEL_CONFIG_MAX_ATTRS            | Max number of attributes per span                  |                        \n+| otel.config.max.events           | OTEL_CONFIG_MAX_EVENTS           | Max number of Events per span                      |                        \n+| otel.config.max.links            | OTEL_CONFIG_MAX_LINKS            | Max number of Link} entries per span               |", "originalCommit": "e5adeb6d02e996b7a4f8fadab812e0688a3a0166", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2NTk2OA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472265968", "bodyText": "fixed", "author": "malafeev", "createdAt": "2020-08-18T15:02:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzQxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzgzMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472257831", "bodyText": "For all MAX attributes it would be useful to say what happens if that limit is exceeded.", "author": "iNikem", "createdAt": "2020-08-18T14:51:42Z", "path": "QUICKSTART.md", "diffHunk": "@@ -402,6 +403,43 @@ tracerProvider.addSpanProcessor(BatchSpanProcessor.newBuilder(\n ).build());\n ```\n \n+### TraceConfig\n+\n+`TraceConfig` associated with `TracerSdkProvider` can be updated via system properties, \n+environment variables and builder `set*` methods.  \n+\n+```java\n+// Get TraceConfig associated with TracerSdkProvider \n+TraceConfig traceConfig = OpenTelemetrySdk.getTracerProvider().getActiveTraceConfig();\n+\n+// Get TraceConfig Builder\n+Builder builder = traceConfig.toBuilder();\n+\n+// Read configuration options from system properties\n+builder.readSystemProperties();\n+\n+// Read configuration options from environment variables\n+builder.readEnvironmentVariables()\n+\n+// Set options via builder.set* methods, e.g.\n+builder.setMaxNumberOfLinks(10);\n+\n+// Update the resulting TraceConfig instance\n+OpenTelemetrySdk.getTracerProvider().updateActiveTraceConfig(builder.build());\n+```\n+\n+Supported system properties and environment variables:\n+\n+| System property                  | Environment variable             | Purpose                                            | \n+|----------------------------------|----------------------------------|----------------------------------------------------|       \n+| otel.config.sampler.probability  | OTEL_CONFIG_SAMPLER_PROBABILITY  | Sampler which is used when constructing a new span |                        \n+| otel.config.max.attrs            | OTEL_CONFIG_MAX_ATTRS            | Max number of attributes per span                  |                        ", "originalCommit": "e5adeb6d02e996b7a4f8fadab812e0688a3a0166", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI2NzYxNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472267616", "bodyText": "javadoc doesn't say what happens, I suppose exceeded should be dropped.", "author": "malafeev", "createdAt": "2020-08-18T15:04:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzgzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI3MTk4Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472271987", "bodyText": "Yes, extra attributes/links/events will be dropped. Too long values will be truncated.", "author": "iNikem", "createdAt": "2020-08-18T15:10:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzgzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI3NjY3Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472276673", "bodyText": "updated", "author": "malafeev", "createdAt": "2020-08-18T15:17:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI1NzgzMQ=="}], "type": "inlineReview"}, {"oid": "782a61bb045fdacf0481d586bb8379f75e1f41a9", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/782a61bb045fdacf0481d586bb8379f75e1f41a9", "message": "get rid of }\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-08-18T15:02:05Z", "type": "commit"}, {"oid": "b20aa2e9915a0c164404c7ad184e6a4a4fce1477", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/b20aa2e9915a0c164404c7ad184e6a4a4fce1477", "message": "for all MAX attributes added what happens if that limit is exceeded.\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-08-18T15:17:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQwOTc2Mw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472409763", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `TraceConfig` associated with `TracerSdkProvider` can be updated via system properties, \n          \n          \n            \n            The `TraceConfig` associated with a `TracerSdkProvider` can be updated via system properties,", "author": "jkwatson", "createdAt": "2020-08-18T18:51:02Z", "path": "QUICKSTART.md", "diffHunk": "@@ -402,6 +403,43 @@ tracerProvider.addSpanProcessor(BatchSpanProcessor.newBuilder(\n ).build());\n ```\n \n+### TraceConfig\n+\n+`TraceConfig` associated with `TracerSdkProvider` can be updated via system properties, ", "originalCommit": "b20aa2e9915a0c164404c7ad184e6a4a4fce1477", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjU4Mjc4NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1550#discussion_r472582785", "bodyText": "done", "author": "malafeev", "createdAt": "2020-08-19T01:29:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjQwOTc2Mw=="}], "type": "inlineReview"}, {"oid": "a28297daf8fd44453e442a66b8a15b935eccbca5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a28297daf8fd44453e442a66b8a15b935eccbca5", "message": "add defaults and rewording\n\nSigned-off-by: Sergei Malafeev <sergei@malafeev.org>", "committedDate": "2020-08-19T01:29:43Z", "type": "commit"}]}