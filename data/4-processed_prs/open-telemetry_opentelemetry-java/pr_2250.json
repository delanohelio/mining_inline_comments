{"pr_number": 2250, "pr_title": "Another option for release versioning proposal", "pr_createdAt": "2020-12-09T21:36:35Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250", "timeline": [{"oid": "7adfa5d72c9ceb3386c39106a72efc7afffc8594", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/7adfa5d72c9ceb3386c39106a72efc7afffc8594", "message": "Add rationale and description of the release and versioning strategy.", "committedDate": "2020-12-09T16:30:31Z", "type": "commit"}, {"oid": "2c22e6f06f1686a11157ff8db58a6f03204c3f19", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2c22e6f06f1686a11157ff8db58a6f03204c3f19", "message": "typo fix", "committedDate": "2020-12-09T16:30:32Z", "type": "commit"}, {"oid": "a8224412bccc258870e0e9a86d32aa07fd94cd8f", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a8224412bccc258870e0e9a86d32aa07fd94cd8f", "message": "alternate version of the versioning strategy that tags the version rather than the artifact.", "committedDate": "2020-12-09T21:32:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MjAwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539682002", "bodyText": "And context itself correct?", "author": "bogdandrutu", "createdAt": "2020-12-09T22:03:41Z", "path": "docs/rationale.md", "diffHunk": "@@ -23,4 +23,72 @@ try (Scope scope = TracingContextUtils.currentContextWith(span)) {\n ```\n \n It would not be possible to call `recordException` if `span` was also using try-with-resources.\n-Because this is a common usage for spans, we do not support try-with-resources.\n\\ No newline at end of file\n+Because this is a common usage for spans, we do not support try-with-resources.\n+\n+\n+## Versioning and Releases\n+\n+### Assumptions\n+\n+- This project uses semver v2, as does the rest of OpenTelemetry.\n+\n+### Goals\n+\n+- API Stability: \n+    - Once the API for a given signal (spans, logs, metrics, baggage) has been officially released, code instrumented with that API module will \n+function, *with no recompilation required*, with any API+SDK that has the same major version, and equal or greater minor or patch version. \n+    - For example, libraries that are instrumented with `opentelemetry-api-trace:1.0.1` will function, at runtime with \n+SDK library `opentelemetry-sdk-trace:1.11.33` plus `opentelemetry-api-trace:1.11.33`. \n+    - We call this requirement the \"ABI\" compatibility requirement for \"Application Binary Interface\" compatibility. \n+- SDK Stability:\n+    - Public portions of the SDK (constructors, configuration, und-user interfaces) must remain backwards compatible.\n+        - Precisely what this includes has yet to be delineated. \n+    - Internal interfaces are allowed to break.\n+\n+### Methods\n+\n+- Mature signals\n+    - API modules for mature (i.e. released) signals will be transitive dependencies of the `opentelemetry-api` module.\n+    - Methods for accessing mature APIs will be added, as appropriate to the `OpenTelemetry` interface.\n+    - SDK modules for mature (i.e. released) signals will be transitive dependencies of the `opentelemetry-sdk` module.\n+    - Configuration options for the SDK modules for mature signals will be exposed, as appropriate, on the `OpenTelemetrySdk` class.\n+    - Modules for these mature signals will be included in the opentelemetry-bom to ensure that users runtime dependencies are kept in sync.\n+    - Mixing and matching runtime API and SDK versions, eg. by avoiding use of the BOM, will not be supported by this project.\n+    - Once a public API (either in the official API or in the SDK) has been released, we will endeavor to support that API in perpetuity.\n+\n+- Immature or experimental signals\n+    - API modules for immature signals will not be transitive dependencies of the `opentelemetry-api` module.\n+    - API modules will be versioned with an \"-alpha\" suffix to make it abundantly clear that depending on them is at your own risk.\n+    - API modules for immature signals will be co-versioned along with mature API modules, with the added suffix.\n+    - The java packages for immature APIs will be used as if they were mature signals. This will enable users to easily transition from immature to \n+    mature usage, without having to change imports. \n+    - SDK modules for immature signals will also be versioned with an \"-alpha\" suffix, in parallel to their API modules.\n+    \n+### Examples\n+\n+Purely for illustration purposes, not intended to represent actual releases:\n+\n+- `v1.0.0` release:\n+    - `io.opentelemetry:opentelemetry-api:1.0.0`\n+        - Contains APIs for tracing, baggage, propagators (via the context dependency)", "originalCommit": "a8224412bccc258870e0e9a86d32aa07fd94cd8f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4Njk4NA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539686984", "bodyText": "yes...this was illustrative, not intended to be complete or 100% accurate.", "author": "jkwatson", "createdAt": "2020-12-09T22:12:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MjAwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4ODUwMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539688502", "bodyText": "added for clarity, though", "author": "jkwatson", "createdAt": "2020-12-09T22:15:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MjAwMg=="}], "type": "inlineReview"}, {"oid": "2bbbcb9d52bf0c0ec20e6b1c4e856211088b0eb7", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2bbbcb9d52bf0c0ec20e6b1c4e856211088b0eb7", "message": "add context for clarity", "committedDate": "2020-12-09T22:15:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTczODk5OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539738999", "bodyText": "I guess this is referring to interfaces in the SDK that have the public modifier but don't fall into the above bucket. While I know Precisely what this includes has yet to be delineated.  do you have any example of it? BatchSpanProcessor?", "author": "anuraaga", "createdAt": "2020-12-09T23:58:32Z", "path": "docs/rationale.md", "diffHunk": "@@ -23,4 +23,72 @@ try (Scope scope = TracingContextUtils.currentContextWith(span)) {\n ```\n \n It would not be possible to call `recordException` if `span` was also using try-with-resources.\n-Because this is a common usage for spans, we do not support try-with-resources.\n\\ No newline at end of file\n+Because this is a common usage for spans, we do not support try-with-resources.\n+\n+\n+## Versioning and Releases\n+\n+### Assumptions\n+\n+- This project uses semver v2, as does the rest of OpenTelemetry.\n+\n+### Goals\n+\n+- API Stability: \n+    - Once the API for a given signal (spans, logs, metrics, baggage) has been officially released, code instrumented with that API module will \n+function, *with no recompilation required*, with any API+SDK that has the same major version, and equal or greater minor or patch version. \n+    - For example, libraries that are instrumented with `opentelemetry-api-trace:1.0.1` will function, at runtime with \n+SDK library `opentelemetry-sdk-trace:1.11.33` plus `opentelemetry-api-trace:1.11.33`. \n+    - We call this requirement the \"ABI\" compatibility requirement for \"Application Binary Interface\" compatibility. \n+- SDK Stability:\n+    - Public portions of the SDK (constructors, configuration, und-user interfaces) must remain backwards compatible.\n+        - Precisely what this includes has yet to be delineated. \n+    - Internal interfaces are allowed to break.", "originalCommit": "2bbbcb9d52bf0c0ec20e6b1c4e856211088b0eb7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc2NDg3OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539764879", "bodyText": "I copied this out of Ted's otep...I think it just means non-public \"internals\" of the SDK. It might not be a valuable thing to call out.", "author": "jkwatson", "createdAt": "2020-12-10T01:04:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTczODk5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc2NTgxMw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r539765813", "bodyText": "Ok - yeah it might be worth calling out but it applies to both API and SDK so weird for me to see it here, which I guess is my comment on the OTEP too so just repeating the feedback it seems :)", "author": "anuraaga", "createdAt": "2020-12-10T01:06:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTczODk5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwNzMwMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540407301", "bodyText": "updated", "author": "jkwatson", "createdAt": "2020-12-10T18:39:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTczODk5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxNjg3MA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540016870", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                - Public portions of the SDK (constructors, configuration, und-user interfaces) must remain backwards compatible.\n          \n          \n            \n                - Public portions of the SDK (constructors, configuration, end-user interfaces) must remain backwards compatible.", "author": "iNikem", "createdAt": "2020-12-10T09:38:51Z", "path": "docs/rationale.md", "diffHunk": "@@ -23,4 +23,72 @@ try (Scope scope = TracingContextUtils.currentContextWith(span)) {\n ```\n \n It would not be possible to call `recordException` if `span` was also using try-with-resources.\n-Because this is a common usage for spans, we do not support try-with-resources.\n\\ No newline at end of file\n+Because this is a common usage for spans, we do not support try-with-resources.\n+\n+\n+## Versioning and Releases\n+\n+### Assumptions\n+\n+- This project uses semver v2, as does the rest of OpenTelemetry.\n+\n+### Goals\n+\n+- API Stability: \n+    - Once the API for a given signal (spans, logs, metrics, baggage) has been officially released, code instrumented with that API module will \n+function, *with no recompilation required*, with any API+SDK that has the same major version, and equal or greater minor or patch version. \n+    - For example, libraries that are instrumented with `opentelemetry-api-trace:1.0.1` will function, at runtime with \n+SDK library `opentelemetry-sdk-trace:1.11.33` plus `opentelemetry-api-trace:1.11.33`. \n+    - We call this requirement the \"ABI\" compatibility requirement for \"Application Binary Interface\" compatibility. \n+- SDK Stability:\n+    - Public portions of the SDK (constructors, configuration, und-user interfaces) must remain backwards compatible.", "originalCommit": "2bbbcb9d52bf0c0ec20e6b1c4e856211088b0eb7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxOTUyNA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540019524", "bodyText": "But we planned to version SDK independently from API, right?", "author": "iNikem", "createdAt": "2020-12-10T09:42:22Z", "path": "docs/rationale.md", "diffHunk": "@@ -23,4 +23,72 @@ try (Scope scope = TracingContextUtils.currentContextWith(span)) {\n ```\n \n It would not be possible to call `recordException` if `span` was also using try-with-resources.\n-Because this is a common usage for spans, we do not support try-with-resources.\n\\ No newline at end of file\n+Because this is a common usage for spans, we do not support try-with-resources.\n+\n+\n+## Versioning and Releases\n+\n+### Assumptions\n+\n+- This project uses semver v2, as does the rest of OpenTelemetry.\n+\n+### Goals\n+\n+- API Stability: \n+    - Once the API for a given signal (spans, logs, metrics, baggage) has been officially released, code instrumented with that API module will \n+function, *with no recompilation required*, with any API+SDK that has the same major version, and equal or greater minor or patch version. \n+    - For example, libraries that are instrumented with `opentelemetry-api-trace:1.0.1` will function, at runtime with \n+SDK library `opentelemetry-sdk-trace:1.11.33` plus `opentelemetry-api-trace:1.11.33`. ", "originalCommit": "2bbbcb9d52bf0c0ec20e6b1c4e856211088b0eb7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAzMzI2Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540033262", "bodyText": "I think this depended on how hard we go on preserving SDK compatibility. The more precise statement is indeed probably the use of the BOM for the latest version rather than mentioning them explicitly.", "author": "anuraaga", "createdAt": "2020-12-10T10:01:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxOTUyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDI5NDM1OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540294359", "bodyText": "I can update to refer to the BOM. Whether we actually end up versioning the SDK independently from the API remains to be seen (I sure hope we don't have to).", "author": "jkwatson", "createdAt": "2020-12-10T16:08:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxOTUyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQwNzM5NQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/2250#discussion_r540407395", "bodyText": "done", "author": "jkwatson", "createdAt": "2020-12-10T18:39:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDAxOTUyNA=="}], "type": "inlineReview"}, {"oid": "e9f67bcdeab124af6d175b5fc17c66d0f9a0cf1b", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/e9f67bcdeab124af6d175b5fc17c66d0f9a0cf1b", "message": "Update docs/rationale.md\n\nCo-authored-by: Nikita Salnikov-Tarnovski <gnikem@gmail.com>", "committedDate": "2020-12-10T16:09:22Z", "type": "commit"}, {"oid": "14d3035cceb7bcf287d0555b010a3159c6ae5af3", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/14d3035cceb7bcf287d0555b010a3159c6ae5af3", "message": "add some additional flavor about internals and mention the bom in an example", "committedDate": "2020-12-10T18:35:46Z", "type": "commit"}]}