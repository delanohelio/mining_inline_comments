{"pr_number": 1433, "pr_title": "Remove null checks in Span API.", "pr_createdAt": "2020-07-19T06:23:21Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433", "timeline": [{"oid": "3f41e6af94bae3a086eebcaed8e173dc5779c47f", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/3f41e6af94bae3a086eebcaed8e173dc5779c47f", "message": "Remove null checks in Span API.", "committedDate": "2020-07-19T06:22:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyOTQzMA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457329430", "bodyText": "Before returning, I would add a log to notify the error since the spec requires that key MUST not be null https://github.com/open-telemetry/opentelemetry-specification/blob/master/specification/trace/api.md#set-attributes\nFurthermore, I just noticed that we allow empty strings as a key", "author": "thisthat", "createdAt": "2020-07-20T12:16:58Z", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -300,7 +299,9 @@ public void setAttribute(String key, boolean value) {\n \n   @Override\n   public void setAttribute(String key, AttributeValue value) {\n-    Preconditions.checkNotNull(key, \"key\");\n+    if (key == null) {\n+      return;", "originalCommit": "3f41e6af94bae3a086eebcaed8e173dc5779c47f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzNDQ1Mg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457334452", "bodyText": "I have created #1436", "author": "thisthat", "createdAt": "2020-07-20T12:24:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyOTQzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM2MDk5Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457360997", "bodyText": "I have used a property controlled pattern for validating before, would it make sense here?\nhttps://github.com/aws/aws-xray-sdk-java/blob/master/aws-xray-recorder-sdk-core/src/main/java/com/amazonaws/xray/utils/LooseValidations.java#L47\nI don't think we should log unconditionally since in many apps log spam can be almost as bad as runtime errors.", "author": "anuraaga", "createdAt": "2020-07-20T13:01:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyOTQzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzM2NTY0Ng==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457365646", "bodyText": "I think your suggestion is very valuable used in combination with #1419", "author": "thisthat", "createdAt": "2020-07-20T13:07:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMyOTQzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxNjU5Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/1433#discussion_r457616597", "bodyText": "We need new tests for all the SDK changes too.", "author": "carlosalberto", "createdAt": "2020-07-20T18:42:41Z", "path": "sdk/src/main/java/io/opentelemetry/sdk/trace/RecordEventsReadableSpan.java", "diffHunk": "@@ -385,7 +386,9 @@ private void addTimedEvent(TimedEvent timedEvent) {\n \n   @Override\n   public void setStatus(Status status) {\n-    Preconditions.checkNotNull(status, \"status\");\n+    if (status == null) {", "originalCommit": "3f41e6af94bae3a086eebcaed8e173dc5779c47f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2c0ef9abbb95c0b1e1b34b29dc0b17dc764e30e5", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2c0ef9abbb95c0b1e1b34b29dc0b17dc764e30e5", "message": "Add tests and loosen events as well.", "committedDate": "2020-07-21T01:49:00Z", "type": "commit"}]}