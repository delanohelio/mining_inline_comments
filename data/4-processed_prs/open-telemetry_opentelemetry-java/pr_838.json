{"pr_number": 838, "pr_title": "Add counters to the batch recorder.", "pr_createdAt": "2020-02-07T23:10:45Z", "pr_url": "https://github.com/open-telemetry/opentelemetry-java/pull/838", "timeline": [{"oid": "1f01224f11a622ff558a8b3e33b3470df86ae19e", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/1f01224f11a622ff558a8b3e33b3470df86ae19e", "message": "Add counters to the batch recorder.\nAlso, allow non-monotonic batch recordings.", "committedDate": "2020-02-07T23:10:23Z", "type": "commit"}, {"oid": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/a8929ba82f2bc61f47f8253bf135ef9630843cb8", "message": "remove the throws on the javadoc", "committedDate": "2020-02-07T23:11:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377143689", "bodyText": "intentional?", "author": "arminru", "createdAt": "2020-02-10T15:44:54Z", "path": "api/src/main/java/io/opentelemetry/metrics/DoubleCounter.java", "diffHunk": "@@ -17,6 +17,7 @@\n package io.opentelemetry.metrics;\n \n import io.opentelemetry.metrics.DoubleCounter.BoundDoubleCounter;\n+import io.opentelemetry.metrics.InstrumentWithBinding.BoundInstrument;", "originalCommit": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE2Njk2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377166969", "bodyText": "It is. Oddly, IDEA wouldn't properly compile without it, even though it would compile with gradle. I'm honestly not sure what's going on, but this seems to be required by some versions of the compiler.", "author": "jkwatson", "createdAt": "2020-02-10T16:20:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE2OTgzMg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377169832", "bodyText": "Oh, that's strange. I checked out your branch and removed the lines to check if those are necessary, my IDEA compiled it without any complaints.", "author": "arminru", "createdAt": "2020-02-10T16:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE3NTEzMQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377175131", "bodyText": "What version of javac is your IDEA set up to use? I notice that IDEA is using 1.8.0_222 to compile, but when I use gradle, I'm using 1.8.0_232.", "author": "jkwatson", "createdAt": "2020-02-10T16:33:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE4MDYxOA==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377180618", "bodyText": "For otel-java I've set it up to use 1.8.0_192. Maybe you want to give it a try and see if the CI takes it without the unused imports?", "author": "arminru", "createdAt": "2020-02-10T16:42:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIxNDUzNw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377214537", "bodyText": "CI was working previous to this PR, so I'm guessing it does work. Is your IDEA using gradle for the compiles, or the internal compiler?", "author": "jkwatson", "createdAt": "2020-02-10T17:41:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzU0Mjg5OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377542899", "bodyText": "I suppose it's using the JDK mentioned above which I set as Project SDK in the project settings. For running Gradle itself (the daemon) it uses the JRE defined in the global IDEA settings (Build > Build Tools > Gradle > Gradle JVM).", "author": "arminru", "createdAt": "2020-02-11T10:14:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzY4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzcyNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377143725", "bodyText": "intentional?", "author": "arminru", "createdAt": "2020-02-10T15:44:58Z", "path": "api/src/main/java/io/opentelemetry/metrics/DoubleMeasure.java", "diffHunk": "@@ -17,6 +17,7 @@\n package io.opentelemetry.metrics;\n \n import io.opentelemetry.metrics.DoubleMeasure.BoundDoubleMeasure;\n+import io.opentelemetry.metrics.InstrumentWithBinding.BoundInstrument;", "originalCommit": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE2NzEwNQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377167105", "bodyText": "see above", "author": "jkwatson", "createdAt": "2020-02-10T16:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0MzcyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0Mzc5Nw==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377143797", "bodyText": "intentional?", "author": "arminru", "createdAt": "2020-02-10T15:45:05Z", "path": "api/src/main/java/io/opentelemetry/metrics/LongCounter.java", "diffHunk": "@@ -16,6 +16,7 @@\n \n package io.opentelemetry.metrics;\n \n+import io.opentelemetry.metrics.InstrumentWithBinding.BoundInstrument;", "originalCommit": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0NDEyNg==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377144126", "bodyText": "intentional?", "author": "arminru", "createdAt": "2020-02-10T15:45:35Z", "path": "api/src/main/java/io/opentelemetry/metrics/LongMeasure.java", "diffHunk": "@@ -16,6 +16,7 @@\n \n package io.opentelemetry.metrics;\n \n+import io.opentelemetry.metrics.InstrumentWithBinding.BoundInstrument;", "originalCommit": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0NjY5MQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377146691", "bodyText": "intentional?", "author": "arminru", "createdAt": "2020-02-10T15:49:30Z", "path": "sdk/src/main/java/io/opentelemetry/sdk/metrics/MeterSdkRegistry.java", "diffHunk": "@@ -33,11 +33,11 @@\n  * io.opentelemetry.OpenTelemetry}.\n  */\n public final class MeterSdkRegistry implements MeterRegistry {\n-  private final MeterSharedState sharedState;", "originalCommit": "a8929ba82f2bc61f47f8253bf135ef9630843cb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE2NzU1OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377167559", "bodyText": "yes, this wasn't being used outside the constructor.", "author": "jkwatson", "createdAt": "2020-02-10T16:21:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0NjY5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE3MDc2OQ==", "url": "https://github.com/open-telemetry/opentelemetry-java/pull/838#discussion_r377170769", "bodyText": "yeah I figured, I just noticed it's not in line with TracerSdkRegistry but we can remove the property here until we actually need it", "author": "arminru", "createdAt": "2020-02-10T16:26:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzE0NjY5MQ=="}], "type": "inlineReview"}, {"oid": "20534cfca503cc0a09ff20bdeceea5ac7d366766", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/20534cfca503cc0a09ff20bdeceea5ac7d366766", "message": "put the proper since tags on the new methods", "committedDate": "2020-02-10T16:24:06Z", "type": "commit"}, {"oid": "ec054ea3fe4e38889e28dee0c284d3a616e9ddce", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/ec054ea3fe4e38889e28dee0c284d3a616e9ddce", "message": "remove an import that seems only necessary for IDEA", "committedDate": "2020-02-10T17:50:48Z", "type": "commit"}, {"oid": "2bd67f1f18425f4de9543ad99cbc62f27569351f", "url": "https://github.com/open-telemetry/opentelemetry-java/commit/2bd67f1f18425f4de9543ad99cbc62f27569351f", "message": "formatting", "committedDate": "2020-02-10T17:53:04Z", "type": "commit"}]}