{"pr_number": 2981, "pr_title": "Sort order parameter for data messages request", "pr_createdAt": "2020-05-17T15:29:11Z", "pr_url": "https://github.com/eclipse/kapua/pull/2981", "timeline": [{"oid": "8cfc59e61581582f733f25b3ea59b8c02647772e", "url": "https://github.com/eclipse/kapua/commit/8cfc59e61581582f733f25b3ea59b8c02647772e", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>", "committedDate": "2020-05-17T15:40:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjUzNjcwNQ==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r426536705", "bodyText": "A few of things:\n\nInstead of a String, you could use the SortDirection type itself so it's automatically parsed, and invalid values are rejected earlier. Also, to have it case-insensitive, please implement the fromString() method in SortDirection. You can draw inspiration from #2891\nAlso, for coherence with #2891, I would rather name the parameter sortDir, and the default should be in uppercase\nThis is just a stylistic preference, but I'd like to keep offset and limit to end of the signature, so could you please move sortDir just below metricMax?", "author": "lorthirk", "createdAt": "2020-05-18T10:48:08Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DataMessages.java", "diffHunk": "@@ -88,7 +93,8 @@\n             @QueryParam(\"metricMin\") String metricMinValue, //\n             @QueryParam(\"metricMax\") String metricMaxValue, //\n             @QueryParam(\"offset\") @DefaultValue(\"0\") int offset,//\n-            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit) throws KapuaException {\n+            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit,\n+            @QueryParam(\"order\") @DefaultValue(\"desc\") String order) throws KapuaException {", "originalCommit": "8cfc59e61581582f733f25b3ea59b8c02647772e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjUzODY2Mw==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r426538663", "bodyText": "Of course, here you should reflect all the changes from DataMessages.java", "author": "lorthirk", "createdAt": "2020-05-18T10:51:59Z", "path": "rest-api/resources/src/main/java/org/eclipse/kapua/app/api/resources/v1/resources/DataMessagesJson.java", "diffHunk": "@@ -91,7 +91,8 @@\n             @QueryParam(\"metricMin\") String metricMinValue,\n             @QueryParam(\"metricMax\") String metricMaxValue,\n             @QueryParam(\"offset\") @DefaultValue(\"0\") int offset,\n-            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit) throws KapuaException {\n+            @QueryParam(\"limit\") @DefaultValue(\"50\") int limit,\n+            @QueryParam(\"order\") @DefaultValue(\"desc\") String order) throws KapuaException {", "originalCommit": "8cfc59e61581582f733f25b3ea59b8c02647772e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "url": "https://github.com/eclipse/kapua/commit/f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>", "committedDate": "2020-05-19T11:14:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI1MjczNQ==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427252735", "bodyText": "Aren't these ASC and DESC?", "author": "lorthirk", "createdAt": "2020-05-19T12:12:11Z", "path": "rest-api/resources/src/main/resources/openapi/dataMessage/dataMessage-scopeId.yaml", "diffHunk": "@@ -67,6 +67,15 @@ paths:\n           in: query\n           schema:\n             type: string\n+        - description: The sort direction. Can be ASCENDING, DESCENDING (default). Case-insensitive.\n+          name: sortDir\n+          in: query\n+          schema:\n+            type: string\n+            enum:\n+              - ASCENDING\n+              - DESCENDING\n+            default: DESCENDING", "originalCommit": "f8b245182a06dde43a5d5569a9ab7044a3fc1db2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "754a68ce58eb651b0f5794651e3be36c25f93d3a", "url": "https://github.com/eclipse/kapua/commit/754a68ce58eb651b0f5794651e3be36c25f93d3a", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>", "committedDate": "2020-05-19T12:38:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MjMxMA==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427292310", "bodyText": "Whoops... this slipped in as well. ASC and DESC here too. Just one to go!", "author": "lorthirk", "createdAt": "2020-05-19T13:15:23Z", "path": "rest-api/resources/src/main/resources/openapi/dataMessage/dataMessage-scopeId.yaml", "diffHunk": "@@ -67,6 +67,15 @@ paths:\n           in: query\n           schema:\n             type: string\n+        - description: The sort direction. Can be ASCENDING, DESCENDING (default). Case-insensitive.", "originalCommit": "754a68ce58eb651b0f5794651e3be36c25f93d3a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzMwMDI5Ng==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427300296", "bodyText": "This is a generic description and the meaning of those two words is generic as well.\nThey are not connected to actual enum members.", "author": "xshiart", "createdAt": "2020-05-19T13:26:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MjMxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM1MTM2OA==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427351368", "bodyText": "Hi!\nThat makes sense. Since they are generic description maybe those should be lowercase? So they will not be confused as values that can be used!\nThanks,\nAlberto", "author": "Coduz", "createdAt": "2020-05-19T14:34:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MjMxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzM1NDEzMA==", "url": "https://github.com/eclipse/kapua/pull/2981#discussion_r427354130", "bodyText": "I agree with @Coduz. I would rather write them lowercase, and also remove the reference of them being case insensitive.", "author": "lorthirk", "createdAt": "2020-05-19T14:37:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzI5MjMxMA=="}], "type": "inlineReview"}, {"oid": "f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "url": "https://github.com/eclipse/kapua/commit/f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>", "committedDate": "2020-05-19T15:10:57Z", "type": "commit"}, {"oid": "f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "url": "https://github.com/eclipse/kapua/commit/f0dada0fcaab0535db3af954a9f9dd57b9111ec9", "message": "Sort order parameter for data messages request\n\nSigned-off-by: Artem Shilin <xshiart@protonmail.com>", "committedDate": "2020-05-19T15:10:57Z", "type": "forcePushed"}]}