{"pr_number": 2961, "pr_title": "Fixed Failing Cucumber Unit Tests", "pr_createdAt": "2020-05-05T07:46:43Z", "pr_url": "https://github.com/eclipse/kapua/pull/2961", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkzMzc0Mw==", "url": "https://github.com/eclipse/kapua/pull/2961#discussion_r419933743", "bodyText": "This dependency is added 4 times!", "author": "lorthirk", "createdAt": "2020-05-05T08:09:22Z", "path": "service/tag/test/pom.xml", "diffHunk": "@@ -39,5 +39,25 @@\n             <artifactId>cucumber-junit</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.eclipse.kapua</groupId>\n+            <artifactId>kapua-account-internal</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>", "originalCommit": "63f4adf3d119e31ea3bee0cd1e1c6bec3be64e55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkzMzg3OQ==", "url": "https://github.com/eclipse/kapua/pull/2961#discussion_r419933879", "bodyText": "This dependency is added twice", "author": "lorthirk", "createdAt": "2020-05-05T08:09:38Z", "path": "service/user/test/pom.xml", "diffHunk": "@@ -39,5 +39,15 @@\n             <artifactId>cucumber-junit</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.eclipse.kapua</groupId>\n+            <artifactId>kapua-account-internal</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>", "originalCommit": "63f4adf3d119e31ea3bee0cd1e1c6bec3be64e55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkzNDI2MQ==", "url": "https://github.com/eclipse/kapua/pull/2961#discussion_r419934261", "bodyText": "This dependency is added twice", "author": "lorthirk", "createdAt": "2020-05-05T08:10:17Z", "path": "service/job/test/pom.xml", "diffHunk": "@@ -44,5 +44,15 @@\n             <artifactId>kapua-scheduler-quartz</artifactId>\n             <scope>test</scope>\n         </dependency>\n+        <dependency>\n+            <groupId>org.eclipse.kapua</groupId>\n+            <artifactId>kapua-account-internal</artifactId>\n+            <scope>test</scope>\n+        </dependency>\n+        <dependency>", "originalCommit": "63f4adf3d119e31ea3bee0cd1e1c6bec3be64e55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a09f32af90a109bad43bc83bb55c677b1d3cfc4", "url": "https://github.com/eclipse/kapua/commit/8a09f32af90a109bad43bc83bb55c677b1d3cfc4", "message": "Fixed Failing Cucumber Unit Tests\nWith a fix for a certain REST API bug (preventing users to change their account settings) in PR #2946 and PR #2954 the unit tests for services (tags, users, jobs, scheduling,...) started to fail.\nI have fixed this by introducing a mocked account that is used as basis for the service creation.\nI have already ran PR on my Travis and everything was fine. CodeCov should report 0% increased/decreased coverage, since all the changes made are in the ignored folders.\n\nSigned-off-by: Leonardo Gaube <leonardo.gaube@comtrade.com>\n\n**Related Issue**\nThis PR fixes problems with unit tests in PR #2947 and PR #2954.\n\n**Description of the solution adopted:**\nI have added a mocked AccountService and mocked AccountFactory classes to the existing unit tests, so that the check does not fail. This is  achieved with Mockito's \"spy\" method. The necessary Account methods are injected in the _CucumberWithProeprtiesFor(Service)_ file.\n\n@lorthirk can you please look at the solution adopted and see if it's ok? After you merge this PR into develop, just rebase your PRs to develop and the tests should be passing normally.\n**Screenshots**\nN/A\n\n**Any side note on the changes made**\nN/A", "committedDate": "2020-05-05T08:34:09Z", "type": "forcePushed"}, {"oid": "c6ff432f1c70fc64ef1b008b080405b0c0027682", "url": "https://github.com/eclipse/kapua/commit/c6ff432f1c70fc64ef1b008b080405b0c0027682", "message": "Fixed Failing Cucumber Unit Tests\nWith a fix for a certain REST API bug (preventing users to change their account settings) in PR #2946 and PR #2954 the unit tests for services (tags, users, jobs, scheduling,...) started to fail.\nI have fixed this by introducing a mocked account that is used as basis for the service creation.\nI have already ran PR on my Travis and everything was fine. CodeCov should report 0% increased/decreased coverage, since all the changes made are in the ignored folders.\n\nSigned-off-by: Leonardo Gaube <leonardo.gaube@comtrade.com>\n\n**Related Issue**\nThis PR fixes problems with unit tests in PR #2947 and PR #2954.\n\n**Description of the solution adopted:**\nI have added a mocked AccountService and mocked AccountFactory classes to the existing unit tests, so that the check does not fail. This is  achieved with Mockito's \"spy\" method. The necessary Account methods are injected in the _CucumberWithProeprtiesFor(Service)_ file.\n\n@lorthirk can you please look at the solution adopted and see if it's ok? After you merge this PR into develop, just rebase your PRs to develop and the tests should be passing normally.\n**Screenshots**\nN/A\n\n**Any side note on the changes made**\nN/A", "committedDate": "2020-05-05T08:44:10Z", "type": "commit"}, {"oid": "c6ff432f1c70fc64ef1b008b080405b0c0027682", "url": "https://github.com/eclipse/kapua/commit/c6ff432f1c70fc64ef1b008b080405b0c0027682", "message": "Fixed Failing Cucumber Unit Tests\nWith a fix for a certain REST API bug (preventing users to change their account settings) in PR #2946 and PR #2954 the unit tests for services (tags, users, jobs, scheduling,...) started to fail.\nI have fixed this by introducing a mocked account that is used as basis for the service creation.\nI have already ran PR on my Travis and everything was fine. CodeCov should report 0% increased/decreased coverage, since all the changes made are in the ignored folders.\n\nSigned-off-by: Leonardo Gaube <leonardo.gaube@comtrade.com>\n\n**Related Issue**\nThis PR fixes problems with unit tests in PR #2947 and PR #2954.\n\n**Description of the solution adopted:**\nI have added a mocked AccountService and mocked AccountFactory classes to the existing unit tests, so that the check does not fail. This is  achieved with Mockito's \"spy\" method. The necessary Account methods are injected in the _CucumberWithProeprtiesFor(Service)_ file.\n\n@lorthirk can you please look at the solution adopted and see if it's ok? After you merge this PR into develop, just rebase your PRs to develop and the tests should be passing normally.\n**Screenshots**\nN/A\n\n**Any side note on the changes made**\nN/A", "committedDate": "2020-05-05T08:44:10Z", "type": "forcePushed"}]}