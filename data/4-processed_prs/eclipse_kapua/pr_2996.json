{"pr_number": 2996, "pr_title": "Enabling property to disable the OpenID Connect logout", "pr_createdAt": "2020-06-04T15:59:50Z", "pr_url": "https://github.com/eclipse/kapua/pull/2996", "timeline": [{"oid": "ab9f00a02730857dc346b67e28e1ed7769bf42ac", "url": "https://github.com/eclipse/kapua/commit/ab9f00a02730857dc346b67e28e1ed7769bf42ac", "message": "Enabling property to disable the OpenID Connect logout\n\nSigned-off-by: Gianluca Barbon <gianluca.barbon@eurotech.com>", "committedDate": "2020-06-04T15:34:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MDcyMA==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437970720", "bodyText": "Can you please change the header to \"2020\"? I hope I am not too late \ud83d\ude04", "author": "LeoNerdoG", "createdAt": "2020-06-10T08:58:44Z", "path": "console/core/src/main/java/org/eclipse/kapua/app/console/core/client/KapuaCloudConsole.java", "diffHunk": "@@ -446,18 +446,23 @@ public void onFailure(Throwable caught) {\n \n                     @Override\n                     public void onSuccess(final String result) {\n-                        logger.info(\"Waiting for logout.\");\n-\n-                        // this timer is needed to give time to the ConsoleInfo.display method (called above) to show\n-                        // the message to the user (otherwise the Window.location.assign would reload the page,\n-                        // giving no time to the user to read the message).\n-                        Timer timer = new Timer() {\n-                            @Override\n-                            public void run() {\n-                                Window.Location.assign(result);\n-                            }\n-                        };\n-                        timer.schedule(SSO_FAILURE_WAIT_TIME);\n+                        if (!result.isEmpty()) {", "originalCommit": "ab9f00a02730857dc346b67e28e1ed7769bf42ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk4MDA4Mw==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437980083", "bodyText": "Sure! Done", "author": "gbarbon", "createdAt": "2020-06-10T09:14:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MDcyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MDk5MA==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437970990", "bodyText": "Can you please change the header to \"2020\"? I hope I am not too late \ud83d\ude04", "author": "LeoNerdoG", "createdAt": "2020-06-10T08:59:11Z", "path": "console/core/src/main/java/org/eclipse/kapua/app/console/core/server/GwtSettingsServiceImpl.java", "diffHunk": "@@ -52,8 +52,11 @@ public String getSsoLoginUri() throws GwtKapuaException {\n     @Override\n     public String getSsoLogoutUri(String ssoIdToken) throws GwtKapuaException {\n         try {\n-            return SsoLocator.getLocator(this).getService().getLogoutUri(ssoIdToken,\n-                    URI.create(SsoHelper.getHomeUri()), UUID.randomUUID().toString());\n+            if (SETTINGS.getBoolean(ConsoleSettingKeys.SSO_OPENID_LOGOUT_ENABLED, true)) {", "originalCommit": "ab9f00a02730857dc346b67e28e1ed7769bf42ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk4MDE5Mw==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437980193", "bodyText": "done!", "author": "gbarbon", "createdAt": "2020-06-10T09:14:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MDk5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MTAyMw==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437971023", "bodyText": "Can you please change the header to \"2020\"? I hope I am not too late \ud83d\ude04", "author": "LeoNerdoG", "createdAt": "2020-06-10T08:59:14Z", "path": "console/core/src/main/java/org/eclipse/kapua/app/console/core/client/NorthView.java", "diffHunk": "@@ -197,16 +197,21 @@ public void onSuccess(Void arg0) {\n                                     gwtSettingService.getSsoLogoutUri(currentSession.getSsoIdToken(),\n                                             new AsyncCallback<String>() {\n \n-                                        @Override\n-                                        public void onFailure(Throwable caught) {\n-                                            FailureHandler.handle(caught);\n-                                        }\n-\n-                                        @Override\n-                                        public void onSuccess(String result) {\n-                                            Window.Location.assign(result);\n-                                        }\n-                                    });\n+                                                @Override", "originalCommit": "ab9f00a02730857dc346b67e28e1ed7769bf42ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk4MDQxOQ==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437980419", "bodyText": "done!", "author": "gbarbon", "createdAt": "2020-06-10T09:15:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MTAyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MTEyMg==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437971122", "bodyText": "Can you please change the header to \"2020\"? I hope I am not too late \ud83d\ude04", "author": "LeoNerdoG", "createdAt": "2020-06-10T08:59:24Z", "path": "console/module/api/src/main/java/org/eclipse/kapua/app/console/module/api/setting/ConsoleSettingKeys.java", "diffHunk": "@@ -39,6 +39,7 @@\n \n     SSO_REDIRECT_URI(\"console.sso.redirect.uri\"), //\n     SSO_CONSOLE_HOME_URI(\"console.sso.home.uri\"), //\n+    SSO_OPENID_LOGOUT_ENABLED(\"console.sso.openid.logout.enabled\"), //", "originalCommit": "ab9f00a02730857dc346b67e28e1ed7769bf42ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk4MDMzNQ==", "url": "https://github.com/eclipse/kapua/pull/2996#discussion_r437980335", "bodyText": "done!", "author": "gbarbon", "createdAt": "2020-06-10T09:15:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk3MTEyMg=="}], "type": "inlineReview"}, {"oid": "79a49f4222de024085e93f8113a499ed9097bb02", "url": "https://github.com/eclipse/kapua/commit/79a49f4222de024085e93f8113a499ed9097bb02", "message": "Updated headers\n\nSigned-off-by: Gianluca Barbon <gianluca.barbon@eurotech.com>", "committedDate": "2020-06-10T09:13:14Z", "type": "commit"}]}