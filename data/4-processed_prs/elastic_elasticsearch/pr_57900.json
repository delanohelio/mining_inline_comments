{"pr_number": 57900, "pr_title": "Ignore matching data streams if include_data_streams is false", "pr_createdAt": "2020-06-09T19:43:34Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57900", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg5NzAyOA==", "url": "https://github.com/elastic/elasticsearch/pull/57900#discussion_r437897028", "bodyText": "This fails when this yaml test is executed with security enabled.\nlogs-* is expanded to logs-foobar and then later this fails with a 404.\nSo in order to make this test execute constantly with and without security enabled, we should change\nindex: logs-* to `index: logs-foobar. This should change the meaning of this test.", "author": "martijnvg", "createdAt": "2020-06-10T06:52:12Z", "path": "rest-api-spec/src/main/resources/rest-api-spec/test/indices.data_stream/20_unsupported_apis.yml", "diffHunk": "@@ -61,7 +61,6 @@\n         index: logs-foobarbaz\n \n   - do:\n-      catch: bad_request", "originalCommit": "44afb54262735e93ddbd880641d2910715b3e469", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5Mzg1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/57900#discussion_r438093853", "bodyText": "Thanks for pointing that out. It seems unfortunate that behavior can differ when security is enabled even when it is not restricting access to any of the items in the test. E.g., close logs-* succeeds without security but fails with security enabled even though the user has access to both the logs-foobar data stream and logs-foobarbaz index. I suppose that difference in behavior already exists with indices and aliases, though.", "author": "danhermann", "createdAt": "2020-06-10T12:47:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg5NzAyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwODM5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/57900#discussion_r438108396", "bodyText": "Yes, that subtle difference in behaviour also exists with indices and aliases.", "author": "martijnvg", "createdAt": "2020-06-10T13:09:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzg5NzAyOA=="}], "type": "inlineReview"}, {"oid": "75811543b2154238ea853b789a77bad21b551888", "url": "https://github.com/elastic/elasticsearch/commit/75811543b2154238ea853b789a77bad21b551888", "message": "remove test failing due to security", "committedDate": "2020-06-30T15:51:16Z", "type": "forcePushed"}, {"oid": "2ef0ab5470789569c7aca69b0a813495995cffbd", "url": "https://github.com/elastic/elasticsearch/commit/2ef0ab5470789569c7aca69b0a813495995cffbd", "message": "Ignore matching data streams if include_data_streams is false", "committedDate": "2020-07-02T16:12:08Z", "type": "forcePushed"}, {"oid": "dcf507ee17c151670c239d3df6c2975df24d2934", "url": "https://github.com/elastic/elasticsearch/commit/dcf507ee17c151670c239d3df6c2975df24d2934", "message": "Ignore matching data streams if include_data_streams is false", "committedDate": "2020-07-02T17:02:51Z", "type": "forcePushed"}, {"oid": "c51497462cc9518c7edf22d0dd5d2b91f1de6cc7", "url": "https://github.com/elastic/elasticsearch/commit/c51497462cc9518c7edf22d0dd5d2b91f1de6cc7", "message": "Ignore matching data streams if include_data_streams is false", "committedDate": "2020-07-03T04:56:34Z", "type": "commit"}, {"oid": "c51497462cc9518c7edf22d0dd5d2b91f1de6cc7", "url": "https://github.com/elastic/elasticsearch/commit/c51497462cc9518c7edf22d0dd5d2b91f1de6cc7", "message": "Ignore matching data streams if include_data_streams is false", "committedDate": "2020-07-03T04:56:34Z", "type": "forcePushed"}, {"oid": "23981c14cef3b98ce463380c22d172f86253975d", "url": "https://github.com/elastic/elasticsearch/commit/23981c14cef3b98ce463380c22d172f86253975d", "message": "fix test", "committedDate": "2020-07-03T05:01:19Z", "type": "commit"}, {"oid": "07f9311fecc4830f411305e11e72e3309bd1fb45", "url": "https://github.com/elastic/elasticsearch/commit/07f9311fecc4830f411305e11e72e3309bd1fb45", "message": "fix more tests", "committedDate": "2020-07-03T05:52:13Z", "type": "commit"}, {"oid": "04ca17bc163c0c1d07a23de520c389c33480a5b8", "url": "https://github.com/elastic/elasticsearch/commit/04ca17bc163c0c1d07a23de520c389c33480a5b8", "message": "Merge branch 'master' into do_not_fail_when_data_streams_match", "committedDate": "2020-07-03T11:39:31Z", "type": "commit"}, {"oid": "fc7974d52370519b9ab829bfac1f52a50d9f4338", "url": "https://github.com/elastic/elasticsearch/commit/fc7974d52370519b9ab829bfac1f52a50d9f4338", "message": "fix merge error", "committedDate": "2020-07-03T11:53:46Z", "type": "commit"}, {"oid": "f6e20349fbb423f47961acd1e4aead89835a0d8e", "url": "https://github.com/elastic/elasticsearch/commit/f6e20349fbb423f47961acd1e4aead89835a0d8e", "message": "fix test", "committedDate": "2020-07-03T12:12:26Z", "type": "commit"}, {"oid": "27da3187f06c72cb51f3fddf5328cbe9cb2a411d", "url": "https://github.com/elastic/elasticsearch/commit/27da3187f06c72cb51f3fddf5328cbe9cb2a411d", "message": "checkstyle", "committedDate": "2020-07-03T12:31:09Z", "type": "commit"}]}