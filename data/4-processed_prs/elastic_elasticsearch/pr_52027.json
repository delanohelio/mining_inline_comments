{"pr_number": 52027, "pr_title": "Change privilege of enrich stats API to monitor", "pr_createdAt": "2020-02-07T02:15:56Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52027", "timeline": [{"oid": "a4c2ba8110801e1c84e0f14853a6afc12fd84525", "url": "https://github.com/elastic/elasticsearch/commit/a4c2ba8110801e1c84e0f14853a6afc12fd84525", "message": "Initial attempt to get the API call to pass", "committedDate": "2020-02-07T02:08:32Z", "type": "commit"}, {"oid": "a7cf90a23817062bdc87f832482fec44c5beacf8", "url": "https://github.com/elastic/elasticsearch/commit/a7cf90a23817062bdc87f832482fec44c5beacf8", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege", "committedDate": "2020-02-07T03:37:05Z", "type": "commit"}, {"oid": "3d7d0de4140efe2edae4ebc62d3911ddb700f307", "url": "https://github.com/elastic/elasticsearch/commit/3d7d0de4140efe2edae4ebc62d3911ddb700f307", "message": "Add tests for changed action privileges", "committedDate": "2020-02-07T07:19:59Z", "type": "commit"}, {"oid": "b6951f6be41ebd99360358b0dc8928036673633e", "url": "https://github.com/elastic/elasticsearch/commit/b6951f6be41ebd99360358b0dc8928036673633e", "message": "Update tests for better names", "committedDate": "2020-02-07T12:21:54Z", "type": "commit"}, {"oid": "e9b4f37e633ef9e06d8dd5dbfbbeb625fb53dd65", "url": "https://github.com/elastic/elasticsearch/commit/e9b4f37e633ef9e06d8dd5dbfbbeb625fb53dd65", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege", "committedDate": "2020-02-07T12:21:59Z", "type": "commit"}, {"oid": "a1806d6312127edb4f47e6c0610dddae31b227e3", "url": "https://github.com/elastic/elasticsearch/commit/a1806d6312127edb4f47e6c0610dddae31b227e3", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege", "committedDate": "2020-02-17T00:27:20Z", "type": "commit"}, {"oid": "fdf8a0a446064735cf818a33a49595a567e345f1", "url": "https://github.com/elastic/elasticsearch/commit/fdf8a0a446064735cf818a33a49595a567e345f1", "message": "Add smoke test for enrich stats API for mixed cluster", "committedDate": "2020-02-17T01:47:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk2MDg1Nw==", "url": "https://github.com/elastic/elasticsearch/pull/52027#discussion_r379960857", "bodyText": "@tvernum This new test failed in a mixed cluster environment. Next steps are:\n\nMute this test\nMerge this PR once approved\nBackport and fix the bug in 7.x and merge\nAnother PR to unmute this test\n\nBut I feel it is a bit unwieldy just to stick to the backport workflow. Alternatively I could:\n\nFix this bug and merge to 7.x (so 7.x will be the shim)\nMerge this PR\n\nPlease let me know your thoughts on this. Thanks!", "author": "ywangd", "createdAt": "2020-02-17T02:15:05Z", "path": "x-pack/qa/rolling-upgrade/src/test/resources/rest-api-spec/test/mixed_cluster/100_enrich.yml", "diffHunk": "@@ -0,0 +1,7 @@\n+---\n+\"Enrich stats query smoke test for mixed cluster\":\n+\n+  - do:\n+      enrich.stats: {}\n+\n+  - length: { coordinator_stats: 3 }", "originalCommit": "fdf8a0a446064735cf818a33a49595a567e345f1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyMTA3OA==", "url": "https://github.com/elastic/elasticsearch/pull/52027#discussion_r386821078", "bodyText": "My personal preference is to stick with the standard process of merge to master before backporting, but I don't feel so strongly as to stop you doing what makes sense to you.", "author": "tvernum", "createdAt": "2020-03-03T06:29:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk2MDg1Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg2NjkyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/52027#discussion_r386866929", "bodyText": "I am happy to following the standard process. No strong opinion here. In fact, I have muted the test so it can be merged first.\nBut should we get the other 7.x PR to a state where it is almost ready before merging this one? Because as soon as it is merged, a bug is introduced and it can only be fixed by merging the 7.x PR. I'd like to keep the merge time between the two PRs minimal so the bug will not be around for long.", "author": "ywangd", "createdAt": "2020-03-03T08:40:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTk2MDg1Nw=="}], "type": "inlineReview"}, {"oid": "837aeedb36e3afff7b454217b601f236d6b4b081", "url": "https://github.com/elastic/elasticsearch/commit/837aeedb36e3afff7b454217b601f236d6b4b081", "message": "Mute test for enrich breaking change", "committedDate": "2020-02-17T04:29:39Z", "type": "commit"}, {"oid": "00bdfa3ef8b5c5c75c3ee341c293c2bc71b0de80", "url": "https://github.com/elastic/elasticsearch/commit/00bdfa3ef8b5c5c75c3ee341c293c2bc71b0de80", "message": "Add node selector", "committedDate": "2020-02-17T07:40:45Z", "type": "commit"}, {"oid": "34c1ed26fa49c4c66db8f607929118409ca6da48", "url": "https://github.com/elastic/elasticsearch/commit/34c1ed26fa49c4c66db8f607929118409ca6da48", "message": "Temporarily disable one node_selector test", "committedDate": "2020-02-17T08:12:25Z", "type": "commit"}, {"oid": "b24b17daa64d44c7f36a98bc2e3ec4020cadf9a8", "url": "https://github.com/elastic/elasticsearch/commit/b24b17daa64d44c7f36a98bc2e3ec4020cadf9a8", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege", "committedDate": "2020-05-07T04:10:10Z", "type": "commit"}, {"oid": "4709272109997542393bd5a9140fb295bb353e4b", "url": "https://github.com/elastic/elasticsearch/commit/4709272109997542393bd5a9140fb295bb353e4b", "message": "Update due to long hiatus", "committedDate": "2020-05-07T04:17:54Z", "type": "commit"}, {"oid": "44284851f06d0a49f110d4172ae41b75b147f549", "url": "https://github.com/elastic/elasticsearch/commit/44284851f06d0a49f110d4172ae41b75b147f549", "message": "Add bwc mount point to TransportNodesAction", "committedDate": "2020-05-07T04:37:14Z", "type": "commit"}, {"oid": "b8ca3b7216de69d08cf7049944a4b807b5793745", "url": "https://github.com/elastic/elasticsearch/commit/b8ca3b7216de69d08cf7049944a4b807b5793745", "message": "Merge remote-tracking branch 'origin/master' into es-51677-enrich-stats-privilege", "committedDate": "2020-05-28T12:08:22Z", "type": "commit"}]}