{"pr_number": 56439, "pr_title": "[DOCS] Add impact sections to security 8.0 breaking changes", "pr_createdAt": "2020-05-08T15:46:43Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56439", "timeline": [{"oid": "1c8bda915a2690c32e0aa01fc3265f595d09d45e", "url": "https://github.com/elastic/elasticsearch/commit/1c8bda915a2690c32e0aa01fc3265f595d09d45e", "message": "[DOCS] Add impact sections to security 8.0 breaking changes", "committedDate": "2020-05-08T15:44:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2Njk0OA==", "url": "https://github.com/elastic/elasticsearch/pull/56439#discussion_r428466948", "bodyText": "This isn't quite right. You are fee to set xpack.security.transport.ssl.enabled to true or false, you just can't leave it unspecified if you have set other any xpack.security.transport.ssl.* settings.\nThis setting defaults to false if unspecified. The 7.x (and earlier) behaviour is that nodes that had a xpack.security.transport.ssl setting (e.g. xpack.security.transport.ssl.certificate) but did not explicitly set ssl.enabled, would not have SSL enabled.\nThat was confusing because on first inspection it would look like SSL was configured, but since it was not explicitly enabled, it didn't actually do anything.\nFor people in that situation,  the no impact upgrade would be to explicitly set ssl.enabled to false to acknowledge that even though they've configured SSL they don't want it to be on.\nThe \"right fix\" is for them to work out why they have ssl.* settings in their yml but don't have SSL enabled. Is that intentional?\n\nIf so, remove the ssl.* settings or set ssl.enabled to false.\nOtherwise, maybe they want to turn on ssl (ssl.enabled: true), but that's a bigger change & we can't really walk them through it here (but we could point to the relevant docs).\n\nI don't really know how to explain that well in the breaking changes doc. How much detail do we want to go to?\nBut I don't think we can recommend people just set it to true because that would cause a noticeable change to their cluster - it would turn on SSL when it was previously disabled - and they need to at least think through how they want to coordinate that change across their nodes (for transport.ssl) or with clients (for http.ssl)", "author": "tvernum", "createdAt": "2020-05-21T06:20:35Z", "path": "docs/reference/migration/migrate_8_0/security.asciidoc", "diffHunk": "@@ -86,6 +107,12 @@ It is now an error to configure any SSL settings for\n `xpack.security.transport.ssl` without also configuring\n `xpack.security.transport.ssl.enabled`.\n \n+*Impact* +\n+If using `xpack.security.transport.ssl` settings, ensure\n+`xpack.security.transport.ssl.enabled` is set as `true`. Not specifying\n+`xpack.security.transport.ssl.enabled` as `true` in `elasticsearch.yml` will\n+result in an error on startup.", "originalCommit": "1c8bda915a2690c32e0aa01fc3265f595d09d45e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2NzA3OA==", "url": "https://github.com/elastic/elasticsearch/pull/56439#discussion_r428467078", "bodyText": "The comment above for transport.ssl.enabled applies here too.", "author": "tvernum", "createdAt": "2020-05-21T06:20:59Z", "path": "docs/reference/migration/migrate_8_0/security.asciidoc", "diffHunk": "@@ -111,6 +138,12 @@ It is now an error to configure any SSL settings for\n `xpack.security.http.ssl` without also configuring\n `xpack.security.http.ssl.enabled`.\n \n+*Impact* +\n+If using `xpack.security.http.ssl` settings, ensure\n+`xpack.security.http.ssl.enabled` is set as `true`. Not specifying\n+`xpack.security.transport.ssl.enabled` as `true` in `elasticsearch.yml` will\n+result in an error on startup.\n+", "originalCommit": "1c8bda915a2690c32e0aa01fc3265f595d09d45e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2ODUwMw==", "url": "https://github.com/elastic/elasticsearch/pull/56439#discussion_r428468503", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Discontinue use of the `kibana_system` user. Specifying the `kibana` user in\n          \n          \n            \n            Discontinue use of the `kibana` user. Specifying the `kibana` user in\n          \n      \n    \n    \n  \n\nor perhaps even\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Discontinue use of the `kibana_system` user. Specifying the `kibana` user in\n          \n          \n            \n            Replace any use of the `kibana` user with the `kibana_system` user. Specifying the `kibana` user in", "author": "tvernum", "createdAt": "2020-05-21T06:25:20Z", "path": "docs/reference/migration/migrate_8_0/security.asciidoc", "diffHunk": "@@ -163,6 +210,10 @@ The name of this user was confusing, and was often mistakenly used to login to {\n This has been renamed to `kibana_system` in order to reduce confusion, and to better\n align with other built-in system accounts.\n \n+*Impact* +\n+Discontinue use of the `kibana_system` user. Specifying the `kibana` user in", "originalCommit": "1c8bda915a2690c32e0aa01fc3265f595d09d45e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fdb1f6f7f2102076804257e4862ac4448a60045c", "url": "https://github.com/elastic/elasticsearch/commit/fdb1f6f7f2102076804257e4862ac4448a60045c", "message": "Update docs/reference/migration/migrate_8_0/security.asciidoc\n\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-05-21T12:30:38Z", "type": "commit"}, {"oid": "bcbe90c891a86306a1c18a343d26340f7976a269", "url": "https://github.com/elastic/elasticsearch/commit/bcbe90c891a86306a1c18a343d26340f7976a269", "message": "address review feedback", "committedDate": "2020-05-21T13:02:15Z", "type": "commit"}, {"oid": "88550e2f1cba92c901a9e7cd89ac465ba5b76d95", "url": "https://github.com/elastic/elasticsearch/commit/88550e2f1cba92c901a9e7cd89ac465ba5b76d95", "message": "update links", "committedDate": "2020-05-21T13:26:14Z", "type": "commit"}]}