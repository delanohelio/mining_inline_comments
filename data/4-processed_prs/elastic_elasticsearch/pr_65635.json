{"pr_number": 65635, "pr_title": "[DOCS] Document cat allocation API response properties", "pr_createdAt": "2020-11-30T20:26:44Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65635", "timeline": [{"oid": "de4b63a710a285acf34dc40fbd7997e611acf6be", "url": "https://github.com/elastic/elasticsearch/commit/de4b63a710a285acf34dc40fbd7997e611acf6be", "message": "[DOCS] Document `_cat/allocation` API response", "committedDate": "2020-11-30T20:41:01Z", "type": "commit"}, {"oid": "de4b63a710a285acf34dc40fbd7997e611acf6be", "url": "https://github.com/elastic/elasticsearch/commit/de4b63a710a285acf34dc40fbd7997e611acf6be", "message": "[DOCS] Document `_cat/allocation` API response", "committedDate": "2020-11-30T20:41:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5NjY0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r532896645", "bodyText": "I intentionally omitted the data type (e.g., (integer)). cat APIs aren't intended for application consumption so it shouldn't be needed. Let me know if there's a use case I'm overlooking.", "author": "jrodewig", "createdAt": "2020-11-30T20:53:59Z", "path": "docs/reference/cat/allocation.asciidoc", "diffHunk": "@@ -40,6 +40,40 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-s]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-v]\n \n+[[cat-allocation-api-response-body]]\n+==== {api-response-body-title}\n+\n+`shards`::\n+Number of primary and replica shards assigned to the node.", "originalCommit": "de4b63a710a285acf34dc40fbd7997e611acf6be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4MzEwNA==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569583104", "bodyText": "\ud83d\udc4d", "author": "DaveCTurner", "createdAt": "2021-02-03T17:01:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5NjY0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5NzAxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r532897015", "bodyText": "Let me know if there are any other \"gotchas\" for disk.indices.", "author": "jrodewig", "createdAt": "2020-11-30T20:54:43Z", "path": "docs/reference/cat/allocation.asciidoc", "diffHunk": "@@ -40,6 +40,40 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-s]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-v]\n \n+[[cat-allocation-api-response-body]]\n+==== {api-response-body-title}\n+\n+`shards`::\n+Number of primary and replica shards assigned to the node.\n+\n+`disk.indices`::\n+Disk space used by the node's shards. Does not include disk space for the\n+<<index-modules-translog,translog>> or unassigned shards.", "originalCommit": "de4b63a710a285acf34dc40fbd7997e611acf6be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU3OTkxNg==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569579916", "bodyText": "This metric also double-counts any files which are hard-linked, such as those created when shrinking/splitting/cloning an index.", "author": "DaveCTurner", "createdAt": "2021-02-03T16:57:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg5NzAxNQ=="}], "type": "inlineReview"}, {"oid": "4d635acf5f64926a801a6db649808794e0868e24", "url": "https://github.com/elastic/elasticsearch/commit/4d635acf5f64926a801a6db649808794e0868e24", "message": "reword", "committedDate": "2020-11-30T21:55:29Z", "type": "commit"}, {"oid": "a6c42ff35830f6a44997dbaf72a497765b472fff", "url": "https://github.com/elastic/elasticsearch/commit/a6c42ff35830f6a44997dbaf72a497765b472fff", "message": "Clarify", "committedDate": "2020-11-30T21:58:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4MDgwNA==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569580804", "bodyText": "Could we indicate that Elasticsearch retrieves this metric from the OS rather than calculating it itself? Maybe also indicate that, in contrast with disk.indices, it does include translogs and unassigned shards  and does not double-count hard-linked files.\nIt might also help to indicate that this is the number that is compared to the disk watermarks in disk-based shard allocation.", "author": "DaveCTurner", "createdAt": "2021-02-03T16:58:18Z", "path": "docs/reference/cat/allocation.asciidoc", "diffHunk": "@@ -40,6 +40,40 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-s]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-v]\n \n+[[cat-allocation-api-response-body]]\n+==== {api-response-body-title}\n+\n+`shards`::\n+Number of primary and replica shards assigned to the node.\n+\n+`disk.indices`::\n+Disk space used by the node's shards. Does not include disk space for the\n+<<index-modules-translog,translog>> or unassigned shards.\n+\n+`disk.used`::\n+Total disk space in use. Includes {es}, the node's OS, and any other\n+applications or files on the node.", "originalCommit": "a6c42ff35830f6a44997dbaf72a497765b472fff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4MDk2MA==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569580960", "bodyText": "Similarly, this comes pretty directly from the OS.", "author": "DaveCTurner", "createdAt": "2021-02-03T16:58:30Z", "path": "docs/reference/cat/allocation.asciidoc", "diffHunk": "@@ -40,6 +40,40 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-s]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-v]\n \n+[[cat-allocation-api-response-body]]\n+==== {api-response-body-title}\n+\n+`shards`::\n+Number of primary and replica shards assigned to the node.\n+\n+`disk.indices`::\n+Disk space used by the node's shards. Does not include disk space for the\n+<<index-modules-translog,translog>> or unassigned shards.\n+\n+`disk.used`::\n+Total disk space in use. Includes {es}, the node's OS, and any other\n+applications or files on the node.\n+\n+`disk.avail`::\n+Free disk space available to {es}.", "originalCommit": "a6c42ff35830f6a44997dbaf72a497765b472fff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4ODIwMg==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569588202", "bodyText": "Ah, sorry, correction: this is the number used for disk watermarks, not disk.used.", "author": "DaveCTurner", "createdAt": "2021-02-03T17:08:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4MDk2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2OTU4MjgzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/65635#discussion_r569582835", "bodyText": "Should we spell out that this is just disk.used / disk.total?", "author": "DaveCTurner", "createdAt": "2021-02-03T17:00:54Z", "path": "docs/reference/cat/allocation.asciidoc", "diffHunk": "@@ -40,6 +40,40 @@ include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-s]\n \n include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=cat-v]\n \n+[[cat-allocation-api-response-body]]\n+==== {api-response-body-title}\n+\n+`shards`::\n+Number of primary and replica shards assigned to the node.\n+\n+`disk.indices`::\n+Disk space used by the node's shards. Does not include disk space for the\n+<<index-modules-translog,translog>> or unassigned shards.\n+\n+`disk.used`::\n+Total disk space in use. Includes {es}, the node's OS, and any other\n+applications or files on the node.\n+\n+`disk.avail`::\n+Free disk space available to {es}.\n+\n+`disk.total`::\n+Total disk space for the node, including in-use and available space.\n+\n+`disk.percent`::\n+Total percentage of disk space in use. Includes {es}, the node's OS, and any", "originalCommit": "a6c42ff35830f6a44997dbaf72a497765b472fff", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "812d2bae6747b281f36db2cb8018dda4eb5c0a5e", "url": "https://github.com/elastic/elasticsearch/commit/812d2bae6747b281f36db2cb8018dda4eb5c0a5e", "message": "Apply review suggestions", "committedDate": "2021-02-03T17:26:02Z", "type": "commit"}, {"oid": "75c0c540f38745f510bc0d759e78c1cc5622dd30", "url": "https://github.com/elastic/elasticsearch/commit/75c0c540f38745f510bc0d759e78c1cc5622dd30", "message": "minor reword", "committedDate": "2021-02-03T17:29:15Z", "type": "commit"}]}