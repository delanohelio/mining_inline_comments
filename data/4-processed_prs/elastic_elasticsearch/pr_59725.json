{"pr_number": 59725, "pr_title": "[ML] handle new model metadata stream from native process", "pr_createdAt": "2020-07-16T19:23:33Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59725", "timeline": [{"oid": "96a41ac7c3fa469582e261be9c8090e6aed2a69d", "url": "https://github.com/elastic/elasticsearch/commit/96a41ac7c3fa469582e261be9c8090e6aed2a69d", "message": "[ML] handle new model metadata stream from native process", "committedDate": "2020-07-16T19:20:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMDQ1Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59725#discussion_r456020456", "bodyText": "Are these templates automatically installed when any new node comes online? Or does the new node have to be a master node?\n@dimitris-athanasiou do you know?", "author": "benwtrent", "createdAt": "2020-07-16T19:24:58Z", "path": "x-pack/plugin/core/src/main/resources/org/elasticsearch/xpack/core/ml/inference_index_template.json", "diffHunk": "@@ -2,7 +2,7 @@\n   \"order\" : 0,\n   \"version\" : ${xpack.ml.version.id},\n   \"index_patterns\" : [\n-    \".ml-inference-000002\"\n+    \".ml-inference-000003\"", "originalCommit": "96a41ac7c3fa469582e261be9c8090e6aed2a69d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjMwMzQ0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59725#discussion_r456303446", "bodyText": "Aside of the question, I believe the index pattern here should be .ml-inference-* and we shouldn't have to change this each time.\nBack to the question, all nodes get the templates installed regardless of whether they're master or not.", "author": "dimitris-athanasiou", "createdAt": "2020-07-17T08:38:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMDQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjM4MTgzMg==", "url": "https://github.com/elastic/elasticsearch/pull/59725#discussion_r456381832", "bodyText": "@dimitris-athanasiou I am not sure. What if an older node has a specific mapping in mind and tries to write to the index?\nA new index would be created with the new mapping (if it didn't already exist) and the new node does not have code to support the new mapping.\nKeeping it versioned allows only NEW nodes to reference the new index mapping.", "author": "benwtrent", "createdAt": "2020-07-17T11:22:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMDQ1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE1Mzk1NA==", "url": "https://github.com/elastic/elasticsearch/pull/59725#discussion_r457153954", "bodyText": "I see, it makes sense.", "author": "dimitris-athanasiou", "createdAt": "2020-07-20T08:03:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMDQ1Ng=="}], "type": "inlineReview"}, {"oid": "d1f201d9c66a01378bfdd46e480d108d306e419e", "url": "https://github.com/elastic/elasticsearch/commit/d1f201d9c66a01378bfdd46e480d108d306e419e", "message": "Merge branch 'master' into feature/ml-add-new-model-metadata-docs", "committedDate": "2020-07-27T11:35:55Z", "type": "commit"}, {"oid": "69d56ea46d00ecc24a2df5099938366ebb1ff345", "url": "https://github.com/elastic/elasticsearch/commit/69d56ea46d00ecc24a2df5099938366ebb1ff345", "message": "Merge remote-tracking branch 'upstream/master' into feature/ml-add-new-model-metadata-docs", "committedDate": "2020-08-11T12:31:11Z", "type": "commit"}, {"oid": "ec7339309042054881fcab665b291192dcd64ce2", "url": "https://github.com/elastic/elasticsearch/commit/ec7339309042054881fcab665b291192dcd64ce2", "message": "updating schema", "committedDate": "2020-08-11T13:04:12Z", "type": "commit"}, {"oid": "3a3f416253ab81aaf0eac3aab9986d7562b3f230", "url": "https://github.com/elastic/elasticsearch/commit/3a3f416253ab81aaf0eac3aab9986d7562b3f230", "message": "Merge branch 'master' into feature/ml-add-new-model-metadata-docs", "committedDate": "2020-08-14T14:38:16Z", "type": "commit"}, {"oid": "1116cb7500404aa55346ac784e1d000568db9b3c", "url": "https://github.com/elastic/elasticsearch/commit/1116cb7500404aa55346ac784e1d000568db9b3c", "message": "Merge remote-tracking branch 'upstream/master' into feature/ml-add-new-model-metadata-docs", "committedDate": "2020-08-14T15:34:23Z", "type": "commit"}, {"oid": "eb5d904b9f849bdf60ab9982c1f404e62c9f6ef5", "url": "https://github.com/elastic/elasticsearch/commit/eb5d904b9f849bdf60ab9982c1f404e62c9f6ef5", "message": "unmuting integration tests", "committedDate": "2020-08-14T15:35:05Z", "type": "commit"}, {"oid": "75f30b3fec497ec3aceb607e89125df503ae5f4e", "url": "https://github.com/elastic/elasticsearch/commit/75f30b3fec497ec3aceb607e89125df503ae5f4e", "message": "fixing mapping", "committedDate": "2020-08-14T20:01:22Z", "type": "commit"}]}