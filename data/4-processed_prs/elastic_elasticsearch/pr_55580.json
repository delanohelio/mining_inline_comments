{"pr_number": 55580, "pr_title": "[ML] Prepare parsing phase_progress from DFA process", "pr_createdAt": "2020-04-22T10:25:20Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55580", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg2ODg0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/55580#discussion_r412868849", "bodyText": "Shouldn't this TODO be for line 67?", "author": "przemekwitek", "createdAt": "2020-04-22T10:36:52Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/results/AnalyticsResult.java", "diffHunk": "@@ -58,6 +62,8 @@\n     }\n \n     private final RowResults rowResults;\n+    // TODO remove after process is writing out phase_progress", "originalCommit": "968d9f9ca1c77e1fdc37a3ed5f8ec994eca3de15", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjg2OTY0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/55580#discussion_r412869646", "bodyText": "Should we also print the phase?", "author": "przemekwitek", "createdAt": "2020-04-22T10:38:12Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/process/AnalyticsResultProcessor.java", "diffHunk": "@@ -164,11 +165,18 @@ private void processResult(AnalyticsResult result, DataFrameRowsJoiner resultsJo\n         if (rowResults != null) {\n             resultsJoiner.processRowResults(rowResults);\n         }\n+        PhaseProgress phaseProgress = result.getPhaseProgress();\n+        if (phaseProgress != null) {\n+            LOGGER.debug(\"[{}] Analyzing progress updated to [{}]\", analytics.getId(), phaseProgress.getProgressPercent());", "originalCommit": "968d9f9ca1c77e1fdc37a3ed5f8ec994eca3de15", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a345a66fdb81ed429aaee29d2ea177755232576c", "url": "https://github.com/elastic/elasticsearch/commit/a345a66fdb81ed429aaee29d2ea177755232576c", "message": "[ML] Prepare parsing phase_progress from DFA process\n\nData frame analytics process currently reports progress as\nan integer `progress_percent`. We parse that and report it\nfrom the _stats API as the progress of the `analyzing` phase.\nHowever, we want to allow the DFA process to report progress\nfor more than one phase. This commit prepares for this by\nparsing `phase_progress` from the process, an object that\ncontains the `phase` name plus the `progress_percent` for that\nphase.", "committedDate": "2020-04-22T11:57:46Z", "type": "commit"}, {"oid": "30010a4af3ed68beb570a101d1580f0c205754d9", "url": "https://github.com/elastic/elasticsearch/commit/30010a4af3ed68beb570a101d1580f0c205754d9", "message": "Address review comments", "committedDate": "2020-04-22T11:57:46Z", "type": "commit"}, {"oid": "a69f355829db71da50871920ed867c5224a0bb9e", "url": "https://github.com/elastic/elasticsearch/commit/a69f355829db71da50871920ed867c5224a0bb9e", "message": "Fix log message", "committedDate": "2020-04-22T11:57:46Z", "type": "commit"}, {"oid": "a69f355829db71da50871920ed867c5224a0bb9e", "url": "https://github.com/elastic/elasticsearch/commit/a69f355829db71da50871920ed867c5224a0bb9e", "message": "Fix log message", "committedDate": "2020-04-22T11:57:46Z", "type": "forcePushed"}]}