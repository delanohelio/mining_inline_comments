{"pr_number": 65441, "pr_title": "Use ValueFetcher when loading text snippets to highlight (#63572)", "pr_createdAt": "2020-11-24T16:29:33Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65441", "timeline": [{"oid": "f5e92be30d22a25962619b318dbfda04a79b5535", "url": "https://github.com/elastic/elasticsearch/commit/f5e92be30d22a25962619b318dbfda04a79b5535", "message": "Use ValueFetcher when loading text snippets to highlight (#63572)\n\nHighlighterUtils.loadFieldValues() loads values directly from the source, and\nthen callers have to deal with filtering out values that would have been removed\nby an ignore_above filter on keyword fields. Instead, we can use the\nValueFetcher for the relevant field, which handles all this logic for us.\n\nCloses #59931.", "committedDate": "2020-11-24T16:27:41Z", "type": "commit"}, {"oid": "94f94067c7ef79108bb9a9e860953ac4d90d94ab", "url": "https://github.com/elastic/elasticsearch/commit/94f94067c7ef79108bb9a9e860953ac4d90d94ab", "message": "compilation", "committedDate": "2020-11-24T16:58:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc5NTYwNA==", "url": "https://github.com/elastic/elasticsearch/pull/65441#discussion_r529795604", "bodyText": "breaking_710_blah_changes -> breaking_711_blah_changes", "author": "jtibshirani", "createdAt": "2020-11-24T18:36:06Z", "path": "docs/reference/migration/migrate_7_11.asciidoc", "diffHunk": "@@ -0,0 +1,34 @@\n+[[breaking-changes-7.11]]\n+== Breaking changes in 7.11\n+++++\n+<titleabbrev>7.11</titleabbrev>\n+++++\n+\n+This section discusses the changes that you need to be aware of when migrating\n+your application to {es} 7.11.\n+\n+See also <<release-highlights>> and <<es-release-notes>>.\n+\n+// * <<breaking_710_blah_changes>>", "originalCommit": "94f94067c7ef79108bb9a9e860953ac4d90d94ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc5NTczOA==", "url": "https://github.com/elastic/elasticsearch/pull/65441#discussion_r529795738", "bodyText": "breaking_710_search_changes -> breaking_711_search_changes", "author": "jtibshirani", "createdAt": "2020-11-24T18:36:22Z", "path": "docs/reference/migration/migrate_7_11.asciidoc", "diffHunk": "@@ -0,0 +1,34 @@\n+[[breaking-changes-7.11]]\n+== Breaking changes in 7.11\n+++++\n+<titleabbrev>7.11</titleabbrev>\n+++++\n+\n+This section discusses the changes that you need to be aware of when migrating\n+your application to {es} 7.11.\n+\n+See also <<release-highlights>> and <<es-release-notes>>.\n+\n+// * <<breaking_710_blah_changes>>\n+// * <<breaking_710_blah_changes>>\n+\n+//NOTE: The notable-breaking-changes tagged regions are re-used in the\n+//Installation and Upgrade Guide\n+\n+//tag::notable-breaking-changes[]\n+\n+[discrete]\n+[[breaking_710_search_changes]]", "originalCommit": "94f94067c7ef79108bb9a9e860953ac4d90d94ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc5NzMyNQ==", "url": "https://github.com/elastic/elasticsearch/pull/65441#discussion_r529797325", "bodyText": "Should we mention the change to copy_to as well? This is technically a breaking behavioral change, and it's nice to alert users about it because they could be able to stopping setting store: true on some fields.", "author": "jtibshirani", "createdAt": "2020-11-24T18:39:12Z", "path": "docs/reference/migration/migrate_7_11.asciidoc", "diffHunk": "@@ -0,0 +1,34 @@\n+[[breaking-changes-7.11]]\n+== Breaking changes in 7.11\n+++++\n+<titleabbrev>7.11</titleabbrev>\n+++++\n+\n+This section discusses the changes that you need to be aware of when migrating\n+your application to {es} 7.11.\n+\n+See also <<release-highlights>> and <<es-release-notes>>.\n+\n+// * <<breaking_710_blah_changes>>\n+// * <<breaking_710_blah_changes>>\n+\n+//NOTE: The notable-breaking-changes tagged regions are re-used in the\n+//Installation and Upgrade Guide\n+\n+//tag::notable-breaking-changes[]\n+\n+[discrete]\n+[[breaking_710_search_changes]]\n+=== Search changes\n+\n+[[highlight-normalization]]\n+.Keyword fields with a custom normalizer will use the normalized form when highlighting", "originalCommit": "94f94067c7ef79108bb9a9e860953ac4d90d94ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3e9e65cdc261f06eadb69e8dcf1f9b0f72aa3a4a", "url": "https://github.com/elastic/elasticsearch/commit/3e9e65cdc261f06eadb69e8dcf1f9b0f72aa3a4a", "message": "10->11", "committedDate": "2020-11-25T12:15:59Z", "type": "commit"}, {"oid": "a75bed91b68852d52947609a302f80f9611e6316", "url": "https://github.com/elastic/elasticsearch/commit/a75bed91b68852d52947609a302f80f9611e6316", "message": "Merge branch '7.x' into highlight/fetcher-7x", "committedDate": "2020-11-25T16:01:02Z", "type": "commit"}]}