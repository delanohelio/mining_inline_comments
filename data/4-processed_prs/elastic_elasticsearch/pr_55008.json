{"pr_number": 55008, "pr_title": "Fix non-deterministic behaviour in ModelLoadingServiceTests", "pr_createdAt": "2020-04-09T12:21:06Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55008", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjE2NTk3Mw==", "url": "https://github.com/elastic/elasticsearch/pull/55008#discussion_r406165973", "bodyText": "A model being evicted from the cache is a routine event and not a warning level event. I would prefer this to be debug as it really is a non-issue (the model will be reloaded if required) but there is very little insight into the internals of the cache (which models are loaded etc). Once we have a model management system this should be debug or trace.\nI'm raising here for discussion before I forget but I'd be happy to revert the change for this PR", "author": "davidkyle", "createdAt": "2020-04-09T12:23:57Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/inference/loadingservice/ModelLoadingService.java", "diffHunk": "@@ -353,9 +353,9 @@ private void auditIfNecessary(String modelId, MessageSupplier msg) {\n             logger.trace(() -> new ParameterizedMessage(\"[{}] {}\", modelId, msg.get().getFormattedMessage()));\n             return;\n         }\n-        auditor.warning(modelId, msg.get().getFormattedMessage());\n+        auditor.info(modelId, msg.get().getFormattedMessage());", "originalCommit": "47e800c54f29023601cf5825accaf36ad9b79fcd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "42baf3faec0c378acfd9d3f75ea9e9eb79728034", "url": "https://github.com/elastic/elasticsearch/commit/42baf3faec0c378acfd9d3f75ea9e9eb79728034", "message": "Fix non-deterministic behaviour in ModelLoadingServiceTests", "committedDate": "2020-04-14T08:21:45Z", "type": "commit"}, {"oid": "42baf3faec0c378acfd9d3f75ea9e9eb79728034", "url": "https://github.com/elastic/elasticsearch/commit/42baf3faec0c378acfd9d3f75ea9e9eb79728034", "message": "Fix non-deterministic behaviour in ModelLoadingServiceTests", "committedDate": "2020-04-14T08:21:45Z", "type": "forcePushed"}, {"oid": "327f0d40d4980c844731f72a0aabec4adfa8468b", "url": "https://github.com/elastic/elasticsearch/commit/327f0d40d4980c844731f72a0aabec4adfa8468b", "message": "Fix compilation after conflict", "committedDate": "2020-04-14T08:48:41Z", "type": "commit"}]}