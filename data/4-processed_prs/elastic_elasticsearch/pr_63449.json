{"pr_number": 63449, "pr_title": "[DOCS] Add grant API key API and grant_api_key privilege", "pr_createdAt": "2020-10-07T23:51:30Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/63449", "timeline": [{"oid": "68c7145e5443e1155802349c9bcfa94b211b4c73", "url": "https://github.com/elastic/elasticsearch/commit/68c7145e5443e1155802349c9bcfa94b211b4c73", "message": "[DOCS] Add grant API key API", "committedDate": "2020-10-07T23:48:10Z", "type": "commit"}, {"oid": "2ce5722271812121004f011d4e5b1c4ad50f91cc", "url": "https://github.com/elastic/elasticsearch/commit/2ce5722271812121004f011d4e5b1c4ad50f91cc", "message": "[DOCS] Add rest api spec", "committedDate": "2020-10-08T00:02:45Z", "type": "commit"}, {"oid": "80d21974317343c72aa1fc61b13a79473573901c", "url": "https://github.com/elastic/elasticsearch/commit/80d21974317343c72aa1fc61b13a79473573901c", "message": "[DOCS] Add grant_api_key cluster privilege", "committedDate": "2020-10-08T00:08:46Z", "type": "commit"}, {"oid": "3bf6841528f7ec88251c1ecb19fe1d5f26693bcc", "url": "https://github.com/elastic/elasticsearch/commit/3bf6841528f7ec88251c1ecb19fe1d5f26693bcc", "message": "[DOCS] Fixes typo in example", "committedDate": "2020-10-08T04:58:58Z", "type": "commit"}, {"oid": "1bebf25971eeb77b7063478b4b959b451354c625", "url": "https://github.com/elastic/elasticsearch/commit/1bebf25971eeb77b7063478b4b959b451354c625", "message": "[DOCS] Fixes typo", "committedDate": "2020-10-08T16:32:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE3NjAzMg==", "url": "https://github.com/elastic/elasticsearch/pull/63449#discussion_r505176032", "bodyText": "I think this description could be misinterpreted. It's based on the description on Create API key but the addtion of on behalf of another user means it might be parsed in 2 ways:\n\nOn behalf of another user, Create an API key that allows access without requiring basic authentication (the correct understanding)\nCreate an API key for access on behalf of another user, without requiring the user's authentication (incorrect).\n\nI can't find a substantially better description without dropping some part. I wonder whether we can avoid describing \"API keys\" here, and  and just say:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Creates an API key on behalf of another user for access without requiring basic\n          \n          \n            \n            authentication.\n          \n          \n            \n            Creates an API key on behalf of another user.", "author": "tvernum", "createdAt": "2020-10-15T05:39:43Z", "path": "x-pack/docs/en/rest-api/security/grant-api-keys.asciidoc", "diffHunk": "@@ -0,0 +1,133 @@\n+[role=\"xpack\"]\n+[[security-api-grant-api-key]]\n+=== Grant API key API\n+++++\n+<titleabbrev>Grant API keys</titleabbrev>\n+++++\n+\n+Creates an API key on behalf of another user for access without requiring basic\n+authentication.", "originalCommit": "1bebf25971eeb77b7063478b4b959b451354c625", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc5MzQwNg==", "url": "https://github.com/elastic/elasticsearch/pull/63449#discussion_r505793406", "bodyText": "Thanks, I've made that change in the JSON file too", "author": "lcawl", "createdAt": "2020-10-15T19:39:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE3NjAzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTE3ODU1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/63449#discussion_r505178551", "bodyText": "I think we should have an explanation of why this API exists & why someone would use it .\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            \n          \n          \n            \n            The caller must have authentication credentials (either an access token, or a username and password) for the user on whose behalf the API key will be created. It is not possible to use this API to create an API key without that user's credentials.\n          \n          \n            \n            \n          \n          \n            \n            This API is intended be used by applications that need to create and manage API keys for end users, but cannot guarantee that those users have permission to create API keys on their own behalf (see <<security-api-create-api-key-prereqs>>).", "author": "tvernum", "createdAt": "2020-10-15T05:47:33Z", "path": "x-pack/docs/en/rest-api/security/grant-api-keys.asciidoc", "diffHunk": "@@ -0,0 +1,133 @@\n+[role=\"xpack\"]\n+[[security-api-grant-api-key]]\n+=== Grant API key API\n+++++\n+<titleabbrev>Grant API keys</titleabbrev>\n+++++\n+\n+Creates an API key on behalf of another user for access without requiring basic\n+authentication.\n+\n+[[security-api-grant-api-key-request]]\n+==== {api-request-title}\n+\n+`POST /_security/api_key/grant`\n+\n+[[security-api-grant-api-key-prereqs]]\n+==== {api-prereq-title}\n+\n+* To use this API, you must have the `grant_api_key` cluster privilege.\n+\n+[[security-api-grant-api-key-desc]]\n+==== {api-description-title}\n+\n+This API is similar to <<security-api-create-api-key>>, however it creates the\n+API key for a user that is different than the user that runs the API.\n+", "originalCommit": "1bebf25971eeb77b7063478b4b959b451354c625", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "131a1ee2f89633677740891c274446643945fb10", "url": "https://github.com/elastic/elasticsearch/commit/131a1ee2f89633677740891c274446643945fb10", "message": "Update x-pack/docs/en/rest-api/security/grant-api-keys.asciidoc\n\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-10-15T19:36:22Z", "type": "commit"}, {"oid": "cb011c0949227a2b67280cb39915e43ad5e70277", "url": "https://github.com/elastic/elasticsearch/commit/cb011c0949227a2b67280cb39915e43ad5e70277", "message": "Update x-pack/docs/en/rest-api/security/grant-api-keys.asciidoc\n\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-10-15T19:37:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc5MjgxMA==", "url": "https://github.com/elastic/elasticsearch/pull/63449#discussion_r505792810", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"description\":\"Creates an API key on behalf of another user for access without requiring basic authentication.\"\n          \n          \n            \n                  \"description\":\"Creates an API key on behalf of another user.\"", "author": "lcawl", "createdAt": "2020-10-15T19:38:32Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/security.grant_api_key.json", "diffHunk": "@@ -0,0 +1,34 @@\n+{\n+  \"security.grant_api_key\":{\n+    \"documentation\":{\n+      \"url\":\"https://www.elastic.co/guide/en/elasticsearch/reference/current/security-api-grant-api-key.html\",\n+      \"description\":\"Creates an API key on behalf of another user for access without requiring basic authentication.\"", "originalCommit": "cb011c0949227a2b67280cb39915e43ad5e70277", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0ea2e3be9623f0e1e375f5447a1cb6b22bee2122", "url": "https://github.com/elastic/elasticsearch/commit/0ea2e3be9623f0e1e375f5447a1cb6b22bee2122", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/security.grant_api_key.json", "committedDate": "2020-10-15T19:38:49Z", "type": "commit"}]}