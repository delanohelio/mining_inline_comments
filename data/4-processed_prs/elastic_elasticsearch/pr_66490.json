{"pr_number": 66490, "pr_title": "Fail force-merges on read-only engines (#64756)", "pr_createdAt": "2020-12-17T08:53:04Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66490", "timeline": [{"oid": "dfea6a7c8c279324374eee578a96b6351df9483d", "url": "https://github.com/elastic/elasticsearch/commit/dfea6a7c8c279324374eee578a96b6351df9483d", "message": "Fail force-merges on read-only engines (#64756)\n\nToday we treat all force-merges on a read-only (e.g. frozen) engine as\nno-ops, indicating to the client that they succeeded even if they had no\neffect. This commit corrects that behaviour, resolving the resulting\nconfusion, by rejecting force-merges on read-only engines that are\ndefinitely not no-ops.", "committedDate": "2020-12-17T08:51:38Z", "type": "commit"}, {"oid": "555c2729bfbef9029ff5eb3bfe1140b0141cd3fe", "url": "https://github.com/elastic/elasticsearch/commit/555c2729bfbef9029ff5eb3bfe1140b0141cd3fe", "message": "Fix comments in docs", "committedDate": "2020-12-17T09:04:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDkyNTE2OA==", "url": "https://github.com/elastic/elasticsearch/pull/66490#discussion_r544925168", "bodyText": "I think we should frame this as a bug, something like:\nThis bug has been fixed in version 7.12 onwards such that a force-merge ...", "author": "henningandersen", "createdAt": "2020-12-17T09:09:23Z", "path": "docs/reference/migration/migrate_7_12.asciidoc", "diffHunk": "@@ -0,0 +1,33 @@\n+[[breaking-changes-7.12]]\n+== Breaking changes in 7.12\n+++++\n+<titleabbrev>7.12</titleabbrev>\n+++++\n+\n+This section discusses the changes that you need to be aware of when migrating\n+your application to {es} 7.12.\n+\n+See also <<release-highlights>> and <<es-release-notes>>.\n+\n+// * <<breaking_712_blah_changes>>\n+// * <<breaking_712_blah_changes>>\n+\n+//NOTE: The notable-breaking-changes tagged regions are re-used in the\n+//Installation and Upgrade Guide\n+\n+//tag::notable-breaking-changes[]\n+\n+[discrete]\n+[[breaking_712_engine_changes]]\n+=== Engine changes\n+\n+[[breaking_712_engine_forcemerge_change]]\n+.Force-merges on frozen and searchable snapshot indices will fail if merging is required\n+[%collapsible]\n+====\n+*Details* +\n+In earlier versions a force-merge on a frozen index or a searchable snapshot\n+index would yield a successful response without performing the requested merge.\n+From version 7.12 onwards a force-merge on these kinds of index will fail", "originalCommit": "555c2729bfbef9029ff5eb3bfe1140b0141cd3fe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cbcec1510584f7eda0cfbcddce48157b9d0f138a", "url": "https://github.com/elastic/elasticsearch/commit/cbcec1510584f7eda0cfbcddce48157b9d0f138a", "message": "Say it's a bug", "committedDate": "2020-12-17T09:35:35Z", "type": "commit"}]}