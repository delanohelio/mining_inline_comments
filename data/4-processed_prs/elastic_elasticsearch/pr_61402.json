{"pr_number": 61402, "pr_title": "Warn about unlicensed realms if no auth token can be extracted", "pr_createdAt": "2020-08-21T05:33:03Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61402", "timeline": [{"oid": "b02f32e395852b9f754bd1804f40e64fe3cf90a0", "url": "https://github.com/elastic/elasticsearch/commit/b02f32e395852b9f754bd1804f40e64fe3cf90a0", "message": "Add warnings for unlicensed realms when no authentication token can be extracted", "committedDate": "2020-08-21T05:29:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzMzQ5MA==", "url": "https://github.com/elastic/elasticsearch/pull/61402#discussion_r474433490", "bodyText": "Can we avoid the token word? It leads people to look at the token service and ....\nIn the section below we say No valid credentials found which is terminology that could probably be adapted to work here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            logger.warn(\"No authentication token can be extracted using realms [{}].\" +\n          \n          \n            \n                            logger.warn(\"No authentication credential could be extracted using realms [{}].\" +", "author": "tvernum", "createdAt": "2020-08-21T06:26:50Z", "path": "x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java", "diffHunk": "@@ -554,6 +554,13 @@ private void consumeToken(AuthenticationToken token) {\n          */\n         // pkg-private for tests\n         void handleNullToken() {\n+            List<Realm> unlicensedRealms = realms.getUnlicensedRealms();\n+            if (unlicensedRealms.isEmpty() == false) {\n+                logger.warn(\"No authentication token can be extracted using realms [{}].\" +", "originalCommit": "b02f32e395852b9f754bd1804f40e64fe3cf90a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8f7caff05d043f0cd04f89e3e79d7bbff0d1c8a6", "url": "https://github.com/elastic/elasticsearch/commit/8f7caff05d043f0cd04f89e3e79d7bbff0d1c8a6", "message": "Update x-pack/plugin/security/src/main/java/org/elasticsearch/xpack/security/authc/AuthenticationService.java\n\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-08-21T06:38:17Z", "type": "commit"}, {"oid": "cb282711bf78a15ce677f7a14b18a2d9b6141db4", "url": "https://github.com/elastic/elasticsearch/commit/cb282711bf78a15ce677f7a14b18a2d9b6141db4", "message": "Address feedback", "committedDate": "2020-08-21T06:39:35Z", "type": "commit"}, {"oid": "56157e7d05ea93b6068366753d265869660d04f0", "url": "https://github.com/elastic/elasticsearch/commit/56157e7d05ea93b6068366753d265869660d04f0", "message": "Merge remote-tracking branch 'origin/master' into es-61090-warn-on-unlicensed-realms", "committedDate": "2020-08-21T06:52:51Z", "type": "commit"}]}