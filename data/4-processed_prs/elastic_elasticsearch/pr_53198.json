{"pr_number": 53198, "pr_title": "Vs refactor parser cleanup", "pr_createdAt": "2020-03-05T22:21:10Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/53198", "timeline": [{"oid": "364fd48eb83e1cc0dc85d9e55966ab22528475f3", "url": "https://github.com/elastic/elasticsearch/commit/364fd48eb83e1cc0dc85d9e55966ab22528475f3", "message": "Get rid of typed field creators", "committedDate": "2020-03-05T20:33:10Z", "type": "commit"}, {"oid": "f187b34d97f7ec6cc986395ae4bf6dce210e1ed5", "url": "https://github.com/elastic/elasticsearch/commit/f187b34d97f7ec6cc986395ae4bf6dce210e1ed5", "message": "only really need one declareFields", "committedDate": "2020-03-05T20:46:08Z", "type": "commit"}, {"oid": "494ff47473bc2d266799f7222a63e3713c2a7119", "url": "https://github.com/elastic/elasticsearch/commit/494ff47473bc2d266799f7222a63e3713c2a7119", "message": "No reason to keep the helper to just hold one function", "committedDate": "2020-03-05T20:49:22Z", "type": "commit"}, {"oid": "901195b1467ceb9da9051680cef6f5434f4bf45e", "url": "https://github.com/elastic/elasticsearch/commit/901195b1467ceb9da9051680cef6f5434f4bf45e", "message": "remove isA usage from MultiVSAB", "committedDate": "2020-03-05T22:16:23Z", "type": "commit"}, {"oid": "50cf3c44d744a158ce69fb417c34a466c09a2846", "url": "https://github.com/elastic/elasticsearch/commit/50cf3c44d744a158ce69fb417c34a466c09a2846", "message": "rename for clarity (and shade)", "committedDate": "2020-03-05T22:17:16Z", "type": "commit"}, {"oid": "a830d6d6402b471b6ea30e42f55f85d980f42a67", "url": "https://github.com/elastic/elasticsearch/commit/a830d6d6402b471b6ea30e42f55f85d980f42a67", "message": "move isA hard coded logic into ValueType", "committedDate": "2020-03-06T16:57:23Z", "type": "commit"}, {"oid": "2d2a849c86950b88dbfc9d5f5ef33e121e19097e", "url": "https://github.com/elastic/elasticsearch/commit/2d2a849c86950b88dbfc9d5f5ef33e121e19097e", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/GeoBoundsAggregationBuilder.java\n\tx-pack/plugin/analytics/src/main/java/org/elasticsearch/xpack/analytics/boxplot/BoxplotAggregationBuilder.java", "committedDate": "2020-03-06T17:11:16Z", "type": "commit"}, {"oid": "b2f83fc8573740795ebf1d9807adc61256b02ded", "url": "https://github.com/elastic/elasticsearch/commit/b2f83fc8573740795ebf1d9807adc61256b02ded", "message": "Undo duplicate hack", "committedDate": "2020-03-06T17:13:57Z", "type": "commit"}, {"oid": "62d6227b194a0aaaa45b45ce30420cd2e2af814e", "url": "https://github.com/elastic/elasticsearch/commit/62d6227b194a0aaaa45b45ce30420cd2e2af814e", "message": "these can be private", "committedDate": "2020-03-06T17:26:59Z", "type": "commit"}, {"oid": "b4709cc79a71a37acb5607bf2c5c1c249e91c34c", "url": "https://github.com/elastic/elasticsearch/commit/b4709cc79a71a37acb5607bf2c5c1c249e91c34c", "message": "Fix checkstyle", "committedDate": "2020-03-06T17:38:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzMTA5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/53198#discussion_r389131099", "bodyText": "Probably a thing for later more than now: three boolean parameters can be kind of hard to keep track of. I think IntelliJ has something where it puts the names of parameters but that isn't universal. Anyway, something else might be a little more descriptive. I'm not sure what though. It certainly can wait for later too.", "author": "nik9000", "createdAt": "2020-03-06T20:36:19Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/bucket/geogrid/GeoGridAggregationBuilder.java", "diffHunk": "@@ -65,7 +64,7 @@\n \n     public static ObjectParser<GeoGridAggregationBuilder, Void> createParser(String name, PrecisionParser precisionParser) {\n         ObjectParser<GeoGridAggregationBuilder, Void> parser = new ObjectParser<>(name);\n-        ValuesSourceParserHelper.declareGeoFields(parser, false, false);\n+        ValuesSourceAggregationBuilder.declareFields(parser, false, false, false);", "originalCommit": "b4709cc79a71a37acb5607bf2c5c1c249e91c34c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE1NDA1Mg==", "url": "https://github.com/elastic/elasticsearch/pull/53198#discussion_r389154052", "bodyText": "I went back and forth on that.  The other obvious alternative is to have a declareTimeZoneAwareField and declareTimeZoneUnawareField methods, which would replace the third boolean.  But I kind of hate moving parameters into method names, so I went with this one.  I agree it's hard to keep track of though.  I suppose we could make it a small builder, but that seems like too much.  IDK.  Open to suggestions.", "author": "not-napoleon", "createdAt": "2020-03-06T21:31:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTEzMTA5OQ=="}], "type": "inlineReview"}, {"oid": "2100be5cb2da1518f3e3297e29d1be5a36994588", "url": "https://github.com/elastic/elasticsearch/commit/2100be5cb2da1518f3e3297e29d1be5a36994588", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/missing/MissingAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/sampler/DiversifiedAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/RareTermsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/terms/TermsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/AvgAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/CardinalityAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/ExtendedStatsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MaxAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MedianAbsoluteDeviationAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/MinAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/StatsAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/SumAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/ValueCountAggregationBuilder.java", "committedDate": "2020-03-06T21:56:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQ5ODk2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/53198#discussion_r390498963", "bodyText": "\ud83c\udf89", "author": "polyfractal", "createdAt": "2020-03-10T17:47:38Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "diffHunk": "@@ -291,24 +290,6 @@ public DocValueFormat getFormatter(String format, ZoneId tz) {\n     }\n     ;\n \n-    enum EquivalenceType {", "originalCommit": "2100be5cb2da1518f3e3297e29d1be5a36994588", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "898935857fced442e2486208f67686bb24502d33", "url": "https://github.com/elastic/elasticsearch/commit/898935857fced442e2486208f67686bb24502d33", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/metrics/GeoCentroidAggregationBuilder.java", "committedDate": "2020-03-11T14:00:22Z", "type": "commit"}, {"oid": "bffc7744c9be2395e38a8ad55555a0d2f818f07f", "url": "https://github.com/elastic/elasticsearch/commit/bffc7744c9be2395e38a8ad55555a0d2f818f07f", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup", "committedDate": "2020-03-12T14:56:26Z", "type": "commit"}, {"oid": "0c119ba49151d8b208d0f160b0e1c1f26b13fa88", "url": "https://github.com/elastic/elasticsearch/commit/0c119ba49151d8b208d0f160b0e1c1f26b13fa88", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup", "committedDate": "2020-03-12T18:13:42Z", "type": "commit"}, {"oid": "c52103372e409fbea658ce0d40d570314c4f5f9b", "url": "https://github.com/elastic/elasticsearch/commit/c52103372e409fbea658ce0d40d570314c4f5f9b", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-parser-cleanup\n\n Conflicts:\n\tserver/src/main/java/org/elasticsearch/search/aggregations/bucket/histogram/DateHistogramAggregationBuilder.java\n\tserver/src/main/java/org/elasticsearch/search/aggregations/support/CoreValuesSourceType.java", "committedDate": "2020-03-12T20:42:05Z", "type": "commit"}, {"oid": "f82ebe39935938e2a066c6dfa17a49f483e3fcb2", "url": "https://github.com/elastic/elasticsearch/commit/f82ebe39935938e2a066c6dfa17a49f483e3fcb2", "message": "fix AnalyticsVST complie error - forgot to add the file when merging", "committedDate": "2020-03-12T20:46:54Z", "type": "commit"}]}