{"pr_number": 57000, "pr_title": "Adding transform docs for geotile_grid", "pr_createdAt": "2020-05-20T15:52:52Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57000", "timeline": [{"oid": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "url": "https://github.com/elastic/elasticsearch/commit/4a715ecca4904e106d805e460c4b14c4d612e7d2", "message": "Adding transform docs for geotilegrid", "committedDate": "2020-05-20T15:47:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcwNjUwNw==", "url": "https://github.com/elastic/elasticsearch/pull/57000#discussion_r432706507", "bodyText": "We're trying to move to sentence-style capitalization:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ===== GeoTile Grid\n          \n          \n            \n            ===== GeoTile grid", "author": "lcawl", "createdAt": "2020-05-29T19:57:51Z", "path": "docs/reference/aggregations/bucket/composite-aggregation.asciidoc", "diffHunk": "@@ -353,6 +353,77 @@ include::datehistogram-aggregation.asciidoc[tag=offset-result-intro]\n \n include::datehistogram-aggregation.asciidoc[tag=offset-note]\n \n+[[_geotile_grid]]\n+===== GeoTile Grid", "originalCommit": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMDE0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/57000#discussion_r432710142", "bodyText": "This page is so long I don't think we should leave sentences incomplete and assume they've read all the preceding info:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Works on `geo_point` fields and groups points into buckets that represent\n          \n          \n            \n            The `geotile_grid` value source works on `geo_point` fields and groups points into buckets that represent", "author": "lcawl", "createdAt": "2020-05-29T20:06:00Z", "path": "docs/reference/aggregations/bucket/composite-aggregation.asciidoc", "diffHunk": "@@ -353,6 +353,77 @@ include::datehistogram-aggregation.asciidoc[tag=offset-result-intro]\n \n include::datehistogram-aggregation.asciidoc[tag=offset-note]\n \n+[[_geotile_grid]]\n+===== GeoTile Grid\n+\n+Works on `geo_point` fields and groups points into buckets that represent", "originalCommit": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMTU1Mg==", "url": "https://github.com/elastic/elasticsearch/pull/57000#discussion_r432711552", "bodyText": "Either a word is missing (square?) or the \"a\" should be removed. It's also unclear what \"this\" refers to so I've guessed \"precision\" though maybe it's \"cell size\"?:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            less than a 10cm by 10cm of land. This is uniquely suited for composite aggregations as each\n          \n          \n            \n            less than 10cm by 10cm of land. This precision is uniquely suited for composite aggregations as each", "author": "lcawl", "createdAt": "2020-05-29T20:09:30Z", "path": "docs/reference/aggregations/bucket/composite-aggregation.asciidoc", "diffHunk": "@@ -353,6 +353,77 @@ include::datehistogram-aggregation.asciidoc[tag=offset-result-intro]\n \n include::datehistogram-aggregation.asciidoc[tag=offset-note]\n \n+[[_geotile_grid]]\n+===== GeoTile Grid\n+\n+Works on `geo_point` fields and groups points into buckets that represent\n+cells in a grid. The resulting grid can be sparse and only contains cells\n+that have matching data. Each cell corresponds to a\n+https://en.wikipedia.org/wiki/Tiled_web_map[map tile] as used by many online map\n+sites. Each cell is labeled using a \"{zoom}/{x}/{y}\" format, where zoom is equal\n+to the user-specified precision.\n+\n+[source,console,id=composite-aggregation-geotilegrid-example]\n+--------------------------------------------------\n+GET /_search\n+{\n+    \"size\": 0,\n+    \"aggs\" : {\n+        \"my_buckets\": {\n+            \"composite\" : {\n+                \"sources\" : [\n+                    { \"tile\": { \"geotile_grid\" : { \"field\": \"location\", \"precision\": 8 } } }\n+                ]\n+            }\n+        }\n+    }\n+}\n+--------------------------------------------------\n+\n+*Precision*\n+\n+The highest-precision geotile of length 29 produces cells that cover\n+less than a 10cm by 10cm of land. This is uniquely suited for composite aggregations as each", "originalCommit": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMjgwNw==", "url": "https://github.com/elastic/elasticsearch/pull/57000#discussion_r432712807", "bodyText": "I also prefer to either qualify \"this\" or else join the sentences like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The geotile source can optionally be constrained to a specific geo bounding box. This reduces\n          \n          \n            \n            The geotile source can optionally be constrained to a specific geo bounding box, which reduces", "author": "lcawl", "createdAt": "2020-05-29T20:12:18Z", "path": "docs/reference/aggregations/bucket/composite-aggregation.asciidoc", "diffHunk": "@@ -353,6 +353,77 @@ include::datehistogram-aggregation.asciidoc[tag=offset-result-intro]\n \n include::datehistogram-aggregation.asciidoc[tag=offset-note]\n \n+[[_geotile_grid]]\n+===== GeoTile Grid\n+\n+Works on `geo_point` fields and groups points into buckets that represent\n+cells in a grid. The resulting grid can be sparse and only contains cells\n+that have matching data. Each cell corresponds to a\n+https://en.wikipedia.org/wiki/Tiled_web_map[map tile] as used by many online map\n+sites. Each cell is labeled using a \"{zoom}/{x}/{y}\" format, where zoom is equal\n+to the user-specified precision.\n+\n+[source,console,id=composite-aggregation-geotilegrid-example]\n+--------------------------------------------------\n+GET /_search\n+{\n+    \"size\": 0,\n+    \"aggs\" : {\n+        \"my_buckets\": {\n+            \"composite\" : {\n+                \"sources\" : [\n+                    { \"tile\": { \"geotile_grid\" : { \"field\": \"location\", \"precision\": 8 } } }\n+                ]\n+            }\n+        }\n+    }\n+}\n+--------------------------------------------------\n+\n+*Precision*\n+\n+The highest-precision geotile of length 29 produces cells that cover\n+less than a 10cm by 10cm of land. This is uniquely suited for composite aggregations as each\n+tile does not have to be generated and loaded in memory.\n+\n+See https://wiki.openstreetmap.org/wiki/Zoom_levels[Zoom level documentation]\n+on how precision (zoom) correlates to size on the ground. Precision for this\n+aggregation can be between 0 and 29, inclusive.\n+\n+*Bounding box filtering*\n+\n+The geotile source can optionally be constrained to a specific geo bounding box. This reduces", "originalCommit": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjcxMzg3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/57000#discussion_r432713871", "bodyText": "Qualifying another \"this\":\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the range of tiles used. This is useful if only a specific part a geographical area need high\n          \n          \n            \n            the range of tiles used. These bounds are useful when only a specific part of a geographical area needs high", "author": "lcawl", "createdAt": "2020-05-29T20:14:49Z", "path": "docs/reference/aggregations/bucket/composite-aggregation.asciidoc", "diffHunk": "@@ -353,6 +353,77 @@ include::datehistogram-aggregation.asciidoc[tag=offset-result-intro]\n \n include::datehistogram-aggregation.asciidoc[tag=offset-note]\n \n+[[_geotile_grid]]\n+===== GeoTile Grid\n+\n+Works on `geo_point` fields and groups points into buckets that represent\n+cells in a grid. The resulting grid can be sparse and only contains cells\n+that have matching data. Each cell corresponds to a\n+https://en.wikipedia.org/wiki/Tiled_web_map[map tile] as used by many online map\n+sites. Each cell is labeled using a \"{zoom}/{x}/{y}\" format, where zoom is equal\n+to the user-specified precision.\n+\n+[source,console,id=composite-aggregation-geotilegrid-example]\n+--------------------------------------------------\n+GET /_search\n+{\n+    \"size\": 0,\n+    \"aggs\" : {\n+        \"my_buckets\": {\n+            \"composite\" : {\n+                \"sources\" : [\n+                    { \"tile\": { \"geotile_grid\" : { \"field\": \"location\", \"precision\": 8 } } }\n+                ]\n+            }\n+        }\n+    }\n+}\n+--------------------------------------------------\n+\n+*Precision*\n+\n+The highest-precision geotile of length 29 produces cells that cover\n+less than a 10cm by 10cm of land. This is uniquely suited for composite aggregations as each\n+tile does not have to be generated and loaded in memory.\n+\n+See https://wiki.openstreetmap.org/wiki/Zoom_levels[Zoom level documentation]\n+on how precision (zoom) correlates to size on the ground. Precision for this\n+aggregation can be between 0 and 29, inclusive.\n+\n+*Bounding box filtering*\n+\n+The geotile source can optionally be constrained to a specific geo bounding box. This reduces\n+the range of tiles used. This is useful if only a specific part a geographical area need high", "originalCommit": "4a715ecca4904e106d805e460c4b14c4d612e7d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "43ca6b72cd6145bb51383a924c12a13f50c494dd", "url": "https://github.com/elastic/elasticsearch/commit/43ca6b72cd6145bb51383a924c12a13f50c494dd", "message": "Apply suggestions from code review\n\nCo-authored-by: Lisa Cawley <lcawley@elastic.co>", "committedDate": "2020-06-01T11:23:07Z", "type": "commit"}]}