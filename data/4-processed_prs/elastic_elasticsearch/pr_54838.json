{"pr_number": 54838, "pr_title": "HLRC support for Index Templates V2", "pr_createdAt": "2020-04-06T19:13:55Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54838", "timeline": [{"oid": "7dc97a4b88b31599c1edd76b713e5d0b6c172094", "url": "https://github.com/elastic/elasticsearch/commit/7dc97a4b88b31599c1edd76b713e5d0b6c172094", "message": "HLRC support for Index Templates V2\n\nThis change adds High Level Rest Client support for Index Templates V2.\n\nRelates to #53101", "committedDate": "2020-04-06T19:11:29Z", "type": "commit"}, {"oid": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "url": "https://github.com/elastic/elasticsearch/commit/7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "message": "remove debug comment", "committedDate": "2020-04-06T19:22:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2ODU2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404968565", "bodyText": "Super minor indentation nit here", "author": "dakrone", "createdAt": "2020-04-07T17:01:16Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -909,6 +914,36 @@ public Cancellable putTemplateAsync(PutIndexTemplateRequest putIndexTemplateRequ\n             AcknowledgedResponse::fromXContent, listener, emptySet());\n     }\n \n+    /**\n+     * Puts an index template using the Index Templates API.\n+     * See <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html\"> Index Templates API\n+     * on elastic.co</a>\n+     * @param putIndexTemplateRequest the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @return the response\n+     * @throws IOException in case there is a problem sending the request or parsing back the response\n+     */\n+    public AcknowledgedResponse putIndexTemplate(PutIndexTemplateV2Request putIndexTemplateRequest, RequestOptions options)\n+        throws IOException {\n+        return restHighLevelClient.performRequestAndParseEntity(putIndexTemplateRequest, IndicesRequestConverters::putIndexTemplate,\n+            options, AcknowledgedResponse::fromXContent, emptySet());\n+    }\n+\n+    /**\n+     * Asynchronously puts an index template using the Index Templates API.\n+     * See <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html\"> Index Templates API\n+     * on elastic.co</a>\n+     * @param putIndexTemplateRequest the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @param listener the listener to be notified upon request completion\n+     * @return cancellable that may be used to cancel the request\n+     */\n+    public Cancellable putIndexTemplateAsync(PutIndexTemplateV2Request putIndexTemplateRequest,\n+                                        RequestOptions options, ActionListener<AcknowledgedResponse> listener) {", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEwNzM2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405107363", "bodyText": "Fixed", "author": "probakowski", "createdAt": "2020-04-07T20:56:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2ODU2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2OTgwMA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404969800", "bodyText": "Another minor indentation nit here", "author": "dakrone", "createdAt": "2020-04-07T17:03:11Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -1006,6 +1071,37 @@ public Cancellable existsTemplateAsync(IndexTemplatesExistRequest indexTemplates\n             RestHighLevelClient::convertExistsResponse, listener, emptySet());\n     }\n \n+    /**\n+     * Uses the Index Templates API to determine if index templates exist\n+     *\n+     * @param indexTemplatesRequest the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @return true if any index templates in the request exist, false otherwise\n+     * @throws IOException in case there is a problem sending the request or parsing back the response\n+     */\n+    public boolean existsIndexTemplate(IndexTemplateV2ExistRequest indexTemplatesRequest,\n+                                  RequestOptions options) throws IOException {", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEwNzY1Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405107656", "bodyText": "Fixed", "author": "probakowski", "createdAt": "2020-04-07T20:56:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2OTgwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2OTg3NA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404969874", "bodyText": "Same here", "author": "dakrone", "createdAt": "2020-04-07T17:03:18Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -1006,6 +1071,37 @@ public Cancellable existsTemplateAsync(IndexTemplatesExistRequest indexTemplates\n             RestHighLevelClient::convertExistsResponse, listener, emptySet());\n     }\n \n+    /**\n+     * Uses the Index Templates API to determine if index templates exist\n+     *\n+     * @param indexTemplatesRequest the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @return true if any index templates in the request exist, false otherwise\n+     * @throws IOException in case there is a problem sending the request or parsing back the response\n+     */\n+    public boolean existsIndexTemplate(IndexTemplateV2ExistRequest indexTemplatesRequest,\n+                                  RequestOptions options) throws IOException {\n+        return restHighLevelClient.performRequest(indexTemplatesRequest,\n+            IndicesRequestConverters::templatesExist, options,\n+            RestHighLevelClient::convertExistsResponse, emptySet());\n+    }\n+\n+    /**\n+     * Uses the Index Templates API to determine if index templates exist\n+     * @param indexTemplatesExistRequest the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @param listener the listener to be notified upon request completion. The listener will be called with the value {@code true}\n+     * @return cancellable that may be used to cancel the request\n+     */\n+    public Cancellable existsIndexTemplateAsync(IndexTemplateV2ExistRequest indexTemplatesExistRequest,\n+                                                  RequestOptions options,\n+                                                  ActionListener<Boolean> listener) {", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEwNzQxOA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405107418", "bodyText": "Fixed", "author": "probakowski", "createdAt": "2020-04-07T20:56:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk2OTg3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MDIyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404970229", "bodyText": "Same here", "author": "dakrone", "createdAt": "2020-04-07T17:03:40Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -1112,6 +1208,35 @@ public Cancellable deleteTemplateAsync(DeleteIndexTemplateRequest request, Reque\n             options, AcknowledgedResponse::fromXContent, listener, emptySet());\n     }\n \n+    /**\n+     * Delete an index template using the Index Templates API\n+     * See <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html\"> Index Templates API\n+     * on elastic.co</a>\n+     *\n+     * @param request the request\n+     * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @throws IOException in case there is a problem sending the request or parsing back the response\n+     */\n+    public AcknowledgedResponse deleteIndexTemplate(DeleteIndexTemplateV2Request request, RequestOptions options) throws IOException {\n+        return restHighLevelClient.performRequestAndParseEntity(request, IndicesRequestConverters::deleteIndexTemplate,\n+            options, AcknowledgedResponse::fromXContent, emptySet());\n+    }\n+\n+    /**\n+     * Asynchronously delete an index template using the Index Templates API\n+     * See <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-templates.html\"> Index Templates API\n+     * on elastic.co</a>\n+     * @param request  the request\n+     * @param options  the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n+     * @param listener the listener to be notified upon request completion\n+     * @return cancellable that may be used to cancel the request\n+     */\n+    public Cancellable deleteIndexTemplateAsync(DeleteIndexTemplateV2Request request, RequestOptions options,\n+                                           ActionListener<AcknowledgedResponse> listener) {", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEwNzQ2OA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405107468", "bodyText": "Fixed", "author": "probakowski", "createdAt": "2020-04-07T20:56:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MDIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MDgyMQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404970821", "bodyText": "To match what we have in core, I think we should name this GetIndexTemplateV2Request (no 's').", "author": "dakrone", "createdAt": "2020-04-07T17:04:34Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/GetIndexTemplatesV2Request.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.client.Validatable;\n+import org.elasticsearch.common.Nullable;\n+import org.elasticsearch.common.unit.TimeValue;\n+\n+/**\n+ * A request to read the content of component templates\n+ */\n+public class GetIndexTemplatesV2Request implements Validatable {", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTEwNzU5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405107595", "bodyText": "Good idea, changed", "author": "probakowski", "createdAt": "2020-04-07T20:56:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MDgyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MTQyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404971429", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        throw new IllegalArgumentException(\"must provide component template name\");\n          \n          \n            \n                        throw new IllegalArgumentException(\"must provide index template name\");", "author": "dakrone", "createdAt": "2020-04-07T17:05:23Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.common.Strings;\n+\n+/**\n+ * A request to check for the existence of component templates\n+ */\n+public class IndexTemplateV2ExistRequest extends GetComponentTemplatesRequest {\n+\n+    /**\n+     * Create a request to check for the existence of component template. Name must be provided\n+     *\n+     * @param name the name of template to check for the existence of\n+     */\n+    public IndexTemplateV2ExistRequest(String name) {\n+        super(name);\n+        if (Strings.isNullOrEmpty(name)) {\n+            throw new IllegalArgumentException(\"must provide component template name\");", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MTUxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404971511", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A request to check for the existence of component templates\n          \n          \n            \n             * A request to check for the existence of index templates", "author": "dakrone", "createdAt": "2020-04-07T17:05:31Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.common.Strings;\n+\n+/**\n+ * A request to check for the existence of component templates", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MTU5OA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404971598", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Create a request to check for the existence of component template. Name must be provided\n          \n          \n            \n                 * Create a request to check for the existence of index template. Name must be provided", "author": "dakrone", "createdAt": "2020-04-07T17:05:39Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java", "diffHunk": "@@ -0,0 +1,40 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.common.Strings;\n+\n+/**\n+ * A request to check for the existence of component templates\n+ */\n+public class IndexTemplateV2ExistRequest extends GetComponentTemplatesRequest {\n+\n+    /**\n+     * Create a request to check for the existence of component template. Name must be provided", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MTg3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404971871", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Create a request to read the content of component template. If no template name is provided, all templates will\n          \n          \n            \n                 * Create a request to read the content of index template. If no template name is provided, all templates will", "author": "dakrone", "createdAt": "2020-04-07T17:06:04Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/GetIndexTemplatesV2Request.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.client.Validatable;\n+import org.elasticsearch.common.Nullable;\n+import org.elasticsearch.common.unit.TimeValue;\n+\n+/**\n+ * A request to read the content of component templates\n+ */\n+public class GetIndexTemplatesV2Request implements Validatable {\n+\n+    private final String name;\n+\n+    private TimeValue masterNodeTimeout = TimedRequest.DEFAULT_MASTER_NODE_TIMEOUT;\n+    private boolean local = false;\n+\n+    /**\n+     * Create a request to read the content of component template. If no template name is provided, all templates will", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MTk2OA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404971968", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @return the name of component template this request is requesting\n          \n          \n            \n                 * @return the name of index template this request is requesting", "author": "dakrone", "createdAt": "2020-04-07T17:06:12Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/GetIndexTemplatesV2Request.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.client.Validatable;\n+import org.elasticsearch.common.Nullable;\n+import org.elasticsearch.common.unit.TimeValue;\n+\n+/**\n+ * A request to read the content of component templates\n+ */\n+public class GetIndexTemplatesV2Request implements Validatable {\n+\n+    private final String name;\n+\n+    private TimeValue masterNodeTimeout = TimedRequest.DEFAULT_MASTER_NODE_TIMEOUT;\n+    private boolean local = false;\n+\n+    /**\n+     * Create a request to read the content of component template. If no template name is provided, all templates will\n+     * be read\n+     *\n+     * @param name the name of template to read\n+     */\n+    public GetIndexTemplatesV2Request(String name) {\n+        this.name = name;\n+    }\n+\n+    /**\n+     * @return the name of component template this request is requesting", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjE0NA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972144", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A request to create an component template.\n          \n          \n            \n             * A request to create an index template.", "author": "dakrone", "createdAt": "2020-04-07T17:06:27Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjI1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972259", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Sets the name of the component template.\n          \n          \n            \n                 * Sets the name of the index template.", "author": "dakrone", "createdAt": "2020-04-07T17:06:35Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.\n+ */\n+public class PutIndexTemplateV2Request extends TimedRequest implements ToXContentObject {\n+\n+    private String name;\n+\n+    private String cause = \"\";\n+\n+    private boolean create;\n+\n+    private IndexTemplateV2 indexTemplate;\n+\n+    /**\n+     * Sets the name of the component template.", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjM0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972345", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * The name of the component template.\n          \n          \n            \n                 * The name of the index template.", "author": "dakrone", "createdAt": "2020-04-07T17:06:43Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.\n+ */\n+public class PutIndexTemplateV2Request extends TimedRequest implements ToXContentObject {\n+\n+    private String name;\n+\n+    private String cause = \"\";\n+\n+    private boolean create;\n+\n+    private IndexTemplateV2 indexTemplate;\n+\n+    /**\n+     * Sets the name of the component template.\n+     */\n+    public PutIndexTemplateV2Request name(String name) {\n+        if (Strings.isNullOrEmpty(name)) {\n+            throw new IllegalArgumentException(\"name cannot be null or empty\");\n+        }\n+        this.name = name;\n+        return this;\n+    }\n+\n+    /**\n+     * The name of the component template.", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjQ1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972455", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Set to {@code true} to force only creation, not an update of an component template. If it already\n          \n          \n            \n                 * Set to {@code true} to force only creation, not an update of an index template. If it already", "author": "dakrone", "createdAt": "2020-04-07T17:06:51Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.\n+ */\n+public class PutIndexTemplateV2Request extends TimedRequest implements ToXContentObject {\n+\n+    private String name;\n+\n+    private String cause = \"\";\n+\n+    private boolean create;\n+\n+    private IndexTemplateV2 indexTemplate;\n+\n+    /**\n+     * Sets the name of the component template.\n+     */\n+    public PutIndexTemplateV2Request name(String name) {\n+        if (Strings.isNullOrEmpty(name)) {\n+            throw new IllegalArgumentException(\"name cannot be null or empty\");\n+        }\n+        this.name = name;\n+        return this;\n+    }\n+\n+    /**\n+     * The name of the component template.\n+     */\n+    public String name() {\n+        return this.name;\n+    }\n+\n+    /**\n+     * Set to {@code true} to force only creation, not an update of an component template. If it already", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjU1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972559", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * The component template to create.\n          \n          \n            \n                 * The index template to create.", "author": "dakrone", "createdAt": "2020-04-07T17:07:02Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.\n+ */\n+public class PutIndexTemplateV2Request extends TimedRequest implements ToXContentObject {\n+\n+    private String name;\n+\n+    private String cause = \"\";\n+\n+    private boolean create;\n+\n+    private IndexTemplateV2 indexTemplate;\n+\n+    /**\n+     * Sets the name of the component template.\n+     */\n+    public PutIndexTemplateV2Request name(String name) {\n+        if (Strings.isNullOrEmpty(name)) {\n+            throw new IllegalArgumentException(\"name cannot be null or empty\");\n+        }\n+        this.name = name;\n+        return this;\n+    }\n+\n+    /**\n+     * The name of the component template.\n+     */\n+    public String name() {\n+        return this.name;\n+    }\n+\n+    /**\n+     * Set to {@code true} to force only creation, not an update of an component template. If it already\n+     * exists, it will fail with an {@link IllegalArgumentException}.\n+     */\n+    public PutIndexTemplateV2Request create(boolean create) {\n+        this.create = create;\n+        return this;\n+    }\n+\n+    public boolean create() {\n+        return create;\n+    }\n+\n+    /**\n+     * The component template to create.", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjY2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972666", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * The cause for this component template creation.\n          \n          \n            \n                 * The cause for this index template creation.", "author": "dakrone", "createdAt": "2020-04-07T17:07:13Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java", "diffHunk": "@@ -0,0 +1,100 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.common.Strings;\n+import org.elasticsearch.common.xcontent.ToXContentObject;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+\n+import java.io.IOException;\n+\n+/**\n+ * A request to create an component template.\n+ */\n+public class PutIndexTemplateV2Request extends TimedRequest implements ToXContentObject {\n+\n+    private String name;\n+\n+    private String cause = \"\";\n+\n+    private boolean create;\n+\n+    private IndexTemplateV2 indexTemplate;\n+\n+    /**\n+     * Sets the name of the component template.\n+     */\n+    public PutIndexTemplateV2Request name(String name) {\n+        if (Strings.isNullOrEmpty(name)) {\n+            throw new IllegalArgumentException(\"name cannot be null or empty\");\n+        }\n+        this.name = name;\n+        return this;\n+    }\n+\n+    /**\n+     * The name of the component template.\n+     */\n+    public String name() {\n+        return this.name;\n+    }\n+\n+    /**\n+     * Set to {@code true} to force only creation, not an update of an component template. If it already\n+     * exists, it will fail with an {@link IllegalArgumentException}.\n+     */\n+    public PutIndexTemplateV2Request create(boolean create) {\n+        this.create = create;\n+        return this;\n+    }\n+\n+    public boolean create() {\n+        return create;\n+    }\n+\n+    /**\n+     * The component template to create.\n+     */\n+    public PutIndexTemplateV2Request indexTemplate(IndexTemplateV2 indexTemplate) {\n+        this.indexTemplate = indexTemplate;\n+        return this;\n+    }\n+\n+    /**\n+     * The cause for this component template creation.", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MjgyNA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404972824", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    exist = exist = execute(indexTemplateV2ExistRequest,\n          \n          \n            \n                    exist = execute(indexTemplateV2ExistRequest,", "author": "dakrone", "createdAt": "2020-04-07T17:07:29Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/IndicesClientIT.java", "diffHunk": "@@ -1560,4 +1568,50 @@ public void testDeleteAlias() throws IOException {\n         assertThat(aliasExists(index, alias), equalTo(false));\n         assertThat(aliasExists(index, alias2), equalTo(true));\n     }\n+    \n+    public void testIndexTemplates() throws Exception {\n+        String templateName = \"my-template\";\n+        Settings settings = Settings.builder().put(\"index.number_of_shards\", 1).build();\n+        CompressedXContent mappings = new CompressedXContent(\"{\\\"properties\\\":{\\\"host_name\\\":{\\\"type\\\":\\\"keyword\\\"}}}\");\n+        AliasMetadata alias = AliasMetadata.builder(\"alias\").writeIndex(true).build();\n+        Template template = new Template(settings, mappings, Map.of(\"alias\", alias));\n+        List<String> pattern = List.of(\"pattern\");\n+        IndexTemplateV2 indexTemplate = new IndexTemplateV2(pattern, template, Collections.emptyList(), 1L, 1L, new HashMap<>());\n+        PutIndexTemplateV2Request putIndexTemplateV2Request =\n+            new PutIndexTemplateV2Request().name(templateName).create(true).indexTemplate(indexTemplate);\n+\n+        AcknowledgedResponse response = execute(putIndexTemplateV2Request,\n+            highLevelClient().indices()::putIndexTemplate, highLevelClient().indices()::putIndexTemplateAsync);\n+        assertThat(response.isAcknowledged(), equalTo(true));\n+\n+        IndexTemplateV2ExistRequest indexTemplateV2ExistRequest = new IndexTemplateV2ExistRequest(templateName);\n+        boolean exist = execute(indexTemplateV2ExistRequest,\n+            highLevelClient().indices()::existsIndexTemplate, highLevelClient().indices()::existsIndexTemplateAsync);\n+\n+        assertTrue(exist);\n+\n+        GetIndexTemplatesV2Request getIndexTemplatesV2Request = new GetIndexTemplatesV2Request(templateName);\n+        GetIndexTemplatesV2Response getResponse = execute(getIndexTemplatesV2Request,\n+            highLevelClient().indices()::getIndexTemplate, highLevelClient().indices()::getIndexTemplateAsync);\n+\n+        assertThat(getResponse.getIndexTemplates().size(), equalTo(1));\n+        assertThat(getResponse.getIndexTemplates().containsKey(templateName), equalTo(true));\n+        assertThat(getResponse.getIndexTemplates().get(templateName), equalTo(indexTemplate));\n+\n+        DeleteIndexTemplateV2Request deleteIndexTemplateV2Request = new DeleteIndexTemplateV2Request(templateName);\n+        response = execute(deleteIndexTemplateV2Request, highLevelClient().indices()::deleteIndexTemplate,\n+            highLevelClient().indices()::deleteIndexTemplateAsync);\n+        assertThat(response.isAcknowledged(), equalTo(true));\n+\n+        ElasticsearchStatusException statusException = expectThrows(ElasticsearchStatusException.class,\n+            () -> execute(getIndexTemplatesV2Request,\n+                highLevelClient().indices()::getIndexTemplate, highLevelClient().indices()::getIndexTemplateAsync));\n+\n+        assertThat(statusException.status(), equalTo(RestStatus.NOT_FOUND));\n+\n+        exist = exist = execute(indexTemplateV2ExistRequest,", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MzQyMw==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404973423", "bodyText": "I think these methods (the randomization) can be reused from the component template tests you already added to the HLRC?", "author": "dakrone", "createdAt": "2020-04-07T17:08:25Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/indices/GetIndexTemplatesV2ResponseTests.java", "diffHunk": "@@ -0,0 +1,141 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.cluster.metadata.AliasMetadata;\n+import org.elasticsearch.cluster.metadata.IndexTemplateV2;\n+import org.elasticsearch.cluster.metadata.Template;\n+import org.elasticsearch.common.compress.CompressedXContent;\n+import org.elasticsearch.common.settings.Settings;\n+import org.elasticsearch.common.xcontent.XContentBuilder;\n+import org.elasticsearch.test.ESTestCase;\n+\n+import java.io.IOException;\n+import java.util.Arrays;\n+import java.util.Collections;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static org.elasticsearch.test.AbstractXContentTestCase.xContentTester;\n+\n+public class GetIndexTemplatesV2ResponseTests extends ESTestCase {\n+\n+    public void testFromXContent() throws Exception {\n+        xContentTester(\n+            this::createParser,\n+            GetIndexTemplatesV2ResponseTests::createTestInstance,\n+            GetIndexTemplatesV2ResponseTests::toXContent,\n+            GetIndexTemplatesV2Response::fromXContent)\n+            .supportsUnknownFields(true)\n+            .randomFieldsExcludeFilter(a -> true)\n+            .test();\n+    }\n+\n+    private static GetIndexTemplatesV2Response createTestInstance() {\n+        Map<String, IndexTemplateV2> templates = new HashMap<>();\n+        if (randomBoolean()) {\n+            int count = randomInt(10);\n+            for (int i = 0; i < count; i++) {\n+                templates.put(randomAlphaOfLength(10), randomTemplate());\n+            }\n+        }\n+        return new GetIndexTemplatesV2Response(templates);\n+    }\n+\n+    private static void toXContent(GetIndexTemplatesV2Response response, XContentBuilder builder) throws IOException {\n+        builder.startObject();\n+        builder.startArray(\"index_templates\");\n+        for (Map.Entry<String, IndexTemplateV2> e : response.getIndexTemplates().entrySet()) {\n+            builder.startObject();\n+            builder.field(\"name\", e.getKey());\n+            builder.field(\"index_template\");\n+            e.getValue().toXContent(builder, null);\n+            builder.endObject();\n+        }\n+        builder.endArray();\n+        builder.endObject();\n+    }\n+\n+    private static IndexTemplateV2 randomTemplate() {\n+        Settings settings = null;\n+        CompressedXContent mappings = null;\n+        Map<String, AliasMetadata> aliases = null;\n+        List<String> patterns = Arrays.asList(generateRandomStringArray(10, 10, false, false));\n+        List<String> composedOf = null;\n+        if (randomBoolean()) {\n+            settings = randomSettings();\n+        }\n+        if (randomBoolean()) {\n+            mappings = randomMappings();\n+        }\n+        if (randomBoolean()) {\n+            aliases = randomAliases();\n+        }\n+        if (randomBoolean()) {\n+            composedOf = Arrays.asList(generateRandomStringArray(10, 10, false, false));\n+        }\n+        Template template = new Template(settings, mappings, aliases);", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTExMjY1OA==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r405112658", "bodyText": "Yep, that's a good idea, I've changed it", "author": "probakowski", "createdAt": "2020-04-07T21:05:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3MzQyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDk3Mzg2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/54838#discussion_r404973863", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A request to read the content of component templates\n          \n          \n            \n             * A request to read the content of index templates", "author": "dakrone", "createdAt": "2020-04-07T17:09:04Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/indices/GetIndexTemplatesV2Request.java", "diffHunk": "@@ -0,0 +1,80 @@\n+/*\n+ * Licensed to Elasticsearch under one or more contributor\n+ * license agreements. See the NOTICE file distributed with\n+ * this work for additional information regarding copyright\n+ * ownership. Elasticsearch licenses this file to you under\n+ * the Apache License, Version 2.0 (the \"License\"); you may\n+ * not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *    http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.elasticsearch.client.indices;\n+\n+import org.elasticsearch.client.TimedRequest;\n+import org.elasticsearch.client.Validatable;\n+import org.elasticsearch.common.Nullable;\n+import org.elasticsearch.common.unit.TimeValue;\n+\n+/**\n+ * A request to read the content of component templates", "originalCommit": "7f9dcbe2aafb4af9b4a8d4f4fe1e06316f3194fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "38dd892eab2b36e18718ca6b9e0569ab07cd9aef", "url": "https://github.com/elastic/elasticsearch/commit/38dd892eab2b36e18718ca6b9e0569ab07cd9aef", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T20:36:35Z", "type": "commit"}, {"oid": "a1f765b659f42594fb7a3c7d49bbdc850824c206", "url": "https://github.com/elastic/elasticsearch/commit/a1f765b659f42594fb7a3c7d49bbdc850824c206", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T20:36:49Z", "type": "commit"}, {"oid": "14443a1b0c1f1befadaf49e97e55a7ee9cd9b8b4", "url": "https://github.com/elastic/elasticsearch/commit/14443a1b0c1f1befadaf49e97e55a7ee9cd9b8b4", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T20:36:55Z", "type": "commit"}, {"oid": "4ab09b38df0b0f392d957310b2076814e0a1d2e1", "url": "https://github.com/elastic/elasticsearch/commit/4ab09b38df0b0f392d957310b2076814e0a1d2e1", "message": "Update client/rest-high-level/src/test/java/org/elasticsearch/client/IndicesClientIT.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T20:37:46Z", "type": "commit"}, {"oid": "812d06c0fedf80c49da547cb1c24924be301e4b2", "url": "https://github.com/elastic/elasticsearch/commit/812d06c0fedf80c49da547cb1c24924be301e4b2", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/GetIndexTemplatesV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T20:38:35Z", "type": "commit"}, {"oid": "a3d08372c7b78c8bf399742e3c446e67f2cb6ce3", "url": "https://github.com/elastic/elasticsearch/commit/a3d08372c7b78c8bf399742e3c446e67f2cb6ce3", "message": "review comments", "committedDate": "2020-04-07T20:52:30Z", "type": "commit"}, {"oid": "bfe9a4c6af0d97ac600df28a66a9908ecf533d91", "url": "https://github.com/elastic/elasticsearch/commit/bfe9a4c6af0d97ac600df28a66a9908ecf533d91", "message": "Merge branch 'master' into hlrc-index-templates-v2", "committedDate": "2020-04-07T20:55:37Z", "type": "commit"}, {"oid": "7b26fb141311834b252e371127b1fa72d115d4fe", "url": "https://github.com/elastic/elasticsearch/commit/7b26fb141311834b252e371127b1fa72d115d4fe", "message": "review comments", "committedDate": "2020-04-07T20:57:40Z", "type": "commit"}, {"oid": "ec4fdf3104c2f04a2ce2eaa33a25b6b2a819a78f", "url": "https://github.com/elastic/elasticsearch/commit/ec4fdf3104c2f04a2ce2eaa33a25b6b2a819a78f", "message": "review comments", "committedDate": "2020-04-07T20:58:16Z", "type": "commit"}, {"oid": "15ad1d2a18c7e8ce7a900747729cc8f9005568bb", "url": "https://github.com/elastic/elasticsearch/commit/15ad1d2a18c7e8ce7a900747729cc8f9005568bb", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:03:21Z", "type": "commit"}, {"oid": "8b562f987a21f6c038378c338f8db7bcec054212", "url": "https://github.com/elastic/elasticsearch/commit/8b562f987a21f6c038378c338f8db7bcec054212", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/IndexTemplateV2ExistRequest.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:03:43Z", "type": "commit"}, {"oid": "8e4d6a57397c5bc8c6412685d9f794e3284cdc61", "url": "https://github.com/elastic/elasticsearch/commit/8e4d6a57397c5bc8c6412685d9f794e3284cdc61", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:04:18Z", "type": "commit"}, {"oid": "1bcf1dce8cfea14a9f6cf928d818dd2626269162", "url": "https://github.com/elastic/elasticsearch/commit/1bcf1dce8cfea14a9f6cf928d818dd2626269162", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:04:32Z", "type": "commit"}, {"oid": "d4364591b0141f747e27708d145a022daf0450c8", "url": "https://github.com/elastic/elasticsearch/commit/d4364591b0141f747e27708d145a022daf0450c8", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:05:04Z", "type": "commit"}, {"oid": "b54f1054abd208e75ee7f3ad16c370d2bd6b2e1c", "url": "https://github.com/elastic/elasticsearch/commit/b54f1054abd208e75ee7f3ad16c370d2bd6b2e1c", "message": "Update client/rest-high-level/src/main/java/org/elasticsearch/client/indices/PutIndexTemplateV2Request.java\n\nCo-Authored-By: Lee Hinman <dakrone@users.noreply.github.com>", "committedDate": "2020-04-07T21:05:18Z", "type": "commit"}, {"oid": "a157c5b2cf9135fa5827f7fdee715e52a97447b0", "url": "https://github.com/elastic/elasticsearch/commit/a157c5b2cf9135fa5827f7fdee715e52a97447b0", "message": "Merge branch 'master' into hlrc-index-templates-v2", "committedDate": "2020-04-07T21:45:09Z", "type": "commit"}]}