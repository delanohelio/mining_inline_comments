{"pr_number": 57040, "pr_title": "[DOCS] Reformat `shingle` token filter", "pr_createdAt": "2020-05-21T13:32:11Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57040", "timeline": [{"oid": "75fc455b8d167263464fb4ad69e75b29b45fa642", "url": "https://github.com/elastic/elasticsearch/commit/75fc455b8d167263464fb4ad69e75b29b45fa642", "message": "[DOCS] Reformat `shingle` token filter\n\nChanges:\n\n* Rewrites description and adds Lucene link\n* Adds analyze example\n* Rewrites parameter documentation\n* Updates custom analyzer and filter examples\n* Adds anchor to `index.max_shingle_diff` index-level setting", "committedDate": "2020-05-21T13:29:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczNzQ3MA==", "url": "https://github.com/elastic/elasticsearch/pull/57040#discussion_r428737470", "bodyText": "should we also say \"two-word shingles and unigrams\"?", "author": "mayya-sharipova", "createdAt": "2020-05-21T15:42:55Z", "path": "docs/reference/analysis/tokenfilters/shingle-tokenfilter.asciidoc", "diffHunk": "@@ -4,46 +4,507 @@\n <titleabbrev>Shingle</titleabbrev>\n ++++\n \n-NOTE: Shingles are generally used to help speed up phrase queries.  Rather\n-than building filter chains by hand, you may find it easier to use the\n-<<index-phrases,`index-phrases`>> option on a text field.\n-\n-A token filter of type `shingle` that constructs shingles (token\n-n-grams) from a token stream. In other words, it creates combinations of\n-tokens as a single token. For example, the sentence \"please divide this\n-sentence into shingles\" might be tokenized into shingles \"please\n-divide\", \"divide this\", \"this sentence\", \"sentence into\", and \"into\n-shingles\".\n-\n-This filter handles position increments > 1 by inserting filler tokens\n-(tokens with termtext \"_\"). It does not handle a position increment of\n-0.\n-\n-The following are settings that can be set for a `shingle` token filter\n-type:\n-\n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`max_shingle_size` |The maximum shingle size. Defaults to `2`.\n-\n-|`min_shingle_size` |The minimum shingle size. Defaults to `2`.\n-\n-|`output_unigrams` |If `true` the output will contain the input tokens\n-(unigrams) as well as the shingles. Defaults to `true`.\n-\n-|`output_unigrams_if_no_shingles` |If `output_unigrams` is `false` the\n-output will contain the input tokens (unigrams) if no shingles are\n-available. Note if `output_unigrams` is set to `true` this setting has\n-no effect. Defaults to `false`.\n-\n-|`token_separator` |The string to use when joining adjacent tokens to\n-form a shingle. Defaults to `\" \"`.\n-|`filler_token` | The string to use as a replacement for each position \n-at which there is no actual token in the stream. For instance this string is\n-used if the position increment is greater than one when a `stop` filter is used\n-together with the `shingle` filter. Defaults to `\"_\"`\n-|=======================================================================\n-\n-The index level setting `index.max_shingle_diff` controls the maximum allowed\n-difference between `max_shingle_size` and `min_shingle_size`.\n+Add shingles, or word https://en.wikipedia.org/wiki/N-gram[n-grams], to a token\n+stream by concatenating adjacent tokens. By default, the `shingle` token filter\n+creates two-word shingles.", "originalCommit": "75fc455b8d167263464fb4ad69e75b29b45fa642", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODc1OTQyMQ==", "url": "https://github.com/elastic/elasticsearch/pull/57040#discussion_r428759421", "bodyText": "Good catch. I've updated this to \"outputs two-word shingles and unigrams\".", "author": "jrodewig", "createdAt": "2020-05-21T16:14:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODczNzQ3MA=="}], "type": "inlineReview"}, {"oid": "51e6307ca2db5861af84df37fc911c03b833afb8", "url": "https://github.com/elastic/elasticsearch/commit/51e6307ca2db5861af84df37fc911c03b833afb8", "message": "address review feedback", "committedDate": "2020-05-21T16:13:58Z", "type": "commit"}]}