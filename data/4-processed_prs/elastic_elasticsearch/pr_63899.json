{"pr_number": 63899, "pr_title": "[ML] add new flag `exclude_generated` that removes generated fields in GET config APIs", "pr_createdAt": "2020-10-19T17:55:01Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/63899", "timeline": [{"oid": "707d1be54c810db8eb76aff9e3243c52c980e43e", "url": "https://github.com/elastic/elasticsearch/commit/707d1be54c810db8eb76aff9e3243c52c980e43e", "message": "[ML] adding new flag exclude_generated that removes generated fields\n\nWhen exporting and cloning ml configurations in a cluster it can be\nfrustrating to remove all the fields that were generated by\nthe plugin. Especially as the number of these fields change\nfrom version to version.\n\nThis flag, remove_generated, allows the GET config APIs to return\nconfigurations with these generated fields removed.\n\nrelates to #63055", "committedDate": "2020-10-19T17:54:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5NTIzOA==", "url": "https://github.com/elastic/elasticsearch/pull/63899#discussion_r508395238", "bodyText": "Same comment as #63093 (comment)", "author": "davidkyle", "createdAt": "2020-10-20T10:40:42Z", "path": "docs/reference/ml/df-analytics/apis/get-trained-models.asciidoc", "diffHunk": "@@ -67,7 +67,9 @@ Specifies whether the included model definition should be returned as a JSON map\n \n `for_export`::\n (Optional, boolean)\n-include::{es-repo-dir}/ml/ml-shared.asciidoc[tag=for-export]\n+Indicates if certain fields should be removed from the model configuration on", "originalCommit": "707d1be54c810db8eb76aff9e3243c52c980e43e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5NTk3OQ==", "url": "https://github.com/elastic/elasticsearch/pull/63899#discussion_r508395979", "bodyText": "Can the ml-shared.asciidoc snippit be written in a general enough way to be used here too?\nShouldn't for_export be deprecated for trained models and switch to the exclude_generated flag? Or it that for another PR", "author": "davidkyle", "createdAt": "2020-10-20T10:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5NTIzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQyOTAwMA==", "url": "https://github.com/elastic/elasticsearch/pull/63899#discussion_r508429000", "bodyText": "@davidkyle I think keeping it for_export makes sense for now as its use case is really only for export (no clone makes sense for trained models)", "author": "benwtrent", "createdAt": "2020-10-20T11:39:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5NTIzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQzNzM1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/63899#discussion_r508437353", "bodyText": "I'd much prefer the same flag was used for the same purpose in all the APIs. Trained models will look like an oddity when transforms, AD jobs and DFA all use exclude_generated\nThe use case shouldn't define the parameter name, in future there may be another reason to get the model without the generated fields e.g. copy and update the model with further training. I like exclude_generated as it describes the action that takes place rather than one possible use case.", "author": "davidkyle", "createdAt": "2020-10-20T11:53:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODM5NTIzOA=="}], "type": "inlineReview"}, {"oid": "f97b6dedcf3b77e7254982c91ee67708acc415f1", "url": "https://github.com/elastic/elasticsearch/commit/f97b6dedcf3b77e7254982c91ee67708acc415f1", "message": "changing trained model flag", "committedDate": "2020-10-20T13:39:51Z", "type": "commit"}, {"oid": "0cc601ff4bd57c9d442c7b2f460847193c606e4b", "url": "https://github.com/elastic/elasticsearch/commit/0cc601ff4bd57c9d442c7b2f460847193c606e4b", "message": "Merge remote-tracking branch 'upstream/master' into feature/ml-add-flag-for-clone-export", "committedDate": "2020-10-20T14:29:49Z", "type": "commit"}, {"oid": "2a39de4403676a0b32e241d1b80799bde6e7c3a3", "url": "https://github.com/elastic/elasticsearch/commit/2a39de4403676a0b32e241d1b80799bde6e7c3a3", "message": "fixing test", "committedDate": "2020-10-20T14:30:14Z", "type": "commit"}]}