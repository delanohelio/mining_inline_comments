{"pr_number": 61149, "pr_title": "[ML] adding docs + hlrc for data frame analysis feature_processors", "pr_createdAt": "2020-08-14T13:21:57Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61149", "timeline": [{"oid": "7b225997818fd99127716de3023c160607bcdb80", "url": "https://github.com/elastic/elasticsearch/commit/7b225997818fd99127716de3023c160607bcdb80", "message": "[ML] adding docs + hlrc for data frame analysis feature_processors", "committedDate": "2020-08-14T13:21:02Z", "type": "commit"}, {"oid": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "url": "https://github.com/elastic/elasticsearch/commit/0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "message": "[DOCS] Fixes doc build errs", "committedDate": "2020-08-14T18:20:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwNTYwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r470905605", "bodyText": "Not mandatory, but it would be nice to link to this page since we've got it:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 fields. Note, automatic categorical feature encoding will still occur for all features.\n          \n          \n            \n                 fields. Note, automatic categorical {ml-docs}/ml-feature-encoding.html[feature encoding] still occurs for all features.", "author": "lcawl", "createdAt": "2020-08-14T23:38:01Z", "path": "docs/java-rest/high-level/ml/put-data-frame-analytics.asciidoc", "diffHunk": "@@ -124,6 +124,8 @@ include-tagged::{doc-tests-file}[{api}-classification]\n <10> The seed to be used by the random generator that picks which rows are used in training.\n <11> The optimization objective to target when assigning class labels. Defaults to maximize_minimum_recall.\n <12> The number of top classes to be reported in the results. Defaults to 2.\n+<13> Custom feature processors that will create new features for analysis from the included document\n+     fields. Note, automatic categorical feature encoding will still occur for all features.", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwNTc2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r470905763", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            fields. Note, automatic categorical feature encoding will still occur for all features.\n          \n          \n            \n            fields. Note, automatic categorical {ml-docs}/ml-feature-encoding.html[feature encoding] still occurs for all features.", "author": "lcawl", "createdAt": "2020-08-14T23:38:48Z", "path": "docs/java-rest/high-level/ml/put-data-frame-analytics.asciidoc", "diffHunk": "@@ -146,6 +148,8 @@ include-tagged::{doc-tests-file}[{api}-regression]\n <10> The seed to be used by the random generator that picks which rows are used in training.\n <11> The loss function used for regression. Defaults to `mse`.\n <12> An optional parameter to the loss function.\n+<13> Custom feature processors that will create new features for analysis from the included document\n+fields. Note, automatic categorical feature encoding will still occur for all features.", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwNTg4MQ==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r470905881", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <3> The `_source` object defines fields in the dataset that will be included or\n          \n          \n            \n            <3> The `_source` object defines fields in the data set that will be included or", "author": "lcawl", "createdAt": "2020-08-14T23:39:24Z", "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -438,29 +446,29 @@ PUT _ml/data_frame/analytics/model-flight-delays-pre\n // TEST[skip:setup kibana sample data]\n \n <1> Source index to analyze.\n-<2> This query filters out entire documents that will not be present in the \n+<2> This query filters out entire documents that will not be present in the\n destination index.\n-<3> The `_source` object defines fields in the dataset that will be included or \n-excluded in the destination index. \n-<4> Defines the destination index that contains the results of the analysis and \n-the fields of the source index specified in the `_source` object. Also defines \n+<3> The `_source` object defines fields in the dataset that will be included or", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDkwNjcwMg==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r470906702", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note, automatic categorical feature encoding is still completed in the analysis.\n          \n          \n            \n            Note, automatic categorical {ml-docs}/ml-feature-encoding.html[feature encoding] still occurs.", "author": "lcawl", "createdAt": "2020-08-14T23:43:58Z", "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -522,6 +522,14 @@ The fraction of features that is used when selecting a random bag for each\n candidate split.\n end::dfas-feature-bag-fraction[]\n \n+tag::dfas-feature-processors[]\n+A collection of feature preprocessors that modify one or more included fields.\n+The analysis uses the resulting one or more features instead of the\n+original document field. Multiple `feature_processors` entries can refer to the\n+same document fields.\n+Note, automatic categorical feature encoding is still completed in the analysis.", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYwOTE2OA==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r475609168", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        .setNumTopClasses(randomBoolean() ? null : randomIntBetween(0, 10))", "author": "przemekwitek", "createdAt": "2020-08-24T13:39:59Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/ml/dataframe/ClassificationTests.java", "diffHunk": "@@ -38,9 +48,21 @@ public static Classification randomClassification() {\n             .setRandomizeSeed(randomBoolean() ? null : randomLong())\n             .setClassAssignmentObjective(randomBoolean() ? null : randomFrom(Classification.ClassAssignmentObjective.values()))\n             .setNumTopClasses(randomBoolean() ? null : randomIntBetween(0, 10))\n+            .setNumTopClasses(randomBoolean() ? null : randomIntBetween(0, 10))", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYxMjkyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r475612929", "bodyText": "Just wondering (as my Intellij also removes trailing whitespace).\nShould we piggy back the whitespace changes with our PRs or maybe there should be a separate PR to clean up the whitespace so that it is easier to review the \"real\" changes?", "author": "przemekwitek", "createdAt": "2020-08-24T13:42:41Z", "path": "docs/reference/ml/df-analytics/apis/put-dfanalytics.asciidoc", "diffHunk": "@@ -164,27 +168,27 @@ The configuration information necessary to perform\n [%collapsible%open]\n =====\n `compute_feature_influence`::::\n-(Optional, boolean) \n+(Optional, boolean)", "originalCommit": "0e0d9e5e2a8b83ea8ede552483a7001632a5b06a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYzMzAzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/61149#discussion_r475633031", "bodyText": "It is weird that trailing white spaces are there to begin with. I am not sure which is best. But backing out only the white space changes in a file would take some work/scripting.", "author": "benwtrent", "createdAt": "2020-08-24T13:59:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTYxMjkyOQ=="}], "type": "inlineReview"}, {"oid": "ec1b3abb4f4742425fa5834355b02a2e1ea2668b", "url": "https://github.com/elastic/elasticsearch/commit/ec1b3abb4f4742425fa5834355b02a2e1ea2668b", "message": "Apply suggestions from code review\n\nCo-authored-by: Przemys\u0142aw Witek <przemyslaw.witek@elastic.co>\nCo-authored-by: Lisa Cawley <lcawley@elastic.co>", "committedDate": "2020-08-24T15:16:03Z", "type": "commit"}, {"oid": "09757c45598e22c1749e90c83b904afe8afedb66", "url": "https://github.com/elastic/elasticsearch/commit/09757c45598e22c1749e90c83b904afe8afedb66", "message": "Merge branch 'master' into feature/ml-dfa-processors-hlrc-docs", "committedDate": "2020-08-24T15:16:31Z", "type": "commit"}]}