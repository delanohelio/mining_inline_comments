{"pr_number": 51089, "pr_title": "Refactor SamlAuthenticatorTests ", "pr_createdAt": "2020-01-16T10:21:43Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51089", "timeline": [{"oid": "6fd9547b76ac526280a63e2b5570a550e7d4c413", "url": "https://github.com/elastic/elasticsearch/commit/6fd9547b76ac526280a63e2b5570a550e7d4c413", "message": "Refactor SamlAuthenticatorTests\n\n- Use opensaml to sign and encrypt responses/assertions/attributes\ninstead of doing this manually\n- Use opensaml to build response and assertion objects instead of\nparsing xml strings\n\nThese changes allow us to run the tests in Azul Zulu 8 and in\nFIPS 140 JVMs", "committedDate": "2020-01-13T12:26:20Z", "type": "commit"}, {"oid": "e90a99c2dd82c0470e0f8b3443f202d51b344d2d", "url": "https://github.com/elastic/elasticsearch/commit/e90a99c2dd82c0470e0f8b3443f202d51b344d2d", "message": "Always use different keys for signing and encryption\n\nDue to FIPS 140 requirements, BouncyCastle FIPS provider will block\nRSA keys that have been used for signing from being used for encryption\nand vice versa. This commit adds new encryption specific keys to be\nused throughout the tests.", "committedDate": "2020-01-16T08:58:46Z", "type": "commit"}, {"oid": "5c61e1898fe0c905a4986c8b85161091b2e39a8a", "url": "https://github.com/elastic/elasticsearch/commit/5c61e1898fe0c905a4986c8b85161091b2e39a8a", "message": "Few changes for canonicalization attack tests", "committedDate": "2020-01-16T10:15:27Z", "type": "commit"}, {"oid": "7a4b7c3ad6cba48fc20761ec410960c9348f9e3a", "url": "https://github.com/elastic/elasticsearch/commit/7a4b7c3ad6cba48fc20761ec410960c9348f9e3a", "message": "remove TODO", "committedDate": "2020-01-16T10:16:14Z", "type": "commit"}, {"oid": "12eb9b68217ebf9bd284e23f4e9eee71cdb8b633", "url": "https://github.com/elastic/elasticsearch/commit/12eb9b68217ebf9bd284e23f4e9eee71cdb8b633", "message": "Merge remote-tracking branch 'origin/master' into opensaml-signing-tests", "committedDate": "2020-01-16T10:28:40Z", "type": "commit"}, {"oid": "e5ef6af6fe93ed133af992144cbe875754dbf906", "url": "https://github.com/elastic/elasticsearch/commit/e5ef6af6fe93ed133af992144cbe875754dbf906", "message": "Merge remote-tracking branch 'origin/master' into opensaml-signing-tests", "committedDate": "2020-05-15T15:19:04Z", "type": "commit"}, {"oid": "6b3303a0479759769ec4f0576bba47edf09a5cf5", "url": "https://github.com/elastic/elasticsearch/commit/6b3303a0479759769ec4f0576bba47edf09a5cf5", "message": "addressed feedback", "committedDate": "2020-05-15T16:21:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTcyMTcwNw==", "url": "https://github.com/elastic/elasticsearch/pull/51089#discussion_r429721707", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assumeFalse(\"Can't run in Azul Zulu JVM\",System.getProperty(\"java.vendor\", \"\").contains(\"Azul\"));\n          \n          \n            \n                    assumeFalse(\"Can't run in Azul Zulu JVM\", System.getProperty(\"java.vendor\", \"\").contains(\"Azul\"));", "author": "tvernum", "createdAt": "2020-05-25T03:55:54Z", "path": "x-pack/plugin/security/src/test/java/org/elasticsearch/xpack/security/authc/saml/SamlAuthenticatorTests.java", "diffHunk": "@@ -2198,21 +1175,47 @@ public void testIgnoredCommentsInForgedResponses() throws Exception {\n     }\n \n     public void testIgnoredCommentsInLegitimateResponses() throws Exception {\n+        assumeFalse(\"Can't run in a FIPS JVM, there is no DOM XMLSignature Factory so we can't sign XML documents\", inFipsJvm());\n+        assumeFalse(\"Can't run in Azul Zulu JVM\",System.getProperty(\"java.vendor\", \"\").contains(\"Azul\"));", "originalCommit": "6b3303a0479759769ec4f0576bba47edf09a5cf5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "01568c62f2b9b36abac2f83dfd655660e9806d7e", "url": "https://github.com/elastic/elasticsearch/commit/01568c62f2b9b36abac2f83dfd655660e9806d7e", "message": "Accept feedback\n\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-05-25T07:46:45Z", "type": "commit"}]}