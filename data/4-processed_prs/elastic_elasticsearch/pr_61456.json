{"pr_number": 61456, "pr_title": "Clarify usage of `jvm.options` in its comments", "pr_createdAt": "2020-08-24T08:13:12Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61456", "timeline": [{"oid": "dcd76b2d7760d9212ec35d49df2389ce416eea5e", "url": "https://github.com/elastic/elasticsearch/commit/dcd76b2d7760d9212ec35d49df2389ce416eea5e", "message": "Clarify usage of jvm.options in its comments\n\nSince #51882 we recommend not editing the `jvm.options` file, preferring\ninstead to override its contents with additional files in\n`jvm.options.d`. However the inline comments in this file do not point\nusers in that direction. This commit adjusts these inline comments.", "committedDate": "2020-08-24T08:08:48Z", "type": "commit"}, {"oid": "4df9828881742320376691398a2ba3c170e43c78", "url": "https://github.com/elastic/elasticsearch/commit/4df9828881742320376691398a2ba3c170e43c78", "message": "Reinstate original title", "committedDate": "2020-08-24T08:16:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc1MDk2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r475750966", "bodyText": "The wording here is a bit confusing (when I first read it, I think it is do so, my mind accidentally skipped over the first \"do not\").  Could we simplify the first clause to simply If you want to adjust any of these settings then do not edit this file;?", "author": "rjernst", "createdAt": "2020-08-24T16:43:37Z", "path": "distribution/src/config/jvm.options", "diffHunk": "@@ -16,19 +33,23 @@\n ##\n ################################################################\n \n-# Xms represents the initial size of total heap space\n-# Xmx represents the maximum size of total heap space\n+# Xms represents the initial size of the JVM heap\n+# Xmx represents the maximum size of the JVM heap\n \n -Xms${heap.min}\n -Xmx${heap.max}\n \n+\n+\n ################################################################\n ## Expert settings\n ################################################################\n ##\n-## All settings below this section are considered\n-## expert settings. Don't tamper with them unless\n-## you understand what you are doing\n+## All settings below here are considered expert settings.  Do\n+## not tamper with them unless you understand what you are\n+## doing. If you want to adjust any of these settings then do\n+## not do so by editing this file; instead, create a new file in", "originalCommit": "4df9828881742320376691398a2ba3c170e43c78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc2NDkyMw==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r475764923", "bodyText": "Good point, the line break ended up in a bad place there. I tried a few ideas and ended up copying the wording from the earlier section, see cd1b171.", "author": "DaveCTurner", "createdAt": "2020-08-24T17:07:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc1MDk2Ng=="}], "type": "inlineReview"}, {"oid": "cd1b1719e20589631f95fc01ff83bd040dd7c6b1", "url": "https://github.com/elastic/elasticsearch/commit/cd1b1719e20589631f95fc01ff83bd040dd7c6b1", "message": "Simplify wording", "committedDate": "2020-08-24T17:05:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc3OTQzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r475779439", "bodyText": "I think we want to avoid a link here, since it could easily break in the future. It also will link users to the wrong version for their version. For example, linking to current would redirect a user to 8.0.0 when that's released, but maybe they're on 7.9 and we've made breaking changes.", "author": "jasontedor", "createdAt": "2020-08-24T17:28:46Z", "path": "distribution/src/config/jvm.options", "diffHunk": "@@ -1,12 +1,29 @@\n+################################################################\n+##\n ## JVM configuration\n+##\n+################################################################\n+##\n+## WARNING: DO NOT EDIT THIS FILE. If you want to override the\n+## JVM options in this file, or set any additional options, you\n+## should create one or more files in the jvm.options.d\n+## directory containing your adjustments.\n+##\n+## See https://www.elastic.co/guide/en/elasticsearch/reference/current/jvm-options.html", "originalCommit": "cd1b1719e20589631f95fc01ff83bd040dd7c6b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwNDYxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r476204611", "bodyText": "I'm not too worried about breaking this link, the docs team put quite some effort into avoiding broken links to current docs in future versions since it's so harmful to the searchability of our docs. Note that there's prior art: we already include a link to the current heap size docs further down this file.\nI couldn't see a simple way to link to the correct version of these docs today, although this would be a nice feature to have.", "author": "DaveCTurner", "createdAt": "2020-08-25T06:24:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc3OTQzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTEwNjkzMw==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r535106933", "bodyText": "In the spirit of progress over perfection I merged this PR and opened #65808 regarding this comment.\n(edit: fixed link)", "author": "DaveCTurner", "createdAt": "2020-12-03T11:04:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc3OTQzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc4MDExMw==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r475780113", "bodyText": "I wonder if we should take this further and remove this from this file. The way I envision this working is that in JvmOptionsParser, we'd emit a -Xms1g and/or -Xmx1g if Xms (MinHeapSize) or Xmx (MaxHeapSize) are not set respectively.", "author": "jasontedor", "createdAt": "2020-08-24T17:30:02Z", "path": "distribution/src/config/jvm.options", "diffHunk": "@@ -16,19 +33,22 @@\n ##\n ################################################################\n \n-# Xms represents the initial size of total heap space\n-# Xmx represents the maximum size of total heap space\n+# Xms represents the initial size of the JVM heap\n+# Xmx represents the maximum size of the JVM heap\n \n -Xms${heap.min}\n -Xmx${heap.max}", "originalCommit": "cd1b1719e20589631f95fc01ff83bd040dd7c6b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjIwODI4NA==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r476208284", "bodyText": "Yes; does the same reasoning apply to all the other settings in this file too?\nHowever I don't have the capacity to take this work on myself at the moment.", "author": "DaveCTurner", "createdAt": "2020-08-25T06:33:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc4MDExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI2Njc0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r476266746", "bodyText": "I can pick this up - I'll raise a new issue to move the default heap settings.", "author": "pugnascotia", "createdAt": "2020-08-25T08:20:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc4MDExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI2ODY5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61456#discussion_r476268696", "bodyText": "I raised #61514.", "author": "pugnascotia", "createdAt": "2020-08-25T08:24:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc4MDExMw=="}], "type": "inlineReview"}]}