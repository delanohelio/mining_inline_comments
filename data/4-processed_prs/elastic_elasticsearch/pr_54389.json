{"pr_number": 54389, "pr_title": "Add error message in JSON response", "pr_createdAt": "2020-03-29T17:18:14Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54389", "timeline": [{"oid": "70f81b192a57ccb990fa7e7b538bec352893b9f0", "url": "https://github.com/elastic/elasticsearch/commit/70f81b192a57ccb990fa7e7b538bec352893b9f0", "message": "Add error message in JSON response\n\nWhen the SAML authentication is not successful, we return a SAML\nRespnonse with a status that indicates a failure. This commit adds\nan error message in the REST API response along with the SAML\nResponse XML string so that the caller of the API can identify\nthat this is an unsuccessful response without needing to parse the\nXML.", "committedDate": "2020-03-29T16:56:40Z", "type": "commit"}, {"oid": "50e3bc12eb63302b4ace65b26fad2f7816a40807", "url": "https://github.com/elastic/elasticsearch/commit/50e3bc12eb63302b4ace65b26fad2f7816a40807", "message": "Merge branch 'master' into return-error-init", "committedDate": "2020-03-29T18:39:59Z", "type": "commit"}, {"oid": "5ef140b2b5b49abcc919f6e9c1723d1eaca0e758", "url": "https://github.com/elastic/elasticsearch/commit/5ef140b2b5b49abcc919f6e9c1723d1eaca0e758", "message": "Merge remote-tracking branch 'origin/master' into return-error-init", "committedDate": "2020-03-30T17:24:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY0MDgyNA==", "url": "https://github.com/elastic/elasticsearch/pull/54389#discussion_r400640824", "bodyText": "Is the contract that if error is null then it's a success and if it's non-null then there's a failure?", "author": "tvernum", "createdAt": "2020-03-31T04:47:12Z", "path": "x-pack/plugin/identity-provider/src/main/java/org/elasticsearch/xpack/idp/saml/rest/action/RestSamlInitiateSingleSignOnAction.java", "diffHunk": "@@ -65,6 +65,7 @@ public RestResponse buildResponse(SamlInitiateSingleSignOnResponse response, XCo\n                         builder.startObject();\n                         builder.field(\"post_url\", response.getPostUrl());\n                         builder.field(\"saml_response\", response.getSamlResponse());\n+                        builder.field(\"error\", response.getError());", "originalCommit": "50e3bc12eb63302b4ace65b26fad2f7816a40807", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY1NjUyMQ==", "url": "https://github.com/elastic/elasticsearch/pull/54389#discussion_r400656521", "bodyText": "yes. I contemplated adding a boolean isSuccess field but felt like this extra check wouldn't make much sense on the consumer side but I don't feel strongly about it if you think it makes this clearer/easier to consume.", "author": "jkakavas", "createdAt": "2020-03-31T05:44:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY0MDgyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY2OTQ4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54389#discussion_r400669486", "bodyText": "It feels a little weird, but I can't think of anything better, unless we add the saml status as well.", "author": "tvernum", "createdAt": "2020-03-31T06:24:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY0MDgyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDc4MTM4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54389#discussion_r400781386", "bodyText": "I ended up doing just that after all", "author": "jkakavas", "createdAt": "2020-03-31T09:47:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDY0MDgyNA=="}], "type": "inlineReview"}, {"oid": "595e3ae20893172914b391f3d657a8b5ac309807", "url": "https://github.com/elastic/elasticsearch/commit/595e3ae20893172914b391f3d657a8b5ac309807", "message": "Clean up SamlAuthenticationState and add the SAML StatusCode in the\nresponse", "committedDate": "2020-03-31T09:32:27Z", "type": "commit"}, {"oid": "1a133dba930febf801c48fa353598c6955932590", "url": "https://github.com/elastic/elasticsearch/commit/1a133dba930febf801c48fa353598c6955932590", "message": "Merge remote-tracking branch 'origin/master' into return-error-init", "committedDate": "2020-03-31T09:46:28Z", "type": "commit"}, {"oid": "8ba17aee250094425993af176db1e15900debd67", "url": "https://github.com/elastic/elasticsearch/commit/8ba17aee250094425993af176db1e15900debd67", "message": "Merge branch 'return-error-init' of github.com:jkakavas/elasticsearch into return-error-init", "committedDate": "2020-03-31T09:46:48Z", "type": "commit"}, {"oid": "91f6d298c0228575800a67e270ec74482c944a73", "url": "https://github.com/elastic/elasticsearch/commit/91f6d298c0228575800a67e270ec74482c944a73", "message": "fix test", "committedDate": "2020-03-31T10:12:43Z", "type": "commit"}, {"oid": "be784af3d1953b3da5a3c232881f2cb505f4b137", "url": "https://github.com/elastic/elasticsearch/commit/be784af3d1953b3da5a3c232881f2cb505f4b137", "message": "actually fix that test", "committedDate": "2020-03-31T10:47:09Z", "type": "commit"}]}