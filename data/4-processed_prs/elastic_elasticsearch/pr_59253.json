{"pr_number": 59253, "pr_title": "[ML] Add REST spec for the update data frame analytics endpoint", "pr_createdAt": "2020-07-08T20:40:51Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59253", "timeline": [{"oid": "851d523c710b9cad9838e704bdc3b1a473b5f7be", "url": "https://github.com/elastic/elasticsearch/commit/851d523c710b9cad9838e704bdc3b1a473b5f7be", "message": "[ML] Add REST spec for the update data frame analytics endpoint\n\nCloses #59148", "committedDate": "2020-07-08T20:37:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r451821139", "bodyText": "I don't see a update_data_frame_analytics.json definition file.", "author": "benwtrent", "createdAt": "2020-07-08T20:57:51Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/test/ml/data_frame_analytics_crud.yml", "diffHunk": "@@ -2100,3 +2100,53 @@ setup:\n               \"includes\": [\"excluded\"]\n             }\n           }\n+\n+---\n+\"Test update given all updatable settings\":\n+\n+  - do:\n+      ml.put_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"source\": {\n+              \"index\": \"index-source\"\n+            },\n+            \"dest\": {\n+              \"index\": \"index-dest\"\n+            },\n+            \"analysis\": {\"outlier_detection\":{}},\n+            \"description\": \"before update\",\n+            \"model_memory_limit\": \"20mb\",\n+            \"allow_lazy_start\": false\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"before update\" }\n+  - match: { model_memory_limit: \"20mb\" }\n+  - match: { allow_lazy_start: false }\n+\n+  - do:\n+      ml.update_data_frame_analytics:\n+        id: \"update-test-job\"\n+        body: >\n+          {\n+            \"description\": \"after update\",\n+            \"model_memory_limit\": \"30mb\",\n+            \"allow_lazy_start\": true\n+          }\n+  - match: { id: \"update-test-job\" }\n+  - match: { description: \"after update\" }\n+  - match: { model_memory_limit: \"30mb\" }\n+  - match: { allow_lazy_start: true }\n+\n+---\n+\"Test update given missing analytics\":\n+\n+  - do:\n+      catch: missing\n+      ml.update_data_frame_analytics:", "originalCommit": "851d523c710b9cad9838e704bdc3b1a473b5f7be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxMzM4OA==", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452013388", "bodyText": "Me neither.\nApart from that, the test looks good!", "author": "przemekwitek", "createdAt": "2020-07-09T07:19:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjAxNDEwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452014105", "bodyText": "Yeah, I never added it :-(", "author": "dimitris-athanasiou", "createdAt": "2020-07-09T07:21:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTgyMTEzOQ=="}], "type": "inlineReview"}, {"oid": "7faf1e2b7d7074be07b7ca3284894e050ed54f1c", "url": "https://github.com/elastic/elasticsearch/commit/7faf1e2b7d7074be07b7ca3284894e050ed54f1c", "message": "Add the spec", "committedDate": "2020-07-09T07:20:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2ODI2NA==", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452068264", "bodyText": "It looks like the docs url already publish on elastic.co is different:\n- https://www.elastic.co/guide/en/elasticsearch/reference/current/update-df-analytics.html\n+ https://www.elastic.co/guide/en/elasticsearch/reference/current/update-dfanalytics.html", "author": "delvedor", "createdAt": "2020-07-09T08:57:02Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.update_data_frame_analytics.json", "diffHunk": "@@ -0,0 +1,29 @@\n+{\n+  \"ml.update_data_frame_analytics\":{\n+    \"documentation\":{\n+      \"url\":\"https://www.elastic.co/guide/en/elasticsearch/reference/current/update-df-analytics.html\",", "originalCommit": "7faf1e2b7d7074be07b7ca3284894e050ed54f1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA3MDc0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/59253#discussion_r452070742", "bodyText": "Ah, well spotted. I'll fix it.", "author": "dimitris-athanasiou", "createdAt": "2020-07-09T09:01:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjA2ODI2NA=="}], "type": "inlineReview"}]}