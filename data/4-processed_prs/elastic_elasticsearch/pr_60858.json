{"pr_number": 60858, "pr_title": "[DOCS] [7.8] Clarify HTTPS usage for create key API", "pr_createdAt": "2020-08-07T10:34:22Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60858", "timeline": [{"oid": "49433cb192216aa86f0691256ff9e3ab645e6432", "url": "https://github.com/elastic/elasticsearch/commit/49433cb192216aa86f0691256ff9e3ab645e6432", "message": "Update create-api-keys.asciidoc\n\nSince API_key has to be enabled when TLS is also enabled on the HTTP interface, should that example be using https to be consistent?", "committedDate": "2020-08-07T10:33:22Z", "type": "commit"}, {"oid": "e665a8786cda0e2006d11e26852199d14d6ce922", "url": "https://github.com/elastic/elasticsearch/commit/e665a8786cda0e2006d11e26852199d14d6ce922", "message": "Adding note to create API keys for https", "committedDate": "2020-08-18T16:26:01Z", "type": "commit"}, {"oid": "919e667077aaaecc869f4c6a8a2c873e9ebe807b", "url": "https://github.com/elastic/elasticsearch/commit/919e667077aaaecc869f4c6a8a2c873e9ebe807b", "message": "Adding note for enabling TLS", "committedDate": "2020-08-18T16:33:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQzODg5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/60858#discussion_r474438899", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: If your node is configured to use SSL in a production environment, then you must specify `https` when creating your API key.\n          \n          \n            \n            NOTE: If your node has `xpack.security.http.ssl.enabled` set to `true`, then you must specify `https` when creating your API key.\n          \n      \n    \n    \n  \n\nThe \"production environment\" wording is a bit misleading, since you can have SSL enabled in a non-production environment, in which case you would still need https.\nIt's also necessary (if we want to be perfectly accurate) to distinguish between SSL for the transport port and the HTTP port.\nI used the setting name because it read better to me than \"If you use SSL on the HTTP port ...\"", "author": "tvernum", "createdAt": "2020-08-21T06:41:48Z", "path": "x-pack/docs/en/rest-api/security/create-api-keys.asciidoc", "diffHunk": "@@ -123,6 +123,8 @@ The API key returned by this API can then be used by sending a request with a\n `Authorization` header with a value having the prefix `ApiKey` followed\n by the _credentials_, where _credentials_ is the base64 encoding of `id` and `api_key` joined by a colon.\n \n+NOTE: If your node is configured to use SSL in a production environment, then you must specify `https` when creating your API key.", "originalCommit": "919e667077aaaecc869f4c6a8a2c873e9ebe807b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQ0MDU1MA==", "url": "https://github.com/elastic/elasticsearch/pull/60858#discussion_r474440550", "bodyText": "I think if I were reading this, I would be confused as to whether it's required on production environments or not.\nThe sentence before says you only need it for certain features, but then this sentence say it's not required on non-production environments, but doesn't link back to those features.\nPerhaps something more like\nNOTE: Enabling TLS on the HTTP layer is strongly recommended but is not required.\n\nIMPORTANT: In a production environment, some {es} features such as\ntokens and API keys, will be disabled unless you enable TLS on the HTTP layer.\n\nAlso, I think production environment should probably link to https://www.elastic.co/guide/en/elasticsearch/reference/current/bootstrap-checks.html#dev-vs-prod-mode", "author": "tvernum", "createdAt": "2020-08-21T06:46:32Z", "path": "x-pack/docs/en/security/securing-communications/tls-http.asciidoc", "diffHunk": "@@ -5,10 +5,29 @@\n When {security-features} are enabled, you can optionally use TLS to ensure that\n communication between HTTP clients and the cluster is encrypted.\n \n-NOTE: Enabling TLS on the HTTP layer is strongly recommended but is not required.\n-If you enable TLS on the HTTP layer in {es}, then you might need to make\n-configuration changes in other parts of the {stack} and in any {es} clients that\n-you use.\n+IMPORTANT: You must enable TLS on the HTTP layer to use certain {es} features\n+in a production environment, such as tokens and API keys.\n+\n+Enabling TLS on the HTTP layer is strongly recommended for non-production\n+deployments, but is not required.", "originalCommit": "919e667077aaaecc869f4c6a8a2c873e9ebe807b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTkwMTc0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/60858#discussion_r475901749", "bodyText": "Thanks for the feedback @tvernum. I incorporated those changes into the Encrypting HTTP client communications page.", "author": "lockewritesdocs", "createdAt": "2020-08-24T21:21:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDQ0MDU1MA=="}], "type": "inlineReview"}, {"oid": "21d8eda74870b947db639dd29f34fab40d831c78", "url": "https://github.com/elastic/elasticsearch/commit/21d8eda74870b947db639dd29f34fab40d831c78", "message": "Merge branch '7.8' into Leaf-Lin-patch-3", "committedDate": "2020-08-21T06:49:19Z", "type": "commit"}, {"oid": "7d7997b4c059d2b8c6f36ffb8f31aa7be7b2bf7a", "url": "https://github.com/elastic/elasticsearch/commit/7d7997b4c059d2b8c6f36ffb8f31aa7be7b2bf7a", "message": "Add specific setting for ssl.enabled\n\nCo-authored-by: Tim Vernum <tim.vernum@elastic.co>", "committedDate": "2020-08-24T15:18:38Z", "type": "commit"}, {"oid": "f676f6990a7c91fef8fdb42f8ec3158b46d70745", "url": "https://github.com/elastic/elasticsearch/commit/f676f6990a7c91fef8fdb42f8ec3158b46d70745", "message": "Incorporating review feedback", "committedDate": "2020-08-24T20:42:48Z", "type": "commit"}]}