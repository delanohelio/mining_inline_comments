{"pr_number": 58160, "pr_title": "MappedFieldType should not extend FieldType (#57666)", "pr_createdAt": "2020-06-16T09:47:20Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58160", "timeline": [{"oid": "3d1f71efe47e5ca3ac488a669df15611edb35bda", "url": "https://github.com/elastic/elasticsearch/commit/3d1f71efe47e5ca3ac488a669df15611edb35bda", "message": "MappedFieldType should not extend FieldType (#57666)\n\nMappedFieldType is a combination of two concerns:\n\n* an extension of lucene's FieldType, defining how a field should be indexed\n* a set of query factory methods, defining how a field should be searched\n\nWe want to break these two concerns apart. This commit is a first step to doing this, breaking\nthe inheritance relationship between MappedFieldType and FieldType. MappedFieldType\ninstead has a series of boolean flags defining whether or not the field is searchable or\naggregatable, and FieldMapper has a separate FieldType passed to its constructor defining\nhow indexing should be done.\n\nRelates to #56814", "committedDate": "2020-06-16T09:35:57Z", "type": "commit"}, {"oid": "352deb8cca2a9209dc0b793e8dab62223837593f", "url": "https://github.com/elastic/elasticsearch/commit/352deb8cca2a9209dc0b793e8dab62223837593f", "message": "tests", "committedDate": "2020-06-16T10:07:08Z", "type": "commit"}, {"oid": "9d1b01c73271c45520cd7671ca6e14e3b1a3ba3e", "url": "https://github.com/elastic/elasticsearch/commit/9d1b01c73271c45520cd7671ca6e14e3b1a3ba3e", "message": "Merge remote-tracking branch 'origin/7.x' into mapper/fieldtype-7x", "committedDate": "2020-06-16T10:22:13Z", "type": "commit"}, {"oid": "75b8b32cfdafc9c9699455b5d64b77eb3dcdb4a4", "url": "https://github.com/elastic/elasticsearch/commit/75b8b32cfdafc9c9699455b5d64b77eb3dcdb4a4", "message": "type field; sparse vectors", "committedDate": "2020-06-16T11:11:53Z", "type": "commit"}, {"oid": "dfe1ec7167896dcc316b37e0ee075385c16a021a", "url": "https://github.com/elastic/elasticsearch/commit/dfe1ec7167896dcc316b37e0ee075385c16a021a", "message": "precommit", "committedDate": "2020-06-16T11:39:54Z", "type": "commit"}, {"oid": "0ee9fb1ddd53ccddc30ef9e205ba69830bd6d6df", "url": "https://github.com/elastic/elasticsearch/commit/0ee9fb1ddd53ccddc30ef9e205ba69830bd6d6df", "message": "binary field serialization", "committedDate": "2020-06-16T12:08:48Z", "type": "commit"}, {"oid": "e025b21fca679adb4ad4d61dba0608003895da23", "url": "https://github.com/elastic/elasticsearch/commit/e025b21fca679adb4ad4d61dba0608003895da23", "message": "binary docvalues", "committedDate": "2020-06-16T14:18:09Z", "type": "commit"}, {"oid": "8c094a674f3e5dd33ac5ad70667d80c1d5f3d225", "url": "https://github.com/elastic/elasticsearch/commit/8c094a674f3e5dd33ac5ad70667d80c1d5f3d225", "message": "legacygeoshape norms", "committedDate": "2020-06-16T14:46:36Z", "type": "commit"}, {"oid": "5460c235be245bb0c8624d60899bd24854fc11f7", "url": "https://github.com/elastic/elasticsearch/commit/5460c235be245bb0c8624d60899bd24854fc11f7", "message": "Merge remote-tracking branch 'origin/7.x' into mapper/fieldtype-7x", "committedDate": "2020-06-16T14:47:00Z", "type": "commit"}, {"oid": "e21f5c5ad4fdabf08f7524a478f7c86d7bf3df0b", "url": "https://github.com/elastic/elasticsearch/commit/e21f5c5ad4fdabf08f7524a478f7c86d7bf3df0b", "message": "npe", "committedDate": "2020-06-16T15:09:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDc2MjQxNA==", "url": "https://github.com/elastic/elasticsearch/pull/58160#discussion_r580762414", "bodyText": "Is it possible that this pull request causes #69401? In 7.9.0 geo_point fields are always indexed, that is a regression, since it was possible to make geo_point fields not indexable in earlier versions.", "author": "plebedev", "createdAt": "2021-02-23T04:31:10Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/AbstractGeometryFieldMapper.java", "diffHunk": "@@ -76,18 +82,19 @@\n         Parsed parse(XContentParser parser, AbstractGeometryFieldMapper mapper) throws IOException, ParseException;\n     }\n \n-    public abstract static class Builder<T extends Builder, FT extends AbstractGeometryFieldType>\n+    public abstract static class Builder<T extends Builder<T, FT>, FT extends AbstractGeometryFieldType>\n             extends FieldMapper.Builder<T> {\n         protected Boolean ignoreMalformed;\n         protected Boolean ignoreZValue;\n+        protected boolean indexed = true;", "originalCommit": "e21f5c5ad4fdabf08f7524a478f7c86d7bf3df0b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}