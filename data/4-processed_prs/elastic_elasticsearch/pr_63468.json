{"pr_number": 63468, "pr_title": "Add release 7.10 highlights", "pr_createdAt": "2020-10-08T12:11:25Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/63468", "timeline": [{"oid": "66212f75386217397c09cca59bb9b952741894d3", "url": "https://github.com/elastic/elasticsearch/commit/66212f75386217397c09cca59bb9b952741894d3", "message": "Add release highlights", "committedDate": "2020-10-08T12:09:16Z", "type": "commit"}, {"oid": "aca57f9b3a5dcfdd71ace16dcc896a139f490be0", "url": "https://github.com/elastic/elasticsearch/commit/aca57f9b3a5dcfdd71ace16dcc896a139f490be0", "message": "Reword several sections", "committedDate": "2020-10-08T18:16:35Z", "type": "commit"}, {"oid": "87703d1abbd326bc93d048ede5cffd9d2bd56cdb", "url": "https://github.com/elastic/elasticsearch/commit/87703d1abbd326bc93d048ede5cffd9d2bd56cdb", "message": "Reword circuit breaker sentence", "committedDate": "2020-10-08T18:20:40Z", "type": "commit"}, {"oid": "fc4081189a545d3092777e3bab87f06bbe2f6766", "url": "https://github.com/elastic/elasticsearch/commit/fc4081189a545d3092777e3bab87f06bbe2f6766", "message": "Reword system indices section", "committedDate": "2020-10-08T18:30:34Z", "type": "commit"}, {"oid": "bbb45e04d691aaeecbcb40bd8bba910d0f9dc322", "url": "https://github.com/elastic/elasticsearch/commit/bbb45e04d691aaeecbcb40bd8bba910d0f9dc322", "message": "Fix snippets", "committedDate": "2020-10-08T18:34:25Z", "type": "commit"}, {"oid": "e21a06194ec8815cd32f02be7b294f7f63821056", "url": "https://github.com/elastic/elasticsearch/commit/e21a06194ec8815cd32f02be7b294f7f63821056", "message": "Add anchors", "committedDate": "2020-10-08T18:45:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNzMzMA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501937330", "bodyText": "This feels more like a breaking change to me. @gwbrown Do you have any thoughts?", "author": "jrodewig", "createdAt": "2020-10-08T18:44:06Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,154 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax-comparison-operators.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+=== Deprecating REST API access to system indices\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`", "originalCommit": "bbb45e04d691aaeecbcb40bd8bba910d0f9dc322", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk5MzQ0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501993446", "bodyText": "While it doesn't actually \"break\" anything, that may be a better place to put it. My main concern is that it goes somewhere highly visible.", "author": "gwbrown", "createdAt": "2020-10-08T20:29:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNzMzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAzNDY1Nw==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r502034657", "bodyText": "I agree. I'll leave this here and add a related item to #63479.", "author": "jrodewig", "createdAt": "2020-10-08T21:55:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNzMzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNzMzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501937335", "bodyText": "@jaymode I made some changes here. Do you mind reviewing to ensure everything looks good to you?", "author": "jrodewig", "createdAt": "2020-10-08T18:44:07Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,154 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax-comparison-operators.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+=== Deprecating REST API access to system indices\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage memory for\n+read operations performed by system indices. Similarly, `system_write` is a\n+`fixed` thread pool used to manage memory for write operations performed by\n+system indices. Both have a maximum number of threads equal to `5`\n+or half of the available processors, whichever is smaller.\n+\n+[discrete]\n+[[metadata-flag-system-indices]]\n+=== New metadata flag for system indices\n+\n+To prevent performance issues related to searches that accidentally target\n+system indices, we've added a new metadata flag to mark system and non-system\n+indices. {es} will automatically add this flag to an existing system indices\n+during upgrade.", "originalCommit": "bbb45e04d691aaeecbcb40bd8bba910d0f9dc322", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzNzcxNg==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501937716", "bodyText": "This one was pretty outdated originally. @costin let me know if there are any other items we want to highlight here.", "author": "jrodewig", "createdAt": "2020-10-08T18:44:45Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,154 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax-comparison-operators.html[EQL\n+syntax documentation].", "originalCommit": "bbb45e04d691aaeecbcb40bd8bba910d0f9dc322", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTkzOTA4OA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501939088", "bodyText": "@dnhatn @jimczi You mind reviewing this section?", "author": "jrodewig", "createdAt": "2020-10-08T18:47:13Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search", "originalCommit": "e21a06194ec8815cd32f02be7b294f7f63821056", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e976ff0d27acb62948bf8b8471b98cffe819618f", "url": "https://github.com/elastic/elasticsearch/commit/e976ff0d27acb62948bf8b8471b98cffe819618f", "message": "Fix xref", "committedDate": "2020-10-08T19:03:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk1MjA3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501952072", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To prevent performance issues related to searches that accidentally target\n          \n          \n            \n            To prevent performance issues related to searches that target", "author": "jaymode", "createdAt": "2020-10-08T19:09:52Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is now deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage memory for\n+read operations performed by system indices. Similarly, `system_write` is a\n+`fixed` thread pool used to manage memory for write operations performed by\n+system indices. Both have a maximum number of threads equal to `5`\n+or half of the available processors, whichever is smaller.\n+\n+[discrete]\n+[[metadata-flag-system-indices]]\n+=== New metadata flag for system indices\n+\n+To prevent performance issues related to searches that accidentally target", "originalCommit": "e976ff0d27acb62948bf8b8471b98cffe819618f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk1MjMzMA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501952330", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `system_write`. `system_read` is a `fixed` thread pool used to manage memory for\n          \n          \n            \n            `system_write`. `system_read` is a `fixed` thread pool used to manage resources for", "author": "jaymode", "createdAt": "2020-10-08T19:10:20Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is now deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage memory for", "originalCommit": "e976ff0d27acb62948bf8b8471b98cffe819618f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk1MjU5OA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501952598", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `fixed` thread pool used to manage memory for write operations performed by\n          \n          \n            \n            `fixed` thread pool used to manage resources for write operations targeting", "author": "jaymode", "createdAt": "2020-10-08T19:10:51Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is now deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage memory for\n+read operations performed by system indices. Similarly, `system_write` is a\n+`fixed` thread pool used to manage memory for write operations performed by", "originalCommit": "e976ff0d27acb62948bf8b8471b98cffe819618f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk1Mjc1NA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501952754", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            read operations performed by system indices. Similarly, `system_write` is a\n          \n          \n            \n            read operations targeting system indices. Similarly, `system_write` is a", "author": "jaymode", "createdAt": "2020-10-08T19:11:05Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\windows\\\\system32\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is now deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n+\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage memory for\n+read operations performed by system indices. Similarly, `system_write` is a", "originalCommit": "e976ff0d27acb62948bf8b8471b98cffe819618f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "048486f990b4225fd31c1fbae54c3b5c6824b93e", "url": "https://github.com/elastic/elasticsearch/commit/048486f990b4225fd31c1fbae54c3b5c6824b93e", "message": "Apply suggestions from code review\n\nCo-authored-by: Jay Modi <jaymode@users.noreply.github.com>", "committedDate": "2020-10-08T19:52:12Z", "type": "commit"}, {"oid": "f715955dcd7e8f28269060362fca16467ac51de4", "url": "https://github.com/elastic/elasticsearch/commit/f715955dcd7e8f28269060362fca16467ac51de4", "message": "Fix EQL snippet", "committedDate": "2020-10-08T20:01:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk5MzQ3Mw==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r501993473", "bodyText": "These lines are incorrect and should be removed.", "author": "gwbrown", "createdAt": "2020-10-08T20:29:19Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -24,18 +24,156 @@ Other versions:\n | {ref-bare}/7.0/release-highlights-7.0.0.html[7.0]\n \n \n-\n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n // tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\\\\\windows\\\\\\\\system32\\\\\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is now deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future major version, direct access to system indices will be prevented by default\n+----\n+\n+To allow projects external to {es} additional time to adjust their access\n+patterns, these warnings are currently enabled for snapshot builds only.", "originalCommit": "f715955dcd7e8f28269060362fca16467ac51de4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAyNjIzMA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r502026230", "bodyText": "Thanks @gwbrown. Removed with d607c79.", "author": "jrodewig", "createdAt": "2020-10-08T21:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTk5MzQ3Mw=="}], "type": "inlineReview"}, {"oid": "d607c79fbbd1da307ac5b03bcd2b9e78c5018a13", "url": "https://github.com/elastic/elasticsearch/commit/d607c79fbbd1da307ac5b03bcd2b9e78c5018a13", "message": "Remove sentence from REST system indices section", "committedDate": "2020-10-08T21:34:52Z", "type": "commit"}, {"oid": "49f5d9b1ec4bd5c94f9003120a8eed7cbaa8a64d", "url": "https://github.com/elastic/elasticsearch/commit/49f5d9b1ec4bd5c94f9003120a8eed7cbaa8a64d", "message": "Merge remote-tracking branch 'upstream/7.10' into 7.10-release-highlights", "committedDate": "2020-10-08T21:40:06Z", "type": "commit"}, {"oid": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "url": "https://github.com/elastic/elasticsearch/commit/b82c3e91f9009a68b65794d9c24d96a5e908862f", "message": "Remove unneeded word", "committedDate": "2020-10-09T23:47:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzIzOTAxMA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503239010", "bodyText": "This is correct but I wonder if we should instead highlight the use-case of splitting the top-hits and aggs requests, which is new functionality, while pagination as described here only explains how _search_after can now do the same thing as _scroll.\nHere is a suggestion (which probably needs improvement, but to show what I mean):\nPITs are especially useful to improve end-user experience by making UIs more reactive.\nIf a search request asks for both top hits and aggregations, it will only return once everything\nhas been computed. However aggregations are usually more expensive to compute than top\nhits, so by splitting a request into two separate requests: one for top hits and another one for\naggregations, the UI can start displaying top hits quickly and only load facets as the request\nthat included aggregations returns. PITs help make sure that both requests operate on the\nexact same point-in-time view of the data.", "author": "jpountz", "createdAt": "2020-10-12T11:45:24Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -43,19 +43,154 @@ Newly created indices abstracted by a <<data-streams,data stream>> will be alloc\n the `data_hot` tier automatically, while standalone indices will be allocated to\n the `data_content` tier automatically. Nodes with the pre-existing `data` role are \n considered to be part of all tiers.\n-// end::notable-highlights[]\n \n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n-// tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.", "originalCommit": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzI0MDcxNg==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503240716", "bodyText": "A common source of confusion with scrolls is that keep_alive is only about the time between requests, not the entire lifetime of the scroll object, so I wonder if we should be extra clear about this here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n          \n          \n            \n            in the `keep_alive` query parameter.\n          \n          \n            \n            {ref}/point-in-time-api.html[open PIT API]. PITs get automatically garbage-collected\n          \n          \n            \n            after `keep_alive` if no follow-up request extends their duration.", "author": "jpountz", "createdAt": "2020-10-12T11:48:53Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -43,19 +43,154 @@ Newly created indices abstracted by a <<data-streams,data stream>> will be alloc\n the `data_hot` tier automatically, while standalone indices will be allocated to\n the `data_content` tier automatically. Nodes with the pre-existing `data` role are \n considered to be part of all tiers.\n-// end::notable-highlights[]\n \n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n-// tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.", "originalCommit": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzI0NDI1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503244251", "bodyText": "This suggestion aims at clarifying that the lifespan of the PIT gets extended even if no keep_alive is provided.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            extend your PIT's lifespan using the search request's `keep_alive` parameter.\n          \n          \n            \n            configure by how long to extend your PIT's lifespan using the search request's\n          \n          \n            \n            `keep_alive` parameter.", "author": "jpountz", "createdAt": "2020-10-12T11:56:02Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -43,19 +43,154 @@ Newly created indices abstracted by a <<data-streams,data stream>> will be alloc\n the `data_hot` tier automatically, while standalone indices will be allocated to\n the `data_content` tier automatically. Nodes with the pre-existing `data` role are \n considered to be part of all tiers.\n-// end::notable-highlights[]\n \n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n-// tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.", "originalCommit": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMzNTkzMg==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503335932", "bodyText": "Maybe we should focus more on the user-facing value, along the lines of \"This helps make sure that system indices that are critical to the Elastic Stack like security or kibana indices remain somewhat responsive when the cluster is under heavy query or indexing load.\"", "author": "jpountz", "createdAt": "2020-10-12T14:30:26Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -43,19 +43,154 @@ Newly created indices abstracted by a <<data-streams,data stream>> will be alloc\n the `data_hot` tier automatically, while standalone indices will be allocated to\n the `data_content` tier automatically. Nodes with the pre-existing `data` role are \n considered to be part of all tiers.\n-// end::notable-highlights[]\n \n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n-// tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n+\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\\\\\windows\\\\\\\\system32\\\\\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage resources for\n+read operations targeting system indices. Similarly, `system_write` is a\n+`fixed` thread pool used to manage resources for write operations targeting\n+system indices. Both have a maximum number of threads equal to `5`\n+or half of the available processors, whichever is smaller.", "originalCommit": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM0ODAwNA==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503348004", "bodyText": "How does adding a flag help prevent performance issues?", "author": "jpountz", "createdAt": "2020-10-12T14:49:00Z", "path": "docs/reference/release-notes/highlights.asciidoc", "diffHunk": "@@ -43,19 +43,154 @@ Newly created indices abstracted by a <<data-streams,data stream>> will be alloc\n the `data_hot` tier automatically, while standalone indices will be allocated to\n the `data_content` tier automatically. Nodes with the pre-existing `data` role are \n considered to be part of all tiers.\n-// end::notable-highlights[]\n \n-// Use the notable-highlights tag to mark entries that\n-// should be featured in the Stack Installation and Upgrade Guide:\n-// tag::notable-highlights[]\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n-// end::notable-highlights[]\n+[discrete]\n+[[points-in-time-for-search]]\n+=== Points in time (PITs) for search\n+\n+In 7.10, we're introducing points in time (PITs), a lightweight way to preserve\n+index state over searches. If you're\n+{ref}/paginate-search-results.html#search-after[using `search_after` to paginate\n+search results] over multiple requests, a refresh could change the order of your\n+results and cause inconsistent results across pages. To prevent this, you can\n+now create a PIT to maintain the same index state over multiple searches.\n+\n+To use a PIT in a search, you must first explicitly create the PIT using the new\n+{ref}/point-in-time-api.html[open PIT API]. PITs last for the duration provided\n+in the `keep_alive` query parameter.\n+\n+[source,console]\n+----\n+POST /my-index-000001/_pit?keep_alive=1m\n+----\n+// TEST[setup:my_index]\n+\n+The API returns a PIT ID you can use in search requests. You can also\n+extend your PIT's lifespan using the search request's `keep_alive` parameter.\n+\n+[source,console]\n+----\n+POST /_search\n+{\n+    \"size\": 100,\n+    \"query\": {\n+        \"match\" : {\n+            \"title\" : \"elasticsearch\"\n+        }\n+    },\n+    \"pit\": {\n+\t    \"id\":  \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWICBXV1aWQyAAAFdXVpZDEAAQltYXRjaF9hbGw_gAAAAA==\",\n+\t    \"keep_alive\": \"1m\"\n+    }\n+}\n+----\n+// TEST[catch:missing]\n+\n+PITs automatically close when their `keep_alive` period ends. You can\n+also manually close PITs you no longer need using the\n+{ref}/point-in-time-api.html[close PIT API]. Closing a PIT releases the\n+resources needed to maintain the PIT's index state.\n+\n+[source,console]\n+----\n+DELETE /_pit\n+{\n+    \"id\" : \"46ToAwMDaWR4BXV1aWQxAgZub2RlXzEAAAAAAAAAAAEBYQNpZHkFdXVpZDIrBm5vZGVfMwAAAAAAAAAAKgFjA2lkeQV1dWlkMioGbm9kZV8yAAAAAAAAAAAMAWIBBXV1aWQyAAA=\"\n+}\n+----\n+// TEST[catch:missing]\n+\n+For more information about using PITs in search, see\n+{ref}/paginate-search-results.html#search-after[Paginate search results with\n+`search_after`] or the {ref}/point-in-time-api.html[PIT API documentation].\n+\n+[discrete]\n+[[support-for-request-level-circuit-breakers]]\n+=== Request-level circuit breakers on coordinating nodes\n+\n+You can now use a coordinating node to account for memory used to perform\n+partial and final reduce of aggregations in the request circuit breaker. The\n+search coordinator adds the memory that it used to save and reduce the results\n+of shard aggregations in the request circuit breaker. Before any partial or\n+final reduce, the memory needed to reduce the aggregations is estimated and a\n+CircuitBreakingException is thrown if exceeds the maximum memory allowed in this\n+breaker.\n+\n+This size is estimated as roughly 1.5 times the size of the serialized\n+aggregations that need to be reduced. This estimation can be completely off for\n+some aggregations but it is corrected with the real size after the reduce\n+completes. If the reduce is successful, we update the circuit breaker to remove\n+the size of the source aggregations and replace the estimation with the\n+serialized size of the newly reduced result.\n+\n+[discrete]\n+[[eql-case-sensitivity-operator]]\n+=== EQL: Case-sensitivity and the `:` operator\n+\n+In 7.10, we made most EQL operators and functions case-sensitive by default.\n+We've also added `:`, a new case-insensitive equal operator. Designed for\n+security use cases, you can use the `:` operator to search for strings in\n+Windows event logs and other event data containing a mix of letter cases.\n+\n+[source,console]\n+----\n+GET /my-index-000001/_eql/search\n+{\n+  \"query\": \"\"\"\n+    process where process.executable : \"c:\\\\\\\\windows\\\\\\\\system32\\\\\\\\cmd.exe\"\n+  \"\"\"\n+}\n+----\n+// TEST[setup:sec_logs]\n+\n+For more information, see the {ref}/eql-syntax.html[EQL\n+syntax documentation].\n+\n+[discrete]\n+[[deprecate-rest-api-access-to-system-indices]]\n+=== REST API access to system indices is deprecated\n+\n+We are deprecating REST API access to system indices. Most REST API requests\n+that attempt to access system indices will return the following deprecation\n+warning:\n+\n+[source,text]\n+----\n+this request accesses system indices: [.system_index_name], but in a future\n+major version, direct access to system indices will be prevented by default\n+----\n+\n+The following REST API endpoints access system indices as part of their\n+implementation and will not return the deprecation warning:\n \n-// Omit the notable highlights tag for entries that only need to appear in the ES ref:\n-// [discrete]\n-// === Heading\n-//\n-// Description.\n+* `GET _cluster/health`\n+* `GET {index}/_recovery`\n+* `GET _cluster/allocation/explain`\n+* `GET _cluster/state`\n+* `POST _cluster/reroute`\n+* `GET {index}/_stats`\n+* `GET {index}/_segments`\n+* `GET {index}/_shard_stores`\n+* `GET _cat/[indices,aliases,health,recovery,shards,segments]`\n+\n+[discrete]\n+[[add-system-read-thread-pool]]\n+=== New thread pools for system indices\n+\n+We've added two new thread pools for system indices: `system_read` and\n+`system_write`. `system_read` is a `fixed` thread pool used to manage resources for\n+read operations targeting system indices. Similarly, `system_write` is a\n+`fixed` thread pool used to manage resources for write operations targeting\n+system indices. Both have a maximum number of threads equal to `5`\n+or half of the available processors, whichever is smaller.\n+\n+[discrete]\n+[[metadata-flag-system-indices]]\n+=== New metadata flag for system indices\n+\n+To prevent performance issues related to searches that target\n+system indices, we've added a new metadata flag to mark system and non-system", "originalCommit": "b82c3e91f9009a68b65794d9c24d96a5e908862f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM3MTg3Nw==", "url": "https://github.com/elastic/elasticsearch/pull/63468#discussion_r503371877", "bodyText": "This is a good question. I think the answer is that we prevent requests that target system indices, which could inadvertently slow searches.\nThat said, I think this may be better combined with the REST API access to system indices is deprecated section.", "author": "jrodewig", "createdAt": "2020-10-12T15:27:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzM0ODAwNA=="}], "type": "inlineReview"}, {"oid": "6eff7dd467960634eaeac36d6df49dddf7813efc", "url": "https://github.com/elastic/elasticsearch/commit/6eff7dd467960634eaeac36d6df49dddf7813efc", "message": "Apply suggestions from code review\n\nCo-authored-by: Adrien Grand <jpountz@gmail.com>", "committedDate": "2020-10-12T15:00:16Z", "type": "commit"}, {"oid": "a371ae325e7b6b99d3c455d5eecbf6a06c072f82", "url": "https://github.com/elastic/elasticsearch/commit/a371ae325e7b6b99d3c455d5eecbf6a06c072f82", "message": "Rewrite PIT use case", "committedDate": "2020-10-12T15:19:40Z", "type": "commit"}, {"oid": "e248ffc4218eda90dcc4aff02a24a1dc10448320", "url": "https://github.com/elastic/elasticsearch/commit/e248ffc4218eda90dcc4aff02a24a1dc10448320", "message": "Update thread pools section", "committedDate": "2020-10-12T15:19:45Z", "type": "commit"}, {"oid": "fc57bd3015cec5c4d9e726bdf0c48d7562fb6bcb", "url": "https://github.com/elastic/elasticsearch/commit/fc57bd3015cec5c4d9e726bdf0c48d7562fb6bcb", "message": "Combine system index sections", "committedDate": "2020-10-12T15:26:06Z", "type": "commit"}, {"oid": "60c877d4fb0415d3e954a9ddabf9576b27c84823", "url": "https://github.com/elastic/elasticsearch/commit/60c877d4fb0415d3e954a9ddabf9576b27c84823", "message": "Fix typo", "committedDate": "2020-10-12T15:28:46Z", "type": "commit"}, {"oid": "84681a1d02bfc7cd144627bc67190e228aaf6350", "url": "https://github.com/elastic/elasticsearch/commit/84681a1d02bfc7cd144627bc67190e228aaf6350", "message": "Merge branch '7.10' into 7.10-release-highlights", "committedDate": "2020-10-13T09:45:56Z", "type": "commit"}, {"oid": "56b05777b4886661626d987d364c4ff25c8f2335", "url": "https://github.com/elastic/elasticsearch/commit/56b05777b4886661626d987d364c4ff25c8f2335", "message": "Merge branch '7.10' into 7.10-release-highlights", "committedDate": "2020-10-13T11:57:23Z", "type": "commit"}]}