{"pr_number": 65979, "pr_title": "[DOCS] Add index alias conversion to data stream setup docs", "pr_createdAt": "2020-12-07T19:45:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65979", "timeline": [{"oid": "0923ae47206a09751da1529dce0f9f333dcd094f", "url": "https://github.com/elastic/elasticsearch/commit/0923ae47206a09751da1529dce0f9f333dcd094f", "message": "[DOCS] Add migrate API to data stream setup", "committedDate": "2020-12-07T19:48:39Z", "type": "commit"}, {"oid": "0923ae47206a09751da1529dce0f9f333dcd094f", "url": "https://github.com/elastic/elasticsearch/commit/0923ae47206a09751da1529dce0f9f333dcd094f", "message": "[DOCS] Add migrate API to data stream setup", "committedDate": "2020-12-07T19:48:39Z", "type": "forcePushed"}, {"oid": "f74fc198f9015b2179b77a31d96ecc6f787d07d7", "url": "https://github.com/elastic/elasticsearch/commit/f74fc198f9015b2179b77a31d96ecc6f787d07d7", "message": "add word", "committedDate": "2020-12-07T20:10:07Z", "type": "commit"}, {"oid": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa", "url": "https://github.com/elastic/elasticsearch/commit/8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa", "message": "Remove section from rollover", "committedDate": "2020-12-08T15:19:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTk5Mg==", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538489992", "bodyText": "With the migration API, this is no longer necessarily the case. A converted index alias does not create a new backing index or write index.\nI'm not sure the first two sentences were needed originally anyway.", "author": "jrodewig", "createdAt": "2020-12-08T15:20:43Z", "path": "docs/reference/data-streams/data-streams.asciidoc", "diffHunk": "@@ -74,10 +74,8 @@ such as:\n [[data-streams-rollover]]\n == Rollover\n \n-When you create a data stream, {es} automatically creates a backing index for\n-the stream. This index also acts as the stream's first write index. A\n-<<indices-rollover-index,rollover>> creates a new backing index that becomes the\n-stream's new write index.", "originalCommit": "8e220cdcf64f2aa5776c4b9b8fcb9eac69321cfa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1MjM3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538652372", "bodyText": "It is still true that a backing index is created automatically when you create a data stream with the Create Data Stream API. It's entirely up to you whether that needs to be mentioned here or not.", "author": "danhermann", "createdAt": "2020-12-08T17:45:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTk5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY3ODY4OA==", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538678688", "bodyText": "I relocated these first two sentences to the \"Set up a data stream\" page with 800ae62.", "author": "jrodewig", "createdAt": "2020-12-08T18:10:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTk5Mg=="}], "type": "inlineReview"}, {"oid": "27a7c03089ed7e3116741d2e33be65ffc45e2d69", "url": "https://github.com/elastic/elasticsearch/commit/27a7c03089ed7e3116741d2e33be65ffc45e2d69", "message": "Add note for write index", "committedDate": "2020-12-08T15:22:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1ODg1NA==", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538658854", "bodyText": "There are limitations on the kinds of indices that can be migrated to data streams, but I don't know whether it's important to mention those here. Mentioning them would essentially duplicate the content of the docs for the migration API.", "author": "danhermann", "createdAt": "2020-12-08T17:51:00Z", "path": "docs/reference/data-streams/set-up-a-data-stream.asciidoc", "diffHunk": "@@ -154,6 +157,70 @@ PUT /_data_stream/my-data-stream\n // TEST[continued]\n // TEST[s/my-data-stream/my-data-stream-alt/]\n \n+[discrete]\n+[[convert-an-index-alias-to-a-data-stream]]\n+=== Convert an index alias to a data stream\n+\n+Prior to {es} 7.9, you would typically use an <<indices-aliases,index alias>>\n+with a write index to manage time series data. Data streams replace most of\n+this functionality and usually require less maintenance.\n+\n+To convert an index alias with a write index to a new data stream with the same\n+name, use the <<indices-migrate-to-data-stream,migrate to data stream API>>.\n+During conversion, the alias\u2019s indices become hidden backing indices for the\n+stream. The alias\u2019s write index becomes the stream\u2019s write index. Note the data\n+stream still requires a matching <<create-a-data-stream-template,index\n+template>>.\n+", "originalCommit": "27a7c03089ed7e3116741d2e33be65ffc45e2d69", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY4MDM1OA==", "url": "https://github.com/elastic/elasticsearch/pull/65979#discussion_r538680358", "bodyText": "Agree. I think the xref to the API will suffice. If we get feedback to the contrary, I can reuse the reqs from the API docs here without duplicating the source. However, I'd like to avoid that if able.", "author": "jrodewig", "createdAt": "2020-12-08T18:11:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODY1ODg1NA=="}], "type": "inlineReview"}, {"oid": "800ae627f6a312ad7992635701ebdc7796a3d68d", "url": "https://github.com/elastic/elasticsearch/commit/800ae627f6a312ad7992635701ebdc7796a3d68d", "message": "Relocate ds creation note", "committedDate": "2020-12-08T18:09:34Z", "type": "commit"}]}