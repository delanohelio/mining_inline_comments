{"pr_number": 54997, "pr_title": "Clear recent errors when auto-follow successfully", "pr_createdAt": "2020-04-09T02:09:57Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54997", "timeline": [{"oid": "88bb0edc3528806320235397f0b35d2673699adf", "url": "https://github.com/elastic/elasticsearch/commit/88bb0edc3528806320235397f0b35d2673699adf", "message": "Clear recent errors when auto-follow successfully", "committedDate": "2020-04-09T01:56:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjAzMTA3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54997#discussion_r406031076", "bodyText": "nit: can we compute the key once and use it to put or remove the recent auto follow error?", "author": "tlrx", "createdAt": "2020-04-09T08:11:56Z", "path": "x-pack/plugin/ccr/src/main/java/org/elasticsearch/xpack/ccr/action/AutoFollowCoordinator.java", "diffHunk": "@@ -186,6 +187,7 @@ synchronized void updateStats(List<AutoFollowResult> results) {\n                             \"pattern [{}]\", entry.getKey(), result.autoFollowPatternName), entry.getValue());\n                     } else {\n                         numberOfSuccessfulIndicesAutoFollowed++;\n+                        recentAutoFollowErrors.remove(result.autoFollowPatternName + \":\" + entry.getKey().getName());", "originalCommit": "88bb0edc3528806320235397f0b35d2673699adf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6c48b84fb48949be9d62e6d14d0fe11e9b0e356f", "url": "https://github.com/elastic/elasticsearch/commit/6c48b84fb48949be9d62e6d14d0fe11e9b0e356f", "message": "tanguy\u2019s comment", "committedDate": "2020-04-09T14:21:42Z", "type": "commit"}]}