{"pr_number": 57283, "pr_title": "Fix GCS Mock Behavior for Missing Bucket", "pr_createdAt": "2020-05-28T12:52:10Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57283", "timeline": [{"oid": "fe953c912ea9c6afdaf4a6843c5f5c80dc401583", "url": "https://github.com/elastic/elasticsearch/commit/fe953c912ea9c6afdaf4a6843c5f5c80dc401583", "message": "Fix GCS Mock Behavior for Missing Bucket\n\nWe were throwing a 500 instead of a 404 for a missing bucket.\nThis would make yaml tests needlessly wait for multiple seconds, retrying\nthe 500 response with backoff, in the test checking behavior for missing buckets.", "committedDate": "2020-05-28T12:49:03Z", "type": "commit"}, {"oid": "13aa0b809b9b1961718a79ba721eebc45ccdbe48", "url": "https://github.com/elastic/elasticsearch/commit/13aa0b809b9b1961718a79ba721eebc45ccdbe48", "message": "use correct line endings", "committedDate": "2020-05-28T13:37:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg0MTA2OA==", "url": "https://github.com/elastic/elasticsearch/pull/57283#discussion_r431841068", "bodyText": "This was also broken, I found it in my wireshark adventures during test debugging. We obviously need CLRF in a multi-part response.", "author": "original-brownbear", "createdAt": "2020-05-28T13:38:48Z", "path": "test/fixtures/gcs-fixture/src/main/java/fixture/gcs/GoogleCloudStorageHttpHandler.java", "diffHunk": "@@ -167,13 +167,13 @@ public void handle(final HttpExchange exchange) throws IOException {\n                 final StringBuilder batch = new StringBuilder();\n                 for (String line : Streams.readAllLines(requestBody.streamInput())) {\n                     if (line.length() == 0 || line.startsWith(\"--\") || line.toLowerCase(Locale.ROOT).startsWith(\"content\")) {\n-                        batch.append(line).append('\\n');\n+                        batch.append(line).append(\"\\r\\n\");", "originalCommit": "13aa0b809b9b1961718a79ba721eebc45ccdbe48", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6b2ab731ee8fb514b87517ae1a225d92fc99263c", "url": "https://github.com/elastic/elasticsearch/commit/6b2ab731ee8fb514b87517ae1a225d92fc99263c", "message": "Merge remote-tracking branch 'elastic/master' into fix-gcs-mock-404", "committedDate": "2020-05-28T15:50:35Z", "type": "commit"}]}