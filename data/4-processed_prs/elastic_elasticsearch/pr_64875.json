{"pr_number": 64875, "pr_title": "[DOCS] Clarify diff between shards per node settings", "pr_createdAt": "2020-11-10T15:30:41Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64875", "timeline": [{"oid": "499b0a5ed042e164ddefcdc663993c44065c07ac", "url": "https://github.com/elastic/elasticsearch/commit/499b0a5ed042e164ddefcdc663993c44065c07ac", "message": "[DOCS] Clarify diff between shard per node settings", "committedDate": "2020-11-10T15:28:07Z", "type": "commit"}, {"oid": "406ee7123f5f9359adf512cb964fe7b4202b2ce9", "url": "https://github.com/elastic/elasticsearch/commit/406ee7123f5f9359adf512cb964fe7b4202b2ce9", "message": "Add anchor", "committedDate": "2020-11-10T16:39:12Z", "type": "commit"}, {"oid": "7c73a91dd0e1e0254ed1775888e074b095f30fcb", "url": "https://github.com/elastic/elasticsearch/commit/7c73a91dd0e1e0254ed1775888e074b095f30fcb", "message": "Reword", "committedDate": "2020-11-10T17:23:48Z", "type": "commit"}, {"oid": "0b6f2ac42bd0f25d53e5211310590db56194b321", "url": "https://github.com/elastic/elasticsearch/commit/0b6f2ac42bd0f25d53e5211310590db56194b321", "message": "Remove dupe sentence", "committedDate": "2020-11-10T17:31:14Z", "type": "commit"}, {"oid": "11f906565c9873912421841b3eff6126e420ac64", "url": "https://github.com/elastic/elasticsearch/commit/11f906565c9873912421841b3eff6126e420ac64", "message": "Re-add sentence", "committedDate": "2020-11-10T17:43:51Z", "type": "commit"}, {"oid": "ad3e6e8b84523608196dcf9a261b37960d40c1f9", "url": "https://github.com/elastic/elasticsearch/commit/ad3e6e8b84523608196dcf9a261b37960d40c1f9", "message": "Note that closed indices don't count toward", "committedDate": "2020-11-10T20:31:46Z", "type": "commit"}, {"oid": "75626f38f9ebc469811fe8d2de5a1385930ba451", "url": "https://github.com/elastic/elasticsearch/commit/75626f38f9ebc469811fe8d2de5a1385930ba451", "message": "Reword", "committedDate": "2020-11-10T20:41:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0MjgyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/64875#discussion_r522342829", "bodyText": "This isn't quite correct, the default is 1000.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Shards for closed indices do not count toward this limit. Defaults to `-1`\n          \n          \n            \n            (unlimited). A cluster with no data nodes is also unlimited.\n          \n          \n            \n            Shards for closed indices do not count toward this limit. Defaults to `1000`.\n          \n          \n            \n            A cluster with no data nodes is unlimited.", "author": "gwbrown", "createdAt": "2020-11-12T18:59:16Z", "path": "docs/reference/modules/cluster/misc.asciidoc", "diffHunk": "@@ -53,16 +53,29 @@ Closed indices do not contribute to the shard count.\n \n You can dynamically adjust the cluster shard limit with the following setting:\n \n+[[cluster-max-shards-per-node]]\n `cluster.max_shards_per_node`::\n-     (<<dynamic-cluster-setting,Dynamic>>)\n-     Controls the number of shards allowed in the cluster per data node.\n++\n+--\n+(<<dynamic-cluster-setting,Dynamic>>)\n+Limits the total number of primary and replica shards for the cluster. {es}\n+calculates the limit as follows:\n \n-With the default setting, a 3-node cluster allows 3,000 shards total, across all open indexes. \n-If you reduce the limit to 500, the cluster would allow 1,500 shards total.\n+`cluster.max_shards_per_node * number of data nodes`\n \n-NOTE: If there are no data nodes in the cluster, the limit will not be enforced.\n-This allows the creation of indices during cluster creation if dedicated master\n-nodes are set up before data nodes.\n+Shards for closed indices do not count toward this limit. Defaults to `-1`\n+(unlimited). A cluster with no data nodes is also unlimited.", "originalCommit": "75626f38f9ebc469811fe8d2de5a1385930ba451", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0NDU1Mg==", "url": "https://github.com/elastic/elasticsearch/pull/64875#discussion_r522344552", "bodyText": "Thank you for catching this!", "author": "jrodewig", "createdAt": "2020-11-12T19:02:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0MjgyOQ=="}], "type": "inlineReview"}, {"oid": "a631d12d612e75c18457315988290aea5e49591a", "url": "https://github.com/elastic/elasticsearch/commit/a631d12d612e75c18457315988290aea5e49591a", "message": "Update docs/reference/modules/cluster/misc.asciidoc\n\nCo-authored-by: Gordon Brown <arcsech@gmail.com>", "committedDate": "2020-11-12T19:01:52Z", "type": "commit"}]}