{"pr_number": 60085, "pr_title": " Convert repository-* from integTest to [yaml | java]RestTest or internalClusterTest", "pr_createdAt": "2020-07-22T19:58:38Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60085", "timeline": [{"oid": "6a646000c06536d0087d0bdfaf4a1c612e8ea17c", "url": "https://github.com/elastic/elasticsearch/commit/6a646000c06536d0087d0bdfaf4a1c612e8ea17c", "message": "repository-azure", "committedDate": "2020-07-22T18:53:59Z", "type": "commit"}, {"oid": "fa0bd0d80851bcf04f155e77979fb20b169ca011", "url": "https://github.com/elastic/elasticsearch/commit/fa0bd0d80851bcf04f155e77979fb20b169ca011", "message": "repository-gcs", "committedDate": "2020-07-22T18:54:10Z", "type": "commit"}, {"oid": "9aba0329cf145e36f3dff439d5c4839da2901389", "url": "https://github.com/elastic/elasticsearch/commit/9aba0329cf145e36f3dff439d5c4839da2901389", "message": "repository-s3", "committedDate": "2020-07-22T18:54:20Z", "type": "commit"}, {"oid": "7a200253be03eaca464ebb7bd3f3671652387933", "url": "https://github.com/elastic/elasticsearch/commit/7a200253be03eaca464ebb7bd3f3671652387933", "message": "minor fixes for s3", "committedDate": "2020-07-27T19:46:44Z", "type": "commit"}, {"oid": "bbaaeec9c37d2fdd007334f96ae3dd7671e7ad9d", "url": "https://github.com/elastic/elasticsearch/commit/bbaaeec9c37d2fdd007334f96ae3dd7671e7ad9d", "message": "minor gcs", "committedDate": "2020-07-27T21:45:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTA2Mg==", "url": "https://github.com/elastic/elasticsearch/pull/60085#discussion_r461191062", "bodyText": "We should think about building up some kind of convenience around this sort of thing.", "author": "mark-vieira", "createdAt": "2020-07-27T21:50:18Z", "path": "plugins/repository-gcs/build.gradle", "diffHunk": "@@ -311,7 +318,10 @@ testClusters {\n }\n \n task gcsThirdPartyTest(type: Test) {\n-  dependsOn integTest,largeBlobIntegTest\n+  SourceSetContainer sourceSets = project.getExtensions().getByType(SourceSetContainer.class);", "originalCommit": "bbaaeec9c37d2fdd007334f96ae3dd7671e7ad9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NzkwMg==", "url": "https://github.com/elastic/elasticsearch/pull/60085#discussion_r461197902", "bodyText": "Why isn't the yaml-rest-test plugin doing this setup?", "author": "rjernst", "createdAt": "2020-07-27T22:06:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTA2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTIwNDMyNA==", "url": "https://github.com/elastic/elasticsearch/pull/60085#discussion_r461204324", "bodyText": "It's not that simple. By default the java plugin wires up all tasks of type Test with the test source set. What happens when we have a project with multiple test source sets, and then we manually create a Test task? Which source set should it default to?", "author": "mark-vieira", "createdAt": "2020-07-27T22:23:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTA2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI0MjE3OA==", "url": "https://github.com/elastic/elasticsearch/pull/60085#discussion_r461242178", "bodyText": "Ah sorry, I misread this as the main yaml test, but i realize now this is another test task also utilizing the new source set. I agree then a helper or something to do this would be good, as it seems used several times in this PR.", "author": "rjernst", "createdAt": "2020-07-28T00:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTA2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc2NDUyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60085#discussion_r461764529", "bodyText": "Agreed , I will take a look (in a future PR) for any way to simplify this boiler plate.", "author": "jakelandis", "createdAt": "2020-07-28T17:51:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTA2Mg=="}], "type": "inlineReview"}, {"oid": "32a09d2b850d5d1973c5d5ec4b9ddcbc27c000bb", "url": "https://github.com/elastic/elasticsearch/commit/32a09d2b850d5d1973c5d5ec4b9ddcbc27c000bb", "message": "Merge branch 'master' into yamlRestTest_plugins_repo", "committedDate": "2020-07-28T20:48:36Z", "type": "commit"}]}