{"pr_number": 56718, "pr_title": "EQL: Skip execution for filters with empty results", "pr_createdAt": "2020-05-13T20:40:01Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56718", "timeline": [{"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "url": "https://github.com/elastic/elasticsearch/commit/b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "message": "EQL: Skip execution for filters with empty results\n\nOptimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\n\nFix #53237", "committedDate": "2020-05-13T20:55:56Z", "type": "commit"}, {"oid": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "url": "https://github.com/elastic/elasticsearch/commit/b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "message": "EQL: Skip execution for filters with empty results\n\nOptimize away events queries and joins/sequence that cannot match any\nresults without having to query Elasticsearch\n\nFix #53237", "committedDate": "2020-05-13T20:55:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4NDIwMg==", "url": "https://github.com/elastic/elasticsearch/pull/56718#discussion_r424784202", "bodyText": "@costin Question: if we have let's say 4 queries (stages) and one of them (no matter which) is no_match (filter => false) then we cannot match any sequence, correct?", "author": "matriv", "createdAt": "2020-05-13T23:17:42Z", "path": "x-pack/plugin/eql/qa/common/src/main/resources/test_queries_supported.toml", "diffHunk": "@@ -146,4 +146,12 @@ sequence\n   [process where serial_event_id<3] by unique_pid\n   [process where true] by unique_ppid\n '''\n-expected_event_ids  = [1, 2, 2, 3]\n\\ No newline at end of file\n+expected_event_ids  = [1, 2, 2, 3]\n+\n+[[queries]]\n+query = '''\n+sequence\n+  [process where false] by unique_pid\n+  [process where true] by unique_ppid", "originalCommit": "b889014c83f9af3f4a1b2eee0151e90e5f5d607c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDk3MDY3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/56718#discussion_r424970675", "bodyText": "Yes, hence the test and rule in this PR.", "author": "costin", "createdAt": "2020-05-14T08:45:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc4NDIwMg=="}], "type": "inlineReview"}]}