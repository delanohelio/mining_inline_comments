{"pr_number": 55334, "pr_title": "[DOCS] Add collapsible sections to 7.8 breaking changes", "pr_createdAt": "2020-04-16T18:05:00Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55334", "timeline": [{"oid": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "url": "https://github.com/elastic/elasticsearch/commit/b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "message": "[DOCS] Add collapsible sections to 7.x breaking changes", "committedDate": "2020-04-16T17:59:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc1OTE1NA==", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409759154", "bodyText": "I prefer Kibana's more generic \"Impact\".  IMO you're not telling someone \"how to migrate/upgrade\" in this section, you're telling them \"what do I have to do about it\".\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            *How to migrate* +\n          \n          \n            \n            *Impact* +", "author": "lcawl", "createdAt": "2020-04-16T18:20:20Z", "path": "docs/reference/migration/migrate_7_8.asciidoc", "diffHunk": "@@ -5,49 +5,65 @@\n ++++\n \n This section discusses the changes that you need to be aware of when migrating\n-your application to Elasticsearch 7.8.\n+your application to {es} 7.8.\n \n See also <<release-highlights>> and <<es-release-notes>>.\n \n coming[7.8.0]\n \n+* <<breaking_78_mappings_changes>>\n+* <<breaking_78_settings_changes>>\n+\n //NOTE: The notable-breaking-changes tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n //tag::notable-breaking-changes[]\n \n-//end::notable-breaking-changes[]\n-\n-[discrete]\n-[[breaking_78_api_changes]]\n-=== API changes\n-\n-[discrete]\n-==== Deprecation of `local` parameter for get field mapping API\n-\n-The `local` parameter is a no-op and field mappings are always retrieved locally.\n-As of 7.8, this parameter is deprecated and will be removed in next major version.\n-\n [discrete]\n [[breaking_78_mappings_changes]]\n === Mappings changes\n \n-[discrete]\n [[prevent-enabled-setting-change]]\n-==== `enabled` setting cannot be changed on root mapper\n+.The `enabled` mapping parameter cannot be changed for a root mapping.\n+[%collapsible]\n+====\n+*Details* +\n+Mapping requests that attempt to change the {ref}/enabled.html[`enabled`]\n+mapping parameter for a root mapping will fail and return an error.\n+\n+Previously, {es} accepted mapping requests that attempted to change the\n+`enabled` parameter of the root mapping. Theses changes were not applied, but\n+such requests didn't return an error.\n+\n+*How to migrate* +", "originalCommit": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwODY5NA==", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409808694", "bodyText": "Changed throughout with 20db1c3. Thanks!", "author": "jrodewig", "createdAt": "2020-04-16T19:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc1OTE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc2MTIyNQ==", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409761225", "bodyText": "IMO it looks odd that this change doesn't have the same sections as the others.  I don't know this setting, so I'm left wondering what I need to do about this change. Do I have to take action or is this just informational? I think ideally we'd have both pieces of info for all changes.", "author": "lcawl", "createdAt": "2020-04-16T18:23:48Z", "path": "docs/reference/migration/migrate_7_8.asciidoc", "diffHunk": "@@ -5,49 +5,65 @@\n ++++\n \n This section discusses the changes that you need to be aware of when migrating\n-your application to Elasticsearch 7.8.\n+your application to {es} 7.8.\n \n See also <<release-highlights>> and <<es-release-notes>>.\n \n coming[7.8.0]\n \n+* <<breaking_78_mappings_changes>>\n+* <<breaking_78_settings_changes>>\n+\n //NOTE: The notable-breaking-changes tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n //tag::notable-breaking-changes[]\n \n-//end::notable-breaking-changes[]\n-\n-[discrete]\n-[[breaking_78_api_changes]]\n-=== API changes\n-\n-[discrete]\n-==== Deprecation of `local` parameter for get field mapping API\n-\n-The `local` parameter is a no-op and field mappings are always retrieved locally.\n-As of 7.8, this parameter is deprecated and will be removed in next major version.\n-\n [discrete]\n [[breaking_78_mappings_changes]]\n === Mappings changes\n \n-[discrete]\n [[prevent-enabled-setting-change]]\n-==== `enabled` setting cannot be changed on root mapper\n+.The `enabled` mapping parameter cannot be changed for a root mapping.\n+[%collapsible]\n+====\n+*Details* +\n+Mapping requests that attempt to change the {ref}/enabled.html[`enabled`]\n+mapping parameter for a root mapping will fail and return an error.\n+\n+Previously, {es} accepted mapping requests that attempted to change the\n+`enabled` parameter of the root mapping. Theses changes were not applied, but\n+such requests didn't return an error.\n+\n+*How to migrate* +\n+To avoid errors, do not submit mapping requests that change the\n+{ref}/enabled.html[`enabled`] mapping parameter.\n+====\n \n-Previously, Elasticsearch accepted mapping updates that tried to change the\n-`enabled` setting on the root mapping. The update was not applied, but the\n-request didn't throw an error. As of 7.8, requests that attempt to change\n-`enabled` on the root mapping will fail.\n+.The get field mapping API's `local` query parameter is deprecated.\n+[%collapsible]\n+====\n+*Details* +\n+The {ref}/indices-get-field-mapping.html[get field mapping API]'s `local` query\n+parameter is deprecated and will be removed in {es} 8.0.0.\n+\n+The `local` parameter is a no-op. The API always retrieves field mappings\n+locally.\n+\n+*How to migrate* +\n+To avoid deprecation warnings, discontinue use of the `local` parameter.\n+====\n \n [discrete]\n [[breaking_78_settings_changes]]\n === Settings changes\n \n-[discrete]\n [[deprecate-node-local-storage]]\n-==== `node.local_storage` is deprecated\n+.The `node.local_storage` setting is deprecated\n+[%collapsible]\n+====\n+The `node.local_storage` setting is deprecated. In {es} 8.0.0, all nodes require", "originalCommit": "b68b3a5bc4d5fc4d35e218a7d6cfd5e2cf1f8aee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTgwODM1OA==", "url": "https://github.com/elastic/elasticsearch/pull/55334#discussion_r409808358", "bodyText": "I added a Details and Impact section with 20db1c3.\nI was originally considering leaving off Impact as this setting was previously undocumented and unlikely to be used. However, adding a discontinue instruction doesn't seem harmful.\nI guess in situations where we don't have an actionable advice, we could say something along the lines of \"No action needed.\" under Impact.", "author": "jrodewig", "createdAt": "2020-04-16T19:48:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc2MTIyNQ=="}], "type": "inlineReview"}, {"oid": "20db1c358f3156306b125630dca3434e52ebba57", "url": "https://github.com/elastic/elasticsearch/commit/20db1c358f3156306b125630dca3434e52ebba57", "message": "iter", "committedDate": "2020-04-16T19:47:00Z", "type": "commit"}, {"oid": "d9d7f66f85734ee98e9355ad35c13afb66a79eaf", "url": "https://github.com/elastic/elasticsearch/commit/d9d7f66f85734ee98e9355ad35c13afb66a79eaf", "message": "iter", "committedDate": "2020-04-16T20:42:43Z", "type": "commit"}, {"oid": "49dad7493534b8dd925879f877802965a63e6400", "url": "https://github.com/elastic/elasticsearch/commit/49dad7493534b8dd925879f877802965a63e6400", "message": "Merge remote-tracking branch 'upstream/7.x' into docs__add-collapsible-sections-breaking-changes", "committedDate": "2020-04-16T21:01:27Z", "type": "commit"}, {"oid": "cabbf01903d24ee230d7f58ce416a7f406a68c9a", "url": "https://github.com/elastic/elasticsearch/commit/cabbf01903d24ee230d7f58ce416a7f406a68c9a", "message": "add anchors", "committedDate": "2020-04-16T21:13:20Z", "type": "commit"}]}