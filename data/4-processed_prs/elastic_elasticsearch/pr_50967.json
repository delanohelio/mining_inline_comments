{"pr_number": 50967, "pr_title": "Add missing docs for new evaluation metrics", "pr_createdAt": "2020-01-14T11:30:07Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/50967", "timeline": [{"oid": "04e40c105d9b45370a54560985f430c75df573ba", "url": "https://github.com/elastic/elasticsearch/commit/04e40c105d9b45370a54560985f430c75df573ba", "message": "Make the order of evaluation fields consistent between the three types of evaluations", "committedDate": "2020-01-14T11:27:19Z", "type": "commit"}, {"oid": "01a678479c4ed20b09a79b52d7989653971806a2", "url": "https://github.com/elastic/elasticsearch/commit/01a678479c4ed20b09a79b52d7989653971806a2", "message": "Add evaluation metrics descriptions", "committedDate": "2020-01-14T14:29:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODAzNw==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366718037", "bodyText": "If you don't have strong feelings about the order you proposed, it would be great to keep the alphabetical order here.", "author": "szabosteve", "createdAt": "2020-01-15T06:52:43Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -42,31 +42,32 @@ result field to be present.\n [[ml-evaluate-dfanalytics-request-body]]\n ==== {api-request-body-title}\n \n+`index`::", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0MjkyMg==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366842922", "bodyText": "Done.\nI'm wondering what to do with the order of actual_field, predicted_field and metrics. Alphabetical order would be actual_field, metrics, predicted_field but logically, actual_field and predicted_field are related and it would be good to read them together.\n@szabosteve: WDYT?", "author": "przemekwitek", "createdAt": "2020-01-15T12:11:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODAzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg1Mjk4NA==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366852984", "bodyText": "@przemekwitek\nYeah, I was on the fence with this one.\nAs this section contains only three main objects that can be easily overviewed, it is okay to keep the logical order. It's better for the user because of the reason you mentioned.\nDeal?", "author": "szabosteve", "createdAt": "2020-01-15T12:37:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODAzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg2MzU4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366863586", "bodyText": "Deal :)", "author": "przemekwitek", "createdAt": "2020-01-15T13:04:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODAzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODg4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366718887", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Read more on https://en.wikipedia.org/wiki/Mean_squared_error[Wikipedia]\n          \n          \n            \n               For more information, read https://en.wikipedia.org/wiki/Mean_squared_error[this wiki article].", "author": "szabosteve", "createdAt": "2020-01-15T06:56:21Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -122,9 +123,18 @@ which outputs a prediction of values.\n   in other words the results of the {regression} analysis.\n   \n `metrics`::\n-  (Required, object) Specifies the metrics that are used for the evaluation. \n-  Available metrics are `r_squared` and `mean_squared_error`.\n-  \n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `mean_squared_error`:::\n+    (Optional, object) Average squared difference between the predicted values and the actual (`ground truth`) value.\n+    Read more on https://en.wikipedia.org/wiki/Mean_squared_error[Wikipedia]", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDEzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844139", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:14:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxODg4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTAwMQ==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719001", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Read more on https://en.wikipedia.org/wiki/Coefficient_of_determination[Wikipedia]\n          \n          \n            \n                For more information, read https://en.wikipedia.org/wiki/Coefficient_of_determination[this wiki article].", "author": "szabosteve", "createdAt": "2020-01-15T06:56:46Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -122,9 +123,18 @@ which outputs a prediction of values.\n   in other words the results of the {regression} analysis.\n   \n `metrics`::\n-  (Required, object) Specifies the metrics that are used for the evaluation. \n-  Available metrics are `r_squared` and `mean_squared_error`.\n-  \n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `mean_squared_error`:::\n+    (Optional, object) Average squared difference between the predicted values and the actual (`ground truth`) value.\n+    Read more on https://en.wikipedia.org/wiki/Mean_squared_error[Wikipedia]\n+\n+  `r_squared`:::\n+    (Optional, object) Proportion of the variance in the dependent variable that is predictable from the independent variables.\n+    Read more on https://en.wikipedia.org/wiki/Coefficient_of_determination[Wikipedia]", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDE2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844166", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:14:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTAwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTE4OA==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719188", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                (Optional, object) Accuracy of predictions (per-class and overall)\n          \n          \n            \n                (Optional, object) Accuracy of predictions (per-class and overall).", "author": "szabosteve", "createdAt": "2020-01-15T06:57:38Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -149,6 +155,22 @@ belongs.\n   default value of the same field if you didn't specified explicitly). For \n   example, `predicted_field` : `ml.animal_class_prediction.keyword`.\n \n+`metrics`::\n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `accuracy`:::\n+    (Optional, object) Accuracy of predictions (per-class and overall)", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDgzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844839", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:16:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTE4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTIyNw==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719227", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                (Optional, object) Precision of predictions (per-class and average)\n          \n          \n            \n                (Optional, object) Precision of predictions (per-class and average).", "author": "szabosteve", "createdAt": "2020-01-15T06:57:46Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -149,6 +155,22 @@ belongs.\n   default value of the same field if you didn't specified explicitly). For \n   example, `predicted_field` : `ml.animal_class_prediction.keyword`.\n \n+`metrics`::\n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `accuracy`:::\n+    (Optional, object) Accuracy of predictions (per-class and overall)\n+\n+  `precision`:::\n+    (Optional, object) Precision of predictions (per-class and average)", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDgxMA==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844810", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:16:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTIyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTI1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719259", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                (Optional, object) Recall of predictions (per-class and average)\n          \n          \n            \n                (Optional, object) Recall of predictions (per-class and average).", "author": "szabosteve", "createdAt": "2020-01-15T06:57:54Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -149,6 +155,22 @@ belongs.\n   default value of the same field if you didn't specified explicitly). For \n   example, `predicted_field` : `ml.animal_class_prediction.keyword`.\n \n+`metrics`::\n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `accuracy`:::\n+    (Optional, object) Accuracy of predictions (per-class and overall)\n+\n+  `precision`:::\n+    (Optional, object) Precision of predictions (per-class and average)\n+\n+  `recall`:::\n+    (Optional, object) Recall of predictions (per-class and average)", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDc4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844786", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:16:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTI1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTMzMg==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719332", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                (Optional, object) Multiclass confusion matrix\n          \n          \n            \n                (Optional, object) Multiclass confusion matrix.", "author": "szabosteve", "createdAt": "2020-01-15T06:58:09Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -149,6 +155,22 @@ belongs.\n   default value of the same field if you didn't specified explicitly). For \n   example, `predicted_field` : `ml.animal_class_prediction.keyword`.\n \n+`metrics`::\n+  (Optional, object) Specifies the metrics that are used for the evaluation.\n+  Available metrics:\n+\n+  `accuracy`:::\n+    (Optional, object) Accuracy of predictions (per-class and overall)\n+\n+  `precision`:::\n+    (Optional, object) Precision of predictions (per-class and average)\n+\n+  `recall`:::\n+    (Optional, object) Recall of predictions (per-class and average)\n+\n+  `multiclass_confusion_matrix`:::\n+    (Optional, object) Multiclass confusion matrix", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDc1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844751", "bodyText": "Done.", "author": "przemekwitek", "createdAt": "2020-01-15T12:16:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTMzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTUwNg==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366719506", "bodyText": "Can we keep the alphabetical order here, too?", "author": "szabosteve", "createdAt": "2020-01-15T06:58:59Z", "path": "docs/reference/ml/df-analytics/apis/evaluate-dfanalytics.asciidoc", "diffHunk": "@@ -149,6 +155,22 @@ belongs.\n   default value of the same field if you didn't specified explicitly). For \n   example, `predicted_field` : `ml.animal_class_prediction.keyword`.\n \n+`metrics`::", "originalCommit": "01a678479c4ed20b09a79b52d7989653971806a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Njg0NDU2NA==", "url": "https://github.com/elastic/elasticsearch/pull/50967#discussion_r366844564", "bodyText": "Done for metrics for all three evaluation types.", "author": "przemekwitek", "createdAt": "2020-01-15T12:15:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjcxOTUwNg=="}], "type": "inlineReview"}, {"oid": "5dd10c6b31b36bf4e5b65a3763c09ec7284407c0", "url": "https://github.com/elastic/elasticsearch/commit/5dd10c6b31b36bf4e5b65a3763c09ec7284407c0", "message": "Apply review comments", "committedDate": "2020-01-15T12:18:06Z", "type": "forcePushed"}, {"oid": "9e605ccab713e99d0599cde137b424b3aabe257a", "url": "https://github.com/elastic/elasticsearch/commit/9e605ccab713e99d0599cde137b424b3aabe257a", "message": "Apply review comments", "committedDate": "2020-01-15T12:25:42Z", "type": "commit"}, {"oid": "9e605ccab713e99d0599cde137b424b3aabe257a", "url": "https://github.com/elastic/elasticsearch/commit/9e605ccab713e99d0599cde137b424b3aabe257a", "message": "Apply review comments", "committedDate": "2020-01-15T12:25:42Z", "type": "forcePushed"}, {"oid": "0e244e93056edd5e34d8ad373954f050f51d0020", "url": "https://github.com/elastic/elasticsearch/commit/0e244e93056edd5e34d8ad373954f050f51d0020", "message": "Remove sentences suggesting the need to add `.keyword` suffix to field name", "committedDate": "2020-01-15T12:53:26Z", "type": "commit"}]}