{"pr_number": 59435, "pr_title": "[DOCS] Document data stream stats API", "pr_createdAt": "2020-07-13T16:25:48Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59435", "timeline": [{"oid": "02a65ada5794bc1124ec9b4c811335dadc053f7a", "url": "https://github.com/elastic/elasticsearch/commit/02a65ada5794bc1124ec9b4c811335dadc053f7a", "message": "[DOCS] Document data stream stats API", "committedDate": "2020-07-14T20:02:43Z", "type": "commit"}, {"oid": "02a65ada5794bc1124ec9b4c811335dadc053f7a", "url": "https://github.com/elastic/elasticsearch/commit/02a65ada5794bc1124ec9b4c811335dadc053f7a", "message": "[DOCS] Document data stream stats API", "committedDate": "2020-07-14T20:02:43Z", "type": "forcePushed"}, {"oid": "793a897111d6468ec80c1ab010ff581bb4c45003", "url": "https://github.com/elastic/elasticsearch/commit/793a897111d6468ec80c1ab010ff581bb4c45003", "message": "fixes", "committedDate": "2020-07-14T20:05:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDYyMzczNw==", "url": "https://github.com/elastic/elasticsearch/pull/59435#discussion_r454623737", "bodyText": "I intentionally left out expand_wildcards as we plan to remove that param later.", "author": "jrodewig", "createdAt": "2020-07-14T20:27:07Z", "path": "docs/reference/indices/data-stream-stats.asciidoc", "diffHunk": "@@ -0,0 +1,186 @@\n+[role=\"xpack\"]\n+[[data-stream-stats-api]]\n+=== Data stream stats API\n+++++\n+<titleabbrev>Data stream stats</titleabbrev>\n+++++\n+\n+experimental::[]\n+\n+Retrieves statistics for one or more <<data-streams,data streams>>.\n+\n+////\n+[source,console]\n+----\n+PUT /_index_template/template\n+{\n+  \"index_patterns\": [\"my-data-stream*\"],\n+  \"data_stream\": { }\n+}\n+\n+PUT /my-data-stream/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-09T11:07:08.000Z\" }\n+\n+POST /my-data-stream/_rollover/\n+POST /my-data-stream/_rollover/\n+\n+PUT /my-data-stream-two/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+\n+POST /my-data-stream-two/_rollover/\n+----\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+----\n+DELETE /_data_stream/*\n+DELETE /_index_template/*\n+----\n+// TEARDOWN\n+////\n+\n+[source,console]\n+----\n+GET /_data_stream/my-data-stream/_stats\n+----\n+\n+\n+[[data-stream-stats-api-request]]\n+==== {api-request-title}\n+\n+`GET /_data_stream/<data-stream>`\n+\n+\n+[[data-stream-stats-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n+(Optional, string)\n+Comma-separated list of data streams used to limit the request. Wildcard\n+expressions (`*`) are supported.\n++\n+To target all data streams in a cluster, omit this parameter or use `*`.\n+\n+\n+[[data-stream-stats-api-query-params]]\n+==== {api-query-parms-title}\n+", "originalCommit": "793a897111d6468ec80c1ab010ff581bb4c45003", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c7836bed5dda4aff2f75f735c1b599b10b087513", "url": "https://github.com/elastic/elasticsearch/commit/c7836bed5dda4aff2f75f735c1b599b10b087513", "message": "reword unix timestamp for clarity", "committedDate": "2020-07-14T21:20:56Z", "type": "commit"}, {"oid": "892e88bb609886574b6c59b62ee66d277e81c164", "url": "https://github.com/elastic/elasticsearch/commit/892e88bb609886574b6c59b62ee66d277e81c164", "message": "remove query params", "committedDate": "2020-07-14T21:59:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY4MjE4MQ==", "url": "https://github.com/elastic/elasticsearch/pull/59435#discussion_r454682181", "bodyText": "As Lee mentioned in #59575 (comment), we should probably note that this timestamp value is best effort.", "author": "jbaiera", "createdAt": "2020-07-14T22:29:51Z", "path": "docs/reference/indices/data-stream-stats.asciidoc", "diffHunk": "@@ -0,0 +1,175 @@\n+[role=\"xpack\"]\n+[[data-stream-stats-api]]\n+=== Data stream stats API\n+++++\n+<titleabbrev>Data stream stats</titleabbrev>\n+++++\n+\n+experimental::[]\n+\n+Retrieves statistics for one or more <<data-streams,data streams>>.\n+\n+////\n+[source,console]\n+----\n+PUT /_index_template/template\n+{\n+  \"index_patterns\": [\"my-data-stream*\"],\n+  \"data_stream\": { }\n+}\n+\n+PUT /my-data-stream/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-09T11:07:08.000Z\" }\n+\n+POST /my-data-stream/_rollover/\n+POST /my-data-stream/_rollover/\n+\n+PUT /my-data-stream-two/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+\n+POST /my-data-stream-two/_rollover/\n+----\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+----\n+DELETE /_data_stream/*\n+DELETE /_index_template/*\n+----\n+// TEARDOWN\n+////\n+\n+[source,console]\n+----\n+GET /_data_stream/my-data-stream/_stats\n+----\n+\n+\n+[[data-stream-stats-api-request]]\n+==== {api-request-title}\n+\n+`GET /_data_stream/<data-stream>`\n+\n+\n+[[data-stream-stats-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n+(Optional, string)\n+Comma-separated list of data streams used to limit the request. Wildcard\n+expressions (`*`) are supported.\n++\n+To target all data streams in a cluster, omit this parameter or use `*`.\n+\n+\n+[role=\"child_attributes\"]\n+[[data-stream-stats-api-response-body]]\n+==== {api-response-body-title}\n+\n+`_shards`::\n+(object)\n+Contains information about shards that attempted to execute the request.\n++\n+.Properties of `_shards`\n+[%collapsible%open]\n+====\n+`total`::\n+(integer)\n+Total number of shards that attempted to execute the request.\n+\n+`successful`::\n+(integer)\n+Number of shards that successfully executed the request.\n+\n+`failed`::\n+(integer)\n+Number of shards that failed to execute the request.\n+====\n+\n+`data_stream_count`::\n+(integer)\n+Total number of selected data streams.\n+\n+`backing_indices`::\n+(integer)\n+Total number of backing indices for the selected data streams.\n+\n+`total_store_size_bytes`::\n+(integer)\n+Total size, in bytes, of all shards for the selected data streams.\n+\n+`data_streams`::\n+(array of objects)\n+Contains statistics for the selected data streams.\n++\n+.Properties of objects in `data_streams`\n+[%collapsible%open]\n+====\n+`data_stream`::\n+(string)\n+Name of the data stream.\n+\n+`backing_indices`::\n+(integer)\n+Current number of backing indices for the data stream.\n+\n+`store_size_bytes`::\n+(integer)\n+Total size, in bytes, of all shards for the data stream's backing indices.\n+\n+`maximum_timestamp`::\n+(integer)\n+The data stream's highest `@timestamp` value, converted to milliseconds since\n+the https://en.wikipedia.org/wiki/Unix_time[Unix epoch].", "originalCommit": "892e88bb609886574b6c59b62ee66d277e81c164", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTAyNjcxOQ==", "url": "https://github.com/elastic/elasticsearch/pull/59435#discussion_r455026719", "bodyText": "Thanks. Added a note with 099992f.", "author": "jrodewig", "createdAt": "2020-07-15T12:51:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDY4MjE4MQ=="}], "type": "inlineReview"}, {"oid": "099992fc224e202c5dc77141f2a657ef734ed27a", "url": "https://github.com/elastic/elasticsearch/commit/099992fc224e202c5dc77141f2a657ef734ed27a", "message": "add admon for max timestamp", "committedDate": "2020-07-15T12:51:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjU0Mzk5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59435#discussion_r456543995", "bodyText": "we also have human readable versions of this field and total_store_size, if we wanted to document those.", "author": "jbaiera", "createdAt": "2020-07-17T16:22:09Z", "path": "docs/reference/indices/data-stream-stats.asciidoc", "diffHunk": "@@ -0,0 +1,186 @@\n+[role=\"xpack\"]\n+[[data-stream-stats-api]]\n+=== Data stream stats API\n+++++\n+<titleabbrev>Data stream stats</titleabbrev>\n+++++\n+\n+experimental::[]\n+\n+Retrieves statistics for one or more <<data-streams,data streams>>.\n+\n+////\n+[source,console]\n+----\n+PUT /_index_template/template\n+{\n+  \"index_patterns\": [\"my-data-stream*\"],\n+  \"data_stream\": { }\n+}\n+\n+PUT /my-data-stream/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-09T11:07:08.000Z\" }\n+\n+POST /my-data-stream/_rollover/\n+POST /my-data-stream/_rollover/\n+\n+PUT /my-data-stream-two/_bulk?refresh\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:04:05.000Z\" }\n+{\"create\":{ }}\n+{ \"@timestamp\": \"2020-12-08T11:06:07.000Z\" }\n+\n+POST /my-data-stream-two/_rollover/\n+----\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+----\n+DELETE /_data_stream/*\n+DELETE /_index_template/*\n+----\n+// TEARDOWN\n+////\n+\n+[source,console]\n+----\n+GET /_data_stream/my-data-stream/_stats\n+----\n+\n+\n+[[data-stream-stats-api-request]]\n+==== {api-request-title}\n+\n+`GET /_data_stream/<data-stream>`\n+\n+\n+[[data-stream-stats-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n+(Optional, string)\n+Comma-separated list of data streams used to limit the request. Wildcard\n+expressions (`*`) are supported.\n++\n+To target all data streams in a cluster, omit this parameter or use `*`.\n+\n+\n+[role=\"child_attributes\"]\n+[[data-stream-stats-api-response-body]]\n+==== {api-response-body-title}\n+\n+`_shards`::\n+(object)\n+Contains information about shards that attempted to execute the request.\n++\n+.Properties of `_shards`\n+[%collapsible%open]\n+====\n+`total`::\n+(integer)\n+Total number of shards that attempted to execute the request.\n+\n+`successful`::\n+(integer)\n+Number of shards that successfully executed the request.\n+\n+`failed`::\n+(integer)\n+Number of shards that failed to execute the request.\n+====\n+\n+`data_stream_count`::\n+(integer)\n+Total number of selected data streams.\n+\n+`backing_indices`::\n+(integer)\n+Total number of backing indices for the selected data streams.\n+\n+`total_store_size_bytes`::\n+(integer)\n+Total size, in bytes, of all shards for the selected data streams.\n+\n+`data_streams`::\n+(array of objects)\n+Contains statistics for the selected data streams.\n++\n+.Properties of objects in `data_streams`\n+[%collapsible%open]\n+====\n+`data_stream`::\n+(string)\n+Name of the data stream.\n+\n+`backing_indices`::\n+(integer)\n+Current number of backing indices for the data stream.\n+\n+`store_size_bytes`::", "originalCommit": "099992fc224e202c5dc77141f2a657ef734ed27a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "31d4cfe670e864ae3361e7f9d774e37bbc44212a", "url": "https://github.com/elastic/elasticsearch/commit/31d4cfe670e864ae3361e7f9d774e37bbc44212a", "message": "Merge branch 'master' into ds-stats", "committedDate": "2020-07-17T17:20:25Z", "type": "commit"}, {"oid": "87f566febadd61642bda2ed0087603279547f77b", "url": "https://github.com/elastic/elasticsearch/commit/87f566febadd61642bda2ed0087603279547f77b", "message": "Add human-readable stats", "committedDate": "2020-07-17T17:42:45Z", "type": "commit"}, {"oid": "bfd038c9b7a9209eb70f2822d94be7cf9f1f6845", "url": "https://github.com/elastic/elasticsearch/commit/bfd038c9b7a9209eb70f2822d94be7cf9f1f6845", "message": "Docs human query param", "committedDate": "2020-07-17T17:58:19Z", "type": "commit"}, {"oid": "f9d038159717ea7550fc036a0dff2f73142af45e", "url": "https://github.com/elastic/elasticsearch/commit/f9d038159717ea7550fc036a0dff2f73142af45e", "message": "fix punct + human readable params", "committedDate": "2020-07-17T18:04:46Z", "type": "commit"}, {"oid": "ba8c84a49437103db93304304a7431f4b70b5559", "url": "https://github.com/elastic/elasticsearch/commit/ba8c84a49437103db93304304a7431f4b70b5559", "message": "Merge remote-tracking branch 'upstream/master' into ds-stats", "committedDate": "2020-07-17T20:32:27Z", "type": "commit"}, {"oid": "200491f47c4da9ab1790b76729af85fbf57d6c6a", "url": "https://github.com/elastic/elasticsearch/commit/200491f47c4da9ab1790b76729af85fbf57d6c6a", "message": "Merge remote-tracking branch 'upstream/master' into ds-stats", "committedDate": "2020-07-17T20:32:45Z", "type": "commit"}, {"oid": "9e33c7d52adeae36b3eca371dd78e02fd86ea4fa", "url": "https://github.com/elastic/elasticsearch/commit/9e33c7d52adeae36b3eca371dd78e02fd86ea4fa", "message": "Add human param to snippets", "committedDate": "2020-07-17T20:59:57Z", "type": "commit"}, {"oid": "32ad233bdda3051ae0830ba4145800ca4f95901b", "url": "https://github.com/elastic/elasticsearch/commit/32ad233bdda3051ae0830ba4145800ca4f95901b", "message": "Merge branch 'master' into ds-stats", "committedDate": "2020-07-20T12:53:53Z", "type": "commit"}]}