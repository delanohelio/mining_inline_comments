{"pr_number": 52219, "pr_title": "Wire up Max & Min aggregations", "pr_createdAt": "2020-02-11T15:58:09Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52219", "timeline": [{"oid": "570efcd9acb08ed7a1b9ef93a5afdea5b54a6449", "url": "https://github.com/elastic/elasticsearch/commit/570efcd9acb08ed7a1b9ef93a5afdea5b54a6449", "message": "Wire up max aggregator", "committedDate": "2020-02-11T15:32:33Z", "type": "commit"}, {"oid": "b5ed20b913d01231ee3624383d9bda80a0f9112b", "url": "https://github.com/elastic/elasticsearch/commit/b5ed20b913d01231ee3624383d9bda80a0f9112b", "message": "Wire up min aggregation", "committedDate": "2020-02-11T15:56:12Z", "type": "commit"}, {"oid": "79c0439246829f45453a5a999dec2ed67f5e7bab", "url": "https://github.com/elastic/elasticsearch/commit/79c0439246829f45453a5a999dec2ed67f5e7bab", "message": "Rename for clarity", "committedDate": "2020-02-11T15:59:20Z", "type": "commit"}, {"oid": "42d08e485d7beba46d25203a823135ce44eccc80", "url": "https://github.com/elastic/elasticsearch/commit/42d08e485d7beba46d25203a823135ce44eccc80", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max", "committedDate": "2020-02-12T14:39:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MTk5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381491995", "bodyText": "Should we put these on the next line?  We should probably come up with an overall formatting for these anyhow, I think they are all over the place depending on the agg and the PR :)", "author": "polyfractal", "createdAt": "2020-02-19T19:22:53Z", "path": "server/src/main/java/org/elasticsearch/search/SearchModule.java", "diffHunk": "@@ -343,9 +343,9 @@ private void registerAggregations(List<SearchPlugin> plugins) {\n         registerAggregation(new AggregationSpec(SumAggregationBuilder.NAME, SumAggregationBuilder::new, SumAggregationBuilder::parse)\n                 .addResultReader(InternalSum::new));\n         registerAggregation(new AggregationSpec(MinAggregationBuilder.NAME, MinAggregationBuilder::new, MinAggregationBuilder::parse)\n-                .addResultReader(InternalMin::new));\n+                .addResultReader(InternalMin::new).setAggregatorRegistrar(MinAggregationBuilder::registerAggregators));", "originalCommit": "42d08e485d7beba46d25203a823135ce44eccc80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU0NjMxNA==", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381546314", "bodyText": "Aren't we supposed to have an autoformater for this now? ;)\nI think I like putting it on a new line slightly better, not sure why I didn't do that here.  I'll push an update.", "author": "not-napoleon", "createdAt": "2020-02-19T21:10:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MTk5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MjU0NA==", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381492544", "bodyText": "Hmm, I wonder if IP should be on this list?  I don't actually know if it works with IP or not, but since NUMERIC == IP in master I suspect it does", "author": "polyfractal", "createdAt": "2020-02-19T19:23:49Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/MaxAggregatorFactory.java", "diffHunk": "@@ -37,6 +40,23 @@\n \n class MaxAggregatorFactory extends ValuesSourceAggregatorFactory {\n \n+    static void registerAggregators(ValuesSourceRegistry valuesSourceRegistry) {\n+        valuesSourceRegistry.register(MaxAggregationBuilder.NAME,\n+            List.of(CoreValuesSourceType.NUMERIC, CoreValuesSourceType.DATE, CoreValuesSourceType.BOOLEAN),", "originalCommit": "42d08e485d7beba46d25203a823135ce44eccc80", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU1MDQ4MA==", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381550480", "bodyText": "IP is BYTES in master, not NUMERIC.", "author": "not-napoleon", "createdAt": "2020-02-19T21:19:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MjU0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5MjgzMw==", "url": "https://github.com/elastic/elasticsearch/pull/52219#discussion_r381492833", "bodyText": "Ditto question about IP", "author": "polyfractal", "createdAt": "2020-02-19T19:24:19Z", "path": "server/src/main/java/org/elasticsearch/search/aggregations/metrics/MinAggregatorFactory.java", "diffHunk": "@@ -37,6 +40,23 @@\n \n class MinAggregatorFactory extends ValuesSourceAggregatorFactory {\n \n+    static void registerAggregators(ValuesSourceRegistry valuesSourceRegistry) {\n+        valuesSourceRegistry.register(MinAggregationBuilder.NAME,\n+            List.of(CoreValuesSourceType.NUMERIC, CoreValuesSourceType.DATE, CoreValuesSourceType.BOOLEAN),", "originalCommit": "42d08e485d7beba46d25203a823135ce44eccc80", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "205a5653fd624e9d2a6a1aaded49107118a4af34", "url": "https://github.com/elastic/elasticsearch/commit/205a5653fd624e9d2a6a1aaded49107118a4af34", "message": "added a test for min aggregation over IPs", "committedDate": "2020-02-19T21:08:05Z", "type": "commit"}, {"oid": "5ca64d2906c9735d0afa3492b3486cba28c0933f", "url": "https://github.com/elastic/elasticsearch/commit/5ca64d2906c9735d0afa3492b3486cba28c0933f", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max", "committedDate": "2020-02-19T21:08:15Z", "type": "commit"}, {"oid": "2c278bda9f8371a9ca1daa12b0735583601ee503", "url": "https://github.com/elastic/elasticsearch/commit/2c278bda9f8371a9ca1daa12b0735583601ee503", "message": "clean up indentation", "committedDate": "2020-02-19T21:12:24Z", "type": "commit"}, {"oid": "4e69444418a61826014802b461865d6e66e5f855", "url": "https://github.com/elastic/elasticsearch/commit/4e69444418a61826014802b461865d6e66e5f855", "message": "Merge branch 'feature/extensible-values-source' into vs-refactor-wire-up-max\n\n Conflicts:\n\tserver/src/test/java/org/elasticsearch/search/aggregations/bucket/range/IpRangeAggregatorTests.java\n\ttest/framework/src/main/java/org/elasticsearch/search/aggregations/AggregatorTestCase.java", "committedDate": "2020-02-24T17:14:53Z", "type": "commit"}, {"oid": "a331995e4076192fcde04826e40d8255827bdfe9", "url": "https://github.com/elastic/elasticsearch/commit/a331995e4076192fcde04826e40d8255827bdfe9", "message": "remove unused imports", "committedDate": "2020-02-24T17:38:47Z", "type": "commit"}]}