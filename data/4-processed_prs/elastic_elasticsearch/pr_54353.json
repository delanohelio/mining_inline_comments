{"pr_number": 54353, "pr_title": "[Docs] Add HLRC Async Search API documentation", "pr_createdAt": "2020-03-27T15:35:40Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54353", "timeline": [{"oid": "c26e3cdbb336f9239d1bb312fdfb11d4a2e163c9", "url": "https://github.com/elastic/elasticsearch/commit/c26e3cdbb336f9239d1bb312fdfb11d4a2e163c9", "message": "[Docs] Add HLRC Async Search API documentation\n\nAdds documentation and a corresponding test case containing typical API usage\nfor the Async Search API to the High Level Rest Client.", "committedDate": "2020-03-27T15:33:10Z", "type": "commit"}, {"oid": "f84773d475afd80e48b3d9c4f03bc167aa6f5a2f", "url": "https://github.com/elastic/elasticsearch/commit/f84773d475afd80e48b3d9c4f03bc167aa6f5a2f", "message": "line length", "committedDate": "2020-03-27T15:49:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5OTU0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/54353#discussion_r399999543", "bodyText": "s/resources/results ? I find this description confusing, shall we add what we have in the javadocs or rest spec?", "author": "javanna", "createdAt": "2020-03-30T08:06:46Z", "path": "docs/java-rest/high-level/asyncsearch/submit.asciidoc", "diffHunk": "@@ -0,0 +1,94 @@\n+--\n+:api: asyncsearch-submit\n+:request: SubmitAsyncSearchRequest\n+:response: AsyncSearchResponse\n+--\n+\n+[role=\"xpack\"]\n+[id=\"{upid}-{api}\"]\n+=== Submit Async Search API\n+\n+[id=\"{upid}-{api}-request\"]\n+==== Request\n+\n+A +{request}+ allows to submit an asynchronous search task to\n+the cluster. Required arguments are the `SearchSourceBuilder` defining\n+the search and the target indices:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request]\n+--------------------------------------------------\n+<1> The definition of the search to run\n+<2> The target indices for the search\n+\n+==== Optional arguments\n+The following arguments can optionally be provided:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request-arguments]\n+--------------------------------------------------\n+<1> The minimum time that the request should wait before\n+returning a partial result (defaults to 1 second).\n+<2> The expiration time of the result (defaults to 5 days).\n+<3> Whether the resources should be kept after completion or failure", "originalCommit": "f84773d475afd80e48b3d9c4f03bc167aa6f5a2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTk5OTcxNg==", "url": "https://github.com/elastic/elasticsearch/pull/54353#discussion_r399999716", "bodyText": "it's more the validity of the request, not just of the result.", "author": "javanna", "createdAt": "2020-03-30T08:07:04Z", "path": "docs/java-rest/high-level/asyncsearch/submit.asciidoc", "diffHunk": "@@ -0,0 +1,94 @@\n+--\n+:api: asyncsearch-submit\n+:request: SubmitAsyncSearchRequest\n+:response: AsyncSearchResponse\n+--\n+\n+[role=\"xpack\"]\n+[id=\"{upid}-{api}\"]\n+=== Submit Async Search API\n+\n+[id=\"{upid}-{api}-request\"]\n+==== Request\n+\n+A +{request}+ allows to submit an asynchronous search task to\n+the cluster. Required arguments are the `SearchSourceBuilder` defining\n+the search and the target indices:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request]\n+--------------------------------------------------\n+<1> The definition of the search to run\n+<2> The target indices for the search\n+\n+==== Optional arguments\n+The following arguments can optionally be provided:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request-arguments]\n+--------------------------------------------------\n+<1> The minimum time that the request should wait before\n+returning a partial result (defaults to 1 second).\n+<2> The expiration time of the result (defaults to 5 days).", "originalCommit": "f84773d475afd80e48b3d9c4f03bc167aa6f5a2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwMDEyOA==", "url": "https://github.com/elastic/elasticsearch/pull/54353#discussion_r400000128", "bodyText": "same comment as in the submit API", "author": "javanna", "createdAt": "2020-03-30T08:07:45Z", "path": "docs/java-rest/high-level/asyncsearch/get.asciidoc", "diffHunk": "@@ -0,0 +1,87 @@\n+--\n+:api: asyncsearch-get\n+:request: GetAsyncSearchRequest\n+:response: AsyncSearchResponse\n+--\n+\n+[role=\"xpack\"]\n+[id=\"{upid}-{api}\"]\n+=== Get Async Search API\n+\n+[id=\"{upid}-{api}-request\"]\n+==== Request\n+\n+A +{request}+ allows to get a running asynchronous search task by\n+its id. Required arguments are the `id` of a running async search:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request]\n+--------------------------------------------------\n+\n+==== Optional arguments\n+The following arguments can optionally be provided:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request-arguments]\n+--------------------------------------------------\n+<1> The minimum time that the request should wait before \n+returning a partial result (defaults to no wait).\n+<2> The expiration time of the result (defaults to none).", "originalCommit": "f84773d475afd80e48b3d9c4f03bc167aa6f5a2f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7619a4d04f62fa5fac8537e0414ddca240b7bfff", "url": "https://github.com/elastic/elasticsearch/commit/7619a4d04f62fa5fac8537e0414ddca240b7bfff", "message": "iter", "committedDate": "2020-03-30T09:52:22Z", "type": "commit"}, {"oid": "81051673739502d8a450285a9956ff0ecfc29f98", "url": "https://github.com/elastic/elasticsearch/commit/81051673739502d8a450285a9956ff0ecfc29f98", "message": "Merge branch 'master' into add-hlrc-asyncsearch-docs", "committedDate": "2020-03-30T10:08:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE2MTE4OA==", "url": "https://github.com/elastic/elasticsearch/pull/54353#discussion_r400161188", "bodyText": "LOL, I changed the default one line below but not in the description, thanks for fixing", "author": "javanna", "createdAt": "2020-03-30T12:44:30Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/async_search.submit.json", "diffHunk": "@@ -34,7 +34,7 @@\n       },\n       \"keep_on_completion\":{\n         \"type\":\"boolean\",\n-        \"description\":\"Control whether the response should be stored in the cluster if it completed within the provided [wait_for_completion] time (default: true)\",\n+        \"description\":\"Control whether the response should be stored in the cluster if it completed within the provided [wait_for_completion] time (default: false)\",", "originalCommit": "81051673739502d8a450285a9956ff0ecfc29f98", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE2MTM3NA==", "url": "https://github.com/elastic/elasticsearch/pull/54353#discussion_r400161374", "bodyText": "if the request", "author": "javanna", "createdAt": "2020-03-30T12:44:49Z", "path": "docs/java-rest/high-level/asyncsearch/submit.asciidoc", "diffHunk": "@@ -0,0 +1,94 @@\n+--\n+:api: asyncsearch-submit\n+:request: SubmitAsyncSearchRequest\n+:response: AsyncSearchResponse\n+--\n+\n+[role=\"xpack\"]\n+[id=\"{upid}-{api}\"]\n+=== Submit Async Search API\n+\n+[id=\"{upid}-{api}-request\"]\n+==== Request\n+\n+A +{request}+ allows to submit an asynchronous search task to\n+the cluster. Required arguments are the `SearchSourceBuilder` defining\n+the search and the target indices:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request]\n+--------------------------------------------------\n+<1> The definition of the search to run\n+<2> The target indices for the search\n+\n+==== Optional arguments\n+The following arguments can optionally be provided:\n+\n+[\"source\",\"java\",subs=\"attributes,callouts,macros\"]\n+--------------------------------------------------\n+include-tagged::{doc-tests-file}[{api}-request-arguments]\n+--------------------------------------------------\n+<1> The minimum time that the request should wait before\n+returning a partial result (defaults to 1 second).\n+<2> The expiration time of the request (defaults to 5 days).\n+<3> Controls whether the results should be stored if request completed", "originalCommit": "81051673739502d8a450285a9956ff0ecfc29f98", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8018e436867c38697b5cddc336159050fd759242", "url": "https://github.com/elastic/elasticsearch/commit/8018e436867c38697b5cddc336159050fd759242", "message": "iter", "committedDate": "2020-03-30T12:48:49Z", "type": "commit"}]}