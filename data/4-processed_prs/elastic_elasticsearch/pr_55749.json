{"pr_number": 55749, "pr_title": "json spec: allow null for documentation url", "pr_createdAt": "2020-04-24T20:19:19Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55749", "timeline": [{"oid": "25dcd29ac0984ad6db4055d90adc126294515520", "url": "https://github.com/elastic/elasticsearch/commit/25dcd29ac0984ad6db4055d90adc126294515520", "message": "json spec: allow null for documentation url", "committedDate": "2020-04-24T20:16:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MjMwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r417162309", "bodyText": "Can the use of null be constrained only to APIs that have stability beta or experimental? This would align with APIs that are under development, whilst still providing benefit of having links for stable APIs", "author": "russcam", "createdAt": "2020-04-29T08:51:58Z", "path": "rest-api-spec/src/main/resources/schema.json", "diffHunk": "@@ -130,7 +130,7 @@\n             \"additionalProperties\": false,\n             \"properties\": {\n                 \"url\": {\n-                    \"type\": \"string\",\n+                    \"type\": [\"string\", \"null\"],", "originalCommit": "25dcd29ac0984ad6db4055d90adc126294515520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzYzMjE0MA==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r417632140", "bodyText": "I made the null conditional. So that only stable requires a string, the others (beta, experimental, and private) now allow null.  0b37977\nAs you pointed out below, this does indeed cause a validation error on the two ml specs below we will need to sort out first.", "author": "jakelandis", "createdAt": "2020-04-29T21:47:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MjMwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2NDAyMw==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r417164023", "bodyText": "I think these are stable APIs, so would clash with the previous comment about allowing null only for beta and experimental APIs. Perhaps we can link to ML jobs documentation for these specs for now? For example,\nhttps://www.elastic.co/guide/en/machine-learning/current/ml-jobs.html", "author": "russcam", "createdAt": "2020-04-29T08:54:55Z", "path": "x-pack/plugin/build.gradle", "diffHunk": "@@ -119,6 +119,4 @@ validateRestSpec {\n   ignore 'autoscaling.delete_autoscaling_policy.json'\n   ignore 'autoscaling.get_autoscaling_policy.json'\n   ignore 'autoscaling.put_autoscaling_policy.json'\n-  ignore 'ml.validate.json'", "originalCommit": "25dcd29ac0984ad6db4055d90adc126294515520", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0b379774dc73b545c9e1f3be89f89c8e3de79bf8", "url": "https://github.com/elastic/elasticsearch/commit/0b379774dc73b545c9e1f3be89f89c8e3de79bf8", "message": "conditional null", "committedDate": "2020-04-29T21:44:13Z", "type": "commit"}, {"oid": "dddf74b102e87a017cfde220f75efd5b8baafb8a", "url": "https://github.com/elastic/elasticsearch/commit/dddf74b102e87a017cfde220f75efd5b8baafb8a", "message": "Merge remote-tracking branch 'upstream/master' into null_doc_url", "committedDate": "2020-04-29T21:54:14Z", "type": "commit"}, {"oid": "f3e5af79c8bddb82246f2dd8bb9127f99aac0c89", "url": "https://github.com/elastic/elasticsearch/commit/f3e5af79c8bddb82246f2dd8bb9127f99aac0c89", "message": "move ml specs to private", "committedDate": "2020-05-07T18:02:19Z", "type": "commit"}, {"oid": "ccbf2dcb1d13502a2229c66adc2c97655032ff29", "url": "https://github.com/elastic/elasticsearch/commit/ccbf2dcb1d13502a2229c66adc2c97655032ff29", "message": "Merge branch 'master' into null_doc_url", "committedDate": "2020-05-07T18:16:30Z", "type": "commit"}, {"oid": "3ca7d6f36fed7224441c49803c812540b4098999", "url": "https://github.com/elastic/elasticsearch/commit/3ca7d6f36fed7224441c49803c812540b4098999", "message": "Merge branch 'master' into null_doc_url", "committedDate": "2020-05-12T00:52:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2NjA1NA==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666054", "bodyText": "In light of #55749 (comment), I think these should remain as stable and the url is updated to point to the ML jobs documentation: https://www.elastic.co/guide/en/machine-learning/current/ml-jobs.html", "author": "russcam", "createdAt": "2020-05-12T11:39:43Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,\n       \"description\":\"Validates an anomaly detection job.\"\n     },\n-    \"stability\":\"stable\",\n+    \"stability\":\"private\",", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2NjEwMA==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666100", "bodyText": "In light of #55749 (comment), I think these should remain as stable and the url is updated to point to the ML jobs documentation: https://www.elastic.co/guide/en/machine-learning/current/ml-jobs.html", "author": "russcam", "createdAt": "2020-05-12T11:39:49Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate_detector.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,\n       \"description\":\"Validates an anomaly detection detector.\"\n     },\n-    \"stability\":\"stable\",\n+    \"stability\":\"private\",", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2NjQ0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666442", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"url\":null,\n          \n          \n            \n                  \"url\":\"https://www.elastic.co/guide/en/machine-learning/current/ml-jobs.html\",", "author": "russcam", "createdAt": "2020-05-12T11:40:26Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate_detector.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2Njc1Mg==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666752", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"url\":null,\n          \n          \n            \n                  \"url\":\"https://www.elastic.co/guide/en/machine-learning/current/ml-jobs.html\",", "author": "russcam", "createdAt": "2020-05-12T11:41:01Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2Njg0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666849", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \"stability\":\"private\",\n          \n          \n            \n                \"stability\":\"stable\",", "author": "russcam", "createdAt": "2020-05-12T11:41:13Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,\n       \"description\":\"Validates an anomaly detection job.\"\n     },\n-    \"stability\":\"stable\",\n+    \"stability\":\"private\",", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY2Njk0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/55749#discussion_r423666943", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                \"stability\":\"private\",\n          \n          \n            \n                \"stability\":\"stable\",", "author": "russcam", "createdAt": "2020-05-12T11:41:25Z", "path": "x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate_detector.json", "diffHunk": "@@ -4,7 +4,7 @@\n       \"url\":null,\n       \"description\":\"Validates an anomaly detection detector.\"\n     },\n-    \"stability\":\"stable\",\n+    \"stability\":\"private\",", "originalCommit": "3ca7d6f36fed7224441c49803c812540b4098999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0e606dbe5fcfecf6e581ae2bba74a24d2004c124", "url": "https://github.com/elastic/elasticsearch/commit/0e606dbe5fcfecf6e581ae2bba74a24d2004c124", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate_detector.json\n\nCo-authored-by: Russ Cam <russ.cam@elastic.co>", "committedDate": "2020-05-12T13:00:52Z", "type": "commit"}, {"oid": "5e47c78c76ead60f92b9a469dbac3355a94e5551", "url": "https://github.com/elastic/elasticsearch/commit/5e47c78c76ead60f92b9a469dbac3355a94e5551", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate.json\n\nCo-authored-by: Russ Cam <russ.cam@elastic.co>", "committedDate": "2020-05-12T13:01:01Z", "type": "commit"}, {"oid": "e3d7004dec60ea53f4234f21010b258a8de3df8f", "url": "https://github.com/elastic/elasticsearch/commit/e3d7004dec60ea53f4234f21010b258a8de3df8f", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate.json\n\nCo-authored-by: Russ Cam <russ.cam@elastic.co>", "committedDate": "2020-05-12T13:01:09Z", "type": "commit"}, {"oid": "93dfadfae0be6f90bb061617f10b4abb977b7247", "url": "https://github.com/elastic/elasticsearch/commit/93dfadfae0be6f90bb061617f10b4abb977b7247", "message": "Update x-pack/plugin/src/test/resources/rest-api-spec/api/ml.validate_detector.json\n\nCo-authored-by: Russ Cam <russ.cam@elastic.co>", "committedDate": "2020-05-12T13:01:16Z", "type": "commit"}]}