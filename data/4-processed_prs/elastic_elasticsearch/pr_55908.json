{"pr_number": 55908, "pr_title": "Convert remaining license methods to isAllowed", "pr_createdAt": "2020-04-29T04:09:16Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55908", "timeline": [{"oid": "1e008e65edd3ce866632ee48996e8d88d9e4059d", "url": "https://github.com/elastic/elasticsearch/commit/1e008e65edd3ce866632ee48996e8d88d9e4059d", "message": "Convert remaining license methods to isAllowed\n\nThis commit converts the remaining isXXXAllowed methods to instead of\nuse isAllowed with a Feature value. There are a couple other methods\nthat are static, as well as some licensed features that check the\nlicense directly, but those will be dealt with in other followups.", "committedDate": "2020-04-29T04:08:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA2MDQ5Nw==", "url": "https://github.com/elastic/elasticsearch/pull/55908#discussion_r417060497", "bodyText": "I don't love the use of MISSING here - I think it will confuse future readers and those who are trying to add Basic licensed features, but I think the solution is to remove MISSING entirely in a separate PR. I don't think we need to retain it as an operation mode.", "author": "tvernum", "createdAt": "2020-04-29T04:29:13Z", "path": "x-pack/plugin/core/src/main/java/org/elasticsearch/license/XPackLicenseState.java", "diffHunk": "@@ -46,7 +48,49 @@\n         SECURITY_API_KEY_SERVICE(OperationMode.MISSING, false),\n         SECURITY_AUTHORIZATION_REALM(OperationMode.PLATINUM, true),\n         SECURITY_AUTHORIZATION_ENGINE(OperationMode.PLATINUM, true),\n-        SPATIAL_GEO_CENTROID(OperationMode.GOLD, true);\n+        SECURITY_STATS_AND_HEALTH(OperationMode.MISSING, true),\n+\n+        WATCHER(OperationMode.STANDARD, true),\n+        MONITORING(OperationMode.MISSING, true),\n+        // TODO: should just check WATCHER directly?\n+        MONITORING_CLUSTER_ALERTS(OperationMode.STANDARD, true),\n+        MONITORING_UPDATE_RETENTION(OperationMode.STANDARD, false),\n+\n+        CCR(OperationMode.PLATINUM, true),\n+\n+        GRAPH(OperationMode.PLATINUM, true),\n+\n+        MACHINE_LEARNING(OperationMode.PLATINUM, true),\n+\n+        TRANSFORM(OperationMode.MISSING, true),", "originalCommit": "1e008e65edd3ce866632ee48996e8d88d9e4059d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "46e2ab6ce5bc06ac6cd52a5a8843f0efefe32e5f", "url": "https://github.com/elastic/elasticsearch/commit/46e2ab6ce5bc06ac6cd52a5a8843f0efefe32e5f", "message": "fix checkstyle", "committedDate": "2020-04-29T17:49:04Z", "type": "commit"}, {"oid": "7769b0feddbbdd2f72e6c115f0b29134279bf8e6", "url": "https://github.com/elastic/elasticsearch/commit/7769b0feddbbdd2f72e6c115f0b29134279bf8e6", "message": "line length", "committedDate": "2020-04-29T17:58:44Z", "type": "commit"}, {"oid": "d316607eb3b353316e697c8d094a0fc2816d85ce", "url": "https://github.com/elastic/elasticsearch/commit/d316607eb3b353316e697c8d094a0fc2816d85ce", "message": "line length", "committedDate": "2020-04-29T18:40:24Z", "type": "commit"}, {"oid": "2a38d0e7527cc9437c367e977293d468413c6250", "url": "https://github.com/elastic/elasticsearch/commit/2a38d0e7527cc9437c367e977293d468413c6250", "message": "more checkstyle", "committedDate": "2020-04-29T19:06:25Z", "type": "commit"}, {"oid": "35ad196af7fbeddabdca5c63944a58e1be4ef355", "url": "https://github.com/elastic/elasticsearch/commit/35ad196af7fbeddabdca5c63944a58e1be4ef355", "message": "Merge branch 'master' into refactor_license11", "committedDate": "2020-04-29T22:00:02Z", "type": "commit"}]}