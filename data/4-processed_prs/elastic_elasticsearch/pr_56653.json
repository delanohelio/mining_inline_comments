{"pr_number": 56653, "pr_title": "[DOCS] Add throttling based on configuration parameter", "pr_createdAt": "2020-05-12T23:58:20Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56653", "timeline": [{"oid": "d40c7e7b20ed8f64b9501ba0dc8e86f392eae7c0", "url": "https://github.com/elastic/elasticsearch/commit/d40c7e7b20ed8f64b9501ba0dc8e86f392eae7c0", "message": "[DOCS] Adds throttling to transform performance tips", "committedDate": "2020-05-12T21:28:12Z", "type": "commit"}, {"oid": "ee74c5516a68bee8a80b01bf142f5a24a6ea653a", "url": "https://github.com/elastic/elasticsearch/commit/ee74c5516a68bee8a80b01bf142f5a24a6ea653a", "message": "[DOCS] Edits docs_per_second description", "committedDate": "2020-05-12T23:52:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDEwMDMxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/56653#discussion_r424100311", "bodyText": "and index requests\n\nIs this correct that indexing is also affected by this setting?", "author": "lcawl", "createdAt": "2020-05-13T00:00:47Z", "path": "docs/reference/transform/overview.asciidoc", "diffHunk": "@@ -72,4 +72,10 @@ If your {transform} must process a lot of historic data, it has high resource\n usage initially--particularly during the first checkpoint.\n \n For better performance, make sure that your search aggregations and queries are \n-optimized and that your {transform} is processing only necessary data.\n+optimized and that your {transform} is processing only necessary data. Consider \n+whether you can apply a source query to the {transform} to reduce the scope of \n+data it processes. Also consider whether the cluster has sufficient resources in \n+place to support both the composite aggregation search and the indexing of its\n+results. You can also throttle the rate at which {transforms} perform search and \n+index requests by setting `docs_per_second` when you <<put-transform,create>> or", "originalCommit": "ee74c5516a68bee8a80b01bf142f5a24a6ea653a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDIwNDIzNg==", "url": "https://github.com/elastic/elasticsearch/pull/56653#discussion_r424204236", "bodyText": "yes, by slowing down the searches, you slow down indexing, too.\nMaybe add a sentence that the transform will take longer if throttling is used, although this seems obvious?\nand maybe something like:\nTo know the current docs_per_second transform is operating you can take a look into stats (-> link to stats) and calculate the rate with:\ndocs_per_second = documents_processed / search_time_in_ms * 1000\n\n(^ I plan to add this to the stats endpoint, however not for 7.8)", "author": "hendrikmuhs", "createdAt": "2020-05-13T06:39:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDEwMDMxMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDY2MjI0OA==", "url": "https://github.com/elastic/elasticsearch/pull/56653#discussion_r424662248", "bodyText": "Thanks, I've added that information in a final paragraph.", "author": "lcawl", "createdAt": "2020-05-13T18:56:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDEwMDMxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDIwNjA1MQ==", "url": "https://github.com/elastic/elasticsearch/pull/56653#discussion_r424206051", "bodyText": "\ud83d\udc4d  sorry for the bad placement! I see, it should be ordered, will do better next time!", "author": "hendrikmuhs", "createdAt": "2020-05-13T06:43:34Z", "path": "docs/reference/transform/apis/put-transform.asciidoc", "diffHunk": "@@ -128,6 +128,23 @@ include::{docdir}/rest-api/common-parms.asciidoc[tag=pivot-group-by]\n ====\n //End pivot\n \n+//Begin settings", "originalCommit": "ee74c5516a68bee8a80b01bf142f5a24a6ea653a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDU3OTg3Mw==", "url": "https://github.com/elastic/elasticsearch/pull/56653#discussion_r424579873", "bodyText": "No worries!", "author": "lcawl", "createdAt": "2020-05-13T16:40:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDIwNjA1MQ=="}], "type": "inlineReview"}, {"oid": "6cfba244a280aa330ae7d4b5f1164e60e7f7cb81", "url": "https://github.com/elastic/elasticsearch/commit/6cfba244a280aa330ae7d4b5f1164e60e7f7cb81", "message": "[DOCS] Adds formula for docs_per_second", "committedDate": "2020-05-13T18:55:20Z", "type": "commit"}]}