{"pr_number": 64904, "pr_title": "Added information about `rename_pattern` and `rename_replacement`", "pr_createdAt": "2020-11-11T04:20:48Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64904", "timeline": [{"oid": "3197466be2fe1c87b888a5470c57cfb99f45d918", "url": "https://github.com/elastic/elasticsearch/commit/3197466be2fe1c87b888a5470c57cfb99f45d918", "message": "Added information about `rename_pattern` and `rename_replacement`\n\nAdded information about `rename_pattern` and `rename_replacement`. This is to follow-up some of the unaddressed comments given by James in https://github.com/elastic/elasticsearch/pull/59937/files.", "committedDate": "2020-11-11T04:11:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTM4NA==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r521371384", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <2> Regular expression that will match the name of data streams and indices in the snapshot. This supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#cg-[`capturing groups`].\n          \n          \n            \n            <2> Regular expression that matches data streams and indices in the snapshot.\n          \n          \n            \n            Supports\n          \n          \n            \n            https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#cg-[`capturing\n          \n          \n            \n            groups`].", "author": "jrodewig", "createdAt": "2020-11-11T13:51:11Z", "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "diffHunk": "@@ -93,6 +93,8 @@ If `true`, the snapshot's persistent settings, index templates, ingest\n pipelines, and {ilm-init} policies are restored into the current cluster. This\n overwrites any existing cluster settings, templates, pipelines and {ilm-init}\n policies whose names match those in the snapshot.\n+<2> Regular expression that will match the name of data streams and indices in the snapshot. This supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#cg-[`capturing groups`].", "originalCommit": "3197466be2fe1c87b888a5470c57cfb99f45d918", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3OTMzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r521379331", "bodyText": "+1 to @jrodewig's changes.\n@romain-chanu, I'm curious why we're calling out capturing groups specifically. The page for the Pattern class includes everything about the syntax, so I think we might want to say something like:\n\nSupports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#cg-[regular expression constructs].\n\nPlease let me know if there was reason to call out capturing groups.", "author": "lockewritesdocs", "createdAt": "2020-11-11T14:03:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTkwNTM0Nw==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r521905347", "bodyText": "Thank you @jrodewig @lockewritesdocs - thank you for the suggestions - that looks good. I wanted to mention the capturing groups explicitly to better explain the example - but we can definitely mention the page for the Pattern (and @jrodewig's suggestion for point 3 still refers to the capturing group) so i think we are good.", "author": "romain-chanu", "createdAt": "2020-11-12T08:03:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MTM4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MjcwOA==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r521372708", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <3> String used to rename data streams and indices in the snapshot that match the `rename_pattern`. `$1` is a reference to the first capturing group, which returns the first value found in the tested input. In this example, this corresponds to the number postfixing the index name. Indices `index_1` and `index_2` will be renamed as `restored_index_1` and `restored_index_2`.\n          \n          \n            \n            <3> Renames data streams and indices that match the `rename_pattern`.\n          \n          \n            \n            `$1` is a reference to the first capturing group. In this example, `index_1` and\n          \n          \n            \n            `index_2` will be renamed as `restored_index_1` and `restored_index_2`.", "author": "jrodewig", "createdAt": "2020-11-11T13:53:25Z", "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "diffHunk": "@@ -93,6 +93,8 @@ If `true`, the snapshot's persistent settings, index templates, ingest\n pipelines, and {ilm-init} policies are restored into the current cluster. This\n overwrites any existing cluster settings, templates, pipelines and {ilm-init}\n policies whose names match those in the snapshot.\n+<2> Regular expression that will match the name of data streams and indices in the snapshot. This supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#cg-[`capturing groups`].\n+<3> String used to rename data streams and indices in the snapshot that match the `rename_pattern`. `$1` is a reference to the first capturing group, which returns the first value found in the tested input. In this example, this corresponds to the number postfixing the index name. Indices `index_1` and `index_2` will be renamed as `restored_index_1` and `restored_index_2`.", "originalCommit": "3197466be2fe1c87b888a5470c57cfb99f45d918", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM4MDI3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r521380276", "bodyText": "+1 -- thanks @jrodewig!", "author": "lockewritesdocs", "createdAt": "2020-11-11T14:05:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM3MjcwOA=="}], "type": "inlineReview"}, {"oid": "e659ff3103093923b3a139dbb9d937ebe7893b29", "url": "https://github.com/elastic/elasticsearch/commit/e659ff3103093923b3a139dbb9d937ebe7893b29", "message": "Amended documentation as per peer review.", "committedDate": "2020-11-12T08:56:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjEwODQwNA==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r522108404", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <2> Regular expression that matches data streams and indices in the snapshot. Supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html-[regular-expression constructs].\n          \n          \n            \n            <2> Regular expression that matches data streams and indices in the snapshot. Supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html[regular expression constructs].", "author": "lockewritesdocs", "createdAt": "2020-11-12T13:34:27Z", "path": "docs/reference/snapshot-restore/restore-snapshot.asciidoc", "diffHunk": "@@ -93,6 +93,8 @@ If `true`, the snapshot's persistent settings, index templates, ingest\n pipelines, and {ilm-init} policies are restored into the current cluster. This\n overwrites any existing cluster settings, templates, pipelines and {ilm-init}\n policies whose names match those in the snapshot.\n+<2> Regular expression that matches data streams and indices in the snapshot. Supports https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html-[regular-expression constructs].", "originalCommit": "e659ff3103093923b3a139dbb9d937ebe7893b29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjEwODg3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/64904#discussion_r522108876", "bodyText": "@romain-chanu, the trailing dash - in the URL needs to be removed. Otherwise, the link breaks in the output.", "author": "lockewritesdocs", "createdAt": "2020-11-12T13:35:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjEwODQwNA=="}], "type": "inlineReview"}, {"oid": "25850ff6f66e1369145a512ffe3688b92ec0c6ae", "url": "https://github.com/elastic/elasticsearch/commit/25850ff6f66e1369145a512ffe3688b92ec0c6ae", "message": "Updated docs/reference/snapshot-restore/restore-snapshot.asciidoc\n\nCo-authored-by: Adam Locke <adam.locke@elastic.co>", "committedDate": "2020-11-12T14:28:59Z", "type": "commit"}]}