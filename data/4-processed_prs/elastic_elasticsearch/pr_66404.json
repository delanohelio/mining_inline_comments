{"pr_number": 66404, "pr_title": "Adding information about SAML API to SAML guide", "pr_createdAt": "2020-12-15T19:58:47Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66404", "timeline": [{"oid": "c252688de7b64613e67cfe7764f1643e81b7c48e", "url": "https://github.com/elastic/elasticsearch/commit/c252688de7b64613e67cfe7764f1643e81b7c48e", "message": "Adding information about SAML API to SAML guide\n\nAdding information about new SAML metadata API to SAML guid\n\nRelated:##49018", "committedDate": "2020-12-15T19:56:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY1MDE5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/66404#discussion_r543650199", "bodyText": "The sentence below reads strange now that we have two ways of generating the metadata. It feels like the API approach is getting lost in the details while the CLI tool is more prominent in this page. Maybe Lisa has some idea on how o adjust the content.\nWe can probably add an example of calling the API and storing the response to a file since a file will be what most IDPs expect from an SP and we cover only the raw json response in the API documentation page", "author": "jkakavas", "createdAt": "2020-12-15T20:05:17Z", "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -623,7 +623,8 @@ Provider. This will automatically configure many of the integration options\n between the IdP and the SP.\n \n The Elastic Stack supports generating such a metadata file using the\n-`bin/elasticsearch-saml-metadata` command in your {es} directory.\n+`bin/elasticsearch-saml-metadata` command in your {es} directory or <<security-api-saml-sp-metadata,SAML service\n+provider metadata API>>.", "originalCommit": "c252688de7b64613e67cfe7764f1643e81b7c48e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDcyMDU1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/66404#discussion_r544720553", "bodyText": "I agree that the second paragraph is redundant, so I added a commit to put the link in the first paragraph instead. I also agree that if there's a good example we could add to this page (using either of the methods), that'd be great.", "author": "lcawl", "createdAt": "2020-12-17T00:27:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY1MDE5OQ=="}], "type": "inlineReview"}, {"oid": "faf8c4faeac3ad91a6731c8511c0ead6008dfae7", "url": "https://github.com/elastic/elasticsearch/commit/faf8c4faeac3ad91a6731c8511c0ead6008dfae7", "message": "[DOCS] Remove redundant paragraph", "committedDate": "2020-12-17T00:25:12Z", "type": "commit"}, {"oid": "ac705ecb1950a6ff4fd1d7df06e9cdcb365c4de9", "url": "https://github.com/elastic/elasticsearch/commit/ac705ecb1950a6ff4fd1d7df06e9cdcb365c4de9", "message": "Adding information about SAML API to SAML guide\n\nAdding information about new SAML metadata API to SAML guid\n\nRelated: #49018", "committedDate": "2020-12-18T17:47:11Z", "type": "commit"}, {"oid": "0a91620a38d008b34e3cc1fbc0b62c98e3b3440e", "url": "https://github.com/elastic/elasticsearch/commit/0a91620a38d008b34e3cc1fbc0b62c98e3b3440e", "message": "[DOCS] Merges two paragraphs in metadata example", "committedDate": "2020-12-18T18:23:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIwNTA0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/66404#discussion_r546205045", "bodyText": "small nit to match what we have in other places\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            curl -X GET -H \"Content-Type: application/json\" -u user_name:password http://localhost:9200/_security/saml/metadata/saml1 |jq -r '.[]' > metadata.xml\n          \n          \n            \n            curl -u user_name:password  -X GET http://localhost:9200/_security/saml/metadata/saml1 -H 'Content-Type: application/json' | jq -r '.[]' > metadata.xml", "author": "jkakavas", "createdAt": "2020-12-19T07:22:05Z", "path": "x-pack/docs/en/security/authentication/saml-guide.asciidoc", "diffHunk": "@@ -622,11 +622,19 @@ Some Identity Providers support importing a metadata file from the Service\n Provider. This will automatically configure many of the integration options\n between the IdP and the SP.\n \n-The Elastic Stack supports generating such a metadata file using the\n-`bin/elasticsearch-saml-metadata` command in your {es} directory.\n-\n-The <<saml-metadata,documentation for the elasticsearch-saml-metadata utility>>\n-describes how to run it, and the available command line options.\n+The {stack} supports generating such a metadata file using the\n+<<saml-metadata,`bin/elasticsearch-saml-metadata` command>> or the\n+<<security-api-saml-sp-metadata,SAML service provider metadata API>>.\n+\n+You can generate the SAML metadata by issuing the API request to {es} and store \n+it as an XML file using tools like `jq`. For example, the following command \n+generates the metadata for the SAML realm `realm1` and saves it to a \n+`metadata.xml` file:\n+\n+[\"source\",\"console\"]\n+--\n+curl -X GET -H \"Content-Type: application/json\" -u user_name:password http://localhost:9200/_security/saml/metadata/saml1 |jq -r '.[]' > metadata.xml", "originalCommit": "0a91620a38d008b34e3cc1fbc0b62c98e3b3440e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "26cf148b9033390550fdc63eca94896daa04f87d", "url": "https://github.com/elastic/elasticsearch/commit/26cf148b9033390550fdc63eca94896daa04f87d", "message": "Adding information about SAML API to SAML guide\n\nAdding information about new SAML metadata API to SAML guid\n\nRelated: #49018", "committedDate": "2020-12-20T19:00:22Z", "type": "commit"}]}