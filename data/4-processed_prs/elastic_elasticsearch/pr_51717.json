{"pr_number": 51717, "pr_title": "Disable build cache for packaging tests", "pr_createdAt": "2020-01-30T23:25:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51717", "timeline": [{"oid": "22903d9bc5cefe05b4c6975196d36278dd1dae22", "url": "https://github.com/elastic/elasticsearch/commit/22903d9bc5cefe05b4c6975196d36278dd1dae22", "message": "Disable build cache for packaging tests\n\nSigned-off-by: Mark Vieira <portugee@gmail.com>", "committedDate": "2020-01-30T23:23:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI3NDkxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/51717#discussion_r373274915", "bodyText": "This isn't actually a packaging test, it's running rest tests with docker. I don't think we disable caching for the rest of rest or qa tests do we?", "author": "rjernst", "createdAt": "2020-01-31T01:09:51Z", "path": "distribution/docker/build.gradle", "diffHunk": "@@ -137,6 +137,7 @@ processTestResources {\n }\n \n task integTest(type: Test) {\n+  outputs.doNotCacheIf('Build cache is disabled for Docker tests') { true }", "originalCommit": "22903d9bc5cefe05b4c6975196d36278dd1dae22", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI3NTUwNw==", "url": "https://github.com/elastic/elasticsearch/pull/51717#discussion_r373275507", "bodyText": "True it's not a packaging test, but the same applies, we aren't considering the Docker image as an input here.\nWe don't use the Docker image in any other tests, with the exception of those being added in #51658, which prompted me to look into this. For other rest and qa tests we use test clusters, which handles tracking the node distribution as a proper task input.", "author": "mark-vieira", "createdAt": "2020-01-31T01:12:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI3NDkxNQ=="}], "type": "inlineReview"}]}