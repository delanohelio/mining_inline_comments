{"pr_number": 54577, "pr_title": "Upgrade feature aware check usage of ASM to 7.3.1", "pr_createdAt": "2020-04-01T12:52:56Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54577", "timeline": [{"oid": "aafac13bea40e50ffeeaa25cf5b90693288a75a8", "url": "https://github.com/elastic/elasticsearch/commit/aafac13bea40e50ffeeaa25cf5b90693288a75a8", "message": "Upgrade feature aware check usage of ASM to 7.3.1\n\nThis commit upgrades the ASM dependency used in the feature aware check\nto 7.3.1. This gives support for JDK 14. Additionally, now that Gradle\nunderstands JDK 13, it means we can remove a restriction on running the\nfeature aware check to JDK 12 and lower.", "committedDate": "2020-04-01T12:50:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc3Mzk1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54577#discussion_r401773955", "bodyText": "Should we keep this in here set to the latest compatible version anyhow? We are just going to likely have to put it back once we start testing with JDK 15 EA releases.", "author": "mark-vieira", "createdAt": "2020-04-01T17:08:25Z", "path": "x-pack/plugin/build.gradle", "diffHunk": "@@ -40,14 +40,6 @@ subprojects {\n         // filter out non-existent classes directories from empty source sets\n         final FileCollection classDirectories = project.files(files).filter { it.exists() }\n \n-        onlyIf {\n-          /*\n-           * The latest version of ASM does not understand JDK 14. However, Gradle can not distinguish between JDK 13 and JDK 14 (treating\n-           * anything above JDK 12 as JDK 13). So, to exclude JDK 14 until a newer version of ASM is available, we also have to exclude JDK\n-           * 13. See https://github.com/elastic/elasticsearch/issues/45927.\n-           */\n-          Integer.parseInt(BuildParams.runtimeJavaVersion.majorVersion) < 13", "originalCommit": "aafac13bea40e50ffeeaa25cf5b90693288a75a8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc3ODEyNQ==", "url": "https://github.com/elastic/elasticsearch/pull/54577#discussion_r401778125", "bodyText": "Oh, one more thing, why do we seem to insist on using the runtime JDK for this stuff? I've already ripped this out of a bunch of places because this is a build time check. I should not be using some old JDK for doing precommit checks just because I happen to have RUNTIME_JAVA_HOME set. I think this could cause wacky behavior for folks.\nI'd prefer we use the compilerJavaHome here instead. I think it makes the most sense for these use cases.", "author": "mark-vieira", "createdAt": "2020-04-01T17:14:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc3Mzk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDcwMjAxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/54577#discussion_r410702015", "bodyText": "I pushed 90dd3ae. This means that we don't need to keep the onlyIf, since we'll always be using a compatible compiler.", "author": "jasontedor", "createdAt": "2020-04-18T14:04:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc3Mzk1NQ=="}], "type": "inlineReview"}, {"oid": "38a64b8cb43d96b56ff9d061c1f4b8b412662221", "url": "https://github.com/elastic/elasticsearch/commit/38a64b8cb43d96b56ff9d061c1f4b8b412662221", "message": "Merge branch '7.x' into asm-7.3.1-feature-aware-check", "committedDate": "2020-04-18T13:56:23Z", "type": "commit"}, {"oid": "90dd3ae6c4e27b144d6aec69565e9b3b9a84c190", "url": "https://github.com/elastic/elasticsearch/commit/90dd3ae6c4e27b144d6aec69565e9b3b9a84c190", "message": "Iteration", "committedDate": "2020-04-18T14:03:13Z", "type": "commit"}, {"oid": "7ce88cf095ec5f596060659913967b7effb8bbf4", "url": "https://github.com/elastic/elasticsearch/commit/7ce88cf095ec5f596060659913967b7effb8bbf4", "message": "Update SHAs", "committedDate": "2020-04-18T14:07:53Z", "type": "commit"}]}