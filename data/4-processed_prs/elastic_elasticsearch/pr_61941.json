{"pr_number": 61941, "pr_title": "Document standard metadata entries.", "pr_createdAt": "2020-09-03T17:15:59Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61941", "timeline": [{"oid": "80ba48283c09c9720766ee399f2b26f9d65f45a2", "url": "https://github.com/elastic/elasticsearch/commit/80ba48283c09c9720766ee399f2b26f9d65f45a2", "message": "Document standard metadata entries.\n\nWe standardize on some metadata entries that we plan to later leverage\nin Kibana in order to provide a better out-of-the-box experience, e.g.\ndifferent visualizations make sense on gauges and counters.", "committedDate": "2020-09-03T17:14:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0NjI5MA==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r483246290", "bodyText": "I'd like to explain what gauges and counters are in here. Something like:\nThe type of metric for time series data. Options are none, \"gauge\" and \"counter\".\nA gauge is a number representing a point in time that can go up and down.\nA counter is a number representing a cumulative amount and is always increasing. Counters can reset to 0 occasionally.", "author": "wylieconlon", "createdAt": "2020-09-03T20:49:35Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,24 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information should only be specified on numeric fields.\n+\n+metric_type::\n+\n+  The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. By default, fields\n+  are assumed to not be a metric. This information should only be specified on\n+  numeric fields.", "originalCommit": "80ba48283c09c9720766ee399f2b26f9d65f45a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0NjU4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r483246587", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              Whether the field is a ratio. Recognizes `true` and `false` (default). The\n          \n          \n            \n              Whether the field is a ratio or percent. Recognizes `true` and `false` (default). The", "author": "wylieconlon", "createdAt": "2020-09-03T20:50:11Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,24 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information should only be specified on numeric fields.\n+\n+metric_type::\n+\n+  The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. By default, fields\n+  are assumed to not be a metric. This information should only be specified on\n+  numeric fields.\n+\n+ratio::\n+\n+  Whether the field is a ratio. Recognizes `true` and `false` (default). The", "originalCommit": "80ba48283c09c9720766ee399f2b26f9d65f45a2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzQ4OTU0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r483489545", "bodyText": "My understanding was that we always use ratios in the data we produce, never percentages (ie. ratio * 100), is this assumption wrong? If we have both, do we need to be able to make the distinction via this metadata so that Kibana would know?", "author": "jpountz", "createdAt": "2020-09-04T09:05:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0NjU4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg0OTYwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r484849609", "bodyText": "@roncohen @ruflin and I had a small discussion about this yesterday. We see how this can be confusing for users, so we agreed this could be the best approach:\nHaving only percent stored as a unit (no need for a ratio flag in meta), where the value is expected to be in the [0-1] notation. This is how Metricbeat stores percentages today.\nWDYT?", "author": "exekias", "createdAt": "2020-09-08T11:37:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzI0NjU4Nw=="}], "type": "inlineReview"}, {"oid": "3d9c6c6590d9bb7e59ada3e11320cdc328ad52e5", "url": "https://github.com/elastic/elasticsearch/commit/3d9c6c6590d9bb7e59ada3e11320cdc328ad52e5", "message": "more info about gauge vs metric", "committedDate": "2020-09-04T09:11:21Z", "type": "commit"}, {"oid": "b6dcdf5a216933003458f745b79006e2ea196a58", "url": "https://github.com/elastic/elasticsearch/commit/b6dcdf5a216933003458f745b79006e2ea196a58", "message": "iter", "committedDate": "2020-09-04T09:13:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU4NzQyNA==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r490587424", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Elastic products standardize on the following metadata, which you may use too\n          \n          \n            \n            in order to get a better out-of-the-box experience with your data.\n          \n          \n            \n            Elastic products use the following standard metadata entries for fields. You  can follow these same metadata conventions to get a better out-of-the-box experience with your data.", "author": "debadair", "createdAt": "2020-09-17T22:03:26Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,27 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.", "originalCommit": "b6dcdf5a216933003458f745b79006e2ea196a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU5MDY4Mg==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r490590682", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              The unit of the field. Recognizes `\"byte\"` as well as\n          \n          \n            \n              <<time-units,time units>>. By default, fields are assumed to not have a unit.\n          \n          \n            \n              This information may only be specified on numeric fields.\n          \n          \n            \n              The unit associated with a numeric field: `\"byte\"` or a\n          \n          \n            \n              <<time-units,time unit>>. By default, a field does not have a unit.\n          \n          \n            \n              Only valid for numeric fields.", "author": "debadair", "createdAt": "2020-09-17T22:11:47Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,27 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information may only be specified on numeric fields.", "originalCommit": "b6dcdf5a216933003458f745b79006e2ea196a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU5MTc1NA==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r490591754", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. A gauge is a\n          \n          \n            \n              single-valued measurement that can go up or down over time, such as a\n          \n          \n            \n              temperature. A counter is a single-valued cumulative counter that only goes\n          \n          \n            \n              up, such as the number of requests processed by a web server. By default,\n          \n          \n            \n              fields are assumed to not be a metric. This information may only be\n          \n          \n            \n              specified on numeric fields.\n          \n          \n            \n              The  metric type of a numeric field: `\"gauge\"` or `\"counter\"`. A gauge is a\n          \n          \n            \n              single-value measurement that can go up or down over time, such as a\n          \n          \n            \n              temperature. A counter is a single-value cumulative counter that only goes\n          \n          \n            \n              up, such as the number of requests processed by a web server. By default,\n          \n          \n            \n             no metric type is associated with a field. Only valid for numeric fields.", "author": "debadair", "createdAt": "2020-09-17T22:14:47Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,27 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information may only be specified on numeric fields.\n+\n+metric_type::\n+\n+  The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. A gauge is a\n+  single-valued measurement that can go up or down over time, such as a\n+  temperature. A counter is a single-valued cumulative counter that only goes\n+  up, such as the number of requests processed by a web server. By default,\n+  fields are assumed to not be a metric. This information may only be\n+  specified on numeric fields.", "originalCommit": "b6dcdf5a216933003458f745b79006e2ea196a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU5Mjg0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r490592843", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              Whether the field is a ratio. Recognizes `true` and `false` (default). The\n          \n          \n            \n              A boolean value that indicates whether a field is a ratio. Defaults to `false`. The", "author": "debadair", "createdAt": "2020-09-17T22:17:45Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,27 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information may only be specified on numeric fields.\n+\n+metric_type::\n+\n+  The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. A gauge is a\n+  single-valued measurement that can go up or down over time, such as a\n+  temperature. A counter is a single-valued cumulative counter that only goes\n+  up, such as the number of requests processed by a web server. By default,\n+  fields are assumed to not be a metric. This information may only be\n+  specified on numeric fields.\n+\n+ratio::\n+\n+  Whether the field is a ratio. Recognizes `true` and `false` (default). The", "originalCommit": "b6dcdf5a216933003458f745b79006e2ea196a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU5MzgyNw==", "url": "https://github.com/elastic/elasticsearch/pull/61941#discussion_r490593827", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              value should not be `true` when a `unit` is also specified. This information\n          \n          \n            \n              may only be specified on numeric fields.\n          \n          \n            \n              Leave set to `false` if a `unit` is specified. Only valid for numeric fields.", "author": "debadair", "createdAt": "2020-09-17T22:20:23Z", "path": "docs/reference/mapping/params/meta.asciidoc", "diffHunk": "@@ -29,3 +29,27 @@ than or equal to 50.\n \n NOTE: Field metadata is updatable by submitting a mapping update. The metadata\n of the update will override the metadata of the existing field.\n+\n+Elastic products standardize on the following metadata, which you may use too\n+in order to get a better out-of-the-box experience with your data.\n+\n+unit::\n+\n+  The unit of the field. Recognizes `\"byte\"` as well as\n+  <<time-units,time units>>. By default, fields are assumed to not have a unit.\n+  This information may only be specified on numeric fields.\n+\n+metric_type::\n+\n+  The type of metric. Recognizes `\"gauge\"` and `\"counter\"`. A gauge is a\n+  single-valued measurement that can go up or down over time, such as a\n+  temperature. A counter is a single-valued cumulative counter that only goes\n+  up, such as the number of requests processed by a web server. By default,\n+  fields are assumed to not be a metric. This information may only be\n+  specified on numeric fields.\n+\n+ratio::\n+\n+  Whether the field is a ratio. Recognizes `true` and `false` (default). The\n+  value should not be `true` when a `unit` is also specified. This information\n+  may only be specified on numeric fields.", "originalCommit": "b6dcdf5a216933003458f745b79006e2ea196a58", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c607d8bd93e75e0b049523642ed8beab93463aea", "url": "https://github.com/elastic/elasticsearch/commit/c607d8bd93e75e0b049523642ed8beab93463aea", "message": "Apply suggestions from code review\n\nCo-authored-by: debadair <debadair@elastic.co>", "committedDate": "2020-10-08T12:58:45Z", "type": "commit"}, {"oid": "3d0f00f1d4527ac88af5f2cef57e435543c6dc37", "url": "https://github.com/elastic/elasticsearch/commit/3d0f00f1d4527ac88af5f2cef57e435543c6dc37", "message": "Merge branch 'master' into docs_meta", "committedDate": "2020-10-08T12:59:33Z", "type": "commit"}, {"oid": "e8e21424fc1e0019115f66567b344dfbd1cb25b2", "url": "https://github.com/elastic/elasticsearch/commit/e8e21424fc1e0019115f66567b344dfbd1cb25b2", "message": "Make `percent` a unit and remove `ratio`.", "committedDate": "2020-10-08T13:06:07Z", "type": "commit"}, {"oid": "cd30656dfe00aadd7865d49c6c21e20956be645e", "url": "https://github.com/elastic/elasticsearch/commit/cd30656dfe00aadd7865d49c6c21e20956be645e", "message": "iter", "committedDate": "2020-10-08T13:08:20Z", "type": "commit"}]}