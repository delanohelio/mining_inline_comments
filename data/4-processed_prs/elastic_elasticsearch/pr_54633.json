{"pr_number": 54633, "pr_title": "indices.recovery.max_bytes_per_sec may be per-node", "pr_createdAt": "2020-04-02T11:14:41Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54633", "timeline": [{"oid": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "url": "https://github.com/elastic/elasticsearch/commit/22e883c2a85dc83f8a949d04823bbde2a4d22433", "message": "indices.recovery.max_bytes_per_sec may be per-node\n\nThe `indices.recovery.max_bytes_per_sec` recovery bandwidth limit can differ\nbetween nodes if it is not set dynamically, but today this is not obvious. This\ncommit adds a paragraph to its documentation clarifying how to set different\nbandwidth limits on each node.", "committedDate": "2020-04-02T10:42:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxNzI0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402317243", "bodyText": "This doesn't render properly because :: falls on a different line.\nI think we can move the parenthetical info inside the definition like this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `indices.recovery.max_concurrent_file_chunks`\n          \n          \n            \n            (<<cluster-update-settings,Dynamic>>, Expert):: Number of file chunk requests\n          \n          \n            \n            sent in parallel for each recovery. Defaults to `2`.\n          \n          \n            \n            `indices.recovery.max_concurrent_file_chunks`:: \n          \n          \n            \n            (<<cluster-update-settings,Dynamic>>, Expert)\n          \n          \n            \n            Number of file chunk requests sent in parallel for each recovery. Defaults to\n          \n          \n            \n            `2`.", "author": "jrodewig", "createdAt": "2020-04-02T13:35:37Z", "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it\n+dynamically then the same limit applies on every node in the cluster. If you do\n+not set it dynamically then you can set a different limit on each node, which\n+is useful if some of your nodes have better bandwidth than others. For example,\n+if you are using <<overview-index-lifecycle-management,Index Lifecycle\n+Management>> then you may restrict the recovery bandwidth on your warm nodes\n+more than on your hot nodes.\n \n [float]\n ==== Expert peer recovery settings\n You can use the following _expert_ setting to manage resources for peer\n recoveries.\n \n-`indices.recovery.max_concurrent_file_chunks` (<<cluster-update-settings,Dynamic>>, Expert)::\n-Number of file chunk requests sent in parallel for each recovery. Defaults to\n-`2`.\n+`indices.recovery.max_concurrent_file_chunks`\n+(<<cluster-update-settings,Dynamic>>, Expert):: Number of file chunk requests\n+sent in parallel for each recovery. Defaults to `2`.", "originalCommit": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxNzc3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402317771", "bodyText": "Github won't let me suggest, but we may want to move the parenthetical inside the definition as with indices.recovery.max_concurrent_file_chunks.", "author": "jrodewig", "createdAt": "2020-04-02T13:36:20Z", "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::", "originalCommit": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMxODkyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402318929", "bodyText": "I would just add a comma here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This is a dynamic setting which means you can set it in each node's\n          \n          \n            \n            `elasticsearch.yml` config file and you can update it dynamically using the\n          \n          \n            \n            <<cluster-update-settings,cluster update settings API>>. If you set it\n          \n          \n            \n            This is a dynamic setting, which means you can set it in each node's\n          \n          \n            \n            `elasticsearch.yml` config file and you can update it dynamically using the\n          \n          \n            \n            <<cluster-update-settings,cluster update settings API>>. If you set it", "author": "jrodewig", "createdAt": "2020-04-02T13:38:01Z", "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it", "originalCommit": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjMyMTczNg==", "url": "https://github.com/elastic/elasticsearch/pull/54633#discussion_r402321736", "bodyText": "Slight reword\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            if you are using <<overview-index-lifecycle-management,Index Lifecycle\n          \n          \n            \n            Management>> then you may restrict the recovery bandwidth on your warm nodes\n          \n          \n            \n            more than on your hot nodes.\n          \n          \n            \n            if you are use <<overview-index-lifecycle-management,Index Lifecycle\n          \n          \n            \n            Management>>, you may give hot nodes a higher recovery bandwidth limit than\n          \n          \n            \n            warm nodes.", "author": "jrodewig", "createdAt": "2020-04-02T13:41:35Z", "path": "docs/reference/modules/indices/recovery.asciidoc", "diffHunk": "@@ -17,24 +16,34 @@ You can view a list of in-progress and completed recoveries using the\n ==== Peer recovery settings\n \n `indices.recovery.max_bytes_per_sec` (<<cluster-update-settings,Dynamic>>)::\n-Limits total inbound and outbound recovery traffic for each node.\n-Defaults to `40mb`.\n+Limits total inbound and outbound recovery traffic for each node. Defaults to\n+`40mb`.\n +\n-This limit applies to nodes only. If multiple nodes in a cluster perform\n-recoveries at the same time, the cluster's total recovery traffic may exceed\n-this limit.\n+This limit applies to each node separately. If multiple nodes in a cluster\n+perform recoveries at the same time, the cluster's total recovery traffic may\n+exceed this limit.\n +\n-If this limit is too high, ongoing recoveries may consume an excess\n-of bandwidth and other resources, which can destabilize the cluster.\n+If this limit is too high, ongoing recoveries may consume an excess of bandwidth\n+and other resources, which can destabilize the cluster.\n++\n+This is a dynamic setting which means you can set it in each node's\n+`elasticsearch.yml` config file and you can update it dynamically using the\n+<<cluster-update-settings,cluster update settings API>>. If you set it\n+dynamically then the same limit applies on every node in the cluster. If you do\n+not set it dynamically then you can set a different limit on each node, which\n+is useful if some of your nodes have better bandwidth than others. For example,\n+if you are using <<overview-index-lifecycle-management,Index Lifecycle\n+Management>> then you may restrict the recovery bandwidth on your warm nodes\n+more than on your hot nodes.", "originalCommit": "22e883c2a85dc83f8a949d04823bbde2a4d22433", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c6499ae9faf37f31659ca89824d9e2deb878c376", "url": "https://github.com/elastic/elasticsearch/commit/c6499ae9faf37f31659ca89824d9e2deb878c376", "message": "Update docs/reference/modules/indices/recovery.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-04-02T13:43:43Z", "type": "commit"}, {"oid": "4b671cadbf35e56d708c6ecb84eabf7380ebd703", "url": "https://github.com/elastic/elasticsearch/commit/4b671cadbf35e56d708c6ecb84eabf7380ebd703", "message": "Line break", "committedDate": "2020-04-02T13:45:14Z", "type": "commit"}, {"oid": "6ec7afdaca3129d1262001f43363c612d337cc91", "url": "https://github.com/elastic/elasticsearch/commit/6ec7afdaca3129d1262001f43363c612d337cc91", "message": "Reword", "committedDate": "2020-04-02T13:46:29Z", "type": "commit"}, {"oid": "e2221b3ee0820d6bdea06425e70188b97d9e8726", "url": "https://github.com/elastic/elasticsearch/commit/e2221b3ee0820d6bdea06425e70188b97d9e8726", "message": "Move parentheticals inside definitions", "committedDate": "2020-04-02T13:49:27Z", "type": "commit"}]}