{"pr_number": 57754, "pr_title": "Fix recovery stage transition with sync_id", "pr_createdAt": "2020-06-05T17:35:08Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57754", "timeline": [{"oid": "5fa39790446bd75dade1b09e48500725f4b26d98", "url": "https://github.com/elastic/elasticsearch/commit/5fa39790446bd75dade1b09e48500725f4b26d98", "message": "Fix recovery stage transition with sync_id", "committedDate": "2020-06-05T17:20:10Z", "type": "commit"}, {"oid": "4c5cbf36d8faccc29c10396e95002e17f1b80bad", "url": "https://github.com/elastic/elasticsearch/commit/4c5cbf36d8faccc29c10396e95002e17f1b80bad", "message": "fix test", "committedDate": "2020-06-06T01:59:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ4MDYwNg==", "url": "https://github.com/elastic/elasticsearch/pull/57754#discussion_r436480606", "bodyText": "Can we drop this test in v9? If so, can we link Version#V_7_2_0 in the comment to remind us?", "author": "DaveCTurner", "createdAt": "2020-06-08T06:30:23Z", "path": "server/src/internalClusterTest/java/org/elasticsearch/gateway/ReplicaShardAllocatorSyncIdIT.java", "diffHunk": "@@ -243,6 +245,53 @@ public void testFullClusterRestartPerformNoopRecovery() throws Exception {\n         assertNoOpRecoveries(indexName);\n     }\n \n+    /**\n+     * If the recovery source is on an old node (before 7.2), then the recovery target won't have the safe commit after phase1", "originalCommit": "4c5cbf36d8faccc29c10396e95002e17f1b80bad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODk2MDQxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/57754#discussion_r438960411", "bodyText": "++. I pushed b8d63fb.", "author": "dnhatn", "createdAt": "2020-06-11T17:44:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ4MDYwNg=="}], "type": "inlineReview"}, {"oid": "7c591f94f8b48a4e959e0b89eaadb8335141c06d", "url": "https://github.com/elastic/elasticsearch/commit/7c591f94f8b48a4e959e0b89eaadb8335141c06d", "message": "Merge branch 'master' into fix-recovery-transition", "committedDate": "2020-06-11T17:23:02Z", "type": "commit"}, {"oid": "b8d63fb4a00ab5958df4adbd710994d3fc92bc27", "url": "https://github.com/elastic/elasticsearch/commit/b8d63fb4a00ab5958df4adbd710994d3fc92bc27", "message": "add version to comment", "committedDate": "2020-06-11T17:40:49Z", "type": "commit"}, {"oid": "24d42737dad3760c726b6872b6a0cee72d188d02", "url": "https://github.com/elastic/elasticsearch/commit/24d42737dad3760c726b6872b6a0cee72d188d02", "message": "fix code link", "committedDate": "2020-06-11T18:57:27Z", "type": "commit"}]}