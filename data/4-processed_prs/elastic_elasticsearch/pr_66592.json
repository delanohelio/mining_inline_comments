{"pr_number": 66592, "pr_title": "[DOCS] Network community ID processor for ingest pipelines", "pr_createdAt": "2020-12-18T13:26:12Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66592", "timeline": [{"oid": "98521b4f95b124bbf2b4b9c56a4ab33ddb74fae0", "url": "https://github.com/elastic/elasticsearch/commit/98521b4f95b124bbf2b4b9c56a4ab33ddb74fae0", "message": "[DOCS] Network community ID processor for ingest pipelines", "committedDate": "2020-12-17T22:18:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg2ODUwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r545868509", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            0 and 65535.\n          \n          \n            \n            0 and 65535. This can be use to prevent hash collisions between network domains\n          \n          \n            \n            (such as a staging and production network that use the same addressing scheme).\n          \n      \n    \n    \n  \n\nI thought it would be useful to explain when seed could be used.", "author": "andrewkroh", "createdAt": "2020-12-18T14:34:23Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,91 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the\n+https://github.com/corelight/community-id-spec[Community ID Specification].\n+\n+[[community-id-options]]\n+.Community ID Options\n+[options=\"header\"]\n+|======\n+| Name               | Required | Default       | Description\n+| `source_ip`        | no       | `source.ip`   | Field containing the source IP address.\n+| `source_port`      | no       | `source.port` | Field containing the source port.\n+| `destination_ip`   | no       | `destination.ip` | Field containing the destination IP address.\n+| `destination_port` | no       | `destination.port` | Field containing the destination port.\n+| `iana_number`      | no       | `network.iana_number` | Field containing the IANA number.\n+| `icmp_type`        | no       | `icmp.type`   | Field containing the ICMP type.\n+| `icmp_code`        | no       | `icmp.code`   | Field containing the ICMP code.\n+| `transport`        | no       | `network.transport` | Field containing the transport protocol.\n+| `target_field`     | no       | `network.community_id` | Output field for the community ID.\n+| `seed`             | no       | `0`           | Seed for the community ID hash. Must be between\n+0 and 65535.", "originalCommit": "98521b4f95b124bbf2b4b9c56a4ab33ddb74fae0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg5MDM0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r545890345", "bodyText": "WDYT about copying the first three paragraphs from Beats verbatim?\nhttps://github.com/elastic/beats/blame/7.10/libbeat/processors/communityid/docs/communityid.asciidoc#L8-L19", "author": "andrewkroh", "createdAt": "2020-12-18T14:59:52Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,91 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the", "originalCommit": "98521b4f95b124bbf2b4b9c56a4ab33ddb74fae0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk1MzU4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r545953583", "bodyText": "I'll defer to the ES Docs team reviewer on this one as I have no strong inclination either way.", "author": "danhermann", "createdAt": "2020-12-18T16:42:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg5MDM0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwMDQ2Mg==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r546000462", "bodyText": "I don't think we should copy the paragraphs verbatim. That text is pretty Beats-centric. However, we can include a brief sentence about how a community ID is used and the ECS defaults. I've included a related suggestion below.", "author": "jrodewig", "createdAt": "2020-12-18T18:06:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg5MDM0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTg5MTc5OA==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r545891798", "bodyText": "Should we mention that this field is only used when the iana_number field does not exist?", "author": "andrewkroh", "createdAt": "2020-12-18T15:01:16Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,91 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the\n+https://github.com/corelight/community-id-spec[Community ID Specification].\n+\n+[[community-id-options]]\n+.Community ID Options\n+[options=\"header\"]\n+|======\n+| Name               | Required | Default       | Description\n+| `source_ip`        | no       | `source.ip`   | Field containing the source IP address.\n+| `source_port`      | no       | `source.port` | Field containing the source port.\n+| `destination_ip`   | no       | `destination.ip` | Field containing the destination IP address.\n+| `destination_port` | no       | `destination.port` | Field containing the destination port.\n+| `iana_number`      | no       | `network.iana_number` | Field containing the IANA number.\n+| `icmp_type`        | no       | `icmp.type`   | Field containing the ICMP type.\n+| `icmp_code`        | no       | `icmp.code`   | Field containing the ICMP code.\n+| `transport`        | no       | `network.transport` | Field containing the transport protocol.", "originalCommit": "98521b4f95b124bbf2b4b9c56a4ab33ddb74fae0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ebf37f774426143ae180419a3338d4726ef044bd", "url": "https://github.com/elastic/elasticsearch/commit/ebf37f774426143ae180419a3338d4726ef044bd", "message": "Update docs/reference/ingest/processors/community-id.asciidoc\n\nCo-authored-by: Andrew Kroh <andrew.kroh@elastic.co>", "committedDate": "2020-12-18T16:34:28Z", "type": "commit"}, {"oid": "aa0f736c495c637b098611061f1d3cfe05110087", "url": "https://github.com/elastic/elasticsearch/commit/aa0f736c495c637b098611061f1d3cfe05110087", "message": "review comments", "committedDate": "2020-12-18T16:37:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTk5MDA3MA==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r545990070", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Here is an example definition of the URI parts processor:\n          \n          \n            \n            Here is an example definition of the community ID processor:", "author": "jrodewig", "createdAt": "2020-12-18T17:46:57Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the\n+https://github.com/corelight/community-id-spec[Community ID Specification].\n+\n+[[community-id-options]]\n+.Community ID Options\n+[options=\"header\"]\n+|======\n+| Name               | Required | Default       | Description\n+| `source_ip`        | no       | `source.ip`   | Field containing the source IP address.\n+| `source_port`      | no       | `source.port` | Field containing the source port.\n+| `destination_ip`   | no       | `destination.ip` | Field containing the destination IP address.\n+| `destination_port` | no       | `destination.port` | Field containing the destination port.\n+| `iana_number`      | no       | `network.iana_number` | Field containing the IANA number.\n+| `icmp_type`        | no       | `icmp.type`   | Field containing the ICMP type.\n+| `icmp_code`        | no       | `icmp.code`   | Field containing the ICMP code.\n+| `transport`        | no       | `network.transport` | Field containing the transport protocol.\n+Used only when the `iana_number` field is not present.\n+| `target_field`     | no       | `network.community_id` | Output field for the community ID.\n+| `seed`             | no       | `0`           | Seed for the community ID hash. Must be between\n+0 and 65535. This can be use to prevent hash collisions between network domains\n+such as a staging and production network that use the same addressing scheme.\n+| `ignore_missing`   | no       | `true`        | If `true` and any required fields are missing,\n+the processor quietly exits without modifying the document.\n+\n+include::common-options.asciidoc[]\n+|======\n+\n+Here is an example definition of the URI parts processor:", "originalCommit": "aa0f736c495c637b098611061f1d3cfe05110087", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwMDA0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r546000049", "bodyText": "Lowercases community ID. Also adds a few additional sentences as noted above.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Computes the Community ID for flow data as defined in the\n          \n          \n            \n            https://github.com/corelight/community-id-spec[Community ID Specification].\n          \n          \n            \n            Computes the community ID for network flow data as defined in the\n          \n          \n            \n            https://github.com/corelight/community-id-spec[Community ID Specification]. You\n          \n          \n            \n            can use a community ID to correlate network events related to a single flow.\n          \n          \n            \n            \n          \n          \n            \n            The community ID processor reads network flow data from related\n          \n          \n            \n            {ecs-ref}[Elastic Common Schema (ECS)] fields by default. If you use the ECS, no\n          \n          \n            \n            configuration is required.", "author": "jrodewig", "createdAt": "2020-12-18T18:05:54Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the\n+https://github.com/corelight/community-id-spec[Community ID Specification].", "originalCommit": "aa0f736c495c637b098611061f1d3cfe05110087", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjAwMjcxNw==", "url": "https://github.com/elastic/elasticsearch/pull/66592#discussion_r546002717", "bodyText": "It's not clear if this range is inclusive or exclusive, though you can guess from the default. I'd just add a parenthetical afterward, e.g. (inclusive).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            0 and 65535. This can be use to prevent hash collisions between network domains\n          \n          \n            \n            `0` and `65535` (inclusive). The seed prevents hash collisions between network domains,", "author": "jrodewig", "createdAt": "2020-12-18T18:11:02Z", "path": "docs/reference/ingest/processors/community-id.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+[role=\"xpack\"]\n+[testenv=\"basic\"]\n+[[community-id-processor]]\n+=== Community ID processor\n+++++\n+<titleabbrev>Community ID</titleabbrev>\n+++++\n+\n+Computes the Community ID for flow data as defined in the\n+https://github.com/corelight/community-id-spec[Community ID Specification].\n+\n+[[community-id-options]]\n+.Community ID Options\n+[options=\"header\"]\n+|======\n+| Name               | Required | Default       | Description\n+| `source_ip`        | no       | `source.ip`   | Field containing the source IP address.\n+| `source_port`      | no       | `source.port` | Field containing the source port.\n+| `destination_ip`   | no       | `destination.ip` | Field containing the destination IP address.\n+| `destination_port` | no       | `destination.port` | Field containing the destination port.\n+| `iana_number`      | no       | `network.iana_number` | Field containing the IANA number.\n+| `icmp_type`        | no       | `icmp.type`   | Field containing the ICMP type.\n+| `icmp_code`        | no       | `icmp.code`   | Field containing the ICMP code.\n+| `transport`        | no       | `network.transport` | Field containing the transport protocol.\n+Used only when the `iana_number` field is not present.\n+| `target_field`     | no       | `network.community_id` | Output field for the community ID.\n+| `seed`             | no       | `0`           | Seed for the community ID hash. Must be between\n+0 and 65535. This can be use to prevent hash collisions between network domains", "originalCommit": "aa0f736c495c637b098611061f1d3cfe05110087", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ff3c0032ecf1c476d610a7592be097aabacb469b", "url": "https://github.com/elastic/elasticsearch/commit/ff3c0032ecf1c476d610a7592be097aabacb469b", "message": "more review comments", "committedDate": "2021-01-06T13:53:01Z", "type": "commit"}]}