{"pr_number": 55557, "pr_title": "Docs for data stream REST APIs", "pr_createdAt": "2020-04-21T21:13:51Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55557", "timeline": [{"oid": "2180a7fdb2dce8280522edc8921926f56494e2cb", "url": "https://github.com/elastic/elasticsearch/commit/2180a7fdb2dce8280522edc8921926f56494e2cb", "message": "Docs for data stream REST APIs", "committedDate": "2020-04-21T21:11:46Z", "type": "commit"}, {"oid": "5f736d211ad8ee52656b95d252d01979b3e346a4", "url": "https://github.com/elastic/elasticsearch/commit/5f736d211ad8ee52656b95d252d01979b3e346a4", "message": "add to index APIs page", "committedDate": "2020-04-21T21:19:06Z", "type": "commit"}, {"oid": "4ba628d0ce461b7f7734295b00238c2df18eca9c", "url": "https://github.com/elastic/elasticsearch/commit/4ba628d0ce461b7f7734295b00238c2df18eca9c", "message": "update redirects", "committedDate": "2020-04-24T12:34:23Z", "type": "commit"}, {"oid": "261d9b537442770b38127163e723e7131e412ab8", "url": "https://github.com/elastic/elasticsearch/commit/261d9b537442770b38127163e723e7131e412ab8", "message": "update section name", "committedDate": "2020-04-24T12:42:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU2MTMyNw==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r414561327", "bodyText": "This is created an unterminated block, which is breaking the docs build. Since the definition is a single para, we don't need the + or -- (block).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `<data-stream>`::\n          \n          \n            \n            +\n          \n          \n            \n            --\n          \n          \n            \n            (Required, string) Name or wildcard expression of data stream(s) to delete.\n          \n          \n            \n            `<data-stream>`::\n          \n          \n            \n            (Required, string) Name or wildcard expression of data stream(s) to delete.", "author": "jrodewig", "createdAt": "2020-04-24T13:07:30Z", "path": "docs/reference/indices/delete-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,29 @@\n+[[indices-delete-data-stream]]\n+=== Delete data stream API\n+++++\n+<titleabbrev>Delete data stream</titleabbrev>\n+++++\n+\n+Deletes an existing data stream along with its backing indices.\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _data_stream/my-data-stream\n+--------------------------------------------------\n+// TEST[setup:twitter]\n+\n+\n+[[delete-data-stream-api-request]]\n+==== {api-request-title}\n+\n+`DELETE _data_stream/<data-stream>`\n+\n+\n+[[delete-data-stream-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n++\n+--\n+(Required, string) Name or wildcard expression of data stream(s) to delete.", "originalCommit": "261d9b537442770b38127163e723e7131e412ab8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d9d87acf9a8baa1bfa93c4897d15c6d4d84f1f62", "url": "https://github.com/elastic/elasticsearch/commit/d9d87acf9a8baa1bfa93c4897d15c6d4d84f1f62", "message": "Update docs/reference/indices/delete-data-stream.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-04-24T13:09:01Z", "type": "commit"}, {"oid": "b4b75684df60ce6759298827f280334c398d7f2d", "url": "https://github.com/elastic/elasticsearch/commit/b4b75684df60ce6759298827f280334c398d7f2d", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-04-24T13:36:47Z", "type": "commit"}, {"oid": "b80da366ae1050f97d0390a03d86c272bc336a15", "url": "https://github.com/elastic/elasticsearch/commit/b80da366ae1050f97d0390a03d86c272bc336a15", "message": "fix test directives", "committedDate": "2020-04-24T14:11:18Z", "type": "commit"}, {"oid": "07c54200a15d0221988425ec20ba10c6812b79d1", "url": "https://github.com/elastic/elasticsearch/commit/07c54200a15d0221988425ec20ba10c6812b79d1", "message": "more test directives", "committedDate": "2020-04-24T14:49:18Z", "type": "commit"}, {"oid": "eee9663fa3c1fad463f8b1a159cd7c6f040449bb", "url": "https://github.com/elastic/elasticsearch/commit/eee9663fa3c1fad463f8b1a159cd7c6f040449bb", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-04T19:11:22Z", "type": "commit"}, {"oid": "bc5bd55a26a29323d0a50a380b60ac8245305777", "url": "https://github.com/elastic/elasticsearch/commit/bc5bd55a26a29323d0a50a380b60ac8245305777", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-04T20:46:29Z", "type": "commit"}, {"oid": "1d8daa3a57b15a4f0af4cabf7eef33de4f7b1d85", "url": "https://github.com/elastic/elasticsearch/commit/1d8daa3a57b15a4f0af4cabf7eef33de4f7b1d85", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-05T17:35:14Z", "type": "commit"}, {"oid": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "url": "https://github.com/elastic/elasticsearch/commit/0d6a5f1609176f95b59ead308be18ed1df80bb60", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-05T17:42:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3Mjk2OA==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420372968", "bodyText": "I think we will violate this naming convention once we can shrink an index in a data stream (shrink in ilm creates a new index named \"shrink-<index-name>\" and since we cannot rename, we are likely stuck with that name.\nSo we should loosen the wording here a bit (always at least seems too strong).", "author": "henningandersen", "createdAt": "2020-05-05T20:04:05Z", "path": "docs/reference/indices/create-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,73 @@\n+[[indices-create-data-stream]]\n+=== Create data stream API\n+++++\n+<titleabbrev>Create data stream</titleabbrev>\n+++++\n+\n+Creates a new data stream.\n+\n+Data streams provide a convenient way to ingest, search, and manage time series data. Documents\n+containing time series data may be indexed directly into a data stream and searched through the\n+data stream. Behind the scenes, data streams contain one or more hidden backing indices and a generation\n+attribute that indicates which of the backing indices is the write index, the index into which documents\n+will be ingested.\n+\n+Backing indices are always named `<data-stream-name>-zzzzzz` where `zzzzzz` is the six-digit, zero-padded", "originalCommit": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NjEwNg==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420376106", "bodyText": "I think we should also disallow ':' as for indices?", "author": "henningandersen", "createdAt": "2020-05-05T20:10:14Z", "path": "docs/reference/indices/create-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,73 @@\n+[[indices-create-data-stream]]\n+=== Create data stream API\n+++++\n+<titleabbrev>Create data stream</titleabbrev>\n+++++\n+\n+Creates a new data stream.\n+\n+Data streams provide a convenient way to ingest, search, and manage time series data. Documents\n+containing time series data may be indexed directly into a data stream and searched through the\n+data stream. Behind the scenes, data streams contain one or more hidden backing indices and a generation\n+attribute that indicates which of the backing indices is the write index, the index into which documents\n+will be ingested.\n+\n+Backing indices are always named `<data-stream-name>-zzzzzz` where `zzzzzz` is the six-digit, zero-padded\n+generation of the data stream. For example, a data stream named `web-server-logs` with a generation of 34\n+would have a write index named `web-server-logs-000034`. While nothing prevents backing indices from\n+being addressed directly, data streams are integrated with the <<indices-rollover-index, rollover index API>>\n+and <<index-lifecycle-management, index lifecycle management (ILM)>> to facilitate the management of the\n+time series data contained in their backing indices.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _data_stream/foo\n+{\n+  \"timestamp_field\": \"@timestamp\"\n+}\n+--------------------------------------------------\n+\n+////\n+[source,console]\n+-----------------------------------\n+DELETE /_data_stream/foo\n+-----------------------------------\n+////\n+\n+[[indices-create-data-stream-request]]\n+==== {api-request-title}\n+\n+`PUT _data_stream/<data-stream>`\n+\n+[[indices-create-data-stream-desc]]\n+==== {api-description-title}\n+You can use the create data stream API to add a new data stream to an {es} cluster. When\n+creating a data stream, you must specify the following:\n+\n+* The name of the data stream\n+* The name of the timestamp field.\n+\n+[[indices-create-data-stream-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n++\n+--\n+(Required, string) Name of the data stream to create.\n+\n+Data stream names must meet the following criteria:\n+\n+- Lowercase only\n+- Cannot include `\\`, `/`, `*`, `?`, `\"`, `<`, `>`, `|`, ` ` (space character), `,`, `#`", "originalCommit": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzE4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420377187", "bodyText": "I think this should delete my-data-stream rather than foo?", "author": "henningandersen", "createdAt": "2020-05-05T20:12:13Z", "path": "docs/reference/indices/get-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,86 @@\n+[[indices-get-data-stream]]\n+=== Get data stream API\n+++++\n+<titleabbrev>Get data stream</titleabbrev>\n+++++\n+\n+Returns information about one or more data streams.\n+\n+////\n+[source,console]\n+-----------------------------------\n+PUT /_data_stream/my-data-stream\n+{\n+  \"timestamp_field\" : \"@timestamp\"\n+}\n+-----------------------------------\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+-----------------------------------\n+DELETE /_data_stream/foo", "originalCommit": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzYxMw==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420377613", "bodyText": "I think this should be singular:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `GET _data_streams/<data-stream>`\n          \n          \n            \n            `GET _data_stream/<data-stream>`", "author": "henningandersen", "createdAt": "2020-05-05T20:13:02Z", "path": "docs/reference/indices/get-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,86 @@\n+[[indices-get-data-stream]]\n+=== Get data stream API\n+++++\n+<titleabbrev>Get data stream</titleabbrev>\n+++++\n+\n+Returns information about one or more data streams.\n+\n+////\n+[source,console]\n+-----------------------------------\n+PUT /_data_stream/my-data-stream\n+{\n+  \"timestamp_field\" : \"@timestamp\"\n+}\n+-----------------------------------\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+-----------------------------------\n+DELETE /_data_stream/foo\n+-----------------------------------\n+// TEARDOWN\n+////\n+\n+[source,console]\n+--------------------------------------------------\n+GET _data_streams/my-data-stream\n+--------------------------------------------------\n+\n+[[get-data-stream-api-request]]\n+==== {api-request-title}\n+\n+`GET _data_streams/<data-stream>`", "originalCommit": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0MTM2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420841369", "bodyText": "It is _data_streams (plural) which I see is inconsistent with many of the other endpoints such as _alias, _index_template, _security/role, etc., that use the singular for retrieving information about one or more resources. @martijnvg, do you think we should change this?", "author": "danhermann", "createdAt": "2020-05-06T14:35:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzYxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0NzU1MA==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420847550", "bodyText": "Yes, I think we should change this to _data_stream in order to make this consistent with other apis.", "author": "martijnvg", "createdAt": "2020-05-06T14:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzYxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg3NTc0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420875743", "bodyText": "Fyi, we will change this endpoint to use the singular _data_stream in a series of follow-up PRs.", "author": "danhermann", "createdAt": "2020-05-06T15:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzYxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3NzkxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/55557#discussion_r420377911", "bodyText": "Also singular I think?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            GET _data_streams/my-data-stream*\n          \n          \n            \n            GET _data_stream/my-data-stream*", "author": "henningandersen", "createdAt": "2020-05-05T20:13:33Z", "path": "docs/reference/indices/get-data-stream.asciidoc", "diffHunk": "@@ -0,0 +1,86 @@\n+[[indices-get-data-stream]]\n+=== Get data stream API\n+++++\n+<titleabbrev>Get data stream</titleabbrev>\n+++++\n+\n+Returns information about one or more data streams.\n+\n+////\n+[source,console]\n+-----------------------------------\n+PUT /_data_stream/my-data-stream\n+{\n+  \"timestamp_field\" : \"@timestamp\"\n+}\n+-----------------------------------\n+// TESTSETUP\n+////\n+\n+////\n+[source,console]\n+-----------------------------------\n+DELETE /_data_stream/foo\n+-----------------------------------\n+// TEARDOWN\n+////\n+\n+[source,console]\n+--------------------------------------------------\n+GET _data_streams/my-data-stream\n+--------------------------------------------------\n+\n+[[get-data-stream-api-request]]\n+==== {api-request-title}\n+\n+`GET _data_streams/<data-stream>`\n+\n+\n+[[get-data-stream-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<data-stream>`::\n++\n+--\n+(Required, string) Name or wildcard expression of the data stream(s) to retrieve.\n+--\n+\n+[[get-data-stream-api-example]]\n+==== {api-examples-title}\n+\n+[[get-data-stream-basic-example]]\n+===== Basic example\n+\n+[source,console]\n+--------------------------------------------------\n+GET _data_streams/my-data-stream*", "originalCommit": "0d6a5f1609176f95b59ead308be18ed1df80bb60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9bef96e27ffbb076ea8fc29e968099c1555cb575", "url": "https://github.com/elastic/elasticsearch/commit/9bef96e27ffbb076ea8fc29e968099c1555cb575", "message": "review comments, wrap columns at 80", "committedDate": "2020-05-06T14:38:12Z", "type": "commit"}, {"oid": "fe8f98ccbd6d54438c72553268275aeb4185fc05", "url": "https://github.com/elastic/elasticsearch/commit/fe8f98ccbd6d54438c72553268275aeb4185fc05", "message": "Merge branch 'docs_data_stream_crud_apis' of https://github.com/danhermann/elasticsearch into docs_data_stream_crud_apis", "committedDate": "2020-05-06T14:38:26Z", "type": "commit"}, {"oid": "62384bd9119d44caf1c5d3df21fe8f403e9ad443", "url": "https://github.com/elastic/elasticsearch/commit/62384bd9119d44caf1c5d3df21fe8f403e9ad443", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-11T13:04:21Z", "type": "commit"}, {"oid": "0c72a82a315be86a063e804f4559d54b50cf468a", "url": "https://github.com/elastic/elasticsearch/commit/0c72a82a315be86a063e804f4559d54b50cf468a", "message": "Merge branch 'master' into docs_data_stream_crud_apis", "committedDate": "2020-05-12T12:48:13Z", "type": "commit"}, {"oid": "6e70f71d9fa5d655aea9c117b64d6c859550a4fd", "url": "https://github.com/elastic/elasticsearch/commit/6e70f71d9fa5d655aea9c117b64d6c859550a4fd", "message": "Merge remote-tracking branch 'es/master' into docs_data_stream_crud_apis", "committedDate": "2020-05-13T08:31:06Z", "type": "commit"}, {"oid": "c5e3d0129e61c70ee243bc22a733e86e8e4ad9cf", "url": "https://github.com/elastic/elasticsearch/commit/c5e3d0129e61c70ee243bc22a733e86e8e4ad9cf", "message": "Turned separate snippets into a single 'suite'.\nThis fixed test snippet in create-data-stream.asciidoc,\nbecause after the first snippet the tear down was invoked and\ndeleting all indices failed, because there was a data stream.", "committedDate": "2020-05-13T11:35:41Z", "type": "commit"}, {"oid": "bce5c336b2a000f8f136133e68a4ee823f44d5f4", "url": "https://github.com/elastic/elasticsearch/commit/bce5c336b2a000f8f136133e68a4ee823f44d5f4", "message": "Disable shard failures check, if response has top level array then it can't figure out if the response had shard failures.\nDisabled response assertions as we can't seem to string replace if response has top level array.", "committedDate": "2020-05-13T12:36:15Z", "type": "commit"}]}