{"pr_number": 57271, "pr_title": "Normalized prefix for rollover API", "pr_createdAt": "2020-05-28T08:51:49Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57271", "timeline": [{"oid": "2e33171d6696e4ae3e3e6082f21b7e186149a926", "url": "https://github.com/elastic/elasticsearch/commit/2e33171d6696e4ae3e3e6082f21b7e186149a926", "message": "Normalized prefix for rollover API\n\nIt fixes the issue https://github.com/elastic/elasticsearch/issues/53388\nby normalizing prefix at index creation request itself", "committedDate": "2020-05-28T08:43:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDAzMA==", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r433494030", "bodyText": "I think I'd prefer a dedicated test for this, just so that it doesn't get accidentally removed and the behavior reverted in the future, could you add a test for this? (it can basically be a copy of this test with a descriptive name)", "author": "dakrone", "createdAt": "2020-06-01T21:14:18Z", "path": "server/src/internalClusterTest/java/org/elasticsearch/action/admin/indices/rollover/RolloverIT.java", "diffHunk": "@@ -154,7 +154,7 @@ public void testRolloverWithIndexSettings() throws Exception {\n         indexDoc(\"test_index-2\", \"1\", \"field\", \"value\");\n         flush(\"test_index-2\");\n         final Settings settings = Settings.builder()\n-            .put(IndexMetadata.SETTING_NUMBER_OF_SHARDS, 1)\n+            .put(\"number_of_shards\", 1) // testing without \"index\" prefix", "originalCommit": "2e33171d6696e4ae3e3e6082f21b7e186149a926", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEzNDg2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r438134866", "bodyText": "Good suggestion, made a separate test case for it !", "author": "Gaurav614", "createdAt": "2020-06-10T13:46:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDAzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDMyMg==", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r433494322", "bodyText": "Calling this \"apply\" I think is a little misleading, I think normalizeRequestSettings would be a better name for this method", "author": "dakrone", "createdAt": "2020-06-01T21:14:54Z", "path": "server/src/main/java/org/elasticsearch/cluster/metadata/MetadataCreateIndexService.java", "diffHunk": "@@ -306,12 +303,20 @@ public void onFailure(String source, Exception e) {\n             });\n     }\n \n+    private void applyCreateIndexRequestInternal(CreateIndexClusterStateUpdateRequest createIndexClusterStateRequest){", "originalCommit": "2e33171d6696e4ae3e3e6082f21b7e186149a926", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEzNDk0MQ==", "url": "https://github.com/elastic/elasticsearch/pull/57271#discussion_r438134941", "bodyText": "Ack.", "author": "Gaurav614", "createdAt": "2020-06-10T13:47:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzQ5NDMyMg=="}], "type": "inlineReview"}, {"oid": "96f381c38aa1fc115f3fc062375002ebae9893c5", "url": "https://github.com/elastic/elasticsearch/commit/96f381c38aa1fc115f3fc062375002ebae9893c5", "message": "Merge branch 'master' into fix_rollover_bug", "committedDate": "2020-06-10T12:47:26Z", "type": "commit"}, {"oid": "3a7ecb88cffa0f856b634922f86e8789879cbc45", "url": "https://github.com/elastic/elasticsearch/commit/3a7ecb88cffa0f856b634922f86e8789879cbc45", "message": "Added new Test case and renamed methods", "committedDate": "2020-06-10T12:48:28Z", "type": "commit"}, {"oid": "1f68cb6bad2d10e865d1289ed29ff940b23a4a5b", "url": "https://github.com/elastic/elasticsearch/commit/1f68cb6bad2d10e865d1289ed29ff940b23a4a5b", "message": "Fixed checkstyle errors", "committedDate": "2020-06-12T12:02:08Z", "type": "commit"}, {"oid": "ba69fe1be77da37440a189443db408f9af1195ca", "url": "https://github.com/elastic/elasticsearch/commit/ba69fe1be77da37440a189443db408f9af1195ca", "message": "Merge branch 'master' into fix_rollover_bug", "committedDate": "2020-06-12T13:21:26Z", "type": "commit"}, {"oid": "891e0c62858cadedb3710de2202f89b0345a22ae", "url": "https://github.com/elastic/elasticsearch/commit/891e0c62858cadedb3710de2202f89b0345a22ae", "message": "Merge branch 'master' into fix_rollover_bug", "committedDate": "2020-06-12T19:18:56Z", "type": "commit"}, {"oid": "39e2c85119c4a7b9dd594eea95bce4d82f8e4da0", "url": "https://github.com/elastic/elasticsearch/commit/39e2c85119c4a7b9dd594eea95bce4d82f8e4da0", "message": "Fix checkstyle in MetadataRolloverServiceTests", "committedDate": "2020-06-15T21:03:33Z", "type": "commit"}]}