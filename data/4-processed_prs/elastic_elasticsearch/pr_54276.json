{"pr_number": 54276, "pr_title": "Rename formatter config and switch to an opt-out list", "pr_createdAt": "2020-03-26T14:47:36Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54276", "timeline": [{"oid": "b997cb35322e5f7d9d651e0f1d1bd9cefd8d4c94", "url": "https://github.com/elastic/elasticsearch/commit/b997cb35322e5f7d9d651e0f1d1bd9cefd8d4c94", "message": "Move and rename formatter config file", "committedDate": "2020-03-26T14:23:02Z", "type": "commit"}, {"oid": "202050b3ea17fc123c9930d318cc762df52cf108", "url": "https://github.com/elastic/elasticsearch/commit/202050b3ea17fc123c9930d318cc762df52cf108", "message": "Switch to an opt-out list for formatting\n\nInstead of explcitly listing projects that should be formatted, instead\nlist projects that should not be formatted. This means that any new\nprojects will automatically be formatted and checked.", "committedDate": "2020-03-26T14:44:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODYzODU3NA==", "url": "https://github.com/elastic/elasticsearch/pull/54276#discussion_r398638574", "bodyText": "I think this list will have to be regenerated on backport.", "author": "jasontedor", "createdAt": "2020-03-26T14:57:02Z", "path": "build.gradle", "diffHunk": "@@ -105,25 +105,133 @@ subprojects {\n     project.licenseFile = project.rootProject.file('licenses/APACHE-LICENSE-2.0.txt')\n     project.noticeFile = project.rootProject.file('NOTICE.txt')\n \n-    // Projects that should be formatted and checked with Spotless are\n-    // listed here, by project path. Once the number of formatted projects\n-    // is greater than the number of unformatted projects, this can be\n-    // switched to an exclude list, and eventually removed completely.\n-    def projectPathsToFormat = [\n-      ':benchmarks',\n-      ':build-tools',\n-      ':distribution:tools:java-version-checker',\n-      ':distribution:tools:keystore-cli',\n-      ':distribution:tools:launchers',\n-      ':distribution:tools:plugin-cli',\n-      ':qa:os',\n-      ':qa:wildfly',\n-      ':x-pack:plugin:autoscaling',\n-      ':x-pack:plugin:enrich',\n-      ':x-pack:plugin:logstash'\n+    // Projects that should be excluded from automatic formatting and\n+    // checking with Spotless are listed here, by project path. Once the\n+    // number of unformatted projects reaches zero, this mechanism will be\n+    // removed.\n+    //\n+    // No new projects should be added here!\n+    def projectPathsToExclude = [", "originalCommit": "202050b3ea17fc123c9930d318cc762df52cf108", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODY3MTU5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54276#discussion_r398671596", "bodyText": "Yes, I was anticipating that.", "author": "pugnascotia", "createdAt": "2020-03-26T15:37:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODYzODU3NA=="}], "type": "inlineReview"}, {"oid": "c106eb591bc2f28d9b05f905de519dea18bb1bde", "url": "https://github.com/elastic/elasticsearch/commit/c106eb591bc2f28d9b05f905de519dea18bb1bde", "message": "Merge branch 'master' into rename-format-config", "committedDate": "2020-03-26T16:58:35Z", "type": "commit"}, {"oid": "fc51d98be34b99db5c8436e0dc4b9159099c751c", "url": "https://github.com/elastic/elasticsearch/commit/fc51d98be34b99db5c8436e0dc4b9159099c751c", "message": "Extract formatting config to a script plugin", "committedDate": "2020-03-26T21:06:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyODQwNw==", "url": "https://github.com/elastic/elasticsearch/pull/54276#discussion_r398928407", "bodyText": "nit: can we move this up to where we apply all the other script plugins?", "author": "mark-vieira", "createdAt": "2020-03-26T22:23:15Z", "path": "build.gradle", "diffHunk": "@@ -63,6 +63,8 @@ if (VersionProperties.elasticsearch.toString().endsWith('-SNAPSHOT')) {\n }\n String elasticLicenseUrl = \"https://raw.githubusercontent.com/elastic/elasticsearch/${licenseCommit}/licenses/ELASTIC-LICENSE.txt\"\n \n+apply from: 'gradle/formatting.gradle'", "originalCommit": "fc51d98be34b99db5c8436e0dc4b9159099c751c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f8a0b662867ded7d387451a97eb2e616b2f15de9", "url": "https://github.com/elastic/elasticsearch/commit/f8a0b662867ded7d387451a97eb2e616b2f15de9", "message": "Merge remote-tracking branch 'upstream/master' into rename-format-config", "committedDate": "2020-03-27T10:53:22Z", "type": "commit"}, {"oid": "567ea00acf209e36f1278b81d4e98554d391b9c9", "url": "https://github.com/elastic/elasticsearch/commit/567ea00acf209e36f1278b81d4e98554d391b9c9", "message": "Group formatting script plugin with other plugins", "committedDate": "2020-03-27T10:57:49Z", "type": "commit"}]}