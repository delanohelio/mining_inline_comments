{"pr_number": 50835, "pr_title": "Deprecate synced flush", "pr_createdAt": "2020-01-10T02:54:29Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/50835", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyNzM4OA==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365427388", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Please use normal {@link #flush(FlushRequest, RequestOptions)} instead.\n          \n          \n            \n                 * Use {@link #flush(FlushRequest, RequestOptions)} instead.\n          \n      \n    \n    \n  \n\nWhile \"please\" is polite, I think brevity is more important here.\nI also think we can just say \"flush\" instead of \"normal flush.\"", "author": "jrodewig", "createdAt": "2020-01-10T20:57:55Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -423,7 +423,10 @@ public Cancellable flushAsync(FlushRequest flushRequest, RequestOptions options,\n      * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n      * @return the response\n      * @throws IOException in case there is a problem sending the request or parsing back the response\n+     * @deprecated synced flush is deprecated and will be removed in future Elasticsearch versions.\n+     * Please use normal {@link #flush(FlushRequest, RequestOptions)} instead.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyNzg2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365427863", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Please use normal {@link #flushAsync(FlushRequest, RequestOptions, ActionListener)} instead.\n          \n          \n            \n                 * Use {@link #flushAsync(FlushRequest, RequestOptions, ActionListener)} instead.", "author": "jrodewig", "createdAt": "2020-01-10T20:59:18Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -437,7 +440,10 @@ public SyncedFlushResponse flushSynced(SyncedFlushRequest syncedFlushRequest, Re\n      * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n      * @param listener the listener to be notified upon request completion\n      * @return cancellable that may be used to cancel the request\n+     * @deprecated synced flush is deprecated and will be removed in future Elasticsearch versions.\n+     * Please use normal {@link #flushAsync(FlushRequest, RequestOptions, ActionListener)} instead.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyNzk3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365427972", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * @deprecated synced flush is deprecated and will be removed in future Elasticsearch versions.\n          \n          \n            \n                 * @deprecated Synced flush is deprecated and will be removed in a future version.", "author": "jrodewig", "createdAt": "2020-01-10T20:59:36Z", "path": "client/rest-high-level/src/main/java/org/elasticsearch/client/IndicesClient.java", "diffHunk": "@@ -437,7 +440,10 @@ public SyncedFlushResponse flushSynced(SyncedFlushRequest syncedFlushRequest, Re\n      * @param options the request options (e.g. headers), use {@link RequestOptions#DEFAULT} if nothing needs to be customized\n      * @param listener the listener to be notified upon request completion\n      * @return cancellable that may be used to cancel the request\n+     * @deprecated synced flush is deprecated and will be removed in future Elasticsearch versions.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyODExOQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365428119", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n          \n          \n            \n                            \"Synced flush is deprecated and will be removed in a future version. \" +", "author": "jrodewig", "createdAt": "2020-01-10T21:00:08Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/IndicesClientDocumentationIT.java", "diffHunk": "@@ -1018,7 +1018,10 @@ public void testSyncedFlushIndex() throws Exception {\n             // end::flush-synced-request-indicesOptions\n \n             // tag::flush-synced-execute\n-            SyncedFlushResponse flushSyncedResponse = client.indices().flushSynced(request, RequestOptions.DEFAULT);\n+            SyncedFlushResponse flushSyncedResponse = client.indices().flushSynced(request, expectWarnings(\n+                \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyOTM5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365429395", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"Please use normal flush at _/flush or /{index}/_flush instead.\"\n          \n          \n            \n                            \"Use _/flush or /{index}/_flush instead.\"", "author": "jrodewig", "createdAt": "2020-01-10T21:03:46Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/IndicesClientDocumentationIT.java", "diffHunk": "@@ -1018,7 +1018,10 @@ public void testSyncedFlushIndex() throws Exception {\n             // end::flush-synced-request-indicesOptions\n \n             // tag::flush-synced-execute\n-            SyncedFlushResponse flushSyncedResponse = client.indices().flushSynced(request, RequestOptions.DEFAULT);\n+            SyncedFlushResponse flushSyncedResponse = client.indices().flushSynced(request, expectWarnings(\n+                \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n+                \"Please use normal flush at _/flush or /{index}/_flush instead.\"", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0OTgwNw==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365449807", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"Please use normal flush at _/flush or /{index}/_flush instead.\"\n          \n          \n            \n                            \"Use _/flush or /{index}/_flush instead.\"", "author": "jrodewig", "createdAt": "2020-01-10T22:08:18Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/IndicesClientDocumentationIT.java", "diffHunk": "@@ -1062,7 +1065,10 @@ public void onFailure(Exception e) {\n             listener = new LatchedActionListener<>(listener, latch);\n \n             // tag::flush-synced-execute-async\n-            client.indices().flushSyncedAsync(request, RequestOptions.DEFAULT, listener); // <1>\n+            client.indices().flushSyncedAsync(request, expectWarnings(\n+                \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n+                \"Please use normal flush at _/flush or /{index}/_flush instead.\"", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0OTg4Mg==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365449882", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n          \n          \n            \n                            \"Synced flush is deprecated and will be removed in future a version. \" +", "author": "jrodewig", "createdAt": "2020-01-10T22:08:32Z", "path": "client/rest-high-level/src/test/java/org/elasticsearch/client/documentation/IndicesClientDocumentationIT.java", "diffHunk": "@@ -1062,7 +1065,10 @@ public void onFailure(Exception e) {\n             listener = new LatchedActionListener<>(listener, latch);\n \n             // tag::flush-synced-execute-async\n-            client.indices().flushSyncedAsync(request, RequestOptions.DEFAULT, listener); // <1>\n+            client.indices().flushSyncedAsync(request, expectWarnings(\n+                \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0OTkzNg==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365449936", "bodyText": "This needs to start as deprecated::[ (note the two ::). I also would move it to the very top of the page, right after the heading.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            deprecated:[7.6, synced-flush is deprecated and will be removed in future\n          \n          \n            \n            deprecated::[7.6, Synced flush is deprecated and will be removed in a future", "author": "jrodewig", "createdAt": "2020-01-10T22:08:44Z", "path": "docs/reference/indices/synced-flush.asciidoc", "diffHunk": "@@ -12,6 +12,10 @@ POST /twitter/_flush/synced\n --------------------------------------------------\n // TEST[skip: Synced flush can conflict with scheduled flushes in doc tests]\n \n+deprecated:[7.6, synced-flush is deprecated and will be removed in future", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ0OTk2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365449963", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Elasticsearch versions. Please use normal <<indices-flush,flush>> instead.\n          \n          \n            \n            version. Use <<indices-flush,flush>> instead.", "author": "jrodewig", "createdAt": "2020-01-10T22:08:48Z", "path": "docs/reference/indices/synced-flush.asciidoc", "diffHunk": "@@ -12,6 +12,10 @@ POST /twitter/_flush/synced\n --------------------------------------------------\n // TEST[skip: Synced flush can conflict with scheduled flushes in doc tests]\n \n+deprecated:[7.6, synced-flush is deprecated and will be removed in future\n+Elasticsearch versions. Please use normal <<indices-flush,flush>> instead.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDAxNA==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450014", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A normal <<indices-flush,flush>> has the same effect as a synced flush on\n          \n          \n            \n            Flush has the same effect as synced flush in", "author": "jrodewig", "createdAt": "2020-01-10T22:08:57Z", "path": "docs/reference/indices/synced-flush.asciidoc", "diffHunk": "@@ -12,6 +12,10 @@ POST /twitter/_flush/synced\n --------------------------------------------------\n // TEST[skip: Synced flush can conflict with scheduled flushes in doc tests]\n \n+deprecated:[7.6, synced-flush is deprecated and will be removed in future\n+Elasticsearch versions. Please use normal <<indices-flush,flush>> instead.\n+A normal <<indices-flush,flush>> has the same effect as a synced flush on", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDAzMg==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450032", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Elasticsearch 7.6 or later]\n          \n          \n            \n            {es} 7.6 and later versions.]", "author": "jrodewig", "createdAt": "2020-01-10T22:09:00Z", "path": "docs/reference/indices/synced-flush.asciidoc", "diffHunk": "@@ -12,6 +12,10 @@ POST /twitter/_flush/synced\n --------------------------------------------------\n // TEST[skip: Synced flush can conflict with scheduled flushes in doc tests]\n \n+deprecated:[7.6, synced-flush is deprecated and will be removed in future\n+Elasticsearch versions. Please use normal <<indices-flush,flush>> instead.\n+A normal <<indices-flush,flush>> has the same effect as a synced flush on\n+Elasticsearch 7.6 or later]", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDA1NA==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450054", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Note that synced flush is deprecated and will be removed in future versions.\n          \n          \n            \n            NOTE: Synced flush is deprecated and will be removed in a future version.", "author": "jrodewig", "createdAt": "2020-01-10T22:09:05Z", "path": "docs/reference/upgrade/synced-flush.asciidoc", "diffHunk": "@@ -3,8 +3,13 @@\n --------------------------------------------------\n POST _flush/synced\n --------------------------------------------------\n+// TEST[skip: will fail as synced flush is deprecated]\n \n When you perform a synced flush, check the response to make sure there are\n no failures. Synced flush operations that fail due to pending indexing\n operations are listed in the response body, although the request itself\n still returns a 200 OK status. If there are failures, reissue the request.\n+\n+Note that synced flush is deprecated and will be removed in future versions.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDA3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450071", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A normal flush has the same effect as a synced flush on Elasticsearch 7.6\n          \n          \n            \n            Flush has the same effect as synced flush in {es} 7.6", "author": "jrodewig", "createdAt": "2020-01-10T22:09:08Z", "path": "docs/reference/upgrade/synced-flush.asciidoc", "diffHunk": "@@ -3,8 +3,13 @@\n --------------------------------------------------\n POST _flush/synced\n --------------------------------------------------\n+// TEST[skip: will fail as synced flush is deprecated]\n \n When you perform a synced flush, check the response to make sure there are\n no failures. Synced flush operations that fail due to pending indexing\n operations are listed in the response body, although the request itself\n still returns a 200 OK status. If there are failures, reissue the request.\n+\n+Note that synced flush is deprecated and will be removed in future versions.\n+A normal flush has the same effect as a synced flush on Elasticsearch 7.6", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDA4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450085", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            or later.\n          \n          \n            \n            and later versions.", "author": "jrodewig", "createdAt": "2020-01-10T22:09:11Z", "path": "docs/reference/upgrade/synced-flush.asciidoc", "diffHunk": "@@ -3,8 +3,13 @@\n --------------------------------------------------\n POST _flush/synced\n --------------------------------------------------\n+// TEST[skip: will fail as synced flush is deprecated]\n \n When you perform a synced flush, check the response to make sure there are\n no failures. Synced flush operations that fail due to pending indexing\n operations are listed in the response body, although the request itself\n still returns a 200 OK status. If there are failures, reissue the request.\n+\n+Note that synced flush is deprecated and will be removed in future versions.\n+A normal flush has the same effect as a synced flush on Elasticsearch 7.6\n+or later.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDEwMQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450101", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  \"description\":\"Performs a synced flush operation on one or more indices. Synced flush is deprecated and will be removed in future Elasticsearch versions. Use normal flush instead\"\n          \n          \n            \n                  \"description\":\"Performs a synced flush operation on one or more indices. Synced flush is deprecated and will be removed in a future version. Use flush instead.\"", "author": "jrodewig", "createdAt": "2020-01-10T22:09:15Z", "path": "rest-api-spec/src/main/resources/rest-api-spec/api/indices.flush_synced.json", "diffHunk": "@@ -2,7 +2,7 @@\n   \"indices.flush_synced\":{\n     \"documentation\":{\n       \"url\":\"https://www.elastic.co/guide/en/elasticsearch/reference/master/indices-synced-flush-api.html\",\n-      \"description\":\"Performs a synced flush operation on one or more indices.\"\n+      \"description\":\"Performs a synced flush operation on one or more indices. Synced flush is deprecated and will be removed in future Elasticsearch versions. Use normal flush instead\"", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDExMQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450111", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      Please use normal flush at _/flush or /{index}/_flush instead.\n          \n          \n            \n                      Use  _/flush or /{index}/_flush instead.", "author": "jrodewig", "createdAt": "2020-01-10T22:09:17Z", "path": "rest-api-spec/src/main/resources/rest-api-spec/test/indices.flush/10_basic.yml", "diffHunk": "@@ -1,26 +1,33 @@\n ---\n \"Index synced flush rest test\":\n-    - do:\n-       indices.create:\n-          index: testing\n-          body:\n-            settings:\n-              index:\n-                number_of_replicas: 0\n+  - skip:\n+      version: \" - 7.9.99\"\n+      reason: \"synced flush is deprecated in 8.0\"\n+      features: \"warnings\"\n+  - do:\n+      indices.create:\n+        index: testing\n+        body:\n+          settings:\n+            index:\n+              number_of_replicas: 0\n \n-    - do:\n-       cluster.health:\n-          wait_for_status: green\n-    - do:\n-       indices.flush_synced:\n-          index: testing\n+  - do:\n+      cluster.health:\n+        wait_for_status: green\n+  - do:\n+      warnings:\n+        - Synced flush is deprecated and will be removed in future Elasticsearch versions.\n+          Please use normal flush at _/flush or /{index}/_flush instead.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDI0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450246", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    - Synced flush is deprecated and will be removed in future Elasticsearch versions.\n          \n          \n            \n                    - Synced flush is deprecated and will be removed in a future version.", "author": "jrodewig", "createdAt": "2020-01-10T22:09:41Z", "path": "rest-api-spec/src/main/resources/rest-api-spec/test/indices.flush/10_basic.yml", "diffHunk": "@@ -1,26 +1,33 @@\n ---\n \"Index synced flush rest test\":\n-    - do:\n-       indices.create:\n-          index: testing\n-          body:\n-            settings:\n-              index:\n-                number_of_replicas: 0\n+  - skip:\n+      version: \" - 7.9.99\"\n+      reason: \"synced flush is deprecated in 8.0\"\n+      features: \"warnings\"\n+  - do:\n+      indices.create:\n+        index: testing\n+        body:\n+          settings:\n+            index:\n+              number_of_replicas: 0\n \n-    - do:\n-       cluster.health:\n-          wait_for_status: green\n-    - do:\n-       indices.flush_synced:\n-          index: testing\n+  - do:\n+      cluster.health:\n+        wait_for_status: green\n+  - do:\n+      warnings:\n+        - Synced flush is deprecated and will be removed in future Elasticsearch versions.", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDI4OA==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450288", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n          \n          \n            \n                    \"Synced flush is deprecated and will be removed in a future version. \" +", "author": "jrodewig", "createdAt": "2020-01-10T22:09:52Z", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportSyncedFlushAction.java", "diffHunk": "@@ -32,7 +34,14 @@\n  */\n public class TransportSyncedFlushAction extends HandledTransportAction<SyncedFlushRequest, SyncedFlushResponse> {\n \n-    SyncedFlushService syncedFlushService;\n+    private final SyncedFlushService syncedFlushService;\n+\n+    private static final DeprecationLogger DEPRECATION_LOGGER =\n+        new DeprecationLogger(LogManager.getLogger(TransportSyncedFlushAction.class));\n+\n+    public static final String SYNCED_FLUSH_DEPRECATION_MESSAGE =\n+        \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQ1MDMwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/50835#discussion_r365450305", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        \"Please use normal flush at _/flush or /{index}/_flush instead.\";\n          \n          \n            \n                        \"Please use _/flush or /{index}/_flush instead.\";", "author": "jrodewig", "createdAt": "2020-01-10T22:09:56Z", "path": "server/src/main/java/org/elasticsearch/action/admin/indices/flush/TransportSyncedFlushAction.java", "diffHunk": "@@ -32,7 +34,14 @@\n  */\n public class TransportSyncedFlushAction extends HandledTransportAction<SyncedFlushRequest, SyncedFlushResponse> {\n \n-    SyncedFlushService syncedFlushService;\n+    private final SyncedFlushService syncedFlushService;\n+\n+    private static final DeprecationLogger DEPRECATION_LOGGER =\n+        new DeprecationLogger(LogManager.getLogger(TransportSyncedFlushAction.class));\n+\n+    public static final String SYNCED_FLUSH_DEPRECATION_MESSAGE =\n+        \"Synced flush is deprecated and will be removed in future Elasticsearch versions. \" +\n+            \"Please use normal flush at _/flush or /{index}/_flush instead.\";", "originalCommit": "c5d37882ba22064a928d553d454db11fe6174b04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f6f453fb17d7b2ab9d144194c340ed78efd99bf6", "url": "https://github.com/elastic/elasticsearch/commit/f6f453fb17d7b2ab9d144194c340ed78efd99bf6", "message": "Deprecate synced flush", "committedDate": "2020-01-13T14:52:48Z", "type": "commit"}, {"oid": "f6f453fb17d7b2ab9d144194c340ed78efd99bf6", "url": "https://github.com/elastic/elasticsearch/commit/f6f453fb17d7b2ab9d144194c340ed78efd99bf6", "message": "Deprecate synced flush", "committedDate": "2020-01-13T14:52:48Z", "type": "forcePushed"}, {"oid": "e9e209deb1bf7ee047eadfc23febc91df1a9b6ee", "url": "https://github.com/elastic/elasticsearch/commit/e9e209deb1bf7ee047eadfc23febc91df1a9b6ee", "message": "Remove in 8.0", "committedDate": "2020-01-13T15:09:37Z", "type": "commit"}]}