{"pr_number": 59098, "pr_title": "[DOCS] Adding get snapshot API docs", "pr_createdAt": "2020-07-06T19:32:10Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59098", "timeline": [{"oid": "c7e8d72a485e2e1c5634d9b1ed1308654e8a4e7a", "url": "https://github.com/elastic/elasticsearch/commit/c7e8d72a485e2e1c5634d9b1ed1308654e8a4e7a", "message": "Adding page for get snapshot API.", "committedDate": "2020-07-02T17:14:34Z", "type": "commit"}, {"oid": "816bc45edc64779670eb5581fe2d326b51fb9911", "url": "https://github.com/elastic/elasticsearch/commit/816bc45edc64779670eb5581fe2d326b51fb9911", "message": "Adding values for state and cleaning up some other formatting.", "committedDate": "2020-07-06T19:27:34Z", "type": "commit"}, {"oid": "39c279601abdcb0615f889960781f2110c9e3913", "url": "https://github.com/elastic/elasticsearch/commit/39c279601abdcb0615f889960781f2110c9e3913", "message": "Adding missing forward slash to GET request.", "committedDate": "2020-07-06T21:46:23Z", "type": "commit"}, {"oid": "309e51a07b5b1229ccdc57ba72277e625447498c", "url": "https://github.com/elastic/elasticsearch/commit/309e51a07b5b1229ccdc57ba72277e625447498c", "message": "Updating values for start_time and end_time in TESTRESPONSE.", "committedDate": "2020-07-06T22:35:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg0NzY1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450847655", "bodyText": "Per Deb, we try to use \"retrieve\" in place of \"return\" as it's a bit more user-centric. I also don't think the repos clause is needed here, but feel free to ignore if wanted.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Returns information about one or more snapshots from one or more registered repositories.\n          \n          \n            \n            Retrieves information about one or more snapshots.", "author": "jrodewig", "createdAt": "2020-07-07T13:04:43Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1MzQ3NA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450853474", "bodyText": "After including... this would probably work better as a bulleted list?\nEither way, please wrap lines at 80 characters.", "author": "jrodewig", "createdAt": "2020-07-07T13:13:32Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk2NTYyMA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450965620", "bodyText": "\ud83d\udc4d to that change, and will implement it.", "author": "lockewritesdocs", "createdAt": "2020-07-07T15:47:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1MzQ3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1MzgxOQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450853819", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n          \n          \n            \n            Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).", "author": "jrodewig", "createdAt": "2020-07-07T13:14:09Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1NDMzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450854331", "bodyText": "To get information about any snapshots that are currently running, omit this parameter and use _current.\n\n\nIs this saying that you can omit this parameter or use _current... or just use _current?", "author": "jrodewig", "createdAt": "2020-07-07T13:14:53Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, omit this parameter and use `_current`.", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDk0NzkzNw==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450947937", "bodyText": "Just use _current. I wanted to indicate that you should use _current in place of the snapshot name, but perhaps that inclusion is more confusing than helpful.", "author": "lockewritesdocs", "createdAt": "2020-07-07T15:21:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg1NDMzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2MTQxMg==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450861412", "bodyText": "This doesn't look like the right response format for this API.\nAdditionally some of the values aren't correct. For example, there should be no metadata as you didn't add any in the test setup.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {\n          \n          \n            \n              \"snapshot\": {\n          \n          \n            \n                \"snapshot\": \"snapshot_2\",\n          \n          \n            \n                \"uuid\": \"vdRctLCxSketdKb54xw67g\",\n          \n          \n            \n                \"version_id\": <version_id>,\n          \n          \n            \n                \"version\": <version>,\n          \n          \n            \n                \"indices\": [],\n          \n          \n            \n                \"data_streams\": [],\n          \n          \n            \n                \"include_global_state\": false,\n          \n          \n            \n                \"metadata\": {\n          \n          \n            \n                  \"taken_by\": \"user123\",\n          \n          \n            \n                  \"taken_because\": \"backup before upgrading\"\n          \n          \n            \n                },\n          \n          \n            \n                \"state\": \"SUCCESS\",\n          \n          \n            \n                \"start_time\": \"2020-06-25T14:00:28.850Z\",\n          \n          \n            \n                \"start_time_in_millis\": 1593093628850,\n          \n          \n            \n                \"end_time\": \"2020-06-25T14:00:28.850Z\",\n          \n          \n            \n                \"end_time_in_millis\": 1593094752018,\n          \n          \n            \n                \"duration_in_millis\": 0,\n          \n          \n            \n                \"failures\": [],\n          \n          \n            \n                \"shards\": {\n          \n          \n            \n                  \"total\": 0,\n          \n          \n            \n                  \"failed\": 0,\n          \n          \n            \n                  \"successful\": 0\n          \n          \n            \n                }\n          \n          \n            \n              }\n          \n          \n            \n            }\n          \n          \n            \n            {\n          \n          \n            \n              \"responses\": [\n          \n          \n            \n                {\n          \n          \n            \n                  \"repository\": \"my_repository\",\n          \n          \n            \n                  \"snapshots\": [\n          \n          \n            \n                    {\n          \n          \n            \n                      \"snapshot\": \"snapshot_2\",\n          \n          \n            \n                      \"uuid\": \"vdRctLCxSketdKb54xw67g\",\n          \n          \n            \n                      \"version_id\": <version_id>,\n          \n          \n            \n                      \"version\": <version>,\n          \n          \n            \n                      \"indices\": [],\n          \n          \n            \n                      \"data_streams\": [],\n          \n          \n            \n                      \"include_global_state\": true,\n          \n          \n            \n                      \"state\": \"SUCCESS\",\n          \n          \n            \n                      \"start_time\": \"2020-07-06T21:55:18.129Z\",\n          \n          \n            \n                      \"start_time_in_millis\": 1593093628850,\n          \n          \n            \n                      \"end_time\": \"2020-07-06T21:55:18.129Z\",\n          \n          \n            \n                      \"end_time_in_millis\": 1593094752018,\n          \n          \n            \n                      \"duration_in_millis\": 0,\n          \n          \n            \n                      \"failures\": [],\n          \n          \n            \n                      \"shards\": {\n          \n          \n            \n                        \"total\": 0,\n          \n          \n            \n                        \"failed\": 0,\n          \n          \n            \n                        \"successful\": 0\n          \n          \n            \n                      }\n          \n          \n            \n                    }\n          \n          \n            \n                  ]\n          \n          \n            \n                }\n          \n          \n            \n              ]\n          \n          \n            \n            }", "author": "jrodewig", "createdAt": "2020-07-07T13:25:20Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, omit this parameter and use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable. Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[[get-snapshot-api-example]]\n+==== {api-examples-title}\n+\n+The following request returns information for `snapshot_2` in the `my_repository` repository.\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/snapshot_2\n+----\n+\n+The API returns the following response:\n+\n+[source,console-result]\n+----\n+{\n+  \"snapshot\": {\n+    \"snapshot\": \"snapshot_2\",\n+    \"uuid\": \"vdRctLCxSketdKb54xw67g\",\n+    \"version_id\": <version_id>,\n+    \"version\": <version>,\n+    \"indices\": [],\n+    \"data_streams\": [],\n+    \"include_global_state\": false,\n+    \"metadata\": {\n+      \"taken_by\": \"user123\",\n+      \"taken_because\": \"backup before upgrading\"\n+    },\n+    \"state\": \"SUCCESS\",\n+    \"start_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"start_time_in_millis\": 1593093628850,\n+    \"end_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"end_time_in_millis\": 1593094752018,\n+    \"duration_in_millis\": 0,\n+    \"failures\": [],\n+    \"shards\": {\n+      \"total\": 0,\n+      \"failed\": 0,\n+      \"successful\": 0\n+    }\n+  }\n+}", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE2NTI4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451165285", "bodyText": "You are correct! I verified that the repository is included in 8.0, but not previous versions. Great catch \ud83c\udfc5", "author": "lockewritesdocs", "createdAt": "2020-07-07T21:52:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2MTQxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2MjQ1MA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450862450", "bodyText": "These need to be updated for the correct response format.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // TESTRESPONSE[s/\"uuid\": \"vdRctLCxSketdKb54xw67g\"/\"uuid\": $body.snapshot.uuid/]\n          \n          \n            \n            // TESTRESPONSE[s/\"version_id\": <version_id>/\"version_id\": $body.snapshot.version_id/]\n          \n          \n            \n            // TESTRESPONSE[s/\"version\": <version>/\"version\": $body.snapshot.version/]\n          \n          \n            \n            // TESTRESPONSE[s/\"start_time\": \"2020-07-06T21:55:18.129Z\"/\"start_time\": $body.snapshot.start_time/]\n          \n          \n            \n            // TESTRESPONSE[s/\"start_time_in_millis\": 1593093628850/\"start_time_in_millis\": $body.snapshot.start_time_in_millis/]\n          \n          \n            \n            // TESTRESPONSE[s/\"end_time\": \"2020-07-06T21:55:18.129Z\"/\"end_time\": $body.snapshot.end_time/]\n          \n          \n            \n            // TESTRESPONSE[s/\"end_time_in_millis\": 1593094752018/\"end_time_in_millis\": $body.snapshot.end_time_in_millis/]\n          \n          \n            \n            // TESTRESPONSE[s/\"duration_in_millis\": 0/\"duration_in_millis\": $body.snapshot.duration_in_millis/]\n          \n          \n            \n            // TESTRESPONSE[s/\"uuid\": \"vdRctLCxSketdKb54xw67g\"/\"uuid\": $body.responses.0.snapshots.0.uuid/]\n          \n          \n            \n            // TESTRESPONSE[s/\"version_id\": <version_id>/\"version_id\": $body.responses.0.snapshots.0.version_id/]\n          \n          \n            \n            // TESTRESPONSE[s/\"version\": <version>/\"version\": $body.responses.0.snapshots.0.version/]\n          \n          \n            \n            // TESTRESPONSE[s/\"start_time\": \"2020-07-06T21:55:18.129Z\"/\"start_time\": $body.responses.0.snapshots.0.start_time/]\n          \n          \n            \n            // TESTRESPONSE[s/\"start_time_in_millis\": 1593093628850/\"start_time_in_millis\": $body.responses.0.snapshots.0.start_time_in_millis/]\n          \n          \n            \n            // TESTRESPONSE[s/\"end_time\": \"2020-07-06T21:55:18.129Z\"/\"end_time\": $body.responses.0.snapshots.0.end_time/]\n          \n          \n            \n            // TESTRESPONSE[s/\"end_time_in_millis\": 1593094752018/\"end_time_in_millis\": $body.responses.0.snapshots.0.end_time_in_millis/]\n          \n          \n            \n            // TESTRESPONSE[s/\"duration_in_millis\": 0/\"duration_in_millis\": $body.responses.0.snapshots.0.duration_in_millis/]", "author": "jrodewig", "createdAt": "2020-07-07T13:26:50Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, omit this parameter and use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable. Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[[get-snapshot-api-example]]\n+==== {api-examples-title}\n+\n+The following request returns information for `snapshot_2` in the `my_repository` repository.\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/snapshot_2\n+----\n+\n+The API returns the following response:\n+\n+[source,console-result]\n+----\n+{\n+  \"snapshot\": {\n+    \"snapshot\": \"snapshot_2\",\n+    \"uuid\": \"vdRctLCxSketdKb54xw67g\",\n+    \"version_id\": <version_id>,\n+    \"version\": <version>,\n+    \"indices\": [],\n+    \"data_streams\": [],\n+    \"include_global_state\": false,\n+    \"metadata\": {\n+      \"taken_by\": \"user123\",\n+      \"taken_because\": \"backup before upgrading\"\n+    },\n+    \"state\": \"SUCCESS\",\n+    \"start_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"start_time_in_millis\": 1593093628850,\n+    \"end_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"end_time_in_millis\": 1593094752018,\n+    \"duration_in_millis\": 0,\n+    \"failures\": [],\n+    \"shards\": {\n+      \"total\": 0,\n+      \"failed\": 0,\n+      \"successful\": 0\n+    }\n+  }\n+}\n+----\n+// TESTRESPONSE[s/\"uuid\": \"vdRctLCxSketdKb54xw67g\"/\"uuid\": $body.snapshot.uuid/]\n+// TESTRESPONSE[s/\"version_id\": <version_id>/\"version_id\": $body.snapshot.version_id/]\n+// TESTRESPONSE[s/\"version\": <version>/\"version\": $body.snapshot.version/]\n+// TESTRESPONSE[s/\"start_time\": \"2020-07-06T21:55:18.129Z\"/\"start_time\": $body.snapshot.start_time/]\n+// TESTRESPONSE[s/\"start_time_in_millis\": 1593093628850/\"start_time_in_millis\": $body.snapshot.start_time_in_millis/]\n+// TESTRESPONSE[s/\"end_time\": \"2020-07-06T21:55:18.129Z\"/\"end_time\": $body.snapshot.end_time/]\n+// TESTRESPONSE[s/\"end_time_in_millis\": 1593094752018/\"end_time_in_millis\": $body.snapshot.end_time_in_millis/]\n+// TESTRESPONSE[s/\"duration_in_millis\": 0/\"duration_in_millis\": $body.snapshot.duration_in_millis/]", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDkwMTg0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450901846", "bodyText": "Ah, that's why the tests kept failing! Thank you for locating that issue.", "author": "lockewritesdocs", "createdAt": "2020-07-07T14:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2MjQ1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2NjA3Nw==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450866077", "bodyText": "The Elastic API reference template includes a section for response body param docs:\nhttps://github.com/elastic/docs/blame/master/shared/api-ref-ex.asciidoc#L123\nI think these values would be more appropriate there. As-is, there isn't a definition for state on this page.\nWe also try to avoid use of the [horizonal] attribute.", "author": "jrodewig", "createdAt": "2020-07-07T13:31:44Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, omit this parameter and use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable. Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[[get-snapshot-api-example]]\n+==== {api-examples-title}\n+\n+The following request returns information for `snapshot_2` in the `my_repository` repository.\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/snapshot_2\n+----\n+\n+The API returns the following response:\n+\n+[source,console-result]\n+----\n+{\n+  \"snapshot\": {\n+    \"snapshot\": \"snapshot_2\",\n+    \"uuid\": \"vdRctLCxSketdKb54xw67g\",\n+    \"version_id\": <version_id>,\n+    \"version\": <version>,\n+    \"indices\": [],\n+    \"data_streams\": [],\n+    \"include_global_state\": false,\n+    \"metadata\": {\n+      \"taken_by\": \"user123\",\n+      \"taken_because\": \"backup before upgrading\"\n+    },\n+    \"state\": \"SUCCESS\",\n+    \"start_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"start_time_in_millis\": 1593093628850,\n+    \"end_time\": \"2020-06-25T14:00:28.850Z\",\n+    \"end_time_in_millis\": 1593094752018,\n+    \"duration_in_millis\": 0,\n+    \"failures\": [],\n+    \"shards\": {\n+      \"total\": 0,\n+      \"failed\": 0,\n+      \"successful\": 0\n+    }\n+  }\n+}\n+----\n+// TESTRESPONSE[s/\"uuid\": \"vdRctLCxSketdKb54xw67g\"/\"uuid\": $body.snapshot.uuid/]\n+// TESTRESPONSE[s/\"version_id\": <version_id>/\"version_id\": $body.snapshot.version_id/]\n+// TESTRESPONSE[s/\"version\": <version>/\"version\": $body.snapshot.version/]\n+// TESTRESPONSE[s/\"start_time\": \"2020-07-06T21:55:18.129Z\"/\"start_time\": $body.snapshot.start_time/]\n+// TESTRESPONSE[s/\"start_time_in_millis\": 1593093628850/\"start_time_in_millis\": $body.snapshot.start_time_in_millis/]\n+// TESTRESPONSE[s/\"end_time\": \"2020-07-06T21:55:18.129Z\"/\"end_time\": $body.snapshot.end_time/]\n+// TESTRESPONSE[s/\"end_time_in_millis\": 1593094752018/\"end_time_in_millis\": $body.snapshot.end_time_in_millis/]\n+// TESTRESPONSE[s/\"duration_in_millis\": 0/\"duration_in_millis\": $body.snapshot.duration_in_millis/]\n+\n+The snapshot `state` can be one of the following values:\n+\n+[horizontal]\n+`IN_PROGRESS`::\n+  The snapshot is currently running.\n+\n+`SUCCESS`::\n+  The snapshot finished and all shards were stored successfully.\n+\n+`FAILED`::\n+  The snapshot finished with an error and failed to store any data.\n+\n+`PARTIAL`::\n+  The global cluster state was stored, but data of at least one shard was not stored successfully.\n+  The `failures` section of the response contains more detailed information about shards\n+  that were not processed correctly.\n+\n+`INCOMPATIBLE`::\n+  The snapshot was created with an old version of {es} and is incompatible with\n+  the current version of the cluster.", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAwNzYwMg==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451007602", "bodyText": "I moved these parameters into the {api-response-body-title} section and nested them accordingly. Also, removed [horizontal].", "author": "lockewritesdocs", "createdAt": "2020-07-07T16:53:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg2NjA3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDg3NzA0MA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r450877040", "bodyText": "Please wrap to 80-120 characters.", "author": "jrodewig", "createdAt": "2020-07-07T13:47:23Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,149 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Returns information about one or more snapshots from one or more registered repositories.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including start and end time, version of {es} that created the snapshot, the list of included indices, the current state of the snapshot, and the list of failures that occurred during the snapshot.\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to return. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, omit this parameter and use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable. Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.", "originalCommit": "309e51a07b5b1229ccdc57ba72277e625447498c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c1c80bd146a82b9099f8c16f38e978d5d76e85b1", "url": "https://github.com/elastic/elasticsearch/commit/c1c80bd146a82b9099f8c16f38e978d5d76e85b1", "message": "Swap \"return\" for \"retrieve\"\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-07T14:19:01Z", "type": "commit"}, {"oid": "fb1b3bee513ed00ea751151a69f0992dd21e2927", "url": "https://github.com/elastic/elasticsearch/commit/fb1b3bee513ed00ea751151a69f0992dd21e2927", "message": "Swap \"return\" for \"retrieve\" 2\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-07T14:19:39Z", "type": "commit"}, {"oid": "42cf77c86d95c1c0baf21255ec5c970e06c1a98d", "url": "https://github.com/elastic/elasticsearch/commit/42cf77c86d95c1c0baf21255ec5c970e06c1a98d", "message": "Change .snapshot to .response\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-07T14:20:52Z", "type": "commit"}, {"oid": "e7ac1c0892bc0aaa8ce59504d65daa5e52e9d00b", "url": "https://github.com/elastic/elasticsearch/commit/e7ac1c0892bc0aaa8ce59504d65daa5e52e9d00b", "message": "Adding response parameters and incorporating edits from review.", "committedDate": "2020-07-07T22:00:48Z", "type": "commit"}, {"oid": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "url": "https://github.com/elastic/elasticsearch/commit/aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "message": "Update response example to include repository info\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-07T22:01:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3MDkyMA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451170920", "bodyText": "@original-brownbear, can you please review the response body parameters that I added in lines 87-157?", "author": "lockewritesdocs", "createdAt": "2020-07-07T22:06:13Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -76,6 +83,78 @@ If `true`, returns all available information about a snapshot. Defaults to `true\n +\n If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n \n+[role=\"child-attributes\"]", "originalCommit": "e7ac1c0892bc0aaa8ce59504d65daa5e52e9d00b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NDM4MQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451194381", "bodyText": "This role tag is slightly off.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [role=\"child-attributes\"]\n          \n          \n            \n            [role=\"child_attributes\"]", "author": "jrodewig", "createdAt": "2020-07-07T23:13:19Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[role=\"child-attributes\"]", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NDM4OA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451194388", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            [role=\"child-attributes\"]\n          \n          \n            \n            [role=\"child_attributes\"]", "author": "jrodewig", "createdAt": "2020-07-07T23:13:21Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NDY0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451194646", "bodyText": "We typically include the data type in the definition.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `snapshot`::\n          \n          \n            \n            `snapshot`::\n          \n          \n            \n            (string)", "author": "jrodewig", "createdAt": "2020-07-07T23:14:08Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-response-body]]\n+==== {api-response-body-title}\n+\n+`snapshot`::", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NDczMQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451194731", "bodyText": "You're missing the data_streams and include_global_state defs.", "author": "jrodewig", "createdAt": "2020-07-07T23:14:26Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-response-body]]\n+==== {api-response-body-title}\n+\n+`snapshot`::\n+Name of the snapshot.\n+\n+`uuid`::\n+Universally unique identifier (UUID) of the snapshot.\n+\n+`version_id`::\n+Build ID of the {es} version used to create the snapshot.\n+\n+`version`::\n+{es} version used to create the snapshot.\n+\n+`indices`::\n+Indices that are included in the snapshot.\n+", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTU1ODA0OA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451558048", "bodyText": "I'll add both definitions.", "author": "lockewritesdocs", "createdAt": "2020-07-08T13:48:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NDczMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NTIxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451195215", "bodyText": "You should be able to do a nested definition for this.\nYou can check out the search API's shard response param for an example:\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/search-search.html#search-api-response-body", "author": "jrodewig", "createdAt": "2020-07-07T23:15:54Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-response-body]]\n+==== {api-response-body-title}\n+\n+`snapshot`::\n+Name of the snapshot.\n+\n+`uuid`::\n+Universally unique identifier (UUID) of the snapshot.\n+\n+`version_id`::\n+Build ID of the {es} version used to create the snapshot.\n+\n+`version`::\n+{es} version used to create the snapshot.\n+\n+`indices`::\n+Indices that are included in the snapshot.\n+\n+`start_time`::\n+Date timestamp of when the snapshot creation process started.\n+\n+`start_time_in_millis`::\n+The start time, in milliseconds, when the snapshot creation process started.\n+\n+`end_time`::\n+Date timestamp of when the snapshot creation process ended.\n+\n+`end_time_in_millis`::\n+The end time, in milliseconds, when the snapshot creation process ended.\n+\n+`duration_in_millis`::\n+How long, in milliseconds, it took to create the snapshot.\n+\n+`failures`::\n+Lists any failures that occurred when creating the snapshot.\n+\n+`shards`::\n+Indicates the following shards information:\n+* Total shards included in the snapshot\n+* Failed shards that were not included in the snapshot\n+* Successful shards that were included in the snapshot", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUzMjM2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451532369", "bodyText": "Thanks! I'll apply this formatting.", "author": "lockewritesdocs", "createdAt": "2020-07-08T13:11:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE5NTIxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM1NjA2MA==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451356060", "bodyText": "I think we can leave this one out. I don't think this is ever returned in master or 7.x at this point. Also, it's a little confusing to state:\n\nThe snapshot was created with an old version of {es} and is incompatible with the current version of the cluster.\n\nThis is true yes. But historically we would only show this for ES 1.x snapshots and not in general anyway => let's just drop the documentation for this and I'll look into removing the last bits of code referencing INCOMPATIBLE shortly.", "author": "original-brownbear", "createdAt": "2020-07-08T08:00:25Z", "path": "docs/reference/snapshot-restore/apis/get-snapshot-api.asciidoc", "diffHunk": "@@ -0,0 +1,210 @@\n+[[get-snapshot-api]]\n+=== Get snapshot API\n+++++\n+<titleabbrev>Get snapshot</titleabbrev>\n+++++\n+\n+Retrieves information about one or more snapshots.\n+\n+////\n+[source,console]\n+----\n+PUT /_snapshot/my_repository\n+{\n+  \"type\": \"fs\",\n+  \"settings\": {\n+    \"location\": \"my_backup_location\"\n+  }\n+}\n+\n+PUT /_snapshot/my_repository/my_snapshot?wait_for_completion=true\n+\n+PUT /_snapshot/my_repository/snapshot_2?wait_for_completion=true\n+----\n+// TESTSETUP\n+////\n+\n+[source,console]\n+----\n+GET /_snapshot/my_repository/my_snapshot\n+----\n+\n+[[get-snapshot-api-request]]\n+==== {api-request-title}\n+\n+`GET /_snapshot/<repository>/<snapshot>`\n+\n+[[get-snapshot-api-desc]]\n+==== {api-description-title}\n+\n+Use the get snapshot API to return information about one or more snapshots, including:\n+\n+* Value start and end time\n+* Version of {es} that created the snapshot\n+* List of included indices\n+* Current state of the snapshot\n+* List of failures that occurred during the snapshot\n+\n+[[get-snapshot-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<repository>`::\n+(Required, string)\n+Comma-separated list of snapshot repository names used to limit the request.\n+Wildcard (`*`) expressions are supported.\n++\n+To get information about all snapshot repositories registered in the\n+cluster, omit this parameter or use `*` or `_all`.\n+\n+`<snapshot>`::\n+(Required, string)\n+Comma-separated list of snapshot names to retrieve. Also accepts wildcards (`*`).\n++\n+* To get information about all snapshots in a registered repository, use a wildcard (`*`) or `_all`.\n+* To get information about any snapshots that are currently running, use `_current`.\n++\n+NOTE: Using `_all` in a request fails if any snapshots are unavailable.\n+Set <<get-snapshot-api-ignore-unavailable,`ignore_unavailable`>> to `true` to return only available snapshots.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-request-body]]\n+==== {api-request-body-title}\n+\n+[[get-snapshot-api-ignore-unavailable]]\n+`ignore_unavailable`::\n+(Optional, boolean)\n+If `false`, the request returns an error for any snapshots that are unavailable. Defaults to `false`.\n++\n+If `true`, the request ignores snapshots that are unavailable, such as those that are corrupted or temporarily cannot be returned.\n+\n+`verbose`::\n+(Optional, boolean)\n+If `true`, returns all available information about a snapshot. Defaults to `true`.\n++\n+If `false`, omits additional information about the snapshot, such as version information, start and end times, and the number of snapshotted shards.\n+\n+[role=\"child-attributes\"]\n+[[get-snapshot-api-response-body]]\n+==== {api-response-body-title}\n+\n+`snapshot`::\n+Name of the snapshot.\n+\n+`uuid`::\n+Universally unique identifier (UUID) of the snapshot.\n+\n+`version_id`::\n+Build ID of the {es} version used to create the snapshot.\n+\n+`version`::\n+{es} version used to create the snapshot.\n+\n+`indices`::\n+Indices that are included in the snapshot.\n+\n+`start_time`::\n+Date timestamp of when the snapshot creation process started.\n+\n+`start_time_in_millis`::\n+The start time, in milliseconds, when the snapshot creation process started.\n+\n+`end_time`::\n+Date timestamp of when the snapshot creation process ended.\n+\n+`end_time_in_millis`::\n+The end time, in milliseconds, when the snapshot creation process ended.\n+\n+`duration_in_millis`::\n+How long, in milliseconds, it took to create the snapshot.\n+\n+`failures`::\n+Lists any failures that occurred when creating the snapshot.\n+\n+`shards`::\n+Indicates the following shards information:\n+* Total shards included in the snapshot\n+* Failed shards that were not included in the snapshot\n+* Successful shards that were included in the snapshot\n+\n+`state`::\n++\n+--\n+(string)\n+The snapshot `state` can be one of the following values:\n+\n+.Values for `state`\n+[%collapsible%open]\n+====\n+`IN_PROGRESS`::\n+  The snapshot is currently running.\n+\n+`SUCCESS`::\n+  The snapshot finished and all shards were stored successfully.\n+\n+`FAILED`::\n+  The snapshot finished with an error and failed to store any data.\n+\n+`PARTIAL`::\n+  The global cluster state was stored, but data of at least one shard was not stored successfully.\n+  The `failures` section of the response contains more detailed information about shards\n+  that were not processed correctly.\n+\n+`INCOMPATIBLE`::", "originalCommit": "aa8aa2f28b9c9ee7a59d19d7a141b2781554eac0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTUyMDkxMg==", "url": "https://github.com/elastic/elasticsearch/pull/59098#discussion_r451520912", "bodyText": "Sounds good @original-brownbear. I'll remove the INCOMPATIBLE value for state.", "author": "lockewritesdocs", "createdAt": "2020-07-08T12:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTM1NjA2MA=="}], "type": "inlineReview"}, {"oid": "d2aaff6246945160da649a24504443532f210689", "url": "https://github.com/elastic/elasticsearch/commit/d2aaff6246945160da649a24504443532f210689", "message": "Change dash to underscore\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-08T12:49:33Z", "type": "commit"}, {"oid": "2880d1277d5d57e2b67605b1d2ce1d730aff08b6", "url": "https://github.com/elastic/elasticsearch/commit/2880d1277d5d57e2b67605b1d2ce1d730aff08b6", "message": "Add data type for snapshot in response\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-08T12:50:58Z", "type": "commit"}, {"oid": "ce7d5a120aac4730a8afa7c226464eb55fab74ad", "url": "https://github.com/elastic/elasticsearch/commit/ce7d5a120aac4730a8afa7c226464eb55fab74ad", "message": "Incorporating review comments and adding missing response definitions.", "committedDate": "2020-07-08T14:02:19Z", "type": "commit"}, {"oid": "e0471f41fc3da1f859dac9e77f7640741606665a", "url": "https://github.com/elastic/elasticsearch/commit/e0471f41fc3da1f859dac9e77f7640741606665a", "message": "Minor rewording in description.", "committedDate": "2020-07-08T14:54:21Z", "type": "commit"}]}