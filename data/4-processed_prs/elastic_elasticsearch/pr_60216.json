{"pr_number": 60216, "pr_title": "Properly document keepalive and other tcp options", "pr_createdAt": "2020-07-27T14:04:40Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60216", "timeline": [{"oid": "63b09aad5fad779913eacd479931462c56934f36", "url": "https://github.com/elastic/elasticsearch/commit/63b09aad5fad779913eacd479931462c56934f36", "message": "Properly document keepalive options", "committedDate": "2020-07-27T14:01:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyMzQxOA==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460923418", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            means to use the system default. May not be greater than 300. Only applicable on\n          \n          \n            \n            means to use the smaller of 300 or the system default. May not be greater than 300. Only applicable on", "author": "DaveCTurner", "createdAt": "2020-07-27T14:17:46Z", "path": "docs/reference/modules/http.asciidoc", "diffHunk": "@@ -127,6 +127,44 @@ The maximum number of warning headers in client HTTP responses. Defaults to `unb\n `http.max_warning_header_size`::\n The maximum total size of warning headers in client HTTP responses. Defaults to `unbounded`.\n \n+`http.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`http.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`http.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n+means to use the system default. May not be greater than 300. Only applicable on", "originalCommit": "63b09aad5fad779913eacd479931462c56934f36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk0NTYxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460945611", "bodyText": "Ok, no, I understood #59278 ok and misunderstood this change. This suggestion isn't right.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:47:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyMzQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyMzU4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460923583", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to `network.tcp.keep_interval` which means to use the system default.\n          \n          \n            \n            Defaults to `network.tcp.keep_interval` which means to use the smaller of 300 or the system default.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:18:01Z", "path": "docs/reference/modules/http.asciidoc", "diffHunk": "@@ -127,6 +127,44 @@ The maximum number of warning headers in client HTTP responses. Defaults to `unb\n `http.max_warning_header_size`::\n The maximum total size of warning headers in client HTTP responses. Defaults to `unbounded`.\n \n+`http.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`http.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`http.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n+means to use the system default. May not be greater than 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`http.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval` which means to use the system default.", "originalCommit": "63b09aad5fad779913eacd479931462c56934f36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk0NTY4NA==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460945684", "bodyText": "Ok, no, I understood #59278 ok and misunderstood this change. This suggestion isn't right.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:47:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyMzU4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyNDA3Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460924073", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            the system default. May not be greater than 300. Only applicable on Linux and macOS,\n          \n          \n            \n            the smaller of 300 or the system default. May not be greater than 300. Only applicable on Linux and macOS,", "author": "DaveCTurner", "createdAt": "2020-07-27T14:18:39Z", "path": "docs/reference/modules/network.asciidoc", "diffHunk": "@@ -130,8 +130,25 @@ Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no d\n setting. Defaults to `true`.\n \n `network.tcp.keep_alive`::\n-Enable or disable https://en.wikipedia.org/wiki/Keepalive[TCP keep alive].\n-Defaults to `true`.\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+\n+`network.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `-1` which means to use\n+the system default. May not be greater than 300. Only applicable on Linux and macOS,", "originalCommit": "63b09aad5fad779913eacd479931462c56934f36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk0NTczMQ==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460945731", "bodyText": "Ok, no, I understood #59278 ok and misunderstood this change. This suggestion isn't right.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:47:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyNDA3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyNDE4Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460924183", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to `-1` which means to use the system default. May not be greater than 300.\n          \n          \n            \n            Defaults to `-1` which means to use the smaller of 300 or the system default. May not be greater than 300.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:18:49Z", "path": "docs/reference/modules/network.asciidoc", "diffHunk": "@@ -130,8 +130,25 @@ Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no d\n setting. Defaults to `true`.\n \n `network.tcp.keep_alive`::\n-Enable or disable https://en.wikipedia.org/wiki/Keepalive[TCP keep alive].\n-Defaults to `true`.\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+\n+`network.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `-1` which means to use\n+the system default. May not be greater than 300. Only applicable on Linux and macOS,\n+and requires Java 11 or newer.\n+\n+`network.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `-1` which means to use the system default. May not be greater than 300.", "originalCommit": "63b09aad5fad779913eacd479931462c56934f36", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk0NTgwMw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460945803", "bodyText": "Ok, no, I understood #59278 ok and misunderstood this change. This suggestion isn't right.", "author": "DaveCTurner", "createdAt": "2020-07-27T14:47:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyNDE4Mw=="}], "type": "inlineReview"}, {"oid": "cd5a1c66371075b8a6899134a00ca1d67ed4f2a7", "url": "https://github.com/elastic/elasticsearch/commit/cd5a1c66371075b8a6899134a00ca1d67ed4f2a7", "message": "rework transport docs", "committedDate": "2020-07-27T15:25:33Z", "type": "commit"}, {"oid": "d9d1ae7327907bbef402dc830d029c5edfc65393", "url": "https://github.com/elastic/elasticsearch/commit/d9d1ae7327907bbef402dc830d029c5edfc65393", "message": "more rework", "committedDate": "2020-07-27T15:34:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4MDIwNw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460980207", "bodyText": "This is awkward to explain; my best idea so far is this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            is the system default. May not be greater than 300. In case where the system default\n          \n          \n            \n            Defaults to `network.tcp.keep_idle` if set, or the system default otherwise.\n          \n          \n            \n            May not be greater than 300. In case where the system default\n          \n      \n    \n    \n  \n\nMaybe the docs folks can think of a better way to explain this?", "author": "DaveCTurner", "createdAt": "2020-07-27T15:34:46Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -20,42 +20,90 @@ as search in Elasticsearch.\n The internal transport communicates over TCP. You can configure it with the\n following settings:\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-\n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n It also uses the common\n <<modules-network,network settings>>.\n \n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+is the system default. May not be greater than 300. In case where the system default", "originalCommit": "cd5a1c66371075b8a6899134a00ca1d67ed4f2a7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4MjA1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460982053", "bodyText": "This is awkward to explain; my best idea so far is this:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to `network.tcp.keep_interval`, which is the system default.\n          \n          \n            \n            Defaults to `network.tcp.keep_interval` if set, or the system default otherwise.\n          \n      \n    \n    \n  \n\nMaybe the docs folks can think of a better way to explain this?", "author": "DaveCTurner", "createdAt": "2020-07-27T15:37:27Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,89 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n-\n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n-It also uses the common\n-<<modules-network,network settings>>.\n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+is the system default. May not be greater than 300. In case where the system default\n+is higher than 300, the value is automatically lowered to 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`transport.tcp.keep_interval`::\n+Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval`, which is the system default.", "originalCommit": "d9d1ae7327907bbef402dc830d029c5edfc65393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk4MjI3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r460982272", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            which means to use the system default. Only applicable on Linux and macOS, and\n          \n          \n            \n            if set, or the system default otherwise. Only applicable on Linux and macOS, and", "author": "DaveCTurner", "createdAt": "2020-07-27T15:37:47Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,89 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n-\n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n-It also uses the common\n-<<modules-network,network settings>>.\n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+is the system default. May not be greater than 300. In case where the system default\n+is higher than 300, the value is automatically lowered to 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`transport.tcp.keep_interval`::\n+Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval`, which is the system default.\n+May not be greater than 300. In case where the system default is higher than 300,\n+the value is automatically lowered to 300. Only applicable on Linux and macOS,\n+and requires Java 11 or newer.\n+\n+`transport.tcp.keep_count`::\n+Configures the `TCP_KEEPCNT` option for this socket, which\n+determines the number of unacknowledged TCP keepalive probes that may be\n+sent on a connection before it is dropped. Defaults to `network.tcp.keep_count`\n+which means to use the system default. Only applicable on Linux and macOS, and", "originalCommit": "d9d1ae7327907bbef402dc830d029c5edfc65393", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "23f5cd9e4c9c0c979a9022798ef059a26f63515f", "url": "https://github.com/elastic/elasticsearch/commit/23f5cd9e4c9c0c979a9022798ef059a26f63515f", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: David Turner <david.turner@elastic.co>", "committedDate": "2020-07-27T15:50:37Z", "type": "commit"}, {"oid": "2bff9d08c0cce57badba6c0f6b8c338be23753d6", "url": "https://github.com/elastic/elasticsearch/commit/2bff9d08c0cce57badba6c0f6b8c338be23753d6", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: David Turner <david.turner@elastic.co>", "committedDate": "2020-07-27T15:50:44Z", "type": "commit"}, {"oid": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "url": "https://github.com/elastic/elasticsearch/commit/db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: David Turner <david.turner@elastic.co>", "committedDate": "2020-07-27T15:50:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAzOTk0Mg==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461039942", "bodyText": "Thanks for fixing the formatting here!", "author": "jrodewig", "createdAt": "2020-07-27T17:07:43Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,90 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0MDMyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461040329", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            May not be greater than 300. In case where the system default\n          \n          \n            \n            is higher than 300, the value is automatically lowered to 300. Only applicable on\n          \n          \n            \n            This value cannot exceed `300` seconds. In cases where the system default\n          \n          \n            \n            is higher than `300`, the value is automatically lowered to `300`. Only applicable on", "author": "jrodewig", "createdAt": "2020-07-27T17:08:26Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,90 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n-\n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n-It also uses the common\n-<<modules-network,network settings>>.\n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+Defaults to `network.tcp.keep_idle` if set, or the system default otherwise.\n+May not be greater than 300. In case where the system default\n+is higher than 300, the value is automatically lowered to 300. Only applicable on", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0MjgyNw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461042827", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n          \n          \n            \n            Defaults to `network.tcp.keep_idle` if set, or the system default otherwise.\n          \n          \n            \n            starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` if set,\n          \n          \n            \n            or the system default otherwise.", "author": "jrodewig", "createdAt": "2020-07-27T17:12:59Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,90 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n-\n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n-It also uses the common\n-<<modules-network,network settings>>.\n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+Defaults to `network.tcp.keep_idle` if set, or the system default otherwise.", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0NjQ4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461046486", "bodyText": "Minor rewording for clarity.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n          \n          \n            \n            means to use the system default. May not be greater than 300. Only applicable on\n          \n          \n            \n            starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n          \n          \n            \n            uses the system default. This value cannot exceed `300` seconds. Only applicable on", "author": "jrodewig", "createdAt": "2020-07-27T17:19:14Z", "path": "docs/reference/modules/http.asciidoc", "diffHunk": "@@ -127,6 +127,44 @@ The maximum number of warning headers in client HTTP responses. Defaults to `unb\n `http.max_warning_header_size`::\n The maximum total size of warning headers in client HTTP responses. Defaults to `unbounded`.\n \n+`http.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`http.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`http.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n+means to use the system default. May not be greater than 300. Only applicable on", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0Njg1MA==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461046850", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to `network.tcp.keep_interval` which means to use the system default.\n          \n          \n            \n            May not be greater than 300. Only applicable on Linux and macOS, and requires\n          \n          \n            \n            Defaults to `network.tcp.keep_interval`, which uses the system default.\n          \n          \n            \n            This value cannot exceed `300` seconds. Only applicable on Linux and macOS, and requires", "author": "jrodewig", "createdAt": "2020-07-27T17:19:51Z", "path": "docs/reference/modules/http.asciidoc", "diffHunk": "@@ -127,6 +127,44 @@ The maximum number of warning headers in client HTTP responses. Defaults to `unb\n `http.max_warning_header_size`::\n The maximum total size of warning headers in client HTTP responses. Defaults to `unbounded`.\n \n+`http.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`http.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`http.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n+means to use the system default. May not be greater than 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`http.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval` which means to use the system default.\n+May not be greater than 300. Only applicable on Linux and macOS, and requires", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0NzAyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461047029", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sent on a connection before it is dropped. Defaults to `network.tcp.keep_count`\n          \n          \n            \n            which means to use the system default. Only applicable on Linux and macOS, and\n          \n          \n            \n            sent on a connection before it is dropped. Defaults to `network.tcp.keep_count`,\n          \n          \n            \n            which uses the system default. Only applicable on Linux and macOS, and", "author": "jrodewig", "createdAt": "2020-07-27T17:20:06Z", "path": "docs/reference/modules/http.asciidoc", "diffHunk": "@@ -127,6 +127,44 @@ The maximum number of warning headers in client HTTP responses. Defaults to `unb\n `http.max_warning_header_size`::\n The maximum total size of warning headers in client HTTP responses. Defaults to `unbounded`.\n \n+`http.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`http.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`http.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle` which\n+means to use the system default. May not be greater than 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`http.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval` which means to use the system default.\n+May not be greater than 300. Only applicable on Linux and macOS, and requires\n+Java 11 or newer.\n+\n+`http.tcp.keep_count`:: Configures the `TCP_KEEPCNT` option for this socket, which\n+determines the number of unacknowledged TCP keepalive probes that may be\n+sent on a connection before it is dropped. Defaults to `network.tcp.keep_count`\n+which means to use the system default. Only applicable on Linux and macOS, and", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0NzM2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461047363", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            starting to send TCP keepalive probes. Defaults to `-1` which means to use\n          \n          \n            \n            the system default. May not be greater than 300. Only applicable on Linux and macOS,\n          \n          \n            \n            starting to send TCP keepalive probes. Defaults to `-1`, which uses\n          \n          \n            \n            the system default. This value cannot exceed `300` seconds. Only applicable on Linux and macOS,", "author": "jrodewig", "createdAt": "2020-07-27T17:20:43Z", "path": "docs/reference/modules/network.asciidoc", "diffHunk": "@@ -130,8 +130,25 @@ Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no d\n setting. Defaults to `true`.\n \n `network.tcp.keep_alive`::\n-Enable or disable https://en.wikipedia.org/wiki/Keepalive[TCP keep alive].\n-Defaults to `true`.\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+\n+`network.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `-1` which means to use\n+the system default. May not be greater than 300. Only applicable on Linux and macOS,", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0NzY1NA==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461047654", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Defaults to `-1` which means to use the system default. May not be greater than 300.\n          \n          \n            \n            Defaults to `-1`, which uses the system default. This value cannot exceed `300` seconds.", "author": "jrodewig", "createdAt": "2020-07-27T17:21:10Z", "path": "docs/reference/modules/network.asciidoc", "diffHunk": "@@ -130,8 +130,25 @@ Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no d\n setting. Defaults to `true`.\n \n `network.tcp.keep_alive`::\n-Enable or disable https://en.wikipedia.org/wiki/Keepalive[TCP keep alive].\n-Defaults to `true`.\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+\n+`network.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `-1` which means to use\n+the system default. May not be greater than 300. Only applicable on Linux and macOS,\n+and requires Java 11 or newer.\n+\n+`network.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `-1` which means to use the system default. May not be greater than 300.", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0Nzc5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461047795", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sent on a connection before it is dropped. Defaults to `-1` which means to\n          \n          \n            \n            use the system default. Only applicable on Linux and macOS, and requires\n          \n          \n            \n            sent on a connection before it is dropped. Defaults to `-1`,\n          \n          \n            \n            which uses the system default. Only applicable on Linux and macOS, and requires", "author": "jrodewig", "createdAt": "2020-07-27T17:21:24Z", "path": "docs/reference/modules/network.asciidoc", "diffHunk": "@@ -130,8 +130,25 @@ Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no d\n setting. Defaults to `true`.\n \n `network.tcp.keep_alive`::\n-Enable or disable https://en.wikipedia.org/wiki/Keepalive[TCP keep alive].\n-Defaults to `true`.\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+\n+`network.tcp.keep_idle`:: Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `-1` which means to use\n+the system default. May not be greater than 300. Only applicable on Linux and macOS,\n+and requires Java 11 or newer.\n+\n+`network.tcp.keep_interval`:: Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `-1` which means to use the system default. May not be greater than 300.\n+Only applicable on Linux and macOS, and requires Java 11 or newer.\n+\n+`network.tcp.keep_count`:: Configures the `TCP_KEEPCNT` option for this socket, which\n+determines the number of unacknowledged TCP keepalive probes that may be\n+sent on a connection before it is dropped. Defaults to `-1` which means to\n+use the system default. Only applicable on Linux and macOS, and requires", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA0ODMwMA==", "url": "https://github.com/elastic/elasticsearch/pull/60216#discussion_r461048300", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            May not be greater than 300. In case where the system default is higher than 300,\n          \n          \n            \n            the value is automatically lowered to 300. Only applicable on Linux and macOS,\n          \n          \n            \n            This value cannot exceed `300` seconds. In cases where the system default is higher than `300`,\n          \n          \n            \n            the value is automatically lowered to `300`. Only applicable on Linux and macOS,", "author": "jrodewig", "createdAt": "2020-07-27T17:22:13Z", "path": "docs/reference/modules/transport.asciidoc", "diffHunk": "@@ -17,44 +17,90 @@ as search in Elasticsearch.\n [[transport-settings]]\n ==== Transport settings\n \n-The internal transport communicates over TCP. You can configure it with the\n-following settings:\n+The following settings can be configured for the internal transport that\n+communicates over TCP. These settings also use the common\n+<<modules-network,network settings>>.\n \n-[cols=\"<,<\",options=\"header\",]\n-|=======================================================================\n-|Setting |Description\n-|`transport.port` |A bind port range. Defaults to `9300-9400`.\n+`transport.port`::\n+A bind port range. Defaults to `9300-9400`.\n \n-|`transport.publish_port` |The port that other nodes in the cluster\n+`transport.publish_port`::\n+The port that other nodes in the cluster\n should use when communicating with this node. Useful when a cluster node\n is behind a proxy or firewall and the `transport.port` is not directly\n addressable from the outside. Defaults to the actual port assigned via\n `transport.port`.\n \n-|`transport.bind_host` |The host address to bind the transport service to. Defaults to `transport.host` (if set) or `network.bind_host`.\n-\n-|`transport.publish_host` |The host address to publish for nodes in the cluster to connect to. Defaults to `transport.host` (if set) or `network.publish_host`.\n+`transport.bind_host`::\n+The host address to bind the transport service to. Defaults to\n+`transport.host` (if set) or `network.bind_host`.\n \n-|`transport.host` |Used to set the `transport.bind_host` and the `transport.publish_host`.\n+`transport.publish_host`::\n+The host address to publish for nodes in the cluster to connect to.\n+Defaults to `transport.host` (if set) or `network.publish_host`.\n \n+`transport.host`::\n+Used to set the `transport.bind_host` and the `transport.publish_host`.\n \n-|`transport.connect_timeout` |The connect timeout for initiating a new connection (in\n+`transport.connect_timeout`::\n+The connect timeout for initiating a new connection (in\n time setting format). Defaults to `30s`.\n \n-|`transport.compress` |Set to `true` to enable compression (`DEFLATE`) between\n+`transport.compress`::\n+Set to `true` to enable compression (`DEFLATE`) between\n all nodes. Defaults to `false`.\n \n-|`transport.ping_schedule` | Schedule a regular application-level ping message\n+`transport.ping_schedule`::\n+Schedule a regular application-level ping message\n to ensure that transport connections between nodes are kept alive. Defaults to\n `5s` in the transport client and `-1` (disabled) elsewhere. It is preferable\n to correctly configure TCP keep-alives instead of using this feature, because\n TCP keep-alives apply to all kinds of long-lived connections and not just to\n transport connections.\n \n-|=======================================================================\n-\n-It also uses the common\n-<<modules-network,network settings>>.\n+`transport.tcp.no_delay`::\n+Enable or disable the https://en.wikipedia.org/wiki/Nagle%27s_algorithm[TCP no delay]\n+setting. Defaults to `network.tcp.no_delay`.\n+\n+`transport.tcp.keep_alive`::\n+Configures the `SO_KEEPALIVE` option for this socket, which\n+determines whether it sends TCP keepalive probes.\n+Defaults to `network.tcp.keep_alive`.\n+\n+`transport.tcp.keep_idle`::\n+Configures the `TCP_KEEPIDLE` option for this socket, which\n+determines the time in seconds that a connection must be idle before\n+starting to send TCP keepalive probes. Defaults to `network.tcp.keep_idle`, which\n+Defaults to `network.tcp.keep_idle` if set, or the system default otherwise.\n+May not be greater than 300. In case where the system default\n+is higher than 300, the value is automatically lowered to 300. Only applicable on\n+Linux and macOS, and requires Java 11 or newer.\n+\n+`transport.tcp.keep_interval`::\n+Configures the `TCP_KEEPINTVL` option for this socket,\n+which determines the time in seconds between sending TCP keepalive probes.\n+Defaults to `network.tcp.keep_interval` if set, or the system default otherwise.\n+May not be greater than 300. In case where the system default is higher than 300,\n+the value is automatically lowered to 300. Only applicable on Linux and macOS,", "originalCommit": "db415dbcec6aaa22d6872c3ad5cea24b44e481c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c8d83a2528ca4219746e07b6d5d9b2fa0f888b2e", "url": "https://github.com/elastic/elasticsearch/commit/c8d83a2528ca4219746e07b6d5d9b2fa0f888b2e", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:34:19Z", "type": "commit"}, {"oid": "9982ef736e68e1251cdb69eb69271a1e1943ad99", "url": "https://github.com/elastic/elasticsearch/commit/9982ef736e68e1251cdb69eb69271a1e1943ad99", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:34:33Z", "type": "commit"}, {"oid": "f93743d5cb1f33a8f56b11636d5394b770f2998d", "url": "https://github.com/elastic/elasticsearch/commit/f93743d5cb1f33a8f56b11636d5394b770f2998d", "message": "Update docs/reference/modules/http.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:34:44Z", "type": "commit"}, {"oid": "a064506c9475d960a6a532ec8cf9d001407b4bbc", "url": "https://github.com/elastic/elasticsearch/commit/a064506c9475d960a6a532ec8cf9d001407b4bbc", "message": "Update docs/reference/modules/http.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:34:53Z", "type": "commit"}, {"oid": "55e3993a4ee63419ee5fcfc69b86b15bae393d6e", "url": "https://github.com/elastic/elasticsearch/commit/55e3993a4ee63419ee5fcfc69b86b15bae393d6e", "message": "Update docs/reference/modules/http.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:35:01Z", "type": "commit"}, {"oid": "8ac500bb7c6c9eec7b5bf1bdb57a49421e3ebc31", "url": "https://github.com/elastic/elasticsearch/commit/8ac500bb7c6c9eec7b5bf1bdb57a49421e3ebc31", "message": "Update docs/reference/modules/network.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:35:09Z", "type": "commit"}, {"oid": "d7989e5de1e5ba750fa3c9d9a5a7434731b343b0", "url": "https://github.com/elastic/elasticsearch/commit/d7989e5de1e5ba750fa3c9d9a5a7434731b343b0", "message": "Update docs/reference/modules/network.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:35:17Z", "type": "commit"}, {"oid": "fbd4398cfc66e1dafd5b5459a00f805ffa609fe8", "url": "https://github.com/elastic/elasticsearch/commit/fbd4398cfc66e1dafd5b5459a00f805ffa609fe8", "message": "Update docs/reference/modules/network.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:35:25Z", "type": "commit"}, {"oid": "b1d43ce1999856501ae87849209d6968df0bfd09", "url": "https://github.com/elastic/elasticsearch/commit/b1d43ce1999856501ae87849209d6968df0bfd09", "message": "Update docs/reference/modules/transport.asciidoc\n\nCo-authored-by: James Rodewig <40268737+jrodewig@users.noreply.github.com>", "committedDate": "2020-07-28T07:35:32Z", "type": "commit"}, {"oid": "6b930c61ca2335dcea8305c947dbb8e0a4daae64", "url": "https://github.com/elastic/elasticsearch/commit/6b930c61ca2335dcea8305c947dbb8e0a4daae64", "message": "Merge branch 'master' into keepalive-opts", "committedDate": "2020-07-28T07:36:21Z", "type": "commit"}]}