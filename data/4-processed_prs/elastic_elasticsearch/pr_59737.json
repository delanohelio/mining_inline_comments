{"pr_number": 59737, "pr_title": "[DOCS] Refactored index-templates topic.", "pr_createdAt": "2020-07-16T22:13:28Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59737", "timeline": [{"oid": "85d03f6f7957eddfb9080bfe59d4f346619ba712", "url": "https://github.com/elastic/elasticsearch/commit/85d03f6f7957eddfb9080bfe59d4f346619ba712", "message": "fix test", "committedDate": "2020-07-21T00:19:06Z", "type": "forcePushed"}, {"oid": "23b0af437fa941a42b9b7150c4d2ceea5ceee6e0", "url": "https://github.com/elastic/elasticsearch/commit/23b0af437fa941a42b9b7150c4d2ceea5ceee6e0", "message": "[DOCS] Add delete component template.", "committedDate": "2020-07-21T17:12:21Z", "type": "forcePushed"}, {"oid": "1b2939c1aed7c07de64e70a4dcb31affce012320", "url": "https://github.com/elastic/elasticsearch/commit/1b2939c1aed7c07de64e70a4dcb31affce012320", "message": "Flag legacy APIs in TOC", "committedDate": "2020-07-22T00:59:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3MzIzMQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458873231", "bodyText": "Extra space.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A building block for constructing <<indices-templates,index templates>>  that specifies index\n          \n          \n            \n            A building block for constructing <<indices-templates,index templates>> that specifies index", "author": "jrodewig", "createdAt": "2020-07-22T15:19:18Z", "path": "docs/reference/glossary.asciidoc", "diffHunk": "@@ -53,6 +53,14 @@ In the cold phase, an index is no longer updated and seldom queried.\n The information still needs to be searchable, but it\u2019s okay if those queries are slower.\n // end::cold-phase-def[]\n \n+[[glossary-component-template]] component template ::\n+// tag::component-template-def[]\n+A building block for constructing <<indices-templates,index templates>>  that specifies index", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3Mzc5Nw==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458873797", "bodyText": "Looks like this end tag was duped.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // end::component-template-def[]", "author": "jrodewig", "createdAt": "2020-07-22T15:20:03Z", "path": "docs/reference/glossary.asciidoc", "diffHunk": "@@ -53,6 +53,14 @@ In the cold phase, an index is no longer updated and seldom queried.\n The information still needs to be searchable, but it\u2019s okay if those queries are slower.\n // end::cold-phase-def[]\n \n+[[glossary-component-template]] component template ::\n+// tag::component-template-def[]\n+A building block for constructing <<indices-templates,index templates>>  that specifies index\n+<<mapping,mappings>>, <<index-modules-settings,settings>>, and <<indices-aliases,aliases>>. \n+// end::component-template-def[]\n+\n+// end::component-template-def[]\n+", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3NTUyMA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458875520", "bodyText": "It looks like we hyphenate time series when used as an adjective.\nI don't feel strongly either way. If you decide to stick with this, I can create an issue to address the other instances.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            They are most often used to configure rolling indices for time series data to \n          \n          \n            \n            They are most often used to configure rolling indices for time-series data to", "author": "jrodewig", "createdAt": "2020-07-22T15:22:29Z", "path": "docs/reference/indices.asciidoc", "diffHunk": "@@ -50,12 +50,19 @@ index settings, aliases, mappings, and index templates.\n [float]\n [[index-templates]]\n === Index templates:\n-* <<indices-templates>>\n+\n+Index templates automatically apply settings, mappings, and aliases to new indices.\n+They are most often used to configure rolling indices for time series data to ", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE0ODMxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r459148311", "bodyText": "The style guide says never hyphenated, so that's what I went with.", "author": "debadair", "createdAt": "2020-07-22T23:57:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3NTUyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3NzQ0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458877449", "bodyText": "This pulls in a def for <index-template> not <component-template>. I think we need a new def.", "author": "jrodewig", "createdAt": "2020-07-22T15:25:02Z", "path": "docs/reference/indices/delete-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,52 @@\n+[[indices-delete-component-template]]\n+=== Delete component template API\n+++++\n+<titleabbrev>Delete component template</titleabbrev>\n+++++\n+\n+Deletes an existing component template.\n+\n+////\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index.number_of_replicas\": 0\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_1\n+--------------------------------------------------\n+\n+\n+[[delete-component-template-api-request]]\n+==== {api-request-title}\n+\n+`DELETE /_template/<component-template>`\n+\n+\n+[[delete-component-template-api-desc]]\n+==== {api-description-title}\n+\n+Use the delete component template API to delete one or more component templates\n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index mappings, settings, and aliases. \n+\n+[[delete-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=index-template]", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE0ODU3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r459148575", "bodyText": "Good catch. Will fix.", "author": "debadair", "createdAt": "2020-07-22T23:58:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3NzQ0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3ODY4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458878685", "bodyText": "This pulls in an incomplete sentence. Kind of reads oddly as-is:\n\nThat short def also doesn't mention index aliases.", "author": "jrodewig", "createdAt": "2020-07-22T15:26:44Z", "path": "docs/reference/indices/delete-index-template.asciidoc", "diffHunk": "@@ -37,7 +37,7 @@ DELETE /_template/template_1\n \n Use the delete index template API to delete one or more index templates\n \n-include::templates.asciidoc[tag=index-template-def]\n+include::{es-repo-dir}/glossary.asciidoc[tag=index-template-def-short]", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE0ODc3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r459148772", "bodyText": "Yeah, reusing the short defs doesn't work. Will fix.", "author": "debadair", "createdAt": "2020-07-22T23:59:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3ODY4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg3OTc5MQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458879791", "bodyText": "nit: Retrieves has more of a user POV. No biggie tho.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Returns information about one or more component templates.\n          \n          \n            \n            Retrieves information about one or more component templates.", "author": "jrodewig", "createdAt": "2020-07-22T15:28:20Z", "path": "docs/reference/indices/get-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,88 @@\n+[[getting-component-templates]] \n+=== Get component template API\n+++++\n+<titleabbrev>Get component template</titleabbrev>\n+++++\n+\n+Returns information about one or more component templates.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4MDk2OA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458880968", "bodyText": "Based on the example below, this is optional. May also want to mention that you can omit this parameter to retrieve all component templates.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `<component-template>`\n          \n          \n            \n            (Required, string)\n          \n          \n            \n            Comma-separated list of component template names used to limit the request.\n          \n          \n            \n            Wildcard (`*`) expressions are supported.\n          \n          \n            \n            `<component-template>`\n          \n          \n            \n            (Optional, string)\n          \n          \n            \n            Comma-separated list of component template names used to limit the request.\n          \n          \n            \n            Wildcard (`*`) expressions are supported.", "author": "jrodewig", "createdAt": "2020-07-22T15:29:53Z", "path": "docs/reference/indices/get-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,88 @@\n+[[getting-component-templates]] \n+=== Get component template API\n+++++\n+<titleabbrev>Get component template</titleabbrev>\n+++++\n+\n+Returns information about one or more component templates.\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_component_template/template_1 \n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"index.number_of_replicas\": 0\n+    },\n+    \"mappings\": {\n+      \"properties\": {\n+        \"@timestamp\": {\n+          \"type\": \"date\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE /_component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+GET /_component_template/template_1\n+--------------------------------------------------\n+\n+[[get-component-template-api-request]]\n+==== {api-request-title}\n+\n+`GET /_component-template/<component-template>`\n+\n+\n+[[get-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`\n+(Required, string)\n+Comma-separated list of component template names used to limit the request.\n+Wildcard (`*`) expressions are supported.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4MTcwMw==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458881703", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Returns information about one or more index templates.\n          \n          \n            \n            Retrieves information about one or more index templates.", "author": "jrodewig", "createdAt": "2020-07-22T15:30:50Z", "path": "docs/reference/indices/get-index-template-v1.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+[[indices-get-template-v1]]\n+=== Get index template API\n+++++\n+<titleabbrev>Get index template (legacy)</titleabbrev>\n+++++\n+\n+IMPORTANT: This documentation is about legacy index templates, \n+which are deprecated and will be replaced by the composable templates introduced in {es} 7.8. \n+For information about composable templates, <<indices-templates>>.\n+\n+Returns information about one or more index templates.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4MjMxMQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458882311", "bodyText": "TIL. Neato.", "author": "jrodewig", "createdAt": "2020-07-22T15:31:39Z", "path": "docs/reference/indices/get-index-template.asciidoc", "diffHunk": "@@ -1,89 +1,82 @@\n-[[indices-get-template-v1]]\n-=== Get index template API\n+[[indices-get-template]]\n+=== Get index template API [[getting-templates]]", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4MjgzOA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458882838", "bodyText": "Why are we expanding the comments here?\nShouldn't matter but seems unneeded.", "author": "jrodewig", "createdAt": "2020-07-22T15:32:18Z", "path": "docs/reference/indices/get-index-template.asciidoc", "diffHunk": "@@ -1,89 +1,82 @@\n-[[indices-get-template-v1]]\n-=== Get index template API\n+[[indices-get-template]]\n+=== Get index template API [[getting-templates]]\n ++++\n <titleabbrev>Get index template</titleabbrev>\n ++++\n \n Returns information about one or more index templates.\n \n-////\n+//////////////////////////", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4MzE4MA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458883180", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To return all index templates, omit this parameter or use a value of `*`.\n          \n          \n            \n            To retrieve all index templates, omit this parameter or use a value of `*`.", "author": "jrodewig", "createdAt": "2020-07-22T15:32:45Z", "path": "docs/reference/indices/get-index-template.asciidoc", "diffHunk": "@@ -1,89 +1,82 @@\n-[[indices-get-template-v1]]\n-=== Get index template API\n+[[indices-get-template]]\n+=== Get index template API [[getting-templates]]\n ++++\n <titleabbrev>Get index template</titleabbrev>\n ++++\n \n Returns information about one or more index templates.\n \n-////\n+//////////////////////////\n+\n [source,console]\n --------------------------------------------------\n-PUT _template/template_1\n+PUT /_index_template/template_1\n {\n- \"index_patterns\" : [\"te*\"],\n-  \"settings\": {\n-    \"number_of_shards\": 1\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n   }\n }\n --------------------------------------------------\n // TESTSETUP\n \n [source,console]\n --------------------------------------------------\n-DELETE _template/template_1\n+DELETE _index_template/template_*\n --------------------------------------------------\n // TEARDOWN\n \n-////\n+//////////////////////////\n \n [source,console]\n --------------------------------------------------\n-GET /_template/template_1\n+GET /_index_template/template_1\n --------------------------------------------------\n \n-\n-[[get-template-v1-api-request]]\n+[[get-template-api-request]]\n ==== {api-request-title}\n \n-`GET /_template/<index-template>`\n+`GET /_index_template/<index-template>`\n \n \n-[[get-template-v1-api-path-params]]\n+[[get-template-api-path-params]]\n ==== {api-path-parms-title}\n \n-include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=index-template]\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=index-template]\n +\n-To return all index templates, omit this parameter\n-or use a value of `_all` or `*`.\n+To return all index templates, omit this parameter or use a value of `*`.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4Mzg4MA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458883880", "bodyText": "I think we can drop the titleabbrev.", "author": "jrodewig", "createdAt": "2020-07-22T15:33:43Z", "path": "docs/reference/indices/index-templates.asciidoc", "diffHunk": "@@ -1,18 +1,12 @@\n [[indices-templates]]\n-=== Index templates\n+= Index templates\n ++++\n-<titleabbrev>Index template</titleabbrev>\n+<titleabbrev>Index templates</titleabbrev>\n ++++", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4NDgxMg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458884812", "bodyText": "We've now got a few different types of templates. I think specifying index is important for clarity here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            NOTE: This topic describes the composable templates introduced in {es} 7.8. \n          \n          \n            \n            For information about how templates worked previously, \n          \n          \n            \n            see the <<indices-templates-v1,legacy template documentation>>.\n          \n          \n            \n            NOTE: This topic describes composable index templates introduced in {es} 7.8. \n          \n          \n            \n            For information about how templates worked previously, \n          \n          \n            \n            see the <<indices-templates-v1,legacy index template documentation>>.", "author": "jrodewig", "createdAt": "2020-07-22T15:34:57Z", "path": "docs/reference/indices/index-templates.asciidoc", "diffHunk": "@@ -1,18 +1,12 @@\n [[indices-templates]]\n-=== Index templates\n+= Index templates\n ++++\n-<titleabbrev>Index template</titleabbrev>\n+<titleabbrev>Index templates</titleabbrev>\n ++++\n \n-This documentation is about composable templates. For legacy templates please see the\n-<<indices-templates-v1,legacy template documentation>>.\n-\n-[NOTE]\n-====\n-In {es} 7.8 composable templates were introduced. When a composable template matches a given index\n-it always takes precedence over a legacy template. If no composable template matches, a legacy\n-template may still match and be applied.\n-====\n+NOTE: This topic describes the composable templates introduced in {es} 7.8. \n+For information about how templates worked previously, \n+see the <<indices-templates-v1,legacy template documentation>>.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4NjA2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458886069", "bodyText": "I'd consider splitting this into two sentences.", "author": "jrodewig", "createdAt": "2020-07-22T15:36:42Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, ", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4Njg5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458886899", "bodyText": "nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To use a component template, you specify it the index template's `composed_of` list.\n          \n          \n            \n            To use a component template, specify it the index template's `composed_of` list.", "author": "jrodewig", "createdAt": "2020-07-22T15:37:51Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg4ODEyMg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458888122", "bodyText": "This is a comma splice.\n\nYou cannot use component templates independently\n\nIndependently seems a little unclear here. In some ways, modularity = independence.\nIt may be more clear to say you cannot apply or use component templates with an index template.", "author": "jrodewig", "createdAt": "2020-07-22T15:39:34Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. ", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MDA3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458890071", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Component templates on their own don't apply or interact with data streams or indices at all.\n          \n          \n            \n            You cannot directly apply a component template to a data stream or index.", "author": "jrodewig", "createdAt": "2020-07-22T15:42:16Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MDU5Mg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458890592", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To take effect, they must be used as part of an index template's `composed_of` field. See\n          \n          \n            \n            the <<indices-templates,index templates>>.\n          \n          \n            \n            To be applied, a component template must be included in an index template's `composed_of` list. See <<indices-templates>>.", "author": "jrodewig", "createdAt": "2020-07-22T15:43:02Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.\n+To take effect, they must be used as part of an index template's `composed_of` field. See\n+the <<indices-templates,index templates>>.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MDk4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458890986", "bodyText": "May be helpful to state that it's not used by ES either.", "author": "jrodewig", "createdAt": "2020-07-22T15:43:37Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.\n+To take effect, they must be used as part of an index template's `composed_of` field. See\n+the <<indices-templates,index templates>>.\n+\n+[[component-templates-version]]\n+===== Component template versioning\n+\n+You can use the `version` parameter to add an optional version number to a component template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MTIzNg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458891236", "bodyText": "nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To check the `version`, you can use the <<getting-component-templates,get component template>> API.\n          \n          \n            \n            To check the `version`, you can use the <<getting-component-templates,get component template API>>.", "author": "jrodewig", "createdAt": "2020-07-22T15:43:58Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.\n+To take effect, they must be used as part of an index template's `composed_of` field. See\n+the <<indices-templates,index templates>>.\n+\n+[[component-templates-version]]\n+===== Component template versioning\n+\n+You can use the `version` parameter to add an optional version number to a component template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<getting-component-templates,get component template>> API.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MTYxNg==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458891616", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            user-defined map that can contain any data. This data will be stored in the cluster state however,\n          \n          \n            \n            user-defined object that can contain any data. This data will be stored in the cluster state however,", "author": "jrodewig", "createdAt": "2020-07-22T15:44:30Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.\n+To take effect, they must be used as part of an index template's `composed_of` field. See\n+the <<indices-templates,index templates>>.\n+\n+[[component-templates-version]]\n+===== Component template versioning\n+\n+You can use the `version` parameter to add an optional version number to a component template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<getting-component-templates,get component template>> API.\n+\n+[[component-templates-metadata]]\n+===== Component template metadata\n+\n+You can use the `_meta` parameter to add optional metadata to a component template. This is a\n+user-defined map that can contain any data. This data will be stored in the cluster state however,", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MTgzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458891835", "bodyText": "Again, may be helpful to state it's not used by ES either.", "author": "jrodewig", "createdAt": "2020-07-22T15:44:48Z", "path": "docs/reference/indices/put-component-template.asciidoc", "diffHunk": "@@ -0,0 +1,213 @@\n+[[indices-component-template]]\n+=== Put component template API\n+++++\n+<titleabbrev>Put component template</titleabbrev>\n+++++\n+\n+Creates or updates a component template. \n+Component templates are building blocks for constructing <<indices-templates,index templates>>  \n+that specify index <<mapping,mappings>>, <<index-modules-settings,settings>>, \n+and <<indices-aliases,aliases>>. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1\n+    },\n+    \"mappings\": {\n+      \"_source\": {\n+        \"enabled\": false\n+      },\n+      \"properties\": {\n+        \"host_name\": {\n+          \"type\": \"keyword\"\n+        },\n+        \"created_at\": {\n+          \"type\": \"date\",\n+          \"format\": \"EEE MMM dd HH:mm:ss Z yyyy\"\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _component_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-component-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_component_template/<component-template>`\n+\n+\n+[[put-component-template-api-desc]]\n+==== {api-description-title}\n+\n+An index template can be composed of multiple component templates. \n+To use a component template, you specify it the index template's `composed_of` list.\n+You cannot use component templates independently, \n+they are only applied to new data streams and indices if they are part of a matching index template. \n+\n+Settings and mappings specified directly in the index template or the <<indices-create-index, create index>>\n+request override any settings or mappings specified in a component template.\n+\n+Component templates are only used during index creation. For data streams, this\n+includes data stream creation and the creation of a stream's backing indices.\n+Changes to component templates do not\n+affect existing indices, including a stream's backing indices.\n+\n+===== Comments in component templates\n+You can use C-style /* */ block comments in component templates.\n+You can include comments anywhere in the request body,\n+except before the opening curly bracket.\n+\n+[[put-component-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<component-template>`::\n+(Required, string)\n+Name of the component template to create.\n+\n+\n+[[put-component-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing component templates.\n+Defaults to `false`.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+[[put-component-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`template`::\n+(Required, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{es-repo-dir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage component templates externally.\n+This number is not automatically generated or incremented by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the component template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-component-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Component template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in a component template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+[[applying-component-templates]]\n+===== Applying component templates\n+\n+Component templates on their own don't apply or interact with data streams or indices at all.\n+To take effect, they must be used as part of an index template's `composed_of` field. See\n+the <<indices-templates,index templates>>.\n+\n+[[component-templates-version]]\n+===== Component template versioning\n+\n+You can use the `version` parameter to add an optional version number to a component template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_component_template/template_1\n+{\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<getting-component-templates,get component template>> API.\n+\n+[[component-templates-metadata]]\n+===== Component template metadata\n+\n+You can use the `_meta` parameter to add optional metadata to a component template. This is a\n+user-defined map that can contain any data. This data will be stored in the cluster state however,\n+so keeping it short is preferrable.\n+\n+The `_meta` parameter is completely optional and not automatically generated by {es}.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MjU4OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458892589", "bodyText": "See earlier comment about this tag.", "author": "jrodewig", "createdAt": "2020-07-22T15:45:50Z", "path": "docs/reference/indices/template-exists.asciidoc", "diffHunk": "@@ -26,7 +26,7 @@ HEAD /_template/template_1\n Use the index template exists API\n to determine whether one or more index templates exist.\n \n-include::templates.asciidoc[tag=index-template-def]\n+include::{es-repo-dir}/glossary.asciidoc[tag=index-template-def-short]", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MzUyOA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458893528", "bodyText": "Should we update either the ID or filename so they better match?", "author": "jrodewig", "createdAt": "2020-07-22T15:47:15Z", "path": "docs/reference/indices/index-templates.asciidoc", "diffHunk": "@@ -1,18 +1,12 @@\n [[indices-templates]]", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE1Mzc4NA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r459153784", "bodyText": "I'll fix it and add a redirect.", "author": "debadair", "createdAt": "2020-07-23T00:17:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5MzUyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5NDcwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458894705", "bodyText": "It may be helpful to add some callouts to the following snippet, particularly for the composed_of param.", "author": "jrodewig", "createdAt": "2020-07-22T15:48:52Z", "path": "docs/reference/indices/index-templates.asciidoc", "diffHunk": "@@ -29,6 +23,10 @@ specify settings, mappings, and aliases.\n \n If a new data stream or index matches more than one index template, the index template with the highest priority is used.\n \n+When a composable template matches a given index\n+it always takes precedence over a legacy template. If no composable template matches, a legacy\n+template may still match and be applied.\n+\n If an index is created with explicit settings and also matches an index template,\n the settings from the create index request take precedence over settings specified in the index template and its component templates.\n ", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTE1NDk1NA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r459154954", "bodyText": "I'm going to leave this and other content changes for the next pass.", "author": "debadair", "createdAt": "2020-07-23T00:22:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5NDcwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5NjU1OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458896559", "bodyText": "I think there's still room for improvement on this page. Few items:\n\n\nWe talk about index settings, mappings, and index aliases. However, those topics haven't been explored in any depth earlier in the TOC. Maybe adding some xrefs there would help as a stopgap?\n\n\nAn illustration or diagram may help explain the nested nature of index templates and component templates.\n\n\nWe'll want to add a tutorial with corresponding Kibana UI screenshots to supplement the current snippet.", "author": "jrodewig", "createdAt": "2020-07-22T15:51:27Z", "path": "docs/reference/indices/index-templates.asciidoc", "diffHunk": "@@ -1,18 +1,12 @@\n [[indices-templates]]\n-=== Index templates\n+= Index templates", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5NzcyOA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458897728", "bodyText": "I'd use wildcard pattern instead of index pattern.\nThe param is the same, but that pattern can now match the name of a data stream.", "author": "jrodewig", "createdAt": "2020-07-22T15:53:08Z", "path": "docs/reference/indices/put-index-template.asciidoc", "diffHunk": "@@ -0,0 +1,335 @@\n+[[indices-put-template]]\n+=== Put index template API\n+++++\n+<titleabbrev>Put index template</titleabbrev>\n+++++\n+\n+Creates or updates an index template.\n+Index templates define <<index-modules-settings,settings>>, <<mapping,mappings>>, \n+and <<indices-aliases,aliases>> that can be applied automatically to new indices. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _index_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-index-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_index_template/<index-template>`\n+\n+\n+[[put-index-template-api-desc]]\n+==== {api-description-title}\n+\n+{es} applies templates to new indices based on an\n+index pattern that matches the index name.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5ODU2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458898566", "bodyText": "I think this applies to data streams as well. I'd update to indicate that.", "author": "jrodewig", "createdAt": "2020-07-22T15:54:18Z", "path": "docs/reference/indices/put-index-template.asciidoc", "diffHunk": "@@ -0,0 +1,335 @@\n+[[indices-put-template]]\n+=== Put index template API\n+++++\n+<titleabbrev>Put index template</titleabbrev>\n+++++\n+\n+Creates or updates an index template.\n+Index templates define <<index-modules-settings,settings>>, <<mapping,mappings>>, \n+and <<indices-aliases,aliases>> that can be applied automatically to new indices. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _index_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-index-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_index_template/<index-template>`\n+\n+\n+[[put-index-template-api-desc]]\n+==== {api-description-title}\n+\n+{es} applies templates to new indices based on an\n+index pattern that matches the index name.\n+\n+Index templates are applied during data stream or index creation. \n+For data streams, these settings and mappings are applied when the stream's backing indices are created.\n+\n+Settings and mappings specified in a <<indices-create-index, create index>>\n+request override any settings or mappings specified in an index template.\n+\n+Changes to index templates do not affect\n+existing indices, including the existing backing indices of a data stream.\n+\n+===== Comments in index templates\n+You can use C-style /* */ block comments in index templates. You can include comments anywhere in\n+the request body, except before the opening curly bracket.\n+\n+[[put-index-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index-template>`::\n+(Required, string)\n+Name of the index template to create.\n+\n+\n+[[put-index-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing index templates. Defaults to `false`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+\n+[[put-index-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`index_patterns`::\n+(Required, array of strings)\n+Array of wildcard (`*`) expressions\n+used to match the names of data streams and indices during creation.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+[xpack]#`data_stream`#::\n+(Optional, object)\n+Indicates whether the template is used to create data streams and their backing\n+indices. If so, use an empty object as the argument: +\n+`data_stream: { }`.\n++\n+Data streams require a matching index template with a `data_stream` object.\n+See <<create-a-data-stream-template>>.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`template`::\n+(Optional, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+`composed_of`::\n+(Optional, array of strings)\n+An ordered list of component template names. Component templates are merged in the order\n+specified, meaning that the last component template specified has the highest precedence. See\n+<<multiple-component-templates,Composing multiple component templates>> for an example.\n+\n+`priority`::\n+(Optional, integer)\n+Priority to determine index template precedence when a new data stream or index is created. The index template with\n+the highest priority is chosen. If no priority is specified the template is treated as though it is\n+of priority 0 (lowest priority).\n+This number is not automatically generated by {es}.\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage index templates externally.\n+This number is not automatically generated by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the index template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-index-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Index template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in an index template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+\n+[[multiple-templates]]\n+===== Indices matching multiple templates\n+\n+When an index is created that matches multiple index templates, only the index template with the\n+highest priority is applied. For example:", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5ODk1MA==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458898950", "bodyText": "nit\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            user-defined map that can contain any data. This data will be stored in the cluster state however,\n          \n          \n            \n            user-defined object that can contain any data. This data will be stored in the cluster state however,", "author": "jrodewig", "createdAt": "2020-07-22T15:54:47Z", "path": "docs/reference/indices/put-index-template.asciidoc", "diffHunk": "@@ -0,0 +1,335 @@\n+[[indices-put-template]]\n+=== Put index template API\n+++++\n+<titleabbrev>Put index template</titleabbrev>\n+++++\n+\n+Creates or updates an index template.\n+Index templates define <<index-modules-settings,settings>>, <<mapping,mappings>>, \n+and <<indices-aliases,aliases>> that can be applied automatically to new indices. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _index_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-index-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_index_template/<index-template>`\n+\n+\n+[[put-index-template-api-desc]]\n+==== {api-description-title}\n+\n+{es} applies templates to new indices based on an\n+index pattern that matches the index name.\n+\n+Index templates are applied during data stream or index creation. \n+For data streams, these settings and mappings are applied when the stream's backing indices are created.\n+\n+Settings and mappings specified in a <<indices-create-index, create index>>\n+request override any settings or mappings specified in an index template.\n+\n+Changes to index templates do not affect\n+existing indices, including the existing backing indices of a data stream.\n+\n+===== Comments in index templates\n+You can use C-style /* */ block comments in index templates. You can include comments anywhere in\n+the request body, except before the opening curly bracket.\n+\n+[[put-index-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index-template>`::\n+(Required, string)\n+Name of the index template to create.\n+\n+\n+[[put-index-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing index templates. Defaults to `false`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+\n+[[put-index-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`index_patterns`::\n+(Required, array of strings)\n+Array of wildcard (`*`) expressions\n+used to match the names of data streams and indices during creation.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+[xpack]#`data_stream`#::\n+(Optional, object)\n+Indicates whether the template is used to create data streams and their backing\n+indices. If so, use an empty object as the argument: +\n+`data_stream: { }`.\n++\n+Data streams require a matching index template with a `data_stream` object.\n+See <<create-a-data-stream-template>>.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`template`::\n+(Optional, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+`composed_of`::\n+(Optional, array of strings)\n+An ordered list of component template names. Component templates are merged in the order\n+specified, meaning that the last component template specified has the highest precedence. See\n+<<multiple-component-templates,Composing multiple component templates>> for an example.\n+\n+`priority`::\n+(Optional, integer)\n+Priority to determine index template precedence when a new data stream or index is created. The index template with\n+the highest priority is chosen. If no priority is specified the template is treated as though it is\n+of priority 0 (lowest priority).\n+This number is not automatically generated by {es}.\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage index templates externally.\n+This number is not automatically generated by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the index template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-index-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Index template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in an index template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+\n+[[multiple-templates]]\n+===== Indices matching multiple templates\n+\n+When an index is created that matches multiple index templates, only the index template with the\n+highest priority is applied. For example:\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"t*\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 1,\n+      \"number_of_replicas\": 0\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : false }\n+    }\n+  }\n+}\n+\n+PUT /_index_template/template_2\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : true }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+For indices that start with `te*`, `_source` will enabled, and the index will have two primary\n+shards and one replica, because only `template_2` will be applied.\n+\n+NOTE: Multiple templates with overlapping index patterns at the same priority are not allowed, and\n+an error will be thrown when attempting to create a template matching an existing index template at\n+identical priorities.\n+\n+\n+[[versioning-templates]]\n+===== Template versioning\n+\n+You can use the `version` parameter to add an optional version number to an index template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"foo\", \"bar\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<indices-get-template, get index template>> API.\n+\n+[[template-metadata]]\n+===== Template metadata\n+\n+You can use the `_meta` parameter to add optional metadata to an index template. This is a\n+user-defined map that can contain any data. This data will be stored in the cluster state however,", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5OTQyNw==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458899427", "bodyText": "Nit: This sorta implies that the template is only used to create the data stream. But it's also used to create its backing indices later. This is more general but maybe more accurate?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If an index template should create data streams, the template must include an\n          \n          \n            \n            If an index template is used for data streams, the template must include an", "author": "jrodewig", "createdAt": "2020-07-22T15:55:29Z", "path": "docs/reference/indices/put-index-template.asciidoc", "diffHunk": "@@ -0,0 +1,335 @@\n+[[indices-put-template]]\n+=== Put index template API\n+++++\n+<titleabbrev>Put index template</titleabbrev>\n+++++\n+\n+Creates or updates an index template.\n+Index templates define <<index-modules-settings,settings>>, <<mapping,mappings>>, \n+and <<indices-aliases,aliases>> that can be applied automatically to new indices. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _index_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-index-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_index_template/<index-template>`\n+\n+\n+[[put-index-template-api-desc]]\n+==== {api-description-title}\n+\n+{es} applies templates to new indices based on an\n+index pattern that matches the index name.\n+\n+Index templates are applied during data stream or index creation. \n+For data streams, these settings and mappings are applied when the stream's backing indices are created.\n+\n+Settings and mappings specified in a <<indices-create-index, create index>>\n+request override any settings or mappings specified in an index template.\n+\n+Changes to index templates do not affect\n+existing indices, including the existing backing indices of a data stream.\n+\n+===== Comments in index templates\n+You can use C-style /* */ block comments in index templates. You can include comments anywhere in\n+the request body, except before the opening curly bracket.\n+\n+[[put-index-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index-template>`::\n+(Required, string)\n+Name of the index template to create.\n+\n+\n+[[put-index-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing index templates. Defaults to `false`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+\n+[[put-index-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`index_patterns`::\n+(Required, array of strings)\n+Array of wildcard (`*`) expressions\n+used to match the names of data streams and indices during creation.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+[xpack]#`data_stream`#::\n+(Optional, object)\n+Indicates whether the template is used to create data streams and their backing\n+indices. If so, use an empty object as the argument: +\n+`data_stream: { }`.\n++\n+Data streams require a matching index template with a `data_stream` object.\n+See <<create-a-data-stream-template>>.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`template`::\n+(Optional, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+`composed_of`::\n+(Optional, array of strings)\n+An ordered list of component template names. Component templates are merged in the order\n+specified, meaning that the last component template specified has the highest precedence. See\n+<<multiple-component-templates,Composing multiple component templates>> for an example.\n+\n+`priority`::\n+(Optional, integer)\n+Priority to determine index template precedence when a new data stream or index is created. The index template with\n+the highest priority is chosen. If no priority is specified the template is treated as though it is\n+of priority 0 (lowest priority).\n+This number is not automatically generated by {es}.\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage index templates externally.\n+This number is not automatically generated by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the index template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-index-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Index template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in an index template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+\n+[[multiple-templates]]\n+===== Indices matching multiple templates\n+\n+When an index is created that matches multiple index templates, only the index template with the\n+highest priority is applied. For example:\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"t*\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 1,\n+      \"number_of_replicas\": 0\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : false }\n+    }\n+  }\n+}\n+\n+PUT /_index_template/template_2\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : true }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+For indices that start with `te*`, `_source` will enabled, and the index will have two primary\n+shards and one replica, because only `template_2` will be applied.\n+\n+NOTE: Multiple templates with overlapping index patterns at the same priority are not allowed, and\n+an error will be thrown when attempting to create a template matching an existing index template at\n+identical priorities.\n+\n+\n+[[versioning-templates]]\n+===== Template versioning\n+\n+You can use the `version` parameter to add an optional version number to an index template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"foo\", \"bar\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<indices-get-template, get index template>> API.\n+\n+[[template-metadata]]\n+===== Template metadata\n+\n+You can use the `_meta` parameter to add optional metadata to an index template. This is a\n+user-defined map that can contain any data. This data will be stored in the cluster state however,\n+so keeping it short is preferrable.\n+\n+The `_meta` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset `_meta`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\": [\"foo\", \"bar\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 3\n+    }\n+  },\n+  \"_meta\": {\n+    \"description\": \"set number of shards to three\",\n+    \"serialization\": {\n+      \"class\": \"MyIndexTemplate\",\n+      \"id\": 17\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+To check the `_meta`, you can use the <<indices-get-template, get index template>> API.\n+\n+[[data-stream-definition]]\n+===== Data stream definition\n+\n+If an index template should create data streams, the template must include an", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg5OTY0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/59737#discussion_r458899649", "bodyText": "It may be helpful to mention that these index templates cannot be used for regular indices.", "author": "jrodewig", "createdAt": "2020-07-22T15:55:49Z", "path": "docs/reference/indices/put-index-template.asciidoc", "diffHunk": "@@ -0,0 +1,335 @@\n+[[indices-put-template]]\n+=== Put index template API\n+++++\n+<titleabbrev>Put index template</titleabbrev>\n+++++\n+\n+Creates or updates an index template.\n+Index templates define <<index-modules-settings,settings>>, <<mapping,mappings>>, \n+and <<indices-aliases,aliases>> that can be applied automatically to new indices. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    }\n+  }\n+}\n+--------------------------------------------------\n+// TESTSETUP\n+\n+//////////////////////////\n+\n+[source,console]\n+--------------------------------------------------\n+DELETE _index_template/template_*\n+--------------------------------------------------\n+// TEARDOWN\n+\n+//////////////////////////\n+\n+[[put-index-template-api-request]]\n+==== {api-request-title}\n+\n+`PUT /_index_template/<index-template>`\n+\n+\n+[[put-index-template-api-desc]]\n+==== {api-description-title}\n+\n+{es} applies templates to new indices based on an\n+index pattern that matches the index name.\n+\n+Index templates are applied during data stream or index creation. \n+For data streams, these settings and mappings are applied when the stream's backing indices are created.\n+\n+Settings and mappings specified in a <<indices-create-index, create index>>\n+request override any settings or mappings specified in an index template.\n+\n+Changes to index templates do not affect\n+existing indices, including the existing backing indices of a data stream.\n+\n+===== Comments in index templates\n+You can use C-style /* */ block comments in index templates. You can include comments anywhere in\n+the request body, except before the opening curly bracket.\n+\n+[[put-index-template-api-path-params]]\n+==== {api-path-parms-title}\n+\n+`<index-template>`::\n+(Required, string)\n+Name of the index template to create.\n+\n+\n+[[put-index-template-api-query-params]]\n+==== {api-query-parms-title}\n+\n+`create`::\n+(Optional, boolean)\n+If `true`, this request cannot replace or update existing index templates. Defaults to `false`.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=master-timeout]\n+\n+\n+[[put-index-template-api-request-body]]\n+==== {api-request-body-title}\n+\n+`index_patterns`::\n+(Required, array of strings)\n+Array of wildcard (`*`) expressions\n+used to match the names of data streams and indices during creation.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=aliases]\n++\n+NOTE: You cannot add data streams to an index alias.\n+\n+[xpack]#`data_stream`#::\n+(Optional, object)\n+Indicates whether the template is used to create data streams and their backing\n+indices. If so, use an empty object as the argument: +\n+`data_stream: { }`.\n++\n+Data streams require a matching index template with a `data_stream` object.\n+See <<create-a-data-stream-template>>.\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=mappings]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=settings]\n+\n+`template`::\n+(Optional, object)\n+This is the template to be applied, may optionally include a `mappings`,\n+`settings`, or `aliases` configuration.\n+\n+`composed_of`::\n+(Optional, array of strings)\n+An ordered list of component template names. Component templates are merged in the order\n+specified, meaning that the last component template specified has the highest precedence. See\n+<<multiple-component-templates,Composing multiple component templates>> for an example.\n+\n+`priority`::\n+(Optional, integer)\n+Priority to determine index template precedence when a new data stream or index is created. The index template with\n+the highest priority is chosen. If no priority is specified the template is treated as though it is\n+of priority 0 (lowest priority).\n+This number is not automatically generated by {es}.\n+\n+`version`::\n+(Optional, integer)\n+Version number used to manage index templates externally.\n+This number is not automatically generated by {es}.\n+\n+`_meta`::\n+(Optional, object)\n+Optional user metadata about the index template. May have any contents.\n+This map is not automatically generated by {es}.\n+\n+[[put-index-template-api-example]]\n+==== {api-examples-title}\n+\n+===== Index template with index aliases\n+\n+You can include <<indices-aliases,index aliases>> in an index template.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _index_template/template_1\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    },\n+    \"aliases\" : {\n+        \"alias1\" : {},\n+        \"alias2\" : {\n+            \"filter\" : {\n+                \"term\" : {\"user\" : \"kimchy\" }\n+            },\n+            \"routing\" : \"kimchy\"\n+        },\n+        \"{index}-alias\" : {} <1>\n+    }\n+  }\n+}\n+--------------------------------------------------\n+<1> the `{index}` placeholder in the alias name will be replaced with the\n+actual index name that the template gets applied to, during index creation.\n+\n+\n+[[multiple-templates]]\n+===== Indices matching multiple templates\n+\n+When an index is created that matches multiple index templates, only the index template with the\n+highest priority is applied. For example:\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"t*\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 1,\n+      \"number_of_replicas\": 0\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : false }\n+    }\n+  }\n+}\n+\n+PUT /_index_template/template_2\n+{\n+  \"index_patterns\" : [\"te*\"],\n+  \"priority\" : 1,\n+  \"template\": {\n+    \"settings\" : {\n+      \"number_of_shards\" : 2\n+    },\n+    \"mappings\" : {\n+      \"_source\" : { \"enabled\" : true }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+For indices that start with `te*`, `_source` will enabled, and the index will have two primary\n+shards and one replica, because only `template_2` will be applied.\n+\n+NOTE: Multiple templates with overlapping index patterns at the same priority are not allowed, and\n+an error will be thrown when attempting to create a template matching an existing index template at\n+identical priorities.\n+\n+\n+[[versioning-templates]]\n+===== Template versioning\n+\n+You can use the `version` parameter to add an optional version number to an index template. External\n+systems can use these version numbers to simplify template management.\n+\n+The `version` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset a `version`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\" : [\"foo\", \"bar\"],\n+  \"priority\" : 0,\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 1\n+    }\n+  },\n+  \"version\": 123\n+}\n+--------------------------------------------------\n+\n+To check the `version`, you can use the <<indices-get-template, get index template>> API.\n+\n+[[template-metadata]]\n+===== Template metadata\n+\n+You can use the `_meta` parameter to add optional metadata to an index template. This is a\n+user-defined map that can contain any data. This data will be stored in the cluster state however,\n+so keeping it short is preferrable.\n+\n+The `_meta` parameter is completely optional and not automatically generated by {es}.\n+\n+To unset `_meta`, replace the template without specifying one.\n+\n+[source,console]\n+--------------------------------------------------\n+PUT /_index_template/template_1\n+{\n+  \"index_patterns\": [\"foo\", \"bar\"],\n+  \"template\": {\n+    \"settings\" : {\n+        \"number_of_shards\" : 3\n+    }\n+  },\n+  \"_meta\": {\n+    \"description\": \"set number of shards to three\",\n+    \"serialization\": {\n+      \"class\": \"MyIndexTemplate\",\n+      \"id\": 17\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+To check the `_meta`, you can use the <<indices-get-template, get index template>> API.\n+\n+[[data-stream-definition]]\n+===== Data stream definition\n+\n+If an index template should create data streams, the template must include an\n+empty `data_stream` object. See <<create-a-data-stream-template>>.", "originalCommit": "1b2939c1aed7c07de64e70a4dcb31affce012320", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "41fa419efddef88537a40babc5482763fe13d0e9", "url": "https://github.com/elastic/elasticsearch/commit/41fa419efddef88537a40babc5482763fe13d0e9", "message": "[DOCS] Refactored index-templates topic.", "committedDate": "2020-07-23T01:03:48Z", "type": "commit"}, {"oid": "b569d43ef8a45f9f21b6a73553633423d5e8bed1", "url": "https://github.com/elastic/elasticsearch/commit/b569d43ef8a45f9f21b6a73553633423d5e8bed1", "message": "[DOCS] Add separate files.", "committedDate": "2020-07-23T01:03:48Z", "type": "commit"}, {"oid": "4b06620cc2bac25b02131c7fda75e9a95159a44f", "url": "https://github.com/elastic/elasticsearch/commit/4b06620cc2bac25b02131c7fda75e9a95159a44f", "message": "[DOCS] Add delete component template.", "committedDate": "2020-07-23T01:03:48Z", "type": "commit"}, {"oid": "d184f38b8ac7723a6447a165cbe9d2c07bc1a643", "url": "https://github.com/elastic/elasticsearch/commit/d184f38b8ac7723a6447a165cbe9d2c07bc1a643", "message": "Updated xref", "committedDate": "2020-07-23T01:03:48Z", "type": "commit"}, {"oid": "a02b33df78baa94e2129d97a791c819f17b9227d", "url": "https://github.com/elastic/elasticsearch/commit/a02b33df78baa94e2129d97a791c819f17b9227d", "message": "Flag legacy APIs in TOC", "committedDate": "2020-07-23T01:03:49Z", "type": "commit"}, {"oid": "2f921cfd558b8ee7a34a811832212e414c23890e", "url": "https://github.com/elastic/elasticsearch/commit/2f921cfd558b8ee7a34a811832212e414c23890e", "message": "Apply suggestions from code review\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-07-23T01:03:49Z", "type": "commit"}, {"oid": "c74d88ddabf4c68c998945e6242c537c56a16a44", "url": "https://github.com/elastic/elasticsearch/commit/c74d88ddabf4c68c998945e6242c537c56a16a44", "message": "[DOCS] Incorporated review commnents", "committedDate": "2020-07-23T01:05:02Z", "type": "commit"}, {"oid": "c74d88ddabf4c68c998945e6242c537c56a16a44", "url": "https://github.com/elastic/elasticsearch/commit/c74d88ddabf4c68c998945e6242c537c56a16a44", "message": "[DOCS] Incorporated review commnents", "committedDate": "2020-07-23T01:05:02Z", "type": "forcePushed"}, {"oid": "dc2d239f6d50df722274c8cf314942bcfaeb8917", "url": "https://github.com/elastic/elasticsearch/commit/dc2d239f6d50df722274c8cf314942bcfaeb8917", "message": "Fixed dupes", "committedDate": "2020-07-23T01:19:53Z", "type": "commit"}, {"oid": "cf7c260a0d4f13b8ba5641629d572f07502a61ed", "url": "https://github.com/elastic/elasticsearch/commit/cf7c260a0d4f13b8ba5641629d572f07502a61ed", "message": "Fix xrefs", "committedDate": "2020-07-23T01:33:28Z", "type": "commit"}, {"oid": "7f2a8b181fb3a81203843d35b819c1dd1bf35ddb", "url": "https://github.com/elastic/elasticsearch/commit/7f2a8b181fb3a81203843d35b819c1dd1bf35ddb", "message": "fix", "committedDate": "2020-07-23T01:45:41Z", "type": "commit"}, {"oid": "dcabac9b8bdf9873e16321f1930180b9c6594826", "url": "https://github.com/elastic/elasticsearch/commit/dcabac9b8bdf9873e16321f1930180b9c6594826", "message": "fix xref", "committedDate": "2020-07-23T02:05:10Z", "type": "commit"}, {"oid": "b2fd69f9ccad73be5ada5a8490364a2875da8d0f", "url": "https://github.com/elastic/elasticsearch/commit/b2fd69f9ccad73be5ada5a8490364a2875da8d0f", "message": "Merge branch 'master' into component-templates", "committedDate": "2020-07-23T23:43:49Z", "type": "commit"}, {"oid": "1cd9ad79d225bca766c78f850c60fcae9eb6932c", "url": "https://github.com/elastic/elasticsearch/commit/1cd9ad79d225bca766c78f850c60fcae9eb6932c", "message": "Fix test", "committedDate": "2020-07-24T00:15:53Z", "type": "commit"}, {"oid": "11f0864d9f3d9d94a3a14cff2d9fbb9eed8494f4", "url": "https://github.com/elastic/elasticsearch/commit/11f0864d9f3d9d94a3a14cff2d9fbb9eed8494f4", "message": "fix", "committedDate": "2020-07-24T01:33:20Z", "type": "commit"}]}