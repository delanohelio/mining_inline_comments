{"pr_number": 56340, "pr_title": "[DOCS] Add release notes for 7.8.0", "pr_createdAt": "2020-05-07T13:04:18Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56340", "timeline": [{"oid": "79bd0381d050bbc85a6741fb88fb4561272009b4", "url": "https://github.com/elastic/elasticsearch/commit/79bd0381d050bbc85a6741fb88fb4561272009b4", "message": "First draft of 7.8 release notes", "committedDate": "2020-05-07T10:18:53Z", "type": "commit"}, {"oid": "5cc853ed02c9c02f09dacc626097030e0857949e", "url": "https://github.com/elastic/elasticsearch/commit/5cc853ed02c9c02f09dacc626097030e0857949e", "message": "Teach es_release_notes.pl to ignore PR title prefixes", "committedDate": "2020-05-07T10:19:28Z", "type": "commit"}, {"oid": "fb502431340ebccb4b667b0c66f0ffb3b2be275b", "url": "https://github.com/elastic/elasticsearch/commit/fb502431340ebccb4b667b0c66f0ffb3b2be275b", "message": "Remove closed PR", "committedDate": "2020-05-07T14:09:02Z", "type": "commit"}, {"oid": "63efb83745ee4976a9bb5b2c66fd5f4ceb564c10", "url": "https://github.com/elastic/elasticsearch/commit/63efb83745ee4976a9bb5b2c66fd5f4ceb564c10", "message": "Updates to 7.8 release notes", "committedDate": "2020-05-11T13:31:08Z", "type": "commit"}, {"oid": "1ff70cc9b25c7d7017458117da2a707f55a2fb51", "url": "https://github.com/elastic/elasticsearch/commit/1ff70cc9b25c7d7017458117da2a707f55a2fb51", "message": "Merge remote-tracking branch 'upstream/7.8' into 7-8-release-notes", "committedDate": "2020-05-11T13:31:20Z", "type": "commit"}, {"oid": "da3cde60aa7d92c545979635d936ad227fa60d86", "url": "https://github.com/elastic/elasticsearch/commit/da3cde60aa7d92c545979635d936ad227fa60d86", "message": "Work-in-progress release highlights for 7.8", "committedDate": "2020-05-11T15:37:07Z", "type": "commit"}, {"oid": "3a5c0723a1fa46d6b43286bae5db00f438860e01", "url": "https://github.com/elastic/elasticsearch/commit/3a5c0723a1fa46d6b43286bae5db00f438860e01", "message": "Improve release highlights for 7.8.0", "committedDate": "2020-05-12T13:52:42Z", "type": "commit"}, {"oid": "e57ff0142e413fc8fc16f9703747e67832cdf15a", "url": "https://github.com/elastic/elasticsearch/commit/e57ff0142e413fc8fc16f9703747e67832cdf15a", "message": "Merge remote-tracking branch 'upstream/7.8' into 7-8-release-notes", "committedDate": "2020-05-12T13:53:33Z", "type": "commit"}, {"oid": "80d820ea9ba7da40ed28df16ec7f0d877815bfc8", "url": "https://github.com/elastic/elasticsearch/commit/80d820ea9ba7da40ed28df16ec7f0d877815bfc8", "message": "Remove open marker from closed PR", "committedDate": "2020-05-12T14:23:45Z", "type": "commit"}, {"oid": "53c2a450ff162da1cebf73879c307b9b26ae6383", "url": "https://github.com/elastic/elasticsearch/commit/53c2a450ff162da1cebf73879c307b9b26ae6383", "message": "Merge remote-tracking branch 'upstream/7.8' into 7-8-release-notes", "committedDate": "2020-05-14T13:12:19Z", "type": "commit"}, {"oid": "a99763ac75f8452d84aa5151ac120bdbd555a015", "url": "https://github.com/elastic/elasticsearch/commit/a99763ac75f8452d84aa5151ac120bdbd555a015", "message": "Add new issues and remove backported issues frm 7.8 notes", "committedDate": "2020-05-14T14:03:09Z", "type": "commit"}, {"oid": "43e203b2cc8bb2d9325b17864f08290d2e30061a", "url": "https://github.com/elastic/elasticsearch/commit/43e203b2cc8bb2d9325b17864f08290d2e30061a", "message": "Better PR filtering for release notes\n\nWhen generating the ES releases notes, automatically skip any PRs that\nhave a version label for a released version in the same major series.", "committedDate": "2020-05-14T15:56:27Z", "type": "commit"}, {"oid": "e1d4900d91b8ae9d800660aa54df931473524164", "url": "https://github.com/elastic/elasticsearch/commit/e1d4900d91b8ae9d800660aa54df931473524164", "message": "Improve strategy for omitting PRs, update 7.8 notes", "committedDate": "2020-05-15T14:16:39Z", "type": "commit"}, {"oid": "69f7abc2b90f2550d3334b6ec86fe8d0da11b7d7", "url": "https://github.com/elastic/elasticsearch/commit/69f7abc2b90f2550d3334b6ec86fe8d0da11b7d7", "message": "Merge remote-tracking branch 'upstream/7.8' into 7-8-release-notes", "committedDate": "2020-06-05T10:27:15Z", "type": "commit"}, {"oid": "d0a75e721dfc0a297997b1a44f6a809ab9069e28", "url": "https://github.com/elastic/elasticsearch/commit/d0a75e721dfc0a297997b1a44f6a809ab9069e28", "message": "Merge remote-tracking branch 'upstream/7.8' into 7-8-release-notes", "committedDate": "2020-06-10T11:55:15Z", "type": "commit"}, {"oid": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "url": "https://github.com/elastic/elasticsearch/commit/0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "message": "Updates", "committedDate": "2020-06-10T12:22:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NDM5MQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438084391", "bodyText": "These sections are reused in our Stack documentation, which is a separate book. To make the reuse work, we have to use the external link syntax rather than internal xrefs.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n          \n          \n            \n            {ref}/search-aggregations-metrics-geobounds-aggregation.html[Geo Bounds Aggregations].", "author": "jrodewig", "createdAt": "2020-06-10T12:31:28Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NDY1OA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438084658", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n          \n          \n            \n            - {ref}/search-aggregations-bucket-geohashgrid-aggregation.html[GeoHash grid aggregations]", "author": "jrodewig", "createdAt": "2020-06-10T12:31:55Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NTA0OA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438085048", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n          \n          \n            \n            and {ref}/search-aggregations-bucket-geotilegrid-aggregation.html[map tile grid aggregations]", "author": "jrodewig", "createdAt": "2020-06-10T12:32:45Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NTU2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438085565", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n          \n          \n            \n            - {ref}/search-aggregations-metrics-geocentroid-aggregation.html[Geo centroid aggregations]", "author": "jrodewig", "createdAt": "2020-06-10T12:33:44Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NTg5MA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438085890", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n          \n          \n            \n            {ref}//search-aggregations-metrics-ttest-aggregation.html[T-Test Aggregation].", "author": "jrodewig", "createdAt": "2020-06-10T12:34:25Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NjE5MA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438086190", "bodyText": "Fixes link. Also removes double space between sentences.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n          \n          \n            \n            via the {ref{/cluster-nodes-usage.html[node features API]. This is broken down per", "author": "jrodewig", "createdAt": "2020-06-10T12:35:00Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NjU5NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438086594", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When the `value_count` aggregation is computed on <<histogram,histogram\n          \n          \n            \n            fields>>, the result of the aggregation is the sum of all numbers in the\n          \n          \n            \n            When the `value_count` aggregation is computed on {ref}/histogram.html[histogram\n          \n          \n            \n            fields], the result of the aggregation is the sum of all numbers in the", "author": "jrodewig", "createdAt": "2020-06-10T12:35:41Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.\n+\n+\n+// end::notable-highlights[]\n+\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Support `value_count` and `avg` aggregations over histogram fields\n+\n+{es} now implements `value_count` and `avg` aggregations over histogram\n+fields.\n+\n+When the `value_count` aggregation is computed on <<histogram,histogram\n+fields>>, the result of the aggregation is the sum of all numbers in the", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA4NjkzMg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438086932", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            See the <<put-transform,Create transform API>>.\n          \n          \n            \n            See the {ref}//put-transform.html[Create transform API].", "author": "jrodewig", "createdAt": "2020-06-10T12:36:17Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.\n+\n+\n+// end::notable-highlights[]\n+\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Support `value_count` and `avg` aggregations over histogram fields\n+\n+{es} now implements `value_count` and `avg` aggregations over histogram\n+fields.\n+\n+When the `value_count` aggregation is computed on <<histogram,histogram\n+fields>>, the result of the aggregation is the sum of all numbers in the\n+`counts` array of the histogram.\n+\n+When the average is computed on histogram fields, the result of the\n+aggregation is the weighted average of all elements in the `values` array\n+taking into consideration the number in the same position in the `counts`\n+array.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Reduce aggregation memory consumption\n+\n+{es} now attempts to save memory on the coordinating node by delaying\n+deserialization of the shard results for an aggregation until the last\n+second. This is helpful as it makes the shard-aggregations results \"short\n+lived\" garbage. It also should shrink the memory usage of aggregations when\n+they are \"waiting\" to be merged.\n+\n+Additionally, when the search is in \"batched reduce mode\", {es} will force\n+the results to be serialized between batch reduces in an attempt to keep\n+the memory usage as low as possible between reductions.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Scalar functions now supported inside SQL aggregations\n+\n+When querying {es} using SQL, it is now possible to use scalar functions\n+inside aggregations. This allows for more complex expressions, including\n+within `GROUP BY` or `HAVING` clauses. For example:\n+\n+[source, sql]\n+----\n+SELECT\n+  MAX(CASE WHEN a IS NULL then -1 ELSE abs(a * 10) + 1 END) AS max,\n+  b\n+FROM test\n+GROUP BY b\n+HAVING\n+  MAX(CASE WHEN a IS NULL then -1 ELSE abs(a * 10) + 1 END) > 5\n+----\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add configurable transform throttling\n+\n+Running transforms can increase load on the cluster. This can have a\n+detrimental affect on a cluster, especially in batch mode and for the first\n+checkpoint of a continuous transform. Transforms now support the optional\n+`docs_per_second` throttling configuration setting, similar to reindex.\n+See the <<put-transform,Create transform API>>.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5MDgzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438090839", "bodyText": "When breaking changes are listed in release notes, we typically just include the PR title and a link to the PR. Longer descriptions of the breaking changes are reserved for the breaking changes page.\nI'm not sure why a longer description was used here. I'd migrate this text to the breaking changes page and update this item accordingly.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Scripts used in `value_count` will now receive a number if they are counting\n          \n          \n            \n              a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n          \n          \n            \n              They used to always receive the `String` representation of those values.\n          \n          \n            \n              {pull}54854[#54854]\n          \n          \n            \n            * `value_count` aggregation optimization {pull}54854[#54854]", "author": "jrodewig", "createdAt": "2020-06-10T12:43:00Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5MTc3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438091775", "bodyText": "I'd move this text to the breaking changes page page and use the PR title.\nWe also only use a single space between sentences.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * The privilege named `indices:admin/create` will no longer allow the auto\n          \n          \n            \n              creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n          \n          \n            \n            * Add auto create action {pull}55858[#55858]", "author": "jrodewig", "createdAt": "2020-06-10T12:44:33Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5MjUxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438092515", "bodyText": "Adding literals here so it doesn't look like we failed to capitalize Kibana.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n          \n          \n            \n            * Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]", "author": "jrodewig", "createdAt": "2020-06-10T12:45:32Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5NDI2NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438094264", "bodyText": "I wouldn't add external links here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n          \n          \n            \n            * Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])", "author": "jrodewig", "createdAt": "2020-06-10T12:48:21Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5NDg0Mw==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438094843", "bodyText": "Fix capitalization.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n          \n          \n            \n            * Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])", "author": "jrodewig", "createdAt": "2020-06-10T12:49:17Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5NjIwNg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438096206", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add new point field. {pull}53804[#53804]\n          \n          \n            \n            * Add new point field {pull}53804[#53804]", "author": "jrodewig", "createdAt": "2020-06-10T12:51:24Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5NzA1NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438097054", "bodyText": "Nit: We probably shouldn't use periods in the original PR title.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n          \n          \n            \n            * Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])", "author": "jrodewig", "createdAt": "2020-06-10T12:52:37Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA5NzEzNg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438097136", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n          \n          \n            \n            * Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])", "author": "jrodewig", "createdAt": "2020-06-10T12:52:45Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwMDM4NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438100384", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n          \n          \n            \n            * Rewrite wrapper queries to match_none if possible {pull}55271[#55271]", "author": "jrodewig", "createdAt": "2020-06-10T12:57:46Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwNDQzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438104435", "bodyText": "This one still has the backport pending label and doesn't appear to be backported to 7.8:\n#52208 (comment)\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])", "author": "jrodewig", "createdAt": "2020-06-10T13:03:42Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwNTkzNw==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438105937", "bodyText": "This PR was closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Infra/Plugins::\n          \n          \n            \n            * Switch role pluggability to use SPI {pull}54370[#54370]", "author": "jrodewig", "createdAt": "2020-06-10T13:05:57Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEwODQ2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438108465", "bodyText": "Closed but not merged.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])", "author": "jrodewig", "createdAt": "2020-06-10T13:09:56Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMDAxNw==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438110017", "bodyText": "Fixes capitalization from original PR title.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n          \n          \n            \n            * Allow bulk snapshot deletes to abort {pull}56009[#56009] (issue: {issue}55773[#55773])", "author": "jrodewig", "createdAt": "2020-06-10T13:12:16Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMDMwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438110309", "bodyText": "Capitalization fixes\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]\n          \n          \n            \n            * Allow deleting multiple snapshots at once {pull}55474[#55474]", "author": "jrodewig", "createdAt": "2020-06-10T13:12:45Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMTc4NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438111784", "bodyText": "Will defer to @lcawl  and @szabosteve  on this one.", "author": "jrodewig", "createdAt": "2020-06-10T13:15:03Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]\n+* Allow searching of snapshot taken while indexing {pull}55511[#55511] (issue: {issue}50999[#50999])\n+* Allow to prewarm the cache for searchable snapshot shards {pull}55322[#55322]\n+* Enable prewarming by default for searchable snapshots {pull}56201[#56201] (issue: {issue}55952[#55952])\n+* Permit searches to be concurrent to prewarming {pull}55795[#55795]\n+* Reduce contention in CacheFile.fileLock() method {pull}55662[#55662]\n+* Require soft deletes for searchable snapshots {pull}55453[#55453]\n+* Searchable Snapshots should respect max_restore_bytes_per_sec {pull}55952[#55952]\n+* Update the HDFS version used by HDFS Repo {pull}53693[#53693]\n+* Use streaming reads for GCS {pull}55506[#55506] (issue: {issue}55505[#55505])\n+* Use workers to warm cache parts {pull}55793[#55793] (issue: {issue}55322[#55322])\n+\n+Task Management::\n+* Add indexName in update-settings task name {pull}55714[#55714]\n+* Add scroll info to search task description {pull}54606[#54606]\n+* Broadcast cancellation to only nodes have outstanding child tasks {pull}54312[#54312] (issues: {issue}50990[#50990], {issue}51157[#51157])\n+* Support hierarchical task cancellation {pull}54757[#54757] (issue: {issue}50990[#50990])\n+\n+Transform::\n+* Add throttling {pull}56007[#56007] (issue: {issue}54862[#54862])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3MjA4OA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438672088", "bodyText": "LGTM.", "author": "szabosteve", "createdAt": "2020-06-11T09:52:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMTc4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMjAwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438112009", "bodyText": "@lcawl  @szabosteve You mind taking a look at these?", "author": "jrodewig", "createdAt": "2020-06-10T13:15:17Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExMzM4NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438113384", "bodyText": "Capitalization fix\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix scripted metric in ccs {pull}54776[#54776] (issue: {issue}54758[#54758])\n          \n          \n            \n            * Fix scripted metric in CCS {pull}54776[#54776] (issue: {issue}54758[#54758])", "author": "jrodewig", "createdAt": "2020-06-10T13:17:13Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]\n+* Allow searching of snapshot taken while indexing {pull}55511[#55511] (issue: {issue}50999[#50999])\n+* Allow to prewarm the cache for searchable snapshot shards {pull}55322[#55322]\n+* Enable prewarming by default for searchable snapshots {pull}56201[#56201] (issue: {issue}55952[#55952])\n+* Permit searches to be concurrent to prewarming {pull}55795[#55795]\n+* Reduce contention in CacheFile.fileLock() method {pull}55662[#55662]\n+* Require soft deletes for searchable snapshots {pull}55453[#55453]\n+* Searchable Snapshots should respect max_restore_bytes_per_sec {pull}55952[#55952]\n+* Update the HDFS version used by HDFS Repo {pull}53693[#53693]\n+* Use streaming reads for GCS {pull}55506[#55506] (issue: {issue}55505[#55505])\n+* Use workers to warm cache parts {pull}55793[#55793] (issue: {issue}55322[#55322])\n+\n+Task Management::\n+* Add indexName in update-settings task name {pull}55714[#55714]\n+* Add scroll info to search task description {pull}54606[#54606]\n+* Broadcast cancellation to only nodes have outstanding child tasks {pull}54312[#54312] (issues: {issue}50990[#50990], {issue}51157[#51157])\n+* Support hierarchical task cancellation {pull}54757[#54757] (issue: {issue}50990[#50990])\n+\n+Transform::\n+* Add throttling {pull}56007[#56007] (issue: {issue}54862[#54862])\n+\n+\n+\n+[[bug-7.8.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Add analytics plugin usage stats to _xpack/usage {pull}54911[#54911] (issue: {issue}54847[#54847])\n+* Aggregation support for Value Scripts that change types {pull}54830[#54830] (issue: {issue}54655[#54655])\n+* Allow terms agg to default to depth first {pull}54845[#54845]\n+* Clean up how pipeline aggs check for multi-bucket {pull}54161[#54161] (issue: {issue}53215[#53215])\n+* Fix auto_date_histogram serialization bug {pull}54447[#54447] (issues: {issue}54382[#54382], {issue}54429[#54429])\n+* Fix error massage for unknown value type {pull}55821[#55821] (issue: {issue}55727[#55727])\n+* Fix scripted metric in ccs {pull}54776[#54776] (issue: {issue}54758[#54758])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNDU3NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438114574", "bodyText": "Assuming [OPEN] [ISSUE] is an internal note for later so I'll leave as-is.", "author": "jrodewig", "createdAt": "2020-06-10T13:18:59Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]\n+* Allow searching of snapshot taken while indexing {pull}55511[#55511] (issue: {issue}50999[#50999])\n+* Allow to prewarm the cache for searchable snapshot shards {pull}55322[#55322]\n+* Enable prewarming by default for searchable snapshots {pull}56201[#56201] (issue: {issue}55952[#55952])\n+* Permit searches to be concurrent to prewarming {pull}55795[#55795]\n+* Reduce contention in CacheFile.fileLock() method {pull}55662[#55662]\n+* Require soft deletes for searchable snapshots {pull}55453[#55453]\n+* Searchable Snapshots should respect max_restore_bytes_per_sec {pull}55952[#55952]\n+* Update the HDFS version used by HDFS Repo {pull}53693[#53693]\n+* Use streaming reads for GCS {pull}55506[#55506] (issue: {issue}55505[#55505])\n+* Use workers to warm cache parts {pull}55793[#55793] (issue: {issue}55322[#55322])\n+\n+Task Management::\n+* Add indexName in update-settings task name {pull}55714[#55714]\n+* Add scroll info to search task description {pull}54606[#54606]\n+* Broadcast cancellation to only nodes have outstanding child tasks {pull}54312[#54312] (issues: {issue}50990[#50990], {issue}51157[#51157])\n+* Support hierarchical task cancellation {pull}54757[#54757] (issue: {issue}50990[#50990])\n+\n+Transform::\n+* Add throttling {pull}56007[#56007] (issue: {issue}54862[#54862])\n+\n+\n+\n+[[bug-7.8.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Add analytics plugin usage stats to _xpack/usage {pull}54911[#54911] (issue: {issue}54847[#54847])\n+* Aggregation support for Value Scripts that change types {pull}54830[#54830] (issue: {issue}54655[#54655])\n+* Allow terms agg to default to depth first {pull}54845[#54845]\n+* Clean up how pipeline aggs check for multi-bucket {pull}54161[#54161] (issue: {issue}53215[#53215])\n+* Fix auto_date_histogram serialization bug {pull}54447[#54447] (issues: {issue}54382[#54382], {issue}54429[#54429])\n+* Fix error massage for unknown value type {pull}55821[#55821] (issue: {issue}55727[#55727])\n+* Fix scripted metric in ccs {pull}54776[#54776] (issue: {issue}54758[#54758])\n+* Use Decimal formatter for Numeric ValuesSourceTypes {pull}54366[#54366] (issue: {issue}54365[#54365])\n+\n+Allocation::\n+* Fix Broken ExistingStoreRecoverySource Deserialization {pull}55657[#55657] (issue: {issue}55513[#55513])\n+\n+\n+Authorization::\n+* Resolve anonymous roles and deduplicate roles during authentication {pull}53453[#53453] (issues: {issue}31589[#31589], {issue}47195[#47195])\n+\n+Features/ILM+SLM::\n+* ILM stop step execution if writeIndex is false {pull}54805[#54805]\n+\n+Features/Indices APIs::\n+* Fix NPE in MetadataIndexTemplateService#findV2Template {pull}54945[#54945]\n+* Fix creating filtered alias using now in a date_nanos range query failed {pull}54785[#54785] (issue: {issue}54315[#54315])\n+* Fix simulating index templates without specified index {pull}56295[#56295] (issues: {issue}53101[#53101], {issue}56255[#56255])\n+* Validate non-negative priorities for V2 index templates {pull}56139[#56139] (issue: {issue}53101[#53101])\n+\n+Features/Watcher::\n+* Ensure watcher email action message ids are always unique {pull}56574[#56574]\n+\n+Geo::\n+* ES crashes with OOM error when running fine-grained geotile_grid aggs on geo_shape [OPEN] [ISSUE] {pull}57847[#57847]\n+* Rasterization artefacts for geotile_grid and geo_centroid aggregations on geo_shape [OPEN] [ISSUE] {pull}57846[#57846]", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNTE0NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438115144", "bodyText": "@lcawl @szabosteve", "author": "jrodewig", "createdAt": "2020-06-10T13:19:50Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,302 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n-Search::\n+Aggregations::\n * Scripts used in `value_count` will now receive a number if they are counting\n   a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n   They used to always receive the `String` representation of those values.\n   {pull}54854[#54854]\n \n Features/Indices APIs::\n-*  The privilege named `indices:admin/create` will no longer allow the auto \n-   creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+* The privilege named `indices:admin/create` will no longer allow the auto\n+  creation of indices.  Use `create_index` instead. {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper. {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field. {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the kibana reserved user; introduce kibana_system user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test] aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to T-Test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field. {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+Infra/Plugins::\n+* Switch role pluggability to use SPI {pull}54370[#54370]\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Allow intervals to be passed as request parameters {pull}52273[#52273] (issue: {issue}45915[#45915])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n+Search::\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible. {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow Bulk Snapshot Deletes to Abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow Deleting Multiple Snapshots at Once {pull}55474[#55474]\n+* Allow searching of snapshot taken while indexing {pull}55511[#55511] (issue: {issue}50999[#50999])\n+* Allow to prewarm the cache for searchable snapshot shards {pull}55322[#55322]\n+* Enable prewarming by default for searchable snapshots {pull}56201[#56201] (issue: {issue}55952[#55952])\n+* Permit searches to be concurrent to prewarming {pull}55795[#55795]\n+* Reduce contention in CacheFile.fileLock() method {pull}55662[#55662]\n+* Require soft deletes for searchable snapshots {pull}55453[#55453]\n+* Searchable Snapshots should respect max_restore_bytes_per_sec {pull}55952[#55952]\n+* Update the HDFS version used by HDFS Repo {pull}53693[#53693]\n+* Use streaming reads for GCS {pull}55506[#55506] (issue: {issue}55505[#55505])\n+* Use workers to warm cache parts {pull}55793[#55793] (issue: {issue}55322[#55322])\n+\n+Task Management::\n+* Add indexName in update-settings task name {pull}55714[#55714]\n+* Add scroll info to search task description {pull}54606[#54606]\n+* Broadcast cancellation to only nodes have outstanding child tasks {pull}54312[#54312] (issues: {issue}50990[#50990], {issue}51157[#51157])\n+* Support hierarchical task cancellation {pull}54757[#54757] (issue: {issue}50990[#50990])\n+\n+Transform::\n+* Add throttling {pull}56007[#56007] (issue: {issue}54862[#54862])\n+\n+\n+\n+[[bug-7.8.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Add analytics plugin usage stats to _xpack/usage {pull}54911[#54911] (issue: {issue}54847[#54847])\n+* Aggregation support for Value Scripts that change types {pull}54830[#54830] (issue: {issue}54655[#54655])\n+* Allow terms agg to default to depth first {pull}54845[#54845]\n+* Clean up how pipeline aggs check for multi-bucket {pull}54161[#54161] (issue: {issue}53215[#53215])\n+* Fix auto_date_histogram serialization bug {pull}54447[#54447] (issues: {issue}54382[#54382], {issue}54429[#54429])\n+* Fix error massage for unknown value type {pull}55821[#55821] (issue: {issue}55727[#55727])\n+* Fix scripted metric in ccs {pull}54776[#54776] (issue: {issue}54758[#54758])\n+* Use Decimal formatter for Numeric ValuesSourceTypes {pull}54366[#54366] (issue: {issue}54365[#54365])\n+\n+Allocation::\n+* Fix Broken ExistingStoreRecoverySource Deserialization {pull}55657[#55657] (issue: {issue}55513[#55513])\n+\n+\n+Authorization::\n+* Resolve anonymous roles and deduplicate roles during authentication {pull}53453[#53453] (issues: {issue}31589[#31589], {issue}47195[#47195])\n+\n+Features/ILM+SLM::\n+* ILM stop step execution if writeIndex is false {pull}54805[#54805]\n+\n+Features/Indices APIs::\n+* Fix NPE in MetadataIndexTemplateService#findV2Template {pull}54945[#54945]\n+* Fix creating filtered alias using now in a date_nanos range query failed {pull}54785[#54785] (issue: {issue}54315[#54315])\n+* Fix simulating index templates without specified index {pull}56295[#56295] (issues: {issue}53101[#53101], {issue}56255[#56255])\n+* Validate non-negative priorities for V2 index templates {pull}56139[#56139] (issue: {issue}53101[#53101])\n+\n+Features/Watcher::\n+* Ensure watcher email action message ids are always unique {pull}56574[#56574]\n+\n+Geo::\n+* ES crashes with OOM error when running fine-grained geotile_grid aggs on geo_shape [OPEN] [ISSUE] {pull}57847[#57847]\n+* Rasterization artefacts for geotile_grid and geo_centroid aggregations on geo_shape [OPEN] [ISSUE] {pull}57846[#57846]\n+\n+Infra/Core::\n+* Add generic Set support to streams {pull}54769[#54769] (issue: {issue}54708[#54708])\n+\n+Machine Learning::\n+* Fixing GET _ml/inference so size param is respected {pull}57303[#57303] (issue: {issue}57298[#57298])\n+* Fixing file structure finder multiline merge max for delimited formats {pull}56023[#56023]\n+* Validate at least one feature is available for DF analytics {pull}55876[#55876] (issue: {issue}55593[#55593])", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzUzMg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438117532", "bodyText": "We use geo_point earlier. This is also the name of the literal data type.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            from all coordinate values for a geo-point field.\n          \n          \n            \n            from all coordinate values for a geo_point field.", "author": "jrodewig", "createdAt": "2020-06-10T13:23:12Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExNzkxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438117915", "bodyText": "We use sentence case for headings.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Geo Improvements\n          \n          \n            \n            === Geo improvements", "author": "jrodewig", "createdAt": "2020-06-10T13:23:43Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExODE0Ng==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438118146", "bodyText": "Fixes capitalization.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Add support for T-Test aggregations\n          \n          \n            \n            === Add support for t-test aggregations", "author": "jrodewig", "createdAt": "2020-06-10T13:24:02Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExODcxNA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438118714", "bodyText": "I don't think the parenthetical is needed as we explain it later.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {es} now supports a `t_test` (or\n          \n          \n            \n            https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n          \n          \n            \n            {es} now supports a `t_test` metrics", "author": "jrodewig", "createdAt": "2020-06-10T13:24:51Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExOTEyMw==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438119123", "bodyText": "We generally don't capitalize API names.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Expose aggregation usage in Feature Usage API\n          \n          \n            \n            === Expose aggregation usage in feature usage API", "author": "jrodewig", "createdAt": "2020-06-10T13:25:24Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODExOTc2OQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438119769", "bodyText": "Replaces an Elasticsearch reference with {es}. Also removes double space between sentences.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            last restart until the time when the counts are fetched.  When trying to\n          \n          \n            \n            analyze how Elasticsearch is being used in practice, it is useful to know\n          \n          \n            \n            the usage distribution across aggregations and field types.  For example,\n          \n          \n            \n            you might be able to conclude that a certain part of an index is not used a\n          \n          \n            \n            lot and could perhaps can be eliminated.\n          \n          \n            \n            last restart until the time when the counts are fetched. When trying to\n          \n          \n            \n            analyze how {es} is being used in practice, it is useful to know\n          \n          \n            \n            the usage distribution across aggregations and field types. For example,\n          \n          \n            \n            you might be able to conclude that a certain part of an index is not used a\n          \n          \n            \n            lot and could perhaps can be eliminated.", "author": "jrodewig", "createdAt": "2020-06-10T13:26:18Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyMTQ4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438121485", "bodyText": "Don't think the quotes are needed here.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            they are \"waiting\" to be merged.\n          \n          \n            \n            they are waiting to be merged.", "author": "jrodewig", "createdAt": "2020-06-10T13:28:40Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.\n+\n+\n+// end::notable-highlights[]\n+\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Support `value_count` and `avg` aggregations over histogram fields\n+\n+{es} now implements `value_count` and `avg` aggregations over histogram\n+fields.\n+\n+When the `value_count` aggregation is computed on <<histogram,histogram\n+fields>>, the result of the aggregation is the sum of all numbers in the\n+`counts` array of the histogram.\n+\n+When the average is computed on histogram fields, the result of the\n+aggregation is the weighted average of all elements in the `values` array\n+taking into consideration the number in the same position in the `counts`\n+array.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Reduce aggregation memory consumption\n+\n+{es} now attempts to save memory on the coordinating node by delaying\n+deserialization of the shard results for an aggregation until the last\n+second. This is helpful as it makes the shard-aggregations results \"short\n+lived\" garbage. It also should shrink the memory usage of aggregations when\n+they are \"waiting\" to be merged.", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyMTY3NA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438121674", "bodyText": "Removes quotes.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Additionally, when the search is in \"batched reduce mode\", {es} will force\n          \n          \n            \n            Additionally, when the search is in batched reduce mode, {es} will force", "author": "jrodewig", "createdAt": "2020-06-10T13:28:56Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.\n+\n+\n+// end::notable-highlights[]\n+\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Support `value_count` and `avg` aggregations over histogram fields\n+\n+{es} now implements `value_count` and `avg` aggregations over histogram\n+fields.\n+\n+When the `value_count` aggregation is computed on <<histogram,histogram\n+fields>>, the result of the aggregation is the sum of all numbers in the\n+`counts` array of the histogram.\n+\n+When the average is computed on histogram fields, the result of the\n+aggregation is the weighted average of all elements in the `values` array\n+taking into consideration the number in the same position in the `counts`\n+array.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Reduce aggregation memory consumption\n+\n+{es} now attempts to save memory on the coordinating node by delaying\n+deserialization of the shard results for an aggregation until the last\n+second. This is helpful as it makes the shard-aggregations results \"short\n+lived\" garbage. It also should shrink the memory usage of aggregations when\n+they are \"waiting\" to be merged.\n+\n+Additionally, when the search is in \"batched reduce mode\", {es} will force", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODEyMTgyMQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438121821", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            === Scalar functions now supported inside SQL aggregations\n          \n          \n            \n            === Scalar functions now supported in SQL aggregations", "author": "jrodewig", "createdAt": "2020-06-10T13:29:08Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,124 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo Improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+<<search-aggregations-metrics-geobounds-aggregation,Geo Bounds Aggregations>>.\n+- <<search-aggregations-bucket-geohashgrid-aggregation,GeoHash grid aggregations>>\n+and <<search-aggregations-bucket-geotilegrid-aggregation,map tile grid aggregations>>\n+allow you to group geo_points into buckets.\n+- <<search-aggregations-metrics-geocentroid-aggregation,Geo centroid aggregations>>\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo-point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for T-Test aggregations\n+\n+{es} now supports a `t_test` (or\n+https://en.wikipedia.org/wiki/Student%27s_t-test[Student's t-test]) metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+<<search-aggregations-metrics-ttest-aggregation,T-Test Aggregation>>.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in Feature Usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the <<cluster-nodes-usage,Node Features API>>.  This is broken down per\n+combination of aggregation and data type, per shard on each node, from the\n+last restart until the time when the counts are fetched.  When trying to\n+analyze how Elasticsearch is being used in practice, it is useful to know\n+the usage distribution across aggregations and field types.  For example,\n+you might be able to conclude that a certain part of an index is not used a\n+lot and could perhaps can be eliminated.\n+\n+\n+// end::notable-highlights[]\n+\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Support `value_count` and `avg` aggregations over histogram fields\n+\n+{es} now implements `value_count` and `avg` aggregations over histogram\n+fields.\n+\n+When the `value_count` aggregation is computed on <<histogram,histogram\n+fields>>, the result of the aggregation is the sum of all numbers in the\n+`counts` array of the histogram.\n+\n+When the average is computed on histogram fields, the result of the\n+aggregation is the weighted average of all elements in the `values` array\n+taking into consideration the number in the same position in the `counts`\n+array.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Reduce aggregation memory consumption\n+\n+{es} now attempts to save memory on the coordinating node by delaying\n+deserialization of the shard results for an aggregation until the last\n+second. This is helpful as it makes the shard-aggregations results \"short\n+lived\" garbage. It also should shrink the memory usage of aggregations when\n+they are \"waiting\" to be merged.\n+\n+Additionally, when the search is in \"batched reduce mode\", {es} will force\n+the results to be serialized between batch reduces in an attempt to keep\n+the memory usage as low as possible between reductions.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Scalar functions now supported inside SQL aggregations", "originalCommit": "0dee8028c218409cabe9ff0d296f1cf96dd5eebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "85d8d0f51f6bca963646e41476145468ab35a2f9", "url": "https://github.com/elastic/elasticsearch/commit/85d8d0f51f6bca963646e41476145468ab35a2f9", "message": "Apply suggestions from code review\n\nCo-authored-by: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-06-10T14:12:51Z", "type": "commit"}, {"oid": "4ca9ca21cb7295997d7f6e981f8c78d2e8ab349b", "url": "https://github.com/elastic/elasticsearch/commit/4ca9ca21cb7295997d7f6e981f8c78d2e8ab349b", "message": "[DOCS] Adds ml-cpp PRs to release notes", "committedDate": "2020-06-11T00:07:20Z", "type": "commit"}, {"oid": "716d7e38aa3a43d04921aef2baa50196116d4913", "url": "https://github.com/elastic/elasticsearch/commit/716d7e38aa3a43d04921aef2baa50196116d4913", "message": "[DOCS] Adds machine learning release highglights", "committedDate": "2020-06-11T00:33:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU2MjgwNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438562805", "bodyText": "This PR was reverted. It is not in 7.8\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            Authorization::\n          \n          \n            \n            * Resolve anonymous roles and deduplicate roles during authentication {pull}53453[#53453] (issues: {issue}31589[#31589], {issue}47195[#47195])", "author": "tvernum", "createdAt": "2020-06-11T06:10:59Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+* Speed up anomaly detection for the lat_long function {ml-pull}1102[#1102]\n+* Reduce CPU scheduling priority of native analysis processes to favor the ES\n+JVM when CPU is constrained. This change is implemented only for Linux and macOS,\n+not for Windows {ml-pull}1109[#1109]\n+* Take `training_percent` into account when estimating memory usage for\n+classification and regression {ml-pull}1111[#1111]\n+* Support maximize minimum recall when assigning class labels for multiclass\n+classification {ml-pull}1113[#1113]\n+* Improve robustness of anomaly detection to bad input data {ml-pull}1114[#1114]\n+* Add new `num_matches` and `preferred_to_categories` fields to category output\n+{ml-pull}1062[#1062]\n+* Add mean squared logarithmic error (MSLE) for regression {ml-pull}1101[#1101]\n+* Add pseudo-Huber loss for regression {ml-pull}1168[#1168]\n+* Reduce peak memory usage and memory estimates for classification and regression\n+{ml-pull}1125[#1125].)\n+* Reduce variability of classification and regression results across our target\n+operating systems {ml-pull}1127[#1127]\n+* Switched data frame analytics model memory estimates from kilobytes to\n+megabytes {ml-pull}1126[#1126] (issue: {issue}54506[#54506])\n+* Add a {ml} native code build for Linux on AArch64 {ml-pull}1132[#1132],\n+{ml-pull}1135[#1135]\n+* Improve data frame analysis runtime by optimising memory alignment for intrinsic\n+operations {ml-pull}1142[#1142]\n+* Fix spurious anomalies for count and sum functions after no data are received\n+for long periods of time {ml-pull}1158[#1158]\n+* Improve false positive rates from periodicity test for time series anomaly\n+detection {ml-pull}1177[#1177]\n+* Break progress reporting of data frame analyses into multiple phases {ml-pull}1179[#1179]\n+* Really centre the data before training for classification and regression begins. This\n+means we can choose more optimal smoothing bias and should reduce the number of trees\n+{ml-pull}1192[#1192]\n+\n+Mapping::\n+* Merge V2 index/component template mappings in specific manner {pull}55607[#55607] (issue: {issue}53101[#53101])\n+\n+Recovery::\n+* Avoid copying file chunks in peer covery {pull}56072[#56072] (issue: {issue}55353[#55353])\n+* Retry failed peer recovery due to transient errors {pull}55353[#55353]\n+\n+SQL::\n+* Add BigDecimal support to JDBC {pull}56015[#56015] (issue: {issue}43806[#43806])\n+* Drop BASE TABLE type in favour for just TABLE {pull}54836[#54836]\n+* Relax version lock between server and clients {pull}56148[#56148]\n+\n Search::\n-* Scripts used in `value_count` will now receive a number if they are counting\n-  a numeric field and a `GeoPoint` if they are counting a `geo_point` fields.\n-  They used to always receive the `String` representation of those values.\n-  {pull}54854[#54854]\n+* Consolidate DelayableWriteable {pull}55932[#55932]\n+* Exists queries to MatchNoneQueryBuilder when the field is unmapped  {pull}54857[#54857]\n+* Rewrite wrapper queries to match_none if possible {pull}55271[#55271]\n+* SearchService#canMatch takes into consideration the alias filter {pull}55120[#55120] (issue: {issue}55090[#55090])\n+\n+Snapshot/Restore::\n+* Add GCS support for searchable snapshots {pull}55403[#55403]\n+* Allocate searchable snapshots with the balancer {pull}54889[#54889] (issues: {issue}50999[#50999], {issue}54729[#54729])\n+* Allow bulk snapshot deletes to abort {pull}56009[#56009] (issue: {issue}55773[#55773])\n+* Allow deleting multiple snapshots at once {pull}55474[#55474]\n+* Allow searching of snapshot taken while indexing {pull}55511[#55511] (issue: {issue}50999[#50999])\n+* Allow to prewarm the cache for searchable snapshot shards {pull}55322[#55322]\n+* Enable prewarming by default for searchable snapshots {pull}56201[#56201] (issue: {issue}55952[#55952])\n+* Permit searches to be concurrent to prewarming {pull}55795[#55795]\n+* Reduce contention in CacheFile.fileLock() method {pull}55662[#55662]\n+* Require soft deletes for searchable snapshots {pull}55453[#55453]\n+* Searchable Snapshots should respect max_restore_bytes_per_sec {pull}55952[#55952]\n+* Update the HDFS version used by HDFS Repo {pull}53693[#53693]\n+* Use streaming reads for GCS {pull}55506[#55506] (issue: {issue}55505[#55505])\n+* Use workers to warm cache parts {pull}55793[#55793] (issue: {issue}55322[#55322])\n+\n+Task Management::\n+* Add indexName in update-settings task name {pull}55714[#55714]\n+* Add scroll info to search task description {pull}54606[#54606]\n+* Broadcast cancellation to only nodes have outstanding child tasks {pull}54312[#54312] (issues: {issue}50990[#50990], {issue}51157[#51157])\n+* Support hierarchical task cancellation {pull}54757[#54757] (issue: {issue}50990[#50990])\n+\n+Transform::\n+* Add throttling {pull}56007[#56007] (issue: {issue}54862[#54862])\n+\n+\n+\n+[[bug-7.8.0]]\n+[float]\n+=== Bug fixes\n+\n+Aggregations::\n+* Add analytics plugin usage stats to _xpack/usage {pull}54911[#54911] (issue: {issue}54847[#54847])\n+* Aggregation support for Value Scripts that change types {pull}54830[#54830] (issue: {issue}54655[#54655])\n+* Allow terms agg to default to depth first {pull}54845[#54845]\n+* Clean up how pipeline aggs check for multi-bucket {pull}54161[#54161] (issue: {issue}53215[#53215])\n+* Fix auto_date_histogram serialization bug {pull}54447[#54447] (issues: {issue}54382[#54382], {issue}54429[#54429])\n+* Fix error massage for unknown value type {pull}55821[#55821] (issue: {issue}55727[#55727])\n+* Fix scripted metric in CCS {pull}54776[#54776] (issue: {issue}54758[#54758])\n+* Use Decimal formatter for Numeric ValuesSourceTypes {pull}54366[#54366] (issue: {issue}54365[#54365])\n+\n+Allocation::\n+* Fix Broken ExistingStoreRecoverySource Deserialization {pull}55657[#55657] (issue: {issue}55513[#55513])\n+\n+\n+Authorization::\n+* Resolve anonymous roles and deduplicate roles during authentication {pull}53453[#53453] (issues: {issue}31589[#31589], {issue}47195[#47195])", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY1MTU2Ng==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438651566", "bodyText": "@lcawl what is the official docs position on using the DFA acronym in public documentation? If it isn't supposed to be used then it should be expanded to \"data frame analytics\" here.", "author": "droberts195", "createdAt": "2020-06-11T09:14:58Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -173,6 +173,37 @@ Machine Learning::\n * Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n * Start gathering and storing inference stats {pull}53429[#53429]\n * Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])", "originalCommit": "4ca9ca21cb7295997d7f6e981f8c78d2e8ab349b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY1NTM0MA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438655340", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n          \n          \n            \n            * Unassign data frame analytics tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])", "author": "szabosteve", "createdAt": "2020-06-11T09:21:54Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY1NzI3MA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438657270", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Improve data frame analysis runtime by optimising memory alignment for intrinsic\n          \n          \n            \n            * Improve data frame analytics runtime by optimising memory alignment for intrinsic", "author": "szabosteve", "createdAt": "2020-06-11T09:25:27Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+* Speed up anomaly detection for the lat_long function {ml-pull}1102[#1102]\n+* Reduce CPU scheduling priority of native analysis processes to favor the ES\n+JVM when CPU is constrained. This change is implemented only for Linux and macOS,\n+not for Windows {ml-pull}1109[#1109]\n+* Take `training_percent` into account when estimating memory usage for\n+classification and regression {ml-pull}1111[#1111]\n+* Support maximize minimum recall when assigning class labels for multiclass\n+classification {ml-pull}1113[#1113]\n+* Improve robustness of anomaly detection to bad input data {ml-pull}1114[#1114]\n+* Add new `num_matches` and `preferred_to_categories` fields to category output\n+{ml-pull}1062[#1062]\n+* Add mean squared logarithmic error (MSLE) for regression {ml-pull}1101[#1101]\n+* Add pseudo-Huber loss for regression {ml-pull}1168[#1168]\n+* Reduce peak memory usage and memory estimates for classification and regression\n+{ml-pull}1125[#1125].)\n+* Reduce variability of classification and regression results across our target\n+operating systems {ml-pull}1127[#1127]\n+* Switched data frame analytics model memory estimates from kilobytes to\n+megabytes {ml-pull}1126[#1126] (issue: {issue}54506[#54506])\n+* Add a {ml} native code build for Linux on AArch64 {ml-pull}1132[#1132],\n+{ml-pull}1135[#1135]\n+* Improve data frame analysis runtime by optimising memory alignment for intrinsic", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3MzgxNg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438673816", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            {ref}//search-aggregations-metrics-ttest-aggregation.html[T-Test Aggregation].\n          \n          \n            \n            {ref}/search-aggregations-metrics-ttest-aggregation.html[T-Test Aggregation].", "author": "szabosteve", "createdAt": "2020-06-11T09:55:46Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,151 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+{ref}/search-aggregations-metrics-geobounds-aggregation.html[Geo Bounds Aggregations].\n+- {ref}/search-aggregations-bucket-geohashgrid-aggregation.html[GeoHash grid aggregations]\n+and {ref}/search-aggregations-bucket-geotilegrid-aggregation.html[map tile grid aggregations]\n+allow you to group geo_points into buckets.\n+- {ref}/search-aggregations-metrics-geocentroid-aggregation.html[Geo centroid aggregations]\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo_point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for t-test aggregations\n+\n+{es} now supports a `t_test` metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+{ref}//search-aggregations-metrics-ttest-aggregation.html[T-Test Aggregation].", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3NDE5OA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438674198", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            via the {ref{/cluster-nodes-usage.html[node features API]. This is broken down per\n          \n          \n            \n            via the {ref}/cluster-nodes-usage.html[node features API]. This is broken down per", "author": "szabosteve", "createdAt": "2020-06-11T09:56:30Z", "path": "docs/reference/release-notes/highlights-7.8.0.asciidoc", "diffHunk": "@@ -4,10 +4,151 @@\n <titleabbrev>7.8.0</titleabbrev>\n ++++\n \n-coming[7.8.0]\n //NOTE: The notable-highlights tagged regions are re-used in the\n //Installation and Upgrade Guide\n \n // tag::notable-highlights[]\n+[float]\n+=== Geo improvements\n+\n+We have made several improvements to geo support in {es} 7.8.\n+\n+- You can now run an aggregation that finds the bounding box (top left point and\n+bottom right point) that contains all shapes matching a query. A shape is\n+anything that is defined by multiple points. See\n+{ref}/search-aggregations-metrics-geobounds-aggregation.html[Geo Bounds Aggregations].\n+- {ref}/search-aggregations-bucket-geohashgrid-aggregation.html[GeoHash grid aggregations]\n+and {ref}/search-aggregations-bucket-geotilegrid-aggregation.html[map tile grid aggregations]\n+allow you to group geo_points into buckets.\n+- {ref}/search-aggregations-metrics-geocentroid-aggregation.html[Geo centroid aggregations]\n+allow you to compute the weighted https://en.wikipedia.org/wiki/Centroid[centroid]\n+from all coordinate values for a geo_point field.\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Add support for t-test aggregations\n+\n+{es} now supports a `t_test` metrics\n+aggregation, which performs a statistical hypothesis test in which the test\n+statistic follows a\n+https://en.wikipedia.org/wiki/Student%27s_t-distribution[Student\u2019s\n+t-distribution] under the null hypothesis on numeric values extracted from\n+the aggregated documents or generated by provided scripts. In practice,\n+this will tell you if the difference between two population means are\n+statistically significant and did not occur by chance alone. See\n+{ref}//search-aggregations-metrics-ttest-aggregation.html[T-Test Aggregation].\n+\n+// end::notable-highlights[]\n+\n+// tag::notable-highlights[]\n+[float]\n+=== Expose aggregation usage in feature usage API\n+\n+It is now possible to fetch a count of aggregations that have been executed\n+via the {ref{/cluster-nodes-usage.html[node features API]. This is broken down per", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3NjE3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438676172", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n          \n          \n            \n            * Add failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])", "author": "szabosteve", "createdAt": "2020-06-11T10:00:07Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3NjMxMg==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438676312", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Adding prediction_field_type to inference config {pull}55128[#55128]\n          \n          \n            \n            * Add prediction_field_type to inference config {pull}55128[#55128]", "author": "szabosteve", "createdAt": "2020-06-11T10:00:19Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY3Njc4MA==", "url": "https://github.com/elastic/elasticsearch/pull/56340#discussion_r438676780", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Switched data frame analytics model memory estimates from kilobytes to\n          \n          \n            \n            * Switch data frame analytics model memory estimates from kilobytes to", "author": "szabosteve", "createdAt": "2020-06-11T10:01:00Z", "path": "docs/reference/release-notes/7.8.asciidoc", "diffHunk": "@@ -1,18 +1,338 @@\n [[release-notes-7.8.0]]\n == {es} version 7.8.0\n \n-coming[7.8.0]\n+Also see <<breaking-changes-7.8,Breaking changes in 7.8>>.\n \n [[breaking-7.8.0]]\n [float]\n === Breaking changes\n \n+Aggregations::\n+* `value_count` aggregation optimization {pull}54854[#54854]\n+\n+Features/Indices APIs::\n+* Add auto create action {pull}55858[#55858]\n+\n+Mapping::\n+* Disallow changing 'enabled' on the root mapper {pull}54463[#54463] (issue: {issue}33933[#33933])\n+* Fix updating include_in_parent/include_in_root of nested field {pull}54386[#54386] (issue: {issue}53792[#53792])\n+\n+\n+[[deprecation-7.8.0]]\n+[float]\n+=== Deprecations\n+\n+Authentication::\n+* Deprecate the `kibana` reserved user; introduce `kibana_system` user {pull}54967[#54967]\n+\n+Cluster Coordination::\n+* Voting config exclusions should work with absent nodes {pull}50836[#50836] (issue: {issue}47990[#47990])\n+\n+Features/Features::\n+* Add node local storage deprecation check {pull}54383[#54383] (issue: {issue}54374[#54374])\n+\n+Features/Indices APIs::\n+* Deprecate local parameter for get field mapping request {pull}55014[#55014]\n+\n+Infra/Core::\n+* Deprecate node local storage setting {pull}54374[#54374]\n+\n+Infra/Plugins::\n+* Add xpack setting deprecations to deprecation API {pull}56290[#56290] (issue: {issue}54745[#54745])\n+* Deprecate disabling basic-license features {pull}54816[#54816] (issue: {issue}54745[#54745])\n+* Deprecated xpack \"enable\" settings should be no-ops {pull}55416[#55416] (issues: {issue}54745[#54745], {issue}54816[#54816])\n+* Make xpack.ilm.enabled setting a no-op {pull}55592[#55592] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416])\n+* Make xpack.monitoring.enabled setting a no-op {pull}55617[#55617] (issues: {issue}54745[#54745], {issue}54816[#54816], {issue}55416[#55416], {issue}55461[#55461], {issue}55592[#55592])\n+* Restore xpack.ilm.enabled and xpack.slm.enabled settings {pull}57383[#57383] (issues: {issue}54745[#54745], {issue}55416[#55416], {issue}55592[#55592])\n+\n+\n+\n+[[feature-7.8.0]]\n+[float]\n+=== New features\n+\n+Aggregations::\n+* Add Student's t-test aggregation support {pull}54469[#54469] (issue: {issue}53692[#53692])\n+* Add support for filters to t-test aggregation {pull}54980[#54980] (issue: {issue}53692[#53692])\n+* Histogram field type support for Sum aggregation {pull}55681[#55681] (issue: {issue}53285[#53285])\n+* Histogram field type support for ValueCount and Avg aggregations {pull}55933[#55933] (issue: {issue}53285[#53285])\n+\n+Features/Indices APIs::\n+* Add simulate template composition API _index_template/_simulate_index/{name}  {pull}55686[#55686] (issue: {issue}53101[#53101])\n+\n+Geo::\n+* Add geo_bounds aggregation support for geo_shape {pull}55328[#55328]\n+* Add geo_shape support for geotile_grid and geohash_grid {pull}55966[#55966]\n+* Add geo_shape support for the geo_centroid aggregation {pull}55602[#55602]\n+* Add new point field {pull}53804[#53804]\n+\n+SQL::\n+* Implement DATETIME_FORMAT function for date/time formatting {pull}54832[#54832] (issue: {issue}53714[#53714])\n+* Implement DATETIME_PARSE function for parsing strings {pull}54960[#54960] (issue: {issue}53714[#53714])\n+* Implement scripting inside aggs {pull}55241[#55241] (issues: {issue}29980[#29980], {issue}36865[#36865], {issue}37271[#37271])\n+\n+\n+\n+[[enhancement-7.8.0]]\n+[float]\n+=== Enhancements\n+\n+Aggregations::\n+* Aggs must specify a `field` or `script` (or both) {pull}52226[#52226]\n+* Expose aggregation usage in Feature Usage API {pull}55732[#55732] (issue: {issue}53746[#53746])\n+* Reduce memory for big aggregations run against many shards {pull}54758[#54758]\n+* Save memory in on aggs in async search {pull}55683[#55683]\n+\n+Allocation::\n+* Disk decider respect watermarks for single data node {pull}55805[#55805]\n+* Improve same-shard allocation explanations {pull}56010[#56010]\n+\n+Analysis::\n+* Add preserve_original setting in ngram token filter {pull}55432[#55432]\n+* Add preserve_original setting in edge ngram token filter {pull}55766[#55766] (issue: {issue}55767[#55767])\n+* Add pre-configured \u201clowercase\u201d normalizer {pull}53882[#53882] (issue: {issue}53872[#53872])\n+\n+Audit::\n+* Update the audit logfile list of system users {pull}55578[#55578] (issue: {issue}37924[#37924])\n+\n+Authentication::\n+* Let realms gracefully terminate the authN chain {pull}55623[#55623]\n+\n+Authorization::\n+* Add reserved_ml_user and reserved_ml_admin kibana privileges {pull}54713[#54713]\n+\n+Autoscaling::\n+* Rollover: refactor out cluster state update {pull}53965[#53965]\n+\n+CRUD::\n+* Avoid holding onto bulk items until all completed {pull}54407[#54407]\n+\n+Cluster Coordination::\n+* Add voting config exclusion add and clear API spec and integration test cases {pull}55760[#55760] (issue: {issue}48131[#48131])\n+\n+Features/CAT APIs::\n+* Add support for V2 index templates to /_cat/templates {pull}55829[#55829] (issue: {issue}53101[#53101])\n+\n+Features/Indices APIs::\n+* Add HLRC support for simulate index template api {pull}55936[#55936] (issue: {issue}53101[#53101])\n+* Add prefer_v2_templates flag and index setting {pull}55411[#55411] (issue: {issue}53101[#53101])\n+* Add warnings/errors when V2 templates would match same indices as V1 {pull}54367[#54367] (issue: {issue}53101[#53101])\n+* Disallow merging existing mapping field definitions in templates {pull}57701[#57701] (issues: {issue}55607[#55607], {issue}55982[#55982], {issue}57393[#57393])\n+* Emit deprecation warning if multiple v1 templates match with a new index {pull}55558[#55558] (issue: {issue}53101[#53101])\n+* Guard adding the index.prefer_v2_templates settings for pre-7.8 nodes {pull}55546[#55546] (issues: {issue}53101[#53101], {issue}55411[#55411], {issue}55539[#55539])\n+* Handle merging dotted object names when merging V2 template mappings {pull}55982[#55982] (issue: {issue}53101[#53101])\n+* Throw exception on duplicate mappings metadata fields when merging templates {pull}57835[#57835] (issue: {issue}57701[#57701])\n+* Update template v2 api rest spec {pull}55948[#55948] (issue: {issue}53101[#53101])\n+* Use V2 index templates during index creation {pull}54669[#54669] (issue: {issue}53101[#53101])\n+* Use V2 templates when reading duplicate aliases and ingest pipelines {pull}54902[#54902] (issue: {issue}53101[#53101])\n+* Validate V2 templates more strictly {pull}56170[#56170] (issues: {issue}43737[#43737], {issue}46045[#46045], {issue}53101[#53101], {issue}53970[#53970])\n+\n+Features/Java High Level REST Client::\n+* Enable support for decompression of compressed response within RestHighLevelClient {pull}53533[#53533]\n+\n+Features/Stats::\n+* Add Bulk stats track the bulk per shard {pull}52208[#52208] (issues: {issue}47345[#47345], {issue}50536[#50536])\n+* Fix available / total disk cluster stats {pull}32480[#32480] (issue: {issue}32478[#32478])\n+\n+Features/Watcher::\n+* Delay warning about missing x-pack {pull}54265[#54265] (issue: {issue}40898[#40898])\n+\n+Geo::\n+* Add geo_shape mapper supporting doc-values in Spatial Plugin {pull}55037[#55037] (issue: {issue}53562[#53562])\n+\n+Infra/Core::\n+* Decouple Environment from DiscoveryNode {pull}54373[#54373]\n+* Ensure that the output of node roles are sorted {pull}54376[#54376] (issue: {issue}54370[#54370])\n+* Reintroduce system index APIs for Kibana {pull}54858[#54858] (issues: {issue}52385[#52385], {issue}53912[#53912])\n+* Schedule commands in current thread context {pull}54187[#54187] (issue: {issue}17143[#17143])\n+* Start resource watcher service early {pull}54993[#54993] (issue: {issue}54867[#54867])\n+\n+Infra/Packaging::\n+* Make Windows JAVA_HOME handling consistent with Linux {pull}55261[#55261] (issue: {issue}55134[#55134])\n+\n+\n+Infra/REST API::\n+* Add validation to the usage service {pull}54617[#54617]\n+\n+Infra/Scripting::\n+* Scripting: stats per context in nodes stats {pull}54008[#54008] (issue: {issue}50152[#50152])\n+\n+Machine Learning::\n+* Add effective max model memory limit to ML info {pull}55529[#55529] (issue: {issue}63942[#63942])\n+* Add loss_function to regression {pull}56118[#56118]\n+* Add new inference_config field to trained model config {pull}54421[#54421]\n+* Adding failed_category_count to model_size_stats {pull}55716[#55716] (issue: {issue}1130[#1130])\n+* Adding prediction_field_type to inference config {pull}55128[#55128]\n+* Allow a certain number of ill-formatted rows when delimited format is specified {pull}55735[#55735] (issue: {issue}38890[#38890])\n+* Apply default timeout in StopDataFrameAnalyticsAction.Request {pull}55512[#55512]\n+* Create an annotation when a model snapshot is stored {pull}53783[#53783] (issue: {issue}52149[#52149])\n+* Do not execute ML CRUD actions when upgrade mode is enabled {pull}54437[#54437] (issue: {issue}54326[#54326])\n+* Make find_file_structure recognize Kibana CSV report timestamps {pull}55609[#55609] (issue: {issue}55586[#55586])\n+* More advanced model snapshot retention options {pull}56125[#56125] (issue: {issue}52150[#52150])\n+* Return assigned node in start/open job/datafeed response {pull}55473[#55473] (issue: {issue}54067[#54067])\n+* Skip daily maintenance activity if upgrade mode is enabled {pull}54565[#54565] (issue: {issue}54326[#54326])\n+* Start gathering and storing inference stats {pull}53429[#53429]\n+* Unassign DFA tasks in SetUpgradeModeAction {pull}54523[#54523] (issue: {issue}54326[#54326])\n+* Speed up anomaly detection for the lat_long function {ml-pull}1102[#1102]\n+* Reduce CPU scheduling priority of native analysis processes to favor the ES\n+JVM when CPU is constrained. This change is implemented only for Linux and macOS,\n+not for Windows {ml-pull}1109[#1109]\n+* Take `training_percent` into account when estimating memory usage for\n+classification and regression {ml-pull}1111[#1111]\n+* Support maximize minimum recall when assigning class labels for multiclass\n+classification {ml-pull}1113[#1113]\n+* Improve robustness of anomaly detection to bad input data {ml-pull}1114[#1114]\n+* Add new `num_matches` and `preferred_to_categories` fields to category output\n+{ml-pull}1062[#1062]\n+* Add mean squared logarithmic error (MSLE) for regression {ml-pull}1101[#1101]\n+* Add pseudo-Huber loss for regression {ml-pull}1168[#1168]\n+* Reduce peak memory usage and memory estimates for classification and regression\n+{ml-pull}1125[#1125].)\n+* Reduce variability of classification and regression results across our target\n+operating systems {ml-pull}1127[#1127]\n+* Switched data frame analytics model memory estimates from kilobytes to", "originalCommit": "716d7e38aa3a43d04921aef2baa50196116d4913", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f0689aeeda2375e0c0f66869b3537693edec8ed1", "url": "https://github.com/elastic/elasticsearch/commit/f0689aeeda2375e0c0f66869b3537693edec8ed1", "message": "Fix broken formatting\n\nCo-authored-by: Istv\u00e1n Zolt\u00e1n Szab\u00f3 <istvan.szabo@elastic.co>", "committedDate": "2020-06-11T12:40:13Z", "type": "commit"}, {"oid": "f7123e9cccf9b94d4b1075c34bb4af490969fe15", "url": "https://github.com/elastic/elasticsearch/commit/f7123e9cccf9b94d4b1075c34bb4af490969fe15", "message": "[DOCS] Adds Data Visualizer related highlight.", "committedDate": "2020-06-11T18:50:22Z", "type": "commit"}, {"oid": "8749484b2ce13864d4db53ccd25036d1cb682953", "url": "https://github.com/elastic/elasticsearch/commit/8749484b2ce13864d4db53ccd25036d1cb682953", "message": "Apply suggestions from code review\n\nCo-authored-by: Istv\u00e1n Zolt\u00e1n Szab\u00f3 <istvan.szabo@elastic.co>\nCo-authored-by: Tim Vernum <tim@adjective.org>", "committedDate": "2020-06-12T11:56:57Z", "type": "commit"}, {"oid": "42096c47bde421e342ceb94c0d3f448b5fa77196", "url": "https://github.com/elastic/elasticsearch/commit/42096c47bde421e342ceb94c0d3f448b5fa77196", "message": "Remove un-backported PR from release notes", "committedDate": "2020-06-12T12:27:07Z", "type": "commit"}, {"oid": "454a941bb76ba720033b426af4c1199412aa145b", "url": "https://github.com/elastic/elasticsearch/commit/454a941bb76ba720033b426af4c1199412aa145b", "message": "Remove open issues from 7.8 release notes", "committedDate": "2020-06-12T12:42:23Z", "type": "commit"}]}