{"pr_number": 59222, "pr_title": "Suggest reducing tcp_retries2", "pr_createdAt": "2020-07-08T12:51:40Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/59222", "timeline": [{"oid": "cdec0f81e3e4e1dd7f831bf5a3fe13f9310fa7a3", "url": "https://github.com/elastic/elasticsearch/commit/cdec0f81e3e4e1dd7f831bf5a3fe13f9310fa7a3", "message": "Suggest reducing tcp_retries2\n\nAdds documentation suggesting reducing `tcp_retries2` on Linux to detect\nnetwork partitions more quickly.\n\nRelates #34405", "committedDate": "2020-07-08T12:49:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTMzODM4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/59222#discussion_r459338386", "bodyText": "centre -> center", "author": "original-brownbear", "createdAt": "2020-07-23T09:55:51Z", "path": "docs/reference/setup/sysconfig/tcpretries.asciidoc", "diffHunk": "@@ -0,0 +1,49 @@\n+[[system-config-tcpretries]]\n+=== TCP retransmission timeout\n+\n+Each pair of nodes in a cluster communicates via a number of TCP connections\n+which remain open until one of the nodes shuts down or communication between\n+the nodes is disrupted by a failure in the underlying infrastructure.\n+\n+TCP provides reliable communication over occasionally-unreliable networks by\n+hiding temporary network disruptions from the communicating applications. Your\n+operating system will retransmit any lost messages a number of times before\n+informing the sender of any problem. Most Linux distributions default to\n+retransmitting any lost packets 15 times. Retransmissions back off\n+exponentially, so these 15 retransmissions take over 900 seconds to complete.\n+This means it takes Linux many minutes to detect a network partition or a\n+failed node with this method. Windows defaults to just 5 retransmissions which\n+corresponds with a timeout of around 6 seconds.\n+\n+The Linux default allows for communication over networks that may experience\n+very long periods of packet loss, but this default is excessive for production\n+networks within a single data centre as is the case for most {es} clusters.", "originalCommit": "cdec0f81e3e4e1dd7f831bf5a3fe13f9310fa7a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}