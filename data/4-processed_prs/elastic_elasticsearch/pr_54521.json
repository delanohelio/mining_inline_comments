{"pr_number": 54521, "pr_title": "[DOCS] EQL: Document `endsWith` function", "pr_createdAt": "2020-03-31T16:43:30Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54521", "timeline": [{"oid": "9c8fcd5df53b120428c833f94c75a60247f04237", "url": "https://github.com/elastic/elasticsearch/commit/9c8fcd5df53b120428c833f94c75a60247f04237", "message": "[DOCS] EQL: Document `endsWith` function", "committedDate": "2020-03-31T16:35:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MDU5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54521#discussion_r401540596", "bodyText": "With this PR I realized one small aspect here. It should be valid for all other string functions, though.\nOne can use a text field in the function and there won't be any exception and the query will work if that text field will have a keyword sub-field.\nFor example, the following mapping\n        \"hostname\" : {\n            \"type\" : \"text\",\n            \"fields\" : {\n                \"keyword\" : {\n                    \"type\" : \"keyword\",\n                    \"ignore_above\" : 256\n                }\n            }\n        }\n\nand the query process where endsWith(hostname, \"foo\") == true won't trigger an error.", "author": "astefan", "createdAt": "2020-04-01T11:19:54Z", "path": "docs/reference/eql/functions.asciidoc", "diffHunk": "@@ -8,8 +8,71 @@ experimental::[]\n \n {es} supports the following EQL functions:\n \n+* <<eql-fn-endswith>>\n * <<eql-fn-substring>>\n \n+[discrete]\n+[[eql-fn-endswith]]\n+=== `endsWith`\n+\n+Returns `true` if a source string ends with a provided substring.\n+\n+[%collapsible]\n+====\n+*Example*\n+[source,eql]\n+----\n+endsWith(\"regsvr32.exe\", \".exe\")          // returns true\n+endsWith(\"regsvr32.exe\", \".dll\")          // returns false\n+endsWith(\"\", \"\")                          // returns true\n+\n+// file.name = \"regsvr32.exe\"\n+endsWith(file.name, \".exe\")               // returns true\n+endsWith(file.name, \".dll\")               // returns false\n+\n+// file.extension = \".exe\"\n+endsWith(\"regsvr32.exe\", file.extension)  // returns true\n+endsWith(\"ntdll.dll\", file.name)          // returns false\n+\n+// file.name = [ \"ntdll.dll\", \"regsvr32.exe\" ]\n+endsWith(file.name, \".dll\")               // returns true\n+endsWith(file.name, \".exe\")               // returns false\n+\n+// null handling\n+endsWith(\"regsvr32.exe\", null)            // returns null\n+endsWith(\"\", null)                        // returns null \n+endsWith(null, \".exe\")                    // returns null\n+endsWith(null, null)                      // returns null\n+----\n+\n+*Syntax*\n+\n+[source,txt]\n+----\n+endsWith(<source>, <substring>)\n+----\n+\n+*Parameters*\n+\n+`<source>`::\n+(Required, string or `null`)\n+Source string. If `null`, the function returns `null`.\n++\n+If using a field as the argument, this parameter only supports the", "originalCommit": "9c8fcd5df53b120428c833f94c75a60247f04237", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MTIzNw==", "url": "https://github.com/elastic/elasticsearch/pull/54521#discussion_r401541237", "bodyText": "Valid statement for the other parameter, as well.", "author": "astefan", "createdAt": "2020-04-01T11:21:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MDU5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY0NzcwNg==", "url": "https://github.com/elastic/elasticsearch/pull/54521#discussion_r401647706", "bodyText": "Thanks again for pointing this out. Addressed with 508be06.", "author": "jrodewig", "createdAt": "2020-04-01T14:13:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MDU5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MDg2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/54521#discussion_r401540865", "bodyText": "This function is case insensitive, as well. And I believe it's worth being mentioned in docs.", "author": "astefan", "createdAt": "2020-04-01T11:20:25Z", "path": "docs/reference/eql/functions.asciidoc", "diffHunk": "@@ -8,8 +8,71 @@ experimental::[]\n \n {es} supports the following EQL functions:\n \n+* <<eql-fn-endswith>>\n * <<eql-fn-substring>>\n \n+[discrete]\n+[[eql-fn-endswith]]\n+=== `endsWith`\n+\n+Returns `true` if a source string ends with a provided substring.", "originalCommit": "9c8fcd5df53b120428c833f94c75a60247f04237", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY0NzU1Ng==", "url": "https://github.com/elastic/elasticsearch/pull/54521#discussion_r401647556", "bodyText": "Thanks! Addressed with 508be06.", "author": "jrodewig", "createdAt": "2020-04-01T14:13:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTU0MDg2NQ=="}], "type": "inlineReview"}, {"oid": "508be061d6be82a802863688765c46323f12283a", "url": "https://github.com/elastic/elasticsearch/commit/508be061d6be82a802863688765c46323f12283a", "message": "address review feedback", "committedDate": "2020-04-01T13:41:58Z", "type": "commit"}]}