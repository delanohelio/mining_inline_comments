{"pr_number": 51017, "pr_title": "[DOCS] Adds common definitions for security settings", "pr_createdAt": "2020-01-15T02:24:42Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/51017", "timeline": [{"oid": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "url": "https://github.com/elastic/elasticsearch/commit/7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "message": "[DOCS] More edits", "committedDate": "2020-02-13T07:14:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NDExNw==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382374117", "bodyText": "What's the situation with these //TBD parts? Are you looking for a review as to whether that content is correct, or trying to decide how to represent them in the docs?", "author": "tvernum", "createdAt": "2020-02-21T03:00:21Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjczNTU2NA==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382735564", "bodyText": "@tvernum Sorry for the lack of clarity. These \"TBD\" pieces are bits of information that only existed in a subset of the places where these definitions were used. For now, I've left them as-is and the TBD is to move that info into the shared definition if indeed they're applicable to all contexts (likely in a subsequent PR).", "author": "lcawl", "createdAt": "2020-02-21T18:25:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NDExNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NTQ5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382375496", "bodyText": "On master, no because we don't support Java 8 any more.\nOn 7.x, I think so. The set of options (and defaults) are different depend in the Java version.\nAlthough, strictly speaking we have different values between Java11 and Java12 as well (since #42155) so we may need to think this through a bit more.\n@jkakavas What do we want to do with FIPS here? BC JSSE doesn't support TLS1.3, so some of these ciphers aren't supported, but I think technically the default is still correct (we don't change the default cipher suite list based on the supported protocols list).", "author": "tvernum", "createdAt": "2020-02-21T03:06:15Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIyOTE0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r387229149", "bodyText": "Yes the default  is still that one so I agree we shouldn't add anything here (We could add something in the FIPS docs though, but this is part of the effort to make FIPS docs better ).\nThe actual list of unusable ones while running with fips mode ( we do print this in the logs on startup too)\nJDK11:\nTLS_AES_256_GCM_SHA384\nTLS_AES_128_GCM_SHA256\nTLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\nTLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\nTLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\nTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\nTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\nTLS_RSA_WITH_AES_256_GCM_SHA384\nTLS_RSA_WITH_AES_128_GCM_SHA256\n\nJDK13:\nTLS_AES_256_GCM_SHA384\nTLS_AES_128_GCM_SHA256\nTLS_CHACHA20_POLY1305_SHA256\nTLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384\nTLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256\nTLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384\nTLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\nTLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256\nTLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256\nTLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384\nTLS_RSA_WITH_AES_256_GCM_SHA384\nTLS_RSA_WITH_AES_128_GCM_SHA256", "author": "jkakavas", "createdAt": "2020-03-03T19:01:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NTQ5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk0NDI3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r387944275", "bodyText": "Thanks, @jkakavas I've drafted those changes in #53138", "author": "lcawl", "createdAt": "2020-03-04T21:27:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NTQ5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzk3MTkzNg==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r387971936", "bodyText": "The set of options (and defaults) are different depend in the Java version. Although, strictly speaking we have different values between Java11 and Java12 as well (since #42155) so we may need to think this through a bit more.\n\n@tvernum For now I have (1) deleted the \"ssl-cipher-suites-values-java8\" definition, (2) moved the Java11 info into a \"ssl-cipher-suites-values-java11\" definition, (3) put a Java12 URL in the \"ssl-cipher-suites-values\" definition and added the three ChaCha20 ciphers, (4) updated all occurrences of *-values-java8 and *-values-java11 to use the generic *-values.  I'm just keeping the *-java11 for now in case we backport this PR.", "author": "lcawl", "createdAt": "2020-03-04T22:26:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NTQ5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODAwNDIwNg==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r388004206", "bodyText": "Thanks @lcawl that sounds right to me.", "author": "tvernum", "createdAt": "2020-03-04T23:53:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NTQ5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NjE0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382376145", "bodyText": "It only applies to PEM files, but crypto file formats are a complex topic.\nThe PEM encoding format supports a variety of different key type and formats, so it's possible to have a EC private key in PKCS8 format inside a PEM file.\nWe don't want to go into that detail here, but \"PEM\" is a lot less specific than it sounds.", "author": "tvernum", "createdAt": "2020-02-21T03:09:09Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NjU3Ng==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382376576", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults \n          \n          \n            \n            keystore path ends in \".p12\", \".pfx\", or \".pkcs12\", this setting defaults", "author": "tvernum", "createdAt": "2020-02-21T03:11:02Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?\n+\n+tag::ssl-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional.\n+//TBD: You cannot use this setting and `ssl.secure_key_passphrase` at the same time.\n+end::ssl-key-passphrase[]\n+\n+tag::ssl-keystore-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_key_password` at the same time.\n+end::ssl-keystore-key-password[]\n+\n+tag::ssl-keystore-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_password` at the same time.\n+end::ssl-keystore-password[]\n+\n+tag::ssl-keystore-path[]\n+The path for the keystore file that contains a private key and certificate.\n+//TBD: It must be either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.key` at the same time.\n+end::ssl-keystore-path[]\n+\n+tag::ssl-keystore-secure-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.key_password` at the same time.\n+end::ssl-keystore-secure-key-password[]\n+\n+tag::ssl-keystore-secure-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.password` at the same time.\n+end::ssl-keystore-secure-password[]\n+\n+tag::ssl-keystore-type-pkcs11[]\n+The format of the keystore file. For the Java keystore format, use `jks`. For\n+PKCS#12 files, use `PKCS12`. For a PKCS#11 token, use `PKCS11`. The default is\n+`jks`.\n+end::ssl-keystore-type-pkcs11[]\n+\n+tag::ssl-keystore-type-pkcs12[]\n+The format of the keystore file. It must be either `jks` or `PKCS12`. If the\n+keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults ", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Njc4Mg==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382376782", "bodyText": "@jkakavas Are you happy with \"If the JVM supports ...\" as covering BC-JSSE FIPS? or should we be explicit?\nMaybe\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM supports TLSv1.3,\n          \n          \n            \n            `SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM's SSL provider supports TLSv1.3,\n          \n      \n    \n    \n  \n\nIs that simple enough not to confuse general users while being explicit enough for FIPS?", "author": "tvernum", "createdAt": "2020-02-21T03:11:56Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?\n+\n+tag::ssl-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional.\n+//TBD: You cannot use this setting and `ssl.secure_key_passphrase` at the same time.\n+end::ssl-key-passphrase[]\n+\n+tag::ssl-keystore-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_key_password` at the same time.\n+end::ssl-keystore-key-password[]\n+\n+tag::ssl-keystore-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_password` at the same time.\n+end::ssl-keystore-password[]\n+\n+tag::ssl-keystore-path[]\n+The path for the keystore file that contains a private key and certificate.\n+//TBD: It must be either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.key` at the same time.\n+end::ssl-keystore-path[]\n+\n+tag::ssl-keystore-secure-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.key_password` at the same time.\n+end::ssl-keystore-secure-key-password[]\n+\n+tag::ssl-keystore-secure-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.password` at the same time.\n+end::ssl-keystore-secure-password[]\n+\n+tag::ssl-keystore-type-pkcs11[]\n+The format of the keystore file. For the Java keystore format, use `jks`. For\n+PKCS#12 files, use `PKCS12`. For a PKCS#11 token, use `PKCS11`. The default is\n+`jks`.\n+end::ssl-keystore-type-pkcs11[]\n+\n+tag::ssl-keystore-type-pkcs12[]\n+The format of the keystore file. It must be either `jks` or `PKCS12`. If the\n+keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults \n+to `PKCS12`. Otherwise, it defaults to `jks`.\n+end::ssl-keystore-type-pkcs12[]\n+\n+tag::ssl-secure-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional. \n+//TBD: You cannot use this setting and `ssl.key_passphrase` at the same time.\n+end::ssl-secure-key-passphrase[]\n+\n+tag::ssl-supported-protocols[]\n+Supported protocols with versions. Valid protocols: `SSLv2Hello`,\n+`SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM supports TLSv1.3,", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzIzMDMwNg==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r387230306", "bodyText": "I agree that we should put something generic here like your suggestion and if we want to refer to FIPS related limitations, we should do it in a different place", "author": "jkakavas", "createdAt": "2020-03-03T19:04:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Njc4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NzMxMA==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382377310", "bodyText": "No, I don't think there's a reason to have all 3 variants. The main (first) one should be accurate everywhere.", "author": "tvernum", "createdAt": "2020-02-21T03:14:30Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?\n+\n+tag::ssl-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional.\n+//TBD: You cannot use this setting and `ssl.secure_key_passphrase` at the same time.\n+end::ssl-key-passphrase[]\n+\n+tag::ssl-keystore-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_key_password` at the same time.\n+end::ssl-keystore-key-password[]\n+\n+tag::ssl-keystore-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_password` at the same time.\n+end::ssl-keystore-password[]\n+\n+tag::ssl-keystore-path[]\n+The path for the keystore file that contains a private key and certificate.\n+//TBD: It must be either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.key` at the same time.\n+end::ssl-keystore-path[]\n+\n+tag::ssl-keystore-secure-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.key_password` at the same time.\n+end::ssl-keystore-secure-key-password[]\n+\n+tag::ssl-keystore-secure-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.password` at the same time.\n+end::ssl-keystore-secure-password[]\n+\n+tag::ssl-keystore-type-pkcs11[]\n+The format of the keystore file. For the Java keystore format, use `jks`. For\n+PKCS#12 files, use `PKCS12`. For a PKCS#11 token, use `PKCS11`. The default is\n+`jks`.\n+end::ssl-keystore-type-pkcs11[]\n+\n+tag::ssl-keystore-type-pkcs12[]\n+The format of the keystore file. It must be either `jks` or `PKCS12`. If the\n+keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults \n+to `PKCS12`. Otherwise, it defaults to `jks`.\n+end::ssl-keystore-type-pkcs12[]\n+\n+tag::ssl-secure-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional. \n+//TBD: You cannot use this setting and `ssl.key_passphrase` at the same time.\n+end::ssl-secure-key-passphrase[]\n+\n+tag::ssl-supported-protocols[]\n+Supported protocols with versions. Valid protocols: `SSLv2Hello`,\n+`SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM supports TLSv1.3,\n+the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is\n+`TLSv1.2,TLSv1.1`.\n++\n+--\n+NOTE: If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` \n+or `SSLv3`. See <<fips-140-compliance>>.\n+\n+--\n+end::ssl-supported-protocols[]\n+//TBD: Are these three different definitions for supported protocols valid?", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc3MDM4Ng==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382770386", "bodyText": "Done, thanks!", "author": "lcawl", "createdAt": "2020-02-21T19:41:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NzMxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NzQzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382377435", "bodyText": "I don't think we need this. If it's used somewhere it's probably out of date.", "author": "tvernum", "createdAt": "2020-02-21T03:15:08Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?\n+\n+tag::ssl-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional.\n+//TBD: You cannot use this setting and `ssl.secure_key_passphrase` at the same time.\n+end::ssl-key-passphrase[]\n+\n+tag::ssl-keystore-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_key_password` at the same time.\n+end::ssl-keystore-key-password[]\n+\n+tag::ssl-keystore-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_password` at the same time.\n+end::ssl-keystore-password[]\n+\n+tag::ssl-keystore-path[]\n+The path for the keystore file that contains a private key and certificate.\n+//TBD: It must be either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.key` at the same time.\n+end::ssl-keystore-path[]\n+\n+tag::ssl-keystore-secure-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.key_password` at the same time.\n+end::ssl-keystore-secure-key-password[]\n+\n+tag::ssl-keystore-secure-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.password` at the same time.\n+end::ssl-keystore-secure-password[]\n+\n+tag::ssl-keystore-type-pkcs11[]\n+The format of the keystore file. For the Java keystore format, use `jks`. For\n+PKCS#12 files, use `PKCS12`. For a PKCS#11 token, use `PKCS11`. The default is\n+`jks`.\n+end::ssl-keystore-type-pkcs11[]\n+\n+tag::ssl-keystore-type-pkcs12[]\n+The format of the keystore file. It must be either `jks` or `PKCS12`. If the\n+keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults \n+to `PKCS12`. Otherwise, it defaults to `jks`.\n+end::ssl-keystore-type-pkcs12[]\n+\n+tag::ssl-secure-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional. \n+//TBD: You cannot use this setting and `ssl.key_passphrase` at the same time.\n+end::ssl-secure-key-passphrase[]\n+\n+tag::ssl-supported-protocols[]\n+Supported protocols with versions. Valid protocols: `SSLv2Hello`,\n+`SSLv3`, `TLSv1`, `TLSv1.1`, `TLSv1.2`, `TLSv1.3`. If the JVM supports TLSv1.3,\n+the default is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is\n+`TLSv1.2,TLSv1.1`.\n++\n+--\n+NOTE: If `xpack.security.fips_mode.enabled` is `true`, you cannot use `SSLv2Hello` \n+or `SSLv3`. See <<fips-140-compliance>>.\n+\n+--\n+end::ssl-supported-protocols[]\n+//TBD: Are these three different definitions for supported protocols valid?\n+tag::ssl-supported-protocols-1[]\n+Supported protocols for TLS/SSL (with versions). Defaults to `TLSv1.3,TLSv1.2,TLSv1.1`.\n+end::ssl-supported-protocols-1[]\n+\n+tag::ssl-supported-protocols-2[]\n+Specifies the supported protocols for TLS/SSL. If the JVM supports TLSv1.3, the \n+defaults is `TLSv1.3,TLSv1.2,TLSv1.1`. Otherwise, the default is\n+`TLSv1.2,TLSv1.1`.\n+end::ssl-supported-protocols-2[]\n+\n+tag::ssl-truststore-password[]\n+The password for the truststore.\n+//TBD: You cannot use this setting and `ssl.truststore.secure_password` at the same time.\n+end::ssl-truststore-password[]\n+\n+tag::ssl-truststore-path[]\n+The path for the keystore that contains the certificates to trust. It must be\n+either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.certificate_authorities` at the same time.\n+end::ssl-truststore-path[]\n+\n+tag::ssl-truststore-path-jks[]\n+The path for the Java keystore file that contains the certificates to trust.", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc2NjAxOQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382766019", "bodyText": "It's used in the ssl.truststore.path in http://elasticsearch_51017.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/security-settings.html and the {ssl-prefix-ssl}.truststore.path in http://elasticsearch_51017.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/notification-settings.html and http://elasticsearch_51017.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/monitoring-settings.html\nI'll switch those occurrence to using the \"ssl-truststore-path\" shared definition instead.", "author": "lcawl", "createdAt": "2020-02-21T19:31:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3NzQzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Nzk4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382377987", "bodyText": "I think we probably want to merge the pkcs11 and pkcs12 variants. I don't believe there is any context in which the beahviour of this setting is different.", "author": "tvernum", "createdAt": "2020-02-21T03:17:30Z", "path": "docs/reference/settings/common-defs.asciidoc", "diffHunk": "@@ -0,0 +1,167 @@\n+tag::ssl-certificate[]\n+Specifies the path for the PEM encoded certificate (or certificate chain) that is\n+associated with the key.\n+//TBD: This setting can be used only if `ssl.key` is set.\n+end::ssl-certificate[]\n+\n+tag::ssl-certificate-authorities[]\n+List of paths to PEM encoded certificate files that should be trusted.\n+//TBD: You cannot use this setting and `ssl.truststore.path` at the same time.\n+end::ssl-certificate-authorities[]\n+\n+tag::ssl-cipher-suites-values[]\n+Supported cipher suites can be found in Oracle's\n+https://docs.oracle.com/en/java/javase/11/security/oracle-providers.html#GUID-7093246A-31A3-4304-AC5F-5FB6400405E2[Java Cryptography Architecture documentation].\n+The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values[]\n+//TBD: Are these two different definitions (with different Oracle URLs) for cipher_suites required?\n+tag::ssl-cipher-suites-values-java8[]\n+Supported cipher suites can be found in Oracle's http://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html[\n+Java Cryptography Architecture documentation]. The default is `TLS_AES_256_GCM_SHA384`, `TLS_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA`,\n+`TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA`, `TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA`,\n+`TLS_RSA_WITH_AES_256_GCM_SHA384`, `TLS_RSA_WITH_AES_128_GCM_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA256`, `TLS_RSA_WITH_AES_128_CBC_SHA256`,\n+`TLS_RSA_WITH_AES_256_CBC_SHA`, `TLS_RSA_WITH_AES_128_CBC_SHA`.\n+end::ssl-cipher-suites-values-java8[]\n+\n+tag::ssl-key-pem[]\n+Path to a PEM encoded file containing the private key.\n+//TBD: You cannot use this setting and `ssl.keystore.path` at the same time.\n+end::ssl-key-pem[]\n+//TBD: Is it correct that this setting only applies to PEM files or can it support other types?\n+\n+tag::ssl-key-passphrase[]\n+The passphrase that is used to decrypt the private key. Since the key might not\n+be encrypted, this value is optional.\n+//TBD: You cannot use this setting and `ssl.secure_key_passphrase` at the same time.\n+end::ssl-key-passphrase[]\n+\n+tag::ssl-keystore-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_key_password` at the same time.\n+end::ssl-keystore-key-password[]\n+\n+tag::ssl-keystore-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.secure_password` at the same time.\n+end::ssl-keystore-password[]\n+\n+tag::ssl-keystore-path[]\n+The path for the keystore file that contains a private key and certificate.\n+//TBD: It must be either a Java keystore (jks) or a PKCS#12 file.\n+//TBD: You cannot use this setting and `ssl.key` at the same time.\n+end::ssl-keystore-path[]\n+\n+tag::ssl-keystore-secure-key-password[]\n+The password for the key in the keystore. The default is the keystore password.\n+//TBD: You cannot use this setting and `ssl.keystore.key_password` at the same time.\n+end::ssl-keystore-secure-key-password[]\n+\n+tag::ssl-keystore-secure-password[]\n+The password for the keystore.\n+//TBD: You cannot use this setting and `ssl.keystore.password` at the same time.\n+end::ssl-keystore-secure-password[]\n+\n+tag::ssl-keystore-type-pkcs11[]\n+The format of the keystore file. For the Java keystore format, use `jks`. For\n+PKCS#12 files, use `PKCS12`. For a PKCS#11 token, use `PKCS11`. The default is\n+`jks`.\n+end::ssl-keystore-type-pkcs11[]\n+\n+tag::ssl-keystore-type-pkcs12[]\n+The format of the keystore file. It must be either `jks` or `PKCS12`. If the\n+keystore path ends in \".p12\", \".pfx\", or \"pkcs12\", this setting defaults \n+to `PKCS12`. Otherwise, it defaults to `jks`.\n+end::ssl-keystore-type-pkcs12[]", "originalCommit": "7de4e1492ae9a565034a8eb0fbfa84fe60394ddc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjc3NjU1OA==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r382776558", "bodyText": "@tvernum Does that mean we should get rid of this section altogether?: http://elasticsearch_51017.docs-preview.app.elstc.co/guide/en/elasticsearch/reference/master/security-settings.html#security-http-pkcs11-tokens", "author": "lcawl", "createdAt": "2020-02-21T19:54:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Nzk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODAwMzc4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r388003785", "bodyText": "I'll admit my PKCS#11 knowledge is pretty thin - maybe @jkakavas can chime in here, but ...\nNo, we still want that section, I think (but am not 100% sure) that our PKCS#11 support is consistent across all SSL contexts, so anything we say for xpack.security.http.ssl.keystore.type could technically be said about monitoring ssl, etc.\nHowever, there is a limit of having only 1 PKCS#11 provider per JVM, so setting this up & describing it is pretty complex. Maybe we leave this for now so we can merge it, and then come back to it. I think we'd need to setup a PKCS#11 environment for testing, and I don't have cycles for that right now.", "author": "tvernum", "createdAt": "2020-03-04T23:52:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Nzk4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODE1OTA4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/51017#discussion_r388159085", "bodyText": "Tim's comment is right. PKCS#11 support is consistent across all SSL contexts, but there can only be 1 PKCS#11 provider/keystore and we don't offer a way to configure which alias in a keystore will be used. So that means that of PKCS#11 is used, then there is a single key/certificate pair that needs to be shared across all SSL contexts ( more details are shared in #33459 ) . I agree we can handle adding a few more details in PKCS11 in another PR", "author": "jkakavas", "createdAt": "2020-03-05T09:07:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjM3Nzk4Nw=="}], "type": "inlineReview"}, {"oid": "188f54f78e28bae405060bc83189531f576daa95", "url": "https://github.com/elastic/elasticsearch/commit/188f54f78e28bae405060bc83189531f576daa95", "message": "[DOCS] Adds common definitions for security settings", "committedDate": "2020-03-06T01:10:36Z", "type": "commit"}, {"oid": "5371cfae05300cb0eff73454c97bcf991b711ce4", "url": "https://github.com/elastic/elasticsearch/commit/5371cfae05300cb0eff73454c97bcf991b711ce4", "message": "[DOCS] More SSL setting edits", "committedDate": "2020-03-06T01:10:36Z", "type": "commit"}, {"oid": "dfe1e57ed729b8bce32a56483b7d262c440038c7", "url": "https://github.com/elastic/elasticsearch/commit/dfe1e57ed729b8bce32a56483b7d262c440038c7", "message": "[DOCS] More edits", "committedDate": "2020-03-06T01:10:36Z", "type": "commit"}, {"oid": "031397734e5a1046a67b961eaaa46050a1109e05", "url": "https://github.com/elastic/elasticsearch/commit/031397734e5a1046a67b961eaaa46050a1109e05", "message": "Update docs/reference/settings/common-defs.asciidoc\n\nCo-Authored-By: Tim Vernum <tim@adjective.org>", "committedDate": "2020-03-06T01:10:36Z", "type": "commit"}, {"oid": "b78d1bdf26ef1b82b942baa8fc739715135e0a68", "url": "https://github.com/elastic/elasticsearch/commit/b78d1bdf26ef1b82b942baa8fc739715135e0a68", "message": "[DOCS] Removes shared ssl-truststore-path-jks definition", "committedDate": "2020-03-06T01:10:36Z", "type": "commit"}, {"oid": "6cee48c9cada189c9e6716d21cc0c5d30dc11289", "url": "https://github.com/elastic/elasticsearch/commit/6cee48c9cada189c9e6716d21cc0c5d30dc11289", "message": "[DOCS] Removes extra definitions for ssl-supported-protocols", "committedDate": "2020-03-06T01:10:37Z", "type": "commit"}, {"oid": "e9fb6b2e3cb55e3d14d18360c3d81a91fe314704", "url": "https://github.com/elastic/elasticsearch/commit/e9fb6b2e3cb55e3d14d18360c3d81a91fe314704", "message": "[DOCS] Removes ssl-keystore-type-pkcs11 shared definition", "committedDate": "2020-03-06T01:10:37Z", "type": "commit"}, {"oid": "9f16dc2d3f8abeffb94af93b9451054e45543b29", "url": "https://github.com/elastic/elasticsearch/commit/9f16dc2d3f8abeffb94af93b9451054e45543b29", "message": "[DOCS] Adds Java12 cipher suites values", "committedDate": "2020-03-06T01:10:37Z", "type": "commit"}, {"oid": "a910984c4a3e184beabf87e2774f844b8fa1a04b", "url": "https://github.com/elastic/elasticsearch/commit/a910984c4a3e184beabf87e2774f844b8fa1a04b", "message": "[DOCS] Removes Java8 cipher suites", "committedDate": "2020-03-06T01:10:37Z", "type": "commit"}, {"oid": "f1587aa880040d7eead6a86918768d7beb722501", "url": "https://github.com/elastic/elasticsearch/commit/f1587aa880040d7eead6a86918768d7beb722501", "message": "Update docs/reference/settings/common-defs.asciidoc\n\nCo-Authored-By: Tim Vernum <tim@adjective.org>", "committedDate": "2020-03-06T01:10:37Z", "type": "commit"}, {"oid": "f1587aa880040d7eead6a86918768d7beb722501", "url": "https://github.com/elastic/elasticsearch/commit/f1587aa880040d7eead6a86918768d7beb722501", "message": "Update docs/reference/settings/common-defs.asciidoc\n\nCo-Authored-By: Tim Vernum <tim@adjective.org>", "committedDate": "2020-03-06T01:10:37Z", "type": "forcePushed"}]}