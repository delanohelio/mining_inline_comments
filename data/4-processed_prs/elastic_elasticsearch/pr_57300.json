{"pr_number": 57300, "pr_title": "[ML] Anomaly detection jobs should allow missing values for geo fields", "pr_createdAt": "2020-05-28T16:11:14Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57300", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTk2NTQxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/57300#discussion_r431965415", "bodyText": "Theoretically it would save a memory allocation and garbage collection to just return value;.  Maybe Hotspot will optimise this in practice.\nSame in the other file.", "author": "droberts195", "createdAt": "2020-05-28T16:24:24Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/extractor/GeoPointField.java", "diffHunk": "@@ -24,9 +24,13 @@ public GeoPointField(String name) {\n     @Override\n     public Object[] value(SearchHit hit) {\n         Object[] value = super.value(hit);\n-        if (value.length != 1) {\n+        if (value.length == 0) {\n+            return new Object[0];", "originalCommit": "31296ca0b15c7af666ae2302bcde64150253c97c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "39225052b5d2713147502372b8a6648a16d40d8c", "url": "https://github.com/elastic/elasticsearch/commit/39225052b5d2713147502372b8a6648a16d40d8c", "message": "[ML] Anomaly detection jobs should allow missing values for geo fields\n\nAllows geo fields (`geo_point`, `geo_shape`) to have missing values.\nFixes a bug where such missing values would result in an error.\n\nCloses #57299", "committedDate": "2020-05-28T17:43:06Z", "type": "commit"}, {"oid": "50ff241f963323c1ef2e357defc59572484701b8", "url": "https://github.com/elastic/elasticsearch/commit/50ff241f963323c1ef2e357defc59572484701b8", "message": "Return value at hand instead of creating new empty array", "committedDate": "2020-05-28T17:43:32Z", "type": "commit"}, {"oid": "50ff241f963323c1ef2e357defc59572484701b8", "url": "https://github.com/elastic/elasticsearch/commit/50ff241f963323c1ef2e357defc59572484701b8", "message": "Return value at hand instead of creating new empty array", "committedDate": "2020-05-28T17:43:32Z", "type": "forcePushed"}]}