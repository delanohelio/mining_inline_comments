{"pr_number": 57399, "pr_title": "Ensure type exists for all monitoring configuration", "pr_createdAt": "2020-05-31T17:02:56Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57399", "timeline": [{"oid": "bf5fc5602a86bc54ec48f668f902e7d971504514", "url": "https://github.com/elastic/elasticsearch/commit/bf5fc5602a86bc54ec48f668f902e7d971504514", "message": "Ensure type exists for all monitoring configuration", "committedDate": "2020-05-31T17:00:28Z", "type": "commit"}, {"oid": "25970889337a76356fa563d42523c295fbd0d17a", "url": "https://github.com/elastic/elasticsearch/commit/25970889337a76356fa563d42523c295fbd0d17a", "message": "fix test, can't validate dependent settings across node and dynamic", "committedDate": "2020-05-31T19:27:40Z", "type": "commit"}, {"oid": "269854dba99c38ed712d725f2bb82732a49bddb1", "url": "https://github.com/elastic/elasticsearch/commit/269854dba99c38ed712d725f2bb82732a49bddb1", "message": "another test setup fix", "committedDate": "2020-05-31T20:21:47Z", "type": "commit"}, {"oid": "dfbdc097627fcc1cdbf390f84563b0e565c9be87", "url": "https://github.com/elastic/elasticsearch/commit/dfbdc097627fcc1cdbf390f84563b0e565c9be87", "message": "more test fixes", "committedDate": "2020-05-31T20:53:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjk4NDgwNw==", "url": "https://github.com/elastic/elasticsearch/pull/57399#discussion_r432984807", "bodyText": "This is necessary since this test (and some others here) set the type via node level setting but the settings validation does not validate across node level vs. dynamic settings (they get merged after independent validation).\nIt also looks like we don't support validation across persistent vs. transient settings either, which makes any of these cross settings dependencies validation a bit terse. This translates to a real change in behavior w.r.t monitoring, but cross level validation is a bigger issue then monitoring. The safety here (imo) outweighs the convenience of cross type setting validation (and already exists for all HTTP type settings).", "author": "jakelandis", "createdAt": "2020-05-31T21:12:38Z", "path": "x-pack/plugin/monitoring/src/internalClusterTest/java/org/elasticsearch/xpack/monitoring/integration/MonitoringIT.java", "diffHunk": "@@ -364,6 +364,7 @@ public void enableMonitoring() throws Exception {\n \n         final Settings settings = Settings.builder()\n                 .put(\"xpack.monitoring.collection.enabled\", true)\n+                .put(\"xpack.monitoring.exporters._local.type\", \"local\")", "originalCommit": "dfbdc097627fcc1cdbf390f84563b0e565c9be87", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}