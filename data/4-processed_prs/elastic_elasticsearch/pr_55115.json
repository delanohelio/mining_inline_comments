{"pr_number": 55115, "pr_title": "Always use deprecateAndMaybeLog for deprecation warnings", "pr_createdAt": "2020-04-13T14:43:28Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55115", "timeline": [{"oid": "97e56ac88e7be300fbaf674ebe61740af204935b", "url": "https://github.com/elastic/elasticsearch/commit/97e56ac88e7be300fbaf674ebe61740af204935b", "message": "Always use deprecateAndMaybeLog for deprecation warnings\n\nCloses #53137. Replace calls to `deprecate(String,Object...)` with\n`deprecateAndMaybeLog(...)`, with an appropriate key, so that all\nmessages can potentially be deduplicated.", "committedDate": "2020-04-13T14:31:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY3OTIxNQ==", "url": "https://github.com/elastic/elasticsearch/pull/55115#discussion_r407679215", "bodyText": "Doesn't this test now overlap with the maybelog test further down in the file?", "author": "rjernst", "createdAt": "2020-04-13T19:46:48Z", "path": "qa/evil-tests/src/test/java/org/elasticsearch/common/logging/EvilLoggerTests.java", "diffHunk": "@@ -111,7 +111,7 @@ public void testDeprecationLogger() throws IOException, UserException {\n \n         final int deprecatedIterations = randomIntBetween(0, 256);\n         for (int i = 0; i < deprecatedIterations; i++) {\n-            deprecationLogger.deprecated(\"This is a deprecation message\");\n+            deprecationLogger.deprecatedAndMaybeLog(\"key\" + i, \"This is a deprecation message\");", "originalCommit": "97e56ac88e7be300fbaf674ebe61740af204935b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODAzNjk3OA==", "url": "https://github.com/elastic/elasticsearch/pull/55115#discussion_r408036978", "bodyText": "Good call. I compared them, and the removed this test.", "author": "pugnascotia", "createdAt": "2020-04-14T10:36:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY3OTIxNQ=="}], "type": "inlineReview"}, {"oid": "c5a251cce600c3822b770c0c5e98767de4f2cd83", "url": "https://github.com/elastic/elasticsearch/commit/c5a251cce600c3822b770c0c5e98767de4f2cd83", "message": "Merge remote-tracking branch 'upstream/master' into 53137-dedup-deprecation-warnings", "committedDate": "2020-04-14T10:34:29Z", "type": "commit"}, {"oid": "eaecdbeaf70a5c257cd7bd125f725bb827032735", "url": "https://github.com/elastic/elasticsearch/commit/eaecdbeaf70a5c257cd7bd125f725bb827032735", "message": "Remove redundant test", "committedDate": "2020-04-14T10:36:18Z", "type": "commit"}, {"oid": "699b67db72e4737c6109c973699c1bb162647de4", "url": "https://github.com/elastic/elasticsearch/commit/699b67db72e4737c6109c973699c1bb162647de4", "message": "Merge remote-tracking branch 'upstream/master' into 53137-dedup-deprecation-warnings", "committedDate": "2020-04-16T13:27:44Z", "type": "commit"}, {"oid": "617e856c348f9d3336f882ee0edd37011eee7cf5", "url": "https://github.com/elastic/elasticsearch/commit/617e856c348f9d3336f882ee0edd37011eee7cf5", "message": "Fix test", "committedDate": "2020-04-16T13:30:44Z", "type": "commit"}]}