{"pr_number": 56356, "pr_title": "[DOCS] Add collapsible sections to 8.0 breaking changes [Part 4]", "pr_createdAt": "2020-05-07T15:14:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56356", "timeline": [{"oid": "bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "url": "https://github.com/elastic/elasticsearch/commit/bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "message": "[DOCS] Add collapsible sections to 8.0 breaking changes [Part 4]", "committedDate": "2020-05-07T14:47:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NDgzMw==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421584833", "bodyText": "@cbuescher Do you mind confirming that this accurately reflects your original guidance?\nThis is mostly a formatting change. I just want to ensure I don't unintentionally remove any context here.\nFeel free to ignore the other changes in this PR unless you'd like to review them.", "author": "jrodewig", "createdAt": "2020-05-07T15:15:19Z", "path": "docs/reference/migration/migrate_8_0/java.asciidoc", "diffHunk": "@@ -9,27 +9,36 @@\n \n // end::notable-breaking-changes[]\n \n-[float]\n-==== Changes to Fuzziness\n-\n+.Changes to fuzziness\n+[%collapsible]\n+====\n+*Details* +\n To create `Fuzziness` instances, use the `fromString` and `fromEdits` method\n instead of the `build` method that used to accept both Strings and numeric\n values. Several fuzziness setters on query builders (e.g.\n MatchQueryBuilder#fuzziness) now accept only a `Fuzziness`instance instead of\n-an Object. You should preferably use the available constants (e.g.\n-Fuzziness.ONE, Fuzziness.AUTO) or build your own instance using the above\n-mentioned factory methods.\n+an Object.\n \n Fuzziness used to be lenient when it comes to parsing arbitrary numeric values\n while silently truncating them to one of the three allowed edit distances 0, 1\n or 2. This leniency is now removed and the class will throw errors when trying\n to construct an instance with another value (e.g. floats like 1.3 used to get\n-accepted but truncated to 1). You should use one of the allowed values.\n-\n-\n-[float]\n-==== Changes to Repository\n-\n+accepted but truncated to 1).\n+\n+*Impact* +\n+Use the available constants (e.g. Fuzziness.ONE, Fuzziness.AUTO) or build your\n+own instance using the above mentioned factory methods. Use only allowed\n+`Fuzziness` values.", "originalCommit": "bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NTYwMg==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421585602", "bodyText": "@polyfractal Can you confirm this guidance? If there are other steps users should take, let me know and I'll get it added.\nFeel free to ignore the other changes in this PR unless you'd like to review them. These are mostly formatting changes to make the changes collapsible.", "author": "jrodewig", "createdAt": "2020-05-07T15:16:24Z", "path": "docs/reference/migration/migrate_8_0/rollup.asciidoc", "diffHunk": "@@ -9,12 +9,18 @@\n \n // end::notable-breaking-changes[]\n \n-[float]\n-==== StartRollupJob endpoint returns success if job already started\n-\n+.The StartRollupJob endpoint now returns a success status if a job has already started.\n+[%collapsible]\n+====\n+*Details* +\n Previously, attempting to start an already-started rollup job would\n result in a `500 InternalServerError: Cannot start task for Rollup Job\n [job] because state was [STARTED]` exception.\n \n Now, attempting to start a job that is already started will just\n-return a successful `200 OK: started` response.\n\\ No newline at end of file\n+return a successful `200 OK: started` response.\n+\n+*Impact* +\n+Update your workflow and applications to assume a `200` status response for\n+requests attempting to start a rollup job that has already started.", "originalCommit": "bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU5NDI4Mg==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421594282", "bodyText": "I might tweak it to say something like:\n\nUpdate your workflow and applications to assume that a 200 status in response to attempting to start a rollup job means the job is in an actively started state.  The request itself may have started the job, or it was previously running and so the request had no effect.", "author": "polyfractal", "createdAt": "2020-05-07T15:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NTYwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYyMTkzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421621935", "bodyText": "Thanks @polyfractal. Updated with 9108b40.", "author": "jrodewig", "createdAt": "2020-05-07T16:07:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NTYwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTY2NzM1NA==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421667354", "bodyText": "@jrodewig LGTM!", "author": "polyfractal", "createdAt": "2020-05-07T17:20:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTU4NTYwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMjU3NA==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421612574", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            MatchQueryBuilder#fuzziness) now accept only a `Fuzziness`instance instead of\n          \n          \n            \n            MatchQueryBuilder#fuzziness) now accept only a `Fuzziness` instance instead of", "author": "debadair", "createdAt": "2020-05-07T15:53:44Z", "path": "docs/reference/migration/migrate_8_0/java.asciidoc", "diffHunk": "@@ -9,27 +9,36 @@\n \n // end::notable-breaking-changes[]\n \n-[float]\n-==== Changes to Fuzziness\n-\n+.Changes to fuzziness\n+[%collapsible]\n+====\n+*Details* +\n To create `Fuzziness` instances, use the `fromString` and `fromEdits` method\n instead of the `build` method that used to accept both Strings and numeric\n values. Several fuzziness setters on query builders (e.g.\n MatchQueryBuilder#fuzziness) now accept only a `Fuzziness`instance instead of", "originalCommit": "bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYyMDEzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421620135", "bodyText": "Thanks!", "author": "jrodewig", "createdAt": "2020-05-07T16:04:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxMjU3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxNDE1NA==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421614154", "bodyText": "Should this include v7.0, or should it be prior to 7.0?", "author": "debadair", "createdAt": "2020-05-07T15:55:50Z", "path": "docs/reference/migration/migrate_8_0/node.asciidoc", "diffHunk": "@@ -36,11 +46,18 @@ corresponding node to use this location for its data path. If your nodes each\n have more than one data path in their `path.data` settings then you should move\n all the corresponding subfolders in parallel. Each node uses the same subfolder\n (e.g. `nodes/2`) across all its data paths.\n+====\n \n-[float]\n-==== Rejection of ancient closed indices\n-\n+.Closed indices created in {es} 7.0 and earlier versions are not supported.", "originalCommit": "bf8c8b63ecadd4a4317de585d392fd5ad4cf913c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYyMTMxMA==", "url": "https://github.com/elastic/elasticsearch/pull/56356#discussion_r421621310", "bodyText": "This should be 6.x. Fixed with bc4b2f3. Thanks!", "author": "jrodewig", "createdAt": "2020-05-07T16:06:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYxNDE1NA=="}], "type": "inlineReview"}, {"oid": "83fb712c163557b0da2ed6aee27623f0ff7177c6", "url": "https://github.com/elastic/elasticsearch/commit/83fb712c163557b0da2ed6aee27623f0ff7177c6", "message": "Update docs/reference/migration/migrate_8_0/java.asciidoc\n\nCo-authored-by: debadair <debadair@elastic.co>", "committedDate": "2020-05-07T16:04:26Z", "type": "commit"}, {"oid": "bc4b2f39c9b32b74c5fcb82ad6c1bdc4d0509865", "url": "https://github.com/elastic/elasticsearch/commit/bc4b2f39c9b32b74c5fcb82ad6c1bdc4d0509865", "message": "fix version number", "committedDate": "2020-05-07T16:05:50Z", "type": "commit"}, {"oid": "9108b404354c1d73b4352ca00eca3251591f53e5", "url": "https://github.com/elastic/elasticsearch/commit/9108b404354c1d73b4352ca00eca3251591f53e5", "message": "reword rollup entry", "committedDate": "2020-05-07T16:06:51Z", "type": "commit"}, {"oid": "93e34ac212bd6d5997e3eab492f1eac7fff0e5bf", "url": "https://github.com/elastic/elasticsearch/commit/93e34ac212bd6d5997e3eab492f1eac7fff0e5bf", "message": "add missing delimiter", "committedDate": "2020-05-07T16:14:28Z", "type": "commit"}, {"oid": "4cac47254d6fc71b40a06bbef576e3c27d326c99", "url": "https://github.com/elastic/elasticsearch/commit/4cac47254d6fc71b40a06bbef576e3c27d326c99", "message": "add missing period", "committedDate": "2020-05-07T16:24:15Z", "type": "commit"}, {"oid": "de6ee08b4723ef702547f769e0fa5f05b06499cd", "url": "https://github.com/elastic/elasticsearch/commit/de6ee08b4723ef702547f769e0fa5f05b06499cd", "message": "missing periods", "committedDate": "2020-05-07T16:26:51Z", "type": "commit"}, {"oid": "7cdd474e92e94046d95096a3ab07726febad0e5f", "url": "https://github.com/elastic/elasticsearch/commit/7cdd474e92e94046d95096a3ab07726febad0e5f", "message": "revert java API changes", "committedDate": "2020-05-11T12:38:37Z", "type": "commit"}]}