{"pr_number": 56747, "pr_title": "Simplify generics on Mapper.Builder", "pr_createdAt": "2020-05-14T09:15:50Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/56747", "timeline": [{"oid": "a2ce0d0122d8d266a16c8aa911bee16ae171a2ce", "url": "https://github.com/elastic/elasticsearch/commit/a2ce0d0122d8d266a16c8aa911bee16ae171a2ce", "message": "Simply generics on Mapper.Builder", "committedDate": "2020-05-14T09:12:49Z", "type": "commit"}, {"oid": "71e8cedfaee7e41560819c8c358d3baae914dc2e", "url": "https://github.com/elastic/elasticsearch/commit/71e8cedfaee7e41560819c8c358d3baae914dc2e", "message": "Merge remote-tracking branch 'origin/master' into mapper/builder-generics", "committedDate": "2020-05-14T09:24:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEwNTIyNw==", "url": "https://github.com/elastic/elasticsearch/pull/56747#discussion_r425105227", "bodyText": "just out of curiosity: this seems to be one of the few reasons where the generic build return type was needed?", "author": "cbuescher", "createdAt": "2020-05-14T12:42:23Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/MetadataFieldMapper.java", "diffHunk": "@@ -45,10 +45,12 @@\n     }\n \n     @SuppressWarnings(\"rawtypes\")\n-    public abstract static class Builder<T extends Builder, Y extends MetadataFieldMapper> extends FieldMapper.Builder<T, Y> {\n+    public abstract static class Builder<T extends Builder> extends FieldMapper.Builder<T> {\n         public Builder(String name, MappedFieldType fieldType, MappedFieldType defaultFieldType) {\n             super(name, fieldType, defaultFieldType);\n         }\n+\n+        public abstract MetadataFieldMapper build(BuilderContext context);", "originalCommit": "71e8cedfaee7e41560819c8c358d3baae914dc2e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEzMTkzNw==", "url": "https://github.com/elastic/elasticsearch/pull/56747#discussion_r425131937", "bodyText": "There are a few places in tests as well that expect build() to return a specific type, but nothing within the server code itself.", "author": "romseygeek", "createdAt": "2020-05-14T13:22:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTEwNTIyNw=="}], "type": "inlineReview"}, {"oid": "9e928495aad03d4f65daac1b71d3e6ee055d4f52", "url": "https://github.com/elastic/elasticsearch/commit/9e928495aad03d4f65daac1b71d3e6ee055d4f52", "message": "Remove all generic params from Mapper.Builder", "committedDate": "2020-05-14T14:10:35Z", "type": "commit"}, {"oid": "eb280257844fabddc3f362fb1051fd846891747d", "url": "https://github.com/elastic/elasticsearch/commit/eb280257844fabddc3f362fb1051fd846891747d", "message": "Revert \"Remove all generic params from Mapper.Builder\"\n\nThis reverts commit 9e928495aad03d4f65daac1b71d3e6ee055d4f52.", "committedDate": "2020-05-15T10:00:02Z", "type": "commit"}, {"oid": "f6e8d084f1cb405e7ecfdb331a6d81db7e27c8d2", "url": "https://github.com/elastic/elasticsearch/commit/f6e8d084f1cb405e7ecfdb331a6d81db7e27c8d2", "message": "Merge remote-tracking branch 'origin/master' into mapper/builder-generics", "committedDate": "2020-05-15T10:17:04Z", "type": "commit"}]}