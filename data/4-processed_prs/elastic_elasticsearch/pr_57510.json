{"pr_number": 57510, "pr_title": "[DOCS] Edit validation section of dynamic templates docs", "pr_createdAt": "2020-06-02T08:22:15Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57510", "timeline": [{"oid": "1e26a0e9776ae0a411f612125a89d43357e20598", "url": "https://github.com/elastic/elasticsearch/commit/1e26a0e9776ae0a411f612125a89d43357e20598", "message": "Edit validation section of dynamic templates docs", "committedDate": "2020-06-02T08:18:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzcwNzY2NA==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r433707664", "bodyText": "should this read \"may\" or \"will\"?", "author": "liebeslied", "createdAt": "2020-06-02T08:28:58Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause updating or validating the dynamic template to fail under certain conditions:\n \n-Whether updating the dynamic template fails when supplying an invalid mapping snippet depends on the following:\n-* If no `match_mapping_type` has been specified then if the template is valid with one predefined mapping type then\n-  the mapping snippet is considered valid. However if at index time a field that matches with the template is indexed\n-  as a different type then an validation error will occur at index time instead. For example configuring a dynamic\n-  template with no `match_mapping_type` is considered valid as string type, but at index time a field that matches with\n-  the dynamic template is indexed as a long, then at index time a validation error may still occur.\n-* If the `{{name}}` placeholder is used in the mapping snippet then the validation is skipped when updating\n-  the dynamic template. This is because the field name is unknown at that time. The validation will then occur\n-  when applying the template at index time.\n+* If no `match_mapping_type` has been specified, but the template is valid for at least one predefined mapping type, \n+  the mapping snippet is considered valid. However, a validation error will occur at index time if a field matching \n+  the template is indexed as a different type. For example, configuring a dynamic template with no `match_mapping_type` \n+  is considered valid as string type, but if a field matching the dynamic template is indexed as a long, a validation \n+  error may still occur at index time.", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0MzIzNQ==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434143235", "bodyText": "\"Will\" is correct.", "author": "jrodewig", "createdAt": "2020-06-02T20:01:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzcwNzY2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDEzOTAzNw==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434139037", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            JSON doesn't allow distinguishing a `long` from an `integer` or a `double` from\n          \n          \n            \n            JSON doesn't distinguish a `long` from an `integer` or a `double` from", "author": "jrodewig", "createdAt": "2020-06-02T19:53:45Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -59,16 +60,16 @@ reordered or deleted after they were initially added.\n [[match-mapping-type]]\n ==== `match_mapping_type`\n \n-The `match_mapping_type` is the datatype detected by the json parser. Since\n-JSON doesn't allow to distinguish a `long` from an `integer` or a `double` from\n+The `match_mapping_type` is the datatype detected by the JSON parser. Since\n+JSON doesn't allow distinguishing a `long` from an `integer` or a `double` from", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NTg0NA==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434145844", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            and in most cases when the dynamic template is updated. Providing an invalid mapping \n          \n          \n            \n            and, in most cases, when the dynamic template is updated. Providing an invalid mapping", "author": "jrodewig", "createdAt": "2020-06-02T20:07:20Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping ", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NTk5Nw==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434145997", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            snippet may cause updating or validating the dynamic template to fail under certain conditions:\n          \n          \n            \n            snippet may cause the update or validation of a dynamic template to fail under certain conditions:", "author": "jrodewig", "createdAt": "2020-06-02T20:07:38Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause updating or validating the dynamic template to fail under certain conditions:", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NjQ0Nw==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434146447", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            will be thrown. Validation occurs when applying the dynamic template at index time, \n          \n          \n            \n            is returned. Validation occurs when applying the dynamic template at index time,", "author": "jrodewig", "createdAt": "2020-06-02T20:08:34Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, ", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NjgyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434146829", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * If no `match_mapping_type` has been specified, but the template is valid for at least one predefined mapping type, \n          \n          \n            \n            * If no `match_mapping_type` has been specified but the template is valid for at least one predefined mapping type,", "author": "jrodewig", "createdAt": "2020-06-02T20:09:16Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause updating or validating the dynamic template to fail under certain conditions:\n \n-Whether updating the dynamic template fails when supplying an invalid mapping snippet depends on the following:\n-* If no `match_mapping_type` has been specified then if the template is valid with one predefined mapping type then\n-  the mapping snippet is considered valid. However if at index time a field that matches with the template is indexed\n-  as a different type then an validation error will occur at index time instead. For example configuring a dynamic\n-  template with no `match_mapping_type` is considered valid as string type, but at index time a field that matches with\n-  the dynamic template is indexed as a long, then at index time a validation error may still occur.\n-* If the `{{name}}` placeholder is used in the mapping snippet then the validation is skipped when updating\n-  the dynamic template. This is because the field name is unknown at that time. The validation will then occur\n-  when applying the template at index time.\n+* If no `match_mapping_type` has been specified, but the template is valid for at least one predefined mapping type, ", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0NzA5OQ==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434147099", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              the mapping snippet is considered valid. However, a validation error will occur at index time if a field matching \n          \n          \n            \n              the mapping snippet is considered valid. However, a validation error is returned at index time if a field matching", "author": "jrodewig", "createdAt": "2020-06-02T20:09:44Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause updating or validating the dynamic template to fail under certain conditions:\n \n-Whether updating the dynamic template fails when supplying an invalid mapping snippet depends on the following:\n-* If no `match_mapping_type` has been specified then if the template is valid with one predefined mapping type then\n-  the mapping snippet is considered valid. However if at index time a field that matches with the template is indexed\n-  as a different type then an validation error will occur at index time instead. For example configuring a dynamic\n-  template with no `match_mapping_type` is considered valid as string type, but at index time a field that matches with\n-  the dynamic template is indexed as a long, then at index time a validation error may still occur.\n-* If the `{{name}}` placeholder is used in the mapping snippet then the validation is skipped when updating\n-  the dynamic template. This is because the field name is unknown at that time. The validation will then occur\n-  when applying the template at index time.\n+* If no `match_mapping_type` has been specified, but the template is valid for at least one predefined mapping type, \n+  the mapping snippet is considered valid. However, a validation error will occur at index time if a field matching ", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE0Nzc4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434147785", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              template because the field name is unknown at that time. Validation will instead occur when applying the template \n          \n          \n            \n              template. This is because the field name is unknown at that time. Instead, validation occurs when the template is applied", "author": "jrodewig", "createdAt": "2020-06-02T20:10:57Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+will be thrown. Validation occurs when applying the dynamic template at index time, \n+and in most cases when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause updating or validating the dynamic template to fail under certain conditions:\n \n-Whether updating the dynamic template fails when supplying an invalid mapping snippet depends on the following:\n-* If no `match_mapping_type` has been specified then if the template is valid with one predefined mapping type then\n-  the mapping snippet is considered valid. However if at index time a field that matches with the template is indexed\n-  as a different type then an validation error will occur at index time instead. For example configuring a dynamic\n-  template with no `match_mapping_type` is considered valid as string type, but at index time a field that matches with\n-  the dynamic template is indexed as a long, then at index time a validation error may still occur.\n-* If the `{{name}}` placeholder is used in the mapping snippet then the validation is skipped when updating\n-  the dynamic template. This is because the field name is unknown at that time. The validation will then occur\n-  when applying the template at index time.\n+* If no `match_mapping_type` has been specified, but the template is valid for at least one predefined mapping type, \n+  the mapping snippet is considered valid. However, a validation error will occur at index time if a field matching \n+  the template is indexed as a different type. For example, configuring a dynamic template with no `match_mapping_type` \n+  is considered valid as string type, but if a field matching the dynamic template is indexed as a long, a validation \n+  error may still occur at index time.\n+\n+* If the `{{name}}` placeholder is used in the mapping snippet, validation is skipped when updating the dynamic \n+  template because the field name is unknown at that time. Validation will instead occur when applying the template ", "originalCommit": "1e26a0e9776ae0a411f612125a89d43357e20598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "12faf07e11aaa80cbc28cb14647289a5e0f4a33a", "url": "https://github.com/elastic/elasticsearch/commit/12faf07e11aaa80cbc28cb14647289a5e0f4a33a", "message": "Apply suggestions from code review", "committedDate": "2020-06-02T20:12:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE1MDQ3NA==", "url": "https://github.com/elastic/elasticsearch/pull/57510#discussion_r434150474", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              error may still occur at index time.\n          \n          \n            \n              error is returned at index time.", "author": "jrodewig", "createdAt": "2020-06-02T20:16:22Z", "path": "docs/reference/mapping/dynamic/templates.asciidoc", "diffHunk": "@@ -37,19 +37,20 @@ Dynamic templates are specified as an array of named objects:\n <2> The match conditions can include any of : `match_mapping_type`, `match`, `match_pattern`, `unmatch`, `path_match`, `path_unmatch`.\n <3> The mapping that the matched field should use.\n \n-If a provided mapping contains an invalid mapping snippet then that results in\n-a validation error. Validation always occurs when applying the dynamic template\n-at index time or in most cases when updating the dynamic template.\n+If a provided mapping contains an invalid mapping snippet, a validation error\n+is returned. Validation occurs when applying the dynamic template at index time, \n+and, in most cases, when the dynamic template is updated. Providing an invalid mapping \n+snippet may cause the update or validation of a dynamic template to fail under certain conditions:\n \n-Whether updating the dynamic template fails when supplying an invalid mapping snippet depends on the following:\n-* If no `match_mapping_type` has been specified then if the template is valid with one predefined mapping type then\n-  the mapping snippet is considered valid. However if at index time a field that matches with the template is indexed\n-  as a different type then an validation error will occur at index time instead. For example configuring a dynamic\n-  template with no `match_mapping_type` is considered valid as string type, but at index time a field that matches with\n-  the dynamic template is indexed as a long, then at index time a validation error may still occur.\n-* If the `{{name}}` placeholder is used in the mapping snippet then the validation is skipped when updating\n-  the dynamic template. This is because the field name is unknown at that time. The validation will then occur\n-  when applying the template at index time.\n+* If no `match_mapping_type` has been specified but the template is valid for at least one predefined mapping type, \n+  the mapping snippet is considered valid. However, a validation error is returned at index time if a field matching \n+  the template is indexed as a different type. For example, configuring a dynamic template with no `match_mapping_type` \n+  is considered valid as string type, but if a field matching the dynamic template is indexed as a long, a validation \n+  error may still occur at index time.", "originalCommit": "12faf07e11aaa80cbc28cb14647289a5e0f4a33a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "480eb7c3819e1be7c7739a66012c7af5e1d2604f", "url": "https://github.com/elastic/elasticsearch/commit/480eb7c3819e1be7c7739a66012c7af5e1d2604f", "message": "Update docs/reference/mapping/dynamic/templates.asciidoc", "committedDate": "2020-06-02T20:16:28Z", "type": "commit"}]}