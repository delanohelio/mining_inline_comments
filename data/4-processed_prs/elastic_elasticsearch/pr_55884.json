{"pr_number": 55884, "pr_title": "[DOCS] Combine search API and URI search API reference docs", "pr_createdAt": "2020-04-28T19:17:40Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55884", "timeline": [{"oid": "193477334cc343a80996699d3cc69218ae49ff1f", "url": "https://github.com/elastic/elasticsearch/commit/193477334cc343a80996699d3cc69218ae49ff1f", "message": "[DOCS] Combine search API and URI search API reference docs\n\nThe search API and URI search pages document the same `_search` API.\nThis combines the documentation from each page under the search API\ndocs.\n\nChanges:\n\n* Adds an abbreviated title for the search API page.\n* Removes the following invalid query parameters:\n  * `analyzer`\n  * `analyze_wildcard`\n  * `default_operator`\n  * `df`\n  * `lenient`\n  * `suggest_mode`\n  * `suggest_size`\n* Removes the URI search docs page and adds a related redirect.\n* Updates the headings of several examples", "committedDate": "2020-04-28T19:14:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MDkzMw==", "url": "https://github.com/elastic/elasticsearch/pull/55884#discussion_r419640933", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If `true`, partial results are returned for request timeouts one or\n          \n          \n            \n            <<shard-failures,partial shard failures>>. If `false`, an error is returned with\n          \n          \n            \n            no partial results. Defaults to `true`.\n          \n          \n            \n            If `true`, returns partial results if there are request timeouts or\n          \n          \n            \n            <<shard-failures,shard failures>>. If `false`, returns an error with\n          \n          \n            \n            no partial results. Defaults to `true`.", "author": "debadair", "createdAt": "2020-05-04T18:30:50Z", "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -1,65 +1,56 @@\n [[search-search]]\n-=== Search\n+=== Search API\n+++++\n+<titleabbrev>Search</titleabbrev>\n+++++\n \n Returns search hits that match the query defined in the request.\n \n [source,console]\n ----\n-GET /twitter/_search?q=tag:wow\n+GET /twitter/_search\n ----\n // TEST[setup:twitter]\n \n-\n [[search-search-api-request]]\n ==== {api-request-title}\n \n `GET /<index>/_search`\n \n-`POST /<index>/_search`\n-\n `GET /_search`\n \n-`POST /_search`\n+`POST /<index>/_search`\n \n+`POST /_search`\n \n [[search-search-api-desc]]\n ==== {api-description-title}\n \n Allows you to execute a search query and get back search hits that match the\n-query. The query can either be provided using a simple\n-<<search-uri-request,query string as a parameter>>, or using a\n-<<search-request-body,request body>>.\n-\n-[[search-partial-responses]]\n-===== Partial responses\n-\n-To ensure fast responses, the search API will respond with partial results if\n-one or more shards fail. See <<shard-failures, Shard failures>> for more\n-information.\n+query. You can provide search queries using the <<search-api-query-params-q,`q`\n+query string parameter>> or <<search-request-body,request body>>.\n \n [[search-search-api-path-params]]\n ==== {api-path-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=index]\n \n-\n [[search-search-api-query-params]]\n ==== {api-query-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n +\n Defaults to `true`.\n \n+[[search-partial-responses]]\n `allow_partial_search_results`::\n-  (Optional, boolean) Indicates if an error should be returned if there is a\n-  partial search failure or timeout. Defaults to `true`.\n-\n-`analyzer`::\n-  (Optional, string) Defines the analyzer to use for the query string.\n-\n-`analyze_wildcard`::\n-  (Optional, boolean) If `true`, wildcard and prefix queries will also be\n-  analyzed. Defaults to `false`.\n+(Optional, boolean)\n+If `true`, partial results are returned for request timeouts one or\n+<<shard-failures,partial shard failures>>. If `false`, an error is returned with\n+no partial results. Defaults to `true`.", "originalCommit": "193477334cc343a80996699d3cc69218ae49ff1f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0NDMxNA==", "url": "https://github.com/elastic/elasticsearch/pull/55884#discussion_r419644314", "bodyText": "Thanks for catching this one.", "author": "jrodewig", "createdAt": "2020-05-04T18:36:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MDkzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTY0MTc1NQ==", "url": "https://github.com/elastic/elasticsearch/pull/55884#discussion_r419641755", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can override the default for this field by setting\n          \n          \n            \n            `search.default_allow_partial_results` to `false` in your cluster settings.\n          \n          \n            \n            To override the default for this field, set the \n          \n          \n            \n            `search.default_allow_partial_results` cluster setting to `false`.", "author": "debadair", "createdAt": "2020-05-04T18:32:11Z", "path": "docs/reference/search/search.asciidoc", "diffHunk": "@@ -1,65 +1,56 @@\n [[search-search]]\n-=== Search\n+=== Search API\n+++++\n+<titleabbrev>Search</titleabbrev>\n+++++\n \n Returns search hits that match the query defined in the request.\n \n [source,console]\n ----\n-GET /twitter/_search?q=tag:wow\n+GET /twitter/_search\n ----\n // TEST[setup:twitter]\n \n-\n [[search-search-api-request]]\n ==== {api-request-title}\n \n `GET /<index>/_search`\n \n-`POST /<index>/_search`\n-\n `GET /_search`\n \n-`POST /_search`\n+`POST /<index>/_search`\n \n+`POST /_search`\n \n [[search-search-api-desc]]\n ==== {api-description-title}\n \n Allows you to execute a search query and get back search hits that match the\n-query. The query can either be provided using a simple\n-<<search-uri-request,query string as a parameter>>, or using a\n-<<search-request-body,request body>>.\n-\n-[[search-partial-responses]]\n-===== Partial responses\n-\n-To ensure fast responses, the search API will respond with partial results if\n-one or more shards fail. See <<shard-failures, Shard failures>> for more\n-information.\n+query. You can provide search queries using the <<search-api-query-params-q,`q`\n+query string parameter>> or <<search-request-body,request body>>.\n \n [[search-search-api-path-params]]\n ==== {api-path-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=index]\n \n-\n [[search-search-api-query-params]]\n ==== {api-query-parms-title}\n \n include::{docdir}/rest-api/common-parms.asciidoc[tag=allow-no-indices]\n +\n Defaults to `true`.\n \n+[[search-partial-responses]]\n `allow_partial_search_results`::\n-  (Optional, boolean) Indicates if an error should be returned if there is a\n-  partial search failure or timeout. Defaults to `true`.\n-\n-`analyzer`::\n-  (Optional, string) Defines the analyzer to use for the query string.\n-\n-`analyze_wildcard`::\n-  (Optional, boolean) If `true`, wildcard and prefix queries will also be\n-  analyzed. Defaults to `false`.\n+(Optional, boolean)\n+If `true`, partial results are returned for request timeouts one or\n+<<shard-failures,partial shard failures>>. If `false`, an error is returned with\n+no partial results. Defaults to `true`.\n++\n+You can override the default for this field by setting\n+`search.default_allow_partial_results` to `false` in your cluster settings.", "originalCommit": "193477334cc343a80996699d3cc69218ae49ff1f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "57cd6e21e3f0ac0b34bef55f12ed29ba55bd9d02", "url": "https://github.com/elastic/elasticsearch/commit/57cd6e21e3f0ac0b34bef55f12ed29ba55bd9d02", "message": "Apply suggestions from code review\n\nCo-authored-by: debadair <debadair@elastic.co>", "committedDate": "2020-05-04T18:35:49Z", "type": "commit"}, {"oid": "de8db7718c824c59ffb246971675c30f29cbbdac", "url": "https://github.com/elastic/elasticsearch/commit/de8db7718c824c59ffb246971675c30f29cbbdac", "message": "Merge remote-tracking branch 'upstream/master' into docs__remove-uri-search-docs", "committedDate": "2020-05-05T13:35:03Z", "type": "commit"}, {"oid": "e2d8f77d8021ef84f5bb6f96007ea03c65f60432", "url": "https://github.com/elastic/elasticsearch/commit/e2d8f77d8021ef84f5bb6f96007ea03c65f60432", "message": "Merge remote-tracking branch 'upstream/master' into docs__remove-uri-search-docs", "committedDate": "2020-05-05T14:04:59Z", "type": "commit"}]}