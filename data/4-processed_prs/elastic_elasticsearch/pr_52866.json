{"pr_number": 52866, "pr_title": "[DOCS] Adds cat anomaly detectors API", "pr_createdAt": "2020-02-27T04:36:48Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/52866", "timeline": [{"oid": "057f465a0f851cef0cef5efdfb28faa0a3e4106f", "url": "https://github.com/elastic/elasticsearch/commit/057f465a0f851cef0cef5efdfb28faa0a3e4106f", "message": "[DOCS] Adds cat anomaly detectors API", "committedDate": "2020-02-27T04:33:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMjM1Nw==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385102357", "bodyText": "doot\n\ud83d\ude02", "author": "benwtrent", "createdAt": "2020-02-27T12:43:27Z", "path": "docs/reference/cat/anomaly-detectors.asciidoc", "diffHunk": "@@ -0,0 +1,281 @@\n+[role=\"xpack\"]\n+[testenv=\"platinum\"]\n+[[cat-anomaly-detectors]]\n+=== cat anomaly detectors API\n+++++\n+<titleabbrev>cat anomaly detectors</titleabbrev>\n+++++\n+\n+Returns configuration and usage information about {anomaly-jobs}.\n+\n+[[cat-anomaly-detectors-request]]\n+==== {api-request-title}\n+\n+`GET /_cat/ml/anomaly_detectors/<job_id>` +\n+\n+`GET /_cat/ml/anomaly_detectors`\n+\n+[[cat-anomaly-detectors-prereqs]]\n+==== {api-prereq-title}\n+\n+* If the {es} {security-features} are enabled, you must have `monitor_ml`,\n+`monitor`, `manage_ml`, or `manage` cluster privileges to use this API. See\n+<<security-privileges>> and {ml-docs}/setup.html[Set up {ml-features}].\n+\n+\n+[[cat-anomaly-detectors-desc]]\n+==== {api-description-title}\n+\n+For more information, see {ml-docs}/ml-jobs.html[{anomaly-jobs-cap}].\n+\n+NOTE: This API returns a maximum of 10,000 jobs.\n+\n+[[cat-anomaly-detectors-path-params]]\n+==== {api-path-parms-title}\n+\n+`<job_id>`::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n+\n+[[cat-anomaly-detectors-query-params]]\n+==== {api-query-parms-title}\n+\n+`allow_no_jobs`::\n+(Optional, boolean)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=allow-no-jobs]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=bytes]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=http-format]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=cat-h]\n++\n+If you do not specify which columns to include, the API returns the default\n+columns. If you explicitly specify one or more columns, it returns only the\n+specified columns.\n++\n+Valid columns are:\n+\n+`assignment_explanation`, `ae`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=assignment-explanation-anomaly-jobs]\n+\n+`bucket.count`, `bc`, `bucketCount`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count-anomaly-jobs]\n+\n+`bucket.time.exp_avg`, `btea`, `bucketTimeExpAvg`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average]\n+\n+`bucket.time.exp_avg_hour`, `bteah`, `bucketTimeExpAvgHour`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average-hour]\n+\n+`bucket.time.max`, `btmax`, `bucketTimeMax`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-maximum]\n+\n+`bucket.time.min`, `btmin`, `bucketTimeMin`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-minimum]\n+\n+`bucket.time.total`, `btt`, `bucketTimeTotal`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-total]\n+\n+`data.buckets`, `db`, `dataBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count]\n+\n+`data.earliest_record`, `der`, `dataEarliestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=earliest-record-timestamp]\n+\n+`data.empty_buckets`, `deb`, `dataEmptyBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=empty-bucket-count]\n+\n+`data.input_bytes`, `dib`, `dataInputBytes`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-bytes]\n+\n+`data.input_fields`, `dif`, `dataInputFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-field-count]\n+\n+`data.input_records`, `dir`, `dataInputRecords`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-record-count]\n+\n+`data.invalid_dates`, `did`, `dataInvalidDates`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=invalid-date-count]\n+\n+`data.last`, `dl`, `dataLast`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=last-data-time]\n+\n+`data.last_empty_bucket`, `dleb`, `dataLastEmptyBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-empty-bucket-timestamp]\n+\n+`data.last_sparse_bucket`, `dlsb`, `dataLastSparseBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-sparse-record-timestamp]\n+\n+`data.latest_record`, `dlr`, `dataLatestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-record-timestamp]\n+\n+`data.missing_fields`, `dmf`, `dataMissingFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=missing-field-count]\n+\n+`data.out_of_order_timestamps`, `doot`, `dataOutOfOrderTimestamps`:::", "originalCommit": "057f465a0f851cef0cef5efdfb28faa0a3e4106f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTYzOTU3NA==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385639574", "bodyText": "Should be dooot \ud83d\ude06\n(But don't change it.)", "author": "droberts195", "createdAt": "2020-02-28T11:13:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMjM1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMjU4NQ==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385102585", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `data.processed_fields`, `dpr`, `dataProcessedFields`:::\n          \n          \n            \n            `data.processed_fields`, `dpf`, `dataProcessedFields`:::\n          \n      \n    \n    \n  \n\nIs it incorrect on the API?", "author": "benwtrent", "createdAt": "2020-02-27T12:43:54Z", "path": "docs/reference/cat/anomaly-detectors.asciidoc", "diffHunk": "@@ -0,0 +1,281 @@\n+[role=\"xpack\"]\n+[testenv=\"platinum\"]\n+[[cat-anomaly-detectors]]\n+=== cat anomaly detectors API\n+++++\n+<titleabbrev>cat anomaly detectors</titleabbrev>\n+++++\n+\n+Returns configuration and usage information about {anomaly-jobs}.\n+\n+[[cat-anomaly-detectors-request]]\n+==== {api-request-title}\n+\n+`GET /_cat/ml/anomaly_detectors/<job_id>` +\n+\n+`GET /_cat/ml/anomaly_detectors`\n+\n+[[cat-anomaly-detectors-prereqs]]\n+==== {api-prereq-title}\n+\n+* If the {es} {security-features} are enabled, you must have `monitor_ml`,\n+`monitor`, `manage_ml`, or `manage` cluster privileges to use this API. See\n+<<security-privileges>> and {ml-docs}/setup.html[Set up {ml-features}].\n+\n+\n+[[cat-anomaly-detectors-desc]]\n+==== {api-description-title}\n+\n+For more information, see {ml-docs}/ml-jobs.html[{anomaly-jobs-cap}].\n+\n+NOTE: This API returns a maximum of 10,000 jobs.\n+\n+[[cat-anomaly-detectors-path-params]]\n+==== {api-path-parms-title}\n+\n+`<job_id>`::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n+\n+[[cat-anomaly-detectors-query-params]]\n+==== {api-query-parms-title}\n+\n+`allow_no_jobs`::\n+(Optional, boolean)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=allow-no-jobs]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=bytes]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=http-format]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=cat-h]\n++\n+If you do not specify which columns to include, the API returns the default\n+columns. If you explicitly specify one or more columns, it returns only the\n+specified columns.\n++\n+Valid columns are:\n+\n+`assignment_explanation`, `ae`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=assignment-explanation-anomaly-jobs]\n+\n+`bucket.count`, `bc`, `bucketCount`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count-anomaly-jobs]\n+\n+`bucket.time.exp_avg`, `btea`, `bucketTimeExpAvg`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average]\n+\n+`bucket.time.exp_avg_hour`, `bteah`, `bucketTimeExpAvgHour`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average-hour]\n+\n+`bucket.time.max`, `btmax`, `bucketTimeMax`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-maximum]\n+\n+`bucket.time.min`, `btmin`, `bucketTimeMin`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-minimum]\n+\n+`bucket.time.total`, `btt`, `bucketTimeTotal`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-total]\n+\n+`data.buckets`, `db`, `dataBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count]\n+\n+`data.earliest_record`, `der`, `dataEarliestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=earliest-record-timestamp]\n+\n+`data.empty_buckets`, `deb`, `dataEmptyBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=empty-bucket-count]\n+\n+`data.input_bytes`, `dib`, `dataInputBytes`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-bytes]\n+\n+`data.input_fields`, `dif`, `dataInputFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-field-count]\n+\n+`data.input_records`, `dir`, `dataInputRecords`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-record-count]\n+\n+`data.invalid_dates`, `did`, `dataInvalidDates`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=invalid-date-count]\n+\n+`data.last`, `dl`, `dataLast`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=last-data-time]\n+\n+`data.last_empty_bucket`, `dleb`, `dataLastEmptyBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-empty-bucket-timestamp]\n+\n+`data.last_sparse_bucket`, `dlsb`, `dataLastSparseBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-sparse-record-timestamp]\n+\n+`data.latest_record`, `dlr`, `dataLatestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-record-timestamp]\n+\n+`data.missing_fields`, `dmf`, `dataMissingFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=missing-field-count]\n+\n+`data.out_of_order_timestamps`, `doot`, `dataOutOfOrderTimestamps`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=out-of-order-timestamp-count]\n+\n+`data.processed_fields`, `dpr`, `dataProcessedFields`:::", "originalCommit": "057f465a0f851cef0cef5efdfb28faa0a3e4106f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI1MzczOA==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385253738", "bodyText": "Yes, I'll change it in the RestCatJobsAction.java too.", "author": "lcawl", "createdAt": "2020-02-27T17:18:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwMjU4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwNTEyMA==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385105120", "bodyText": "forecasts is referring to ALL forecasts that this job has. This returns the maximum memory used by a single forecast of all the forecasts.\nFeel free to fix my unremarkable writing :)", "author": "benwtrent", "createdAt": "2020-02-27T12:49:14Z", "path": "docs/reference/cat/anomaly-detectors.asciidoc", "diffHunk": "@@ -0,0 +1,281 @@\n+[role=\"xpack\"]\n+[testenv=\"platinum\"]\n+[[cat-anomaly-detectors]]\n+=== cat anomaly detectors API\n+++++\n+<titleabbrev>cat anomaly detectors</titleabbrev>\n+++++\n+\n+Returns configuration and usage information about {anomaly-jobs}.\n+\n+[[cat-anomaly-detectors-request]]\n+==== {api-request-title}\n+\n+`GET /_cat/ml/anomaly_detectors/<job_id>` +\n+\n+`GET /_cat/ml/anomaly_detectors`\n+\n+[[cat-anomaly-detectors-prereqs]]\n+==== {api-prereq-title}\n+\n+* If the {es} {security-features} are enabled, you must have `monitor_ml`,\n+`monitor`, `manage_ml`, or `manage` cluster privileges to use this API. See\n+<<security-privileges>> and {ml-docs}/setup.html[Set up {ml-features}].\n+\n+\n+[[cat-anomaly-detectors-desc]]\n+==== {api-description-title}\n+\n+For more information, see {ml-docs}/ml-jobs.html[{anomaly-jobs-cap}].\n+\n+NOTE: This API returns a maximum of 10,000 jobs.\n+\n+[[cat-anomaly-detectors-path-params]]\n+==== {api-path-parms-title}\n+\n+`<job_id>`::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n+\n+[[cat-anomaly-detectors-query-params]]\n+==== {api-query-parms-title}\n+\n+`allow_no_jobs`::\n+(Optional, boolean)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=allow-no-jobs]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=bytes]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=http-format]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=cat-h]\n++\n+If you do not specify which columns to include, the API returns the default\n+columns. If you explicitly specify one or more columns, it returns only the\n+specified columns.\n++\n+Valid columns are:\n+\n+`assignment_explanation`, `ae`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=assignment-explanation-anomaly-jobs]\n+\n+`bucket.count`, `bc`, `bucketCount`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count-anomaly-jobs]\n+\n+`bucket.time.exp_avg`, `btea`, `bucketTimeExpAvg`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average]\n+\n+`bucket.time.exp_avg_hour`, `bteah`, `bucketTimeExpAvgHour`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average-hour]\n+\n+`bucket.time.max`, `btmax`, `bucketTimeMax`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-maximum]\n+\n+`bucket.time.min`, `btmin`, `bucketTimeMin`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-minimum]\n+\n+`bucket.time.total`, `btt`, `bucketTimeTotal`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-total]\n+\n+`data.buckets`, `db`, `dataBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count]\n+\n+`data.earliest_record`, `der`, `dataEarliestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=earliest-record-timestamp]\n+\n+`data.empty_buckets`, `deb`, `dataEmptyBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=empty-bucket-count]\n+\n+`data.input_bytes`, `dib`, `dataInputBytes`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-bytes]\n+\n+`data.input_fields`, `dif`, `dataInputFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-field-count]\n+\n+`data.input_records`, `dir`, `dataInputRecords`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-record-count]\n+\n+`data.invalid_dates`, `did`, `dataInvalidDates`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=invalid-date-count]\n+\n+`data.last`, `dl`, `dataLast`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=last-data-time]\n+\n+`data.last_empty_bucket`, `dleb`, `dataLastEmptyBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-empty-bucket-timestamp]\n+\n+`data.last_sparse_bucket`, `dlsb`, `dataLastSparseBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-sparse-record-timestamp]\n+\n+`data.latest_record`, `dlr`, `dataLatestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-record-timestamp]\n+\n+`data.missing_fields`, `dmf`, `dataMissingFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=missing-field-count]\n+\n+`data.out_of_order_timestamps`, `doot`, `dataOutOfOrderTimestamps`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=out-of-order-timestamp-count]\n+\n+`data.processed_fields`, `dpr`, `dataProcessedFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=processed-field-count]\n+\n+`data.processed_records`, `dpr`, `dataProcessedRecords`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=processed-record-count]\n+\n+`data.sparse_buckets`, `dsb`, `dataSparseBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=sparse-bucket-count]\n+\n+`forecast.memory.avg`, `fmavg`, `forecastMemoryAvg`:::\n+The average memory usage in bytes for forecasts related to the {anomaly-job}.\n+  \n+`forecast.memory.max`, `fmmax`, `forecastsMemoryMax`:::\n+The maximum memory usage in bytes for forecasts related to the {anomaly-job}.\n+//TBD: Is there a reason why this \"forecasts\" is plural?", "originalCommit": "057f465a0f851cef0cef5efdfb28faa0a3e4106f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTIzNDkzNg==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385234936", "bodyText": "In that case, should all the others (e.g. \"forecastMemoryMin\") be plural too?", "author": "lcawl", "createdAt": "2020-02-27T16:48:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTEwNTEyMA=="}], "type": "inlineReview"}, {"oid": "bf1424398c7b171d6e148228e1a72a53137f8b56", "url": "https://github.com/elastic/elasticsearch/commit/bf1424398c7b171d6e148228e1a72a53137f8b56", "message": "[DOCS] Fixes dataProcessedFields", "committedDate": "2020-02-27T17:20:39Z", "type": "commit"}, {"oid": "80cea8a1111e62e6e05da84a89fb5455639b81c7", "url": "https://github.com/elastic/elasticsearch/commit/80cea8a1111e62e6e05da84a89fb5455639b81c7", "message": "[DOCS] Pluralizes forecasts and buckets", "committedDate": "2020-02-27T18:02:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NzAwMQ==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385287001", "bodyText": "@benwtrent I've updated the API to use pluralized forecasts.* and buckets.* headings, such that it aligns with the segments.* and merges.* headings in the cat nodes API.\n@droberts195 Should we pluralize the model-related headings too?  The current description for this stat seems to imply the answer will be yes:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            `model.bytes`, `mb`, `modelBytes`:::\n          \n          \n            \n            `models.bytes`, `mb`, `modelsBytes`:::", "author": "lcawl", "createdAt": "2020-02-27T18:19:56Z", "path": "docs/reference/cat/anomaly-detectors.asciidoc", "diffHunk": "@@ -0,0 +1,280 @@\n+[role=\"xpack\"]\n+[testenv=\"platinum\"]\n+[[cat-anomaly-detectors]]\n+=== cat anomaly detectors API\n+++++\n+<titleabbrev>cat anomaly detectors</titleabbrev>\n+++++\n+\n+Returns configuration and usage information about {anomaly-jobs}.\n+\n+[[cat-anomaly-detectors-request]]\n+==== {api-request-title}\n+\n+`GET /_cat/ml/anomaly_detectors/<job_id>` +\n+\n+`GET /_cat/ml/anomaly_detectors`\n+\n+[[cat-anomaly-detectors-prereqs]]\n+==== {api-prereq-title}\n+\n+* If the {es} {security-features} are enabled, you must have `monitor_ml`,\n+`monitor`, `manage_ml`, or `manage` cluster privileges to use this API. See\n+<<security-privileges>> and {ml-docs}/setup.html[Set up {ml-features}].\n+\n+\n+[[cat-anomaly-detectors-desc]]\n+==== {api-description-title}\n+\n+See {ml-docs}/ml-jobs.html[{anomaly-jobs-cap}].\n+\n+NOTE: This API returns a maximum of 10,000 jobs.\n+\n+[[cat-anomaly-detectors-path-params]]\n+==== {api-path-parms-title}\n+\n+`<job_id>`::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n+\n+[[cat-anomaly-detectors-query-params]]\n+==== {api-query-parms-title}\n+\n+`allow_no_jobs`::\n+(Optional, boolean)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=allow-no-jobs]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=bytes]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=http-format]\n+\n+include::{docdir}/rest-api/common-parms.asciidoc[tag=cat-h]\n++\n+If you do not specify which columns to include, the API returns the default\n+columns. If you explicitly specify one or more columns, it returns only the\n+specified columns.\n++\n+Valid columns are:\n+\n+`assignment_explanation`, `ae`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=assignment-explanation-anomaly-jobs]\n+\n+`buckets.count`, `bc`, `bucketsCount`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count-anomaly-jobs]\n+\n+`buckets.time.exp_avg`, `btea`, `bucketsTimeExpAvg`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average]\n+\n+`buckets.time.exp_avg_hour`, `bteah`, `bucketsTimeExpAvgHour`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-exponential-average-hour]\n+\n+`buckets.time.max`, `btmax`, `bucketsTimeMax`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-maximum]\n+\n+`buckets.time.min`, `btmin`, `bucketsTimeMin`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-minimum]\n+\n+`buckets.time.total`, `btt`, `bucketsTimeTotal`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-time-total]\n+\n+`data.buckets`, `db`, `dataBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-count]\n+\n+`data.earliest_record`, `der`, `dataEarliestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=earliest-record-timestamp]\n+\n+`data.empty_buckets`, `deb`, `dataEmptyBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=empty-bucket-count]\n+\n+`data.input_bytes`, `dib`, `dataInputBytes`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-bytes]\n+\n+`data.input_fields`, `dif`, `dataInputFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-field-count]\n+\n+`data.input_records`, `dir`, `dataInputRecords`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=input-record-count]\n+\n+`data.invalid_dates`, `did`, `dataInvalidDates`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=invalid-date-count]\n+\n+`data.last`, `dl`, `dataLast`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=last-data-time]\n+\n+`data.last_empty_bucket`, `dleb`, `dataLastEmptyBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-empty-bucket-timestamp]\n+\n+`data.last_sparse_bucket`, `dlsb`, `dataLastSparseBucket`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-sparse-record-timestamp]\n+\n+`data.latest_record`, `dlr`, `dataLatestRecord`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=latest-record-timestamp]\n+\n+`data.missing_fields`, `dmf`, `dataMissingFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=missing-field-count]\n+\n+`data.out_of_order_timestamps`, `doot`, `dataOutOfOrderTimestamps`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=out-of-order-timestamp-count]\n+\n+`data.processed_fields`, `dpf`, `dataProcessedFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=processed-field-count]\n+\n+`data.processed_records`, `dpr`, `dataProcessedRecords`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=processed-record-count]\n+\n+`data.sparse_buckets`, `dsb`, `dataSparseBuckets`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=sparse-bucket-count]\n+\n+`forecasts.memory.avg`, `fmavg`, `forecastsMemoryAvg`:::\n+The average memory usage in bytes for forecasts related to the {anomaly-job}.\n+  \n+`forecasts.memory.max`, `fmmax`, `forecastsMemoryMax`:::\n+The maximum memory usage in bytes for forecasts related to the {anomaly-job}.\n+\n+`forecasts.memory.min`, `fmmin`, `forecastsMemoryMin`:::\n+The minimum memory usage in bytes for forecasts related to the {anomaly-job}.\n+\n+`forecasts.memory.total`, `fmt`, `forecastsMemoryTotal`:::\n+The total memory usage in bytes for forecasts related to the {anomaly-job}.                      \n+  \n+`forecasts.records.avg`, `fravg`, `forecastsRecordsAvg`:::\n+The average number of `model_forecast` documents written for forecasts related\n+to the {anomaly-job}.\n+\n+`forecasts.records.max`, `frmax`, `forecastsRecordsMax`:::\n+The maximum number of `model_forecast` documents written for forecasts related\n+to the {anomaly-job}.\n+\n+`forecasts.records.min`, `frmin`, `forecastsRecordsMin`:::\n+The minimum number of `model_forecast` documents written for forecasts related\n+to the {anomaly-job}.\n+\n+`forecasts.records.total`, `frt`, `forecastsRecordsTotal`:::\n+The total number of `model_forecast` documents written for forecasts related to\n+the {anomaly-job}.                         \n+                                                   \n+`forecasts.time.avg`, `ftavg`, `forecastsTimeAvg`:::\n+The average runtime in milliseconds for forecasts related to the {anomaly-job}.\n+\n+`forecasts.time.max`, `ftmax`, `forecastsTimeMax`:::\n+The maximum runtime in milliseconds for  forecasts related to the {anomaly-job}.\n+\n+`forecasts.time.min`, `ftmin`, `forecastsTimeMin`:::\n+The minimum runtime in milliseconds for forecasts related to the {anomaly-job}.\n+\n+`forecasts.time.total`, `ftt`, `forecastsTimeTotal`:::\n+The total runtime in milliseconds for forecasts related to the {anomaly-job}.\n+\n+`forecasts.total`, `ft`, `forecastsTotal`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=forecast-total]\n+\n+`id`:::\n+(Default)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=job-id-anomaly-detection]\n+\n+`model.bucket_allocation_failures`, `mbaf`, `modelBucketAllocationFailures`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=bucket-allocation-failures-count]\n+\n+`model.by_fields`, `mbf`, `modelByFields`:::\n+include::{docdir}/ml/ml-shared.asciidoc[tag=total-by-field-count]\n+\n+`model.bytes`, `mb`, `modelBytes`:::", "originalCommit": "80cea8a1111e62e6e05da84a89fb5455639b81c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY1ODM2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385658365", "bodyText": "The stat this is reporting is model_size_stats.model_bytes from the job stats.  So it's singular in the field names.  In the current docs the description has \"models\" plural and \"model\" singular:\n\n(long) The number of bytes of memory used by the models. This is the maximum value since the last time the model was persisted. If the job is closed, this value indicates the latest size.\n\nWhether model or models is correct is an interesting academic question.  Certainly at the lowest level of the C++ code there are multiple models, but we could argue these are components of a single top level model for the entire job.  We only report the stats for this top level model, so it's reasonable that we document it as a single model.  Even if the top level model consists of 1000 low level models there's no way for the end user to get any stats about these low level models through the Elasticsearch APIs so it doesn't really help to refer to them.\nI think the pragmatic approach is to take singular or plural from the field names returned by the get job stats API.  These are also persisted in stored documents and it would be a major piece of work to change them now, which cannot be justified as it would mean we would spend months doing it instead of adding useful functionality.\nSo therefore I think we should go with model singular and forecasts plural.\nbuckets, records and fields in the _cat API have in many places been shortened from names containing bucket_count, record_count or field_count in the stats API, so there isn't the same degree of equivalence.", "author": "droberts195", "createdAt": "2020-02-28T12:00:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgwMjQ5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385802496", "bodyText": "Thanks for the explanation, @droberts195.  To be clear are you recommending that we revert to \"bucket.\" instead of \"buckets.\" columns in the cat datafeeds and cat anomaly detectors APIs?", "author": "lcawl", "createdAt": "2020-02-28T16:44:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTgwNzYzMA==", "url": "https://github.com/elastic/elasticsearch/pull/52866#discussion_r385807630", "bodyText": "To be clear are you recommending that we revert to \"bucket.\" instead of \"buckets.\" columns in the cat datafeeds and cat anomaly detectors APIs?\n\nNo, bucket/buckets is not directly comparable between the cat APIs and the stats APIs.  So I think it's OK to leave it as-is.", "author": "droberts195", "createdAt": "2020-02-28T16:54:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTI4NzAwMQ=="}], "type": "inlineReview"}, {"oid": "4d237387caad31bfd2631d568763aa7fd7726fcd", "url": "https://github.com/elastic/elasticsearch/commit/4d237387caad31bfd2631d568763aa7fd7726fcd", "message": "Fixes yaml test failures", "committedDate": "2020-02-27T18:46:19Z", "type": "commit"}, {"oid": "f635cacc37b8151dbdc7acd3c380eb36659a2b9f", "url": "https://github.com/elastic/elasticsearch/commit/f635cacc37b8151dbdc7acd3c380eb36659a2b9f", "message": "Merge branch 'master' into cat-jobs", "committedDate": "2020-02-28T17:23:35Z", "type": "commit"}]}