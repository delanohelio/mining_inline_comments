{"pr_number": 66087, "pr_title": "[7.x][ML] Support mapped runtime fields for data frame analytics (#66\u2026", "pr_createdAt": "2020-12-09T09:52:30Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/66087", "timeline": [{"oid": "db5f1b6f9d40820c554dcba40b4fc6c45691260d", "url": "https://github.com/elastic/elasticsearch/commit/db5f1b6f9d40820c554dcba40b4fc6c45691260d", "message": "[7.x][ML] Support mapped runtime fields for data frame analytics (#66014)\n\nWhen we create the destination index for a data frame analytics job,\nwe merge the mappings across the source indices and copy them over\nto the dest index. In order to support mapped runtime fields,\nthis commit adds to that merging and copying over the runtime\nmappings.\n\nFixes #65854\n\nBackport of #66014", "committedDate": "2020-12-09T09:49:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE2NDQ4OA==", "url": "https://github.com/elastic/elasticsearch/pull/66087#discussion_r539164488", "bodyText": "This was a tricky backport because of the difference between master and 7.x due to type removal.\nHere we used to check the type names are all the same. I decided to simplify this bit by removing this validation. It is not really a meaningful validation. The reason is that in 7.x each index may only contain a single type. While it is possible for 6.x indices to have differently named types, as long as their mappings do not conflict we should be fine.\n@droberts195 As this is the main difference compared to the PR in master, could you verify this makes sense to you too?", "author": "dimitris-athanasiou", "createdAt": "2020-12-09T09:54:33Z", "path": "x-pack/plugin/ml/src/main/java/org/elasticsearch/xpack/ml/dataframe/MappingsMerger.java", "diffHunk": "@@ -59,19 +83,11 @@ public static void mergeMappings(Client client, Map<String, String> headers, Dat\n             Iterator<ObjectObjectCursor<String, MappingMetadata>> typeIterator = indexMappings.value.iterator();\n             while (typeIterator.hasNext()) {\n                 ObjectObjectCursor<String, MappingMetadata> typeMapping = typeIterator.next();\n-                if (type == null) {", "originalCommit": "db5f1b6f9d40820c554dcba40b4fc6c45691260d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ3Njk0OQ==", "url": "https://github.com/elastic/elasticsearch/pull/66087#discussion_r539476949", "bodyText": "Yes, sounds fine to me too", "author": "droberts195", "createdAt": "2020-12-09T16:55:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTE2NDQ4OA=="}], "type": "inlineReview"}]}