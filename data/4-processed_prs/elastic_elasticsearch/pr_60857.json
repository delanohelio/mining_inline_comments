{"pr_number": 60857, "pr_title": "Update configuring-metricbeat.asciidoc", "pr_createdAt": "2020-08-07T10:04:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60857", "timeline": [{"oid": "a529b5a50cca21f53b50a66887548d44215cf0ae", "url": "https://github.com/elastic/elasticsearch/commit/a529b5a50cca21f53b50a66887548d44215cf0ae", "message": "Update configuring-metricbeat.asciidoc\n\nAdding ssl related configuration in the `modules.d/elasticsearch-xpack.yml` and the explanation because having a security-enabled cluster is a common scenario, yet, to allow metricbeat to send monitoring from a security-enabled cluster, one has to either use `ssl.verification_mode: \"none\"` (default is full) or to add other three ssl settings, namely, \r\n- ssl.certificate_authorities\r\n- ssl.certificate\r\n- ssl.key\r\n\r\nThe current document makes it very hard to find the related reference in metricbeat. One need to go to the elasticsearch module first,\r\nhttps://www.elastic.co/guide/en/beats/metricbeat/7.8/metricbeat-module-elasticsearch.html\r\nAnd from there, to check SSL settings which are available here:\r\nhttps://www.elastic.co/guide/en/beats/metricbeat/7.8/configuration-ssl.html#_certificate_authorities", "committedDate": "2020-08-07T10:01:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyNjIyOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60857#discussion_r468026229", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            .. Add `ssl` related setting. By default ssl is disabled when the ssl section is missing. If Elastic security features are enabled, you must explicitly add {metricbeat-ref}/configuration-ssl.html[ssl section] to allow metricbeat to communicate to the host. \n          \n          \n            \n            .. If TLS is enabled on the HTTP layer of your {es} cluster, you must either use https as the URL scheme in the `hosts` setting or add the `ssl.enabled: true` setting. Depending on the TLS configuration of your {es} cluster, you might also need to specify {metricbeat-ref}/configuration-ssl.html[additional ssl.*] settings.", "author": "lcawl", "createdAt": "2020-08-10T16:22:58Z", "path": "docs/reference/monitoring/configuring-metricbeat.asciidoc", "diffHunk": "@@ -110,6 +115,8 @@ Alternatively, use the\n \n .. Add the `username` and `password` settings to the {es} module configuration\n file. \n+\n+.. Add `ssl` related setting. By default ssl is disabled when the ssl section is missing. If Elastic security features are enabled, you must explicitly add {metricbeat-ref}/configuration-ssl.html[ssl section] to allow metricbeat to communicate to the host. ", "originalCommit": "a529b5a50cca21f53b50a66887548d44215cf0ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTQ3MzIwOQ==", "url": "https://github.com/elastic/elasticsearch/pull/60857#discussion_r469473209", "bodyText": "Per @tvernum's comment, I think we should amend this section to say something like:\n\nIf TLS is enabled on the HTTP layer of your Elasticsearch cluster, you must either use https as the URL scheme in the hosts setting or add the ssl.enabled: true setting. Depending on the TLS configuration of your Elasticsearch cluster, you may need to specify {metricbeat-ref}/configuration-ssl.html[additional ssl.*] settings.", "author": "ycombinator", "createdAt": "2020-08-12T18:55:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODAyNjIyOQ=="}], "type": "inlineReview"}, {"oid": "a4980b608677517dba9ec058da896b2f15b6ec44", "url": "https://github.com/elastic/elasticsearch/commit/a4980b608677517dba9ec058da896b2f15b6ec44", "message": "Update docs/reference/monitoring/configuring-metricbeat.asciidoc", "committedDate": "2020-08-13T22:20:30Z", "type": "commit"}, {"oid": "3032fa53be5b82009a6f64763d3bc5d6f76dd4d1", "url": "https://github.com/elastic/elasticsearch/commit/3032fa53be5b82009a6f64763d3bc5d6f76dd4d1", "message": "Merge branch '7.8' into Leaf-Lin-patch-2", "committedDate": "2020-08-17T16:25:30Z", "type": "commit"}]}