{"pr_number": 55632, "pr_title": "Edit actions for consistency and add action template.", "pr_createdAt": "2020-04-22T22:38:46Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/55632", "timeline": [{"oid": "7529bb656414ed76360136f16d597606152765b4", "url": "https://github.com/elastic/elasticsearch/commit/7529bb656414ed76360136f16d597606152765b4", "message": "Edit actions for consistency and add action template.", "committedDate": "2020-04-22T22:32:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MDAyOA==", "url": "https://github.com/elastic/elasticsearch/pull/55632#discussion_r413950028", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Makes the index  <<dynamic-index-settings,`index.blocks.write`, read-only>>.\n          \n          \n            \n            Makes the index <<dynamic-index-settings,read-only>>.", "author": "jrodewig", "createdAt": "2020-04-23T16:36:09Z", "path": "docs/reference/ilm/actions/ilm-readonly.asciidoc", "diffHunk": "@@ -1,17 +1,17 @@\n [role=\"xpack\"]\n [[ilm-readonly]]\n-=== Read-only\n+=== Read only\n \n Phases allowed: warm.\n \n-Sets an index as read-only. See <<dynamic-index-settings,`index.blocks.write`>>.\n+Makes the index  <<dynamic-index-settings,`index.blocks.write`, read-only>>.", "originalCommit": "7529bb656414ed76360136f16d597606152765b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MTMwMg==", "url": "https://github.com/elastic/elasticsearch/pull/55632#discussion_r413951302", "bodyText": "This makes it consistent with the readonly action.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This action makes the index read-only.\n          \n          \n            \n            See <<dynamic-index-settings,`index.blocks.write`>>.\n          \n          \n            \n            This action makes the index <<dynamic-index-settings,read-only>>.", "author": "jrodewig", "createdAt": "2020-04-23T16:37:53Z", "path": "docs/reference/ilm/actions/ilm-forcemerge.asciidoc", "diffHunk": "@@ -4,22 +4,21 @@\n \n Phases allowed: hot, warm.\n \n-NOTE: The index is made read-only when this action is run.\n-See <<dynamic-index-settings,`index.blocks.write`>>.\n+<<indices-forcemerge,Force merges>> the index into \n+the specified maximum number of <<indices-segments,segments>>.\n \n-NOTE: If the `forcemerge` action is used in the `hot` phase, the `rollover` action *must* be preset.\n-{ilm-init} validates this predicate and will refuse a policy with a forcemerge in the hot phase without a\n-rollover action.\n+This action makes the index read-only.\n+See <<dynamic-index-settings,`index.blocks.write`>>.", "originalCommit": "7529bb656414ed76360136f16d597606152765b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MTkyMQ==", "url": "https://github.com/elastic/elasticsearch/pull/55632#discussion_r413951921", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This option is applicable when the <<ilm-searchable-snapshot-action>> is used in the cold phase.\n          \n          \n            \n            This option is applicable when the <<ilm-searchable-snapshot-action,searchable\n          \n          \n            \n            snapshot>> action is used in the cold phase.", "author": "jrodewig", "createdAt": "2020-04-23T16:38:47Z", "path": "docs/reference/ilm/actions/ilm-delete.asciidoc", "diffHunk": "@@ -6,16 +6,16 @@ Phases allowed: delete.\n \n Permanently removes the index.\n \n-[[ilm-delete-action-options]]\n-==== Delete\n+[[ilm-delete-options]]\n+==== Options\n \n `delete_searchable_snapshot`::\n (Optional, boolean)\n Deletes the searchable snapshot created in the cold phase. \n Defaults to `true`.\n-This is applicable when the <<ilm-searchable-snapshot-action>> is used in the cold phase.\n+This option is applicable when the <<ilm-searchable-snapshot-action>> is used in the cold phase.", "originalCommit": "7529bb656414ed76360136f16d597606152765b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzkyMg==", "url": "https://github.com/elastic/elasticsearch/pull/55632#discussion_r413953922", "bodyText": "I believe this is causing the docs-check CI to fail.\nWe should just skip it.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            --------------------------------------------------\n          \n          \n            \n            --------------------------------------------------\n          \n          \n            \n            // TEST[skip: For illustrative purposes only. Contains fake actions.]", "author": "jrodewig", "createdAt": "2020-04-23T16:41:33Z", "path": "docs/reference/ilm/actions/_ilm-action-template.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+////\n+This is a template for ILM action reference documentation.\n+\n+To document a new action, copy this file, remove comments like this, and\n+replace \"sample\" with the appropriate action name.\n+\n+Ensure the new action docs are linked and included in\n+docs/reference/ilm/actions.asciidoc\n+////\n+\n+[role=\"xpack\"]\n+[[ilm-sample]]\n+=== Sample\n+\n+Phases allowed: hot, warm, cold, delete.\n+\n+////\n+INTRO\n+Include a brief, 1-2 sentence description.\n+////\n+\n+Does a cool thing. \n+\n+[[ilm-sample-options]]\n+==== Options\n+\n+////\n+Definition list of the options that can be specified for the action:\n+\n+If there are no options:\n+\n+None.\n+////\n+\n+`sample_option1`::\n+(Optional, integer)\n+Number of something.\n+\n+`sample_option2`::\n+(Required, string)\n+Name of something.\n+\n+[[ilm-sample-ex]]\n+==== Example\n+\n+////\n+Basic example of configuring the action in an ILM policy.\n+\n+Additional examples are optional.\n+////\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _ilm/policy/my_policy\n+{\n+  \"policy\": {\n+    \"phases\": {\n+      \"warm\": {\n+        \"actions\": {\n+          \"sample\" : {\n+            \"sample_option1\" : 2\n+          }\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------", "originalCommit": "7529bb656414ed76360136f16d597606152765b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzk1MzkzOQ==", "url": "https://github.com/elastic/elasticsearch/pull/55632#discussion_r413953939", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            // TEST[skip: For illustrative purposes only. Contains fake actions.]", "author": "jrodewig", "createdAt": "2020-04-23T16:41:35Z", "path": "docs/reference/ilm/actions/_ilm-action-template.asciidoc", "diffHunk": "@@ -0,0 +1,93 @@\n+////\n+This is a template for ILM action reference documentation.\n+\n+To document a new action, copy this file, remove comments like this, and\n+replace \"sample\" with the appropriate action name.\n+\n+Ensure the new action docs are linked and included in\n+docs/reference/ilm/actions.asciidoc\n+////\n+\n+[role=\"xpack\"]\n+[[ilm-sample]]\n+=== Sample\n+\n+Phases allowed: hot, warm, cold, delete.\n+\n+////\n+INTRO\n+Include a brief, 1-2 sentence description.\n+////\n+\n+Does a cool thing. \n+\n+[[ilm-sample-options]]\n+==== Options\n+\n+////\n+Definition list of the options that can be specified for the action:\n+\n+If there are no options:\n+\n+None.\n+////\n+\n+`sample_option1`::\n+(Optional, integer)\n+Number of something.\n+\n+`sample_option2`::\n+(Required, string)\n+Name of something.\n+\n+[[ilm-sample-ex]]\n+==== Example\n+\n+////\n+Basic example of configuring the action in an ILM policy.\n+\n+Additional examples are optional.\n+////\n+\n+[source,console]\n+--------------------------------------------------\n+PUT _ilm/policy/my_policy\n+{\n+  \"policy\": {\n+    \"phases\": {\n+      \"warm\": {\n+        \"actions\": {\n+          \"sample\" : {\n+            \"sample_option1\" : 2\n+          }\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+\n+[[ilm-sample2-ex]]\n+===== Describe example\n+\n+The sample action in the following policy does something interesting. \n+\n+[source,console]\n+--------------------------------------------------\n+PUT _ilm/policy/my_policy\n+{\n+  \"policy\": {\n+    \"phases\": {\n+      \"warm\": {\n+        \"actions\": {\n+          \"sample\" : {\n+            \"sample_option1\" : \"100\"\n+            \"sample_option2\" : \"interesting\"\n+          }\n+        }\n+      }\n+    }\n+  }\n+}\n+--------------------------------------------------\n+", "originalCommit": "7529bb656414ed76360136f16d597606152765b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b11385c8265e2a6faf4d329b94dae0bc74922b27", "url": "https://github.com/elastic/elasticsearch/commit/b11385c8265e2a6faf4d329b94dae0bc74922b27", "message": "Update docs/reference/ilm/actions/ilm-readonly.asciidoc\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-04-24T01:28:13Z", "type": "commit"}, {"oid": "cb4505c65ddbb1414e30dc771b8666fdc5fbdced", "url": "https://github.com/elastic/elasticsearch/commit/cb4505c65ddbb1414e30dc771b8666fdc5fbdced", "message": "Apply suggestions from code review\n\nCo-Authored-By: James Rodewig <james.rodewig@elastic.co>", "committedDate": "2020-04-24T01:30:03Z", "type": "commit"}, {"oid": "f05fe19b302756b49f22baf38d395720e12d7432", "url": "https://github.com/elastic/elasticsearch/commit/f05fe19b302756b49f22baf38d395720e12d7432", "message": "Fix JSON parse error", "committedDate": "2020-04-27T23:06:20Z", "type": "commit"}, {"oid": "7ccd4bb11fb71b47e13b07a2d8655baa868f22a5", "url": "https://github.com/elastic/elasticsearch/commit/7ccd4bb11fb71b47e13b07a2d8655baa868f22a5", "message": "fixed", "committedDate": "2020-04-28T02:06:23Z", "type": "commit"}]}