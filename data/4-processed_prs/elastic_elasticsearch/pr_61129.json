{"pr_number": 61129, "pr_title": "Add mention of geo_shape support in geotile and geohash grid agg docs", "pr_createdAt": "2020-08-14T00:38:20Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61129", "timeline": [{"oid": "0c88426ac86460bd2cb67eb93c8f0bd64624715d", "url": "https://github.com/elastic/elasticsearch/commit/0c88426ac86460bd2cb67eb93c8f0bd64624715d", "message": "Add mention of geo_shape support in geotile and geohash grid agg docs\n\nPreviously, geo_shape support was only mentioned in a dedicated x-pack\nsection. This may be misleading, as the introductory paragraph only\nmentions geo_point.", "committedDate": "2020-08-14T00:36:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDc2OTM1Mw==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r470769353", "bodyText": "\"and groups points into buckets\" leaves out how geo_shapes work. How about enhancing with text how geo_shapes are matched into buckets as well. Maybe something like \"and groups points, lines, and polygons into buckets\"?", "author": "nreese", "createdAt": "2020-08-14T17:51:10Z", "path": "docs/reference/aggregations/bucket/geotilegrid-aggregation.asciidoc", "diffHunk": "@@ -1,7 +1,7 @@\n [[search-aggregations-bucket-geotilegrid-aggregation]]\n === GeoTile Grid Aggregation\n \n-A multi-bucket aggregation that works on `geo_point` fields and groups points into\n+A multi-bucket aggregation that works on `geo_point` and `geo_shape` fields and groups points into", "originalCommit": "0c88426ac86460bd2cb67eb93c8f0bd64624715d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b09f6190b4234fbce1391d9b44bad961828cb997", "url": "https://github.com/elastic/elasticsearch/commit/b09f6190b4234fbce1391d9b44bad961828cb997", "message": "Merge remote-tracking branch 'elastic/master' into geoshape-docs", "committedDate": "2020-11-16T22:59:18Z", "type": "commit"}, {"oid": "497e1dded6f035bcd9f822277dcc0941e59fcd2b", "url": "https://github.com/elastic/elasticsearch/commit/497e1dded6f035bcd9f822277dcc0941e59fcd2b", "message": "update description", "committedDate": "2020-11-16T23:02:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTcxNDc5Mw==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529714793", "bodyText": "I tried to streamline this a little bit, but feel free to ignore if wanted.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A multi-bucket aggregation that works on `geo_point` and `geo_shape` fields and groups points, lines and shapes into buckets that represent cells in a grid.\n          \n          \n            \n            A multi-bucket aggregation that groups <<geo-point,`geo_point`>> and\n          \n          \n            \n            <<geo-shape,`geo_shape`>> values into buckets that represent a grid.", "author": "jrodewig", "createdAt": "2020-11-24T16:34:12Z", "path": "docs/reference/aggregations/bucket/geohashgrid-aggregation.asciidoc", "diffHunk": "@@ -4,7 +4,7 @@\n <titleabbrev>Geohash grid</titleabbrev>\n ++++\n \n-A multi-bucket aggregation that works on `geo_point` fields and groups points into buckets that represent cells in a grid.\n+A multi-bucket aggregation that works on `geo_point` and `geo_shape` fields and groups points, lines and shapes into buckets that represent cells in a grid.", "originalCommit": "497e1dded6f035bcd9f822277dcc0941e59fcd2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTcyMjgzMw==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529722833", "bodyText": "Same as above.", "author": "jrodewig", "createdAt": "2020-11-24T16:45:17Z", "path": "docs/reference/aggregations/bucket/geotilegrid-aggregation.asciidoc", "diffHunk": "@@ -4,8 +4,9 @@\n <titleabbrev>Geotile grid</titleabbrev>\n ++++\n \n-A multi-bucket aggregation that works on `geo_point` fields and groups points into\n-buckets that represent cells in a grid. The resulting grid can be sparse and only\n+A multi-bucket aggregation that works on `geo_point` and `geo_shape` fields and groups\n+points, lines and shapes into buckets that represent cells in a grid.\n+The resulting grid can be sparse and only", "originalCommit": "497e1dded6f035bcd9f822277dcc0941e59fcd2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTcyMjkxNA==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529722914", "bodyText": "Same as above.", "author": "jrodewig", "createdAt": "2020-11-24T16:45:23Z", "path": "docs/reference/aggregations/bucket/geotilegrid-aggregation.asciidoc", "diffHunk": "@@ -26,9 +27,9 @@ costly in terms of RAM and result sizes. Please see the example below on how\n to first filter the aggregation to a smaller geographic area before requesting\n high-levels of detail.\n \n-The specified field must be of type `geo_point` (which can only be set\n-explicitly in the mappings) and it can also hold an array of `geo_point`\n-fields, in which case all points will be taken into account during aggregation.\n+The specified field must be of type `geo_point` or `geo_shape` (which can only be\n+set explicitly in the mappings). It can also hold an array of `geo_point` fields,\n+in which case all points will be taken into account during aggregation.", "originalCommit": "497e1dded6f035bcd9f822277dcc0941e59fcd2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTcyMjk5MA==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529722990", "bodyText": "I wonder if this paragraph is needed. We already state that the agg works on geo_point and geo_shape fields. The note about explicit mappings seems more relevant to the field types than the agg.\nDo users commonly use geo_point to store arrays? If so, would they assume array values are supported as they are elsewhere in ES?\nI included a suggestion if we decide to keep the para. Feel free to ignore if wanted.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The specified field must be of type `geo_point` or `geo_shape` (which can only be\n          \n          \n            \n            set explicitly in the mappings). It can also hold an array of `geo_point` fields,\n          \n          \n            \n            in which case all points will be taken into account during aggregation.\n          \n          \n            \n            You can only use `geotile_grid` to aggregate an explicitly mapped `geo_point` or\n          \n          \n            \n            `geo_shape` field. If the `geo_point` field contains an array, `geotile_grid`\n          \n          \n            \n            aggregates all the array values.", "author": "jrodewig", "createdAt": "2020-11-24T16:45:29Z", "path": "docs/reference/aggregations/bucket/geohashgrid-aggregation.asciidoc", "diffHunk": "@@ -15,7 +15,9 @@ Geohashes used in this aggregation can have a choice of precision between 1 and\n WARNING: The highest-precision geohash of length 12 produces cells that cover less than a square metre of land and so high-precision requests can be very costly in terms of RAM and result sizes.\n Please see the example below on how to first filter the aggregation to a smaller geographic area before requesting high-levels of detail.\n \n-The specified field must be of type `geo_point` (which can only be set explicitly in the mappings) and it can also hold an array of `geo_point` fields, in which case all points will be taken into account during aggregation.\n+The specified field must be of type `geo_point` or `geo_shape` (which can only be\n+set explicitly in the mappings). It can also hold an array of `geo_point` fields,\n+in which case all points will be taken into account during aggregation.", "originalCommit": "497e1dded6f035bcd9f822277dcc0941e59fcd2b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7445a136bbee1838ced7de9084f2549f3b731f57", "url": "https://github.com/elastic/elasticsearch/commit/7445a136bbee1838ced7de9084f2549f3b731f57", "message": "Merge remote-tracking branch 'elastic/master' into geoshape-docs", "committedDate": "2020-11-24T20:53:26Z", "type": "commit"}, {"oid": "f7c271a5b9634d29ca9fad4993ee3905432b7aad", "url": "https://github.com/elastic/elasticsearch/commit/f7c271a5b9634d29ca9fad4993ee3905432b7aad", "message": "incorporate review suggestions", "committedDate": "2020-11-24T21:35:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg5NTYxOA==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529895618", "bodyText": "Fixes a copy/paste error on the agg name\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can only use `geotile_grid` to aggregate an explicitly mapped `geo_point` or\n          \n          \n            \n            `geo_shape` field. If the `geo_point` field contains an array, `geotile_grid`\n          \n          \n            \n            aggregates all the array values.\n          \n          \n            \n            You can only use `geohash_grid` to aggregate an explicitly mapped `geo_point` or\n          \n          \n            \n            `geo_shape` field. If the `geo_point` field contains an array, `geohash_grid`\n          \n          \n            \n            aggregates all the array values.", "author": "jrodewig", "createdAt": "2020-11-24T21:41:15Z", "path": "docs/reference/aggregations/bucket/geohashgrid-aggregation.asciidoc", "diffHunk": "@@ -15,7 +16,9 @@ Geohashes used in this aggregation can have a choice of precision between 1 and\n WARNING: The highest-precision geohash of length 12 produces cells that cover less than a square metre of land and so high-precision requests can be very costly in terms of RAM and result sizes.\n Please see the example below on how to first filter the aggregation to a smaller geographic area before requesting high-levels of detail.\n \n-The specified field must be of type `geo_point` (which can only be set explicitly in the mappings) and it can also hold an array of `geo_point` fields, in which case all points will be taken into account during aggregation.\n+You can only use `geotile_grid` to aggregate an explicitly mapped `geo_point` or\n+`geo_shape` field. If the `geo_point` field contains an array, `geotile_grid`\n+aggregates all the array values.", "originalCommit": "f7c271a5b9634d29ca9fad4993ee3905432b7aad", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkwMTY5Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529901696", "bodyText": "\ud83d\ude04", "author": "talevy", "createdAt": "2020-11-24T21:50:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg5NTYxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTkwMTk5Mw==", "url": "https://github.com/elastic/elasticsearch/pull/61129#discussion_r529901993", "bodyText": "was too haste over here. good catch", "author": "talevy", "createdAt": "2020-11-24T21:50:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTg5NTYxOA=="}], "type": "inlineReview"}, {"oid": "4c9343162c5ee45068f5c372ec70dabbb53e12d1", "url": "https://github.com/elastic/elasticsearch/commit/4c9343162c5ee45068f5c372ec70dabbb53e12d1", "message": "Update docs/reference/aggregations/bucket/geohashgrid-aggregation.asciidoc", "committedDate": "2020-11-24T21:41:23Z", "type": "commit"}]}