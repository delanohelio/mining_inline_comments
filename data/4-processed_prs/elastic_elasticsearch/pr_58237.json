{"pr_number": 58237, "pr_title": "Remove Settings parameter from FieldMapper base class", "pr_createdAt": "2020-06-17T10:36:05Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58237", "timeline": [{"oid": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "url": "https://github.com/elastic/elasticsearch/commit/9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "message": "Remove Settings parameter from FieldMapper base class", "committedDate": "2020-06-17T10:33:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY0NjgxNA==", "url": "https://github.com/elastic/elasticsearch/pull/58237#discussion_r441646814", "bodyText": "I thought I'd never see a point where we use the settings at this stage in the PR ;-)", "author": "cbuescher", "createdAt": "2020-06-17T15:45:49Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/LegacyGeoShapeFieldMapper.java", "diffHunk": "@@ -420,12 +420,15 @@ public PrefixTreeStrategy resolvePrefixTreeStrategy(String strategyName) {\n         }\n     }\n \n+    private final Version indexCreatedVersion;\n+\n     public LegacyGeoShapeFieldMapper(String simpleName, FieldType fieldType, MappedFieldType mappedFieldType,\n                                      Explicit<Boolean> ignoreMalformed, Explicit<Boolean> coerce, Explicit<Orientation> orientation,\n                                      Explicit<Boolean> ignoreZValue, Settings indexSettings,\n                                      MultiFields multiFields, CopyTo copyTo) {\n-        super(simpleName, fieldType, mappedFieldType, ignoreMalformed, coerce, ignoreZValue, orientation, indexSettings,\n+        super(simpleName, fieldType, mappedFieldType, ignoreMalformed, coerce, ignoreZValue, orientation,\n             multiFields, copyTo);\n+        this.indexCreatedVersion = Version.indexCreated(indexSettings);", "originalCommit": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjExODI3NQ==", "url": "https://github.com/elastic/elasticsearch/pull/58237#discussion_r442118275", "bodyText": "Here's the second use!", "author": "romseygeek", "createdAt": "2020-06-18T10:10:48Z", "path": "x-pack/plugin/vectors/src/main/java/org/elasticsearch/xpack/vectors/mapper/DenseVectorFieldMapper.java", "diffHunk": "@@ -144,10 +144,13 @@ public Query termQuery(Object value, QueryShardContext context) {\n         }\n     }\n \n+    private final Version indexCreatedVersion;\n+\n     private DenseVectorFieldMapper(String simpleName, FieldType fieldType, MappedFieldType mappedFieldType,\n                                    Settings indexSettings, MultiFields multiFields, CopyTo copyTo) {\n-        super(simpleName, fieldType, mappedFieldType, indexSettings, multiFields, copyTo);\n+        super(simpleName, fieldType, mappedFieldType, multiFields, copyTo);\n         assert fieldType.indexOptions() == IndexOptions.NONE;\n+        this.indexCreatedVersion = Version.indexCreated(indexSettings);", "originalCommit": "9aaff4c5bfbd7ca416f7fe335bd0b7d5f2f4846f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a816597a27a40d38354b541d9a4f5a86dd9d895b", "url": "https://github.com/elastic/elasticsearch/commit/a816597a27a40d38354b541d9a4f5a86dd9d895b", "message": "Merge branch 'master' into mapper/no-index-settings", "committedDate": "2020-06-18T10:24:48Z", "type": "commit"}]}