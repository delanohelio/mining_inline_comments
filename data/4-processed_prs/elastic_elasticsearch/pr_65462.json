{"pr_number": 65462, "pr_title": "Ensure parallel test execution for build-tools project", "pr_createdAt": "2020-11-24T19:58:08Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/65462", "timeline": [{"oid": "372eabdfad954cf2baee49fa60b94e745bec3734", "url": "https://github.com/elastic/elasticsearch/commit/372eabdfad954cf2baee49fa60b94e745bec3734", "message": "Ensure parallel test execution for build-tools project", "committedDate": "2020-11-24T19:55:58Z", "type": "commit"}, {"oid": "24384f1552bd2b37c19175c7814a77624f30a301", "url": "https://github.com/elastic/elasticsearch/commit/24384f1552bd2b37c19175c7814a77624f30a301", "message": "Merge branch 'master' into buid-tools-test-cleanup", "committedDate": "2020-11-24T20:13:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwMzc3MQ==", "url": "https://github.com/elastic/elasticsearch/pull/65462#discussion_r530203771", "bodyText": "provider.systemProperty...", "author": "breskeby", "createdAt": "2020-11-25T08:56:51Z", "path": "buildSrc/build.gradle", "diffHunk": "@@ -244,16 +233,16 @@ if (project != rootProject) {\n   tasks.register(\"integTest\", Test) {\n     inputs.dir(file(\"src/testKit\")).withPropertyName(\"testkit dir\").withPathSensitivity(PathSensitivity.RELATIVE)\n     systemProperty 'test.version_under_test', version\n-    onlyIf { org.elasticsearch.gradle.info.BuildParams.inFipsJvm == false }\n-    maxParallelForks = System.getProperty('tests.jvms', org.elasticsearch.gradle.info.BuildParams.defaultParallel.toString()) as Integer\n     testClassesDirs = sourceSets.integTest.output.classesDirs\n     classpath = sourceSets.integTest.runtimeClasspath\n   }\n   tasks.named(\"check\").configure { dependsOn(\"integTest\") }\n \n   // for now we hardcode the tests for our build to use the gradle jvm.\n   tasks.withType(Test).configureEach {\n+    onlyIf { org.elasticsearch.gradle.info.BuildParams.inFipsJvm == false }\n     it.executable = Jvm.current().getJavaExecutable()\n+    maxParallelForks = System.getProperty('tests.jvms', org.elasticsearch.gradle.info.BuildParams.defaultParallel.toString()) as Integer", "originalCommit": "24384f1552bd2b37c19175c7814a77624f30a301", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e5cda47d95bef6440a1dd56900d428b7a61bfe00", "url": "https://github.com/elastic/elasticsearch/commit/e5cda47d95bef6440a1dd56900d428b7a61bfe00", "message": "Use system property provider", "committedDate": "2020-11-30T21:27:04Z", "type": "commit"}]}