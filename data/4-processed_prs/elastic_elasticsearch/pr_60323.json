{"pr_number": 60323, "pr_title": "[DOCS] Update ILM docs to use composable index templates", "pr_createdAt": "2020-07-28T17:51:07Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60323", "timeline": [{"oid": "d68dc6204d3b07615a14ae69f6abc8946b1ff3fa", "url": "https://github.com/elastic/elasticsearch/commit/d68dc6204d3b07615a14ae69f6abc8946b1ff3fa", "message": "[DOCS] Update ILM docs to use composable index templates", "committedDate": "2020-07-28T17:49:35Z", "type": "commit"}, {"oid": "4d87a7c23391a38bd44bec171afcb30891693b27", "url": "https://github.com/elastic/elasticsearch/commit/4d87a7c23391a38bd44bec171afcb30891693b27", "message": "Fix Kibana text. Add alt text.", "committedDate": "2020-07-28T18:16:37Z", "type": "commit"}, {"oid": "95246de604b2b618a0c210fe5897fc26f720a584", "url": "https://github.com/elastic/elasticsearch/commit/95246de604b2b618a0c210fe5897fc26f720a584", "message": "reword", "committedDate": "2020-07-28T18:19:59Z", "type": "commit"}, {"oid": "ffe815c2a071784763750c5d710eb168e6e38dbd", "url": "https://github.com/elastic/elasticsearch/commit/ffe815c2a071784763750c5d710eb168e6e38dbd", "message": "fix caps", "committedDate": "2020-07-28T18:20:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0OTAyNw==", "url": "https://github.com/elastic/elasticsearch/pull/60323#discussion_r464649027", "bodyText": "If we update these docs to use data streams at the same time, we could add that here to this template and then remove this line, what do you think?", "author": "dakrone", "createdAt": "2020-08-03T20:37:46Z", "path": "docs/reference/ilm/ilm-tutorial.asciidoc", "diffHunk": "@@ -310,24 +310,26 @@ that match the index pattern.\n when the rollover action is triggered for an index.\n \n You can use the {kib} Create template wizard to add the template. To access the\n-wizard, open the menu, go to *Stack Management > Index Management*, and click\n-the *Index Templates* tab.\n+wizard, open the menu and go to *Stack Management > Index Management*. In the\n+the *Index Templates* tab, click *Create template*.\n \n [role=\"screenshot\"]\n-image:images/ilm/create-template-wizard.png[]\n+image:images/ilm/create-template-wizard.png[Create template page]\n \n The create template request for the example template looks like this:\n \n [source,console]\n -----------------------\n-PUT _template/timeseries_template\n+PUT _index_template/timeseries_template\n {\n   \"index_patterns\": [\"timeseries-*\"],                 <1>\n-  \"settings\": {\n-    \"number_of_shards\": 1,\n-    \"number_of_replicas\": 1,\n-    \"index.lifecycle.name\": \"timeseries_policy\",      <2>\n-    \"index.lifecycle.rollover_alias\": \"timeseries\"    <3>\n+  \"template\": {\n+    \"settings\": {\n+      \"number_of_shards\": 1,\n+      \"number_of_replicas\": 1,\n+      \"index.lifecycle.name\": \"timeseries_policy\",      <2>\n+      \"index.lifecycle.rollover_alias\": \"timeseries\"    <3>", "originalCommit": "ffe815c2a071784763750c5d710eb168e6e38dbd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY3OTMyMw==", "url": "https://github.com/elastic/elasticsearch/pull/60323#discussion_r464679323", "bodyText": "There are instructions for using data streams with ILM further up the page. Those sections already use composable templates.\nThis section is nested under \"Manage time-series data without data streams\":\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/getting-started-index-lifecycle-management.html#manage-time-series-data-without-data-streams\nWe decided to keep these instructions around because:\n\nFrom what I understand, Logstash will continue using rollover aliases.\nData streams aren't a good fit for users that need to frequently delete or update docs.\n\nThere's a tip at the top of the page that directs users here if #2 is the case:\nhttps://www.elastic.co/guide/en/elasticsearch/reference/master/getting-started-index-lifecycle-management.html#getting-started-index-lifecycle-management\nIf neither of those are applicable anymore, I think we can just remove rollover alias instructions entirely.", "author": "jrodewig", "createdAt": "2020-08-03T21:46:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0OTAyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDcwMjk4Nw==", "url": "https://github.com/elastic/elasticsearch/pull/60323#discussion_r464702987", "bodyText": "Sorry, I totally missed that part, LGTM then!", "author": "dakrone", "createdAt": "2020-08-03T22:53:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0OTAyNw=="}], "type": "inlineReview"}]}