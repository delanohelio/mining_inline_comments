{"pr_number": 60159, "pr_title": "[DOCS] Adds table with icons for version compatibility", "pr_createdAt": "2020-07-23T22:44:45Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/60159", "timeline": [{"oid": "16b4b46df8403a5ee8157171e3bdfc2afea04882", "url": "https://github.com/elastic/elasticsearch/commit/16b4b46df8403a5ee8157171e3bdfc2afea04882", "message": "Adds table with icons for simplicity.", "committedDate": "2020-07-23T22:32:03Z", "type": "commit"}, {"oid": "710bdf09a1c62ce4ff9070c6ea8184250c3087fb", "url": "https://github.com/elastic/elasticsearch/commit/710bdf09a1c62ce4ff9070c6ea8184250c3087fb", "message": "Updating table for clarity.", "committedDate": "2020-07-27T16:11:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwMDMwNw==", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461000307", "bodyText": "Sorry for mixing this in here but it relates. This sentence is not correct. ES does not support restoring a newer version snapshot to an older version cluster at all. It's just not possible. So \"We do not recommend \" -> \"Elasticsearch does not support \" or so :)", "author": "original-brownbear", "createdAt": "2020-07-27T16:04:48Z", "path": "docs/reference/snapshot-restore/index.asciidoc", "diffHunk": "@@ -57,17 +57,21 @@ when migrating between versions.\n \n A snapshot contains a copy of the on-disk data structures that make up an\n index or a data stream's backing indices. This means that snapshots can only be restored to versions of\n-{es} that can read the indices:\n-\n-* A snapshot of an index created in 6.x can be restored to 7.x.\n-* A snapshot of an index created in 5.x can be restored to 6.x.\n-* A snapshot of an index created in 2.x can be restored to 5.x.\n-* A snapshot of an index created in 1.x can be restored to 2.x.\n-\n-Conversely, snapshots of indices created in 1.x **cannot** be restored to 5.x\n-or 6.x, snapshots of indices created in 2.x **cannot** be restored to 6.x\n-or 7.x, and snapshots of indices created in 5.x **cannot** be restored to 7.x\n-or 8.x.\n+{es} that can read the indices.\n+\n+The following table indicates snapshot compatibility between versions.\n+\n+// tag::snapshot-compatibility-matrix[]\n+[cols=\"6*^\"]\n+|===\n+| Compatibility | 2.x | 5.x | 6.x | 7.x | 8.x\n+| 1.x |{yes-icon} |{no-icon}  |{no-icon}  |{no-icon}  |{no-icon}\n+| 2.x |{no-icon}  |{yes-icon} |{no-icon}  |{no-icon}  |{no-icon}\n+| 5.x |{no-icon}  |{no-icon}  |{yes-icon} |{no-icon}  |{no-icon}\n+| 6.x |{no-icon}  |{no-icon}  |{no-icon}  |{yes-icon} |{no-icon}\n+| 7.x |{no-icon}  |{no-icon}  |{no-icon}  |{no-icon}  |{yes-icon}\n+|===\n+// end::snapshot-compatibility-matrix[]\n \n We do not recommend restoring snapshots from later {es} versions in earlier", "originalCommit": "16b4b46df8403a5ee8157171e3bdfc2afea04882", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA1NTY3Mg==", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461055672", "bodyText": "Changing the wording to be stronger:\n\nIMPORTANT: Restoring snapshots from later Elasticsearch versions to earlier versions of Elasticsearch is not supported. For example, a snapshot taken in 7.6.0 cannot be restored to 7.5.0.", "author": "lockewritesdocs", "createdAt": "2020-07-27T17:34:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwMDMwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwNDQ2Mw==", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461004463", "bodyText": "This is a confusing table to me to be honest:\nFor starters:\n\nI'm not sure we actually should enumerate all the possible version configurations here.\nWhy would 5.x -> 5.x not be a \"yes\"?\n\nMaybe it would be more helpful to make the two constraints we have crystal clear and shorten this section. In the end these two things are the rules (see my comment below also):\n\nYou cannot restore a snapshot taken by a version x into a cluster of version y if x is newer than y.\nYou cannot restore an index that was created with a version x into a cluster of version y if y is more than one major version newer than x.\n\nThat's all. I think the examples might have made sense in the past because we jumped from 2.x to 5.x but are probably unnecessary now that 7.x only has to concern itself with 6.x and newer anyway?", "author": "original-brownbear", "createdAt": "2020-07-27T16:11:29Z", "path": "docs/reference/snapshot-restore/index.asciidoc", "diffHunk": "@@ -57,17 +57,21 @@ when migrating between versions.\n \n A snapshot contains a copy of the on-disk data structures that make up an\n index or a data stream's backing indices. This means that snapshots can only be restored to versions of\n-{es} that can read the indices:\n-\n-* A snapshot of an index created in 6.x can be restored to 7.x.\n-* A snapshot of an index created in 5.x can be restored to 6.x.\n-* A snapshot of an index created in 2.x can be restored to 5.x.\n-* A snapshot of an index created in 1.x can be restored to 2.x.\n-\n-Conversely, snapshots of indices created in 1.x **cannot** be restored to 5.x\n-or 6.x, snapshots of indices created in 2.x **cannot** be restored to 6.x\n-or 7.x, and snapshots of indices created in 5.x **cannot** be restored to 7.x\n-or 8.x.\n+{es} that can read the indices.\n+\n+The following table indicates snapshot compatibility between versions.", "originalCommit": "16b4b46df8403a5ee8157171e3bdfc2afea04882", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE3NjA2NQ==", "url": "https://github.com/elastic/elasticsearch/pull/60159#discussion_r461176065", "bodyText": "@original-brownbear, thanks for your feedback \ud83d\udc4d I agree that we should add compatibility between the same versions, and also explain the difference between restoring snapshots and indices. However, I think that the table provides a clear visual indicator that allows users to quickly scan for the compatibility.\nHow does this version look to you?", "author": "lockewritesdocs", "createdAt": "2020-07-27T21:18:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAwNDQ2Mw=="}], "type": "inlineReview"}, {"oid": "b71788836894c05590eee43a17ab747fa6a4291f", "url": "https://github.com/elastic/elasticsearch/commit/b71788836894c05590eee43a17ab747fa6a4291f", "message": "Changing table formatting and incorporating more feedback.", "committedDate": "2020-07-27T21:19:06Z", "type": "commit"}, {"oid": "77fc07a393bdb0ae933d06a6c787a64ac1cf4133", "url": "https://github.com/elastic/elasticsearch/commit/77fc07a393bdb0ae933d06a6c787a64ac1cf4133", "message": "Changing table alignment.", "committedDate": "2020-07-28T14:04:31Z", "type": "commit"}]}