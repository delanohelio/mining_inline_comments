{"pr_number": 58215, "pr_title": "Fix DanglingIndicesIT Failures from MasterNotDiscoveredException", "pr_createdAt": "2020-06-17T05:34:06Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/58215", "timeline": [{"oid": "b7717442709e021a0dd509c024136710036657ab", "url": "https://github.com/elastic/elasticsearch/commit/b7717442709e021a0dd509c024136710036657ab", "message": "Fix DanglingIndicesIT Failures from MasterNotDiscoveredException\n\nThe dangling indices action is not a proper master node action so it does not\nretry when executed while the cluster hasn't fully formed yet.\nSince we use node restarts when setting up the dangling indices state we need\nto manually ensure a fully formed cluster before moving on with the tests to avoid\nfailures.", "committedDate": "2020-06-17T05:30:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5MDI3OQ==", "url": "https://github.com/elastic/elasticsearch/pull/58215#discussion_r441290279", "bodyText": "Getting us a proper stack trace :)", "author": "original-brownbear", "createdAt": "2020-06-17T05:34:37Z", "path": "server/src/internalClusterTest/java/org/elasticsearch/indices/recovery/DanglingIndicesIT.java", "diffHunk": "@@ -240,8 +240,7 @@ public void testDanglingIndicesCanBeImported() throws Exception {\n         final String danglingIndexUUID = findDanglingIndexForNode(stoppedNodeName, INDEX_NAME);\n \n         final ImportDanglingIndexRequest request = new ImportDanglingIndexRequest(danglingIndexUUID, true);\n-\n-        client().admin().cluster().importDanglingIndex(request).actionGet();\n+        client().admin().cluster().importDanglingIndex(request).get();", "originalCommit": "b7717442709e021a0dd509c024136710036657ab", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}