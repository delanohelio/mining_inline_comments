{"pr_number": 54653, "pr_title": "[DOCS] Makes PUT inference API docs collapsible", "pr_createdAt": "2020-04-02T15:23:58Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/54653", "timeline": [{"oid": "5f6de2f0300a1dfe23563c1020685645bbfdabed", "url": "https://github.com/elastic/elasticsearch/commit/5f6de2f0300a1dfe23563c1020685645bbfdabed", "message": "[DOCS] Makes PUT inference API docs collapsible.", "committedDate": "2020-04-02T15:22:31Z", "type": "commit"}, {"oid": "2e0917295774820ede3185c9a8eab27e4031af0e", "url": "https://github.com/elastic/elasticsearch/commit/2e0917295774820ede3185c9a8eab27e4031af0e", "message": "[DOCS] Adds child attribute.", "committedDate": "2020-04-02T15:47:21Z", "type": "commit"}, {"oid": "ea2a9c78cdeb62a0abb6e59a03ea5b4a5fe56cac", "url": "https://github.com/elastic/elasticsearch/commit/ea2a9c78cdeb62a0abb6e59a03ea5b4a5fe56cac", "message": "Merge branch 'master' into inference.docs.finetuning", "committedDate": "2020-04-02T16:07:31Z", "type": "commit"}, {"oid": "f4da3f71fe6eb8e887f189d02109b7c367bf93bc", "url": "https://github.com/elastic/elasticsearch/commit/f4da3f71fe6eb8e887f189d02109b7c367bf93bc", "message": "[DOCS] Synchs definitions for results_field", "committedDate": "2020-04-02T18:55:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU0OTY5OA==", "url": "https://github.com/elastic/elasticsearch/pull/54653#discussion_r402549698", "bodyText": "IMO it's hard to figure out how all these partial examples fit together.  Could we provide one full example and then just link to https://github.com/elastic/ml-json-schemas/tree/master/examples for other combinations? If yes, this can be a separate PR.", "author": "lcawl", "createdAt": "2020-04-02T19:11:24Z", "path": "docs/reference/ml/df-analytics/apis/put-inference.asciidoc", "diffHunk": "@@ -324,35 +260,160 @@ consequently, the probability of class 0 is `1 - P_1`. The class with the\n highest probability (either 0 or 1) is then returned. For more information about \n logistic regression, see \n https://en.wikipedia.org/wiki/Logistic_regression[this wiki article].\n-\n-`logistic_regression`.`weights`:::\n++\n+.Properties of `logistic_regression`\n+[%collapsible%open]\n+========\n+`weights`:::\n (Required, double) \n The weights to multiply by the input values (the inference values of the trained \n models).\n+========\n+//End logistic regression\n \n+//Begin weighted sum\n `weighted_sum`::\n (Optional, object) \n This `aggregated_output` type works with regression. The weighted sum of the \n input values.\n-\n-`weighted_sum`.`weights`:::\n++\n+.Properties of `weighted_sum`\n+[%collapsible%open]\n+========\n+`weights`:::\n (Required, double) \n The weights to multiply by the input values (the inference values of the trained \n models).\n+========\n+//End weighted sum\n \n+//Begin weighted mode\n `weighted_mode`::\n (Optional, object) \n This `aggregated_output` type works with regression or classification. It takes \n a weighted vote of the input values. The most common input value (taking the \n weights into account) is returned.\n-\n-`weighted_mode`.`weights`:::\n++\n+.Properties of `weighted_mode`\n+[%collapsible%open]\n+========\n+`weights`:::\n (Required, double) \n The weights to multiply by the input values (the inference values of the trained \n models).\n+========\n+//End weighted mode\n \n See <<ml-put-inference-aggregated-output-example>> for more details.\n \n+=======\n+//End aggregate output\n+\n+`classification_labels`::\n+(Optional, string) \n+An array of classification labels.\n+\n+`feature_names`::\n+(Optional, string)\n+Features expected by the ensemble, in their expected order.\n+\n+`target_type`::\n+(Required, string) \n+String indicating the model target type; `regression` or `classification.`\n+\n+`trained_models`::\n+(Required, object)\n+An array of `trained_model` objects. Supported trained models are `tree` and \n+`ensemble`.\n+======\n+//End ensemble\n+\n+See <<ml-put-inference-model-example>> for more details.\n+\n+=====\n+//End trained model\n+\n+====\n+//End definition\n+\n+`description`::\n+(Optional, string) \n+A human-readable description of the {infer} trained model.\n+\n+//Begin inference_config\n+`inference_config`::\n+(Required, object)\n+The default configuration for inference. This can be either a `regression`\n+or `classification` configuration. It must match the underlying\n+`definition.trained_model`'s `target_type`.\n++\n+.Properties of `inference_config`\n+[%collapsible%open]\n+====\n+`regression`:::\n+(Optional, object)\n+Regression configuration for inference.\n++\n+.Properties of regression inference\n+[%collapsible%open]\n+=====\n+`num_top_feature_importance_values`::::\n+(Optional, integer)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-regression-num-top-feature-importance-values]\n+\n+`results_field`::::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-results-field]\n+=====\n+\n+`classification`:::\n+(Optional, object)\n+Classification configuration for inference.\n++\n+.Properties of classification inference\n+[%collapsible%open]\n+=====\n+`num_top_classes`::::\n+(Optional, integer)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-classification-num-top-classes]\n+\n+`num_top_feature_importance_values`::::\n+(Optional, integer)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-classification-num-top-feature-importance-values]\n+\n+`results_field`::::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-results-field]\n+\n+`top_classes_results_field`::::\n+(Optional, string)\n+include::{docdir}/ml/ml-shared.asciidoc[tag=inference-config-classification-top-classes-results-field]\n+=====\n+====\n+//End of inference_config\n+\n+//Begin input\n+`input`::\n+(Required, object) \n+The input field names for the model definition.\n++\n+.Properties of `input`\n+[%collapsible%open]\n+====\n+`field_names`:::\n+(Required, string) \n+An array of input field names for the model.\n+====\n+//End input\n+\n+`metadata`::\n+(Optional, object) \n+An object map that contains metadata about the model.\n+\n+`tags`::\n+(Optional, string) \n+An array of tags to organize the model.\n+\n \n [[ml-put-inference-example]]", "originalCommit": "f4da3f71fe6eb8e887f189d02109b7c367bf93bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjU1MDY2Mg==", "url": "https://github.com/elastic/elasticsearch/pull/54653#discussion_r402550662", "bodyText": "FYI I merged the two results_field definitions per discussions related to #54421", "author": "lcawl", "createdAt": "2020-04-02T19:13:03Z", "path": "docs/reference/ml/ml-shared.asciidoc", "diffHunk": "@@ -1242,10 +1237,10 @@ importance] values per document. By default, it is zero and no feature importanc\n calculation occurs.\n end::inference-config-regression-num-top-feature-importance-values[]\n \n-tag::inference-config-regression-results-field[]\n-Specifies the field to which the inference prediction is written. Defaults to\n-`predicted_value`.\n-end::inference-config-regression-results-field[]\n+tag::inference-config-results-field[]\n+The field that is added to incoming documents to contain the inference", "originalCommit": "f4da3f71fe6eb8e887f189d02109b7c367bf93bc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c7b856002152904cfa21c2a74685963ebe92729a", "url": "https://github.com/elastic/elasticsearch/commit/c7b856002152904cfa21c2a74685963ebe92729a", "message": "[DOCS] Fixes some nested paragraphs", "committedDate": "2020-04-02T19:17:05Z", "type": "commit"}]}