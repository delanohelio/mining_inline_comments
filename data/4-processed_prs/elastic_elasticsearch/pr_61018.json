{"pr_number": 61018, "pr_title": "[7.9][DOCS] Replaces ml.node with node.roles: [ ml ] in ML settings", "pr_createdAt": "2020-08-12T10:35:33Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/61018", "timeline": [{"oid": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "url": "https://github.com/elastic/elasticsearch/commit/7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "message": "[7.9][DOCS] Replaces ml.node with node.roles:ml in ML settings.", "committedDate": "2020-08-12T10:31:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3MjYzMA==", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469172630", "bodyText": "suggest append ... to identify the node as an ML node that is capable of running jobs.\nAlso, can we explain..\nIf using the setting node.roles then all required roles must be explicitly set.\nThe absence of node.roles will have ml enabled by default. However setting node.roles:[] will configure a dedicated coordinating node.", "author": "sophiec20", "createdAt": "2020-08-12T10:50:47Z", "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +", "originalCommit": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3MzQ1Ng==", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469173456", "bodyText": "Now explained in prev para. Suggest leaving as\nIf you want to run jobs, there must be at least one {ml} node in your cluster.", "author": "sophiec20", "createdAt": "2020-08-12T10:52:26Z", "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +\n +\n-If set to `false` in `elasticsearch.yml`, the node cannot run jobs. If set to\n-`true` but `xpack.ml.enabled` is set to `false`, the `node.ml` setting is\n-ignored and the node cannot run jobs. If you want to run jobs, there must be at\n-least one machine learning node in your cluster. +\n+If a node does not have the `ml` role in `elasticsearch.yml`, or it has the role \n+but `xpack.ml.enabled` is set to `false`, the node cannot run jobs. If you want \n+to run jobs, there must be at least one {ml} node in your cluster. +", "originalCommit": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTE3NDIxOA==", "url": "https://github.com/elastic/elasticsearch/pull/61018#discussion_r469174218", "bodyText": "Suggest append ... to enable ML APIs on the node.", "author": "sophiec20", "createdAt": "2020-08-12T10:53:59Z", "path": "docs/reference/settings/ml-settings.asciidoc", "diffHunk": "@@ -28,17 +28,19 @@ file.\n [[general-ml-settings]]\n ==== General machine learning settings\n \n-`node.ml`::\n-deprecated:[7.9.0,\"Use <<modules-node,node.roles>> instead.\"]\n-Set to `true` (default) to identify the node as a _machine learning node_. +\n+`node.roles: [ ml ]`::\n+Set `node.roles` to contain `ml` to identify the node as a _{ml} node_. +\n +\n-If set to `false` in `elasticsearch.yml`, the node cannot run jobs. If set to\n-`true` but `xpack.ml.enabled` is set to `false`, the `node.ml` setting is\n-ignored and the node cannot run jobs. If you want to run jobs, there must be at\n-least one machine learning node in your cluster. +\n+If a node does not have the `ml` role in `elasticsearch.yml`, or it has the role \n+but `xpack.ml.enabled` is set to `false`, the node cannot run jobs. If you want \n+to run jobs, there must be at least one {ml} node in your cluster. +\n +\n-IMPORTANT: On dedicated coordinating nodes or dedicated master nodes, disable\n-the `node.ml` role.\n+IMPORTANT: On dedicated coordinating nodes or dedicated master nodes, do not set\n+the `ml` role.\n++\n+The `ml.node` setting is deprecated in the 7.9.0 version, use this setting \n+instead.\n+\n \n `xpack.ml.enabled`::\n Set to `true` (default) to enable {ml} on the node.", "originalCommit": "7697a5b9daa72eef1b482dfb8f232b6d217e48f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9354db0fd88b7ad9c0e301d4d4e2c91ee5f596d1", "url": "https://github.com/elastic/elasticsearch/commit/9354db0fd88b7ad9c0e301d4d4e2c91ee5f596d1", "message": "[DOCS] Adds more info.", "committedDate": "2020-08-12T12:25:34Z", "type": "commit"}, {"oid": "d6fff49ac704075f26e8ea5d01b35df7b0cb6e01", "url": "https://github.com/elastic/elasticsearch/commit/d6fff49ac704075f26e8ea5d01b35df7b0cb6e01", "message": "[DOCS] Shortens explanatory text.", "committedDate": "2020-08-17T14:28:08Z", "type": "commit"}, {"oid": "d1c8ea10cad9cc8c190f401afc936e96b541d071", "url": "https://github.com/elastic/elasticsearch/commit/d1c8ea10cad9cc8c190f401afc936e96b541d071", "message": "Merge branch '7.9' into 7.9.fix.ml.node", "committedDate": "2020-08-18T09:22:19Z", "type": "commit"}]}