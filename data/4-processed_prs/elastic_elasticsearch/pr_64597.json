{"pr_number": 64597, "pr_title": "Don't expose TextFieldMapper subfields", "pr_createdAt": "2020-11-04T16:12:45Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/64597", "timeline": [{"oid": "34977e4bd8617e42ecf9edd3b6765be6eef2d97c", "url": "https://github.com/elastic/elasticsearch/commit/34977e4bd8617e42ecf9edd3b6765be6eef2d97c", "message": "Centralize index analyzer management", "committedDate": "2020-10-20T13:00:59Z", "type": "commit"}, {"oid": "3d8dfc708758b9c3396a3a892f8e114d268e6389", "url": "https://github.com/elastic/elasticsearch/commit/3d8dfc708758b9c3396a3a892f8e114d268e6389", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-20T13:03:26Z", "type": "commit"}, {"oid": "d098bcdace36fcc663ede0d9e34cbbef748a870d", "url": "https://github.com/elastic/elasticsearch/commit/d098bcdace36fcc663ede0d9e34cbbef748a870d", "message": "precommit", "committedDate": "2020-10-20T13:39:12Z", "type": "commit"}, {"oid": "3a8807a8c8c88783409fdf5f5ac61727f5d7765a", "url": "https://github.com/elastic/elasticsearch/commit/3a8807a8c8c88783409fdf5f5ac61727f5d7765a", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-20T14:06:32Z", "type": "commit"}, {"oid": "4cccf095acf1c7fc9e1cbacf26600e144137fc66", "url": "https://github.com/elastic/elasticsearch/commit/4cccf095acf1c7fc9e1cbacf26600e144137fc66", "message": "delegating analyzers", "committedDate": "2020-10-20T17:33:10Z", "type": "commit"}, {"oid": "c9437df65f23fa53c62c1b94748e9d1876cb1632", "url": "https://github.com/elastic/elasticsearch/commit/c9437df65f23fa53c62c1b94748e9d1876cb1632", "message": "precommit", "committedDate": "2020-10-21T08:37:41Z", "type": "commit"}, {"oid": "1885058cf535880a619480bde0a21ca73133844d", "url": "https://github.com/elastic/elasticsearch/commit/1885058cf535880a619480bde0a21ca73133844d", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-21T08:37:44Z", "type": "commit"}, {"oid": "32382ad10226da332423054c78351e3d10ad688a", "url": "https://github.com/elastic/elasticsearch/commit/32382ad10226da332423054c78351e3d10ad688a", "message": "position increments on annotations", "committedDate": "2020-10-21T10:12:39Z", "type": "commit"}, {"oid": "0b963be352c40d6d22dc664f2ace18b6f851239a", "url": "https://github.com/elastic/elasticsearch/commit/0b963be352c40d6d22dc664f2ace18b6f851239a", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-26T16:21:32Z", "type": "commit"}, {"oid": "d6adf804bb2a5ceb35aa35062f1ebb35f1bfd1c3", "url": "https://github.com/elastic/elasticsearch/commit/d6adf804bb2a5ceb35aa35062f1ebb35f1bfd1c3", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-27T14:40:06Z", "type": "commit"}, {"oid": "f1b8095fdddd17457339486d13d1954e89ed8871", "url": "https://github.com/elastic/elasticsearch/commit/f1b8095fdddd17457339486d13d1954e89ed8871", "message": "Move to returning maps", "committedDate": "2020-10-27T15:29:11Z", "type": "commit"}, {"oid": "bb81e255fc362f3afb43df1666bf0bf495fdcc04", "url": "https://github.com/elastic/elasticsearch/commit/bb81e255fc362f3afb43df1666bf0bf495fdcc04", "message": "imports", "committedDate": "2020-10-27T15:48:45Z", "type": "commit"}, {"oid": "2585186afbf02d47db257c5b97c382e39eeb3c4d", "url": "https://github.com/elastic/elasticsearch/commit/2585186afbf02d47db257c5b97c382e39eeb3c4d", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-27T16:18:25Z", "type": "commit"}, {"oid": "4f3da1d43c7615e7ae2c51704a66966485a8791e", "url": "https://github.com/elastic/elasticsearch/commit/4f3da1d43c7615e7ae2c51704a66966485a8791e", "message": "Make everything a NamedAnalyzer", "committedDate": "2020-10-29T11:42:30Z", "type": "commit"}, {"oid": "be55995bc711fb6b5c35ffb1fa92a6f7b7fe2b30", "url": "https://github.com/elastic/elasticsearch/commit/be55995bc711fb6b5c35ffb1fa92a6f7b7fe2b30", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-10-29T11:54:26Z", "type": "commit"}, {"oid": "73044b58cab37ba8a4dea29e98332b8bd297eef0", "url": "https://github.com/elastic/elasticsearch/commit/73044b58cab37ba8a4dea29e98332b8bd297eef0", "message": "warnings", "committedDate": "2020-10-29T12:04:05Z", "type": "commit"}, {"oid": "25f3c0d4cc16fff576b1a6c71ad9437253f7e8f8", "url": "https://github.com/elastic/elasticsearch/commit/25f3c0d4cc16fff576b1a6c71ad9437253f7e8f8", "message": "sigtext", "committedDate": "2020-10-29T14:53:56Z", "type": "commit"}, {"oid": "c04c7d1bbd124b9dd74fbb9d6706edd14bc940d1", "url": "https://github.com/elastic/elasticsearch/commit/c04c7d1bbd124b9dd74fbb9d6706edd14bc940d1", "message": "Collapse ParametrizedFieldMapper into FieldMapper", "committedDate": "2020-10-29T16:30:03Z", "type": "commit"}, {"oid": "639126e07d876bddb7008c98c2cb6617f9c9edca", "url": "https://github.com/elastic/elasticsearch/commit/639126e07d876bddb7008c98c2cb6617f9c9edca", "message": "SAYT shouldn't try to add fields if index=false and store=false", "committedDate": "2020-10-29T21:30:14Z", "type": "commit"}, {"oid": "feea031ef463d700c3598349cf432ff66bc71c38", "url": "https://github.com/elastic/elasticsearch/commit/feea031ef463d700c3598349cf432ff66bc71c38", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-11-02T12:13:52Z", "type": "commit"}, {"oid": "9ee7dda1d3d02ee313dd46def7d4e40651517c0c", "url": "https://github.com/elastic/elasticsearch/commit/9ee7dda1d3d02ee313dd46def7d4e40651517c0c", "message": "Merge branch 'mapper/fieldmapper' into mapper/indexanalyzer", "committedDate": "2020-11-02T12:23:36Z", "type": "commit"}, {"oid": "88ad7e5dcd9d94f28da59d0831b2e5850211b99a", "url": "https://github.com/elastic/elasticsearch/commit/88ad7e5dcd9d94f28da59d0831b2e5850211b99a", "message": "Make indexAnalyzers passed via constructor", "committedDate": "2020-11-02T15:31:22Z", "type": "commit"}, {"oid": "040ec026700af36ec70059a4b9d943cfb48a0206", "url": "https://github.com/elastic/elasticsearch/commit/040ec026700af36ec70059a4b9d943cfb48a0206", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-11-02T15:46:39Z", "type": "commit"}, {"oid": "0d2a081fe06c0ccbe67f5777a829b05bbbf193d4", "url": "https://github.com/elastic/elasticsearch/commit/0d2a081fe06c0ccbe67f5777a829b05bbbf193d4", "message": "SearchAsYouType tests", "committedDate": "2020-11-02T16:59:26Z", "type": "commit"}, {"oid": "7b28b2c5a606ea8c41620ff387d400accb642149", "url": "https://github.com/elastic/elasticsearch/commit/7b28b2c5a606ea8c41620ff387d400accb642149", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-11-03T17:42:07Z", "type": "commit"}, {"oid": "22357b772908c5a7f08ebc185cb7b7df902b5bdc", "url": "https://github.com/elastic/elasticsearch/commit/22357b772908c5a7f08ebc185cb7b7df902b5bdc", "message": "Merge branch 'master' into mapper/indexanalyzer", "committedDate": "2020-11-03T18:10:19Z", "type": "commit"}, {"oid": "479309734141b6006c49bc8268e72e042eba3e94", "url": "https://github.com/elastic/elasticsearch/commit/479309734141b6006c49bc8268e72e042eba3e94", "message": "Merge branch 'master' into mapper/indexanalyzer", "committedDate": "2020-11-04T09:14:49Z", "type": "commit"}, {"oid": "a9051a48d45912bc7c8054faa9404d3b260a1358", "url": "https://github.com/elastic/elasticsearch/commit/a9051a48d45912bc7c8054faa9404d3b260a1358", "message": "Merge remote-tracking branch 'origin/master' into mapper/indexanalyzer", "committedDate": "2020-11-04T11:26:31Z", "type": "commit"}, {"oid": "342525c7fcf18cfdcbd85b1afe453d5fbdc0cf70", "url": "https://github.com/elastic/elasticsearch/commit/342525c7fcf18cfdcbd85b1afe453d5fbdc0cf70", "message": "Merge remote-tracking branch 'romseygeek/mapper/indexanalyzer' into mapper/indexanalyzer", "committedDate": "2020-11-04T11:26:46Z", "type": "commit"}, {"oid": "5099a60e7d3bcf3068f05e388fdd474b88fc7056", "url": "https://github.com/elastic/elasticsearch/commit/5099a60e7d3bcf3068f05e388fdd474b88fc7056", "message": "Don't call FetchContext#mapperService", "committedDate": "2020-11-04T11:30:07Z", "type": "commit"}, {"oid": "e4f78828bba7e499c234210e48d7cbdc9e24bbc3", "url": "https://github.com/elastic/elasticsearch/commit/e4f78828bba7e499c234210e48d7cbdc9e24bbc3", "message": "No really, don't use mapperservice", "committedDate": "2020-11-04T12:05:30Z", "type": "commit"}, {"oid": "cbf355abde4b7b206fa102ff9a62bd27cd4c05ff", "url": "https://github.com/elastic/elasticsearch/commit/cbf355abde4b7b206fa102ff9a62bd27cd4c05ff", "message": "Don't expose TextFieldMapper subfields as mappers", "committedDate": "2020-11-04T16:01:47Z", "type": "commit"}, {"oid": "ce5d93f6dbf131f760337e212038331cfaba1393", "url": "https://github.com/elastic/elasticsearch/commit/ce5d93f6dbf131f760337e212038331cfaba1393", "message": "Merge remote-tracking branch 'origin/master' into mapper/text-subfields", "committedDate": "2020-11-04T16:06:34Z", "type": "commit"}, {"oid": "483b26c1fe454f58461b8b0bd6c9b032e1dab199", "url": "https://github.com/elastic/elasticsearch/commit/483b26c1fe454f58461b8b0bd6c9b032e1dab199", "message": "FieldFetcher test", "committedDate": "2020-11-04T16:49:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzU0MDc0NQ==", "url": "https://github.com/elastic/elasticsearch/pull/64597#discussion_r517540745", "bodyText": "buildPrefixMapper -> buildPrefixInfo", "author": "jtibshirani", "createdAt": "2020-11-04T18:16:57Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java", "diffHunk": "@@ -330,7 +329,7 @@ private TextFieldType buildFieldType(FieldType fieldType, BuilderContext context\n             return ft;\n         }\n \n-        private PrefixFieldMapper buildPrefixMapper(BuilderContext context, FieldType fieldType, TextFieldType tft) {\n+        private SubFieldInfo buildPrefixMapper(BuilderContext context, FieldType fieldType, TextFieldType tft) {", "originalCommit": "483b26c1fe454f58461b8b0bd6c9b032e1dab199", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzU0MTI5NQ==", "url": "https://github.com/elastic/elasticsearch/pull/64597#discussion_r517541295", "bodyText": "We could switch to the *Info naming here too,", "author": "jtibshirani", "createdAt": "2020-11-04T18:18:00Z", "path": "server/src/main/java/org/elasticsearch/index/mapper/TextFieldMapper.java", "diffHunk": "@@ -407,12 +405,18 @@ private PhraseFieldMapper buildPhraseMapper(FieldType fieldType, TextFieldType p\n         public TextFieldMapper build(BuilderContext context) {\n             FieldType fieldType = TextParams.buildFieldType(index, store, indexOptions, norms, termVectors);\n             TextFieldType tft = buildFieldType(fieldType, context);\n-            PhraseFieldMapper phraseFieldMapper = buildPhraseMapper(fieldType, tft);\n-            PrefixFieldMapper prefixFieldMapper = buildPrefixMapper(context, fieldType, tft);\n+            SubFieldInfo phraseFieldMapper = buildPhraseInfo(fieldType, tft);", "originalCommit": "483b26c1fe454f58461b8b0bd6c9b032e1dab199", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "13062bed434c85aea94fdc55a46806e96ddd7122", "url": "https://github.com/elastic/elasticsearch/commit/13062bed434c85aea94fdc55a46806e96ddd7122", "message": "Merge remote-tracking branch 'origin/master' into mapper/text-subfields", "committedDate": "2020-11-05T10:06:31Z", "type": "commit"}, {"oid": "6ad4804b3c21fdf91c18a5881980e2d2fe522b0b", "url": "https://github.com/elastic/elasticsearch/commit/6ad4804b3c21fdf91c18a5881980e2d2fe522b0b", "message": "naming", "committedDate": "2020-11-05T10:08:13Z", "type": "commit"}, {"oid": "0a8f4aed3a6a4c63c4376af01e266d48a6d6cfc5", "url": "https://github.com/elastic/elasticsearch/commit/0a8f4aed3a6a4c63c4376af01e266d48a6d6cfc5", "message": "Merge remote-tracking branch 'origin/master' into mapper/text-subfields", "committedDate": "2020-11-05T12:04:03Z", "type": "commit"}]}