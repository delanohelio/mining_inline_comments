{"pr_number": 57769, "pr_title": "Avoid extra whitespace in parsed JVM options", "pr_createdAt": "2020-06-05T20:47:27Z", "pr_url": "https://github.com/elastic/elasticsearch/pull/57769", "timeline": [{"oid": "c95b6f1cdf2ce49632f1779bad69797ae957a598", "url": "https://github.com/elastic/elasticsearch/commit/c95b6f1cdf2ce49632f1779bad69797ae957a598", "message": "Avoid extra whitespace in parsed JVM options\n\nThe windows service script does a little munging of the parsed JVM\noption string, converting whitespaces to semicolons. We recently added\nan optional Java 14 JDK flag to our system JVM flags. On earlier JDKs,\nthe windows service batch script would encounter a double whitespace\nwhen this option was missing and convert it into double semicolons.\nDouble semicolons, in turn, don't work in the arguments to the windows\nservice command, and led to a lot of JVM options being dropped,\nincluding \"es.path.conf\", which is required for startup.\n\nThis commit puts in a double defense. First, it removes any empty-string\noptions from the system options list in the Java Options Parser code.\nSecond, it munges out double semicolons if they do appear in the parsed\noption output.\n\nOnly one of these solutions is necessary, so am open to removing one\nif it's too hacky.", "committedDate": "2020-06-05T20:41:03Z", "type": "commit"}, {"oid": "959ec7c9144a063e2fb2add3b48d35208903643c", "url": "https://github.com/elastic/elasticsearch/commit/959ec7c9144a063e2fb2add3b48d35208903643c", "message": "Merge branch 'master' into dropped-jvm-opts-for-windows-service", "committedDate": "2020-06-16T13:42:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Mjg5ODYxOQ==", "url": "https://github.com/elastic/elasticsearch/pull/57769#discussion_r472898619", "bodyText": "It it normal to duplicate the line with the new one instead of replacing the older one (the L123?)", "author": "TheFireCookie", "createdAt": "2020-08-19T09:37:41Z", "path": "distribution/src/bin/elasticsearch-service.bat", "diffHunk": "@@ -121,6 +121,7 @@ rem   - third, JVM options from ES_JAVA_OPTS are applied\n rem   - fourth, ergonomic JVM options are applied\n \n if not \"%ES_JAVA_OPTS%\" == \"\" set ES_JAVA_OPTS=%ES_JAVA_OPTS: =;%\n+if not \"%ES_JAVA_OPTS%\" == \"\" set ES_JAVA_OPTS=%ES_JAVA_OPTS:;;=;%", "originalCommit": "c95b6f1cdf2ce49632f1779bad69797ae957a598", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}