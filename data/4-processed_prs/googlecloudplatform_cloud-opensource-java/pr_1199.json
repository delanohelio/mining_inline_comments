{"pr_number": 1199, "pr_title": "Adding artifact problem test to ensure it has correct dependency path", "pr_createdAt": "2020-02-07T20:25:06Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199", "timeline": [{"oid": "879d259a85fa976a7826f869327a7eb418f54102", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/879d259a85fa976a7826f869327a7eb418f54102", "message": "Added assertion", "committedDate": "2020-02-07T20:19:03Z", "type": "commit"}, {"oid": "2749e574895fbbc914d69e5121b0225d7fd97c5c", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2749e574895fbbc914d69e5121b0225d7fd97c5c", "message": "DependencyGraphBuilderTest for unavailable artifacts", "committedDate": "2020-02-07T20:23:53Z", "type": "commit"}, {"oid": "abfc2c10e04ede04dda27e744438f979415be877", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/abfc2c10e04ede04dda27e744438f979415be877", "message": "minimum diff", "committedDate": "2020-02-07T20:25:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTAxNA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591014", "bodyText": "Line width was exceeding 100 chars.", "author": "suztomo", "createdAt": "2020-02-07T20:26:00Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -47,7 +48,9 @@\n   @Test\n   public void testGetTransitiveDependencies() throws RepositoryException {\n     DependencyGraph graph =\n-        dependencyGraphBuilder.buildGraph(new Dependency(datastore, \"compile\")).getDependencyGraph();", "originalCommit": "abfc2c10e04ede04dda27e744438f979415be877", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTAzNQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591035", "bodyText": "Line width was exceeding 100 chars.", "author": "suztomo", "createdAt": "2020-02-07T20:26:05Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -60,7 +63,9 @@ public void testGetTransitiveDependencies() throws RepositoryException {\n   @Test\n   public void testGetCompleteDependencies() throws RepositoryException {\n     DependencyGraph graph =\n-        dependencyGraphBuilder.buildCompleteGraph(new Dependency(datastore, \"compile\")).getDependencyGraph();", "originalCommit": "abfc2c10e04ede04dda27e744438f979415be877", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTA5Nw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376591097", "bodyText": "Line width was exceeding 100 chars.", "author": "suztomo", "createdAt": "2020-02-07T20:26:15Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -190,7 +222,8 @@ public void testConfigureAdditionalMavenRepositories_addingGoogleAndroidReposito\n     Artifact artifact = new DefaultArtifact(\"androidx.lifecycle:lifecycle-common-java8:2.0.0\");\n \n     // This should not raise an exception\n-    DependencyGraphResult graph = graphBuilder.buildCompleteGraph(new Dependency(artifact, \"compile\"));", "originalCommit": "abfc2c10e04ede04dda27e744438f979415be877", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5NzA0NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376597045", "bodyText": "can we test this without converting it to a string?", "author": "elharo", "createdAt": "2020-02-07T20:40:36Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyGraphBuilderTest.java", "diffHunk": "@@ -178,6 +183,33 @@ public void testGetDirectDependencies_respectExclusions() throws RepositoryExcep\n     }\n   }\n \n+  @Test\n+  public void testGetStaticLinkageCheckDependencyGraph_artifactProblems()\n+      throws RepositoryException {\n+    // In the full dependency tree of hibernate-core, xerces-impl:2.6.2 and xml-apis:2.6.2 are not\n+    // available in Maven Central.\n+    Artifact hibernateCore = new DefaultArtifact(\"org.hibernate:hibernate-core:jar:3.5.1-Final\");\n+\n+    DependencyGraphResult result =\n+        dependencyGraphBuilder.getStaticLinkageCheckDependencyGraph(\n+            ImmutableList.of(hibernateCore));\n+\n+    ImmutableList<UnresolvableArtifactProblem> artifactProblems = result.getArtifactProblems();\n+\n+    Truth.assertThat(artifactProblems).hasSize(2);\n+    UnresolvableArtifactProblem firstProblem = artifactProblems.get(0);\n+    assertEquals(\"xerces:xerces-impl:jar:2.6.2\", firstProblem.getArtifact().toString());\n+\n+    assertEquals(", "originalCommit": "abfc2c10e04ede04dda27e744438f979415be877", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwMDAyOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376600028", "bodyText": "I can setup getter for that. Give me one moment.", "author": "suztomo", "createdAt": "2020-02-07T20:47:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5NzA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwMjUzMw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1199#discussion_r376602533", "bodyText": "Maybe not worth it then.", "author": "elharo", "createdAt": "2020-02-07T20:54:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5NzA0NQ=="}], "type": "inlineReview"}]}