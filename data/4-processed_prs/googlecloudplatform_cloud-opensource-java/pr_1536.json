{"pr_number": 1536, "pr_title": "Drop optional dependencies when running LinkageCheckerMain", "pr_createdAt": "2020-07-15T16:57:46Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1536", "timeline": [{"oid": "ad2505886a703c810e32c4d40cdacb98426f4941", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/ad2505886a703c810e32c4d40cdacb98426f4941", "message": "LinkageCheckerMain to use verbose tree", "committedDate": "2020-07-15T16:56:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE5NjIyMQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1536#discussion_r455196221", "bodyText": "With excluding optional dependencies, we cannot use gax for an artifact for this test case.", "author": "suztomo", "createdAt": "2020-07-15T16:58:38Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/classpath/LinkageCheckerMainIntegrationTest.java", "diffHunk": "@@ -117,8 +117,8 @@ public void testArtifacts()\n   public void testArtifacts_noError()\n       throws IOException, RepositoryException, TransformerException, XMLStreamException,\n           LinkageCheckResultException {\n-    // gax does not have any linkage errors\n-    LinkageCheckerMain.main(new String[] {\"-a\", \"com.google.api:gax:1.56.0\"});", "originalCommit": "ad2505886a703c810e32c4d40cdacb98426f4941", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI4OTQ1NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1536#discussion_r455289455", "bodyText": "What optional dependencies does GAX have?", "author": "elharo", "createdAt": "2020-07-15T19:26:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE5NjIyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI5MzM4MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1536#discussion_r455293380", "bodyText": "It's gax's transitive dependency \"commons-logging:commons-logging:1.2\".\nClass org.apache.avalon.framework.logger.Logger is not found;\n  referenced by 1 class file\n    org.apache.commons.logging.impl.AvalonLogger (commons-logging:commons-logging:1.2)\nClass org.apache.log.Hierarchy is not found;\n  referenced by 1 class file\n    org.apache.commons.logging.impl.LogKitLogger (commons-logging:commons-logging:1.2)\nClass org.apache.log.Logger is not found;\n  referenced by 1 class file\n    org.apache.commons.logging.impl.LogKitLogger (commons-logging:commons-logging:1.2)\n\ncommons-logging:commons-logging:1.2 is at:\n  com.google.api:gax:jar:1.56.0 / com.google.auth:google-auth-library-oauth2-http:0.20.0 (compile) / com.google.http-client:google-http-client:1.34.0 (compile) / org.apache.httpcomponents:httpclient:4.5.10 (compile) / commons-logging:commons-logging:1.2 (compile)\n\nhttps://search.maven.org/artifact/commons-logging/commons-logging/1.2/jar shows\n    <dependency>\n      <groupId>logkit</groupId>\n      <artifactId>logkit</artifactId>\n      <version>1.0.1</version>\n      <optional>true</optional>\n    </dependency>\n    <dependency>\n      <groupId>avalon-framework</groupId>\n      <artifactId>avalon-framework</artifactId>\n      <version>4.1.5</version>\n      <optional>true</optional>\n    </dependency>", "author": "suztomo", "createdAt": "2020-07-15T19:33:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE5NjIyMQ=="}], "type": "inlineReview"}]}