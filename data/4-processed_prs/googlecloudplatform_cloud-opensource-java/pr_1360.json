{"pr_number": 1360, "pr_title": "Integration Tests using Maven-invoker-plugin", "pr_createdAt": "2020-04-17T18:55:36Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360", "timeline": [{"oid": "00df6095aa812b5c953ff805f05280059fbd14ae", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/00df6095aa812b5c953ff805f05280059fbd14ae", "message": "integration test first step", "committedDate": "2020-04-17T18:39:29Z", "type": "commit"}, {"oid": "3b1ea33a307cd16262850e729a1440cf91c5641b", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/3b1ea33a307cd16262850e729a1440cf91c5641b", "message": "Adding success and failure cases", "committedDate": "2020-04-17T18:52:12Z", "type": "commit"}, {"oid": "93dfd37dca3fe8851eef4ddea387744ac37d0373", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/93dfd37dca3fe8851eef4ddea387744ac37d0373", "message": "Removed unnecessary comments", "committedDate": "2020-04-17T19:08:50Z", "type": "commit"}, {"oid": "7034c72c50b7925e5c04e960507d1cf026b5b10a", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/7034c72c50b7925e5c04e960507d1cf026b5b10a", "message": "Updated comment in the pom xml", "committedDate": "2020-04-17T19:13:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQxODI4MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r410418281", "bodyText": "Document for the parameters: http://maven.apache.org/plugins/maven-invoker-plugin/run-mojo.html#cloneProjectsTo", "author": "suztomo", "createdAt": "2020-04-17T19:09:32Z", "path": "enforcer-rules/pom.xml", "diffHunk": "@@ -128,4 +128,27 @@\n       <scope>test</scope>\n     </dependency>\n   </dependencies>\n+\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <artifactId>maven-invoker-plugin</artifactId>\n+        <version>3.2.1</version>\n+        <configuration>\n+          <cloneProjectsTo>${project.build.directory}/it</cloneProjectsTo>\n+          <localRepositoryPath>${project.build.directory}/local-repo</localRepositoryPath>\n+          <postBuildHookScript>verify</postBuildHookScript>", "originalCommit": "93dfd37dca3fe8851eef4ddea387744ac37d0373", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQxOTEyMg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r410419122", "bodyText": "This is groovy script specified by \"postBuildHookScript\".\nMaven-checkstyle-plugin also uses groovy script to verify the build https://github.com/apache/maven-checkstyle-plugin/tree/master/src/it/MCHECKSTYLE-338", "author": "suztomo", "createdAt": "2020-04-17T19:11:22Z", "path": "enforcer-rules/src/it/fail-build-for-linkage-errors/verify.groovy", "diffHunk": "@@ -0,0 +1,8 @@\n+def buildLog = new File(basedir, \"build.log\")\r", "originalCommit": "93dfd37dca3fe8851eef4ddea387744ac37d0373", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5924d9a78c288676f631768c249350fcae00b583", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/5924d9a78c288676f631768c249350fcae00b583", "message": "Maven-resolver-api non-provided", "committedDate": "2020-04-17T21:03:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ4MjkyNQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r410482925", "bodyText": "Given maven-resolver-api was at the end of the class path (log), I thought controlling the order of the dependency would solve the issue.\nIt did not help. https://gist.github.com/suztomo/d35ffca4e31387591a3f7b18b7366a2b", "author": "suztomo", "createdAt": "2020-04-17T21:40:08Z", "path": "enforcer-rules/pom.xml", "diffHunk": "@@ -105,7 +105,6 @@\n     <dependency>\n       <groupId>org.apache.maven.resolver</groupId>\n       <artifactId>maven-resolver-api</artifactId>\n-      <scope>provided</scope>", "originalCommit": "5924d9a78c288676f631768c249350fcae00b583", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2e4a1cd75d7c523bdc2f5e6a3123ac2441e7fc88", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2e4a1cd75d7c523bdc2f5e6a3123ac2441e7fc88", "message": "Merge remote-tracking branch 'origin/master' into i1345", "committedDate": "2020-04-20T14:35:36Z", "type": "commit"}, {"oid": "60f77906a0e483d6120d2190debb5922bf086972", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/60f77906a0e483d6120d2190debb5922bf086972", "message": "Debugging", "committedDate": "2020-04-21T14:41:19Z", "type": "commit"}, {"oid": "0808883eab587cb7923fed87be23b5657bb92c68", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/0808883eab587cb7923fed87be23b5657bb92c68", "message": "Using Maven wrapper to use consistent version among CI\n\nThe mvnw scripts are generated via\nmvn -N io.takari:maven:wrapper", "committedDate": "2020-04-21T15:13:35Z", "type": "commit"}, {"oid": "b41d35ef1f96b14b5e364be262a53065258b8d37", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/b41d35ef1f96b14b5e364be262a53065258b8d37", "message": "Adding wrapper files", "committedDate": "2020-04-21T15:17:49Z", "type": "commit"}, {"oid": "fab8122b79dd995fa03dbbeb452e09f55c4ab8eb", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/fab8122b79dd995fa03dbbeb452e09f55c4ab8eb", "message": "Reverting debug settings", "committedDate": "2020-04-21T15:26:47Z", "type": "commit"}, {"oid": "82c09516e0d1bb2a99296c8bbfec8395ba756c56", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/82c09516e0d1bb2a99296c8bbfec8395ba756c56", "message": "Required maven updated", "committedDate": "2020-04-21T15:31:15Z", "type": "commit"}, {"oid": "ad42caa170bfa0a34ece8861e051659edd705e42", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/ad42caa170bfa0a34ece8861e051659edd705e42", "message": "Windows \\r character", "committedDate": "2020-04-21T17:26:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM2OTMwOA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412369308", "bodyText": "This file is from mvn -N io.takari:maven:wrapper https://github.com/takari/maven-wrapper.", "author": "suztomo", "createdAt": "2020-04-21T17:54:30Z", "path": ".mvn/wrapper/MavenWrapperDownloader.java", "diffHunk": "@@ -0,0 +1,117 @@\n+/*", "originalCommit": "ad42caa170bfa0a34ece8861e051659edd705e42", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjQzNzI1NQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412437255", "bodyText": "I'm surprised this isn't available as a jar on maven central.", "author": "elharo", "createdAt": "2020-04-21T19:36:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM2OTMwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM2OTU1Ng==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412369556", "bodyText": "This file is from mvn -N io.takari:maven:wrapper https://github.com/takari/maven-wrapper. This sets the Maven version that runs for mvnw command.", "author": "suztomo", "createdAt": "2020-04-21T17:54:51Z", "path": ".mvn/wrapper/maven-wrapper.properties", "diffHunk": "@@ -0,0 +1,2 @@\n+distributionUrl=https://repo.maven.apache.org/maven2/org/apache/maven/apache-maven/3.6.3/apache-maven-3.6.3-bin.zip", "originalCommit": "ad42caa170bfa0a34ece8861e051659edd705e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM3MDAwMw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412370003", "bodyText": "I found Maven 3.5.0 does not work for the enforcer rule because of the dependency conflict #1361", "author": "suztomo", "createdAt": "2020-04-21T17:55:29Z", "path": "README.md", "diffHunk": "@@ -35,7 +35,7 @@ This project is built using _Maven_.\n \n ## Requirements\n \n-1. Maven 3.5.0 or later.\n+1. Maven 3.6.0 or later.", "originalCommit": "ad42caa170bfa0a34ece8861e051659edd705e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM3MDE4Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412370183", "bodyText": "This file is from mvn -N io.takari:maven:wrapper https://github.com/takari/maven-wrapper.", "author": "suztomo", "createdAt": "2020-04-21T17:55:45Z", "path": "mvnw", "diffHunk": "@@ -0,0 +1,310 @@\n+#!/bin/sh", "originalCommit": "ad42caa170bfa0a34ece8861e051659edd705e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjM3MDI3OA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1360#discussion_r412370278", "bodyText": "This file is from mvn -N io.takari:maven:wrapper https://github.com/takari/maven-wrapper.", "author": "suztomo", "createdAt": "2020-04-21T17:55:55Z", "path": "mvnw.cmd", "diffHunk": "@@ -0,0 +1,182 @@\n+@REM ----------------------------------------------------------------------------", "originalCommit": "ad42caa170bfa0a34ece8861e051659edd705e42", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "341fbfa98056f2fb92dcd7fee48bc286eae1a85e", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/341fbfa98056f2fb92dcd7fee48bc286eae1a85e", "message": "Merge branch 'master' into i1345", "committedDate": "2020-04-22T18:59:14Z", "type": "commit"}]}