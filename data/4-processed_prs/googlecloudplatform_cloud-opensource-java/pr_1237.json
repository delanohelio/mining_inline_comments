{"pr_number": 1237, "pr_title": "DependencyTreeFormatter to respect scopes and optional flags", "pr_createdAt": "2020-02-20T19:00:24Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1237", "timeline": [{"oid": "2220be660270a4c9c7b96e2ab05346800e93dd2a", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/2220be660270a4c9c7b96e2ab05346800e93dd2a", "message": "DependencyTreeFormatter to respect scope", "committedDate": "2020-02-20T18:59:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjE5NzI3Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1237#discussion_r382197273", "bodyText": "This test was failing before this fix. DependencyTreeFormatter was ignoring scopes and optional flags (https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1237/files#diff-e825ccadbd98c809005839481296b814L84), while it was relying on equality of DependencyPath to find parent-child relationship from a Multimap.", "author": "suztomo", "createdAt": "2020-02-20T19:03:31Z", "path": "dependencies/src/test/java/com/google/cloud/tools/opensource/dependencies/DependencyTreeFormatterTest.java", "diffHunk": "@@ -73,4 +73,24 @@ public void testDependencyTree() {\n         \"The dependency should be output as tree with indentation\",\n         expectedTreeOutput, actualTreeOutput);\n   }\n+\n+  @Test\n+  public void testDependencyTree_scopeAndOptionalFlag() {\n+    List<DependencyPath> dependencyPathList = new ArrayList<>();\n+\n+    DependencyPath path1 = new DependencyPath();\n+    path1.add(new Dependency(new DefaultArtifact(\"io.grpc:grpc-auth:jar:1.15.0\"), \"compile\", true));\n+    dependencyPathList.add(path1);\n+\n+    DependencyPath path2 = new DependencyPath();\n+    path2.add(new Dependency(new DefaultArtifact(\"io.grpc:grpc-auth:jar:1.15.0\"), \"compile\", true));\n+    path2.add(\n+        new Dependency(new DefaultArtifact(\"io.grpc:grpc-core:jar:1.15.0\"), \"provided\", false));\n+    dependencyPathList.add(path2);\n+\n+    String actualTreeOutput = DependencyTreeFormatter.formatDependencyPaths(dependencyPathList);\n+    String expectedTreeOutput =\n+        \"  io.grpc:grpc-auth:jar:1.15.0\\n\" + \"    io.grpc:grpc-core:jar:1.15.0\\n\";\n+    Assert.assertEquals(expectedTreeOutput, actualTreeOutput);", "originalCommit": "2220be660270a4c9c7b96e2ab05346800e93dd2a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7154645bf63ea9e66b3957258822c6aa78b6642c", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/7154645bf63ea9e66b3957258822c6aa78b6642c", "message": "javadoc", "committedDate": "2020-02-20T19:10:49Z", "type": "commit"}]}