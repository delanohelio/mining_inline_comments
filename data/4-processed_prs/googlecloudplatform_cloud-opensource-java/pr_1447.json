{"pr_number": 1447, "pr_title": "Gradle plugin project structure proposal", "pr_createdAt": "2020-06-08T19:55:19Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447", "timeline": [{"oid": "d69f326042a7c8133f23223f05c6fe75eda005fb", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/d69f326042a7c8133f23223f05c6fe75eda005fb", "message": "Adding Gradlew wrapper", "committedDate": "2020-06-08T18:54:08Z", "type": "commit"}, {"oid": "800716a5e930e0ba51c3905b760d3c6b77fd62ce", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/800716a5e930e0ba51c3905b760d3c6b77fd62ce", "message": "Gradle project structure", "committedDate": "2020-06-08T19:49:46Z", "type": "commit"}, {"oid": "9e606641724e05f715b80f179a90fabcf5d52f04", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/9e606641724e05f715b80f179a90fabcf5d52f04", "message": "Added Linkage Checker dependency", "committedDate": "2020-06-08T20:09:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MzY3Ng==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436973676", "bodyText": "is it the custom to use 4 space indents in groovy?", "author": "elharo", "createdAt": "2020-06-08T20:15:22Z", "path": "gradle-plugin/build.gradle", "diffHunk": "@@ -0,0 +1,47 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+plugins {\n+    id 'java-gradle-plugin'", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3OTI5OA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436979298", "bodyText": "Maybe 2-space is majority.\nGrpc-java uses 4-space https://github.com/grpc/grpc-java/blob/master/build.gradle .\nJib uses 2-space https://github.com/GoogleContainerTools/jib/blob/master/jib-gradle-plugin/build.gradle\nApache Beam uses 2-space https://github.com/apache/beam/blob/master/build.gradle .\nGax-java uses 2-space https://github.com/googleapis/gax-java/blob/master/build.gradle", "author": "suztomo", "createdAt": "2020-06-08T20:26:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MzY3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk4MDcxMg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436980712", "bodyText": "Updated with 2-space.", "author": "suztomo", "createdAt": "2020-06-08T20:28:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MzY3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MjI2OQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436972269", "bodyText": "~/Downloads/gradle-6.5/bin/gradle wrapper generated this file.", "author": "suztomo", "createdAt": "2020-06-08T20:12:33Z", "path": "gradle-plugin/gradlew", "diffHunk": "@@ -0,0 +1,185 @@\n+#!/usr/bin/env sh", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MjM2NA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436972364", "bodyText": "~/Downloads/gradle-6.5/bin/gradle wrapper generated this file.", "author": "suztomo", "createdAt": "2020-06-08T20:12:44Z", "path": "gradle-plugin/gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -0,0 +1,5 @@\n+distributionBase=GRADLE_USER_HOME", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MjQ4MQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436972481", "bodyText": "~/Downloads/gradle-6.5/bin/gradle wrapper generated this file.", "author": "suztomo", "createdAt": "2020-06-08T20:12:58Z", "path": "gradle-plugin/gradlew.bat", "diffHunk": "@@ -0,0 +1,104 @@\n+@rem\r", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MzUxNQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436973515", "bodyText": "This test is in Groovy so that it mocks real usage of Gradle project and tasks in build.gradle.", "author": "suztomo", "createdAt": "2020-06-08T20:15:04Z", "path": "gradle-plugin/src/test/groovy/com/google/cloud/tools/dependencies/gradle/LinkageCheckerPluginTest.groovy", "diffHunk": "@@ -0,0 +1,32 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.google.cloud.tools.dependencies.gradle;\n+\n+import org.junit.Test\n+import org.gradle.testfixtures.ProjectBuilder\n+import org.gradle.api.Project\n+import static org.junit.Assert.*\n+\n+class LinkageCheckerPluginTest {\n+    @Test\n+    public void linkage_checker_plugin_should_add_task_to_project() {\n+        Project project = ProjectBuilder.builder().build()\n+        project.getPlugins().apply 'com.google.cloud.tools.linkageChecker'\n+\n+        assertTrue(project.tasks.linkageCheck instanceof LinkageCheckTask)", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3MzgwMA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1447#discussion_r436973800", "bodyText": "Example usage of the plugin.", "author": "suztomo", "createdAt": "2020-06-08T20:15:36Z", "path": "example-problems/gradle-project/build.gradle", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+buildscript {\n+    repositories {\n+        mavenLocal()\n+    }\n+    dependencies {\n+        classpath 'com.google.cloud.tools:linkage-checker-gradle-plugin:0.1.0-SNAPSHOT'\n+    }\n+}\n+\n+apply plugin: 'com.google.cloud.tools.linkageChecker'", "originalCommit": "9e606641724e05f715b80f179a90fabcf5d52f04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6dfb5e5cb4f42cfa9311de992fc04b774e9d4dfd", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/6dfb5e5cb4f42cfa9311de992fc04b774e9d4dfd", "message": "Added TODO", "committedDate": "2020-06-08T20:20:39Z", "type": "commit"}, {"oid": "e0bb3d2686d41bc708bb26f01dcc34eb9d6a08f6", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/e0bb3d2686d41bc708bb26f01dcc34eb9d6a08f6", "message": "2-space indent", "committedDate": "2020-06-08T20:27:53Z", "type": "commit"}]}