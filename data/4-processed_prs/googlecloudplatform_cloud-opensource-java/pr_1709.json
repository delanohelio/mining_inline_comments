{"pr_number": 1709, "pr_title": "Dashboard: all pie charts to take care of largeArcFlag", "pr_createdAt": "2020-10-14T19:41:12Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709", "timeline": [{"oid": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/201b6b1df9e581b04b2f7d277e3488f089efd0c4", "message": "Fixed #1697", "committedDate": "2020-10-14T19:38:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MTQ5Mw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504941493", "bodyText": "The indentation was incorrect.", "author": "suztomo", "createdAt": "2020-10-14T20:07:03Z", "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>", "originalCommit": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjA3Mg==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942072", "bodyText": "The right-half of 2 pie charts have largeArcFlag already.", "author": "suztomo", "createdAt": "2020-10-14T20:08:02Z", "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />", "originalCommit": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjE1OA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942158", "bodyText": "The right-half of 2 pie charts have largeArcFlag already.", "author": "suztomo", "createdAt": "2020-10-14T20:08:10Z", "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-        \n-       <td class='pie'>    \n-          <#assign ratio = convergenceErrorCount / totalArtifacts >\n-          <#assign largeArcFlag = \"0\">", "originalCommit": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0MjQyOQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1709#discussion_r504942429", "bodyText": "This function call didn't work well if it's embed in a string. So I extracted it as a variable.", "author": "suztomo", "createdAt": "2020-10-14T20:08:42Z", "path": "dashboard/src/main/resources/templates/index.ftl", "diffHunk": "@@ -69,71 +69,41 @@\n            ${localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n            ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n            latest versions of all artifacts in their own dependency tree.\n-        </td>\n-        <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n-           most recent version of all artifacts in the BOM.</td>\n-        <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n-        </td>\n-      </tr>\n-      <tr>\n-        <td class='pie'>    \n-          <#assign linkageRatio = linkageErrorCount / totalArtifacts >\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, linkageRatio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, linkageRatio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-\n-       <td class='pie'>    \n-        <#assign ratio = localUpperBoundsErrorCount / totalArtifacts >\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-        \n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>{localUpperBoundsErrorCount} out of ${totalArtifacts} artifacts \n-           ${plural(localUpperBoundsErrorCount, \"does not\", \"do not\")} pick the\n-           latest versions of all artifacts in their own dependency tree.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 0 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-        </td>\n-      \n-       <td class='pie'>    \n-        <#assign ratio = globalUpperBoundsErrorCount / totalArtifacts >\n-        <#assign largeArcFlag = \"0\">\n-        <#if ratio gt 0.5>\n-          <#assign largeArcFlag = \"1\">\n-        </#if>\n-        <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-        <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-            <desc>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n-                 have global upper bounds errors.</desc>\n-            <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-            <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-          </svg>\n-       </td>\n-        \n-       <td class='pie'>    \n-          <#assign ratio = convergenceErrorCount / totalArtifacts >\n-          <#assign largeArcFlag = \"0\">\n-          <#if ratio gt 0.5>\n-            <#assign largeArcFlag = \"1\">\n-          </#if>\n-          <#assign endPointX = pieChart.calculateEndPointX(100, 100, 100, ratio)>\n-          <#assign endPointY = pieChart.calculateEndPointY(100, 100, 100, ratio)>\n-          \n-            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${pieSize}\" height=\"${pieSize}\">\n-              <desc>${convergenceErrorCount} out of ${totalArtifacts} artifacts \n-              ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.</desc>\n-              <circle cx=\"100\" cy=\"100\" r=\"100\" stroke-width=\"3\" fill=\"lightgreen\" />\n-              <path d=\"M100,100 v -100 A100,100 0 ${largeArcFlag} 1 ${endPointX}, ${endPointY} z\" fill=\"red\" />\n-            </svg>\n+          </td>\n+          <td>${globalUpperBoundsErrorCount} out of ${totalArtifacts} artifacts\n+             ${plural(globalUpperBoundsErrorCount, \"does not\", \"do not\")} select the\n+             most recent version of all artifacts in the BOM.</td>\n+          <td>${convergenceErrorCount} out of ${totalArtifacts} artifacts\n+             ${plural(convergenceErrorCount, \"fails\", \"fail\")} to converge.\n+          </td>\n+        </tr>\n+        <tr>\n+          <td class='pie'>\n+            <@pieChartSvg\n+                description=\"${linkageErrorCount} out of ${totalArtifacts} artifacts have linkage\n+                    errors.\"\n+                ratio=linkageErrorCount / totalArtifacts />\n+          </td>\n+          <td class='pie'>\n+            <#assign doesNot=plural(localUpperBoundsErrorCount, \"does not\", \"do not\")>", "originalCommit": "201b6b1df9e581b04b2f7d277e3488f089efd0c4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "144b1b2ebe1a1b2868b300e9f9e97f6007b59ea2", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/144b1b2ebe1a1b2868b300e9f9e97f6007b59ea2", "message": "Merge branch 'master' into arc", "committedDate": "2020-10-15T11:54:46Z", "type": "commit"}]}