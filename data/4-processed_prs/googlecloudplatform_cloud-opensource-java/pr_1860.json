{"pr_number": 1860, "pr_title": "The enforcer rule integration test with Java 11", "pr_createdAt": "2020-12-03T19:41:17Z", "pr_url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1860", "timeline": [{"oid": "06dda74ecdf06cd594cc812435503ce8d4a805d6", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/06dda74ecdf06cd594cc812435503ce8d4a805d6", "message": "invoker.java.version=1.8 for protobuf-java problem", "committedDate": "2020-12-03T19:10:54Z", "type": "commit"}, {"oid": "1553944a19335f1d1180f928592c4a3a8a4ffdbb", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/commit/1553944a19335f1d1180f928592c4a3a8a4ffdbb", "message": "bom-project-using-spring-repository with Java 11", "committedDate": "2020-12-03T19:40:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUzNDQ0MA==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1860#discussion_r535534440", "bodyText": "The 5 lines are only difference.\nGithub didn't hide new line character changes. It's now LF (Linux & Mac).", "author": "suztomo", "createdAt": "2020-12-03T19:43:29Z", "path": "enforcer-rules/src/it/bom-project-using-spring-repository/verify.groovy", "diffHunk": "@@ -1,15 +1,19 @@\n-def buildLog = new File(basedir, \"build.log\")\r\n-\r\n-// Profile \"spring\" should set the Spring Milestones repository, which has this reactor-bom.\r\n-assert !buildLog.text.contains(\r\n-    \"Could not find artifact io.projectreactor:reactor-bom:pom:2020.0.0-M2 in central\")\r\n-\r\n-// io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 is in the reactor-bom. It's available in\r\n-// Spring Milestones repository:\r\n-// https://repo.spring.io/milestone/io/projectreactor/netty/reactor-netty/1.0.0-M2/\r\n-assert !buildLog.text.contains(\r\n-    \"io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 was not resolved\")\r\n-\r\n-assert !buildLog.text.contains(\"NullPointerException\")\r\n-\r\n-assert buildLog.text.contains(\"Linkage Checker rule found 850 errors:\")\n\\ No newline at end of file\n+def buildLog = new File(basedir, \"build.log\")\n+\n+// Profile \"spring\" should set the Spring Milestones repository, which has this reactor-bom.\n+assert !buildLog.text.contains(\n+    \"Could not find artifact io.projectreactor:reactor-bom:pom:2020.0.0-M2 in central\")\n+\n+// io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 is in the reactor-bom. It's available in\n+// Spring Milestones repository:\n+// https://repo.spring.io/milestone/io/projectreactor/netty/reactor-netty/1.0.0-M2/\n+assert !buildLog.text.contains(\n+    \"io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 was not resolved\")\n+\n+assert !buildLog.text.contains(\"NullPointerException\")\n+\n+// 4 linkage errors are references to java.util.concurrent.Flow class, which does not exist in\n+// Java 8 runtime yet.\n+def expectedErrorCount = System.getProperty(\"java.version\").startsWith(\"1.8.\") ? 850 : 846\n+\n+assert buildLog.text.contains(\"Linkage Checker rule found $expectedErrorCount errors:\")", "originalCommit": "1553944a19335f1d1180f928592c4a3a8a4ffdbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUzNTE1OQ==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1860#discussion_r535535159", "bodyText": "The difference (4) comes from java.util.concurrent.Flow$Publisher, java.util.concurrent.Flow$Processor, java.util.concurrent.Flow$Subscription, and java.util.concurrent.Flow$Subscriber classes that were not found in Java 8\n#1858", "author": "suztomo", "createdAt": "2020-12-03T19:44:33Z", "path": "enforcer-rules/src/it/bom-project-using-spring-repository/verify.groovy", "diffHunk": "@@ -1,15 +1,19 @@\n-def buildLog = new File(basedir, \"build.log\")\r\n-\r\n-// Profile \"spring\" should set the Spring Milestones repository, which has this reactor-bom.\r\n-assert !buildLog.text.contains(\r\n-    \"Could not find artifact io.projectreactor:reactor-bom:pom:2020.0.0-M2 in central\")\r\n-\r\n-// io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 is in the reactor-bom. It's available in\r\n-// Spring Milestones repository:\r\n-// https://repo.spring.io/milestone/io/projectreactor/netty/reactor-netty/1.0.0-M2/\r\n-assert !buildLog.text.contains(\r\n-    \"io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 was not resolved\")\r\n-\r\n-assert !buildLog.text.contains(\"NullPointerException\")\r\n-\r\n-assert buildLog.text.contains(\"Linkage Checker rule found 850 errors:\")\n\\ No newline at end of file\n+def buildLog = new File(basedir, \"build.log\")\n+\n+// Profile \"spring\" should set the Spring Milestones repository, which has this reactor-bom.\n+assert !buildLog.text.contains(\n+    \"Could not find artifact io.projectreactor:reactor-bom:pom:2020.0.0-M2 in central\")\n+\n+// io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 is in the reactor-bom. It's available in\n+// Spring Milestones repository:\n+// https://repo.spring.io/milestone/io/projectreactor/netty/reactor-netty/1.0.0-M2/\n+assert !buildLog.text.contains(\n+    \"io.projectreactor.netty:reactor-netty:jar:1.0.0-M2 was not resolved\")\n+\n+assert !buildLog.text.contains(\"NullPointerException\")\n+\n+// 4 linkage errors are references to java.util.concurrent.Flow class, which does not exist in\n+// Java 8 runtime yet.\n+def expectedErrorCount = System.getProperty(\"java.version\").startsWith(\"1.8.\") ? 850 : 846", "originalCommit": "1553944a19335f1d1180f928592c4a3a8a4ffdbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTUzNTU2Nw==", "url": "https://github.com/GoogleCloudPlatform/cloud-opensource-java/pull/1860#discussion_r535535567", "bodyText": "The return-type-mismatch test case is for the protobuf-java problem around java.nio.Buffer. The problem does not occur in Java 11.", "author": "suztomo", "createdAt": "2020-12-03T19:45:14Z", "path": "enforcer-rules/src/it/return-type-mismatch/invoker.properties", "diffHunk": "@@ -1,2 +1,3 @@\n invoker.goals=verify\n invoker.buildResult=failure\n+invoker.java.version=1.8", "originalCommit": "1553944a19335f1d1180f928592c4a3a8a4ffdbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}