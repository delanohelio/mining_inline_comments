{"pr_number": 811, "pr_title": "Resolvees #810: Improve loggings for OnlineIndexer and FDBDatabaseRunner", "pr_createdAt": "2020-01-30T01:20:05Z", "pr_url": "https://github.com/FoundationDB/fdb-record-layer/pull/811", "timeline": [{"oid": "0c4abd6c2b368311e067bb812bdbf0402053d25d", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/0c4abd6c2b368311e067bb812bdbf0402053d25d", "message": "Resolvees #810: Improve loggings for OnlineIndexer and FDBDatabaseRunner", "committedDate": "2020-01-30T01:19:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyNTQ0MQ==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#discussion_r373125441", "bodyText": "Was it purposeful to continue using \"retry\" here instead of CURR_ATTEMPT and MAX_ATTEMPTS (to standardize with the Runner)?", "author": "alecgrieser", "createdAt": "2020-01-30T18:44:06Z", "path": "fdb-record-layer-core/src/main/java/com/apple/foundationdb/record/logging/LogMessageKeys.java", "diffHunk": "@@ -134,12 +134,15 @@\n     DOCUMENT(\"document\"),\n     SESSION_ID(\"session_id\"),\n     INDEXER_SESSION_ID(\"indexer_session_id\"),\n+    INDEXER_ID(\"indexer_id\"),\n     INDEX_STATE_PRECONDITION(\"index_state_precondition\"),\n     INITIAL_INDEX_STATE(\"initial_index_state\"),\n     SHOULD_BUILD_INDEX(\"do_build_index\"),\n     SHOULD_CLEAR_EXISTING_DATA(\"clear_existing_data\"),\n     SHOULD_MARK_READABLE(\"should_mark_readable\"),\n     RESULT(\"result\"),\n+    INDEXER_CURR_RETRY(\"indexer_curr_retry\"),\n+    INDEXER_MAX_RETRIES(\"indexer_max_retries\"),", "originalCommit": "0c4abd6c2b368311e067bb812bdbf0402053d25d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyOTQ4NQ==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#discussion_r373129485", "bodyText": "I'm using \"retry\" here to differentiate this pair from the pair in the runner. Also, the config of OnlineIndexer uses \"retry\" rather than \"attempt\".\nThere will be off-by-one problem either way we choose, so the many intent of this change is make the curr & max pairs match. This problem should be able to be solved thoroughly in the retry abstraction I'm prototyping on currently.", "author": "nblintao", "createdAt": "2020-01-30T18:51:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyNTQ0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEzMTQzNg==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/811#discussion_r373131436", "bodyText": "I see. I'm...not sure it wouldn't be better to standardize here and fix the off-by-one error at least as it displays in the logs, but that could also wait for a separate PR, I suppose.", "author": "alecgrieser", "createdAt": "2020-01-30T18:55:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyNTQ0MQ=="}], "type": "inlineReview"}]}