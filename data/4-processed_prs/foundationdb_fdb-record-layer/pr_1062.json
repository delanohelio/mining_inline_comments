{"pr_number": 1062, "pr_title": "Fixes #1061: Fix the instruction document of building Record Layer", "pr_createdAt": "2020-10-29T00:48:33Z", "pr_url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062", "timeline": [{"oid": "cd8608fbba8346d231d1bc328d07c9d4f434d872", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/cd8608fbba8346d231d1bc328d07c9d4f434d872", "message": "Fixes #1061: Fix the instruction document of building Record Layer", "committedDate": "2020-10-29T01:10:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM4OTk0NA==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r560389944", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ### Behind the Scene\n          \n          \n            \n            ### Behind the Scenes", "author": "scgray", "createdAt": "2021-01-19T18:23:14Z", "path": "docs/Building.md", "diffHunk": "@@ -4,47 +4,66 @@\n \n Before contributing to the Record Layer, please see the [contribution guide](https://github.com/FoundationDB/fdb-record-layer/blob/master/CONTRIBUTING.md).\n \n-## Building the Core\n+## Configuring IntelliJ\n \n-To do the full suite of checks and tests run:\n-```\n-./gradlew -PspotbugsEnableHtmlReport check test\n-```\n+1. Fork and clone the [repository](https://github.com/FoundationDB/fdb-record-layer).\n \n-If you enable the local repo in whatever uses the Record Layer, the following will make it available. The published jars will be in the directory `~/.m2/repository/org/foundationdb/fdb-record-layer-core/n.n-SNAPSHOT/`.\n+1. Run\n \n-```\n-./gradlew publishToMavenLocal\n-```\n+        ./gradlew package\n \n-## Configuring IntelliJ\n+    on the root directory of the local clone.\n+    \n+1. *(Skip if you are not interested in running the tests.)*\\\n+ Install FDB on your development machine. The latest FDB binaries can be found on\n+the [FoundationDB website](https://www.foundationdb.org/download/).\n \n-The Record Layer project does not use the Gradle IDEA plugin, unlike many similar projects. Instead, it uses IntelliJ IDEA's builtin Gradle support to compile the project and run the tests; the repository will run a \"sync\" with the Gradle configuration every time the project is opened or a file referenced from `build.gradle` is changed.\n+1. Install and launch [IntelliJ IDEA](https://www.jetbrains.com/idea/). This document is based on Version 2020.2.3.\n \n-If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.\n+1. In the \"Welcome to IntelliJ IDEA\" window, click \"Open or import\" and open the project's root directory. (If you do not see the welcome window, File > Open can do the same.)\n \n-If you make changes to most IntelliJ settings, they will save over the files that are checked into Git. These changes can be shared by committing the updated files.\n+1. In the Gradle tool window (expand by clicking the Gradle button on right top), click ![the Reload All Gradle Projects button](https://resources.jetbrains.com/help/img/idea/2020.2/icons.actions.refresh.svg) on the toolbar.\n \n-There are a few settings that we use for consistency that are saved in the user-specific `workspace.xml` file. These settings must be enabled manually by each developer:\n+1. Build > Build Project.\n \n-* Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n+1. Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n \n-* (optional, but useful) Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n+1. *(This is optional, but useful.)*\\\n+ Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n \n-Before attempting to build anything, exit IntelliJ and build once from the command line. This will generate the protobuf files.\n+**Now you have configured IntelliJ successfully!**\n \n-```\n-./gradlew package\n-```\n+*(Skip if you are not interested in running the tests.)*\\\n+To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check you can run them from IntelliJ.\n \n-Launch IntelliJ again and Build > Build Project should succeed.\n+If this does not work smoothly for you, please create a [new issue](https://github.com/FoundationDB/fdb-record-layer/issues/new) or ask in [the forum](https://forums.foundationdb.org/c/using-layers).\n \n-To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check that you can run them from IntelliJ.\n+### Behind the Scene", "originalCommit": "cd8608fbba8346d231d1bc328d07c9d4f434d872", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTQ2MDkzMw==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r561460933", "bodyText": "Fixed.", "author": "nblintao", "createdAt": "2021-01-21T01:47:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM4OTk0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM5MTM1NA==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r560391354", "bodyText": "I am surprisingly ignorant of how the FDB cluster is actually found by the tests/record layer.  Maybe it is something that anyone familiar with FDB would know, but I thought I'll ask:  Should we include directions on either environment variables that should be set or about the feb-environment.properties file?", "author": "scgray", "createdAt": "2021-01-19T18:25:39Z", "path": "docs/Building.md", "diffHunk": "@@ -4,47 +4,66 @@\n \n Before contributing to the Record Layer, please see the [contribution guide](https://github.com/FoundationDB/fdb-record-layer/blob/master/CONTRIBUTING.md).\n \n-## Building the Core\n+## Configuring IntelliJ\n \n-To do the full suite of checks and tests run:\n-```\n-./gradlew -PspotbugsEnableHtmlReport check test\n-```\n+1. Fork and clone the [repository](https://github.com/FoundationDB/fdb-record-layer).\n \n-If you enable the local repo in whatever uses the Record Layer, the following will make it available. The published jars will be in the directory `~/.m2/repository/org/foundationdb/fdb-record-layer-core/n.n-SNAPSHOT/`.\n+1. Run\n \n-```\n-./gradlew publishToMavenLocal\n-```\n+        ./gradlew package\n \n-## Configuring IntelliJ\n+    on the root directory of the local clone.\n+    \n+1. *(Skip if you are not interested in running the tests.)*\\\n+ Install FDB on your development machine. The latest FDB binaries can be found on\n+the [FoundationDB website](https://www.foundationdb.org/download/).\n \n-The Record Layer project does not use the Gradle IDEA plugin, unlike many similar projects. Instead, it uses IntelliJ IDEA's builtin Gradle support to compile the project and run the tests; the repository will run a \"sync\" with the Gradle configuration every time the project is opened or a file referenced from `build.gradle` is changed.\n+1. Install and launch [IntelliJ IDEA](https://www.jetbrains.com/idea/). This document is based on Version 2020.2.3.\n \n-If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.\n+1. In the \"Welcome to IntelliJ IDEA\" window, click \"Open or import\" and open the project's root directory. (If you do not see the welcome window, File > Open can do the same.)\n \n-If you make changes to most IntelliJ settings, they will save over the files that are checked into Git. These changes can be shared by committing the updated files.\n+1. In the Gradle tool window (expand by clicking the Gradle button on right top), click ![the Reload All Gradle Projects button](https://resources.jetbrains.com/help/img/idea/2020.2/icons.actions.refresh.svg) on the toolbar.\n \n-There are a few settings that we use for consistency that are saved in the user-specific `workspace.xml` file. These settings must be enabled manually by each developer:\n+1. Build > Build Project.\n \n-* Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n+1. Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n \n-* (optional, but useful) Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n+1. *(This is optional, but useful.)*\\\n+ Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n \n-Before attempting to build anything, exit IntelliJ and build once from the command line. This will generate the protobuf files.\n+**Now you have configured IntelliJ successfully!**\n \n-```\n-./gradlew package\n-```\n+*(Skip if you are not interested in running the tests.)*\\\n+To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check you can run them from IntelliJ.\n \n-Launch IntelliJ again and Build > Build Project should succeed.\n+If this does not work smoothly for you, please create a [new issue](https://github.com/FoundationDB/fdb-record-layer/issues/new) or ask in [the forum](https://forums.foundationdb.org/c/using-layers).", "originalCommit": "cd8608fbba8346d231d1bc328d07c9d4f434d872", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTQ2MzczMg==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r561463732", "bodyText": "Yes. The directions at the end of this doc. I think the reason that it is at the end is that users who use the default settings of FDB should not need set fdb-environment.properties at all, so they shouldn't be confused about it.", "author": "nblintao", "createdAt": "2021-01-21T01:56:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM5MTM1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM5MjQ0MA==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r560392440", "bodyText": "This doesn't really feel like it belongs here any more.  Maybe it should just be deleted and we forsake those using old IntelliJ versions?  If anyone things it should belong here, it should probably be included in the previous section that describes how to open the project.", "author": "scgray", "createdAt": "2021-01-19T18:27:18Z", "path": "docs/Building.md", "diffHunk": "@@ -4,47 +4,66 @@\n \n Before contributing to the Record Layer, please see the [contribution guide](https://github.com/FoundationDB/fdb-record-layer/blob/master/CONTRIBUTING.md).\n \n-## Building the Core\n+## Configuring IntelliJ\n \n-To do the full suite of checks and tests run:\n-```\n-./gradlew -PspotbugsEnableHtmlReport check test\n-```\n+1. Fork and clone the [repository](https://github.com/FoundationDB/fdb-record-layer).\n \n-If you enable the local repo in whatever uses the Record Layer, the following will make it available. The published jars will be in the directory `~/.m2/repository/org/foundationdb/fdb-record-layer-core/n.n-SNAPSHOT/`.\n+1. Run\n \n-```\n-./gradlew publishToMavenLocal\n-```\n+        ./gradlew package\n \n-## Configuring IntelliJ\n+    on the root directory of the local clone.\n+    \n+1. *(Skip if you are not interested in running the tests.)*\\\n+ Install FDB on your development machine. The latest FDB binaries can be found on\n+the [FoundationDB website](https://www.foundationdb.org/download/).\n \n-The Record Layer project does not use the Gradle IDEA plugin, unlike many similar projects. Instead, it uses IntelliJ IDEA's builtin Gradle support to compile the project and run the tests; the repository will run a \"sync\" with the Gradle configuration every time the project is opened or a file referenced from `build.gradle` is changed.\n+1. Install and launch [IntelliJ IDEA](https://www.jetbrains.com/idea/). This document is based on Version 2020.2.3.\n \n-If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.\n+1. In the \"Welcome to IntelliJ IDEA\" window, click \"Open or import\" and open the project's root directory. (If you do not see the welcome window, File > Open can do the same.)\n \n-If you make changes to most IntelliJ settings, they will save over the files that are checked into Git. These changes can be shared by committing the updated files.\n+1. In the Gradle tool window (expand by clicking the Gradle button on right top), click ![the Reload All Gradle Projects button](https://resources.jetbrains.com/help/img/idea/2020.2/icons.actions.refresh.svg) on the toolbar.\n \n-There are a few settings that we use for consistency that are saved in the user-specific `workspace.xml` file. These settings must be enabled manually by each developer:\n+1. Build > Build Project.\n \n-* Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n+1. Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n \n-* (optional, but useful) Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n+1. *(This is optional, but useful.)*\\\n+ Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n \n-Before attempting to build anything, exit IntelliJ and build once from the command line. This will generate the protobuf files.\n+**Now you have configured IntelliJ successfully!**\n \n-```\n-./gradlew package\n-```\n+*(Skip if you are not interested in running the tests.)*\\\n+To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check you can run them from IntelliJ.\n \n-Launch IntelliJ again and Build > Build Project should succeed.\n+If this does not work smoothly for you, please create a [new issue](https://github.com/FoundationDB/fdb-record-layer/issues/new) or ask in [the forum](https://forums.foundationdb.org/c/using-layers).\n \n-To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check that you can run them from IntelliJ.\n+### Behind the Scene\n \n-## Running the tests\n+*(This section explains what happened above and why, in case you are interested.)*\n \n-In order to run the tests you will need to have FDB installed on your development machine. The latest FDB binaries can be found on\n-the [FoundationDB website](https://www.foundationdb.org/download/).\n+The `./gradlew package` command (Step 2) generates the protobuf files.\n+\n+If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.", "originalCommit": "cd8608fbba8346d231d1bc328d07c9d4f434d872", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTQ2MjYwOQ==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r561462609", "bodyText": "Deleted.", "author": "nblintao", "createdAt": "2021-01-21T01:52:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDM5MjQ0MA=="}], "type": "inlineReview"}, {"oid": "75f375d926405aca2654d3eed14360f54164e722", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/75f375d926405aca2654d3eed14360f54164e722", "message": "Fixes #1061: Fix the instruction document of building Record Layer", "committedDate": "2021-01-21T00:55:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTQ2MzA1Mw==", "url": "https://github.com/FoundationDB/fdb-record-layer/pull/1062#discussion_r561463053", "bodyText": "@scgray here", "author": "nblintao", "createdAt": "2021-01-21T01:53:56Z", "path": "docs/Building.md", "diffHunk": "@@ -4,47 +4,66 @@\n \n Before contributing to the Record Layer, please see the [contribution guide](https://github.com/FoundationDB/fdb-record-layer/blob/master/CONTRIBUTING.md).\n \n-## Building the Core\n+## Configuring IntelliJ\n \n-To do the full suite of checks and tests run:\n-```\n-./gradlew -PspotbugsEnableHtmlReport check test\n-```\n+1. Fork and clone the [repository](https://github.com/FoundationDB/fdb-record-layer).\n \n-If you enable the local repo in whatever uses the Record Layer, the following will make it available. The published jars will be in the directory `~/.m2/repository/org/foundationdb/fdb-record-layer-core/n.n-SNAPSHOT/`.\n+1. Run\n \n-```\n-./gradlew publishToMavenLocal\n-```\n+        ./gradlew package\n \n-## Configuring IntelliJ\n+    on the root directory of the local clone.\n+    \n+1. *(Skip if you are not interested in running the tests.)*\\\n+ Install FDB on your development machine. The latest FDB binaries can be found on\n+the [FoundationDB website](https://www.foundationdb.org/download/).\n \n-The Record Layer project does not use the Gradle IDEA plugin, unlike many similar projects. Instead, it uses IntelliJ IDEA's builtin Gradle support to compile the project and run the tests; the repository will run a \"sync\" with the Gradle configuration every time the project is opened or a file referenced from `build.gradle` is changed.\n+1. Install and launch [IntelliJ IDEA](https://www.jetbrains.com/idea/). This document is based on Version 2020.2.3.\n \n-If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.\n+1. In the \"Welcome to IntelliJ IDEA\" window, click \"Open or import\" and open the project's root directory. (If you do not see the welcome window, File > Open can do the same.)\n \n-If you make changes to most IntelliJ settings, they will save over the files that are checked into Git. These changes can be shared by committing the updated files.\n+1. In the Gradle tool window (expand by clicking the Gradle button on right top), click ![the Reload All Gradle Projects button](https://resources.jetbrains.com/help/img/idea/2020.2/icons.actions.refresh.svg) on the toolbar.\n \n-There are a few settings that we use for consistency that are saved in the user-specific `workspace.xml` file. These settings must be enabled manually by each developer:\n+1. Build > Build Project.\n \n-* Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n+1. Preferences > Editor > General > Auto Import > Optimize imports on the fly (for current project)\n \n-* (optional, but useful) Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n+1. *(This is optional, but useful.)*\\\n+ Preferences > Build, Execution, and Deployment > Build Tools > Maven > Importing > Automatically download > Sources\n \n-Before attempting to build anything, exit IntelliJ and build once from the command line. This will generate the protobuf files.\n+**Now you have configured IntelliJ successfully!**\n \n-```\n-./gradlew package\n-```\n+*(Skip if you are not interested in running the tests.)*\\\n+To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check you can run them from IntelliJ.\n \n-Launch IntelliJ again and Build > Build Project should succeed.\n+If this does not work smoothly for you, please create a [new issue](https://github.com/FoundationDB/fdb-record-layer/issues/new) or ask in [the forum](https://forums.foundationdb.org/c/using-layers).\n \n-To verify that you have a working configuration, pick some tests that depend on FDB (such as those in the `FDBRecordStoreQueryTest` fixture), and check that you can run them from IntelliJ.\n+### Behind the Scene\n \n-## Running the tests\n+*(This section explains what happened above and why, in case you are interested.)*\n \n-In order to run the tests you will need to have FDB installed on your development machine. The latest FDB binaries can be found on\n-the [FoundationDB website](https://www.foundationdb.org/download/).\n+The `./gradlew package` command (Step 2) generates the protobuf files.\n+\n+If you are used to opening older `.ipr`-based IntelliJ projects, the process for opening this project will be somewhat different. Instead of selecting the `fdb-record-layer.ipr` file, open the project's root directory; IntelliJ will find the project configuration in the `.idea` directory.\n+\n+The Record Layer project does not use the Gradle IDEA plugin, unlike many similar projects. Instead, it uses IntelliJ IDEA's builtin Gradle support to compile the project and run the tests; the repository will run a \"sync\" with the Gradle configuration when you load Gradle project (Step 6).\n+\n+If you make changes to most IntelliJ settings, they will save over the files that are checked into Git. These changes can be shared by committing the updated files.\n+\n+However, there are a few settings that we use for consistency that are saved in the user-specific `workspace.xml` file. These settings must be enabled manually by each developer. (Step 8, 9)\n+\n+## Building the Core\n+\n+To do the full suite of checks and tests run:\n+```\n+./gradlew -PspotbugsEnableHtmlReport check test\n+```\n+\n+If you enable the local repo in whatever uses the Record Layer, the following will make it available. The published jars will be in the directory `~/.m2/repository/org/foundationdb/fdb-record-layer-core/n.n-SNAPSHOT/`.\n+\n+```\n+./gradlew publishToMavenLocal\n+```\n \n ## Configuring tests for a non-standard FDB cluster file location", "originalCommit": "cd8608fbba8346d231d1bc328d07c9d4f434d872", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d0538f71de08b197b8c0782de3f58ca0cca23b9c", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/d0538f71de08b197b8c0782de3f58ca0cca23b9c", "message": "Fix wording & remove unnecessary instructions", "committedDate": "2021-01-21T01:56:31Z", "type": "commit"}, {"oid": "d0538f71de08b197b8c0782de3f58ca0cca23b9c", "url": "https://github.com/FoundationDB/fdb-record-layer/commit/d0538f71de08b197b8c0782de3f58ca0cca23b9c", "message": "Fix wording & remove unnecessary instructions", "committedDate": "2021-01-21T01:56:31Z", "type": "forcePushed"}]}