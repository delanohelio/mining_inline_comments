{"pr_number": 741, "pr_title": "CLDR-11585 improve maven tests ", "pr_createdAt": "2020-09-25T18:30:54Z", "pr_url": "https://github.com/unicode-org/cldr/pull/741", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk4Mzc5OA==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495983798", "bodyText": "What's the rationale for commenting this out rather than just deleting it? Unless there's a really good reason -- like a plan to restore the code in the near future -- I think deletion is better. I've been studying the book Building Maintainable Software by Joost Visser, which includes a rule \"Leave No Code in Comments Behind\"", "author": "btangmu", "createdAt": "2020-09-28T14:30:28Z", "path": "tools/cldr-apps/pom.xml", "diffHunk": "@@ -178,18 +178,15 @@\n \t\t\t\t\t\t</includes>\n \t\t\t\t\t</configuration>\n \t\t\t\t</plugin>\n-\t\t\t\t<plugin>\n+\t\t\t\t<!-- <plugin>", "originalCommit": "1aadc44eb0ad97502188cb32cd88db538db16822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0MzIyNg==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r496143226", "bodyText": "thanks for the recommend! I think with source control, the old version's just a click away. We may want some more parameters here someday.", "author": "srl295", "createdAt": "2020-09-28T18:14:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk4Mzc5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MDc1NQ==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495990755", "bodyText": "I don't understand the comment at all: \"... system property corresponding to java.lang ... unset!\"\nCould it be clarified?", "author": "btangmu", "createdAt": "2020-09-28T14:40:03Z", "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestShim.java", "diffHunk": "@@ -2,19 +2,31 @@\n \n import java.io.PrintWriter;\n \n+import org.unicode.cldr.util.TestShimUtils;\n+\n import org.junit.jupiter.api.Test;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertArrayEquals;\n \n /**\n  * a JUnit test that calls TestAll.\n  */\n class TestShim {\n     @Test\n     public void TestAll() {\n-        String args[] = { \"-n\", \"-q\" }; // TODO: parameterize\n+        String args[] = TestShimUtils.getArgs(TestShim.class, \"-n -q\");\n         // regular main() will System.exit() which is not too friendly.\n         // call this instead.\n         int errCount = TestAll.runTests(args);\n         assertEquals(errCount, 0, \"Test had errors\");\n     }\n+\n+    @Test\n+    public void TestTestShimUtilTest() {\n+        // Note: checks the system property corresponding to java.lang,\n+        // we expect this to be unset!\n+        String args[] = TestShimUtils.getArgs(java.lang.String.class, \"-a -b -c\");", "originalCommit": "1aadc44eb0ad97502188cb32cd88db538db16822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0NjE4OA==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r496146188", "bodyText": "Yes, i'll clarify. To test the mechanism, it assumes java.lang.testArgs is unset.", "author": "srl295", "createdAt": "2020-09-28T18:20:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MDc1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MjEwMw==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495992103", "bodyText": "Again, \"Leave No Code in Comments Behind\"?", "author": "btangmu", "createdAt": "2020-09-28T14:41:51Z", "path": "tools/java/pom.xml", "diffHunk": "@@ -118,13 +118,9 @@\n \t\t\t<plugin>\n \t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n \t\t\t\t<configuration>\n-\t\t\t\t\t<systemPropertyVariables>\n-\t\t\t\t\t\t<CLDR_DIR>${project.basedir}/../../</CLDR_DIR>\n-\t\t\t\t\t\t<CLDR_ENVIRONMENT>UNITTEST</CLDR_ENVIRONMENT>\n-\t\t\t\t\t\t<java.awt.headless>true</java.awt.headless>\n+\t\t\t\t\t<!-- <systemPropertyVariables>", "originalCommit": "1aadc44eb0ad97502188cb32cd88db538db16822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0Njc0Mg==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r496146742", "bodyText": "I expect to need this, but will remove it for now.\nI thought iot better to comment it out,. than to leave it in but unused.", "author": "srl295", "createdAt": "2020-09-28T18:21:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MjEwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5NjU4OQ==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495996589", "bodyText": "The indentation seems off. Do we have a linter for that? More generally I've been wishing we had an agreed-on set of tools for normalizing spacing, etc., for all kinds of source files", "author": "btangmu", "createdAt": "2020-09-28T14:47:49Z", "path": "tools/pom.xml", "diffHunk": "@@ -225,7 +225,12 @@\n \t\t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n \t\t\t\t\t<version>${maven-surefire-plugin-version}</version>\n \t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<argLine>-DCLDR_ENVIRONMENT=UNITTEST -Djava.awt.headless=true  -DCLDR_DIR=../../ -Xmx6g -enableassertions</argLine>\n+\t\t\t\t\t<systemPropertyVariables>", "originalCommit": "1aadc44eb0ad97502188cb32cd88db538db16822", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE0NzM0Mw==", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r496147343", "bodyText": "yes, i've fixed the indentation. It should be the same as Eclipse's now.\nAgreed\u2026", "author": "srl295", "createdAt": "2020-09-28T18:22:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5NjU4OQ=="}], "type": "inlineReview"}, {"oid": "f7f95379d0ca8b6bebc5959b892714371e552a9a", "url": "https://github.com/unicode-org/cldr/commit/f7f95379d0ca8b6bebc5959b892714371e552a9a", "message": "CLDR-11585 improve maven tests\n\n- You can run individual tests using testArgs properties.\n\nExample to run only one test from the main unit tests:\n\n    mvn test '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q'\n\nExample to run only one test from web: (could be combined w/ prior example)\n\n    mvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q'", "committedDate": "2020-09-28T18:23:31Z", "type": "commit"}, {"oid": "f7f95379d0ca8b6bebc5959b892714371e552a9a", "url": "https://github.com/unicode-org/cldr/commit/f7f95379d0ca8b6bebc5959b892714371e552a9a", "message": "CLDR-11585 improve maven tests\n\n- You can run individual tests using testArgs properties.\n\nExample to run only one test from the main unit tests:\n\n    mvn test '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q'\n\nExample to run only one test from web: (could be combined w/ prior example)\n\n    mvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q'", "committedDate": "2020-09-28T18:23:31Z", "type": "forcePushed"}]}