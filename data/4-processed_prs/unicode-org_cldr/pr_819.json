{"pr_number": 819, "pr_title": "CLDR-14260 update scripts to generate production .zipfiles", "pr_createdAt": "2020-10-28T21:25:22Z", "pr_url": "https://github.com/unicode-org/cldr/pull/819", "timeline": [{"oid": "d51683f0a258936afd0160c3090b15385b1089ea", "url": "https://github.com/unicode-org/cldr/commit/d51683f0a258936afd0160c3090b15385b1089ea", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\nI also sign the files with:\n\n    cd tools/dist ; for file in cldr*.{zip,jar}; do gpg --detach-sign -a ${file}; done", "committedDate": "2020-10-30T22:01:32Z", "type": "forcePushed"}, {"oid": "8296f7ce7cc16f7f435f24f7d90e02b9210be1f0", "url": "https://github.com/unicode-org/cldr/commit/8296f7ce7cc16f7f435f24f7d90e02b9210be1f0", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\nNote, this was used (with ../cldr-staging@7c34ff10a243e46a297329cfb7ec42d2df7dcf15 )\nto generate release-38, though with a \"38.0\" as the version. I plan to change this\nprocess again with the maven update [CLDR-14212] but am keeping this here for now.\n\nI also sign the files with:\n\n    cd tools/dist ; for file in cldr*.{zip,jar}; do gpg --detach-sign -a ${file}; done", "committedDate": "2020-11-02T18:27:16Z", "type": "forcePushed"}, {"oid": "fa2ee2223d0ff277d37ce92f3a2c7ec00def6575", "url": "https://github.com/unicode-org/cldr/commit/fa2ee2223d0ff277d37ce92f3a2c7ec00def6575", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\n- \"mvn package\" will now create cldr-code.jar with embedded licensing", "committedDate": "2020-12-03T23:39:27Z", "type": "forcePushed"}, {"oid": "435bfe1f289b58dd44ed217c7e4dee4e41f78fea", "url": "https://github.com/unicode-org/cldr/commit/435bfe1f289b58dd44ed217c7e4dee4e41f78fea", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\n- \"mvn package\" will now create cldr-code.jar with embedded licensing", "committedDate": "2020-12-03T23:40:27Z", "type": "forcePushed"}, {"oid": "808fd1a956c8b928ad7e2ba0495f7f6efe6620d8", "url": "https://github.com/unicode-org/cldr/commit/808fd1a956c8b928ad7e2ba0495f7f6efe6620d8", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\n- \"mvn package\" will now create cldr-code.jar with embedded licensing", "committedDate": "2020-12-03T23:44:21Z", "type": "forcePushed"}, {"oid": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "url": "https://github.com/unicode-org/cldr/commit/ef45b513e7ca148b5f18592c147d3fbc61080aec", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\n- \"mvn package\" will now create cldr-code.jar with embedded licensing", "committedDate": "2020-12-04T14:55:52Z", "type": "commit"}, {"oid": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "url": "https://github.com/unicode-org/cldr/commit/ef45b513e7ca148b5f18592c147d3fbc61080aec", "message": "CLDR-14260 update scripts to generate production .zipfiles\n\n- \"mvn package\" will now create cldr-code.jar with embedded licensing", "committedDate": "2020-12-04T14:55:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE1Nzc4MA==", "url": "https://github.com/unicode-org/cldr/pull/819#discussion_r536157780", "bodyText": "this is now automatically attached to the package phase.", "author": "srl295", "createdAt": "2020-12-04T14:56:35Z", "path": ".github/workflows/maven.yml", "diffHunk": "@@ -37,11 +37,6 @@ jobs:\n         with:\n           name: cldr-apps\n           path: tools/cldr-apps/target/cldr-apps.war\n-      - name: Build single cldr-code.jar\n-        run: >\n-          mvn -s .github/workflows/mvn-settings.xml -pl cldr-code package assembly:single -DskipTests=true  --file tools/pom.xml", "originalCommit": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE1ODI1Nw==", "url": "https://github.com/unicode-org/cldr/pull/819#discussion_r536158257", "bodyText": "automatically create cldr-code.jar when mvn package is run.", "author": "srl295", "createdAt": "2020-12-04T14:57:17Z", "path": "tools/cldr-code/pom.xml", "diffHunk": "@@ -104,18 +120,27 @@\n \t\t\t</plugin>\n \t\t\t<plugin>\n \t\t\t\t<artifactId>maven-assembly-plugin</artifactId>\n-\t\t\t\t<configuration>\n+ \t\t\t\t<configuration>\n+\t\t\t\t\t<attach>false</attach>\n \t\t\t\t\t<finalName>cldr-code</finalName>\n \t\t\t\t\t<appendAssemblyId>false</appendAssemblyId>\n-\t\t\t\t\t<descriptorRefs>\n-\t\t\t\t\t\t<descriptorRef>jar-with-dependencies</descriptorRef>\n-\t\t\t\t\t</descriptorRefs>\n+\t\t\t\t\t<descriptors>\n+\t\t\t\t\t\t<descriptor>src/main/assembly/cldr-code.xml</descriptor>\n+\t\t\t\t\t</descriptors>\n \t\t\t\t\t<archive>\n \t\t\t\t\t\t<manifest>\n \t\t\t\t\t\t\t<mainClass>${mainClass}</mainClass>\n \t\t\t\t\t\t</manifest>\n \t\t\t\t\t</archive>\n \t\t\t\t</configuration>\n+\t\t\t\t<executions>\n+\t\t\t\t\t<execution>\n+\t\t\t\t\t\t<phase>package</phase>\n+\t\t\t\t\t\t<goals>\n+\t\t\t\t\t\t\t<goal>single</goal>", "originalCommit": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE1OTA2NQ==", "url": "https://github.com/unicode-org/cldr/pull/819#discussion_r536159065", "bodyText": "ideally this would be updated when we bump the dependencies\u2026\u00a0the best solution is to improve things on the ICU side, ICU-21425", "author": "srl295", "createdAt": "2020-12-04T14:58:19Z", "path": "tools/cldr-code/src/license/THIRD-PARTY.properties", "diffHunk": "@@ -0,0 +1,6 @@\n+# Generated by org.codehaus.mojo.license.AddThirdPartyMojo\n+# Please fill the missing licenses for dependencies :\n+# this may need to be updated before building final outputs\n+# (for now)\n+com.ibm.icu--icu4j-for-cldr--68.1-release-68-1=Unicode-DFS-2016\n+com.ibm.icu--utilities-for-cldr--68.1-release-68-1=Unicode-DFS-2016", "originalCommit": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjE1OTIxOA==", "url": "https://github.com/unicode-org/cldr/pull/819#discussion_r536159218", "bodyText": "generated file", "author": "srl295", "createdAt": "2020-12-04T14:58:33Z", "path": "tools/cldr-code/src/main/assembly/cldr-code.xml", "diffHunk": "@@ -0,0 +1,41 @@\n+<assembly xmlns=\"http://maven.apache.org/ASSEMBLY/2.1.0\"\n+  xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+  xsi:schemaLocation=\"http://maven.apache.org/ASSEMBLY/2.1.0 http://maven.apache.org/xsd/assembly-2.1.0.xsd\">\n+  <id>foo</id>\n+  <formats>\n+    <format>jar</format>\n+  </formats>\n+  <includeBaseDirectory>false</includeBaseDirectory>\n+  <dependencySets>\n+    <dependencySet>\n+      <outputDirectory>/</outputDirectory>\n+      <useProjectArtifact>true</useProjectArtifact>\n+      <unpack>true</unpack>\n+      <scope>runtime</scope>\n+    </dependencySet>\n+  </dependencySets>\n+  <fileSets>\n+    <fileSet>\n+        <directory>${project.basedir}/target/generated-sources/license/</directory>\n+        <outputDirectory>/</outputDirectory>\n+        <includes>\n+            <include>THIRD-PARTY.txt</include>", "originalCommit": "ef45b513e7ca148b5f18592c147d3fbc61080aec", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}