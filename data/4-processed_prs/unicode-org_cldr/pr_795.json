{"pr_number": 795, "pr_title": "CLDR-13973 restructure UTF-8, XML Reader", "pr_createdAt": "2020-10-16T15:17:11Z", "pr_url": "https://github.com/unicode-org/cldr/pull/795", "timeline": [{"oid": "220df8ed8e793d77f06e1fcdad777fb1425b9ca7", "url": "https://github.com/unicode-org/cldr/commit/220df8ed8e793d77f06e1fcdad777fb1425b9ca7", "message": "CLDR-13973 restructure UTF-8, XML Reader\n\n- remove uses of unnecessary Charset.forName(\"UTF-8\")\n- re-enable the ability to take in BOM in XML (for compat)\n- use InputSource / InputStream instead of Reader input.\n- other simplifications", "committedDate": "2020-10-16T15:58:30Z", "type": "forcePushed"}, {"oid": "38a7dd586a1ad945dc3faf5504d14f24b9f18594", "url": "https://github.com/unicode-org/cldr/commit/38a7dd586a1ad945dc3faf5504d14f24b9f18594", "message": "CLDR-13973 restructure UTF-8, XML Reader\n\n- remove uses of unnecessary Charset.forName(\"UTF-8\")\n- re-enable the ability to take in BOM in XML (for compat)\n- use InputSource / InputStream instead of Reader input where possible\n(the Reader interface with explicit UTF-8 cannot be used with\nXML files containing a BOM.)", "committedDate": "2020-10-16T20:30:47Z", "type": "commit"}, {"oid": "38a7dd586a1ad945dc3faf5504d14f24b9f18594", "url": "https://github.com/unicode-org/cldr/commit/38a7dd586a1ad945dc3faf5504d14f24b9f18594", "message": "CLDR-13973 restructure UTF-8, XML Reader\n\n- remove uses of unnecessary Charset.forName(\"UTF-8\")\n- re-enable the ability to take in BOM in XML (for compat)\n- use InputSource / InputStream instead of Reader input where possible\n(the Reader interface with explicit UTF-8 cannot be used with\nXML files containing a BOM.)", "committedDate": "2020-10-16T20:30:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjcxMDk1OQ==", "url": "https://github.com/unicode-org/cldr/pull/795#discussion_r506710959", "bodyText": "I thought you were going to add a comment here (if I understand what you said previously) since this is an important change.", "author": "hagbard", "createdAt": "2020-10-16T20:41:05Z", "path": "tools/java/org/unicode/cldr/util/CLDRFile.java", "diffHunk": "@@ -331,9 +329,8 @@ private static CLDRFile load(String fileName, String localeName, InputStream fis\n      */\n     public CLDRFile loadFromInputStream(String fileName, String localeName, InputStream fis, DraftStatus minimalDraftStatus) {\n         CLDRFile cldrFile = this;\n-        InputStreamReader reader = new InputStreamReader(fis, Charset.forName(\"UTF-8\"));\n         MyDeclHandler DEFAULT_DECLHANDLER = new MyDeclHandler(cldrFile, minimalDraftStatus);\n-        XMLFileReader.read(fileName, reader, -1, true, DEFAULT_DECLHANDLER);\n+        XMLFileReader.read(fileName, fis, -1, true, DEFAULT_DECLHANDLER);", "originalCommit": "38a7dd586a1ad945dc3faf5504d14f24b9f18594", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}