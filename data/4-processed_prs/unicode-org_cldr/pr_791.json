{"pr_number": 791, "pr_title": "CLDR-14220 Azure migration: set st.unicode.org hostname", "pr_createdAt": "2020-10-15T17:34:03Z", "pr_url": "https://github.com/unicode-org/cldr/pull/791", "timeline": [{"oid": "f0cefa528fd316631b22782e366f80280baadc63", "url": "https://github.com/unicode-org/cldr/commit/f0cefa528fd316631b22782e366f80280baadc63", "message": "CLDR-14220 Azure migration: set st.unicode.org hostname\n\n-This is required for sending email from the production server\n\n-New Ansible playbook: hostname-playbook, imported from setup-playbook\n\n-Move other details of setup-playbook to new server-playbook, packages-playbook, certbot-playbook", "committedDate": "2020-10-15T17:31:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyOTg2OA==", "url": "https://github.com/unicode-org/cldr/pull/791#discussion_r505929868", "bodyText": "should this be {{ inventory_hostname }} instead?", "author": "srl295", "createdAt": "2020-10-16T00:01:45Z", "path": "tools/scripts/ansible/hostname-playbook.yml", "diffHunk": "@@ -0,0 +1,6 @@\n+- hosts: prod\n+  become: yes\n+  tasks:\n+    - name: Set the hostname\n+      hostname:\n+         name: st.unicode.org", "originalCommit": "f0cefa528fd316631b22782e366f80280baadc63", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkzMzc2OA==", "url": "https://github.com/unicode-org/cldr/pull/791#discussion_r505933768", "bodyText": "Yes! I hunted around for a way to get the \"current\" host, but didn't find this. I'll make a follow-up PR with that change, thanks!\nI don't know if there's any reason to do the same for other hosts (like smoketest), so I limited it to \"prod\"", "author": "btangmu", "createdAt": "2020-10-16T00:16:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyOTg2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkyOTk5Nw==", "url": "https://github.com/unicode-org/cldr/pull/791#discussion_r505929997", "bodyText": "nginx-exporter wasn't in the ubuntu version we have yet.", "author": "srl295", "createdAt": "2020-10-16T00:02:16Z", "path": "tools/scripts/ansible/server-playbook.yml", "diffHunk": "@@ -0,0 +1,180 @@\n+- hosts: surveytool\n+  become: yes\n+  vars_files:\n+    - vars/main.yml\n+    - local-vars/local.yml\n+  roles:\n+    - { role: geerlingguy.mysql }\n+    - { role: geerlingguy.nginx }\n+  tasks:\n+    - name: Install server packages\n+      apt:\n+        pkg:\n+          - tomcat8\n+          - tomcat8-admin # needed for deploy\n+          - unzip # needed for deploy\n+          # for monitoring\n+          - prometheus-mysqld-exporter\n+          # - prometheus-nginx-exporter # (not there yet)", "originalCommit": "f0cefa528fd316631b22782e366f80280baadc63", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}