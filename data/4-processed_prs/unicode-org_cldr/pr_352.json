{"pr_number": 352, "pr_title": "CLDR-11687 Update Dojo", "pr_createdAt": "2020-02-21T20:20:43Z", "pr_url": "https://github.com/unicode-org/cldr/pull/352", "timeline": [{"oid": "74004e0c8c1880d61c86edae248d619a372dac6b", "url": "https://github.com/unicode-org/cldr/commit/74004e0c8c1880d61c86edae248d619a372dac6b", "message": "CLDR-11687 Update Dojo\n\n-Change Dojo version from 1.10.4 to 1.14.1\n\n-Add async: true in dojoConfig, fix warning XMLHttpRequest with the synchronous flag set to true is deprecated\n\n-Delete unused files referencing different dojo versions: dojoheader.jspf, ...xpath-linkify...\n\n-Change all dojo.ready to require ... dojo/ready ...\n\n-Change all dojo.string to require ... dojo/string ...\n\n-Encapsulate dojo xhr in new IIFE cldrStAjax in new strict file CldrStAjax.java\n\n-Replace deprecated xhrGet and xhrPost with dojo/request\n\n-Remove obsolete second parameter ioArgs from error handlers; new cldrStAjax.errResponseText\n\n-Include ajax_status.jsp in about.jsp and browse.jsp rather than include dojo there directly\n\n-Skip timer in survey.js when included by about.jsp and browse.jsp\n\n-Return silently if st_err undefined for updateStatus in about.jsp and browse.jsp\n\n-Delete @module from survey.js; unfortunately it is not a module (yet)\n\n-Declare variable k in getTagChildren for eventual use strict\n\n-Comments", "committedDate": "2020-02-21T20:17:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMyMjQ0Mw==", "url": "https://github.com/unicode-org/cldr/pull/352#discussion_r387322443", "bodyText": "So, this used to be an embeddable service - the old bug tracker was able to import it and turn 53b7f2338d33498b in a bug report into something clickable.\nAt the time of moving to Jira, it was already broken.\nSo yes, let's delete this. It would be replaced by a proper API on the survey tool side.\nThere is instead https://st.unicode.org/cldr-apps/browse.jsp which uses ../browse_results.jsp and ../xpath_results.jsp", "author": "srl295", "createdAt": "2020-03-03T22:05:20Z", "path": "tools/cldr-apps/WebContent/xpath-linkify/example-xpath-linkify.html", "diffHunk": "@@ -1,101 +0,0 @@\n-<!DOCTYPE html>\n-<html>\n-<head>\n-<meta charset=\"UTF-8\">\n-<title>linkify XPath</title>\n-<!--  must include dojo -->\n-<script class='head_needed' src=\"//ajax.googleapis.com/ajax/libs/dojo/1.9.3/dojo/dojo.js\"></script> \n-<!--  now, include cldr-xpath-linkify  -->\n-<script class='head_needed' src=\"cldr-xpath-linkify.js\"></script>\n-<link class='head_needed'  rel=\"stylesheet\" href=\"//ajax.googleapis.com/ajax/libs/dojo/1.9.3/dijit/themes/claro/claro.css\" />\n-<link class='head_needed' rel=\"stylesheet\" href=\"cldr-xpath-linkify.css\" />\n-\n-</head>\n-<body class='claro'>\n-\n-<h1>CLDR XPath Lookup Service</h1>\n-\n-How to use:\n-\n-<h2>1. put stuff in your  &lt;head&gt;</h2>\n-<h3>Optional (as needed): fix up the target URL</h3>\n-<textarea  cols=\"90\" rows=\"10\"></textarea>\n-\n-&lt;script&gt;\n-    window.xpathLinkifyOpts = {\n-        url: 'http://somehowt.example.com/cldr-apps/'\n-    };\n-&lt;/script&gt;\n-</textarea>\n-\n-<h3>Mandatory</h3>\n-<textarea  cols=\"90\" rows=\"10\" id='headstuff'>\n-</textarea>\n-\n-<script>\n-require([\"dojo/query\", \"dojo/domReady!\"],\n-\t\tfunction(query) {\n-\tvar hs = query('#headstuff')[0];\n-\tvar where=window.location.toString();\n-\tvar baseUrl = where.substring(0,where.lastIndexOf('/')+1);\n-\tvar str = '<head>\\n';\n-\tvar items = document.getElementsByClassName('head_needed');\n-\tfor(var k=0;k<items.length;k++) {\n-\t\tvar item = items[k];\n-\t\tstr = str + '  <'+item.tagName.toLowerCase()+'';\n-\t\tif(item.rel) {\n-\t\t\tstr = str + ' rel=\"'+item.rel+'\"';\n-\t\t}\n-\t\tfunction fixLink(x) {\n-\t\t\tif(x.substring(0,baseUrl.length)!=baseUrl) {\n-\t\t\t\tx = x.substring(x.indexOf(':')+1);\n-\t\t\t}\n-\t\t\treturn x;\n-\t\t}\n-\t\tvar src = item.src;\n-\t\tif(src) {\n-\t\t\tstr = str + ' src=\"' + fixLink(src) + '\"';\n-\t\t}\n-\t\tvar href = item.href;\n-\t\tif(href) {\n-\t\t\tstr = str + ' href=\"' + fixLink(href) + '\"';\n-\t\t}\n-\t\tstr = str + '></'+item.tagName.toLowerCase()+'>\\n';\n-\t}\n-\tstr = str + '</head>\\n';\n-\ths.value = str;\n-});\n-</script>\n-\n-<h2>2. Create something to link to.</h2>\n-\n-<ul>\n-\t<tt>\n-\t\t&lt;span class='<b>cldr-xpath-linkify</b>'&gt;53b7f2338d33498b&lt;/span&gt;\n-\t</tt>\n-</ul>\n-\n-<h2>3. Profit.</h2>\n-\n-<ul>\n-\t<span class='cldr-xpath-linkify'>53b7f2338d33498b</span>\n-</ul>\n-\n-\n-<p>\n-\tMousing over these xpath objects will popup a full xpath and description. ", "originalCommit": "74004e0c8c1880d61c86edae248d619a372dac6b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Nzg0NjY1MQ==", "url": "https://github.com/unicode-org/cldr/pull/352#discussion_r387846651", "bodyText": "Thanks!", "author": "btangmu", "createdAt": "2020-03-04T18:17:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMyMjQ0Mw=="}], "type": "inlineReview"}]}