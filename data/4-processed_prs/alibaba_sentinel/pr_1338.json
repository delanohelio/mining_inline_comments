{"pr_number": 1338, "pr_title": "Polish logging SPI related code and add general JUL adapter for Logger SPI", "pr_createdAt": "2020-03-14T14:11:59Z", "pr_url": "https://github.com/alibaba/Sentinel/pull/1338", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODQ4NA==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392598484", "bodyText": "The name of final variables are not consistent with CommandCenterLog class, as they are in context of RecordLog, maybe the same as RecordLog's LOGGER_NAME\u3001DEFAULT_LOG_FILENAME is better? Seems DEFAULT_LOG_FILENAME can be LOG_FILENAME.", "author": "cdfive", "createdAt": "2020-03-14T15:56:56Z", "path": "sentinel-core/src/main/java/com/alibaba/csp/sentinel/log/RecordLog.java", "diffHunk": "@@ -15,80 +15,74 @@\n  */\n package com.alibaba.csp.sentinel.log;\n \n-import java.util.Iterator;\n-import java.util.ServiceLoader;\n+import com.alibaba.csp.sentinel.log.jul.JavaLoggingAdapter;\n \n-/***\n- * The basic logger for vital events.\n+/**\n+ * The basic biz logger of Sentinel.\n  *\n  * @author youji.zj\n+ * @author Eric Zhao\n  */\n-public class RecordLog extends LogBase {\n-    private static com.alibaba.csp.sentinel.log.Logger log = null;\n+public class RecordLog {\n+\n+    public static final String RECORD_LOGGER_NAME = \"sentinelRecordLogger\";\n+    public static final String DEFAULT_RECORD_LOG_FILENAME = \"sentinel-record.log\";", "originalCommit": "11eebccb3f310bf5ac76574644aac9c6db95b56b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzMzg5Nw==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392633897", "bodyText": "Good idea. I've polished the code, please check.", "author": "sczyh30", "createdAt": "2020-03-15T01:49:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODQ4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODgxOA==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392598818", "bodyText": "The dependency seems not used in demo, is it redundant", "author": "cdfive", "createdAt": "2020-03-14T16:01:34Z", "path": "sentinel-demo/sentinel-demo-log-logback/pom.xml", "diffHunk": "@@ -12,12 +12,16 @@\n     <artifactId>sentinel-demo-log-logback</artifactId>\n \n     <dependencies>\n+        <dependency>\n+            <groupId>com.alibaba.csp</groupId>\n+            <artifactId>sentinel-transport-common</artifactId>\n+        </dependency>\n+", "originalCommit": "11eebccb3f310bf5ac76574644aac9c6db95b56b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzMzkxNw==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392633917", "bodyText": "Actually I'm planning to move the CommandCenterLog to sentinel-transport-common, as it's only used in transport command centers. This will be done in another PR, but the dependency could be reserved :)", "author": "sczyh30", "createdAt": "2020-03-15T01:50:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODgxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYzNTMyNg==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392635326", "bodyText": "OK, got it. Now LogBase is not a parent class, maybe another class name is better, like LogConfig or sth else. Besides, I found that the config parameter which can be customized by user is scattered in different classes(by global seaching \"csp.sentinel.\" in sentinel-core module), if it is better put them into one config class, to make config clearly and convenient to found. And this may need careful consideration and discussion, and I think we can do it in the future.", "author": "cdfive", "createdAt": "2020-03-15T02:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODgxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc1MTgxMg==", "url": "https://github.com/alibaba/Sentinel/pull/1338#discussion_r392751812", "bodyText": "Good idea. We may improve this later, but be careful of the compatibility. We could create an umbrella issue to discuss it :)", "author": "sczyh30", "createdAt": "2020-03-16T02:00:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU5ODgxOA=="}], "type": "inlineReview"}, {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>", "committedDate": "2020-03-15T01:47:22Z", "type": "commit"}, {"oid": "619117ee7ea86644ba967f12ae882b472085eaff", "url": "https://github.com/alibaba/Sentinel/commit/619117ee7ea86644ba967f12ae882b472085eaff", "message": "Polish logging SPI related code and add general JUL adapter for Logger SPI\n\n* Move the legacy JUL methods from LogBase to BaseJulLogger.\n* Add a JavaLoggingAdapter as the general JUL adapter for the Logger SPI, which makes it convenient to use (as the default logger).\n* Add LoggerSpiProvider to resolve Logger SPI.\n* Polish the logback demo.\n\nSigned-off-by: Eric Zhao <sczyh16@gmail.com>", "committedDate": "2020-03-15T01:47:22Z", "type": "forcePushed"}]}