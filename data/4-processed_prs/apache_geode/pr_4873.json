{"pr_number": 4873, "pr_title": "GEODE-7864: Closing the query statements after execution.", "pr_createdAt": "2020-03-29T04:01:37Z", "pr_url": "https://github.com/apache/geode/pull/4873", "timeline": [{"oid": "f068773caeb07b0983bcfee3e68160bde47a3a2b", "url": "https://github.com/apache/geode/commit/f068773caeb07b0983bcfee3e68160bde47a3a2b", "message": "GEODE-7864: Closing the query statements after execution.", "committedDate": "2020-03-29T04:00:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE5Nzg0MQ==", "url": "https://github.com/apache/geode/pull/4873#discussion_r400197841", "bodyText": "ResultSet is also AutoCloseable, perhaps take the opportunity to clean this one up too.", "author": "pivotal-jbarrett", "createdAt": "2020-03-30T13:38:42Z", "path": "geode-junit/src/main/java/org/apache/geode/internal/jta/CacheUtils.java", "diffHunk": "@@ -144,12 +144,13 @@ public static void listTableData(String tableName) throws NamingException, SQLEx\n     String sql = \"select * from \" + tableName;\n \n     Connection conn = ds.getConnection();\n-    Statement sm = conn.createStatement();\n-    ResultSet rs = sm.executeQuery(sql);\n-    while (rs.next()) {\n-      System.out.println(\"id \" + rs.getString(1) + \" name \" + rs.getString(2));\n+    try (Statement sm = conn.createStatement()) {\n+      ResultSet rs = sm.executeQuery(sql);", "originalCommit": "f068773caeb07b0983bcfee3e68160bde47a3a2b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4MDMwMg==", "url": "https://github.com/apache/geode/pull/4873#discussion_r400380302", "bodyText": "the analyzer did not detect it because there was a rs.close at the end of the block.", "author": "nabarunnag", "createdAt": "2020-03-30T17:49:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE5Nzg0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDM4Mjg3MA==", "url": "https://github.com/apache/geode/pull/4873#discussion_r400382870", "bodyText": "same with Connection. If there is a .close() at the end of the block it does not consider it as a violation.", "author": "nabarunnag", "createdAt": "2020-03-30T17:53:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE5Nzg0MQ=="}], "type": "inlineReview"}]}