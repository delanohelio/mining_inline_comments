{"pr_number": 5320, "pr_title": "GEODE-8332: Refactor inregion classes", "pr_createdAt": "2020-06-27T00:57:18Z", "pr_url": "https://github.com/apache/geode/pull/5320", "timeline": [{"oid": "8e350f419458daea9ec369ee9fc14c2336cbf1f3", "url": "https://github.com/apache/geode/commit/8e350f419458daea9ec369ee9fc14c2336cbf1f3", "message": "the *InRegion classes are now RedisDataCommands\nInstead of creating an instance for every function exec\na stable instance is created at startup and reused for\nthe life of the server", "committedDate": "2020-06-26T23:59:56Z", "type": "commit"}, {"oid": "965307cfceffb9f92b5574a45bbea1715c9a2f1e", "url": "https://github.com/apache/geode/commit/965307cfceffb9f92b5574a45bbea1715c9a2f1e", "message": "RedisDataCommands now uses the StripedExecutor instead of CommandFunction", "committedDate": "2020-06-27T00:55:59Z", "type": "commit"}, {"oid": "ea24009b4e71e488e094d9c84d047984ac7c38d3", "url": "https://github.com/apache/geode/commit/ea24009b4e71e488e094d9c84d047984ac7c38d3", "message": "WIP started moving the \"do\" methods in RedisDataCommands down into RedisString", "committedDate": "2020-06-30T00:16:33Z", "type": "commit"}, {"oid": "beb613981bdd1199a43e48b403c587149ef08d2d", "url": "https://github.com/apache/geode/commit/beb613981bdd1199a43e48b403c587149ef08d2d", "message": "moved the bitop code from RedisDataCommands to NullRedisString", "committedDate": "2020-06-30T16:37:12Z", "type": "commit"}, {"oid": "7494e07f66b3dbe94d132e3ef31856948f649463", "url": "https://github.com/apache/geode/commit/7494e07f66b3dbe94d132e3ef31856948f649463", "message": "moved set implementation from RedisDataCommands to RedisString", "committedDate": "2020-06-30T16:55:56Z", "type": "commit"}, {"oid": "82c3a5c4f212a366333cec5ffe12de99c2f410a4", "url": "https://github.com/apache/geode/commit/82c3a5c4f212a366333cec5ffe12de99c2f410a4", "message": "moved some hash and set impls", "committedDate": "2020-06-30T18:19:33Z", "type": "commit"}, {"oid": "dbfa871c5a486fe889b4a6162199ae46c80ebe44", "url": "https://github.com/apache/geode/commit/dbfa871c5a486fe889b4a6162199ae46c80ebe44", "message": "more commands have moved their implementation into the data classes", "committedDate": "2020-06-30T23:55:05Z", "type": "commit"}, {"oid": "e9d7850c10fa12f1e083681a489f08b278077eb6", "url": "https://github.com/apache/geode/commit/e9d7850c10fa12f1e083681a489f08b278077eb6", "message": "did some renaming of empty to null", "committedDate": "2020-07-01T00:05:28Z", "type": "commit"}, {"oid": "f9abd20bc0f7848d59d082324d055bfe125601ac", "url": "https://github.com/apache/geode/commit/f9abd20bc0f7848d59d082324d055bfe125601ac", "message": "moved setop commands implementation and refactored for code reuse", "committedDate": "2020-07-01T00:45:54Z", "type": "commit"}, {"oid": "ef314549cad69cdce176cd3865592f22d5dd96c6", "url": "https://github.com/apache/geode/commit/ef314549cad69cdce176cd3865592f22d5dd96c6", "message": "fixed analyze serializables", "committedDate": "2020-07-01T18:11:28Z", "type": "commit"}, {"oid": "de066580f54667e29e7c239a25f17fcf599ae583", "url": "https://github.com/apache/geode/commit/de066580f54667e29e7c239a25f17fcf599ae583", "message": "extracted CommandHelper", "committedDate": "2020-07-01T21:49:45Z", "type": "commit"}, {"oid": "93d854aa183e383461e69576696a26f6f8d13fe4", "url": "https://github.com/apache/geode/commit/93d854aa183e383461e69576696a26f6f8d13fe4", "message": "split RedisDataCommands into ones organized around key, hash, set, and string.", "committedDate": "2020-07-01T22:36:42Z", "type": "commit"}, {"oid": "9702eb34b90dbeb1a3bf1790d1ed64afed0d56aa", "url": "https://github.com/apache/geode/commit/9702eb34b90dbeb1a3bf1790d1ed64afed0d56aa", "message": "removed some duplicate bitOp code", "committedDate": "2020-07-01T22:54:14Z", "type": "commit"}, {"oid": "489c73de6cfdd2f348bb5f52e8cb9a38401adb50", "url": "https://github.com/apache/geode/commit/489c73de6cfdd2f348bb5f52e8cb9a38401adb50", "message": "cleaned up some warnings", "committedDate": "2020-07-01T23:39:42Z", "type": "commit"}, {"oid": "d6da74d800fee3e5e2529edd9288fefab13bd617", "url": "https://github.com/apache/geode/commit/d6da74d800fee3e5e2529edd9288fefab13bd617", "message": "fixed NPE", "committedDate": "2020-07-01T23:43:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MjU3Mw==", "url": "https://github.com/apache/geode/pull/5320#discussion_r450252573", "bodyText": "I presume it's OK that we're not using the LocalDataSet anymore? On a related note RenameFunction.getLocalDatSet can be removed.", "author": "jdeppe-pivotal", "createdAt": "2020-07-06T14:17:43Z", "path": "geode-redis/src/main/java/org/apache/geode/redis/internal/executor/SingleResultRedisFunction.java", "diffHunk": "@@ -64,11 +61,4 @@ public boolean optimizeForWrite() {\n   public boolean isHA() {\n     return true;\n   }\n-\n-  public static void computeWithPrimaryLocked(Object key, LocalDataSet localDataSet, Runnable r) {", "originalCommit": "d6da74d800fee3e5e2529edd9288fefab13bd617", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDMxNTc4Ng==", "url": "https://github.com/apache/geode/pull/5320#discussion_r450315786", "bodyText": "Yes. If, in the future, we have an operation that needs the LocalDataSet then we can pass it to that operation explicitly.\nI moved RenameFunction.getLocalDataSet", "author": "dschneider-pivotal", "createdAt": "2020-07-06T15:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDI1MjU3Mw=="}], "type": "inlineReview"}, {"oid": "0a688770fb5265ed1693f9dd11eb87adf615a2d6", "url": "https://github.com/apache/geode/commit/0a688770fb5265ed1693f9dd11eb87adf615a2d6", "message": "removed unused getLocalDataSet", "committedDate": "2020-07-06T15:46:50Z", "type": "commit"}, {"oid": "4c84335f5245d735496edf09c472338fa599f4c9", "url": "https://github.com/apache/geode/commit/4c84335f5245d735496edf09c472338fa599f4c9", "message": "spotless", "committedDate": "2020-07-06T16:47:24Z", "type": "commit"}]}