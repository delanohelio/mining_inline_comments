{"pr_number": 4587, "pr_title": "GEODE-7690: make it less difficult to run benchmarks against a PR", "pr_createdAt": "2020-01-12T16:59:56Z", "pr_url": "https://github.com/apache/geode/pull/4587", "timeline": [{"oid": "2301dea3195b83c24bb5ff084c4cf6a259c14721", "url": "https://github.com/apache/geode/commit/2301dea3195b83c24bb5ff084c4cf6a259c14721", "message": "GEODE-7690: make it less difficult to run benchmarks against a PR", "committedDate": "2020-01-12T17:58:34Z", "type": "forcePushed"}, {"oid": "d32ef262e80e81c72c88c64de5d9a5fa11761d2a", "url": "https://github.com/apache/geode/commit/d32ef262e80e81c72c88c64de5d9a5fa11761d2a", "message": "GEODE-7690: make it less difficult to run benchmarks against a PR", "committedDate": "2020-01-12T18:00:04Z", "type": "forcePushed"}, {"oid": "3629b09c79c08297967804d988d7f3333bd9cab4", "url": "https://github.com/apache/geode/commit/3629b09c79c08297967804d988d7f3333bd9cab4", "message": "GEODE-7690: make it less difficult to run benchmarks against a PR", "committedDate": "2020-01-12T18:01:01Z", "type": "commit"}, {"oid": "3629b09c79c08297967804d988d7f3333bd9cab4", "url": "https://github.com/apache/geode/commit/3629b09c79c08297967804d988d7f3333bd9cab4", "message": "GEODE-7690: make it less difficult to run benchmarks against a PR", "committedDate": "2020-01-12T18:01:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyODAzNw==", "url": "https://github.com/apache/geode/pull/4587#discussion_r365928037", "bodyText": "Are changes needed in the rest of the CI to get the GEODE_REPO passed through?", "author": "pivotal-jbarrett", "createdAt": "2020-01-13T17:23:57Z", "path": "ci/scripts/run_benchmarks.sh", "diffHunk": "@@ -37,6 +37,9 @@ RESULTS_DIR=$(pwd)/results/benchmarks-${CLUSTER_TAG}\n CLUSTER_COUNT=4\n BENCHMARKS_BRANCH=${BENCHMARKS_BRANCH:-develop}\n \n+GEODE_REPO=${GEODE_REPO:-apache/geode}", "originalCommit": "3629b09c79c08297967804d988d7f3333bd9cab4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyOTk1Nw==", "url": "https://github.com/apache/geode/pull/4587#discussion_r365929957", "bodyText": "It isn't usually necessary to pass this in when run_benchmarks is called, as the default suffices for all existing CI use cases.  I've now improved it to detect the current repo using git remote get-url origin rather than hardcoding apache/geode.  Does this resolve your concern?", "author": "onichols-pivotal", "createdAt": "2020-01-13T17:28:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyODAzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkzMTc4Nw==", "url": "https://github.com/apache/geode/pull/4587#discussion_r365931787", "bodyText": "Sorry, I am asking where is this GEODE_REPO environment variable coming from within the entire CI process?", "author": "pivotal-jbarrett", "createdAt": "2020-01-13T17:31:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyODAzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk1OTM1OA==", "url": "https://github.com/apache/geode/pull/4587#discussion_r365959358", "bodyText": "for the public Geode develop and release pipelines, the default initialized on line 40 is sufficient.  As described in the PR, if you are trying to do any testing against a PR, fork, your own pipeline, etc prior to merging to develop, the hardcoded defaults in run_against_baseline made it impossible without hacking some scripts, since run_benchmarks did not pass any -r or -R before this PR.   This PR eliminates the need for hacking, by improving the default for GEODE_REPO, and further allowing it to be overridden externally if the default computed on line 40 doesn't work for some reason.", "author": "onichols-pivotal", "createdAt": "2020-01-13T18:31:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkyODAzNw=="}], "type": "inlineReview"}, {"oid": "cc49fb03726d66d4bcb654e2c1c240a34d5a0623", "url": "https://github.com/apache/geode/commit/cc49fb03726d66d4bcb654e2c1c240a34d5a0623", "message": "default to CI-provided repo instead of hardcoding apache/geode", "committedDate": "2020-01-13T18:05:21Z", "type": "commit"}]}