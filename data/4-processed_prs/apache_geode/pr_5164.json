{"pr_number": 5164, "pr_title": "Feature/geode 8144", "pr_createdAt": "2020-05-26T21:45:51Z", "pr_url": "https://github.com/apache/geode/pull/5164", "timeline": [{"oid": "9ffff890203df763cac3651eaccab9938708073b", "url": "https://github.com/apache/geode/commit/9ffff890203df763cac3651eaccab9938708073b", "message": "modified SocketCreator to look for a hostname if one is not present and endpoint verification is enabled\n\nThis fixes some problems when running in docker containers", "committedDate": "2020-05-26T21:28:38Z", "type": "commit"}, {"oid": "0b53d7378efa4c907c5e0c8497a3c190239766fe", "url": "https://github.com/apache/geode/commit/0b53d7378efa4c907c5e0c8497a3c190239766fe", "message": "removed test shell script", "committedDate": "2020-05-26T21:28:38Z", "type": "commit"}, {"oid": "342ab9a06be9bac3da5bf71d05a2b9750d7ac3d8", "url": "https://github.com/apache/geode/commit/342ab9a06be9bac3da5bf71d05a2b9750d7ac3d8", "message": "modified a test to use LocalHostUtil to get localhost", "committedDate": "2020-05-26T21:42:36Z", "type": "commit"}, {"oid": "37a2989c1623aad20574a572d843546db7392e0a", "url": "https://github.com/apache/geode/commit/37a2989c1623aad20574a572d843546db7392e0a", "message": "remove use of InetAddress.getLocalHost & add a sanIpAddress if there is no name for the localhost address", "committedDate": "2020-05-27T16:18:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4ODI2Mg==", "url": "https://github.com/apache/geode/pull/5164#discussion_r431288262", "bodyText": "these 2 lines should be put in \"else\" or some better place?", "author": "gesterzhou", "createdAt": "2020-05-27T16:42:58Z", "path": "geode-gfsh/src/distributedTest/java/org/apache/geode/management/internal/cli/commands/GfshHostNameVerificationDistributedTest.java", "diffHunk": "@@ -60,14 +62,19 @@ public void setupCluster() throws Exception {\n         .isCA()\n         .generate();\n \n-    CertificateMaterial locatorCertificate = new CertificateBuilder()\n+    String hostname = LocalHostUtil.getCanonicalLocalHostName();\n+    final CertificateBuilder builder = new CertificateBuilder()\n         .commonName(\"locator\")\n         .issuedBy(ca)\n         .sanDnsName(InetAddress.getLoopbackAddress().getHostName())\n-        .sanDnsName(InetAddress.getLocalHost().getHostName())\n-        .sanIpAddress(InetAddress.getLocalHost())\n-        .sanIpAddress(InetAddress.getByName(\"0.0.0.0\")) // to pass on windows\n-        .generate();\n+        .sanDnsName(hostname)", "originalCommit": "37a2989c1623aad20574a572d843546db7392e0a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI5MjM4OA==", "url": "https://github.com/apache/geode/pull/5164#discussion_r431292388", "bodyText": "loopback is supposed to be there.  The hostnamechecker in the jdk will ignore the sanDnsName(hostname) entry if it's an IP literal and instead look for a sanIpAddress entry , so it doesn't hurt to have the sanDnsName there.", "author": "bschuchardt", "createdAt": "2020-05-27T16:49:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4ODI2Mg=="}], "type": "inlineReview"}]}