{"pr_number": 5122, "pr_title": "GEODE-8122: Update GeodeRedisServer java doc and Redis API for Geode documentation", "pr_createdAt": "2020-05-15T15:30:07Z", "pr_url": "https://github.com/apache/geode/pull/5122", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyODIyOA==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425928228", "bodyText": "I think you should specify here what special values do. We had some of this text before which may have been lost in a merge. For example:\nA value of \"0\" disables the Redis API for Geode.\nA value of \"-1\" will select a random available port.", "author": "dschneider-pivotal", "createdAt": "2020-05-15T16:53:19Z", "path": "geode-core/src/main/java/org/apache/geode/distributed/ConfigurationProperties.java", "diffHunk": "@@ -1916,11 +1916,10 @@\n   /**\n    * The static String definition of the <i>\"redis-port\"</i> property <a name=\"redis-port\"/a>\n    * </p>\n-   * <U>Description</U>: Specifies the port used by {@code GeodeRedisServer} which enables redis\n-   * clients to connect and store data in GemFire distributed system. see {@code GeodeRedisServer}\n-   * for other configuration options. A value of \"-1\" will select a random port.\n+   * <U>Description</U>: Specifies the port used by Redis API for Geode which enables redis\n+   * clients to connect and store data in GemFire distributed system.", "originalCommit": "4ebec9468cd47f68148948d389c1af7d8ac7ed14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkzMjcwNw==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425932707", "bodyText": "good catch, I'll update that.", "author": "sabbey37", "createdAt": "2020-05-15T17:01:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkzMzk1Mw==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425933953", "bodyText": "These selections are not consistent with network services though. Zero typically mean automatically pick an ephemeral port. Given that ports should not be negative, can we use another property or API to enable service, or the use of null.", "author": "pivotal-jbarrett", "createdAt": "2020-05-15T17:04:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk2MTU4Nw==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425961587", "bodyText": "@pivotal-jbarrett That's true. -1 was chosen because 0 is already used to indicate that we don't want the service to be enabled. However we could (should?) switch that notion now while things are still Experimental.", "author": "jdeppe-pivotal", "createdAt": "2020-05-15T17:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyODIyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyOTY3MQ==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425929671", "bodyText": "I'm not sure I like this. It will grow stale over time since it is a reference to a specific version of the docs. And it is not really needed since this class is now internal. I'd vote for just dropping this reference.", "author": "dschneider-pivotal", "createdAt": "2020-05-15T16:56:06Z", "path": "geode-redis/src/main/java/org/apache/geode/redis/internal/GeodeRedisServer.java", "diffHunk": "@@ -93,65 +93,11 @@\n  * server, each command is picked up by a thread, interpreted and then executed and a response is\n  * sent back to the client. The default connection port is 6379 but that can be altered when run\n  * through GFSH or started through the provided static main class.\n- * <p>\n- * Each Redis data type instance is stored in a separate {@link Region} except for the Strings and\n- * HyperLogLogs which are collectively stored in one Region respectively. That Region along with a\n- * meta data region used internally are protected so the client may not store keys with the name\n- * {@link GeodeRedisServer#REDIS_META_DATA_REGION} or {@link GeodeRedisServer#STRING_REGION}. The\n- * default Region type is {@link RegionShortcut#PARTITION_REDUNDANT}. If the\n- * {@link GeodeRedisServer#NUM_THREADS_SYS_PROP_NAME} system property is set\n- * to 0, one thread per client will be created. Otherwise a worker thread pool of specified size is\n- * used or a default size of {@link Runtime#availableProcessors()} if the property is not set.\n- * <p>\n- * Setting the AUTH password requires setting the property \"redis-password\" just as \"redis-port\"\n- * would be in xml or through GFSH.\n- * <p>\n- * The supported commands are as follows:\n- * <p>\n- * Supported String commands - APPEND, BITCOUNT, BITOP, BITPOS, DECR, DECRBY, GET, GETBIT, GETRANGE,\n- * GETSET, INCR, INCRBY, INCRBYFLOAT, MGET, MSET, MSETNX, PSETEX, SET, SETBIT, SETEX, SETNX, STRLEN\n- * <p>\n- * Supported List commands - LINDEX, LLEN, LPOP, LPUSH, LPUSHX, LRANGE, LREM, LSET, LTRIM, RPOP,\n- * RPUSH, RPUSHX\n- * <p>\n- * Supported Hash commands - HDEL, HEXISTS, HGET, HGETALL, HINCRBY, HINCRBYFLOAT, HKEYS, HMGET,\n- * HMSET, HSETNX, HLEN, HSCAN, HSET, HVALS\n- * <p>\n- * Supported Set commands - SADD, SCARD, SDIFF, SDIFFSTORE, SINTER, SINTERSTORE, SISMEMBER,\n- * SMEMBERS, SMOVE, SREM, SPOP, SRANDMEMBER, SCAN, SUNION, SUNIONSTORE\n- * <p>\n- * Supported SortedSet commands - ZADD, ZCARD, ZCOUNT, ZINCRBY, ZLEXCOUNT, ZRANGE, ZRANGEBYLEX,\n- * ZRANGEBYSCORE, ZRANK, ZREM, ZREMRANGEBYLEX, ZREMRANGEBYRANK, ZREMRANGEBYSCORE, ZREVRANGE,\n- * ZREVRANGEBYSCORE, ZREVRANK, ZSCAN, ZSCORE\n- * <p>\n- * Supported HyperLogLog commands - PFADD, PFCOUNT, PFMERGE\n- * <p>\n- * Supported Keys commands - DEL, DBSIZE, EXISTS, EXPIRE, EXPIREAT, FLUSHDB, FLUSHALL, KEYS,\n- * PERSIST, PEXPIRE, PEXPIREAT, PTTL, SCAN, TTL\n- * <p>\n- * Supported Transaction commands - DISCARD, EXEC, MULTI\n- * <p>\n- * Supported Server commands - AUTH, ECHO, PING, TIME, QUIT\n- * <p>\n- * <p>\n- * The command executors are not explicitly documented but the functionality can be found at\n- * <a href=\"http://redis.io/commands\">Redis Commands</a>\n- * <p>\n- * Exceptions to the Redis Commands Documents:\n- * <p>\n- * <ul>\n- * <li>Any command that removes keys and returns a count of removed entries will not return a total\n- * remove count but rather a count of how many entries have been removed that existed on the local\n- * vm, though all entries will be removed</li>\n- * <li>Any command that returns a count of newly set members has an unspecified return value. The\n- * command will work just as the Redis protocol states but the count will not necessary reflect the\n- * number set compared to overridden.</li>\n- * <li>Transactions work just as they would on a Redis instance, they are local transaction.\n- * Transactions cannot be executed on data that is not local to the executing server, that is on a\n- * partitioned region in a different server instance or on a persistent region that does not have\n- * transactions enabled. Also, you cannot watch or unwatch keys as all keys within a GemFire\n- * transaction are watched by default.</li>\n- * </ul>\n+ *\n+ * @See <a href=\n+ *      \"https://geode.apache.org/docs/guide/12/tools_modules/redis_api_for_geode.html\">Redis API", "originalCommit": "4ebec9468cd47f68148948d389c1af7d8ac7ed14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkzMjYwNg==", "url": "https://github.com/apache/geode/pull/5122#discussion_r425932606", "bodyText": "Sounds good, I'll remove it.", "author": "sabbey37", "createdAt": "2020-05-15T17:01:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTkyOTY3MQ=="}], "type": "inlineReview"}, {"oid": "8c30505c6aab0c641923462db2142a387b687647", "url": "https://github.com/apache/geode/commit/8c30505c6aab0c641923462db2142a387b687647", "message": "GEODE-8122: Update GeodeRedisServer java doc and Redis API for Geode\ndocumentation", "committedDate": "2020-05-15T17:20:48Z", "type": "commit"}, {"oid": "8c30505c6aab0c641923462db2142a387b687647", "url": "https://github.com/apache/geode/commit/8c30505c6aab0c641923462db2142a387b687647", "message": "GEODE-8122: Update GeodeRedisServer java doc and Redis API for Geode\ndocumentation", "committedDate": "2020-05-15T17:20:48Z", "type": "forcePushed"}, {"oid": "4ed033493b18a3a6af5eca22ec3a5ad46d349749", "url": "https://github.com/apache/geode/commit/4ed033493b18a3a6af5eca22ec3a5ad46d349749", "message": "PR review changes", "committedDate": "2020-05-15T19:21:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA0NDUxNw==", "url": "https://github.com/apache/geode/pull/5122#discussion_r426044517", "bodyText": "This sentence does not read well.  Please update it to something more like \"Replace <redisPort> with the port that the <%=vars.product_name%> server will listen on for Redis commands. The typical port used with a Redis cluster is 6379.\"\nI removed the word \"default\" from the second part of this prose, because I don't want Geode users to accidentally think that 6379 is a default for Geode.", "author": "karensmolermiller", "createdAt": "2020-05-15T20:59:28Z", "path": "geode-docs/tools_modules/redis_api_for_geode.html.md.erb", "diffHunk": "@@ -0,0 +1,87 @@\n+<% set_title(\"Redis API for\", product_name) %>\n+\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one or more\n+contributor license agreements.  See the NOTICE file distributed with\n+this work for additional information regarding copyright ownership.\n+The ASF licenses this file to You under the Apache License, Version 2.0\n+(the \"License\"); you may not use this file except in compliance with\n+the License.  You may obtain a copy of the License at\n+\n+     http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing, software\n+distributed under the License is distributed on an \"AS IS\" BASIS,\n+WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+See the License for the specific language governing permissions and\n+limitations under the License.\n+-->\n+\n+The Redis API for <%=vars.product_name%> allows a single <%=vars.product_name%> cluster to function as a drop-in replacement for a\n+highly-available Redis data store with one database, letting Redis applications take advantage of\n+<%=vars.product_name%>\u2019s scaling capabilities without changing their client code. Redis clients connect to a <%=vars.product_name%>\n+server in the same way they connect to a Redis server, using a hostname and a port number, with\n+optional password authentication.\n+\n+<img src=\"../images/redis_api_for_geode.png\" class=\"image\" />\n+\n+## <a id=\"using-the-redis-api-for-<%=vars.product_name_lowercase%>\" class=\"no-quick-link\"></a>Using the Redis API for <%=vars.product_name%>\n+\n+The <%=vars.product_name%> cluster must have at least one server that is set up to handle the incoming Redis\n+commands.\n+\n+Use gfsh to start at least one server with a command of the form:\n+\n+``` pre\n+start server --name=<serverName> --locators=<locatorPort> --redis-port=<redisPort> --redis-bind-address=<redisBindAddress>\n+```\n+\n+Replace `<serverName>` with the name of your server.\n+\n+Replace `<locatorPort>` with your locator port.\n+\n+Replace `<redisPort>` to specify the port the <%=vars.product_name%> server will listen on for Redis commands (the typical default Redis port is 6379).", "originalCommit": "4ed033493b18a3a6af5eca22ec3a5ad46d349749", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA0Nzk0Nw==", "url": "https://github.com/apache/geode/pull/5122#discussion_r426047947", "bodyText": "Thanks for the suggestion Karen. I just updated it!", "author": "sabbey37", "createdAt": "2020-05-15T21:08:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA0NDUxNw=="}], "type": "inlineReview"}, {"oid": "fefef1c6dff1e0191bc946fe01c9263cb29f4e66", "url": "https://github.com/apache/geode/commit/fefef1c6dff1e0191bc946fe01c9263cb29f4e66", "message": "PR review changes", "committedDate": "2020-05-15T21:07:46Z", "type": "commit"}, {"oid": "7a4b045443d0d29445e53c076407a2c6a7e91d0e", "url": "https://github.com/apache/geode/commit/7a4b045443d0d29445e53c076407a2c6a7e91d0e", "message": "ci-retrigger", "committedDate": "2020-05-18T14:13:14Z", "type": "commit"}]}