{"pr_number": 5596, "pr_title": "GEODE-8574: ClusterManagementService should not throw ClassCastExcept\u2026", "pr_createdAt": "2020-10-05T22:29:21Z", "pr_url": "https://github.com/apache/geode/pull/5596", "timeline": [{"oid": "21103542f66b60dd5d1b2644ea71b65d586961aa", "url": "https://github.com/apache/geode/commit/21103542f66b60dd5d1b2644ea71b65d586961aa", "message": "GEODE-8574: ClusterManagementService should not throw ClassCastException when function execution throws an Exception.", "committedDate": "2020-10-05T22:28:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDQ1OTQwOQ==", "url": "https://github.com/apache/geode/pull/5596#discussion_r500459409", "bodyText": "A warn level maybe more appropriate than info level for Throwable. Some more information in the log might help the user to diagnose in case of an error. e.g. Function name etc. I would probably consider logging the stack trace.", "author": "jchen21", "createdAt": "2020-10-06T17:06:43Z", "path": "geode-core/src/main/java/org/apache/geode/management/internal/api/LocatorClusterManagementService.java", "diffHunk": "@@ -653,7 +651,23 @@ public void close() {\n         }\n       }\n     }\n+    return results;\n+  }\n \n+  @VisibleForTesting\n+  <R> List<R> cleanResults(List<?> functionResults) {\n+    List<R> results = new ArrayList<>();\n+    for (Object functionResult : functionResults) {\n+      if (functionResult == null) {\n+        continue;\n+      }\n+      if (functionResult instanceof Throwable) {\n+        // log the exception and continue\n+        logger.info(\"Error executing CacheRealizationFunction.\", (Throwable) functionResult);", "originalCommit": "21103542f66b60dd5d1b2644ea71b65d586961aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0ef05969b3bb1cbfb71c024cb489a15081a71fcf", "url": "https://github.com/apache/geode/commit/0ef05969b3bb1cbfb71c024cb489a15081a71fcf", "message": "change info logging to warn", "committedDate": "2020-10-07T16:42:01Z", "type": "commit"}]}