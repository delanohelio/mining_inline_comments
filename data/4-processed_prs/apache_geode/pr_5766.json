{"pr_number": 5766, "pr_title": "GEODE-8738: Updated documentation about WAN deployments with sites wi\u2026", "pr_createdAt": "2020-11-20T09:47:13Z", "pr_url": "https://github.com/apache/geode/pull/5766", "timeline": [{"oid": "68085e0f55700f0eeae3d1906e0696be658a1520", "url": "https://github.com/apache/geode/commit/68085e0f55700f0eeae3d1906e0696be658a1520", "message": "GEODE-8738: Updated documentation about WAN deployments with sites with the same IP address and port for all gateway receivers", "committedDate": "2020-11-20T18:43:02Z", "type": "commit"}, {"oid": "68085e0f55700f0eeae3d1906e0696be658a1520", "url": "https://github.com/apache/geode/commit/68085e0f55700f0eeae3d1906e0696be658a1520", "message": "GEODE-8738: Updated documentation about WAN deployments with sites with the same IP address and port for all gateway receivers", "committedDate": "2020-11-20T18:43:02Z", "type": "forcePushed"}, {"oid": "e43924b2de89dea9d5b513269e7776310100e8ca", "url": "https://github.com/apache/geode/commit/e43924b2de89dea9d5b513269e7776310100e8ca", "message": "GEODE-8738: Update with review comments", "committedDate": "2020-11-21T08:38:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk4OTYwNQ==", "url": "https://github.com/apache/geode/pull/5766#discussion_r532989605", "bodyText": "There is a typo: \"recievers\"", "author": "alb3rtobr", "createdAt": "2020-12-01T00:19:29Z", "path": "geode-docs/topologies_and_comm/multi_site_configuration/setting_up_a_multisite_system.html.md.erb", "diffHunk": "@@ -387,3 +387,51 @@ boglesbymac(ny-3:88715)<v4>:36808 | 5371 | 5            |[\"boglesbymac(ln-1:8865\n boglesbymac(ny-4:88724)<v5>:52993 | 5247 | 6            |[\"boglesbymac(ln-1:88651)<v2>:48277\",\"boglesbymac(ln-4:88681)<v5>:42784\",\"boglesbymac(ln-2:88662)<v3>:12796\",\"boglesbymac(ln-3:88672)<v4>:43675\"]\n ```\n \n+### <a id=\"setting_up_a_multisite_system__section_E3A44F85359046C7ADD12861D261637C\" class=\"no-quick-link\"></a>Configuring just one IP address and port to access all gateway receivers in a site\n+\n+There could be WAN deployments in which we do not want to expose the IP address and port of every gateway receiver to the other site but instead expose just one IP address and port for all gateway receivers. This way, the internal topology of the site is hidden to the other site. This case is quite common in cloud deployments, in which a reverse proxy/load balancer distributes incoming requests to the site (in our case, replication requests) among the available servers (in our case, gateway receivers).\n+\n+<%=vars.product_name%> supports this configuration by means of a particular use of the hostname-for-senders, start-port and end-port parameters of the gateway receiver.\n+\n+In order to configure a WAN deployment that hides the gateway receivers behind the same IP address and port, all the gateway receivers must have the same value for the hostname-for-senders parameter (the hostname or IP address to be used by clients to access them) and the same value in the start-port and end-port parameters (the port to be used by clients to access them).\n+\n+As an example, a deployment in which all gateway receivers of a site are accessed via the \"gateway1.mycompany.com\" hostname and port \"1971\", every gateway receiver in that site must be configured as follows:\n+\n+``` pre\n+gfsh> create gateway-receiver --hostname-for-senders=\"gateway1.mycompany.com\" --start-port=1971 --end-port=1971\n+```\n+\n+The following output shows how the receiver side would look like after this configuration if 4 gateway recievers were configured:", "originalCommit": "68085e0f55700f0eeae3d1906e0696be658a1520", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzE5NzM2NA==", "url": "https://github.com/apache/geode/pull/5766#discussion_r533197364", "bodyText": "Good catch, Alberto! Thanks.", "author": "albertogpz", "createdAt": "2020-12-01T09:15:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk4OTYwNQ=="}], "type": "inlineReview"}, {"oid": "531e42a377f9ddc46fbc6659c275b4884db56cf6", "url": "https://github.com/apache/geode/commit/531e42a377f9ddc46fbc6659c275b4884db56cf6", "message": "GEODE-8738: Fix typo found in review", "committedDate": "2020-12-01T09:11:20Z", "type": "commit"}]}