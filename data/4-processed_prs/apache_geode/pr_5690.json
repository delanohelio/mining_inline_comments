{"pr_number": 5690, "pr_title": "GEODE-8675: Log at query start when <trace> is enabled", "pr_createdAt": "2020-10-29T23:53:11Z", "pr_url": "https://github.com/apache/geode/pull/5690", "timeline": [{"oid": "d8fc2e12ec02f8b3deeb063396d0060f5e8f3ed7", "url": "https://github.com/apache/geode/commit/d8fc2e12ec02f8b3deeb063396d0060f5e8f3ed7", "message": "GEODE-8675: Log at query start when <trace> is enabled\n\n- Log the query string when query trace begins\n- Update docs to reflect new logging\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-10-29T23:59:30Z", "type": "commit"}, {"oid": "d8fc2e12ec02f8b3deeb063396d0060f5e8f3ed7", "url": "https://github.com/apache/geode/commit/d8fc2e12ec02f8b3deeb063396d0060f5e8f3ed7", "message": "GEODE-8675: Log at query start when <trace> is enabled\n\n- Log the query string when query trace begins\n- Update docs to reflect new logging\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-10-29T23:59:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyODk4OA==", "url": "https://github.com/apache/geode/pull/5690#discussion_r515428988", "bodyText": "why would you not use Logger defined \n  \n    \n      geode/geode-core/src/main/java/org/apache/geode/cache/query/internal/DefaultQuery.java\n    \n    \n         Line 69\n      in\n      d8fc2e1\n    \n    \n    \n    \n\n        \n          \n           private static final Logger logger = LogService.getLogger();", "author": "kohlmu-pivotal", "createdAt": "2020-10-31T00:04:20Z", "path": "geode-core/src/main/java/org/apache/geode/cache/query/internal/DefaultQuery.java", "diffHunk": "@@ -783,6 +783,7 @@ public QueryObserver startTrace() {\n       } else {\n         queryObserver = qo;\n       }\n+      this.cache.getLogger().info(\"Starting query: \" + this.queryString);", "originalCommit": "d8fc2e12ec02f8b3deeb063396d0060f5e8f3ed7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQ0ODUwOA==", "url": "https://github.com/apache/geode/pull/5690#discussion_r515448508", "bodyText": "I was using the same pattern found elsewhere in the class (specifically in the two endTrace() methods) for consistency. The defined logger appears to not be used at all in the class as things stand, but if it's better to do so, I can replace all calls to this.cache.getLogger() in the class with logger.", "author": "DonalEvans", "createdAt": "2020-10-31T03:13:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyODk4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY3OTQ4Ng==", "url": "https://github.com/apache/geode/pull/5690#discussion_r515679486", "bodyText": "Interesting pattern indeed. Wonder why the Cache would be exposing it's logger like that.\nIf you want, you could always set the logger in the constructor.\nWonder if there is a real reason why the cache is exposing it's logger this way.\nBut thank you for amending.", "author": "kohlmu-pivotal", "createdAt": "2020-11-01T22:17:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQyODk4OA=="}], "type": "inlineReview"}, {"oid": "bc246ad82955ab92326219322e71e01d1731b3d1", "url": "https://github.com/apache/geode/commit/bc246ad82955ab92326219322e71e01d1731b3d1", "message": "Apply review feedback\n\nAuthored-by: Donal Evans <doevans@vmware.com>", "committedDate": "2020-11-02T18:11:04Z", "type": "commit"}]}