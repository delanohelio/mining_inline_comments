{"pr_number": 5413, "pr_title": "GEODE-8389: reconnect attempt fails due to distribution configuration\u2026", "pr_createdAt": "2020-07-29T23:12:21Z", "pr_url": "https://github.com/apache/geode/pull/5413", "timeline": [{"oid": "438ff621ae3115886d823e75ed89070b747c1627", "url": "https://github.com/apache/geode/commit/438ff621ae3115886d823e75ed89070b747c1627", "message": "GEODE-8389: reconnect attempt fails due to distribution configuration validation checks\n\ndisregard internal property names when checking for equality.  These\nproperties are used to carry information that does not come from\ngemfire.properties.", "committedDate": "2020-07-29T23:10:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjY3MDgwMQ==", "url": "https://github.com/apache/geode/pull/5413#discussion_r462670801", "bodyText": "could we get configuration properties from the DistributionConfig interface's fields using reflection to build this/these list(s)?", "author": "luissson", "createdAt": "2020-07-30T00:51:19Z", "path": "geode-core/src/main/java/org/apache/geode/distributed/internal/DistributionConfigImpl.java", "diffHunk": "@@ -1544,12 +1548,32 @@ void setApiProps(Properties apiProps) {\n     }\n   }\n \n-  private static boolean specialPropName(String propName) {\n-    return propName.equalsIgnoreCase(CLUSTER_SSL_ENABLED)\n-        || propName.equals(SECURITY_PEER_AUTH_INIT) || propName.equals(SECURITY_PEER_AUTHENTICATOR)\n-        || propName.equals(LOG_WRITER_NAME) || propName.equals(DS_CONFIG_NAME)\n-        || propName.equals(SECURITY_LOG_WRITER_NAME) || propName.equals(LOG_OUTPUTSTREAM_NAME)\n-        || propName.equals(SECURITY_LOG_OUTPUTSTREAM_NAME);\n+  /**\n+   * internal configuration properties not in ConfigurationProperties but that may be in\n+   * properties fed to a DistributionConfigImpl constructor.\n+   */\n+  static Set<String> internalPropertyNames = new HashSet<>(Arrays.asList(\n+      LOG_WRITER_NAME, DS_CONFIG_NAME,\n+      DS_QUORUM_CHECKER_NAME, DS_RECONNECTING_NAME,\n+      SECURITY_LOG_WRITER_NAME, LOG_OUTPUTSTREAM_NAME,\n+      SECURITY_LOG_OUTPUTSTREAM_NAME));\n+", "originalCommit": "438ff621ae3115886d823e75ed89070b747c1627", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "49b884f5f54d3e8a306f7c8415dcb15d8e30ddc5", "url": "https://github.com/apache/geode/commit/49b884f5f54d3e8a306f7c8415dcb15d8e30ddc5", "message": "implementing Rene's idea and fixing unit test & PMD failures", "committedDate": "2020-07-30T18:17:06Z", "type": "commit"}]}