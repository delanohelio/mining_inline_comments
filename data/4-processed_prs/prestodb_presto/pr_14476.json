{"pr_number": 14476, "pr_title": "Add release notes for 0.235", "pr_createdAt": "2020-05-04T21:58:59Z", "pr_url": "https://github.com/prestodb/presto/pull/14476", "timeline": [{"oid": "efe9c0422166ba373421ef11a3e562fd194d1b34", "url": "https://github.com/prestodb/presto/commit/efe9c0422166ba373421ef11a3e562fd194d1b34", "message": "Add release notes for 0.235", "committedDate": "2020-05-11T23:31:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzM4MzkzOA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r423383938", "bodyText": "For #14352 - how about\nAdd an Internationalization Functions plugin plus MYANMAR_FONT_ENCODING and MYANMAR_NORMALIZE_UNICODE to support working with Burmese text", "author": "nlagrow", "createdAt": "2020-05-11T23:51:50Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,61 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add ``scale_qdigest`` function to scale a ``qdigest`` to a new weight\n+", "originalCommit": "efe9c0422166ba373421ef11a3e562fd194d1b34", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9d9cd26bb3402f2f598e2e6d28ba6656dab24b2c", "url": "https://github.com/prestodb/presto/commit/9d9cd26bb3402f2f598e2e6d28ba6656dab24b2c", "message": "Add release notes for 0.235", "committedDate": "2020-05-12T18:14:45Z", "type": "forcePushed"}, {"oid": "2cf4a3f01377183bf057e1a245183fdcfb8f12c1", "url": "https://github.com/prestodb/presto/commit/2cf4a3f01377183bf057e1a245183fdcfb8f12c1", "message": "Add release notes for 0.235", "committedDate": "2020-05-12T18:18:02Z", "type": "forcePushed"}, {"oid": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "url": "https://github.com/prestodb/presto/commit/65a11444a0c3d618b6f511d30408c1a7aadccb3f", "message": "Add release notes for 0.235", "committedDate": "2020-05-12T20:57:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMjI0Ng==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424032246", "bodyText": "Need some clarification / short description what the error is. Does it cause query failure? Avoid \"analysis phase\" if possible since user does not need to understand that, as user sees \"query failure\" or \"incorrect result\", etc.", "author": "caithagoras", "createdAt": "2020-05-12T21:03:37Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA1ODkxOA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424058918", "bodyText": "Let's just remove this one. It's very hard to describe. And it's not necessarily tied to certain user facing features. Or maybe \"fix query failure with NullPointerException during analysis. :issue:14340\".", "author": "rongrong", "createdAt": "2020-05-12T22:00:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMjI0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4NTY4Mg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424085682", "bodyText": "I'll just remove it.", "author": "tdcmeehan", "createdAt": "2020-05-12T23:12:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMjI0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzAwMQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424033001", "bodyText": "What about\nAdd support for pre-checking if bytecode size is within limits.", "author": "caithagoras", "createdAt": "2020-05-12T21:05:10Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0MTQ3MA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424041470", "bodyText": "I think that's still too low level for users.  Maybe:\nFix issue where queries with large filters in the where clause would cause full GCs.  Now such queries will fail quickly with <expected exception>", "author": "rschlussel", "createdAt": "2020-05-12T21:22:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4Njc2MA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424086760", "bodyText": "Technically, it may not cause full gc.  How about\n* Fix issue where queries with large filters in the where clause would cause excessive memory usage.  Now such queries will fail quickly with ``GENERATED_BYTECODE_TOO_LARGE``.", "author": "tdcmeehan", "createdAt": "2020-05-12T23:16:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzAwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzI1Mw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424033253", "bodyText": "Did it cause query failure?", "author": "caithagoras", "createdAt": "2020-05-12T21:05:36Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4NTkyMw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424085923", "bodyText": "Yes", "author": "tdcmeehan", "createdAt": "2020-05-12T23:13:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzI1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4NzYyMg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424087622", "bodyText": "Yes. Queries were failing.", "author": "jainxrohit", "createdAt": "2020-05-12T23:19:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzI1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI5MTcwNg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r425291706", "bodyText": "@tdcmeehan Shouldn't this be hive connector change?", "author": "jainxrohit", "createdAt": "2020-05-14T16:59:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzI1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzQwNg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424033406", "bodyText": "missing \".\" at the end of the line.", "author": "caithagoras", "createdAt": "2020-05-12T21:05:52Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzg4Nw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424033887", "bodyText": "Add configuration properties ...\n\nAlso, default value may be omitted.", "author": "caithagoras", "createdAt": "2020-05-12T21:06:49Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NTcwNw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424045707", "bodyText": "Put the relevant config properties in the bullet where we say support is added (bullets 2 and 3 i think)", "author": "rschlussel", "createdAt": "2020-05-12T21:31:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzMzg4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNjI5OQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424036299", "bodyText": "Use the structure recommended by the release notes wiki. Also, is there a corresponding session property?\nAdd support for limiting the total number of buffers per optimized repartitioning operator. The limit can be set by the configuration property ``driver.max-page-partitioning-buffer-count``.\n\nDefault value can be omitted.", "author": "caithagoras", "createdAt": "2020-05-12T21:11:36Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4Nzc5NA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424087794", "bodyText": "Looks like there's no session property.\nCC: @yingsu00", "author": "tdcmeehan", "createdAt": "2020-05-12T23:19:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNjI5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzNjg3NQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424036875", "bodyText": "Remove \"for druid connector\" as the section header has already made that clear.", "author": "caithagoras", "createdAt": "2020-05-12T21:12:48Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODQ5Mg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424038492", "bodyText": "According to #14357, I think this should be\nFix an issue where `distinct` is not respected in count aggregation\n\n@zhenxiao", "author": "caithagoras", "createdAt": "2020-05-12T21:15:59Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc5NTk4NA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424795984", "bodyText": "CC: @zhenxiao", "author": "tdcmeehan", "createdAt": "2020-05-13T23:55:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDc5NjcwNg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424796706", "bodyText": "this is another commit.\nYes, we could add:\nFix an issue where distinct is not respected in count aggregation\nWe also need:\nFix an issue when Druid connector scan segments", "author": "zhenxiao", "createdAt": "2020-05-13T23:57:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODQ5Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODczOQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424038739", "bodyText": "nit: multi-HMS", "author": "caithagoras", "createdAt": "2020-05-12T21:16:34Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes\n+____________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to PrestoS3FileSystemStats.\n+* Add table property ``preferred_ordering_columns`` to support writing sorted files for unbucketed table.\n+* Add native Parquet Writer for Presto.\n+* Add support for impersonation access by using HMS delegation token.\n+* Add support for multi HMS instances load balancing and breakdown metrics by HMS hosts.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzODkyMg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424038922", "bodyText": "``PrestoS3FileSystemStats``", "author": "caithagoras", "createdAt": "2020-05-12T21:17:01Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes\n+____________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to PrestoS3FileSystemStats.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzOTE2MQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424039161", "bodyText": "Add support for pushing down ...", "author": "caithagoras", "createdAt": "2020-05-12T21:17:32Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes\n+____________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to PrestoS3FileSystemStats.\n+* Add table property ``preferred_ordering_columns`` to support writing sorted files for unbucketed table.\n+* Add native Parquet Writer for Presto.\n+* Add support for impersonation access by using HMS delegation token.\n+* Add support for multi HMS instances load balancing and breakdown metrics by HMS hosts.\n+* Add support in file status cache to cache all tables. This could be enabled by setting ``hive.file-status-cache-tables`` to ``*``.\n+\n+Pinot Changes\n+_____________\n+* Add feature to push down distinct count query to Pinot on a best-effort basis.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAzOTMzNQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424039335", "bodyText": "... by setting configuration property ``hive.file- ...", "author": "caithagoras", "createdAt": "2020-05-12T21:17:55Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes\n+____________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to PrestoS3FileSystemStats.\n+* Add table property ``preferred_ordering_columns`` to support writing sorted files for unbucketed table.\n+* Add native Parquet Writer for Presto.\n+* Add support for impersonation access by using HMS delegation token.\n+* Add support for multi HMS instances load balancing and breakdown metrics by HMS hosts.\n+* Add support in file status cache to cache all tables. This could be enabled by setting ``hive.file-status-cache-tables`` to ``*``.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0MzQ5Mw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424043493", "bodyText": "This note is a bit confusing to me. Would the following be correct?\nAdd optimization for filters and projections to extract common subexpressions \nand evaluate them only once.  This optimization can be turned off by the \nsession property ``optimize_common_sub_expressions``.", "author": "rschlussel", "createdAt": "2020-05-12T21:26:34Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA1NjY5Nw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424056697", "bodyText": "This is correct. It removes some nuances specific to the implementation, but I guess that's what makes it more readable. I guess the only thing really matters is that we only extract cse among projections in the same project operator, and cse among the same filter (but not cross filter and project). If you could help me phrase that it would be awesome. Otherwise your description is good. Thanks!", "author": "rongrong", "createdAt": "2020-05-12T21:55:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0MzQ5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MDU4OA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424090588", "bodyText": "Is there a Github issue I could reference that someone could click into to understand that?  I'm not sure it's worth it or necessary to add the additional distinction you mention above in the release notes, but it would make a good read in a Github issue.", "author": "tdcmeehan", "createdAt": "2020-05-12T23:28:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0MzQ5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDQwOQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424044409", "bodyText": "is there any documentation about how/why someone would configure this?", "author": "rschlussel", "createdAt": "2020-05-12T21:28:35Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MDcwMg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424090702", "bodyText": "CC: @yingsu00  any thoughts on that?", "author": "tdcmeehan", "createdAt": "2020-05-12T23:29:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDQwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk4MzQ2NQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r425983465", "bodyText": "@tdcmeehan @rschlussel This number should be set large enough so that no exceptions can occur. I will add documentation to it shortly.", "author": "yingsu00", "createdAt": "2020-05-15T18:43:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDQwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjAyNjU3OA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r426026578", "bodyText": "@tdcmeehan @rschlussel The PR to add documentation for this property is here #14542\nBut it seems like https://prestodb.io/docs/current/admin/properties.html only contains most important config properties. I'm not sure if this one is important enough. What do you think?", "author": "yingsu00", "createdAt": "2020-05-15T20:17:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDQwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA4MjUzOA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r426082538", "bodyText": "@rschlussel already approved so let's just follow up with the documentation in a separate thread.  I don't think we need to hold up release notes for it.", "author": "tdcmeehan", "createdAt": "2020-05-15T23:05:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDQwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDc2Ng==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424044766", "bodyText": "should this be in hive connector changes?", "author": "rschlussel", "createdAt": "2020-05-12T21:29:25Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5MDc4NQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424090785", "bodyText": "Good catch, thanks.", "author": "tdcmeehan", "createdAt": "2020-05-12T23:29:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NDc2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NjI2NQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424046265", "bodyText": "what kinds of things can be pushed down?  if this is a new feature, then we probably don't need the note about count distinct pushdown", "author": "rschlussel", "createdAt": "2020-05-12T21:32:42Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5NDczNg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424094736", "bodyText": "CC: @zhenxiao this is based on the original:\nSession property, druid.pushdown, it added, to control whether to pushdown all query processing to druid.", "author": "tdcmeehan", "createdAt": "2020-05-12T23:42:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NjI2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA5NjU0MQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424096541", "bodyText": "my bad, should be:\nAdd session property druid.compute-pushdown-enabled to pushdown all computation to druid for Presto Druid connector", "author": "zhenxiao", "createdAt": "2020-05-12T23:47:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NjI2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NzAyNQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424047025", "bodyText": "This should go after all the connector changes", "author": "rschlussel", "createdAt": "2020-05-12T21:34:28Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NzExOQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424047119", "bodyText": "Should be called Druid Connector Changes", "author": "rschlussel", "createdAt": "2020-05-12T21:34:43Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NzQxOA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424047418", "bodyText": "Hive Connector Changes -- also should go with the other connectors", "author": "rschlussel", "createdAt": "2020-05-12T21:35:23Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0NzUzNw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424047537", "bodyText": "merge this with the  \"Pinot Connector Changes\" above", "author": "rschlussel", "createdAt": "2020-05-12T21:35:42Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes\n+______________________________\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Hive Changes\n+____________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to PrestoS3FileSystemStats.\n+* Add table property ``preferred_ordering_columns`` to support writing sorted files for unbucketed table.\n+* Add native Parquet Writer for Presto.\n+* Add support for impersonation access by using HMS delegation token.\n+* Add support for multi HMS instances load balancing and breakdown metrics by HMS hosts.\n+* Add support in file status cache to cache all tables. This could be enabled by setting ``hive.file-status-cache-tables`` to ``*``.\n+\n+Pinot Changes", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA0Nzk5Mg==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424047992", "bodyText": "I think this can go under \"general changes\"", "author": "rschlussel", "createdAt": "2020-05-12T21:36:45Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add configs ``pinot.infer-date-type-in-schema`` and ``pinot.infer-timestamp-type-in-schema`` to switch on/off the type conversion. Default is OFF.\n+\n+Verifier Changes\n+________________\n+* Fix an issue where resubmitted queries always fail.\n+* Add support for verifying ``SELECT`` queries that produce columns of ``TIME``, ``TIMESTAMP WITH TIME ZONE``, or ``DECIMAL`` types, or columns of structured types with those types.\n+* Add support for specifying table properties override for temporary Verifier tables, through configuration property ``control.table-properties`` and ``test.table-properties``.\n+* Add support to output verification results for failures due to Verifier internal errors.\n+* Add support to skip teardown queries in case control and test queries succeeds but verification fails. This can be enabled by configuration property ``smart-teardown``, which replaces ``run-teardown-on-result-mismatch``.\n+\n+Druid Changes\n+_____________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.pushdown`` session property.\n+* Add count distinct pushdown for druid connector.\n+\n+Geospatial Computation Changes", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDA4NjY0NQ==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r424086645", "bodyText": "Instead of returned stats - lets just saw query stats", "author": "mayankgarg1990", "createdAt": "2020-05-12T23:15:59Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,64 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix error in analysis phase.\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Add the ability to pre-check method bytecode size is within limits.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for page projection and filter by extract and compute common subexpressions among all projections first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add config property driver.max-page-partitioning-buffer-count, to limit the total number of buffers per optimized repartitioning operator. The default value is 1,000,000.\n+* Add peak task total memory to returned stats.", "originalCommit": "65a11444a0c3d618b6f511d30408c1a7aadccb3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "374de7dabfb99e238ab75b1a63ec2d66615ff619", "url": "https://github.com/prestodb/presto/commit/374de7dabfb99e238ab75b1a63ec2d66615ff619", "message": "Add release notes for 0.235", "committedDate": "2020-05-12T23:42:53Z", "type": "forcePushed"}, {"oid": "0ea5d4cc62fcdfcac19b693d431bc6ff36a8f191", "url": "https://github.com/prestodb/presto/commit/0ea5d4cc62fcdfcac19b693d431bc6ff36a8f191", "message": "Add release notes for 0.235", "committedDate": "2020-05-13T23:58:42Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4NjI5Nw==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r425186297", "bodyText": "nit: put this with the other \"fix\"es", "author": "rschlussel", "createdAt": "2020-05-14T14:35:27Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,56 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Fix issue where queries with large filters in the where clause would cause excessive memory usage.  Now such queries will fail quickly with ``GENERATED_BYTECODE_TOO_LARGE``.", "originalCommit": "0ea5d4cc62fcdfcac19b693d431bc6ff36a8f191", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4Njk0OA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r425186948", "bodyText": "nit: this one's technically an improvement, so I guess put it above the previous thing.", "author": "rschlussel", "createdAt": "2020-05-14T14:36:22Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,56 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Fix issue where queries with large filters in the where clause would cause excessive memory usage.  Now such queries will fail quickly with ``GENERATED_BYTECODE_TOO_LARGE``.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for filters and projections to extract common subexpressions and evaluate them only once.  This optimization can be turned off by the session property ``optimize_common_sub_expressions``.", "originalCommit": "0ea5d4cc62fcdfcac19b693d431bc6ff36a8f191", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE4ODEwOA==", "url": "https://github.com/prestodb/presto/pull/14476#discussion_r425188108", "bodyText": "nit: I think this isn't needed because all of the query processing pushdown is new.", "author": "rschlussel", "createdAt": "2020-05-14T14:37:56Z", "path": "presto-docs/src/main/sphinx/release/release-0.235.rst", "diffHunk": "@@ -0,0 +1,56 @@\n+=============\n+Release 0.235\n+=============\n+\n+General Changes\n+_______________\n+* Fix named queries where its output does not match its column list (:issue:`14333`).\n+* Fix ZSTD compression issue with zero row file for missing buckets.\n+* Improve performance of ``UNNEST``.\n+* Improve ``CREATE FUNCTION`` to allow parameter type list and return type to have a length up to 30k characters.\n+* Fix issue where queries with large filters in the where clause would cause excessive memory usage.  Now such queries will fail quickly with ``GENERATED_BYTECODE_TOO_LARGE``.\n+* Add support for ``SHOW CREATE FUNCTION``.\n+* Add optimization for filters and projections to extract common subexpressions and evaluate them only once.  This optimization can be turned off by the session property ``optimize_common_sub_expressions``.\n+* Add soft memory limit configuration properties. Soft memory limits are default memory limits given to each query that can be overridden using session properties up to the hard limit set by the existing configuration properties. Available soft memory limit configuration properties are ``query.soft-max-memory-per-node``, ``query.soft-max-total-memory-per-node``, ``query.soft-max-total-memory``, and ``query.soft-max-memory``.\n+* Add check to disallow invoking SQL functions in SQL function body.\n+* Add support for limiting the total number of buffers per optimized repartitioning operator. The limit can be set by the configuration property ``driver.max-page-partitioning-buffer-count``.\n+* Add peak task total memory to query stats.\n+* Add :func:`scale_qdigest` function to scale a ``qdigest`` to a new weight.\n+* Add :func:`myanmar_font_encoding` and :func:`myanmar_normalize_unicode` to support working with Burmese text\n+* Add support for :func:`ST_AsText` to accept Spherical Geographies.\n+* Add support for :func:`ST_Centroid` to accept Spherical Geography Points and MultiPoints.\n+\n+Pinot Connector Changes\n+_______________________\n+* Add support for mapping Pinot ``BYTES`` data type to Presto ``VARBINARY`` type.\n+* Add support for mapping Pinot time fields with days since epoch value to Presto ``DATE`` type via the system property ``pinot.infer-date-type-in-schema``.\n+* Add support for mapping Pinot time fields with milliseconds since epoch value to Presto ``TIMESTAMP`` type via the system prpoerty ``pinot.infer-timestamp-type-in-schema``.\n+* Add Pinot Field type in to column comment field shown as ``DIMENSION``, ``METRIC``, ``TIME``, ``DATETIME``, to provide more information.\n+* Add support for pushing down distinct count query to Pinot on a best-effort basis.\n+* Add support for new Pinot Routing Table APIs.\n+\n+Hive Connector Changes\n+______________________\n+* Fix a bug in Hive split calculation which affects Parquet reader in few corner cases.\n+* Fix AWS client metric reporting when using S3 select.\n+* Add AWS client retry pause time metrics to ``PrestoS3FileSystemStats``.\n+* Add table property ``preferred_ordering_columns`` to support writing sorted files for unbucketed table.\n+* Add native Parquet Writer for Presto.\n+* Add support for impersonation access by using HMS delegation token.\n+* Add support for multi-HMS instances load balancing and breakdown metrics by HMS hosts.\n+* Add support in file status cache to cache all tables. This could be enabled by setting the configuration property ``hive.file-status-cache-tables`` to ``*``.\n+* Add configuration property ``hive.orc-compression-codec`` to override ``hive.compression-codec`` for ORC and DWRF formats. If specified, ORC and DWRF files are compressed using this codec. RC, Parquet, and other files are compressed using hive.compression-codec.\n+\n+Druid Connector Changes\n+_______________________\n+* Fix druid connector segment scan.\n+* Add support for query processing pushdown via the ``druid.compute-pushdown-enabled`` configuration property.\n+* Add support for count distinct pushdown.", "originalCommit": "0ea5d4cc62fcdfcac19b693d431bc6ff36a8f191", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c52f13d13c67124642af7fe3574f701328165571", "url": "https://github.com/prestodb/presto/commit/c52f13d13c67124642af7fe3574f701328165571", "message": "Add release notes for 0.235", "committedDate": "2020-05-14T16:54:31Z", "type": "forcePushed"}, {"oid": "3db147855d085cf1130c71b41c5d1c1f67d1876b", "url": "https://github.com/prestodb/presto/commit/3db147855d085cf1130c71b41c5d1c1f67d1876b", "message": "Add release notes for 0.235", "committedDate": "2020-05-14T17:06:20Z", "type": "forcePushed"}, {"oid": "4554cfa1ca0f6ce6133dc1ced8f16b2db6258650", "url": "https://github.com/prestodb/presto/commit/4554cfa1ca0f6ce6133dc1ced8f16b2db6258650", "message": "Add release notes for 0.235", "committedDate": "2020-05-16T00:16:36Z", "type": "commit"}, {"oid": "4554cfa1ca0f6ce6133dc1ced8f16b2db6258650", "url": "https://github.com/prestodb/presto/commit/4554cfa1ca0f6ce6133dc1ced8f16b2db6258650", "message": "Add release notes for 0.235", "committedDate": "2020-05-16T00:16:36Z", "type": "forcePushed"}]}