{"pr_number": 15143, "pr_title": "Add release notes for 0.241", "pr_createdAt": "2020-09-09T06:26:07Z", "pr_url": "https://github.com/prestodb/presto/pull/15143", "timeline": [{"oid": "c07dab69838e0f4563a45019c6d31d8652578e09", "url": "https://github.com/prestodb/presto/commit/c07dab69838e0f4563a45019c6d31d8652578e09", "message": "Add release notes for 0.241", "committedDate": "2020-09-09T20:58:23Z", "type": "forcePushed"}, {"oid": "4e20b7270b55631d4de507a666e5ac982c4bcafc", "url": "https://github.com/prestodb/presto/commit/4e20b7270b55631d4de507a666e5ac982c4bcafc", "message": "Add release notes for 0.241", "committedDate": "2020-09-11T06:17:14Z", "type": "forcePushed"}, {"oid": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "url": "https://github.com/prestodb/presto/commit/5c871631d33ca1a26fe8e8cc7e010c248d711ede", "message": "Add release notes for 0.241", "committedDate": "2020-09-11T22:12:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjEwNQ==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488232105", "bodyText": "line needs to end with period", "author": "ajaygeorge", "createdAt": "2020-09-14T21:32:05Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMzY4MQ==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488233681", "bodyText": "does function classification_precision need to written using :func: ?", "author": "ajaygeorge", "createdAt": "2020-09-14T21:35:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjEwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjI3Mw==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488232273", "bodyText": "counting -> accounting reads better?", "author": "ajaygeorge", "createdAt": "2020-09-14T21:32:28Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239\n+* Add dynamic filtering and bucket pruning support for inner join and semi join, which can avoid full table scan on the probe side of broadcast joins or collocated joins when the build side is small. This can be enabled with the ``experimental.enable-dynamic-filtering`` configuration property and ``enable_dynamic_filtering`` system session property. The build side join key space size can be tuned by the ``experimental.dynamic-filtering-max-per-driver-row-count`` and ``experimental.dynamic-filtering-max-per-driver-size`` configuration properties and ``dynamic_filtering_max_per_driver_row_count`` and ``dynamic_filtering_max_per_driver_size`` session properties. Currently, only Hive connector can benefit from the feature.\n+* Add new warning message for ``UNION`` queries without ``ALL`` or ``DISTINCT`` keywords.\n+* Downgrade the ZSTD JNI compressor version to resolve the frequent excessive GC events introduced in version 0.238.\n+\n+Security Changes\n+________________\n+* Implement REST endpoint authorization in Presto. See :doc:`/security/authorization`.\n+\n+JDBC Changes\n+____________\n+* Add support for JDBC ``ResultSet.getStatement``.\n+* Add support for Oracle JDBC connections.\n+\n+Hive Changes\n+____________\n+* Fix several memory counting bugs in ``OrcRecordReader`` and ``StreamReader``'s.", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzODQ1Mg==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488238452", "bodyText": "What is the trailing 's, remove?", "author": "caithagoras", "createdAt": "2020-09-14T21:46:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA0MjE1MQ==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r494042151", "bodyText": "What is the trailing 's, remove?\n\nStreamReader is an interface. There're several implementations and the 's is plural form. I used plural form because the fixes were on several StreamReaders. Let's consult @aweisberg who is native speaker and runs the blog. Ariel, which way is better according to your opinion?", "author": "yingsu00", "createdAt": "2020-09-24T05:10:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjI3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA1MTYxOA==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r494051618", "bodyText": "I removed the ' and kept the s. So now it will look like StreamReaders", "author": "yingsu00", "createdAt": "2020-09-24T05:43:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzMjI3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzNzY4NQ==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488237685", "bodyText": "Remove \"JDBC\", because the section title always states \"JDBC\":\nAdd support for ``ResultSet.getStatement``", "author": "caithagoras", "createdAt": "2020-09-14T21:45:09Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239\n+* Add dynamic filtering and bucket pruning support for inner join and semi join, which can avoid full table scan on the probe side of broadcast joins or collocated joins when the build side is small. This can be enabled with the ``experimental.enable-dynamic-filtering`` configuration property and ``enable_dynamic_filtering`` system session property. The build side join key space size can be tuned by the ``experimental.dynamic-filtering-max-per-driver-row-count`` and ``experimental.dynamic-filtering-max-per-driver-size`` configuration properties and ``dynamic_filtering_max_per_driver_row_count`` and ``dynamic_filtering_max_per_driver_size`` session properties. Currently, only Hive connector can benefit from the feature.\n+* Add new warning message for ``UNION`` queries without ``ALL`` or ``DISTINCT`` keywords.\n+* Downgrade the ZSTD JNI compressor version to resolve the frequent excessive GC events introduced in version 0.238.\n+\n+Security Changes\n+________________\n+* Implement REST endpoint authorization in Presto. See :doc:`/security/authorization`.\n+\n+JDBC Changes\n+____________\n+* Add support for JDBC ``ResultSet.getStatement``.", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzODE4MQ==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488238181", "bodyText": "... to ``QueryCompletedEvent``, and remove them from ...", "author": "caithagoras", "createdAt": "2020-09-14T21:46:16Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239\n+* Add dynamic filtering and bucket pruning support for inner join and semi join, which can avoid full table scan on the probe side of broadcast joins or collocated joins when the build side is small. This can be enabled with the ``experimental.enable-dynamic-filtering`` configuration property and ``enable_dynamic_filtering`` system session property. The build side join key space size can be tuned by the ``experimental.dynamic-filtering-max-per-driver-row-count`` and ``experimental.dynamic-filtering-max-per-driver-size`` configuration properties and ``dynamic_filtering_max_per_driver_row_count`` and ``dynamic_filtering_max_per_driver_size`` session properties. Currently, only Hive connector can benefit from the feature.\n+* Add new warning message for ``UNION`` queries without ``ALL`` or ``DISTINCT`` keywords.\n+* Downgrade the ZSTD JNI compressor version to resolve the frequent excessive GC events introduced in version 0.238.\n+\n+Security Changes\n+________________\n+* Implement REST endpoint authorization in Presto. See :doc:`/security/authorization`.\n+\n+JDBC Changes\n+____________\n+* Add support for JDBC ``ResultSet.getStatement``.\n+* Add support for Oracle JDBC connections.\n+\n+Hive Changes\n+____________\n+* Fix several memory counting bugs in ``OrcRecordReader`` and ``StreamReader``'s.\n+* Add procedure ``system.sync_partition_metadata()`` to synchronize the partitions in the metastore with the partitions that are physically in the file system.\n+* Add support for direct recursive file listings in PrestoS3FileSystem.\n+* Add support for non-Hive types to Hive views. This support had been removed in 0.233. If a view uses an unsupported type for any columns, only a single dummy column will be saved in the metastore.\n+* Add support for pushing dereferences into Parquet table scan, so that only the required nested column is read when other projected nested columns are in the same base column. This can be enabled with the ``hive.enable-parquet-dereference-pushdown`` Hive configuration property and ``parquet_batch_reader_verification_enabled`` Hive session property.\n+\n+Druid Changes\n+_____________\n+* Add support for data ingestion. Three modes are supported: ``INSERT INTO SELECT``, ``CREATE TABLE AS``, and from local or HDFS folders.\n+\n+Oracle Changes\n+______________\n+* Add Oracle connector.\n+\n+Verifier Changes\n+________________\n+* Fix an issue during determinism analysis that queries with ``LIMIT`` clause are not identified as non-deterministic when a rerun of the control query fails.\n+* Add support to allow multiple control and test clusters.\n+\n+SPI Changes\n+___________\n+* Add ``StageStatistics`` and ``OperatorStatistics`` to ``QueryCompletedEvent`` and remove stage and operator statistics from ``QueryStatistics``.", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODIzODcyMw==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488238723", "bodyText": "Add double back quotes\n``PrestoS3FileSystem``.", "author": "caithagoras", "createdAt": "2020-09-14T21:47:34Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239\n+* Add dynamic filtering and bucket pruning support for inner join and semi join, which can avoid full table scan on the probe side of broadcast joins or collocated joins when the build side is small. This can be enabled with the ``experimental.enable-dynamic-filtering`` configuration property and ``enable_dynamic_filtering`` system session property. The build side join key space size can be tuned by the ``experimental.dynamic-filtering-max-per-driver-row-count`` and ``experimental.dynamic-filtering-max-per-driver-size`` configuration properties and ``dynamic_filtering_max_per_driver_row_count`` and ``dynamic_filtering_max_per_driver_size`` session properties. Currently, only Hive connector can benefit from the feature.\n+* Add new warning message for ``UNION`` queries without ``ALL`` or ``DISTINCT`` keywords.\n+* Downgrade the ZSTD JNI compressor version to resolve the frequent excessive GC events introduced in version 0.238.\n+\n+Security Changes\n+________________\n+* Implement REST endpoint authorization in Presto. See :doc:`/security/authorization`.\n+\n+JDBC Changes\n+____________\n+* Add support for JDBC ``ResultSet.getStatement``.\n+* Add support for Oracle JDBC connections.\n+\n+Hive Changes\n+____________\n+* Fix several memory counting bugs in ``OrcRecordReader`` and ``StreamReader``'s.\n+* Add procedure ``system.sync_partition_metadata()`` to synchronize the partitions in the metastore with the partitions that are physically in the file system.\n+* Add support for direct recursive file listings in PrestoS3FileSystem.", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI0MDMyMA==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r488240320", "bodyText": "this item is a performance improve, so the line should starts with \"Improve\".\n\nImprove performance of broadcast and collocated join by supporting dynamic filtering and bucket pruning for inner and semi joins.\n\n\nthe item is way too long. Remove every after \"The build side join key ...\", and add a link to the PR or the issue instead. Something like\n\n(:pr:`12345`)", "author": "caithagoras", "createdAt": "2020-09-14T21:51:15Z", "path": "presto-docs/src/main/sphinx/release/release-0.241.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.241\n+=============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from function classification_precision() introduced in release 0.239\n+* Add dynamic filtering and bucket pruning support for inner join and semi join, which can avoid full table scan on the probe side of broadcast joins or collocated joins when the build side is small. This can be enabled with the ``experimental.enable-dynamic-filtering`` configuration property and ``enable_dynamic_filtering`` system session property. The build side join key space size can be tuned by the ``experimental.dynamic-filtering-max-per-driver-row-count`` and ``experimental.dynamic-filtering-max-per-driver-size`` configuration properties and ``dynamic_filtering_max_per_driver_row_count`` and ``dynamic_filtering_max_per_driver_size`` session properties. Currently, only Hive connector can benefit from the feature.", "originalCommit": "5c871631d33ca1a26fe8e8cc7e010c248d711ede", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA0NTE5MA==", "url": "https://github.com/prestodb/presto/pull/15143#discussion_r494045190", "bodyText": "Improve performance of broadcast and collocated join by supporting dynamic filtering and bucket pruning for inner and semi joins.\n\n@caithagoras thanks for the rewriting. But this PR's primary goal is not improving the join's performance but the scan performance on the probe side. So I changed it to Improve performance for queries with broadcast or collocated joins by adding dynamic filtering and bucket pruning support.", "author": "yingsu00", "createdAt": "2020-09-24T05:22:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI0MDMyMA=="}], "type": "inlineReview"}, {"oid": "219721c3b06a35f861bfb5982cab7abebe009406", "url": "https://github.com/prestodb/presto/commit/219721c3b06a35f861bfb5982cab7abebe009406", "message": "Add release notes for 0.241", "committedDate": "2020-09-24T05:41:33Z", "type": "forcePushed"}, {"oid": "94696f07bd2ba3af68c8bea38f7a961f3ed6f34e", "url": "https://github.com/prestodb/presto/commit/94696f07bd2ba3af68c8bea38f7a961f3ed6f34e", "message": "Add release notes for 0.241", "committedDate": "2020-09-24T08:33:23Z", "type": "forcePushed"}, {"oid": "e184c6615c8c2ed6851c7866e6f0ac4de7412fae", "url": "https://github.com/prestodb/presto/commit/e184c6615c8c2ed6851c7866e6f0ac4de7412fae", "message": "Add release notes for 0.241", "committedDate": "2020-09-24T19:41:39Z", "type": "commit"}, {"oid": "e184c6615c8c2ed6851c7866e6f0ac4de7412fae", "url": "https://github.com/prestodb/presto/commit/e184c6615c8c2ed6851c7866e6f0ac4de7412fae", "message": "Add release notes for 0.241", "committedDate": "2020-09-24T19:41:39Z", "type": "forcePushed"}]}