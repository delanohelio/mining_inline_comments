{"pr_number": 14305, "pr_title": "Add release notes for 0.234", "pr_createdAt": "2020-03-29T00:44:55Z", "pr_url": "https://github.com/prestodb/presto/pull/14305", "timeline": [{"oid": "721237d03a4795954c5d2233d5fc51437b782f08", "url": "https://github.com/prestodb/presto/commit/721237d03a4795954c5d2233d5fc51437b782f08", "message": "Add release notes for 0.234", "committedDate": "2020-03-29T01:12:35Z", "type": "forcePushed"}, {"oid": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "url": "https://github.com/prestodb/presto/commit/327cb4b617c7209c1ee108831ecf7da8ea349a41", "message": "Add release notes for 0.234", "committedDate": "2020-03-29T01:16:05Z", "type": "forcePushed"}, {"oid": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "url": "https://github.com/prestodb/presto/commit/e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "message": "Add release notes for 0.234", "committedDate": "2020-03-29T01:22:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDM1Mg==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730352", "bodyText": "We need to add documentation when adding new functions @mcorreaiz  @tdcmeehan  @shixuan-fan\nSee issue: #14306", "author": "caithagoras", "createdAt": "2020-03-29T01:19:51Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.", "originalCommit": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDQxOA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730418", "bodyText": "@aweisberg Can you rephrase this to make sure user can understand? Are there any performance improvements resulting from this change? User may not understand \"streaming exchange\" or mark distinct", "author": "caithagoras", "createdAt": "2020-03-29T01:21:00Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.", "originalCommit": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI2MjAxOQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r401262019", "bodyText": "Add support for streaming mark distinct changes even when materialized exchange is enabled via the ``query.use-streaming-exchange-for-mark-distinct`` property.\n\nMark distinct is enabled by default and introduces a stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster. With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is sufficient memory available to perform the distincting will reduce the cost of these additional stages while still reducing the memory used by other by non-Mark Distinct stages.", "author": "aweisberg", "createdAt": "2020-03-31T22:54:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDQxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDUxNA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730514", "bodyText": "@jagill Is ST_Distance(p1, p2) < r a join condition?", "author": "caithagoras", "createdAt": "2020-03-29T01:22:34Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r`` for spherical geography points ``p1`` and ``p2``.", "originalCommit": "327cb4b617c7209c1ee108831ecf7da8ea349a41", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDY3Nw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730677", "bodyText": "@zhenxiao @highker Are there any improvements (e.g. performance) resulting from those changes?", "author": "caithagoras", "createdAt": "2020-03-29T01:24:11Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r``.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.\n+\n+Druid Changes\n+_____________\n+* Add support for aggregation pushdown.\n+* Add support for ``LIMIT`` evaluation pushdown.", "originalCommit": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTgzNDUzMA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399834530", "bodyText": "oh, did not do benchmarking comparing the perf improvement. Just mention these 2 pushdowns are fine", "author": "zhenxiao", "createdAt": "2020-03-29T18:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDY3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDc3OA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399730778", "bodyText": "@jagill Is ST_Distance(p1, p2) < r the join condition?", "author": "caithagoras", "createdAt": "2020-03-29T01:25:52Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add ``KHyperLogLog`` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct using ``query.use-streaming-exchange-for-mark-distinct``.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for ``ST_Distance(p1, p2) < r``.", "originalCommit": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMTQ1Mw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399731453", "bodyText": "It's a spatial join condition.  It is initially a cross join, but the optimizer notices certain conditions (ST_Distance(p1, p2) < r is one) and converts it to a spatial join.\nPreviously, it would only do it if p1 and p2 were Euclidean geometries; this change enables it for Spherical geographies as well.", "author": "jagill", "createdAt": "2020-03-29T01:35:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMDc3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTczMTQ3Mg==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r399731472", "bodyText": "Since there's a geospatial changes section, this belongs there.", "author": "jagill", "createdAt": "2020-03-29T01:36:26Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.", "originalCommit": "e80384a8ee2794eda1a5ecbfcdc6a578989d9a29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5be6c25933a70c1c3848406b6a0f451e25e22611", "url": "https://github.com/prestodb/presto/commit/5be6c25933a70c1c3848406b6a0f451e25e22611", "message": "Add release notes for 0.234 test", "committedDate": "2020-03-30T02:08:09Z", "type": "forcePushed"}, {"oid": "01d7ae73a70a9a16b15f3ac99fe65cef39056157", "url": "https://github.com/prestodb/presto/commit/01d7ae73a70a9a16b15f3ac99fe65cef39056157", "message": "Add release notes for 0.234", "committedDate": "2020-03-30T02:12:22Z", "type": "forcePushed"}, {"oid": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "url": "https://github.com/prestodb/presto/commit/bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "message": "Add release notes for 0.234", "committedDate": "2020-03-30T02:36:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDI5NjE0Mg==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r400296142", "bodyText": "The configuration name is experimental.max-total-running-task-count-to-not-execute-new-query, thank you for update.", "author": "viczhang861", "createdAt": "2020-03-30T15:44:25Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,40 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-halt-scheduling``.", "originalCommit": "bdc4d696e6a8750f503d1d7ae1a94ad3dac0d930", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "url": "https://github.com/prestodb/presto/commit/56ac980fc8a8e5dbca76fe0d5c0b58ac9f592a64", "message": "Add release notes for 0.234", "committedDate": "2020-04-10T19:05:24Z", "type": "forcePushed"}, {"oid": "8958756fe0117d272471a586030555279d90ef07", "url": "https://github.com/prestodb/presto/commit/8958756fe0117d272471a586030555279d90ef07", "message": "Add release notes for 0.234", "committedDate": "2020-04-10T19:12:12Z", "type": "forcePushed"}, {"oid": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "url": "https://github.com/prestodb/presto/commit/35c132753c8893d1bdc9e7e6468f9aa022bb3229", "message": "Add release notes for 0.234", "committedDate": "2020-04-10T19:16:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTI2NA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407015264", "bodyText": "just merged another two druid commits:\n\ncount distinct pushdown for druid connector\nfix druid connector segment scan", "author": "zhenxiao", "createdAt": "2020-04-11T04:18:56Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.\n+* Add ``firstDynamicSegmentPosition`` to SelectionContext.\n+\n+Druid Changes\n+_____________\n+* Add support for aggregation pushdown.\n+* Add support for ``LIMIT`` evaluation pushdown.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTMyNg==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407015326", "bodyText": "1e51f2f\n5f89b53", "author": "zhenxiao", "createdAt": "2020-04-11T04:19:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTI2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAzMjE3NQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407032175", "bodyText": "Those changes will be 0.235 but not in 0.234, as the cut-off for 0.234 was 2 weeks ago.", "author": "caithagoras", "createdAt": "2020-04-11T07:50:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzAxNTI2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407666001", "bodyText": "This is not fixing the regression. Also, scheduler is a very broad term. Can we be more specific?\nFix a regression in query scheduling by disabling the new {add some context} scheduler by default. This can be enabled by setting the property `use-legacy-scheduler` to `true`", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:21:07Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk4MzkwNQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407983905", "bodyText": "The new scheduler was the default but because of the regression we set the legacy scheduler to default for temporary mitigation. So it is not necessary to say \"This can be enabled by ...\"\nShould we just replace the this release notes with a warning instead?\n@mayankgarg1990 @rschlussel", "author": "caithagoras", "createdAt": "2020-04-14T09:10:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzk4NjU5Nw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407986597", "bodyText": "What about:\n.. warning::\n\n   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n   until the issue is fully resolved.\n\nSee the top of the updated release notes.", "author": "caithagoras", "createdAt": "2020-04-14T09:14:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxNzM3NA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408417374", "bodyText": "So it is not necessary to say \"This can be enabled by ...\"\n\nThe idea was that instead of saying the property we have changed, focus on the actual change that we have the old scheduler the default and at the same time, if you still want to try it out - then use this. The mechanics of how the default is changed is not useful in my opinion. But since we are communicating to the users, I feel that it is better to tell them how to override it if they really want to.", "author": "mayankgarg1990", "createdAt": "2020-04-14T20:33:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQzMzMyMA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408433320", "bodyText": "What we're doing is to disable the new scheduler by setting use-legacy-scheduler to true, so if user wants to do against that, we should say\nThis can be disabled by setting the property `use-legacy-scheduler` to `false`.\n\nHowever, I don't think we should not mentioned about setting use-legacy-scheduler to false since we know that there are issues with enabling the new scheduler.", "author": "caithagoras", "createdAt": "2020-04-14T21:02:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1MjI0NA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408452244", "bodyText": "What about stating this in the warning section instead?", "author": "caithagoras", "createdAt": "2020-04-14T21:39:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1ODY0MA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408458640", "bodyText": "I don't think warning is the right place. It is good for active issues, but not some piece of code that is not running by default. That said, I am fine either way - I don't have a strong opinion.\nAlso, for the message lets just say -\nFix scheduling regression by setting the default scheduler to legacy scheduler.\n\nWe don't need to specify the setting or anything.\nIn addition to this if we don't want anyone to use this, lets change the code to throw an exception if someone enables it. @rschlussel - thoughts?", "author": "mayankgarg1990", "createdAt": "2020-04-14T21:53:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ2NjU5Ng==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408466596", "bodyText": "I don't think we need to throw an exception as long as the default to a safe value.  We commonly have session properties gating features that aren't ready for production (e.g. how aria was developed). It makes it easier to test if you can just flip the session property.", "author": "rschlussel", "createdAt": "2020-04-14T22:11:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2NjAwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2Nzk4Nw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407667987", "bodyText": "Lets use the format in https://github.com/prestodb/presto/wiki/Release-Notes-Guidelines#phrasing.\nImprove coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling. This can be enabled by setting the ......", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:24:49Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2ODQ4Nw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407668487", "bodyText": "this is too long. lets limit to 2 sentences.", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:25:47Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTA5Mg==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669092", "bodyText": "Improve end point ``v1/resourceGroupState` to supporting filtering of resource groups that are dynamically generated.", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:27:02Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTMzNw==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669337", "bodyText": "Improve comes before Add", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:27:31Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY2OTg3OQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r407669879", "bodyText": "lets say:\nsession property ``hive.compression_codec`` to ``ZSTD``", "author": "mayankgarg1990", "createdAt": "2020-04-13T19:28:33Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,48 @@\n+=============\n+Release 0.234\n+=============\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve system reliability by preventing additional queries to execute when the total number of tasks exceeds the limit, which can be\n+  set by configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by using the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for streaming mark distinct changes even when materialized exchange is enabled via the\n+  ``query.use-streaming-exchange-for-mark-distinct`` property. Mark distinct is enabled by default and it introduces a\n+  stage per distinct column in a query in order to redistribute the tracking of distinct values across the entire cluster.\n+  With materialized exchange the cost of these additional exchanges is higher. Enabling streaming exchange if there is\n+  sufficient memory available to perform the distincting will reduce the cost of these additional stages while still\n+  reducing the memory used by other by non-Mark Distinct stages.\n+* Add support for end point ``/v1/resourceGroupState`` to return resource groups info with more filters.\n+  It is possible to filter the dynamically generated resource groups.\n+\n+Geospatial Changes\n+__________________\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec=ZSTD``.", "originalCommit": "35c132753c8893d1bdc9e7e6468f9aa022bb3229", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "url": "https://github.com/prestodb/presto/commit/1a5ec9ad9e47f49df4d469ea39738999757ccfa0", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T09:15:14Z", "type": "forcePushed"}, {"oid": "9160b15661fe27a94f3793cf31ea26f47c008447", "url": "https://github.com/prestodb/presto/commit/9160b15661fe27a94f3793cf31ea26f47c008447", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T09:16:23Z", "type": "forcePushed"}, {"oid": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "url": "https://github.com/prestodb/presto/commit/c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T10:17:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxNzgwMA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408417800", "bodyText": "enabled by the - there is a missing by", "author": "mayankgarg1990", "createdAt": "2020-04-14T20:33:48Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property", "originalCommit": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxODE1MA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408418150", "bodyText": "This line is redundant - we can remove it", "author": "mayankgarg1990", "createdAt": "2020-04-14T20:34:22Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+  It is possible to filter the dynamically generated resource groups.", "originalCommit": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQxODk2MQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408418961", "bodyText": "I don't think that we need to pass the name of the variable context? Just mentioning the type should be enough.", "author": "mayankgarg1990", "createdAt": "2020-04-14T20:35:50Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Fix a regression in the new scheduler temporarily by setting the default for the configuration property ``use-legacy-scheduler`` to ``true``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+  It is possible to filter the dynamically generated resource groups.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``\n+  and the configuration property ``query.use-streaming-exchange-for-mark-distinct``. (:pr:`14216`).\n+\n+\n+Geospatial Changes\n+__________________\n+* Improve storage efficiency for Bing tiles by storing Bing tiles as ``BIGINT``. This also reduces bucket skew in certain cases.\n+* Add support for spatial joins for join condition ``ST_Distance(p1, p2) < r``.\n+\n+Hive Changes\n+____________\n+* Add ``ZSTD`` support for writing ``ORC`` and ``DWRF`` files. This can be enabled by setting session property ``hive.compression_codec`` to ``ZSTD``.\n+\n+Verifier Changes\n+________________\n+* Add support for verifying ``SELECT`` queries that produce ``DATE`` or ``UNKNOWN`` (null) columns, or structured typed columns with ``DATE`` or ``UNKNOWN``.\n+* Add support for auto-resolving control check query failures due to ``EXCEEDED_TIME_LIMIT``.\n+* Add determinism analysis support for simple queries with top-level ``ORDER BY LIMIT`` clause. (:pr:`14181`).\n+\n+SPI Changes\n+___________\n+* Add parameter ``AccessControlContext context`` to all methods in ``SystemAccessControl``.", "originalCommit": "c1817e2e94db1fa30bbad74b21b38bf8fc9aeec6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "url": "https://github.com/prestodb/presto/commit/d25bf896ea907882b25ee9f533cb6ad9ebef0f2d", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T20:55:55Z", "type": "forcePushed"}, {"oid": "545f97fbcb1040fc1c79cdb6ab778d496387de34", "url": "https://github.com/prestodb/presto/commit/545f97fbcb1040fc1c79cdb6ab778d496387de34", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T21:35:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1MzQ0OQ==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408453449", "bodyText": "I thought this was a wrong results issue, rather than a query failure. @kaikalur", "author": "rschlussel", "createdAt": "2020-04-14T21:42:07Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.", "originalCommit": "545f97fbcb1040fc1c79cdb6ab778d496387de34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ2MTA5NA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408461094", "bodyText": "You're right. I double checked the original PR.", "author": "caithagoras", "createdAt": "2020-04-14T21:58:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1MzQ0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ1Mzg5NA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408453894", "bodyText": "nit: should say \"for forcing\"", "author": "rschlussel", "createdAt": "2020-04-14T21:43:08Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix query failure for window functions with ``IGNORE NULLS``.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``", "originalCommit": "545f97fbcb1040fc1c79cdb6ab778d496387de34", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7981814c3292575f48166f77aea2e96a3763a390", "url": "https://github.com/prestodb/presto/commit/7981814c3292575f48166f77aea2e96a3763a390", "message": "Add release notes for 0.234", "committedDate": "2020-04-14T21:58:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQ2NzAzOA==", "url": "https://github.com/prestodb/presto/pull/14305#discussion_r408467038", "bodyText": "\"Add support for forcing streaming exchange for Mark Distinct\" -> \"Add support for forcing streaming exchange for Mark Distinct even if materialized exchange is enabled.\"", "author": "aweisberg", "createdAt": "2020-04-14T22:12:55Z", "path": "presto-docs/src/main/sphinx/release/release-0.234.rst", "diffHunk": "@@ -0,0 +1,49 @@\n+=============\n+Release 0.234\n+=============\n+\n+.. warning::\n+\n+   There is a regression in the scheduler that has not been fixed in this release. It has been temporarily mitigated by setting\n+   the default value of the configuration property ``use-legacy-scheduler`` to ``true``. Please keep the legacy scheduler enabled\n+   until the issue is fully resolved.\n+\n+General Changes\n+_______________\n+* Fix query failure for cross-joining bucketed tables with ``COALESCE`` when the bucket counts are compatible but mismatched.\n+* Fix an issue where ``IGNORE NULLS`` is not respected for window functions.\n+* Improve coordinator reliability by adding support to cap the number of total tasks running in a coordinator by pausing scheduling.\n+  This can be enabled by the configuration property ``experimental.max-total-running-task-count-to-not-execute-new-query``.\n+* Improve the scale writer heuristics by considering overall producer buffer utilization. This can be enabled by the session property\n+  ``optimized_scale_writer_producer_buffer`` and the configuration property ``optimized-scale-writer-producer-buffer``.\n+* Improve end point ``v1/resourceGroupState`` to supporting filtering of resource groups that are dynamically generated.\n+* Improve connection pooling to avoid running out of sockets.\n+* Add :ref:`khyperloglog_type` type and related functions.\n+* Add support for forcing streaming exchange for Mark Distinct. This can be enabled by the session property ``use_stream_exchange_for_mark_distinct``", "originalCommit": "7981814c3292575f48166f77aea2e96a3763a390", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fb49fed8804a8caf11ff7b437c0996c0b74247f9", "url": "https://github.com/prestodb/presto/commit/fb49fed8804a8caf11ff7b437c0996c0b74247f9", "message": "Add release notes for 0.234", "committedDate": "2020-04-15T07:00:45Z", "type": "forcePushed"}, {"oid": "0a311745c26e1c9d1b8c21b969b880068775e0f9", "url": "https://github.com/prestodb/presto/commit/0a311745c26e1c9d1b8c21b969b880068775e0f9", "message": "Add release notes for 0.234", "committedDate": "2020-04-15T07:03:53Z", "type": "forcePushed"}, {"oid": "841616e31fe4085e7336b940ba05d92480960a90", "url": "https://github.com/prestodb/presto/commit/841616e31fe4085e7336b940ba05d92480960a90", "message": "Add release notes for 0.234", "committedDate": "2020-04-15T20:27:16Z", "type": "forcePushed"}, {"oid": "efda0258519b56f7b6ffdd48f6e6b313db8836e7", "url": "https://github.com/prestodb/presto/commit/efda0258519b56f7b6ffdd48f6e6b313db8836e7", "message": "Add release notes for 0.234", "committedDate": "2020-04-15T22:23:44Z", "type": "commit"}, {"oid": "efda0258519b56f7b6ffdd48f6e6b313db8836e7", "url": "https://github.com/prestodb/presto/commit/efda0258519b56f7b6ffdd48f6e6b313db8836e7", "message": "Add release notes for 0.234", "committedDate": "2020-04-15T22:23:44Z", "type": "forcePushed"}]}