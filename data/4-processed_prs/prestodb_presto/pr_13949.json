{"pr_number": 13949, "pr_title": "Enable listing SQL function with session property", "pr_createdAt": "2020-01-10T02:05:11Z", "pr_url": "https://github.com/prestodb/presto/pull/13949", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQwMTgyOA==", "url": "https://github.com/prestodb/presto/pull/13949#discussion_r365401828", "bodyText": "Let's call it list_all_functions?", "author": "rongrong", "createdAt": "2020-01-10T19:46:08Z", "path": "presto-main/src/main/java/com/facebook/presto/SystemSessionProperties.java", "diffHunk": "@@ -137,6 +137,7 @@\n     public static final String INDEX_LOADER_TIMEOUT = \"index_loader_timeout\";\n     public static final String OPTIMIZED_REPARTITIONING_ENABLED = \"optimized_repartitioning\";\n     public static final String AGGREGATION_PARTITIONING_MERGING_STRATEGY = \"aggregation_partitioning_merging_strategy\";\n+    public static final String LIST_NON_BUILT_IN_FUNCTIONS = \"list_non_built_in_functions\";", "originalCommit": "9e16dc4643be0f20170a3cacac52d16a32deb1fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQxMjAzNA==", "url": "https://github.com/prestodb/presto/pull/13949#discussion_r365412034", "bodyText": "What about list_sql_functions, list_user_defined_functions, or list_udfs if you think the current name is cumbersome.\nFor people who don't have context, it's not clear from reading the name what the difference is between \"all functions\" and \"not all functions\", and any of those 3 names at least gives some hint.", "author": "caithagoras", "createdAt": "2020-01-10T20:13:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQwMTgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA1NDYzNw==", "url": "https://github.com/prestodb/presto/pull/13949#discussion_r366054637", "bodyText": "But is this only going to list sql functions? it will list all functions right? Unless you are planning to make it an enum and allow only listing certain functions. Another way to configure this is to have it as list_static_functions_only.", "author": "rongrong", "createdAt": "2020-01-13T22:07:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQwMTgyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjA3NTExNg==", "url": "https://github.com/prestodb/presto/pull/13949#discussion_r366075116", "bodyText": "Since we're using \"built in function\" as the language in our code, I'm updating the PR to use list_built_in_functions_only.", "author": "caithagoras", "createdAt": "2020-01-13T23:01:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQwMTgyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTUzNTk3Nw==", "url": "https://github.com/prestodb/presto/pull/13949#discussion_r365535977", "bodyText": "Is the convention to use static imports here?", "author": "ajaygeorge", "createdAt": "2020-01-11T18:45:22Z", "path": "presto-main/src/main/java/com/facebook/presto/metadata/FunctionManager.java", "diffHunk": "@@ -171,9 +170,9 @@ public void registerBuiltInFunctions(List<? extends BuiltInFunction> functions)\n         builtInFunctionNamespaceManager.registerBuiltInFunctions(functions);\n     }\n \n-    public List<SqlFunction> listFunctions()\n+    public List<SqlFunction> listFunctions(Session session)\n     {\n-        Collection<FunctionNamespaceManager<?>> managers = listNonBuiltInFunctions ?\n+        Collection<FunctionNamespaceManager<?>> managers = SystemSessionProperties.isListNonBuiltInFunctions(session) ?", "originalCommit": "9e16dc4643be0f20170a3cacac52d16a32deb1fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f4c8d534b0be64d6894bb553e8423a2f44bdb065", "url": "https://github.com/prestodb/presto/commit/f4c8d534b0be64d6894bb553e8423a2f44bdb065", "message": "Control listing non built-in function with session properties", "committedDate": "2020-01-13T21:21:49Z", "type": "forcePushed"}, {"oid": "0e1e9069704c2c8a919d013cf11cbb494bc4d3ab", "url": "https://github.com/prestodb/presto/commit/0e1e9069704c2c8a919d013cf11cbb494bc4d3ab", "message": "Control listing non built-in function with session properties", "committedDate": "2020-01-13T21:23:47Z", "type": "forcePushed"}, {"oid": "05cc6396723f0721069d53fbdd63575b8159f09a", "url": "https://github.com/prestodb/presto/commit/05cc6396723f0721069d53fbdd63575b8159f09a", "message": "Enable listing SQL functions with session properties", "committedDate": "2020-01-13T21:30:42Z", "type": "forcePushed"}, {"oid": "dc20de7d6635733d382321f551ff1dff0756a7d7", "url": "https://github.com/prestodb/presto/commit/dc20de7d6635733d382321f551ff1dff0756a7d7", "message": "Enable listing SQL functions with session property", "committedDate": "2020-01-13T21:31:05Z", "type": "forcePushed"}, {"oid": "04803e5205fb908f34314af1a51587255c39701c", "url": "https://github.com/prestodb/presto/commit/04803e5205fb908f34314af1a51587255c39701c", "message": "Enable listing SQL functions with session property", "committedDate": "2020-01-13T21:32:02Z", "type": "forcePushed"}, {"oid": "9aa93f325e36e4fec1155e434fa8dc2cfca5095f", "url": "https://github.com/prestodb/presto/commit/9aa93f325e36e4fec1155e434fa8dc2cfca5095f", "message": "Enable listing SQL functions with session property", "committedDate": "2020-01-13T21:35:05Z", "type": "forcePushed"}, {"oid": "3434b3afe8497a61481040b777cb07c7ced73340", "url": "https://github.com/prestodb/presto/commit/3434b3afe8497a61481040b777cb07c7ced73340", "message": "Enable listing SQL functions with session property\n\nAlso, rename configuration property list-non-built-in-functions to\nlist-sql-functions.", "committedDate": "2020-01-13T21:45:22Z", "type": "forcePushed"}, {"oid": "142761646273797326cf04d0a519582d9f32faad", "url": "https://github.com/prestodb/presto/commit/142761646273797326cf04d0a519582d9f32faad", "message": "Enable listing SQL functions with session property\n\nAlso, rename configuration property list-non-built-in-functions to\nlist-sql-functions.", "committedDate": "2020-01-13T22:58:53Z", "type": "forcePushed"}, {"oid": "3f615ad4e4ec19ff164df8e101bf459193257071", "url": "https://github.com/prestodb/presto/commit/3f615ad4e4ec19ff164df8e101bf459193257071", "message": "Enable listing SQL functions with session property\n\nAlso, rename configuration property list-non-built-in-functions to\nlist-sql-functions.", "committedDate": "2020-01-13T23:00:10Z", "type": "commit"}, {"oid": "3f615ad4e4ec19ff164df8e101bf459193257071", "url": "https://github.com/prestodb/presto/commit/3f615ad4e4ec19ff164df8e101bf459193257071", "message": "Enable listing SQL functions with session property\n\nAlso, rename configuration property list-non-built-in-functions to\nlist-sql-functions.", "committedDate": "2020-01-13T23:00:10Z", "type": "forcePushed"}]}