{"pr_number": 14908, "pr_title": "Add release notes for 0.239", "pr_createdAt": "2020-07-28T16:29:15Z", "pr_url": "https://github.com/prestodb/presto/pull/14908", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc1NzQ5Ng==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461757496", "bodyText": "I updated the description with the release note for this PR for #14800 but I can't seem to open a PR against your repo to update it here.", "author": "aweisberg", "createdAt": "2020-07-28T17:40:00Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4MTgxNg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461781816", "bodyText": "sorry for the confusion.  The commit for Remove experimental feature to perform grouped execution for eligible table scans ... was merged after this one, so this note should just say\nEnable ``grouped-execution-for-aggregation`` by default.", "author": "rschlussel", "createdAt": "2020-07-28T18:21:01Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4MjI5MA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461782290", "bodyText": "remove experimental.grouped-execution-for-eligilbe-table-scans from this list, as we decided to get rid of this feature entirely instead.", "author": "rschlussel", "createdAt": "2020-07-28T18:21:49Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4MzQ0OA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461783448", "bodyText": "this should be part of the note Add support for 2 security modes for views.  Looks like somehow some other bullets came in between.", "author": "rschlussel", "createdAt": "2020-07-28T18:23:47Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4Mzk5MQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461783991", "bodyText": "can we get more information about what this means?", "author": "rschlussel", "createdAt": "2020-07-28T18:24:47Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NjQ4OQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461786489", "bodyText": "needs more information and to be in proper release note format.", "author": "rschlussel", "createdAt": "2020-07-28T18:29:07Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.\n+* Reverting Reliable Resource Group Versioning.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NjY1Ng==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461786656", "bodyText": "needs to be fleshed out", "author": "rschlussel", "createdAt": "2020-07-28T18:29:25Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.\n+* Reverting Reliable Resource Group Versioning.\n+* Specify allowed roles for HTTP endpoints.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg3NDExNg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461874116", "bodyText": "I will introduce this point once we have the proper documentation for this feature.", "author": "mayankgarg1990", "createdAt": "2020-07-28T20:57:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NjY1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4NzQxOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461787418", "bodyText": "Something like\nFix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.\nAlso, should be in a separate Web UI section.", "author": "rschlussel", "createdAt": "2020-07-28T18:30:43Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.\n+* Reverting Reliable Resource Group Versioning.\n+* Specify allowed roles for HTTP endpoints.\n+* The worker page's thread snapshot UI does not work (no stack trace displayed on click) when there is active query load (tested under Chrome). This patch fixes an uninitialized variable in client JS that was causing this UI behavior.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4OTI0OA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461789248", "bodyText": "We should add a release note for encryption at rest @mayankgarg1990\n\nAdd support for reading and writing DWRF files with encryption.  To create a table with encrypted columns....", "author": "rschlussel", "createdAt": "2020-07-28T18:33:46Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.\n+* Reverting Reliable Resource Group Versioning.\n+* Specify allowed roles for HTTP endpoints.\n+* The worker page's thread snapshot UI does not work (no stack trace displayed on click) when there is active query load (tested under Chrome). This patch fixes an uninitialized variable in client JS that was causing this UI behavior.\n+* Update JTS to 1.17.0. This changes the implementation of ST_Buffer: the output might change by a small (1e-10) amount.\n+\n+SPI Changes\n+___________\n+* Move `DistinctLimitNode` to `presto-spi` module for connectors to push down.\n+\n+Elasticsearch Changes\n+_____________________\n+* Add configurations to improve concurrency in Elasticsearch.\n+* Support Elasticsearch numeric keyword.\n+* Support composite publish_address in Elasticsearch.\n+\n+Hive Changes\n+____________\n+* Add support for caching the Glue metastore.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg2NTQwNA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461865404", "bodyText": "Given that encryption cannot be used readily and neither do we have a user guide for how to set it up - my opinion is that we don't publish it in the release notes.", "author": "mayankgarg1990", "createdAt": "2020-07-28T20:41:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc4OTI0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5MDY1MQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461790651", "bodyText": "also, can this be moved above the previous note so that all the grouped execution property changes are next to each other.", "author": "rschlussel", "createdAt": "2020-07-28T18:36:11Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,51 @@\n+=============\n+Release 0.239\n+=============\n+\n+General Changes\n+_______________\n+* Fix  :func:`classification_miss_rate` and :func:`classification_fall_out` functions (:pr:`14740`).\n+* Fix NPE in `/v1/thread` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to false.\n+* Add aggregation function SET_UNION.\n+* Add local disk spilling support for `ORDER BY` syntax.\n+* Add local disk spilling support for aggregation functions with `ORDER BY` or `DISTINCT` syntax.\n+* Add optimization for cursor projection & filter by extract and compute common subexpressions among all projections & filter first. This optimization can be turned off by session property ``optimize_common_sub_expressions``.\n+* Add support for 2 security modes for views. The default `DEFINER` security mode is the same as the previous behavior. Tables referenced in the view are accessed using the permissions of the view owner (the **creator** or.\n+* Add support for warning on unfiltered partition keys using `partition-keys-to-warn-on-no-filtering` system property.\n+* Add support to optimize min/max only metadata query. This is controlled by existing config ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``. Note that enabling this config/session property might change query result if there are metadata that refers to empty data, e.g. empty hive partition.\n+* Remove experimental feature to perform grouped execution for eligible table scans and its associated configuration property ``experimental.grouped-execution-for-elligible-table-scans`` and session property ``grouped_execution_for_eligible_table_scans``.\n+* Definer** of the view) rather than the user executing the query. In the `INVOKER` security mode, tables referenced in the view are accessed using the permissions of the query user (the **invoker** of the view).\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  In future releases, we will remove this property, and grouped execution will always use dynamic scheduling.\n+* Enable ``grouped-execution-for-aggregation`` and ``experimental.grouped-execution-for-eligible-table-scans`` by default.\n+* Enable async page transport with non-blocking IO by default. This can be disabled by setting ``exchange.async-page-transport-enabled`` configuration property to false.\n+* Introduce new configuration property ``grouped-execution-enabled`` and session property ``grouped_execution`` to turn grouped execution on or off.  This property is true by default.  If set to false, it is equivalent to setting all of ``grouped-execution-for-aggregation``, ``grouped-execution-for-join``, and ``experimental.grouped-execution-for-eligible-table-scans`` to false.  In future releases we will remove these other properties and only have a single switch for enabling and disabling grouped execution.", "originalCommit": "df474ca8a7e076fea0234290c66fe6c46c2fa4c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTg3NDQzOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461874438", "bodyText": "I have done some overall re-formatting - will let you review the final version.", "author": "mayankgarg1990", "createdAt": "2020-07-28T20:57:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTc5MDY1MQ=="}], "type": "inlineReview"}, {"oid": "d24cea73d7db4f5ead929a2e7f5d5c1c21595630", "url": "https://github.com/prestodb/presto/commit/d24cea73d7db4f5ead929a2e7f5d5c1c21595630", "message": "Add release notes for 0.239", "committedDate": "2020-07-28T21:22:27Z", "type": "forcePushed"}, {"oid": "855901d3b0281c526507198e1bcecd00ebee9ac1", "url": "https://github.com/prestodb/presto/commit/855901d3b0281c526507198e1bcecd00ebee9ac1", "message": "Add release notes for 0.239", "committedDate": "2020-07-28T21:29:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNTM1Mg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461915352", "bodyText": "just realized the property is called grouped-execution-for-aggregation-enabled.", "author": "rschlussel", "createdAt": "2020-07-28T22:04:50Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions\n+  among all projections and filter first. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add support to optimize min/max only metadata query. This is controlled by configuration\n+  property ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and\n+  session property ``grouped_execution`` with default set to ``true`` (:pr:`14886`).\n+* Remove experimental feature to perform grouped execution for eligible table scans and its\n+  associated configuration property ``experimental.grouped-execution-for-eligible-table-scans``\n+  and session property ``grouped_execution_for_eligible_table_scans``.\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  This property will be removed\n+  in a future release.\n+* Enable ``grouped-execution-for-aggregation`` by default.", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNjUxOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461916518", "bodyText": "Can you also mention here that grouped-execution-for-aggregation-enabled and grouped-execution-for-join-enabled will be removed in a future release.", "author": "rschlussel", "createdAt": "2020-07-28T22:06:16Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions\n+  among all projections and filter first. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add support to optimize min/max only metadata query. This is controlled by configuration\n+  property ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQwNzMxOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464407318", "bodyText": "mentioned grouped-execution-for-aggregation-enabled next to the point below where I say that it is enabled by default. Added the point about join one here", "author": "mayankgarg1990", "createdAt": "2020-08-03T13:18:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNjUxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzA2Ng==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461917066", "bodyText": "what are the configurations?", "author": "rschlussel", "createdAt": "2020-07-28T22:06:59Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions\n+  among all projections and filter first. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add support to optimize min/max only metadata query. This is controlled by configuration\n+  property ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and\n+  session property ``grouped_execution`` with default set to ``true`` (:pr:`14886`).\n+* Remove experimental feature to perform grouped execution for eligible table scans and its\n+  associated configuration property ``experimental.grouped-execution-for-eligible-table-scans``\n+  and session property ``grouped_execution_for_eligible_table_scans``.\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  This property will be removed\n+  in a future release.\n+* Enable ``grouped-execution-for-aggregation`` by default.\n+* Enable async page transport with non-blocking IO for exchange by default. This can be disabled by\n+  setting the configuration property ``exchange.async-page-transport-enabled`` to ``false``.\n+\n+\n+Security Changes\n+----------------\n+* Add support for ``DEFINER`` and ``INVOKER`` view security modes. While querying a view the former\n+  uses the permissions of the view owner and the latter uses the query runner's permissions.\n+  See :doc:`/sql/create-view`.\n+\n+JDBC Changes\n+____________\n+* Implemented ``DatabaseMetaData#getClientInfoProperties`` API.\n+\n+Web UI Changes\n+--------------\n+*  Fix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.\n+\n+Hive Changes\n+____________\n+* Add support for caching the Glue metastore.\n+* Add support for warning on unfiltered partition keys. This can be enabled using the configuration\n+  property ``partition-keys-to-warn-on-no-filtering``.\n+\n+Elasticsearch Changes\n+_____________________\n+* Add configurations to improve concurrency.", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyNzgwOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461927808", "bodyText": "elasticsearch.max-http-connections : Maximum number of persistent HTTP connections to Elasticsearch.\nelasticsearch.http-thread-count : Number of threads handling HTTP connections to Elasticsearch", "author": "zhenxiao", "createdAt": "2020-07-28T22:24:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQwOTUyMg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464409522", "bodyText": "added the detailed configuration information", "author": "mayankgarg1990", "createdAt": "2020-08-03T13:22:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzA2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzU4Mw==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461917583", "bodyText": "what's a composite publish_address? (maybe this is just because I don't know elasticsearch)", "author": "rschlussel", "createdAt": "2020-07-28T22:07:44Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions\n+  among all projections and filter first. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add support to optimize min/max only metadata query. This is controlled by configuration\n+  property ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and\n+  session property ``grouped_execution`` with default set to ``true`` (:pr:`14886`).\n+* Remove experimental feature to perform grouped execution for eligible table scans and its\n+  associated configuration property ``experimental.grouped-execution-for-eligible-table-scans``\n+  and session property ``grouped_execution_for_eligible_table_scans``.\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  This property will be removed\n+  in a future release.\n+* Enable ``grouped-execution-for-aggregation`` by default.\n+* Enable async page transport with non-blocking IO for exchange by default. This can be disabled by\n+  setting the configuration property ``exchange.async-page-transport-enabled`` to ``false``.\n+\n+\n+Security Changes\n+----------------\n+* Add support for ``DEFINER`` and ``INVOKER`` view security modes. While querying a view the former\n+  uses the permissions of the view owner and the latter uses the query runner's permissions.\n+  See :doc:`/sql/create-view`.\n+\n+JDBC Changes\n+____________\n+* Implemented ``DatabaseMetaData#getClientInfoProperties`` API.\n+\n+Web UI Changes\n+--------------\n+*  Fix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.\n+\n+Hive Changes\n+____________\n+* Add support for caching the Glue metastore.\n+* Add support for warning on unfiltered partition keys. This can be enabled using the configuration\n+  property ``partition-keys-to-warn-on-no-filtering``.\n+\n+Elasticsearch Changes\n+_____________________\n+* Add configurations to improve concurrency.\n+* Add support for numeric keyword.\n+* Add support for composite publish_address.", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyODM3MQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461928371", "bodyText": "publish_address field can contain addresses of the following form:\ncname/ip:port\nip:port\n\nIf the CNAME is present, elasticsearch connector will use the CNAME and port.\nOtherwise, it will use the IP and port.", "author": "zhenxiao", "createdAt": "2020-07-28T22:26:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQxMTg4Mw==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464411883", "bodyText": "Updated publish_address to be back quoted and also linked to the PR for context", "author": "mayankgarg1990", "createdAt": "2020-08-03T13:26:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkxNzU4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyNDYyMA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461924620", "bodyText": "This description is a bit too technical. If this is accurate, maybe say\nOptimize queries with repeated expressions in filters or projections by computing the common expressions only once.  This can be disabled by the session property\n  ``optimize_common_sub_expressions``.", "author": "rschlussel", "createdAt": "2020-07-28T22:17:12Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyNjA4NA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r461926084", "bodyText": "what's a min/max only metadata query?", "author": "rschlussel", "createdAt": "2020-07-28T22:20:05Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,73 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize cursor projection and filter by extracting and computing common subexpressions\n+  among all projections and filter first. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add support to optimize min/max only metadata query. This is controlled by configuration", "originalCommit": "855901d3b0281c526507198e1bcecd00ebee9ac1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQwNTI3OA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464405278", "bodyText": "Queries that are doing min(), max() only kind of operations", "author": "mayankgarg1990", "createdAt": "2020-08-03T13:15:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyNjA4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyMjIzNQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464422235", "bodyText": "I have reworded this to be more clear (hopefully)", "author": "mayankgarg1990", "createdAt": "2020-08-03T13:44:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTkyNjA4NA=="}], "type": "inlineReview"}, {"oid": "508c7bbfed259d25641e807c188d698a79483e0f", "url": "https://github.com/prestodb/presto/commit/508c7bbfed259d25641e807c188d698a79483e0f", "message": "Add release notes for 0.239", "committedDate": "2020-08-03T13:29:44Z", "type": "forcePushed"}, {"oid": "aa23eed765646168d0e3b1dba456f1a8b896f650", "url": "https://github.com/prestodb/presto/commit/aa23eed765646168d0e3b1dba456f1a8b896f650", "message": "Add release notes for 0.239", "committedDate": "2020-08-03T13:45:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0MjIwNg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464542206", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix ``NullPointerException`` in ``/v1/thread`` end point.\n          \n          \n            \n            * Fix error in ``/v1/thread`` end point.", "author": "tdcmeehan", "createdAt": "2020-08-03T17:02:36Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0NjY1Nw==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464546657", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              for certain queries that had filters pushed down to the table scan.\n          \n          \n            \n              for certain queries.", "author": "tdcmeehan", "createdAt": "2020-08-03T17:11:12Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0NjkyMw==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464546923", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix missing query completion events for queries which fail prior to dispatching.\n          \n          \n            \n            * Fix missing query completion events for queries which fail prior to execution.", "author": "tdcmeehan", "createdAt": "2020-08-03T17:11:41Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0NzEzNg==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464547136", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n          \n          \n            \n            * Fix potential performance regression when setting ``use_legacy_scheduler`` is set to ``false``.", "author": "tdcmeehan", "createdAt": "2020-08-03T17:12:04Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0OTA0NQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464549045", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            *  Fix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.\n          \n          \n            \n            *  Fix worker thread snapshot UI to correctly display the stack trace.", "author": "tdcmeehan", "createdAt": "2020-08-03T17:15:43Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize queries with repeated expressions in filters or projections by computing the\n+  common expressions only once. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Optimize queries containing only :func:`min` and :func:`max` on columns that can be\n+  evaluated using metadata (e.g., Hive partitions). This is controlled by configuration property\n+  ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and\n+  session property ``grouped_execution`` with default set to ``true``. The property\n+  ``grouped-execution-for-join-enabled`` will be removed in a future release (:pr:`14886`).\n+* Remove experimental feature to perform grouped execution for eligible table scans and its\n+  associated configuration property ``experimental.grouped-execution-for-eligible-table-scans``\n+  and session property ``grouped_execution_for_eligible_table_scans``.\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  This property will be removed\n+  in a future release.\n+* Enable ``grouped-execution-for-aggregation-enabled`` by default. This property will be removed in\n+  a future release.\n+* Enable async page transport with non-blocking IO for exchange by default. This can be disabled by\n+  setting the configuration property ``exchange.async-page-transport-enabled`` to ``false``.\n+\n+\n+Security Changes\n+----------------\n+* Add support for ``DEFINER`` and ``INVOKER`` view security modes. While querying a view the former\n+  uses the permissions of the view owner and the latter uses the query runner's permissions.\n+  See :doc:`/sql/create-view`.\n+\n+JDBC Changes\n+____________\n+* Implemented ``DatabaseMetaData#getClientInfoProperties`` API.\n+\n+Web UI Changes\n+--------------\n+*  Fix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0OTYxOA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464549618", "bodyText": "What is the default setting?", "author": "tdcmeehan", "createdAt": "2020-08-03T17:16:48Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).\n+* Fix ``NullPointerException`` in ``/v1/thread`` end point.\n+* Fix an issue where the property ``ignore_stats_calculator_failures`` would not be honored\n+  for certain queries that had filters pushed down to the table scan.\n+* Fix missing query completion events for queries which fail prior to dispatching.\n+* Fix potential infinite loop when the setting ``use_legacy_scheduler`` is set to ``false``.\n+* Optimize queries with repeated expressions in filters or projections by computing the\n+  common expressions only once. This can be disabled by the session property\n+  ``optimize_common_sub_expressions``.\n+* Optimize queries containing only :func:`min` and :func:`max` on columns that can be\n+  evaluated using metadata (e.g., Hive partitions). This is controlled by configuration property\n+  ``optimizer.optimize-metadata-queries`` and session property ``optimize_metadata_queries``.\n+  Note: Enabling this optimization might change query result if there are metadata that refers to\n+  empty data, see :pr:`14845` for examples.\n+* Add aggregation function :func:`set_union`.\n+* Add local disk spilling support for queries with ``ORDER BY`` or ``DISTINCT``.\n+* Add new unified grouped execution configuration property ``grouped-execution-enabled`` and\n+  session property ``grouped_execution`` with default set to ``true``. The property\n+  ``grouped-execution-for-join-enabled`` will be removed in a future release (:pr:`14886`).\n+* Remove experimental feature to perform grouped execution for eligible table scans and its\n+  associated configuration property ``experimental.grouped-execution-for-eligible-table-scans``\n+  and session property ``grouped_execution_for_eligible_table_scans``.\n+* Enable ``dynamic-schedule-for-grouped-execution`` by default.  This property will be removed\n+  in a future release.\n+* Enable ``grouped-execution-for-aggregation-enabled`` by default. This property will be removed in\n+  a future release.\n+* Enable async page transport with non-blocking IO for exchange by default. This can be disabled by\n+  setting the configuration property ``exchange.async-page-transport-enabled`` to ``false``.\n+\n+\n+Security Changes\n+----------------\n+* Add support for ``DEFINER`` and ``INVOKER`` view security modes. While querying a view the former\n+  uses the permissions of the view owner and the latter uses the query runner's permissions.\n+  See :doc:`/sql/create-view`.\n+\n+JDBC Changes\n+____________\n+* Implemented ``DatabaseMetaData#getClientInfoProperties`` API.\n+\n+Web UI Changes\n+--------------\n+*  Fix a bug where the UI for the worker's thread snapshot wouldn't display the stack trace.\n+\n+Hive Changes\n+____________\n+* Add support for caching the Glue metastore.\n+* Add support for warning on unfiltered partition keys. This can be enabled using the configuration\n+  property ``partition-keys-to-warn-on-no-filtering``.", "originalCommit": "aa23eed765646168d0e3b1dba456f1a8b896f650", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU1NDEzOQ==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464554139", "bodyText": "Generally when we say enable using, my assumption is that it is disabled by default.", "author": "mayankgarg1990", "createdAt": "2020-08-03T17:25:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU0OTYxOA=="}], "type": "inlineReview"}, {"oid": "f119c4d146901dd8ace1ee39ca96f5b18f78c5a4", "url": "https://github.com/prestodb/presto/commit/f119c4d146901dd8ace1ee39ca96f5b18f78c5a4", "message": "Add release notes for 0.239", "committedDate": "2020-08-03T17:28:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDc1OTI5Ng==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r464759296", "bodyText": "Fix incorrect results from :func:classification_miss_rate, :func:classification_fall_out, and :func:classification_precision (:pr:14740).", "author": "viczhang861", "createdAt": "2020-08-04T02:17:18Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,79 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes\n+_______________\n+* Fix :func:`classification_miss_rate` and :func:`classification_fall_out` (:pr:`14740`).", "originalCommit": "f119c4d146901dd8ace1ee39ca96f5b18f78c5a4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d6f2c373519d0ea7d1b5e913c4aad83d92989589", "url": "https://github.com/prestodb/presto/commit/d6f2c373519d0ea7d1b5e913c4aad83d92989589", "message": "Add release notes for 0.239", "committedDate": "2020-08-07T13:40:23Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE3MDMyMA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r467170320", "bodyText": "We may be to add a heading (e.g. **Details** or **Notes**) in parallel with **Highlights** so that it doesn't looks like the sections below are sub-sections of the highlights. We're also missing this with 0.238 release notes, so I'm ok with fixing this later.", "author": "caithagoras", "createdAt": "2020-08-07T17:21:03Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,80 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+General Changes", "originalCommit": "d6f2c373519d0ea7d1b5e913c4aad83d92989589", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "12429af1ef6a3d086e43a76d3fe4e84e66f3eed4", "url": "https://github.com/prestodb/presto/commit/12429af1ef6a3d086e43a76d3fe4e84e66f3eed4", "message": "Add release notes for 0.239", "committedDate": "2020-08-07T17:36:43Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzE3OTYxNA==", "url": "https://github.com/prestodb/presto/pull/14908#discussion_r467179614", "bodyText": "I think you need\n:pr:`14740`\n\nCould you visually check the other content of the html by running\ncd presto-docs\nmake clean\nmake html", "author": "caithagoras", "createdAt": "2020-08-07T17:40:03Z", "path": "presto-docs/src/main/sphinx/release/release-0.239.rst", "diffHunk": "@@ -0,0 +1,83 @@\n+=============\n+Release 0.239\n+=============\n+\n+**Highlights**\n+==============\n+* Add support for ``DEFINER`` and ``INVOKER`` view security models.\n+* Add support for caching Glue metastore in Hive connector.\n+* Add Pinot SQL endpoint support.\n+\n+**Details**\n+==============\n+\n+General Changes\n+_______________\n+* Fix incorrect results from :func:`classification_miss_rate`, :func:`classification_fall_out`\n+  and :func:`classification_precision` (:pr:14740).", "originalCommit": "12429af1ef6a3d086e43a76d3fe4e84e66f3eed4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "50b5c92e2f802476e2a1c77e5a95237270e1477c", "url": "https://github.com/prestodb/presto/commit/50b5c92e2f802476e2a1c77e5a95237270e1477c", "message": "Add release notes for 0.239", "committedDate": "2020-08-07T17:41:19Z", "type": "commit"}, {"oid": "50b5c92e2f802476e2a1c77e5a95237270e1477c", "url": "https://github.com/prestodb/presto/commit/50b5c92e2f802476e2a1c77e5a95237270e1477c", "message": "Add release notes for 0.239", "committedDate": "2020-08-07T17:41:19Z", "type": "forcePushed"}]}