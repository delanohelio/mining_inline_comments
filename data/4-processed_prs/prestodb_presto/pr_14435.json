{"pr_number": 14435, "pr_title": "Add session property for druid connector", "pr_createdAt": "2020-04-25T00:04:25Z", "pr_url": "https://github.com/prestodb/presto/pull/14435", "timeline": [{"oid": "e56fe8a2a73b2a28aca63e19a8f319b8b912593c", "url": "https://github.com/prestodb/presto/commit/e56fe8a2a73b2a28aca63e19a8f319b8b912593c", "message": "Add session property for druid connector", "committedDate": "2020-04-25T00:42:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM4NjEzMQ==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415386131", "bodyText": "compute_pushdown_enabled", "author": "highker", "createdAt": "2020-04-26T19:48:07Z", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidSessionProperties.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.facebook.presto.druid;\n+\n+import com.facebook.presto.spi.ConnectorSession;\n+import com.facebook.presto.spi.session.PropertyMetadata;\n+import com.google.common.collect.ImmutableList;\n+\n+import javax.inject.Inject;\n+\n+import java.util.List;\n+\n+import static com.facebook.presto.spi.session.PropertyMetadata.booleanProperty;\n+\n+public class DruidSessionProperties\n+{\n+    private static final String PUSHDOWN = \"pushdown\";", "originalCommit": "e56fe8a2a73b2a28aca63e19a8f319b8b912593c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTM4NjI5Ng==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415386296", "bodyText": "druid.compute-pushdown-enabled", "author": "highker", "createdAt": "2020-04-26T19:49:02Z", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -65,4 +66,17 @@ public DruidConfig setDruidSchema(String schema)\n         this.schema = schema;\n         return this;\n     }\n+\n+    public boolean getPushdown()\n+    {\n+        return pushdown;\n+    }\n+\n+    @Config(\"druid.pushdown\")", "originalCommit": "e56fe8a2a73b2a28aca63e19a8f319b8b912593c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d99e4e57830451ee7968b061373299dcc7d24356", "url": "https://github.com/prestodb/presto/commit/d99e4e57830451ee7968b061373299dcc7d24356", "message": "Add session property for druid connector", "committedDate": "2020-04-26T21:12:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQwNzc1Ng==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415407756", "bodyText": "isComputePushdownEnabled", "author": "highker", "createdAt": "2020-04-26T21:43:43Z", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -65,4 +66,17 @@ public DruidConfig setDruidSchema(String schema)\n         this.schema = schema;\n         return this;\n     }\n+\n+    public boolean getPushdown()", "originalCommit": "d99e4e57830451ee7968b061373299dcc7d24356", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQwNzc5MQ==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415407791", "bodyText": "setComputePushdownEnabled", "author": "highker", "createdAt": "2020-04-26T21:43:50Z", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidConfig.java", "diffHunk": "@@ -65,4 +66,17 @@ public DruidConfig setDruidSchema(String schema)\n         this.schema = schema;\n         return this;\n     }\n+\n+    public boolean getPushdown()\n+    {\n+        return pushdown;\n+    }\n+\n+    @Config(\"druid.compute-pushdown-enabled\")\n+    @ConfigDescription(\"pushdown query processing to druid\")\n+    public DruidConfig setPushdown(boolean pushdown)", "originalCommit": "d99e4e57830451ee7968b061373299dcc7d24356", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQwNzg2Ng==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415407866", "bodyText": "same", "author": "highker", "createdAt": "2020-04-26T21:44:18Z", "path": "presto-druid/src/main/java/com/facebook/presto/druid/DruidSessionProperties.java", "diffHunk": "@@ -0,0 +1,53 @@\n+/*\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.facebook.presto.druid;\n+\n+import com.facebook.presto.spi.ConnectorSession;\n+import com.facebook.presto.spi.session.PropertyMetadata;\n+import com.google.common.collect.ImmutableList;\n+\n+import javax.inject.Inject;\n+\n+import java.util.List;\n+\n+import static com.facebook.presto.spi.session.PropertyMetadata.booleanProperty;\n+\n+public class DruidSessionProperties\n+{\n+    private static final String COMPUTE_PUSHDOWN = \"compute_pushdown_enabled\";\n+\n+    private final List<PropertyMetadata<?>> sessionProperties;\n+\n+    public static boolean isPushdown(ConnectorSession session)", "originalCommit": "d99e4e57830451ee7968b061373299dcc7d24356", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTQwNzkzMw==", "url": "https://github.com/prestodb/presto/pull/14435#discussion_r415407933", "bodyText": "need to change as well", "author": "highker", "createdAt": "2020-04-26T21:44:37Z", "path": "presto-druid/src/test/java/com/facebook/presto/druid/TestDruidConfig.java", "diffHunk": "@@ -40,12 +41,14 @@ public void testExplicitPropertyMappings()\n                 .put(\"druid.broker-url\", \"http://druid.broker:1234\")\n                 .put(\"druid.coordinator-url\", \"http://druid.coordinator:4321\")\n                 .put(\"druid.schema-name\", \"test\")\n+                .put(\"druid.pushdown\", \"true\")", "originalCommit": "d99e4e57830451ee7968b061373299dcc7d24356", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7c458389246663d553eb1b154bd46e10bfa6218d", "url": "https://github.com/prestodb/presto/commit/7c458389246663d553eb1b154bd46e10bfa6218d", "message": "Add session property for druid connector", "committedDate": "2020-04-26T21:50:48Z", "type": "commit"}, {"oid": "7c458389246663d553eb1b154bd46e10bfa6218d", "url": "https://github.com/prestodb/presto/commit/7c458389246663d553eb1b154bd46e10bfa6218d", "message": "Add session property for druid connector", "committedDate": "2020-04-26T21:50:48Z", "type": "forcePushed"}]}