{"pr_number": 14516, "pr_title": "Create DataSink using DataSinkFactory", "pr_createdAt": "2020-05-12T16:47:49Z", "pr_url": "https://github.com/prestodb/presto/pull/14516", "timeline": [{"oid": "6ab2f8342ed3742021873601ba5dd5ed209597e2", "url": "https://github.com/prestodb/presto/commit/6ab2f8342ed3742021873601ba5dd5ed209597e2", "message": "Create DataSink using DataSinkFactory", "committedDate": "2020-05-12T18:29:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NDY5Mg==", "url": "https://github.com/prestodb/presto/pull/14516#discussion_r425254692", "bodyText": "What is the practical motivation from moving these classes from presto-orc?  I don't think this is a good idea to have presto-orc depend on presto-hive-common and hadoop-apache2. What do you think @highker ?\nHave you consider keeping these classes in presto-orc for now? Although I can see that this might not be the best approach for dependency encapsulation, it might be a lesser evil.", "author": "arhimondr", "createdAt": "2020-05-14T16:06:07Z", "path": "presto-orc/pom.xml", "diffHunk": "@@ -82,6 +82,11 @@\n             <artifactId>presto-common</artifactId>\n         </dependency>\n \n+        <dependency>", "originalCommit": "6ab2f8342ed3742021873601ba5dd5ed209597e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI2MDk3MA==", "url": "https://github.com/prestodb/presto/pull/14516#discussion_r425260970", "bodyText": "Correct. presto-orc should have minimal dependency on presto internal concept. Even for presto-have-common, it's good to keep the dependency small.", "author": "highker", "createdAt": "2020-05-14T16:15:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NDY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI4NDk0Mg==", "url": "https://github.com/prestodb/presto/pull/14516#discussion_r425284942", "bodyText": "@arhimondr @highker If presto-hive-common should have minimal dependency on presto internal concept, then the best place to put DataSink concept should be presto-hive,  then both presto-orc and presto-presto-hive-common are happy.  PageFile class would also have no dependency on presto-orc.", "author": "viczhang861", "createdAt": "2020-05-14T16:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NDY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI5ODA5NQ==", "url": "https://github.com/prestodb/presto/pull/14516#discussion_r425298095", "bodyText": "presto-orc depends on DataSink. It looks like it should be visible in there. Is there a good reason why not to keep DataSink in the presto-orc module?", "author": "arhimondr", "createdAt": "2020-05-14T17:08:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NDY5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTMxMTExNw==", "url": "https://github.com/prestodb/presto/pull/14516#discussion_r425311117", "bodyText": "That's right,  my motivation is to remove dependency between presto-orc and PageFile", "author": "viczhang861", "createdAt": "2020-05-14T17:29:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTI1NDY5Mg=="}], "type": "inlineReview"}, {"oid": "2164cf3b087bd503dc1871ad0ab243dbd5311e84", "url": "https://github.com/prestodb/presto/commit/2164cf3b087bd503dc1871ad0ab243dbd5311e84", "message": "Add OutputStreamDataSinkFactory", "committedDate": "2020-05-14T22:31:20Z", "type": "commit"}, {"oid": "2164cf3b087bd503dc1871ad0ab243dbd5311e84", "url": "https://github.com/prestodb/presto/commit/2164cf3b087bd503dc1871ad0ab243dbd5311e84", "message": "Add OutputStreamDataSinkFactory", "committedDate": "2020-05-14T22:31:20Z", "type": "forcePushed"}]}