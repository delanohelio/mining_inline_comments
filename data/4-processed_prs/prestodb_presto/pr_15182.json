{"pr_number": 15182, "pr_title": "Update default Presto Pinot Connector Configs", "pr_createdAt": "2020-09-16T23:24:54Z", "pr_url": "https://github.com/prestodb/presto/pull/15182", "timeline": [{"oid": "62067eaab2b9df6040431a4a198759bfcdb4caab", "url": "https://github.com/prestodb/presto/commit/62067eaab2b9df6040431a4a198759bfcdb4caab", "message": "Adding sample configs as examples for pinot dev env", "committedDate": "2020-09-16T23:25:18Z", "type": "forcePushed"}, {"oid": "1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "url": "https://github.com/prestodb/presto/commit/1a1e894ee6cd2bf1172ad7f5ba9891873c7c0b40", "message": "Adding sample configs as examples for pinot dev env", "committedDate": "2020-09-17T16:21:32Z", "type": "forcePushed"}, {"oid": "421b3b541d10cda4039fb335e7a68dce4904ed4d", "url": "https://github.com/prestodb/presto/commit/421b3b541d10cda4039fb335e7a68dce4904ed4d", "message": "Adding sample configs as examples for pinot dev env", "committedDate": "2020-09-17T22:28:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTUwNg==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809506", "bodyText": "I think this is a bit broken right now: the order of arguments is different from expected by Pinot", "author": "agrawaldevesh", "createdAt": "2020-09-16T23:32:04Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000\n+pinot.allow-multiple-aggregations=true\n+pinot.use-date-trunc=true", "originalCommit": "62067eaab2b9df6040431a4a198759bfcdb4caab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMTEwOA==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491731108", "bodyText": "removed", "author": "xiangfu0", "createdAt": "2020-09-20T20:30:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTUwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTYxMw==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809613", "bodyText": "This is not required with SQL end point", "author": "agrawaldevesh", "createdAt": "2020-09-16T23:32:27Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000\n+pinot.allow-multiple-aggregations=true", "originalCommit": "62067eaab2b9df6040431a4a198759bfcdb4caab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMTE1OQ==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491731159", "bodyText": "removed", "author": "xiangfu0", "createdAt": "2020-09-20T20:31:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTYxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTc5NA==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809794", "bodyText": "I don't recall but is the default not good enough ? This may lead to data loss issues ?", "author": "agrawaldevesh", "createdAt": "2020-09-16T23:33:05Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000\n+pinot.limit-large-for-segment=10000", "originalCommit": "62067eaab2b9df6040431a4a198759bfcdb4caab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMTEyNw==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491731127", "bodyText": "correct, removed it for now", "author": "xiangfu0", "createdAt": "2020-09-20T20:31:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTc5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTk1NQ==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r489809955", "bodyText": "Do we need this ? I think we are trying to reach to broker directly", "author": "agrawaldevesh", "createdAt": "2020-09-16T23:33:38Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,9 @@\n+connector.name=pinot\n+pinot.controller-urls=localhost:9000\n+pinot.controller-rest-service=localhost:9000", "originalCommit": "62067eaab2b9df6040431a4a198759bfcdb4caab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMTE1MA==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491731150", "bodyText": "it's not required, I think only uber need this.", "author": "xiangfu0", "createdAt": "2020-09-20T20:31:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgwOTk1NQ=="}], "type": "inlineReview"}, {"oid": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "url": "https://github.com/prestodb/presto/commit/8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "message": "Adding sample configs as examples for pinot dev env", "committedDate": "2020-09-20T20:30:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMjkxMA==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491732910", "bodyText": "Since we are anyway filing a prestodb diff here: How about we make these default set in the code itself and thin this config file even more ? I think the only reason not to do that would be that these settings are only supported on a newer Pinot cluster. But that is also true of this 'sample config' file.\nIf you do end up moving these configs there, we can also add this comment Pinot version >= 0.4.0 is required to the PinotConfig.java file.", "author": "agrawaldevesh", "createdAt": "2020-09-20T20:50:35Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,11 @@\n+connector.name=pinot\n+\n+pinot.controller-urls=localhost:9000\n+\n+# Infer Pinot time fields to Presto Date/Timestamp type\n+pinot.infer-date-type-in-schema=true\n+pinot.infer-timestamp-type-in-schema=true\n+\n+# Use Pinot SQL endpoint for broker queries with aggregation pushdown.\n+# Pinot version >= 0.4.0 is required.\n+pinot.use-pinot-sql-for-broker-queries=true", "originalCommit": "8a1c467d03c47ce4c7d13fd5aa0f5862fc553a07", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNDU3Mg==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491734572", "bodyText": "done", "author": "xiangfu0", "createdAt": "2020-09-20T21:06:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMjkxMA=="}], "type": "inlineReview"}, {"oid": "3a50ead1664e840fd5dc1a911890523929ded196", "url": "https://github.com/prestodb/presto/commit/3a50ead1664e840fd5dc1a911890523929ded196", "message": "Adding sample configs as examples for pinot dev env", "committedDate": "2020-09-20T21:02:54Z", "type": "forcePushed"}, {"oid": "92dfbc66cb2cbff70247efe806017f96c5ee19bf", "url": "https://github.com/prestodb/presto/commit/92dfbc66cb2cbff70247efe806017f96c5ee19bf", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env.", "committedDate": "2020-09-20T21:03:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNjQ0Mg==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491736442", "bodyText": "So you think that these should continue to remain as default false ? What Pinot version were these introduced in ? Is it >= 0.4.0 ? (ie were they introduced in the same version as the SQL end point).", "author": "agrawaldevesh", "createdAt": "2020-09-20T21:26:55Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,7 @@\n+connector.name=pinot\n+\n+pinot.controller-urls=localhost:9000\n+\n+# Infer Pinot time fields to Presto Date/Timestamp type\n+pinot.infer-date-type-in-schema=true\n+pinot.infer-timestamp-type-in-schema=true", "originalCommit": "92dfbc66cb2cbff70247efe806017f96c5ee19bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczODY0MQ==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491738641", "bodyText": "They are introduced in Pinot 0.3.0, just if we turn these configs off, those fields will be treated as INT or LONG or VARCHAR.\nI\u2019m also fine to make them default to be true.", "author": "xiangfu0", "createdAt": "2020-09-20T21:50:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNjQ0Mg=="}], "type": "inlineReview"}, {"oid": "2f21657e3fae5c1adfc0945a370731fe7131bfec", "url": "https://github.com/prestodb/presto/commit/2f21657e3fae5c1adfc0945a370731fe7131bfec", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env.", "committedDate": "2020-09-20T21:54:39Z", "type": "forcePushed"}, {"oid": "14be108a991e1d0dbbde26f0949e8dde06ece182", "url": "https://github.com/prestodb/presto/commit/14be108a991e1d0dbbde26f0949e8dde06ece182", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env.", "committedDate": "2020-09-20T23:03:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTc0NjIxOQ==", "url": "https://github.com/prestodb/presto/pull/15182#discussion_r491746219", "bodyText": "No newline at the end of file", "author": "agrawaldevesh", "createdAt": "2020-09-20T23:12:16Z", "path": "presto-main/etc/catalog/pinot.properties", "diffHunk": "@@ -0,0 +1,4 @@\n+connector.name=pinot\n+\n+# Pinot controller endpoint\n+pinot.controller-urls=localhost:9000", "originalCommit": "14be108a991e1d0dbbde26f0949e8dde06ece182", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "197db74090a05ce8f4c86ac8b3a47fb78628c8be", "url": "https://github.com/prestodb/presto/commit/197db74090a05ce8f4c86ac8b3a47fb78628c8be", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env.", "committedDate": "2020-09-20T23:13:07Z", "type": "forcePushed"}, {"oid": "94b4bfbdb316062c60baeaad8327ee942f639d0c", "url": "https://github.com/prestodb/presto/commit/94b4bfbdb316062c60baeaad8327ee942f639d0c", "message": "Update Presto pinot connector default configs and add sample configs as examples for pinot dev env.", "committedDate": "2020-09-21T02:35:14Z", "type": "forcePushed"}, {"oid": "89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "url": "https://github.com/prestodb/presto/commit/89628b2558a03775c03ab0b56a5f4d55b66cdb6a", "message": "Update default Presto Pinot Connector Configs", "committedDate": "2020-09-21T04:47:52Z", "type": "forcePushed"}, {"oid": "e26df28eb2a1b600dd6116170ea1bda813c2208c", "url": "https://github.com/prestodb/presto/commit/e26df28eb2a1b600dd6116170ea1bda813c2208c", "message": "Update default Presto Pinot Connector Configs", "committedDate": "2020-09-21T05:55:17Z", "type": "forcePushed"}, {"oid": "30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "url": "https://github.com/prestodb/presto/commit/30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "message": "Update default Presto Pinot Connector Configs", "committedDate": "2020-09-21T15:28:29Z", "type": "commit"}, {"oid": "30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "url": "https://github.com/prestodb/presto/commit/30eeb2b29bb29ba9af5ea8fdc2b275de3b042bf4", "message": "Update default Presto Pinot Connector Configs", "committedDate": "2020-09-21T15:28:29Z", "type": "forcePushed"}]}