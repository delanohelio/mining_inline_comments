{"pr_number": 15022, "pr_title": "Move QueryNotAdequatelyPushedDownErrorCode to PinotErrorCode", "pr_createdAt": "2020-08-13T09:15:42Z", "pr_url": "https://github.com/prestodb/presto/pull/15022", "timeline": [{"oid": "687405273337e690962d758805a502d3d7cd25e0", "url": "https://github.com/prestodb/presto/commit/687405273337e690962d758805a502d3d7cd25e0", "message": "Move QueryNotAdequatelyPushedDownErrorCode to PinotErrorCode", "committedDate": "2020-08-13T09:17:38Z", "type": "forcePushed"}, {"oid": "c29e7cf057f00287361018ecea3b4b90d35c668e", "url": "https://github.com/prestodb/presto/commit/c29e7cf057f00287361018ecea3b4b90d35c668e", "message": "Move QueryNotAdequatelyPushedDownErrorCode to PinotErrorCode", "committedDate": "2020-08-13T10:18:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTU4Nw==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470159587", "bodyText": "Good idea to not use 13 :-P", "author": "agrawaldevesh", "createdAt": "2020-08-13T18:26:33Z", "path": "presto-pinot-toolkit/src/main/java/com/facebook/presto/pinot/PinotErrorCode.java", "diffHunk": "@@ -36,6 +37,7 @@\n     PINOT_INVALID_CONFIGURATION(10, INTERNAL_ERROR),\n     PINOT_DATA_FETCH_EXCEPTION(11, EXTERNAL, true),\n     PINOT_REQUEST_GENERATOR_FAILURE(12, INTERNAL_ERROR), // Unable to generate Pinot request\n+    PINOT_PUSH_DOWN_QUERY_NOT_PRESENT(20, USER_ERROR),", "originalCommit": "c29e7cf057f00287361018ecea3b4b90d35c668e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIyMTU1Ng==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470221556", "bodyText": ":) wanna start the pushdown related error code with 20+", "author": "xiangfu0", "createdAt": "2020-08-13T20:14:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE1OTU4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDAxOQ==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470160019", "bodyText": "Can you also delete the comment for this line. It is redundant.", "author": "agrawaldevesh", "createdAt": "2020-08-13T18:27:24Z", "path": "presto-pinot-toolkit/src/main/java/com/facebook/presto/pinot/PinotErrorCode.java", "diffHunk": "@@ -36,6 +37,7 @@\n     PINOT_INVALID_CONFIGURATION(10, INTERNAL_ERROR),\n     PINOT_DATA_FETCH_EXCEPTION(11, EXTERNAL, true),\n     PINOT_REQUEST_GENERATOR_FAILURE(12, INTERNAL_ERROR), // Unable to generate Pinot request", "originalCommit": "c29e7cf057f00287361018ecea3b4b90d35c668e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIyNDM5Nw==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470224397", "bodyText": "removed", "author": "xiangfu0", "createdAt": "2020-08-13T20:20:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDAxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDUzMQ==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470160531", "bodyText": "Is QueryNotAdequatelyPushedDownException created any where else ? Should we bury the error code PinotErrorCode.PINOT_PUSH_DOWN_QUERY_NOT_PRESENT inside the constructor then ?", "author": "agrawaldevesh", "createdAt": "2020-08-13T18:28:25Z", "path": "presto-pinot-toolkit/src/main/java/com/facebook/presto/pinot/PinotSplitManager.java", "diffHunk": "@@ -183,7 +160,7 @@ public ConnectorSplitSource getSplits(\n     {\n         PinotTableLayoutHandle pinotLayoutHandle = (PinotTableLayoutHandle) layout;\n         PinotTableHandle pinotTableHandle = pinotLayoutHandle.getTable();\n-        Supplier<PrestoException> errorSupplier = () -> new QueryNotAdequatelyPushedDownException(QueryNotAdequatelyPushedDownErrorCode.PQL_NOT_PRESENT, pinotTableHandle, connectorId);\n+        Supplier<PrestoException> errorSupplier = () -> new QueryNotAdequatelyPushedDownException(PinotErrorCode.PINOT_PUSH_DOWN_QUERY_NOT_PRESENT, pinotTableHandle, connectorId);", "originalCommit": "c29e7cf057f00287361018ecea3b4b90d35c668e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDIyMjU4MA==", "url": "https://github.com/prestodb/presto/pull/15022#discussion_r470222580", "bodyText": "My feeling  is that this error code is somehow very high level. We should have more detailed errors in the future. So prefer having an error code here.", "author": "xiangfu0", "createdAt": "2020-08-13T20:16:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDE2MDUzMQ=="}], "type": "inlineReview"}, {"oid": "188b9330ba1013e63d3b75db2a659c38e640fefb", "url": "https://github.com/prestodb/presto/commit/188b9330ba1013e63d3b75db2a659c38e640fefb", "message": "Move QueryNotAdequatelyPushedDownErrorCode to PinotErrorCode", "committedDate": "2020-08-13T20:17:02Z", "type": "commit"}, {"oid": "188b9330ba1013e63d3b75db2a659c38e640fefb", "url": "https://github.com/prestodb/presto/commit/188b9330ba1013e63d3b75db2a659c38e640fefb", "message": "Move QueryNotAdequatelyPushedDownErrorCode to PinotErrorCode", "committedDate": "2020-08-13T20:17:02Z", "type": "forcePushed"}]}