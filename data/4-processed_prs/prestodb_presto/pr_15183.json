{"pr_number": 15183, "pr_title": "Fix compiler error in LambdaBytecodeGenerator", "pr_createdAt": "2020-09-16T23:57:01Z", "pr_url": "https://github.com/prestodb/presto/pull/15183", "timeline": [{"oid": "b26fb688af6c94036cdf2add7bbe931be857af88", "url": "https://github.com/prestodb/presto/commit/b26fb688af6c94036cdf2add7bbe931be857af88", "message": "Fix compiler error in LambdaBytecodeGenerator\n\nWhen there are lambda expressions from different SQL functions, and they are\ncompiled into the same class due to CSE, we need to make sure the generated\nfunction names are always unique.", "committedDate": "2020-09-16T23:48:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgxOTMwOA==", "url": "https://github.com/prestodb/presto/pull/15183#discussion_r489819308", "bodyText": "Why are we disabling inline sql functions here? Changes with inline sql functions enabled will not be tested then?", "author": "caithagoras", "createdAt": "2020-09-17T00:05:38Z", "path": "presto-tests/src/test/java/com/facebook/presto/tests/TestSqlFunctions.java", "diffHunk": "@@ -50,6 +50,7 @@ private static QueryRunner createQueryRunner()\n                     .setSchema(TINY_SCHEMA_NAME)\n                     .build();\n             DistributedQueryRunner queryRunner = DistributedQueryRunner.builder(session)\n+                    .setExtraProperties(ImmutableMap.of(\"inline-sql-functions\", \"false\"))", "originalCommit": "b26fb688af6c94036cdf2add7bbe931be857af88", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgyMjEyNQ==", "url": "https://github.com/prestodb/presto/pull/15183#discussion_r489822125", "bodyText": "Cause the bug only exists if we compile SQL function at execution time. This class is in general written to test SQL function. Inlined SQL functions are pretty much just macros and they work as normal expressions during most of planning and runtime. Thus I just disabled this by default. The inline sql function tests are in TestInlineSqlFunctions.", "author": "rongrong", "createdAt": "2020-09-17T00:16:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTgxOTMwOA=="}], "type": "inlineReview"}]}