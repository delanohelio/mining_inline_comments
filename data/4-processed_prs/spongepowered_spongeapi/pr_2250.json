{"pr_number": 2250, "pr_title": "API8 DataStores", "pr_createdAt": "2020-10-20T15:04:04Z", "pr_url": "https://github.com/SpongePowered/SpongeAPI/pull/2250", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY0MTYwNA==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2250#discussion_r510641604", "bodyText": "Are you intending to be able to call DataRegistration.of(Keys.FOO)? because the varargs can have a length of 0 by omitting the argument altogether in this case (this is why Cause historically always had an Object, Object... method signature, to ensure there's at least one argument passed in.", "author": "gabizou", "createdAt": "2020-10-23T06:00:36Z", "path": "src/main/java/org/spongepowered/api/data/DataRegistration.java", "diffHunk": "@@ -118,6 +120,21 @@ static Builder builder() {\n      */\n     PluginContainer getPluginContainer();\n \n+    /**\n+     * Creates a DataRegistration for a single key with a DataStore for given data-holders.\n+     *\n+     *\n+     * @param key the data key\n+     * @param dataHolders the data-holders\n+     * @param <T> the keys value type\n+     *\n+     * @return The built data registration\n+     */\n+    static <T> DataRegistration of(Key<Value<T>> key, Class<? extends DataHolder>... dataHolders) {", "originalCommit": "a628398dac00f405a269fe766f8159a23a696976", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY0NDA0NQ==", "url": "https://github.com/SpongePowered/SpongeAPI/pull/2250#discussion_r510644045", "bodyText": "Much like the comment above, may want to mention that the varargs of types is optional to specify what types the datastore will support?", "author": "gabizou", "createdAt": "2020-10-23T06:03:03Z", "path": "src/main/java/org/spongepowered/api/data/persistence/DataStore.java", "diffHunk": "@@ -115,18 +117,36 @@ default DataView serialize(DataManipulator dataManipulator) {\n      * Provides a {@link DataStore} for a single {@link Key}.\n      * <p>\n      *     Note that default deserializers do not support {@link Collection}, {@link Map} or Array types!\n-     *     Use {@link Builder#key(Key, BiConsumer, Function)} for these.\n+     *     Use {@link Builder.SerializersStep#key(Key, BiConsumer, Function)} for these.\n      * </p>\n      *\n      * @param key The data key\n      * @param dataQuery The dataQuery to serialize this key under\n-     * @param typeToken The dataHolder type\n+     * @param typeTokens The dataHolder types\n      *\n      * @return The new data store\n      */\n     @SafeVarargs\n-    static <T> DataStore of(Key<Value<T>> key, DataQuery dataQuery, TypeToken<? extends DataHolder>... typeToken) {\n-        return builder().key(key, dataQuery).holder(typeToken).build();\n+    static <T> DataStore of(Key<Value<T>> key, DataQuery dataQuery, TypeToken<? extends DataHolder>... typeTokens) {\n+        return builder().pluginData(key.getKey()).holder(typeTokens).key(key, dataQuery).build();\n+    }\n+\n+    /**\n+     * Provides a {@link DataStore} for a single {@link Key}.\n+     * <p>\n+     *     Note that default deserializers do not support {@link Collection}, {@link Map} or Array types!\n+     *     Use {@link Builder.SerializersStep#key(Key, BiConsumer, Function)} for these.\n+     * </p>", "originalCommit": "a628398dac00f405a269fe766f8159a23a696976", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0e8cecc7cfc2751b692f053d72cb4f686aca573f", "url": "https://github.com/SpongePowered/SpongeAPI/commit/0e8cecc7cfc2751b692f053d72cb4f686aca573f", "message": "adjust DataRegistrations for impl\nDataStore builder with Steps\nAdded convenience methods", "committedDate": "2020-10-24T11:03:28Z", "type": "forcePushed"}, {"oid": "8a2ff2b96c348a4a573c92dc99267d804137c00d", "url": "https://github.com/SpongePowered/SpongeAPI/commit/8a2ff2b96c348a4a573c92dc99267d804137c00d", "message": "adjust DataRegistrations for impl\nDataStore builder with Steps\nAdded convenience methods", "committedDate": "2020-10-31T21:28:23Z", "type": "commit"}, {"oid": "8a2ff2b96c348a4a573c92dc99267d804137c00d", "url": "https://github.com/SpongePowered/SpongeAPI/commit/8a2ff2b96c348a4a573c92dc99267d804137c00d", "message": "adjust DataRegistrations for impl\nDataStore builder with Steps\nAdded convenience methods", "committedDate": "2020-10-31T21:28:23Z", "type": "forcePushed"}]}