{"pr_number": 6523, "pr_title": "Add a way to create Music Discs without requiring a SoundEvent", "pr_createdAt": "2020-02-19T14:31:57Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMzMTY5Mw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r381331693", "bodyText": "We don't remove vanilla fields. That's a major binary break, and wouldn't be wanted even if we weren't in the no-breaking-changes stage.\nI believe that alone makes this PR in the current state a no-go.\nEDIT: oops! I misread the change. it's not removing a field, it's just removing a final. This should be in an AT, not patch. My comment about what I think the right solution would be still stands, though.", "author": "gigaherz", "createdAt": "2020-02-19T14:38:27Z", "path": "patches/minecraft/net/minecraft/item/MusicDiscItem.java.patch", "diffHunk": "@@ -0,0 +1,60 @@\n+--- a/net/minecraft/item/MusicDiscItem.java\n++++ b/net/minecraft/item/MusicDiscItem.java\n+@@ -23,13 +23,12 @@\n+ public class MusicDiscItem extends Item {\n+    private static final Map<SoundEvent, MusicDiscItem> field_150928_b = Maps.newHashMap();\n+    private final int field_195977_c;\n+-   private final SoundEvent field_185076_b;", "originalCommit": "bcc3a5bdb0fd8f7786d999fddf5425d92f39cc16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ0NTI3MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r381445271", "bodyText": "This is now outdated, since the field isn't definalized anymore", "author": "TheSilkMiner", "createdAt": "2020-02-19T17:57:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMzMTY5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ0Njk4Mw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r381446983", "bodyText": "There is no reason to move the bracket onto a new line. (patches are supposed to be as \"simple\" as possible)", "author": "pupnewfster", "createdAt": "2020-02-19T18:00:55Z", "path": "patches/minecraft/net/minecraft/client/renderer/WorldRenderer.java.patch", "diffHunk": "@@ -85,7 +85,56 @@\n        if (this.field_72777_q.field_71441_e.field_73011_w.func_186058_p() == DimensionType.field_223229_c_) {\n           this.func_228444_b_(p_228424_1_);\n        } else if (this.field_72777_q.field_71441_e.field_73011_w.func_76569_d()) {\n-@@ -2283,8 +2298,8 @@\n+@@ -1977,25 +1992,31 @@\n+       this.field_175008_n.func_217628_a(p_215319_1_, p_215319_2_, p_215319_3_, p_215319_4_);\n+    }\n+ \n+-   public void func_184377_a(@Nullable SoundEvent p_184377_1_, BlockPos p_184377_2_) {\n+-      ISound isound = this.field_147593_P.get(p_184377_2_);\n++   @Deprecated // Forge: use item aware function below\n++   public void func_184377_a(@Nullable SoundEvent p_184377_1_, BlockPos p_184377_2_)\n++   {", "originalCommit": "12a127dd1df7374473dd9e7f45f80eeafe338ac8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d515fb460f95f12e769affd4a5390f1a567148e8", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/d515fb460f95f12e769affd4a5390f1a567148e8", "message": "Fix OGG file corruption\n\nI actually have no idea why or how, but... no OGG file no test mod so...\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-03-07T13:09:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0NzMwNA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r393547304", "bodyText": "Merge error", "author": "LexManos", "createdAt": "2020-03-17T09:33:01Z", "path": "src/main/resources/forge.exc", "diffHunk": "@@ -118,3 +120,10 @@ net/minecraft/world/storage/loot/LootEntryEmpty.<init>(II[Lnet/minecraft/world/s\n net/minecraft/world/storage/loot/LootEntryItem.<init>(Lnet/minecraft/item/Item;II[Lnet/minecraft/world/storage/loot/functions/LootFunction;[Lnet/minecraft/world/storage/loot/conditions/LootCondition;Ljava/lang/String;)V=|p_i46644_1_,p_i46644_2_,p_i46644_3_,p_i46644_4_,p_i46644_5_,entryName\n net/minecraft/world/storage/loot/LootEntryTable.<init>(Lnet/minecraft/util/ResourceLocation;II[Lnet/minecraft/world/storage/loot/conditions/LootCondition;Ljava/lang/String;)V=|p_i46639_1_,p_i46639_2_,p_i46639_3_,p_i46639_4_,entryName\n net/minecraft/world/storage/loot/LootPool.<init>([Lnet/minecraft/world/storage/loot/LootEntry;[Lnet/minecraft/world/storage/loot/conditions/LootCondition;Lnet/minecraft/world/storage/loot/RandomValueRange;Lnet/minecraft/world/storage/loot/RandomValueRange;Ljava/lang/String;)V=|p_i46643_1_,p_i46643_2_,p_i46643_3_,p_i46643_4_\n+<<<<<<< HEAD", "originalCommit": "d515fb460f95f12e769affd4a5390f1a567148e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0ODQxMA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r393548410", "bodyText": "This is just ugly, Just have\n private static final RegisteryObject<SoundEvent> TEST_SOUND = ... \n private static final RegistryObject<Item> TEST_DISC = ...\n\nAt the top", "author": "LexManos", "createdAt": "2020-03-17T09:35:01Z", "path": "src/test/java/net/minecraftforge/debug/item/MusicDiscTest.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package net.minecraftforge.debug.item;\n+\n+import net.minecraft.item.Item;\n+import net.minecraft.item.MusicDiscItem;\n+import net.minecraft.item.Rarity;\n+import net.minecraft.util.ResourceLocation;\n+import net.minecraft.util.SoundEvent;\n+import net.minecraftforge.eventbus.api.IEventBus;\n+import net.minecraftforge.fml.RegistryObject;\n+import net.minecraftforge.fml.common.Mod;\n+import net.minecraftforge.fml.javafmlmod.FMLJavaModLoadingContext;\n+import net.minecraftforge.registries.DeferredRegister;\n+import net.minecraftforge.registries.ForgeRegistries;\n+\n+@Mod(MusicDiscTest.MOD_ID)\n+@Mod.EventBusSubscriber(bus = Mod.EventBusSubscriber.Bus.MOD, modid = MusicDiscTest.MOD_ID)\n+public class MusicDiscTest\n+{\n+    static final String MOD_ID = \"music_disc_test\";\n+\n+    private static final DeferredRegister<Item> ITEMS = new DeferredRegister<>(ForgeRegistries.ITEMS, MOD_ID);\n+    private static final DeferredRegister<SoundEvent> SOUND_EVENTS = new DeferredRegister<>(ForgeRegistries.SOUND_EVENTS, MOD_ID);\n+\n+    public MusicDiscTest()\n+    {\n+        final IEventBus modBus = FMLJavaModLoadingContext.get().getModEventBus();\n+        ITEMS.register(modBus);\n+        SOUND_EVENTS.register(modBus);\n+    }\n+\n+    static", "originalCommit": "d515fb460f95f12e769affd4a5390f1a567148e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0ODgyMw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r393548823", "bodyText": "Data generators would be nice for all the jsons", "author": "LexManos", "createdAt": "2020-03-17T09:35:44Z", "path": "src/test/resources/assets/music_disc_test/sounds.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"test_sound_event\": {", "originalCommit": "d515fb460f95f12e769affd4a5390f1a567148e8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTk3ODc3NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r395978775", "bodyText": "Should I create a new data provider for this situation in this PR or should I open up a new one with the specified addition?", "author": "TheSilkMiner", "createdAt": "2020-03-21T09:51:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0ODgyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTk1MDEwMg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r425950102", "bodyText": "Make a new PR for the added data gen.", "author": "LexManos", "createdAt": "2020-05-15T17:36:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0ODgyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzU0OTEwNw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6523#discussion_r393549107", "bodyText": "Better to just reuse a vanilla sound so we don't have to deal with having other people's licenses and data in our repo.", "author": "LexManos", "createdAt": "2020-03-17T09:36:17Z", "path": "src/test/resources/assets/music_disc_test/sounds.json", "diffHunk": "@@ -0,0 +1,13 @@\n+{\n+  \"test_sound_event\": {\n+    \"sounds\": [\n+      {\n+        \"name\": \"music_disc_test:example_ogg\",\n+        \"stream\": true,\n+        \"__content\": \"First 10 seconds of 'The Ice Giants' by Kevin MacLeod\",\n+        \"__link\": \"https://incompetech.filmmusic.io/song/5745-the-ice-giants\",\n+        \"__license\": \"http://creativecommons.org/licenses/by/4.0/\"", "originalCommit": "d515fb460f95f12e769affd4a5390f1a567148e8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c2c60a3a4c6ab0a624e29624ba2fa394983dedde", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c2c60a3a4c6ab0a624e29624ba2fa394983dedde", "message": "Fix merge and code style issues\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-03-21T09:56:50Z", "type": "forcePushed"}, {"oid": "acf952a036a2c13ecb7466e61267fbc1e76e326a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/acf952a036a2c13ecb7466e61267fbc1e76e326a", "message": "Fix merge and code style issues\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-03-21T10:02:32Z", "type": "forcePushed"}, {"oid": "80ba2547d3fcb40aff8d4f2dfd5517ff913ae07b", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/80ba2547d3fcb40aff8d4f2dfd5517ff913ae07b", "message": "Patch Music Disc not to require a SoundEvent for construction\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:09:14Z", "type": "commit"}, {"oid": "a1a3025b745f2ab4647b599bb63ff186ab037d15", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a1a3025b745f2ab4647b599bb63ff186ab037d15", "message": "Add test mod\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:31Z", "type": "commit"}, {"oid": "2e356e3381c6dea6c4b07998383dd834368cd93a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/2e356e3381c6dea6c4b07998383dd834368cd93a", "message": "Avoid changing the type of a vanilla field\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:34Z", "type": "commit"}, {"oid": "1178d941b11cc7a74a21ff391011cb40a4b261b1", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1178d941b11cc7a74a21ff391011cb40a4b261b1", "message": "Rework patches as suggested by code review\n\nVanilla logic is now mostly intact and doesn't require reworking of\nfields and definalizing. WorldRenderer has been patched not to be stupid\nand use the item it has already\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:35Z", "type": "commit"}, {"oid": "ac6d9e1c1d854c5e204524e67fe95de3d0932bbf", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/ac6d9e1c1d854c5e204524e67fe95de3d0932bbf", "message": "Rework test mod to account for changes in patches\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:36Z", "type": "commit"}, {"oid": "1830490b12f8340be5839bed0d0df923828548b9", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/1830490b12f8340be5839bed0d0df923828548b9", "message": "Reduced patch size\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:36Z", "type": "commit"}, {"oid": "f7cef5bcb83ce76f954ebac1d14acf7b887606d5", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f7cef5bcb83ce76f954ebac1d14acf7b887606d5", "message": "Fix merge and code style issues\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:10:37Z", "type": "commit"}, {"oid": "243a86aa429eb5c285643e3409df2f10435fd1cc", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/243a86aa429eb5c285643e3409df2f10435fd1cc", "message": "Run license check\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:31:29Z", "type": "commit"}, {"oid": "243a86aa429eb5c285643e3409df2f10435fd1cc", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/243a86aa429eb5c285643e3409df2f10435fd1cc", "message": "Run license check\n\nSigned-off-by: TheSilkMiner <thesilkminer@outlook.com>", "committedDate": "2020-05-09T09:31:29Z", "type": "forcePushed"}, {"oid": "0f05137e59195fd14de48ab0ab84bff9e82feda9", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0f05137e59195fd14de48ab0ab84bff9e82feda9", "message": "Merge branch '1.15.x' into feature/music-disc-sound-delegate", "committedDate": "2020-05-15T17:37:00Z", "type": "commit"}]}