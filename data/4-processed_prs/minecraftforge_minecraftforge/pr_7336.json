{"pr_number": 7336, "pr_title": "Make Biome.Climate and BiomeAmbiance usable from BiomeLoadingEvent", "pr_createdAt": "2020-09-17T17:11:42Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336", "timeline": [{"oid": "0b4fbc612804b412025291a2e685c649cc92b57a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0b4fbc612804b412025291a2e685c649cc92b57a", "message": "Make BiomeLoadingEvent's reference to climate properties usable by adding a builder for climate to the loading event.", "committedDate": "2020-09-17T17:06:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3NDgyNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490474826", "bodyText": "This should be inside the hook like everything else is...", "author": "LexManos", "createdAt": "2020-09-17T18:38:32Z", "path": "patches/minecraft/net/minecraft/world/biome/Biome.java.patch", "diffHunk": "@@ -16,7 +16,7 @@\n -      })).apply(p_235064_0_, Biome::new);\n +      }), ResourceLocation.field_240908_a_.fieldOf(\"forge:registry_name\").forGetter(Biome::getRegistryName))\n +      .apply(p_235064_0_, (climate, category, depth, scale, effects, gen, spawns, name) ->\n-+          net.minecraftforge.common.ForgeHooks.enhanceBiome(name, climate, category, depth, scale, effects, gen, spawns, p_235064_0_, Biome::new));\n++          net.minecraftforge.common.ForgeHooks.enhanceBiome(name, new net.minecraftforge.common.world.BiomeClimateBuilder(climate.field_242460_b, climate.field_242461_c, climate.field_242462_d, climate.field_242463_e), category, depth, scale, effects, gen, spawns, p_235064_0_, Biome::new));", "originalCommit": "0b4fbc612804b412025291a2e685c649cc92b57a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3Nzg0OQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490477849", "bodyText": "The reason I did it this way was to avoid ATing and/or patching accessors for all the fields in Biome.Climate but I can change it if that's preferred.", "author": "alcatrazEscapee", "createdAt": "2020-09-17T18:43:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3NDgyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3ODcwNQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490478705", "bodyText": "They are final fields, so you could just AT them. It is better practice to add getters, but this is minecraft we have to have a happy middle. Plus, we need access to these values somehow to let modders make decisions on it.", "author": "LexManos", "createdAt": "2020-09-17T18:45:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3NDgyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ4MDk2OA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490480968", "bodyText": "If that's the case, I could axe the entire builder, AT all the fields and expose the constructor - would that be a preferred solution (for this and potentially BiomeAmbiance)? Or would it be better to expose a builder in the event rather than not.", "author": "alcatrazEscapee", "createdAt": "2020-09-17T18:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3NDgyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ4MjI3Nw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490482277", "bodyText": "Im not opposed to the builder, as it lets people just edit one value without having to rebuild the object. But it is a large section of code that we'd have to keep maintaining.\nSo I think public {still final} fields, and public constructor is good for now.\nIf modders wanna replace just one value they can copy the others from the existing one in the event.", "author": "LexManos", "createdAt": "2020-09-17T18:52:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ3NDgyNg=="}], "type": "inlineReview"}, {"oid": "0686026220eba860197b433936d0767722348ff9", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0686026220eba860197b433936d0767722348ff9", "message": "Just AT all the fields that modders need to be able to construct their own instances instead. Also add AT entries required to make BiomeAmbience usable as well.", "committedDate": "2020-09-17T19:31:29Z", "type": "commit"}, {"oid": "50990aefa23996b407e0c5440eb6adfbee05ddeb", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/50990aefa23996b407e0c5440eb6adfbee05ddeb", "message": "Remove unnessecary change.", "committedDate": "2020-09-17T19:32:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU1NDkzMQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490554931", "bodyText": "All of these have getters, you need to remove the sided annotations with the SAS file.", "author": "LexManos", "createdAt": "2020-09-17T20:51:49Z", "path": "src/main/resources/META-INF/accesstransformer.cfg", "diffHunk": "@@ -299,6 +299,23 @@ public net.minecraft.world.World field_73004_o #rainingStrength\n public net.minecraft.world.World field_73017_q #thunderingStrength\n public net.minecraft.world.World field_73018_p #prevThunderingStrength\n public net.minecraft.world.biome.Biome$Climate\n+public net.minecraft.world.biome.Biome$Climate <init>(Lnet/minecraft/world/biome/Biome$RainType;FLnet/minecraft/world/biome/Biome$TemperatureModifier;F)V\n+public net.minecraft.world.biome.Biome$Climate field_242460_b # precipitation\n+public net.minecraft.world.biome.Biome$Climate field_242461_c # temperature\n+public net.minecraft.world.biome.Biome$Climate field_242462_d # temperatureModifier\n+public net.minecraft.world.biome.Biome$Climate field_242463_e # downfall\n+public net.minecraft.world.biome.BiomeAmbience field_235205_b_ # fogColor\n+public net.minecraft.world.biome.BiomeAmbience field_235206_c_ # waterColor\n+public net.minecraft.world.biome.BiomeAmbience field_235207_d_ # waterFogColor\n+public net.minecraft.world.biome.BiomeAmbience field_235208_e_ # particle\n+public net.minecraft.world.biome.BiomeAmbience field_235209_f_ # ambientSound", "originalCommit": "50990aefa23996b407e0c5440eb6adfbee05ddeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU2MTg0MA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7336#discussion_r490561840", "bodyText": "Had no idea that was a thing. Well, TIL.", "author": "alcatrazEscapee", "createdAt": "2020-09-17T21:05:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDU1NDkzMQ=="}], "type": "inlineReview"}, {"oid": "a2fbec0f0e690a806d4c6f6fec28cfc06717b80a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a2fbec0f0e690a806d4c6f6fec28cfc06717b80a", "message": "Move AT entries for things that had client only accessors to forge.sas", "committedDate": "2020-09-17T21:11:41Z", "type": "commit"}]}