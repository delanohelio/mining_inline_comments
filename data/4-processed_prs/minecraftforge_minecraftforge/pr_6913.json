{"pr_number": 6913, "pr_title": "Load Modded Datapacks in DatapackScreen, before world creation", "pr_createdAt": "2020-07-03T20:42:39Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913", "timeline": [{"oid": "cdfe95b8d3c5729268bbab1814ca56f1b87a07f8", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/cdfe95b8d3c5729268bbab1814ca56f1b87a07f8", "message": "load forge datapack\n\nremoved duplicate creation of dye tags\ninit forge tags on bootstrap\nUpdated the mcmeta files", "committedDate": "2020-07-03T19:58:54Z", "type": "commit"}, {"oid": "5afc3d0d229714197ee524e2de46f7f2160910d8", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5afc3d0d229714197ee524e2de46f7f2160910d8", "message": "Merge remote-tracking branch 'MinecraftForge/1.16.x' into datapack-validation", "committedDate": "2020-07-09T11:18:27Z", "type": "commit"}, {"oid": "c942615864d56fd57aa76a9057cb61edc8c4653e", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c942615864d56fd57aa76a9057cb61edc8c4653e", "message": "Modify the default datapack check to incorporate mods", "committedDate": "2020-07-09T23:53:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MTczMg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453981732", "bodyText": "This needs to\n\nNot be a random method shoved onto DatapackCodec\nMake sure all uses of the DatapackCodec.field_234880_a_ uses our default mod pack list.\nNot change this entry every time the button is pressed, but instead do it once in the initalizer and use the argument passed into the constructor like vanilla does.", "author": "LexManos", "createdAt": "2020-07-13T22:30:06Z", "path": "patches/minecraft/net/minecraft/client/gui/screen/CreateWorldScreen.java.patch", "diffHunk": "@@ -0,0 +1,12 @@\n+--- a/net/minecraft/client/gui/screen/CreateWorldScreen.java\n++++ b/net/minecraft/client/gui/screen/CreateWorldScreen.java\n+@@ -384,7 +384,9 @@\n+       if (path != null) {\n+          File file1 = path.toFile();\n+          ResourcePackList<ResourcePackInfo> resourcepacklist = new ResourcePackList<>(ResourcePackInfo::new, new ServerPackFinder(), new FolderPackFinder(file1, IPackNameDecorator.field_232625_a_));\n++         net.minecraftforge.fml.packs.ResourcePackLoader.loadResourcePacks(resourcepacklist, net.minecraftforge.fml.server.ServerLifecycleHooks::buildPackFinder);\n+          resourcepacklist.func_198983_a();\n++         this.field_238933_b_ = DatapackCodec.getModdedDefault();", "originalCommit": "c942615864d56fd57aa76a9057cb61edc8c4653e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MjI2Mg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453982262", "bodyText": "Again, why are you adding a random method onto this random class instead of say... anywhere else we stick random functions like ForgeHooks?", "author": "LexManos", "createdAt": "2020-07-13T22:30:46Z", "path": "patches/minecraft/net/minecraft/util/datafix/codec/DatapackCodec.java.patch", "diffHunk": "@@ -0,0 +1,12 @@\n+--- a/net/minecraft/util/datafix/codec/DatapackCodec.java\n++++ b/net/minecraft/util/datafix/codec/DatapackCodec.java\n+@@ -29,4 +29,9 @@\n+    public List<String> func_234887_b_() {\n+       return this.field_234883_d_;\n+    }\n++\n++   @Deprecated //Forge internal\n++   public static DatapackCodec getModdedDefault() {", "originalCommit": "c942615864d56fd57aa76a9057cb61edc8c4653e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MjcyNQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453982725", "bodyText": "This does absolutely nothing. Congrats you run the static tantalizer of the outer class. It doesn't do anything to the inner classes.", "author": "LexManos", "createdAt": "2020-07-13T22:31:25Z", "path": "src/main/java/net/minecraftforge/common/Tags.java", "diffHunk": "@@ -34,6 +35,8 @@\n \n public class Tags\n {\n+    public static void init () {}; //Dummy init, create the tags so that they are added to their collections.", "originalCommit": "c942615864d56fd57aa76a9057cb61edc8c4653e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4MzY3MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453983671", "bodyText": "I mean, is there a reason for this change? Ya I guess it's a little bit of cleanup making only one instance referenced multiple places. But that doesn't matter. The game will update both just fine.", "author": "LexManos", "createdAt": "2020-07-13T22:32:49Z", "path": "src/main/java/net/minecraftforge/common/Tags.java", "diffHunk": "@@ -153,22 +156,22 @@\n         public static final ITag.INamedTag<Item> DUSTS_GLOWSTONE = tag(\"dusts/glowstone\");\n \n         public static final ITag.INamedTag<Item> DYES = tag(\"dyes\");\n-        public static final ITag.INamedTag<Item> DYES_BLACK = tag(\"dyes/black\");\n-        public static final ITag.INamedTag<Item> DYES_RED = tag(\"dyes/red\");\n-        public static final ITag.INamedTag<Item> DYES_GREEN = tag(\"dyes/green\");\n-        public static final ITag.INamedTag<Item> DYES_BROWN = tag(\"dyes/brown\");\n-        public static final ITag.INamedTag<Item> DYES_BLUE = tag(\"dyes/blue\");\n-        public static final ITag.INamedTag<Item> DYES_PURPLE = tag(\"dyes/purple\");\n-        public static final ITag.INamedTag<Item> DYES_CYAN = tag(\"dyes/cyan\");\n-        public static final ITag.INamedTag<Item> DYES_LIGHT_GRAY = tag(\"dyes/light_gray\");\n-        public static final ITag.INamedTag<Item> DYES_GRAY = tag(\"dyes/gray\");\n-        public static final ITag.INamedTag<Item> DYES_PINK = tag(\"dyes/pink\");\n-        public static final ITag.INamedTag<Item> DYES_LIME = tag(\"dyes/lime\");\n-        public static final ITag.INamedTag<Item> DYES_YELLOW = tag(\"dyes/yellow\");\n-        public static final ITag.INamedTag<Item> DYES_LIGHT_BLUE = tag(\"dyes/light_blue\");\n-        public static final ITag.INamedTag<Item> DYES_MAGENTA = tag(\"dyes/magenta\");\n-        public static final ITag.INamedTag<Item> DYES_ORANGE = tag(\"dyes/orange\");\n-        public static final ITag.INamedTag<Item> DYES_WHITE = tag(\"dyes/white\");\n+        public static final ITag.INamedTag<Item> DYES_BLACK = DyeColor.BLACK.getTag();\n+        public static final ITag.INamedTag<Item> DYES_RED = DyeColor.RED.getTag();\n+        public static final ITag.INamedTag<Item> DYES_GREEN = DyeColor.GREEN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_BROWN = DyeColor.BROWN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_BLUE = DyeColor.BLUE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_PURPLE = DyeColor.PURPLE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_CYAN = DyeColor.CYAN.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIGHT_GRAY = DyeColor.LIGHT_GRAY.getTag();\n+        public static final ITag.INamedTag<Item> DYES_GRAY = DyeColor.GRAY.getTag();\n+        public static final ITag.INamedTag<Item> DYES_PINK = DyeColor.PINK.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIME = DyeColor.LIME.getTag();\n+        public static final ITag.INamedTag<Item> DYES_YELLOW = DyeColor.YELLOW.getTag();\n+        public static final ITag.INamedTag<Item> DYES_LIGHT_BLUE = DyeColor.LIGHT_BLUE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_MAGENTA = DyeColor.MAGENTA.getTag();\n+        public static final ITag.INamedTag<Item> DYES_ORANGE = DyeColor.ORANGE.getTag();\n+        public static final ITag.INamedTag<Item> DYES_WHITE = DyeColor.WHITE.getTag();", "originalCommit": "c942615864d56fd57aa76a9057cb61edc8c4653e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4NTA4Nw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453985087", "bodyText": "Unrelated but sure whatever", "author": "LexManos", "createdAt": "2020-07-13T22:34:49Z", "path": "src/main/resources/pack.mcmeta", "diffHunk": "@@ -1,6 +1,6 @@\n {\n    \"pack\": {\n-      \"pack_format\": 4,\n+      \"pack_format\": 5,\n       \"description\": \"Forge resource pack\"", "originalCommit": "c942615864d56fd57aa76a9057cb61edc8c4653e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk5NTg0Nw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6913#discussion_r453995847", "bodyText": "yeah, the datapack icon was just saying out of date, so fixed it", "author": "Cyborgmas", "createdAt": "2020-07-13T23:03:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzk4NTA4Nw=="}], "type": "inlineReview"}, {"oid": "a0ff06fb03bda3d76839fdb49679965f11067940", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/a0ff06fb03bda3d76839fdb49679965f11067940", "message": "Merge branch '1.16.x' into datapack-validation", "committedDate": "2020-07-13T23:54:23Z", "type": "commit"}, {"oid": "95a5582c9692f70a25dbdd9a9c5ff2fb164ada05", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/95a5582c9692f70a25dbdd9a9c5ff2fb164ada05", "message": "fixes", "committedDate": "2020-07-14T19:08:03Z", "type": "commit"}, {"oid": "eb74b43007a88f1d0647239030791edf4ba3b637", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/eb74b43007a88f1d0647239030791edf4ba3b637", "message": "patch clean up", "committedDate": "2020-07-14T19:15:57Z", "type": "commit"}, {"oid": "c13e9e9fda9cd9711c715cd0819912516ed81e80", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/c13e9e9fda9cd9711c715cd0819912516ed81e80", "message": "Merge branch '1.16.x' into datapack-validation", "committedDate": "2020-07-20T12:59:48Z", "type": "commit"}, {"oid": "e3182da1f6e4c76b6f7827b65fc2b51d7fd6807a", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e3182da1f6e4c76b6f7827b65fc2b51d7fd6807a", "message": "merged", "committedDate": "2020-07-20T13:06:16Z", "type": "commit"}]}