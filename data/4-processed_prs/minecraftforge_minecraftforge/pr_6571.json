{"pr_number": 6571, "pr_title": "Modded Hill Biomes", "pr_createdAt": "2020-03-17T10:34:53Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571", "timeline": [{"oid": "759daeaa6f08ea42374dfe8ed7e987f127d155f4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/759daeaa6f08ea42374dfe8ed7e987f127d155f4", "message": "modded hills biome patch", "committedDate": "2020-03-17T10:11:12Z", "type": "commit"}, {"oid": "5af95ecc1244cf168ea43f1be04edf2e4002bc56", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/5af95ecc1244cf168ea43f1be04edf2e4002bc56", "message": "improvements to the patch", "committedDate": "2020-03-17T10:29:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5NzE1Mg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396097152", "bodyText": "This should default to a simple return null;", "author": "ichttt", "createdAt": "2020-03-22T14:02:28Z", "path": "patches/minecraft/net/minecraft/world/biome/Biome.java.patch", "diffHunk": "@@ -50,11 +50,34 @@\n +      if (this == Biomes.field_76789_p || this == Biomes.field_76788_q) return Biomes.field_76788_q;\n +      return Biomes.field_76781_i;\n +   }\n++\n++   public Biome getHill(net.minecraft.world.gen.INoiseRandom rand) {\n++      if (this == Biomes.field_76769_d) return Biomes.field_76786_s;\n++      if (this == Biomes.field_76767_f) return Biomes.field_76785_t;\n++      if (this == Biomes.field_150583_P) return Biomes.field_150582_Q;\n++      if (this == Biomes.field_150585_R) return Biomes.field_76772_c;\n++      if (this == Biomes.field_76768_g) return Biomes.field_76784_u;\n++      if (this == Biomes.field_150578_U) return Biomes.field_150581_V;\n++      if (this == Biomes.field_150584_S) return Biomes.field_150579_T;\n++      if (this == Biomes.field_76772_c) return rand.func_202696_a(3) == 0 ? Biomes.field_76785_t : Biomes.field_76767_f;\n++      if (this == Biomes.field_76774_n) return Biomes.field_76775_o;\n++      if (this == Biomes.field_76782_w) return Biomes.field_76792_x;\n++      if (this == Biomes.field_222370_aw) return Biomes.field_222371_ax;\n++      if (this == Biomes.field_76771_b) return Biomes.field_150575_M;\n++      if (this == Biomes.field_203615_U) return Biomes.field_203618_X;\n++      if (this == Biomes.field_203616_V) return Biomes.field_203619_Y;\n++      if (this == Biomes.field_76776_l) return Biomes.field_203620_Z;\n++      if (this == Biomes.field_76770_e) return Biomes.field_150580_W;\n++      if (this == Biomes.field_150588_X) return Biomes.field_150587_Y;\n++      if (net.minecraft.world.gen.layer.LayerUtil.func_202826_a(Registry.field_212624_m.func_148757_b(this), Registry.field_212624_m.func_148757_b(Biomes.field_150607_aa))) return Biomes.field_150589_Z;\n++      if ((this == Biomes.field_150575_M || this == Biomes.field_203618_X || this == Biomes.field_203619_Y || this == Biomes.field_203620_Z) && rand.func_202696_a(3) == 0) return rand.func_202696_a(2) == 0 ? Biomes.field_76772_c : Biomes.field_76767_f;\n++      return this;", "originalCommit": "5af95ecc1244cf168ea43f1be04edf2e4002bc56", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE0MzA2MQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396143061", "bodyText": "do you mean to just replace the return this;, or to replace the whole method body?", "author": "valoeghese", "createdAt": "2020-03-22T21:29:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5NzE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE0MzEzNQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396143135", "bodyText": "The entire method body, to avoid copying vanilla code", "author": "ichttt", "createdAt": "2020-03-22T21:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5NzE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE0MzE0Mg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396143142", "bodyText": "from your previous comment I assume you mean to replace the whole method body", "author": "valoeghese", "createdAt": "2020-03-22T21:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5NzE1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjE1NjMyMA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396156320", "bodyText": "ah I see, thanks for the confirmation", "author": "valoeghese", "createdAt": "2020-03-22T23:12:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5NzE1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjA5Nzc1NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r396097755", "bodyText": "This should be changed to use the biome provided from getHill if it doesn't return null, and use the vanilla code path otherwise", "author": "ichttt", "createdAt": "2020-03-22T14:08:17Z", "path": "patches/minecraft/net/minecraft/world/gen/layer/HillsLayer.java.patch", "diffHunk": "@@ -0,0 +1,11 @@\n+--- a/net/minecraft/world/gen/layer/HillsLayer.java\n++++ b/net/minecraft/world/gen/layer/HillsLayer.java\n+@@ -97,7 +97,7 @@\n+             l = field_202809_p;\n+          } else if ((i == LayerUtil.field_202830_a || i == LayerUtil.field_203636_g || i == LayerUtil.field_203637_i || i == LayerUtil.field_203638_j) && p_215723_1_.func_202696_a(3) == 0) {\n+             l = p_215723_1_.func_202696_a(2) == 0 ? field_202812_s : field_202803_j;\n+-         }\n++         } else l = Registry.field_212624_m.func_148757_b(Registry.field_212624_m.func_148745_a(i).getHill(p_215723_1_));", "originalCommit": "5af95ecc1244cf168ea43f1be04edf2e4002bc56", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "99756a77f69723507d2dc02b319e1aea6bd1008d", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/99756a77f69723507d2dc02b319e1aea6bd1008d", "message": "update code for ichttt's requested changes", "committedDate": "2020-03-23T02:40:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA3ODMyOA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r397078328", "bodyText": "getByValue can be null, so this should check for null before the getHill call as well, like this:\nBiome biome = Registry.BIOME.getByValue(i);\nBiome hill = biome == null ? null : biome.getHill(p_215723_1_);", "author": "ichttt", "createdAt": "2020-03-24T11:22:01Z", "path": "patches/minecraft/net/minecraft/world/gen/layer/HillsLayer.java.patch", "diffHunk": "@@ -0,0 +1,13 @@\n+--- a/net/minecraft/world/gen/layer/HillsLayer.java\n++++ b/net/minecraft/world/gen/layer/HillsLayer.java\n+@@ -59,7 +59,9 @@\n+ \n+       if (p_215723_1_.func_202696_a(3) == 0 || k == 0) {\n+          int l = i;\n+-         if (i == field_202799_f) {\n++         Biome hill = Registry.field_212624_m.func_148745_a(i).getHill(p_215723_1_);", "originalCommit": "99756a77f69723507d2dc02b319e1aea6bd1008d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA3ODcyNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/6571#discussion_r397078726", "bodyText": "Should be marked with @Nullable", "author": "ichttt", "createdAt": "2020-03-24T11:22:36Z", "path": "patches/minecraft/net/minecraft/world/biome/Biome.java.patch", "diffHunk": "@@ -50,11 +50,15 @@\n +      if (this == Biomes.field_76789_p || this == Biomes.field_76788_q) return Biomes.field_76788_q;\n +      return Biomes.field_76781_i;\n +   }\n++\n++   public Biome getHill(net.minecraft.world.gen.INoiseRandom rand) {", "originalCommit": "99756a77f69723507d2dc02b319e1aea6bd1008d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "eb29e456eeb07546ec35e89774151deec0d083f5", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/eb29e456eeb07546ec35e89774151deec0d083f5", "message": "nullable in biome#getHill, check for null in hills patch", "committedDate": "2020-03-24T22:14:02Z", "type": "commit"}]}