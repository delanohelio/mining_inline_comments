{"pr_number": 7463, "pr_title": "Allow for custom command argument types", "pr_createdAt": "2020-11-04T11:04:47Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463", "timeline": [{"oid": "e696e1b3700f63289b3be5c8583569b9025c47d6", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/e696e1b3700f63289b3be5c8583569b9025c47d6", "message": "Add support for custom argument types by filtering them on vanilla connections", "committedDate": "2020-11-04T10:54:20Z", "type": "commit"}, {"oid": "f0290829e5078a21738c4eea1c5e633efd1a6dcf", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/f0290829e5078a21738c4eea1c5e633efd1a6dcf", "message": "Add support for custom argument types by filtering them on vanilla connections", "committedDate": "2020-11-04T10:54:21Z", "type": "commit"}, {"oid": "07a0066e3b94b875a3f8691d23e66455ae56156d", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/07a0066e3b94b875a3f8691d23e66455ae56156d", "message": "Order SAS, clean up EnumArgument warnings", "committedDate": "2020-11-04T11:11:41Z", "type": "commit"}, {"oid": "2258fefe4643c5d607f28bb086e4b2c355f33d7c", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/2258fefe4643c5d607f28bb086e4b2c355f33d7c", "message": "clean up EnumArgument warnings", "committedDate": "2020-11-04T11:12:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwMTQ2Nw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r517301467", "bodyText": "Could you remove the empty lines here?\nOr is this policy to leave them here?\nAlso is a ForgeMarker not required here?", "author": "OrionDevelopment", "createdAt": "2020-11-04T12:15:20Z", "path": "patches/minecraft/net/minecraft/command/arguments/ArgumentTypes.java.patch", "diffHunk": "@@ -0,0 +1,13 @@\n+--- a/net/minecraft/command/arguments/ArgumentTypes.java\n++++ b/net/minecraft/command/arguments/ArgumentTypes.java\n+@@ -220,4 +220,10 @@\n+          this.field_197481_c = p_i48088_3_;\n+       }\n+    }\n++", "originalCommit": "2258fefe4643c5d607f28bb086e4b2c355f33d7c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMzMjMwMA==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r517332300", "bodyText": "I don't think we have the Forge marker in very many places anymore, but I don't know. I'll remove the empty line.", "author": "diesieben07", "createdAt": "2020-11-04T13:12:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzMwMTQ2Nw=="}], "type": "inlineReview"}, {"oid": "00e9ddd66ab46f3a9cbb1b394f8d2caaf1d387c4", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/00e9ddd66ab46f3a9cbb1b394f8d2caaf1d387c4", "message": "Remove extra blank line in patch", "committedDate": "2020-11-04T13:14:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM0MTQxNw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r517341417", "bodyText": "Another empty line.....\nSorry for being annoying about this. But smaller patches benefit everybody.", "author": "OrionDevelopment", "createdAt": "2020-11-04T13:28:02Z", "path": "patches/minecraft/net/minecraft/command/arguments/ArgumentTypes.java.patch", "diffHunk": "@@ -0,0 +1,12 @@\n+--- a/net/minecraft/command/arguments/ArgumentTypes.java\n++++ b/net/minecraft/command/arguments/ArgumentTypes.java\n+@@ -220,4 +220,9 @@\n+          this.field_197481_c = p_i48088_3_;\n+       }\n+    }\n++   @javax.annotation.Nullable public static ResourceLocation getId(ArgumentType<?> type) {\n++      Entry<?> entry = func_201040_a(type);\n++      return entry == null ? null : entry.field_197481_c;\n++   }\n++", "originalCommit": "00e9ddd66ab46f3a9cbb1b394f8d2caaf1d387c4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM0OTIzNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r517349236", "bodyText": "All good, I am just being an idiot.", "author": "diesieben07", "createdAt": "2020-11-04T13:40:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzM0MTQxNw=="}], "type": "inlineReview"}, {"oid": "deb3a476409f7b5f701f098365e661f69e249254", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/deb3a476409f7b5f701f098365e661f69e249254", "message": "Remove extra blank line in patch", "committedDate": "2020-11-04T13:40:13Z", "type": "commit"}, {"oid": "9147099ed47b3ac488d037cb0f9710f017ed0b9d", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/9147099ed47b3ac488d037cb0f9710f017ed0b9d", "message": "Remove commented out old StructureArgument", "committedDate": "2020-11-04T14:00:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgzNzk0NQ==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r520837945", "bodyText": "This must of changed in a MC update. It needs to be buf & 16 not i & 16to match the case below it. And it does actually function as needed, at least when I wrote it.", "author": "LexManos", "createdAt": "2020-11-10T19:58:59Z", "path": "patches/minecraft/net/minecraft/network/play/server/SCommandListPacket.java.patch", "diffHunk": "@@ -1,12 +0,0 @@\n---- a/net/minecraft/network/play/server/SCommandListPacket.java\n-+++ b/net/minecraft/network/play/server/SCommandListPacket.java\n-@@ -119,6 +119,9 @@\n-          String s = p_197695_0_.func_150789_c(32767);\n-          ArgumentType<?> argumenttype = ArgumentTypes.func_197486_a(p_197695_0_);\n-          if (argumenttype == null) {\n-+            if ((i & 16) != 0) { // FORGE: Flush unused suggestion data", "originalCommit": "9147099ed47b3ac488d037cb0f9710f017ed0b9d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDg0NTcxNg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7463#discussion_r520845716", "bodyText": "I know that buf & 16 was the original intention. However the ResourceLocation this patch is trying to read is not the next thing to read here. If argumenttype is null then the ArgumentType was not found, so whatever data it wrote is next in the buffer. After that data the custom suggestion ResourceLocation is to be read. The patch was added by @tterrag1098 back in 2019, where it correctly checked buf & 16. However I am unsure how that is supposed to have ever fixed anything - for the reasons outlined above.", "author": "diesieben07", "createdAt": "2020-11-10T20:12:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDgzNzk0NQ=="}], "type": "inlineReview"}]}