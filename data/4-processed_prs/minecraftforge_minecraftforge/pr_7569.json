{"pr_number": 7569, "pr_title": "Add ForgeHooks.canEntitySpawn to instances of ISpecialSpawner", "pr_createdAt": "2020-12-27T03:04:04Z", "pr_url": "https://github.com/MinecraftForge/MinecraftForge/pull/7569", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE2NTY5Mw==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7569#discussion_r549165693", "bodyText": "There's lots of other calculations in this class that are used to determine where to spawn a Cat. I didn't want to make a large patch to bypass that code, so I just stuck it in the spawnCat method.", "author": "shroomdog27", "createdAt": "2020-12-27T21:29:58Z", "path": "patches/minecraft/net/minecraft/world/spawner/CatSpawner.java.patch", "diffHunk": "@@ -0,0 +1,10 @@\n+--- a/net/minecraft/world/spawner/CatSpawner.java\n++++ b/net/minecraft/world/spawner/CatSpawner.java\n+@@ -80,6 +80,7 @@\n+       if (catentity == null) {\n+          return 0;\n+       } else {\n++         if(net.minecraftforge.common.ForgeHooks.canEntitySpawn(catentity, p_221122_2_, p_221122_1_.func_177958_n(), p_221122_1_.func_177956_o(), p_221122_1_.func_177952_p(), null, SpawnReason.NATURAL) == -1) return 0;", "originalCommit": "e68def26fe8cf2a2114a426d64b9015094f1e8d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0OTE2NTc3Mg==", "url": "https://github.com/MinecraftForge/MinecraftForge/pull/7569#discussion_r549165772", "bodyText": "Same for PatrolSpawner. func_230253_a_ is the main method that is used to determine if a Patrol can spawn. I just hooked into spawnPatroller at the very end to look at the end result if the game decides it wants to spawn a Patrol or not.", "author": "shroomdog27", "createdAt": "2020-12-27T21:31:15Z", "path": "patches/minecraft/net/minecraft/world/spawner/PatrolSpawner.java.patch", "diffHunk": "@@ -0,0 +1,10 @@\n+--- a/net/minecraft/world/spawner/PatrolSpawner.java\n++++ b/net/minecraft/world/spawner/PatrolSpawner.java\n+@@ -94,6 +94,7 @@\n+          return false;\n+       } else {\n+          PatrollerEntity patrollerentity = EntityType.field_220350_aJ.func_200721_a(p_222695_1_);\n++         if(net.minecraftforge.common.ForgeHooks.canEntitySpawn(patrollerentity, p_222695_1_, p_222695_2_.func_177958_n(), p_222695_2_.func_177956_o(), p_222695_2_.func_177952_p(), null, SpawnReason.PATROL) == -1) return false;", "originalCommit": "e68def26fe8cf2a2114a426d64b9015094f1e8d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0b004f6f75e32d030792fe679373b94a2c8c63d7", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/0b004f6f75e32d030792fe679373b94a2c8c63d7", "message": "Add ForgeHooks.canEntitySpawn to PhantomSpawner\n\n* This can be used to allow mods to cancel Phantom spawn events.", "committedDate": "2021-01-09T21:22:29Z", "type": "commit"}, {"oid": "67be72e0f68dcffb969e3b12e3008908fbb027cd", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/67be72e0f68dcffb969e3b12e3008908fbb027cd", "message": "Add hooks for other instances of ISpecialSpawner\n\n* Added for CatSpawner\n* Added for PatrolSpawner\n* NOT added for VillageSiege. It is already handled by VillageSiegeEvent\n* NOT added for WanderingTraderSpawner. It calls EntityType#spawn which is already handled by ForgeEventFactory#doSpecialSpawn", "committedDate": "2021-01-09T21:22:30Z", "type": "commit"}, {"oid": "67be72e0f68dcffb969e3b12e3008908fbb027cd", "url": "https://github.com/MinecraftForge/MinecraftForge/commit/67be72e0f68dcffb969e3b12e3008908fbb027cd", "message": "Add hooks for other instances of ISpecialSpawner\n\n* Added for CatSpawner\n* Added for PatrolSpawner\n* NOT added for VillageSiege. It is already handled by VillageSiegeEvent\n* NOT added for WanderingTraderSpawner. It calls EntityType#spawn which is already handled by ForgeEventFactory#doSpecialSpawn", "committedDate": "2021-01-09T21:22:30Z", "type": "forcePushed"}]}