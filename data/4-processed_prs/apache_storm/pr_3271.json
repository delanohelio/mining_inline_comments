{"pr_number": 3271, "pr_title": "MINOR PATCH: Avoid fragmented resources on supervisor creation in nimbus", "pr_createdAt": "2020-05-18T19:11:37Z", "pr_url": "https://github.com/apache/storm/pull/3271", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NDAxNw==", "url": "https://github.com/apache/storm/pull/3271#discussion_r426884017", "bodyText": "What's the issue we want to solve here?\nIf it is just about skipping the code related to resources when the scheduler is not resourceAware, then we have other places like getTopologyPageInfo  we need to take care of", "author": "Ethanlm", "createdAt": "2020-05-18T20:45:52Z", "path": "storm-server/src/main/java/org/apache/storm/daemon/nimbus/Nimbus.java", "diffHunk": "@@ -2920,7 +2920,7 @@ private SupervisorSummary makeSupervisorSummary(String supervisorId, SupervisorI\n                                                       (int) info.get_uptime_secs(), numPorts, numUsedPorts, supervisorId);\n         ret.set_total_resources(info.get_resources_map());\n         SupervisorResources resources = nodeIdToResources.get().get(supervisorId);\n-        if (resources != null) {\n+        if (resources != null && underlyingScheduler instanceof ResourceAwareScheduler) {", "originalCommit": "8516a5d6bbabcd01cef824e4867bbdb10f773564", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTMxODE1Mw==", "url": "https://github.com/apache/storm/pull/3271#discussion_r429318153", "bodyText": "I have updated instances where code should avoid following resource calculation if not using ResourceAwareScheduler.", "author": "kishorvpatil", "createdAt": "2020-05-22T15:36:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjg4NDAxNw=="}], "type": "inlineReview"}, {"oid": "63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "url": "https://github.com/apache/storm/commit/63cf5e3a55d2ab33eb8ba1663e26d0e203352084", "message": "Avoid fragmented resources on supervisor creation in nimbus", "committedDate": "2020-05-22T15:32:37Z", "type": "forcePushed"}, {"oid": "150aef15d7bcd75c9695d359b7ef567170db6794", "url": "https://github.com/apache/storm/commit/150aef15d7bcd75c9695d359b7ef567170db6794", "message": "MINOR: Avoid fragmented resources on supervisor creation in nimbus", "committedDate": "2020-07-01T15:31:19Z", "type": "commit"}, {"oid": "150aef15d7bcd75c9695d359b7ef567170db6794", "url": "https://github.com/apache/storm/commit/150aef15d7bcd75c9695d359b7ef567170db6794", "message": "MINOR: Avoid fragmented resources on supervisor creation in nimbus", "committedDate": "2020-07-01T15:31:19Z", "type": "forcePushed"}]}