{"pr_number": 707, "pr_title": "[CXF-8353] MediaType validation", "pr_createdAt": "2020-10-06T21:10:17Z", "pr_url": "https://github.com/apache/cxf/pull/707", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzI5MjExNA==", "url": "https://github.com/apache/cxf/pull/707#discussion_r503292114", "bodyText": "Minor, may be check str.trim().length(), it seems weird media types like application/    are still passing through.", "author": "reta", "createdAt": "2020-10-12T13:21:51Z", "path": "rt/frontend/jaxrs/src/main/java/org/apache/cxf/jaxrs/impl/MediaTypeHeaderProvider.java", "diffHunk": "@@ -190,4 +190,35 @@ private static MediaType handleMediaTypeWithoutSubtype(String mType) {\n         }\n         throw new IllegalArgumentException(\"Media type separator is missing\");\n     }\n+\n+    // Determines whether the type or subtype contains any of the tspecials characters defined at:\n+    // https://tools.ietf.org/html/rfc2045#section-5.1\n+    private static boolean isValid(String str) {\n+        final int len = str.length();", "originalCommit": "e1280ffa11ad06512a88b201d1f1279f1245fb65", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMyMzEwMQ==", "url": "https://github.com/apache/cxf/pull/707#discussion_r503323101", "bodyText": "@reta - sounds good.  Since we end up trimming both type and subType at lines 114 and 115, I moved those trims to before the isValid method is called (to lines 88 and 89).  Let me know if you'd prefer the trim to be in isValid instead.  Otherwise, I'll plan to merge this later today.  Thanks for the review!", "author": "andymc12", "createdAt": "2020-10-12T14:10:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzI5MjExNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzMyNTIyNg==", "url": "https://github.com/apache/cxf/pull/707#discussion_r503325226", "bodyText": "Looks good, thanks @andymc12 !", "author": "reta", "createdAt": "2020-10-12T14:14:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzI5MjExNA=="}], "type": "inlineReview"}, {"oid": "adfa9ff834fcf81d4d9d15e14ef8c420b4e05a00", "url": "https://github.com/apache/cxf/commit/adfa9ff834fcf81d4d9d15e14ef8c420b4e05a00", "message": "[CXF-8353] MediaType validation\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>", "committedDate": "2020-10-12T14:08:07Z", "type": "commit"}, {"oid": "e0c1b36b15924d01a8c7b100222e0fa32de2b832", "url": "https://github.com/apache/cxf/commit/e0c1b36b15924d01a8c7b100222e0fa32de2b832", "message": "Code review comment - trim before check\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>", "committedDate": "2020-10-12T14:08:07Z", "type": "commit"}, {"oid": "e0c1b36b15924d01a8c7b100222e0fa32de2b832", "url": "https://github.com/apache/cxf/commit/e0c1b36b15924d01a8c7b100222e0fa32de2b832", "message": "Code review comment - trim before check\n\nSigned-off-by: Andy McCright <j.andrew.mccright@gmail.com>", "committedDate": "2020-10-12T14:08:07Z", "type": "forcePushed"}]}