{"pr_number": 7806, "pr_title": "ProviderManager should have a varargs constructor", "pr_createdAt": "2020-01-10T18:47:02Z", "pr_url": "https://github.com/spring-projects/spring-security/pull/7806", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2MzQ3OQ==", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r365963479", "bodyText": "I think we should still have a test for new ProviderManager((AuthenticationProvider) null) and for new ProviderManager((List<AuthenticationProvider>) null).\nThe reason is that an application might do:\nAuthenticationProvider provider = constructProvider();\nreturn new ProviderManager(provider);\nbut constructProvider returns null.\nI believe this also implies that the extra validation logic in checkState() will turn out to be necessary.", "author": "jzheaux", "createdAt": "2020-01-13T18:41:06Z", "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -96,7 +94,7 @@ public void authenticationSucceedsWhenFirstProviderReturnsNullButSecondAuthentic\n \n \t@Test(expected = IllegalArgumentException.class)\n \tpublic void testStartupFailsIfProvidersNotSet() {\n-\t\tnew ProviderManager(null);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5NjYwNA==", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r373096604", "bodyText": "Got it, thanks for the clarification. I have added the extra validation login in checkState() and tests for both null scenarios.", "author": "ThomasVitale", "createdAt": "2020-01-30T17:45:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2MzQ3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2NDQ5Mw==", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r365964493", "bodyText": "Thanks for these cleanup items, too. Will you please put them in a separate commit (same PR)? That is, any code changes that aren't directly related to the new constructor, let's separate them into their own commit. This simplifies maintenance.", "author": "jzheaux", "createdAt": "2020-01-13T18:43:15Z", "path": "core/src/test/java/org/springframework/security/authentication/ProviderManagerTests.java", "diffHunk": "@@ -189,7 +186,7 @@ public void parentAuthenticationIsUsedIfProvidersDontAuthenticate() {\n \t\tAuthentication authReq = mock(Authentication.class);\n \t\twhen(parent.authenticate(authReq)).thenReturn(authReq);\n \t\tProviderManager mgr = new ProviderManager(\n-\t\t\t\tArrays.asList(mock(AuthenticationProvider.class)), parent);\n+\t\t\t\tCollections.singletonList(mock(AuthenticationProvider.class)), parent);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzA5Njg2MA==", "url": "https://github.com/spring-projects/spring-security/pull/7806#discussion_r373096860", "bodyText": "Ok, now they are in their own commit.", "author": "ThomasVitale", "createdAt": "2020-01-30T17:45:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTk2NDQ5Mw=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "26caa0187dc746cb50f5868e26f0c967f1a61492", "url": "https://github.com/spring-projects/spring-security/commit/26caa0187dc746cb50f5868e26f0c967f1a61492", "message": "ProviderManager should have a varargs constructor\n\n- Added varargs constructor to ProviderManager.\n- Added check for null values in AuthenticationProvider list.\n- Updated ProviderManagerTests to test for null values using both constructors.\n\nFixes gh-7713", "committedDate": "2020-01-30T18:26:13Z", "type": "commit"}, {"oid": "fab4af24dc84a42dfeaf1ef226285d420865022b", "url": "https://github.com/spring-projects/spring-security/commit/fab4af24dc84a42dfeaf1ef226285d420865022b", "message": "Make code cleaner in ProviderManagerTests", "committedDate": "2020-01-30T18:26:47Z", "type": "commit"}, {"oid": "fab4af24dc84a42dfeaf1ef226285d420865022b", "url": "https://github.com/spring-projects/spring-security/commit/fab4af24dc84a42dfeaf1ef226285d420865022b", "message": "Make code cleaner in ProviderManagerTests", "committedDate": "2020-01-30T18:26:47Z", "type": "forcePushed"}]}