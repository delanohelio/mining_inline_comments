{"pr_number": 6139, "pr_title": "Fix #5912: DatePicker incorrect behavior with keyboard entry", "pr_createdAt": "2020-07-10T19:41:05Z", "pr_url": "https://github.com/primefaces/primefaces/pull/6139", "timeline": [{"oid": "5ad351a6a3908b36435108aab251dc243b4b2ac7", "url": "https://github.com/primefaces/primefaces/commit/5ad351a6a3908b36435108aab251dc243b4b2ac7", "message": "Fix #5912: DatePicker incorrect behavior with keyboard entry", "committedDate": "2020-07-10T19:33:19Z", "type": "commit"}, {"oid": "036dbf7fc0bcf24c6b19c3ce82a88caac7a81153", "url": "https://github.com/primefaces/primefaces/commit/036dbf7fc0bcf24c6b19c3ce82a88caac7a81153", "message": "Fix #5912: DatePicker: Reformat onBlur", "committedDate": "2020-07-10T19:47:30Z", "type": "commit"}, {"oid": "fb8853d820d4e8f05d5dfdb3b026e4ee8122cc68", "url": "https://github.com/primefaces/primefaces/commit/fb8853d820d4e8f05d5dfdb3b026e4ee8122cc68", "message": "Fix #5912: DatePicker: allow 2 digit-inputs for 4-digit-year-pattern (gets reformated to 4 digits onBlur)", "committedDate": "2020-07-10T20:05:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzE4NDQzOQ==", "url": "https://github.com/primefaces/primefaces/pull/6139#discussion_r453184439", "bodyText": "I think its safe to remove this comment I think we should always format unless we find it to be a problem.", "author": "melloware", "createdAt": "2020-07-11T11:11:26Z", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -1704,6 +1709,9 @@\n                 this.options.onBlur.call(this, event);\n             }\n \n+            //reformat input - is always OK? or only if it was modified?", "originalCommit": "fb8853d820d4e8f05d5dfdb3b026e4ee8122cc68", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6a270811674eb9c7c5d38d3e2e3c18f684d14a0e", "url": "https://github.com/primefaces/primefaces/commit/6a270811674eb9c7c5d38d3e2e3c18f684d14a0e", "message": "Fix #5912: DatePicker incorrect behavior with keyboard entry\n\nremove comment", "committedDate": "2020-07-11T12:59:44Z", "type": "commit"}, {"oid": "051c8bcdc518f53849e702b7931b3843954f37bb", "url": "https://github.com/primefaces/primefaces/commit/051c8bcdc518f53849e702b7931b3843954f37bb", "message": "Fix #5912: DatePicker incorrect behavior with keyboard entry\n\nremove comment", "committedDate": "2020-07-11T13:01:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1NTI3NA==", "url": "https://github.com/primefaces/primefaces/pull/6139#discussion_r453355274", "bodyText": "I think you can just say if (updateInput) and its truthiness will only enter the block if the value is true rather than checking for !false", "author": "melloware", "createdAt": "2020-07-12T19:40:23Z", "path": "src/main/resources/META-INF/resources/primefaces/datepicker/0-datepicker.js", "diffHunk": "@@ -2488,9 +2495,11 @@\n             this._setInitOptionValues();\n         },\n \n-        updateModel: function (event, value) {\n+        updateModel: function (event, value, updateInput) {\n             this.value = (value === '' ? null : value);\n-            this.inputfield.val(this.getValueToRender());\n+            if (updateInput != false) {", "originalCommit": "051c8bcdc518f53849e702b7931b3843954f37bb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzYyMDY0MQ==", "url": "https://github.com/primefaces/primefaces/pull/6139#discussion_r453620641", "bodyText": "No, not that easy. updateInput is only passed when i want to disable input-update. All other calls to this function are without this parameter.\nSo we may change this. But this requires all other calls to this function to pass true for the third parameter.", "author": "christophs78", "createdAt": "2020-07-13T12:42:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM1NTI3NA=="}], "type": "inlineReview"}]}