{"pr_number": 5634, "pr_title": "Fix #5635: unauthorized ajax request redirect", "pr_createdAt": "2020-03-03T00:22:58Z", "pr_url": "https://github.com/primefaces/primefaces/pull/5634", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk3NDYxNg==", "url": "https://github.com/primefaces/primefaces/pull/5634#discussion_r386974616", "bodyText": "What if location is NULL?  Shouldn't it then just call cfg.onerror.call if no location URL is found?", "author": "melloware", "createdAt": "2020-03-03T12:02:26Z", "path": "src/main/resources/META-INF/resources/primefaces/core/core.ajax.js", "diffHunk": "@@ -538,6 +538,12 @@ if (!PrimeFaces.ajax) {\n \n                 var jqXhr = $.ajax(xhrOptions)\n                     .fail(function(xhr, status, errorThrown) {\n+                        if (xhr.status == 401) {\n+                            var location = xhr.getResponseHeader(\"Location\");\n+                            PrimeFaces.debug('Unauthorized status received. Redirecting to ' + location);\n+                            window.location = location;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzMxNzIzOQ==", "url": "https://github.com/primefaces/primefaces/pull/5634#discussion_r387317239", "bodyText": "if (xhr.status == 401) {\nbecomes\nvar location = xhr.getResponseHeader(\"Location\");\nif (xhr.status == 401 && locataion) {\nthis solves the null location header problem previously mentioned.", "author": "mP1", "createdAt": "2020-03-03T21:54:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njk3NDYxNg=="}], "type": "inlineReview"}, {"oid": "77883e995fe8ef1a4dbd9f94af27677089b9a722", "url": "https://github.com/primefaces/primefaces/commit/77883e995fe8ef1a4dbd9f94af27677089b9a722", "message": "unauthorized ajax request redirect", "committedDate": "2020-03-03T21:53:20Z", "type": "commit"}, {"oid": "77883e995fe8ef1a4dbd9f94af27677089b9a722", "url": "https://github.com/primefaces/primefaces/commit/77883e995fe8ef1a4dbd9f94af27677089b9a722", "message": "unauthorized ajax request redirect", "committedDate": "2020-03-03T21:53:20Z", "type": "forcePushed"}]}