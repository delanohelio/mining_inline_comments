{"pr_number": 6348, "pr_title": "Implement #6335: DataView: support PrimeFlex", "pr_createdAt": "2020-09-25T17:50:19Z", "pr_url": "https://github.com/primefaces/primefaces/pull/6348", "timeline": [{"oid": "d48210be5b51d8438d5eb61b6ffd381ef35fd325", "url": "https://github.com/primefaces/primefaces/commit/d48210be5b51d8438d5eb61b6ffd381ef35fd325", "message": "implement #6335: DataView: support PrimeFlex", "committedDate": "2020-09-25T17:48:10Z", "type": "commit"}, {"oid": "329900485eda890f9c55b9fafc8eb046c206b91d", "url": "https://github.com/primefaces/primefaces/commit/329900485eda890f9c55b9fafc8eb046c206b91d", "message": "implement #6335: DataView: support PrimeFlex; cosmetics", "committedDate": "2020-09-25T17:50:23Z", "type": "commit"}, {"oid": "c1f46c2cbcb441c7ebe9b05995b247dc690504b6", "url": "https://github.com/primefaces/primefaces/commit/c1f46c2cbcb441c7ebe9b05995b247dc690504b6", "message": "implement #6335: DataView: support PrimeFlex; newline", "committedDate": "2020-09-25T17:51:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495146421", "bodyText": "I wonder if this attribute should be less specific and make it like datatable layout=\"grid\" or layout=\"flex\"", "author": "melloware", "createdAt": "2020-09-25T17:57:35Z", "path": "src/main/java/org/primefaces/component/dataview/DataViewBase.java", "diffHunk": "@@ -44,7 +44,8 @@\n         listIcon,\n         multiViewState,\n         gridRowStyle,\n-        gridRowStyleClass\n+        gridRowStyleClass,\n+        usePrimeFlex", "originalCommit": "c1f46c2cbcb441c7ebe9b05995b247dc690504b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjYwMw==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495146603", "bodyText": "That way we can make a consistent property in all the components?", "author": "melloware", "createdAt": "2020-09-25T17:57:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE3NTQ2OQ==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495175469", "bodyText": "I had the same thoughts but no good answer yet. DataView comes with list and grid - view. You can toggle between both. Layout-attribute defines which one is shown per default.\nNow we have two technical ways how we render grid - view.\nI am not happy with my attribute-naming. But i am pretty sure we can not add this to the existing layout-attribute.", "author": "christophs78", "createdAt": "2020-09-25T18:57:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE4MTU1NQ==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495181555", "bodyText": "So PanelGrid has layout https://primefaces.github.io/primefaces/8_0/#/components/panelgrid?id=responsive\nDisplays data in a 'tabular' layout, 'grid' layout or 'flex' layout. The grid and flex layout are responsive layouts. Default value is 'tabular'.\nWhy can't you just add the option \"flex\" to the layout instead of this new property?", "author": "melloware", "createdAt": "2020-09-25T19:10:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE4OTAyMg==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495189022", "bodyText": "Yep. I was the one who added layout=\"flex\" to PanelGrid.\nPanelGrid looks almost same in all three layout-modes. The difference is its html-rendering. html-table vs. div with grid-css-classes vs div with primeflex-css-class.\nDataView is IMO a different thing.\nhttp://primefaces.org/showcase/ui/data/dataview/paginator.xhtml\nIt has two layouts which look fundamental different. List and Grid.\nYou have a toggle switch.\n\nIn XHTML you do something like\n<p:dataView>\n   <p:dataViewGridItem>\n     </p:dataViewGridItem>\n     <p:dataViewListItem>\n     </p:dataViewListItem>\n</p:dataView>\nNow we have two technical \"flavours\" of grid. But from an enduser-perspective it\u00b4s still the same grid.\nFrom a somehow isolated perspective i\u00b4d like to deliver PrimeFlex as part of PrimeFaces. (Like Grid CSS comes with PrimeFaces) And just use internal PrimeFlex because it \"does the right thing\". And no need to offer Grid CSS and Prime Flex - modes . And bring PrimeFlex on your own into the project, ...\nBut i understand the arguments why this is a bad idea.\nMaybe it\u00b4s better to introduce a new Context-Param which tells PrimeFaces to use PrimeFlex whereever it can instead of Grid CSS.\nOr...", "author": "christophs78", "createdAt": "2020-09-25T19:27:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE4OTc3MA==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495189770", "bodyText": "OK I see the issue now.", "author": "melloware", "createdAt": "2020-09-25T19:28:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE5MDc5NA==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495190794", "bodyText": "We could make it like RTLAware and ComponentUtils.isRTL have a FlexAware and ComponentUtils.isFlex and that way you can set it with Context Param or with the individual component with a flex=true property.", "author": "melloware", "createdAt": "2020-09-25T19:31:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTE0NjQyMQ=="}], "type": "inlineReview"}, {"oid": "91ba32d30295c7f0dd8dec84e589e6262bda5893", "url": "https://github.com/primefaces/primefaces/commit/91ba32d30295c7f0dd8dec84e589e6262bda5893", "message": "#6335: introduce FlexAware", "committedDate": "2020-09-26T07:25:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDQ1Mw==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495454453", "bodyText": "I would rename it PrimeFlexAware (to make it more understandable and to avoid any confusion with flex css display for instance)", "author": "Rapster", "createdAt": "2020-09-26T12:58:40Z", "path": "src/main/java/org/primefaces/component/api/FlexAware.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * The MIT License\n+ *\n+ * Copyright (c) 2009-2020 PrimeTek\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.primefaces.component.api;\n+\n+/**\n+ * Use PrimeFlex instead Grid CSS\n+ */\n+public interface FlexAware {", "originalCommit": "91ba32d30295c7f0dd8dec84e589e6262bda5893", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDkxNg==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495454916", "bodyText": "The only reason I like FlexAware is its concise like our others RTLAware, TouchAware, etc...", "author": "melloware", "createdAt": "2020-09-26T13:04:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDQ1Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NTUwOQ==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495455509", "bodyText": "Yeah I agree I think PrimeFlexAware is still a concise name but it's not a big deal anyway, if you think it's better you can keep it that way then \ud83d\ude09", "author": "Rapster", "createdAt": "2020-09-26T13:11:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDQ1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDYyNA==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495454624", "bodyText": "setter is not mandatory to implement to make it work: can be removed", "author": "Rapster", "createdAt": "2020-09-26T13:00:25Z", "path": "src/main/java/org/primefaces/component/api/FlexAware.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/*\n+ * The MIT License\n+ *\n+ * Copyright (c) 2009-2020 PrimeTek\n+ *\n+ * Permission is hereby granted, free of charge, to any person obtaining a copy\n+ * of this software and associated documentation files (the \"Software\"), to deal\n+ * in the Software without restriction, including without limitation the rights\n+ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n+ * copies of the Software, and to permit persons to whom the Software is\n+ * furnished to do so, subject to the following conditions:\n+ *\n+ * The above copyright notice and this permission notice shall be included in\n+ * all copies or substantial portions of the Software.\n+ *\n+ * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n+ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n+ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n+ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n+ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n+ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n+ * THE SOFTWARE.\n+ */\n+package org.primefaces.component.api;\n+\n+/**\n+ * Use PrimeFlex instead Grid CSS\n+ */\n+public interface FlexAware {\n+\n+    /**\n+     * Use PrimeFlex (instead Grid CSS) for this component?\n+     *\n+     * @return true to use PrimeFlex instead of Grid CSS.\n+     */\n+    boolean isFlex();\n+\n+    /**\n+     * Use PrimeFlex (instead Grid CSS) for this component?\n+     *\n+     * @param flex true to use PrimeFlex instead of Grid CSS.\n+     */\n+    void setFlex(boolean flex);", "originalCommit": "91ba32d30295c7f0dd8dec84e589e6262bda5893", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ3MzE0Ng==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r495473146", "bodyText": "Done. :-)", "author": "christophs78", "createdAt": "2020-09-26T16:32:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTQ1NDYyNA=="}], "type": "inlineReview"}, {"oid": "1145854a34fa1c05088f501e37a0be36668e7826", "url": "https://github.com/primefaces/primefaces/commit/1145854a34fa1c05088f501e37a0be36668e7826", "message": "#6335: remove unnecessary FlexAware#setFlex", "committedDate": "2020-09-26T16:30:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE5MDkyNA==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r496190924", "bodyText": "might want to store off the result of boolean isFlex = ComponentUtils.isFlex(context, dataview) to reuse", "author": "melloware", "createdAt": "2020-09-28T19:44:51Z", "path": "src/main/java/org/primefaces/component/dataview/DataViewRenderer.java", "diffHunk": "@@ -235,21 +235,32 @@ protected void encodeGridLayout(FacesContext context, DataView dataview) throws\n \n         if (grid != null) {\n             ResponseWriter writer = context.getResponseWriter();\n-\n             int columns = grid.getColumns();\n             int rowIndex = dataview.getFirst();\n             int rows = dataview.getRows();\n             int itemsToRender = rows != 0 ? rows : dataview.getRowCount();\n             int numberOfRowsToRender = (itemsToRender + columns - 1) / columns;\n-            String columnClass = DataView.GRID_LAYOUT_COLUMN_CLASS + \" \" + GridLayoutUtils.getColumnClass(columns);\n+            String columnClass = DataView.GRID_LAYOUT_COLUMN_CLASS + \" \";\n+            if (ComponentUtils.isFlex(context, dataview)) {", "originalCommit": "1145854a34fa1c05088f501e37a0be36668e7826", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ5MDA1NA==", "url": "https://github.com/primefaces/primefaces/pull/6348#discussion_r496490054", "bodyText": "done", "author": "christophs78", "createdAt": "2020-09-29T07:52:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjE5MDkyNA=="}], "type": "inlineReview"}, {"oid": "27346998c0702dfa401fa491e0e4dd567cfbde3f", "url": "https://github.com/primefaces/primefaces/commit/27346998c0702dfa401fa491e0e4dd567cfbde3f", "message": "#6335 Refactoring", "committedDate": "2020-09-29T07:51:44Z", "type": "commit"}, {"oid": "89ebbc1e3ca8385525cd9f3d491ff867bfbaa903", "url": "https://github.com/primefaces/primefaces/commit/89ebbc1e3ca8385525cd9f3d491ff867bfbaa903", "message": "Check component first before global value", "committedDate": "2020-10-05T18:52:03Z", "type": "commit"}]}