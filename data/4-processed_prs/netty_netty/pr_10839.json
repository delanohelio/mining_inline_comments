{"pr_number": 10839, "pr_title": "Ensure we don't leak the ClassLoader in the backtrace of TraceRecord.\u2026", "pr_createdAt": "2020-12-04T16:19:25Z", "pr_url": "https://github.com/netty/netty/pull/10839", "timeline": [{"oid": "ef17cf280493a51ab723e694a4ce44734bc33ea3", "url": "https://github.com/netty/netty/commit/ef17cf280493a51ab723e694a4ce44734bc33ea3", "message": "Ensure we don't leak the ClassLoader in the backtrace of TrackRecord.BOTTOM\n\nMotivation:\n\nWe need to ensure we override fillInStacktrace() when we store exceptions in static fields to not leak the Classloader in the backtrace.\n\nCame up in https://github.com/netty/netty/pull/10691#issuecomment-738331186. Thanks to @amir-shalem for notice this one.\n\nModifications:\n\n- Add overrides of fillInStracktrace in TrackRecord.BOTTOM\n\nResult:\n\nRelated fix to https://github.com/netty/netty/pull/10686", "committedDate": "2020-12-04T16:17:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjIxODAyOQ==", "url": "https://github.com/netty/netty/pull/10839#discussion_r536218029", "bodyText": "Why is it not final anymore?", "author": "chrisvest", "createdAt": "2020-12-04T16:22:41Z", "path": "common/src/main/java/io/netty/util/ResourceLeakDetector.java", "diffHunk": "@@ -588,10 +587,20 @@ public static void addExclusions(Class clz, String ... methodNames) {\n         } while (!excludedMethods.compareAndSet(oldMethods, newMethods));\n     }\n \n-    private static final class TraceRecord extends Throwable {\n+    private static class TraceRecord extends Throwable {", "originalCommit": "ef17cf280493a51ab723e694a4ce44734bc33ea3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjIxODYzNA==", "url": "https://github.com/netty/netty/pull/10839#discussion_r536218634", "bodyText": "@chrisvest because I extend it to override fillInStacktrace()", "author": "normanmaurer", "createdAt": "2020-12-04T16:23:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjIxODAyOQ=="}], "type": "inlineReview"}]}