{"pr_number": 280, "pr_title": "chore: runtime build for linux, updated questdb.sh to use both \"runti\u2026", "pr_createdAt": "2020-05-13T13:22:12Z", "pr_url": "https://github.com/questdb/questdb/pull/280", "timeline": [{"oid": "db9d45f0966d0d05566427c65692ebfc9e456185", "url": "https://github.com/questdb/questdb/commit/db9d45f0966d0d05566427c65692ebfc9e456185", "message": "chore: runtime build for linux, updated questdb.sh to use both \"runtime\" java and JAVA_HOME depending on where it is running from", "committedDate": "2020-05-13T13:19:34Z", "type": "commit"}, {"oid": "15b4d2649d720d249626b23fb2dbc75c29e2ab14", "url": "https://github.com/questdb/questdb/commit/15b4d2649d720d249626b23fb2dbc75c29e2ab14", "message": "fix: removed hardcoded runtime name", "committedDate": "2020-05-13T13:34:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MTYxMA==", "url": "https://github.com/questdb/questdb/pull/280#discussion_r424451610", "bodyText": "Before this change I was able to run ./questdb.sh ... even when JAVA_HOME was not set. The script now makes it mandatory. Should we just fallback to whatever default java binary we find on the system as a fallback?", "author": "mpsq", "createdAt": "2020-05-13T13:47:54Z", "path": "core/src/main/bin/questdb.sh", "diffHunk": "@@ -44,22 +44,30 @@ function export_pid {\n \n function export_java {\n \n-    if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then\n-        JAVA_HOME=$(/usr/libexec/java_home -v 1.8)\n-    fi\n-\n-    # check that JAVA_HOME is defined\n-    if [ \"$JAVA_HOME\" = \"\" ]; then\n-        echo \"JAVA_HOME is undefined\"\n-        exit 55\n+    # check if this is our runtime\n+    if [ -f \"$BASE/java\" ]; then\n+        export JAVA=\"$BASE/java\"\n+    else\n+      if [ \"$JAVA_HOME\" = \"\" -a -e /usr/libexec/java_home ]; then", "originalCommit": "15b4d2649d720d249626b23fb2dbc75c29e2ab14", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ2MjQwNw==", "url": "https://github.com/questdb/questdb/pull/280#discussion_r424462407", "bodyText": "Sorry, my mistake, this was not the case before -- this logic was not changed.", "author": "mpsq", "createdAt": "2020-05-13T14:02:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQ1MTYxMA=="}], "type": "inlineReview"}]}