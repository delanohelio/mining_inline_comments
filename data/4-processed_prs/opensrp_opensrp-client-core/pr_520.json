{"pr_number": 520, "pr_title": "File Utilities class tests", "pr_createdAt": "2020-05-12T12:50:45Z", "pr_url": "https://github.com/opensrp/opensrp-client-core/pull/520", "timeline": [{"oid": "865e3993e8785ad0ed5fcbe9f340e99aaee55eb4", "url": "https://github.com/opensrp/opensrp-client-core/commit/865e3993e8785ad0ed5fcbe9f340e99aaee55eb4", "message": "file utilities test", "committedDate": "2020-05-12T06:34:44Z", "type": "commit"}, {"oid": "d7f6de2ea7a3b4a25dff68904dff14ec062c2987", "url": "https://github.com/opensrp/opensrp-client-core/commit/d7f6de2ea7a3b4a25dff68904dff14ec062c2987", "message": "File utilities test", "committedDate": "2020-05-12T12:49:47Z", "type": "commit"}, {"oid": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1", "url": "https://github.com/opensrp/opensrp-client-core/commit/9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-12T12:50:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzcyNDgxMw==", "url": "https://github.com/opensrp/opensrp-client-core/pull/520#discussion_r423724813", "bodyText": "There is no check that this is written", "author": "githengi", "createdAt": "2020-05-12T13:18:10Z", "path": "opensrp-app/src/test/java/org/smartregister/util/FileUtilitiesTest.java", "diffHunk": "@@ -0,0 +1,62 @@\n+package org.smartregister.util;\n+\n+import android.os.Environment;\n+\n+import org.junit.Assert;\n+import org.junit.Before;\n+import org.junit.Rule;\n+import org.junit.Test;\n+import org.junit.rules.TemporaryFolder;\n+import org.junit.runner.RunWith;\n+import org.mockito.Mock;\n+import org.powermock.api.mockito.PowerMockito;\n+import org.powermock.core.classloader.annotations.PrepareForTest;\n+import org.powermock.modules.junit4.PowerMockRunner;\n+\n+import java.io.BufferedWriter;\n+import java.io.File;\n+import java.io.IOException;\n+\n+import static org.mockito.Mockito.when;\n+@RunWith(PowerMockRunner.class)\n+@PrepareForTest({Environment.class})\n+public class FileUtilitiesTest {\n+\n+    private String FILE_NAME = \"newFile.ext\";\n+\n+    @Rule\n+    public TemporaryFolder storageDirectory = new TemporaryFolder();\n+    private File existentDirectory;\n+\n+    public FileUtilitiesTest() throws IOException {\n+    }\n+\n+    @Before\n+    public void setup() {\n+        existentDirectory = storageDirectory.getRoot();\n+        PowerMockito.mockStatic(Environment.class);\n+    }\n+\n+    @Mock\n+    private BufferedWriter mockWriter;\n+\n+    @Test\n+    public void initIndexFile_validFile_addsEmptyraces() throws Exception {\n+        String testData = \"string to write\";\n+        when(Environment.getExternalStorageDirectory()).thenReturn(existentDirectory);\n+        PowerMockito.whenNew(BufferedWriter.class).withAnyArguments().thenReturn(mockWriter);\n+        FileUtilities fileUtils = new FileUtilities();\n+        try\n+        {\n+            fileUtils.write(FILE_NAME, testData);", "originalCommit": "9fcfcdaaac2043c1ccf529e0c0a6aba1704e69b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "237dabc55c295905d1b01b451ec80b605ca0e761", "url": "https://github.com/opensrp/opensrp-client-core/commit/237dabc55c295905d1b01b451ec80b605ca0e761", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-12T21:21:14Z", "type": "commit"}, {"oid": "829a2cd904da158247d0804454b0a41db5c92c6d", "url": "https://github.com/opensrp/opensrp-client-core/commit/829a2cd904da158247d0804454b0a41db5c92c6d", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-19T07:11:38Z", "type": "commit"}, {"oid": "996d84550f874265aed5043a930d171a67ebad25", "url": "https://github.com/opensrp/opensrp-client-core/commit/996d84550f874265aed5043a930d171a67ebad25", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-26T08:03:22Z", "type": "commit"}, {"oid": "fb7393723f49ac9aa64e0f2974e14cf5e687c06c", "url": "https://github.com/opensrp/opensrp-client-core/commit/fb7393723f49ac9aa64e0f2974e14cf5e687c06c", "message": "Asserted written data is correct", "committedDate": "2020-05-26T08:57:40Z", "type": "commit"}, {"oid": "1b2baf3754e6aa00872cfa59149cc30f5b2219ae", "url": "https://github.com/opensrp/opensrp-client-core/commit/1b2baf3754e6aa00872cfa59149cc30f5b2219ae", "message": "deleted temporary folder", "committedDate": "2020-05-26T08:59:01Z", "type": "commit"}, {"oid": "c2c55694fc4a2f3b0df9abb3ccc79803175bc5a4", "url": "https://github.com/opensrp/opensrp-client-core/commit/c2c55694fc4a2f3b0df9abb3ccc79803175bc5a4", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-26T09:20:05Z", "type": "commit"}, {"oid": "ae01a12dcc8528cdf77f070f6259cf878e2876f8", "url": "https://github.com/opensrp/opensrp-client-core/commit/ae01a12dcc8528cdf77f070f6259cf878e2876f8", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-05-29T05:10:12Z", "type": "commit"}, {"oid": "3b1555a8deb84b0cca2bfa86cfe3b17f9154717e", "url": "https://github.com/opensrp/opensrp-client-core/commit/3b1555a8deb84b0cca2bfa86cfe3b17f9154717e", "message": "Merge branch 'master' into gmwasi-tt-9", "committedDate": "2020-06-02T07:52:33Z", "type": "commit"}, {"oid": "5f5349495030b39141adbbf9d237daca7d6454e9", "url": "https://github.com/opensrp/opensrp-client-core/commit/5f5349495030b39141adbbf9d237daca7d6454e9", "message": "fix code structure", "committedDate": "2020-06-02T07:57:45Z", "type": "commit"}, {"oid": "15820c06cd45f4a1499eee788b0ffd7ee005d3c4", "url": "https://github.com/opensrp/opensrp-client-core/commit/15820c06cd45f4a1499eee788b0ffd7ee005d3c4", "message": "fixed failing test", "committedDate": "2020-06-02T08:35:55Z", "type": "commit"}]}