{"pr_number": 770, "pr_title": "Change withURLPath to setRawURLPath", "pr_createdAt": "2020-04-02T12:32:58Z", "pr_url": "https://github.com/hub4j/github-api/pull/770", "timeline": [{"oid": "6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "url": "https://github.com/hub4j/github-api/commit/6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "message": "added test and modified url", "committedDate": "2020-04-06T12:43:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r404062196", "bodyText": "@bitwiseman protection_url is a full url http://localhost:36413/repos/github-api-test-org/temp-testDisableProtectionOnly/branches/master/protection, so I changed it , is this similar to what you have in mind", "author": "sladyn98", "createdAt": "2020-04-06T12:46:20Z", "path": "src/main/java/org/kohsuke/github/GHBranch.java", "diffHunk": "@@ -118,7 +118,7 @@ public String getSHA1() {\n      *             if disabling protection fails\n      */\n     public void disableProtection() throws IOException {\n-        root.createRequest().method(\"DELETE\").withUrlPath(protection_url).send();\n+        root.createRequest().method(\"DELETE\").setRawUrlPath(protection_url).send();", "originalCommit": "6a176e64546d999cb4d27b7d4bd2db8dcdaa51ee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2NDY4NA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r404064684", "bodyText": "I will add the wire mock snapshot soon.", "author": "sladyn98", "createdAt": "2020-04-06T12:50:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTg2MjU3NA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r405862574", "bodyText": "Yes, this is the kind of change that I'm looking for.", "author": "bitwiseman", "createdAt": "2020-04-08T22:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA2MjE5Ng=="}], "type": "inlineReview"}, {"oid": "f48b33e3639a552f85f714e69f24385eb1251004", "url": "https://github.com/hub4j/github-api/commit/f48b33e3639a552f85f714e69f24385eb1251004", "message": "Add resource files", "committedDate": "2020-04-07T12:47:20Z", "type": "forcePushed"}, {"oid": "f48b33e3639a552f85f714e69f24385eb1251004", "url": "https://github.com/hub4j/github-api/commit/f48b33e3639a552f85f714e69f24385eb1251004", "message": "Add resource files", "committedDate": "2020-04-07T12:47:20Z", "type": "forcePushed"}, {"oid": "5837cf42b0a339e2b41d61395b814f9618874494", "url": "https://github.com/hub4j/github-api/commit/5837cf42b0a339e2b41d61395b814f9618874494", "message": "Add resource files", "committedDate": "2020-04-20T07:51:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411331100", "bodyText": "Even though the above branch master is already protected it still throws a message that the branch is not protected. It seems a bit strange\n \"body\": \"{\\\"message\\\":\\\"Branch not protected\\\",\\\"documentation_url\\\":\\\"https://developer.github.com/v3/repos/branches/#remove-branch-protection\\\"}\",", "author": "sladyn98", "createdAt": "2020-04-20T12:19:21Z", "path": "src/test/java/org/kohsuke/github/GHBranchProtectionTest.java", "diffHunk": "@@ -73,4 +80,11 @@ public void testSignedCommits() throws Exception {\n         protection.disableSignedCommits();\n         assertFalse(protection.getRequiredSignatures());\n     }\n+\n+    @Test\n+    public void testGetProtection() throws Exception {\n+        GHBranchProtection protection = branch.enableProtection().enable();\n+        GHBranchProtection protectionTest = repo.getBranch(BRANCH).getProtection();\n+        assertTrue(protectionTest instanceof GHBranchProtection);", "originalCommit": "eefaf57374ddf6dd153e4188e29c37857dfef99a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc2NzQwMw==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411767403", "bodyText": "GitHub doesn't think it is protected.   The data files definitely show that.", "author": "bitwiseman", "createdAt": "2020-04-20T23:46:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkyODI2Mg==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411928262", "bodyText": "Is there any solution ? Because manually changing doesn't seem to work", "author": "sladyn98", "createdAt": "2020-04-21T07:10:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg2NTUwMg==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r413865502", "bodyText": "@sladyn98\nNot sure.  I'll take a look.", "author": "bitwiseman", "createdAt": "2020-04-23T14:52:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTEwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTMzMTQ4Ng==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411331486", "bodyText": "Tried changing this locally but still it throws the same error :(", "author": "sladyn98", "createdAt": "2020-04-20T12:20:01Z", "path": "src/test/resources/org/kohsuke/github/GHBranchProtectionTest/wiremock/testGetProtection/__files/repos_github-api-test-org_temp-testgetprotection_branches_master-3.json", "diffHunk": "@@ -0,0 +1,89 @@\n+{\n+  \"name\": \"master\",\n+  \"commit\": {\n+    \"sha\": \"fe352bd9e8dd386691a68be4dd59c9fd24da63d7\",\n+    \"node_id\": \"MDY6Q29tbWl0MjU3MjE0OTc3OmZlMzUyYmQ5ZThkZDM4NjY5MWE2OGJlNGRkNTljOWZkMjRkYTYzZDc=\",\n+    \"commit\": {\n+      \"author\": {\n+        \"name\": \"Sladyn\",\n+        \"email\": \"sladynnunes98@gmail.com\",\n+        \"date\": \"2020-04-20T08:15:11Z\"\n+      },\n+      \"committer\": {\n+        \"name\": \"GitHub\",\n+        \"email\": \"noreply@github.com\",\n+        \"date\": \"2020-04-20T08:15:11Z\"\n+      },\n+      \"message\": \"Initial commit\",\n+      \"tree\": {\n+        \"sha\": \"7e4b67f31859a5c6348d83419539ba9fa8864ed0\",\n+        \"url\": \"https://api.github.com/repos/github-api-test-org/temp-testGetProtection/git/trees/7e4b67f31859a5c6348d83419539ba9fa8864ed0\"\n+      },\n+      \"url\": \"https://api.github.com/repos/github-api-test-org/temp-testGetProtection/git/commits/fe352bd9e8dd386691a68be4dd59c9fd24da63d7\",\n+      \"comment_count\": 0,\n+      \"verification\": {\n+        \"verified\": true,\n+        \"reason\": \"valid\",\n+        \"signature\": \"-----BEGIN PGP SIGNATURE-----\\n\\nwsBcBAABCAAQBQJenVoPCRBK7hj4Ov3rIwAAdHIIADxk98COSq8twY32znmzSQDe\\nMWe+qYegYWwQr3qN/T6MS2WWDleXzyE0Jmp2eLY3xAO0dQeIy/axlcgaZkx4rq/w\\nwpOh0XMmpe3cijrOtZlqKebyXl1ctCndaob+4WN55R07BPOL6Skl7mokmFBFsLkr\\nnT4VnB3fJuhy0CuES75VZ6lQ839nNPkJ9Afmq/mTy/RAr6ZeBL3oH4hHGoB7JJ07\\n0Q/7zSs3yZQGZ87g9rGjt54B3pXX2qmJtNP5uxW9NtdOQefvMDmQkj+jvHWMVrgb\\n0g2foW0M+/sSSs925Rz8QweLB1UK+f7wSmyGJpkT3UJg9zaQ6oSUKO/F4gtvyFU=\\n=GtXJ\\n-----END PGP SIGNATURE-----\\n\",\n+        \"payload\": \"tree 7e4b67f31859a5c6348d83419539ba9fa8864ed0\\nauthor Sladyn <sladynnunes98@gmail.com> 1587370511 +0530\\ncommitter GitHub <noreply@github.com> 1587370511 +0530\\n\\nInitial commit\"\n+      }\n+    },\n+    \"url\": \"https://api.github.com/repos/github-api-test-org/temp-testGetProtection/commits/fe352bd9e8dd386691a68be4dd59c9fd24da63d7\",\n+    \"html_url\": \"https://github.com/github-api-test-org/temp-testGetProtection/commit/fe352bd9e8dd386691a68be4dd59c9fd24da63d7\",\n+    \"comments_url\": \"https://api.github.com/repos/github-api-test-org/temp-testGetProtection/commits/fe352bd9e8dd386691a68be4dd59c9fd24da63d7/comments\",\n+    \"author\": {\n+      \"login\": \"sladyn98\",\n+      \"id\": 28837406,\n+      \"node_id\": \"MDQ6VXNlcjI4ODM3NDA2\",\n+      \"avatar_url\": \"https://avatars1.githubusercontent.com/u/28837406?v=4\",\n+      \"gravatar_id\": \"\",\n+      \"url\": \"https://api.github.com/users/sladyn98\",\n+      \"html_url\": \"https://github.com/sladyn98\",\n+      \"followers_url\": \"https://api.github.com/users/sladyn98/followers\",\n+      \"following_url\": \"https://api.github.com/users/sladyn98/following{/other_user}\",\n+      \"gists_url\": \"https://api.github.com/users/sladyn98/gists{/gist_id}\",\n+      \"starred_url\": \"https://api.github.com/users/sladyn98/starred{/owner}{/repo}\",\n+      \"subscriptions_url\": \"https://api.github.com/users/sladyn98/subscriptions\",\n+      \"organizations_url\": \"https://api.github.com/users/sladyn98/orgs\",\n+      \"repos_url\": \"https://api.github.com/users/sladyn98/repos\",\n+      \"events_url\": \"https://api.github.com/users/sladyn98/events{/privacy}\",\n+      \"received_events_url\": \"https://api.github.com/users/sladyn98/received_events\",\n+      \"type\": \"User\",\n+      \"site_admin\": false\n+    },\n+    \"committer\": {\n+      \"login\": \"web-flow\",\n+      \"id\": 19864447,\n+      \"node_id\": \"MDQ6VXNlcjE5ODY0NDQ3\",\n+      \"avatar_url\": \"https://avatars3.githubusercontent.com/u/19864447?v=4\",\n+      \"gravatar_id\": \"\",\n+      \"url\": \"https://api.github.com/users/web-flow\",\n+      \"html_url\": \"https://github.com/web-flow\",\n+      \"followers_url\": \"https://api.github.com/users/web-flow/followers\",\n+      \"following_url\": \"https://api.github.com/users/web-flow/following{/other_user}\",\n+      \"gists_url\": \"https://api.github.com/users/web-flow/gists{/gist_id}\",\n+      \"starred_url\": \"https://api.github.com/users/web-flow/starred{/owner}{/repo}\",\n+      \"subscriptions_url\": \"https://api.github.com/users/web-flow/subscriptions\",\n+      \"organizations_url\": \"https://api.github.com/users/web-flow/orgs\",\n+      \"repos_url\": \"https://api.github.com/users/web-flow/repos\",\n+      \"events_url\": \"https://api.github.com/users/web-flow/events{/privacy}\",\n+      \"received_events_url\": \"https://api.github.com/users/web-flow/received_events\",\n+      \"type\": \"User\",\n+      \"site_admin\": false\n+    },\n+    \"parents\": []\n+  },\n+  \"_links\": {\n+    \"self\": \"https://api.github.com/repos/github-api-test-org/temp-testGetProtection/branches/master\",\n+    \"html\": \"https://github.com/github-api-test-org/temp-testGetProtection/tree/master\"\n+  },\n+  \"protected\": false,", "originalCommit": "eefaf57374ddf6dd153e4188e29c37857dfef99a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTc2NjMyNw==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r411766327", "bodyText": "This is where the error is recorded. Changing the protected where you didn't doesn't change this result being returned.", "author": "bitwiseman", "createdAt": "2020-04-20T23:43:37Z", "path": "src/test/resources/org/kohsuke/github/GHBranchProtectionTest/wiremock/testGetProtection/mappings/repos_github-api-test-org_temp-testgetprotection_branches_master_protection-4.json", "diffHunk": "@@ -0,0 +1,40 @@\n+{\n+  \"id\": \"1d395564-9154-440b-ade4-b18cb8b970cc\",\n+  \"name\": \"repos_github-api-test-org_temp-testgetprotection_branches_master_protection\",\n+  \"request\": {\n+    \"url\": \"/repos/github-api-test-org/temp-testGetProtection/branches/master/protection\",\n+    \"method\": \"GET\",\n+    \"headers\": {\n+      \"Accept\": {\n+        \"equalTo\": \"text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\"\n+      }\n+    }\n+  },\n+  \"response\": {\n+    \"status\": 404,\n+    \"body\": \"{\\\"message\\\":\\\"Branch not protected\\\",\\\"documentation_url\\\":\\\"https://developer.github.com/v3/repos/branches/#get-branch-protection\\\"}\",", "originalCommit": "eefaf57374ddf6dd153e4188e29c37857dfef99a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "21e9dd6f51366ed319c044993e5f50872a3b282a", "url": "https://github.com/hub4j/github-api/commit/21e9dd6f51366ed319c044993e5f50872a3b282a", "message": "Change withURLPath to setRawURLPath", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "191dd49653ba5d52909966b6a690f9b5f2df7359", "url": "https://github.com/hub4j/github-api/commit/191dd49653ba5d52909966b6a690f9b5f2df7359", "message": "added test and modified url", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "81d7d6236bfab3afb04d45acd5f8fe32bbe78081", "url": "https://github.com/hub4j/github-api/commit/81d7d6236bfab3afb04d45acd5f8fe32bbe78081", "message": "Add resource files", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "057ba3887374c951afb9056ef939a7c1fac5c7e9", "url": "https://github.com/hub4j/github-api/commit/057ba3887374c951afb9056ef939a7c1fac5c7e9", "message": "Added getProtectionTest", "committedDate": "2020-04-23T18:13:50Z", "type": "commit"}, {"oid": "c3e94585552ef7fcf2aa8bf3f6cbc17ddd89ac44", "url": "https://github.com/hub4j/github-api/commit/c3e94585552ef7fcf2aa8bf3f6cbc17ddd89ac44", "message": "Additional modifications to test", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "83122ac99e501c1242d43e3d9250406d2657a733", "url": "https://github.com/hub4j/github-api/commit/83122ac99e501c1242d43e3d9250406d2657a733", "message": "Take new snapshot of testGetProtection()", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "ca76975461e6bc498551f08b0def85a11515603d", "url": "https://github.com/hub4j/github-api/commit/ca76975461e6bc498551f08b0def85a11515603d", "message": "Record Disable test", "committedDate": "2020-04-23T18:13:51Z", "type": "commit"}, {"oid": "ca76975461e6bc498551f08b0def85a11515603d", "url": "https://github.com/hub4j/github-api/commit/ca76975461e6bc498551f08b0def85a11515603d", "message": "Record Disable test", "committedDate": "2020-04-23T18:13:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512256", "bodyText": "This is not a raw URL.\nI'm going to add  check to setRawUrlPath the requires it starting with http.", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:00Z", "path": "src/main/java/org/kohsuke/github/GHGist.java", "diffHunk": "@@ -182,7 +182,7 @@ public void star() throws IOException {\n      *             the io exception\n      */\n     public void unstar() throws IOException {\n-        root.createRequest().method(\"DELETE\").withUrlPath(getApiTailUrl(\"star\")).send();\n+        root.createRequest().method(\"DELETE\").setRawUrlPath(getApiTailUrl(\"star\")).send();", "originalCommit": "ca76975461e6bc498551f08b0def85a11515603d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjQxOA==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512418", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    root.createRequest().method(\"DELETE\").setRawUrlPath(getApiTailUrl(\"star\")).send();\n          \n          \n            \n                    root.createRequest().method(\"DELETE\").withUrlPath(getApiTailUrl(\"star\")).send();", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxNzUzMQ==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415517531", "bodyText": "Sounds like a really good idea.", "author": "sladyn98", "createdAt": "2020-04-27T05:19:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjI1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTUxMjQ2Nw==", "url": "https://github.com/hub4j/github-api/pull/770#discussion_r415512467", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    root.createRequest().method(\"PUT\").setRawUrlPath(getApiTailUrl(\"star\")).send();\n          \n          \n            \n                    root.createRequest().method(\"PUT\").withUrlPath(getApiTailUrl(\"star\")).send();", "author": "bitwiseman", "createdAt": "2020-04-27T05:04:42Z", "path": "src/main/java/org/kohsuke/github/GHGist.java", "diffHunk": "@@ -172,7 +172,7 @@ String getApiTailUrl(String tail) {\n      *             the io exception\n      */\n     public void star() throws IOException {\n-        root.createRequest().method(\"PUT\").withUrlPath(getApiTailUrl(\"star\")).send();\n+        root.createRequest().method(\"PUT\").setRawUrlPath(getApiTailUrl(\"star\")).send();", "originalCommit": "ca76975461e6bc498551f08b0def85a11515603d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7069176cf698deb84bf2d55d0bc0539580114325", "url": "https://github.com/hub4j/github-api/commit/7069176cf698deb84bf2d55d0bc0539580114325", "message": "Apply suggestions from code review\n\nCo-Authored-By: Liam Newman <bitwiseman@gmail.com>", "committedDate": "2020-04-27T05:19:57Z", "type": "commit"}, {"oid": "3b51e87fbf1c803dcae47b415b22c9ed52e681dc", "url": "https://github.com/hub4j/github-api/commit/3b51e87fbf1c803dcae47b415b22c9ed52e681dc", "message": "Merge branch 'master' into change_url_methods", "committedDate": "2020-04-27T16:48:23Z", "type": "commit"}]}