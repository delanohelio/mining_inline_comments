{"pr_number": 683, "pr_title": "Add support for all create team parameters", "pr_createdAt": "2020-01-25T20:09:24Z", "pr_url": "https://github.com/hub4j/github-api/pull/683", "timeline": [{"oid": "69d2160a0dbf39485a3a9e384374f4f75105ad9f", "url": "https://github.com/hub4j/github-api/commit/69d2160a0dbf39485a3a9e384374f4f75105ad9f", "message": "Add support for all create team parameters", "committedDate": "2020-01-25T20:07:56Z", "type": "commit"}, {"oid": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "url": "https://github.com/hub4j/github-api/commit/64aae75680c4f7f1dd1f6f5132739f501887fd02", "message": "Allow updating privacy status", "committedDate": "2020-01-26T11:02:01Z", "type": "commit"}, {"oid": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "url": "https://github.com/hub4j/github-api/commit/64aae75680c4f7f1dd1f6f5132739f501887fd02", "message": "Allow updating privacy status", "committedDate": "2020-01-26T11:02:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDQxNQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371080415", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public class GHCreateTeamBuilder {\n          \n          \n            \n            public class GHTeamBuilder {\n          \n      \n    \n    \n  \n\nThen we could also have a GHTeamUpdater.", "author": "bitwiseman", "createdAt": "2020-01-27T06:37:56Z", "path": "src/main/java/org/kohsuke/github/GHCreateTeamBuilder.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package org.kohsuke.github;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * Creates a team.\n+ */\n+public class GHCreateTeamBuilder {", "originalCommit": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MDc4Mw==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371090783", "bodyText": "Done", "author": "timja", "createdAt": "2020-01-27T07:26:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4MDQxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NDQ4NA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371084484", "bodyText": "@timja\nThis matches the existing behavior of other set methods on this class. There have been issues filed describing this is not great.\nThis is not a blocker for this PR, but I'd like your thoughts on #589.", "author": "bitwiseman", "createdAt": "2020-01-27T07:00:01Z", "path": "src/main/java/org/kohsuke/github/GHTeam.java", "diffHunk": "@@ -106,6 +125,18 @@ public void setDescription(String description) throws IOException {\n         root.createRequest().method(\"PATCH\").with(\"description\", description).withUrlPath(api(\"\")).send();\n     }\n \n+    /**\n+     * Sets privacy.\n+     *\n+     * @param privacy\n+     *            the privacy\n+     * @throws IOException\n+     *             the io exception\n+     */\n+    public void setPrivacy(Privacy privacy) throws IOException {\n+        root.createRequest().method(\"PATCH\").with(\"privacy\", privacy).withUrlPath(api(\"\")).send();", "originalCommit": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MDM0OA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371090348", "bodyText": "agree, changed to update.\nI didn't like the name but I followed the other method for consistency in the class", "author": "timja", "createdAt": "2020-01-27T07:24:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NDQ4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MzQ5Mg==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371093492", "bodyText": "Glad you agree. But leave this for now. I don't want to do this unevenly (some update some set).  \ud83d\ude04", "author": "bitwiseman", "createdAt": "2020-01-27T07:37:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NDQ4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NTE5Mw==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371085193", "bodyText": "I think the other createTeam methods should be marked as @Deprecated.  Do you agree?", "author": "bitwiseman", "createdAt": "2020-01-27T07:03:55Z", "path": "src/main/java/org/kohsuke/github/GHOrganization.java", "diffHunk": "@@ -455,6 +455,21 @@ public GHTeam createTeam(String name, GHRepository... repositories) throws IOExc\n         return createTeam(name, Arrays.asList(repositories));\n     }\n \n+    /**\n+     * Starts a builder that creates a new team.\n+     *\n+     * <p>\n+     * You use the returned builder to set various properties, then call {@link GHCreateTeamBuilder#create()} to finally\n+     * create a team.\n+     *\n+     * @param name\n+     *            the name\n+     * @return the gh create repository builder\n+     */\n+    public GHCreateTeamBuilder createTeam(String name) {", "originalCommit": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MDcyNQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371090725", "bodyText": "Yes, wanted your input on it first before I did it, done.", "author": "timja", "createdAt": "2020-01-27T07:26:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NTE5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NTk1Mg==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371085952", "bodyText": "Add a link to the github api documentation for create team", "author": "bitwiseman", "createdAt": "2020-01-27T07:07:39Z", "path": "src/main/java/org/kohsuke/github/GHCreateTeamBuilder.java", "diffHunk": "@@ -0,0 +1,92 @@\n+package org.kohsuke.github;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * Creates a team.", "originalCommit": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MDY5OQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371090699", "bodyText": "Done", "author": "timja", "createdAt": "2020-01-27T07:26:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NTk1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NjE4NA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371086184", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return new GHCreateTeamBuilder(root, \"/orgs/\" + login + \"/teams\", name);\n          \n          \n            \n                    return new GHCreateTeamBuilder(root, login, name);\n          \n      \n    \n    \n  \n\nOr maybe even this (and add name to builder):\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return new GHCreateTeamBuilder(root, \"/orgs/\" + login + \"/teams\", name);\n          \n          \n            \n                    return new GHCreateTeamBuilder(root);\n          \n      \n    \n    \n  \n\nIs a team always created attached to a login?  As me, could I create a team that your login owns?", "author": "bitwiseman", "createdAt": "2020-01-27T07:08:55Z", "path": "src/main/java/org/kohsuke/github/GHOrganization.java", "diffHunk": "@@ -455,6 +455,21 @@ public GHTeam createTeam(String name, GHRepository... repositories) throws IOExc\n         return createTeam(name, Arrays.asList(repositories));\n     }\n \n+    /**\n+     * Starts a builder that creates a new team.\n+     *\n+     * <p>\n+     * You use the returned builder to set various properties, then call {@link GHCreateTeamBuilder#create()} to finally\n+     * create a team.\n+     *\n+     * @param name\n+     *            the name\n+     * @return the gh create repository builder\n+     */\n+    public GHCreateTeamBuilder createTeam(String name) {\n+        return new GHCreateTeamBuilder(root, \"/orgs/\" + login + \"/teams\", name);", "originalCommit": "64aae75680c4f7f1dd1f6f5132739f501887fd02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MDYwNQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371090605", "bodyText": "I did this for consistency with the create repo builder, I've made it take an org name now and not the 'apiTailUrl'.\nI've kept the name as it's the only mandatory parameter for the builder", "author": "timja", "createdAt": "2020-01-27T07:25:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA4NjE4NA=="}], "type": "inlineReview"}, {"oid": "32754ffcf57a0aa1de66ebb60acaaf1daef07b0e", "url": "https://github.com/hub4j/github-api/commit/32754ffcf57a0aa1de66ebb60acaaf1daef07b0e", "message": "Cleanup based on review", "committedDate": "2020-01-27T07:24:01Z", "type": "commit"}, {"oid": "4cc90b4929e8e609ac36929277ddd13861c17e9c", "url": "https://github.com/hub4j/github-api/commit/4cc90b4929e8e609ac36929277ddd13861c17e9c", "message": "Fix test", "committedDate": "2020-01-27T07:31:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MzY1NA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371093654", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * https://developer.github.com/v3/teams/#parameters\n          \n          \n            \n             * https://developer.github.com/v3/teams/#create-team", "author": "bitwiseman", "createdAt": "2020-01-27T07:38:27Z", "path": "src/main/java/org/kohsuke/github/GHTeamBuilder.java", "diffHunk": "@@ -5,16 +5,18 @@\n \n /**\n  * Creates a team.\n+ *\n+ * https://developer.github.com/v3/teams/#parameters", "originalCommit": "32754ffcf57a0aa1de66ebb60acaaf1daef07b0e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5MzkyNQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371093925", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public void updatePrivacy(Privacy privacy) throws IOException {\n          \n          \n            \n                public void setPrivacy(Privacy privacy) throws IOException {", "author": "bitwiseman", "createdAt": "2020-01-27T07:39:38Z", "path": "src/main/java/org/kohsuke/github/GHTeam.java", "diffHunk": "@@ -126,14 +126,14 @@ public void setDescription(String description) throws IOException {\n     }\n \n     /**\n-     * Sets privacy.\n+     * Updates the team's privacy setting.\n      *\n      * @param privacy\n      *            the privacy\n      * @throws IOException\n      *             the io exception\n      */\n-    public void setPrivacy(Privacy privacy) throws IOException {\n+    public void updatePrivacy(Privacy privacy) throws IOException {", "originalCommit": "32754ffcf57a0aa1de66ebb60acaaf1daef07b0e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0f3278348883d1105201b4bae0ee53b330539311", "url": "https://github.com/hub4j/github-api/commit/0f3278348883d1105201b4bae0ee53b330539311", "message": "Revert updatePrivacy", "committedDate": "2020-01-27T07:40:16Z", "type": "commit"}, {"oid": "963478e2066d93867cab900790a24938ac2fdf68", "url": "https://github.com/hub4j/github-api/commit/963478e2066d93867cab900790a24938ac2fdf68", "message": "Merge branch 'master' into add-full-create-team-parameters", "committedDate": "2020-01-27T07:46:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5NjQyOQ==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371096429", "bodyText": "Question:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public GHTeamBuilder maintainers(List<String> maintainers) {\n          \n          \n            \n                public GHTeamBuilder maintainers(String... maintainers) {", "author": "bitwiseman", "createdAt": "2020-01-27T07:48:18Z", "path": "src/main/java/org/kohsuke/github/GHTeamBuilder.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package org.kohsuke.github;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * Creates a team.\n+ *\n+ * https://developer.github.com/v3/teams/#create-team\n+ */\n+public class GHTeamBuilder {\n+\n+    private final GitHub root;\n+    protected final Requester builder;\n+    private final String orgName;\n+\n+    public GHTeamBuilder(GitHub root, String orgName, String name) {\n+        this.root = root;\n+        this.orgName = orgName;\n+        this.builder = root.createRequest();\n+        this.builder.with(\"name\", name);\n+    }\n+\n+    /**\n+     * Description for this team.\n+     *\n+     * @param description\n+     *            description of team\n+     * @return a builder to continue with building\n+     */\n+    public GHTeamBuilder description(String description) {\n+        this.builder.with(\"description\", description);\n+        return this;\n+    }\n+\n+    /**\n+     * Maintainers for this team.\n+     *\n+     * @param maintainers\n+     *            maintainers of team\n+     * @return a builder to continue with building\n+     */\n+    public GHTeamBuilder maintainers(List<String> maintainers) {", "originalCommit": "0f3278348883d1105201b4bae0ee53b330539311", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5NzYzOA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371097638", "bodyText": "I mean these suggestions as added convenience methods. ... But maybe they can wait to a future release.", "author": "bitwiseman", "createdAt": "2020-01-27T07:52:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5NjQyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5NzgwNA==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371097804", "bodyText": "makes sense, no annoying singletonList to use it", "author": "timja", "createdAt": "2020-01-27T07:52:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5NjQyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTA5Njg2Mg==", "url": "https://github.com/hub4j/github-api/pull/683#discussion_r371096862", "bodyText": "Same question:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public GHTeamBuilder repoNames(List<String> repoNames) {\n          \n          \n            \n                public GHTeamBuilder repositories(GHRepository... repositories) {", "author": "bitwiseman", "createdAt": "2020-01-27T07:49:42Z", "path": "src/main/java/org/kohsuke/github/GHTeamBuilder.java", "diffHunk": "@@ -0,0 +1,94 @@\n+package org.kohsuke.github;\n+\n+import java.io.IOException;\n+import java.util.List;\n+\n+/**\n+ * Creates a team.\n+ *\n+ * https://developer.github.com/v3/teams/#create-team\n+ */\n+public class GHTeamBuilder {\n+\n+    private final GitHub root;\n+    protected final Requester builder;\n+    private final String orgName;\n+\n+    public GHTeamBuilder(GitHub root, String orgName, String name) {\n+        this.root = root;\n+        this.orgName = orgName;\n+        this.builder = root.createRequest();\n+        this.builder.with(\"name\", name);\n+    }\n+\n+    /**\n+     * Description for this team.\n+     *\n+     * @param description\n+     *            description of team\n+     * @return a builder to continue with building\n+     */\n+    public GHTeamBuilder description(String description) {\n+        this.builder.with(\"description\", description);\n+        return this;\n+    }\n+\n+    /**\n+     * Maintainers for this team.\n+     *\n+     * @param maintainers\n+     *            maintainers of team\n+     * @return a builder to continue with building\n+     */\n+    public GHTeamBuilder maintainers(List<String> maintainers) {\n+        this.builder.with(\"maintainers\", maintainers);\n+        return this;\n+    }\n+\n+    /**\n+     * Repo names to add this team to.\n+     *\n+     * @param repoNames\n+     *            repoNames to add team to\n+     * @return a builder to continue with building\n+     */\n+    public GHTeamBuilder repoNames(List<String> repoNames) {", "originalCommit": "0f3278348883d1105201b4bae0ee53b330539311", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7e600c43ede4fee57cda9604d0b27430e0322b89", "url": "https://github.com/hub4j/github-api/commit/7e600c43ede4fee57cda9604d0b27430e0322b89", "message": "Var-args instead of list", "committedDate": "2020-01-27T07:52:08Z", "type": "commit"}, {"oid": "e008021a429ec203d20d3c3f71ff5fc131f08bca", "url": "https://github.com/hub4j/github-api/commit/e008021a429ec203d20d3c3f71ff5fc131f08bca", "message": "Merge branch 'add-full-create-team-parameters' of github.com:timja/github-api into add-full-create-team-parameters", "committedDate": "2020-01-27T07:52:15Z", "type": "commit"}]}