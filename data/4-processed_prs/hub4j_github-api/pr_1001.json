{"pr_number": 1001, "pr_title": "Implement static typing for previews and clean up usage declarations", "pr_createdAt": "2020-12-15T19:53:51Z", "pr_url": "https://github.com/hub4j/github-api/pull/1001", "timeline": [{"oid": "79b49a469c123335585953de1f57e106909245b4", "url": "https://github.com/hub4j/github-api/commit/79b49a469c123335585953de1f57e106909245b4", "message": "Clean up preview declarations", "committedDate": "2020-12-15T19:39:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0NTIwNQ==", "url": "https://github.com/hub4j/github-api/pull/1001#discussion_r543645205", "bodyText": "This was a product of the formater", "author": "marcoferrer", "createdAt": "2020-12-15T19:57:02Z", "path": "src/main/java/org/kohsuke/github/GHRepository.java", "diffHunk": "@@ -2959,10 +2959,14 @@ void populate() throws IOException {\n             // There is bug in Push event payloads that returns the wrong url.\n             // All other occurrences of \"url\" take the form \"https://api.github.com/...\".\n             // For Push event repository records, they take the form \"https://github.com/{fullName}\".\n-            root.createRequest().withPreview(BAPTISE).setRawUrlPath(url.toString()).fetchInto(this).wrap(root);\n+            root.createRequest().withPreview(BAPTISTE).setRawUrlPath(url.toString()).fetchInto(this).wrap(root);\n         } catch (HttpException e) {\n             if (e.getCause() instanceof JsonParseException) {\n-                root.createRequest().withPreview(BAPTISE).withUrlPath(\"/repos/\" + full_name).fetchInto(this).wrap(root);\n+                root.createRequest()\n+                        .withPreview(BAPTISTE)\n+                        .withUrlPath(\"/repos/\" + full_name)\n+                        .fetchInto(this)\n+                        .wrap(root);", "originalCommit": "79b49a469c123335585953de1f57e106909245b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0NTg3NQ==", "url": "https://github.com/hub4j/github-api/pull/1001#discussion_r543645875", "bodyText": "This overload of the withPreview method was defined to prevent us from having to update every usage of the method after Previews was converted to an enum. This was an attempt at minimizing noise in the PR", "author": "marcoferrer", "createdAt": "2020-12-15T19:58:12Z", "path": "src/main/java/org/kohsuke/github/GitHubRequest.java", "diffHunk": "@@ -437,6 +437,10 @@ public B withPreview(String name) {\n             return withHeader(\"Accept\", name);\n         }\n \n+        public B withPreview(Previews preview) {\n+            return withPreview(preview.mediaType());\n+        }\n+", "originalCommit": "79b49a469c123335585953de1f57e106909245b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MzY0NjY5NQ==", "url": "https://github.com/hub4j/github-api/pull/1001#discussion_r543646695", "bodyText": "Typo fixed throughout the codebase", "author": "marcoferrer", "createdAt": "2020-12-15T19:59:31Z", "path": "src/main/java/org/kohsuke/github/Previews.java", "diffHunk": "@@ -7,121 +7,133 @@\n  *\n  * @author Kohsuke Kawaguchi\n  */\n-class Previews {\n+enum Previews {\n+\n     /**\n      * Check-runs and check-suites\n      *\n      * @see <a href=\"https://developer.github.com/v3/previews/#check-runs-and-check-suites-api\">GitHub API Previews</a>\n      */\n-    static final String ANTIOPE = \"application/vnd.github.antiope-preview+json\";\n+    ANTIOPE(\"application/vnd.github.antiope-preview+json\"),\n \n     /**\n      * Enhanced Deployments\n      *\n      * @see <a href=\"https://developer.github.com/v3/previews/#enhanced-deployments\">GitHub API Previews</a>\n      */\n-    static final String ANT_MAN = \"application/vnd.github.ant-man-preview+json\";\n+    ANT_MAN(\"application/vnd.github.ant-man-preview+json\"),\n \n     /**\n      * Create repository from template repository\n      *\n      * @see <a href=\"https://developer.github.com/v3/previews/#create-and-use-repository-templates\">GitHub API\n      *      Previews</a>\n      */\n-    static final String BAPTISE = \"application/vnd.github.baptiste-preview+json\";\n+    BAPTISTE(\"application/vnd.github.baptiste-preview+json\"),", "originalCommit": "79b49a469c123335585953de1f57e106909245b4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e007284d2fa4b717e3864412d73189a778205dce", "url": "https://github.com/hub4j/github-api/commit/e007284d2fa4b717e3864412d73189a778205dce", "message": "Merge branch 'master' into preview-enum-and-cleanup", "committedDate": "2020-12-15T23:20:30Z", "type": "commit"}]}