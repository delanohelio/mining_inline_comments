{"pr_number": 931, "pr_title": "Ruby html-formatter", "pr_createdAt": "2020-03-11T13:20:43Z", "pr_url": "https://github.com/cucumber/common/pull/931", "timeline": [{"oid": "583098aba30e38bfb116cc332941b7c177b86178", "url": "https://github.com/cucumber/common/commit/583098aba30e38bfb116cc332941b7c177b86178", "message": "Initialize gem for html-formatter", "committedDate": "2020-03-11T13:19:38Z", "type": "commit"}, {"oid": "94385856712f0e8f1faf8446e8334dfddd76610d", "url": "https://github.com/cucumber/common/commit/94385856712f0e8f1faf8446e8334dfddd76610d", "message": "Enable CircleCI on html-formatter/ruby", "committedDate": "2020-03-11T13:22:53Z", "type": "commit"}, {"oid": "f0017f71958c0f5b59ffb9bac4fab5a50375ced2", "url": "https://github.com/cucumber/common/commit/f0017f71958c0f5b59ffb9bac4fab5a50375ced2", "message": "Add acceptance tests", "committedDate": "2020-03-11T13:59:39Z", "type": "commit"}, {"oid": "e3a8ecc996f2039301875b32a42930291204be60", "url": "https://github.com/cucumber/common/commit/e3a8ecc996f2039301875b32a42930291204be60", "message": "Copy needed data from html-formatter/javascript", "committedDate": "2020-03-11T14:23:41Z", "type": "commit"}, {"oid": "bb58f821fb3b574ab93301fde58f79db8ef06225", "url": "https://github.com/cucumber/common/commit/bb58f821fb3b574ab93301fde58f79db8ef06225", "message": "Start simple mustache formatter", "committedDate": "2020-03-11T14:59:51Z", "type": "commit"}, {"oid": "a345a90810e20de6a746e867944e7a9760ba5e69", "url": "https://github.com/cucumber/common/commit/a345a90810e20de6a746e867944e7a9760ba5e69", "message": "Ensure content before messages is only written once", "committedDate": "2020-03-11T15:03:02Z", "type": "commit"}, {"oid": "63c8fb1a90cbb187665d8536039234965784349b", "url": "https://github.com/cucumber/common/commit/63c8fb1a90cbb187665d8536039234965784349b", "message": "Added TemplateWriter class to cut content of the template", "committedDate": "2020-03-11T15:40:05Z", "type": "commit"}, {"oid": "c1198c1cf621dd3f7abc17683b1f51c034cc285a", "url": "https://github.com/cucumber/common/commit/c1198c1cf621dd3f7abc17683b1f51c034cc285a", "message": "Produce complete HTML", "committedDate": "2020-03-11T16:53:24Z", "type": "commit"}, {"oid": "36fe56e9a5ca501507545d29854bd4160409ee81", "url": "https://github.com/cucumber/common/commit/36fe56e9a5ca501507545d29854bd4160409ee81", "message": "Move assets loading in a specific class", "committedDate": "2020-03-12T07:38:13Z", "type": "commit"}, {"oid": "a42c1bd36b6b92532ac73eb184aca5de53c2499d", "url": "https://github.com/cucumber/common/commit/a42c1bd36b6b92532ac73eb184aca5de53c2499d", "message": "Make tests more robust by mocking templates", "committedDate": "2020-03-12T07:45:41Z", "type": "commit"}, {"oid": "32f8824a8db90022cb2627e3c3baa4375cfa1778", "url": "https://github.com/cucumber/common/commit/32f8824a8db90022cb2627e3c3baa4375cfa1778", "message": "Add some tests for assets loader", "committedDate": "2020-03-12T08:00:51Z", "type": "commit"}, {"oid": "8ce43b6faae047aba89f12fd090bb84347464501", "url": "https://github.com/cucumber/common/commit/8ce43b6faae047aba89f12fd090bb84347464501", "message": "Implement html-formatter client", "committedDate": "2020-03-12T08:20:32Z", "type": "commit"}, {"oid": "f6949560819015c257c7fccf1db2f99f62e1c5b5", "url": "https://github.com/cucumber/common/commit/f6949560819015c257c7fccf1db2f99f62e1c5b5", "message": "Also use messages from CCK as acceptance tests", "committedDate": "2020-03-12T08:42:13Z", "type": "commit"}, {"oid": "9e2c110ba37e114029ea4d5bcab4ea5f08ef5b54", "url": "https://github.com/cucumber/common/commit/9e2c110ba37e114029ea4d5bcab4ea5f08ef5b54", "message": "Enable specifying message format for CLI", "committedDate": "2020-03-12T08:46:39Z", "type": "commit"}, {"oid": "2e974d9f6c887401dc2279d12c6a3e07a67e985c", "url": "https://github.com/cucumber/common/commit/2e974d9f6c887401dc2279d12c6a3e07a67e985c", "message": "Add .process_messages entry point to formatter", "committedDate": "2020-03-12T08:57:46Z", "type": "commit"}, {"oid": "84a0b9be543eb31e8594bc02c9cc2020a8e9abac", "url": "https://github.com/cucumber/common/commit/84a0b9be543eb31e8594bc02c9cc2020a8e9abac", "message": "Merge branch 'master' into html-formatter-for-ruby", "committedDate": "2020-03-12T09:00:28Z", "type": "commit"}, {"oid": "d2bf6e06b0d2ad4bd8cbdb787e60ffd8bbccbdb4", "url": "https://github.com/cucumber/common/commit/d2bf6e06b0d2ad4bd8cbdb787e60ffd8bbccbdb4", "message": "Rename executable 'cucumber-html-formatter'", "committedDate": "2020-03-12T09:11:18Z", "type": "commit"}, {"oid": "ee0d26f072ff077eb344d1c0ae8db5f07b115e96", "url": "https://github.com/cucumber/common/commit/ee0d26f072ff077eb344d1c0ae8db5f07b115e96", "message": "Use same version as other formatters", "committedDate": "2020-03-12T09:15:10Z", "type": "commit"}, {"oid": "14a6e125e463eb6f7eae0165c84ef33b38e5729c", "url": "https://github.com/cucumber/common/commit/14a6e125e463eb6f7eae0165c84ef33b38e5729c", "message": "Do not store assets in GIT", "committedDate": "2020-03-12T09:30:26Z", "type": "commit"}, {"oid": "57d7541115d54e4453b45ce57c026f33f45332b9", "url": "https://github.com/cucumber/common/commit/57d7541115d54e4453b45ce57c026f33f45332b9", "message": "Do not run fake-cucumber as part of default make target as Node is not available on CI,\nuse CCK messages instead.", "committedDate": "2020-03-12T09:32:55Z", "type": "commit"}, {"oid": "70d66eecf0e51e19c4d97fcb8029b546d606feb4", "url": "https://github.com/cucumber/common/commit/70d66eecf0e51e19c4d97fcb8029b546d606feb4", "message": "Add subrepo", "committedDate": "2020-03-12T09:36:22Z", "type": "commit"}, {"oid": "fe395c6aed8b3ff472245ad36e9aa9979963c6d1", "url": "https://github.com/cucumber/common/commit/fe395c6aed8b3ff472245ad36e9aa9979963c6d1", "message": "Apparently the assets removal was not properly commited", "committedDate": "2020-03-12T09:52:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwNzU3OA==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391507578", "bodyText": "Are these removed again when make clean is used?", "author": "mpkorstanje", "createdAt": "2020-03-12T09:53:05Z", "path": "html-formatter/ruby/assets/.gitignore", "diffHunk": "@@ -0,0 +1,3 @@\n+*.html\n+*.js\n+*.css", "originalCommit": "70d66eecf0e51e19c4d97fcb8029b546d606feb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwOTEzNg==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391509136", "bodyText": "now they should be, thanks for pointing that out :)", "author": "vincent-psarga", "createdAt": "2020-03-12T09:55:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwNzU3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwODIwOQ==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391508209", "bodyText": "This file is duplicated 2 times now. Perhaps we should copy it from the html-formatter directory.", "author": "mpkorstanje", "createdAt": "2020-03-12T09:54:06Z", "path": "html-formatter/ruby/assets/index.mustache.html", "diffHunk": "@@ -0,0 +1,20 @@\n+<!DOCTYPE html>\n+<html lang=\"en\">\n+<head>\n+\t<title>Cucumber</title>", "originalCommit": "70d66eecf0e51e19c4d97fcb8029b546d606feb4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwOTczOQ==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391509739", "bodyText": "It should have been removed with commit 14a6e12, but it did not. Normally that's ok now.", "author": "vincent-psarga", "createdAt": "2020-03-12T09:56:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUwODIwOQ=="}], "type": "inlineReview"}, {"oid": "92b3fbd575173250f062ab37b477a7670344b9cc", "url": "https://github.com/cucumber/common/commit/92b3fbd575173250f062ab37b477a7670344b9cc", "message": "Remove assets when running make clean", "committedDate": "2020-03-12T09:54:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUxMDYzOQ==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391510639", "bodyText": "Does this override the clean directive in the included make file or does it extend it?", "author": "mpkorstanje", "createdAt": "2020-03-12T09:58:07Z", "path": "html-formatter/ruby/Makefile", "diffHunk": "@@ -0,0 +1,42 @@\n+include default.mk\n+# https://stackoverflow.com/questions/2483182/recursive-wildcards-in-gnu-make\n+rwildcard=$(foreach d,$(wildcard $(1:=/*)),$(call rwildcard,$d,$2) $(filter $(subst *,%,$2),$d))\n+\n+SOURCE_FEATURES=$(call rwildcard,../javascript/features,*.feature)\n+FEATURES=$(patsubst ../javascript/%,%,$(SOURCE_FEATURES))\n+CCK_MESSAGES=$(call rwildcard,../../compatibility-kit/ruby,*.ndjson)\n+\n+.deps: assets/cucumber-react.css assets/cucumber-html.js assets/index.mustache.html\n+\n+.tested: acceptance/cck.html\n+\n+acceptance/cck.html: $(CCK_MESSAGES)\n+\tmkdir -p $(@D)\n+\tcat $^ | bundle exec bin/cucumber-html-formatter --format ndjson > $@\n+\n+acceptance/cucumber.html: .deps $(FEATURES)\n+\tmkdir -p $(@D)\n+\t../../fake-cucumber/javascript/bin/fake-cucumber \\\n+\t  --format ndjson \\\n+\t\tfeatures/*.feature | \\\n+\t\tbundle exec bin/cucumber-html-formatter --format ndjson > \\\n+\t\t$@\n+\n+features/%.feature: ../javascript/features/%.feature\n+\tcp $^ $@\n+\n+assets/cucumber-react.css:\n+\tmkdir -p $(@D)\n+\tcp ../../react/javascript/dist/src/styles/cucumber-react.css $@\n+\n+assets/cucumber-html.js:\n+\tmkdir -p $(@D)\n+\tcp ../javascript/dist/main.js $@\n+\n+assets/index.mustache.html:\n+\tmkdir -p $(@D)\n+\tcp ../javascript/dist/src/index.mustache.html $@\n+\n+\n+clean:", "originalCommit": "92b3fbd575173250f062ab37b477a7670344b9cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUxMjM3OA==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391512378", "bodyText": "it extends it:\n\u256d\u2500vincent.pretre@Vincents-MacBook-Pro ~/dev/open-source/cucumber/html-formatter/ruby \u2039ruby-2.6.3\u203a \u2039html-formatter-for-ruby\u203a \n\u2570\u2500$ make clean\nrm -f .deps .linked .tested* Gemfile.lock *.gem\nrm -rf acceptance features/all_green.feature features/statuses.feature assets/*.css assets/*.js assets/*.html\nFirst line comes from default.mk, second one from Makefile", "author": "vincent-psarga", "createdAt": "2020-03-12T10:01:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUxMDYzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyMDAwNQ==", "url": "https://github.com/cucumber/common/pull/931#discussion_r391520005", "bodyText": "Cool. Still a bit hazy on how includes actually work.", "author": "mpkorstanje", "createdAt": "2020-03-12T10:15:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUxMDYzOQ=="}], "type": "inlineReview"}, {"oid": "39fd352ebe5f402e8e4135dd6274446b6d538ede", "url": "https://github.com/cucumber/common/commit/39fd352ebe5f402e8e4135dd6274446b6d538ede", "message": "CI: persist compatibility-kit/ruby generated files", "committedDate": "2020-03-12T13:12:23Z", "type": "commit"}, {"oid": "310c5ed8b6037f3961c0135113b735d83ad2bb35", "url": "https://github.com/cucumber/common/commit/310c5ed8b6037f3961c0135113b735d83ad2bb35", "message": "Update changelog", "committedDate": "2020-03-13T08:07:05Z", "type": "commit"}]}