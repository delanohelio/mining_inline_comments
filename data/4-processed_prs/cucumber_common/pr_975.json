{"pr_number": 975, "pr_title": "Display failed hook in React", "pr_createdAt": "2020-04-20T13:17:45Z", "pr_url": "https://github.com/cucumber/common/pull/975", "timeline": [{"oid": "944a70d994d31d2ad4001e89b2c6c90b0a636ffb", "url": "https://github.com/cucumber/common/commit/944a70d994d31d2ad4001e89b2c6c90b0a636ffb", "message": "Get Before Hook Step", "committedDate": "2020-04-03T08:48:25Z", "type": "commit"}, {"oid": "c6d574b6a5852fc919cba8e7e32b276aa3e693b3", "url": "https://github.com/cucumber/common/commit/c6d574b6a5852fc919cba8e7e32b276aa3e693b3", "message": "Get After Hook Steps", "committedDate": "2020-04-03T13:38:38Z", "type": "commit"}, {"oid": "6383897958de8e18b927c8fd7b5ab10035199c60", "url": "https://github.com/cucumber/common/commit/6383897958de8e18b927c8fd7b5ab10035199c60", "message": "Add getTestStepResults", "committedDate": "2020-04-20T12:29:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDAzOA==", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054038", "bodyText": "Remove commented-out code", "author": "aslakhellesoy", "createdAt": "2020-04-21T10:09:51Z", "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)", "originalCommit": "6383897958de8e18b927c8fd7b5ab10035199c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NDI5OQ==", "url": "https://github.com/cucumber/common/pull/975#discussion_r412054299", "bodyText": "Why is this declared outside the loop?", "author": "aslakhellesoy", "createdAt": "2020-04-21T10:10:17Z", "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false", "originalCommit": "6383897958de8e18b927c8fd7b5ab10035199c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTE4Nw==", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055187", "bodyText": "Can you use Array#filter to build hookSteps instead?", "author": "aslakhellesoy", "createdAt": "2020-04-21T10:11:35Z", "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {", "originalCommit": "6383897958de8e18b927c8fd7b5ab10035199c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NTk0Mw==", "url": "https://github.com/cucumber/common/pull/975#discussion_r412055943", "bodyText": "Can you extract the duplicated code between getAfterHookSteps and getBeforeHookSteps to a separate function?", "author": "aslakhellesoy", "createdAt": "2020-04-21T10:12:48Z", "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(", "originalCommit": "6383897958de8e18b927c8fd7b5ab10035199c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjA1NjI0OQ==", "url": "https://github.com/cucumber/common/pull/975#discussion_r412056249", "bodyText": "Intermediate variable not needed - just return the result", "author": "aslakhellesoy", "createdAt": "2020-04-21T10:13:12Z", "path": "query/javascript/src/Query.ts", "diffHunk": "@@ -157,4 +167,51 @@ export default class Query {\n     | undefined {\n     return this.stepMatchArgumentsListsByPickleStepId.get(pickleStepId)\n   }\n+\n+  public getBeforeHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    // const hookSteps = testCase.testSteps.filter((step) => step.hookId)\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && !pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getAfterHookSteps(\n+    pickleId: string\n+  ): ReadonlyArray<messages.TestCase.ITestStep> {\n+    const testCase = this.testCaseByPickleId.get(pickleId)\n+\n+    const hookSteps: messages.TestCase.ITestStep[] = []\n+    let pickleStepFound = false\n+\n+    for (const step of testCase.testSteps) {\n+      if (!step.hookId) {\n+        pickleStepFound = true\n+      }\n+      if (step.hookId && pickleStepFound) {\n+        hookSteps.push(step)\n+      }\n+    }\n+\n+    return hookSteps\n+  }\n+\n+  public getTestStepResults(testStepId: string): messages.ITestStepResult[] {\n+    const testStepResults = this.testStepResultsbyTestStepId.get(testStepId)", "originalCommit": "6383897958de8e18b927c8fd7b5ab10035199c60", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d860d7dc689f7890d0eb0ef9e019d111888604d9", "url": "https://github.com/cucumber/common/commit/d860d7dc689f7890d0eb0ef9e019d111888604d9", "message": "Add getHook", "committedDate": "2020-04-28T13:34:51Z", "type": "commit"}, {"oid": "56e45d82ade8fc68970b458f05733070d9c24671", "url": "https://github.com/cucumber/common/commit/56e45d82ade8fc68970b458f05733070d9c24671", "message": "Failed Hook Step visible on the interface", "committedDate": "2020-04-29T14:58:36Z", "type": "commit"}, {"oid": "ff4a1eaedd2da4081f8ea393f1a26466c19cb195", "url": "https://github.com/cucumber/common/commit/ff4a1eaedd2da4081f8ea393f1a26466c19cb195", "message": "Refactoring around getAfterHooks and getBeforeHooks", "committedDate": "2020-04-30T13:20:06Z", "type": "commit"}, {"oid": "183b7ca493b2ec264e09a3bf345d38476a8932b9", "url": "https://github.com/cucumber/common/commit/183b7ca493b2ec264e09a3bf345d38476a8932b9", "message": "Add getAttachmentsbyTestStepId", "committedDate": "2020-05-05T13:24:24Z", "type": "commit"}, {"oid": "fb358a943b9df0f1df5b4ea71a799988544b0c7e", "url": "https://github.com/cucumber/common/commit/fb358a943b9df0f1df5b4ea71a799988544b0c7e", "message": "Use getTestStepAttachments for getPickleStepAttachments", "committedDate": "2020-05-05T13:53:11Z", "type": "commit"}, {"oid": "e6609e9083a55eedc30d1eabda796394fb203413", "url": "https://github.com/cucumber/common/commit/e6609e9083a55eedc30d1eabda796394fb203413", "message": "Add example hooks", "committedDate": "2020-05-12T08:25:04Z", "type": "commit"}, {"oid": "dbf373c88f67e569847fb164528f0abbde944a10", "url": "https://github.com/cucumber/common/commit/dbf373c88f67e569847fb164528f0abbde944a10", "message": "Display hooks with attachments", "committedDate": "2020-05-12T08:34:27Z", "type": "commit"}, {"oid": "63350b02d37c81a8e572216a4c364828481743f1", "url": "https://github.com/cucumber/common/commit/63350b02d37c81a8e572216a4c364828481743f1", "message": "Attachments style", "committedDate": "2020-05-12T09:04:05Z", "type": "commit"}, {"oid": "c1ca32d24792b2fc193fb6efb623769b50313aee", "url": "https://github.com/cucumber/common/commit/c1ca32d24792b2fc193fb6efb623769b50313aee", "message": "Fix some issues", "committedDate": "2020-05-18T12:43:51Z", "type": "commit"}, {"oid": "3aa6ed8fea6cd9319f84d52eb3ac7ccf3b91081f", "url": "https://github.com/cucumber/common/commit/3aa6ed8fea6cd9319f84d52eb3ac7ccf3b91081f", "message": "Merge branch 'master' into react-hook", "committedDate": "2020-05-20T08:10:55Z", "type": "commit"}, {"oid": "1fbdc79190b3a5b8b35e44f9917d8e3c3e638e7c", "url": "https://github.com/cucumber/common/commit/1fbdc79190b3a5b8b35e44f9917d8e3c3e638e7c", "message": "Linting", "committedDate": "2020-05-20T08:44:36Z", "type": "commit"}, {"oid": "059fc141383282e096e182c63d34a34681e0708f", "url": "https://github.com/cucumber/common/commit/059fc141383282e096e182c63d34a34681e0708f", "message": "Add screenshot added in a hook (issue #995)", "committedDate": "2020-05-20T09:17:40Z", "type": "commit"}, {"oid": "7ce52655e319655b74a6009ab143d9f2654970f6", "url": "https://github.com/cucumber/common/commit/7ce52655e319655b74a6009ab143d9f2654970f6", "message": "hooks.ndjson is not supposed to be checked in", "committedDate": "2020-05-20T09:46:26Z", "type": "commit"}]}