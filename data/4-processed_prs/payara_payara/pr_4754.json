{"pr_number": 4754, "pr_title": "QACI-286 Check for expired certs before running Jenkins script", "pr_createdAt": "2020-06-30T11:57:26Z", "pr_url": "https://github.com/payara/Payara/pull/4754", "timeline": [{"oid": "590b69e53820b977f8b2d8fb8b15bf823a58a082", "url": "https://github.com/payara/Payara/commit/590b69e53820b977f8b2d8fb8b15bf823a58a082", "message": "Added keytool check and grep for expiring certificates next month", "committedDate": "2020-06-30T11:05:03Z", "type": "commit"}, {"oid": "2962e1cfded891cc1822ba36f742a0efe19bca23", "url": "https://github.com/payara/Payara/commit/2962e1cfded891cc1822ba36f742a0efe19bca23", "message": "Also include current month in grep", "committedDate": "2020-06-30T11:20:28Z", "type": "commit"}, {"oid": "0cdd312db716e83771ad7a5b345bbe66ec10294e", "url": "https://github.com/payara/Payara/commit/0cdd312db716e83771ad7a5b345bbe66ec10294e", "message": "Fixed cacerts path and formatting", "committedDate": "2020-06-30T11:50:54Z", "type": "commit"}, {"oid": "4112dba26b355c37ce122564f1361c384e373bda", "url": "https://github.com/payara/Payara/commit/4112dba26b355c37ce122564f1361c384e373bda", "message": "Merge branch 'QACI-286' of https://github.com/AlanRoth/payara into QACI-286", "committedDate": "2020-06-30T11:54:19Z", "type": "commit"}, {"oid": "cdca1b2b0f829093b92d6e50c4918c916403482e", "url": "https://github.com/payara/Payara/commit/cdca1b2b0f829093b92d6e50c4918c916403482e", "message": "Unterminated quoted string", "committedDate": "2020-06-30T12:00:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQzODg2Mw==", "url": "https://github.com/payara/Payara/pull/4754#discussion_r449438863", "bodyText": "Is anyone going to notice this?\nI suggest marking the build as unstable in the event of results returned.", "author": "MarkWareham", "createdAt": "2020-07-03T08:04:02Z", "path": "Jenkinsfile", "diffHunk": "@@ -25,6 +25,10 @@ pipeline {\n                     echo \"Payara pom version is ${pom.version}\"\n                     echo \"Build number is ${payaraBuildNumber}\"\n                     echo \"Domain name is ${DOMAIN_NAME}\"\n+\n+                    echo '*#*#*#*#*#*#*#*#*#*#*#*#  Certificates Expiring Soon  *#*#*#*#*#*#*#*#*#*#*#*#*#*#*#'\n+                    sh \"\"\"keytool -list -v -keystore '${pwd()}/nucleus/admin/template/src/main/resources/config/cacerts.jks' -storepass 'changeit' | grep -E 'Valid from:.*`date +'%b' --date='+1 month'`.*`date +'%Y'`|`date +'%b'`.*`date +'%Y'`\"\"\"", "originalCommit": "cdca1b2b0f829093b92d6e50c4918c916403482e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9bd3b3776ffd389b2c4063d8593ee3b6911d73a3", "url": "https://github.com/payara/Payara/commit/9bd3b3776ffd389b2c4063d8593ee3b6911d73a3", "message": "Mark build as unstable when expiring certificates are found", "committedDate": "2020-07-03T10:58:40Z", "type": "commit"}]}