{"pr_number": 4614, "pr_title": "APPSERV-141 Adds Caching to MicroProfile Config", "pr_createdAt": "2020-04-06T08:25:25Z", "pr_url": "https://github.com/payara/Payara/pull/4614", "timeline": [{"oid": "42a7511574f246aa8672790367691bab2c1fa4c9", "url": "https://github.com/payara/Payara/commit/42a7511574f246aa8672790367691bab2c1fa4c9", "message": "cleanup; adding generics", "committedDate": "2020-04-03T13:17:44Z", "type": "commit"}, {"oid": "3e5e9db402fd00517548ef0b46aa038b73c19031", "url": "https://github.com/payara/Payara/commit/3e5e9db402fd00517548ef0b46aa038b73c19031", "message": "more cleanup", "committedDate": "2020-04-03T14:49:13Z", "type": "commit"}, {"oid": "52a2c6f492c32f8269f106eabf63ede83ca26650", "url": "https://github.com/payara/Payara/commit/52a2c6f492c32f8269f106eabf63ede83ca26650", "message": "adds caching to MP config implementation", "committedDate": "2020-04-04T14:45:25Z", "type": "commit"}, {"oid": "1adde2c45ab7c465193eb4f0040ba02749fc7707", "url": "https://github.com/payara/Payara/commit/1adde2c45ab7c465193eb4f0040ba02749fc7707", "message": "APPSERV-141 adds tests and admin command for MP config cache", "committedDate": "2020-04-06T08:08:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzkxNjQ1MA==", "url": "https://github.com/payara/Payara/pull/4614#discussion_r403916450", "bodyText": "NB. This was just working because of luck or probability.", "author": "jbee", "createdAt": "2020-04-06T08:32:35Z", "path": "nucleus/payara-modules/nucleus-microprofile/config-service/src/main/java/fish/payara/nucleus/microprofile/config/spi/PayaraConfigBuilder.java", "diffHunk": "@@ -130,44 +130,52 @@ public Config build() {\n         return this;\n     }\n \n-    public static Type getTypeForConverter(Converter converter) {\n-        // add each converter to the map for later lookup\n-        Type types[] = converter.getClass().getGenericInterfaces();\n+    public static Class<?> getTypeForConverter(Converter<?> converter) {\n+       return getTypeForConverter(converter.getClass());\n+    }\n+\n+    public static Class<?> getTypeForConverter(Class<?> converter) {\n+        Type types[] = converter.getGenericInterfaces();\n         for (Type type : types) {\n             if (type instanceof ParameterizedType) {\n-                Type args[] = ((ParameterizedType) type).getActualTypeArguments();\n-                if (args.length >= 1) {\n-                    // check if there is one there already\n-                    return args[0];", "originalCommit": "1adde2c45ab7c465193eb4f0040ba02749fc7707", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "76931bd0db3929b999af3ec7bb294d10590aed8c", "url": "https://github.com/payara/Payara/commit/76931bd0db3929b999af3ec7bb294d10590aed8c", "message": "gitattributes", "committedDate": "2020-04-06T09:55:48Z", "type": "commit"}, {"oid": "8fe8271c7a35c9f992a58928a4e61af5ebaa9211", "url": "https://github.com/payara/Payara/commit/8fe8271c7a35c9f992a58928a4e61af5ebaa9211", "message": "APPSERV-114 fixes source comparator null names NPE; fixes getValue with default never throws NoSuchElementException", "committedDate": "2020-04-06T13:02:00Z", "type": "commit"}, {"oid": "bf430077d6941d2446f8d056c66e9d1fbf0e29f6", "url": "https://github.com/payara/Payara/commit/bf430077d6941d2446f8d056c66e9d1fbf0e29f6", "message": "Merge branch 'master' into mp-config-caching-part2", "committedDate": "2020-04-06T14:26:33Z", "type": "commit"}, {"oid": "3ff676d3c04d0a46906e6e013ff8d376ed6a31f2", "url": "https://github.com/payara/Payara/commit/3ff676d3c04d0a46906e6e013ff8d376ed6a31f2", "message": "APPSERV-114 fixes cache key considers element type of collections", "committedDate": "2020-04-06T17:25:22Z", "type": "commit"}, {"oid": "c38a8eeb7d601bf00a6f8aac6e9956a8fff26210", "url": "https://github.com/payara/Payara/commit/c38a8eeb7d601bf00a6f8aac6e9956a8fff26210", "message": "APPSERV-114 updates copyright headers", "committedDate": "2020-04-07T07:30:52Z", "type": "commit"}, {"oid": "09c55d2821074d1efcc0fc6bd52ba549ad2d63b9", "url": "https://github.com/payara/Payara/commit/09c55d2821074d1efcc0fc6bd52ba549ad2d63b9", "message": "APPSERV-114 adds environment variable to set (override) cache duration", "committedDate": "2020-04-07T09:34:59Z", "type": "commit"}, {"oid": "29d83bc2af5cc91135502483742678b808649df3", "url": "https://github.com/payara/Payara/commit/29d83bc2af5cc91135502483742678b808649df3", "message": "Merge branch 'master' into mp-config-caching-part2", "committedDate": "2020-04-09T12:09:42Z", "type": "commit"}, {"oid": "795063a8d83211daae1f4658fa2ad167bd34c049", "url": "https://github.com/payara/Payara/commit/795063a8d83211daae1f4658fa2ad167bd34c049", "message": "PAYARA-141 fixes NPE in splitValue of PayaraConfig", "committedDate": "2020-04-20T08:28:17Z", "type": "commit"}, {"oid": "d53d14fe2f87600b1cffb897e50c0cfeb950b79a", "url": "https://github.com/payara/Payara/commit/d53d14fe2f87600b1cffb897e50c0cfeb950b79a", "message": "Merge branch 'master' into mp-config-caching-part2", "committedDate": "2020-04-20T08:29:23Z", "type": "commit"}]}