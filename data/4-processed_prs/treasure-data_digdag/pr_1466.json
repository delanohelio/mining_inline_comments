{"pr_number": 1466, "pr_title": "Fix error of session_time formatting", "pr_createdAt": "2020-10-20T05:43:39Z", "pr_url": "https://github.com/treasure-data/digdag/pull/1466", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIyNTg3NA==", "url": "https://github.com/treasure-data/digdag/pull/1466#discussion_r508225874", "bodyText": "Have you ever tried? format() instead of format('YYYY-MM-DDTHH:mm:ssZ') ?", "author": "hiroyuki-sato", "createdAt": "2020-10-20T05:51:46Z", "path": "digdag-docs/src/operators/require.md", "diffHunk": "@@ -46,7 +46,7 @@\n     loop>: ${moment(last_session_time).daysInMonth()}\n     _do:\n       require>: daily_workflow\n-      session_time: ${moment(last_session_time).add(i, 'day')}\n+      session_time: ${moment(last_session_time).add(i, 'day').format('YYYY-MM-DDTHH:mm:ssZ')}\n   ```", "originalCommit": "7aba5d79858cd6838fb34176069eefbe3297e309", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDkzMDI4OA==", "url": "https://github.com/treasure-data/digdag/pull/1466#discussion_r514930288", "bodyText": "not yet, let me check", "author": "y-ken", "createdAt": "2020-10-30T08:12:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIyNTg3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQ1NzkxNg==", "url": "https://github.com/treasure-data/digdag/pull/1466#discussion_r548457916", "bodyText": "once I have tested with this code, I confirmed format() is enough.\ntimezone: UTC\n\n+step1:\n  echo>: ${moment(session_time).add(1, 'day').format('X')}\n\n+step2:\n  echo>: ${moment(session_time).add(1, 'day').format()}\n\n+step3:\n  echo>: ${moment(session_time).add(1, 'day').format('YYYY-MM-DDTHH:mm:ssZ')}\n\n+step4:\n  echo>: ${moment(session_time).add(1, 'day')}\n\nexecution log\n2020-12-24 18:05:13 +0900 [INFO] (main): Starting a new session project id=1 workflow name=test_session_time session_time=2020-12-25T00:00:00+00:00\n2020-12-24 18:05:14 +0900 [INFO] (0018@[0:default]+test_session_time+step1): echo>: 1608940800\n1608940800\n2020-12-24 18:05:14 +0900 [INFO] (0018@[0:default]+test_session_time+step2): echo>: 2020-12-26T00:00:00+00:00\n2020-12-26T00:00:00+00:00\n2020-12-24 18:05:15 +0900 [INFO] (0018@[0:default]+test_session_time+step3): echo>: 2020-12-26T00:00:00+00:00\n2020-12-26T00:00:00+00:00\n2020-12-24 18:05:15 +0900 [INFO] (0018@[0:default]+test_session_time+step4): echo>: \"2020-12-26T00:00:00.000Z\"\n\"2020-12-26T00:00:00.000Z\"", "author": "y-ken", "createdAt": "2020-12-24T09:06:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIyNTg3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODQ2MzM3NQ==", "url": "https://github.com/treasure-data/digdag/pull/1466#discussion_r548463375", "bodyText": "then updated with 4597b83 commit", "author": "y-ken", "createdAt": "2020-12-24T09:22:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIyNTg3NA=="}], "type": "inlineReview"}, {"oid": "4597b8398688bb777e69bb29378c4c554e73d8df", "url": "https://github.com/treasure-data/digdag/commit/4597b8398688bb777e69bb29378c4c554e73d8df", "message": "Fix error of session_time formatting\n\nInvalid ISO time format: \"2020-10-04T00:00:00.000Z\" (json mapping)Text '\"2020-10-04T00:00:00.000Z\"' could not be parsed at index 0 (date time parse)", "committedDate": "2020-12-24T09:18:46Z", "type": "commit"}, {"oid": "4597b8398688bb777e69bb29378c4c554e73d8df", "url": "https://github.com/treasure-data/digdag/commit/4597b8398688bb777e69bb29378c4c554e73d8df", "message": "Fix error of session_time formatting\n\nInvalid ISO time format: \"2020-10-04T00:00:00.000Z\" (json mapping)Text '\"2020-10-04T00:00:00.000Z\"' could not be parsed at index 0 (date time parse)", "committedDate": "2020-12-24T09:18:46Z", "type": "forcePushed"}]}