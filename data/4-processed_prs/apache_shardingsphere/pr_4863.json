{"pr_number": 4863, "pr_title": "shadingRule lambda modify.", "pr_createdAt": "2020-03-20T09:08:59Z", "pr_url": "https://github.com/apache/shardingsphere/pull/4863", "timeline": [{"oid": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "url": "https://github.com/apache/shardingsphere/commit/5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "message": "shadingRule lambda modify.", "committedDate": "2020-03-20T09:06:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyNzk1Mg==", "url": "https://github.com/apache/shardingsphere/pull/4863#discussion_r395527952", "bodyText": "with more blank in the front of this line.", "author": "kimmking", "createdAt": "2020-03-20T09:44:59Z", "path": "sharding-core/sharding-core-common/src/main/java/org/apache/shardingsphere/core/rule/ShardingRule.java", "diffHunk": "@@ -85,36 +85,29 @@ public ShardingRule(final ShardingRuleConfiguration shardingRuleConfig, final Co\n     }\n     \n     private Collection<TableRule> createTableRules(final ShardingRuleConfiguration shardingRuleConfig) {\n-        Collection<TableRuleConfiguration> tableRuleConfigurations = shardingRuleConfig.getTableRuleConfigs();\n-        Collection<TableRule> result = new ArrayList<>(tableRuleConfigurations.size());\n-        for (TableRuleConfiguration each : tableRuleConfigurations) {\n-            result.add(new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)));\n-        }\n-        return result;\n+        return shardingRuleConfig.getTableRuleConfigs().stream()\n+        .map(each -> new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)))", "originalCommit": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUzMzY1Nw==", "url": "https://github.com/apache/shardingsphere/pull/4863#discussion_r395533657", "bodyText": "Ok,i will fix it", "author": "yu199195", "createdAt": "2020-03-20T09:56:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyNzk1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTUyODc2NQ==", "url": "https://github.com/apache/shardingsphere/pull/4863#discussion_r395528765", "bodyText": "one line is better.", "author": "kimmking", "createdAt": "2020-03-20T09:46:36Z", "path": "sharding-core/sharding-core-common/src/main/java/org/apache/shardingsphere/core/rule/ShardingRule.java", "diffHunk": "@@ -85,36 +85,29 @@ public ShardingRule(final ShardingRuleConfiguration shardingRuleConfig, final Co\n     }\n     \n     private Collection<TableRule> createTableRules(final ShardingRuleConfiguration shardingRuleConfig) {\n-        Collection<TableRuleConfiguration> tableRuleConfigurations = shardingRuleConfig.getTableRuleConfigs();\n-        Collection<TableRule> result = new ArrayList<>(tableRuleConfigurations.size());\n-        for (TableRuleConfiguration each : tableRuleConfigurations) {\n-            result.add(new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)));\n-        }\n-        return result;\n+        return shardingRuleConfig.getTableRuleConfigs().stream()\n+        .map(each -> new TableRule(each, shardingDataSourceNames, getDefaultGenerateKeyColumn(shardingRuleConfig)))\n+        .collect(Collectors.toList());\n     }\n     \n     private String getDefaultGenerateKeyColumn(final ShardingRuleConfiguration shardingRuleConfig) {\n-        return null == shardingRuleConfig.getDefaultKeyGeneratorConfig() ? null : shardingRuleConfig.getDefaultKeyGeneratorConfig().getColumn();\n+        return Optional.ofNullable(shardingRuleConfig.getDefaultKeyGeneratorConfig()).map(KeyGeneratorConfiguration::getColumn).orElse(null);\n     }\n     \n     private Collection<BindingTableRule> createBindingTableRules(final Collection<String> bindingTableGroups) {\n-        Collection<BindingTableRule> result = new ArrayList<>(bindingTableGroups.size());\n-        for (String each : bindingTableGroups) {\n-            result.add(createBindingTableRule(each));\n-        }\n-        return result;\n+        return bindingTableGroups.stream().map(this::createBindingTableRule).collect(Collectors.toList());\n     }\n     \n     private BindingTableRule createBindingTableRule(final String bindingTableGroup) {\n-        List<TableRule> tableRules = new LinkedList<>();\n-        for (String each : Splitter.on(\",\").trimResults().splitToList(bindingTableGroup)) {\n-            tableRules.add(getTableRule(each));\n-        }\n+        List<TableRule> tableRules = Splitter.on(\",\").trimResults()\n+                .splitToList(bindingTableGroup).stream()", "originalCommit": "5cbcc9fc212fdc162ac86d87823aaea02e94c7c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc298ebf84b4cb1fd1b4578b6286594ec72b4700", "url": "https://github.com/apache/shardingsphere/commit/dc298ebf84b4cb1fd1b4578b6286594ec72b4700", "message": "shadingRule lambda modify.", "committedDate": "2020-03-20T10:01:09Z", "type": "commit"}]}