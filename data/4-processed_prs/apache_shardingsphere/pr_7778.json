{"pr_number": 7778, "pr_title": "Add SQLServer parser select aggregation clause, support except & intersect.", "pr_createdAt": "2020-10-13T12:11:47Z", "pr_url": "https://github.com/apache/shardingsphere/pull/7778", "timeline": [{"oid": "4e1b15589f66528d139bcfeb3e333f29f7db2231", "url": "https://github.com/apache/shardingsphere/commit/4e1b15589f66528d139bcfeb3e333f29f7db2231", "message": "add SQLServer except & intersect keywords.", "committedDate": "2020-10-13T12:07:17Z", "type": "commit"}, {"oid": "6c5349cbfa8aaaaf52bf1fa9239a2dd7cf4f4e0d", "url": "https://github.com/apache/shardingsphere/commit/6c5349cbfa8aaaaf52bf1fa9239a2dd7cf4f4e0d", "message": "add SQLServer select aggregation clause, support except & intersect.", "committedDate": "2020-10-13T12:08:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM1NzYxMg==", "url": "https://github.com/apache/shardingsphere/pull/7778#discussion_r504357612", "bodyText": "Can these two rules be combined? Since the reference in the subquery is unionClause. The subquery and SELECT should have the same semantics,right?", "author": "jingshanglu", "createdAt": "2020-10-14T02:08:05Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-sqlserver/src/main/antlr4/imports/sqlserver/DMLStatement.g4", "diffHunk": "@@ -73,11 +73,15 @@ multipleTableNames\n     ;\n \n select \n-    : unionClause\n+    : aggregationClause\n+    ;\n+\n+aggregationClause\n+    : selectClause ((UNION (ALL)? | EXCEPT | INTERSECT) selectClause)*\n     ;\n \n unionClause\n-    : selectClause (UNION (ALL | DISTINCT)? selectClause)*\n+    : selectClause (UNION (ALL)? selectClause)*\n     ;", "originalCommit": "6c5349cbfa8aaaaf52bf1fa9239a2dd7cf4f4e0d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM3Nzg0Mg==", "url": "https://github.com/apache/shardingsphere/pull/7778#discussion_r504377842", "bodyText": "Hi @jingshanglu , You are right, I consider merge unionClause to  aggregationClause next PR at beginning,\nnow I will do it in advance.", "author": "dongzl", "createdAt": "2020-10-14T03:24:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDM1NzYxMg=="}], "type": "inlineReview"}, {"oid": "5cfa3d74670a177cc9c902a920c2ce41e329052b", "url": "https://github.com/apache/shardingsphere/commit/5cfa3d74670a177cc9c902a920c2ce41e329052b", "message": "merge SQLServer unionClause to aggregationClause.", "committedDate": "2020-10-14T03:19:56Z", "type": "commit"}]}