{"pr_number": 6812, "pr_title": "Some parser grammer about PostgreSQL DAL&DCL&DDL", "pr_createdAt": "2020-08-13T01:42:48Z", "pr_url": "https://github.com/apache/shardingsphere/pull/6812", "timeline": [{"oid": "4a326e49fa7a3c327b039e7aca29cb75444a465a", "url": "https://github.com/apache/shardingsphere/commit/4a326e49fa7a3c327b039e7aca29cb75444a465a", "message": "Some of PostgreSQL DAL&DCL", "committedDate": "2020-08-12T13:07:02Z", "type": "commit"}, {"oid": "98800d893da1708cec65b31357c6ff2cda796374", "url": "https://github.com/apache/shardingsphere/commit/98800d893da1708cec65b31357c6ff2cda796374", "message": "Merge remote-tracking branch 'apache/master'", "committedDate": "2020-08-12T13:09:58Z", "type": "commit"}, {"oid": "85afa6a00ef577c363ab9a7c7dd2a9294d4cd28a", "url": "https://github.com/apache/shardingsphere/commit/85afa6a00ef577c363ab9a7c7dd2a9294d4cd28a", "message": "Merge remote-tracking branch 'apache/master'", "committedDate": "2020-08-13T01:40:54Z", "type": "commit"}, {"oid": "aea573791908819d3762bd69b93ae2496c6f4079", "url": "https://github.com/apache/shardingsphere/commit/aea573791908819d3762bd69b93ae2496c6f4079", "message": "review fix & add grammer", "committedDate": "2020-08-13T11:13:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM2Njc2MQ==", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470366761", "bodyText": "Add a new line at end of file.", "author": "jingshanglu", "createdAt": "2020-08-14T01:48:43Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/BaseRule.g4", "diffHunk": "@@ -1639,3 +1639,114 @@ argClass\n funcArgsList\n     : funcArg (COMMA_ funcArg)*\n     ;\n+\n+nonReservedWordOrSconst\n+    : nonReservedWord\n+    | STRING_\n+    ;\n+\n+fileName\n+    : STRING_\n+    ;\n+\n+roleList\n+    : roleSpec (COMMA_ roleSpec)*\n+    ;\n+\n+setResetClause\n+    : SET setRest\n+    | variableResetStmt\n+    ;\n+\n+setRest\n+    : TRANSACTION transactionModeList\n+    | SESSION CHARACTERISTICS AS TRANSACTION transactionModeList\n+    | setRestMore\n+    ;\n+\n+transactionModeList\n+    : transactionModeItem ((COMMA_)? transactionModeItem)*\n+    ;\n+\n+transactionModeItem\n+    : ISOLATION LEVEL isoLevel\n+    | READ ONLY\n+    | READ WRITE\n+    | DEFERRABLE\n+    | NOT DEFERRABLE\n+    ;\n+\n+setRestMore\n+    : genericSet\n+    | varName FROM CURRENT\n+    | TIME ZONE zoneValue\n+    | CATALOG STRING_\n+    | SCHEMA STRING_\n+    | NAMES encoding?\n+    | ROLE nonReservedWord | STRING_\n+    | SESSION AUTHORIZATION nonReservedWord | STRING_\n+    | SESSION AUTHORIZATION DEFAULT\n+    | XML OPTION documentOrContent\n+    | TRANSACTION SNAPSHOT STRING_\n+    ;\n+\n+encoding\n+    : STRING_\n+    | DEFAULT\n+    ;\n+\n+genericSet\n+    : varName (EQ_|TO) (varList | DEFAULT)\n+    ;\n+\n+variableResetStmt\n+    : RESET resetRest\n+    ;\n+\n+resetRest\n+    : genericReset\n+    | TIME ZONE\n+    | TRANSACTION ISOLATION LEVEL\n+    | SESSION AUTHORIZATION\n+    ;\n+\n+genericReset\n+    : varName\n+    | ALL\n+    ;\n+\n+relationExprList\n+    : relationExpr (COMMA_ relationExpr)*\n+    ;\n+\n+relationExpr\n+    : qualifiedName\n+    | qualifiedName ASTERISK_\n+    | ONLY qualifiedName\n+    | ONLY LP_ qualifiedName RP_\n+    ;\n+\n+commonFuncOptItem\n+    : CALLED ON NULL INPUT\n+    | RETURNS NULL ON NULL INPUT\n+    | STRICT\n+    | IMMUTABLE\n+    | STABLE\n+    | VOLATILE\n+    | EXTERNAL SECURITY DEFINER\n+    | EXTERNAL SECURITY INVOKER\n+    | SECURITY DEFINER\n+    | SECURITY INVOKER\n+    | LEAKPROOF\n+    | NOT LEAKPROOF\n+    | COST numericOnly\n+    | ROWS numericOnly\n+    | SUPPORT anyName\n+    | functionSetResetClause\n+    | PARALLEL colId\n+    ;\n+\n+functionSetResetClause\n+    : SET setRestMore\n+    | variableResetStmt\n+    ;", "originalCommit": "aea573791908819d3762bd69b93ae2496c6f4079", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM2NzM2Nw==", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470367367", "bodyText": "keep original format.", "author": "jingshanglu", "createdAt": "2020-08-14T01:51:29Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/DDLStatement.g4", "diffHunk": "@@ -130,8 +130,8 @@ dropDatabase\n     : DROP DATABASE (IF EXISTS)? name\n     ;\n \n-createDatabaseSpecification_\n-    :  createdbOptName (EQ_)? (signedIconst | optBooleanOrString | DEFAULT)\n+ createDatabaseSpecification_", "originalCommit": "aea573791908819d3762bd69b93ae2496c6f4079", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3ae7f89f8103df82f367bf8f1742ab3afd5b07c1", "url": "https://github.com/apache/shardingsphere/commit/3ae7f89f8103df82f367bf8f1742ab3afd5b07c1", "message": "some DDL in PostgreSQL", "committedDate": "2020-08-14T02:06:59Z", "type": "commit"}, {"oid": "eda8735ca0511acc213ec05a86406b49485c222b", "url": "https://github.com/apache/shardingsphere/commit/eda8735ca0511acc213ec05a86406b49485c222b", "message": "some DDL in PostgreSQL", "committedDate": "2020-08-14T02:07:24Z", "type": "commit"}, {"oid": "e08043489d7f76cac1f37ed7257ec0cb8acf6e73", "url": "https://github.com/apache/shardingsphere/commit/e08043489d7f76cac1f37ed7257ec0cb8acf6e73", "message": "review fix", "committedDate": "2020-08-14T02:59:07Z", "type": "commit"}, {"oid": "cb40e83b2c85bf6abe2bf40f7f0fc1511c447a22", "url": "https://github.com/apache/shardingsphere/commit/cb40e83b2c85bf6abe2bf40f7f0fc1511c447a22", "message": "review fix", "committedDate": "2020-08-14T03:21:37Z", "type": "commit"}, {"oid": "2662f2abd4518fe0086bd324cee1fb7baba4bbfc", "url": "https://github.com/apache/shardingsphere/commit/2662f2abd4518fe0086bd324cee1fb7baba4bbfc", "message": "add new line", "committedDate": "2020-08-14T03:24:43Z", "type": "commit"}, {"oid": "2094bf77ae6c0a2d960737d72b8e12ba2e81f29b", "url": "https://github.com/apache/shardingsphere/commit/2094bf77ae6c0a2d960737d72b8e12ba2e81f29b", "message": "review fix", "committedDate": "2020-08-14T03:36:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDM5NTk5Mg==", "url": "https://github.com/apache/shardingsphere/pull/6812#discussion_r470395992", "bodyText": "change to\n @Override\n    public ASTNode visitCreateFunction(final CreateFunctionContext ctx) {\n        return new CreateFunctionStatement();\n    }\n\napply to others.", "author": "jingshanglu", "createdAt": "2020-08-14T03:55:47Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-dialect/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/postgresql/visitor/impl/PostgreSQLDDLVisitor.java", "diffHunk": "@@ -280,4 +286,19 @@ public ASTNode visitTableNamesClause(final TableNamesClauseContext ctx) {\n         result.getValue().addAll(tableSegments);\n         return result;\n     }\n+    \n+    @Override\n+    public ASTNode visitAlterFunction(final AlterFunctionContext ctx) {\n+        return new AlterFunctionStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitAlterProcedure(final AlterProcedureContext ctx) {\n+        return new AlterProcedureStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitCreateFunction(final PostgreSQLStatementParser.CreateFunctionContext ctx) {\n+        return new CreateFunctionStatement();\n+    }", "originalCommit": "2094bf77ae6c0a2d960737d72b8e12ba2e81f29b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c3a83ca1002ef7d81715c628a1f113f1d514329", "url": "https://github.com/apache/shardingsphere/commit/1c3a83ca1002ef7d81715c628a1f113f1d514329", "message": "fix import", "committedDate": "2020-08-14T04:15:33Z", "type": "commit"}]}