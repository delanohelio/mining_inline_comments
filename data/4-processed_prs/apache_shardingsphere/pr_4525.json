{"pr_number": 4525, "pr_title": "#4482 Correct the `DataTypeName` for PostgreSQL", "pr_createdAt": "2020-02-29T03:58:24Z", "pr_url": "https://github.com/apache/shardingsphere/pull/4525", "timeline": [{"oid": "95779d7cfb6962da9aa1439fa956fded35305b8b", "url": "https://github.com/apache/shardingsphere/commit/95779d7cfb6962da9aa1439fa956fded35305b8b", "message": "#4482 Correct the `DataTypeName` for PostgreSQL", "committedDate": "2020-02-29T03:50:48Z", "type": "commit"}, {"oid": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "url": "https://github.com/apache/shardingsphere/commit/88f3a0c4beff6ad87cde300959e84fac9e4994b5", "message": "merge master & resolve conflicts", "committedDate": "2020-02-29T04:38:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxNzQxMg==", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386017412", "bodyText": "Here is a better way,\nif (null != doublePrecisionContext) {\n    return visit(ctx.doublePrecision());\n}\n\n@Override\npublic final ASTNode visitDoublePrecision(final DoublePrecisionContext ctx) {\n    return new KeywordValue(xxxx);\n}", "author": "tristaZero", "createdAt": "2020-02-29T10:07:35Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/java/org/apache/shardingsphere/sql/parser/visitor/PostgreSQLVisitor.java", "diffHunk": "@@ -460,6 +461,14 @@ public final ASTNode visitCaseExpression(final CaseExpressionContext ctx) {\n     \n     @Override\n     public final ASTNode visitDataTypeName(final DataTypeNameContext ctx) {\n+        DoublePrecisionContext doublePrecisionContext = ctx.doublePrecision();\n+        if (null != doublePrecisionContext) {", "originalCommit": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxODExNQ==", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386018115", "bodyText": "Why does doublePrecision not exist in PostgreSQLKeyword.g4 ?", "author": "tristaZero", "createdAt": "2020-02-29T10:20:31Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-postgresql/src/main/antlr4/imports/postgresql/BaseRule.g4", "diffHunk": "@@ -303,7 +303,14 @@ dataType\n     ;\n \n dataTypeName\n-    : identifier\n+    : INT | SMALLINT | INTEGER | BIGINT | DECIMAL | NUMERIC | REAL | FLOAT | doublePrecision | SMALLSERIAL | SERIAL | BIGSERIAL\n+    | MONEY | VARCHAR | CHARACTER | CHAR | TEXT | NAME | BYTEA | TIMESTAMP | DATE | TIME | INTERVAL | BOOLEAN | ENUM | POINT\n+    | LINE | LSEG | BOX | PATH | POLYGON | CIRCLE | CIDR | INET | MACADDR | BIT | VARBIT | TSVECTOR | TSQUERY | UUID | XML\n+    | JSON | INTRANGE | NUMRANGE | TSRANGE | TSTZRANGE | DATERANGE | ARRAY | identifier\n+    ;\n+\n+doublePrecision", "originalCommit": "88f3a0c4beff6ad87cde300959e84fac9e4994b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAyMTYzMA==", "url": "https://github.com/apache/shardingsphere/pull/4525#discussion_r386021630", "bodyText": "Why does doublePrecision not exist in PostgreSQLKeyword.g4 ?\n\nDOUBLE and PRECISION exist in KeyWord.g4, so I added an expression to represent double precision. Now I find that it is better to add keywords directly, I will change to keyword and remove doublePrecision.\nDOUBLEPRECISION : D O U B L E [ ]+ P R E C I S I O N ;", "author": "yuzel", "createdAt": "2020-02-29T11:24:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjAxODExNQ=="}], "type": "inlineReview"}, {"oid": "8cab63415dd8ce8b424c59384b55172d4d4b37d7", "url": "https://github.com/apache/shardingsphere/commit/8cab63415dd8ce8b424c59384b55172d4d4b37d7", "message": "remove doublePrecision and add keyword DOUBLEPRECISION in PostgreSQLKeyword.g4", "committedDate": "2020-02-29T11:54:29Z", "type": "commit"}]}