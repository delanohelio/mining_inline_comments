{"pr_number": 4138, "pr_title": "add drop_role and set_default_role antlr visitor for MySQL DCLStatement", "pr_createdAt": "2020-02-02T05:44:06Z", "pr_url": "https://github.com/apache/shardingsphere/pull/4138", "timeline": [{"oid": "acc41e292bd1db4c16dcfde04592d09453677826", "url": "https://github.com/apache/shardingsphere/commit/acc41e292bd1db4c16dcfde04592d09453677826", "message": "Overload ExecutorEngine interface\nload() method add a serial parameter\nuse maxConnectionsSizePerQuery to control init load speed", "committedDate": "2020-01-22T03:14:19Z", "type": "commit"}, {"oid": "0aec2564e72664ac72ecdae78d251c10e389f403", "url": "https://github.com/apache/shardingsphere/commit/0aec2564e72664ac72ecdae78d251c10e389f403", "message": "code error", "committedDate": "2020-01-22T06:47:27Z", "type": "commit"}, {"oid": "951cff1466443d175d884c05da7aed7152343fd4", "url": "https://github.com/apache/shardingsphere/commit/951cff1466443d175d884c05da7aed7152343fd4", "message": "methods reuse\ncode clear up", "committedDate": "2020-01-22T08:51:09Z", "type": "commit"}, {"oid": "c9e68741b2081e895d99106b78b61402e438ea06", "url": "https://github.com/apache/shardingsphere/commit/c9e68741b2081e895d99106b78b61402e438ea06", "message": "code clear up", "committedDate": "2020-01-22T08:51:36Z", "type": "commit"}, {"oid": "16d7247a4202ddeaf30383a4e6127339710a6850", "url": "https://github.com/apache/shardingsphere/commit/16d7247a4202ddeaf30383a4e6127339710a6850", "message": "remove no neccessary code", "committedDate": "2020-01-23T13:35:41Z", "type": "commit"}, {"oid": "34984f98abebcbb5609489e13a1c06024a44cc64", "url": "https://github.com/apache/shardingsphere/commit/34984f98abebcbb5609489e13a1c06024a44cc64", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev", "committedDate": "2020-01-27T05:43:51Z", "type": "commit"}, {"oid": "ed4fdb104d91eb15aedf17003c448f875063425b", "url": "https://github.com/apache/shardingsphere/commit/ed4fdb104d91eb15aedf17003c448f875063425b", "message": "code style clean", "committedDate": "2020-01-27T06:29:09Z", "type": "commit"}, {"oid": "52482679cf7febdb9b8bc18c35696ce68bb60813", "url": "https://github.com/apache/shardingsphere/commit/52482679cf7febdb9b8bc18c35696ce68bb60813", "message": "code style clean", "committedDate": "2020-01-27T06:42:25Z", "type": "commit"}, {"oid": "da78ff661b675f97b31d5f400095c4337340ef92", "url": "https://github.com/apache/shardingsphere/commit/da78ff661b675f97b31d5f400095c4337340ef92", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev\n\nConflicts:\n\tsharding-core/sharding-core-execute/src/main/java/org/apache/shardingsphere/sharding/execute/metadata/loader/ShardingTableMetaDataLoader.java", "committedDate": "2020-01-28T09:14:39Z", "type": "commit"}, {"oid": "18ef12313869ad47906add8a1ad718360dfda3c5", "url": "https://github.com/apache/shardingsphere/commit/18ef12313869ad47906add8a1ad718360dfda3c5", "message": "Merge remote-tracking branch 'ss_remote/dev' into dev", "committedDate": "2020-01-29T16:27:57Z", "type": "commit"}, {"oid": "6f8de4098f2c20dec1b2db88dbba4db996cb2cd9", "url": "https://github.com/apache/shardingsphere/commit/6f8de4098f2c20dec1b2db88dbba4db996cb2cd9", "message": "Merge remote-tracking branch 'ss_remote/master' into dev", "committedDate": "2020-01-31T07:51:58Z", "type": "commit"}, {"oid": "09dded5df6986e34bdeec44d8840080a845aa730", "url": "https://github.com/apache/shardingsphere/commit/09dded5df6986e34bdeec44d8840080a845aa730", "message": "Merge branch 'ss_remote_master' into dev", "committedDate": "2020-02-01T13:24:33Z", "type": "commit"}, {"oid": "54e23202e98258711c4ed00e48e1c2c9868aed1c", "url": "https://github.com/apache/shardingsphere/commit/54e23202e98258711c4ed00e48e1c2c9868aed1c", "message": "add drop_role and set_default_role.\nupdate role file MySQLStatement.", "committedDate": "2020-02-02T05:32:05Z", "type": "commit"}, {"oid": "b0b05b63cb97c985991fbd3c65aaeebc7bb8ef46", "url": "https://github.com/apache/shardingsphere/commit/b0b05b63cb97c985991fbd3c65aaeebc7bb8ef46", "message": "Merge remote-tracking branch 'ss_remote/master' into dev\n\nConflicts:\n\tshardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "committedDate": "2020-02-02T05:37:30Z", "type": "commit"}, {"oid": "74f223fe2b614edd4160907bf28fe20657b918a9", "url": "https://github.com/apache/shardingsphere/commit/74f223fe2b614edd4160907bf28fe20657b918a9", "message": "file unix format change", "committedDate": "2020-02-02T05:42:05Z", "type": "commit"}, {"oid": "df58a66628003e3c10a2d86506c8f78a1e4be5ca", "url": "https://github.com/apache/shardingsphere/commit/df58a66628003e3c10a2d86506c8f78a1e4be5ca", "message": "code style clean", "committedDate": "2020-02-02T05:44:33Z", "type": "commit"}, {"oid": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "url": "https://github.com/apache/shardingsphere/commit/b2e28ff44d4cc58f1135d3439f74b35accc85198", "message": "code clean", "committedDate": "2020-02-02T06:47:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTU1Mw==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373825553", "bodyText": "Is it necessary to add? I could find this one in META-INF/parsing-rule-definition/mysql/sql-statement-rule-definition.xml", "author": "tristaZero", "createdAt": "2020-02-02T07:32:12Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "diffHunk": "@@ -249,7 +250,17 @@ public ASTNode visitShowLike(final ShowLikeContext ctx) {\n     public ASTNode visitCreateUser(final CreateUserContext ctx) {\n         return new DCLStatement();\n     }\n-\n+    \n+    @Override\n+    public ASTNode visitDropRole(DropRoleContext ctx) {\n+        return new DCLStatement();\n+    }\n+    \n+    @Override\n+    public ASTNode visitSetDefaultRole(SetDefaultRoleContext ctx) {", "originalCommit": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzkzNTQxNg==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373935416", "bodyText": "setDefaultRole have add to sql-statement-rule-definition.xml\uff0cplease review again", "author": "beijing-penguin", "createdAt": "2020-02-03T06:13:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTU1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTYwNQ==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373825605", "bodyText": "Which rule g4 file does it exist?", "author": "tristaZero", "createdAt": "2020-02-02T07:33:30Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/antlr4/org/apache/shardingsphere/sql/parser/autogen/MySQLStatement.g4", "diffHunk": "@@ -45,6 +45,7 @@ execute\n     | renameUser\n     | createRole\n     | dropRole\n+    | setDefaultRole", "originalCommit": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYyOQ==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826629", "bodyText": "Which rule g4 file does it exist?\n\nDCLStatement.g4", "author": "beijing-penguin", "createdAt": "2020-02-02T07:53:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNTYwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjUzNA==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826534", "bodyText": "Please don't use * for import. Check the code style.", "author": "SteNicholas", "createdAt": "2020-02-02T07:52:04Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "diffHunk": "@@ -26,6 +26,7 @@\n import org.antlr.v4.runtime.tree.TerminalNode;\n import org.apache.shardingsphere.sql.parser.api.SQLVisitor;\n import org.apache.shardingsphere.sql.parser.autogen.MySQLStatementBaseVisitor;\n+import org.apache.shardingsphere.sql.parser.autogen.MySQLStatementParser.*;", "originalCommit": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyODEyNQ==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373828125", "bodyText": "ok\uff0cupdate!", "author": "beijing-penguin", "createdAt": "2020-02-02T08:22:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjUzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYwNw==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826607", "bodyText": "Should this use drop-role not common\uff1f", "author": "SteNicholas", "createdAt": "2020-02-02T07:53:20Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-test/src/test/resources/visitor/dcl/drop_role.xml", "diffHunk": "@@ -0,0 +1,23 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<sql-parser-test-cases>\n+    <common sql-case-id=\"drop_role\" />", "originalCommit": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyODk4Nw==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373828987", "bodyText": "run test unit is ok", "author": "beijing-penguin", "createdAt": "2020-02-02T08:37:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzgyNjYyMQ==", "url": "https://github.com/apache/shardingsphere/pull/4138#discussion_r373826621", "bodyText": "Similar to above.", "author": "SteNicholas", "createdAt": "2020-02-02T07:53:39Z", "path": "shardingsphere-sql-parser/shardingsphere-sql-parser-test/src/test/resources/visitor/dcl/set_default_role.xml", "diffHunk": "@@ -0,0 +1,24 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+  ~ Licensed to the Apache Software Foundation (ASF) under one or more\n+  ~ contributor license agreements.  See the NOTICE file distributed with\n+  ~ this work for additional information regarding copyright ownership.\n+  ~ The ASF licenses this file to You under the Apache License, Version 2.0\n+  ~ (the \"License\"); you may not use this file except in compliance with\n+  ~ the License.  You may obtain a copy of the License at\n+  ~\n+  ~     http://www.apache.org/licenses/LICENSE-2.0\n+  ~\n+  ~ Unless required by applicable law or agreed to in writing, software\n+  ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+  ~ See the License for the specific language governing permissions and\n+  ~ limitations under the License.\n+  -->\n+\n+<sql-parser-test-cases>\n+    <common sql-case-id=\"set_none_role\" />", "originalCommit": "b2e28ff44d4cc58f1135d3439f74b35accc85198", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7d609460bfeb6dbaf25b23c21bde411db1078f5f", "url": "https://github.com/apache/shardingsphere/commit/7d609460bfeb6dbaf25b23c21bde411db1078f5f", "message": "package import * remove fix", "committedDate": "2020-02-02T08:13:13Z", "type": "commit"}, {"oid": "daf814958a7046e5baf33d7bb3746afc82b34bb1", "url": "https://github.com/apache/shardingsphere/commit/daf814958a7046e5baf33d7bb3746afc82b34bb1", "message": "file name use '-' replace '_'", "committedDate": "2020-02-02T08:35:39Z", "type": "commit"}, {"oid": "6d08402f5b86257a171e4617aeb6202c93ea65e5", "url": "https://github.com/apache/shardingsphere/commit/6d08402f5b86257a171e4617aeb6202c93ea65e5", "message": "add setDefaultRole sql-statement-rule", "committedDate": "2020-02-03T06:08:08Z", "type": "commit"}, {"oid": "6a69a16955addba8761fa5a07a420a7ac9052bf8", "url": "https://github.com/apache/shardingsphere/commit/6a69a16955addba8761fa5a07a420a7ac9052bf8", "message": "Merge remote-tracking branch 'ss_remote/master' into dev\n\nConflicts:\n\tshardingsphere-sql-parser/shardingsphere-sql-parser-mysql/src/main/java/org/apache/shardingsphere/sql/parser/MySQLVisitor.java", "committedDate": "2020-02-03T07:00:38Z", "type": "commit"}, {"oid": "c38114f0f2bd933731b5db1f393262745f203d04", "url": "https://github.com/apache/shardingsphere/commit/c38114f0f2bd933731b5db1f393262745f203d04", "message": "adapt code style", "committedDate": "2020-02-03T12:03:38Z", "type": "commit"}]}