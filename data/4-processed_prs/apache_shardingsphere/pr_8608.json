{"pr_number": 8608, "pr_title": "Provide Jaeger as tracing plugin ", "pr_createdAt": "2020-12-14T05:56:38Z", "pr_url": "https://github.com/apache/shardingsphere/pull/8608", "timeline": [{"oid": "e514b3cb82d44354e1e1df02f69f471b77a431f9", "url": "https://github.com/apache/shardingsphere/commit/e514b3cb82d44354e1e1df02f69f471b77a431f9", "message": "provide jaeger plugin", "committedDate": "2020-12-14T05:53:33Z", "type": "commit"}, {"oid": "d00623c4c600efbc6cbddd872b473afc177b0c65", "url": "https://github.com/apache/shardingsphere/commit/d00623c4c600efbc6cbddd872b473afc177b0c65", "message": "provide jaeger plugin", "committedDate": "2020-12-14T05:54:02Z", "type": "commit"}, {"oid": "f324b8ed59e99e2bb1101abdbe84d99cc8d3e147", "url": "https://github.com/apache/shardingsphere/commit/f324b8ed59e99e2bb1101abdbe84d99cc8d3e147", "message": "fix checkstyle", "committedDate": "2020-12-14T06:19:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzNzg4Mw==", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542137883", "bodyText": "version maybe common define", "author": "yu199195", "createdAt": "2020-12-14T06:19:57Z", "path": "shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-tracers/shardingsphere-agent-tracer-jaeger/pom.xml", "diffHunk": "@@ -28,10 +28,38 @@\n     </parent>\n \n     <packaging>jar</packaging>\n-    <artifactId>shardingsphere-agent-tracer-sample</artifactId>\n+    <artifactId>shardingsphere-agent-tracer-jaeger</artifactId>\n \n     <properties>\n-        <entrypoint.class>org.apache.shardingsphere.agent.plugin.trace.SamplePluginDefinition</entrypoint.class>\n+        <entrypoint.class>org.apache.shardingsphere.agent.plugin.trace.JaegerPluginDefinition</entrypoint.class>\n     </properties>\n \n+    <dependencies>\n+        <dependency>\n+            <groupId>io.jaegertracing</groupId>\n+            <artifactId>jaeger-client</artifactId>\n+            <version>0.31.0</version>", "originalCommit": "d00623c4c600efbc6cbddd872b473afc177b0c65", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzNzk5NA==", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542137994", "bodyText": "remove this empty line", "author": "yu199195", "createdAt": "2020-12-14T06:20:18Z", "path": "shardingsphere-agent/shardingsphere-agent-core/src/main/java/org/apache/shardingsphere/agent/core/plugin/AgentPluginLoader.java", "diffHunk": "@@ -262,7 +268,7 @@ public PluginAdviceDefinition loadPluginAdviceDefine(final TypeDescription typeD\n      * To get or create instance of the advice class. Create new one and caching when it is not exist.\n      *\n      * @param classNameOfAdvice class name of advice\n-     * @param <T> advice type\n+     * @param <T>               advice type", "originalCommit": "d00623c4c600efbc6cbddd872b473afc177b0c65", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzODIyNQ==", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542138225", "bodyText": "have empty line  in the end", "author": "yu199195", "createdAt": "2020-12-14T06:21:03Z", "path": "shardingsphere-agent/shardingsphere-agent-distribution/src/main/resources/conf/agent.yaml", "diffHunk": "@@ -21,3 +21,11 @@ metrics:\n   host: localhost\n   port: 8090\n \n+tracing:\n+  agentHost: localhost\n+  agentPort: 5775\n+  extra:\n+    JAEGER_SAMPLER_TYPE: const\n+    JAEGER_SAMPLER_PARAM: 1\n+    JAEGER_REPORTER_LOG_SPANS: true\n+    JAEGER_REPORTER_FLUSH_INTERVAL: 1", "originalCommit": "d00623c4c600efbc6cbddd872b473afc177b0c65", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjEzODQ4Nw==", "url": "https://github.com/apache/shardingsphere/pull/8608#discussion_r542138487", "bodyText": "have empyt line\uff0c maybe use string.joins()", "author": "yu199195", "createdAt": "2020-12-14T06:21:43Z", "path": "shardingsphere-agent/shardingsphere-agent-plugins/shardingsphere-agent-plugin-tracers/shardingsphere-agent-tracer-jaeger/src/main/java/org/apache/shardingsphere/agent/plugin/trace/advice/CommandExecutorTaskAdvice.java", "diffHunk": "@@ -16,31 +16,44 @@\n  *\n  */\n \n-package org.apache.shardingsphere.agent.plugin.trace;\n+package org.apache.shardingsphere.agent.plugin.trace.advice;\n \n+import io.opentracing.Scope;\n+import io.opentracing.tag.Tags;\n+import io.opentracing.util.GlobalTracer;\n import org.apache.shardingsphere.agent.core.plugin.advice.MethodAroundAdvice;\n import org.apache.shardingsphere.agent.core.plugin.advice.MethodInvocationResult;\n import org.apache.shardingsphere.agent.core.plugin.advice.TargetObject;\n+import org.apache.shardingsphere.agent.plugin.trace.ShardingErrorSpan;\n+import org.apache.shardingsphere.agent.plugin.trace.constant.ShardingTags;\n+import org.apache.shardingsphere.infra.executor.kernel.model.ExecutorDataMap;\n \n import java.lang.reflect.Method;\n \n /**\n- * Advice sample.\n+ * Command executor task advice.\n  */\n-public class SampleAdvice implements MethodAroundAdvice {\n-\n+public class CommandExecutorTaskAdvice implements MethodAroundAdvice {\n+    private static final String OPERATION_NAME = \"/\" + ShardingTags.COMPONENT_NAME + \"/rootInvoke/\";", "originalCommit": "d00623c4c600efbc6cbddd872b473afc177b0c65", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b14301765ddbad17c0305c6df035dcfd7d576945", "url": "https://github.com/apache/shardingsphere/commit/b14301765ddbad17c0305c6df035dcfd7d576945", "message": "fix checkstyle", "committedDate": "2020-12-14T06:33:17Z", "type": "commit"}, {"oid": "95e9dcb229a33f2d5a338135e1824b88c762dc81", "url": "https://github.com/apache/shardingsphere/commit/95e9dcb229a33f2d5a338135e1824b88c762dc81", "message": "fix license missing", "committedDate": "2020-12-14T06:51:33Z", "type": "commit"}, {"oid": "6207cbbf79f33fcc0779ac8cb92e907bac1ade15", "url": "https://github.com/apache/shardingsphere/commit/6207cbbf79f33fcc0779ac8cb92e907bac1ade15", "message": "revert", "committedDate": "2020-12-14T07:30:10Z", "type": "commit"}, {"oid": "11e92255b69faec625d7209828a4a03dea319c30", "url": "https://github.com/apache/shardingsphere/commit/11e92255b69faec625d7209828a4a03dea319c30", "message": "Update pom.xml", "committedDate": "2020-12-14T07:38:57Z", "type": "commit"}]}