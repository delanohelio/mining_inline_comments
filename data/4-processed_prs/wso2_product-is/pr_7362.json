{"pr_number": 7362, "pr_title": "Add test cases for updating SCIM users", "pr_createdAt": "2020-01-24T03:47:33Z", "pr_url": "https://github.com/wso2/product-is/pull/7362", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ2OTgxNg==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370469816", "bodyText": "Add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:29:14Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-patch-replace-identity-claim.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:api:messages:2.0:PatchOp\"\n+    ],\n+    \"Operations\": [\n+        {\n+            \"op\": \"replace\",\n+            \"value\": {\n+                \"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User\": {\n+                    \"verifyEmail\": true\n+                }\n+            }\n+        }\n+    ]\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ2OTgzNw==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370469837", "bodyText": "add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:29:23Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-patch-user-add-op.json", "diffHunk": "@@ -0,0 +1,18 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:api:messages:2.0:PatchOp\"\n+    ],\n+    \"Operations\": [\n+        {\n+            \"op\": \"add\",\n+            \"value\": {\n+                \"emails\": [\n+                    {\n+                        \"type\": \"work\",\n+                        \"value\": \"kim@wso2.com\"\n+                    }\n+                ]\n+            }\n+        }\n+    ]\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ2OTg4MQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370469881", "bodyText": "Add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:29:49Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-patch-user-remove-op.json", "diffHunk": "@@ -0,0 +1,11 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:api:messages:2.0:PatchOp\"\n+    ],\n+    \"Operations\": [\n+        {\n+            \"op\": \"remove\",\n+            \"path\": \"emails[type eq work]\"\n+        }\n+    ]\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ2OTkwMA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370469900", "bodyText": "Add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:29:57Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-patch-user-replace-op.json", "diffHunk": "@@ -0,0 +1,22 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:api:messages:2.0:PatchOp\"\n+    ],\n+    \"Operations\": [\n+        {\n+            \"op\": \"replace\",\n+            \"value\": {\n+                \"name\": {\n+                    \"givenName\": \"Desmond\",\n+                    \"familyName\": \"Miles\"\n+                },\n+                \"emails\": [\n+                    {\n+                        \"type\": \"other\",\n+                        \"value\": \"desmond@mail.net\"\n+                    }\n+                ]\n+            }\n+        }\n+    ]\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ2OTk4NQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370469985", "bodyText": "Add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:30:26Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-put-user.json", "diffHunk": "@@ -0,0 +1,11 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:schemas:core:2.0:User\"\n+    ],\n+    \"name\": {\n+        \"givenName\": \"kim\",\n+        \"familyName\": \"jackson\"\n+    },\n+    \"id\": \"userId-value\",\n+    \"userName\": \"userName-value\"\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MDA3MQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370470071", "bodyText": "add a new line to EOF", "author": "DMHP", "createdAt": "2020-01-24T04:30:57Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-patch-replace-identity-claim.json", "diffHunk": "@@ -0,0 +1,15 @@\n+{\n+    \"schemas\": [\n+        \"urn:ietf:params:scim:api:messages:2.0:PatchOp\"\n+    ],\n+    \"Operations\": [\n+        {\n+            \"op\": \"replace\",\n+            \"value\": {\n+                \"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User\": {\n+                    \"verifyEmail\": true\n+                }\n+            }\n+        }\n+    ]\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MDIxOA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370470218", "bodyText": "Add a new line EOF", "author": "DMHP", "createdAt": "2020-01-24T04:31:52Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-add-user.json", "diffHunk": "@@ -0,0 +1,26 @@\n+{\n+    \"schemas\": [],\n+    \"name\": {\n+        \"firstName\": \"Kim\",\n+        \"lastName\": \"Berry\"\n+    },\n+    \"userName\": \"kim\",\n+    \"password\": \"abc123\",\n+    \"emails\": [\n+        {\n+            \"type\": \"home\",\n+            \"value\": \"kim@gmail.com\",\n+            \"primary\": true\n+        },\n+        {\n+            \"type\": \"work\",\n+            \"value\": \"kim@wso2.com\"\n+        }\n+    ],\n+    \"EnterpriseUser\": {\n+        \"employeeNumber\": \"1234A\",\n+        \"manager\": {\n+            \"value\": \"Taylor\"\n+        }\n+    }\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MDY2OA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370470668", "bodyText": "Add a class description. Address this at every other instance in this PR.", "author": "sachiniWettasinghe", "createdAt": "2020-01-24T04:35:00Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/base/ReadOnlyUserStoreInitializerTestCase.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.base;\n+\n+import org.testng.annotations.AfterTest;\n+import org.testng.annotations.BeforeTest;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+import org.wso2.carbon.integration.common.admin.client.AuthenticatorClient;\n+import org.wso2.carbon.integration.common.utils.mgt.ServerConfigurationManager;\n+import org.wso2.identity.integration.common.clients.UserManagementClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.util.Utils;\n+import org.wso2.identity.integration.test.utils.ISTestUtils;\n+\n+import java.io.File;\n+\n+public class ReadOnlyUserStoreInitializerTestCase extends ISIntegrationTest {", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NTQ4MA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370475480", "bodyText": "Resolved in d706fad", "author": "gayashanbc", "createdAt": "2020-01-24T05:07:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MDY2OA=="}], "type": "inlineReview"}, {"oid": "5849bb6d8d88515a50542be4a8ca51ecf59eefaf", "url": "https://github.com/wso2/product-is/commit/5849bb6d8d88515a50542be4a8ca51ecf59eefaf", "message": "Add test cases for updating SCIM users", "committedDate": "2020-01-24T04:37:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MTIzMw==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370471233", "bodyText": "Shall we get the server restart with toml config change to a private method for more readability", "author": "sachiniWettasinghe", "createdAt": "2020-01-24T04:39:02Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/base/ReadOnlyUserStoreInitializerTestCase.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.base;\n+\n+import org.testng.annotations.AfterTest;\n+import org.testng.annotations.BeforeTest;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+import org.wso2.carbon.integration.common.admin.client.AuthenticatorClient;\n+import org.wso2.carbon.integration.common.utils.mgt.ServerConfigurationManager;\n+import org.wso2.identity.integration.common.clients.UserManagementClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.util.Utils;\n+import org.wso2.identity.integration.test.utils.ISTestUtils;\n+\n+import java.io.File;\n+\n+public class ReadOnlyUserStoreInitializerTestCase extends ISIntegrationTest {\n+\n+    private ServerConfigurationManager scm;\n+    private File defaultConfigFile;\n+    private UserManagementClient userMgtClient;\n+    private AuthenticatorClient authenticatorClient;\n+    private String newUserName = \"ReadOnlyLDAPUserName\";\n+    private String newUserRole = \"ReadOnlyLDAPUserRole\";\n+    private String newUserPassword = \"ReadOnlyLDAPUserPass\";\n+\n+    @BeforeTest(alwaysRun = true)\n+    public void initUserStoreConfig() throws Exception {\n+\n+        super.init();\n+        userMgtClient = new UserManagementClient(backendURL, getSessionCookie());\n+        authenticatorClient = new AuthenticatorClient(backendURL);\n+\n+        userMgtClient.addRole(newUserRole, null, new String[]{\"/permission/admin/login\"});\n+        userMgtClient.addUser(newUserName, newUserPassword, new String[]{newUserRole}, null);\n+\n+        String carbonHome = Utils.getResidentCarbonHome();\n+        defaultConfigFile = getDeploymentTomlFile(carbonHome);\n+        log.info(\"Default TOML: \" + defaultConfigFile.toString());\n+        File userMgtConfigFile = new File(getISResourceLocation() + File.separator + \"userMgt\"\n+                + File.separator + \"read_only_ldap_user_mgt_config.toml\");\n+        scm = new ServerConfigurationManager(isServer);\n+        scm.applyConfigurationWithoutRestart(userMgtConfigFile, defaultConfigFile, true);\n+        scm.restartGracefully();", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MjEwMw==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370472103", "bodyText": "Add new line EOF. check every other instance.", "author": "sachiniWettasinghe", "createdAt": "2020-01-24T04:44:46Z", "path": "modules/integration/tests-integration/tests-backend/src/test/resources/org/wso2/identity/integration/test/scim2/rest/api/scim2-add-user.json", "diffHunk": "@@ -0,0 +1,26 @@\n+{\n+    \"schemas\": [],\n+    \"name\": {\n+        \"firstName\": \"Kim\",\n+        \"lastName\": \"Berry\"\n+    },\n+    \"userName\": \"kim\",\n+    \"password\": \"abc123\",\n+    \"emails\": [\n+        {\n+            \"type\": \"home\",\n+            \"value\": \"kim@gmail.com\",\n+            \"primary\": true\n+        },\n+        {\n+            \"type\": \"work\",\n+            \"value\": \"kim@wso2.com\"\n+        }\n+    ],\n+    \"EnterpriseUser\": {\n+        \"employeeNumber\": \"1234A\",\n+        \"manager\": {\n+            \"value\": \"Taylor\"\n+        }\n+    }\n+}", "originalCommit": "e0441de61c306b0ecd216968112101b459c9e42e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a409a39879f00146f094084f750cb1aade07a49", "url": "https://github.com/wso2/product-is/commit/2a409a39879f00146f094084f750cb1aade07a49", "message": "Add a new line at the end of each new JSON file", "committedDate": "2020-01-24T04:46:24Z", "type": "commit"}, {"oid": "2a409a39879f00146f094084f750cb1aade07a49", "url": "https://github.com/wso2/product-is/commit/2a409a39879f00146f094084f750cb1aade07a49", "message": "Add a new line at the end of each new JSON file", "committedDate": "2020-01-24T04:46:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MzQ2Mw==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370473463", "bodyText": "Is it necessary to throw more generic Exception type here? Can we throw more specific Exception/s instead ? Check and validate this in everywhere in the PR.", "author": "DMHP", "createdAt": "2020-01-24T04:54:10Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/base/ReadOnlyUserStoreInitializerTestCase.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.base;\n+\n+import org.testng.annotations.AfterTest;\n+import org.testng.annotations.BeforeTest;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+import org.wso2.carbon.integration.common.admin.client.AuthenticatorClient;\n+import org.wso2.carbon.integration.common.utils.mgt.ServerConfigurationManager;\n+import org.wso2.identity.integration.common.clients.UserManagementClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.util.Utils;\n+import org.wso2.identity.integration.test.utils.ISTestUtils;\n+\n+import java.io.File;\n+\n+public class ReadOnlyUserStoreInitializerTestCase extends ISIntegrationTest {\n+\n+    private ServerConfigurationManager scm;\n+    private File defaultConfigFile;\n+    private UserManagementClient userMgtClient;\n+    private AuthenticatorClient authenticatorClient;\n+    private String newUserName = \"ReadOnlyLDAPUserName\";\n+    private String newUserRole = \"ReadOnlyLDAPUserRole\";\n+    private String newUserPassword = \"ReadOnlyLDAPUserPass\";\n+\n+    @BeforeTest(alwaysRun = true)\n+    public void initUserStoreConfig() throws Exception {", "originalCommit": "2a409a39879f00146f094084f750cb1aade07a49", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NTMxMg==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370475312", "bodyText": "Replaced in places where the super method has not specifically thrown an \"Exception\".\nd706fad", "author": "gayashanbc", "createdAt": "2020-01-24T05:06:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3MzQ2Mw=="}], "type": "inlineReview"}, {"oid": "d706fad3a498370b6d8ddf0208a9a091645d2975", "url": "https://github.com/wso2/product-is/commit/d706fad3a498370b6d8ddf0208a9a091645d2975", "message": "Add class comments", "committedDate": "2020-01-24T05:04:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NTQwNA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370475404", "bodyText": "Shall we add a comment explaining the reason for the second initiation.", "author": "DMHP", "createdAt": "2020-01-24T05:06:55Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/base/ReadOnlyUserStoreInitializerTestCase.java", "diffHunk": "@@ -0,0 +1,79 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.base;\n+\n+import org.testng.annotations.AfterTest;\n+import org.testng.annotations.BeforeTest;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+import org.wso2.carbon.integration.common.admin.client.AuthenticatorClient;\n+import org.wso2.carbon.integration.common.utils.mgt.ServerConfigurationManager;\n+import org.wso2.identity.integration.common.clients.UserManagementClient;\n+import org.wso2.identity.integration.common.utils.ISIntegrationTest;\n+import org.wso2.identity.integration.test.util.Utils;\n+import org.wso2.identity.integration.test.utils.ISTestUtils;\n+\n+import java.io.File;\n+\n+public class ReadOnlyUserStoreInitializerTestCase extends ISIntegrationTest {\n+\n+    private ServerConfigurationManager scm;\n+    private File defaultConfigFile;\n+    private UserManagementClient userMgtClient;\n+    private AuthenticatorClient authenticatorClient;\n+    private String newUserName = \"ReadOnlyLDAPUserName\";\n+    private String newUserRole = \"ReadOnlyLDAPUserRole\";\n+    private String newUserPassword = \"ReadOnlyLDAPUserPass\";\n+\n+    @BeforeTest(alwaysRun = true)\n+    public void initUserStoreConfig() throws Exception {\n+\n+        super.init();\n+        userMgtClient = new UserManagementClient(backendURL, getSessionCookie());\n+        authenticatorClient = new AuthenticatorClient(backendURL);\n+\n+        userMgtClient.addRole(newUserRole, null, new String[]{\"/permission/admin/login\"});\n+        userMgtClient.addUser(newUserName, newUserPassword, new String[]{newUserRole}, null);\n+\n+        String carbonHome = Utils.getResidentCarbonHome();\n+        defaultConfigFile = getDeploymentTomlFile(carbonHome);\n+        log.info(\"Default TOML: \" + defaultConfigFile.toString());\n+        File userMgtConfigFile = new File(getISResourceLocation() + File.separator + \"userMgt\"\n+                + File.separator + \"read_only_ldap_user_mgt_config.toml\");\n+        scm = new ServerConfigurationManager(isServer);\n+        scm.applyConfigurationWithoutRestart(userMgtConfigFile, defaultConfigFile, true);\n+        scm.restartGracefully();\n+    }\n+\n+    @AfterTest(alwaysRun = true)\n+    public void resetUserStoreConfig() throws Exception {\n+\n+        super.init();\n+        scm.restoreToLastConfiguration(true);\n+        super.init(TestUserMode.SUPER_TENANT_ADMIN);", "originalCommit": "2a409a39879f00146f094084f750cb1aade07a49", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUyODc0NQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370528745", "bodyText": "Removed the first call as it's redundant in 1aa6b85", "author": "gayashanbc", "createdAt": "2020-01-24T09:01:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NTQwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NTc4MA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370475780", "bodyText": "Are these variables use outside the class? Otherwise lets restrict the access to private", "author": "DMHP", "createdAt": "2020-01-24T05:09:51Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/scim2/rest/api/SCIMUserUpdateReadOnlyTest.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package org.wso2.identity.integration.test.scim2.rest.api;\n+\n+import io.restassured.RestAssured;\n+import io.restassured.response.ExtractableResponse;\n+import io.restassured.response.Response;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.apache.http.HttpHeaders;\n+import org.apache.http.HttpStatus;\n+import org.testng.Assert;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Factory;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+\n+import java.rmi.RemoteException;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+\n+import static org.wso2.identity.integration.test.scim2.SCIM2BaseTestCase.USERS_ENDPOINT;\n+\n+/**\n+ * Test cases for updating users via SCIM PATCH operations in a read-only user store.\n+ */\n+public class SCIMUserUpdateReadOnlyTest extends SCIM2BaseTest {\n+\n+    private static final Log log = LogFactory.getLog(SCIMUserUpdateReadOnlyTest.class);\n+\n+    protected String endpointURL;", "originalCommit": "d706fad3a498370b6d8ddf0208a9a091645d2975", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ3NjkxOQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370476919", "bodyText": "Shall we add more meaningful string like \"Created User's userid :\"", "author": "DMHP", "createdAt": "2020-01-24T05:17:28Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/scim2/rest/api/SCIMUserUpdateTest.java", "diffHunk": "@@ -0,0 +1,243 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.scim2.rest.api;\n+\n+import io.restassured.RestAssured;\n+import io.restassured.response.ExtractableResponse;\n+import io.restassured.response.Response;\n+import org.apache.commons.logging.Log;\n+import org.apache.commons.logging.LogFactory;\n+import org.apache.http.HttpHeaders;\n+import org.apache.http.HttpStatus;\n+import org.testng.Assert;\n+import org.testng.annotations.AfterClass;\n+import org.testng.annotations.BeforeClass;\n+import org.testng.annotations.BeforeMethod;\n+import org.testng.annotations.DataProvider;\n+import org.testng.annotations.Factory;\n+import org.testng.annotations.Test;\n+import org.wso2.carbon.automation.engine.context.TestUserMode;\n+\n+import java.io.IOException;\n+import java.rmi.RemoteException;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+\n+import static org.hamcrest.core.IsNull.notNullValue;\n+import static org.wso2.identity.integration.test.scim2.SCIM2BaseTestCase.USERS_ENDPOINT;\n+\n+/**\n+ * Test cases for updating users via SCIM PATCH and PUT operations.\n+ */\n+public class SCIMUserUpdateTest extends SCIM2BaseTest {\n+\n+    private static final Log log = LogFactory.getLog(SCIMUserUpdateTest.class);\n+\n+    protected String endpointURL;\n+    protected String userId = null;\n+    private static final String SCIM_CONTENT_TYPE = \"application/scim+json\";\n+\n+    @Factory(dataProvider = \"restAPIUserConfigProvider\")\n+    public SCIMUserUpdateTest(TestUserMode userMode) throws Exception {\n+\n+        super.init(userMode);\n+        this.context = isServer;\n+        this.authenticatingUserName = context.getContextTenant().getTenantAdmin().getUserName();\n+        this.authenticatingCredential = context.getContextTenant().getTenantAdmin().getPassword();\n+        this.tenant = context.getContextTenant().getDomain();\n+    }\n+\n+    @DataProvider(name = \"restAPIUserConfigProvider\")\n+    public static Object[][] restAPIUserConfigProvider() {\n+\n+        return new Object[][]{\n+                {TestUserMode.SUPER_TENANT_ADMIN},\n+                {TestUserMode.TENANT_ADMIN}\n+        };\n+    }\n+\n+    @BeforeClass(alwaysRun = true)\n+    public void init() throws RemoteException {\n+\n+        super.testInit(swaggerDefinition, tenant);\n+    }\n+\n+    @AfterClass(alwaysRun = true)\n+    public void testFinish() {\n+\n+        super.conclude();\n+    }\n+\n+    @BeforeMethod(alwaysRun = true)\n+    public void testInit() {\n+\n+        RestAssured.basePath = basePath;\n+    }\n+\n+    @Test\n+    public void testGetUsers() {\n+\n+        endpointURL = USERS_ENDPOINT;\n+        getResponseOfGet(endpointURL, SCIM_CONTENT_TYPE)\n+                .then()\n+                .assertThat()\n+                .statusCode(HttpStatus.SC_OK)\n+                .log()\n+                .ifValidationFails()\n+                .and()\n+                .assertThat()\n+                .header(HttpHeaders.CONTENT_TYPE, SCIM_CONTENT_TYPE);\n+    }\n+\n+    @Test(dependsOnMethods = \"testGetUsers\")\n+    public void testCreateUser() throws IOException {\n+\n+        String body = readResource(\"scim2-add-user.json\");\n+        Response response = getResponseOfPost(USERS_ENDPOINT, body, SCIM_CONTENT_TYPE);\n+        ExtractableResponse<Response> extractableResponse = response.then()\n+                .log().ifValidationFails()\n+                .assertThat()\n+                .statusCode(HttpStatus.SC_CREATED)\n+                .header(HttpHeaders.LOCATION, notNullValue())\n+                .and()\n+                .assertThat()\n+                .header(HttpHeaders.CONTENT_TYPE, SCIM_CONTENT_TYPE)\n+                .extract();\n+        Assert.assertNotNull(extractableResponse);\n+\n+        String location = response.getHeader(HttpHeaders.LOCATION);\n+        userId = location.split(USERS_ENDPOINT)[1];\n+        Assert.assertNotNull(userId, \"The user did not get created.\");\n+        log.info(\"userId :\" + userId);", "originalCommit": "d706fad3a498370b6d8ddf0208a9a091645d2975", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUwNjI2MA==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370506260", "bodyText": "Shall we add method level comment to each public method?", "author": "DMHP", "createdAt": "2020-01-24T07:49:35Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/scim2/rest/api/SCIMUtils.java", "diffHunk": "@@ -0,0 +1,86 @@\n+/*\n+ * Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ * WSO2 Inc. licenses this file to you under the Apache License,\n+ * Version 2.0 (the \"License\"); you may not use this file except\n+ * in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.wso2.identity.integration.test.scim2.rest.api;\n+\n+import io.restassured.response.Response;\n+import org.apache.commons.lang.StringUtils;\n+import org.apache.http.HttpHeaders;\n+import org.testng.Assert;\n+\n+import java.time.DateTimeException;\n+import java.time.LocalDateTime;\n+import java.time.OffsetDateTime;\n+import java.time.ZoneOffset;\n+import java.util.ArrayList;\n+import java.util.LinkedHashMap;\n+\n+/**\n+ * Common utils for SCIM related test cases.\n+ */\n+public class SCIMUtils {\n+\n+    private static final String SCIM_USER_SCHEMAS = \"[urn:ietf:params:scim:schemas:core:2.0:User, \" +\n+            \"urn:ietf:params:scim:schemas:extension:enterprise:2.0:User]\";\n+\n+    public static void validateSchemasAttribute(Object schemasAttribute) {", "originalCommit": "d706fad3a498370b6d8ddf0208a9a091645d2975", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUyODUyNg==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370528526", "bodyText": "Resolved in 1aa6b85", "author": "gayashanbc", "createdAt": "2020-01-24T09:00:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDUwNjI2MA=="}], "type": "inlineReview"}, {"oid": "1aa6b856847559ff0eaa3e4c3f520ab86ea8c16f", "url": "https://github.com/wso2/product-is/commit/1aa6b856847559ff0eaa3e4c3f520ab86ea8c16f", "message": "Add missing java doc comments", "committedDate": "2020-01-24T08:50:01Z", "type": "commit"}, {"oid": "1aa6b856847559ff0eaa3e4c3f520ab86ea8c16f", "url": "https://github.com/wso2/product-is/commit/1aa6b856847559ff0eaa3e4c3f520ab86ea8c16f", "message": "Add missing java doc comments", "committedDate": "2020-01-24T08:50:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU0OTg1MQ==", "url": "https://github.com/wso2/product-is/pull/7362#discussion_r370549851", "bodyText": "Add Licence header. Lets configure it in the IDE.", "author": "DMHP", "createdAt": "2020-01-24T09:53:02Z", "path": "modules/integration/tests-integration/tests-backend/src/test/java/org/wso2/identity/integration/test/scim2/rest/api/SCIMUserUpdateReadOnlyTest.java", "diffHunk": "@@ -0,0 +1,117 @@\n+package org.wso2.identity.integration.test.scim2.rest.api;", "originalCommit": "1aa6b856847559ff0eaa3e4c3f520ab86ea8c16f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f6848db18720ff01c921b3eb0485f835f6354734", "url": "https://github.com/wso2/product-is/commit/f6848db18720ff01c921b3eb0485f835f6354734", "message": "Add missing licence header to SCIMUserUpdateReadOnlyTest.java", "committedDate": "2020-01-24T10:10:28Z", "type": "commit"}]}