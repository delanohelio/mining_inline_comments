{"pr_number": 2403, "pr_title": "Reject too old PageStore databases", "pr_createdAt": "2020-01-16T09:24:27Z", "pr_url": "https://github.com/h2database/h2database/pull/2403", "timeline": [{"oid": "eccd7d67e5481d28e27918fbde334747cfca8cdf", "url": "https://github.com/h2database/h2database/commit/eccd7d67e5481d28e27918fbde334747cfca8cdf", "message": "Remove semi-automatic upgrade support from 1.1.* releases", "committedDate": "2020-01-16T07:54:57Z", "type": "commit"}, {"oid": "8ec1b58c23d4ebb59f5159a77e7fbd77485cdc71", "url": "https://github.com/h2database/h2database/commit/8ec1b58c23d4ebb59f5159a77e7fbd77485cdc71", "message": "Remove legacy implementation of LOBs", "committedDate": "2020-01-16T09:00:40Z", "type": "commit"}, {"oid": "37b3d2f80972bd8c33c7378984fc95379bb19c71", "url": "https://github.com/h2database/h2database/commit/37b3d2f80972bd8c33c7378984fc95379bb19c71", "message": "Drop support of TCP protocol versions older that 12 (1.3.168)", "committedDate": "2020-01-16T09:13:14Z", "type": "commit"}, {"oid": "6675b3de6c51ed6c3184934121e49e4fb2722c85", "url": "https://github.com/h2database/h2database/commit/6675b3de6c51ed6c3184934121e49e4fb2722c85", "message": "Wrap long line and update changelog", "committedDate": "2020-01-16T09:16:38Z", "type": "commit"}, {"oid": "57283bb48f6b72e8bc80bb8dad38bbd4631e2a9a", "url": "https://github.com/h2database/h2database/commit/57283bb48f6b72e8bc80bb8dad38bbd4631e2a9a", "message": "Throw sane exception if old LOB was read early", "committedDate": "2020-01-16T10:05:28Z", "type": "commit"}, {"oid": "bb65df8842269755906f809498f7bc758b11dc0b", "url": "https://github.com/h2database/h2database/commit/bb65df8842269755906f809498f7bc758b11dc0b", "message": "Remove 7 LOB-only methods from the base Value class", "committedDate": "2020-01-16T13:02:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzM0NA==", "url": "https://github.com/h2database/h2database/pull/2403#discussion_r370947344", "bodyText": "the method name here \"convertToValueLobOrObject\" implies that we are converting to either a ValueLob or an Object, but I don't think that is what you mean.\nPerhaps \"convertObjectToValueLob\"", "author": "grandinj", "createdAt": "2020-01-25T18:11:05Z", "path": "h2/src/main/org/h2/value/DataType.java", "diffHunk": "@@ -1383,8 +1345,47 @@ private static Value convertToValue1(SessionInterface session, Object x,\n         } else if (clazz == Duration.class) {\n             return JSR310Utils.durationToValue(x);\n         } else {\n-            return ValueJavaObject.getNoCopy(x, null, session.getDataHandler());\n+            return convertToValueLobOrObject(session, x);\n+        }\n+    }\n+\n+    private static Value convertToValueLobOrObject(SessionInterface session, Object x) {", "originalCommit": "bb65df8842269755906f809498f7bc758b11dc0b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk3MjA3MQ==", "url": "https://github.com/h2database/h2database/pull/2403#discussion_r370972071", "bodyText": "It returns either a ValueLob instance or a ValueJavaObject instance, but convertToValueLobOrValueJavaObject is too long from my point of view.", "author": "katzyn", "createdAt": "2020-01-26T04:04:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzM0NA=="}], "type": "inlineReview"}]}