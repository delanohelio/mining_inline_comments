{"pr_number": 5949, "pr_title": "6410 contactbook personas", "pr_createdAt": "2020-06-08T18:24:38Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5949", "timeline": [{"oid": "c1725fdb53cc673c23ae72fa11e45653120bd925", "url": "https://github.com/sleuthkit/autopsy/commit/c1725fdb53cc673c23ae72fa11e45653120bd925", "message": "6410: Add personas and buttons to Contact artifact viewer.", "committedDate": "2020-06-08T18:12:12Z", "type": "commit"}, {"oid": "417105694fe0f1d5048fe63f5e4944e3a2d9b222", "url": "https://github.com/sleuthkit/autopsy/commit/417105694fe0f1d5048fe63f5e4944e3a2d9b222", "message": "Merge branch 'develop' of https://github.com/sleuthkit/autopsy into 6410-contactbook-personas\n\n# Conflicts:\n#\tCore/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaDetailsDialog.java", "committedDate": "2020-06-08T18:23:15Z", "type": "commit"}, {"oid": "1844ab646f34a2c2b163abfc110fad4f93c61258", "url": "https://github.com/sleuthkit/autopsy/commit/1844ab646f34a2c2b163abfc110fad4f93c61258", "message": "Addressed Codacy comments.", "committedDate": "2020-06-08T20:25:55Z", "type": "commit"}, {"oid": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "url": "https://github.com/sleuthkit/autopsy/commit/551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "message": "Fix the dialog pre-population.", "committedDate": "2020-06-08T23:38:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYwODk2NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437608964", "bodyText": "I would add a call to repaint here.", "author": "kellykelly3", "createdAt": "2020-06-09T17:45:18Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {\n+        \n+        private final JLabel personaNameLabel;\n+        private final JButton personaActionButton;\n+    \n+        PersonaUIComponents(JLabel personaNameLabel, JButton personaActionButton) {\n+            this.personaNameLabel = personaNameLabel;\n+            this.personaActionButton = personaActionButton;\n+        }\n+\n+        public JLabel getPersonaNameLabel() {\n+            return personaNameLabel;\n+        }\n+\n+        public JButton getPersonaActionButton() {\n+            return personaActionButton;\n+        }\n+    }\n+    \n+     /**\n+     * Action listener for Create persona button.\n+     */\n+    private class CreatePersonaButtonListener implements ActionListener {\n+\n+        private final PersonaUIComponents personaUIComponents;\n+\n+        CreatePersonaButtonListener(PersonaUIComponents personaUIComponents) {\n+            this.personaUIComponents = personaUIComponents;\n+        }\n+         \n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            // Launch the Persona Create dialog - do not display immediately\n+            PersonaDetailsDialog createPersonaDialog = new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.CREATE, null, new PersonaCreateCallbackImpl(personaUIComponents), false);\n+\n+            // Pre populate the persona name and accounts if we have them.\n+            PersonaDetailsPanel personaPanel = createPersonaDialog.getDetailsPanel();\n+            \n+            if (contactName != null) {\n+                personaPanel.setPersonaName(contactName);\n+            }\n+\n+            // pass the list of accounts to the dialog\n+            for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                personaPanel.addAccount(account, \"Account found in Contact artifact.\", Persona.Confidence.UNKNOWN);\n+            }\n+\n+            // display the dialog now\n+            createPersonaDialog.display();\n+        }\n+    }\n+        \n+    /**\n+     * Action listener for View persona button.\n+     */\n+    private class ViewPersonaButtonListener implements ActionListener {\n+\n+        private final Persona persona;\n+\n+        ViewPersonaButtonListener(Persona persona) {\n+            this.persona = persona;\n+        }\n+\n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.VIEW, persona, new PersonaViewCallbackImpl());\n+        }\n+    }\n+    \n+    /**\n+     * Callback method for the create mode of the PersonaDetailsDialog\n+     */\n+    class PersonaCreateCallbackImpl implements PersonaDetailsDialogCallback {\n+        \n+        private final PersonaUIComponents personaUIComponents;\n+        PersonaCreateCallbackImpl(PersonaUIComponents personaUIComponents) {\n+            this.personaUIComponents = personaUIComponents;\n+        }\n+        \n+        @Override\n+        public void callback(Persona persona) {\n+            JButton personaButton = personaUIComponents.getPersonaActionButton();\n+            if (persona != null) {\n+                // update the persona name label with newly created persona, \n+                // and change the button to a \"View\" button\n+                personaUIComponents.getPersonaNameLabel().setText(persona.getName());\n+                personaUIComponents.getPersonaActionButton().setText(Bundle.ContactArtifactViewer_persona_button_view());\n+                \n+                // replace action listener with a View button listener\n+                for (ActionListener act : personaButton.getActionListeners()) {\n+                    personaButton.removeActionListener(act);\n+                }\n+                personaButton.addActionListener(new ViewPersonaButtonListener (persona));\n+                \n+            }\n+           \n+            personaButton.getParent().revalidate();", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYwOTIzMw==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437609233", "bodyText": "Missing method header.", "author": "kellykelly3", "createdAt": "2020-06-09T17:45:44Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {\n+        \n+        private final JLabel personaNameLabel;\n+        private final JButton personaActionButton;\n+    \n+        PersonaUIComponents(JLabel personaNameLabel, JButton personaActionButton) {\n+            this.personaNameLabel = personaNameLabel;\n+            this.personaActionButton = personaActionButton;\n+        }\n+\n+        public JLabel getPersonaNameLabel() {\n+            return personaNameLabel;\n+        }\n+\n+        public JButton getPersonaActionButton() {\n+            return personaActionButton;\n+        }\n+    }\n+    \n+     /**\n+     * Action listener for Create persona button.\n+     */\n+    private class CreatePersonaButtonListener implements ActionListener {\n+\n+        private final PersonaUIComponents personaUIComponents;\n+\n+        CreatePersonaButtonListener(PersonaUIComponents personaUIComponents) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYwOTYzNA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437609634", "bodyText": "Method header.", "author": "kellykelly3", "createdAt": "2020-06-09T17:46:23Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {\n+        \n+        private final JLabel personaNameLabel;\n+        private final JButton personaActionButton;\n+    \n+        PersonaUIComponents(JLabel personaNameLabel, JButton personaActionButton) {\n+            this.personaNameLabel = personaNameLabel;\n+            this.personaActionButton = personaActionButton;\n+        }\n+\n+        public JLabel getPersonaNameLabel() {\n+            return personaNameLabel;\n+        }\n+\n+        public JButton getPersonaActionButton() {\n+            return personaActionButton;\n+        }\n+    }\n+    \n+     /**\n+     * Action listener for Create persona button.\n+     */\n+    private class CreatePersonaButtonListener implements ActionListener {\n+\n+        private final PersonaUIComponents personaUIComponents;\n+\n+        CreatePersonaButtonListener(PersonaUIComponents personaUIComponents) {\n+            this.personaUIComponents = personaUIComponents;\n+        }\n+         \n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            // Launch the Persona Create dialog - do not display immediately\n+            PersonaDetailsDialog createPersonaDialog = new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.CREATE, null, new PersonaCreateCallbackImpl(personaUIComponents), false);\n+\n+            // Pre populate the persona name and accounts if we have them.\n+            PersonaDetailsPanel personaPanel = createPersonaDialog.getDetailsPanel();\n+            \n+            if (contactName != null) {\n+                personaPanel.setPersonaName(contactName);\n+            }\n+\n+            // pass the list of accounts to the dialog\n+            for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                personaPanel.addAccount(account, \"Account found in Contact artifact.\", Persona.Confidence.UNKNOWN);\n+            }\n+\n+            // display the dialog now\n+            createPersonaDialog.display();\n+        }\n+    }\n+        \n+    /**\n+     * Action listener for View persona button.\n+     */\n+    private class ViewPersonaButtonListener implements ActionListener {\n+\n+        private final Persona persona;\n+\n+        ViewPersonaButtonListener(Persona persona) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYwOTgyNg==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437609826", "bodyText": "Method header.", "author": "kellykelly3", "createdAt": "2020-06-09T17:46:41Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {\n+        \n+        private final JLabel personaNameLabel;\n+        private final JButton personaActionButton;\n+    \n+        PersonaUIComponents(JLabel personaNameLabel, JButton personaActionButton) {\n+            this.personaNameLabel = personaNameLabel;\n+            this.personaActionButton = personaActionButton;\n+        }\n+\n+        public JLabel getPersonaNameLabel() {\n+            return personaNameLabel;\n+        }\n+\n+        public JButton getPersonaActionButton() {\n+            return personaActionButton;\n+        }\n+    }\n+    \n+     /**\n+     * Action listener for Create persona button.\n+     */\n+    private class CreatePersonaButtonListener implements ActionListener {\n+\n+        private final PersonaUIComponents personaUIComponents;\n+\n+        CreatePersonaButtonListener(PersonaUIComponents personaUIComponents) {\n+            this.personaUIComponents = personaUIComponents;\n+        }\n+         \n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            // Launch the Persona Create dialog - do not display immediately\n+            PersonaDetailsDialog createPersonaDialog = new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.CREATE, null, new PersonaCreateCallbackImpl(personaUIComponents), false);\n+\n+            // Pre populate the persona name and accounts if we have them.\n+            PersonaDetailsPanel personaPanel = createPersonaDialog.getDetailsPanel();\n+            \n+            if (contactName != null) {\n+                personaPanel.setPersonaName(contactName);\n+            }\n+\n+            // pass the list of accounts to the dialog\n+            for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                personaPanel.addAccount(account, \"Account found in Contact artifact.\", Persona.Confidence.UNKNOWN);\n+            }\n+\n+            // display the dialog now\n+            createPersonaDialog.display();\n+        }\n+    }\n+        \n+    /**\n+     * Action listener for View persona button.\n+     */\n+    private class ViewPersonaButtonListener implements ActionListener {\n+\n+        private final Persona persona;\n+\n+        ViewPersonaButtonListener(Persona persona) {\n+            this.persona = persona;\n+        }\n+\n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.VIEW, persona, new PersonaViewCallbackImpl());\n+        }\n+    }\n+    \n+    /**\n+     * Callback method for the create mode of the PersonaDetailsDialog\n+     */\n+    class PersonaCreateCallbackImpl implements PersonaDetailsDialogCallback {\n+        \n+        private final PersonaUIComponents personaUIComponents;\n+        PersonaCreateCallbackImpl(PersonaUIComponents personaUIComponents) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyNTkzNw==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437625937", "bodyText": "This should have a call to repaint(),", "author": "kellykelly3", "createdAt": "2020-06-09T18:14:40Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyNjc2Mg==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437626762", "bodyText": "Fix the comment", "author": "kellykelly3", "createdAt": "2020-06-09T18:16:07Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyNzQwNA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437627404", "bodyText": "Brian was looking for one resetComponent method that would reset the state of all of the components.", "author": "kellykelly3", "createdAt": "2020-06-09T18:17:12Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -231,6 +311,16 @@ public boolean isSupported(BlackboardArtifact artifact) {\n         return artifact.getArtifactTypeID() == BlackboardArtifact.ARTIFACT_TYPE.TSK_CONTACT.getTypeID();\n     }\n \n+    /**\n+     * Clear any artifact specific state.\n+     */\n+    private void reset() {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyNzc0MQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437627741", "bodyText": "initComponent should not be called in setArtifacts.  It should only be called in the constructor.", "author": "kellykelly3", "createdAt": "2020-06-09T18:17:45Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -158,43 +194,81 @@ private void initComponents() {\n         gridBagConstraints = new java.awt.GridBagConstraints();\n         gridBagConstraints.gridx = 0;\n         gridBagConstraints.gridy = 7;\n+        gridBagConstraints.gridheight = 2;\n+        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;\n+        gridBagConstraints.weighty = 0.1;\n+        add(interPanelfiller, gridBagConstraints);\n+\n+        personasLabel.setFont(personasLabel.getFont().deriveFont((personasLabel.getFont().getStyle() | java.awt.Font.ITALIC) | java.awt.Font.BOLD, personasLabel.getFont().getSize()+2));\n+        org.openide.awt.Mnemonics.setLocalizedText(personasLabel, org.openide.util.NbBundle.getMessage(ContactArtifactViewer.class, \"ContactArtifactViewer.personasLabel.text\")); // NOI18N\n+        personasLabel.setMaximumSize(new java.awt.Dimension(60, 19));\n+        personasLabel.setMinimumSize(new java.awt.Dimension(60, 19));\n+        personasLabel.setPreferredSize(new java.awt.Dimension(60, 19));\n+        gridBagConstraints = new java.awt.GridBagConstraints();\n+        gridBagConstraints.gridx = 0;\n+        gridBagConstraints.gridy = 8;\n+        gridBagConstraints.gridwidth = 3;\n+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;\n+        gridBagConstraints.insets = new java.awt.Insets(6, 19, 0, 0);\n+        add(personasLabel, gridBagConstraints);\n+\n+        personasPanel.setLayout(new java.awt.GridBagLayout());\n+        gridBagConstraints = new java.awt.GridBagConstraints();\n+        gridBagConstraints.gridx = 0;\n+        gridBagConstraints.gridy = 9;\n+        gridBagConstraints.gridwidth = 4;\n+        gridBagConstraints.fill = java.awt.GridBagConstraints.VERTICAL;\n+        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;\n+        gridBagConstraints.insets = new java.awt.Insets(6, 19, 0, 0);\n+        add(personasPanel, gridBagConstraints);\n+        gridBagConstraints = new java.awt.GridBagConstraints();\n+        gridBagConstraints.gridx = 0;\n+        gridBagConstraints.gridy = 10;\n         gridBagConstraints.gridwidth = 4;\n         gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;\n         gridBagConstraints.weighty = 1.0;\n-        add(filler1, gridBagConstraints);\n+        add(bottomFiller, gridBagConstraints);\n         gridBagConstraints = new java.awt.GridBagConstraints();\n         gridBagConstraints.gridx = 4;\n         gridBagConstraints.gridy = 0;\n         gridBagConstraints.gridheight = 8;\n         gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;\n         gridBagConstraints.ipadx = 2;\n         gridBagConstraints.weightx = 1.0;\n-        add(filler2, gridBagConstraints);\n+        add(rightFiller, gridBagConstraints);\n     }// </editor-fold>//GEN-END:initComponents\n \n     @Override\n     public void setArtifact(BlackboardArtifact artifact) {\n \n         // wipe the panel clean\n         this.removeAll();\n+        \n+        reset();\n         initComponents();", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyODQwNw==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437628407", "bodyText": "Kicks off a search", "author": "kellykelly3", "createdAt": "2020-06-09T18:19:02Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyODYxNQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437628615", "bodyText": "A list of account", "author": "kellykelly3", "createdAt": "2020-06-09T18:19:27Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYyODc4OA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437628788", "bodyText": "Kick off a", "author": "kellykelly3", "createdAt": "2020-06-09T18:19:47Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzMjAzMQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437632031", "bodyText": "Method header", "author": "kellykelly3", "createdAt": "2020-06-09T18:24:41Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzMzE2MQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437633161", "bodyText": "Should that string be in a @messages block?", "author": "kellykelly3", "createdAt": "2020-06-09T18:26:46Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {\n+        \n+        private final JLabel personaNameLabel;\n+        private final JButton personaActionButton;\n+    \n+        PersonaUIComponents(JLabel personaNameLabel, JButton personaActionButton) {\n+            this.personaNameLabel = personaNameLabel;\n+            this.personaActionButton = personaActionButton;\n+        }\n+\n+        public JLabel getPersonaNameLabel() {\n+            return personaNameLabel;\n+        }\n+\n+        public JButton getPersonaActionButton() {\n+            return personaActionButton;\n+        }\n+    }\n+    \n+     /**\n+     * Action listener for Create persona button.\n+     */\n+    private class CreatePersonaButtonListener implements ActionListener {\n+\n+        private final PersonaUIComponents personaUIComponents;\n+\n+        CreatePersonaButtonListener(PersonaUIComponents personaUIComponents) {\n+            this.personaUIComponents = personaUIComponents;\n+        }\n+         \n+        @Override\n+        public void actionPerformed(java.awt.event.ActionEvent evt) {\n+            // Launch the Persona Create dialog - do not display immediately\n+            PersonaDetailsDialog createPersonaDialog = new PersonaDetailsDialog(ContactArtifactViewer.this,\n+                    PersonaDetailsMode.CREATE, null, new PersonaCreateCallbackImpl(personaUIComponents), false);\n+\n+            // Pre populate the persona name and accounts if we have them.\n+            PersonaDetailsPanel personaPanel = createPersonaDialog.getDetailsPanel();\n+            \n+            if (contactName != null) {\n+                personaPanel.setPersonaName(contactName);\n+            }\n+\n+            // pass the list of accounts to the dialog\n+            for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                personaPanel.addAccount(account, \"Account found in Contact artifact.\", Persona.Confidence.UNKNOWN);", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY1MjEyOA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437652128", "bodyText": "I'm not sure if this should be in the messages. It's not a message being displayed to the user that needs to be localized - this is going to go in the database.", "author": "raman-bt", "createdAt": "2020-06-09T19:00:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzMzE2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzNDk3Mw==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437634973", "bodyText": "Method header", "author": "kellykelly3", "createdAt": "2020-06-09T18:30:09Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzNTI4NA==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437635284", "bodyText": "This whole class is missing method headers.", "author": "kellykelly3", "createdAt": "2020-06-09T18:30:38Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "diffHunk": "@@ -305,16 +396,410 @@ private void updateSection(List<BlackboardAttribute> sectionAttributesList, JLab\n         sectionPanel.revalidate();\n     }\n \n+    /**\n+     * Kicks of a search for personas, based in the list of attributes.\n+     * \n+     * @param accountAttributesList a list of account identifying attributes.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_searching= Searching...\"\n+    })\n+    private void initiatePersonasSearch(List<BlackboardAttribute> accountAttributesList) throws CentralRepoException {\n+        \n+        // create a Gridbag layout\n+        // create a gridbag layout to show each participant on one line\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+        \n+        // Add a Persona Name label \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        \n+        javax.swing.Box.Filler filler1 = this.createFiller(5, 0);\n+        personasPanel.add(filler1, constraints);\n+\n+        constraints.gridx++;\n+        javax.swing.JLabel primaryPersonaNameLabel = new javax.swing.JLabel();\n+        primaryPersonaNameLabel.setText(Bundle.ContactArtifactViewer_persona_searching());\n+        gridBagLayout.setConstraints(primaryPersonaNameLabel, constraints);\n+        personasPanel.add(primaryPersonaNameLabel);\n+        \n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.revalidate();\n+        \n+        // kick off a background task to serach for personas for the contact\n+        ContactPersonaSearcherTask personaSearchTask = new ContactPersonaSearcherTask(accountAttributesList);\n+        personaSearchTask.execute();\n+     \n+    }\n+    \n+    /**\n+     * Updates the Persona panel with the gathered persona information.\n+     */\n+    private void updatePersonasPanel() {\n+        // Clear out the panel\n+        personasPanel.removeAll();\n+\n+        GridBagLayout gridBagLayout = new GridBagLayout();\n+        GridBagConstraints constraints = new GridBagConstraints();\n+        constraints.anchor = GridBagConstraints.FIRST_LINE_START;\n+        constraints.gridx = 0;\n+        constraints.gridy = 0;\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+\n+        if (contactUniquePersonasMap.isEmpty()) {\n+            showPersona(null, Collections.emptyList(), gridBagLayout, constraints);\n+        } else {\n+            for (Map.Entry<Persona, ArrayList<CentralRepoAccount> > entry : contactUniquePersonasMap.entrySet()) {\n+                List<CentralRepoAccount> missingAccounts = new ArrayList<>();\n+                ArrayList<CentralRepoAccount> personaAccounts = entry.getValue();\n+                \n+                // create a list of accounts missing from this persona\n+                for (CentralRepoAccount account : contactUniqueAccountsList) {\n+                    if (personaAccounts.contains(account) == false) {\n+                        missingAccounts.add(account);\n+                    }\n+                }\n+                 \n+                showPersona(entry.getKey(), missingAccounts, gridBagLayout, constraints);\n+                constraints.gridy += 2;\n+            }\n+        }\n+\n+        personasPanel.setLayout(gridBagLayout);\n+        personasPanel.setSize(personasPanel.getPreferredSize());\n+        personasPanel.revalidate();\n+    }\n+    \n+    @NbBundle.Messages({\n+        \"ContactArtifactViewer_persona_label= Persona: \",\n+        \"ContactArtifactViewer_persona_text_none=No Persona\",\n+        \"ContactArtifactViewer_persona_button_view=View\",\n+        \"ContactArtifactViewer_persona_button_new=New\",\n+        \"ContactArtifactViewer_missing_account_label=Missing Account: \"\n+    })\n+    \n+    \n+    /**\n+     * Displays the given persona in the persona panel.\n+     * \n+     * @param persona Persona to display.\n+     * @param missingAccountsList List of accounts this persona may be missing.\n+     * @param gridBagLayout Layout to use.\n+     * @param constraints layout constraints.\n+     * \n+     * @throws CentralRepoException \n+     */\n+    private void showPersona(Persona persona, List<CentralRepoAccount> missingAccountsList, GridBagLayout gridBagLayout, GridBagConstraints constraints  ) {\n+        \n+        constraints.fill = GridBagConstraints.NONE;\n+        constraints.weightx = 0;\n+        constraints.gridx = 0;\n+\n+        javax.swing.Box.Filler filler1 = createFiller(5, 0 );\n+        gridBagLayout.setConstraints(filler1, constraints);\n+        personasPanel.add(filler1);\n+\n+         // Add a \"Persona: \" label\n+        constraints.gridx++;\n+        javax.swing.JLabel personaLabel = new javax.swing.JLabel();\n+        personaLabel.setText(Bundle.ContactArtifactViewer_persona_label());\n+        gridBagLayout.setConstraints(personaLabel, constraints);\n+        personasPanel.add(personaLabel);\n+        \n+        javax.swing.JLabel personaNameLabel = new javax.swing.JLabel();\n+        javax.swing.JButton personaButton = new javax.swing.JButton();\n+        \n+        String personaName;\n+        String personaButtonText;\n+        ActionListener personaButtonListener;\n+        \n+        if (persona != null) {\n+            personaName = persona.getName();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_view();\n+            personaButtonListener = new ViewPersonaButtonListener(persona);\n+        } else {\n+            personaName = Bundle.ContactArtifactViewer_persona_text_none();\n+            personaButtonText = Bundle.ContactArtifactViewer_persona_button_new();\n+            personaButtonListener = new CreatePersonaButtonListener(new PersonaUIComponents(personaNameLabel, personaButton));\n+        }\n+        \n+         // Add the label for persona name, \n+        constraints.gridx++;\n+        personaNameLabel.setText(personaName);\n+        gridBagLayout.setConstraints(personaNameLabel, constraints);\n+        personasPanel.add(personaNameLabel);\n+        \n+        constraints.gridx++;\n+        personasPanel.add(createFiller(5, 0), constraints);\n+          \n+        // Add a Persona action button\n+        constraints.gridx++;\n+        personaButton.setText(personaButtonText);\n+        personaButton.addActionListener(personaButtonListener);\n+        \n+ \n+        // no top inset of the button, in order to center align with the labels.\n+        constraints.insets = new java.awt.Insets(0, 0, 0, 0);\n+   \n+        gridBagLayout.setConstraints(personaButton, constraints);\n+        personasPanel.add(personaButton);\n+\n+        // restore normal inset\n+        constraints.insets = new java.awt.Insets(TOP_INSET, 0, 0, 0);\n+          \n+       \n+        // show missing accounts.\n+        for (CentralRepoAccount missingAccount: missingAccountsList) {\n+             constraints.weightx = 0;\n+             constraints.gridx = 0;\n+             constraints.gridy++;\n+            \n+            // Add a \"Missing Account: \" label\n+            constraints.gridx += 2; // Ident \n+            javax.swing.JLabel missingAccountLabel = new javax.swing.JLabel();\n+            missingAccountLabel.setText(Bundle.ContactArtifactViewer_missing_account_label());\n+            gridBagLayout.setConstraints(missingAccountLabel, constraints);\n+            personasPanel.add(missingAccountLabel);\n+        \n+             // Add the label for account id, \n+            constraints.gridx++;\n+            javax.swing.JLabel missingAccountIdentifierLabel = new javax.swing.JLabel();\n+            missingAccountIdentifierLabel.setText(missingAccount.getIdentifier());\n+            gridBagLayout.setConstraints(missingAccountIdentifierLabel, constraints);\n+            personasPanel.add(missingAccountIdentifierLabel);\n+        }\n+    }\n+    \n+    \n+    private javax.swing.Box.Filler createFiller(int width, int height ) {\n+        return new javax.swing.Box.Filler(new Dimension(width, height), new Dimension(width,height), new Dimension(width, height));\n+    }\n+    \n+   /**\n+     * Thread to search for a personas for all account identifier attributes for a contact.\n+     */\n+    private class ContactPersonaSearcherTask extends SwingWorker<Map<Persona, ArrayList<CentralRepoAccount>>, Void> {\n+\n+        private final List<BlackboardAttribute> accountAttributesList;\n+        private final List<CentralRepoAccount> uniqueAccountsList = new ArrayList<>();\n+       \n+        \n+        ContactPersonaSearcherTask(List<BlackboardAttribute> accountAttributesList) {\n+            this.accountAttributesList = accountAttributesList;\n+        }\n+\n+        \n+        @Override\n+        protected Map<Persona, ArrayList<CentralRepoAccount>> doInBackground() throws Exception {\n+\n+            Map<Persona, ArrayList<CentralRepoAccount>> uniquePersonas = new HashMap<>();\n+\n+            for (BlackboardAttribute bba : accountAttributesList) {\n+\n+                // Get account, add to accounts list\n+                Collection<Persona> personas;\n+\n+                Collection<CentralRepoAccount> accountCandidates\n+                        = CentralRepoAccount.getAccountsWithIdentifier(bba.getValueString());\n+\n+                if (accountCandidates.isEmpty() == false) {\n+                    CentralRepoAccount account = accountCandidates.iterator().next();\n+                    if (uniqueAccountsList.contains(account) == false) {\n+                        uniqueAccountsList.add(account);\n+                    }\n+\n+                    // get personas for the account\n+                    personas = PersonaAccount.getPersonaAccountsForAccount(account.getId())\n+                            .stream()\n+                            .map(PersonaAccount::getPersona)\n+                            .collect(Collectors.toList());\n+\n+                    // make a list of unique personas, along with all their accounts\n+                    for (Persona persona : personas) {\n+                        if (uniquePersonas.containsKey(persona) == false) {\n+                            Collection<CentralRepoAccount> accounts = persona.getPersonaAccounts()\n+                                    .stream()\n+                                    .map(PersonaAccount::getAccount)\n+                                    .collect(Collectors.toList());\n+\n+                            ArrayList<CentralRepoAccount> personaAccountsList = new ArrayList<>(accounts);\n+                            uniquePersonas.put(persona, personaAccountsList);\n+                        }\n+                    }\n+                }\n+\n+            }\n+\n+            return uniquePersonas;\n+        }\n+\n+\n+        @Override\n+        protected void done() {\n+           \n+            Map<Persona, ArrayList<CentralRepoAccount>> personasMap;\n+            try {\n+                personasMap = super.get();\n+\n+                if (this.isCancelled()) {\n+                    return;\n+                }\n+                \n+                contactUniquePersonasMap.clear();\n+                contactUniquePersonasMap.putAll(personasMap);\n+                contactUniqueAccountsList.clear();\n+                contactUniqueAccountsList.addAll(uniqueAccountsList);\n+\n+                updatePersonasPanel();\n+               \n+            } catch (CancellationException ex) {\n+                logger.log(Level.INFO, \"Persona searching was canceled.\"); //NON-NLS\n+            } catch (InterruptedException ex) {\n+                logger.log(Level.INFO, \"Persona searching was interrupted.\"); //NON-NLS\n+            } catch (ExecutionException ex) {\n+                logger.log(Level.SEVERE, \"Fatal error during Persona search.\", ex); //NON-NLS\n+            }\n+        \n+        }\n+    } \n+    \n+    /**\n+     * A wrapper class that bags the UI components that need to be updated when \n+     * a persona search task or a create dialog returns.\n+     */\n+    private class PersonaUIComponents {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODc1Mg==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437638752", "bodyText": "Would it make sense for normalizeAccountIdentifier to take care of putting the  identifier into lowercase?  An email address passed into that method would already be in all lower case as CommunicationsUtils does that.", "author": "kellykelly3", "createdAt": "2020-06-09T18:36:55Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/CentralRepoAccount.java", "diffHunk": "@@ -209,9 +245,17 @@ public void process(ResultSet rs) throws CentralRepoException, SQLException {\n      * @throws CentralRepoException If there is an error in getting the accounts.\n      */\n     public static Collection<CentralRepoAccount> getAccountsWithIdentifier(String accountIdentifier) throws CentralRepoException {\n-       \n+\n+        String normalizedAccountIdentifier;\n+\n+        try {\n+            normalizedAccountIdentifier = normalizeAccountIdentifier(accountIdentifier);\n+        } catch (TskCoreException ex) {\n+            throw new CentralRepoException(\"Failed to normalize account identifier.\", ex);\n+        }\n+\n         String queryClause = ACCOUNTS_QUERY_CLAUSE\n-                + \" WHERE LOWER(accounts.account_unique_identifier) = LOWER('\" + accountIdentifier + \"')\";\n+                + \" WHERE LOWER(accounts.account_unique_identifier) = LOWER('\" + normalizedAccountIdentifier + \"')\";", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY1MzQ4NQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437653485", "bodyText": "Normalization of other account types may do different things.  I don't know if we should assume it will convert to lower case.  We just had a discussion today to allow for different normalizations for Accounts  (as created by CommunicationsUtils)  Vs. CentralRepoAccounts", "author": "raman-bt", "createdAt": "2020-06-09T19:03:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzYzODc1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY0Mjg5Ng==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437642896", "bodyText": "Instead of passing in whether or not to display the dialog I would just have the calling code call display.  This will also help fix the lightbulb warnings in netbeans that you are not using your new instances.", "author": "kellykelly3", "createdAt": "2020-06-09T18:44:19Z", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/persona/PersonaDetailsDialog.java", "diffHunk": "@@ -44,6 +44,10 @@\n         \"PersonaDetailsDialogEditTitle=Edit Persona\",\n         \"PersonaDetailsDialogViewTitle=View Persona\",})\n     public PersonaDetailsDialog(Component parent, PersonaDetailsMode mode, Persona persona, PersonaDetailsDialogCallback callback) {\n+        // by default, display the dialog right away\n+        this(parent, mode, persona, callback, true);\n+    }\n+    public PersonaDetailsDialog(Component parent, PersonaDetailsMode mode, Persona persona, PersonaDetailsDialogCallback callback, boolean displayDialog) {", "originalCommit": "551dd2016c9c69517d4dd08e70d1aa5a8f3646dc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY1NDkzMw==", "url": "https://github.com/sleuthkit/autopsy/pull/5949#discussion_r437654933", "bodyText": "This dialog is created from several places.  (including persona manager)  Everywhere else its OK to immediately display the dialog.  So, far this is the first place where I needed to delay the display in order to pre-populate it.  Forcing every client to explicitly call display seems excessive.", "author": "raman-bt", "createdAt": "2020-06-09T19:05:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY0Mjg5Ng=="}], "type": "inlineReview"}, {"oid": "4e4f4d197c101243445411e986880a0be578679f", "url": "https://github.com/sleuthkit/autopsy/commit/4e4f4d197c101243445411e986880a0be578679f", "message": "Address review comments.", "committedDate": "2020-06-09T23:18:11Z", "type": "commit"}, {"oid": "6679d97e5d4169a4c5a0d5fc68ba1a6fabde08df", "url": "https://github.com/sleuthkit/autopsy/commit/6679d97e5d4169a4c5a0d5fc68ba1a6fabde08df", "message": "Removed period.", "committedDate": "2020-06-10T00:54:09Z", "type": "commit"}, {"oid": "9d4e352533eedab6cb49797cf9deaab53a607b3e", "url": "https://github.com/sleuthkit/autopsy/commit/9d4e352533eedab6cb49797cf9deaab53a607b3e", "message": "Changed Personas layout.\nCodacy comments.", "committedDate": "2020-06-10T21:06:57Z", "type": "commit"}, {"oid": "62073dea9153798570e02f9d38530327accbfa97", "url": "https://github.com/sleuthkit/autopsy/commit/62073dea9153798570e02f9d38530327accbfa97", "message": "Remove unused method.", "committedDate": "2020-06-10T21:25:38Z", "type": "commit"}, {"oid": "8bbd8b8a27dda01383df6e4f437e975c3225417d", "url": "https://github.com/sleuthkit/autopsy/commit/8bbd8b8a27dda01383df6e4f437e975c3225417d", "message": "Remove unused import.", "committedDate": "2020-06-10T22:03:33Z", "type": "commit"}, {"oid": "b345be55ad89dca6c71b470d721ea74d83b8b8e7", "url": "https://github.com/sleuthkit/autopsy/commit/b345be55ad89dca6c71b470d721ea74d83b8b8e7", "message": "Merge branch 'develop' of https://github.com/sleuthkit/autopsy into 6410-contactbook-personas", "committedDate": "2020-06-10T22:18:33Z", "type": "commit"}, {"oid": "6cc4786eb6386e39a0aafce2680fb2f34426c005", "url": "https://github.com/sleuthkit/autopsy/commit/6cc4786eb6386e39a0aafce2680fb2f34426c005", "message": "Merge branch 'develop' of https://github.com/sleuthkit/autopsy into 6410-contactbook-personas\n\n# Conflicts:\n#\tCore/src/org/sleuthkit/autopsy/contentviewers/ContactArtifactViewer.java", "committedDate": "2020-06-11T14:47:24Z", "type": "commit"}, {"oid": "69fb161575b1250b1658b8146531189f537d382e", "url": "https://github.com/sleuthkit/autopsy/commit/69fb161575b1250b1658b8146531189f537d382e", "message": "Change confidence value.", "committedDate": "2020-06-11T15:21:55Z", "type": "commit"}]}