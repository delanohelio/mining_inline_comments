{"pr_number": 5975, "pr_title": "6456 redo calllogviewer", "pr_createdAt": "2020-06-15T18:25:58Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5975", "timeline": [{"oid": "77a0563ac0acbbf61eb23e978ffa67467e8a765d", "url": "https://github.com/sleuthkit/autopsy/commit/77a0563ac0acbbf61eb23e978ffa67467e8a765d", "message": "64565: Reorganize call log artifact viewer\n\nInterim commit.", "committedDate": "2020-06-15T16:42:04Z", "type": "commit"}, {"oid": "4866924902336d98a44b8c57d41f41f6622510d0", "url": "https://github.com/sleuthkit/autopsy/commit/4866924902336d98a44b8c57d41f41f6622510d0", "message": "removed old classes and renamed the new to old.", "committedDate": "2020-06-15T17:43:59Z", "type": "commit"}, {"oid": "c3a6828931ea4efe3e80cc71d03185d3f29bc9cd", "url": "https://github.com/sleuthkit/autopsy/commit/c3a6828931ea4efe3e80cc71d03185d3f29bc9cd", "message": "Merge branch 'develop' of https://github.com/sleuthkit/autopsy into 6456-redo-calllogviewer\n\n# Conflicts:\n#\tCore/src/org/sleuthkit/autopsy/contentviewers/CallLogArtifactViewer.java", "committedDate": "2020-06-15T18:16:27Z", "type": "commit"}, {"oid": "a287fbbed603365783531796cbcb4a997b67f89d", "url": "https://github.com/sleuthkit/autopsy/commit/a287fbbed603365783531796cbcb4a997b67f89d", "message": "Address Codacy comments.", "committedDate": "2020-06-15T18:56:04Z", "type": "commit"}, {"oid": "6484cd0d868cf89da71633dadc91019742dccf5a", "url": "https://github.com/sleuthkit/autopsy/commit/6484cd0d868cf89da71633dadc91019742dccf5a", "message": "Address Codacy comment.", "committedDate": "2020-06-15T19:14:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNjEzMQ==", "url": "https://github.com/sleuthkit/autopsy/pull/5975#discussion_r441626131", "bodyText": "Would it make more sense for this class to take the String tables and have this class manage the creation of the JLabel and Button?", "author": "kellykelly3", "createdAt": "2020-06-17T15:16:01Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/AccountPersonaSearcherData.java", "diffHunk": "@@ -0,0 +1,76 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020 Basis Technology Corp.\n+ * Contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.contentviewers;\n+\n+import javax.swing.JButton;\n+import javax.swing.JLabel;\n+\n+/**\n+ * A data bag for the persona searching thread. It wraps the account id to\n+ * search for, and the UI label and button to update once the search completes.\n+ */\n+class AccountPersonaSearcherData {\n+\n+    // Account identifier to search personas for.\n+    private final String accountIdentifer;\n+    // Persona name label to be updated when the search is complete.\n+    private final JLabel personaNameLabel;\n+    // Persona action button to be updated when the search is complete\n+    private final JButton personaActionButton;\n+\n+    /**\n+     * Constructor.\n+     *\n+     * @param accountIdentifer Account identifier.\n+     * @param personaNameLabel Persona name label.\n+     * @param personaActionButton Persona button.\n+     */\n+    AccountPersonaSearcherData(String accountIdentifer, JLabel personaNameLabel, JButton personaActionButton) {", "originalCommit": "6484cd0d868cf89da71633dadc91019742dccf5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTYyNjcwNw==", "url": "https://github.com/sleuthkit/autopsy/pull/5975#discussion_r441626707", "bodyText": "CallLogArtifactViewer", "author": "kellykelly3", "createdAt": "2020-06-17T15:16:46Z", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/CallLogArtifactViewer.java", "diffHunk": "@@ -18,85 +18,59 @@\n  */\n package org.sleuthkit.autopsy.contentviewers;\n \n-import com.google.common.util.concurrent.ThreadFactoryBuilder;\n import java.awt.Component;\n-import java.awt.Dimension;\n import java.awt.GridBagConstraints;\n import java.awt.GridBagLayout;\n-import java.awt.event.ActionListener;\n-import java.text.SimpleDateFormat;\n import java.util.ArrayList;\n import java.util.Arrays;\n-import java.util.Collection;\n import java.util.HashMap;\n import java.util.HashSet;\n import java.util.List;\n-import java.util.Locale;\n import java.util.Map;\n+import java.util.Optional;\n import java.util.Set;\n-import java.util.concurrent.CancellationException;\n-import java.util.concurrent.ExecutionException;\n-import java.util.concurrent.ExecutorService;\n-import java.util.concurrent.Executors;\n import java.util.logging.Level;\n-import java.util.stream.Collectors;\n-import javax.swing.JButton;\n-import javax.swing.JLabel;\n import javax.swing.JScrollPane;\n-import javax.swing.SwingWorker;\n+import org.apache.commons.lang3.ObjectUtils;\n+import org.apache.commons.lang3.StringUtils;\n+import org.openide.util.NbBundle;\n+import org.openide.util.lookup.ServiceProvider;\n import org.sleuthkit.autopsy.coreutils.Logger;\n-import org.sleuthkit.autopsy.datamodel.ContentUtils;\n import org.sleuthkit.datamodel.BlackboardArtifact;\n import org.sleuthkit.datamodel.BlackboardAttribute;\n import org.sleuthkit.datamodel.Content;\n import org.sleuthkit.datamodel.DataSource;\n import org.sleuthkit.datamodel.TskCoreException;\n-import org.apache.commons.lang3.ObjectUtils;\n-import org.apache.commons.lang3.StringUtils;\n-import org.openide.util.NbBundle;\n-import org.openide.util.lookup.ServiceProvider;\n-import org.sleuthkit.autopsy.centralrepository.datamodel.CentralRepoAccount;\n-import org.sleuthkit.autopsy.centralrepository.datamodel.CentralRepository;\n-import org.sleuthkit.autopsy.centralrepository.datamodel.Persona;\n-import org.sleuthkit.autopsy.centralrepository.datamodel.PersonaAccount;\n-import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialog;\n-import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialogCallback;\n-import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsMode;\n \n /**\n- * This is a viewer for TSK_CALLLOG artifacts.\n- *\n+ * Artifact viewer for Call log artifacts.\n  *\n+ * Displays the To/From and other parties, and metadata for a call.\n  */\n @ServiceProvider(service = ArtifactContentViewer.class)\n-@SuppressWarnings(\"PMD.SingularField\") // UI widgets cause lots of false positives\n public class CallLogArtifactViewer extends javax.swing.JPanel implements ArtifactContentViewer {\n \n-    private final SimpleDateFormat dateFormatter = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\", Locale.US);\n-\n     private final static Logger logger = Logger.getLogger(CallLogArtifactViewer.class.getName());\n     private static final long serialVersionUID = 1L;\n \n     private static final Set<Integer> HANDLED_ATTRIBUTE_TYPES = new HashSet<Integer>(Arrays.asList(\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_PHONE_NUMBER.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_PHONE_NUMBER_TO.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_PHONE_NUMBER_FROM.getTypeID(),\n+            BlackboardAttribute.ATTRIBUTE_TYPE.TSK_ID.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_DIRECTION.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_DATETIME.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_DATETIME_START.getTypeID(),\n             BlackboardAttribute.ATTRIBUTE_TYPE.TSK_DATETIME_END.getTypeID()\n     ));\n \n-    private static final int THREAD_POOL_SIZE = 5;\n-    private final ExecutorService personatasksExecutor = Executors.newFixedThreadPool(THREAD_POOL_SIZE,\n-            new ThreadFactoryBuilder().setNameFormat(\"Persona-Searcher-%d\").build());\n+    private GridBagLayout m_gridBagLayout = new GridBagLayout();\n+    private GridBagConstraints m_constraints = new GridBagConstraints();\n \n-    private final List<PersonaSearcherTask> personaSearchtasks = new ArrayList<>();\n-\n-    private static final int TOP_INSET = 4;\n+    private final List<PersonaSearchAndDisplayTask> personaSearchtasks = new ArrayList<>();\n \n     /**\n-     * Creates new form CalllogArtifactViewer\n+     * Creates new form CallLogArtifactViewerNew", "originalCommit": "6484cd0d868cf89da71633dadc91019742dccf5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7c7cf7594c047989699253409f1c2e2c2d8b46b5", "url": "https://github.com/sleuthkit/autopsy/commit/7c7cf7594c047989699253409f1c2e2c2d8b46b5", "message": "Addressed review comments.", "committedDate": "2020-06-17T19:49:35Z", "type": "commit"}]}