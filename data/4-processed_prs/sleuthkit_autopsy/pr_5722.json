{"pr_number": 5722, "pr_title": "6032 translated file name columns in results view", "pr_createdAt": "2020-03-19T14:04:53Z", "pr_url": "https://github.com/sleuthkit/autopsy/pull/5722", "timeline": [{"oid": "d732e20839e7e8c10d4eda295487cd5e1b4ea3ee", "url": "https://github.com/sleuthkit/autopsy/commit/d732e20839e7e8c10d4eda295487cd5e1b4ea3ee", "message": "6032 Move file name translation and make task", "committedDate": "2020-03-16T16:33:44Z", "type": "commit"}, {"oid": "d43c7bd16c9f3818c431905ac7820e9f05c18862", "url": "https://github.com/sleuthkit/autopsy/commit/d43c7bd16c9f3818c431905ac7820e9f05c18862", "message": "Merge remote-tracking branch 'upstream/develop' into 6032-translated-file-name-columns-in-results-view", "committedDate": "2020-03-16T19:33:07Z", "type": "commit"}, {"oid": "1085baf9cdf32763e9c0365161bd4c64084ecb44", "url": "https://github.com/sleuthkit/autopsy/commit/1085baf9cdf32763e9c0365161bd4c64084ecb44", "message": "Extend file name translation to BlackboardArtifactNodes", "committedDate": "2020-03-17T12:43:04Z", "type": "commit"}, {"oid": "45e9222bccda7c2add909fdd09255d2251ad1848", "url": "https://github.com/sleuthkit/autopsy/commit/45e9222bccda7c2add909fdd09255d2251ad1848", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T11:48:10Z", "type": "commit"}, {"oid": "060467f6199039097a605caa1b8d31c99efe0108", "url": "https://github.com/sleuthkit/autopsy/commit/060467f6199039097a605caa1b8d31c99efe0108", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T11:57:27Z", "type": "commit"}, {"oid": "89ccc44a56a36a776926655f4bd80cef40cea056", "url": "https://github.com/sleuthkit/autopsy/commit/89ccc44a56a36a776926655f4bd80cef40cea056", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T12:24:29Z", "type": "commit"}, {"oid": "cdea715cf702fe3f95f5e99b3f2d0fd9bc9559fc", "url": "https://github.com/sleuthkit/autopsy/commit/cdea715cf702fe3f95f5e99b3f2d0fd9bc9559fc", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T12:30:02Z", "type": "commit"}, {"oid": "a287d4704ac7d2a9ddf139b8cf97f101e1f29915", "url": "https://github.com/sleuthkit/autopsy/commit/a287d4704ac7d2a9ddf139b8cf97f101e1f29915", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T12:31:36Z", "type": "commit"}, {"oid": "915facbcb3fce881750d8feb8a283830e1b35600", "url": "https://github.com/sleuthkit/autopsy/commit/915facbcb3fce881750d8feb8a283830e1b35600", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T12:36:46Z", "type": "commit"}, {"oid": "5f2d4029ce66a9879a0e8cc20fbfedf3ce860709", "url": "https://github.com/sleuthkit/autopsy/commit/5f2d4029ce66a9879a0e8cc20fbfedf3ce860709", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T12:43:03Z", "type": "commit"}, {"oid": "9c14a4de791b96725f0c4e0bd391732f984142e1", "url": "https://github.com/sleuthkit/autopsy/commit/9c14a4de791b96725f0c4e0bd391732f984142e1", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T13:05:40Z", "type": "commit"}, {"oid": "1fa98f95ae8064570143ca7ba7582b25e7b58539", "url": "https://github.com/sleuthkit/autopsy/commit/1fa98f95ae8064570143ca7ba7582b25e7b58539", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T13:06:39Z", "type": "commit"}, {"oid": "37ed8b8f6724cf41f8dc6a264dbd6db9fa63afa2", "url": "https://github.com/sleuthkit/autopsy/commit/37ed8b8f6724cf41f8dc6a264dbd6db9fa63afa2", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T13:13:20Z", "type": "commit"}, {"oid": "df3f1ec2e81eaa68ddff0239765efd981d4c9e67", "url": "https://github.com/sleuthkit/autopsy/commit/df3f1ec2e81eaa68ddff0239765efd981d4c9e67", "message": "6032 translated file names in results view", "committedDate": "2020-03-19T16:10:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxMDEyNg==", "url": "https://github.com/sleuthkit/autopsy/pull/5722#discussion_r395310126", "bodyText": "This is the wrong substitution if translatedName is not null.", "author": "dannysmyda", "createdAt": "2020-03-19T20:46:55Z", "path": "Core/src/org/sleuthkit/autopsy/datamodel/TagNode.java", "diffHunk": "@@ -0,0 +1,128 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020-2020 Basis Technology Corp.\n+ * Contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.datamodel;\n+\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n+import org.openide.nodes.Children;\n+import org.openide.nodes.Sheet;\n+import org.openide.util.Lookup;\n+import org.openide.util.NbBundle;\n+import org.sleuthkit.autopsy.core.UserPreferences;\n+import org.sleuthkit.autopsy.datamodel.utils.FileNameTransTask;\n+import org.sleuthkit.autopsy.texttranslation.TextTranslationService;\n+import org.sleuthkit.datamodel.Content;\n+\n+/**\n+ * An abstract superclass for a node that represents a tag, uses the name of a\n+ * given Content object as its display name, and has a property sheet with an\n+ * original name property when machine translation is enabled.\n+ *\n+ * The translation of the Content name is done in a background thread. The\n+ * translated name is made the display name of the node and the untranslated\n+ * name is put into both the original name property and into the node's tooltip.\n+ *\n+ * TODO (Jira-6174): Consider modifying this class to be able to use it more broadly\n+ * within the Autopsy data model (i.e., AbstractNode suclasses). It's not really\n+ * specific to a tag node.\n+ */\n+@NbBundle.Messages({\n+    \"TagNode.propertySheet.origName=Original Name\",\n+    \"TagNode.propertySheet.origNameDisplayName=Original Name\"\n+})\n+abstract class TagNode extends DisplayableItemNode {\n+\n+    private final static String ORIG_NAME_PROP_NAME = Bundle.TagNode_propertySheet_origName();\n+    private final static String ORIG_NAME_PROP_DISPLAY_NAME = Bundle.TagNode_propertySheet_origNameDisplayName();\n+\n+    private final String originalName;\n+    private volatile String translatedName;\n+\n+    /**\n+     * An abstract superclass for a node that represents a tag, uses the name of\n+     * a given Content object as its display name, and has a property sheet with\n+     * an untranslated file name property when machine translation is enabled.\n+     *\n+     * @param lookup  The Lookup of the node.\n+     * @param content The Content to use for the node display name.\n+     */\n+    TagNode(Lookup lookup, Content content) {\n+        super(Children.LEAF, lookup);\n+        originalName = content.getName();\n+    }\n+\n+    @Override\n+    public boolean isLeafTypeNode() {\n+        return true;\n+    }\n+\n+    @Override\n+    abstract public String getItemType();\n+\n+    @Override\n+    abstract public <T> T accept(DisplayableItemNodeVisitor<T> visitor);\n+\n+    /**\n+     * Adds an original name property to the node's property sheet and submits\n+     * an original name translation task.\n+     *\n+     * The translation of the original name is done in a background thread. The\n+     * translated name is made the display name of the node and the untranslated\n+     * name is put into both the original name property and into the node's\n+     * tooltip.\n+     *\n+     * @param properties The node's property sheet.\n+     */\n+    protected void addOriginalNameProp(Sheet.Set properties) {\n+        if (TextTranslationService.getInstance().hasProvider() && UserPreferences.displayTranslatedFileNames()) {\n+            properties.put(new NodeProperty<>(\n+                    ORIG_NAME_PROP_NAME,\n+                    ORIG_NAME_PROP_DISPLAY_NAME,\n+                    \"\",\n+                    translatedName != null ? translatedName : \"\"));", "originalCommit": "df3f1ec2e81eaa68ddff0239765efd981d4c9e67", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY3NDA4MA==", "url": "https://github.com/sleuthkit/autopsy/pull/5722#discussion_r395674080", "bodyText": "Good catch, This problem appears in another place as well. Fix submitted, please review, @dannysmyda.", "author": "rcordovano", "createdAt": "2020-03-20T14:29:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxMDEyNg=="}], "type": "inlineReview"}, {"oid": "cc411113d01f756571c4fd161d72cf548dc30060", "url": "https://github.com/sleuthkit/autopsy/commit/cc411113d01f756571c4fd161d72cf548dc30060", "message": "Merge remote-tracking branch 'upstream/develop' into 6032-translated-file-name-columns-in-results-view", "committedDate": "2020-03-20T13:20:29Z", "type": "commit"}, {"oid": "39dc88814071414652f3ab7cec1915779ecc8e8b", "url": "https://github.com/sleuthkit/autopsy/commit/39dc88814071414652f3ab7cec1915779ecc8e8b", "message": "6032 fixes for review issues", "committedDate": "2020-03-20T14:14:47Z", "type": "commit"}]}