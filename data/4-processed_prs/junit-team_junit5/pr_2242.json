{"pr_number": 2242, "pr_title": "Reuse Launcher orchestration in EngineTestKit", "pr_createdAt": "2020-04-05T15:06:32Z", "pr_url": "https://github.com/junit-team/junit5/pull/2242", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg==", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404085752", "bodyText": "@marcphilipp Oops, looks like the code was not formatted properly.", "author": "jbduncan", "createdAt": "2020-04-06T13:22:38Z", "path": "junit-platform-launcher/src/main/java/org/junit/platform/launcher/core/EngineDiscoveryOrchestrator.java", "diffHunk": "@@ -0,0 +1,155 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * https://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junit.platform.launcher.core;\n+\n+import static java.util.stream.Collectors.joining;\n+import static org.apiguardian.api.API.Status.INTERNAL;\n+import static org.junit.platform.engine.Filter.composeFilters;\n+\n+import java.util.LinkedHashMap;\n+import java.util.LinkedList;\n+import java.util.List;\n+import java.util.Map;\n+import java.util.Optional;\n+\n+import org.apiguardian.api.API;\n+import org.junit.platform.commons.JUnitException;\n+import org.junit.platform.commons.logging.Logger;\n+import org.junit.platform.commons.logging.LoggerFactory;\n+import org.junit.platform.commons.util.BlacklistedExceptions;\n+import org.junit.platform.engine.Filter;\n+import org.junit.platform.engine.FilterResult;\n+import org.junit.platform.engine.TestDescriptor;\n+import org.junit.platform.engine.TestEngine;\n+import org.junit.platform.engine.UniqueId;\n+import org.junit.platform.launcher.EngineDiscoveryResult;\n+import org.junit.platform.launcher.LauncherDiscoveryListener;\n+import org.junit.platform.launcher.LauncherDiscoveryRequest;\n+import org.junit.platform.launcher.PostDiscoveryFilter;\n+\n+/**\n+ * @since 1.7\n+ */\n+@API(status = INTERNAL, since = \"1.7\", consumers = \"testkit\")\n+public class EngineDiscoveryOrchestrator {\n+\n+\tprivate static final Logger logger = LoggerFactory.getLogger(EngineDiscoveryOrchestrator.class);\n+\n+\tprivate final EngineDiscoveryResultValidator discoveryResultValidator = new EngineDiscoveryResultValidator();\n+\tprivate final Iterable<TestEngine> testEngines;\n+\n+\tpublic EngineDiscoveryOrchestrator(Iterable<TestEngine> testEngines) {\n+\t\tthis.testEngines = testEngines;\n+\t}\n+\n+\tpublic LauncherDiscoveryResult discover(LauncherDiscoveryRequest request, String phase) {\n+\t\tMap<TestEngine, TestDescriptor> testEngineDescriptors = new LinkedHashMap<>();\n+\n+\t\tfor (TestEngine testEngine : this.testEngines) {\n+\t\t\t// @formatter:off\n+            boolean engineIsExcluded = request.getEngineFilters().stream()\n+                    .map(engineFilter -> engineFilter.apply(testEngine))\n+                    .anyMatch(FilterResult::excluded);\n+            // @formatter:on", "originalCommit": "d2d28430bacdfdcd4536f7f838d608b79617a3ef", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDczNTQ4Nw==", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404735487", "bodyText": "Thanks, I hate it when IDEA does that. \ud83d\ude2c", "author": "marcphilipp", "createdAt": "2020-04-07T11:26:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDczNjcyNQ==", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404736725", "bodyText": "I hate // @formatter:on/off commented out directives too. \ud83d\ude01", "author": "sormuras", "createdAt": "2020-04-07T11:29:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDczNzMzNg==", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404737336", "bodyText": "Me too. :)", "author": "marcphilipp", "createdAt": "2020-04-07T11:30:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDczODM2NA==", "url": "https://github.com/junit-team/junit5/pull/2242#discussion_r404738364", "bodyText": "When is 2021?!", "author": "sormuras", "createdAt": "2020-04-07T11:32:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA4NTc1Mg=="}], "type": "inlineReview"}, {"oid": "a4d67351873ad73eae4e4b54e5773c779de1958d", "url": "https://github.com/junit-team/junit5/commit/a4d67351873ad73eae4e4b54e5773c779de1958d", "message": "Reuse Launcher orchestration in EngineTestKit", "committedDate": "2020-04-19T11:57:09Z", "type": "commit"}, {"oid": "ac6248c3bbf9edcb15c349390fbdf8c930480c2b", "url": "https://github.com/junit-team/junit5/commit/ac6248c3bbf9edcb15c349390fbdf8c930480c2b", "message": "Fix test", "committedDate": "2020-04-19T11:57:10Z", "type": "commit"}, {"oid": "e8856a6e91eb3f70259d7bee02c05ed46a9fb546", "url": "https://github.com/junit-team/junit5/commit/e8856a6e91eb3f70259d7bee02c05ed46a9fb546", "message": "Deprecate existing methods and introduce new ones", "committedDate": "2020-04-19T11:57:10Z", "type": "commit"}, {"oid": "10326806f956dae4f27486f948c8535dca589b1f", "url": "https://github.com/junit-team/junit5/commit/10326806f956dae4f27486f948c8535dca589b1f", "message": "Document changes in release notes", "committedDate": "2020-04-19T11:57:47Z", "type": "commit"}, {"oid": "259d6c1f6c0e423f1193b847180315438ac53c18", "url": "https://github.com/junit-team/junit5/commit/259d6c1f6c0e423f1193b847180315438ac53c18", "message": "Adjust docs", "committedDate": "2020-04-19T11:57:47Z", "type": "commit"}, {"oid": "fd4359a7299b046b6a69f44e9227eba8b53b4bf0", "url": "https://github.com/junit-team/junit5/commit/fd4359a7299b046b6a69f44e9227eba8b53b4bf0", "message": "Polishing", "committedDate": "2020-04-19T11:57:47Z", "type": "commit"}, {"oid": "20b87bb3563572edab49de302f0068bbdf4fe46a", "url": "https://github.com/junit-team/junit5/commit/20b87bb3563572edab49de302f0068bbdf4fe46a", "message": "Revert rename", "committedDate": "2020-04-19T11:57:47Z", "type": "commit"}, {"oid": "dd2c203a6e57cd2bbaed36f4897a270009b630a7", "url": "https://github.com/junit-team/junit5/commit/dd2c203a6e57cd2bbaed36f4897a270009b630a7", "message": "Polishing", "committedDate": "2020-04-19T11:57:47Z", "type": "commit"}, {"oid": "989f891951536b0a6ecdbc95856dade291bcf5cb", "url": "https://github.com/junit-team/junit5/commit/989f891951536b0a6ecdbc95856dade291bcf5cb", "message": "Fix build", "committedDate": "2020-04-19T11:57:48Z", "type": "commit"}, {"oid": "91d11b50bfa9ff1288894d5493459433ec5c26b7", "url": "https://github.com/junit-team/junit5/commit/91d11b50bfa9ff1288894d5493459433ec5c26b7", "message": "Spotless", "committedDate": "2020-04-19T11:57:48Z", "type": "commit"}, {"oid": "f147078e804d1b09b6a0a1cf4de93449f11a29ab", "url": "https://github.com/junit-team/junit5/commit/f147078e804d1b09b6a0a1cf4de93449f11a29ab", "message": "Fix test", "committedDate": "2020-04-19T11:57:48Z", "type": "commit"}, {"oid": "f147078e804d1b09b6a0a1cf4de93449f11a29ab", "url": "https://github.com/junit-team/junit5/commit/f147078e804d1b09b6a0a1cf4de93449f11a29ab", "message": "Fix test", "committedDate": "2020-04-19T11:57:48Z", "type": "forcePushed"}, {"oid": "297f7c823ac2d84608a925c135b890e6bebd46a7", "url": "https://github.com/junit-team/junit5/commit/297f7c823ac2d84608a925c135b890e6bebd46a7", "message": "Merge branch 'master' into issues/2109-launcher-orchestration-testkit", "committedDate": "2020-04-19T14:59:49Z", "type": "commit"}]}