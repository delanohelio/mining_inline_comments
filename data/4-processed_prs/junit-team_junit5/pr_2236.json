{"pr_number": 2236, "pr_title": "Move versions to gradle.properties", "pr_createdAt": "2020-04-03T11:40:53Z", "pr_url": "https://github.com/junit-team/junit5/pull/2236", "timeline": [{"oid": "67ba8eff203acadf7d7b79cea158bcd2be37a7db", "url": "https://github.com/junit-team/junit5/commit/67ba8eff203acadf7d7b79cea158bcd2be37a7db", "message": "Move versions to gradle.properties\n\nThis reduces Gradle script recompilation, and it enables to specify\ndependency versions from the command line.\n\nfixes #2234", "committedDate": "2020-04-03T12:09:45Z", "type": "commit"}, {"oid": "67ba8eff203acadf7d7b79cea158bcd2be37a7db", "url": "https://github.com/junit-team/junit5/commit/67ba8eff203acadf7d7b79cea158bcd2be37a7db", "message": "Move versions to gradle.properties\n\nThis reduces Gradle script recompilation, and it enables to specify\ndependency versions from the command line.\n\nfixes #2234", "committedDate": "2020-04-03T12:09:45Z", "type": "forcePushed"}, {"oid": "cb6215909f3990980ba65ac23795cd8e217d63df", "url": "https://github.com/junit-team/junit5/commit/cb6215909f3990980ba65ac23795cd8e217d63df", "message": ".v -> .version", "committedDate": "2020-04-03T15:10:53Z", "type": "commit"}, {"oid": "a335766140c8d1cad29c3b6ca33c7c6d87f03153", "url": "https://github.com/junit-team/junit5/commit/a335766140c8d1cad29c3b6ca33c7c6d87f03153", "message": "Factor ${\"junit4Min\".version} -> $junit4Min for better readability", "committedDate": "2020-04-03T15:18:02Z", "type": "commit"}, {"oid": "4a1e0f1b4e408c0026a642c63b251110a7c38fd9", "url": "https://github.com/junit-team/junit5/commit/4a1e0f1b4e408c0026a642c63b251110a7c38fd9", "message": "Use properties instead of String extension", "committedDate": "2020-04-03T19:40:11Z", "type": "commit"}, {"oid": "a35b8e6546102afabd9f0dc299f164b36e3e8fa5", "url": "https://github.com/junit-team/junit5/commit/a35b8e6546102afabd9f0dc299f164b36e3e8fa5", "message": "style", "committedDate": "2020-04-04T08:22:56Z", "type": "commit"}, {"oid": "96fae981a9c3abaabc92ef6e1ace153f5f017136", "url": "https://github.com/junit-team/junit5/commit/96fae981a9c3abaabc92ef6e1ace153f5f017136", "message": "style", "committedDate": "2020-04-04T08:28:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ0MzA0Nw==", "url": "https://github.com/junit-team/junit5/pull/2236#discussion_r403443047", "bodyText": "This will create this object every time this extension function is called. My version would only create it once.", "author": "marcphilipp", "createdAt": "2020-04-04T08:30:33Z", "path": "buildSrc/src/main/kotlin/ProjectExtensions.kt", "diffHunk": "@@ -1,14 +1,14 @@\n import org.gradle.api.Project\n import org.gradle.kotlin.dsl.extra\n+import org.gradle.kotlin.dsl.invoke\n \n val Project.javaModuleName: String\n     get() = \"org.\" + this.name.replace('-', '.')\n \n val Project.versions: Versions\n     get() {\n-        val extra = rootProject.extra\n-        if (!extra.has(\"versions\")) {\n-            extra.set(\"versions\", Versions(rootProject))\n+        val versions: Versions by rootProject.extra {", "originalCommit": "a35b8e6546102afabd9f0dc299f164b36e3e8fa5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3d78fb46a85186c215fcade793786b96e69b48de", "url": "https://github.com/junit-team/junit5/commit/3d78fb46a85186c215fcade793786b96e69b48de", "message": "Save 50 or so instances of Versions", "committedDate": "2020-04-04T08:48:26Z", "type": "commit"}, {"oid": "75e3f8b2721885c5ca99febcb673de8dd5fae12e", "url": "https://github.com/junit-team/junit5/commit/75e3f8b2721885c5ca99febcb673de8dd5fae12e", "message": "style", "committedDate": "2020-04-04T08:50:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ0OTAzNg==", "url": "https://github.com/junit-team/junit5/pull/2236#discussion_r403449036", "bodyText": "Nice! I wasn't aware setting the delegate would store it in extra properties. Now that I think about it that makes perfect sense. \ud83d\udc4d", "author": "marcphilipp", "createdAt": "2020-04-04T09:36:46Z", "path": "buildSrc/src/main/kotlin/ProjectExtensions.kt", "diffHunk": "@@ -1,4 +1,12 @@\n import org.gradle.api.Project\n+import org.gradle.kotlin.dsl.extra\n+import org.gradle.kotlin.dsl.provideDelegate\n \n val Project.javaModuleName: String\n     get() = \"org.\" + this.name.replace('-', '.')\n+\n+val Project.versions: Versions\n+    get() {\n+        var versions: Versions? by rootProject.extra\n+        return versions ?: Versions(rootProject).also { versions = it }", "originalCommit": "75e3f8b2721885c5ca99febcb673de8dd5fae12e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c9081318aa02db68c30a42edcab5a65350e1429", "url": "https://github.com/junit-team/junit5/commit/8c9081318aa02db68c30a42edcab5a65350e1429", "message": "Remove explicit version properties", "committedDate": "2020-04-04T09:49:17Z", "type": "commit"}, {"oid": "ed2ea0e132c5f53ba2750fd5647a6025494b46a3", "url": "https://github.com/junit-team/junit5/commit/ed2ea0e132c5f53ba2750fd5647a6025494b46a3", "message": "fixup! Remove explicit version properties", "committedDate": "2020-04-04T11:24:29Z", "type": "commit"}, {"oid": "fb01298c260a3b18e34ae17ae2f31bbe63b70b7f", "url": "https://github.com/junit-team/junit5/commit/fb01298c260a3b18e34ae17ae2f31bbe63b70b7f", "message": "Use properties for most commonly used versions", "committedDate": "2020-04-04T11:37:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ2MzMxOA==", "url": "https://github.com/junit-team/junit5/pull/2236#discussion_r403463318", "bodyText": "Shouldn't all 4 lines follow the versions[\"assertj\"] pattern?", "author": "sormuras", "createdAt": "2020-04-04T12:14:17Z", "path": "platform-tooling-support-tests/platform-tooling-support-tests.gradle.kts", "diffHunk": "@@ -69,10 +69,10 @@ tasks.test {\n \t\t// systemProperty(\"junit.jupiter.execution.parallel.enabled\", \"true\")\n \n \t\t// Pass version constants (declared in Versions.kt) to tests as system properties\n-\t\tsystemProperty(\"Versions.apiGuardian\", Versions.apiGuardian)\n-\t\tsystemProperty(\"Versions.assertJ\", Versions.assertJ)\n-\t\tsystemProperty(\"Versions.junit4\", Versions.junit4)\n-\t\tsystemProperty(\"Versions.ota4j\", Versions.ota4j)\n+\t\tsystemProperty(\"Versions.apiGuardian\", versions.apiguardian)\n+\t\tsystemProperty(\"Versions.assertJ\", versions[\"assertj\"])\n+\t\tsystemProperty(\"Versions.junit4\", versions.junit4)\n+\t\tsystemProperty(\"Versions.ota4j\", versions.opentest4j)", "originalCommit": "fb01298c260a3b18e34ae17ae2f31bbe63b70b7f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ2ODk5Nw==", "url": "https://github.com/junit-team/junit5/pull/2236#discussion_r403468997", "bodyText": "See rationale in #2236 (comment). But I can roll that last commit back if the rest of the team feels strongly about it.", "author": "marcphilipp", "createdAt": "2020-04-04T13:15:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ2MzMxOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ4NDgzOA==", "url": "https://github.com/junit-team/junit5/pull/2236#discussion_r403484838", "bodyText": "Understood. Let's keep them as they are for the time being.", "author": "sormuras", "createdAt": "2020-04-04T15:51:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzQ2MzMxOA=="}], "type": "inlineReview"}]}