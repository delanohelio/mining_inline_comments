{"pr_number": 8756, "pr_title": "Added search and reformated the workflow pending requests UI for admin dashboard", "pr_createdAt": "2020-06-15T21:33:56Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8756", "timeline": [{"oid": "22507442bc7620752ea4db7700a07835fa1e92a1", "url": "https://github.com/wso2/carbon-apimgt/commit/22507442bc7620752ea4db7700a07835fa1e92a1", "message": "added untracked files", "committedDate": "2020-06-11T17:47:58Z", "type": "commit"}, {"oid": "72b516a3c049e90d078e459f62c45e75a83f736b", "url": "https://github.com/wso2/carbon-apimgt/commit/72b516a3c049e90d078e459f62c45e75a83f736b", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-11T17:49:35Z", "type": "commit"}, {"oid": "cd105562e74a2e1673ad9c3520e474d95883d2df", "url": "https://github.com/wso2/carbon-apimgt/commit/cd105562e74a2e1673ad9c3520e474d95883d2df", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-15T19:25:40Z", "type": "commit"}, {"oid": "857a78ea0514dc97ec2d56135ea3eda6ec256360", "url": "https://github.com/wso2/carbon-apimgt/commit/857a78ea0514dc97ec2d56135ea3eda6ec256360", "message": "Updated the reformatted the workflow pending request UI for admin dashboard addded search for tables", "committedDate": "2020-06-15T20:21:50Z", "type": "commit"}, {"oid": "578c47c0ae04623b2700ed763f7c09a4fd43b9aa", "url": "https://github.com/wso2/carbon-apimgt/commit/578c47c0ae04623b2700ed763f7c09a4fd43b9aa", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-16T19:50:27Z", "type": "commit"}, {"oid": "da3055b2ca127d19fb88a80ab229ef3c0392b0b3", "url": "https://github.com/wso2/carbon-apimgt/commit/da3055b2ca127d19fb88a80ab229ef3c0392b0b3", "message": "updated test dbscripts", "committedDate": "2020-06-16T21:30:00Z", "type": "commit"}, {"oid": "3030f10662f418edf6dde17407bc1c3a6f711920", "url": "https://github.com/wso2/carbon-apimgt/commit/3030f10662f418edf6dde17407bc1c3a6f711920", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-17T07:26:46Z", "type": "commit"}, {"oid": "563b8a126afca95c26240d97d453eb3e353d8668", "url": "https://github.com/wso2/carbon-apimgt/commit/563b8a126afca95c26240d97d453eb3e353d8668", "message": "object destructuring in apicall()", "committedDate": "2020-06-17T07:31:36Z", "type": "commit"}, {"oid": "b226676508b4cff04320d2cb7062dee7ad80b0ee", "url": "https://github.com/wso2/carbon-apimgt/commit/b226676508b4cff04320d2cb7062dee7ad80b0ee", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-18T03:15:31Z", "type": "commit"}, {"oid": "27b2b41ac0954f7ccf01c49a35b89c6bebff5e91", "url": "https://github.com/wso2/carbon-apimgt/commit/27b2b41ac0954f7ccf01c49a35b89c6bebff5e91", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-18T22:08:17Z", "type": "commit"}, {"oid": "ee1992442022a8a9aa13081887f082ad87714a0a", "url": "https://github.com/wso2/carbon-apimgt/commit/ee1992442022a8a9aa13081887f082ad87714a0a", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-19T05:55:20Z", "type": "commit"}, {"oid": "62bb8811f0b48fd6ea9fe36032621e434e5dc36e", "url": "https://github.com/wso2/carbon-apimgt/commit/62bb8811f0b48fd6ea9fe36032621e434e5dc36e", "message": "Added debug logs and change description for workflow request rejection", "committedDate": "2020-06-19T05:59:41Z", "type": "commit"}, {"oid": "1c52924ba7f1ad04120cd713524ad3d54cc2383b", "url": "https://github.com/wso2/carbon-apimgt/commit/1c52924ba7f1ad04120cd713524ad3d54cc2383b", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-25T16:53:08Z", "type": "commit"}, {"oid": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "url": "https://github.com/wso2/carbon-apimgt/commit/1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "message": "Changes in ApplicationCreation.jsx and WorkflowConstants.java", "committedDate": "2020-06-25T21:37:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTE5OA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989198", "bodyText": "Shall we Internationalise the static message?", "author": "kavishkafernando", "createdAt": "2020-06-26T06:20:30Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -97,10 +91,22 @@ function ListLabels() {\n         return restApi\n             .workflowsGet('AM_API_STATE')\n             .then((result) => {\n-                const workflowlist = result.body.list;\n-                return (workflowlist);\n+                const workflowlist = result.body.list.map((obj) => {\n+                    return {\n+                        description: obj.description,\n+                        api: obj.properties.apiName + '-' + obj.properties.apiVersion,\n+                        action: obj.properties.action,\n+                        currentState: obj.properties.currentState,\n+                        apiProvider: obj.properties.currentState,\n+                        referenceId: obj.referenceId,\n+                        createdTime: obj.createdTime,\n+                        properties: obj.properties,\n+                    };\n+                });\n+                return workflowlist;\n             })\n             .catch((error) => {\n+                Alert.error('Unable to get workflow pending requests for API State Change', error.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMjkwMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446222903", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:35:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTE5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTQwNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989406", "bodyText": "Internationalize the static message", "author": "kavishkafernando", "createdAt": "2020-06-26T06:21:11Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -113,8 +119,8 @@ function ListLabels() {\n             setData(LocalData);\n         })\n             .catch((e) => {\n-                Alert.error('Unable to fetch data ' + e);\n-                console.error('Unable to fetch data ' + e);\n+                Alert.error('Unable to fetch data. ', e.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDExNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990116", "bodyText": "Why are we showing a static error and the error from backend as well?", "author": "kavishkafernando", "createdAt": "2020-06-26T06:23:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTQwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMjc3Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446222776", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:35:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTQwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTU2Mw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989563", "bodyText": "Internationalise these texts", "author": "kavishkafernando", "createdAt": "2020-06-26T06:21:44Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -123,10 +129,13 @@ function ListLabels() {\n     }, []);\n \n     const updateStatus = (referenceId, value) => {\n-        const body = {};\n-        body.status = value;\n-        body.attributes = {};\n-        body.description = 'Approve workflow request.';\n+        const body = { status: value, attributes: {}, description: '' };\n+        if (value === 'APPROVED') {\n+            body.description = 'Approve workflow request.';", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMjY3NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446222674", "bodyText": "the description is a value sent to the database. So didn't update as a static message.", "author": "SahanHerath", "createdAt": "2020-06-26T14:35:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTU2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTY0Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989646", "bodyText": "Internationalise static message", "author": "kavishkafernando", "createdAt": "2020-06-26T06:21:58Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/APIStateChange.jsx", "diffHunk": "@@ -141,7 +150,7 @@ function ListLabels() {\n             .catch((error) => {\n                 const { response } = error;\n                 if (response.body) {\n-                    response.body.description = 'Unable to complete API state change approve/reject process';\n+                    Alert.error('Unable to complete API state change approve/reject process. ', error.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMjE0Mw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446222143", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:34:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTY0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTc2MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989760", "bodyText": "Internationalise static message", "author": "kavishkafernando", "createdAt": "2020-06-26T06:22:23Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -102,10 +95,21 @@ function ListLabels() {\n         return restApi\n             .workflowsGet('AM_APPLICATION_CREATION')\n             .then((result) => {\n-                const workflowlist = result.body.list;\n-                return (workflowlist);\n+                const workflowlist = result.body.list.map((obj) => {\n+                    return {\n+                        description: obj.description,\n+                        applicationName: obj.properties.applicationName,\n+                        applicationTier: obj.properties.applicationTier,\n+                        userName: obj.properties.userName,\n+                        referenceId: obj.referenceId,\n+                        createdTime: obj.createdTime,\n+                        properties: obj.properties,\n+                    };\n+                });\n+                return workflowlist;\n             })\n             .catch((error) => {\n+                Alert.error('Unable to get workflow pending requests for Application Creation', error.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDM1OQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990359", "bodyText": "Why are we showing a static error and error from backend as well? Check these in other places as well", "author": "kavishkafernando", "createdAt": "2020-06-26T06:24:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTc2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMjAwNw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446222007", "bodyText": "fixed with 9c884f8. error from the backend is removed from alert.", "author": "SahanHerath", "createdAt": "2020-06-26T14:34:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTc2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTgzNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445989836", "bodyText": "Internationalise static message", "author": "kavishkafernando", "createdAt": "2020-06-26T06:22:37Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -118,8 +122,8 @@ function ListLabels() {\n             setData(LocalData);\n         })\n             .catch((e) => {\n-                Alert.error('Unable to fetch data ' + e);\n-                console.error('Unable to fetch data ' + e);\n+                Alert.error('Unable to fetch data. ', e.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTU3NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446221574", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:33:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk4OTgzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDQzNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990434", "bodyText": "same here", "author": "kavishkafernando", "createdAt": "2020-06-26T06:24:30Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -146,7 +153,7 @@ function ListLabels() {\n             .catch((error) => {\n                 const { response } = error;\n                 if (response.body) {\n-                    response.body.description = 'Unable to complete application creation approve/reject process';\n+                    Alert.error('Unable to complete application creation approve/reject process. ', error.message);", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTUwNw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446221507", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:33:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDQzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDUyMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990523", "bodyText": "Shall we remove commented code?", "author": "kavishkafernando", "createdAt": "2020-06-26T06:24:49Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -228,24 +227,29 @@ function ListLabels() {\n             }),\n             options: {\n                 sort: false,\n-                customBodyRender: (value, tableMeta) => {\n-                    const dataRow = data[tableMeta.rowIndex];\n-                    const { properties } = dataRow;\n-                    return (\n-                        <div>\n-                            {properties.applicationTier}\n-                        </div>\n-                    );\n-                },\n+                filter: true,\n             },\n         },\n         {\n-            name: 'creater',\n+            name: 'userName',\n             label: intl.formatMessage({\n-                id: 'Workflow.ApplicationCreation.table.header.Creater',\n+                id: 'Workflow.ApplicationCreation.table.header.userName',\n                 defaultMessage: 'Created by',\n             }),\n             options: {\n+                sort: false,\n+                /* customSort: (data1, colIndex, order) => {", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTM4OQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446221389", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:33:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDUyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDYxMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r445990611", "bodyText": "Remove extra line", "author": "kavishkafernando", "createdAt": "2020-06-26T06:25:03Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin/source/src/app/components/Workflow/ApplicationCreation.jsx", "diffHunk": "@@ -332,6 +334,7 @@ function ListLabels() {\n \n     const columns = [\n         ...columProps,\n+", "originalCommit": "1ac5d842d7569dad0ff260d231f2f0c2c2e6ee28", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjIyMTI3NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8756#discussion_r446221275", "bodyText": "fixed with 9c884f8", "author": "SahanHerath", "createdAt": "2020-06-26T14:32:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk5MDYxMQ=="}], "type": "inlineReview"}, {"oid": "eed3d4f0debaad839fcf6ba799444acc796bec02", "url": "https://github.com/wso2/carbon-apimgt/commit/eed3d4f0debaad839fcf6ba799444acc796bec02", "message": "Merge branch 'master' of https://github.com/wso2/carbon-apimgt", "committedDate": "2020-06-26T14:26:00Z", "type": "commit"}, {"oid": "9c884f83b4edd225595a5103e269b524c323ea8c", "url": "https://github.com/wso2/carbon-apimgt/commit/9c884f83b4edd225595a5103e269b524c323ea8c", "message": "updated static messages for errors and alerts", "committedDate": "2020-06-26T14:30:40Z", "type": "commit"}]}