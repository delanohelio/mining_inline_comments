{"pr_number": 8154, "pr_title": "Single Logout with OIDC Session Management methodology", "pr_createdAt": "2020-02-06T09:36:44Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8154", "timeline": [{"oid": "b2674795e0a00bac6d7a1f7f66b26396e4f156fe", "url": "https://github.com/wso2/carbon-apimgt/commit/b2674795e0a00bac6d7a1f7f66b26396e4f156fe", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-10T04:23:28Z", "type": "forcePushed"}, {"oid": "946ecfff0944296af9922c72154f23328641df15", "url": "https://github.com/wso2/carbon-apimgt/commit/946ecfff0944296af9922c72154f23328641df15", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-11T03:36:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MTk4NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r377781985", "bodyText": "Why we need this library? can't we use document.cookies directly", "author": "tmkasun", "createdAt": "2020-02-11T17:22:27Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/package.json", "diffHunk": "@@ -32,6 +32,7 @@\n         \"draftjs-to-html\": \"^0.8.4\",\n         \"file-loader\": \"^0.11.2\",\n         \"html-to-draftjs\": \"^1.4.0\",\n+        \"js-cookie\": \"^2.2.1\",", "originalCommit": "946ecfff0944296af9922c72154f23328641df15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAzNjg3MQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r378036871", "bodyText": "There is a method in ./Utils getCookie() method which return the relevant cookie by using document.cookies, but since it append the environment name to the given name. I'll create a separate method which returns the cookie and use that instead of above library", "author": "CrowleyRajapakse", "createdAt": "2020-02-12T04:35:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MTk4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA0MTQyMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r378041423", "bodyText": "removed the library and resolved the issue", "author": "CrowleyRajapakse", "createdAt": "2020-02-12T05:00:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MTk4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MjI4MQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r377782281", "bodyText": "Why we need a library for adding an iframe to react app?", "author": "tmkasun", "createdAt": "2020-02-11T17:22:57Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/package.json", "diffHunk": "@@ -52,6 +53,7 @@\n         \"react-dom\": \"^16.10.2\",\n         \"react-draft-wysiwyg\": \"^1.13.2\",\n         \"react-dropzone\": \"^v10.1.7\",\n+        \"react-iframe\": \"^1.8.0\",", "originalCommit": "946ecfff0944296af9922c72154f23328641df15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODAzNzYwMw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r378037603", "bodyText": "Otherwise we have to write a separate component to handle the iframe logic. This library seems to handle all that.", "author": "CrowleyRajapakse", "createdAt": "2020-02-12T04:39:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MjI4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2MzUxMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r378663511", "bodyText": "removed the react-iframe library", "author": "CrowleyRajapakse", "createdAt": "2020-02-13T05:53:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4MjI4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4NDYxNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r377784614", "bodyText": "I think these should be accessed via the User interface", "author": "tmkasun", "createdAt": "2020-02-11T17:26:49Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/ProtectedApp.jsx", "diffHunk": "@@ -63,8 +67,13 @@ export default class Protected extends Component {\n         super(props);\n         this.state = {\n             settings: null,\n+            clientId: Cookies.get(User.CONST.PUBLISHER_CLIENT_ID),", "originalCommit": "946ecfff0944296af9922c72154f23328641df15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc5ODQ1NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r377798454", "bodyText": "for example User.getClientID otherwise managing, especially clearing these cookie stores would be hard,", "author": "tmkasun", "createdAt": "2020-02-11T17:52:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4NDYxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODA0MDU1Mg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8154#discussion_r378040552", "bodyText": "These cookies are created in the login_callback.jag and stored indefinitely in the browser, CLIENT_ID cookie value doesn't change often but session_state cookie will be changed after every logout/login. So these cookies are managed by the login and logout process. I've now changed the retrieval of cookies as follows,\n  clientId: Utils.getCookieWithoutEnvironment(User.CONST.PUBLISHER_CLIENT_ID), sessionStateCookie:Utils.getCookieWithoutEnvironment(User.CONST.PUBLISHER_SESSION_STATE),", "author": "CrowleyRajapakse", "createdAt": "2020-02-12T04:55:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Nzc4NDYxNA=="}], "type": "inlineReview"}, {"oid": "9f7542d29bc43f820d64cfe66e75201eed2900cf", "url": "https://github.com/wso2/carbon-apimgt/commit/9f7542d29bc43f820d64cfe66e75201eed2900cf", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-12T04:52:06Z", "type": "forcePushed"}, {"oid": "4ad6fba24a2e84d87647210309eb9d77b257f7a8", "url": "https://github.com/wso2/carbon-apimgt/commit/4ad6fba24a2e84d87647210309eb9d77b257f7a8", "message": "Single Logout with session management methodology", "committedDate": "2020-02-13T03:45:47Z", "type": "commit"}, {"oid": "33409b444f97df6c96952c6884271871e5f4eb8e", "url": "https://github.com/wso2/carbon-apimgt/commit/33409b444f97df6c96952c6884271871e5f4eb8e", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-13T05:43:57Z", "type": "forcePushed"}, {"oid": "9651a9760f0bfb301f6c7d3a8adc5e6ecf0d6b2a", "url": "https://github.com/wso2/carbon-apimgt/commit/9651a9760f0bfb301f6c7d3a8adc5e6ecf0d6b2a", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-13T05:52:04Z", "type": "commit"}, {"oid": "9651a9760f0bfb301f6c7d3a8adc5e6ecf0d6b2a", "url": "https://github.com/wso2/carbon-apimgt/commit/9651a9760f0bfb301f6c7d3a8adc5e6ecf0d6b2a", "message": "resolve logout doesn't revoke user access token issue", "committedDate": "2020-02-13T05:52:04Z", "type": "forcePushed"}]}