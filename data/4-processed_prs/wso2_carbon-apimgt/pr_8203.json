{"pr_number": 8203, "pr_title": " Revamp Swagger Editor", "pr_createdAt": "2020-02-17T06:42:07Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8203", "timeline": [{"oid": "d90ee9f52b16fa4a1599c890c822d8b72dc94e8a", "url": "https://github.com/wso2/carbon-apimgt/commit/d90ee9f52b16fa4a1599c890c822d8b72dc94e8a", "message": "Update node packages.\n\n* Remove swagger-editor and install swagger-ui\n* Update prism-http version.", "committedDate": "2020-02-17T06:40:19Z", "type": "commit"}, {"oid": "78a2f9262fdd61e9502116a6686d2c30e624cf8e", "url": "https://github.com/wso2/carbon-apimgt/commit/78a2f9262fdd61e9502116a6686d2c30e624cf8e", "message": "Add new swagger editor implementation.\n\n* Remove the previously used swagger editor dependency.\n* Revamped the editor ui.", "committedDate": "2020-02-17T06:40:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUyNjk5Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8203#discussion_r380526996", "bodyText": "Why we need to do a force update here ?", "author": "tmkasun", "createdAt": "2020-02-18T08:45:05Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/APIDefinition/swaggerUI/PatchedSwaggerUIReact.jsx", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied. See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+import swaggerUIConstructor, { presets } from 'swagger-ui';\n+\n+/**\n+ *\n+ *\n+ * @export\n+ * @class SwaggerUI\n+ * @extends {React.Component}\n+ */\n+export default class PatchedSwaggerUI extends React.Component {\n+    constructor(props) {\n+        super(props);\n+        this.SwaggerUIComponent = null;\n+        this.system = null;\n+    }\n+\n+    /**\n+     *\n+     *\n+     * @memberof SwaggerUI\n+     */\n+    componentDidMount() {\n+        const ui = swaggerUIConstructor({\n+            spec: this.props.spec,\n+            url: this.props.url,\n+            defaultModelsExpandDepth: this.props.defaultModelsExpandDepth,\n+            presets: [presets.apis, ...this.props.presets],\n+            requestInterceptor: this.requestInterceptor,\n+            responseInterceptor: this.responseInterceptor,\n+            onComplete: this.onComplete,\n+            docExpansion: this.props.docExpansion,\n+            supportedSubmitMethods: [],\n+        });\n+\n+        this.system = ui;\n+        this.SwaggerUIComponent = ui.getComponent('App', 'root');\n+\n+        this.forceUpdate();", "originalCommit": "78a2f9262fdd61e9502116a6686d2c30e624cf8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwNTM2MQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8203#discussion_r380605361", "bodyText": "Otherwise, it will not render in the component is loaded for the first time. We have to edit the definition.\nWith forceUpdate(), it renders properly.", "author": "menakaj", "createdAt": "2020-02-18T11:08:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUyNjk5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwODI2NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8203#discussion_r380608264", "bodyText": "Can't we keep the definition in a state ?, I think we should avoid using forceUpdates. Which change cause a difference in forceUpdate rendered output here?", "author": "tmkasun", "createdAt": "2020-02-18T11:14:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDUyNjk5Ng=="}], "type": "inlineReview"}, {"oid": "e1c3ebe9334030c397e144b8c016b3ae3e178ac4", "url": "https://github.com/wso2/carbon-apimgt/commit/e1c3ebe9334030c397e144b8c016b3ae3e178ac4", "message": "Check the value of the endpoint before changing the state.", "committedDate": "2020-02-18T11:09:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwNjYzNw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8203#discussion_r380606637", "bodyText": "Why we disable this eslint rule ??", "author": "tmkasun", "createdAt": "2020-02-18T11:10:56Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/APIDefinition/swaggerUI/PatchedSwaggerUIReact.jsx", "diffHunk": "@@ -0,0 +1,107 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  WSO2 Inc. licenses this file to you under the Apache License,\n+ *  Version 2.0 (the \"License\"); you may not use this file except\n+ *  in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing,\n+ *  software distributed under the License is distributed on an\n+ *  \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ *  KIND, either express or implied. See the License for the\n+ *  specific language governing permissions and limitations\n+ *  under the License.\n+ */\n+\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+import swaggerUIConstructor, { presets } from 'swagger-ui';\n+\n+/**\n+ *\n+ *\n+ * @export\n+ * @class SwaggerUI\n+ * @extends {React.Component}\n+ */\n+export default class PatchedSwaggerUI extends React.Component {\n+    constructor(props) {\n+        super(props);\n+        this.SwaggerUIComponent = null;\n+        this.system = null;\n+    }\n+\n+    /**\n+     *\n+     *\n+     * @memberof SwaggerUI\n+     */\n+    componentDidMount() {\n+        const ui = swaggerUIConstructor({\n+            spec: this.props.spec,\n+            url: this.props.url,\n+            defaultModelsExpandDepth: this.props.defaultModelsExpandDepth,\n+            presets: [presets.apis, ...this.props.presets],\n+            requestInterceptor: this.requestInterceptor,\n+            responseInterceptor: this.responseInterceptor,\n+            onComplete: this.onComplete,\n+            docExpansion: this.props.docExpansion,\n+            supportedSubmitMethods: [],\n+        });\n+\n+        this.system = ui;\n+        this.SwaggerUIComponent = ui.getComponent('App', 'root');\n+\n+        this.forceUpdate();\n+    }\n+\n+    /**\n+     *\n+     *\n+     * @param {*} prevProps\n+     * @memberof SwaggerUI\n+     */\n+    // eslint-disable-next-line react/sort-comp", "originalCommit": "78a2f9262fdd61e9502116a6686d2c30e624cf8e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwODAzNg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8203#discussion_r380608036", "bodyText": "Fixed 8dd051b", "author": "menakaj", "createdAt": "2020-02-18T11:13:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYwNjYzNw=="}], "type": "inlineReview"}, {"oid": "8dd051b7bf584f7c602b34f568715832ac29002c", "url": "https://github.com/wso2/carbon-apimgt/commit/8dd051b7bf584f7c602b34f568715832ac29002c", "message": "Remove disabled eslint rule.", "committedDate": "2020-02-18T11:13:11Z", "type": "commit"}]}