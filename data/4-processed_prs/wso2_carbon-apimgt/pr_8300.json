{"pr_number": 8300, "pr_title": "Modified response of OAS/Swagger validation in API creation", "pr_createdAt": "2020-03-03T12:06:16Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8300", "timeline": [{"oid": "56cc4dc03f7226eb5e6ffde69fc8257222b95cb7", "url": "https://github.com/wso2/carbon-apimgt/commit/56cc4dc03f7226eb5e6ffde69fc8257222b95cb7", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL", "committedDate": "2020-03-03T11:44:40Z", "type": "commit"}, {"oid": "f91d5423c33c3e178ad441582dd623039b6fed9a", "url": "https://github.com/wso2/carbon-apimgt/commit/f91d5423c33c3e178ad441582dd623039b6fed9a", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL", "committedDate": "2020-03-03T11:44:40Z", "type": "commit"}, {"oid": "ddb9971bebeb4d576e0d556d58707138875cd7b6", "url": "https://github.com/wso2/carbon-apimgt/commit/ddb9971bebeb4d576e0d556d58707138875cd7b6", "message": "modified response of OAS/Swagger validation in API creation. To Use OAS/Swagger Servers/Host parameter to populate endpoint URL", "committedDate": "2020-03-03T11:56:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzU1NDgwMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r387554801", "bodyText": "This may cause null pointer exception, ArrayIndexOutofBound exception if the servers are not defined.\nNeed to check whether the openAPI.getServers() method for null.", "author": "menakaj", "createdAt": "2020-03-04T09:50:15Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -506,7 +507,8 @@ public APIDefinitionValidationResponse validateAPIDefinition(String apiDefinitio\n             OpenAPI openAPI = parseAttemptForV3.getOpenAPI();\n             io.swagger.v3.oas.models.info.Info info = openAPI.getInfo();\n             OASParserUtil.updateValidationResponseAsSuccess(validationResponse, apiDefinition, openAPI.getOpenapi(),\n-                    info.getTitle(), info.getVersion(), null, info.getDescription());\n+                    info.getTitle(), info.getVersion(), null, info.getDescription(),\n+                    openAPI.getServers().get(0).getUrl());", "originalCommit": "ddb9971bebeb4d576e0d556d58707138875cd7b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "41ae626b1d124549970b73844c4cf03699c98c62", "url": "https://github.com/wso2/carbon-apimgt/commit/41ae626b1d124549970b73844c4cf03699c98c62", "message": "Added condition to avoid possible error scenario - ArrayIndexOutofBounds", "committedDate": "2020-03-04T10:00:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzYyNjYzNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r387626634", "bodyText": "Shouldn't we check null and empty both? Below is also a valid one.\nservers:\n  []", "author": "malinthaprasan", "createdAt": "2020-03-04T12:12:02Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/definitions/OAS3Parser.java", "diffHunk": "@@ -506,7 +507,8 @@ public APIDefinitionValidationResponse validateAPIDefinition(String apiDefinitio\n             OpenAPI openAPI = parseAttemptForV3.getOpenAPI();\n             io.swagger.v3.oas.models.info.Info info = openAPI.getInfo();\n             OASParserUtil.updateValidationResponseAsSuccess(validationResponse, apiDefinition, openAPI.getOpenapi(),\n-                    info.getTitle(), info.getVersion(), null, info.getDescription());\n+                    info.getTitle(), info.getVersion(), null, info.getDescription(),\n+                    openAPI.getServers()==null ? null : openAPI.getServers().get(0).getUrl());", "originalCommit": "41ae626b1d124549970b73844c4cf03699c98c62", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a86233e8f248ff4097675b3c73bc6c154fff9a13", "url": "https://github.com/wso2/carbon-apimgt/commit/a86233e8f248ff4097675b3c73bc6c154fff9a13", "message": "handled empty input array", "committedDate": "2020-03-05T04:55:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NDgyMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r388674821", "bodyText": "Let's return all the endpoints from the REST API side and take one from the UI. It is better to have some sort of a way to select one of those endpoints or provide a different one in the UI.", "author": "malinthaprasan", "createdAt": "2020-03-06T01:55:13Z", "path": "components/apimgt/org.wso2.carbon.apimgt.rest.api.publisher.v1/src/main/resources/publisher-api.yaml", "diffHunk": "@@ -8879,6 +8879,9 @@ definitions:\n           openAPIVersion:\n             type: string\n             example: \"3.0.0\"\n+          endpoint:\n+            type: string\n+            example: \"https://localhost:9443/am/sample/pizzashack/v1/api/\"", "originalCommit": "a86233e8f248ff4097675b3c73bc6c154fff9a13", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDExNzkyNQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r410117925", "bodyText": "@isuruh15  Can you please have a look on the above suggestion?", "author": "tmkasun", "createdAt": "2020-04-17T09:52:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NDgyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjY1ODQxMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8300#discussion_r412658412", "bodyText": "resolved in commit 1817a80", "author": "isuruh15", "createdAt": "2020-04-22T04:21:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY3NDgyMQ=="}], "type": "inlineReview"}, {"oid": "1817a801e03cfb84af9c5dcf4833b2d66c48ff93", "url": "https://github.com/wso2/carbon-apimgt/commit/1817a801e03cfb84af9c5dcf4833b2d66c48ff93", "message": "added multiple servers to the response", "committedDate": "2020-03-06T11:41:10Z", "type": "commit"}]}