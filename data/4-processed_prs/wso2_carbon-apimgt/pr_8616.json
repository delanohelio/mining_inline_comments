{"pr_number": 8616, "pr_title": "Moving Blacklist policies to a new page", "pr_createdAt": "2020-06-01T09:36:43Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8616", "timeline": [{"oid": "a4765590c777a06fff32d7cb4906c280c601464d", "url": "https://github.com/wso2/carbon-apimgt/commit/a4765590c777a06fff32d7cb4906c280c601464d", "message": "Moving Blacklist policies to a new page", "committedDate": "2020-06-01T04:49:50Z", "type": "commit"}, {"oid": "c6cdd993eafad31f66b9c8b3363354d2c5282144", "url": "https://github.com/wso2/carbon-apimgt/commit/c6cdd993eafad31f66b9c8b3363354d2c5282144", "message": "Switch Blacklist policies to full page", "committedDate": "2020-06-01T09:31:43Z", "type": "commit"}, {"oid": "b149659284a8d1a5aecaccd61f1d9c645bae3fca", "url": "https://github.com/wso2/carbon-apimgt/commit/b149659284a8d1a5aecaccd61f1d9c645bae3fca", "message": "Remove commented import", "committedDate": "2020-06-01T09:46:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE0MTk1NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8616#discussion_r433141955", "bodyText": "I think we can set this state at the state initialization time\ni:e\nconst [editMode, setIsEditMode] = useState(policyId !== 'create');", "author": "tmkasun", "createdAt": "2020-06-01T09:50:48Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin_new/source/src/app/components/Throttling/Custom/AddEdit.jsx", "diffHunk": "@@ -100,8 +120,22 @@ function AddEdit(props) {\n     const [validationError, setValidationError] = useState([]);\n     const [editMode, setIsEditMode] = useState(false);\n     const restApi = new API();\n+    const { policyId } = props.match.params;\n \n     useEffect(() => {\n+        if (policyId !== 'create') {\n+            setIsEditMode(true);", "originalCommit": "b149659284a8d1a5aecaccd61f1d9c645bae3fca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE1NjgwOQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8616#discussion_r433156809", "bodyText": "Fixed with 6317b1b", "author": "kavishkafernando", "createdAt": "2020-06-01T10:26:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE0MTk1NQ=="}], "type": "inlineReview"}, {"oid": "6317b1b8dd9637f944977861b4eda0eaaf8b51a1", "url": "https://github.com/wso2/carbon-apimgt/commit/6317b1b8dd9637f944977861b4eda0eaaf8b51a1", "message": "set edit mode at initialization", "committedDate": "2020-06-01T10:25:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE2MDE1Nw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8616#discussion_r433160157", "bodyText": "dispatch(editState);\nThough this dispatch call does the job here, It's better to follow the action dispatching methodology which is described in Flux pattern.\nIn the Flux pattern Object that we pass into the dispatcher called an action, Typically there are two elements in an action type and payload, and we derive the next state by switching the executing by the action type and incoming event's payload.\nThis pattern can be seen in React documentation examples as well.\nShall we follow a similar pattern here as well?", "author": "tmkasun", "createdAt": "2020-06-01T10:34:53Z", "path": "features/apimgt/org.wso2.carbon.apimgt.admin.feature/src/main/resources/admin_new/source/src/app/components/Throttling/Custom/AddEdit.jsx", "diffHunk": "@@ -100,8 +120,22 @@ function AddEdit(props) {\n     const [validationError, setValidationError] = useState([]);\n     const [editMode, setIsEditMode] = useState(false);\n     const restApi = new API();\n+    const { policyId } = props.match.params;\n \n     useEffect(() => {\n+        if (policyId !== 'create') {\n+            setIsEditMode(true);\n+            restApi.customPolicyGet(policyId).then((result) => {\n+                const formattedSiddhiQuery = sqlFormatter.format(result.body.siddhiQuery);\n+                const editState = {\n+                    policyName: result.body.policyName,\n+                    description: result.body.description,\n+                    keyTemplate: result.body.keyTemplate,\n+                    siddhiQuery: formattedSiddhiQuery,\n+                };\n+                dispatch(editState);", "originalCommit": "b149659284a8d1a5aecaccd61f1d9c645bae3fca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE3NDI5NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8616#discussion_r433174295", "bodyText": "Fixed with 4e14418", "author": "kavishkafernando", "createdAt": "2020-06-01T11:09:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzE2MDE1Nw=="}], "type": "inlineReview"}, {"oid": "4e14418233d052f7ab7e4e3052cc6ec5a6541608", "url": "https://github.com/wso2/carbon-apimgt/commit/4e14418233d052f7ab7e4e3052cc6ec5a6541608", "message": "Fix reducer issue", "committedDate": "2020-06-01T11:08:40Z", "type": "commit"}]}