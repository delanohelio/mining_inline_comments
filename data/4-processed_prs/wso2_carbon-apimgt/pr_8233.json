{"pr_number": 8233, "pr_title": "Enable publishing capability when mutual SSL is selected as the only security scheme", "pr_createdAt": "2020-02-21T18:41:34Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8233", "timeline": [{"oid": "db4a307877f0c949895bc1eafb39d4065e7dca62", "url": "https://github.com/wso2/carbon-apimgt/commit/db4a307877f0c949895bc1eafb39d4065e7dca62", "message": "added info message to transports", "committedDate": "2020-02-21T08:58:02Z", "type": "commit"}, {"oid": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2", "url": "https://github.com/wso2/carbon-apimgt/commit/29b234ef0c38b4ca58994a1795b8825a8da8c7d2", "message": "enable publishing when mutual ssl is the only security scheme", "committedDate": "2020-02-21T18:22:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5MTY2NQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383091665", "bodyText": "Shall we take this value from apiSecurityConstants", "author": "tmkasun", "createdAt": "2020-02-24T05:37:04Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycleUpdate.jsx", "diffHunk": "@@ -194,7 +194,7 @@ class LifeCycleUpdate extends Component {\n                     displayName,\n                     disabled:\n                         api.endpointConfig == null\n-                        || api.policies.length === 0\n+                        || (api.policies.length === 0 && !api.securityScheme.includes('mutualssl_mandatory'))", "originalCommit": "29b234ef0c38b4ca58994a1795b8825a8da8c7d2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5NjE0OA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383096148", "bodyText": "Publish button should be disabled if the certificate is not provided as well if mutual SSL is enabled. We need to check for this condition.", "author": "kavishkafernando", "createdAt": "2020-02-24T06:05:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzA5MTY2NQ=="}], "type": "inlineReview"}, {"oid": "a8c0b7cbd112f95041fee811c0f7b815e5b306cd", "url": "https://github.com/wso2/carbon-apimgt/commit/a8c0b7cbd112f95041fee811c0f7b815e5b306cd", "message": "validated requirements for publish an API in Lifecycle tab", "committedDate": "2020-02-25T09:18:44Z", "type": "commit"}, {"oid": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "url": "https://github.com/wso2/carbon-apimgt/commit/84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "message": "removed expressions which are repeatedly evaluating and assigned to a single variable", "committedDate": "2020-02-25T09:46:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc2OTk0MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383769940", "bodyText": "Let's remove this extra line", "author": "kavishkafernando", "createdAt": "2020-02-25T09:52:33Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -30,6 +30,7 @@ import ApiContext from 'AppComponents/Apis/Details/components/ApiContext';\n import LifeCycleUpdate from './LifeCycleUpdate';\n import LifeCycleHistory from './LifeCycleHistory';\n \n+", "originalCommit": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDA3NA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770074", "bodyText": "Lets remove this extra line", "author": "kavishkafernando", "createdAt": "2020-02-25T09:52:49Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -84,6 +86,7 @@ class LifeCycle extends Component {\n         this.setState({ checkList });\n     };\n \n+", "originalCommit": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDQwNA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770404", "bodyText": "Let's remove this extra line", "author": "kavishkafernando", "createdAt": "2020-02-25T09:53:20Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -98,11 +101,14 @@ class LifeCycle extends Component {\n \n         const promisedLcHistory = this.api.getLcHistory(id);\n         // const promised_labels = this.api.labels();\n-        Promise.all([promisedAPI, promisedLcState, promisedLcHistory])\n+", "originalCommit": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mzc3MDUyMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r383770521", "bodyText": "Shall we remove this commented line if its not needed?", "author": "kavishkafernando", "createdAt": "2020-02-25T09:53:32Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycle.jsx", "diffHunk": "@@ -98,11 +101,14 @@ class LifeCycle extends Component {\n \n         const promisedLcHistory = this.api.getLcHistory(id);\n         // const promised_labels = this.api.labels();", "originalCommit": "84f39c9f319e0c32654f2df83ab68b0a0980a2d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a460f3391f1225645a1326798ab884c39ecd19dc", "url": "https://github.com/wso2/carbon-apimgt/commit/a460f3391f1225645a1326798ab884c39ecd19dc", "message": "removed unnecessary spaces and comments", "committedDate": "2020-02-25T10:57:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3NzgwMg==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384277802", "bodyText": "Shall we remove this extra line?", "author": "kavishkafernando", "createdAt": "2020-02-26T05:11:33Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/CheckboxLabels.jsx", "diffHunk": "@@ -120,22 +121,46 @@ export default function CheckboxLabels(props) {\n                                 <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n                             </Link>\n                         </Grid>\n-                        <Grid xs={12} className={classes.grid}>\n-                            {isTierAvailable ? (\n-                                <CheckIcon className={classes.iconTrue} />\n-                            ) : (\n-                                <CloseIcon className={classes.iconFalse} />\n+\n+                        <>\n+                            {isAppLayerSecurityMandatory && (\n+                                <Grid xs={12} className={classes.grid}>\n+                                    {isBusinessPlanAvailable ? (\n+                                        <CheckIcon className={classes.iconTrue} />\n+                                    ) : (\n+                                        <CloseIcon className={classes.iconFalse} />\n+                                    )}\n+                                    <Typography>\n+                                        <FormattedMessage\n+                                            id='Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected'\n+                                            defaultMessage='Business Plan(s) selected'\n+                                        />\n+                                    </Typography>\n+                                    <Link to={'/apis/' + api.id + '/subscriptions'}>\n+                                        <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n+                                    </Link>\n+                                </Grid>\n                             )}\n-                            <Typography>\n-                                <FormattedMessage\n-                                    id='Apis.Details.LifeCycle.CheckboxLabels.business.plans.selected'\n-                                    defaultMessage='Business Plan(s) selected'\n-                                />\n-                            </Typography>\n-                            <Link to={'/apis/' + api.id + '/subscriptions'}>\n-                                <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n-                            </Link>\n-                        </Grid>\n+                            {isMutualSSLEnabled && (\n+                                <Grid xs={12} className={classes.grid}>\n+                                    {isCertAvailable ? (\n+                                        <CheckIcon className={classes.iconTrue} />\n+                                    ) : (\n+                                        <CloseIcon className={classes.iconFalse} />\n+                                    )}\n+                                    <Typography>\n+                                        <FormattedMessage\n+                                            id='Apis.Details.LifeCycle.CheckboxLabels.cert.provided'\n+                                            defaultMessage='Certificate provided'\n+                                        />\n+                                    </Typography>\n+                                    <Link to={'/apis/' + api.id + '/runtime-configuration'}>\n+                                        <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n+                                    </Link>\n+                                </Grid>\n+                            ) }\n+", "originalCommit": "a460f3391f1225645a1326798ab884c39ecd19dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3Nzk0MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384277940", "bodyText": "Shall we remove this extra line?", "author": "kavishkafernando", "createdAt": "2020-02-26T05:12:09Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/CheckboxLabels.jsx", "diffHunk": "@@ -120,22 +121,46 @@ export default function CheckboxLabels(props) {\n                                 <LaunchIcon style={{ marginLeft: '2px' }} color='primary' fontSize='small' />\n                             </Link>\n                         </Grid>\n-                        <Grid xs={12} className={classes.grid}>\n-                            {isTierAvailable ? (\n-                                <CheckIcon className={classes.iconTrue} />\n-                            ) : (\n-                                <CloseIcon className={classes.iconFalse} />\n+", "originalCommit": "a460f3391f1225645a1326798ab884c39ecd19dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3ODEzMQ==", "url": "https://github.com/wso2/carbon-apimgt/pull/8233#discussion_r384278131", "bodyText": "Remove extra line", "author": "kavishkafernando", "createdAt": "2020-02-26T05:13:12Z", "path": "features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/LifeCycle/LifeCycleUpdate.jsx", "diffHunk": "@@ -152,13 +154,14 @@ class LifeCycleUpdate extends Component {\n         this.updateLCStateOfAPI(apiUUID, action);\n     }\n \n+", "originalCommit": "a460f3391f1225645a1326798ab884c39ecd19dc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a", "url": "https://github.com/wso2/carbon-apimgt/commit/5a85ae45c82e41e3b6aee5e55ab6b1f90daa160a", "message": "removed extra newlines", "committedDate": "2020-02-26T05:45:33Z", "type": "commit"}]}