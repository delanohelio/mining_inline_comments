{"pr_number": 8835, "pr_title": "Refactor Configuration reads according to eventhub", "pr_createdAt": "2020-06-25T06:31:18Z", "pr_url": "https://github.com/wso2/carbon-apimgt/pull/8835", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0MjAyOA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8835#discussion_r445342028", "bodyText": "TrafficManager or EventHub?", "author": "isharac", "createdAt": "2020-06-25T06:49:46Z", "path": "components/apimgt/org.wso2.carbon.apimgt.impl/src/main/java/org/wso2/carbon/apimgt/impl/APIProviderImpl.java", "diffHunk": "@@ -6851,7 +6852,7 @@ private void publishKeyTemplateEvent(String templateValue, String state) {\n \n \n         if (throttleProperties.getDataPublisher() != null && throttleProperties.getDataPublisher().isEnabled()) {\n-            APIUtil.publishEvent(APIConstants.BLOCKING_EVENT_PUBLISHER, Collections.EMPTY_MAP, keyTemplateMessage);\n+            APIUtil.publishEventToTrafficManager(Collections.EMPTY_MAP, keyTemplateMessage);", "originalCommit": "834dd02fa8b8acddff42e8b018f35c6cb29e8677", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0OTI2Ng==", "url": "https://github.com/wso2/carbon-apimgt/pull/8835#discussion_r445349266", "bodyText": "this is correct", "author": "tharindu1st", "createdAt": "2020-06-25T07:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0MjAyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0Njg0MA==", "url": "https://github.com/wso2/carbon-apimgt/pull/8835#discussion_r445346840", "bodyText": "old license header", "author": "isharac", "createdAt": "2020-06-25T07:01:40Z", "path": "features/apimgt/org.wso2.carbon.apimgt.internal.service.feature/pom.xml", "diffHunk": "@@ -0,0 +1,163 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+ ~ Copyright (c) 2010-2011, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "834dd02fa8b8acddff42e8b018f35c6cb29e8677", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0ODY2Mw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8835#discussion_r445348663", "bodyText": "shouldn't this be copied to web apps?", "author": "isharac", "createdAt": "2020-06-25T07:06:01Z", "path": "features/apimgt/org.wso2.carbon.apimgt.internal.service.feature/pom.xml", "diffHunk": "@@ -0,0 +1,163 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+ ~ Copyright (c) 2010-2011, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ ~\n+ ~ Licensed under the Apache License, Version 2.0 (the \"License\");\n+ ~ you may not use this file except in compliance with the License.\n+ ~ You may obtain a copy of the License at\n+ ~\n+ ~      http://www.apache.org/licenses/LICENSE-2.0\n+ ~\n+ ~ Unless required by applicable law or agreed to in writing, software\n+ ~ distributed under the License is distributed on an \"AS IS\" BASIS,\n+ ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ ~ See the License for the specific language governing permissions and\n+ ~ limitations under the License.\n+-->\n+\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\">\n+\n+    <parent>\n+        <groupId>org.wso2.carbon.apimgt</groupId>\n+        <artifactId>apimgt-feature</artifactId>\n+        <version>6.7.31-SNAPSHOT</version>\n+        <relativePath>../pom.xml</relativePath>\n+    </parent>\n+\n+    <modelVersion>4.0.0</modelVersion>\n+    <artifactId>org.wso2.carbon.apimgt.internal.service.feature</artifactId>\n+    <packaging>pom</packaging>\n+    <name>WSO2 Carbon - Api management Internal Data Service Feature</name>\n+    <url>http://wso2.org</url>\n+\n+    <description>\n+        This feature contains Internal Data Service required to Retrieve Events.\n+    </description>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>org.wso2.carbon.apimgt</groupId>\n+            <artifactId>org.wso2.carbon.apimgt.api</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.apimgt</groupId>\n+            <artifactId>org.wso2.carbon.apimgt.impl</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.wso2.carbon.apimgt</groupId>\n+            <artifactId>org.wso2.carbon.apimgt.internal.service</artifactId>\n+            <type>war</type>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.wso2.uri.template</groupId>\n+            <artifactId>wso2-uri-templates</artifactId>\n+        </dependency>\n+        <dependency>\n+            <groupId>commons-codec</groupId>\n+            <artifactId>commons-codec</artifactId>\n+        </dependency>\n+    </dependencies>\n+\n+    <build>\n+        <plugins>\n+            <plugin>\n+                <artifactId>maven-resources-plugin</artifactId>\n+                <executions>\n+                    <execution>\n+                        <id>copy-resources</id>\n+                        <!--phase>generate-resources</phase-->\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>copy-resources</goal>\n+                        </goals>\n+                        <configuration>\n+                            <outputDirectory>src/main/resources</outputDirectory>\n+                            <resources>\n+                                <resource>\n+                                    <directory>resources</directory>\n+                                    <includes>\n+                                        <include>p2.inf</include>\n+                                    </includes>\n+                                </resource>\n+                            </resources>\n+                        </configuration>\n+                    </execution>\n+                </executions>\n+            </plugin>\n+            <plugin>\n+                <groupId>org.apache.maven.plugins</groupId>\n+                <artifactId>maven-dependency-plugin</artifactId>\n+                <version>2.10</version>\n+                <executions>\n+                    <execution>\n+                        <id>copy</id>\n+                        <phase>package</phase>\n+                        <goals>\n+                            <goal>copy</goal>\n+                        </goals>\n+                        <configuration>\n+                            <artifactItems>\n+                                <artifactItem>\n+                                    <groupId>org.wso2.carbon.apimgt</groupId>\n+                                    <artifactId>org.wso2.carbon.apimgt.internal.service</artifactId>\n+                                    <overWrite>true</overWrite>\n+                                    <type>war</type>\n+                                    <outputDirectory>${basedir}/src/main/resources/</outputDirectory>\n+                                    <destFileName>internal#data#v1.war</destFileName>\n+                                </artifactItem>\n+                            </artifactItems>\n+                            <outputDirectory>${project.build.directory}/external/libs</outputDirectory>", "originalCommit": "834dd02fa8b8acddff42e8b018f35c6cb29e8677", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae8635513bfc5f023f3131558d888094db97e81e", "url": "https://github.com/wso2/carbon-apimgt/commit/ae8635513bfc5f023f3131558d888094db97e81e", "message": "refactor code to align jms listenrr", "committedDate": "2020-06-25T12:19:04Z", "type": "forcePushed"}, {"oid": "3b99a6e291f254410f23662d513021642b958340", "url": "https://github.com/wso2/carbon-apimgt/commit/3b99a6e291f254410f23662d513021642b958340", "message": "refactor code to align jms listenrr", "committedDate": "2020-06-25T12:20:03Z", "type": "forcePushed"}, {"oid": "32441f20b0ffd5dc7516f829550ed24bb993738c", "url": "https://github.com/wso2/carbon-apimgt/commit/32441f20b0ffd5dc7516f829550ed24bb993738c", "message": "refactor code to align jms listenrr", "committedDate": "2020-06-25T16:34:52Z", "type": "forcePushed"}, {"oid": "cbdaabdb10e1f8cedbe7cdd6453605c51cd10ce1", "url": "https://github.com/wso2/carbon-apimgt/commit/cbdaabdb10e1f8cedbe7cdd6453605c51cd10ce1", "message": "refactor code to align jms listenrr", "committedDate": "2020-06-26T05:17:27Z", "type": "forcePushed"}, {"oid": "507564a1e6a00d9735b632ad825912ff064c7c9c", "url": "https://github.com/wso2/carbon-apimgt/commit/507564a1e6a00d9735b632ad825912ff064c7c9c", "message": "refactor configuration reads according to eventhub", "committedDate": "2020-06-26T07:05:03Z", "type": "commit"}, {"oid": "3ac84e96731f74a5277e429dd7db76b62db9c27d", "url": "https://github.com/wso2/carbon-apimgt/commit/3ac84e96731f74a5277e429dd7db76b62db9c27d", "message": "refactor apikey Revoke service to impl", "committedDate": "2020-06-26T07:05:03Z", "type": "commit"}, {"oid": "9a4445d244f7d4c9df7f2d6c807135d993b5b3ec", "url": "https://github.com/wso2/carbon-apimgt/commit/9a4445d244f7d4c9df7f2d6c807135d993b5b3ec", "message": "refactor code to align jms listenrr", "committedDate": "2020-06-26T07:06:32Z", "type": "forcePushed"}, {"oid": "c40154816c0069a52d76747a90b9699073eaa4eb", "url": "https://github.com/wso2/carbon-apimgt/commit/c40154816c0069a52d76747a90b9699073eaa4eb", "message": "fix profile issues", "committedDate": "2020-06-26T08:29:12Z", "type": "commit"}, {"oid": "c40154816c0069a52d76747a90b9699073eaa4eb", "url": "https://github.com/wso2/carbon-apimgt/commit/c40154816c0069a52d76747a90b9699073eaa4eb", "message": "fix profile issues", "committedDate": "2020-06-26T08:29:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjEwNzc3Mw==", "url": "https://github.com/wso2/carbon-apimgt/pull/8835#discussion_r446107773", "bodyText": "we don't need this comment now", "author": "isharac", "createdAt": "2020-06-26T10:40:56Z", "path": "components/apimgt/org.wso2.carbon.apimgt.gateway/src/main/java/org/wso2/carbon/apimgt/gateway/jwt/RevokedJWTTokensRetriever.java", "diffHunk": "@@ -62,13 +63,10 @@ public void run() {\n \n         try {\n             // The resource resides in the throttle web app. Hence reading throttle configs", "originalCommit": "c40154816c0069a52d76747a90b9699073eaa4eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}