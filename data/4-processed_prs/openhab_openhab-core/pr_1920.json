{"pr_number": 1920, "pr_title": "increase the rule refresher delay", "pr_createdAt": "2020-12-12T21:34:34Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1920", "timeline": [{"oid": "da33cc44a1e17af1d0de31dcaa52bf4a57058b21", "url": "https://github.com/openhab/openhab-core/commit/da33cc44a1e17af1d0de31dcaa52bf4a57058b21", "message": "increase the rule refresher delay\n\nSigned-off-by: Kai Kreuzer <kai@openhab.org>", "committedDate": "2020-12-12T21:30:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgwNDUzMQ==", "url": "https://github.com/openhab/openhab-core/pull/1920#discussion_r541804531", "bodyText": "Can it be changed such that it only uses this during startup? Once you start making changes to your instance I think it will be very annoying having to wait 30 seconds each time.", "author": "wborn", "createdAt": "2020-12-12T23:49:42Z", "path": "bundles/org.openhab.core.model.rule/src/org/openhab/core/model/rule/jvmmodel/RulesRefresher.java", "diffHunk": "@@ -56,7 +56,7 @@\n public class RulesRefresher implements ReadyTracker {\n \n     // delay in seconds before rule resources are refreshed after items or services have changed\n-    private static final long REFRESH_DELAY = 5;\n+    private static final long REFRESH_DELAY = 30;", "originalCommit": "da33cc44a1e17af1d0de31dcaa52bf4a57058b21", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg5MDE1OA==", "url": "https://github.com/openhab/openhab-core/pull/1920#discussion_r541890158", "bodyText": "I was thinking about that as well, but I then really wondered what exactly would be the (annoying) use cases that would require a faster refresh. Note that the rule refresher only kicks in upon changes in items/things/addons to make sure that references in rules are correctly resolved.\nIf people work on rules, those changes are immediately reloaded upon saving the rule, so there is no delay.\nIf they add new items&things (after startup), it is likely that they do not reference those within the rules yet and will rather go and edit the rules later on (for which there won't be a delay).\nSo only if they first created rules with references to stuff that isn't yet defined/installed on their system, the 30 sec delay kicks in and I'd think this should be acceptable, especially when helping on the general startup behavior.", "author": "kaikreuzer", "createdAt": "2020-12-13T09:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgwNDUzMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTg5MTg1MA==", "url": "https://github.com/openhab/openhab-core/pull/1920#discussion_r541891850", "bodyText": "Thanks for the explanation! I agree that if it works the way you described it shouldn't be too annoying. Let's then merge and test it.", "author": "wborn", "createdAt": "2020-12-13T10:05:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTgwNDUzMQ=="}], "type": "inlineReview"}]}