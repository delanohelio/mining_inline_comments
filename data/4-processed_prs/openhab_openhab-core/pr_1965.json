{"pr_number": 1965, "pr_title": "[transport.modbus] Added support for RTU encoding over TCP", "pr_createdAt": "2020-12-19T19:10:10Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1965", "timeline": [{"oid": "af7b00ef30e282f996f54d6a1bcffbad8feeae07", "url": "https://github.com/openhab/openhab-core/commit/af7b00ef30e282f996f54d6a1bcffbad8feeae07", "message": "[modbus] add support for rtu encoding over tcp\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-17T14:40:57Z", "type": "commit"}, {"oid": "ee1059e6dfd21e3894a9b46e0f82972ca828100b", "url": "https://github.com/openhab/openhab-core/commit/ee1059e6dfd21e3894a9b46e0f82972ca828100b", "message": "[modbus] typo\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-17T15:26:00Z", "type": "commit"}, {"oid": "efdbed9fd54c6a44bf7003260d5e687582b0ee74", "url": "https://github.com/openhab/openhab-core/commit/efdbed9fd54c6a44bf7003260d5e687582b0ee74", "message": "[modbus] pom\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-18T19:03:08Z", "type": "commit"}, {"oid": "3b455eca7649a377e871645d7410e03633b6150e", "url": "https://github.com/openhab/openhab-core/commit/3b455eca7649a377e871645d7410e03633b6150e", "message": "[modbus] support rtuEncoded\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-18T19:14:23Z", "type": "commit"}, {"oid": "66c9e3a252858ec21621e39d61a5a712500b4d8f", "url": "https://github.com/openhab/openhab-core/commit/66c9e3a252858ec21621e39d61a5a712500b4d8f", "message": "[modbus] revert EndPointPoolConfiguration\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-19T11:32:40Z", "type": "commit"}, {"oid": "b8a17705ed84761f3c414ced7c689ab1362f7393", "url": "https://github.com/openhab/openhab-core/commit/b8a17705ed84761f3c414ced7c689ab1362f7393", "message": "[modbus] add test case\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-19T11:33:07Z", "type": "commit"}, {"oid": "18ae058ca5bb3bff99a7b0b0ea6ac74e15e66355", "url": "https://github.com/openhab/openhab-core/commit/18ae058ca5bb3bff99a7b0b0ea6ac74e15e66355", "message": "[modbus] test RTU encoding over TCP on specific live device\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-19T14:40:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI4NjQzOA==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546286438", "bodyText": "I suggest removing this class as it has been effectively disabled and cannot be easily run without real device.", "author": "ssalonen", "createdAt": "2020-12-19T21:42:11Z", "path": "bundles/org.openhab.core.io.transport.modbus/src/test/java/org/openhab/core/io/transport/modbus/test/RtuOverTcpTest.java", "diffHunk": "@@ -0,0 +1,93 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.core.io.transport.modbus.test;\n+\n+import static org.hamcrest.CoreMatchers.*;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+import java.util.Optional;\n+import java.util.concurrent.CountDownLatch;\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.concurrent.atomic.AtomicReference;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.junit.jupiter.api.Test;\n+import org.openhab.core.io.transport.modbus.ModbusCommunicationInterface;\n+import org.openhab.core.io.transport.modbus.ModbusReadFunctionCode;\n+import org.openhab.core.io.transport.modbus.ModbusReadRequestBlueprint;\n+import org.openhab.core.io.transport.modbus.ModbusRegisterArray;\n+import org.openhab.core.io.transport.modbus.endpoint.ModbusTCPSlaveEndpoint;\n+\n+/**\n+ * @author Andrew Fiddian-Green - Initial contribution\n+ */\n+@NonNullByDefault\n+class RtuOverTcpTest extends IntegrationTestSupport {", "originalCommit": "18ae058ca5bb3bff99a7b0b0ea6ac74e15e66355", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM1NzU3OQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546357579", "bodyText": "Ok. Done.", "author": "andrewfg", "createdAt": "2020-12-20T10:37:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI4NjQzOA=="}], "type": "inlineReview"}, {"oid": "3e1877361af48ddcc321895d007fa7b12a5f225c", "url": "https://github.com/openhab/openhab-core/commit/3e1877361af48ddcc321895d007fa7b12a5f225c", "message": "[modbus] remove device dependent test case\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-20T10:08:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546380415", "bodyText": "You want to delay this PR and release jamod first.", "author": "ssalonen", "createdAt": "2020-12-20T13:55:43Z", "path": "bundles/org.openhab.core.io.transport.modbus/pom.xml", "diffHunk": "@@ -35,7 +35,7 @@\n     <dependency>\n       <groupId>net.wimpi</groupId>\n       <artifactId>jamod</artifactId>\n-      <version>1.2.4.OH</version>\n+      <version>1.2.5.OH-SNAPSHOT</version>", "originalCommit": "3e1877361af48ddcc321895d007fa7b12a5f225c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5NTczMQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546395731", "bodyText": "You want to delay this PR and release jamod first.\n\nHmm. It is actually a rather complicated process..\n\nthe old core transport code will not build with the new jamod version jar\nthe new core transport code will not build with the old jamod version jar\nditto both ways for the new/old binding code with the new/old core transport code\n\nThe conclusions are..\n\nThe three PR's must be released in the same release cycle (say 3.0.1)\nThe build sequence is 1) build new jamod, 2) build new transport, and 3) build new binding.\nPersonally I don't know how to handle this in Jenkins validation checks, or publishing it in JFrog ;) ??\nThe POM file names must be synchronized all the way through (i.e. remove the 'SNAPSHOT' tags).", "author": "andrewfg", "createdAt": "2020-12-20T16:02:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5ODE0NQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546398145", "bodyText": "When jamod pr is accepted, a new jamod release can be done\nThen this PR should refer to that new jamod version", "author": "ssalonen", "createdAt": "2020-12-20T16:22:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM5OTc2NQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546399765", "bodyText": "Correct. I am assuming the maintainers will read these comments. :)", "author": "andrewfg", "createdAt": "2020-12-20T16:36:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMTAyMQ==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546411021", "bodyText": "PS do you have any preference concerning the new version number? 1.2.5 / 1.3.0 / or even 3.0.0 ??", "author": "andrewfg", "createdAt": "2020-12-20T18:17:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxMzA0Ng==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546413046", "bodyText": "No preference really. I guess you could consider it major feature since the API is different with the new parameter?", "author": "ssalonen", "createdAt": "2020-12-20T18:36:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjQxNDIwNg==", "url": "https://github.com/openhab/openhab-core/pull/1965#discussion_r546414206", "bodyText": "Yes I was thinking of 1.3.0 too, as it is more than just a bug fix. I will modify the POMs..", "author": "andrewfg", "createdAt": "2020-12-20T18:48:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjM4MDQxNQ=="}], "type": "inlineReview"}, {"oid": "f55e6e9639cb50168acf320510c41a24e1156ed0", "url": "https://github.com/openhab/openhab-core/commit/f55e6e9639cb50168acf320510c41a24e1156ed0", "message": "[modbus] final version number in pom file\n\nSigned-off-by: Andrew Fiddian-Green <software@whitebear.ch>", "committedDate": "2020-12-20T19:04:46Z", "type": "commit"}]}