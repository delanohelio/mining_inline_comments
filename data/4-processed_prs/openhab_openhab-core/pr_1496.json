{"pr_number": 1496, "pr_title": "Swagger: support injection of ReaderListener, add OAuth2 annotations", "pr_createdAt": "2020-05-24T08:03:51Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1496", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYxODAwMw==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r429618003", "bodyText": "Do you know if it also compiles with the older version? If that's the case it's better to use older versions here. That way a broader version range is generated by Bnd and the framework will be more compatible with older Swagger versions. That way you don't force framework users to upgrade dependencies or use multiple versions, i.e. it could result in similar issues as we often have with guava and the org.reflections artifact.", "author": "wborn", "createdAt": "2020-05-24T09:41:10Z", "path": "bom/compile/pom.xml", "diffHunk": "@@ -238,13 +238,14 @@\n     <dependency>\n       <groupId>io.swagger</groupId>\n       <artifactId>swagger-annotations</artifactId>\n-      <version>1.5.5</version>\n+      <version>1.6.1</version>", "originalCommit": "4b33ec06118a565258ca1c77ab191b48e11cffb2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMzA5Ng==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r429623096", "bodyText": "Ah, thanks, it compiled fine before, the version change was done at the last minute (what I thought was) some regular housekeeping, I'll change it back then.", "author": "ghys", "createdAt": "2020-05-24T10:44:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYxODAwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMzQyNQ==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r429623425", "bodyText": "I'm not too happy with openhab-core-io-rest-auth depending on openhab.tp-swagger-jaxrs after all, if there's a better suggestion (make it optional? bring the ReaderListener back to org.openhab.core.io.rest.swagger? ...) I'll gladly take it.", "author": "ghys", "createdAt": "2020-05-24T10:49:18Z", "path": "features/karaf/openhab-core/src/main/feature/feature.xml", "diffHunk": "@@ -155,7 +155,9 @@\n \t\t<feature>openhab-core-auth-jaas</feature>\n \t\t<bundle>mvn:org.openhab.core.bundles/org.openhab.core.io.rest.auth/${project.version}</bundle>\n \t\t<requirement>openhab.tp;filter:=\"(feature=jose4j)\"</requirement>\n+\t\t<requirement>openhab.tp;filter:=\"(feature=swagger-jaxrs)\"</requirement>\n \t\t<feature dependency=\"true\">openhab.tp-jose4j</feature>\n+\t\t<feature dependency=\"true\">openhab.tp-swagger-jaxrs</feature>", "originalCommit": "4b33ec06118a565258ca1c77ab191b48e11cffb2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYxMzg5OA==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r458613898", "bodyText": "Dependency wise I agree it would be better to move ReaderListener back to org.openhab.core.io.rest.swagger.", "author": "wborn", "createdAt": "2020-07-22T08:10:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMzQyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODg0NDI1Ng==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r458844256", "bodyText": "The intent was to prevent the OAuth2 info injection to occur if auth isn't active i.e. the instance doesn't have the io-rest-auth bundle active. Surely there's a clean way of detecting that differently (and reliably/cleanly) somehow?", "author": "ghys", "createdAt": "2020-07-22T14:40:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMzQyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkwOTg0Ng==", "url": "https://github.com/openhab/openhab-core/pull/1496#discussion_r459909846", "bodyText": "I'm fine with moving it and always injecting the OAuth2 info for now. We could also create a service that list the available authentication methods so you could query that.", "author": "wborn", "createdAt": "2020-07-24T08:08:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMzQyNQ=="}], "type": "inlineReview"}, {"oid": "ca44726fa622e1bb856f584541e275511aef99bb", "url": "https://github.com/openhab/openhab-core/commit/ca44726fa622e1bb856f584541e275511aef99bb", "message": "Add Swagger ReaderListener support, OAuth2 definitions\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:32:35Z", "type": "commit"}, {"oid": "dec6f57ace2b814cc3e904572779fb8dcb9d5541", "url": "https://github.com/openhab/openhab-core/commit/dec6f57ace2b814cc3e904572779fb8dcb9d5541", "message": "Add authorization information to admin operations\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:34:51Z", "type": "commit"}, {"oid": "f5796428448d9ccddcff4a102941e551b2355209", "url": "https://github.com/openhab/openhab-core/commit/f5796428448d9ccddcff4a102941e551b2355209", "message": "Fix imports, force reflections dependency to 0.9.12\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:34:51Z", "type": "commit"}, {"oid": "36fcce57368e99640c8e47e50c31fba9c758de9e", "url": "https://github.com/openhab/openhab-core/commit/36fcce57368e99640c8e47e50c31fba9c758de9e", "message": "Add InfoSwaggerReaderListener, bump swagger libs to 1.6.1\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:34:52Z", "type": "commit"}, {"oid": "24bc8b473fa05d82050af8b14b947770d0dc4f21", "url": "https://github.com/openhab/openhab-core/commit/24bc8b473fa05d82050af8b14b947770d0dc4f21", "message": "Fix spotless error in feature.xml\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:34:52Z", "type": "commit"}, {"oid": "e19aa08041cf76995fefc638110186f297e8016b", "url": "https://github.com/openhab/openhab-core/commit/e19aa08041cf76995fefc638110186f297e8016b", "message": "Revert back to io.swagger 1.5.5 in compile BOM\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:34:52Z", "type": "commit"}, {"oid": "58f9cfa1eb08450fa5ba92529329d019abaac4ce", "url": "https://github.com/openhab/openhab-core/commit/58f9cfa1eb08450fa5ba92529329d019abaac4ce", "message": "Add authorizations to AddonResource\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:42:53Z", "type": "commit"}, {"oid": "b030e770c735a04e2a35667f4fd3c8961b8cc81d", "url": "https://github.com/openhab/openhab-core/commit/b030e770c735a04e2a35667f4fd3c8961b8cc81d", "message": "Move API version to RESTContants\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:47:39Z", "type": "commit"}, {"oid": "5846552ee7c5a2ed55d8f296cd444496d21067b0", "url": "https://github.com/openhab/openhab-core/commit/5846552ee7c5a2ed55d8f296cd444496d21067b0", "message": "Add contact name, current API version to Swagger info\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:48:20Z", "type": "commit"}, {"oid": "04b53d262454bebef7ec6c01bd1fced313bfd3f8", "url": "https://github.com/openhab/openhab-core/commit/04b53d262454bebef7ec6c01bd1fced313bfd3f8", "message": "Remove auth feature dependency to Swagger\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:49:38Z", "type": "commit"}, {"oid": "04b53d262454bebef7ec6c01bd1fced313bfd3f8", "url": "https://github.com/openhab/openhab-core/commit/04b53d262454bebef7ec6c01bd1fced313bfd3f8", "message": "Remove auth feature dependency to Swagger\n\nSigned-off-by: Yannick Schaus <github@schaus.net>", "committedDate": "2020-07-24T17:49:38Z", "type": "forcePushed"}]}