{"pr_number": 1395, "pr_title": "utility for removing orphan links", "pr_createdAt": "2020-03-22T19:45:55Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1395", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4MjgzNw==", "url": "https://github.com/openhab/openhab-core/pull/1395#discussion_r453882837", "bodyText": "Can you add an example call like in the other console outputs?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    console.println(\"Specify 'list' or 'purge'\");\n          \n          \n            \n                                    console.println(\"Specify action 'list' or 'purge' to be executed: orphan <list|purge>\");", "author": "cweitkamp", "createdAt": "2020-07-13T19:31:26Z", "path": "bundles/org.openhab.core.thing/src/main/java/org/eclipse/smarthome/core/thing/internal/console/LinkConsoleCommandExtension.java", "diffHunk": "@@ -55,6 +65,14 @@ public void execute(String[] args, Console console) {\n                 case SUBCMD_LIST:\n                     list(console, itemChannelLinkRegistry.getAll());\n                     return;\n+                case SUBCMD_ORPHAN:\n+                    if (args.length == 2 && (args[1].equals(\"list\") || args[1].equals(\"purge\"))) {\n+                        orphan(console, args[1], itemChannelLinkRegistry.getAll(), thingRegistry.getAll(),\n+                                itemRegistry.getAll());\n+                    } else {\n+                        console.println(\"Specify 'list' or 'purge'\");", "originalCommit": "f15d72ff01627f521fa6ba333cec02425fe91d7d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg4Mjk3Mg==", "url": "https://github.com/openhab/openhab-core/pull/1395#discussion_r453882972", "bodyText": "Rather use constructor injection. Please apply it for the other service reference too.", "author": "cweitkamp", "createdAt": "2020-07-13T19:31:41Z", "path": "bundles/org.openhab.core.thing/src/main/java/org/eclipse/smarthome/core/thing/internal/console/LinkConsoleCommandExtension.java", "diffHunk": "@@ -124,6 +164,24 @@ private void removeChannelLink(Console console, String itemName, ChannelUID chan\n         }\n     }\n \n+    @Reference\n+    protected void setThingRegistry(ThingRegistry thingRegistry) {", "originalCommit": "f15d72ff01627f521fa6ba333cec02425fe91d7d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "775f17de8747040c457702a5e5612ed54e8c303b", "url": "https://github.com/openhab/openhab-core/commit/775f17de8747040c457702a5e5612ed54e8c303b", "message": "utility for removing orphan links\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-07-14T15:33:49Z", "type": "commit"}, {"oid": "cc3ae78cc0ab9bf4af51f20926f0dfdf3d2191f1", "url": "https://github.com/openhab/openhab-core/commit/cc3ae78cc0ab9bf4af51f20926f0dfdf3d2191f1", "message": "improvements (also check for missing channels)\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-07-14T15:34:59Z", "type": "commit"}, {"oid": "cc3ae78cc0ab9bf4af51f20926f0dfdf3d2191f1", "url": "https://github.com/openhab/openhab-core/commit/cc3ae78cc0ab9bf4af51f20926f0dfdf3d2191f1", "message": "improvements (also check for missing channels)\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-07-14T15:34:59Z", "type": "forcePushed"}, {"oid": "d4f018d2ad1e8abf0f3929aa09a65792898ff991", "url": "https://github.com/openhab/openhab-core/commit/d4f018d2ad1e8abf0f3929aa09a65792898ff991", "message": "address review comments\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-07-14T15:52:43Z", "type": "commit"}]}