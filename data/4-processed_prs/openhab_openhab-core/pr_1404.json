{"pr_number": 1404, "pr_title": "Replace unit placeholder in patterns if updated by DecimalType states", "pr_createdAt": "2020-04-04T21:05:48Z", "pr_url": "https://github.com/openhab/openhab-core/pull/1404", "timeline": [{"oid": "182616a4fe34be6e3a359feade5c5a532a8bcb91", "url": "https://github.com/openhab/openhab-core/commit/182616a4fe34be6e3a359feade5c5a532a8bcb91", "message": "Replace unit placeholder in patterns if updated by DecimalType states\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-04-04T21:03:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY2OTEzMA==", "url": "https://github.com/openhab/openhab-core/pull/1404#discussion_r403669130", "bodyText": "Should we maybe also trim it, so that the pattern does not have a trailing space?", "author": "kaikreuzer", "createdAt": "2020-04-05T08:39:36Z", "path": "bundles/org.openhab.core.ui/src/main/java/org/openhab/core/ui/internal/items/ItemUIRegistryImpl.java", "diffHunk": "@@ -396,7 +396,13 @@ private Switch createPlayerButtons() {\n                         }\n                     }\n \n-                    if (state instanceof QuantityType) {\n+                    if (state instanceof DecimalType) {\n+                        // for DecimalTypes we don't want to risk format exceptions, if pattern contains unit\n+                        // placeholder\n+                        if (formatPattern.contains(UnitUtils.UNIT_PLACEHOLDER)) {\n+                            formatPattern = formatPattern.replaceAll(UnitUtils.UNIT_PLACEHOLDER, \"\");", "originalCommit": "182616a4fe34be6e3a359feade5c5a532a8bcb91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY3MDQ1NQ==", "url": "https://github.com/openhab/openhab-core/pull/1404#discussion_r403670455", "bodyText": "Yes, I thought about that too. Will add it.", "author": "cweitkamp", "createdAt": "2020-04-05T08:52:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY2OTEzMA=="}], "type": "inlineReview"}, {"oid": "4e9b23ab0bdbb59213391916ebf155b46ddb4144", "url": "https://github.com/openhab/openhab-core/commit/4e9b23ab0bdbb59213391916ebf155b46ddb4144", "message": "Trim trailing whitespaces\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-04-05T10:09:39Z", "type": "commit"}]}