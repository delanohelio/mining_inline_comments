{"pr_number": 965, "pr_title": "OKAPI-882, OKAPI-884: Password in log, variable expansion", "pr_createdAt": "2020-08-31T10:46:19Z", "pr_url": "https://github.com/folio-org/okapi/pull/965", "timeline": [{"oid": "a8727903710f85b23d9304f74542833cff22a3ab", "url": "https://github.com/folio-org/okapi/commit/a8727903710f85b23d9304f74542833cff22a3ab", "message": "OKAPI-882, OKAPI-884: Password in log, variable expansion\n\nOkapi passes environment variables like DB_PASSWORD=mysecret\nto Docker to deploy a module. These variables should be\nsuppressed in the log. (OKAPI-882)\n\nOkapi expands the %p and %c variables in the complete JSON.\nIt should expand %p in exec, cmdlineStart and dockerArgs only,\nand expand %c in dockerArgs only. (OKAPI-884)\n\nFor dockerArgs introduce %% to allow literal %.", "committedDate": "2020-08-31T10:38:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5NjAzNQ==", "url": "https://github.com/folio-org/okapi/pull/965#discussion_r480196035", "bodyText": "Looks redundant to me. There's already a descriptor in descriptors/ModuleDescriptor-template.json , target/ModuleDescriptor.json", "author": "adamdickmeiss", "createdAt": "2020-08-31T15:11:07Z", "path": "okapi-test-module/ModuleDescriptor.json", "diffHunk": "@@ -0,0 +1,21 @@\n+{\n+  \"id\": \"test-basic-1.0.0\",\n+  \"name\": \"Okapi test module\",\n+  \"provides\": [\n+    {\n+      \"id\": \"test-basic\",\n+      \"version\": \"2.2\",\n+      \"handlers\": [\n+        {\n+          \"methods\": [ \"GET\", \"POST\" ],\n+          \"pathPattern\": \"/testb\",\n+          \"permissionsRequired\": [ \"test-basic.get.list\" ]\n+        }\n+      ]\n+    }\n+  ],\n+  \"requires\": [],\n+  \"launchDescriptor\": {\n+    \"dockerImage\": \"okapi-test-module\"\n+  }\n+}", "originalCommit": "a8727903710f85b23d9304f74542833cff22a3ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTM4NDYyMg==", "url": "https://github.com/folio-org/okapi/pull/965#discussion_r481384622", "bodyText": "It is mentioned in Dockerfile and shows how to deploy a module using its docker container.", "author": "julianladisch", "createdAt": "2020-09-01T19:35:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE5NjAzNQ=="}], "type": "inlineReview"}, {"oid": "c1b57e7a15e177317bd86a6c6e16b89ad749c02e", "url": "https://github.com/folio-org/okapi/commit/c1b57e7a15e177317bd86a6c6e16b89ad749c02e", "message": "Move docker descriptor to descriptors/ModuleDescriptor-dockerImage.json", "committedDate": "2020-09-01T19:34:10Z", "type": "commit"}]}