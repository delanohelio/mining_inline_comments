{"pr_number": 913, "pr_title": "Purge and tenantParameters for old-style disable/enable calls OKAPI-831", "pr_createdAt": "2020-04-16T18:47:38Z", "pr_url": "https://github.com/folio-org/okapi/pull/913", "timeline": [{"oid": "9ed3a4acebc7e9292da4a40b36df4c49533e5cc0", "url": "https://github.com/folio-org/okapi/commit/9ed3a4acebc7e9292da4a40b36df4c49533e5cc0", "message": "Purge and tenantParameters for old-style disable/enable calls OKAPI-831", "committedDate": "2020-04-16T18:46:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3ODUxMw==", "url": "https://github.com/folio-org/okapi/pull/913#discussion_r409878513", "bodyText": "Does this section (mdTo will not be empty, right?) conflict with line 400 boolean purge = mdTo == null && options.getPurge();", "author": "hjiebsco", "createdAt": "2020-04-16T22:11:48Z", "path": "okapi-core/src/main/raml/okapi.raml", "diffHunk": "@@ -706,6 +715,15 @@ types:\n             disable current module with new module ID in body and existing ID\n             in path.\n             This call will eventually be replaced by the 'install' service.\n+          queryParameters:\n+            purge:\n+              description: Disabled modules will also be purged.\n+              type: boolean\n+              required: false\n+            tenantParameters:\n+              description: Parameters for Tenant init\n+              type: string\n+              required: false\n           body:", "originalCommit": "9ed3a4acebc7e9292da4a40b36df4c49533e5cc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyMTg0Mg==", "url": "https://github.com/folio-org/okapi/pull/913#discussion_r410021842", "bodyText": "purge would always be false in this case. mdTo == null ONLY if a module is disabled (no downgrade or upgrade). The purge would be ignored essentially.", "author": "adamdickmeiss", "createdAt": "2020-04-17T06:43:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3ODUxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIzNjU1Nw==", "url": "https://github.com/folio-org/okapi/pull/913#discussion_r410236557", "bodyText": "So this part should be modified because essentially this API does not support \"purge\" parameter, right?", "author": "hjiebsco", "createdAt": "2020-04-17T13:51:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3ODUxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3OTg4Ng==", "url": "https://github.com/folio-org/okapi/pull/913#discussion_r409879886", "bodyText": "Maybe add a purge test for this one too?", "author": "hjiebsco", "createdAt": "2020-04-16T22:15:10Z", "path": "okapi-core/src/main/raml/okapi.raml", "diffHunk": "@@ -666,6 +666,15 @@ types:\n               text/plain:\n       delete:\n         description: Disable modules for tenant\n+        queryParameters:\n+          purge:\n+            description: Disabled modules will also be purged.\n+            type: boolean\n+            required: false\n+          tenantParameters:\n+            description: Parameters for Tenant init\n+            type: string\n+            required: false", "originalCommit": "9ed3a4acebc7e9292da4a40b36df4c49533e5cc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDAyMjAxMQ==", "url": "https://github.com/folio-org/okapi/pull/913#discussion_r410022011", "bodyText": "Could do.. but that would mostly be to check that RAML is ok.. There's 100% coverage.", "author": "adamdickmeiss", "createdAt": "2020-04-17T06:43:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3OTg4Ng=="}], "type": "inlineReview"}, {"oid": "ad882c4c14c428d865eb022122f66572a7477344", "url": "https://github.com/folio-org/okapi/commit/ad882c4c14c428d865eb022122f66572a7477344", "message": "Test disable all modules with purge", "committedDate": "2020-04-17T06:56:38Z", "type": "commit"}]}