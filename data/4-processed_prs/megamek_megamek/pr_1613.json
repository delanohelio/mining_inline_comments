{"pr_number": 1613, "pr_title": "SJuliez's Board Editor GUI Changes", "pr_createdAt": "2020-01-23T19:53:15Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1613", "timeline": [{"oid": "6c32d4f69341098f1ea637a9733c2abb1373eb5e", "url": "https://github.com/MegaMek/megamek/commit/6c32d4f69341098f1ea637a9733c2abb1373eb5e", "message": "Added display names for buildings", "committedDate": "2017-12-17T02:10:42Z", "type": "commit"}, {"oid": "e455afb7ffc682ae1827f73424d70ea218fda711", "url": "https://github.com/MegaMek/megamek/commit/e455afb7ffc682ae1827f73424d70ea218fda711", "message": "Terrain ListBox to use displayable names\n\nThis replaces the old terrain:lvl:exits format with a displayable name.", "committedDate": "2017-12-17T02:11:01Z", "type": "commit"}, {"oid": "e95c87092be341b3a9a2aa18ec6db05af319733b", "url": "https://github.com/MegaMek/megamek/commit/e95c87092be341b3a9a2aa18ec6db05af319733b", "message": "Quality of Life Changes to the Map Editor", "committedDate": "2018-02-17T07:53:56Z", "type": "commit"}, {"oid": "578d0067f68aea157ca02bd7b9a38703f6539159", "url": "https://github.com/MegaMek/megamek/commit/578d0067f68aea157ca02bd7b9a38703f6539159", "message": "MapEditor Cleanup", "committedDate": "2018-02-17T18:10:56Z", "type": "commit"}, {"oid": "aa226c5bd7c66c7de272d9644ddc0d410d0b7e53", "url": "https://github.com/MegaMek/megamek/commit/aa226c5bd7c66c7de272d9644ddc0d410d0b7e53", "message": "Undo/Redo functions for the Map Editor", "committedDate": "2018-02-18T16:45:02Z", "type": "commit"}, {"oid": "817171ecbfa9e89a44e7c0321d7a67ee73ea8930", "url": "https://github.com/MegaMek/megamek/commit/817171ecbfa9e89a44e7c0321d7a67ee73ea8930", "message": "BoardEditor Resizing Fix", "committedDate": "2018-02-19T18:24:24Z", "type": "commit"}, {"oid": "6a25fff59ef07871848bec547b72d684e6b506fc", "url": "https://github.com/MegaMek/megamek/commit/6a25fff59ef07871848bec547b72d684e6b506fc", "message": "Restricted to MUD:1 and MUD:2 as legal mud hexes and changed boards\naccordingly, replacing mud:0 and mud:3 and mud:0:1", "committedDate": "2018-02-20T20:45:26Z", "type": "commit"}, {"oid": "10053faf3e43fbc10f75cfc0e952c6d1de9c6b16", "url": "https://github.com/MegaMek/megamek/commit/10053faf3e43fbc10f75cfc0e952c6d1de9c6b16", "message": "Restricted to pavement:1 as legal pavement, changed all boards\naccordingly", "committedDate": "2018-02-20T21:01:33Z", "type": "commit"}, {"oid": "de8f2414e8b34d5ff39f71ce7590f079b757d5fb", "url": "https://github.com/MegaMek/megamek/commit/de8f2414e8b34d5ff39f71ce7590f079b757d5fb", "message": "Restricted to SNOW:1 and SNOW:2 as legal snow terrain (thin snow and\ndeep snow) and changed boards accordingly", "committedDate": "2018-02-20T21:31:04Z", "type": "commit"}, {"oid": "c80fa667f8ef753d49515b48f623ba758fb2018c", "url": "https://github.com/MegaMek/megamek/commit/c80fa667f8ef753d49515b48f623ba758fb2018c", "message": "Restricted terrain to TUNDRA:1. No board changes necessary.", "committedDate": "2018-02-20T21:38:10Z", "type": "commit"}, {"oid": "aa9e87435590e83a0566d3c851a34c4d1b965071", "url": "https://github.com/MegaMek/megamek/commit/aa9e87435590e83a0566d3c851a34c4d1b965071", "message": "Bug Fix: Board Tooltips for Bldgs, Bridges and Fuel Tanks now work in\nthe BoardEditor", "committedDate": "2018-02-22T21:47:38Z", "type": "commit"}, {"oid": "67f9581265dd7b6a8c36b09f3ff885475fa02fdd", "url": "https://github.com/MegaMek/megamek/commit/67f9581265dd7b6a8c36b09f3ff885475fa02fdd", "message": "Additional buttons and small changes", "committedDate": "2018-02-23T17:54:21Z", "type": "commit"}, {"oid": "349c7e13576400587e8aa82fa260f2445359334a", "url": "https://github.com/MegaMek/megamek/commit/349c7e13576400587e8aa82fa260f2445359334a", "message": "Code cleanup", "committedDate": "2018-02-24T08:12:23Z", "type": "commit"}, {"oid": "7ff3667beed69f594658aa508b64aab55382be9f", "url": "https://github.com/MegaMek/megamek/commit/7ff3667beed69f594658aa508b64aab55382be9f", "message": "Fix to adding Rapids", "committedDate": "2018-02-25T14:44:32Z", "type": "commit"}, {"oid": "b1b1a6917fc4b4c10983f425156b53f58f888d20", "url": "https://github.com/MegaMek/megamek/commit/b1b1a6917fc4b4c10983f425156b53f58f888d20", "message": "Elevation Buttons and image cleanup", "committedDate": "2018-02-26T20:22:52Z", "type": "commit"}, {"oid": "58badceea4d144b66bf926214ed6433b04a45880", "url": "https://github.com/MegaMek/megamek/commit/58badceea4d144b66bf926214ed6433b04a45880", "message": "Building button change to ease single hex buildings, tooltips", "committedDate": "2018-02-26T20:57:41Z", "type": "commit"}, {"oid": "ab69b89080d4a59cd89277d9872383787740e870", "url": "https://github.com/MegaMek/megamek/commit/ab69b89080d4a59cd89277d9872383787740e870", "message": "Additional buttons for exits (to be contd) and JLabel click to hide", "committedDate": "2018-02-27T16:28:01Z", "type": "commit"}, {"oid": "503af6b6e413d90c8814be8c3e8e88fde7166eb4", "url": "https://github.com/MegaMek/megamek/commit/503af6b6e413d90c8814be8c3e8e88fde7166eb4", "message": "UI adaptation for the Exits system", "committedDate": "2018-02-27T20:37:45Z", "type": "commit"}, {"oid": "95d30d6fbc64ace5605125d26092ee3dedbb5100", "url": "https://github.com/MegaMek/megamek/commit/95d30d6fbc64ace5605125d26092ee3dedbb5100", "message": "GUI changes", "committedDate": "2018-03-02T17:57:41Z", "type": "commit"}, {"oid": "e7ce893966d887f1e0dd0b52a520693531d770e4", "url": "https://github.com/MegaMek/megamek/commit/e7ce893966d887f1e0dd0b52a520693531d770e4", "message": "Icons", "committedDate": "2018-03-02T17:57:55Z", "type": "commit"}, {"oid": "3d0149e0b502e9ab5498cc13b1da2381d4b8ccaf", "url": "https://github.com/MegaMek/megamek/commit/3d0149e0b502e9ab5498cc13b1da2381d4b8ccaf", "message": "GUI revamp", "committedDate": "2018-03-02T21:49:12Z", "type": "commit"}, {"oid": "ecb521a325d87ff588f3905b7095ace24cd322e7", "url": "https://github.com/MegaMek/megamek/commit/ecb521a325d87ff588f3905b7095ace24cd322e7", "message": "Small changes, icons", "committedDate": "2018-03-02T22:03:06Z", "type": "commit"}, {"oid": "aec8d7baca6cffa96981126f3f2558be9940c757", "url": "https://github.com/MegaMek/megamek/commit/aec8d7baca6cffa96981126f3f2558be9940c757", "message": "Remove unnecessary code", "committedDate": "2018-03-03T06:59:35Z", "type": "commit"}, {"oid": "ba28bbdaa04fedf3494c9df4c2c350741c349a2f", "url": "https://github.com/MegaMek/megamek/commit/ba28bbdaa04fedf3494c9df4c2c350741c349a2f", "message": "Small Error Correction", "committedDate": "2018-03-03T07:32:16Z", "type": "commit"}, {"oid": "29b9e7f1fac21efb2d1a9810e27346b57d98300d", "url": "https://github.com/MegaMek/megamek/commit/29b9e7f1fac21efb2d1a9810e27346b57d98300d", "message": "GUI improvement (keep terrain selected)", "committedDate": "2018-03-03T07:50:52Z", "type": "commit"}, {"oid": "824ac76505ca570743f4be7d69f923347cae44ac", "url": "https://github.com/MegaMek/megamek/commit/824ac76505ca570743f4be7d69f923347cae44ac", "message": "Small GUI improvements", "committedDate": "2018-03-03T10:37:49Z", "type": "commit"}, {"oid": "3b9142aee75aceefd33ce1708dd637190b31214f", "url": "https://github.com/MegaMek/megamek/commit/3b9142aee75aceefd33ce1708dd637190b31214f", "message": "No Exits for sub-terrain like BRIDGE_CF", "committedDate": "2018-03-03T10:58:10Z", "type": "commit"}, {"oid": "aba2b581d8ae883ec6b4dd5e60dbf93410859dc4", "url": "https://github.com/MegaMek/megamek/commit/aba2b581d8ae883ec6b4dd5e60dbf93410859dc4", "message": "Theme Listbox and small adjustments", "committedDate": "2018-03-03T22:30:59Z", "type": "commit"}, {"oid": "d4adedf6270fe0697dbe5d9f02c0637c71301165", "url": "https://github.com/MegaMek/megamek/commit/d4adedf6270fe0697dbe5d9f02c0637c71301165", "message": "Small changes", "committedDate": "2018-03-04T07:13:11Z", "type": "commit"}, {"oid": "3add6dba007a1197534cb33a9e4c5e6d972433a8", "url": "https://github.com/MegaMek/megamek/commit/3add6dba007a1197534cb33a9e4c5e6d972433a8", "message": "Just TODOs added", "committedDate": "2018-03-04T08:25:52Z", "type": "commit"}, {"oid": "15812fb767bcd72033256d01c00ae3aa563f98c7", "url": "https://github.com/MegaMek/megamek/commit/15812fb767bcd72033256d01c00ae3aa563f98c7", "message": "GUI adjustments (Textfield handling), icons, PAVEMENT:1+ legal!", "committedDate": "2018-03-07T16:25:01Z", "type": "commit"}, {"oid": "bbd311b5ba7b852dc73908fc20bde4bd0290bed1", "url": "https://github.com/MegaMek/megamek/commit/bbd311b5ba7b852dc73908fc20bde4bd0290bed1", "message": "Merge remote-tracking branch 'origin/master' into BE-Changes-Save", "committedDate": "2018-03-07T21:32:37Z", "type": "commit"}, {"oid": "ef2f8d8b4891e736d2be4f0fafce43571f62a5bd", "url": "https://github.com/MegaMek/megamek/commit/ef2f8d8b4891e736d2be4f0fafce43571f62a5bd", "message": "Replaced illegal snow:0 with snow:1", "committedDate": "2018-03-07T21:41:30Z", "type": "commit"}, {"oid": "1430f15cdd5a90671c77d9b34d5bcbd3658c2eb0", "url": "https://github.com/MegaMek/megamek/commit/1430f15cdd5a90671c77d9b34d5bcbd3658c2eb0", "message": "Method name correction and UI fix", "committedDate": "2018-03-09T21:21:13Z", "type": "commit"}, {"oid": "e299264b2a1563821bbfd1c4880e78a87f89256f", "url": "https://github.com/MegaMek/megamek/commit/e299264b2a1563821bbfd1c4880e78a87f89256f", "message": "Updating Board Editor PR with latest MegaMek, fixing Merge Conflicts", "committedDate": "2020-01-17T03:46:13Z", "type": "commit"}, {"oid": "75088ba4a567e144d2fc9815ba0c16f72c140ea0", "url": "https://github.com/MegaMek/megamek/commit/75088ba4a567e144d2fc9815ba0c16f72c140ea0", "message": "Updated .gitignore to ignore .idea folder, to help with use of Idea IDE", "committedDate": "2020-01-17T03:47:38Z", "type": "commit"}, {"oid": "f778fd06442001d2f28ed6873d8b5c23adff7a19", "url": "https://github.com/MegaMek/megamek/commit/f778fd06442001d2f28ed6873d8b5c23adff7a19", "message": "Fixing Help File Location, Image Not Found Bug", "committedDate": "2020-01-17T05:04:44Z", "type": "commit"}, {"oid": "43126dc25bfef8bf0ebfc6acf690e2a0a0db5a3e", "url": "https://github.com/MegaMek/megamek/commit/43126dc25bfef8bf0ebfc6acf690e2a0a0db5a3e", "message": "Refactoring in BoardEditor", "committedDate": "2020-01-23T18:00:26Z", "type": "commit"}, {"oid": "970b9855d1916d6d9f1abea935517dd2c5aadb00", "url": "https://github.com/MegaMek/megamek/commit/970b9855d1916d6d9f1abea935517dd2c5aadb00", "message": "Adding Scrollbar to the left-hand side of the editor", "committedDate": "2020-01-23T19:48:03Z", "type": "commit"}, {"oid": "8846c76d543cb69b906c62019f95584b14ef3e75", "url": "https://github.com/MegaMek/megamek/commit/8846c76d543cb69b906c62019f95584b14ef3e75", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_Board_Editor_SJuliez_Fixes", "committedDate": "2020-01-23T19:49:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODE4Nw==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r370488187", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            System.out.println(\"Trying to load image for a non-existent \" + \"file! Path: \" + fileName);\n          \n          \n            \n                            System.out.println(\"Trying to load image for a non-existent file! Path: \" + fileName);", "author": "sixlettervariables", "createdAt": "2020-01-24T06:23:41Z", "path": "megamek/src/megamek/common/util/ImageUtil.java", "diffHunk": "@@ -185,8 +185,8 @@ private ImageUtil() {}\n         public Image loadImage(String fileName) {\n             File fin = new File(fileName);\n             if (!fin.exists()) {\n-                System.out.println(\"Trying to load image for a non-existant \"\n-                        + \"file! Path: \" + fileName);\n+                System.out.println(\"Trying to load image for a non-existent \" + \"file! Path: \" + fileName);", "originalCommit": "f778fd06442001d2f28ed6873d8b5c23adff7a19", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r370488351", "bodyText": "Why is this using reference equality? This would only work between -128 and 127.", "author": "sixlettervariables", "createdAt": "2020-01-24T06:24:31Z", "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -152,7 +151,7 @@ public int compareTo(TerrainHelper o) {\n         @Override\n         public boolean equals(Object other) {\n             if (other instanceof Integer) {\n-                return getTerrainType() == ((Integer)other).intValue();\n+                return getTerrainType() == (Integer) other;", "originalCommit": "43126dc25bfef8bf0ebfc6acf690e2a0a0db5a3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxMzQ3Mw==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371013473", "bodyText": "Why would it only work between those values? Integer is just an int wrapper class, so this is an int to int comparison which should work between -2^-31 and 2^31 - 1.\nI've also not found any uses of this in the code, but I believe the reasoning behind it is that this is supposed to be used in terrainType comparisons", "author": "Windchild292", "createdAt": "2020-01-26T16:46:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxNjMyOA==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371016328", "bodyText": "That isn't a comparison of int, that's a comparison of Integer by reference rather than value. Integer values between -128 and 127 tend to be the same reference, but other values will have unique references.\nYou need to use Integer.equals(val1, val2) or val1.equals(val2) to compare values.", "author": "sixlettervariables", "createdAt": "2020-01-26T17:27:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxOTQ2Mg==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371019462", "bodyText": "@sixlettervariables\nUnless my testing is incorrect, the caching is only included for Integer to Integer comparisons. This is an int to Integer comparison that will automatically unbox properly. I can share my test code if you'd like to check my math (found it an interesting conundrum and ended up going down the rabbit hole).", "author": "Windchild292", "createdAt": "2020-01-26T18:19:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxOTczMA==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371019730", "bodyText": "This was highlighted as an issue when I used SpotBugs, so I'd rather make it explicit we want value comparisons.", "author": "sixlettervariables", "createdAt": "2020-01-26T18:23:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAxOTg4OA==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371019888", "bodyText": "Funny thing is that I made this change for the exact same reason, the Idea IDE pointed this out as a potential bug and this was the suggested fix \ud83d\ude02", "author": "Windchild292", "createdAt": "2020-01-26T18:26:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAyMDA2Nw==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371020067", "bodyText": "I guess the different tools have different ways of avoiding the issue. If that was IntelliJ's suggested fix that's fine by me.", "author": "sixlettervariables", "createdAt": "2020-01-26T18:29:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAyMjc0Mw==", "url": "https://github.com/MegaMek/megamek/pull/1613#discussion_r371022743", "bodyText": "For reference: Integer caches wrapper instances for all values between -128 and 127 and uses a single instance for each of those values no matter where they come from. It also caches any instance created using the valueOf static method for reuse, but not those created with the Integer(int) constructor, which is why that has been deprecated in Java 9. The same is true of the other wrapper classes.\nSo for comparisons of two Integer objects, == will have the desired outcome if you can guarantee they both within the automatic caching range or were created using valueOf, but equals is preferred as it will work regardless.\nIn the case of comparison between int and Integer, as in this case, I suspect that other.equals(getTerrainType()), would be less efficient, since it would result in automatic boxing rather than unboxing. Though the compiler may be clever enough to recognize that and use unboxing instead.", "author": "neoancient", "createdAt": "2020-01-26T19:15:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ4ODM1MQ=="}], "type": "inlineReview"}, {"oid": "8a4e68b19d05b628ffd822baba1e2225d9bd8bb0", "url": "https://github.com/MegaMek/megamek/commit/8a4e68b19d05b628ffd822baba1e2225d9bd8bb0", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_Board_Editor_SJuliez_Fixes", "committedDate": "2020-01-26T16:10:26Z", "type": "commit"}, {"oid": "14b34432896107537a5673d538cbcb578a136b5b", "url": "https://github.com/MegaMek/megamek/commit/14b34432896107537a5673d538cbcb578a136b5b", "message": "1613: Review Fixes", "committedDate": "2020-01-26T16:47:33Z", "type": "commit"}]}