{"pr_number": 1620, "pr_title": "Allow indirect LRMs to miss legs if target in water", "pr_createdAt": "2020-01-28T16:59:54Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1620", "timeline": [{"oid": "18829090281d0a77645843771cf648913a2e7763", "url": "https://github.com/MegaMek/megamek/commit/18829090281d0a77645843771cf648913a2e7763", "message": "Allow indirect LRMs to miss legs if target in water", "committedDate": "2020-01-28T16:44:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NjEzMw==", "url": "https://github.com/MegaMek/megamek/pull/1620#discussion_r371996133", "bodyText": "This would work in most situations, but a mech standing in depth 0 water (or a superheavy in 0-1) receiving partial cover from terrain would incorrectly have the partial cover hit removed.", "author": "neoancient", "createdAt": "2020-01-28T19:01:22Z", "path": "megamek/src/megamek/common/weapons/WeaponHandler.java", "diffHunk": "@@ -1555,8 +1556,11 @@ protected void handleEntityDamage(Entity entityTarget,\n         }\n         boolean isIndirect = wtype.hasModes()\n                 && weapon.curMode().equals(\"Indirect\");\n+        IHex targetHex = game.getBoard().getHex(target.getPosition());\n \n-        if (!isIndirect\n+        //For indirect fire, remove leg hits only if target is in water partial cover\n+        //Per TW errata for indirect fire\n+        if ((!isIndirect || (isIndirect && targetHex.containsTerrain(Terrains.WATER)))", "originalCommit": "18829090281d0a77645843771cf648913a2e7763", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTQxMw==", "url": "https://github.com/MegaMek/megamek/pull/1620#discussion_r372025413", "bodyText": "Latest commit appears to fix this.", "author": "mkerensky", "createdAt": "2020-01-28T19:59:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTk5NjEzMw=="}], "type": "inlineReview"}, {"oid": "1a1527a51523f8b3664c7c6505cd0003de2723c2", "url": "https://github.com/MegaMek/megamek/commit/1a1527a51523f8b3664c7c6505cd0003de2723c2", "message": "Accounts for height above water, solving some edge cases", "committedDate": "2020-01-28T19:57:32Z", "type": "commit"}]}