{"pr_number": 1735, "pr_title": "Fix kg-standard weight calculations", "pr_createdAt": "2020-03-03T14:54:26Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1735", "timeline": [{"oid": "d3e1ec0b4697df298466d5ce7d3ed9c6afd7d850", "url": "https://github.com/MegaMek/megamek/commit/d3e1ec0b4697df298466d5ce7d3ed9c6afd7d850", "message": "Round equipment weight appropriately for the unit type.\n\nEquipmentType#getTonnage(Entity, int, RoundWeight) was not providing the entity to RoundWeight#round, so it was rounding to the half ton for everything.", "committedDate": "2020-03-03T14:46:00Z", "type": "commit"}, {"oid": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed", "url": "https://github.com/MegaMek/megamek/commit/4e7bc6d58d57060fb916f553845cb0b9a3eec1ed", "message": "Removed the version of RoundWeight#round that does not have an Entity parameter. It was only used internally.", "committedDate": "2020-03-03T14:49:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE2NTczMg==", "url": "https://github.com/MegaMek/megamek/pull/1735#discussion_r387165732", "bodyText": "What's the null do? I remember seeing that function definition, but I forgot.", "author": "NickAragua", "createdAt": "2020-03-03T17:07:09Z", "path": "megamek/src/megamek/common/RoundWeight.java", "diffHunk": "@@ -118,7 +107,7 @@ public static double nearestHalfTon(double weight) {\n      * @return       The weight in tons, rounded to the closest ton.\n      */\n     public static double nearestTon(double weight) {\n-        return NEAREST_TON.round(weight);\n+        return NEAREST_TON.round(weight, null);", "originalCommit": "4e7bc6d58d57060fb916f553845cb0b9a3eec1ed", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzY4MjMyNQ==", "url": "https://github.com/MegaMek/megamek/pull/1735#discussion_r387682325", "bodyText": "The only one that needs an Entity argument is STANDARD, which will pass off to next half ton or nearest kg depending on the Entity type. If it's null, it defaults to next half ton. The rest ignore it.", "author": "neoancient", "createdAt": "2020-03-04T13:58:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzE2NTczMg=="}], "type": "inlineReview"}]}