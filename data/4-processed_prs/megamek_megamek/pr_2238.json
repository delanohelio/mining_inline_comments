{"pr_number": 2238, "pr_title": "Board editor fixes (#2233,#1762)", "pr_createdAt": "2020-09-23T21:16:47Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2238", "timeline": [{"oid": "36885c8a58f1ced9cee216e0a29ea643b3f31967", "url": "https://github.com/MegaMek/megamek/commit/36885c8a58f1ced9cee216e0a29ea643b3f31967", "message": "BoardEditor Various issues and #2233 and #1762", "committedDate": "2020-09-23T20:56:13Z", "type": "commit"}, {"oid": "e6b523a004989d4f9a105f9c00759a2a1428c428", "url": "https://github.com/MegaMek/megamek/commit/e6b523a004989d4f9a105f9c00759a2a1428c428", "message": "Small Correction", "committedDate": "2020-09-23T21:13:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzkzMTgzMA==", "url": "https://github.com/MegaMek/megamek/pull/2238#discussion_r493931830", "bodyText": "This should be moved into the try statement itself (try (...)) so if board.save throws, os will be cleaned up.", "author": "sixlettervariables", "createdAt": "2020-09-23T22:32:25Z", "path": "megamek/src/megamek/client/ui/swing/BoardEditor.java", "diffHunk": "@@ -1622,47 +1554,69 @@ private void boardSaveImage(boolean ignoreUnits) {\n     }\n \n     /**\n-     * Opens a file dialog box to select a file to save as; saves the board to\n-     * the file.\n+     * Saves the board to a .board file. \n+     * When saveAs is true, acts as a Save As... by opening a file chooser dialog.\n+     * When saveAs is false, it will directly save to the current board file name,\n+     * if it is known and otherwise act as Save As... \n      */\n-    private boolean boardSaveAs() {\n-        // First, correct connection issues\n+    private boolean boardSave(boolean saveAs) {\n+        // Correct connection issues and do a validation.\n         correctExits();\n-        JFileChooser fc = new JFileChooser(\"data\" + File.separator + \"boards\");\n+        validateBoard(false); \n+        \n+        // Choose a board file to save to if this was\n+        // called as \"Save As...\" or there is no current filename\n+        if (curBoardFile == null || saveAs) {\n+            if (!chooseSaveBoardFile()) {\n+                return false;\n+            }\n+        }\n+        butSourceFile.setEnabled(true);\n+\n+        // write the board\n+        try {\n+            OutputStream os = new FileOutputStream(curBoardFile);", "originalCommit": "e6b523a004989d4f9a105f9c00759a2a1428c428", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDQ1NTIxNA==", "url": "https://github.com/MegaMek/megamek/pull/2238#discussion_r494455214", "bodyText": "Done.", "author": "SJuliez", "createdAt": "2020-09-24T16:31:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzkzMTgzMA=="}], "type": "inlineReview"}, {"oid": "30ebfb97985789f163cec01c6a1d70d6141f84fc", "url": "https://github.com/MegaMek/megamek/commit/30ebfb97985789f163cec01c6a1d70d6141f84fc", "message": "Try/resource handling correction", "committedDate": "2020-09-24T16:30:48Z", "type": "commit"}]}