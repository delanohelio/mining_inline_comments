{"pr_number": 1673, "pr_title": "1634: Refactoring out Inline Action Commands and fixing Zoom in the Map Editor", "pr_createdAt": "2020-02-14T18:58:21Z", "pr_url": "https://github.com/MegaMek/megamek/pull/1673", "timeline": [{"oid": "0f335f7961e5a10fc2c7edbf6a23ca64434046eb", "url": "https://github.com/MegaMek/megamek/commit/0f335f7961e5a10fc2c7edbf6a23ca64434046eb", "message": "Reformatting and refactoring out action commands to a single standard list, and fixing the zoom bug", "committedDate": "2020-02-14T18:26:21Z", "type": "commit"}, {"oid": "f301b9368867a0f30456c7735146631ba1a168db", "url": "https://github.com/MegaMek/megamek/commit/f301b9368867a0f30456c7735146631ba1a168db", "message": "Removing unnecessary public tags and comments", "committedDate": "2020-02-14T18:36:39Z", "type": "commit"}, {"oid": "51f48aa18efc98f32e14e6cc75be9462544d7c32", "url": "https://github.com/MegaMek/megamek/commit/51f48aa18efc98f32e14e6cc75be9462544d7c32", "message": "Fixing Mistakes in Variable assignment", "committedDate": "2020-02-14T18:52:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNDgzMQ==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379714831", "bodyText": "Might as well go through and make these Maps if possible.", "author": "NickAragua", "createdAt": "2020-02-15T03:40:25Z", "path": "megamek/src/megamek/client/ui/swing/ClientGUI.java", "diffHunk": "@@ -202,7 +248,7 @@\n     /**\n      * Map each phase to the name of the card for the main display area.\n      */\n-    private HashMap<String, String> mainNames = new HashMap<String, String>();\n+    private HashMap<String, String> mainNames = new HashMap<>();", "originalCommit": "51f48aa18efc98f32e14e6cc75be9462544d7c32", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgzOTY5Nw==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379839697", "bodyText": "Fixed", "author": "Windchild292", "createdAt": "2020-02-15T16:00:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNDgzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNDk3Mw==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379714973", "bodyText": "Why take out the null check?", "author": "NickAragua", "createdAt": "2020-02-15T03:43:38Z", "path": "megamek/src/megamek/client/ui/swing/ClientGUI.java", "diffHunk": "@@ -2332,14 +2387,12 @@ public String getDescription() {\n      */\n     private void boardSaveAsImage(boolean ignoreUnits) {\n         JFileChooser fc = new JFileChooser(\".\");\n-        fc\n-                .setLocation(frame.getLocation().x + 150,\n-                        frame.getLocation().y + 100);\n+        fc.setLocation(frame.getLocation().x + 150, frame.getLocation().y + 100);\n         fc.setDialogTitle(Messages.getString(\"BoardEditor.saveAsImage\"));\n         fc.setFileFilter(new FileFilter() {\n             @Override\n             public boolean accept(File dir) {\n-                return (null != dir.getName()) && (dir.getName().endsWith(\".png\") || dir.isDirectory()); //$NON-NLS-1$", "originalCommit": "51f48aa18efc98f32e14e6cc75be9462544d7c32", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcyOTA5OQ==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379729099", "bodyText": "It is unnecessary, as pointed out by my IDE", "author": "Windchild292", "createdAt": "2020-02-15T04:50:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNDk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNTAwMg==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379715002", "bodyText": "I'll assume you kept the internal logic the same and just changed the if/else block to a switch statement.", "author": "NickAragua", "createdAt": "2020-02-15T03:44:21Z", "path": "megamek/src/megamek/client/ui/swing/ClientGUI.java", "diffHunk": "@@ -669,180 +715,197 @@ private void showRoundReport() {\n      * Implement the <code>ActionListener</code> interface.\n      */\n     public void actionPerformed(ActionEvent event) {\n-        if (\"fileGameSave\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            JFileChooser fc = new JFileChooser(\"./savegames\");\n-            fc.setLocation(frame.getLocation().x + 150, frame.getLocation().y + 100);\n-            fc.setDialogTitle(Messages.getString(\"ClientGUI.FileSaveDialog.title\"));\n-\n-            int returnVal = fc.showSaveDialog(frame);\n-            if ((returnVal != JFileChooser.APPROVE_OPTION) || (fc.getSelectedFile() == null)) {\n-                // I want a file, y'know!\n-                return;\n-            }\n-            if (fc.getSelectedFile() != null) {\n-                String file = fc.getSelectedFile().getName();\n-                // stupid hack to allow for savegames in folders with spaces in\n-                // the name\n-                String path = fc.getSelectedFile().getParentFile().getPath();\n-                path = path.replace(\" \", \"|\");\n-                client.sendChat(\"/localsave \" + file + \" \" + path); //$NON-NLS-1$\n-            }\n-            ignoreHotKeys = false;\n-        }\n-        if (\"fileGameSaveServer\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            String filename = (String) JOptionPane.showInputDialog(frame, Messages.getString(\"ClientGUI.FileSaveServerDialog.message\"), Messages.getString(\"ClientGUI.FileSaveServerDialog.title\"), JOptionPane.QUESTION_MESSAGE, null, null, \"savegame.sav\");\n-            if (filename != null) {\n-                client.sendChat(\"/save \" + filename);\n-            }\n-            ignoreHotKeys = false;\n-        }\n-        if (\"helpAbout\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showAbout();\n-        }\n-        if (\"helpSkinning\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showSkinningHowTo();\n-        }\n-        if (\"helpContents\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showHelp();\n-        }\n-        if (\"fileUnitsSave\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            doSaveUnit();\n-            ignoreHotKeys = false;\n-        }\n-        if (\"fileUnitsOpen\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            loadListFile();\n-            ignoreHotKeys = false;\n-        }\n-        if (\"fileUnitsClear\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            deleteAllUnits(client);\n-        }\n-        if (\"fileUnitsReinforce\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            loadListFile(client.getLocalPlayer(), true);\n-            ignoreHotKeys = false;\n-        }\n-        if (\"fileUnitsReinforceRAT\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            if (client.getLocalPlayer().getTeam() == IPlayer.TEAM_UNASSIGNED){\n-                String title = Messages.getString(\n-                        \"ClientGUI.openUnitListFileDialog.noReinforceTitle\"); //$NON-NLS-1$\n-                String msg = Messages.getString(\n-                        \"ClientGUI.openUnitListFileDialog.noReinforceMessage\");  //$NON-NLS-1$          \n-                JOptionPane.showMessageDialog(frame, msg, title,\n-                        JOptionPane.OK_OPTION, null);\n-                return;\n-            }\n-            getRandomArmyDialog().setVisible(true);\n-            ignoreHotKeys = false;\n-        }\n-        if (\"viewClientSettings\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showSettings();\n-        }\n-        if (\"viewGameOptions\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showOptions();\n-        }\n-        if (\"viewPlayerSettings\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            customizePlayer();\n-        }\n-        if (\"viewPlayerList\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showPlayerList();\n-        }\n-        if (\"viewRoundReport\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            showRoundReport();\n-        }\n-        if (\"fileBoardSave\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            boardSave();\n-            ignoreHotKeys = false;\n-        } else if (\"fileBoardSaveAs\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            boardSaveAs();\n-            ignoreHotKeys = false;\n-        } else if (\"fileBoardSaveAsImage\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            boardSaveAsImage(true);\n-            ignoreHotKeys = false;\n-        } else if (\"fileBoardSaveAsImageUnits\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            ignoreHotKeys = true;\n-            boardSaveAsImage(false);\n-            ignoreHotKeys = false;\n-        } else if (\"replacePlayer\".equalsIgnoreCase(event.getActionCommand())) { //$NON-NLS-1$\n-            replacePlayer();\n-        } else if (event.getActionCommand().equals(VIEW_MEK_DISPLAY)) {\n-            toggleDisplay();\n-        } else if (event.getActionCommand().equals(VIEW_ACCESSIBILITY_WINDOW)) {\n-            toggleAccessibilityWindow();\n-        } else if (event.getActionCommand().equals(VIEW_MINI_MAP)) {\n-            toggleMap();\n-        } else if (event.getActionCommand().equals(VIEW_UNIT_OVERVIEW)) {\n-            toggleUnitOverview();\n-        } else if (event.getActionCommand().equals(VIEW_LOS_SETTING)) {\n-            showLOSSettingDialog();\n-        } else if (event.getActionCommand().equals(VIEW_ZOOM_IN)) {\n-            bv.zoomIn();\n-        } else if (event.getActionCommand().equals(VIEW_ZOOM_OUT)) {\n-            bv.zoomOut();\n-        } else if (event.getActionCommand().equals(VIEW_TOGGLE_ISOMETRIC)) {\n-            GUIPreferences.getInstance().setIsometricEnabled(\n-                    bv.toggleIsometric());\n-        } else if (event.getActionCommand().equals(VIEW_TOGGLE_FOV_HIGHLIGHT)) {\n-            GUIPreferences.getInstance().setFovHighlight(\n-                    !GUIPreferences.getInstance().getFovHighlight());\n-            bv.refreshDisplayables();\n-            if (client.getGame().getPhase() == Phase.PHASE_MOVEMENT) {\n-                bv.clearHexImageCache();\n-            }\n-        } else if (event.getActionCommand().equals(VIEW_TOGGLE_FIELD_OF_FIRE)) {\n-            GUIPreferences.getInstance().setShowFieldOfFire(\n-                    !GUIPreferences.getInstance().getShowFieldOfFire());\n-            bv.repaint();\n-        } else if (event.getActionCommand().equals(VIEW_TOGGLE_FOV_DARKEN)) {\n-            GUIPreferences.getInstance().setFovDarken(\n-                    !GUIPreferences.getInstance().getFovDarken());\n-            bv.refreshDisplayables();\n-            if (client.getGame().getPhase() == Phase.PHASE_MOVEMENT) {\n-                bv.clearHexImageCache();\n-            }\n-        } else if (event.getActionCommand()\n-                .equals(VIEW_TOGGLE_FIRING_SOLUTIONS)) {\n-            GUIPreferences.getInstance().setFiringSolutions(\n-                    !GUIPreferences.getInstance().getFiringSolutions());\n-            if (!GUIPreferences.getInstance().getFiringSolutions()) {\n-                bv.clearFiringSolutionData();\n-            } else {\n-                if (curPanel instanceof FiringDisplay) {\n-                    ((FiringDisplay) curPanel).setFiringSolutions();\n+        switch (event.getActionCommand()) {\n+            case FILE_GAME_SAVE:", "originalCommit": "51f48aa18efc98f32e14e6cc75be9462544d7c32", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcyOTU4Nw==", "url": "https://github.com/MegaMek/megamek/pull/1673#discussion_r379729587", "bodyText": "Exactly", "author": "Windchild292", "createdAt": "2020-02-15T04:52:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTcxNTAwMg=="}], "type": "inlineReview"}, {"oid": "f74b4dd6b0061e143ee9f2b73fb0bfe26444c209", "url": "https://github.com/MegaMek/megamek/commit/f74b4dd6b0061e143ee9f2b73fb0bfe26444c209", "message": "Changing variable declarations to Map instead of HashMap", "committedDate": "2020-02-15T15:52:12Z", "type": "commit"}]}