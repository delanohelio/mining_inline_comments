{"pr_number": 2460, "pr_title": "Fix machine gun array linking and bv", "pr_createdAt": "2020-12-01T17:44:06Z", "pr_url": "https://github.com/MegaMek/megamek/pull/2460", "timeline": [{"oid": "89ddd60c7c0d95241fc5b3fbaa0c901553ca28e5", "url": "https://github.com/MegaMek/megamek/commit/89ddd60c7c0d95241fc5b3fbaa0c901553ca28e5", "message": "Limit machine gun array BV to linked weapons", "committedDate": "2020-12-01T17:05:30Z", "type": "commit"}, {"oid": "727f800011453226a7f928dcac4dc5f6a68fd2f8", "url": "https://github.com/MegaMek/megamek/commit/727f800011453226a7f928dcac4dc5f6a68fd2f8", "message": "Improve linking machine guns to machine gun arrays", "committedDate": "2020-12-01T17:05:36Z", "type": "commit"}, {"oid": "c4900dcebbbbbd1be04f25662918ef8e62241c48", "url": "https://github.com/MegaMek/megamek/commit/c4900dcebbbbbd1be04f25662918ef8e62241c48", "message": "Factor MGA linking routine out of postLoadInit", "committedDate": "2020-12-01T17:05:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYxODA0OA==", "url": "https://github.com/MegaMek/megamek/pull/2460#discussion_r533618048", "bodyText": "This block of code appears to be repeated something like five times, perhaps we could create a utility function somewhere to reduce duplicated logic?", "author": "NickAragua", "createdAt": "2020-12-01T18:08:16Z", "path": "megamek/src/megamek/common/Aero.java", "diffHunk": "@@ -1841,14 +1841,14 @@ public int calculateBattleValue(boolean ignoreC3, boolean ignorePilot) {\n             }\n             // calc MG Array here:\n             if (wtype.hasFlag(WeaponType.F_MGA)) {\n-                double mgaBV = 0;\n-                for (Mounted possibleMG : getTotalWeaponList()) {\n-                    if (possibleMG.getType().hasFlag(WeaponType.F_MG)\n-                            && (possibleMG.getLocation() == weapon.getLocation())) {\n-                        mgaBV += possibleMG.getType().getBV(this);\n+                double mgBV = 0;", "originalCommit": "c4900dcebbbbbd1be04f25662918ef8e62241c48", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYyNjMxMw==", "url": "https://github.com/MegaMek/megamek/pull/2460#discussion_r533626313", "bodyText": "Please read the description, where I addressed this.", "author": "neoancient", "createdAt": "2020-12-01T18:21:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzYxODA0OA=="}], "type": "inlineReview"}]}