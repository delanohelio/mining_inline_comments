{"pr_number": 234, "pr_title": "Adding RestActions support for AD Search Rest API's", "pr_createdAt": "2020-09-17T06:44:25Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/234", "timeline": [{"oid": "1d07fe750a30ab6ad628c6ad54c1030a33bfda84", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/1d07fe750a30ab6ad628c6ad54c1030a33bfda84", "message": "Adding RestActions support for AD Search Rest API's", "committedDate": "2020-09-17T06:37:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE3NTA4Mw==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/234#discussion_r493175083", "bodyText": "Lets use opendistro in the action name. For example: cluster:admin/opendistro/alerting/destinations/write\nAlso you might want to end with verb like: cluster:admin/opendistro/ad/detectors/search", "author": "skkosuri-amzn", "createdAt": "2020-09-23T03:27:45Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/ad/transport/SearchAnomalyDetectorAction.java", "diffHunk": "@@ -0,0 +1,28 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.ad.transport;\n+\n+import org.elasticsearch.action.ActionType;\n+import org.elasticsearch.action.search.SearchResponse;\n+\n+public class SearchAnomalyDetectorAction extends ActionType<SearchResponse> {\n+    public static final SearchAnomalyDetectorAction INSTANCE = new SearchAnomalyDetectorAction();\n+    public static final String NAME = \"cluster:admin/ad/search/detector\";", "originalCommit": "1d07fe750a30ab6ad628c6ad54c1030a33bfda84", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc1ODUyMA==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/234#discussion_r493758520", "bodyText": "Sure that makes sense.\nWill make changes.", "author": "saratvemulapalli", "createdAt": "2020-09-23T17:16:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE3NTA4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE3NjI1NQ==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/234#discussion_r493176255", "bodyText": "NP: your rest handler is called : RestSearchAnomalyDetectorAction, Would it be better to call transport handler as TransportSearchAnomalyDetectorAction", "author": "skkosuri-amzn", "createdAt": "2020-09-23T03:32:48Z", "path": "src/main/java/com/amazon/opendistroforelasticsearch/ad/transport/SearchAnomalyResultTransportAction.java", "diffHunk": "@@ -0,0 +1,57 @@\n+/*\n+ * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\").\n+ * You may not use this file except in compliance with the License.\n+ * A copy of the License is located at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * or in the \"license\" file accompanying this file. This file is distributed\n+ * on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either\n+ * express or implied. See the License for the specific language governing\n+ * permissions and limitations under the License.\n+ */\n+\n+package com.amazon.opendistroforelasticsearch.ad.transport;\n+\n+import org.elasticsearch.action.ActionListener;\n+import org.elasticsearch.action.search.SearchRequest;\n+import org.elasticsearch.action.search.SearchResponse;\n+import org.elasticsearch.action.support.ActionFilters;\n+import org.elasticsearch.action.support.HandledTransportAction;\n+import org.elasticsearch.client.Client;\n+import org.elasticsearch.common.inject.Inject;\n+import org.elasticsearch.tasks.Task;\n+import org.elasticsearch.transport.TransportService;\n+\n+\n+public class SearchAnomalyResultTransportAction extends HandledTransportAction<SearchRequest, SearchResponse> {", "originalCommit": "1d07fe750a30ab6ad628c6ad54c1030a33bfda84", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Mzc1OTU2MQ==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/234#discussion_r493759561", "bodyText": "Thats a good point. Existing Transport Actions were named that way, so I just followed them to be consistent.\nHere are some examples:https://github.com/opendistro-for-elasticsearch/anomaly-detection/tree/master/src/main/java/com/amazon/opendistroforelasticsearch/ad/transport", "author": "saratvemulapalli", "createdAt": "2020-09-23T17:18:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzE3NjI1NQ=="}], "type": "inlineReview"}, {"oid": "4ca0da3afcc94ac0a4b7430ba2f52d685f117719", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/4ca0da3afcc94ac0a4b7430ba2f52d685f117719", "message": "Adding Unit Tests and updating Action name's", "committedDate": "2020-09-23T23:11:05Z", "type": "commit"}, {"oid": "35d28e766a0fa4084815bb51083eeee4847fa947", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/35d28e766a0fa4084815bb51083eeee4847fa947", "message": "Fixing typo for one of the Unit Test", "committedDate": "2020-09-23T23:14:46Z", "type": "commit"}, {"oid": "3e534c2b28f2a64322d5a1d39322e9f63d37ebdd", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/3e534c2b28f2a64322d5a1d39322e9f63d37ebdd", "message": "Removing .* imports", "committedDate": "2020-09-23T23:20:11Z", "type": "commit"}, {"oid": "a853b1a43cf0dbb206c525c8fa6b24321c5bacd4", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/a853b1a43cf0dbb206c525c8fa6b24321c5bacd4", "message": "Adding spotless changes", "committedDate": "2020-09-23T23:28:12Z", "type": "commit"}]}