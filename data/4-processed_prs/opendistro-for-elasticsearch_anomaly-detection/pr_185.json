{"pr_number": 185, "pr_title": "Create RFC for AD CLI", "pr_createdAt": "2020-07-09T17:44:43Z", "pr_url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/185", "timeline": [{"oid": "0bb456f758a0052979daa8dd9921ea4f721d7bc0", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/0bb456f758a0052979daa8dd9921ea4f721d7bc0", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:01:14Z", "type": "forcePushed"}, {"oid": "5240029ba7a1a43ad246f0b8a2cba6c62d8f5a2d", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/5240029ba7a1a43ad246f0b8a2cba6c62d8f5a2d", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:03:20Z", "type": "forcePushed"}, {"oid": "6ef9c96b66feb0e323da9e3ca318474faaa03500", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/6ef9c96b66feb0e323da9e3ca318474faaa03500", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:22:29Z", "type": "forcePushed"}, {"oid": "1cebce1c094f472314f3a8957c673d56d9076713", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/1cebce1c094f472314f3a8957c673d56d9076713", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:28:26Z", "type": "forcePushed"}, {"oid": "6659f59ff1254e19f13bb4403f99db8e1fd5474b", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/6659f59ff1254e19f13bb4403f99db8e1fd5474b", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:31:27Z", "type": "forcePushed"}, {"oid": "3df1a046bfe3d721209fb7f861f6819a5f8227c9", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/3df1a046bfe3d721209fb7f861f6819a5f8227c9", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:33:24Z", "type": "forcePushed"}, {"oid": "37096ef4fed15e614b6e86aea25605e6c0dce4c0", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/37096ef4fed15e614b6e86aea25605e6c0dce4c0", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:42:24Z", "type": "commit"}, {"oid": "37096ef4fed15e614b6e86aea25605e6c0dce4c0", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/37096ef4fed15e614b6e86aea25605e6c0dce4c0", "message": "Create RFC for AD CLI\n\nThis is the RFC for the Anomaly Detection CLI feature to be built on AD.", "committedDate": "2020-07-09T20:42:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ4ODAzMQ==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/185#discussion_r452488031", "bodyText": "How about we put a Github issue link here, so community can add comments easily.", "author": "ylwu-amzn", "createdAt": "2020-07-09T21:02:03Z", "path": "cli/rfc-adcli.md", "diffHunk": "@@ -0,0 +1,42 @@\n+# RFC: Anomaly Detection CLI\n+\n+### JUNE 2020\n+\n+### Introduction\n+\n+Anomaly detection is a technique used to identify unexpected behavior that does not follow expected pattern called outliers. The [anomaly detection plugin](https://github.com/opendistro-for-elasticsearch/anomaly-detection) makes it easy to detect anomalies in time series data stored in Elasticsearch in near real-time using the Random Cut Forest (RCF) algorithm. The [anomaly detection kibana plugin](https://github.com/opendistro-for-elasticsearch/anomaly-detection-kibana-plugin) lets user to set up this job by creating detectors for given index. Though kibana provides ease of use in setting up this job, especially to beginners, a simple CLI command can easily adjust configurations for a large group of detectors in a scalable way. For a common task, user might repeat certain steps within kibana manually, where user can create a script with few lines of command and it will do the same work quicker than kibana.\n+\n+This RFC proposes a design for a command line tool to give our users an option to create Anomaly detection configurations without having to open Kibana UI.Users can leverage CLI to perform CRUD operations to set up anomaly detection without the need to go through series of steps in UI. This CLI will be built on top of [anomaly detection plugin](https://github.com/opendistro-for-elasticsearch/anomaly-detection) by transforming user input into [anomaly detection api](https://opendistro.github.io/for-elasticsearch-docs/docs/ad/api/) based on commands. This will significantly improve the operations and developer productivity in managing AD for large number of indexes with various settings.\n+\n+\n+### AD CLI\n+\n+AD CLI aims at providing basic functionalities like create, update, delete, start, stop detectors in simple commands. This CLI provides greater flexibility of use. User can use CLI to easily do things that are difficult or sometimes impossible to do with kibana UI. This doesn\u2019t use any additional  system resources to load any of graphical part, thus making it simpler and faster than UI. \n+\n+### Architecture\n+\n+The AD CLI is an add-on to the Anomaly Detection. Hence, it is imperative that ES cluster has already installed the AD plugin. AD CLI acts like a wrapper which helps user to easily interact with Anomaly Detection plugin.\n+\n+1. **Create/Update AD Configuration**\n+\n+      It is possible to represent the AD configuration settings found in kibana in a text format. This will help users to store configurations in source control tools, so that one can track history of configurations and share across users. User may also want to copy detectors across domains or stages ( dev/staging/prod) for testing. This CLI will accept the detector settings in a text file, convert the user request into [anomaly detection api](https://opendistro.github.io/for-elasticsearch-docs/docs/ad/api/) and execute those REST calls to create or update detectors for given cluster or domain\n+\n+ ![](Create.png)\n+2. **Start/Stop/List/Delete Detectors**\n+\n+   Few operations like start, stop, list and delete detector(s) can also be performed using AD CLI\n+\n+![](Start.png)\n+\n+**CRUD operation is just a beginning for AD CLI. We can easily identify common use-cases from users which involves multiple operations with AD plugin like copy, export, import , etc... can be easily extracted into commands and be available to the users in multiple releases.**\n+\n+\n+### Request for Comments:\n+\n+We would like comments and feedback on the proposal for building AD CLI tool. Some specific questions we\u2019re seeking feedback include", "originalCommit": "37096ef4fed15e614b6e86aea25605e6c0dce4c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ5NzIzNA==", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/pull/185#discussion_r452497234", "bodyText": "Created issue and included the link.", "author": "VijayanB", "createdAt": "2020-07-09T21:21:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjQ4ODAzMQ=="}], "type": "inlineReview"}, {"oid": "5fda487c7e52e2fbd6b62e7878e94259d556c907", "url": "https://github.com/opendistro-for-elasticsearch/anomaly-detection/commit/5fda487c7e52e2fbd6b62e7878e94259d556c907", "message": "Update rfc-adcli.md", "committedDate": "2020-07-09T21:19:41Z", "type": "commit"}]}