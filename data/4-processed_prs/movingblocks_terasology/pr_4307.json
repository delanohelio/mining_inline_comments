{"pr_number": 4307, "pr_title": "ci(subsystems): Make TypeHandlerLibrary publishable with engine's version", "pr_createdAt": "2020-12-09T06:41:26Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/4307", "timeline": [{"oid": "80afee383fb3d7a17e693d5e3739ea44a2ed882a", "url": "https://github.com/MovingBlocks/Terasology/commit/80afee383fb3d7a17e693d5e3739ea44a2ed882a", "message": "feat(subsystems): Make TypeHandlerLibrary publishable with engine's version.", "committedDate": "2020-12-09T06:41:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NTI0NA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539055244", "bodyText": "why do we replace this here? \ud83e\udd14\nI would guess that\na) we used common.gradle for something and\nb) publish.gradle does (should) not duplicate what's in common.gradle", "author": "jdrueckert", "createdAt": "2020-12-09T06:58:53Z", "path": "subsystems/TypeHandlerLibrary/build.gradle.kts", "diffHunk": "@@ -6,7 +6,10 @@ plugins {\n     `java-library`\n }\n \n-apply(from = \"$rootDir/config/gradle/common.gradle\")\n+apply(from = \"$rootDir/config/gradle/publish.gradle\")", "originalCommit": "80afee383fb3d7a17e693d5e3739ea44a2ed882a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1ODAwMQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539058001", "bodyText": "common.gradle provides:\n0. repositories for artifact resolving\n\npmd,spotbug,checkstyle etc\n\npublish.gradle - provides:\n0. common.gradle logic\n\npublish to our maven repository logic.\n\nWe should publish this subsystem in external repo for exposing this subsystem to single module builds. (aka make it accessable in engineless builds)", "author": "DarkWeird", "createdAt": "2020-12-09T07:05:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NTI0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4MzUyOQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539483529", "bodyText": "Also: publish.gradle effectively extends common.gradle to avoid said overlap. This just means THL goes from being a generic Java project to one that gets published, which sounds about right based on the PR title (we just need to make sure we're on top of whatever added version tag it uses)", "author": "Cervator", "createdAt": "2020-12-09T17:03:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NTI0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ3NzU5NQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539477595", "bodyText": "Should subsystems be published to group \"org.terasology.subsystems\"?", "author": "jdrueckert", "createdAt": "2020-12-09T16:56:15Z", "path": "subsystems/TypeHandlerLibrary/build.gradle.kts", "diffHunk": "@@ -6,7 +6,10 @@ plugins {\n     `java-library`\n }\n \n-apply(from = \"$rootDir/config/gradle/common.gradle\")\n+apply(from = \"$rootDir/config/gradle/publish.gradle\")\n+\n+group = \"org.terasology\"", "originalCommit": "80afee383fb3d7a17e693d5e3739ea44a2ed882a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ3OTUzNg==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539479536", "bodyText": "Examples from artifactory:\nengine\n<dependency>\n    <groupId>org.terasology.engine</groupId>\n    <artifactId>engine</artifactId>\n    <version>4.1.0</version>\n    <type>pom</type>\n</dependency>\n\nPC facade\n<dependency>\n    <groupId>org.terasology.facades</groupId>\n    <artifactId>PC</artifactId>\n    <version>4.1.0</version>\n    <type>pom</type>\n</dependency>\n\nSo maybe for type handler library subsystem we could opt for\n<dependency>\n    <groupId>org.terasology.subsystems</groupId>\n    <artifactId>TypeHandlerLibrary</artifactId>\n    <version>4.1.0</version>\n    <type>pom</type>\n</dependency>", "author": "jdrueckert", "createdAt": "2020-12-09T16:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ3NzU5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4Mzk3OA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539483978", "bodyText": "Concur, org.terasology.subsystems sounds great \ud83d\udc4d", "author": "Cervator", "createdAt": "2020-12-09T17:03:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ3NzU5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4NDI3MA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539484270", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            group = \"org.terasology\"\n          \n          \n            \n            group = \"org.terasology.subsystems\"", "author": "jdrueckert", "createdAt": "2020-12-09T17:04:19Z", "path": "subsystems/TypeHandlerLibrary/build.gradle.kts", "diffHunk": "@@ -6,7 +6,10 @@ plugins {\n     `java-library`\n }\n \n-apply(from = \"$rootDir/config/gradle/common.gradle\")\n+apply(from = \"$rootDir/config/gradle/publish.gradle\")\n+\n+group = \"org.terasology\"", "originalCommit": "80afee383fb3d7a17e693d5e3739ea44a2ed882a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4NDMxMg==", "url": "https://github.com/MovingBlocks/Terasology/pull/4307#discussion_r539484312", "bodyText": "Ah there we go, there's the version link, which is fine if they'll always be in sync, which seems reasonable :-)", "author": "Cervator", "createdAt": "2020-12-09T17:04:22Z", "path": "subsystems/TypeHandlerLibrary/build.gradle.kts", "diffHunk": "@@ -6,7 +6,10 @@ plugins {\n     `java-library`\n }\n \n-apply(from = \"$rootDir/config/gradle/common.gradle\")\n+apply(from = \"$rootDir/config/gradle/publish.gradle\")\n+\n+group = \"org.terasology\"\n+version = project(\":engine\").version", "originalCommit": "80afee383fb3d7a17e693d5e3739ea44a2ed882a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "68640c44847820762eb666e247b52f44668de1c4", "url": "https://github.com/MovingBlocks/Terasology/commit/68640c44847820762eb666e247b52f44668de1c4", "message": "Update subsystems/TypeHandlerLibrary/build.gradle.kts\n\nCo-authored-by: jdrueckert <jd.rueckert@googlemail.com>", "committedDate": "2020-12-09T17:05:16Z", "type": "commit"}]}