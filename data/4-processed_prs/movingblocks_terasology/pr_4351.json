{"pr_number": 4351, "pr_title": "feat(JOML): migrate BlockEntitySystem", "pr_createdAt": "2020-12-29T17:53:58Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/4351", "timeline": [{"oid": "7da40644ededd5f7bd544d60fd716fe9f9782510", "url": "https://github.com/MovingBlocks/Terasology/commit/7da40644ededd5f7bd544d60fd716fe9f9782510", "message": "feat(JOML): migrate BlockEntitySystem", "committedDate": "2020-12-29T17:38:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1ODE1MA==", "url": "https://github.com/MovingBlocks/Terasology/pull/4351#discussion_r550358150", "bodyText": "This makes we wonder whether BlockComponent should just expose Vector3ic getPosition() for read-only access \ud83e\udd14", "author": "skaldarnar", "createdAt": "2020-12-30T23:46:40Z", "path": "engine/src/main/java/org/terasology/world/block/entity/BlockEntitySystem.java", "diffHunk": "@@ -88,12 +87,12 @@ public void doDestroy(DoDestroyEvent event, EntityRef entity, ActAsBlockComponen\n     @ReceiveEvent(priority = EventPriority.PRIORITY_LOW)\n     public void doDestroy(DoDestroyEvent event, EntityRef entity, BlockComponent blockComponent) {\n         commonDestroyed(event, entity, blockComponent.block);\n-        worldProvider.setBlock(blockComponent.position, blockManager.getBlock(BlockManager.AIR_ID));\n+        worldProvider.setBlock(blockComponent.getPosition(new Vector3i()), blockManager.getBlock(BlockManager.AIR_ID));", "originalCommit": "7da40644ededd5f7bd544d60fd716fe9f9782510", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQxMDUwMw==", "url": "https://github.com/MovingBlocks/Terasology/pull/4351#discussion_r550410503", "bodyText": "that's ideally what I would like to do.  There are 67 other places this would need to be changed in. we might not have to change that much since the methods they adapt into have been migrated. thats around 20 or so modules so I think maybe that might be better to just do right away. we've already converted around half so a good portion have been migrated over already to this other getPosition Method.", "author": "pollend", "createdAt": "2020-12-31T06:44:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1ODE1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ1NTA3NQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/4351#discussion_r550455075", "bodyText": "I wouldn't do it in this PR, but I might just make another PR for that today (after getting through some more JOML PRs \ud83d\ude43 )\nLGTM as is \ud83d\udc4d", "author": "skaldarnar", "createdAt": "2020-12-31T10:45:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDM1ODE1MA=="}], "type": "inlineReview"}, {"oid": "628f4397d7117681dddcaffeb3e620dc7676b428", "url": "https://github.com/MovingBlocks/Terasology/commit/628f4397d7117681dddcaffeb3e620dc7676b428", "message": "Merge branch 'develop' into feature/joml-migrate-BlockEntitySystem", "committedDate": "2020-12-31T10:45:04Z", "type": "commit"}, {"oid": "bd7d5e0f196181840710d106c4580bd738434835", "url": "https://github.com/MovingBlocks/Terasology/commit/bd7d5e0f196181840710d106c4580bd738434835", "message": "Merge branch 'develop' into feature/joml-migrate-BlockEntitySystem", "committedDate": "2020-12-31T11:22:31Z", "type": "commit"}]}