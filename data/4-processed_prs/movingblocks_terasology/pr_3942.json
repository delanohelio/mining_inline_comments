{"pr_number": 3942, "pr_title": "chore: Remove core module line-up", "pr_createdAt": "2020-05-09T19:14:50Z", "pr_url": "https://github.com/MovingBlocks/Terasology/pull/3942", "timeline": [{"oid": "d420902ef221c07b2ba1065f3935c9f92d9d4c94", "url": "https://github.com/MovingBlocks/Terasology/commit/d420902ef221c07b2ba1065f3935c9f92d9d4c94", "message": "chore: Remove CoreSampleGameplay\n\nThe module can now be found it its own repository:\nhttps://github.com/Terasology/CoreSampleGameplay", "committedDate": "2020-05-09T15:05:42Z", "type": "commit"}, {"oid": "5b3f475fd8ce5a93b79e8c3cfe99ec97f5346354", "url": "https://github.com/MovingBlocks/Terasology/commit/5b3f475fd8ce5a93b79e8c3cfe99ec97f5346354", "message": "chore: Remove Core module\n\nThe module is replaced by several new modules:\n\n- https://github.com/Terasology/CoreAssets\n- https://github.com/Terasology/CoreAdvancedAssets\n- https://github.com/Terasology/CoreWorlds\n- https://github.com/Terasology/Debugging\n- https://github.com/Terasology/Drops\n- https://github.com/Terasology/Explosives\n- https://github.com/Terasology/Furnishings", "committedDate": "2020-05-09T19:12:59Z", "type": "commit"}, {"oid": "93d36a4d83284d5ed46b9a02f69ed98a566dc2ca", "url": "https://github.com/MovingBlocks/Terasology/commit/93d36a4d83284d5ed46b9a02f69ed98a566dc2ca", "message": "fix: missed some references to 'Core'", "committedDate": "2020-05-09T19:21:28Z", "type": "commit"}, {"oid": "e44b7a5d676bbcd49321ed42c751df97b7d53130", "url": "https://github.com/MovingBlocks/Terasology/commit/e44b7a5d676bbcd49321ed42c751df97b7d53130", "message": "chore: Removed BiomesAPI module\n\nThe module now lives in its own repo:\nhttps://github.com/Terasology/BiomesAPI", "committedDate": "2020-05-09T19:22:56Z", "type": "commit"}, {"oid": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "url": "https://github.com/MovingBlocks/Terasology/commit/bd162d4c9b6f6c61997c782daee5104e28576d4a", "message": "fix: forgot a reference on BiomesAPI", "committedDate": "2020-05-09T20:06:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDM3NA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540374", "bodyText": "What is this file used for? I don't think it's up to date, is it?", "author": "skaldarnar", "createdAt": "2020-05-09T20:09:00Z", "path": "docs/Modules.md", "diffHunk": "@@ -57,7 +57,7 @@ Here's a list of modules bundled with the game by default (this line-up will cha\n * Core - mandatory content needed for normal game launch\n * [CoreAssets](https://github.com/Terasology/CoreAssets) - base assets extracted from Core\n * [CoreBlocks](https://github.com/Terasology/CoreBlocks) - base blocks extracted from Core\n-* CoreSampleGameplay - gameplay front for Core - allows modules to depend on Core without the default starting inventory\n+* [CoreSampleGameplay](https://github.com/Terasology/CoreSampleGameplay) - default gameplay with a few core modules enabled", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MTAyMQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422551021", "bodyText": "I've done best effort to keep Modules.md in sync manually with the omega lineup, yeah, but that's a poor approach. More automation would be better (like the module site)", "author": "Cervator", "createdAt": "2020-05-09T21:55:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDM3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDQ3MA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540470", "bodyText": "I don't know what this gameManifest.json` is used for, to be honest. I just replaced this value with the builder sample world as that is the only one still living in the engine repo....\nDoes anybody know whether the file is still used?", "author": "skaldarnar", "createdAt": "2020-05-09T20:09:57Z", "path": "engine-tests/out/test/resources/gameManifest.json", "diffHunk": "@@ -10,7 +10,7 @@\n       \"title\": \"main\",\n       \"seed\": \"naqrhaKV1lUofG7PLIJcOfDlUiPs3Jmp\",\n       \"time\": 25538256,\n-      \"worldGenerator\": \"Core:heightMap\"\n+      \"worldGenerator\": \"BuilderSampleGameplay:BuilderSampleWorld\"", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MTI2Nw==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422551267", "bodyText": "Good question. Being that it was set to a generator that doesn't work ... probably either not being used or that particular value doesn't matter anyway :-)\nWe don't generally delete unit tests though, so maybe something is hiding somewhere and still at least trying to use this \ud83e\udd14 Unless maybe it got moved out as part of the Record & Replay system, or for the MTE?", "author": "Cervator", "createdAt": "2020-05-09T21:58:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDQ3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYyNzMzMA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422627330", "bodyText": "If a unit test is using this and the value does not matter, we should make that clearer by using something like Gooey:DummyWorld or similar. If it is not used, we should delete it...\nI can try to delete it and see if anything breaks in the tests...", "author": "skaldarnar", "createdAt": "2020-05-10T10:56:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDQ3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDQ5OQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540499", "bodyText": "Same here, the file seems to be same as the one in the out folder...", "author": "skaldarnar", "createdAt": "2020-05-09T20:10:16Z", "path": "engine-tests/src/test/resources/gameManifest.json", "diffHunk": "@@ -10,7 +10,7 @@\n       \"title\": \"main\",\n       \"seed\": \"naqrhaKV1lUofG7PLIJcOfDlUiPs3Jmp\",\n       \"time\": 25538256,\n-      \"worldGenerator\": \"Core:heightMap\"\n+      \"worldGenerator\": \"BuilderSampleGameplay:BuilderSampleWorld\"", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDU5Ng==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540596", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public static final Name CORE_GAMEPLAY_MODULE = new Name(\"coresamplegameplay\");\n          \n          \n            \n                public static final Name CORE_GAMEPLAY_MODULE = new Name(\"buildersamplegameplay\");", "author": "skaldarnar", "createdAt": "2020-05-09T20:11:06Z", "path": "engine/src/main/java/org/terasology/engine/TerasologyConstants.java", "diffHunk": "@@ -56,6 +56,8 @@\n     /**\n      * Name of the core gameplay module. The core gameplay module adds a minimal environment for some basic gameplay.\n      */\n+    //TODO: CSG moved out of the engine repo, so this should either be removed or reference the Builder Sample Gameplay\n+    //      which still lives in the engine repo.\n     public static final Name CORE_GAMEPLAY_MODULE = new Name(\"coresamplegameplay\");", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MTM2Mg==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422551362", "bodyText": "That's fine by me and IIRC we have some logic somewhere else that attempts to detect JoshariasSurvival as the default when the full module lineup is present anyway.", "author": "Cervator", "createdAt": "2020-05-09T21:59:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDU5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY0MA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540640", "bodyText": "I'm not sure what these constants are used for... would it make sense to change this to buildersamplegameplay?", "author": "skaldarnar", "createdAt": "2020-05-09T20:11:38Z", "path": "engine/src/main/java/org/terasology/engine/TerasologyConstants.java", "diffHunk": "@@ -56,6 +56,8 @@\n     /**\n      * Name of the core gameplay module. The core gameplay module adds a minimal environment for some basic gameplay.\n      */\n+    //TODO: CSG moved out of the engine repo, so this should either be removed or reference the Builder Sample Gameplay", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MTQ4MQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422551481", "bodyText": "Some of the constants are surely still in use, but maybe not all. I think this should be fine to also change to BSG", "author": "Cervator", "createdAt": "2020-05-09T22:00:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY4NA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540684", "bodyText": "I think the whole special handling for different keyboard layouts is \"broken\" in the sense that it does not work with modules at all... we might just remove it at this point... \ud83e\udd37", "author": "skaldarnar", "createdAt": "2020-05-09T20:12:22Z", "path": "engine/src/main/java/org/terasology/input/internal/BindCommands.java", "diffHunk": "@@ -58,7 +58,6 @@ public String bindKey(@CommandParam(\"key\") String key, @CommandParam(\"function\")\n         AZERTY.put(KeyId.Z, new SimpleUri(\"engine:forwards\"));\n         AZERTY.put(KeyId.S, new SimpleUri(\"engine:backwards\"));\n         AZERTY.put(KeyId.Q, new SimpleUri(\"engine:left\"));\n-        AZERTY.put(KeyId.A, new SimpleUri(\"Core:dropItem\"));", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MTYwOQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422551609", "bodyText": "Yeah the azerty and the one (or two?) other keyboard layout commands we have might be good examples of the sort of code we took in from one contributor who found it useful at some point in the past, but it may not be worth maintaining as-is if we can gain some benefit from cleaning up and later re-adding if there's a better way to do it and more interest in using it.", "author": "Cervator", "createdAt": "2020-05-09T22:02:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU3NDM5Nw==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422574397", "bodyText": "how would we want to handle different keyboard layouts? I also don't really like how we use annotations to register bindings against a whole class. Inventory has 15 or so classes just dedicated to keybindings. Probably need to look at how bindings work and also look at maybe how some other engines handle bindings and what we can do to make the process better. Some key press events happen depending on context so different events can be handled by the same key depending on what the player is doing, i.e holding X item or doing x action. probably a way to handle bindings depending on conditions in the engine.", "author": "pollend", "createdAt": "2020-05-10T02:37:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2NDc3Mg==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422664772", "bodyText": "I am a person who was glad to see the button for switching to a dvorak keyboard layout in the config screen! I just say that as +1 to interest for Cervator's \"does anyone use this?\" point, but I know it does nothing to address your concerns about its implementation.\n(I have ambitions for input configuration stuff myself, but I won't get to act on them for a while and this PR is not the place.)", "author": "keturn", "createdAt": "2020-05-10T16:04:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjY2NDg5OA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422664898", "bodyText": "Feedback appreciated @keturn - would indeed love to see somebody actually using one of those layouts help make the implementation a little better \ud83d\ude01", "author": "Cervator", "createdAt": "2020-05-10T16:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDY4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDgzOA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422540838", "bodyText": "I don't know how to deal with this, but as it is, that's a potential bug waiting around the corner... at least, there should be a generic way for modules to mark that some world gen is not suited for advanced universe setup", "author": "skaldarnar", "createdAt": "2020-05-09T20:13:29Z", "path": "engine/src/main/java/org/terasology/rendering/nui/layers/mainMenu/UniverseSetupScreen.java", "diffHunk": "@@ -198,7 +198,9 @@ public void set(String value) {\n         });\n \n         WidgetUtil.trySubscribe(this, \"addGenerator\", button -> {\n-            if (worldGenerator.getSelection().getUri().toString().equals(\"Core:heightMap\")) {\n+            //TODO: there should not be a reference from the engine to some module - the engine must be agnostic to what\n+            //      modules may do\n+            if (worldGenerator.getSelection().getUri().toString().equals(\"CoreWorlds:heightMap\")) {", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1Mjk0OA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422552948", "bodyText": "Yeah, that whole project itself (multiworld) really needs to be resumed and finished. Along with the better phasing of things during game setup so you can get things like block registration and hot keys sorted out before you enter the world.", "author": "Cervator", "createdAt": "2020-05-09T22:15:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MDgzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MTI3Nw==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422541277", "bodyText": "This was a TODO even before this PR... @kBlaszczyk you just touched the particle system ... \ud83d\ude44 Jokes aside, how can we get this out of the engine?", "author": "skaldarnar", "createdAt": "2020-05-09T20:18:08Z", "path": "engine/src/main/java/org/terasology/world/block/entity/BlockEntitySystem.java", "diffHunk": "@@ -163,8 +163,9 @@ private void commonDestroyed(DoDestroyEvent event, EntityRef entity, Block block\n         if (blockDamageModifierComponent == null || !blockDamageModifierComponent.skipPerBlockEffects) {\n             // dust particle effect\n             if (entity.hasComponent(LocationComponent.class) && block.isDebrisOnDestroy()) {\n+                //TODO: particle system stuff should be split out better - this is effectively a stealth dependency on", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MTQyNw==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422541427", "bodyText": "what is this override.cfg used for?", "author": "skaldarnar", "createdAt": "2020-05-09T20:19:27Z", "path": "templates/override.cfg", "diffHunk": "@@ -6,6 +6,6 @@\n     \"defaultGameplayModuleName\": \"CoreSampleGameplay\"\n   },\n   \"worldGeneration\": {\n-    \"defaultGenerator\": \"Core:facetedperlin\"\n+    \"defaultGenerator\": \"CoreWorlds:facetedperlin\"", "originalCommit": "bd162d4c9b6f6c61997c782daee5104e28576d4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU1MzA2NQ==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422553065", "bodyText": "See https://github.com/MovingBlocks/Terasology/blob/develop/docs/Playing.md#configuring-a-server :-) Also works for local development when you need to test via headless server.", "author": "Cervator", "createdAt": "2020-05-09T22:17:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MTQyNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjYyNzYzNA==", "url": "https://github.com/MovingBlocks/Terasology/pull/3942#discussion_r422627634", "bodyText": "So, should we reference the world generator that might not be present here, or stick with the sample builder world thingy that still lives in the engine repo?", "author": "skaldarnar", "createdAt": "2020-05-10T10:58:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjU0MTQyNw=="}], "type": "inlineReview"}]}