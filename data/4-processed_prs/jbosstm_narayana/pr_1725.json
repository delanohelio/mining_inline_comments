{"pr_number": 1725, "pr_title": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible ", "pr_createdAt": "2020-11-13T21:51:05Z", "pr_url": "https://github.com/jbosstm/narayana/pull/1725", "timeline": [{"oid": "7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "url": "https://github.com/jbosstm/narayana/commit/7e190455b9ac41ab7a50c14ce63acf7a5e09d9b3", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible", "committedDate": "2020-11-16T16:31:39Z", "type": "forcePushed"}, {"oid": "85800d19396611d3053e59ac5e813932c3735d1d", "url": "https://github.com/jbosstm/narayana/commit/85800d19396611d3053e59ac5e813932c3735d1d", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible", "committedDate": "2020-11-18T10:17:43Z", "type": "forcePushed"}, {"oid": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "url": "https://github.com/jbosstm/narayana/commit/211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible", "committedDate": "2020-11-18T13:16:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA5OTM0Nw==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526099347", "bodyText": "this will be ...obtained, , response content:...", "author": "xstefank", "createdAt": "2020-11-18T13:47:44Z", "path": "rts/lra/client/src/main/java/io/narayana/lra/client/NarayanaLRAClient.java", "diffHunk": "@@ -530,15 +539,15 @@ public LRAStatus getStatus(URI uri) throws WebApplicationException {\n \n         try {\n             client = getClient();\n-            response = client.target(base)\n+            response = client.target(coordinatorUrl)\n                 .path(String.format(STATUS_PATH, LRAConstants.getLRAUid(uri)))\n                 .request()\n                 .get();\n \n             if (response.getStatus() == NOT_FOUND.getStatusCode()) {\n-                String responseContent = response.readEntity(String.class);\n-                String errorMsg = \"The requested LRA it '\" + lraId + \"' was not found and the status can't be obtained\"\n-                    + (responseContent != null ? \": \" + responseContent : \"\");\n+                String responseEntity = response.hasEntity() ? response.readEntity(String.class) : \"\";\n+                String errorMsg = \"The requested LRA it '\" + lraId + \"' was not found and the status can't be obtained, \"\n+                        + \", response content: \" + responseEntity;", "originalCommit": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEyMjQxMg==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526122412", "bodyText": "+1", "author": "ochaloup", "createdAt": "2020-11-18T14:19:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjA5OTM0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTA5MQ==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526101091", "bodyText": "is this still used since you've switched to URL?", "author": "xstefank", "createdAt": "2020-11-18T13:50:10Z", "path": "rts/lra/coordinator/pom.xml", "diffHunk": "@@ -18,13 +18,9 @@\n             -Djboss.bind.address=[::1] -Djboss.bind.address.management=[::1] -Djboss.bind.address.unsecure=[::1]\n             -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true\n         </ipv6.server.jvm.args>\n-        <modular.jdk.args/>\n-        <modular.jdk.props/>\n-        <!-- the resource path of the coordinator - must match the deployment URL (see arquillian.xml) -->\n+        <lra.coordinator.host>localhost</lra.coordinator.host>\n+        <lra.coordinator.port>8080</lra.coordinator.port>", "originalCommit": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEzNDUwMw==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526134503", "bodyText": "you are right, the port won't be needed, that's overridden with use of lra.coordinator.url", "author": "ochaloup", "createdAt": "2020-11-18T14:34:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTA5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTI0OQ==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526101249", "bodyText": "is this needed when there is url?", "author": "xstefank", "createdAt": "2020-11-18T13:50:25Z", "path": "rts/lra/coordinator/pom.xml", "diffHunk": "@@ -142,6 +138,10 @@\n             <activation>\n                 <activeByDefault>false</activeByDefault>\n             </activation>\n+            <properties>\n+                <lra.coordinator.host>localhost</lra.coordinator.host>", "originalCommit": "211fdeefebc7b8f505dd8d5ef8620813d4f6d7ab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEyMDQ5Ng==", "url": "https://github.com/jbosstm/narayana/pull/1725#discussion_r526120496", "bodyText": "Yes. It's needed as arquillian.xml defines managementAddress which is used by arq extension to find where the management can be contacted. This differentiation is needed on ipv4 vs ipv6 here (as it's already defined here in pom.xml)", "author": "ochaloup", "createdAt": "2020-11-18T14:17:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjEwMTI0OQ=="}], "type": "inlineReview"}, {"oid": "de043b066204257f7811056dc505d56baa7b8431", "url": "https://github.com/jbosstm/narayana/commit/de043b066204257f7811056dc505d56baa7b8431", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible", "committedDate": "2020-11-18T14:21:11Z", "type": "commit"}, {"oid": "de043b066204257f7811056dc505d56baa7b8431", "url": "https://github.com/jbosstm/narayana/commit/de043b066204257f7811056dc505d56baa7b8431", "message": "[JBTM-3393] narayana LRA client: cleaning and making it more flexible", "committedDate": "2020-11-18T14:21:11Z", "type": "forcePushed"}]}