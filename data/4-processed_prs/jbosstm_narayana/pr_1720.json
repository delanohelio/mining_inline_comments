{"pr_number": 1720, "pr_title": "JBTM-3387 NarayanaLRAClientIT#testGetAllLRAs doesn't close started LRA", "pr_createdAt": "2020-11-12T15:32:21Z", "pr_url": "https://github.com/jbosstm/narayana/pull/1720", "timeline": [{"oid": "71570ae94b2caab24f97756f1c4460046a45737c", "url": "https://github.com/jbosstm/narayana/commit/71570ae94b2caab24f97756f1c4460046a45737c", "message": "JBTM-3387 NarayanaLRAClientIT#testGetAllLRAs doesn't close started LRA", "committedDate": "2020-11-12T15:31:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0NDI3MQ==", "url": "https://github.com/jbosstm/narayana/pull/1720#discussion_r522344271", "bodyText": "Would not be good to put this under finally block?", "author": "ochaloup", "createdAt": "2020-11-12T19:01:47Z", "path": "rts/lra/test/basic/src/test/java/io/narayana/lra/arquillian/client/NarayanaLRAClientIT.java", "diffHunk": "@@ -52,8 +52,12 @@ public void testGetAllLRAs() {\n         URI lra = lraClient.startLRA(\"test-lra\");\n \n         List<LRAData> allLRAs = lraClient.getAllLRAs();\n-\n         Assert.assertTrue(allLRAs.stream().anyMatch(lraData -> lraData.getLraId().equals(lra.toASCIIString())));\n+\n+        lraClient.closeLRA(lra);", "originalCommit": "71570ae94b2caab24f97756f1c4460046a45737c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjgwMDg2NA==", "url": "https://github.com/jbosstm/narayana/pull/1720#discussion_r522800864", "bodyText": "I don't think there is a need. We don't do that in other tests AFAICT. We expect that the LRA coordinator is restarted (thus LRAs are cleared) between runs. Maybe we can go through all tests and fix this, but personally, I don't think that it is necessary.", "author": "xstefank", "createdAt": "2020-11-13T08:41:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjM0NDI3MQ=="}], "type": "inlineReview"}]}