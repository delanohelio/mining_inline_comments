{"pr_number": 627, "pr_title": "Release client plugins once Substrate release is successful", "pr_createdAt": "2020-05-27T10:49:13Z", "pr_url": "https://github.com/gluonhq/substrate/pull/627", "timeline": [{"oid": "be61e7a4cd3becd994c8193fef0dc188014f89a0", "url": "https://github.com/gluonhq/substrate/commit/be61e7a4cd3becd994c8193fef0dc188014f89a0", "message": "Release client plugins once Substrate release is successful", "committedDate": "2020-05-27T10:51:38Z", "type": "commit"}, {"oid": "be61e7a4cd3becd994c8193fef0dc188014f89a0", "url": "https://github.com/gluonhq/substrate/commit/be61e7a4cd3becd994c8193fef0dc188014f89a0", "message": "Release client plugins once Substrate release is successful", "committedDate": "2020-05-27T10:51:38Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcxNjEzNA==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431716134", "bodyText": "shouldn't this be gluonhq?", "author": "johanvos", "createdAt": "2020-05-28T09:51:19Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=abhinayagarwal/client-maven-plugin", "originalCommit": "be61e7a4cd3becd994c8193fef0dc188014f89a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcxODM2Mg==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431718362", "bodyText": "Yup", "author": "abhinayagarwal", "createdAt": "2020-05-28T09:55:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcxNjEzNA=="}], "type": "inlineReview"}, {"oid": "b29b1cb72df9d3c3956276038fcde1f257614b75", "url": "https://github.com/gluonhq/substrate/commit/b29b1cb72df9d3c3956276038fcde1f257614b75", "message": "Remove test data", "committedDate": "2020-05-28T09:58:28Z", "type": "commit"}, {"oid": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "url": "https://github.com/gluonhq/substrate/commit/07d91e62cb7b24237e1504ebf1462bb64bbc933c", "message": "Fix github actions config file", "committedDate": "2020-05-28T10:02:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzQ3OQ==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723479", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:15Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false\n+git commit pom.xml -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+mvn versions:set -DremoveSnapshot\n+CLIENT_PROJECT_VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+# Commit and push tag\n+git commit pom.xml -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzQ4NA==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723484", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:16Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzQ5MA==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723490", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:17Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false\n+git commit pom.xml -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+mvn versions:set -DremoveSnapshot\n+CLIENT_PROJECT_VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+# Commit and push tag\n+git commit pom.xml -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION\n+git push https://gluon-bot:$2@github.com/$CLIENT_MAVEN_REPO_SLUG $CLIENT_PROJECT_VERSION\n+\n+###############################\n+# \n+# Release client-gradle-plugin\n+#\n+###############################\n+cd $HOME/client-gradle-plugin\n+# Update Substrate version\n+sed -i \"0,/com.gluonhq:substrate:.*/s//com.gluonhq:substrate:$1'/\" build.gradle\n+git commit build.gradle -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+sed -i \"0,/^version '.*'/s//version '$CLIENT_PROJECT_VERSION'/\" build.gradle\n+# Commit and push tag\n+git commit build.gradle -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION\n+git push https://gluon-bot:$2@github.com/$CLIENT_GRADLE_REPO_SLUG $CLIENT_PROJECT_VERSION", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzUwMQ==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723501", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:18Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false\n+git commit pom.xml -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+mvn versions:set -DremoveSnapshot\n+CLIENT_PROJECT_VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+# Commit and push tag\n+git commit pom.xml -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION\n+git push https://gluon-bot:$2@github.com/$CLIENT_MAVEN_REPO_SLUG $CLIENT_PROJECT_VERSION\n+\n+###############################\n+# \n+# Release client-gradle-plugin\n+#\n+###############################\n+cd $HOME/client-gradle-plugin", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzUxNA==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723514", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:19Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzUyMw==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723523", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:20Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false\n+git commit pom.xml -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+mvn versions:set -DremoveSnapshot\n+CLIENT_PROJECT_VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+# Commit and push tag\n+git commit pom.xml -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION\n+git push https://gluon-bot:$2@github.com/$CLIENT_MAVEN_REPO_SLUG $CLIENT_PROJECT_VERSION", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTcyMzUzNQ==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431723535", "bodyText": "Issue found: Double quote to prevent globbing and word splitting.", "author": "eugener", "createdAt": "2020-05-28T10:04:21Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc3MjU5Ng==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431772596", "bodyText": "I would recalculate the value for CLIENT_PROJECT_VERSION. It is not guaranteed that the version for the maven and gradle client plugin will always be the same.", "author": "tiainen", "createdAt": "2020-05-28T11:41:08Z", "path": ".github/scripts/release-plugins.sh", "diffHunk": "@@ -0,0 +1,44 @@\n+#!/usr/bin/env bash\n+\n+git config --global user.email \"githubbot@gluonhq.com\"\n+git config --global user.name \"Gluon Bot\"\n+\n+CLIENT_MAVEN_REPO_SLUG=gluonhq/client-maven-plugin\n+CLIENT_GRADLE_REPO_SLUG=gluonhq/client-gradle-plugin\n+\n+cd $HOME\n+git clone --depth 5 https://github.com/$CLIENT_MAVEN_REPO_SLUG\n+git clone --depth 5 https://github.com/$CLIENT_GRADLE_REPO_SLUG\n+\n+###############################\n+# \n+# Release client-maven-plugin\n+#\n+###############################\n+cd $HOME/client-maven-plugin\n+# Update Substrate\n+mvn versions:set-property -Dproperty=substrate.version -DnewVersion=$1 -DgenerateBackupPoms=false\n+git commit pom.xml -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+mvn versions:set -DremoveSnapshot\n+CLIENT_PROJECT_VERSION=$(mvn help:evaluate -Dexpression=project.version -q -DforceStdout)\n+# Commit and push tag\n+git commit pom.xml -m \"Release $CLIENT_PROJECT_VERSION\"\n+git tag $CLIENT_PROJECT_VERSION\n+git push https://gluon-bot:$2@github.com/$CLIENT_MAVEN_REPO_SLUG $CLIENT_PROJECT_VERSION\n+\n+###############################\n+# \n+# Release client-gradle-plugin\n+#\n+###############################\n+cd $HOME/client-gradle-plugin\n+# Update Substrate version\n+sed -i \"0,/com.gluonhq:substrate:.*/s//com.gluonhq:substrate:$1'/\" build.gradle\n+git commit build.gradle -m \"Update Substrate version to $1\"\n+# Remove SNAPSHOT\n+sed -i \"0,/^version '.*'/s//version '$CLIENT_PROJECT_VERSION'/\" build.gradle", "originalCommit": "07d91e62cb7b24237e1504ebf1462bb64bbc933c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5NzY0Nw==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431897647", "bodyText": "Since, we release plugins based on Substrate releases, I would like to keep both plugin versions in sync.", "author": "abhinayagarwal", "createdAt": "2020-05-28T14:49:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc3MjU5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTkyODIwOA==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r431928208", "bodyText": "There is no guarantee that we both versions will be kept in sync as there are no rules that enforce this. It is still possible to release one plugin separately from the other. At the moment, it looks like we only release the plugins when a new version of substrate is released. But in the future, when substrate development slows down somewhat, it might be that versions between the two plugins diverge because some fixes/improvements are being brought in that don't have directly anything to do with substrate.", "author": "tiainen", "createdAt": "2020-05-28T15:30:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc3MjU5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjAxNDk0OQ==", "url": "https://github.com/gluonhq/substrate/pull/627#discussion_r432014949", "bodyText": "When we take the route suggested by you in the future, I was hoping that the plugin releases won't be handled by Substrate and this script will be deprecated :)", "author": "abhinayagarwal", "createdAt": "2020-05-28T17:47:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc3MjU5Ng=="}], "type": "inlineReview"}]}