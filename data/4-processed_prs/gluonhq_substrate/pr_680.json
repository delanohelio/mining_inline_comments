{"pr_number": 680, "pr_title": "Use specific static libs directory in GraalVM", "pr_createdAt": "2020-06-29T14:59:01Z", "pr_url": "https://github.com/gluonhq/substrate/pull/680", "timeline": [{"oid": "ebdf2f7eee48cf2babdf0ec4499ddd33a319088d", "url": "https://github.com/gluonhq/substrate/commit/ebdf2f7eee48cf2babdf0ec4499ddd33a319088d", "message": "use specific static libs directory in graalvm", "committedDate": "2020-06-29T14:58:10Z", "type": "commit"}, {"oid": "b183a8b7fd53027929e320a6c1f16961cfce1124", "url": "https://github.com/gluonhq/substrate/commit/b183a8b7fd53027929e320a6c1f16961cfce1124", "message": "darwin needs absolute path when linking static libs", "committedDate": "2020-06-29T18:32:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1MTE4Nw==", "url": "https://github.com/gluonhq/substrate/pull/680#discussion_r447551187", "bodyText": "need to return 2 paths here (the old and the new), so this is List", "author": "johanvos", "createdAt": "2020-06-30T09:38:58Z", "path": "src/main/java/com/gluonhq/substrate/util/FileDeps.java", "diffHunk": "@@ -87,16 +87,22 @@ public FileDeps(InternalProjectConfiguration config) {\n     /**\n      * Returns the path to the Java SDK static libraries for this configuration. The path is cached on the provided\n      * configuration. If no custom directory has been set in the project configuration and <code>useGraalPath</code>\n-     * is set to <code>true</code>, it will use the <code>lib</code> directory inside the configured Graal path. If\n-     * <code>useGraalPath</code> is set to <code>false</code>, a custom Java SDK will be retrieved.\n+     * is set to <code>true</code>, it will use the <code>lib/static/$target-$arch/</code> directory inside the\n+     * configured Graal path. If <code>useGraalPath</code> is set to <code>false</code>, a custom Java SDK will\n+     * be downloaded.\n      *\n      * @param useGraalPath specifies if the default Java SDK path should resolve to the Graal installation dir\n      * @return the location of the static libraries of the Java SDK for the arch-os for this configuration\n      * @throws IOException in case anything goes wrong.\n      */\n     public Path getJavaSDKLibsPath(boolean useGraalPath) throws IOException {", "originalCommit": "b183a8b7fd53027929e320a6c1f16961cfce1124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzYxNDAzOQ==", "url": "https://github.com/gluonhq/substrate/pull/680#discussion_r447614039", "bodyText": "Wouldn't it be better to just check for the existence of the \"lib/static\" directory? If it does, return that, otherwise return the old path?", "author": "tiainen", "createdAt": "2020-06-30T11:34:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1MTE4Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzYxNzY1OA==", "url": "https://github.com/gluonhq/substrate/pull/680#discussion_r447617658", "bodyText": "For now I'm ok with that, but in general (different issue), I feel we have to add more safety to the paths we link from (more paths in a specific order, without specifying logic)", "author": "johanvos", "createdAt": "2020-06-30T11:41:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzU1MTE4Nw=="}], "type": "inlineReview"}, {"oid": "2065efa8f1aa549fa7ff0ea153cefd3e85a58abc", "url": "https://github.com/gluonhq/substrate/commit/2065efa8f1aa549fa7ff0ea153cefd3e85a58abc", "message": "rework building library search path args for linker", "committedDate": "2020-06-30T12:55:41Z", "type": "commit"}]}