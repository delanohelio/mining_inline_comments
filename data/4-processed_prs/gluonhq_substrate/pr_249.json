{"pr_number": 249, "pr_title": "Use latest Android build-tools", "pr_createdAt": "2020-01-07T17:09:57Z", "pr_url": "https://github.com/gluonhq/substrate/pull/249", "timeline": [{"oid": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "url": "https://github.com/gluonhq/substrate/commit/dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "message": "Use latest Android build-tools", "committedDate": "2020-01-07T17:08:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1ODcyNw==", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363858727", "bodyText": "Use Files.exists(buildToolsPath) instead", "author": "jperedadnr", "createdAt": "2020-01-07T17:21:33Z", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");\n+        if (buildToolsPath.toFile().exists()) {", "originalCommit": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1OTYyOA==", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363859628", "bodyText": "Objects.requireNonNull(sdkPath) and Files.exists(sdkPath)?", "author": "jperedadnr", "createdAt": "2020-01-07T17:23:32Z", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");", "originalCommit": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDI0MDM5OA==", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r364240398", "bodyText": "Adding a check for Files.exists(buildToolsPath) makes Files.exists(sdkPath) redundant.", "author": "abhinayagarwal", "createdAt": "2020-01-08T13:51:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg1OTYyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzg2MDkzMw==", "url": "https://github.com/gluonhq/substrate/pull/249#discussion_r363860933", "bodyText": "maybe you simplify it to something like return Files.walk().filter().map().max(...).map(toString).orElseThrow(IOException)?", "author": "jperedadnr", "createdAt": "2020-01-07T17:26:22Z", "path": "src/main/java/com/gluonhq/substrate/target/AndroidTargetConfiguration.java", "diffHunk": "@@ -360,4 +362,20 @@ private void createDevelopKeystore() throws IOException, InterruptedException {\n \n         System.err.println(\"done creating ks\");\n     }\n+    \n+    private String findLatestBuildTool(Path sdkPath) throws IOException {\n+        Path buildToolsPath = sdkPath.resolve(\"build-tools\");\n+        if (buildToolsPath.toFile().exists()) {\n+            Optional<Version> latest = Files.walk(buildToolsPath, 1)\n+                    .filter(file -> Files.isDirectory(file) && !file.equals(buildToolsPath))\n+                    .map(file -> new Version(file.getFileName().toString()))\n+                    .max(Version::compareTo);\n+            if (latest.isPresent()) {", "originalCommit": "dbfde29f54d2164f8b2f3ef2df984a5bf9c0dbc9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c", "url": "https://github.com/gluonhq/substrate/commit/038c82061344bf39363603fdbd300dcd7a6a7b1c", "message": "Changes as per review comments", "committedDate": "2020-01-08T13:58:34Z", "type": "commit"}, {"oid": "038c82061344bf39363603fdbd300dcd7a6a7b1c", "url": "https://github.com/gluonhq/substrate/commit/038c82061344bf39363603fdbd300dcd7a6a7b1c", "message": "Changes as per review comments", "committedDate": "2020-01-08T13:58:34Z", "type": "forcePushed"}]}