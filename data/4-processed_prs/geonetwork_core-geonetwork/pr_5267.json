{"pr_number": 5267, "pr_title": "Improvements fc editor", "pr_createdAt": "2020-12-16T12:38:59Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/5267", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNTY3OA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545605678", "bodyText": "Here you match the text and 2 lines above you match gfc:code/*/text(), is this normal ? Also if expecting gfc:code, maybe the match of the template should be gfc:code/gmx:Anchor ?", "author": "fxprunayre", "createdAt": "2020-12-18T06:49:10Z", "path": "schemas/iso19110/src/main/plugin/iso19110/formatter/xsl-view/view.xsl", "diffHunk": "@@ -305,6 +306,16 @@\n     <xsl:value-of select=\".\"/>\n   </xsl:template>\n \n+  <xsl:template mode=\"render-value\" match=\"gmx:Anchor\">\n+    <xsl:choose>\n+      <xsl:when test=\"starts-with(./@xlink:href,'http')\">\n+        <a href=\"{./@xlink:href}\"><xsl:value-of select=\"gfc:code/*/text()\"/></a>\n+      </xsl:when> \n+      <xsl:otherwise><xsl:value-of select=\"./text()\"/></xsl:otherwise>", "originalCommit": "27a996e57546d8d3b334d4a5d0f1ccb8d69810ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY5MjkzOQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545692939", "bodyText": "good catch, this is not going to work like this", "author": "pvgenuchten", "createdAt": "2020-12-18T09:14:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNTY3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjg2OQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545606869", "bodyText": "Not sure this is necessary (except for gfc namepace), 19110 is supposed to delegate labels to ISO19139 for its namespaces eg. https://github.com/geonetwork/core-geonetwork/blob/master/schemas/iso19110/src/main/plugin/iso19110/layout/layout.xsl#L78-L83", "author": "fxprunayre", "createdAt": "2020-12-18T06:52:29Z", "path": "schemas/iso19110/src/main/plugin/iso19110/loc/eng/labels.xml", "diffHunk": "@@ -261,22 +264,102 @@\n     <label>Scope</label>\n     <description>Scope definition</description>\n   </element>\n-  <element name=\"gmx:versionNumber\">\n-    <label>Version</label>\n-    <description>Catalogue version</description>\n-  </element>\n-  <element name=\"gmx:versionDate\">\n-    <label>Date</label>\n-    <description>Catalogue date</description>\n-  </element>\n-  <element name=\"gmx:fieldOfApplication\">\n-    <label>Field of application</label>\n-    <description>Field of application</description>\n+\n+  <element name=\"gmx:subCatalogue\">\n+    <label>Sub catalogue</label>\n+    <btnLabel>Add sub catalogue</btnLabel>\n+    <description>Describes a sub catalogue</description>\n   </element>\n+\n   <element name=\"gco:nilReason\">\n     <label>Nil reason</label>\n-    <description/>\n-    <help/>\n-    <condition/>\n   </element>\n+", "originalCommit": "27a996e57546d8d3b334d4a5d0f1ccb8d69810ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjk3NA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545606974", "bodyText": "Indent is wrong - 2 spaces needed", "author": "fxprunayre", "createdAt": "2020-12-18T06:52:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY5NDAyNQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545694025", "bodyText": "mmm, i got warnings in log about missing translations, so maybe we have to look at the delegation?", "author": "pvgenuchten", "createdAt": "2020-12-18T09:15:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5OTUzMzY1OA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r599533658", "bodyText": "The warnings still happen, but translations are indeed delegated to iso19139", "author": "pvgenuchten", "createdAt": "2021-03-23T12:45:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNjg2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNzE4Ng==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545607186", "bodyText": "I don't think those file in present/*.xsl are used anywhere in GeoNetwork 3?", "author": "fxprunayre", "createdAt": "2020-12-18T06:53:34Z", "path": "schemas/iso19110/src/main/plugin/iso19110/present/metadata-view.xsl", "diffHunk": "@@ -189,7 +191,12 @@\n               </th>\n               <td>\n                 <xsl:value-of select=\"gfc:memberName/gco:LocalName\"/>\n-\n+                <xsl:choose>", "originalCommit": "27a996e57546d8d3b334d4a5d0f1ccb8d69810ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY5NDgzNA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545694834", "bodyText": "thanx, i was wondering about it, should we remove it?", "author": "pvgenuchten", "createdAt": "2020-12-18T09:16:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNzE4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTY5ODE0NA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5267#discussion_r545698144", "bodyText": "Those old stuffs have been removed in 4.0.x", "author": "fxprunayre", "createdAt": "2020-12-18T09:19:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTYwNzE4Ng=="}], "type": "inlineReview"}, {"oid": "34f1526665e476e2b4c3c65d9e79da1949ee7158", "url": "https://github.com/geonetwork/core-geonetwork/commit/34f1526665e476e2b4c3c65d9e79da1949ee7158", "message": "improvements on labels and basic editor iso19110", "committedDate": "2021-03-23T12:25:38Z", "type": "commit"}, {"oid": "022ddc091bb033f4d7fe674f1e7ebe51c21f9929", "url": "https://github.com/geonetwork/core-geonetwork/commit/022ddc091bb033f4d7fe674f1e7ebe51c21f9929", "message": "remove messages", "committedDate": "2021-03-23T12:25:38Z", "type": "commit"}, {"oid": "0743af3242e7d36269fc030bf4de17bfee14d5f2", "url": "https://github.com/geonetwork/core-geonetwork/commit/0743af3242e7d36269fc030bf4de17bfee14d5f2", "message": "delegate gmd/gco translations to iso19139\nfix typo in anchor-text", "committedDate": "2021-03-23T12:25:38Z", "type": "forcePushed"}, {"oid": "644f93e37bc128b3b8f837d407ec991577317f53", "url": "https://github.com/geonetwork/core-geonetwork/commit/644f93e37bc128b3b8f837d407ec991577317f53", "message": "delegate gmd/gco translations to iso19139\nfix typo in anchor-text", "committedDate": "2021-03-23T12:43:54Z", "type": "commit"}, {"oid": "644f93e37bc128b3b8f837d407ec991577317f53", "url": "https://github.com/geonetwork/core-geonetwork/commit/644f93e37bc128b3b8f837d407ec991577317f53", "message": "delegate gmd/gco translations to iso19139\nfix typo in anchor-text", "committedDate": "2021-03-23T12:43:54Z", "type": "forcePushed"}]}