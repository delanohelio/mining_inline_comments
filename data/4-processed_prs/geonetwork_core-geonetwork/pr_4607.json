{"pr_number": 4607, "pr_title": "Link analysis improvement", "pr_createdAt": "2020-04-15T15:32:29Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4607", "timeline": [{"oid": "774699649d0b6503b2af06a235185739d7c7892e", "url": "https://github.com/geonetwork/core-geonetwork/commit/774699649d0b6503b2af06a235185739d7c7892e", "message": "Link analysis improvement\n\n* API GET /records/links\n  * Filter by groupOwner(s) or groupPublished(s)\n  * Allow to editorOrMore profile\n  * Filter on user editing groups by default\n* API POST /records/links\n  * Return a report based on user privileges", "committedDate": "2020-04-15T15:31:59Z", "type": "commit"}, {"oid": "9ec861563e2b1045959f73008b2460454eb1eedf", "url": "https://github.com/geonetwork/core-geonetwork/commit/9ec861563e2b1045959f73008b2460454eb1eedf", "message": "Link analysis / Add CSV export.", "committedDate": "2020-04-17T05:58:34Z", "type": "commit"}, {"oid": "3e80062ff462fee45e96301759b48621a2a863d5", "url": "https://github.com/geonetwork/core-geonetwork/commit/3e80062ff462fee45e96301759b48621a2a863d5", "message": "Link analysis / Add CSV export / Properties for test.", "committedDate": "2020-04-17T06:40:30Z", "type": "commit"}, {"oid": "2ea6e1b79ea8585402698de34910b5064f13a752", "url": "https://github.com/geonetwork/core-geonetwork/commit/2ea6e1b79ea8585402698de34910b5064f13a752", "message": "Link analysis / Add CSV export / Properties for test.", "committedDate": "2020-04-17T07:39:55Z", "type": "commit"}, {"oid": "d4d7f1395449abf836fe261c6343b8533a6446b1", "url": "https://github.com/geonetwork/core-geonetwork/commit/d4d7f1395449abf836fe261c6343b8533a6446b1", "message": "Link analysis / Do not set default values for group. By default all.", "committedDate": "2020-04-17T07:45:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg0MTU3Mw==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4607#discussion_r413841573", "bodyText": "Maybe check to use Autowire? Similar in other methods that were already defined.", "author": "josegar74", "createdAt": "2020-04-23T14:25:30Z", "path": "core/src/main/java/org/fao/geonet/kernel/AccessManager.java", "diffHunk": "@@ -183,6 +185,23 @@\n         return hs;\n     }\n \n+    /**\n+     *  Retrieves the user's groups ids\n+     * @param session\n+     * @param profile\n+     * @return\n+     * @throws SQLException\n+     */\n+    public static List<Integer> getGroups(UserSession session, Profile profile) throws SQLException {\n+        ApplicationContext applicationContext = ApplicationContextHolder.get();\n+        final UserGroupRepository userGroupRepository = applicationContext.getBean(UserGroupRepository.class);", "originalCommit": "d4d7f1395449abf836fe261c6343b8533a6446b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDMzNjA4Ng==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4607#discussion_r414336086", "bodyText": "Done for the whole file....", "author": "fxprunayre", "createdAt": "2020-04-24T06:48:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzg0MTU3Mw=="}], "type": "inlineReview"}, {"oid": "0738e11a9d51d0bf0a2c826241c623f4fc10a806", "url": "https://github.com/geonetwork/core-geonetwork/commit/0738e11a9d51d0bf0a2c826241c623f4fc10a806", "message": "Link analysis / Fix download link.", "committedDate": "2020-04-24T06:38:41Z", "type": "commit"}, {"oid": "34a2a7d94dcdd2405d05f32b1e36a354504df77e", "url": "https://github.com/geonetwork/core-geonetwork/commit/34a2a7d94dcdd2405d05f32b1e36a354504df77e", "message": "Java / Autowired.", "committedDate": "2020-04-24T06:48:10Z", "type": "commit"}, {"oid": "ee5c8365c3b074392f399c0ed67ee0aaa9e4b3df", "url": "https://github.com/geonetwork/core-geonetwork/commit/ee5c8365c3b074392f399c0ed67ee0aaa9e4b3df", "message": "Link analysis / Fix error on Tomact\n\n\r\nDue to JSON parameter.\r\n\r\n```\r\n24-Apr-2020 14:05:38.281 INFO [http-apr-8080-exec-11] org.apache.coyote.http11.AbstractHttp11Processor.process Error parsing HTTP request header\r\n Note: further occurrences of HTTP header parsing errors will be logged at DEBUG level.\r\n java.lang.IllegalArgumentException: Invalid character found in the request target. The valid characters are defined in RFC 7230 and RFC 3986\r\n    at org.apache.coyote.http11.InternalAprInputBuffer.parseRequestLine(InternalAprInputBuffer.java:244)\r\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1065)\r\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:684)\r\n    at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:2464)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    at java.lang.Thread.run(Thread.java:748)\r\n```", "committedDate": "2020-04-27T06:24:49Z", "type": "commit"}, {"oid": "7025661e6c87f9aee19f2216a9bbecd6e7b9a118", "url": "https://github.com/geonetwork/core-geonetwork/commit/7025661e6c87f9aee19f2216a9bbecd6e7b9a118", "message": "Update AccessManager.java", "committedDate": "2020-05-22T11:19:10Z", "type": "commit"}, {"oid": "d6808207ecd7c11bc1ff57848970599a81864296", "url": "https://github.com/geonetwork/core-geonetwork/commit/d6808207ecd7c11bc1ff57848970599a81864296", "message": "Merge branch 'master' into linkanalysisimprovements", "committedDate": "2020-05-22T11:22:27Z", "type": "commit"}]}