{"pr_number": 4849, "pr_title": "Remove closure from production scripts (fix ie11 incompatibility)", "pr_createdAt": "2020-07-15T09:08:43Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4849", "timeline": [{"oid": "ebb75e60a328b5024978bcec652836379d1be4af", "url": "https://github.com/geonetwork/core-geonetwork/commit/ebb75e60a328b5024978bcec652836379d1be4af", "message": "detect ie11 and display a warning", "committedDate": "2020-07-15T08:58:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkwOTA1NQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4849#discussion_r454909055", "bodyText": "\"instead\", not \"in stead\"", "author": "archaeogeek", "createdAt": "2020-07-15T09:13:36Z", "path": "web/src/main/webapp/xslt/base-layout.xsl", "diffHunk": "@@ -80,6 +80,12 @@\n             </div>\n           </xsl:when>\n           <xsl:otherwise>\n+            <script type=\"text/javascript\">\n+              //detect ie11 browser; display warning\n+              if (/*@cc_on!@*/false || !!document.documentMode) {\n+                document.body.innerHTML += '<div class=\"alert alert-warning\">This application is not available in this browser. Please use a recent version of Edge, Firefox, Chrome, Safari or Opera in stead. Or alternatively use the limited <a href=\"../search\">no-javascript interface</a></div>';", "originalCommit": "ebb75e60a328b5024978bcec652836379d1be4af", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzOTkyMA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4849#discussion_r454939920", "bodyText": "thanx @archaeogeek\nthe approach of @zhuoyuezhou made me think, why do we have this lib in the production system?\n@juanluisrp suggested to remove line https://github.com/geonetwork/core-geonetwork/blob/master/web-ui/src/main/resources/WEB-INF/classes/web-ui-wro-sources.xml#L36\nAnd indeed this also fixes the problem, i'm going to change the PR accordingly", "author": "pvgenuchten", "createdAt": "2020-07-15T10:06:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkwOTA1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDk3ODM2Mw==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4849#discussion_r454978363", "bodyText": "@pvgenuchten\nLook like you are reverting the commit\n3b9fda9#diff-b63d73df392776a0eb4097d238004302 from #4431 from @julsbreakdown\nShould you be removing 2 lines? Or will the openlayers be broken in ie11?  And if fixing ie11 will you be breaking openlayers?", "author": "ianwallen", "createdAt": "2020-07-15T11:21:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkwOTA1NQ=="}], "type": "inlineReview"}, {"oid": "32617fa9097a8465286810088fd49105f2205808", "url": "https://github.com/geonetwork/core-geonetwork/commit/32617fa9097a8465286810088fd49105f2205808", "message": "Revert \"detect ie11 and display a warning\"\n\nThis reverts commit ebb75e60a328b5024978bcec652836379d1be4af.", "committedDate": "2020-07-15T10:08:08Z", "type": "commit"}, {"oid": "b69e7cf4bf350980a0c0d4290049c58ba38cffea", "url": "https://github.com/geonetwork/core-geonetwork/commit/b69e7cf4bf350980a0c0d4290049c58ba38cffea", "message": "remove closure from production", "committedDate": "2020-07-15T10:08:27Z", "type": "commit"}, {"oid": "d000bde0ecb40301de81f7716b14760cf054b1b4", "url": "https://github.com/geonetwork/core-geonetwork/commit/d000bde0ecb40301de81f7716b14760cf054b1b4", "message": "remove assert syntax", "committedDate": "2020-09-08T08:06:06Z", "type": "commit"}]}