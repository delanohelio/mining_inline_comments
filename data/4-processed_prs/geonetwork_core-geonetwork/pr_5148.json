{"pr_number": 5148, "pr_title": "Update sitemap.xsl", "pr_createdAt": "2020-11-03T15:47:39Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/5148", "timeline": [{"oid": "433130259be0a921f9aedcd3d973dab3f1c65e14", "url": "https://github.com/geonetwork/core-geonetwork/commit/433130259be0a921f9aedcd3d973dab3f1c65e14", "message": "Update sitemap.xsl\n\nAs per issue #4604\r\n\r\n- Updated the sitemap xsds to use https over http\r\n- Switch the use of the deprecated `geo` namespace for the use of `dct`\r\n- Correctly implement dct:format over geo:geo/geo:format\r\n- Switched lastMod to use the date only rather than the incorrect dateTime as before", "committedDate": "2020-11-03T15:47:10Z", "type": "commit"}, {"oid": "f55f8017a4415d66771fcb2c91f1fe7625a6e811", "url": "https://github.com/geonetwork/core-geonetwork/commit/f55f8017a4415d66771fcb2c91f1fe7625a6e811", "message": "Update sitemap.xsl", "committedDate": "2020-11-03T15:52:10Z", "type": "commit"}, {"oid": "016de81d3542d5c20bbb887edf37d2a00db3bf66", "url": "https://github.com/geonetwork/core-geonetwork/commit/016de81d3542d5c20bbb887edf37d2a00db3bf66", "message": "Update sitemap.xsl\n\nCommented out dct:format to allow Google to read sitemap.xml properly", "committedDate": "2020-11-03T16:29:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzE0OTI0Ng==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5148#discussion_r517149246", "bodyText": "This should be $changeDate instead of $changedate, otherwise fails with:\nError at xsl:value-of on line 84 column 67 of sitemap.xsl:\nXPST0008: XPath syntax error at char 21 on line 84 in {substring($changedate,1}:\nVariable $changedate has not been declared", "author": "josegar74", "createdAt": "2020-11-04T07:46:52Z", "path": "web/src/main/webapp/xslt/services/sitemap/sitemap.xsl", "diffHunk": "@@ -81,7 +81,7 @@\n               <xsl:value-of select=\"concat($nodeUrl, 'api/sitemap?', $formatParam, 'doc=', $pStart)\"/>\n             </loc>\n             <lastmod>\n-              <xsl:value-of select=\"$changeDate\"/>\n+              <xsl:value-of select=\"substring($changedate,1,10)\"/>", "originalCommit": "016de81d3542d5c20bbb887edf37d2a00db3bf66", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8f7c4bdefa76a085b4bb94a8a0e9c9eacc5cc84e", "url": "https://github.com/geonetwork/core-geonetwork/commit/8f7c4bdefa76a085b4bb94a8a0e9c9eacc5cc84e", "message": "Fix variable name in index docs template", "committedDate": "2020-11-04T08:22:08Z", "type": "commit"}]}