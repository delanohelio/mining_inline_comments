{"pr_number": 4791, "pr_title": "Editor / Polygon / Fix validation error on srsName and id attributes.", "pr_createdAt": "2020-06-24T08:39:37Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4791", "timeline": [{"oid": "e9277aa108f9176498d5edbfba57293985051666", "url": "https://github.com/geonetwork/core-geonetwork/commit/e9277aa108f9176498d5edbfba57293985051666", "message": "Editor / Polygon / Fix validation error on srsName and id attributes.\n\nWhen adding bounding polygon, issues are reported on validation.\n\n![image](https://user-images.githubusercontent.com/1701393/85522811-6d6adb80-b606-11ea-8c02-726e4d61f55e.png)\n\nSince OL6 update, an srsName is added to LinearRing in GML3.2.0.\n\n![image](https://user-images.githubusercontent.com/1701393/85522835-722f8f80-b606-11ea-87c6-a8056e1ae5b9.png)\n\nGML2 OL format was not. See\n https://github.com/openlayers/openlayers/blame/v6.3.1/src/ol/format/GML2.js#L228\n.\nGML3 does https://github.com/openlayers/openlayers/blob/v6.3.1/src/ol/format/GML3.js#L503\n\nFrom the XSD, this attribute should probably not be added https://schemas.wmo.int/wmdr/1.0RC6/documentation/schemadoc/schemas/geometryBasic2d_xsd/elements/LinearRing.html.\n\nWorkaround that issue by updating `LinearRing` in `update-fixed-info.xsl`.", "committedDate": "2020-06-24T08:37:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDc0NzI4OA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4791#discussion_r444747288", "bodyText": "With this change the gml:id or srsName are going to be replaced if 1 of the values are not filled, should not be checked if are filled to copy them instead of setting the value?", "author": "josegar74", "createdAt": "2020-06-24T08:57:16Z", "path": "schemas/iso19139/src/main/plugin/iso19139/update-fixed-info.xsl", "diffHunk": "@@ -288,10 +290,10 @@\n   </xsl:template>\n \n   <!-- Add required gml attributes if missing -->\n-  <xsl:template match=\"gml:Polygon[not(@gml:id) and not(@srsName)]|\n-                       gml:MultiSurface[not(@gml:id) and not(@srsName)]|\n-                       gml:LineString[not(@gml:id) and not(@srsName)]|\n-                       gml320:Polygon[not(@gml320:id) and not(@srsName)]\">\n+  <xsl:template match=\"gml:Polygon[not(@gml:id) or not(@srsName)]|\n+                       gml:MultiSurface[not(@gml:id) or not(@srsName)]|\n+                       gml:LineString[not(@gml:id) or not(@srsName)]|\n+                       gml320:Polygon[not(@gml320:id) or not(@srsName)]\">", "originalCommit": "e9277aa108f9176498d5edbfba57293985051666", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2969e71f21e814abd538e51c374c856702ab4445", "url": "https://github.com/geonetwork/core-geonetwork/commit/2969e71f21e814abd538e51c374c856702ab4445", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Preserve existing.", "committedDate": "2020-06-24T09:10:12Z", "type": "commit"}, {"oid": "30d14732790ca056014ae21dac92ceeb21a7c8dd", "url": "https://github.com/geonetwork/core-geonetwork/commit/30d14732790ca056014ae21dac92ceeb21a7c8dd", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Avoid xmlns attribute.", "committedDate": "2020-06-24T10:57:50Z", "type": "commit"}, {"oid": "fb97cff3717ec00adf7a278b26b51b023b44dd2d", "url": "https://github.com/geonetwork/core-geonetwork/commit/fb97cff3717ec00adf7a278b26b51b023b44dd2d", "message": "Editor / Polygon / Fix validation error on srsName and id attributes. Avoid empty xmlns by cleaning gml namespaces of all elements.", "committedDate": "2020-07-02T07:27:33Z", "type": "commit"}, {"oid": "1966f5e3b03ced22848d49871bafd48baae5f9d1", "url": "https://github.com/geonetwork/core-geonetwork/commit/1966f5e3b03ced22848d49871bafd48baae5f9d1", "message": "Editor / Polygon / Fix validation error on srsName and id attributes.", "committedDate": "2020-07-02T13:47:26Z", "type": "commit"}, {"oid": "f176dad4e170746472568f3ee68a95d4f494d3cb", "url": "https://github.com/geonetwork/core-geonetwork/commit/f176dad4e170746472568f3ee68a95d4f494d3cb", "message": "Editor / Polygon / Fix validation error on srsName and id attributes / Avoid xmlns='' attribute and keep GML namesapce declaration at the root document level only. Thanks josegar74 for helping on that.", "committedDate": "2020-07-03T08:06:23Z", "type": "commit"}, {"oid": "0d088b35e4ea348b379143b2e0d4754f412a031f", "url": "https://github.com/geonetwork/core-geonetwork/commit/0d088b35e4ea348b379143b2e0d4754f412a031f", "message": "Editor / Polygon / Fix validation error on srsName and id attributes.", "committedDate": "2020-07-03T09:56:53Z", "type": "commit"}]}