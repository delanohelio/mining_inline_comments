{"pr_number": 5205, "pr_title": "Enhancements and bug fixes for non-standard projections", "pr_createdAt": "2020-11-24T12:45:33Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/5205", "timeline": [{"oid": "d7b4a824f9d9090e787eeafd80643b0975fc6907", "url": "https://github.com/geonetwork/core-geonetwork/commit/d7b4a824f9d9090e787eeafd80643b0975fc6907", "message": "Added service to query EPSG.io for proj4 defs", "committedDate": "2020-11-13T16:00:41Z", "type": "commit"}, {"oid": "ffa6a021cfc4a641ef0b748e98e950695c9a0620", "url": "https://github.com/geonetwork/core-geonetwork/commit/ffa6a021cfc4a641ef0b748e98e950695c9a0620", "message": "Integrated ProjectionService into UiConfig", "committedDate": "2020-11-13T16:01:28Z", "type": "commit"}, {"oid": "5a816835a8ce7b2d36a369ba3bc3ea28b923b7d9", "url": "https://github.com/geonetwork/core-geonetwork/commit/5a816835a8ce7b2d36a369ba3bc3ea28b923b7d9", "message": "Added/updated translations for projection fields", "committedDate": "2020-11-24T12:38:10Z", "type": "commit"}, {"oid": "be47749d32336eb8aa7b59645f861fa889a89439", "url": "https://github.com/geonetwork/core-geonetwork/commit/be47749d32336eb8aa7b59645f861fa889a89439", "message": "Removed trailing comma, improved parsing of missing bbox or proj4 def", "committedDate": "2020-11-24T12:39:06Z", "type": "commit"}, {"oid": "480545db2233e1bbd04ca3fbb2a3cb5151680582", "url": "https://github.com/geonetwork/core-geonetwork/commit/480545db2233e1bbd04ca3fbb2a3cb5151680582", "message": "Use stops in extent transformations (more accurate)", "committedDate": "2020-11-24T12:40:33Z", "type": "commit"}, {"oid": "9146204d7b6be7530259a4a43401fd72a09311e2", "url": "https://github.com/geonetwork/core-geonetwork/commit/9146204d7b6be7530259a4a43401fd72a09311e2", "message": "Moved drawing of bbox after map was created (fixes #5153)", "committedDate": "2020-11-24T12:40:59Z", "type": "commit"}, {"oid": "0363169eda760cbed679b49d8b0e25e15a569ff4", "url": "https://github.com/geonetwork/core-geonetwork/commit/0363169eda760cbed679b49d8b0e25e15a569ff4", "message": "Draw bounds after map creation, apply 10% buffer to fit extent", "committedDate": "2020-11-24T12:41:24Z", "type": "commit"}, {"oid": "39f72ff6cb42c5921ff37b6aa4524c7c4359b519", "url": "https://github.com/geonetwork/core-geonetwork/commit/39f72ff6cb42c5921ff37b6aa4524c7c4359b519", "message": "Fix dimensions for geometry created by ol.format.GML", "committedDate": "2020-11-24T12:41:47Z", "type": "commit"}, {"oid": "3cd98a525af9132dda89b66e034761a6840a9683", "url": "https://github.com/geonetwork/core-geonetwork/commit/3cd98a525af9132dda89b66e034761a6840a9683", "message": "Fixed ES5 compatibility", "committedDate": "2020-11-24T12:41:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYxNzQ1OA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5205#discussion_r529617458", "bodyText": "Map now exactly fits the bounds, but this does not look very nice. This adds a buffer to the feature so the map is zoomed out a little.", "author": "GeoSander", "createdAt": "2020-11-24T15:08:39Z", "path": "web-ui/src/main/resources/catalog/components/edit/bounding/BoundingDirective.js", "diffHunk": "@@ -171,6 +171,12 @@\n               return false;\n             };\n \n+            function getEnlargedExtent(feature) {", "originalCommit": "3cd98a525af9132dda89b66e034761a6840a9683", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYyOTY4OA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5205#discussion_r529629688", "bodyText": "Because the EPSG.io lookup uses the Code field, it makes sense to turn the Label and Code field around: Code first, then Label field.", "author": "GeoSander", "createdAt": "2020-11-24T15:23:48Z", "path": "web-ui/src/main/resources/catalog/components/admin/uiconfig/partials/projectionSwitcher.html", "diffHunk": "@@ -3,59 +3,71 @@\n \t\tng-init=\"parentIndex=$index\">\n \t\t<td>\n \t\t\t<div class=\"input-group\">\n-\t\t\t\t<span class=\"input-group-addon\" data-translate=\"\">ui-label</span> <input", "originalCommit": "3cd98a525af9132dda89b66e034761a6840a9683", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYzNzQ4MQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/5205#discussion_r529637481", "bodyText": "We use EPSG.io because:\n\nIt offers a Proj4 definition (unlike EPSG.org for example)\nIt comes recommended by OpenLayers as well (see here and here)", "author": "GeoSander", "createdAt": "2020-11-24T15:29:51Z", "path": "web-ui/src/main/resources/catalog/components/admin/uiconfig/ProjectionService.js", "diffHunk": "@@ -0,0 +1,154 @@\n+/*\n+ * Copyright (C) 2001-2016 Food and Agriculture Organization of the\n+ * United Nations (FAO-UN), United Nations World Food Programme (WFP)\n+ * and United Nations Environment Programme (UNEP)\n+ *\n+ * This program is free software; you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation; either version 2 of the License, or (at\n+ * your option) any later version.\n+ *\n+ * This program is distributed in the hope that it will be useful, but\n+ * WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU\n+ * General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with this program; if not, write to the Free Software\n+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301, USA\n+ *\n+ * Contact: Jeroen Ticheler - FAO - Viale delle Terme di Caracalla 2,\n+ * Rome - Italy. email: geonetwork@osgeo.org\n+ */\n+\n+(function() {\n+  goog.provide('gn_projection_service');\n+\n+  var module = angular.module('gn_projection_service', [\n+  ]);\n+\n+  // constants\n+  var SERVICE_REST_URL = 'https://EPSG.io';", "originalCommit": "3cd98a525af9132dda89b66e034761a6840a9683", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}