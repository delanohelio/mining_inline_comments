{"pr_number": 4776, "pr_title": "shorten index names for oracle 30 char limit", "pr_createdAt": "2020-06-17T03:39:48Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4776", "timeline": [{"oid": "c678529a1aeac73f654c22a3dc9b50ab5066a051", "url": "https://github.com/geonetwork/core-geonetwork/commit/c678529a1aeac73f654c22a3dc9b50ab5066a051", "message": "shorten index names for oracle 30 char limit", "committedDate": "2020-06-17T03:37:26Z", "type": "commit"}, {"oid": "2415c9e7a173d4f2257f6e396ae8a90b5a8c6948", "url": "https://github.com/geonetwork/core-geonetwork/commit/2415c9e7a173d4f2257f6e396ae8a90b5a8c6948", "message": "remove old indexes (will be replaced by new index name)", "committedDate": "2020-06-17T16:38:32Z", "type": "commit"}, {"oid": "2415c9e7a173d4f2257f6e396ae8a90b5a8c6948", "url": "https://github.com/geonetwork/core-geonetwork/commit/2415c9e7a173d4f2257f6e396ae8a90b5a8c6948", "message": "remove old indexes (will be replaced by new index name)", "committedDate": "2020-06-17T16:38:32Z", "type": "forcePushed"}, {"oid": "93ab45664c70cc903badd209d0eaa034de5b22c9", "url": "https://github.com/geonetwork/core-geonetwork/commit/93ab45664c70cc903badd209d0eaa034de5b22c9", "message": "add h2 migration", "committedDate": "2020-06-17T19:35:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2NDA3NQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4776#discussion_r442264075", "bodyText": "Syntax should be updated to:\nDROP INDEX idx_metadatafiledownloads_metadataid ON MetadataFileDownloads;\nDROP INDEX idx_metadatafileuploads_metadataid ON MetadataFileUploads;\nDROP INDEX idx_operationallowed_metadataid ON OperationAllowed;", "author": "josegar74", "createdAt": "2020-06-18T14:21:38Z", "path": "web/src/main/webapp/WEB-INF/classes/setup/sql/migrate/v3110/migrate-mysql.sql", "diffHunk": "@@ -0,0 +1,3 @@\n+DROP INDEX idx_metadatafiledownloads_metadataid;\n+DROP INDEX idx_metadatafileuploads_metadataid;\n+DROP INDEX idx_operationallowed_metadataid;", "originalCommit": "93ab45664c70cc903badd209d0eaa034de5b22c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI3ODg2NQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4776#discussion_r442278865", "bodyText": "I was also confuse about the migration mechanism I though both migrate-default.sql and migrate-XXXX.sql were executed for for db XXXX\nmigrate-default.sql is executed, unless specific db file is available. So we can add the drop indexes to the migrate-default.sql and create 2 files for mysql (specific syntax) and Oracle (no drop of indexes)\nThanks @juanluisrp for pointing it.", "author": "josegar74", "createdAt": "2020-06-18T14:40:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2NDA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI5MzQ4Ng==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4776#discussion_r442293486", "bodyText": "@josegar74  Ok, that sounds great - I'll do that.", "author": "davidblasby", "createdAt": "2020-06-18T14:59:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2NDA3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM5Njk2MA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4776#discussion_r442396960", "bodyText": "@josegar74 - fixed", "author": "davidblasby", "createdAt": "2020-06-18T17:43:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjI2NDA3NQ=="}], "type": "inlineReview"}, {"oid": "1c8020bb2fb2e83461e0b9b36ad9b55ef6edaf86", "url": "https://github.com/geonetwork/core-geonetwork/commit/1c8020bb2fb2e83461e0b9b36ad9b55ef6edaf86", "message": "update migration files", "committedDate": "2020-06-18T17:42:24Z", "type": "commit"}]}