{"pr_number": 4784, "pr_title": "Enhance ESRI REST API support", "pr_createdAt": "2020-06-19T18:49:05Z", "pr_url": "https://github.com/geonetwork/core-geonetwork/pull/4784", "timeline": [{"oid": "d296d9e12aceceba6150218fe20cb4aa543b9402", "url": "https://github.com/geonetwork/core-geonetwork/commit/d296d9e12aceceba6150218fe20cb4aa543b9402", "message": "Enhance ESRI REST API support", "committedDate": "2020-06-19T18:36:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjQwOQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443356409", "bodyText": "If you don't add the value in ISO19139 list of protocol, that will never be used ?\nSee https://github.com/geonetwork/core-geonetwork/pull/3914/files#diff-9edb196db9b6857e1f3e578db9328026R2270", "author": "fxprunayre", "createdAt": "2020-06-22T07:09:11Z", "path": "web-ui/src/main/resources/catalog/views/default/config.js", "diffHunk": "@@ -111,7 +111,8 @@\n               'OGC:WMS-1.1.1-http-get-map',\n               'OGC:WMS-1.3.0-http-get-map',\n               'OGC:WFS',\n-              'ESRI:REST'\n+              'ESRI:REST',\n+              'ESRI REST: Map Server'", "originalCommit": "d296d9e12aceceba6150218fe20cb4aa543b9402", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU1NTIwMA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443555200", "bodyText": "On a second thought, if we treat all ESRI subtypes as the generic \"EST:REST\" we do not have to add them all into the protocol list anymore. The user does not need to know the detailed subtype the metadata is being used. It just works after the import/add.", "author": "kingwang-git", "createdAt": "2020-06-22T13:25:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjQwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzYxMDY4Mg==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443610682", "bodyText": "I remove the entry and test it out, the result is positive. I am going to push the new change shortly. Hopefully I can hear from you about the decision on other subtypes support so I can either add them in the list or leave them for now. Thanks", "author": "kingwang-git", "createdAt": "2020-06-22T14:42:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjQwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443356651", "bodyText": "Maybe we can use starts with here if we are going to support all ESRI types ?", "author": "fxprunayre", "createdAt": "2020-06-22T07:09:38Z", "path": "web-ui/src/main/resources/catalog/views/default/module.js", "diffHunk": "@@ -261,7 +261,7 @@\n             uuid: md ? md.getUuid() : null,\n             type:\n               link.protocol.indexOf('WMTS') > -1 ? 'wmts' :\n-              (link.protocol == 'ESRI:REST' ? 'esrirest' : 'wms'),\n+                ((link.protocol == 'ESRI:REST') || (link.protocol == 'ESRI REST: Map Server') ? 'esrirest' : 'wms'),", "originalCommit": "d296d9e12aceceba6150218fe20cb4aa543b9402", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU1MjYyMg==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443552622", "bodyText": "I was reluctant to put them all in for a few reasons: ESRI REST and subtype  ESRI REST: Map Server are the two commonly used, while other others are not common and not easy to find the sample metadata to test; the list may not be complete; and the last the list may be changing.\nBut if you like to add them all in, I can do it, and try my best to test some if not all those subtypes if I can find any.", "author": "kingwang-git", "createdAt": "2020-06-22T13:21:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU1NjQ5Nw==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443556497", "bodyText": "We have to check on OpenLayer side if there is specific layer type depending on the type of services. Usually we have one protocol for each type of layer.", "author": "fxprunayre", "createdAt": "2020-06-22T13:27:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU3NzA0NA==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443577044", "bodyText": "Based on my test, one layer does work on multiple protocols (two), and I think we can add multiple if we want. It's all about ESRI protocol afterall.", "author": "kingwang-git", "createdAt": "2020-06-22T13:57:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzU3ODQ3Nw==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r443578477", "bodyText": "Let me know if you like to add the following:\nESRI REST: Feature Server,\nESRI REST: Image Service,\nESRI REST: Tiled Map Service,\nOGC WMS\nI just searched FGP, Opendata and other portals, unfortunately I have not found out any sample metadata containing any of the above protocols.", "author": "kingwang-git", "createdAt": "2020-06-22T13:59:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM5MzQ5Ng==", "url": "https://github.com/geonetwork/core-geonetwork/pull/4784#discussion_r444393496", "bodyText": "@fxprunayre I am adding the new fix using \" starts with\" you initially suggested (sorry I misunderstood your meaning then), and hopefully we now build a generic handler for all ESRI subtypes.", "author": "kingwang-git", "createdAt": "2020-06-23T17:35:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM1NjY1MQ=="}], "type": "inlineReview"}, {"oid": "e1618f43bca12e945d2b435fc02a8472bf0d14ff", "url": "https://github.com/geonetwork/core-geonetwork/commit/e1618f43bca12e945d2b435fc02a8472bf0d14ff", "message": "Enhance ESRI REST API support", "committedDate": "2020-06-22T16:45:30Z", "type": "commit"}, {"oid": "4ff465b281361aaee8ccf98520e8b550fd915305", "url": "https://github.com/geonetwork/core-geonetwork/commit/4ff465b281361aaee8ccf98520e8b550fd915305", "message": "Enhance ESRI REST API support", "committedDate": "2020-06-23T17:11:48Z", "type": "commit"}]}