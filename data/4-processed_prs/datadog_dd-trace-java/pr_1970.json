{"pr_number": 1970, "pr_title": "Merge thread-utils module with internal-api", "pr_createdAt": "2020-10-09T16:30:36Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1970", "timeline": [{"oid": "8477fc36c4e76d7b6d0c0e9094917a558c015755", "url": "https://github.com/DataDog/dd-trace-java/commit/8477fc36c4e76d7b6d0c0e9094917a558c015755", "message": "revapi", "committedDate": "2020-10-09T21:48:15Z", "type": "forcePushed"}, {"oid": "a6dfd0200d6227e95cb320e4476dda1134293d5a", "url": "https://github.com/DataDog/dd-trace-java/commit/a6dfd0200d6227e95cb320e4476dda1134293d5a", "message": "revapi", "committedDate": "2020-10-12T08:47:08Z", "type": "forcePushed"}, {"oid": "ed8aa8913412f7a82a5e099e9424b583226ee9d0", "url": "https://github.com/DataDog/dd-trace-java/commit/ed8aa8913412f7a82a5e099e9424b583226ee9d0", "message": "temporary logging", "committedDate": "2020-10-12T12:43:20Z", "type": "forcePushed"}, {"oid": "de2d3c12663bde0e7cd95b560a687ee217ca9b6e", "url": "https://github.com/DataDog/dd-trace-java/commit/de2d3c12663bde0e7cd95b560a687ee217ca9b6e", "message": "temporary logging", "committedDate": "2020-10-12T21:06:11Z", "type": "forcePushed"}, {"oid": "b4fcd924d174cc8652a512744c05a7695e658a84", "url": "https://github.com/DataDog/dd-trace-java/commit/b4fcd924d174cc8652a512744c05a7695e658a84", "message": "revapi", "committedDate": "2020-10-13T09:11:32Z", "type": "forcePushed"}, {"oid": "613cf7d092b29792829b7b72bcb68f75c06b7646", "url": "https://github.com/DataDog/dd-trace-java/commit/613cf7d092b29792829b7b72bcb68f75c06b7646", "message": "Exclude exec classes from coverage (they were already excluded in thread-utils)", "committedDate": "2020-10-13T11:16:31Z", "type": "forcePushed"}, {"oid": "23776fac48c139840e8c3405fd42a75eed6fc57c", "url": "https://github.com/DataDog/dd-trace-java/commit/23776fac48c139840e8c3405fd42a75eed6fc57c", "message": "Exclude exec classes from coverage (they were already excluded in thread-utils)", "committedDate": "2020-10-13T13:41:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTczNQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r504021735", "bodyText": "I wonder if we should have a datadog.trace.util package instead?", "author": "tylerbenson", "createdAt": "2020-10-13T14:56:53Z", "path": "dd-java-agent/instrumentation/exception-profiling/src/test/java/com/datadog/profiling/exceptions/StreamingSamplerTest.java", "diffHunk": "@@ -7,8 +7,8 @@\n import static org.mockito.ArgumentMatchers.same;\n import static org.mockito.Mockito.doNothing;\n \n-import datadog.common.exec.AgentTaskScheduler;\n-import datadog.common.exec.AgentTaskScheduler.Task;\n+import datadog.trace.api.exec.AgentTaskScheduler;", "originalCommit": "23776fac48c139840e8c3405fd42a75eed6fc57c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzMTA1MA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r504031050", "bodyText": "I'm OK with that - there's an existing datadog.trace.api.utils package in internal-api which currently has MathUtils and Strings, should those also go in datadog.trace.util if we add that package?", "author": "mcculls", "createdAt": "2020-10-13T15:08:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzMTcyMQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r504031721", "bodyText": "though it does mean we'd need to add that to various exclusion lists that it would otherwise get by virtue of being under datadog.trace.api", "author": "mcculls", "createdAt": "2020-10-13T15:09:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzODEwNA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r504038104", "bodyText": "yeah, I understand... I think it makes sense to have the separate package, but I don't feel strongly about it.", "author": "tylerbenson", "createdAt": "2020-10-13T15:17:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTczNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDYzNzUxMA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r504637510", "bodyText": "no worries, updated branch to use datadog.trace.util", "author": "mcculls", "createdAt": "2020-10-14T12:31:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAyMTczNQ=="}], "type": "inlineReview"}, {"oid": "95bc90f1f1c6e5db91514ee6d75c635d53c70fbe", "url": "https://github.com/DataDog/dd-trace-java/commit/95bc90f1f1c6e5db91514ee6d75c635d53c70fbe", "message": "revapi", "committedDate": "2020-10-14T12:22:21Z", "type": "forcePushed"}, {"oid": "1fe7ea2bfa229f9738059f9bdda48405b86306b3", "url": "https://github.com/DataDog/dd-trace-java/commit/1fe7ea2bfa229f9738059f9bdda48405b86306b3", "message": "Merge thread-utils module with internal-api", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "d895ac5250dde4819d725b2656d565f9f5346866", "url": "https://github.com/DataDog/dd-trace-java/commit/d895ac5250dde4819d725b2656d565f9f5346866", "message": "Exclude exec classes from coverage (they were already excluded in thread-utils)", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "239fe03c2154a64394dc0a797dc31491a3430ab4", "url": "https://github.com/DataDog/dd-trace-java/commit/239fe03c2154a64394dc0a797dc31491a3430ab4", "message": "Move test utilities to datadog.trace.test.util", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "4f20616f13a7d7c4195db8b37bb2d8184eee19dd", "url": "https://github.com/DataDog/dd-trace-java/commit/4f20616f13a7d7c4195db8b37bb2d8184eee19dd", "message": "Move datadog.trace.api.exec to datadog.trace.util (internal-api)", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "73c11eeac2fd05242388fa7d8fa5541e1be84e2b", "url": "https://github.com/DataDog/dd-trace-java/commit/73c11eeac2fd05242388fa7d8fa5541e1be84e2b", "message": "Mark datadog.trace.util as bootstrap package", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "97321a43d1506d50d0a7fd6b3269006496edb3ea", "url": "https://github.com/DataDog/dd-trace-java/commit/97321a43d1506d50d0a7fd6b3269006496edb3ea", "message": "Move datadog.trace.api.utils to datadog.trace.util", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "aa4a00b6eacdf140fcda156c9a7c6755d2dfc3da", "url": "https://github.com/DataDog/dd-trace-java/commit/aa4a00b6eacdf140fcda156c9a7c6755d2dfc3da", "message": "revapi", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "75941fe515bd5d8990cb86c873f0193ededd048e", "url": "https://github.com/DataDog/dd-trace-java/commit/75941fe515bd5d8990cb86c873f0193ededd048e", "message": "Exclude shutdown class from coverage", "committedDate": "2020-10-15T12:29:33Z", "type": "commit"}, {"oid": "75941fe515bd5d8990cb86c873f0193ededd048e", "url": "https://github.com/DataDog/dd-trace-java/commit/75941fe515bd5d8990cb86c873f0193ededd048e", "message": "Exclude shutdown class from coverage", "committedDate": "2020-10-15T12:29:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4ODc0Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1970#discussion_r505588747", "bodyText": "I would have preferred splitting up the util package... ie datadog.trace.util.exec but not a big deal.", "author": "tylerbenson", "createdAt": "2020-10-15T14:28:24Z", "path": "dd-java-agent/agent-tooling/src/main/java/datadog/trace/agent/tooling/WeakMapSuppliers.java", "diffHunk": "@@ -1,9 +1,9 @@\n package datadog.trace.agent.tooling;\n \n import com.blogspot.mydailyjava.weaklockfree.WeakConcurrentMap;\n-import datadog.common.exec.AgentTaskScheduler;\n-import datadog.common.exec.AgentTaskScheduler.Task;\n import datadog.trace.bootstrap.WeakMap;\n+import datadog.trace.util.AgentTaskScheduler;", "originalCommit": "75941fe515bd5d8990cb86c873f0193ededd048e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}