{"pr_number": 1516, "pr_title": "Make profiling errors more clear and less scary", "pr_createdAt": "2020-06-01T14:13:39Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1516", "timeline": [{"oid": "5fb063f5e866b76facd1d534e75fcd7a44d7607a", "url": "https://github.com/DataDog/dd-trace-java/commit/5fb063f5e866b76facd1d534e75fcd7a44d7607a", "message": "Make profiling errors more clear and less scary\n\n* Make them warnings instead\n* Also some renames to clarify code", "committedDate": "2020-06-01T14:15:13Z", "type": "forcePushed"}, {"oid": "5c3d129ef7ca9f5a2b2dc684c6981bbb1a9bd156", "url": "https://github.com/DataDog/dd-trace-java/commit/5c3d129ef7ca9f5a2b2dc684c6981bbb1a9bd156", "message": "Make profiling errors more clear and less scary\n\n* Make them warnings instead\n* Also some renames to clarify code", "committedDate": "2020-06-01T14:27:49Z", "type": "forcePushed"}, {"oid": "c308d76f82dc71606ab0e679bf453af88f3f940b", "url": "https://github.com/DataDog/dd-trace-java/commit/c308d76f82dc71606ab0e679bf453af88f3f940b", "message": "Make profiling errors more clear and less scary\n\n* Make them warnings instead\n* Also some renames to clarify code", "committedDate": "2020-06-01T15:20:55Z", "type": "commit"}, {"oid": "c308d76f82dc71606ab0e679bf453af88f3f940b", "url": "https://github.com/DataDog/dd-trace-java/commit/c308d76f82dc71606ab0e679bf453af88f3f940b", "message": "Make profiling errors more clear and less scary\n\n* Make them warnings instead\n* Also some renames to clarify code", "committedDate": "2020-06-01T15:20:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MDg4NQ==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433390885", "bodyText": "We don't support this yet do we?", "author": "dbenamydd", "createdAt": "2020-06-01T17:49:09Z", "path": "dd-java-agent/agent-profiling/profiling-uploader/src/main/java/com/datadog/profiling/uploader/ProfileUploader.java", "diffHunk": "@@ -50,19 +50,18 @@\n import okhttp3.RequestBody;\n import okhttp3.Response;\n \n-/** The class for uploading recordings to the backend. */\n+/** The class for uploading profiles to the backend. */\n @Slf4j\n-public final class RecordingUploader {\n+public final class ProfileUploader {\n \n   private static final MediaType OCTET_STREAM = MediaType.parse(\"application/octet-stream\");\n \n-  static final String RECORDING_NAME_PARAM = \"recording-name\";\n   static final String FORMAT_PARAM = \"format\";\n   static final String TYPE_PARAM = \"type\";\n   static final String RUNTIME_PARAM = \"runtime\";\n \n-  static final String RECORDING_START_PARAM = \"recording-start\";\n-  static final String RECORDING_END_PARAM = \"recording-end\";\n+  static final String PROFILE_START_PARAM = \"profile-start\";\n+  static final String PROFILE_END_PARAM = \"profile-end\";", "originalCommit": "c308d76f82dc71606ab0e679bf453af88f3f940b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc0ODYxNw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433748617", "bodyText": "Our intake does not support this yet (see https://github.com/DataDog/logs-backend/blob/prod/intake/src/main/java/com/fsmatic/intake/socket/MultiPartFormProfileMessageDecoder.java#L62).\nWe could retrieve data from profile-* and fallback on recording-* if not found to make this compatible with existing profilers.\nAlso, you will want to change profile-* date format since it represents a timestamp in the BE and recording-* represents a instant (like 2007-12-03T10:15:30.00Z).", "author": "flodav", "createdAt": "2020-06-02T09:37:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MDg4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc5MTIzNA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433791234", "bodyText": "I'll be doing some changes to intake soon. I'll also add support for new fields to better match our data model and deprecate the legacy ones.", "author": "AlexJF", "createdAt": "2020-06-02T10:58:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MDg4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc5Mzg1Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433793857", "bodyText": "\ud83e\udd26 totally misread that code :(", "author": "mar-kolya", "createdAt": "2020-06-02T11:04:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MDg4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzc5ODE4Ng==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433798186", "bodyText": "Updated", "author": "mar-kolya", "createdAt": "2020-06-02T11:13:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MDg4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzM5MTY1NA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1516#discussion_r433391654", "bodyText": "\ud83d\udc4d", "author": "dbenamydd", "createdAt": "2020-06-01T17:50:34Z", "path": "dd-java-agent/agent-profiling/profiling-uploader/src/main/java/com/datadog/profiling/uploader/ProfileUploader.java", "diffHunk": "@@ -291,13 +289,12 @@ private void makeUploadRequest(final RecordingType type, final RecordingData dat\n     final MultipartBody.Builder bodyBuilder =\n         new MultipartBody.Builder()\n             .setType(MultipartBody.FORM)\n-            .addFormDataPart(RECORDING_NAME_PARAM, data.getName())", "originalCommit": "c308d76f82dc71606ab0e679bf453af88f3f940b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "590b94edd1d0ec709dc47f37ba279c5a13d291af", "url": "https://github.com/DataDog/dd-trace-java/commit/590b94edd1d0ec709dc47f37ba279c5a13d291af", "message": "Undo parameter rename", "committedDate": "2020-06-02T11:10:30Z", "type": "commit"}, {"oid": "9f96aff3e72c61661e57384df6c3953dd388f946", "url": "https://github.com/DataDog/dd-trace-java/commit/9f96aff3e72c61661e57384df6c3953dd388f946", "message": "Merge branch 'master' into mar-kolya/improve-profiling-error-messages", "committedDate": "2020-06-02T11:48:33Z", "type": "commit"}]}