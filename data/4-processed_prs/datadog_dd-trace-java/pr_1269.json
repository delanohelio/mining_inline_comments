{"pr_number": 1269, "pr_title": "Use plugin to automatically set version", "pr_createdAt": "2020-02-27T18:50:59Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1269", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNzI5Nw==", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#discussion_r385317297", "bodyText": "How does this work?  What actually pushes that commit to master? Is there a new gradle task that needs to be run?", "author": "tylerbenson", "createdAt": "2020-02-27T19:16:21Z", "path": "dd-trace-java.gradle", "diffHunk": "@@ -10,13 +10,33 @@ plugins {\n   // files in 'workspace' build directory in CI\n   id 'com.github.sherter.google-java-format' version '0.8' apply false\n   id 'com.dorongold.task-tree' version '1.5'\n+  id 'pl.allegro.tech.build.axion-release' version '1.9.3'\n }\n \n def isCI = System.getenv(\"CI\") != null\n \n+scmVersion {\n+  tag {\n+    prefix = 'v'\n+    versionSeparator = ''\n+  }\n+\n+  createReleaseCommit true", "originalCommit": "924e81fc48a24434972856847d88656734ec3bf7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTM2NjIzMA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#discussion_r385366230", "bodyText": "./gradlew release will:\n\nRun some checks\nCreate a commit with with the message \"Version x.x.x\"\nTag the commit with vx.x.x\nPush to master.\n\nAlternatively, you can still manually do all of those steps.", "author": "randomanderson", "createdAt": "2020-02-27T20:55:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNzI5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQwMTIxOA==", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#discussion_r385401218", "bodyText": "What change is in the Version x.x.x commit?\nAlso, what will the snapshot version be with this change?  (What version does non-released builds report?)", "author": "tylerbenson", "createdAt": "2020-02-27T22:11:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNzI5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTQyMzYwMg==", "url": "https://github.com/DataDog/dd-trace-java/pull/1269#discussion_r385423602", "bodyText": "There aren't any changes in the Version x.x.x commit.  It's not entirely necessary which is why I said\n\nI preserved our practice of generating a release commit but don't have strong feelings about it\n\nSince we're not going to allow direct commits to master, I'll remove it.\nThe version is the latest tag unless there are changes after in which case it's the next version snapshot.  So right now it's 0.45.0-SNAPSHOT since the last tag was v0.44.0.", "author": "randomanderson", "createdAt": "2020-02-27T23:09:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTMxNzI5Nw=="}], "type": "inlineReview"}, {"oid": "fa50a545520ab7700bd0b6834f335f968cced10f", "url": "https://github.com/DataDog/dd-trace-java/commit/fa50a545520ab7700bd0b6834f335f968cced10f", "message": "Use plugin to automatically set version", "committedDate": "2020-03-10T16:26:46Z", "type": "commit"}, {"oid": "c14a9276b3d97555ecb37af18c29ee3d65c5db1a", "url": "https://github.com/DataDog/dd-trace-java/commit/c14a9276b3d97555ecb37af18c29ee3d65c5db1a", "message": "Add a release commit to match previous behavior", "committedDate": "2020-03-10T16:26:46Z", "type": "commit"}, {"oid": "6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "url": "https://github.com/DataDog/dd-trace-java/commit/6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "message": "Don't create release tag", "committedDate": "2020-03-10T16:26:46Z", "type": "commit"}, {"oid": "6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "url": "https://github.com/DataDog/dd-trace-java/commit/6d99b138d2f2dd37ab668a5ddc99959efb3154c7", "message": "Don't create release tag", "committedDate": "2020-03-10T16:26:46Z", "type": "forcePushed"}]}