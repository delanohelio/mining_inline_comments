{"pr_number": 1762, "pr_title": " trace agent v0.5 integration tests", "pr_createdAt": "2020-08-11T15:28:05Z", "pr_url": "https://github.com/DataDog/dd-trace-java/pull/1762", "timeline": [{"oid": "5ea0d29a42f7ab745f24ede0a951e74ced39e612", "url": "https://github.com/DataDog/dd-trace-java/commit/5ea0d29a42f7ab745f24ede0a951e74ced39e612", "message": "trace agent v0.5 integration tests", "committedDate": "2020-08-11T15:46:49Z", "type": "forcePushed"}, {"oid": "da1b6f2ebac6b7fd14e0b3c69384b6db242dfb92", "url": "https://github.com/DataDog/dd-trace-java/commit/da1b6f2ebac6b7fd14e0b3c69384b6db242dfb92", "message": "specify agent image version in gitlab config", "committedDate": "2020-08-11T18:13:06Z", "type": "forcePushed"}, {"oid": "f6245e51e9bc41a01f30b3638ef53a50ca5d277f", "url": "https://github.com/DataDog/dd-trace-java/commit/f6245e51e9bc41a01f30b3638ef53a50ca5d277f", "message": "drop this", "committedDate": "2020-08-11T19:14:45Z", "type": "forcePushed"}, {"oid": "6898fdf8ed567128f82e263798782c7ad7049204", "url": "https://github.com/DataDog/dd-trace-java/commit/6898fdf8ed567128f82e263798782c7ad7049204", "message": "drop this", "committedDate": "2020-08-11T19:21:04Z", "type": "forcePushed"}, {"oid": "25cdcadf9f07cbba584d8c3945657f4b41055346", "url": "https://github.com/DataDog/dd-trace-java/commit/25cdcadf9f07cbba584d8c3945657f4b41055346", "message": "test detected endpoint version", "committedDate": "2020-08-11T20:09:25Z", "type": "forcePushed"}, {"oid": "a3b5e8023001c29c7dc0c82e9ae3a8406c3ab334", "url": "https://github.com/DataDog/dd-trace-java/commit/a3b5e8023001c29c7dc0c82e9ae3a8406c3ab334", "message": "test detected endpoint version", "committedDate": "2020-08-11T20:11:31Z", "type": "forcePushed"}, {"oid": "64ee96b106dae646f543710b76ed284b0037d976", "url": "https://github.com/DataDog/dd-trace-java/commit/64ee96b106dae646f543710b76ed284b0037d976", "message": "improve assertions", "committedDate": "2020-08-11T20:39:22Z", "type": "forcePushed"}, {"oid": "2619c8568b4b1d607562adce0ccb4a83c8be48a4", "url": "https://github.com/DataDog/dd-trace-java/commit/2619c8568b4b1d607562adce0ccb4a83c8be48a4", "message": "trace agent v0.5 integration tests", "committedDate": "2020-08-13T10:29:24Z", "type": "commit"}, {"oid": "429f9768f453ecfe07c3cfe7a085388984b5d99b", "url": "https://github.com/DataDog/dd-trace-java/commit/429f9768f453ecfe07c3cfe7a085388984b5d99b", "message": "specify agent image version in gitlab config", "committedDate": "2020-08-13T10:29:24Z", "type": "commit"}, {"oid": "878b230b3f7ae35f0815b4d49ddf39d890290ffe", "url": "https://github.com/DataDog/dd-trace-java/commit/878b230b3f7ae35f0815b4d49ddf39d890290ffe", "message": "test detected endpoint version", "committedDate": "2020-08-13T10:29:24Z", "type": "commit"}, {"oid": "c6d3de68b7500d8e6b1cd45f70b0d10bade5f00a", "url": "https://github.com/DataDog/dd-trace-java/commit/c6d3de68b7500d8e6b1cd45f70b0d10bade5f00a", "message": "improve assertions", "committedDate": "2020-08-13T10:29:24Z", "type": "commit"}, {"oid": "44d371e9372d15cfbf1b17242f4d77b74e2de45d", "url": "https://github.com/DataDog/dd-trace-java/commit/44d371e9372d15cfbf1b17242f4d77b74e2de45d", "message": "assert about response body", "committedDate": "2020-08-13T10:29:24Z", "type": "commit"}, {"oid": "b5158d5c1e9b660782e759ff1ca5508812e4707d", "url": "https://github.com/DataDog/dd-trace-java/commit/b5158d5c1e9b660782e759ff1ca5508812e4707d", "message": "report error message from response's body when available", "committedDate": "2020-08-13T10:38:38Z", "type": "commit"}, {"oid": "b5158d5c1e9b660782e759ff1ca5508812e4707d", "url": "https://github.com/DataDog/dd-trace-java/commit/b5158d5c1e9b660782e759ff1ca5508812e4707d", "message": "report error message from response's body when available", "committedDate": "2020-08-13T10:38:38Z", "type": "forcePushed"}, {"oid": "4077cfaf5055080f3ee2ddf56b9fdf969f68b9f2", "url": "https://github.com/DataDog/dd-trace-java/commit/4077cfaf5055080f3ee2ddf56b9fdf969f68b9f2", "message": "update to rc.3", "committedDate": "2020-08-13T17:46:20Z", "type": "commit"}, {"oid": "a294e2098dadc07138b22bd4599c57e005bc4850", "url": "https://github.com/DataDog/dd-trace-java/commit/a294e2098dadc07138b22bd4599c57e005bc4850", "message": "make it possible to disable trace agent v0.5, add ingtegration test for disabled endpoint", "committedDate": "2020-08-13T20:42:37Z", "type": "commit"}, {"oid": "0159bcd6a4eec4033f372998c1a631437bd37e36", "url": "https://github.com/DataDog/dd-trace-java/commit/0159bcd6a4eec4033f372998c1a631437bd37e36", "message": "cut down number of tests to finish within timeout", "committedDate": "2020-08-13T21:09:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MDQ2NDg3Ng==", "url": "https://github.com/DataDog/dd-trace-java/pull/1762#discussion_r470464876", "bodyText": "Nice cleanup", "author": "bantonsson", "createdAt": "2020-08-14T07:46:55Z", "path": "dd-trace-core/src/main/java/datadog/trace/common/writer/ddagent/DDAgentApi.java", "diffHunk": "@@ -186,28 +199,26 @@ private void countAndLogFailedSend(\n       final IOException outer) {\n     // count the failed traces\n     this.failedTraces += traceCount;\n-\n     // these are used to catch and log if there is a failure in debug logging the response body\n-    IOException exception = outer;\n     boolean hasLogged = false;\n-\n+    String agentError = getResponseBody(response);", "originalCommit": "0159bcd6a4eec4033f372998c1a631437bd37e36", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}