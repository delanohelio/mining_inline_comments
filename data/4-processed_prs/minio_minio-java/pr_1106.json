{"pr_number": 1106, "pr_title": "Add more validation in lifecycle configuration class", "pr_createdAt": "2020-11-08T11:41:09Z", "pr_url": "https://github.com/minio/minio-java/pull/1106", "timeline": [{"oid": "b610c791c2ba80430b0eb7a7bc2f9d91a613d4a9", "url": "https://github.com/minio/minio-java/commit/b610c791c2ba80430b0eb7a7bc2f9d91a613d4a9", "message": "Add more validation in LifecycleConfiguration class", "committedDate": "2020-11-25T03:21:34Z", "type": "forcePushed"}, {"oid": "825c124f46a66fce944103622a65d12742dd3fea", "url": "https://github.com/minio/minio-java/commit/825c124f46a66fce944103622a65d12742dd3fea", "message": "Add more validation in LifecycleConfiguration class", "committedDate": "2020-11-26T04:36:16Z", "type": "commit"}, {"oid": "825c124f46a66fce944103622a65d12742dd3fea", "url": "https://github.com/minio/minio-java/commit/825c124f46a66fce944103622a65d12742dd3fea", "message": "Add more validation in LifecycleConfiguration class", "committedDate": "2020-11-26T04:36:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDgyMjgxOA==", "url": "https://github.com/minio/minio-java/pull/1106#discussion_r530822818", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          + \"NoncurrentVersionExpiration, NoncurrentVersionTransition or Transition) must to \"\n          \n          \n            \n                          + \"be specified in a rule\");\n          \n          \n            \n                          + \"NoncurrentVersionExpiration, NoncurrentVersionTransition or Transition) must \"\n          \n          \n            \n                          + \"be specified in a rule\");", "author": "anjalshireesh", "createdAt": "2020-11-26T07:37:11Z", "path": "api/src/main/java/io/minio/messages/LifecycleRule.java", "diffHunk": "@@ -55,13 +55,24 @@ public LifecycleRule(\n       @Nullable @Element(name = \"AbortIncompleteMultipartUpload\", required = false)\n           AbortIncompleteMultipartUpload abortIncompleteMultipartUpload,\n       @Nullable @Element(name = \"Expiration\", required = false) Expiration expiration,\n-      @Nullable @Element(name = \"Filter\", required = false) RuleFilter filter,\n+      @Nonnull @Element(name = \"Filter\", required = false) RuleFilter filter,\n       @Nullable @Element(name = \"ID\", required = false) String id,\n       @Nullable @Element(name = \"NoncurrentVersionExpiration\", required = false)\n           NoncurrentVersionExpiration noncurrentVersionExpiration,\n       @Nullable @Element(name = \"NoncurrentVersionTransition\", required = false)\n           NoncurrentVersionTransition noncurrentVersionTransition,\n       @Nullable @Element(name = \"Transition\", required = false) Transition transition) {\n+    if (abortIncompleteMultipartUpload == null\n+        && expiration == null\n+        && noncurrentVersionExpiration == null\n+        && noncurrentVersionTransition == null\n+        && transition == null) {\n+      throw new IllegalArgumentException(\n+          \"At least one of action (AbortIncompleteMultipartUpload, Expiration, \"\n+              + \"NoncurrentVersionExpiration, NoncurrentVersionTransition or Transition) must to \"\n+              + \"be specified in a rule\");", "originalCommit": "825c124f46a66fce944103622a65d12742dd3fea", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDk0MzUxNA==", "url": "https://github.com/minio/minio-java/pull/1106#discussion_r530943514", "bodyText": "Done", "author": "balamurugana", "createdAt": "2020-11-26T10:54:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDgyMjgxOA=="}], "type": "inlineReview"}, {"oid": "e32554bc8fd5cabea091c758ca35c60439f52aa1", "url": "https://github.com/minio/minio-java/commit/e32554bc8fd5cabea091c758ca35c60439f52aa1", "message": "address review comments", "committedDate": "2020-11-26T10:54:44Z", "type": "commit"}]}