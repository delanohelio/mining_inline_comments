{"pr_number": 12942, "pr_title": "Fix for WFLY-13017, cloud-server layer to extend jaxrs-server layer", "pr_createdAt": "2020-01-27T18:06:06Z", "pr_url": "https://github.com/wildfly/wildfly/pull/12942", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ0OTk0Nw==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r371449947", "bodyText": "A comment here as to why this is optional would be good. Some maintainer some day will wonder and may naively remove the optional.", "author": "bstansberry", "createdAt": "2020-01-27T19:54:34Z", "path": "galleon-pack/src/main/resources/layers/standalone/jaxrs-server/layer-spec.xml", "diffHunk": "@@ -2,7 +2,7 @@\n <layer-spec xmlns=\"urn:jboss:galleon:layer-spec:1.0\" name=\"jaxrs-server\">\n     <dependencies>\n         <layer name=\"datasources-web-server\"/>\n-        <layer name=\"jaxrs\" />\n+        <layer name=\"jaxrs\" optional=\"true\"/>", "originalCommit": "bca39c6f62681215e07daf087942d5db9a255c1a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY2ODg1MA==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r371668850", "bodyText": "Ok, added.", "author": "jfdenise", "createdAt": "2020-01-28T08:46:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQ0OTk0Nw=="}], "type": "inlineReview"}, {"oid": "31469134f5289dc47d50a33562d1e14235515e40", "url": "https://github.com/wildfly/wildfly/commit/31469134f5289dc47d50a33562d1e14235515e40", "message": "Fix for WFLY-13017, cloud-server layer to extend jaxrs-server layer", "committedDate": "2020-01-28T08:46:05Z", "type": "commit"}, {"oid": "31469134f5289dc47d50a33562d1e14235515e40", "url": "https://github.com/wildfly/wildfly/commit/31469134f5289dc47d50a33562d1e14235515e40", "message": "Fix for WFLY-13017, cloud-server layer to extend jaxrs-server layer", "committedDate": "2020-01-28T08:46:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2ODU5OQ==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r373368599", "bodyText": "@jfdenise could you please confirm my understanding?\n\ncore-server, core-tools and undertow-elytron-security will now come from jaxrs-server > datasources-web-server\ncloud-profile is no longer required as all layers listed in it are now listed in cloud-server. But shouldn't still be a relation between cloud-server and cloud-profile?", "author": "jmesnil", "createdAt": "2020-01-31T08:44:44Z", "path": "galleon-pack/src/main/resources/layers/standalone/cloud-server/layer-spec.xml", "diffHunk": "@@ -1,13 +1,10 @@\n <?xml version=\"1.0\" ?>\n <layer-spec xmlns=\"urn:jboss:galleon:layer-spec:1.0\" name=\"cloud-server\">\n     <dependencies>\n-        <layer name=\"cloud-profile\"/>\n-        <layer name=\"core-server\"/>\n-        <layer name=\"core-tools\"/>\n+        <layer name=\"jaxrs-server\"/>\n+        <layer name=\"ee-security\" optional=\"true\"/>\n+        <layer name=\"jms-activemq\" optional=\"true\"/>\n+        <layer name=\"observability\" optional=\"true\"/>\n+        <layer name=\"resource-adapters\" optional=\"true\"/>\n     </dependencies>\n-    <feature-group name=\"undertow-elytron-security\"/>", "originalCommit": "31469134f5289dc47d50a33562d1e14235515e40", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM3MzQyMQ==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r373373421", "bodyText": "What kind of relation we could have? cloud-profile dependency is to me an implementation detail. With dependency on jaxrs-server we offer the same level of flexibility.", "author": "jfdenise", "createdAt": "2020-01-31T08:57:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2ODU5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcxMzg4Mg==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r373713882", "bodyText": "This is a tangent and not something to address here but I suspect the documentation of cloud-profile is no longer accurate.\ncloud-profile, an aggregation of the basic layers (except h2-* layers) and a web-server .\nThe \"basic layers\" list is a moving target.\nHmm, maybe my #12927 change to that file (https://github.com/wildfly/wildfly/pull/12927/files#diff-9a6f6b7a6bd30fddb786db3840aac00f) somewhat makes that go away by moving FT/JWT/OpenAPI into a different section.  But that text can break in the future, as soon as we add a new layer.\nPerhaps drop it from the doc page?", "author": "bstansberry", "createdAt": "2020-01-31T22:29:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2ODU5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzcxNDAyMg==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r373714022", "bodyText": "@jfdenise ^^^", "author": "bstansberry", "createdAt": "2020-01-31T22:30:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2ODU5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Mzk4NTg1Nw==", "url": "https://github.com/wildfly/wildfly/pull/12942#discussion_r373985857", "bodyText": "Yes, +1 to remove it from the doc.", "author": "jfdenise", "createdAt": "2020-02-03T09:05:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzM2ODU5OQ=="}], "type": "inlineReview"}]}