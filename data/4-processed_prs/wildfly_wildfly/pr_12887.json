{"pr_number": 12887, "pr_title": "[WFLY-12190] EJB: EJB over HTTP discovery configuration", "pr_createdAt": "2020-01-08T00:35:18Z", "pr_url": "https://github.com/wildfly/wildfly/pull/12887", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDMzODYxOQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r364338619", "bodyText": "TODO", "author": "darranl", "createdAt": "2020-01-08T16:59:12Z", "path": "ejb3/src/main/resources/org/jboss/as/ejb3/subsystem/LocalDescriptions.properties", "diffHunk": "@@ -341,6 +341,10 @@ remoting-ejb-receiver.add=Adds a remoting ejb receiver reference to the profile\n remoting-ejb-receiver.remove=Removes a remoting ejb receiver reference from the profile\n remoting-ejb-receiver.outbound-connection-ref=Name of outbound connection that will be used by the ejb receiver\n remoting-ejb-receiver.connect-timeout=Remoting ejb receiver connect timeout\n+remote-http-connection=TODO", "originalCommit": "348863dcfb356dcdd6c02b83c6d328ac67aa2531", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "780f982d57099d97d09dc6343e3774265bbb96ae", "url": "https://github.com/wildfly/wildfly/commit/780f982d57099d97d09dc6343e3774265bbb96ae", "message": "[WFLY-12190] EJB: EJB over HTTP discovery configuration", "committedDate": "2020-01-13T18:40:05Z", "type": "forcePushed"}, {"oid": "462428132475446ea51978e9f43d283779f94756", "url": "https://github.com/wildfly/wildfly/commit/462428132475446ea51978e9f43d283779f94756", "message": "make tests work", "committedDate": "2020-03-12T10:40:10Z", "type": "forcePushed"}, {"oid": "a45fab76aec16a102cbf94d510e47055af98f47c", "url": "https://github.com/wildfly/wildfly/commit/a45fab76aec16a102cbf94d510e47055af98f47c", "message": "[WFLY-12190] Integration test", "committedDate": "2020-05-05T12:05:39Z", "type": "forcePushed"}, {"oid": "a79e3f942801a2db2c5d2d65b1d9ed22d0ccd7e7", "url": "https://github.com/wildfly/wildfly/commit/a79e3f942801a2db2c5d2d65b1d9ed22d0ccd7e7", "message": "[WFLY-12190] Community docs", "committedDate": "2020-05-07T09:50:55Z", "type": "forcePushed"}, {"oid": "9af08db5cea9503dc121a681cbdb55bce1b0e0f0", "url": "https://github.com/wildfly/wildfly/commit/9af08db5cea9503dc121a681cbdb55bce1b0e0f0", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-07-11T09:34:25Z", "type": "forcePushed"}, {"oid": "d57f27dfff56b4eea7f026ab82e35086c0ccbd9b", "url": "https://github.com/wildfly/wildfly/commit/d57f27dfff56b4eea7f026ab82e35086c0ccbd9b", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-07-12T16:18:12Z", "type": "forcePushed"}, {"oid": "dfeb23fe2b2e90a60e33472e05dfffebf099090e", "url": "https://github.com/wildfly/wildfly/commit/dfeb23fe2b2e90a60e33472e05dfffebf099090e", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-07-12T20:27:49Z", "type": "forcePushed"}, {"oid": "9b65bdbc8c98b692894d12c5e37e4d42ed058eed", "url": "https://github.com/wildfly/wildfly/commit/9b65bdbc8c98b692894d12c5e37e4d42ed058eed", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-07-21T06:37:41Z", "type": "forcePushed"}, {"oid": "0e609e1037596d706336db44cca47d42bfeaee83", "url": "https://github.com/wildfly/wildfly/commit/0e609e1037596d706336db44cca47d42bfeaee83", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-08-10T09:38:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTIwOA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951208", "bodyText": "This is a duplicate.", "author": "bstansberry", "createdAt": "2020-09-05T13:28:23Z", "path": "ee-feature-pack/common/src/main/resources/modules/system/layers/base/org/jboss/as/ejb3/main/module.xml", "diffHunk": "@@ -112,10 +112,13 @@\n \n         <module name=\"org.wildfly.common\"/>\n         <module name=\"org.wildfly.transaction.client\"/>\n+\n         <!-- Those are needed for integration with hibernate validator -->\n         <module name=\"javax.enterprise.api\" optional=\"true\"/>\n         <module name=\"org.jboss.as.weld.common\" optional=\"true\"/>\n         <module name=\"org.hibernate.validator\" optional=\"true\"/>\n         <module name=\"org.hibernate.validator.cdi\" optional=\"true\"/>\n+\n+        <module name=\"org.wildfly.http-client.ejb\"/>", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5Mzg1Ng==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484893856", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:56:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTIwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTI2OQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951269", "bodyText": "This field should be final.  The ones above and below as well.", "author": "bstansberry", "createdAt": "2020-09-05T13:29:17Z", "path": "ee/src/main/java/org/jboss/as/ee/metadata/EJBClientDescriptorMetaData.java", "diffHunk": "@@ -46,6 +48,7 @@\n     private int defaultCompression;\n \n     private Map<String, RemotingReceiverConfiguration> remotingReceiverConfigurations = new HashMap<String, RemotingReceiverConfiguration>();\n+    private List<HttpConnectionConfiguration> httpConnectionConfigurations = new ArrayList<>();", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTM3OQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951379", "bodyText": "Also, there is no code that modifies this list, so something is missing somewhere.", "author": "bstansberry", "createdAt": "2020-09-05T13:30:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTI2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDQ5NA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894494", "bodyText": "This was a bug. I have added the code that allows to configure http connections from jboss-ejb-client.xml file and added a test for that EjbOverHttpDescriptorTestCase", "author": "tadamski", "createdAt": "2020-09-08T12:57:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTI2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTQ0OA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951448", "bodyText": "This should be final and presumably static.", "author": "bstansberry", "createdAt": "2020-09-05T13:31:18Z", "path": "ee/src/main/java/org/jboss/as/ee/metadata/EJBClientDescriptorMetaData.java", "diffHunk": "@@ -346,4 +353,16 @@ public int hashCode() {\n             return outboundConnectionRef != null ? outboundConnectionRef.hashCode() : 0;\n         }\n     }\n+\n+    public class HttpConnectionConfiguration {", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NjU0NQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484896545", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T13:01:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTQ0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTg2Mg==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951862", "bodyText": "s/Remote profile/A remote profile/g\ns/specificies/specifies", "author": "bstansberry", "createdAt": "2020-09-05T13:36:41Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDcxNw==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894717", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTg2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTg5NQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951895", "bodyText": "s/either static or dynamic/either a static or a dynamic/g", "author": "bstansberry", "createdAt": "2020-09-05T13:37:09Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDc5MQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894791", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTg5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MTk1OQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483951959", "bodyText": "s/to connect/to connect to/g", "author": "bstansberry", "createdAt": "2020-09-05T13:38:16Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjA0NQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952045", "bodyText": "s/monitoring avaiable/monitoring the available/g", "author": "bstansberry", "createdAt": "2020-09-05T13:39:14Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjA3Ng==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952076", "bodyText": "\"connect to based on the gathered data.\"", "author": "bstansberry", "createdAt": "2020-09-05T13:39:43Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjI1Ng==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952256", "bodyText": "Perhaps s/user/administrator  ?\nAIUI the end user making the request isn't involved, so it's a user who administers the server config.", "author": "bstansberry", "createdAt": "2020-09-05T13:41:48Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjMwMQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952301", "bodyText": "s/allows/allows the administrator/g", "author": "bstansberry", "createdAt": "2020-09-05T13:42:21Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjM1NA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952354", "bodyText": "s/module/The module/g", "author": "bstansberry", "createdAt": "2020-09-05T13:43:14Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes\n+given EJBs are located. `module` tag is used to define it:", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDg1MQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894851", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjM1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjM3OQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952379", "bodyText": "s/remoting-ejb-receiver/The remoting-ejb-receiver/g", "author": "bstansberry", "createdAt": "2020-09-05T13:43:38Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes\n+given EJBs are located. `module` tag is used to define it:\n+\n+* `module-name` the name of EJB module\n+* `app-name` the name of EJB app\n+* `distinct-name` the distinct name EJB\n+* `uri` the address on which given EJB is located\n+\n+[[remoting-ejb-receiver]]\n+==== <remoting-ejb-receiver>\n+\n+`remoting-ejb-receiver` tag is used to define dynamic discovery based on", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDkwOA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894908", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjM3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQwNQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952405", "bodyText": "s/procol/protocol", "author": "bstansberry", "createdAt": "2020-09-05T13:43:51Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes\n+given EJBs are located. `module` tag is used to define it:\n+\n+* `module-name` the name of EJB module\n+* `app-name` the name of EJB app\n+* `distinct-name` the distinct name EJB\n+* `uri` the address on which given EJB is located\n+\n+[[remoting-ejb-receiver]]\n+==== <remoting-ejb-receiver>\n+\n+`remoting-ejb-receiver` tag is used to define dynamic discovery based on\n+the remoting procol:", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NDk2MQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484894961", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0MQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952441", "bodyText": "s/remote-http-connection/The remote-http-connection/g", "author": "bstansberry", "createdAt": "2020-09-05T13:44:14Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes\n+given EJBs are located. `module` tag is used to define it:\n+\n+* `module-name` the name of EJB module\n+* `app-name` the name of EJB app\n+* `distinct-name` the distinct name EJB\n+* `uri` the address on which given EJB is located\n+\n+[[remoting-ejb-receiver]]\n+==== <remoting-ejb-receiver>\n+\n+`remoting-ejb-receiver` tag is used to define dynamic discovery based on\n+the remoting procol:\n+\n+* `name` name of the remote connection\n+* `outbound-connection-ref` reference to outbound connection defined in\n+the remoting subsystem\n+* `connection-timeout` the timeout of the connection\n+\n+[[remote-http-connection]]\n+==== <remote-http-connection>\n+\n+`remote-http-connection` tag is used to define dynamic discovery based on", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NTAyOQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484895029", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r483952446", "bodyText": "s/procol/protocol", "author": "bstansberry", "createdAt": "2020-09-05T13:44:24Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/EJB3.adoc", "diffHunk": "@@ -174,6 +184,51 @@ This is used to enable remote EJB invocations. It specifies a space-separated li\n connectors to use (as defined in the remoting subsystem configuration),\n and the thread pool to use for remote invocations.\n \n+[[profile]]\n+=== <profile>\n+\n+Remote profile specificies a configuration of remote invocations that can\n+be referenced by many deployments. EJBs that are meant to be invoked can\n+be discovered in either static or dynamic way.\n+\n+Static discovery decides which remote node to connect based on the information\n+provided by the user.\n+\n+Dynamic discovery is responsible for monitoring available EJBs on all the\n+nodes to which connections are configured and decides which remote node to\n+connect based on gathered data.\n+\n+[[static-ejb-discovery]]\n+==== <static-ejb-discovery>\n+\n+Static ejb discovery allows to explicitly specify on which remote nodes\n+given EJBs are located. `module` tag is used to define it:\n+\n+* `module-name` the name of EJB module\n+* `app-name` the name of EJB app\n+* `distinct-name` the distinct name EJB\n+* `uri` the address on which given EJB is located\n+\n+[[remoting-ejb-receiver]]\n+==== <remoting-ejb-receiver>\n+\n+`remoting-ejb-receiver` tag is used to define dynamic discovery based on\n+the remoting procol:\n+\n+* `name` name of the remote connection\n+* `outbound-connection-ref` reference to outbound connection defined in\n+the remoting subsystem\n+* `connection-timeout` the timeout of the connection\n+\n+[[remote-http-connection]]\n+==== <remote-http-connection>\n+\n+`remote-http-connection` tag is used to define dynamic discovery based on\n+HTTP procol:", "originalCommit": "0e609e1037596d706336db44cca47d42bfeaee83", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDg5NTA5MQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484895091", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-08T12:58:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDkwNTE0OA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r484905148", "bodyText": "I think the main question I would like to ask is - is there sufficient test coverage of clients using authentication client configuration for a dynamically discovered destination?\nAs mentioned earlier we have aspects such as SSL and the credentials for authentication which should already be covered by the EJB client to verification that the behaviour is correct.  In this case I believe it will be preferable for the resolved configuration to be based on the discovered destination.", "author": "darranl", "createdAt": "2020-09-08T13:14:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMxNjk4OQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r486316989", "bodyText": "The test coverage for the dynamically discovered destinations would require additional analysis. OTOH, dynamic discovery is main route of invocation also for remoting and this commit just adds this feature for HTTP. Currently EAP/WildFly already relies on dynamic invocation and if we decide that the testsuite have to be extended it should be done for a number of scenarios, possibly independently of this PR.", "author": "tadamski", "createdAt": "2020-09-10T13:01:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjMyOTAwNQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r486329005", "bodyText": "Ok, lets go with what we have here - if you are happy HTTP is just using the same pattern as the existing approaches we should be good.", "author": "darranl", "createdAt": "2020-09-10T13:19:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjM0MTUyNQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r486341525", "bodyText": "Hmm, but just to clarify cause I'm not sure if I understand correctly. Discovery provider and HttpEjbReceiver (which is used to perform invocation to discovered destination) (also other receivers) resolve their AuthenticationContexts independently:\nhttps://github.com/wildfly/wildfly-http-client/blob/master/ejb/src/main/java/org/wildfly/httpclient/ejb/HttpEJBReceiver.java#L132\nShould this be modified?", "author": "tadamski", "createdAt": "2020-09-10T13:36:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk1MjQ0Ng=="}], "type": "inlineReview"}, {"oid": "358667856096be93cc3c67b077e682b41c49acf6", "url": "https://github.com/wildfly/wildfly/commit/358667856096be93cc3c67b077e682b41c49acf6", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-09-08T12:24:11Z", "type": "forcePushed"}, {"oid": "d9af4180ef652b3389b4c5660c7a7b90b4b7af92", "url": "https://github.com/wildfly/wildfly/commit/d9af4180ef652b3389b4c5660c7a7b90b4b7af92", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-09-08T13:00:44Z", "type": "forcePushed"}, {"oid": "a758a3157eb7b86eafd8e5d73dd37b17e03a3a75", "url": "https://github.com/wildfly/wildfly/commit/a758a3157eb7b86eafd8e5d73dd37b17e03a3a75", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-09-09T09:10:03Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE3NjQzMA==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r486176430", "bodyText": "Missing header", "author": "darranl", "createdAt": "2020-09-10T08:55:20Z", "path": "testsuite/integration/multinode/src/test/java/org/jboss/as/test/multinode/ejb/http/EjbOverHttpWrongCredentialsTestCase.java", "diffHunk": "@@ -0,0 +1,85 @@\n+package org.jboss.as.test.multinode.ejb.http;", "originalCommit": "a758a3157eb7b86eafd8e5d73dd37b17e03a3a75", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjIzMTM2NQ==", "url": "https://github.com/wildfly/wildfly/pull/12887#discussion_r486231365", "bodyText": "fixed", "author": "tadamski", "createdAt": "2020-09-10T10:26:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjE3NjQzMA=="}], "type": "inlineReview"}, {"oid": "9012c2aa25b5412faf5966a5d869f667af23cd94", "url": "https://github.com/wildfly/wildfly/commit/9012c2aa25b5412faf5966a5d869f667af23cd94", "message": "[WFLY-13492] Upgrade Wildfly HTTP Client to 1.1.2.Final", "committedDate": "2020-09-10T10:00:07Z", "type": "commit"}, {"oid": "425c73d9ac3a3691bd0af2ced829eb714a097b93", "url": "https://github.com/wildfly/wildfly/commit/425c73d9ac3a3691bd0af2ced829eb714a097b93", "message": "[WFLY-12190] EJB over HTTP discovery: configuration", "committedDate": "2020-09-10T10:00:07Z", "type": "commit"}, {"oid": "986eb9c22cb0c10658bfdd9c35a00f781c068e65", "url": "https://github.com/wildfly/wildfly/commit/986eb9c22cb0c10658bfdd9c35a00f781c068e65", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpTestCase, EjbOverHttpDescriptorTestCase", "committedDate": "2020-09-10T10:00:07Z", "type": "commit"}, {"oid": "7e91f236884ea8ef0cee2070d3646f3af9becae5", "url": "https://github.com/wildfly/wildfly/commit/7e91f236884ea8ef0cee2070d3646f3af9becae5", "message": "[WFLY-12190] EJB over HTTP discovery: community docs", "committedDate": "2020-09-10T10:00:07Z", "type": "commit"}, {"oid": "8ea2b20b29f1d7794724796b3f0ba00c781295db", "url": "https://github.com/wildfly/wildfly/commit/8ea2b20b29f1d7794724796b3f0ba00c781295db", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-09-10T10:00:07Z", "type": "commit"}, {"oid": "8ea2b20b29f1d7794724796b3f0ba00c781295db", "url": "https://github.com/wildfly/wildfly/commit/8ea2b20b29f1d7794724796b3f0ba00c781295db", "message": "[WFLY-12190] EJB over HTTP discovery: EjbOverHttpWrongCredentialsTestCase", "committedDate": "2020-09-10T10:00:07Z", "type": "forcePushed"}]}