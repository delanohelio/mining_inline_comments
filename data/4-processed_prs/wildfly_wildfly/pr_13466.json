{"pr_number": 13466, "pr_title": "WFLY-13752 exclude element under includes and include element under excludes", "pr_createdAt": "2020-08-07T06:23:06Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13466", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467102382", "bodyText": "Another possibility is, <exclude> might be a typo; it should be <include>. If that's the case, the fix is simply replacing ex with in.\nThe test org/jboss/as/test/integration/microprofile/opentracing/**/*TestCase is already included here. So this change will simply add a duplicate.", "author": "chengfang", "createdAt": "2020-08-07T15:12:07Z", "path": "testsuite/integration/basic/pom.xml", "diffHunk": "@@ -654,7 +654,7 @@\n                                         <include>org/jboss/as/test/integration/ee/injection/support/jpa/*TestCase*.java</include>\n                                         <include>org/jboss/as/test/integration/ee/injection/resource/substitution/*TestCase*.java</include>\n                                         <include>org/jboss/as/test/integration/ejb/iiop/**/*TestCase*.java</include>\n-                                        <exclude>org/jboss/as/test/integration/ejb/**/jts/**/*TestCase*.java</exclude>\n+                                        <include>org/jboss/as/test/integration/microprofile/opentracing/**/*TestCase*.java</include>\n                                         <include>org/jboss/as/test/integration/*/security/**/*TestCase.java</include>", "originalCommit": "95b5eaa183207da5de858ca2f5b9225e7b4f4fb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIwOTg2MA==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467209860", "bodyText": "There are no tests in that ejb/**/jts package so both occurrences of the exclude can be removed.\n$ git grep org.jboss.as.test.integration.ejb | grep jts\ntestsuite/integration/basic/pom.xml:                                        <exclude>org/jboss/as/test/integration/ejb/**/jts/**/*TestCase*.java</exclude>\ntestsuite/integration/basic/pom.xml:                                        <exclude>org/jboss/as/test/integration/ejb/**/jts/**/*TestCase*.java</exclude>\n\nIf you annotate the file with git and look at the commit that added those two lines, the commit didn't add any tests in those packages either. So it looks like they were always cruft.", "author": "bstansberry", "createdAt": "2020-08-07T18:44:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxMDg2Nw==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467210867", "bodyText": "That git grep ^^^ was a search of the entire source tree in master.", "author": "bstansberry", "createdAt": "2020-08-07T18:46:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxMjg1MA==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467212850", "bodyText": "There's also no package org.jboss.as.test.integration.microprofile in testsuite/integration/basic so those includes/excludes are not correct. The relevant tests are in org.wildfly.test.integration.microprofile.opentracing (wildfly, not jboss.as).", "author": "bstansberry", "createdAt": "2020-08-07T18:51:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzIxNzE1Nw==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467217157", "bodyText": "The basic idea here is if a test can pass running against plain standalone.xml, then it should not appear in either of the two sections this PR touches.  If it can only pass run against standalone-full.xml then it gets an \"exclude\" in basic-integration-default-web.surefire and an \"include\" in basic-integration-default-full.surefire.", "author": "bstansberry", "createdAt": "2020-08-07T19:00:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzgwOTk0OA==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467809948", "bodyText": "Then should we remove those exclude/include?", "author": "parsharma", "createdAt": "2020-08-10T10:17:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkyOTY5MQ==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r469929691", "bodyText": "@parsharma Yes, they can be removed. The ejb/**/jts elements can just be removed as they don't have any relationship to any tests at all.\nThe org.jboss.as.test.integration.microprofile ones were meant to relate to tests, but they don't because the package was wrong. But that means the real tests are getting executed successfully in the basic-integration-default-web.surefire. And that means they don't need to be executed in the basic-integration-default-full.surefire execution, which is for tests that can't pass in basic-integration-default-web.surefire because the tests need things  in the standalone-full.xml config.  These tests don't, since they pass, so no special elements for them are needed.", "author": "bstansberry", "createdAt": "2020-08-13T12:55:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMjM4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzEwMzczNw==", "url": "https://github.com/wildfly/wildfly/pull/13466#discussion_r467103737", "bodyText": "Another possibility is, <include> might be a typo; it should be <exclude>. If that's the case, the fix is simply replacing in with ex.\nThe test org/jboss/as/test/integration/ejb/**/jts/**/*TestCase*.java is already excluded here. So this change will simply add a duplicate.", "author": "chengfang", "createdAt": "2020-08-07T15:14:33Z", "path": "testsuite/integration/basic/pom.xml", "diffHunk": "@@ -731,7 +731,7 @@\n                                         <exclude>org/jboss/as/test/integration/jca/bootstrap/**/*TestCase*.java</exclude>\n                                         <exclude>org/jboss/as/test/integration/jmx/full/**/*TestCase*.java</exclude>\n                                         <exclude>org/jboss/as/test/integration/messaging/**/*TestCase*.java</exclude>\n-                                        <include>org/jboss/as/test/integration/microprofile/opentracing/**/*TestCase*.java</include>\n+                                        <exclude>org/jboss/as/test/integration/ejb/**/jts/**/*TestCase*.java</exclude>\n                                         <exclude>org/jboss/as/test/integration/management/cli/**/*TestCase.java</exclude>", "originalCommit": "95b5eaa183207da5de858ca2f5b9225e7b4f4fb8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5ecacf8ffb313c09bec1d8fc41f482acb94e04e6", "url": "https://github.com/wildfly/wildfly/commit/5ecacf8ffb313c09bec1d8fc41f482acb94e04e6", "message": "WFLY-13752 exclude Element under includes and include element under excludes", "committedDate": "2020-08-17T04:29:04Z", "type": "forcePushed"}, {"oid": "cc6e7d7edeb799f82c6208da684e3afd5cd09dc7", "url": "https://github.com/wildfly/wildfly/commit/cc6e7d7edeb799f82c6208da684e3afd5cd09dc7", "message": "WFLY-13752 exclude Element under includes and include element under excludes", "committedDate": "2020-08-21T06:12:48Z", "type": "commit"}, {"oid": "cc6e7d7edeb799f82c6208da684e3afd5cd09dc7", "url": "https://github.com/wildfly/wildfly/commit/cc6e7d7edeb799f82c6208da684e3afd5cd09dc7", "message": "WFLY-13752 exclude Element under includes and include element under excludes", "committedDate": "2020-08-21T06:12:48Z", "type": "forcePushed"}]}