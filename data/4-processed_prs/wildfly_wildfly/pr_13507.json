{"pr_number": 13507, "pr_title": "WFLY-13799 Fix JPA 2LC compatibility with configurations missing a pending-puts cache configuration", "pr_createdAt": "2020-08-27T13:40:07Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13507", "timeline": [{"oid": "091ed0b881d493eaa64c8335b233db99ab2b619c", "url": "https://github.com/wildfly/wildfly/commit/091ed0b881d493eaa64c8335b233db99ab2b619c", "message": "WFLY-13799 Fix JPA 2LC compatibility with configurations missing a pending-puts cache configuration", "committedDate": "2020-08-27T13:38:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQzMzg1NA==", "url": "https://github.com/wildfly/wildfly/pull/13507#discussion_r478433854", "bodyText": "\ud83d\udc4d", "author": "scottmarlow", "createdAt": "2020-08-27T13:49:55Z", "path": "jpa/subsystem/src/main/java/org/jboss/as/jpa/processor/secondlevelcache/InfinispanCacheDeploymentListener.java", "diffHunk": "@@ -121,7 +122,10 @@ public void addCacheDependencies(Classification classification, Properties prope\n         CapabilityServiceSupport support = CacheDeploymentListener.getInternalDeploymentCapablityServiceSupport();\n         String container = properties.getProperty(CONTAINER);\n         for (String cache : properties.getProperty(CACHES).split(\"\\\\s+\")) {\n-            builder.requires(InfinispanCacheRequirement.CONFIGURATION.getServiceName(support, container, cache));\n+            // Workaround for legacy default configuration, where the pending-puts cache configuration is missing\n+            if (cache.equals(PENDING_PUTS) ? support.hasCapability(InfinispanCacheRequirement.CACHE.resolve(container, cache)) : true) {", "originalCommit": "091ed0b881d493eaa64c8335b233db99ab2b619c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}