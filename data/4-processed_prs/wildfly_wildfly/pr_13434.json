{"pr_number": 13434, "pr_title": "[WFLY-13128] Add a Galleon layer for batch-jberet", "pr_createdAt": "2020-07-28T17:29:44Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13434", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5OTg5OA==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r463199898", "bodyText": "system property jboss.inst is also used by some of these tests, we may need to pass it too. But looks like these tests passed without it, probably because we ran them without security manager?", "author": "chengfang", "createdAt": "2020-07-30T18:45:58Z", "path": "testsuite/integration/basic/pom.xml", "diffHunk": "@@ -1326,6 +1365,37 @@\n                                 </configuration>\n                             </execution>\n \n+                            <!-- Tests against the install with batch-jberet -->\n+                            <execution>\n+                                <id>batch-jberet-layers.surefire</id>\n+                                <phase>test</phase>\n+                                <goals>\n+                                    <goal>test</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <systemPropertyVariables>\n+                                        <jboss.install.dir>${basedir}/target/wildfly-batch</jboss.install.dir>\n+                                        <jboss.home>${project.build.directory}/wildfly-batch</jboss.home>\n+                                        <jboss.home.dir>${project.build.directory}/wildfly-batch</jboss.home.dir>\n+                                        <jbossas.dist>${project.build.directory}/wildfly-batch</jbossas.dist>\n+                                        <jboss.dist>${project.build.directory}/wildfly-batch</jboss.dist>\n+                                        <!-- Override the standard module path that points at the shared module set from dist -->\n+                                        <module.path>${project.build.directory}/wildfly-batch/modules${path.separator}${basedir}/target/modules</module.path>\n+                                    </systemPropertyVariables>\n+                                    <environmentVariables>", "originalCommit": "9877308ee1ebc289cdc666c94512183cac77734d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU1NTczMw==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r463555733", "bodyText": "Thanks for reviewing Cheng. Yes, they it fails with the security manager.\n@bstansberry what is the position against whether we should run the layers tests under security manager? currently we do not have a CI with this configuration", "author": "yersan", "createdAt": "2020-07-31T11:26:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5OTg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU5NTkwOQ==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r463595909", "bodyText": "That would require an entire separate CI job. I don't think it's worth it to add a per-PR job for that. Maybe a nightly job, but I'd be concerned it makes the set of controls of what's enabled overly complex. (Probably they already are!)  Something to look at in the future though.", "author": "bstansberry", "createdAt": "2020-07-31T12:59:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5OTg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzYwOTQyNA==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r463609424", "bodyText": "Ok, I leave the sec manager concerns for now.\n\nI'd be concerned it makes the set of controls of what's enabled overly complex. (Probably they already are!)\n\nYes, I think they are already.", "author": "yersan", "createdAt": "2020-07-31T13:26:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5OTg5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAyMjgxOA==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r488022818", "bodyText": "Hello @chengfang Would you mind approving the changes on this PR?", "author": "yersan", "createdAt": "2020-09-14T15:27:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzE5OTg5OA=="}], "type": "inlineReview"}, {"oid": "b53f8137c309abe2df702d67de7e1ffeabbb8291", "url": "https://github.com/wildfly/wildfly/commit/b53f8137c309abe2df702d67de7e1ffeabbb8291", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-08-06T16:37:40Z", "type": "forcePushed"}, {"oid": "c2b34d6d116b94c11b05169c5ae13e6b2386c17b", "url": "https://github.com/wildfly/wildfly/commit/c2b34d6d116b94c11b05169c5ae13e6b2386c17b", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-08-13T17:36:30Z", "type": "forcePushed"}, {"oid": "2c9c7c7362fe5485dd01bd1a375a2ceaad64d100", "url": "https://github.com/wildfly/wildfly/commit/2c9c7c7362fe5485dd01bd1a375a2ceaad64d100", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-10T10:40:17Z", "type": "forcePushed"}, {"oid": "b3886a4696d0bbdfcab61feebe29f8b977a31130", "url": "https://github.com/wildfly/wildfly/commit/b3886a4696d0bbdfcab61feebe29f8b977a31130", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-10T14:22:08Z", "type": "forcePushed"}, {"oid": "8a840e16e5353d53ea15634dcfc68c31471155d6", "url": "https://github.com/wildfly/wildfly/commit/8a840e16e5353d53ea15634dcfc68c31471155d6", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-10T14:28:59Z", "type": "forcePushed"}, {"oid": "0758612e89e24d60ac3a502d840465636ee402ba", "url": "https://github.com/wildfly/wildfly/commit/0758612e89e24d60ac3a502d840465636ee402ba", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-10T17:39:20Z", "type": "forcePushed"}, {"oid": "14a6b0be7c78d98103c5cfeb84486fa5cb6ad66c", "url": "https://github.com/wildfly/wildfly/commit/14a6b0be7c78d98103c5cfeb84486fa5cb6ad66c", "message": "[WFLY-13841] Fix regular expression used to get ZipEntries on JdrReportManagmentTestCase", "committedDate": "2020-09-11T08:14:09Z", "type": "commit"}, {"oid": "d6dc5d3ba2a6114f9fc0f79d439032bf1a5779a1", "url": "https://github.com/wildfly/wildfly/commit/d6dc5d3ba2a6114f9fc0f79d439032bf1a5779a1", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-11T08:30:53Z", "type": "commit"}, {"oid": "d6dc5d3ba2a6114f9fc0f79d439032bf1a5779a1", "url": "https://github.com/wildfly/wildfly/commit/d6dc5d3ba2a6114f9fc0f79d439032bf1a5779a1", "message": "[WFLY-13128] Add a Galleon layer for batch-jberet", "committedDate": "2020-09-11T08:30:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODAyNjI0NQ==", "url": "https://github.com/wildfly/wildfly/pull/13434#discussion_r488026245", "bodyText": "@chengfang Just for your info, we will remove the \"Tech preview\" from this community documentation on this PR: #13235\nIt should not be here in the documentation.", "author": "yersan", "createdAt": "2020-09-14T15:30:44Z", "path": "docs/src/main/asciidoc/_admin-guide/Galleon_provisioning.adoc", "diffHunk": "@@ -124,6 +124,7 @@ Basic layers:\n \n Basic layers:\n \n+* _batch-jberet_: Tech preview support for Jakarta Batch.", "originalCommit": "d6dc5d3ba2a6114f9fc0f79d439032bf1a5779a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}