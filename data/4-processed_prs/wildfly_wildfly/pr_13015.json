{"pr_number": 13015, "pr_title": "WFLY-13099 Standard configuration files for MicroProfile use cases", "pr_createdAt": "2020-02-19T01:32:45Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13015", "timeline": [{"oid": "b1042877cae5ef3f88ecfabb1b453ce645428a30", "url": "https://github.com/wildfly/wildfly/commit/b1042877cae5ef3f88ecfabb1b453ce645428a30", "message": "[WFLY-13099] By default run testsuite/integration/microprofile against standalone-microprofile.xml", "committedDate": "2020-02-19T13:28:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NjgzNg==", "url": "https://github.com/wildfly/wildfly/pull/13015#discussion_r381586836", "bodyText": "Rebase oops? :-)", "author": "rhusar", "createdAt": "2020-02-19T22:36:13Z", "path": "testsuite/layers/pom.xml", "diffHunk": "@@ -1622,6 +1622,94 @@\n                         </configuration>\n                     </execution>\n                     <execution>\n+                        <id>microprofile-standalone-provisioning</id>\n+                        <goals>\n+                            <goal>provision</goal>\n+                        </goals>\n+                        <phase>compile</phase>\n+                        <configuration>\n+                            <install-dir>${layers.install.dir}/microprofile-standalone</install-dir>\n+                            <record-state>false</record-state>\n+                            <log-time>${galleon.log.time}</log-time>\n+                            <offline>true</offline>\n+                            <plugin-options>\n+                                <jboss-maven-dist/>\n+                                <jboss-fork-embedded>${galleon.fork.embedded}</jboss-fork-embedded>\n+                                <optional-packages>passive+</optional-packages>\n+                            </plugin-options>\n+                            <feature-packs>\n+                                <feature-pack>\n+                                    <groupId>${project.groupId}</groupId>\n+                                    <artifactId>wildfly-galleon-pack</artifactId>\n+                                    <version>${project.version}</version>\n+                                    <inherit-configs>false</inherit-configs>\n+                                    <inherit-packages>false</inherit-packages>\n+                                </feature-pack>\n+                            </feature-packs>\n+                            <configurations>\n+                                <config>\n+                                    <model>standalone</model>\n+                                    <name>standalone.xml</name>\n+                                    <layers>\n+                                        <layer>cloud-server</layer>\n+                                        <layer>h2-default-datasource</layer>\n+                                        <layer>microprofile-fault-tolerance</layer>\n+                                        <layer>microprofile-jwt</layer>\n+                                        <layer>microprofile-openapi</layer>\n+                                        <layer>undertow-legacy-https</layer>\n+                                    </layers>\n+                                </config>\n+                            </configurations>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+                        <id>microprofile-standalone-ha-provisioning</id>\n+                        <goals>\n+                            <goal>provision</goal>\n+                        </goals>\n+                        <phase>compile</phase>\n+                        <configuration>\n+                            <install-dir>${layers.install.dir}/microprofile-standalone-ha</install-dir>\n+                            <record-state>false</record-state>\n+                            <log-time>${galleon.log.time}</log-time>\n+                            <offline>true</offline>\n+                            <plugin-options>\n+                                <jboss-maven-dist/>\n+                                <jboss-fork-embedded>${galleon.fork.embedded}</jboss-fork-embedded>\n+                                <optional-packages>passive+</optional-packages>\n+                            </plugin-options>\n+                            <feature-packs>\n+                                <feature-pack>\n+                                    <groupId>${project.groupId}</groupId>\n+                                    <artifactId>wildfly-galleon-pack</artifactId>\n+                                    <version>${project.version}</version>\n+                                    <inherit-configs>false</inherit-configs>\n+                                    <inherit-packages>false</inherit-packages>\n+                                </feature-pack>\n+                            </feature-packs>\n+                            <configurations>\n+                                <config>\n+                                    <model>standalone</model>\n+                                    <name>standalone.xml</name>\n+                                    <layers>\n+                                        <layer>cloud-server</layer>\n+                                        <layer>h2-default-datasource</layer>\n+                                        <layer>microprofile-fault-tolerance</layer>\n+                                        <layer>microprofile-jwt</layer>\n+                                        <layer>microprofile-openapi</layer>\n+                                        <layer>undertow-legacy-https</layer>\n+                                        <layer>jpa-distributed</layer>\n+                                        <layer>web-clustering</layer>\n+                                    </layers>\n+                                    <excluded-layers>\n+                                        <layer>jpa</layer>\n+                                    </excluded-layers>\n+                                </config>\n+                            </configurations>\n+                        </configuration>\n+                    </execution>\n+                    <execution>\n+>>>>>>> e9c00016f7... [WFLY-13099] Add layers tests for the combos used in standalone-microprofile.xml and standalone-microprofile-ha.xml", "originalCommit": "b1042877cae5ef3f88ecfabb1b453ce645428a30", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTcxOTQ3OQ==", "url": "https://github.com/wildfly/wildfly/pull/13015#discussion_r381719479", "bodyText": "Seems so!", "author": "bstansberry", "createdAt": "2020-02-20T03:45:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NjgzNg=="}], "type": "inlineReview"}, {"oid": "6f0f619b05db3aa149e96a946f7466c5afa21294", "url": "https://github.com/wildfly/wildfly/commit/6f0f619b05db3aa149e96a946f7466c5afa21294", "message": "[WFLY-13099] By default run testsuite/integration/microprofile against standalone-microprofile.xml", "committedDate": "2020-02-20T04:41:10Z", "type": "forcePushed"}, {"oid": "e7a8c8d2c2672705d5537d0414e0ead8d16fe73e", "url": "https://github.com/wildfly/wildfly/commit/e7a8c8d2c2672705d5537d0414e0ead8d16fe73e", "message": "[WFLY-13099] By default run testsuite/integration/microprofile against standalone-microprofile.xml", "committedDate": "2020-02-20T18:40:07Z", "type": "forcePushed"}, {"oid": "d8d563bbc7834dce15604fb9c9d3eac126d0ec50", "url": "https://github.com/wildfly/wildfly/commit/d8d563bbc7834dce15604fb9c9d3eac126d0ec50", "message": "[WFLY-13099] Add to smoke testsuite a surefire execution of a subset of tests against standalone-microprofile.xml", "committedDate": "2020-02-21T19:01:50Z", "type": "forcePushed"}, {"oid": "64dea307294eb2f5a4dfc558a035351889d9897b", "url": "https://github.com/wildfly/wildfly/commit/64dea307294eb2f5a4dfc558a035351889d9897b", "message": "Temp commit to turn on the surefire executions against standalone-micriprofile.xml by default to get initial CI", "committedDate": "2020-02-21T21:32:31Z", "type": "forcePushed"}, {"oid": "bd4a366b8e19dbc820a015c7dbb77516f0559783", "url": "https://github.com/wildfly/wildfly/commit/bd4a366b8e19dbc820a015c7dbb77516f0559783", "message": "Temp commit to turn on the surefire executions against standalone-micriprofile.xml by default to get initial CI", "committedDate": "2020-02-22T02:04:12Z", "type": "forcePushed"}, {"oid": "363160a6a55d0c776db5c301e8e66be907c6f79e", "url": "https://github.com/wildfly/wildfly/commit/363160a6a55d0c776db5c301e8e66be907c6f79e", "message": "Until WFLY-13127 is fixed, don't run jwt and opentracing TCKs against standard standalone-microprofile.xml", "committedDate": "2020-02-22T04:12:25Z", "type": "forcePushed"}, {"oid": "3ffb74d6773f03c20a8ebc64364fef3cbe132d69", "url": "https://github.com/wildfly/wildfly/commit/3ffb74d6773f03c20a8ebc64364fef3cbe132d69", "message": "Until WFLY-13127 is fixed, don't run jwt and opentracing TCKs against standard standalone-microprofile.xml", "committedDate": "2020-02-23T10:45:19Z", "type": "forcePushed"}, {"oid": "fe4b359ae091ef994b9b3cecc4eeeb012d5f3e08", "url": "https://github.com/wildfly/wildfly/commit/fe4b359ae091ef994b9b3cecc4eeeb012d5f3e08", "message": "[WFLY-13099] Correct testsuite/integration/microprofile-tck/openapi handling of ts.standalone.microprofile", "committedDate": "2020-03-01T20:16:11Z", "type": "forcePushed"}, {"oid": "37fd944e04699db5a3c33118eb2b4425122f96be", "url": "https://github.com/wildfly/wildfly/commit/37fd944e04699db5a3c33118eb2b4425122f96be", "message": "[WFLY-13099] Use full.maven.groupId/version for Galleon configurations added after WFLY-13137", "committedDate": "2020-03-01T23:29:46Z", "type": "forcePushed"}, {"oid": "8aaa69afc8a94901d3b484391f53a7b279cd2f63", "url": "https://github.com/wildfly/wildfly/commit/8aaa69afc8a94901d3b484391f53a7b279cd2f63", "message": "[WFLY-13099] For testsuite/integration/smoke when -Dts.standalone.microprofile is used disable galleon provisioning of the server to test and instead use the more typical approach of copying needed content from jboss.dist\n\nAlso, prune some cruft from testsuite/integration/web/pom.xml", "committedDate": "2020-03-02T23:01:33Z", "type": "forcePushed"}, {"oid": "ca974469fc86adf125a1f27b4ca8c4efb286d96d", "url": "https://github.com/wildfly/wildfly/commit/ca974469fc86adf125a1f27b4ca8c4efb286d96d", "message": "[WFLY-13099] For testsuite/integration/smoke when -Dts.standalone.microprofile is used disable galleon provisioning of the server to test and instead use the more typical approach of copying needed content from jboss.dist\n\nAlso, prune some cruft from testsuite/integration/web/pom.xml", "committedDate": "2020-03-04T18:38:35Z", "type": "forcePushed"}, {"oid": "186dfdef741caecd67ba5e5f50ebaf6b1fc9256b", "url": "https://github.com/wildfly/wildfly/commit/186dfdef741caecd67ba5e5f50ebaf6b1fc9256b", "message": "[WFLY-13099] Move jpa-distributed layer from test-feature-pack", "committedDate": "2020-03-04T20:44:39Z", "type": "commit"}, {"oid": "716178a47709c9933a82aa0d44d92ae359f07688", "url": "https://github.com/wildfly/wildfly/commit/716178a47709c9933a82aa0d44d92ae359f07688", "message": "[WFLY-13099] Add standard standalone-microprofile.xml and standalone-microprofile-ha.xml configs", "committedDate": "2020-03-04T20:44:39Z", "type": "commit"}, {"oid": "a96898adb7d2536d308d34b8c32723e361a34f99", "url": "https://github.com/wildfly/wildfly/commit/a96898adb7d2536d308d34b8c32723e361a34f99", "message": "[WFLY-13099] Run the MP TCKs against standalone-microprofile.xml", "committedDate": "2020-03-04T20:44:39Z", "type": "commit"}, {"oid": "f835cc8dedfdbf1d25da95590d4cadb6249f017b", "url": "https://github.com/wildfly/wildfly/commit/f835cc8dedfdbf1d25da95590d4cadb6249f017b", "message": "[WFLY-13099] By default run testsuite/integration/microprofile against standalone-microprofile.xml", "committedDate": "2020-03-04T20:45:07Z", "type": "commit"}, {"oid": "1226bd825d0271fa72e7280257c85dc601a50fcd", "url": "https://github.com/wildfly/wildfly/commit/1226bd825d0271fa72e7280257c85dc601a50fcd", "message": "[WFLY-13099] Add to basic testsuite a surefire execution of a subset of tests against standalone-microprofile.xml\n\nAdd a profile such that this is only enabled via -Dts.standalone.microprofile\n\nShare the set of included/excluded tests with one of the -Dts.layers executions that produces a similar config", "committedDate": "2020-03-04T20:45:16Z", "type": "commit"}, {"oid": "800f8761badda92897b9d2b80b72af15e50a3e85", "url": "https://github.com/wildfly/wildfly/commit/800f8761badda92897b9d2b80b72af15e50a3e85", "message": "[WFLY-13099] Add to smoke and web testsuites a surefire execution of a subset of tests against standalone-microprofile.xml", "committedDate": "2020-03-04T20:45:17Z", "type": "commit"}, {"oid": "e634e75ae75d6a780ffefaf1841fcbf519d9d8e5", "url": "https://github.com/wildfly/wildfly/commit/e634e75ae75d6a780ffefaf1841fcbf519d9d8e5", "message": "[WFLY-13099] Add to clustering testsuite a surefire execution of a subset of tests against standalone-microprofile-ha.xml", "committedDate": "2020-03-04T20:45:17Z", "type": "commit"}, {"oid": "3edc60c8ba143bb2af9d3277d6ef31481cad0b27", "url": "https://github.com/wildfly/wildfly/commit/3edc60c8ba143bb2af9d3277d6ef31481cad0b27", "message": "[WFLY-13099] Correct testsuite/integration web handling of ts.standalone.microprofile", "committedDate": "2020-03-04T20:45:18Z", "type": "commit"}, {"oid": "2d661a054c06960ee145f1c7be63c5f789633179", "url": "https://github.com/wildfly/wildfly/commit/2d661a054c06960ee145f1c7be63c5f789633179", "message": "[WFLY-13099] Correct testsuite/integration/smoke handling of ts.standalone.microprofile", "committedDate": "2020-03-04T20:45:18Z", "type": "commit"}, {"oid": "c118a52f8903c81cf569ebf8c4fe4f3c842ab610", "url": "https://github.com/wildfly/wildfly/commit/c118a52f8903c81cf569ebf8c4fe4f3c842ab610", "message": "[WFLY-13099] Correct testsuite/integration/microprofile-tck/openapi handling of ts.standalone.microprofile", "committedDate": "2020-03-04T20:45:18Z", "type": "commit"}, {"oid": "af98924f84b53c40087497c48df1dc6e94341f59", "url": "https://github.com/wildfly/wildfly/commit/af98924f84b53c40087497c48df1dc6e94341f59", "message": "[WFLY-13099] Use full.maven.groupId/version for Galleon configurations added after WFLY-13137", "committedDate": "2020-03-04T20:45:19Z", "type": "commit"}, {"oid": "eb63d36b8af49b1310ca26829e369cd2641fd860", "url": "https://github.com/wildfly/wildfly/commit/eb63d36b8af49b1310ca26829e369cd2641fd860", "message": "[WFLY-13099] For testsuite/integration/smoke when -Dts.standalone.microprofile is used disable galleon provisioning of the server to test and instead use the more typical approach of copying needed content from jboss.dist\n\nAlso, prune some cruft from testsuite/integration/web/pom.xml", "committedDate": "2020-03-04T20:45:19Z", "type": "commit"}, {"oid": "eb63d36b8af49b1310ca26829e369cd2641fd860", "url": "https://github.com/wildfly/wildfly/commit/eb63d36b8af49b1310ca26829e369cd2641fd860", "message": "[WFLY-13099] For testsuite/integration/smoke when -Dts.standalone.microprofile is used disable galleon provisioning of the server to test and instead use the more typical approach of copying needed content from jboss.dist\n\nAlso, prune some cruft from testsuite/integration/web/pom.xml", "committedDate": "2020-03-04T20:45:19Z", "type": "forcePushed"}]}