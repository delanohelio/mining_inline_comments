{"pr_number": 13330, "pr_title": "[WFLY-13350] Add a Galleon layer for JSF support", "pr_createdAt": "2020-05-27T13:43:37Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13330", "timeline": [{"oid": "d57e6da57e0e570fa0cf526badf462a9c9642e16", "url": "https://github.com/wildfly/wildfly/commit/d57e6da57e0e570fa0cf526badf462a9c9642e16", "message": "[WFLY-13350] Add a Galleon layer for JSF support\n\n[WFLY-13350] Add JSF layer documentation", "committedDate": "2020-06-02T14:49:44Z", "type": "forcePushed"}, {"oid": "e29b666f1b811fe0224df85904bf2d5c54b9635c", "url": "https://github.com/wildfly/wildfly/commit/e29b666f1b811fe0224df85904bf2d5c54b9635c", "message": "[WFLY-13350] Add optional logging layer", "committedDate": "2020-07-02T10:04:24Z", "type": "forcePushed"}, {"oid": "42c418f6f23bc2a0f1abb77425556fbffe1c63b9", "url": "https://github.com/wildfly/wildfly/commit/42c418f6f23bc2a0f1abb77425556fbffe1c63b9", "message": "[WFLY-13350] Add a Galleon layer for JSF support\n\n[WFLY-13350] Add JSF layer documentation\n\n[WFLY-13350] Add optional logging layer\n\n[WFLY-13350] Add core-server layer dependency", "committedDate": "2020-07-07T10:00:05Z", "type": "forcePushed"}, {"oid": "a12c5e7be7867af83bd65563ecaa924a21f00c8b", "url": "https://github.com/wildfly/wildfly/commit/a12c5e7be7867af83bd65563ecaa924a21f00c8b", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-13T10:19:01Z", "type": "forcePushed"}, {"oid": "6d3768d39003e33ca8888304b1f879867cebef6a", "url": "https://github.com/wildfly/wildfly/commit/6d3768d39003e33ca8888304b1f879867cebef6a", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-21T13:56:04Z", "type": "forcePushed"}, {"oid": "f260450e2f9c11639a298003a1fbf21d2236d9ba", "url": "https://github.com/wildfly/wildfly/commit/f260450e2f9c11639a298003a1fbf21d2236d9ba", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-24T09:13:32Z", "type": "forcePushed"}, {"oid": "f0a0e99438985d4643fe86ff78107251af553405", "url": "https://github.com/wildfly/wildfly/commit/f0a0e99438985d4643fe86ff78107251af553405", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-24T11:49:48Z", "type": "forcePushed"}, {"oid": "d1d251de1194811e96b9f2f82da2447544d6980f", "url": "https://github.com/wildfly/wildfly/commit/d1d251de1194811e96b9f2f82da2447544d6980f", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-24T11:51:16Z", "type": "forcePushed"}, {"oid": "ebdce48a56e98974881e1ff2c8ea89c342cae16e", "url": "https://github.com/wildfly/wildfly/commit/ebdce48a56e98974881e1ff2c8ea89c342cae16e", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-07-29T10:02:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxOTQyNQ==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465719425", "bodyText": "@yersan I had to add the following in order to execute the test InjectionBeanToPhaseListenerTest mentioned in the TP:\n<include>org/jboss/as/test/integration/jsf/phaselistener/injectiontarget/bean/InjectionBeanToPhaseListenerTest.java</include>\nis it actually missing or the executuion is linked somewhere else?", "author": "tommaso-borgato", "createdAt": "2020-08-05T13:18:11Z", "path": "testsuite/integration/basic/pom.xml", "diffHunk": "@@ -1219,6 +1258,38 @@\n                                 <phase>none</phase>\n                             </execution>\n \n+                            <!-- Tests against the install with JSF support -->\n+                            <execution>\n+                                <id>jsf-layers.surefire</id>\n+                                <phase>test</phase>\n+                                <goals>\n+                                    <goal>test</goal>\n+                                </goals>\n+                                <configuration>\n+                                    <systemPropertyVariables>\n+                                        <jboss.install.dir>${basedir}/target/wildfly-jsf</jboss.install.dir>\n+                                        <jboss.home>${project.build.directory}/wildfly-jsf</jboss.home>\n+                                        <jboss.home.dir>${project.build.directory}/wildfly-jsf</jboss.home.dir>\n+                                        <jbossas.dist>${project.build.directory}/wildfly-jsf</jbossas.dist>\n+                                        <jboss.dist>${project.build.directory}/wildfly-jsf</jboss.dist>\n+                                        <!-- Override the standard module path that points at the shared module set from dist -->\n+                                        <module.path>${project.build.directory}/wildfly-jsf/modules${path.separator}${basedir}/target/modules</module.path>\n+                                    </systemPropertyVariables>\n+                                    <environmentVariables>\n+                                        <JBOSS_HOME>${project.build.directory}/wildfly-jsf</JBOSS_HOME>\n+                                    </environmentVariables>\n+                                    <redirectTestOutputToFile>${testLogToFile}</redirectTestOutputToFile>\n+                                    <includes>\n+                                        <include>org/jboss/as/test/integration/jsf/**/*TestCase.java</include>", "originalCommit": "ebdce48a56e98974881e1ff2c8ea89c342cae16e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1ODAyMg==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465758022", "bodyText": "Good catch!, that's an issue with this topic branch.", "author": "yersan", "createdAt": "2020-08-05T14:14:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxOTQyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTgwNTU0Nw==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465805547", "bodyText": "I've just fixed this adding explicitly this extension to include the missing test.", "author": "yersan", "createdAt": "2020-08-05T15:19:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTcxOTQyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc0MjUwNQ==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465742505", "bodyText": "@yersan as recent user of these new galleon layers I found it extremely hard to understand how to provision a trimmed server after I cloned the WildFly repository; If this is not on purpose, I suggest adding a small paragraph like the following (not necessarily here and probably with better wording):\nAfter cloning the WildFly repository locally, you can provision a trimmed server leveraging the galleon cli:\ngalleon.sh install wildfly:current/snapshot --layers=jsf,datasources-web-server --dir=my-wildfly-server", "author": "tommaso-borgato", "createdAt": "2020-08-05T13:52:49Z", "path": "docs/src/main/asciidoc/_admin-guide/Galleon_provisioning.adoc", "diffHunk": "@@ -127,6 +127,7 @@ Basic layers:\n * _cdi_: Support for CDI. Optionally depends on _bean-validation_.\n * _datasources_: Support for datasources.\n * _ee-security_: Support for EE Security. Depends on _cdi_.\n+* _jsf_: Support for Jakarta Server Faces. Depends on _web-server_ (defined in the WildFly servlet feature-pack) and optionally on _cdi_ and _bean-validation_", "originalCommit": "ebdce48a56e98974881e1ff2c8ea89c342cae16e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc1NzA3Nw==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465757077", "bodyText": "Hello @tommaso-borgato I opened this task to take a look at some possible improvements about layers documentation https://issues.redhat.com/browse/WFLY-13744, please add there any comments you think we can add into the documentation, thanks\nIn the test plan, we discussed how to do it, but I got the impression it is a bit confusing. So, let me add here this note, you don't need to clone the WildFly repo to use the Galleon tools. If you want to use this \"in progress\" layer, then you need to get this topic branch, but after it is merged you don't need to clone WildFly in you local repository. You could just use galleon.sh install wildfly:current.", "author": "yersan", "createdAt": "2020-08-05T14:13:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc0MjUwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTg1NDU4MA==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r465854580", "bodyText": "@yersan tnks, I added a comment there ....", "author": "tommaso-borgato", "createdAt": "2020-08-05T16:32:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTc0MjUwNQ=="}], "type": "inlineReview"}, {"oid": "c8d6afcef146ca3bc6c260d668e258f952205341", "url": "https://github.com/wildfly/wildfly/commit/c8d6afcef146ca3bc6c260d668e258f952205341", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-08-05T14:39:30Z", "type": "forcePushed"}, {"oid": "ff9a288701db48c74411afeb4efdd5de830b169b", "url": "https://github.com/wildfly/wildfly/commit/ff9a288701db48c74411afeb4efdd5de830b169b", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-08-05T15:13:00Z", "type": "commit"}, {"oid": "ff9a288701db48c74411afeb4efdd5de830b169b", "url": "https://github.com/wildfly/wildfly/commit/ff9a288701db48c74411afeb4efdd5de830b169b", "message": "[WFLY-13350] Add a Galleon layer for JSF support", "committedDate": "2020-08-05T15:13:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTcwMzA2OA==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r475703068", "bodyText": "@yersan I think it's not strictly related to your MR but I don't understand the reason why on line 2263 the artifactId isn't parametrized like on line 1604:\n<artifactId>wildfly-galleon-pack</artifactId>", "author": "tommaso-borgato", "createdAt": "2020-08-24T15:31:43Z", "path": "testsuite/layers/pom.xml", "diffHunk": "@@ -2261,6 +2298,7 @@\n                                                 <layer>jmx</layer>\n                                                 <layer>jmx-remoting</layer>\n                                                 <layer>jpa-distributed</layer>\n+                                                <layer>jsf</layer>", "originalCommit": "ff9a288701db48c74411afeb4efdd5de830b169b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTQ5MzcxMA==", "url": "https://github.com/wildfly/wildfly/pull/13330#discussion_r481493710", "bodyText": "@tommaso-borgato If layers only available in wildfly-galleon-pack are part of what's provisioned then you can't use wildfly-ee-galleon-pack.", "author": "bstansberry", "createdAt": "2020-09-01T23:49:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTcwMzA2OA=="}], "type": "inlineReview"}]}