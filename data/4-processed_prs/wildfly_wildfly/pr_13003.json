{"pr_number": 13003, "pr_title": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "pr_createdAt": "2020-02-17T17:48:51Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13003", "timeline": [{"oid": "c3270e277702de60c9c8ad950685fdcec2ad1f4a", "url": "https://github.com/wildfly/wildfly/commit/c3270e277702de60c9c8ad950685fdcec2ad1f4a", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-02-17T22:38:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2NjUxMA==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380666510", "bodyText": "propertied -> properties", "author": "tterem", "createdAt": "2020-02-18T13:21:03Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/MicroProfile_Fault_Tolerance_SmallRye.adoc", "diffHunk": "@@ -44,43 +44,29 @@ This MicroProfile specification introduces the following interceptor bindings:\n * `@Bulkhead`\n * `@Asynchronous`\n \n-For usage please refer to MicroProfile Fault Tolerance 2.0 https://download.eclipse.org/microprofile/microprofile-fault-tolerance-2.0/microprofile-fault-tolerance-spec.html[specification].\n+For usage please refer to MicroProfile Fault Tolerance 2.1 https://download.eclipse.org/microprofile/microprofile-fault-tolerance-2.1/microprofile-fault-tolerance-spec.html[specification].\n \n-== Hystrix Configuration\n+== Configuration\n \n-MicroProfile Fault Tolerance extension is implemented by the SmallRye Fault Tolerance project which uses https://github.com/Netflix/Hystrix[Hystrix] as an underlying library.\n+Apart from configuration propertied defined by the specification, the SmallRye implementation provides the following", "originalCommit": "c3270e277702de60c9c8ad950685fdcec2ad1f4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNjA4Nw==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380726087", "bodyText": "Fixed.", "author": "rhusar", "createdAt": "2020-02-18T15:00:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2NjUxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2OTE2MA==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380669160", "bodyText": "Can this be removed completely?", "author": "tterem", "createdAt": "2020-02-18T13:26:08Z", "path": "microprofile/fault-tolerance-smallrye/extension/src/main/java/org/wildfly/extension/microprofile/faulttolerance/MicroProfileFaultToleranceLogger.java", "diffHunk": "@@ -43,8 +42,8 @@\n     @Message(id = 1, value = \"Activating MicroProfile Fault Tolerance subsystem.\")\n     void activatingSubsystem();\n \n-    @LogMessage(level = WARN)\n-    @Message(id = 2, value = \"Hystrix was already configured! Skipping configuration from deployment '%s'.\")\n-    void hystrixAlreadyConfigured(String deploymentName);\n+//    @LogMessage(level = WARN)\n+//    @Message(id = 2, value = \"Hystrix was already configured! Skipping configuration from deployment '%s'.\")\n+//    void hystrixAlreadyConfigured(String deploymentName);", "originalCommit": "c3270e277702de60c9c8ad950685fdcec2ad1f4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY3MzY2Mw==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380673663", "bodyText": "It can be removed, but best practice is to keep those in commented out so that messages do not get accidentally reused.", "author": "rhusar", "createdAt": "2020-02-18T13:34:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2OTE2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcxNDI5Mg==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380714292", "bodyText": "Even if this message has never been part of a WildFly.Final version? It's just in WF19.Beta1, right?", "author": "maeste", "createdAt": "2020-02-18T14:42:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2OTE2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDcyNTk0MA==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r380725940", "bodyText": "That's a good point \u2013 we don't have to be overly rigid here \u2013 since it was never in any Final version and this willl be backported. Removed now.", "author": "rhusar", "createdAt": "2020-02-18T15:00:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2OTE2MA=="}], "type": "inlineReview"}, {"oid": "d3ceef6af8ac33a0c4910b3fe9811d47dda6e01c", "url": "https://github.com/wildfly/wildfly/commit/d3ceef6af8ac33a0c4910b3fe9811d47dda6e01c", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-02-18T14:58:56Z", "type": "forcePushed"}, {"oid": "d3ceef6af8ac33a0c4910b3fe9811d47dda6e01c", "url": "https://github.com/wildfly/wildfly/commit/d3ceef6af8ac33a0c4910b3fe9811d47dda6e01c", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-02-18T14:58:56Z", "type": "forcePushed"}, {"oid": "ad1f67abf4ee64f76e9c4e11aabe7748322a020b", "url": "https://github.com/wildfly/wildfly/commit/ad1f67abf4ee64f76e9c4e11aabe7748322a020b", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-02-22T19:34:51Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0MTQ1Ng==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r385641456", "bodyText": "the the -> the", "author": "tterem", "createdAt": "2020-02-28T11:18:24Z", "path": "docs/src/main/asciidoc/_admin-guide/subsystem-configuration/MicroProfile_Fault_Tolerance_SmallRye.adoc", "diffHunk": "@@ -44,43 +44,29 @@ This MicroProfile specification introduces the following interceptor bindings:\n * `@Bulkhead`\n * `@Asynchronous`\n \n-For usage please refer to MicroProfile Fault Tolerance 2.0 https://download.eclipse.org/microprofile/microprofile-fault-tolerance-2.0/microprofile-fault-tolerance-spec.html[specification].\n+For usage please refer to MicroProfile Fault Tolerance 2.1 https://download.eclipse.org/microprofile/microprofile-fault-tolerance-2.1/microprofile-fault-tolerance-spec.html[specification].\n \n-== Hystrix Configuration\n+== Configuration\n \n-MicroProfile Fault Tolerance extension is implemented by the SmallRye Fault Tolerance project which uses https://github.com/Netflix/Hystrix[Hystrix] as an underlying library.\n+Apart from configuration properties defined by the specification, the SmallRye implementation provides the following\n+configuration properties:\n \n-MicroProfile Config is used to configure Hystrix properties.\n-The integration module picks up all `hystrix` prefixed properties to configure the library.\n-Please refer to https://github.com/Netflix/Hystrix/wiki/Configuration[configuration for configurable properties].\n+.SmallRye Fault Tolerance configuration properties\n+|===\n+|Name |Default |Description\n \n-NOTE: Deployments can supply configuration for Hystrix using the defined `META-INF/microprofile-config.properties` file.\n-      However, when multiple MicroProfile Fault Tolerance deployments are deployed in a single WildFly instance and since configuration of Hystrix is singleton\n-      it is recommended to use globally scoped properties in this case. Please refer to MicroProfile Config subsystem how to configure `ConfigSource`-s.\n+|`io.smallrye.faulttolerance.globalThreadPoolSize`\n+|100\n+|Number of threads used by the the fault tolerance mechanisms. This does not include bulkhead thread pools.", "originalCommit": "ad1f67abf4ee64f76e9c4e11aabe7748322a020b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjQzMTAzOQ==", "url": "https://github.com/wildfly/wildfly/pull/13003#discussion_r386431039", "bodyText": "Will by fixed by the next push - the wording was wrong upstream - will be fixed there too now smallrye/smallrye-fault-tolerance#200", "author": "rhusar", "createdAt": "2020-03-02T14:40:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY0MTQ1Ng=="}], "type": "inlineReview"}, {"oid": "75108a2815d418d3ea13d9f8339bbfd24c7fc75e", "url": "https://github.com/wildfly/wildfly/commit/75108a2815d418d3ea13d9f8339bbfd24c7fc75e", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-03-02T18:36:20Z", "type": "forcePushed"}, {"oid": "594918c9aa76e86f741c1c38ee47ae4844cc89b2", "url": "https://github.com/wildfly/wildfly/commit/594918c9aa76e86f741c1c38ee47ae4844cc89b2", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-03-02T23:27:56Z", "type": "forcePushed"}, {"oid": "3b658f994f15cbea6eea00476d12c980d8428c4d", "url": "https://github.com/wildfly/wildfly/commit/3b658f994f15cbea6eea00476d12c980d8428c4d", "message": "WFLY-13024 Integrate MP Fault Tolerance 2.1", "committedDate": "2020-03-04T10:55:06Z", "type": "commit"}, {"oid": "423650e6b860ea77f9015a39228e4f496216ada5", "url": "https://github.com/wildfly/wildfly/commit/423650e6b860ea77f9015a39228e4f496216ada5", "message": "WFLY-13190 Upgrade smallrye-fault-tolerance to 4.1.1", "committedDate": "2020-03-04T10:56:50Z", "type": "commit"}, {"oid": "423650e6b860ea77f9015a39228e4f496216ada5", "url": "https://github.com/wildfly/wildfly/commit/423650e6b860ea77f9015a39228e4f496216ada5", "message": "WFLY-13190 Upgrade smallrye-fault-tolerance to 4.1.1", "committedDate": "2020-03-04T10:56:50Z", "type": "forcePushed"}]}