{"pr_number": 13748, "pr_title": "[WFLY-14049] Consolidate testsuite/integration/microprofile-tck confi\u2026", "pr_createdAt": "2020-11-30T02:20:49Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13748", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ4MjEyOA==", "url": "https://github.com/wildfly/wildfly/pull/13748#discussion_r532482128", "bodyText": "Harmless but this property is unnecessary here since this plugin is inheriting it from its parent configuration. Consistency, it can be removed just to avoid to ask to yourself why it is not added in the other profiles surefire configuration on this module and to keep the control from its parents.", "author": "yersan", "createdAt": "2020-11-30T10:13:16Z", "path": "testsuite/integration/microprofile-tck/pom.xml", "diffHunk": "@@ -144,5 +280,87 @@\n                 </plugins>\n             </build>\n         </profile>\n+\n+        <!-- Test against bootable jar -->\n+        <profile>\n+            <id>bootablejar.profile</id>\n+            <activation>\n+                <property>\n+                    <name>ts.bootable</name>\n+                </property>\n+            </activation>\n+            <dependencies>\n+                <dependency>\n+                    <groupId>org.wildfly.arquillian</groupId>\n+                    <artifactId>wildfly-arquillian-container-bootable</artifactId>\n+                </dependency>\n+            </dependencies>\n+            <properties>\n+                <!-- Disable the standard copy-based provisioning -->\n+                <ts.copy-wildfly.phase>none</ts.copy-wildfly.phase>\n+            </properties>\n+            <build>\n+                <plugins>\n+                    <plugin>\n+                        <groupId>org.wildfly.plugins</groupId>\n+                        <artifactId>wildfly-jar-maven-plugin</artifactId>\n+                        <version>${version.org.wildfly.jar.plugin}</version>\n+                        <executions>\n+                            <execution>\n+                                <id>bootable-jar-microprofile-tck-packaging</id>\n+                                <goals>\n+                                    <goal>package</goal>\n+                                </goals>\n+                                <phase>${ts.bootable-jar-microprofile-tck-packaging.phase}</phase>\n+                                <configuration>\n+                                    <output-file-name>test-wildfly-microprofile-tck.jar</output-file-name>\n+                                    <hollowJar>true</hollowJar>\n+                                    <record-state>false</record-state>\n+                                    <log-time>${galleon.log.time}</log-time>\n+                                    <offline>true</offline>\n+                                    <plugin-options>\n+                                        <jboss-maven-dist/>\n+                                        <jboss-fork-embedded>${galleon.fork.embedded}</jboss-fork-embedded>\n+                                    </plugin-options>\n+                                    <feature-packs>\n+                                        <feature-pack>\n+                                            <!-- Child modules can set properties to override what feature pack is used -->\n+                                            <groupId>${ts.microprofile-tck-provisioning.fp.groupId}</groupId>\n+                                            <artifactId>${ts.microprofile-tck-provisioning.fp.artifactId}</artifactId>\n+                                            <version>${ts.microprofile-tck-provisioning.fp.version}</version>\n+                                        </feature-pack>\n+                                    </feature-packs>\n+                                    <layers>\n+                                        <!-- Child modules would set properties to drive the desired layers -->\n+                                        <layer>${ts.microprofile-tck-provisioning.base.layer}</layer>\n+                                        <layer>${ts.microprofile-tck-provisioning.decorator.layer}</layer>\n+                                    </layers>\n+                                </configuration>\n+                            </execution>\n+                        </executions>\n+                    </plugin>\n+\n+                    <plugin>\n+                        <groupId>org.apache.maven.plugins</groupId>\n+                        <artifactId>maven-surefire-plugin</artifactId>\n+                        <!-- Tests against the microprofile-tck bootable JAR  -->\n+                        <configuration>\n+                            <systemPropertyVariables>\n+                                <install.dir>${project.build.directory}/wildfly</install.dir>\n+                                <bootable.jar>${project.build.directory}/test-wildfly-microprofile-tck.jar</bootable.jar>\n+                                <arquillian.xml>arquillian-bootable.xml</arquillian.xml>\n+                            </systemPropertyVariables>\n+                            <redirectTestOutputToFile>${testLogToFile}</redirectTestOutputToFile>", "originalCommit": "8a8ff45dc510c4c7b1edde92b7f861aac6e262a9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU5NjA2MA==", "url": "https://github.com/wildfly/wildfly/pull/13748#discussion_r532596060", "bodyText": "It's here because I just copied the config from child modules where it was present. You're right, it just duplicates what's already in the testsuite/integration/pom.xml and can be removed.", "author": "bstansberry", "createdAt": "2020-11-30T13:28:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ4MjEyOA=="}], "type": "inlineReview"}, {"oid": "775edaeeb532e41c4fda10834167cfd38fd366eb", "url": "https://github.com/wildfly/wildfly/commit/775edaeeb532e41c4fda10834167cfd38fd366eb", "message": "[WFLY-14049] Consolidate testsuite/integration/microprofile-tck config boilerplate", "committedDate": "2020-11-30T13:34:23Z", "type": "commit"}, {"oid": "775edaeeb532e41c4fda10834167cfd38fd366eb", "url": "https://github.com/wildfly/wildfly/commit/775edaeeb532e41c4fda10834167cfd38fd366eb", "message": "[WFLY-14049] Consolidate testsuite/integration/microprofile-tck config boilerplate", "committedDate": "2020-11-30T13:34:23Z", "type": "forcePushed"}]}