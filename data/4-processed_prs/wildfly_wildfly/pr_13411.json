{"pr_number": 13411, "pr_title": "[WFLY-13675] Make dependency on PicketBox optional for Batch subsystem.", "pr_createdAt": "2020-07-17T13:56:47Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13411", "timeline": [{"oid": "2298004681ed7aaa2486116043bddcb1f26b7e38", "url": "https://github.com/wildfly/wildfly/commit/2298004681ed7aaa2486116043bddcb1f26b7e38", "message": "[WFLY-13675] Ensure the PicketBox dependency is explicitly referenced.", "committedDate": "2020-07-17T09:45:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY2ODg2NA==", "url": "https://github.com/wildfly/wildfly/pull/13411#discussion_r456668864", "bodyText": "Should this have <optional>true</optional>?", "author": "jamezp", "createdAt": "2020-07-17T20:52:24Z", "path": "batch-jberet/pom.xml", "diffHunk": "@@ -75,6 +75,10 @@\n             <groupId>org.jboss.msc</groupId>\n             <artifactId>jboss-msc</artifactId>\n         </dependency>\n+        <dependency>\n+            <groupId>org.picketbox</groupId>\n+            <artifactId>picketbox</artifactId>", "originalCommit": "83c675bd14ad0da69217627b2b3a584dc8f948dd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzE5MzUwNw==", "url": "https://github.com/wildfly/wildfly/pull/13411#discussion_r457193507", "bodyText": "I suspect not as it will not compile without it - but maybe I should set the scope to provided to stop it leaking out.", "author": "darranl", "createdAt": "2020-07-20T08:55:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY2ODg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwODczNQ==", "url": "https://github.com/wildfly/wildfly/pull/13411#discussion_r457708735", "bodyText": "I think optional is still valid as it's optional at runtime. If the legacy security is desired, then the dependency is not optional. However it should work at runtime without it.", "author": "jamezp", "createdAt": "2020-07-20T21:43:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY2ODg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Nzg4NTYxNw==", "url": "https://github.com/wildfly/wildfly/pull/13411#discussion_r457885617", "bodyText": "TBH here we are talking about class loading for a subsystem, by that point the pom definition has been dropped and we have moved to module definitions for class loading.  I will add scope provided to all the picketbox dependencies as I add them so we can avoid transitive dependencies creeping in.  I will add optional if you really want it but as we don't use maven dependencies at runtime I think that is redundant information.", "author": "darranl", "createdAt": "2020-07-21T07:14:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY2ODg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODE3NTc0MA==", "url": "https://github.com/wildfly/wildfly/pull/13411#discussion_r458175740", "bodyText": "I've got no real strong opinion either way really. We do use <optional>true</optional> for the log tooling dependencies. I don't recall why we decided to do that though.", "author": "jamezp", "createdAt": "2020-07-21T15:13:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY2ODg2NA=="}], "type": "inlineReview"}, {"oid": "b5effb0ed8236ce9228f77f4ed20a4ec86af937f", "url": "https://github.com/wildfly/wildfly/commit/b5effb0ed8236ce9228f77f4ed20a4ec86af937f", "message": "[WFLY-13675] Convert the PicketBox dependency from the Batch subsystem to be optional.\n\nThe capability 'org.wildfly.legacy-security' will be checked to identify if PicketBox integration should be activated.", "committedDate": "2020-07-21T16:11:39Z", "type": "commit"}, {"oid": "b5effb0ed8236ce9228f77f4ed20a4ec86af937f", "url": "https://github.com/wildfly/wildfly/commit/b5effb0ed8236ce9228f77f4ed20a4ec86af937f", "message": "[WFLY-13675] Convert the PicketBox dependency from the Batch subsystem to be optional.\n\nThe capability 'org.wildfly.legacy-security' will be checked to identify if PicketBox integration should be activated.", "committedDate": "2020-07-21T16:11:39Z", "type": "forcePushed"}]}