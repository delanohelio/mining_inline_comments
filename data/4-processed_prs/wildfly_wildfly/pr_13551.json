{"pr_number": 13551, "pr_title": "[WFLY-13839] Undertow https-listerner does not generate required capability", "pr_createdAt": "2020-09-11T02:48:56Z", "pr_url": "https://github.com/wildfly/wildfly/pull/13551", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQzMzIyNA==", "url": "https://github.com/wildfly/wildfly/pull/13551#discussion_r487433224", "bodyText": "I believe the declaration of HttpListenerResourceDefinition.HTTP_UPGRADE_REGISTRY_CAPABILITY now needs to be removed as this constant takes its place.", "author": "bstansberry", "createdAt": "2020-09-12T17:58:15Z", "path": "undertow/src/main/java/org/wildfly/extension/undertow/ListenerResourceDefinition.java", "diffHunk": "@@ -76,6 +77,12 @@\n             //.addDynamicRequirements(Capabilities.CAPABILITY_SERVER) -- has no function so don't use it\n             .setAllowMultipleRegistrations(true) //hack to support mod_cluster's legacy profiles\n             .build();\n+\n+    // only used by the subclasses Http(s)ListenerResourceDefinition\n+    protected static final RuntimeCapability<Void> HTTP_UPGRADE_REGISTRY_CAPABILITY = RuntimeCapability.Builder.of(Capabilities.CAPABILITY_HTTP_UPGRADE_REGISTRY, true, ChannelUpgradeHandler.class)", "originalCommit": "0e5268c0ddfe007510ee3f46756b888e591b9106", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODEzNDc4OA==", "url": "https://github.com/wildfly/wildfly/pull/13551#discussion_r488134788", "bodyText": "Yes, I think in an earlier version, I did remove it, but it somehow came back to life. Done.", "author": "rachmatowicz", "createdAt": "2020-09-14T18:24:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzQzMzIyNA=="}], "type": "inlineReview"}, {"oid": "ef266cc4c76579c67e36dd5ba8eb7a2bef8fe0c7", "url": "https://github.com/wildfly/wildfly/commit/ef266cc4c76579c67e36dd5ba8eb7a2bef8fe0c7", "message": "[WFLY-13839] Undertow https-listerner does not generate required capability.", "committedDate": "2020-09-14T18:43:53Z", "type": "commit"}, {"oid": "ef266cc4c76579c67e36dd5ba8eb7a2bef8fe0c7", "url": "https://github.com/wildfly/wildfly/commit/ef266cc4c76579c67e36dd5ba8eb7a2bef8fe0c7", "message": "[WFLY-13839] Undertow https-listerner does not generate required capability.", "committedDate": "2020-09-14T18:43:53Z", "type": "forcePushed"}]}