{"pr_number": 675, "pr_title": "DPC-1013: Enable vendors to create API credentials in Sandbox", "pr_createdAt": "2020-03-10T13:58:29Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/675", "timeline": [{"oid": "63a176f7de9bbb3dd42c9e3c83f79dd164abe357", "url": "https://github.com/CMSgov/dpc-app/commit/63a176f7de9bbb3dd42c9e3c83f79dd164abe357", "message": "Update vendor-related views\n\n* Use existing javascript/css pattern to show/hide provider-specific\n  fields on organization\n* Show different content if the organization is a vendor vs provider\n* Allow vendor users to create tokens / add keys if org is sandbox-\n  enabled (remove NPI requirement)", "committedDate": "2020-03-10T13:54:48Z", "type": "commit"}, {"oid": "12c52ecbc75606f04e8a0426dc1d0f6f5409a4a9", "url": "https://github.com/CMSgov/dpc-app/commit/12c52ecbc75606f04e8a0426dc1d0f6f5409a4a9", "message": "Update tests to account for javascript followup\n\nWe use javascript to dynamically hide/show fields in these forms, but\nin order to replicate that functionality in tests, we would need to\nset up selenium and capybara properly. That is out of scope for this\nPR, so for now we will mark these fields as not visible (though in\nactuality they are triggered to be visible with JavaScript).", "committedDate": "2020-03-11T18:39:20Z", "type": "commit"}, {"oid": "d188d1e7371b7b9636a404bac11736750fc5cc90", "url": "https://github.com/CMSgov/dpc-app/commit/d188d1e7371b7b9636a404bac11736750fc5cc90", "message": "Update unit test", "committedDate": "2020-03-11T18:50:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE5MTI5Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/675#discussion_r391191296", "bodyText": "This was a hold-out piece of content from when we only had provider orgs.", "author": "switzersc-usds", "createdAt": "2020-03-11T18:51:35Z", "path": "dpc-web/app/views/internal/organizations/new.html.erb", "diffHunk": "@@ -4,7 +4,7 @@\n \n   <section class=\"ds-u-display--flex ds-u-justify-content--between ds-u-align-items--center\">\n \n-    <h1 class=\"ds-u-font-size--title ds-u-font-weight--normal ds-u-margin--0\" data-test=\"new-org-page\">Create a new provider organization</h1>", "originalCommit": "d188d1e7371b7b9636a404bac11736750fc5cc90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE5MTc5NA==", "url": "https://github.com/CMSgov/dpc-app/pull/675#discussion_r391191794", "bodyText": "Likewise (leftover from when we just had provider orgs)", "author": "switzersc-usds", "createdAt": "2020-03-11T18:52:27Z", "path": "dpc-web/app/views/internal/organizations/show.html.erb", "diffHunk": "@@ -188,6 +196,6 @@\n \n <section class=\"ds-u-margin--2\">\n   <div class=\"ds-l-row ds-u-justify-content--center\">\n-    <%= link_to \"Delete provider organization\", internal_organization_url(@organization), method: :delete, class: \"ds-u-color--error ds-u-text-align--center\" %>", "originalCommit": "d188d1e7371b7b9636a404bac11736750fc5cc90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE5MTkxNQ==", "url": "https://github.com/CMSgov/dpc-app/pull/675#discussion_r391191915", "bodyText": "I explained this in this commit message: 12c52ec", "author": "switzersc-usds", "createdAt": "2020-03-11T18:52:39Z", "path": "dpc-web/spec/features/internal/organization_management/creating_and_updating_organizations_spec.rb", "diffHunk": "@@ -16,7 +16,7 @@\n \n     fill_in 'organization_name', with: 'Good Health'\n     select 'Primary Care Clinic', from: 'organization_organization_type'\n-    fill_in 'organization_num_providers', with: '2200'\n+    fill_in 'organization_num_providers', visible: false, with: '2200'", "originalCommit": "d188d1e7371b7b9636a404bac11736750fc5cc90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTE5NzYwOQ==", "url": "https://github.com/CMSgov/dpc-app/pull/675#discussion_r391197609", "bodyText": "Muted so you know you can't edit it", "author": "switzersc-usds", "createdAt": "2020-03-11T19:03:12Z", "path": "dpc-web/app/views/internal/organizations/show.html.erb", "diffHunk": "@@ -46,23 +46,31 @@\n         </svg>\n         <%= @organization.organization_type.titleize %>\n       </div>\n-      <div class=\"ds-u-margin-bottom--1\">\n-        <svg class=\"icon ds-u-margin-right--1 ds-u-color--muted\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\">\n-          <use xlink:href=\"/assets/solid.svg#users\"></use>\n-        </svg>\n-        <%= @organization.num_providers %> providers\n-      </div>\n \n-      <div class=\"ds-u-margin-bottom--1\">\n-        <label class=\"ds-u-margin-right--1 ds-u-color--muted\">NPI</label>\n-        <%= @organization.npi %>\n-      </div>\n+      <% if @organization.health_it_vendor? %>\n+        <br>\n+        <div class=\"ds-u-margin-bottom--1\">\n+          <label class=\"ds-u-margin-right--1 ds-u-color--muted\">Vendor ID (System-generated):</label>\n+          <div class=\"ds-u-color--muted\"><%= @organization.vendor_id %></div>", "originalCommit": "d188d1e7371b7b9636a404bac11736750fc5cc90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "873b4371731b22937e2f606cac1b5fc38fd77463", "url": "https://github.com/CMSgov/dpc-app/commit/873b4371731b22937e2f606cac1b5fc38fd77463", "message": "Add vendor sandbox email\n\n* Send vendor sandbox email instead of provider one if org type is\n  health_it_vendor\n* Consolidate this logic in UserMailer because it's the most DRY; add\n  unit test for mailer and update other tests", "committedDate": "2020-03-12T15:36:38Z", "type": "commit"}, {"oid": "873b4371731b22937e2f606cac1b5fc38fd77463", "url": "https://github.com/CMSgov/dpc-app/commit/873b4371731b22937e2f606cac1b5fc38fd77463", "message": "Add vendor sandbox email\n\n* Send vendor sandbox email instead of provider one if org type is\n  health_it_vendor\n* Consolidate this logic in UserMailer because it's the most DRY; add\n  unit test for mailer and update other tests", "committedDate": "2020-03-12T15:36:38Z", "type": "forcePushed"}, {"oid": "5d762be6c144d3decb2f87d55fd46ca781758e9b", "url": "https://github.com/CMSgov/dpc-app/commit/5d762be6c144d3decb2f87d55fd46ca781758e9b", "message": "Merge branch 'master' into shelby/DPC-1013-vendor-sandbox", "committedDate": "2020-03-12T15:45:05Z", "type": "commit"}, {"oid": "f2a93d3df041144bacaaf84f78a23acb24eecea3", "url": "https://github.com/CMSgov/dpc-app/commit/f2a93d3df041144bacaaf84f78a23acb24eecea3", "message": "Merge branch 'master' into shelby/DPC-1013-vendor-sandbox", "committedDate": "2020-03-13T18:32:35Z", "type": "commit"}]}