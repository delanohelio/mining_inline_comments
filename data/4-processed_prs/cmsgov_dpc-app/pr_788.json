{"pr_number": 788, "pr_title": "DPC-1347: Change auto-generated vendor and provider ids to pass for NPI", "pr_createdAt": "2020-05-08T14:36:34Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/788", "timeline": [{"oid": "d6282e8e7cf8b9c408b68dab6c38bbe355b9ea58", "url": "https://github.com/CMSgov/dpc-app/commit/d6282e8e7cf8b9c408b68dab6c38bbe355b9ea58", "message": "Installed Luhnacy", "committedDate": "2020-04-24T15:29:26Z", "type": "commit"}, {"oid": "73821645cb4d44e2e94ba565f41e07bbdfd6af5d", "url": "https://github.com/CMSgov/dpc-app/commit/73821645cb4d44e2e94ba565f41e07bbdfd6af5d", "message": "Create sandbox_id as fake npi for organization", "committedDate": "2020-04-24T19:54:10Z", "type": "commit"}, {"oid": "f7ae6be2419ccc5e325141e94e111021f0f9b46e", "url": "https://github.com/CMSgov/dpc-app/commit/f7ae6be2419ccc5e325141e94e111021f0f9b46e", "message": "Move luhnacy requirement to application", "committedDate": "2020-04-24T20:14:41Z", "type": "commit"}, {"oid": "96bac53908e2c70f2d2ffaa9b440875992864602", "url": "https://github.com/CMSgov/dpc-app/commit/96bac53908e2c70f2d2ffaa9b440875992864602", "message": "Update all existing organization sandbox_ids", "committedDate": "2020-04-24T20:20:48Z", "type": "commit"}, {"oid": "14dbeb311c7fa598e4eabd14f132720aca9d0b43", "url": "https://github.com/CMSgov/dpc-app/commit/14dbeb311c7fa598e4eabd14f132720aca9d0b43", "message": "Rollback migration to ensure blank sandbox_id are generated", "committedDate": "2020-04-27T12:39:41Z", "type": "commit"}, {"oid": "12b44fba6d48af1e8033673e1e1a237bb5a9645a", "url": "https://github.com/CMSgov/dpc-app/commit/12b44fba6d48af1e8033673e1e1a237bb5a9645a", "message": "Autogenerated sandbox_id for existing organizations", "committedDate": "2020-04-27T13:08:39Z", "type": "commit"}, {"oid": "427907c5b7d39fe17b4af7287b1dd5d69c7ec64e", "url": "https://github.com/CMSgov/dpc-app/commit/427907c5b7d39fe17b4af7287b1dd5d69c7ec64e", "message": "Added sandbox_id column and generates id for existing orgs", "committedDate": "2020-04-27T14:20:07Z", "type": "commit"}, {"oid": "e74e4be9d614546a5d39f535dfe3858346cdf268", "url": "https://github.com/CMSgov/dpc-app/commit/e74e4be9d614546a5d39f535dfe3858346cdf268", "message": "Update prod-sbx views", "committedDate": "2020-04-27T14:43:26Z", "type": "commit"}, {"oid": "bed60560cd05a249bc8d318c31578d4f6e48af95", "url": "https://github.com/CMSgov/dpc-app/commit/bed60560cd05a249bc8d318c31578d4f6e48af95", "message": "Organziation Spec adjusted\n\nRemoved tests for provider_id and vendor_id\nReplaced with concise sandbox_id tests in environments", "committedDate": "2020-04-27T15:29:19Z", "type": "commit"}, {"oid": "60f53eb2c31d07683cb4357a3514f5cab96cb2d1", "url": "https://github.com/CMSgov/dpc-app/commit/60f53eb2c31d07683cb4357a3514f5cab96cb2d1", "message": "Updated api_client_spec", "committedDate": "2020-04-27T15:39:49Z", "type": "commit"}, {"oid": "d0e261c2cf1de4fb6ef318ffe77986cb41f70bbc", "url": "https://github.com/CMSgov/dpc-app/commit/d0e261c2cf1de4fb6ef318ffe77986cb41f70bbc", "message": "Removed provider_id and vendor_id columns", "committedDate": "2020-04-27T15:43:40Z", "type": "commit"}, {"oid": "71ab6bd0cb7363c2e0185b91d899acc51026e6be", "url": "https://github.com/CMSgov/dpc-app/commit/71ab6bd0cb7363c2e0185b91d899acc51026e6be", "message": "Adjusted views", "committedDate": "2020-04-27T16:40:22Z", "type": "commit"}, {"oid": "ec3cdded57dc448de279b3adf83034d1d63241eb", "url": "https://github.com/CMSgov/dpc-app/commit/ec3cdded57dc448de279b3adf83034d1d63241eb", "message": "Merge branch 'master' into nzonnenberg/dpc-1347-generate-fake-npis", "committedDate": "2020-04-27T16:48:22Z", "type": "commit"}, {"oid": "f7df919a259a46bf5304ca06e75d33e5d021bd0f", "url": "https://github.com/CMSgov/dpc-app/commit/f7df919a259a46bf5304ca06e75d33e5d021bd0f", "message": "Code Climate fixes", "committedDate": "2020-04-27T17:16:16Z", "type": "commit"}, {"oid": "31145d74dcb29bd58f2c10ca8379c90d8f265aeb", "url": "https://github.com/CMSgov/dpc-app/commit/31145d74dcb29bd58f2c10ca8379c90d8f265aeb", "message": "Merge branch 'nzonnenberg/dpc-1347-generate-fake-npis' of github.com:CMSgov/dpc-app into nzonnenberg/dpc-1347-generate-fake-npis", "committedDate": "2020-04-27T17:16:42Z", "type": "commit"}, {"oid": "a6314a7f6c97398d43cb32ce875023f124977c19", "url": "https://github.com/CMSgov/dpc-app/commit/a6314a7f6c97398d43cb32ce875023f124977c19", "message": "Commented out docker db:migrate", "committedDate": "2020-05-05T17:58:58Z", "type": "commit"}, {"oid": "00d5b0c9f2753ae84f8a55b431b8806968737f5e", "url": "https://github.com/CMSgov/dpc-app/commit/00d5b0c9f2753ae84f8a55b431b8806968737f5e", "message": "Merge remote-tracking branch 'origin/master' into nzonnenberg/dpc-1347-generate-fake-npis", "committedDate": "2020-05-05T18:04:23Z", "type": "commit"}, {"oid": "4277a8203e1b7e65eb63a7f09c912ec48e934bb3", "url": "https://github.com/CMSgov/dpc-app/commit/4277a8203e1b7e65eb63a7f09c912ec48e934bb3", "message": "Removed sandbox_id generate from migration", "committedDate": "2020-05-06T13:34:53Z", "type": "commit"}, {"oid": "4561285665787a167894c154e74580e961530754", "url": "https://github.com/CMSgov/dpc-app/commit/4561285665787a167894c154e74580e961530754", "message": "Rake task for sandbox_id added", "committedDate": "2020-05-06T13:43:13Z", "type": "commit"}, {"oid": "b1a9f4e1ea8411f90d616a85ad8ee4bdc1ba0cb4", "url": "https://github.com/CMSgov/dpc-app/commit/b1a9f4e1ea8411f90d616a85ad8ee4bdc1ba0cb4", "message": "Rake task to add sandbox ids", "committedDate": "2020-05-06T13:49:12Z", "type": "commit"}, {"oid": "806404c7e47ecb86c596370702f5c72bc673c097", "url": "https://github.com/CMSgov/dpc-app/commit/806404c7e47ecb86c596370702f5c72bc673c097", "message": "Added 'sandbox_id'", "committedDate": "2020-05-08T14:35:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDY2NA==", "url": "https://github.com/CMSgov/dpc-app/pull/788#discussion_r422190664", "bodyText": "Final newline missing.", "author": "codeclimate", "createdAt": "2020-05-08T14:55:05Z", "path": "dpc-web/lib/tasks/add_sandbox_ids.rake", "diffHunk": "@@ -0,0 +1,12 @@\n+desc 'Add sandbox id to existing organizations if null'\n+\n+task :add_sandbox_ids => :environment do\n+  if ENV['DEPLOY_ENV'] == 'prod-sbx'\n+    Organization.find_each do |o|\n+      if o.sandbox_id == nil\n+        o.sandbox_id = Luhnacy.generate(15, :prefix => '808403')[-10..-1]\n+        o.save!\n+      end\n+    end\n+  end\n+end", "originalCommit": "806404c7e47ecb86c596370702f5c72bc673c097", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDY2OA==", "url": "https://github.com/CMSgov/dpc-app/pull/788#discussion_r422190668", "bodyText": "Missing magic comment # frozen_string_literal: true.", "author": "codeclimate", "createdAt": "2020-05-08T14:55:05Z", "path": "dpc-web/lib/tasks/add_sandbox_ids.rake", "diffHunk": "@@ -0,0 +1,12 @@\n+desc 'Add sandbox id to existing organizations if null'", "originalCommit": "806404c7e47ecb86c596370702f5c72bc673c097", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDY3MQ==", "url": "https://github.com/CMSgov/dpc-app/pull/788#discussion_r422190671", "bodyText": "Use the new Ruby 1.9 hash syntax.", "author": "codeclimate", "createdAt": "2020-05-08T14:55:05Z", "path": "dpc-web/lib/tasks/add_sandbox_ids.rake", "diffHunk": "@@ -0,0 +1,12 @@\n+desc 'Add sandbox id to existing organizations if null'\n+\n+task :add_sandbox_ids => :environment do", "originalCommit": "806404c7e47ecb86c596370702f5c72bc673c097", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDY3Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/788#discussion_r422190676", "bodyText": "Use the new Ruby 1.9 hash syntax.", "author": "codeclimate", "createdAt": "2020-05-08T14:55:05Z", "path": "dpc-web/lib/tasks/add_sandbox_ids.rake", "diffHunk": "@@ -0,0 +1,12 @@\n+desc 'Add sandbox id to existing organizations if null'\n+\n+task :add_sandbox_ids => :environment do\n+  if ENV['DEPLOY_ENV'] == 'prod-sbx'\n+    Organization.find_each do |o|\n+      if o.sandbox_id == nil\n+        o.sandbox_id = Luhnacy.generate(15, :prefix => '808403')[-10..-1]", "originalCommit": "806404c7e47ecb86c596370702f5c72bc673c097", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjE5MDY4MA==", "url": "https://github.com/CMSgov/dpc-app/pull/788#discussion_r422190680", "bodyText": "Prefer the use of the nil? predicate.", "author": "codeclimate", "createdAt": "2020-05-08T14:55:06Z", "path": "dpc-web/lib/tasks/add_sandbox_ids.rake", "diffHunk": "@@ -0,0 +1,12 @@\n+desc 'Add sandbox id to existing organizations if null'\n+\n+task :add_sandbox_ids => :environment do\n+  if ENV['DEPLOY_ENV'] == 'prod-sbx'\n+    Organization.find_each do |o|\n+      if o.sandbox_id == nil", "originalCommit": "806404c7e47ecb86c596370702f5c72bc673c097", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8459afbbb906988f592f206a70d406616d7c2bf0", "url": "https://github.com/CMSgov/dpc-app/commit/8459afbbb906988f592f206a70d406616d7c2bf0", "message": "Change DEPLOY_ENV variable to ENV", "committedDate": "2020-05-08T15:18:16Z", "type": "commit"}, {"oid": "a421fd25293ae6b1eacf2f0d420c575c6fda56a5", "url": "https://github.com/CMSgov/dpc-app/commit/a421fd25293ae6b1eacf2f0d420c575c6fda56a5", "message": "Code climate fixes", "committedDate": "2020-05-08T15:24:17Z", "type": "commit"}, {"oid": "13ac365e382d4740522d6ac5efee2c5f47af6e75", "url": "https://github.com/CMSgov/dpc-app/commit/13ac365e382d4740522d6ac5efee2c5f47af6e75", "message": "Remove whitespace", "committedDate": "2020-05-08T15:27:20Z", "type": "commit"}, {"oid": "3207abff48eb7dc8c326bb5c5bd3aa032b9f27db", "url": "https://github.com/CMSgov/dpc-app/commit/3207abff48eb7dc8c326bb5c5bd3aa032b9f27db", "message": "Code climate", "committedDate": "2020-05-08T15:31:09Z", "type": "commit"}, {"oid": "ea0b22223f7ad60a7b64ad9bbaa37e6b31226b87", "url": "https://github.com/CMSgov/dpc-app/commit/ea0b22223f7ad60a7b64ad9bbaa37e6b31226b87", "message": "Merge branch 'master' into nzonnenberg/dpc-1347-generate-fake-npis", "committedDate": "2020-05-08T16:45:10Z", "type": "commit"}]}