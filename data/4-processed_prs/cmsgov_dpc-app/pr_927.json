{"pr_number": 927, "pr_title": "DPC-561 - Responses with 401 Unauthorized should return JSON Operation Outcome", "pr_createdAt": "2020-07-23T15:16:54Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/927", "timeline": [{"oid": "a04d8c1d3c0ee1b4e777141b2137c8e0c3936315", "url": "https://github.com/CMSgov/dpc-app/commit/a04d8c1d3c0ee1b4e777141b2137c8e0c3936315", "message": "added custom 401 unauthorized handler that returns a FHIR operation outcome", "committedDate": "2020-07-22T22:39:44Z", "type": "commit"}, {"oid": "7a78c5e80eaf0ac0495daca1a36dd1f3b30528e0", "url": "https://github.com/CMSgov/dpc-app/commit/7a78c5e80eaf0ac0495daca1a36dd1f3b30528e0", "message": "remove unused import", "committedDate": "2020-07-23T14:07:26Z", "type": "commit"}, {"oid": "339659c86e424576d6d3cd78bd851d70fc7a9c45", "url": "https://github.com/CMSgov/dpc-app/commit/339659c86e424576d6d3cd78bd851d70fc7a9c45", "message": "Merge remote-tracking branch 'origin/master' into DPC-561", "committedDate": "2020-07-23T14:10:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU0NDY1OA==", "url": "https://github.com/CMSgov/dpc-app/pull/927#discussion_r459544658", "bodyText": "Add a nested comment explaining why this method is empty, throw an UnsupportedOperationException or complete the implementation.", "author": "codeclimate", "createdAt": "2020-07-23T15:39:51Z", "path": "dpc-api/src/main/java/gov/cms/dpc/api/auth/DPCUnauthorizedHandler.java", "diffHunk": "@@ -0,0 +1,35 @@\n+package gov.cms.dpc.api.auth;\n+\n+import io.dropwizard.auth.UnauthorizedHandler;\n+import org.hl7.fhir.dstu3.model.CodeableConcept;\n+import org.hl7.fhir.dstu3.model.Coding;\n+import org.hl7.fhir.dstu3.model.OperationOutcome;\n+import javax.inject.Inject;\n+import javax.ws.rs.core.Response;\n+import javax.ws.rs.core.Response.Status;\n+import static gov.cms.dpc.fhir.FHIRMediaTypes.FHIR_JSON;\n+\n+public class DPCUnauthorizedHandler implements UnauthorizedHandler {\n+\n+    @Inject\n+    public DPCUnauthorizedHandler() {", "originalCommit": "339659c86e424576d6d3cd78bd851d70fc7a9c45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTU0NDY2MA==", "url": "https://github.com/CMSgov/dpc-app/pull/927#discussion_r459544660", "bodyText": "Similar blocks of code found in 4 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-07-23T15:39:51Z", "path": "dpc-api/src/main/java/gov/cms/dpc/api/auth/DPCAuthFilter.java", "diffHunk": "@@ -34,12 +33,14 @@\n \n     private final TokenDAO dao;\n     private final MacaroonBakery bakery;\n+    private final DPCUnauthorizedHandler dpc401handler;\n \n \n-    protected DPCAuthFilter(MacaroonBakery bakery, Authenticator<DPCAuthCredentials, OrganizationPrincipal> auth, TokenDAO dao) {\n+    protected DPCAuthFilter(MacaroonBakery bakery, Authenticator<DPCAuthCredentials, OrganizationPrincipal> auth, TokenDAO dao, DPCUnauthorizedHandler dpc401handler ) {", "originalCommit": "339659c86e424576d6d3cd78bd851d70fc7a9c45", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}