{"pr_number": 865, "pr_title": "DPC-154: As an internal user I want buttons to easily add/remove users from an organization", "pr_createdAt": "2020-06-19T20:49:35Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/865", "timeline": [{"oid": "18d43086cdb7e90ecd05ff9922b57fba4f8f30cd", "url": "https://github.com/CMSgov/dpc-app/commit/18d43086cdb7e90ecd05ff9922b57fba4f8f30cd", "message": "init", "committedDate": "2020-05-08T13:54:47Z", "type": "commit"}, {"oid": "c94b9b052de32bb55f9f9615325c6c39780967ce", "url": "https://github.com/CMSgov/dpc-app/commit/c94b9b052de32bb55f9f9615325c6c39780967ce", "message": "Merge remote-tracking branch 'origin/master' into nzonnenberg/dpc-1366-add-remove-users", "committedDate": "2020-05-11T13:41:00Z", "type": "commit"}, {"oid": "916dc2b5b927d51dc993b274bd3f80fb5c4be4c1", "url": "https://github.com/CMSgov/dpc-app/commit/916dc2b5b927d51dc993b274bd3f80fb5c4be4c1", "message": "init", "committedDate": "2020-05-13T14:13:13Z", "type": "commit"}, {"oid": "59422c1948c8ecaae81bb8aa7a29311ccff50986", "url": "https://github.com/CMSgov/dpc-app/commit/59422c1948c8ecaae81bb8aa7a29311ccff50986", "message": "added user", "committedDate": "2020-05-13T16:29:17Z", "type": "commit"}, {"oid": "78067fd4ca599d11e4fd5b05519fd0768a5ab4da", "url": "https://github.com/CMSgov/dpc-app/commit/78067fd4ca599d11e4fd5b05519fd0768a5ab4da", "message": "Delete user from organization", "committedDate": "2020-05-15T19:39:39Z", "type": "commit"}, {"oid": "1d9605764085ccf3228e807d1bf338f5ec983a59", "url": "https://github.com/CMSgov/dpc-app/commit/1d9605764085ccf3228e807d1bf338f5ec983a59", "message": "Button styling", "committedDate": "2020-05-15T19:57:14Z", "type": "commit"}, {"oid": "63366c7d0e5d3718acbd9c35a45c6b35e970b9c2", "url": "https://github.com/CMSgov/dpc-app/commit/63366c7d0e5d3718acbd9c35a45c6b35e970b9c2", "message": "Adding js file.", "committedDate": "2020-05-20T15:41:35Z", "type": "commit"}, {"oid": "5371415e09bbccf45ab63404ed0fbf74a5e1954b", "url": "https://github.com/CMSgov/dpc-app/commit/5371415e09bbccf45ab63404ed0fbf74a5e1954b", "message": "Can access javascript file", "committedDate": "2020-05-20T15:57:26Z", "type": "commit"}, {"oid": "78cbdf53a2959edb4e3492cce2744a5a3a41c253", "url": "https://github.com/CMSgov/dpc-app/commit/78cbdf53a2959edb4e3492cce2744a5a3a41c253", "message": "Dynamic search works", "committedDate": "2020-05-20T18:14:19Z", "type": "commit"}, {"oid": "ba41f1cdd40f18f6a25f74366af3e4e9f1d79d8b", "url": "https://github.com/CMSgov/dpc-app/commit/ba41f1cdd40f18f6a25f74366af3e4e9f1d79d8b", "message": "List only unassigned users", "committedDate": "2020-05-20T21:01:31Z", "type": "commit"}, {"oid": "11c855789a53dbe5d7448c3ee19e15d0175e9949", "url": "https://github.com/CMSgov/dpc-app/commit/11c855789a53dbe5d7448c3ee19e15d0175e9949", "message": "Save progress", "committedDate": "2020-05-21T12:28:37Z", "type": "commit"}, {"oid": "dfe16b5bc5881bc6abddd5c6664c52f6d6067d6e", "url": "https://github.com/CMSgov/dpc-app/commit/dfe16b5bc5881bc6abddd5c6664c52f6d6067d6e", "message": "Counting", "committedDate": "2020-05-26T12:33:33Z", "type": "commit"}, {"oid": "51591e78d705b8b8740ca006edcd6620d96db6d0", "url": "https://github.com/CMSgov/dpc-app/commit/51591e78d705b8b8740ca006edcd6620d96db6d0", "message": "Merge branch 'master' into nzonnenberg/dpc-1366-add-remove-users", "committedDate": "2020-06-09T14:56:17Z", "type": "commit"}, {"oid": "4cc31b90bdba7eb22ec385c79ac98d3d3efcfa84", "url": "https://github.com/CMSgov/dpc-app/commit/4cc31b90bdba7eb22ec385c79ac98d3d3efcfa84", "message": "Scroll users", "committedDate": "2020-06-09T15:44:03Z", "type": "commit"}, {"oid": "0811d2988d3e8fbd24252efc67d86270f03e6479", "url": "https://github.com/CMSgov/dpc-app/commit/0811d2988d3e8fbd24252efc67d86270f03e6479", "message": "Merge branch 'master' into nzonnenberg/dpc-1366-add-remove-users", "committedDate": "2020-06-19T16:07:50Z", "type": "commit"}, {"oid": "0fe15dbaf968ac655ceea9295a3606c0219e356e", "url": "https://github.com/CMSgov/dpc-app/commit/0fe15dbaf968ac655ceea9295a3606c0219e356e", "message": "Progress", "committedDate": "2020-06-19T17:19:24Z", "type": "commit"}, {"oid": "77fe6ff0a7c1dac664129e846d0d1cca05f1e757", "url": "https://github.com/CMSgov/dpc-app/commit/77fe6ff0a7c1dac664129e846d0d1cca05f1e757", "message": "Filter update", "committedDate": "2020-06-19T20:37:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA0MTE1Mg==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r443041152", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-06-19T20:58:30Z", "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "diffHunk": "@@ -79,6 +81,32 @@ def destroy\n       end\n     end\n \n+    def add", "originalCommit": "77fe6ff0a7c1dac664129e846d0d1cca05f1e757", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzA0MTE1Mw==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r443041153", "bodyText": "Similar blocks of code found in 2 locations. Consider refactoring.", "author": "codeclimate", "createdAt": "2020-06-19T20:58:30Z", "path": "dpc-web/app/controllers/internal/organizations_controller.rb", "diffHunk": "@@ -79,6 +81,32 @@ def destroy\n       end\n     end\n \n+    def add\n+      @organization = Organization.find(params[:organization_id])\n+      @user = User.find(params[:organization][:id])\n+      add_user = @organization.users << @user\n+\n+      if add_user\n+        flash[:notice] = 'User has been successfully added to organization.'\n+        redirect_to internal_organization_path(@organization)\n+      else\n+        flash[:alert] = 'User could not be added to organization.'\n+      end\n+    end\n+\n+    def delete", "originalCommit": "77fe6ff0a7c1dac664129e846d0d1cca05f1e757", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "41d90cd6a0b1188c073553c515152acff37bebfc", "url": "https://github.com/CMSgov/dpc-app/commit/41d90cd6a0b1188c073553c515152acff37bebfc", "message": "Refactor add/delete", "committedDate": "2020-06-22T12:58:06Z", "type": "commit"}, {"oid": "830e0a6af9cd0ba4e322c8f1e1ad3e75064cef7f", "url": "https://github.com/CMSgov/dpc-app/commit/830e0a6af9cd0ba4e322c8f1e1ad3e75064cef7f", "message": "code climate update", "committedDate": "2020-06-22T13:04:10Z", "type": "commit"}, {"oid": "ea0111ce4020dc1d872dcd1eb397f8253cb8b08b", "url": "https://github.com/CMSgov/dpc-app/commit/ea0111ce4020dc1d872dcd1eb397f8253cb8b08b", "message": "Trim org controller", "committedDate": "2020-06-22T14:21:42Z", "type": "commit"}, {"oid": "1cedfcff89062d69d2486911bbfe3a8a10b44343", "url": "https://github.com/CMSgov/dpc-app/commit/1cedfcff89062d69d2486911bbfe3a8a10b44343", "message": "Trim org controller", "committedDate": "2020-06-22T15:05:53Z", "type": "commit"}, {"oid": "cf42afb42270f3e6ef135caa56e5252d2730518b", "url": "https://github.com/CMSgov/dpc-app/commit/cf42afb42270f3e6ef135caa56e5252d2730518b", "message": "Get rid of spaces", "committedDate": "2020-06-22T15:09:08Z", "type": "commit"}, {"oid": "5ed76107f1b18262f212d4e73c3bf4e942cef19a", "url": "https://github.com/CMSgov/dpc-app/commit/5ed76107f1b18262f212d4e73c3bf4e942cef19a", "message": "Refactored methods with only 'params.require(:id)' to global private method in application controller.\n\nIn attempts to shorten the organization controller (per code climate recommendations), I moved the org_params method to a private global method in application controller.\n\nTo keep application DRY, any method that only had 'params.require(:id)' was refactored for the new globabl method.", "committedDate": "2020-06-22T15:21:09Z", "type": "commit"}, {"oid": "a2fd75830a86a2488a0a3076c47a2e143f9c83bc", "url": "https://github.com/CMSgov/dpc-app/commit/a2fd75830a86a2488a0a3076c47a2e143f9c83bc", "message": "Remove unused routes", "committedDate": "2020-06-22T15:25:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNTUwNQ==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r443815505", "bodyText": "I see why you pulled this out since we use :id as an identifier a lot (obviously :P). However, the id can identify can signify a lot of different tables. I just want to make sure that account_param_id is a good identifier so, if this is used in a lot of controllers, its not confusing.", "author": "SMLuthi", "createdAt": "2020-06-22T20:44:40Z", "path": "dpc-web/app/controllers/application_controller.rb", "diffHunk": "@@ -37,4 +37,14 @@ def append_info_to_payload(payload)\n                         'ERROR'\n                       end\n   end\n+\n+  private\n+\n+  def account_params_id", "originalCommit": "a2fd75830a86a2488a0a3076c47a2e143f9c83bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgyNzY2OQ==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r443827669", "bodyText": "id_param\nidentify_param", "author": "Sun-Mountain", "createdAt": "2020-06-22T21:09:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNTUwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDMyMjQ3OA==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r444322478", "bodyText": "Yea, i'd probably just keep it to something simple like id_param", "author": "SMLuthi", "createdAt": "2020-06-23T15:41:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNTUwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NDM5NjQ5Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/865#discussion_r444396496", "bodyText": "Done!", "author": "Sun-Mountain", "createdAt": "2020-06-23T17:40:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzgxNTUwNQ=="}], "type": "inlineReview"}, {"oid": "d46f823b88ba200d2d9bf488fec6d8baf5111360", "url": "https://github.com/CMSgov/dpc-app/commit/d46f823b88ba200d2d9bf488fec6d8baf5111360", "message": "Change account_params_id to id_param", "committedDate": "2020-06-23T17:40:22Z", "type": "commit"}, {"oid": "e56ba05e20ef53ffb27059fe5ee284092bbae6f7", "url": "https://github.com/CMSgov/dpc-app/commit/e56ba05e20ef53ffb27059fe5ee284092bbae6f7", "message": "Merge branch 'master' into nzonnenberg/dpc-1366-add-remove-users", "committedDate": "2020-06-23T17:43:22Z", "type": "commit"}]}