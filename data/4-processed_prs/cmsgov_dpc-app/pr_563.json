{"pr_number": 563, "pr_title": "DPC-956: Modify BFD client to use excludeSAMHSA=true when making EOB requests", "pr_createdAt": "2020-01-27T22:53:32Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/563", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxODc2MA==", "url": "https://github.com/CMSgov/dpc-app/pull/563#discussion_r371818760", "bodyText": "Can we use a range loop here? Usually a bit safer than a raw idx.", "author": "nickrobison-usds", "createdAt": "2020-01-28T14:02:26Z", "path": "dpc-bluebutton/src/main/java/gov/cms/dpc/bluebutton/client/BlueButtonClientImpl.java", "diffHunk": "@@ -192,17 +199,22 @@ public String hashMbi(String mbi) throws GeneralSecurityException {\n      * Read a FHIR Bundle from BlueButton. Limits the returned size by resourcesPerRequest.\n      *\n      * @param resourceClass - FHIR Resource class\n-     * @param criterion - For the resource class the correct criterion that matches the patientID\n+     * @param criteria - For the resource class the correct criteria that match the patientID\n      * @param patientID - id of patient\n      * @return FHIR Bundle resource\n      */\n     private <T extends IBaseResource> Bundle fetchBundle(Class<T> resourceClass,\n-                                                         ICriterion<ReferenceClientParam> criterion,\n+                                                         List<ICriterion<? extends IParam>> criteria,\n                                                          String patientID) {\n-        final Bundle bundle = client.search()\n+        IQuery<IBaseBundle> query = client.search()\n                 .forResource(resourceClass)\n-                .where(criterion)\n-                .count(config.getResourcesCount())\n+                .where(criteria.get(0));\n+\n+        for (int i = 1; i < criteria.size(); i++) {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "758d4a09779870d7b48558c0422ed261753dc3d8", "url": "https://github.com/CMSgov/dpc-app/commit/758d4a09779870d7b48558c0422ed261753dc3d8", "message": "excludeSAMHSA=true on BFD EOB requests", "committedDate": "2020-01-28T17:13:23Z", "type": "commit"}, {"oid": "056b381077f924c1c65656152bce74ff29c7bf77", "url": "https://github.com/CMSgov/dpc-app/commit/056b381077f924c1c65656152bce74ff29c7bf77", "message": "PR changes", "committedDate": "2020-01-28T17:13:27Z", "type": "commit"}, {"oid": "056b381077f924c1c65656152bce74ff29c7bf77", "url": "https://github.com/CMSgov/dpc-app/commit/056b381077f924c1c65656152bce74ff29c7bf77", "message": "PR changes", "committedDate": "2020-01-28T17:13:27Z", "type": "forcePushed"}]}