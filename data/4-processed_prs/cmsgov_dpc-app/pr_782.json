{"pr_number": 782, "pr_title": "DPC-1371 Email domain validation", "pr_createdAt": "2020-05-05T01:40:21Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/782", "timeline": [{"oid": "d10a80c14ec624f261f1e4e7b873a2959d83a706", "url": "https://github.com/CMSgov/dpc-app/commit/d10a80c14ec624f261f1e4e7b873a2959d83a706", "message": "Validate new user email domain via DNS", "committedDate": "2020-05-01T03:45:40Z", "type": "commit"}, {"oid": "c70a1286203550b8b21e1db6fc0311642158477f", "url": "https://github.com/CMSgov/dpc-app/commit/c70a1286203550b8b21e1db6fc0311642158477f", "message": "Rspec uses regex for email validation", "committedDate": "2020-05-01T04:32:51Z", "type": "commit"}, {"oid": "e0edee6fbbdb77f45dcee762a82419da0b2a6843", "url": "https://github.com/CMSgov/dpc-app/commit/e0edee6fbbdb77f45dcee762a82419da0b2a6843", "message": "Revert \"DPC-1347: Change auto-generated vendor and provider ids to pass for NPI (#772)\"\n\nThis reverts commit 805cd5c2c89a790fd698059d60cb9dd20b23579d.", "committedDate": "2020-05-04T19:28:07Z", "type": "commit"}, {"oid": "2eb86b1616a937a47da2975ccdb5a72c408376e2", "url": "https://github.com/CMSgov/dpc-app/commit/2eb86b1616a937a47da2975ccdb5a72c408376e2", "message": "Merge branch 'dhg/dpc-1371-research-dev-problems' into dhg/dpc-1371-email-domain-validation", "committedDate": "2020-05-05T01:20:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyMjc2NA==", "url": "https://github.com/CMSgov/dpc-app/pull/782#discussion_r419822764", "bodyText": "Add an empty line after magic comments.", "author": "codeclimate", "createdAt": "2020-05-05T01:41:10Z", "path": "dpc-web/app/validators/domain_exists_validator.rb", "diffHunk": "@@ -0,0 +1,12 @@\n+# frozen_string_literal: true\n+require 'mail'", "originalCommit": "2eb86b1616a937a47da2975ccdb5a72c408376e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyMjc2Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/782#discussion_r419822766", "bodyText": "Final newline missing.", "author": "codeclimate", "createdAt": "2020-05-05T01:41:11Z", "path": "dpc-web/app/validators/domain_exists_validator.rb", "diffHunk": "@@ -0,0 +1,12 @@\n+# frozen_string_literal: true\n+require 'mail'\n+class DomainExistsValidator < ActiveModel::EachValidator\n+  def validate_each(record, attribute, value)\n+    begin\n+      r = Truemail.validate(value).result.success\n+    rescue StandardError\n+      r = false\n+    end\n+    record.errors[attribute] << (options[:message] || 'is invalid') unless r\n+  end\n+end", "originalCommit": "2eb86b1616a937a47da2975ccdb5a72c408376e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8a392abf52b5d3af3f18c5253fabf23272c35649", "url": "https://github.com/CMSgov/dpc-app/commit/8a392abf52b5d3af3f18c5253fabf23272c35649", "message": "Codeclimate improvements", "committedDate": "2020-05-05T01:45:10Z", "type": "commit"}, {"oid": "57897c153bae11defc83c26ede4289e8caa649be", "url": "https://github.com/CMSgov/dpc-app/commit/57897c153bae11defc83c26ede4289e8caa649be", "message": "Merge branch 'master' into dhg/dpc-1371-email-domain-validation", "committedDate": "2020-05-05T13:21:21Z", "type": "commit"}]}