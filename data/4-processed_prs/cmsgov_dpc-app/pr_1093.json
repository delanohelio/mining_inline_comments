{"pr_number": 1093, "pr_title": "DPC-800: Webapp Tasks for Static Site Separation", "pr_createdAt": "2020-10-19T19:18:18Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/1093", "timeline": [{"oid": "c32d3b45c2d67359660987662f12e04833ef7f6c", "url": "https://github.com/CMSgov/dpc-app/commit/c32d3b45c2d67359660987662f12e04833ef7f6c", "message": "URL redirect to statict site url", "committedDate": "2020-10-15T20:19:05Z", "type": "commit"}, {"oid": "7f44bd5d7c77786a641d688215def7a46f51d1c6", "url": "https://github.com/CMSgov/dpc-app/commit/7f44bd5d7c77786a641d688215def7a46f51d1c6", "message": "Remove pages folder", "committedDate": "2020-10-15T20:19:38Z", "type": "commit"}, {"oid": "8747b6fb060fb57f4e9bc89920b4756e6322bfd1", "url": "https://github.com/CMSgov/dpc-app/commit/8747b6fb060fb57f4e9bc89920b4756e6322bfd1", "message": "Update home navigation links", "committedDate": "2020-10-19T13:50:03Z", "type": "commit"}, {"oid": "03e57d125c713bb22f2c0816195ffadb5ec65052", "url": "https://github.com/CMSgov/dpc-app/commit/03e57d125c713bb22f2c0816195ffadb5ec65052", "message": "Delete home page", "committedDate": "2020-10-19T14:43:56Z", "type": "commit"}, {"oid": "7b55e8fa9e1090cd05bb217f3b0c6a427dcb6400", "url": "https://github.com/CMSgov/dpc-app/commit/7b55e8fa9e1090cd05bb217f3b0c6a427dcb6400", "message": "Fix routes", "committedDate": "2020-10-19T16:08:01Z", "type": "commit"}, {"oid": "4f8e7d580c1d95122d66be5617825b82d972428f", "url": "https://github.com/CMSgov/dpc-app/commit/4f8e7d580c1d95122d66be5617825b82d972428f", "message": "Fix tests", "committedDate": "2020-10-19T18:00:50Z", "type": "commit"}, {"oid": "f2e30436dc8248a8fec6f79146fb5c4dfc237424", "url": "https://github.com/CMSgov/dpc-app/commit/f2e30436dc8248a8fec6f79146fb5c4dfc237424", "message": "Update README", "committedDate": "2020-10-19T18:37:07Z", "type": "commit"}, {"oid": "465723a3c8826fbf4a5014c8b425a4a35a498ad1", "url": "https://github.com/CMSgov/dpc-app/commit/465723a3c8826fbf4a5014c8b425a4a35a498ad1", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2020-10-19T19:22:36Z", "type": "commit"}, {"oid": "f01815a85b30ca167fdeb3f5d8f209cf771451d9", "url": "https://github.com/CMSgov/dpc-app/commit/f01815a85b30ca167fdeb3f5d8f209cf771451d9", "message": "Remove public controller", "committedDate": "2020-10-19T20:09:18Z", "type": "commit"}, {"oid": "ba73c3f4826e7c4b775141823e97d428d6312bc7", "url": "https://github.com/CMSgov/dpc-app/commit/ba73c3f4826e7c4b775141823e97d428d6312bc7", "message": "Devise Helper Spec", "committedDate": "2020-10-20T13:07:57Z", "type": "commit"}, {"oid": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "url": "https://github.com/CMSgov/dpc-app/commit/f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "message": "Remove SimpleCov.start", "committedDate": "2020-10-20T13:19:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4Mzc3NQ==", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509483775", "bodyText": "\"There all\"?", "author": "dhgreene", "createdAt": "2020-10-21T17:34:38Z", "path": "dpc-web/README.md", "diffHunk": "@@ -1,5 +1,7 @@\n # README\n-This is the *draft* version of the Data Point of Care (DPC) website. The website has functioning public static content as well as a sign-up section allowing providers to volunteer for beta-testing the DPC application. The sign-up section, and whatever functionality and specialized content that we provide signed up beta participants will require authentication to view. In addition, there is an administrator portal to manage the registration and communications with the participants.\n+This is the *draft* version of the Data Point of Care (DPC) website. The website has a sign-up section allowing providers to volunteer for beta-testing the DPC application. The sign-up section, and whatever functionality and specialized content that we provide signed up beta participants will require authentication to view. In addition, there is an administrator portal to manage the registration and communications with the participants.\n+\n+There all static public pages are now hosted on a separate static site. This may result in broken links when run locally.", "originalCommit": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4NTMyNQ==", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509485325", "bodyText": "Should we show the default port for the static site (4001)?", "author": "dhgreene", "createdAt": "2020-10-21T17:36:12Z", "path": "dpc-web/README.md", "diffHunk": "@@ -105,6 +107,15 @@ If you want to switch to the sandbox environment, add the `ENV` variable:\n ENV=prod-sbx\n ```\n \n+#### Static Pages\n+\n+All static public pages are hosted in a separate [jekyll site](https://github.com/CMSgov/dpc-static-site). To run the full suite, clone and follow the local instructions for the jekyll site to run at the same time as this web app.\n+\n+You will need to add a `STATIC_SITE_URL` variable to your `.env` file:\n+\n+```\n+STATIC_SITE_URL=http://localhost:xxxx", "originalCommit": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4NzQwNg==", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509487406", "bodyText": "If I read this correctly, this prematurely closes the <li> that we're closing 5 lines later.", "author": "dhgreene", "createdAt": "2020-10-21T17:38:26Z", "path": "dpc-web/app/views/shared/_navbar.html.erb", "diffHunk": "@@ -55,7 +56,7 @@ aria-controls=\"topnav-wrap\" aria-label=\"Close menu\">\n         </li>\n \n       <% elsif internal_user_signed_in? %>\n-        <li class=\"topnav__item\">\n+        <li class=\"topnav__item\"></li>", "originalCommit": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQ4OTY0MQ==", "url": "https://github.com/CMSgov/dpc-app/pull/1093#discussion_r509489641", "bodyText": "Should we check for the presence of this env var when starting the app and abort if it's not present?  It seems like otherwise we're asking for bugs.\nWhile we're doing that, is it worth assigning the env var to more convenient config value, maybe something like static_site_url?", "author": "dhgreene", "createdAt": "2020-10-21T17:40:27Z", "path": "dpc-web/app/views/shared/_navbar.html.erb", "diffHunk": "@@ -23,7 +24,7 @@ aria-controls=\"topnav-wrap\" aria-label=\"Close menu\">\n     </button>\n     <ul class=\"topnav\">\n       <li class=\"topnav__item\">\n-        <%= link_to \"Home\", root_path, class: \"topnav__link\"  %>\n+        <%= link_to \"Home\", ENV['STATIC_SITE_URL'], class: \"topnav__link\"  %>", "originalCommit": "f2e23e78daf4fd7f33bfacde164361bdb9cfb3a2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aa7b50dd17d4121d1aedd27e1b5a96bbac8b3720", "url": "https://github.com/CMSgov/dpc-app/commit/aa7b50dd17d4121d1aedd27e1b5a96bbac8b3720", "message": "Small fixes", "committedDate": "2020-10-22T12:49:46Z", "type": "commit"}, {"oid": "65ce6f20f16e346f108eea80a1253e1fec27dbb0", "url": "https://github.com/CMSgov/dpc-app/commit/65ce6f20f16e346f108eea80a1253e1fec27dbb0", "message": "Abort if static_site_url not present added", "committedDate": "2020-10-22T15:36:49Z", "type": "commit"}, {"oid": "319b554672372832b562d267704e6c338de12c6b", "url": "https://github.com/CMSgov/dpc-app/commit/319b554672372832b562d267704e6c338de12c6b", "message": "Fix home route", "committedDate": "2020-10-22T15:51:25Z", "type": "commit"}, {"oid": "02a80ad2afb09c584ad30c806602ea0a7f361133", "url": "https://github.com/CMSgov/dpc-app/commit/02a80ad2afb09c584ad30c806602ea0a7f361133", "message": "Fix home route", "committedDate": "2020-10-22T16:05:59Z", "type": "commit"}, {"oid": "92e0f75b54222d84c919961e76e53b594ff50a38", "url": "https://github.com/CMSgov/dpc-app/commit/92e0f75b54222d84c919961e76e53b594ff50a38", "message": "STATIC SITE URL default set", "committedDate": "2020-10-23T13:45:19Z", "type": "commit"}, {"oid": "380c82c5bb6cae1ff1d019812731593f373d4576", "url": "https://github.com/CMSgov/dpc-app/commit/380c82c5bb6cae1ff1d019812731593f373d4576", "message": "Fixing merge conflicts", "committedDate": "2021-02-17T20:27:05Z", "type": "commit"}, {"oid": "acfe087d7dfcec40cda932e8fdb2f4158f22615a", "url": "https://github.com/CMSgov/dpc-app/commit/acfe087d7dfcec40cda932e8fdb2f4158f22615a", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2021-02-17T20:27:25Z", "type": "commit"}, {"oid": "f46bc4663337ca226a32772b9c132fe1b492da69", "url": "https://github.com/CMSgov/dpc-app/commit/f46bc4663337ca226a32772b9c132fe1b492da69", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2021-02-22T14:34:00Z", "type": "commit"}, {"oid": "8ec507bd5d14bc4c427b1333fe8024715f9ff4a6", "url": "https://github.com/CMSgov/dpc-app/commit/8ec507bd5d14bc4c427b1333fe8024715f9ff4a6", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2021-02-23T16:56:58Z", "type": "commit"}, {"oid": "e2f8578d5389268d7a854f30639c58aac54e0379", "url": "https://github.com/CMSgov/dpc-app/commit/e2f8578d5389268d7a854f30639c58aac54e0379", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2021-02-23T17:39:21Z", "type": "commit"}, {"oid": "8ef9108a85706f6b3d96f8b156ba8c1c06bfa002", "url": "https://github.com/CMSgov/dpc-app/commit/8ef9108a85706f6b3d96f8b156ba8c1c06bfa002", "message": "Merge branch 'master' into nz/dpc-800-static-site-separate", "committedDate": "2021-03-02T20:50:14Z", "type": "commit"}]}