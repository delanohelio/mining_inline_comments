{"pr_number": 746, "pr_title": "DPC-34: _Since Support", "pr_createdAt": "2020-04-13T18:39:28Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/746", "timeline": [{"oid": "9cf0c5e81d41acfda4e4c83de21132d1a2115b89", "url": "https://github.com/CMSgov/dpc-app/commit/9cf0c5e81d41acfda4e4c83de21132d1a2115b89", "message": "Fix API config for dev, test, and prod-sbx", "committedDate": "2020-04-13T16:10:34Z", "type": "commit"}, {"oid": "15ddfdaec7d82c74b937027fb9ea8198f01489e0", "url": "https://github.com/CMSgov/dpc-app/commit/15ddfdaec7d82c74b937027fb9ea8198f01489e0", "message": "Revert \"Revert DPC-34 since\"\n\nThis reverts commit 9dd05ab323b79f9e8d8f94f63a5a31039d8490cf.", "committedDate": "2020-04-13T17:58:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY0MzgzNQ==", "url": "https://github.com/CMSgov/dpc-app/pull/746#discussion_r407643835", "bodyText": "Method createEmptyBatch has 6 arguments (exceeds 4 allowed). Consider refactoring.", "author": "codeclimate", "createdAt": "2020-04-13T18:40:34Z", "path": "dpc-queue/src/main/java/gov/cms/dpc/queue/JobQueueCommon.java", "diffHunk": "@@ -44,8 +49,25 @@ public UUID createJob(UUID orgID, String providerID, List<String> patients, List\n         return jobBatches.stream().map(JobQueueBatch::getJobID).findFirst().orElseThrow(() -> new JobQueueFailure(\"Unable to create job. No batches to submit.\"));\n     }\n \n-    protected JobQueueBatch createJobBatch(UUID jobID, UUID orgID, String providerID, List<String> patients, List<ResourceType> resourceTypes) {\n-        return new JobQueueBatch(jobID, orgID, providerID, patients, resourceTypes);\n+    protected JobQueueBatch createJobBatch(UUID jobID,\n+                                           UUID orgID,\n+                                           String providerID,\n+                                           List<String> patients,\n+                                           List<ResourceType> resourceTypes,\n+                                           OffsetDateTime since,\n+                                           OffsetDateTime transactionTime) {\n+        return new JobQueueBatch(jobID, orgID, providerID, patients, resourceTypes, since, transactionTime);\n+    }\n+\n+    protected List<JobQueueBatch> createEmptyBatch(UUID jobID,", "originalCommit": "15ddfdaec7d82c74b937027fb9ea8198f01489e0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIyMzI5OA==", "url": "https://github.com/CMSgov/dpc-app/pull/746#discussion_r410223298", "bodyText": "@RickHawesUSDS is there a good refactoring for this?", "author": "dhgreene", "createdAt": "2020-04-17T13:30:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY0MzgzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzY0NDk5Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/746#discussion_r407644996", "bodyText": "This section matches a similar section found in the dpc-aggregator.\n\n  \n    \n      dpc-app/dpc-aggregation/src/main/resources/dev.application.conf\n    \n    \n        Lines 16 to 23\n      in\n      49dc30e\n    \n    \n    \n    \n\n        \n          \n           bbclient { \n        \n\n        \n          \n             serverBaseUrl = ${BFD_URL} \n        \n\n        \n          \n            \n        \n\n        \n          \n             keyStore { \n        \n\n        \n          \n               location = ${BB_KEYSTORE_LOCATION} \n        \n\n        \n          \n               defaultPassword = ${BB_KEYSTORE_PASS} \n        \n\n        \n          \n             } \n        \n\n        \n          \n           }", "author": "RickHawesUSDS", "createdAt": "2020-04-13T18:42:46Z", "path": "dpc-api/src/main/resources/dev.application.conf", "diffHunk": "@@ -23,6 +23,16 @@ dpc.api {\n         applicationContextPath = \"/api\"\n     }\n \n+\n+    bbclient {\n+        serverBaseUrl = ${BFD_URL}\n+\n+        keyStore {\n+            location = ${BB_KEYSTORE_LOCATION}\n+            defaultPassword = ${BB_KEYSTORE_PASS}\n+        }\n+    }\n+\n     attributionURL = \"http://backend.dpc-dev.local:8080/v1/\"", "originalCommit": "9cf0c5e81d41acfda4e4c83de21132d1a2115b89", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQyNzMyMA==", "url": "https://github.com/CMSgov/dpc-app/pull/746#discussion_r408427320", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t\t\t\t\t\t\t\"// Status should be 204\",\n          \n          \n            \n            \t\t\t\t\t\t\t\t\t\"// Status should be 202\",\n          \n      \n    \n    \n  \n\nOr maybe just remove the comment; it's clear what the test is.", "author": "em1", "createdAt": "2020-04-14T20:51:17Z", "path": "src/test/EndToEndRequestTest.postman_collection.json", "diffHunk": "@@ -1219,6 +1219,146 @@\n \t\t\t\t\t\t\"description\": \"Request a subset of the EOB data to ensure range requests work correctly.\"\n \t\t\t\t\t},\n \t\t\t\t\t\"response\": []\n+\t\t\t\t},\n+\t\t\t\t{\n+\t\t\t\t\t\"name\": \"Try export with _since\",\n+\t\t\t\t\t\"event\": [\n+\t\t\t\t\t\t{\n+\t\t\t\t\t\t\t\"listen\": \"test\",\n+\t\t\t\t\t\t\t\"script\": {\n+\t\t\t\t\t\t\t\t\"id\": \"5497fa12-aefd-44c2-9254-2beb51c52e31\",\n+\t\t\t\t\t\t\t\t\"exec\": [\n+\t\t\t\t\t\t\t\t\t\"// Status should be 204\",", "originalCommit": "15ddfdaec7d82c74b937027fb9ea8198f01489e0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODg0Nzc3Ng==", "url": "https://github.com/CMSgov/dpc-app/pull/746#discussion_r408847776", "bodyText": "Good catch. There is a lot of 202 vs 204 confusion in the file. Pushed a fix.", "author": "RickHawesUSDS", "createdAt": "2020-04-15T13:38:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODQyNzMyMA=="}], "type": "inlineReview"}, {"oid": "634fa312e58c95fac1c29169b45a8fdfe60a131b", "url": "https://github.com/CMSgov/dpc-app/commit/634fa312e58c95fac1c29169b45a8fdfe60a131b", "message": "Fix 204 vs 202 confusion in postman descriptions", "committedDate": "2020-04-15T13:37:06Z", "type": "commit"}, {"oid": "ee708b15254842401e64d6bf4ca6914296aad84c", "url": "https://github.com/CMSgov/dpc-app/commit/ee708b15254842401e64d6bf4ca6914296aad84c", "message": "Merge branch 'master' into DPC-34-Since-Support", "committedDate": "2020-04-16T15:20:20Z", "type": "commit"}, {"oid": "26235fbe719d2a2298e2214f1ff51bede0e3bbca", "url": "https://github.com/CMSgov/dpc-app/commit/26235fbe719d2a2298e2214f1ff51bede0e3bbca", "message": "Merge branch 'master' into DPC-34-Since-Support", "committedDate": "2020-04-23T15:09:35Z", "type": "commit"}]}