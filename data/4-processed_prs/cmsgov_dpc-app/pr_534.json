{"pr_number": 534, "pr_title": "DPC-760: Add support for ECC keys", "pr_createdAt": "2020-01-13T21:23:02Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/534", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk4NzEyNg==", "url": "https://github.com/CMSgov/dpc-app/pull/534#discussion_r374987126", "bodyText": "Could these use the identifiers in BouncyCastle? For example SECObjectIdentifiers.secp384r1 for 1.3.132.0.34.", "author": "em1", "createdAt": "2020-02-04T23:42:29Z", "path": "dpc-api/src/main/java/gov/cms/dpc/api/auth/jwt/PublicKeyHandler.java", "diffHunk": "@@ -18,6 +20,13 @@\n \n public class PublicKeyHandler {\n \n+    static final ASN1ObjectIdentifier RSA_PARENT = new ASN1ObjectIdentifier(\"1.2.840.113549\");\n+    static final ASN1ObjectIdentifier ECC_KEY = new ASN1ObjectIdentifier(\"1.2.840.10045.2.1\");\n+    // ECC Curve names are defined here: https://tools.ietf.org/search/rfc4492#section-5.1.1\n+    // They're in two separate namespaces, certicom and ansi-x962\n+    static final ASN1ObjectIdentifier SECP256_KEY = new ASN1ObjectIdentifier(\"1.2.840.10045.3.1.7\");\n+    static final ASN1ObjectIdentifier SECP384_KEY = new ASN1ObjectIdentifier(\"1.3.132.0.34\");", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTI3OTM0MQ==", "url": "https://github.com/CMSgov/dpc-app/pull/534#discussion_r375279341", "bodyText": "Great find!", "author": "nickrobison-usds", "createdAt": "2020-02-05T14:16:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDk4NzEyNg=="}], "type": "inlineReview"}, {"oid": "e20e50f28699c97d32d3b747220118df3862db33", "url": "https://github.com/CMSgov/dpc-app/commit/e20e50f28699c97d32d3b747220118df3862db33", "message": "DPC-759: Add initial compliance checks for public keys\n\nWe now check that a given RSA key is at least 4096 bits long.", "committedDate": "2020-02-05T15:23:02Z", "type": "commit"}, {"oid": "99b5f934224cc45c8a2461ee73a5d1634a8478ce", "url": "https://github.com/CMSgov/dpc-app/commit/99b5f934224cc45c8a2461ee73a5d1634a8478ce", "message": "DPC-760: Initial support for flowing ECC keys through the auth handler tests.\n\nUpdated hardcoded RSA values to check the algorithm OID before dispatching to either RSA or ECC key handling.", "committedDate": "2020-02-05T15:23:02Z", "type": "commit"}, {"oid": "815923488d3a087a23c71398926e181e3314fe46", "url": "https://github.com/CMSgov/dpc-app/commit/815923488d3a087a23c71398926e181e3314fe46", "message": "DPC-759: Added checks to ECC keys\n\nWe now look at the Parameter OID to ensure we have one of two ECC curves that we currently support.", "committedDate": "2020-02-05T15:23:02Z", "type": "commit"}, {"oid": "5b8aea53707a105f803d765668a0ff361bfb9f31", "url": "https://github.com/CMSgov/dpc-app/commit/5b8aea53707a105f803d765668a0ff361bfb9f31", "message": "DPC-759: JWT Unit tests are now parameterized across key types\n\nWe test every operation with both RSA and ECC keys.", "committedDate": "2020-02-05T15:27:44Z", "type": "commit"}, {"oid": "cd6d721833ed1e51201b16eafa0c5df8cf4bca90", "url": "https://github.com/CMSgov/dpc-app/commit/cd6d721833ed1e51201b16eafa0c5df8cf4bca90", "message": "squash", "committedDate": "2020-02-05T15:27:44Z", "type": "commit"}, {"oid": "44e7317a3d46f95188503a56c0a004c6c89a45c8", "url": "https://github.com/CMSgov/dpc-app/commit/44e7317a3d46f95188503a56c0a004c6c89a45c8", "message": "DPC-760: Updated secure test helper to use the correct signing algorithm for ECC keys", "committedDate": "2020-02-05T15:28:38Z", "type": "commit"}, {"oid": "495515177e39c37f437255de3d8e5f71e5f612f8", "url": "https://github.com/CMSgov/dpc-app/commit/495515177e39c37f437255de3d8e5f71e5f612f8", "message": "DPC-760: Update failing integration tests\n\nMissed a few places where the tests weren't passing.\nMoved the signing algorithm helper into the APITestHelpers class.", "committedDate": "2020-02-05T15:28:38Z", "type": "commit"}, {"oid": "ef100d191b74091c1792c429d39b849069a1099a", "url": "https://github.com/CMSgov/dpc-app/commit/ef100d191b74091c1792c429d39b849069a1099a", "message": "DPC-760: Update documentation with new key requirements.\n\nClarify that we now support ECC keys and give the required curves.", "committedDate": "2020-02-05T15:28:38Z", "type": "commit"}, {"oid": "003d3fed7b8bc04d8156cf419147c21803cd4564", "url": "https://github.com/CMSgov/dpc-app/commit/003d3fed7b8bc04d8156cf419147c21803cd4564", "message": "DPC-760: Address code review comments.", "committedDate": "2020-02-05T15:28:38Z", "type": "commit"}, {"oid": "a6baddfaea9355d15fed85ade4426c8faf41c97c", "url": "https://github.com/CMSgov/dpc-app/commit/a6baddfaea9355d15fed85ade4426c8faf41c97c", "message": "DPC-760: Migrate to BouncyCastle SEC identifiers\n\nRather than creating our own OID values, we should use the ones provided by BounceyCastle, which is a great find!", "committedDate": "2020-02-05T15:28:38Z", "type": "commit"}, {"oid": "a6baddfaea9355d15fed85ade4426c8faf41c97c", "url": "https://github.com/CMSgov/dpc-app/commit/a6baddfaea9355d15fed85ade4426c8faf41c97c", "message": "DPC-760: Migrate to BouncyCastle SEC identifiers\n\nRather than creating our own OID values, we should use the ones provided by BounceyCastle, which is a great find!", "committedDate": "2020-02-05T15:28:38Z", "type": "forcePushed"}, {"oid": "e9b73f3eff3b401ae7581e838bfa6504c0ef7bef", "url": "https://github.com/CMSgov/dpc-app/commit/e9b73f3eff3b401ae7581e838bfa6504c0ef7bef", "message": "DPC-760: Updated JWTUnit tests after merge.\n\nUpdated the JWTUnitTests file to account for changes that happened after the PR was opened.\n\nFixed an issue where the tests were always using an ECC key for checking the signing, we now generate a fresh one on each test invocation.", "committedDate": "2020-02-05T17:11:00Z", "type": "commit"}, {"oid": "e354eba5feedabe00023c4b0cb06a762b9877e2a", "url": "https://github.com/CMSgov/dpc-app/commit/e354eba5feedabe00023c4b0cb06a762b9877e2a", "message": "DPC-760: Use the correct enum value for the ECC curve OID.", "committedDate": "2020-02-05T19:11:30Z", "type": "commit"}, {"oid": "760b96808103e59b9f1c19383d8f224ce8019bbe", "url": "https://github.com/CMSgov/dpc-app/commit/760b96808103e59b9f1c19383d8f224ce8019bbe", "message": "Merge branch 'master' into nickrobison/DPC-760-ecc-keys", "committedDate": "2020-02-28T14:56:14Z", "type": "commit"}]}