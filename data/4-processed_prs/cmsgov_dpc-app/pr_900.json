{"pr_number": 900, "pr_title": "DPC-505: Remove sandbox_id in rails app", "pr_createdAt": "2020-07-09T18:38:27Z", "pr_url": "https://github.com/CMSgov/dpc-app/pull/900", "timeline": [{"oid": "443d933dab3e74b93ec94c88fa2a885af4469894", "url": "https://github.com/CMSgov/dpc-app/commit/443d933dab3e74b93ec94c88fa2a885af4469894", "message": "Init", "committedDate": "2020-07-09T16:22:30Z", "type": "commit"}, {"oid": "0a41c81e4b184b8bc8a20b8ae98ec44698748f19", "url": "https://github.com/CMSgov/dpc-app/commit/0a41c81e4b184b8bc8a20b8ae98ec44698748f19", "message": "Removed sandbox_id methods", "committedDate": "2020-07-09T16:43:15Z", "type": "commit"}, {"oid": "ce25229d59128c7babf1ecfedbfef940978a95fa", "url": "https://github.com/CMSgov/dpc-app/commit/ce25229d59128c7babf1ecfedbfef940978a95fa", "message": "rake tasks", "committedDate": "2020-07-09T16:43:32Z", "type": "commit"}, {"oid": "9cad794b7aa4f6272598785e7f2482297ef68cb4", "url": "https://github.com/CMSgov/dpc-app/commit/9cad794b7aa4f6272598785e7f2482297ef68cb4", "message": "Remove external identifier from spec tests", "committedDate": "2020-07-09T16:57:47Z", "type": "commit"}, {"oid": "9ec33a36a5e6cd1590821a098a8aa330b94d5200", "url": "https://github.com/CMSgov/dpc-app/commit/9ec33a36a5e6cd1590821a098a8aa330b94d5200", "message": "spec test fix", "committedDate": "2020-07-09T17:44:32Z", "type": "commit"}, {"oid": "f0c0c17da6748c78edd03634990df22e5aff042a", "url": "https://github.com/CMSgov/dpc-app/commit/f0c0c17da6748c78edd03634990df22e5aff042a", "message": "spec tests fixed", "committedDate": "2020-07-09T18:01:34Z", "type": "commit"}, {"oid": "d81068f48a8ea73ed871422a4228b9a2a398ae20", "url": "https://github.com/CMSgov/dpc-app/commit/d81068f48a8ea73ed871422a4228b9a2a398ae20", "message": "remove sandbox_id column", "committedDate": "2020-07-09T18:16:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r453068488", "bodyText": "Can you briefly explain how we plan to run this migration in our AWS environments, especially prod-sbx and prod?", "author": "dhgreene", "createdAt": "2020-07-10T20:44:13Z", "path": "dpc-web/db/migrate/20200709181216_remove_sandbox_id_from_organizations.rb", "diffHunk": "@@ -0,0 +1,5 @@\n+class RemoveSandboxIdFromOrganizations < ActiveRecord::Migration[6.0]\n+  def change\n+    remove_column :organizations, :sandbox_id", "originalCommit": "d81068f48a8ea73ed871422a4228b9a2a398ae20", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4MTU0Mw==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r455181543", "bodyText": "I think I know what your asking. Migrations are run automatically in deployment. prod should not be an issue since there shouldn't be any sandbox_ids in that database.\nAs for prod-sbx, maybe we should merge the rake command, populate that branch's npi's with fake npi's and then merge the drop column.", "author": "Sun-Mountain", "createdAt": "2020-07-15T16:34:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTE4NjExNA==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r455186114", "bodyText": "Attempting to upload to dev to test it out but something's weird with the deploy which seems to be a github incident issue?", "author": "Sun-Mountain", "createdAt": "2020-07-15T16:42:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAxNDE5MA==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456014190", "bodyText": "@dhgreene Successfully deployed to dev and was able to generate new fake npis in the same way we generated the sandbox_ids.", "author": "Sun-Mountain", "createdAt": "2020-07-16T19:15:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyMzk2NA==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456023964", "bodyText": "Great!\n\nAs for prod-sbx, maybe we should merge the rake command, populate that branch's npi's with fake npi's and then merge the drop column.\n\nGiven the current way we're deploying, that would take two PR's.", "author": "dhgreene", "createdAt": "2020-07-16T19:30:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjAyNzUyNQ==", "url": "https://github.com/CMSgov/dpc-app/pull/900#discussion_r456027525", "bodyText": "@dhgreene I can deploy the rake task to prod-sbx tomorrow to generate the npis (it won't affect anything that's currently in use). And then we can merge this PR in :)", "author": "Sun-Mountain", "createdAt": "2020-07-16T19:35:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA2ODQ4OA=="}], "type": "inlineReview"}, {"oid": "64224673f7f9673db9741c7c190e445045db5d23", "url": "https://github.com/CMSgov/dpc-app/commit/64224673f7f9673db9741c7c190e445045db5d23", "message": "Merge branch 'master' into nicole/dpc-505-sandbox-id", "committedDate": "2020-07-16T18:00:57Z", "type": "commit"}, {"oid": "2bd236298a8f50ded5298eb96a450e9db42d466c", "url": "https://github.com/CMSgov/dpc-app/commit/2bd236298a8f50ded5298eb96a450e9db42d466c", "message": "Merge branch 'master' into nicole/dpc-505-sandbox-id", "committedDate": "2020-07-16T19:44:47Z", "type": "commit"}]}