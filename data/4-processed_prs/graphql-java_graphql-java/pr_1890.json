{"pr_number": 1890, "pr_title": "allow directives on variable definitions", "pr_createdAt": "2020-05-04T16:41:17Z", "pr_url": "https://github.com/graphql-java/graphql-java/pull/1890", "timeline": [{"oid": "748c8c1019f0eea2815c95c24fc557c6f671c554", "url": "https://github.com/graphql-java/graphql-java/commit/748c8c1019f0eea2815c95c24fc557c6f671c554", "message": "allow_directives_on_variable_definitions", "committedDate": "2020-05-04T16:25:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTE3MA==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r426961170", "bodyText": "the formatting here is off a bit", "author": "andimarek", "createdAt": "2020-05-19T00:21:48Z", "path": "src/main/java/graphql/schema/GraphQLDirective.java", "diffHunk": "@@ -209,6 +224,7 @@ public Builder(GraphQLDirective existing) {\n             this.onOperation = existing.isOnOperation();\n             this.onFragment = existing.isOnFragment();\n             this.onField = existing.isOnField();\n+            this.onVariableDefinition=existing.isOnVariableDefinition();", "originalCommit": "748c8c1019f0eea2815c95c24fc557c6f671c554", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTQ2OA==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r426961468", "bodyText": "we should not add new constructors.", "author": "andimarek", "createdAt": "2020-05-19T00:22:54Z", "path": "src/main/java/graphql/schema/GraphQLDirective.java", "diffHunk": "@@ -51,8 +52,9 @@ public GraphQLDirective(String name,\n                             List<GraphQLArgument> arguments,\n                             boolean onOperation,\n                             boolean onFragment,\n-                            boolean onField) {\n-        this(name, description, locations, arguments, onOperation, onFragment, onField, null);\n+                            boolean onField,\n+                            boolean onVariableDefinition) {\n+        this(name, description, locations, arguments, onOperation, onFragment, onField,onVariableDefinition,null);", "originalCommit": "748c8c1019f0eea2815c95c24fc557c6f671c554", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyMjcwMg==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r427522702", "bodyText": "that is not a new constructor, but added new field(onVariableDefinition) in constructor", "author": "dugenkui03", "createdAt": "2020-05-19T18:45:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTQ2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTY0Mg==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r426961642", "bodyText": "we should not add any new constructors, but force new code to use the builder", "author": "andimarek", "createdAt": "2020-05-19T00:23:32Z", "path": "src/main/java/graphql/language/VariableDefinition.java", "diffHunk": "@@ -50,7 +53,22 @@ protected VariableDefinition(String name,\n     public VariableDefinition(String name,\n                               Type type,\n                               Value defaultValue) {\n-        this(name, type, defaultValue, null, new ArrayList<>(), IgnoredChars.EMPTY, emptyMap());\n+        this(name, type, defaultValue, null, null, new ArrayList<>(), IgnoredChars.EMPTY, emptyMap());\n+    }\n+\n+    /**\n+     * alternative to using a Builder for convenience\n+     *\n+     * @param name         of the variable\n+     * @param type         of the variable\n+     * @param defaultValue of the variable\n+     * @param directives   of the variable\n+     */\n+    public VariableDefinition(String name,", "originalCommit": "748c8c1019f0eea2815c95c24fc557c6f671c554", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyNDIxNg==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r427524216", "bodyText": "thanks for you advice, I have delete this new constructor.", "author": "dugenkui03", "createdAt": "2020-05-19T18:48:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTY0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTkwMw==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r426961903", "bodyText": "lets not add new methods which are immediately deprecated.", "author": "andimarek", "createdAt": "2020-05-19T00:24:35Z", "path": "src/main/java/graphql/schema/GraphQLDirective.java", "diffHunk": "@@ -342,6 +358,19 @@ public Builder onField(boolean onField) {\n             return this;\n         }\n \n+        /**\n+         * @param onVariableDefinition onVariableDefinition\n+         *\n+         * @return this builder\n+         *\n+         * @deprecated Use {@code graphql.schema.GraphQLDirective.Builder#validLocations(DirectiveLocation...)}", "originalCommit": "748c8c1019f0eea2815c95c24fc557c6f671c554", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzUyNTQ4NQ==", "url": "https://github.com/graphql-java/graphql-java/pull/1890#discussion_r427525485", "bodyText": "copy that.", "author": "dugenkui03", "createdAt": "2020-05-19T18:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjk2MTkwMw=="}], "type": "inlineReview"}, {"oid": "d1cc0d1fa825bcc1c123e795aa1070790d4ee362", "url": "https://github.com/graphql-java/graphql-java/commit/d1cc0d1fa825bcc1c123e795aa1070790d4ee362", "message": "formatting code and remove deprecated method", "committedDate": "2020-05-19T18:38:52Z", "type": "commit"}, {"oid": "0171c8fb988d3346ece3d1c1a563b72f19ac6cc5", "url": "https://github.com/graphql-java/graphql-java/commit/0171c8fb988d3346ece3d1c1a563b72f19ac6cc5", "message": "remove not needed boolean onVariableDefinition", "committedDate": "2020-05-19T22:59:10Z", "type": "commit"}]}