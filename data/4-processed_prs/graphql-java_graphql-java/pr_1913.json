{"pr_number": 1913, "pr_title": "Make the graphql-java Asserts truly lazy and hence more efficient", "pr_createdAt": "2020-05-21T03:29:58Z", "pr_url": "https://github.com/graphql-java/graphql-java/pull/1913", "timeline": [{"oid": "8d06b5058830bfc16cd068d580181f8ffb7a8119", "url": "https://github.com/graphql-java/graphql-java/commit/8d06b5058830bfc16cd068d580181f8ffb7a8119", "message": " Add lazy assertTrue function for performance improvement", "committedDate": "2020-04-22T23:20:17Z", "type": "commit"}, {"oid": "c69e656dbd8fd810e8e6fcc5bbec9348cf47bdbc", "url": "https://github.com/graphql-java/graphql-java/commit/c69e656dbd8fd810e8e6fcc5bbec9348cf47bdbc", "message": "Merge branch 'lazyAssert' of https://github.com/klee97/graphql-java into klee97-lazyAssert", "committedDate": "2020-05-21T00:35:45Z", "type": "commit"}, {"oid": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "url": "https://github.com/graphql-java/graphql-java/commit/f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "message": "This is a revamp of klee97's PR about lazy asserts.\n\nIt takes it much further and makes them ALL lazy in their message retrieval and encourages efficient asserts\nby not providing the string.format rope with which to hang yourself.\n\nWe now require that a supplier be provided to asserts that want messages to be thrown", "committedDate": "2020-05-21T03:25:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNjA1MA==", "url": "https://github.com/graphql-java/graphql-java/pull/1913#discussion_r428426050", "bodyText": "This is the KEY file changed and its test.\nThe others are all knock on effects", "author": "bbakerman", "createdAt": "2020-05-21T03:31:15Z", "path": "src/main/java/graphql/Assert.java", "diffHunk": "@@ -1,25 +1,26 @@\n package graphql;", "originalCommit": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNjEzNA==", "url": "https://github.com/graphql-java/graphql-java/pull/1913#discussion_r428426134", "bodyText": "The above was missing but present for assertTrue so I made it", "author": "bbakerman", "createdAt": "2020-05-21T03:31:40Z", "path": "src/main/java/graphql/Assert.java", "diffHunk": "@@ -83,11 +84,18 @@ public static void assertTrue(boolean condition) {\n         throw new AssertException(\"condition expected to be true\");\n     }\n \n-    public static void assertFalse(boolean condition, String format, Object... args) {\n+    public static void assertFalse(boolean condition, Supplier<String> msg) {\n         if (!condition) {\n             return;\n         }\n-        throw new AssertException(format(format, args));\n+        throw new AssertException(msg.get());\n+    }\n+\n+    public static void assertFalse(boolean condition) {\n+        if (!condition) {\n+            return;\n+        }\n+        throw new AssertException(\"condition expected to be false\");\n     }", "originalCommit": "f5b087b024d5c9d6884932e5a6ad8eb6b1238379", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ4MjE4OA==", "url": "https://github.com/graphql-java/graphql-java/pull/1913#discussion_r428482188", "bodyText": "assertShouldNeverHappen can be as slow as it likes - its ALWAYS going to assert.\nI mean we could make it a supplier based on consistency but....I thought its ok to leave it", "author": "bbakerman", "createdAt": "2020-05-21T07:05:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQyNjEzNA=="}], "type": "inlineReview"}, {"oid": "0d8cf32a32184720c634685888dfde9932069a55", "url": "https://github.com/graphql-java/graphql-java/commit/0d8cf32a32184720c634685888dfde9932069a55", "message": "Merge remote-tracking branch 'origin/master' into klee97-lazyAssert\n\n# Conflicts:\n#\tsrc/main/java/graphql/ExecutionInput.java", "committedDate": "2020-05-21T06:36:42Z", "type": "commit"}, {"oid": "d5359f4d19b524d1cd6cda66bc0f9c87aa60fec5", "url": "https://github.com/graphql-java/graphql-java/commit/d5359f4d19b524d1cd6cda66bc0f9c87aa60fec5", "message": "Fixed up asserts", "committedDate": "2020-05-21T07:09:20Z", "type": "commit"}]}