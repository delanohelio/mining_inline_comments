{"pr_number": 3111, "pr_title": "Add note about parallel reads from topics", "pr_createdAt": "2020-03-16T19:37:28Z", "pr_url": "https://github.com/trinodb/trino/pull/3111", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4NTYwNg==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393285606", "bodyText": "100.000\n\nmight be confusing in the US...", "author": "aalbu", "createdAt": "2020-03-16T20:15:32Z", "path": "presto-docs/src/main/sphinx/connector/kafka.rst", "diffHunk": "@@ -59,7 +63,7 @@ Property Name                   Description\n ``kafka.buffer-size``           Kafka read buffer size\n ``kafka.table-description-dir`` Directory containing topic description files\n ``kafka.hide-internal-columns`` Controls whether internal columns are part of the table schema or not\n-``kafka.messages-per-split``    Number of messages that will be processed by single Presto split\n+``kafka.messages-per-split``    Number of messages that are processed by each Presto split, defaults to 100.000, smaller numbers result in higher parallelization of the query processing", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMzMTI5OA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393331298", "bodyText": "what should I use then 100,000 ? or 100000 ?", "author": "mosabua", "createdAt": "2020-03-16T21:54:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4NTYwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzMzODQ0MA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393338440", "bodyText": "Updated to use same style as most other docs (100000)", "author": "mosabua", "createdAt": "2020-03-16T22:13:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI4NTYwNg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5NTY3MQ==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393495671", "bodyText": "to achieve a significant performance gain\n\nTo me that could be written in pull request. Like \"this change was introduced to to achieve a significant performance gain\". In general documentation I think it should be only: \"The connector reads message data from Kafka topics in parallel across workers\". The reason is obvious.", "author": "kokosing", "createdAt": "2020-03-17T07:53:34Z", "path": "presto-docs/src/main/sphinx/connector/kafka.rst", "diffHunk": "@@ -11,13 +11,17 @@ Overview\n --------\n \n This connector allows the use of `Apache Kafka <https://kafka.apache.org/>`_\n-topics as tables in Presto.\n-Each message is presented as a row in Presto.\n+topics as tables in Presto. Each message is presented as a row in Presto.\n \n Topics can be live. Rows appear as data arrives, and disappear as\n segments get dropped. This can result in strange behavior if accessing the\n same table multiple times in a single query (e.g., performing a self join).\n \n+The connector reads message data from Kafka topics in parallel across workers to\n+achieve a significant performance gain. The size of data sets for this", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk5MDY1OQ==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393990659", "bodyText": "I don't think the reason is obvious to a normal user at all and I think it is important for beginner users to be told why they would want to use the connector at all including performance benefits.", "author": "mosabua", "createdAt": "2020-03-17T21:49:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5NTY3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393498228", "bodyText": "I am not sure if we should document defaults. It could change, causing docs to be out-of-date. This is general problem, but hardcoding values is like crossing the border to me.\n\n, smaller numbers result in higher parallelization of the query processing\n\nI would remove that. This sentence suggest that the best configuration is 1, while in reality it is a tread off (you don't mention the other force). My thought is that, it is not trivial, folks who understand that don't need a comment here, folks that don't understand this could be easily mislead.", "author": "kokosing", "createdAt": "2020-03-17T07:59:18Z", "path": "presto-docs/src/main/sphinx/connector/kafka.rst", "diffHunk": "@@ -59,7 +63,7 @@ Property Name                   Description\n ``kafka.buffer-size``           Kafka read buffer size\n ``kafka.table-description-dir`` Directory containing topic description files\n ``kafka.hide-internal-columns`` Controls whether internal columns are part of the table schema or not\n-``kafka.messages-per-split``    Number of messages that will be processed by single Presto split\n+``kafka.messages-per-split``    Number of messages that are processed by each Presto split, defaults to 100000, smaller numbers result in higher parallelization of the query processing", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzk5MDAwNA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r393990004", "bodyText": "We document defaults all over the place .. but I am happy to leave it out here and also leave out the complexity. The only problem then is if someone wants to tune .. how do they know what the start value is..  so I am torn. Wdyt?", "author": "mosabua", "createdAt": "2020-03-17T21:47:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI5NjQzMQ==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r394296431", "bodyText": "I don't know what we should do here. I just shared my concerns.", "author": "kokosing", "createdAt": "2020-03-18T12:04:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTExODQ3OA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r395118478", "bodyText": "How about just documenting the value but remove the \"smaller numbers...\" section since it too simplistic?", "author": "mosabua", "createdAt": "2020-03-19T15:34:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzUxOTQwMQ==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r397519401", "bodyText": "@kokosing  @electrum ?", "author": "mosabua", "createdAt": "2020-03-24T23:19:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Nzc2NzQ5MA==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r397767490", "bodyText": "Sounds good to me.", "author": "kokosing", "createdAt": "2020-03-25T10:58:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzkzODY0NQ==", "url": "https://github.com/trinodb/trino/pull/3111#discussion_r397938645", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-03-25T15:19:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzQ5ODIyOA=="}], "type": "inlineReview"}, {"oid": "42e171bc44dc26c62513f062b27806ebaa992ccf", "url": "https://github.com/trinodb/trino/commit/42e171bc44dc26c62513f062b27806ebaa992ccf", "message": "Add note about parallel reads from topics", "committedDate": "2020-03-25T15:18:54Z", "type": "commit"}, {"oid": "42e171bc44dc26c62513f062b27806ebaa992ccf", "url": "https://github.com/trinodb/trino/commit/42e171bc44dc26c62513f062b27806ebaa992ccf", "message": "Add note about parallel reads from topics", "committedDate": "2020-03-25T15:18:54Z", "type": "forcePushed"}]}