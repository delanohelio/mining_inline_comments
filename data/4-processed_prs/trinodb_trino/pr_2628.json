{"pr_number": 2628, "pr_title": "Add documentation for SQL LIKE", "pr_createdAt": "2020-01-25T02:31:00Z", "pr_url": "https://github.com/trinodb/trino/pull/2628", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkyMjIyNQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370922225", "bodyText": "NOT LIKE", "author": "tooptoop4", "createdAt": "2020-01-25T08:43:58Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+You can negate the result by adding ``NOT``, and get EUROPE and MIDDLE EAST::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTIyMQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025221", "bodyText": "fixed", "author": "mosabua", "createdAt": "2020-01-28T19:59:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkyMjIyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0MTMwNQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370941305", "bodyText": "How about: \u201cThe following query ... and produces ...\u201d?", "author": "martint", "createdAt": "2020-01-25T16:08:35Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+You can negate the result by adding ``NOT``, and get EUROPE and MIDDLE EAST::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+If you only have one specific character to match, you can use the ``_`` symbol\n+for each character. The following query uses two underscores and you receive", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTUzMQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025531", "bodyText": "done", "author": "mosabua", "createdAt": "2020-01-28T20:00:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0MTMwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjQyNw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370946427", "bodyText": "Move this to the bottom, since it's specific to strings, whereas the other operators are generic. Also add a link to this in the operators section of the String Functions page.", "author": "electrum", "createdAt": "2020-01-25T17:52:14Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyMTI1MQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372021251", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-01-28T19:51:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjUzOQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370946539", "bodyText": "Change this to runnable example, like the others on this page:\nSELECT 'abc' LIKE '%b';", "author": "electrum", "createdAt": "2020-01-25T17:53:59Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyMTYwNA==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372021604", "bodyText": "This is the syntax overall. The rest are now runnable without more docs.", "author": "mosabua", "createdAt": "2020-01-28T19:52:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjUzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjIyODMzNw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372228337", "bodyText": "This is an example, not syntax, since LIKE can be used in any expression context. Remove WHERE here and in the description above to make it syntax.", "author": "electrum", "createdAt": "2020-01-29T07:40:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjUzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQ4ODI5OA==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372488298", "bodyText": "Updated", "author": "mosabua", "createdAt": "2020-01-29T16:25:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjUzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjU2NA==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370946564", "bodyText": "Remove the catalog and schema, since we don't use those in other examples.", "author": "electrum", "createdAt": "2020-01-25T17:54:43Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTE3NQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025175", "bodyText": "rejigged", "author": "mosabua", "createdAt": "2020-01-28T19:59:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjU2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjcyOA==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370946728", "bodyText": "Remove comma after A", "author": "electrum", "createdAt": "2020-01-25T17:57:25Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTA3Nw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025077", "bodyText": "updated", "author": "mosabua", "createdAt": "2020-01-28T19:59:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjcyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjkyOQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370946929", "bodyText": "matches any single character\nmatches zero or more characters", "author": "electrum", "createdAt": "2020-01-25T18:01:21Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTEyMA==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025120", "bodyText": "updated", "author": "mosabua", "createdAt": "2020-01-28T19:59:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NjkyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzExMw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370947113", "bodyText": "There are only two metacharacters, so we can be specific:\nThe wildcard characters ``_`` and ``%`` must be escaped to allow you to match them as literals.", "author": "electrum", "createdAt": "2020-01-25T18:05:31Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+You can negate the result by adding ``NOT``, and get EUROPE and MIDDLE EAST::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+If you only have one specific character to match, you can use the ``_`` symbol\n+for each character. The following query uses two underscores and you receive\n+ASIA as result::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A__A';\n+\n+Some characters like ``_`` need to be escaped to allow you to match them. This", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAyNTc3Nw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372025777", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-01-28T20:00:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzExMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzE3MQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r370947171", "bodyText": "We should mention the escape character can also be escaped.\n\nTo match the escape character, escape it by preceding it with itself.", "author": "electrum", "createdAt": "2020-01-25T18:06:35Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -19,6 +19,41 @@ Operator Description\n ``!=``   Not equal (non-standard but popular syntax)\n ======== ===========\n \n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern in a\n+``WHERE`` condition::\n+\n+    ... WHERE column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` denotes matching any single character\n+- ``%`` denotes matching zero or more characters\n+\n+A query to find all regions starting with A, returns AFRICA, AMERICA and ASIA::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+You can negate the result by adding ``NOT``, and get EUROPE and MIDDLE EAST::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A%';\n+\n+If you only have one specific character to match, you can use the ``_`` symbol\n+for each character. The following query uses two underscores and you receive\n+ASIA as result::\n+\n+    SELECT name FROM tpch.tiny.region WHERE name LIKE 'A__A';\n+\n+Some characters like ``_`` need to be escaped to allow you to match them. This\n+can be achieved by specifying the ``ESCAPE`` character to use::\n+\n+    SELECT 'a_c' LIKE 'a\\_c' ESCAPE '\\';\n+", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjAzMTMzMQ==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r372031331", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-01-28T20:12:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk0NzE3MQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxODM5Ng==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r373418396", "bodyText": "Inconsistent comma placement", "author": "martint", "createdAt": "2020-01-31T10:44:54Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -168,3 +170,47 @@ Expression              Meaning\n ====================    ===========\n \n ``ANY`` and ``SOME`` have the same meaning and can be used interchangeably.\n+\n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern::\n+\n+    ... column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` matches any single character\n+- ``%`` matches zero or more characters\n+\n+Typically it is often used as a condition in ``WHERE`` statements. An example is\n+a query to find all continents starting with ``E``, which returns ``Europe``::\n+\n+    SELECT * FROM ( VALUES ('America') , ('Asia'), ('Africa'), ('Europe'), ('Australia') , ('Antarctica')) AS t (continent)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxODg1Mw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r373418853", "bodyText": "Also, the parentheses around the elements are not needed. You can just do:\nVALUES 'America', 'Asia', 'Africa', 'Europe', 'Australia', 'Antarctica'", "author": "martint", "createdAt": "2020-01-31T10:45:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQxODM5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzQyMDQ0Nw==", "url": "https://github.com/trinodb/trino/pull/2628#discussion_r373420447", "bodyText": "It's not clear how '''\\'' fits in the above example. Is that the search pattern? Or the value being searched on? Also, it appears to have unmatched (and too many?) quotes.", "author": "martint", "createdAt": "2020-01-31T10:49:54Z", "path": "presto-docs/src/main/sphinx/functions/comparison.rst", "diffHunk": "@@ -168,3 +170,47 @@ Expression              Meaning\n ====================    ===========\n \n ``ANY`` and ``SOME`` have the same meaning and can be used interchangeably.\n+\n+.. _like_operator:\n+\n+Pattern Comparison: LIKE\n+------------------------\n+\n+The ``LIKE`` operator can be used to compare values with a pattern::\n+\n+    ... column [NOT] LIKE 'pattern' ESCAPE 'character';\n+\n+Matching characters is case sensitive, and the pattern supports two symbols for\n+matching:\n+\n+- ``_`` matches any single character\n+- ``%`` matches zero or more characters\n+\n+Typically it is often used as a condition in ``WHERE`` statements. An example is\n+a query to find all continents starting with ``E``, which returns ``Europe``::\n+\n+    SELECT * FROM ( VALUES ('America') , ('Asia'), ('Africa'), ('Europe'), ('Australia') , ('Antarctica')) AS t (continent)\n+    WHERE continent LIKE 'E%';\n+\n+You can negate the result by adding ``NOT``, and get all other continents, all\n+not starting with ``E``::\n+\n+    SELECT * FROM ( VALUES ('America') , ('Asia'), ('Africa'), ('Europe'), ('Australia') , ('Antarctica')) AS t (continent)\n+    WHERE continent NOT LIKE 'E%';\n+\n+If you only have one specific character to match, you can use the ``_`` symbol\n+for each character. The following query uses two underscores and produces only\n+``Asia`` as result::\n+\n+    SELECT * FROM ( VALUES ('America') , ('Asia'), ('Africa'), ('Europe'), ('Australia') , ('Antarctica')) AS t (continent)\n+    WHERE continent LIKE 'A__A';\n+\n+The wildcard characters ``_`` and ``%`` must be escaped to allow you to match\n+them as literals. This can be achieved by specifying the ``ESCAPE`` character to\n+use::\n+\n+    SELECT 'South_America' LIKE 'South\\_America' ESCAPE '\\';\n+\n+The above query returns ``true`` since the escaped underscore symbol matches. If\n+you need to match the used escape character as well, you can escape it. In the\n+above example you can use ``\\\\`` to match for '''\\''.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7ace3c57ca6a6193586da9538c5db8474272635f", "url": "https://github.com/trinodb/trino/commit/7ace3c57ca6a6193586da9538c5db8474272635f", "message": "Add documentation for SQL LIKE", "committedDate": "2020-01-31T16:03:40Z", "type": "commit"}, {"oid": "7ace3c57ca6a6193586da9538c5db8474272635f", "url": "https://github.com/trinodb/trino/commit/7ace3c57ca6a6193586da9538c5db8474272635f", "message": "Add documentation for SQL LIKE", "committedDate": "2020-01-31T16:03:40Z", "type": "forcePushed"}]}