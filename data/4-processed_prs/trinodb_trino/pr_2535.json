{"pr_number": 2535, "pr_title": "Extend ST_Points to support major Well-Known spatial objects", "pr_createdAt": "2020-01-17T06:19:37Z", "pr_url": "https://github.com/trinodb/trino/pull/2535", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMTA5Ng==", "url": "https://github.com/trinodb/trino/pull/2535#discussion_r368001096", "bodyText": "We generally place arguments either all on the same line or all in separate lines. In this case, I'd put all the enum values on the same line.\nAlso, let's make it a private static final constant to avoid creating the enum set in every call.", "author": "martint", "createdAt": "2020-01-17T15:43:35Z", "path": "presto-geospatial/src/main/java/io/prestosql/plugin/geospatial/GeoFunctions.java", "diffHunk": "@@ -1044,24 +1048,47 @@ public static Slice stEndPoint(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n     }\n \n     @SqlNullable\n-    @Description(\"Returns an array of points in a linestring\")\n+    @Description(\"Returns an array of points in a geometry\")\n     @ScalarFunction(\"ST_Points\")\n     @SqlType(\"array(\" + GEOMETRY_TYPE_NAME + \")\")\n     public static Block stPoints(@SqlType(GEOMETRY_TYPE_NAME) Slice input)\n     {\n-        OGCGeometry geometry = deserialize(input);\n-        validateType(\"ST_Points\", geometry, EnumSet.of(LINE_STRING));\n+        Geometry geometry = JtsGeometrySerde.deserialize(input);\n+        validateType(\"ST_Points\", geometry, EnumSet.of(LINE_STRING, POLYGON, POINT, MULTI_POINT,", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODIwNzkzMQ==", "url": "https://github.com/trinodb/trino/pull/2535#discussion_r368207931", "bodyText": "Thanks @martint for your review. I have made the changes based on your comments.", "author": "uprush", "createdAt": "2020-01-18T05:34:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODAwMTA5Ng=="}], "type": "inlineReview"}, {"oid": "e63f515d74a2418c84dd949c52224bf7b0f8b334", "url": "https://github.com/trinodb/trino/commit/e63f515d74a2418c84dd949c52224bf7b0f8b334", "message": "Extend ST_Points to support major Well-Known spatial objects\n\nExtend ST_Points to support POINT, LINESTRING, POLYGON, MULTIPOINT,\nMULTILINESTRING, MULTIPOLYGON and GEOMETRYCOLLECTION.", "committedDate": "2020-01-18T05:15:32Z", "type": "commit"}, {"oid": "e63f515d74a2418c84dd949c52224bf7b0f8b334", "url": "https://github.com/trinodb/trino/commit/e63f515d74a2418c84dd949c52224bf7b0f8b334", "message": "Extend ST_Points to support major Well-Known spatial objects\n\nExtend ST_Points to support POINT, LINESTRING, POLYGON, MULTIPOINT,\nMULTILINESTRING, MULTIPOLYGON and GEOMETRYCOLLECTION.", "committedDate": "2020-01-18T05:15:32Z", "type": "forcePushed"}]}