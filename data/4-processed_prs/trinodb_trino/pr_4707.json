{"pr_number": 4707, "pr_title": "close kudu scanner as the API doc suggest", "pr_createdAt": "2020-08-06T03:01:47Z", "pr_url": "https://github.com/trinodb/trino/pull/4707", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMDYyNQ==", "url": "https://github.com/trinodb/trino/pull/4707#discussion_r466230625", "bodyText": "It is a pity that scanner is not closeable.", "author": "kokosing", "createdAt": "2020-08-06T08:21:14Z", "path": "presto-kudu/src/main/java/io/prestosql/plugin/kudu/KuduRecordCursor.java", "diffHunk": "@@ -208,6 +208,12 @@ private PartialRow buildPrimaryKey()\n     @Override\n     public void close()\n     {\n+        try {\n+            scanner.close();", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTIzMQ==", "url": "https://github.com/trinodb/trino/pull/4707#discussion_r466231231", "bodyText": "How did you find this?", "author": "kokosing", "createdAt": "2020-08-06T08:22:18Z", "path": "presto-kudu/src/main/java/io/prestosql/plugin/kudu/KuduRecordCursor.java", "diffHunk": "@@ -208,6 +208,12 @@ private PartialRow buildPrimaryKey()\n     @Override\n     public void close()\n     {\n+        try {\n+            scanner.close();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Njc3NDA0MQ==", "url": "https://github.com/trinodb/trino/pull/4707#discussion_r466774041", "bodyText": "In Kudu tserver logs, there are a lot of scanner idle expiring. When query is canceled but kudu scan not finished, scanner would live in kudu tserver until expiring", "author": "lzeiming", "createdAt": "2020-08-07T01:40:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTIzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjIzMTk3OQ==", "url": "https://github.com/trinodb/trino/pull/4707#discussion_r466231979", "bodyText": "Can you please change the commit message to:\nClose kudu scanner", "author": "kokosing", "createdAt": "2020-08-06T08:23:36Z", "path": "presto-kudu/src/main/java/io/prestosql/plugin/kudu/KuduRecordCursor.java", "diffHunk": "@@ -208,6 +208,12 @@ private PartialRow buildPrimaryKey()\n     @Override", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "47d4f25c847c072add4a252fcf78f241d98bb983", "url": "https://github.com/trinodb/trino/commit/47d4f25c847c072add4a252fcf78f241d98bb983", "message": "Close kudu scanner", "committedDate": "2020-09-03T06:24:03Z", "type": "commit"}, {"oid": "47d4f25c847c072add4a252fcf78f241d98bb983", "url": "https://github.com/trinodb/trino/commit/47d4f25c847c072add4a252fcf78f241d98bb983", "message": "Close kudu scanner", "committedDate": "2020-09-03T06:24:03Z", "type": "forcePushed"}]}