{"pr_number": 3139, "pr_title": "Create group provider configuration for product tests", "pr_createdAt": "2020-03-18T16:16:45Z", "pr_url": "https://github.com/trinodb/trino/pull/3139", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwMDk5NQ==", "url": "https://github.com/trinodb/trino/pull/3139#discussion_r394500995", "bodyText": "please revert:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        implements ConnectorMetadata\n          \n          \n            \n                {\n          \n          \n            \n                }\n          \n          \n            \n                        implements ConnectorMetadata {}", "author": "findepi", "createdAt": "2020-03-18T16:59:28Z", "path": "presto-noop/src/main/java/io/prestosql/plugin/noop/NoOpPlugin.java", "diffHunk": "@@ -94,5 +103,23 @@ public ConnectorMetadata getMetadata(ConnectorTransactionHandle transactionHandl\n     }\n \n     private static class NoOpMetadata\n-            implements ConnectorMetadata {}\n+            implements ConnectorMetadata\n+    {\n+    }", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwMTYzOA==", "url": "https://github.com/trinodb/trino/pull/3139#discussion_r394501638", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return user -> Collections.emptySet();\n          \n          \n            \n                        checkArgument(config.isEmpty(), \"noop group provider does not accept configuration properties\");\n          \n          \n            \n                        return user -> Collections.emptySet();", "author": "findepi", "createdAt": "2020-03-18T17:00:21Z", "path": "presto-noop/src/main/java/io/prestosql/plugin/noop/NoOpPlugin.java", "diffHunk": "@@ -94,5 +103,23 @@ public ConnectorMetadata getMetadata(ConnectorTransactionHandle transactionHandl\n     }\n \n     private static class NoOpMetadata\n-            implements ConnectorMetadata {}\n+            implements ConnectorMetadata\n+    {\n+    }\n+\n+    private static class NoOpGroupProviderFactory\n+            implements GroupProviderFactory\n+    {\n+        @Override\n+        public String getName()\n+        {\n+            return \"noop\";\n+        }\n+\n+        @Override\n+        public GroupProvider create(Map<String, String> config)\n+        {\n+            return user -> Collections.emptySet();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwNTQ3MQ==", "url": "https://github.com/trinodb/trino/pull/3139#discussion_r394505471", "bodyText": "actually:\nif (!config.isEmpty()) { ... -- we don't have guava\nand different wording:\n\"this group provider accepts no configuration properties\"\n\nsee #3140", "author": "findepi", "createdAt": "2020-03-18T17:06:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwMTYzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwMjA2NA==", "url": "https://github.com/trinodb/trino/pull/3139#discussion_r394502064", "bodyText": "this bind is redundant, remove\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        dockerContainer.withFileSystemBind(\n          \n          \n            \n                                dockerFiles.getDockerFilesHostPath(getGroupProviderConfigPath()),\n          \n          \n            \n                                CONTAINER_PRESTO_ETC + \"/group-provider.properties\",\n          \n          \n            \n                                READ_ONLY);", "author": "findepi", "createdAt": "2020-03-18T17:00:59Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/environment/AbstractSinglenodeLdap.java", "diffHunk": "@@ -62,6 +62,11 @@ protected void extendEnvironment(Environment.Builder builder)\n                     CONTAINER_PRESTO_ETC + \"/password-authenticator.properties\",\n                     READ_ONLY);\n \n+            dockerContainer.withFileSystemBind(\n+                    dockerFiles.getDockerFilesHostPath(getGroupProviderConfigPath()),\n+                    CONTAINER_PRESTO_ETC + \"/group-provider.properties\",\n+                    READ_ONLY);", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDUwMjM5MA==", "url": "https://github.com/trinodb/trino/pull/3139#discussion_r394502390", "bodyText": "this is redundant\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                protected String getGroupProviderConfigPath()\n          \n          \n            \n                {\n          \n          \n            \n                    return \"conf/presto/etc/group-provider.properties\";\n          \n          \n            \n                }", "author": "findepi", "createdAt": "2020-03-18T17:01:30Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/env/environment/AbstractSinglenodeLdap.java", "diffHunk": "@@ -92,5 +97,10 @@ protected String getBaseImage()\n         return \"centos6-oj8-openldap\";\n     }\n \n+    protected String getGroupProviderConfigPath()\n+    {\n+        return \"conf/presto/etc/group-provider.properties\";\n+    }\n+", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "f17de6045574a750f45fec59eac6c5a66f17e38e", "url": "https://github.com/trinodb/trino/commit/f17de6045574a750f45fec59eac6c5a66f17e38e", "message": "Create group provider configuration for product tests\n\nIt allows extending with new group providers by mounting\ndifferent group-provider.properties files.", "committedDate": "2020-03-19T13:58:14Z", "type": "commit"}, {"oid": "f17de6045574a750f45fec59eac6c5a66f17e38e", "url": "https://github.com/trinodb/trino/commit/f17de6045574a750f45fec59eac6c5a66f17e38e", "message": "Create group provider configuration for product tests\n\nIt allows extending with new group providers by mounting\ndifferent group-provider.properties files.", "committedDate": "2020-03-19T13:58:14Z", "type": "forcePushed"}]}