{"pr_number": 4332, "pr_title": "Reduce number of runs of TestHiveTransactionalTable", "pr_createdAt": "2020-07-03T11:52:54Z", "pr_url": "https://github.com/trinodb/trino/pull/4332", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449546860", "bodyText": "I have doubts if mixing manual test definitions with data provider makes thinks more readable.\nI would go with inlining every thing if we need to inline some.", "author": "losipiuk", "createdAt": "2020-07-03T12:00:55Z", "path": "presto-product-tests/src/main/java/io/prestosql/tests/hive/TestHiveTransactionalTable.java", "diffHunk": "@@ -51,8 +51,33 @@\n public class TestHiveTransactionalTable\n         extends HiveProductTest\n {\n-    @Test(groups = {STORAGE_FORMATS, HIVE_TRANSACTIONAL}, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = 5 * 60 * 1000)\n+    private static final int TEST_TIMEOUT = 5 * 60 * 1000;\n+\n+    @Test(groups = STORAGE_FORMATS, timeOut = TEST_TIMEOUT)\n+    public void testAcidSmokeTest()\n+    {\n+        doTestReadFullAcid(true, BucketingType.BUCKETED_DEFAULT);\n+    }\n+\n+    @Test(groups = HIVE_TRANSACTIONAL, dataProvider = \"partitioningAndBucketingTypeDataProvider\", timeOut = TEST_TIMEOUT)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0NzM3NQ==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449547375", "bodyText": "i started with the approach you propose.\nHowever, since test has the timeout definition, it required to create test method\nfor each of the tested combinations. The code was less readable IMO, so i\nswitched back to the test provider.", "author": "findepi", "createdAt": "2020-07-03T12:02:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0OTI4OA==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449549288", "bodyText": "Would this be helpful?\nhttps://stackoverflow.com/a/30802395", "author": "losipiuk", "createdAt": "2020-07-03T12:07:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0OTcyOA==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449549728", "bodyText": "I'd prefer KISS", "author": "findepi", "createdAt": "2020-07-03T12:08:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU1NzY1OQ==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449557659", "bodyText": "Yeah - that would mean separate methods for me :)\nAnyway LGTM", "author": "losipiuk", "createdAt": "2020-07-03T12:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU2MTgzNg==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449561836", "bodyText": "I pushed a version without DP for testReadFullAcid, let me know if it reads better for you.\nthe DP is retained for the insert-only test still.", "author": "findepi", "createdAt": "2020-07-03T12:38:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU2NjU4MA==", "url": "https://github.com/trinodb/trino/pull/4332#discussion_r449566580", "bodyText": "Thanks. I like it more. It may that I am just old :)", "author": "losipiuk", "createdAt": "2020-07-03T12:49:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTU0Njg2MA=="}], "type": "inlineReview"}, {"oid": "a454d31856ff7f9bf5796456dd478a1c80649682", "url": "https://github.com/trinodb/trino/commit/a454d31856ff7f9bf5796456dd478a1c80649682", "message": "Reduce number of runs of TestHiveTransactionalTable\n\n- remove `TestHiveTransactionalTable` from `storage_formats` test group,\n  except for one variant\n- reduce test matrix, so that bucketing versions are tested once", "committedDate": "2020-07-03T13:12:28Z", "type": "commit"}, {"oid": "a454d31856ff7f9bf5796456dd478a1c80649682", "url": "https://github.com/trinodb/trino/commit/a454d31856ff7f9bf5796456dd478a1c80649682", "message": "Reduce number of runs of TestHiveTransactionalTable\n\n- remove `TestHiveTransactionalTable` from `storage_formats` test group,\n  except for one variant\n- reduce test matrix, so that bucketing versions are tested once", "committedDate": "2020-07-03T13:12:28Z", "type": "forcePushed"}]}