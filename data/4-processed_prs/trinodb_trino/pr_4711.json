{"pr_number": 4711, "pr_title": "Allow to override binding of Hdfs filesystem for caching", "pr_createdAt": "2020-08-06T11:35:49Z", "pr_url": "https://github.com/trinodb/trino/pull/4711", "timeline": [{"oid": "87257d161b202498f3591e2a9c3e24176ad0b55a", "url": "https://github.com/trinodb/trino/commit/87257d161b202498f3591e2a9c3e24176ad0b55a", "message": "Make RubixInitializer#updateRubixConfiguration private", "committedDate": "2020-08-06T11:08:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1MTE4OA==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466351188", "bodyText": "I don't see a reason for rename. I find it better the way it was.", "author": "kokosing", "createdAt": "2020-08-06T11:38:34Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/rubix/RubixHdfsInitializer.java", "diffHunk": "@@ -26,6 +26,6 @@\n @Retention(RUNTIME)\n @Target({FIELD, PARAMETER, METHOD})\n @Qualifier\n-public @interface ForRubix", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1NTcwNw==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466355707", "bodyText": "If the name is the same, it wouldn't be obvious what's the binding for. This is specifically for binding Hdfs file system. Other FS are still statically bound in io.prestosql.plugin.hive.rubix.RubixInitializer#updateRubixConfiguration", "author": "sopel39", "createdAt": "2020-08-06T11:48:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1MTE4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM2ODc2OQ==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466368769", "bodyText": "If the name is the same, it wouldn't be obvious what's the binding for\n\nThat is correct, but this is why binding requires the class and annotation. Class is the most important part while annotation is just auxiliary.", "author": "kokosing", "createdAt": "2020-08-06T12:15:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1MTE4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1MjAyNg==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466352026", "bodyText": "Update commit message to:\nDo not allow impersonation with DefaultRubixHdfsInitializer", "author": "kokosing", "createdAt": "2020-08-06T11:40:15Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/rubix/RubixModule.java", "diffHunk": "@@ -22,6 +22,7 @@\n import com.qubole.rubix.prestosql.CachingPrestoDistributedFileSystem;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1NjM0NA==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466356344", "bodyText": "The check was actually moved from io.prestosql.plugin.hive.authentication.HiveAuthenticationModule#setup. updated code", "author": "sopel39", "createdAt": "2020-08-06T11:49:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjM1MjAyNg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "9e3245807c2134fc99ebcbaaa1b895d0f6132c57", "url": "https://github.com/trinodb/trino/commit/9e3245807c2134fc99ebcbaaa1b895d0f6132c57", "message": "Allow to override binding of Hdfs filesystem for caching", "committedDate": "2020-08-06T14:00:52Z", "type": "commit"}, {"oid": "ee7d866701bd90b50a4cae0931b90948e17ca8eb", "url": "https://github.com/trinodb/trino/commit/ee7d866701bd90b50a4cae0931b90948e17ca8eb", "message": "Move impersonation check to DefaultRubixHdfsInitializer", "committedDate": "2020-08-06T14:00:53Z", "type": "commit"}, {"oid": "ee7d866701bd90b50a4cae0931b90948e17ca8eb", "url": "https://github.com/trinodb/trino/commit/ee7d866701bd90b50a4cae0931b90948e17ca8eb", "message": "Move impersonation check to DefaultRubixHdfsInitializer", "committedDate": "2020-08-06T14:00:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY0MjAwMQ==", "url": "https://github.com/trinodb/trino/pull/4711#discussion_r466642001", "bodyText": "One another idea is to use guice multibinder where you could have several independent ConfigurationInitializer.", "author": "kokosing", "createdAt": "2020-08-06T19:36:56Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/rubix/RubixHdfsInitializer.java", "diffHunk": "@@ -13,19 +13,9 @@\n  */\n package io.prestosql.plugin.hive.rubix;\n \n-import javax.inject.Qualifier;\n+import io.prestosql.plugin.hive.ConfigurationInitializer;\n \n-import java.lang.annotation.Retention;\n-import java.lang.annotation.Target;\n-\n-import static java.lang.annotation.ElementType.FIELD;\n-import static java.lang.annotation.ElementType.METHOD;\n-import static java.lang.annotation.ElementType.PARAMETER;\n-import static java.lang.annotation.RetentionPolicy.RUNTIME;\n-\n-@Retention(RUNTIME)\n-@Target({FIELD, PARAMETER, METHOD})\n-@Qualifier\n-public @interface ForRubix\n+public interface RubixHdfsInitializer", "originalCommit": "ee7d866701bd90b50a4cae0931b90948e17ca8eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}