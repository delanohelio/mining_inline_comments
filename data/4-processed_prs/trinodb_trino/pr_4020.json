{"pr_number": 4020, "pr_title": "Register query only when dynamic filtering is enabled", "pr_createdAt": "2020-06-13T11:00:01Z", "pr_url": "https://github.com/trinodb/trino/pull/4020", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTczMDQwMQ==", "url": "https://github.com/trinodb/trino/pull/4020#discussion_r439730401", "bodyText": "same for dynamicFilterService.removeQuery?", "author": "findepi", "createdAt": "2020-06-13T11:01:31Z", "path": "presto-main/src/main/java/io/prestosql/execution/SqlQueryExecution.java", "diffHunk": "@@ -182,7 +183,7 @@ private SqlQueryExecution(\n             this.analysis = analyze(preparedQuery, stateMachine, metadata, accessControl, sqlParser, queryExplainer, warningCollector);\n \n             stateMachine.addStateChangeListener(state -> {\n-                if (state == STARTING) {\n+                if (state == STARTING && isEnableDynamicFiltering(stateMachine.getSession())) {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "588eb5f4dc1b42c46c1e3a8ff568e5b698892082", "url": "https://github.com/trinodb/trino/commit/588eb5f4dc1b42c46c1e3a8ff568e5b698892082", "message": "Register query only when dynamic filtering is enabled", "committedDate": "2020-06-13T11:44:07Z", "type": "commit"}, {"oid": "588eb5f4dc1b42c46c1e3a8ff568e5b698892082", "url": "https://github.com/trinodb/trino/commit/588eb5f4dc1b42c46c1e3a8ff568e5b698892082", "message": "Register query only when dynamic filtering is enabled", "committedDate": "2020-06-13T11:44:07Z", "type": "forcePushed"}]}