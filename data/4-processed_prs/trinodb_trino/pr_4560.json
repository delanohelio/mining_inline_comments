{"pr_number": 4560, "pr_title": "Fix NPE when listing schemas in Phoenix connector", "pr_createdAt": "2020-07-24T03:10:19Z", "pr_url": "https://github.com/trinodb/trino/pull/4560", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk0ODUzMg==", "url": "https://github.com/trinodb/trino/pull/4560#discussion_r459948532", "bodyText": "Is there an issue it fixes? What is the case when null is passed here?", "author": "losipiuk", "createdAt": "2020-07-24T09:30:29Z", "path": "presto-base-jdbc/src/main/java/io/prestosql/plugin/jdbc/BaseJdbcClient.java", "diffHunk": "@@ -193,8 +195,11 @@ public BaseJdbcClient(\n         }\n     }\n \n-    protected boolean filterSchema(String schemaName)\n+    protected boolean filterSchema(@Nullable String schemaName)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk1MDc0NA==", "url": "https://github.com/trinodb/trino/pull/4560#discussion_r459950744", "bodyText": "@losipiuk Phoenix, see @lhofhansl 's https://prestosql.slack.com/archives/CP1MUNEUX/p1595558846274400\u00a0\n@ebyhr\nWhen a connector reports some tables with null schema, there are inaccessible\nin current base jdbc implementation. To properly handle them you'd need to change\nmore places besides this one. Thus, I would consider null schemas a concrete\nconnnector responsibility until we determine how frequent or how problematic this\napproach is.", "author": "findepi", "createdAt": "2020-07-24T09:35:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk0ODUzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk1NDE2OQ==", "url": "https://github.com/trinodb/trino/pull/4560#discussion_r459954169", "bodyText": "quoting @lhofhansl\n\nIn Phoenix tables do not need to have a schema. For that the connector adds a virtual \"default\" schema.\n\nthis means it's not OK to filter them out.\nperhaps the Phoenix code could provide firstNonNull(schemaname, \"default\") here.\nAlso, this probably means we should be able to test those null schemas.", "author": "findepi", "createdAt": "2020-07-24T09:43:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTk0ODUzMg=="}], "type": "inlineReview"}, {"oid": "fd47281b9a0897d70cd1c3a495ddde2537a8f2f1", "url": "https://github.com/trinodb/trino/commit/fd47281b9a0897d70cd1c3a495ddde2537a8f2f1", "message": "Fix NPE when listing schemas in Phoenix connector", "committedDate": "2020-07-24T11:30:50Z", "type": "commit"}, {"oid": "fd47281b9a0897d70cd1c3a495ddde2537a8f2f1", "url": "https://github.com/trinodb/trino/commit/fd47281b9a0897d70cd1c3a495ddde2537a8f2f1", "message": "Fix NPE when listing schemas in Phoenix connector", "committedDate": "2020-07-24T11:30:50Z", "type": "forcePushed"}]}