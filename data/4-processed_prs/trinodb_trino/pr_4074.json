{"pr_number": 4074, "pr_title": "Simplify suite-1 definition", "pr_createdAt": "2020-06-18T07:13:15Z", "pr_url": "https://github.com/trinodb/trino/pull/4074", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjEwODI3Mg==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442108272", "bodyText": "why they are marked as PROFILE_SPECIFIC_TESTS?", "author": "sopel39", "createdAt": "2020-06-18T09:53:13Z", "path": "presto-product-tests/src/main/java/io/prestosql/tests/cassandra/TestInsertIntoCassandraTable.java", "diffHunk": "@@ -57,7 +58,7 @@ public Requirement getRequirements(Configuration configuration)\n         return mutableTable(CASSANDRA_ALL_TYPES, CASSANDRA_INSERT_TABLE, CREATED);\n     }\n \n-    @Test(groups = CASSANDRA)\n+    @Test(groups = {CASSANDRA, PROFILE_SPECIFIC_TESTS})", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjEyNzM0Ng==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442127346", "bodyText": "because they are specific to specific environment.\nfor example (before my changes):\n$ ( cd presto-product-tests/src/main/java/io/prestosql/tests/sqlserver; git grep PROFILE_SPECIFIC_TESTS ; )\nTestInsert.java:import static io.prestosql.tests.TestGroups.PROFILE_SPECIFIC_TESTS;\nTestInsert.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestInsert.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestInsert.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestInvalidSelect.java:import static io.prestosql.tests.TestGroups.PROFILE_SPECIFIC_TESTS;\nTestInvalidSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestInvalidSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestInvalidSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestSelect.java:import static io.prestosql.tests.TestGroups.PROFILE_SPECIFIC_TESTS;\nTestSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})\nTestSelect.java:    @Test(groups = {SQL_SERVER, PROFILE_SPECIFIC_TESTS})", "author": "findepi", "createdAt": "2020-06-18T10:27:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjEwODI3Mg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NjA5NA==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442166094", "bodyText": "I would keep quarantine", "author": "kokosing", "createdAt": "2020-06-18T11:46:41Z", "path": "presto-product-tests/bin/product-tests-suite-1.sh", "diffHunk": "@@ -10,7 +10,7 @@ suite_exit_code=0\n presto-product-tests-launcher/bin/run-launcher test run \\\n     --environment multinode \\\n     -- \\\n-    -x quarantine,big_query,storage_formats,profile_specific_tests,tpcds,cassandra,mysql,postgresql,kafka,hive_compression,\"${DISTRO_SKIP_GROUP}\" \\", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3NTYzMg==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442175632", "bodyText": "i thought about that. Note that quarantine was plugged in suite-1n only, and not in the others suites.\nSo if you wanted to quarantine some other test, you still need to do a modification of a suite.\nLet's drop it now, and readd (where necessary) later, if needed.", "author": "findepi", "createdAt": "2020-06-18T12:05:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NjA5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NjM1Nw==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442166357", "bodyText": "this groups were used in convention tests, maybe you want to remove them from there as well.", "author": "kokosing", "createdAt": "2020-06-18T11:47:12Z", "path": "presto-product-tests/src/main/java/io/prestosql/tests/TestGroups.java", "diffHunk": "@@ -33,17 +32,7 @@\n     public static final String QUERY_ENGINE = \"qe\";\n     public static final String COMPARISON = \"comparison\";\n     public static final String LOGICAL = \"logical\";\n-    public static final String SET_OPERATION = \"set_operation\";\n     public static final String JSON_FUNCTIONS = \"json_functions\";\n-    public static final String URL_FUNCTIONS = \"url_functions\";\n-    public static final String ARRAY_FUNCTIONS = \"array_functions\";\n-    public static final String BINARY_FUNCTIONS = \"binary_functions\";\n-    public static final String CONVERSION_FUNCTIONS = \"conversion_functions\";\n-    public static final String HOROLOGY_FUNCTIONS = \"horology_functions\";\n-    public static final String MAP_FUNCTIONS = \"map_functions\";\n-    public static final String REGEX_FUNCTIONS = \"regex_functions\";\n-    public static final String STRING_FUNCTIONS = \"string_functions\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE3NjcyOA==", "url": "https://github.com/trinodb/trino/pull/4074#discussion_r442176728", "bodyText": "Indeed. It's a mess. Some test convention tests' groups are not defined here (eg postgresql, an important example, as it's used to select tests for singlenode-postgresql env).\ni remove these here to clear annoying compiler warning mostly. I don't think it's worthy keeping them, but if you see a value in this, I can restore them here.", "author": "findepi", "createdAt": "2020-06-18T12:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjE2NjM1Nw=="}], "type": "inlineReview"}, {"oid": "2bdc52e53f31020d1d21aeb89ba4319b440c438b", "url": "https://github.com/trinodb/trino/commit/2bdc52e53f31020d1d21aeb89ba4319b440c438b", "message": "Remove unused test groups", "committedDate": "2020-06-24T15:38:35Z", "type": "commit"}, {"oid": "c8896385c09a9e81ceabe0b094bf995e9a3a765a", "url": "https://github.com/trinodb/trino/commit/c8896385c09a9e81ceabe0b094bf995e9a3a765a", "message": "Remove incorrect test group assignment", "committedDate": "2020-06-24T15:38:35Z", "type": "commit"}, {"oid": "273ab14c5b021547198d4ac138de9f103d2b557d", "url": "https://github.com/trinodb/trino/commit/273ab14c5b021547198d4ac138de9f103d2b557d", "message": "Simplify suite-1 definition\n\nUse `profile_specific_tests` more consistently for excluding tests that\nare intended to be run on dedicated environments.", "committedDate": "2020-06-24T15:38:35Z", "type": "commit"}, {"oid": "273ab14c5b021547198d4ac138de9f103d2b557d", "url": "https://github.com/trinodb/trino/commit/273ab14c5b021547198d4ac138de9f103d2b557d", "message": "Simplify suite-1 definition\n\nUse `profile_specific_tests` more consistently for excluding tests that\nare intended to be run on dedicated environments.", "committedDate": "2020-06-24T15:38:35Z", "type": "forcePushed"}]}