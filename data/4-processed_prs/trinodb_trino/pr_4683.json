{"pr_number": 4683, "pr_title": "Fix error when delete by a decimal primary key column.", "pr_createdAt": "2020-08-04T10:11:46Z", "pr_url": "https://github.com/trinodb/trino/pull/4683", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk1Mjk2NA==", "url": "https://github.com/trinodb/trino/pull/4683#discussion_r464952964", "bodyText": "You could assert here on SELECT to test whether a row was actually deleted.", "author": "wendigo", "createdAt": "2020-08-04T10:25:50Z", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduIntegrationDecimalColumns.java", "diffHunk": "@@ -80,6 +80,23 @@ public void testDecimalColumn()\n         assertUpdate(\"DROP TABLE test_decimal\");\n     }\n \n+    @Test\n+    public void testDeleteByPrimaryKeyDecimalColumn()\n+    {\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_decimal (\" +\n+            \"decimal_id decimal(18, 3) WITH (primary_key=true), \" +\n+            \"col_decimal decimal(18, 3)\" +\n+            \") WITH (\" +\n+            \" partition_by_hash_columns = ARRAY['id'], \" +\n+            \" partition_by_hash_buckets = 2\" +\n+            \")\");\n+\n+        assertUpdate(\"INSERT INTO test_decimal VALUES (1.1, 1.1), (2.2, 2.2), (3.3, 3.3)\", 3);\n+        assertUpdate(\"DELETE FROM test_decimal WHERE decimal_id = 2.2\", 1);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk1NDcyNw==", "url": "https://github.com/trinodb/trino/pull/4683#discussion_r464954727", "bodyText": "Yes, that's cool, thank you!    :)", "author": "Crossoverrr", "createdAt": "2020-08-04T10:29:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk1Mjk2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ0MTgxNA==", "url": "https://github.com/trinodb/trino/pull/4683#discussion_r465441814", "bodyText": "@wendigo Thank you for your suggestion, I have added the select sql.   :)", "author": "Crossoverrr", "createdAt": "2020-08-05T02:54:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDk1Mjk2NA=="}], "type": "inlineReview"}, {"oid": "b3f846b6a09c38d6f4233c0dbfc2e06a8b391cce", "url": "https://github.com/trinodb/trino/commit/b3f846b6a09c38d6f4233c0dbfc2e06a8b391cce", "message": "Fix error when delete by a decimal primary key column.", "committedDate": "2020-08-05T04:03:36Z", "type": "commit"}]}