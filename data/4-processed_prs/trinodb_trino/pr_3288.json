{"pr_number": 3288, "pr_title": "Fix incorrect pushdown in Kudu when value can be NULL.", "pr_createdAt": "2020-03-31T09:40:20Z", "pr_url": "https://github.com/trinodb/trino/pull/3288", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1MTM3NQ==", "url": "https://github.com/trinodb/trino/pull/3288#discussion_r404551375", "bodyText": "testDataMappingSmokeTest is a generic test that covers a few different cases.\nkeep this TODO here and add your test as a new test method, eg testPredicatePushdown", "author": "findepi", "createdAt": "2020-04-07T05:52:59Z", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -74,7 +74,17 @@ public void testInsert()\n     @Override\n     public void testDataMappingSmokeTest(DataMappingTestSetup dataMappingTestSetup)\n     {\n-        // TODO Support these test once kudu connector can create tables with default partitions", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDU1MTgwNw==", "url": "https://github.com/trinodb/trino/pull/3288#discussion_r404551807", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    assertQuery(\"SELECT count(1) FROM test_is_null WHERE col_nullable=0 or col_nullable is null\", \"VALUES 2\");\n          \n          \n            \n                    assertQuery(\"SELECT id FROM test_is_null WHERE col_nullable = 0 OR col_nullable IS NULL\", \"VALUES (1), (2)\");", "author": "findepi", "createdAt": "2020-04-07T05:54:13Z", "path": "presto-kudu/src/test/java/io/prestosql/plugin/kudu/TestKuduDistributedQueries.java", "diffHunk": "@@ -74,7 +74,17 @@ public void testInsert()\n     @Override\n     public void testDataMappingSmokeTest(DataMappingTestSetup dataMappingTestSetup)\n     {\n-        // TODO Support these test once kudu connector can create tables with default partitions\n+        assertUpdate(\"CREATE TABLE IF NOT EXISTS test_is_null (\" +\n+                \"id INT WITH (primary_key=true), \" +\n+                \"col_nullable bigint with (nullable=true)\" +\n+                \") WITH (\" +\n+                \" partition_by_hash_columns = ARRAY['id'], \" +\n+                \" partition_by_hash_buckets = 2\" +\n+                \")\");\n+\n+        assertUpdate(\"INSERT INTO test_is_null VALUES (0, 0)\", 1);\n+        assertUpdate(\"INSERT INTO test_is_null(id) VALUES (1)\", 1);\n+        assertQuery(\"SELECT count(1) FROM test_is_null WHERE col_nullable=0 or col_nullable is null\", \"VALUES 2\");", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "99932ac57412aaf9394fe8501454076d4bede5e0", "url": "https://github.com/trinodb/trino/commit/99932ac57412aaf9394fe8501454076d4bede5e0", "message": "Fix incorrect pushdown in Kudu when value can be NULL.", "committedDate": "2020-04-08T03:39:30Z", "type": "commit"}]}