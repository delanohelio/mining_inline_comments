{"pr_number": 5677, "pr_title": "Strip attemptId from bucket file for delete delta", "pr_createdAt": "2020-10-23T15:04:12Z", "pr_url": "https://github.com/trinodb/trino/pull/5677", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1OTE0MQ==", "url": "https://github.com/trinodb/trino/pull/5677#discussion_r510959141", "bodyText": "filenameNoAttempt -> filenameBase ?", "author": "findepi", "createdAt": "2020-10-23T15:21:21Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HiveUpdatablePageSource.java", "diffHunk": "@@ -66,7 +67,7 @@\n     public static final Block DELETE_OPERATION_BLOCK = nativeValueToBlock(INTEGER, Long.valueOf(DELETE.getOperationNumber()));\n \n     // The bucketPath looks like .../delta_nnnnnnn_mmmmmmm_ssss/bucket_bbbbb(_aaaa)?\n-    public static final Pattern BUCKET_PATH_MATCHER = Pattern.compile(\"(?s)(?<rootDir>.*)/(?<dirStart>delta_[\\\\d]+_[\\\\d]+)_(?<statementId>[\\\\d]+)/(?<filename>bucket_(?<bucketNumber>[\\\\d]+)(?<attemptId>_[\\\\d]+)?)$\");\n+    public static final Pattern BUCKET_PATH_MATCHER = Pattern.compile(\"(?s)(?<rootDir>.*)/(?<dirStart>delta_[\\\\d]+_[\\\\d]+)_(?<statementId>[\\\\d]+)/(?<filenameNoAttempt>bucket_(?<bucketNumber>[\\\\d]+))(?<attemptId>_[\\\\d]+)?$\");", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk4NzIzMA==", "url": "https://github.com/trinodb/trino/pull/5677#discussion_r510987230", "bodyText": "I will change after CI pass", "author": "losipiuk", "createdAt": "2020-10-23T16:03:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1OTE0MQ=="}], "type": "inlineReview"}, {"oid": "2e51cce493a00ebf4b37d36fa899815cfda2cbfb", "url": "https://github.com/trinodb/trino/commit/2e51cce493a00ebf4b37d36fa899815cfda2cbfb", "message": "Strip attemptId from bucket file for delete delta", "committedDate": "2020-10-23T16:07:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAxMzI4MA==", "url": "https://github.com/trinodb/trino/pull/5677#discussion_r511013280", "bodyText": "This seems to be unused", "author": "electrum", "createdAt": "2020-10-23T16:50:34Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HiveUpdatablePageSource.java", "diffHunk": "@@ -28,6 +28,7 @@\n import io.prestosql.spi.type.TypeManager;\n import org.apache.hadoop.conf.Configuration;\n import org.apache.hadoop.fs.Path;\n+import org.jetbrains.annotations.NotNull;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAxMzk2MQ==", "url": "https://github.com/trinodb/trino/pull/5677#discussion_r511013961", "bodyText": "Yeah - I have a fixup for this. Just waiting for CI.", "author": "losipiuk", "createdAt": "2020-10-23T16:51:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTAxMzI4MA=="}], "type": "inlineReview"}, {"oid": "2e51cce493a00ebf4b37d36fa899815cfda2cbfb", "url": "https://github.com/trinodb/trino/commit/2e51cce493a00ebf4b37d36fa899815cfda2cbfb", "message": "Strip attemptId from bucket file for delete delta", "committedDate": "2020-10-23T16:07:27Z", "type": "forcePushed"}]}