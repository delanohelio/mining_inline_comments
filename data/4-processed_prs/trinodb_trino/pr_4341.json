{"pr_number": 4341, "pr_title": "Coerce string values to numeric types", "pr_createdAt": "2020-07-04T05:11:35Z", "pr_url": "https://github.com/trinodb/trino/pull/4341", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MzMyMw==", "url": "https://github.com/trinodb/trino/pull/4341#discussion_r449783323", "bodyText": "Maybe catch the parse error and throw a better exception?", "author": "dain", "createdAt": "2020-07-04T15:46:49Z", "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/decoders/BigintDecoder.java", "diffHunk": "@@ -44,6 +44,9 @@ public void decode(SearchHit hit, Supplier<Object> getter, BlockBuilder output)\n         else if (value instanceof Number) {\n             BIGINT.writeLong(output, ((Number) value).longValue());\n         }\n+        else if (value instanceof String) {\n+            BIGINT.writeLong(output, Long.parseLong((String) value));", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTc4MzM4Mg==", "url": "https://github.com/trinodb/trino/pull/4341#discussion_r449783382", "bodyText": "Maybe parse as long and then apply int exact?", "author": "dain", "createdAt": "2020-07-04T15:47:35Z", "path": "presto-elasticsearch/src/main/java/io/prestosql/elasticsearch/decoders/IntegerDecoder.java", "diffHunk": "@@ -45,6 +45,9 @@ public void decode(SearchHit hit, Supplier<Object> getter, BlockBuilder output)\n         else if (value instanceof Number) {\n             INTEGER.writeLong(output, toIntExact(((Number) value).longValue()));\n         }\n+        else if (value instanceof String) {\n+            INTEGER.writeLong(output, Integer.parseInt((String) value));", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2137bb8ea06745fbc3133179e904670c5066d6be", "url": "https://github.com/trinodb/trino/commit/2137bb8ea06745fbc3133179e904670c5066d6be", "message": "Fix typo in error message", "committedDate": "2020-07-05T20:48:14Z", "type": "commit"}, {"oid": "170bf791bcec648f8adb742d1dee72bf01b1e9b3", "url": "https://github.com/trinodb/trino/commit/170bf791bcec648f8adb742d1dee72bf01b1e9b3", "message": "Coerce string values to numeric types", "committedDate": "2020-07-05T20:48:14Z", "type": "commit"}, {"oid": "170bf791bcec648f8adb742d1dee72bf01b1e9b3", "url": "https://github.com/trinodb/trino/commit/170bf791bcec648f8adb742d1dee72bf01b1e9b3", "message": "Coerce string values to numeric types", "committedDate": "2020-07-05T20:48:14Z", "type": "forcePushed"}]}