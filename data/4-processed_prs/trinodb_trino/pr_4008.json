{"pr_number": 4008, "pr_title": "Document why no CHAR \u2192 VARCHAR coercion", "pr_createdAt": "2020-06-12T09:23:38Z", "pr_url": "https://github.com/trinodb/trino/pull/4008", "timeline": [{"oid": "0e1f4f2c48cfeb292e290eb2fbd7acfa7aeceebd", "url": "https://github.com/trinodb/trino/commit/0e1f4f2c48cfeb292e290eb2fbd7acfa7aeceebd", "message": "Document why no CHAR \u2192 VARCHAR coercion\n\nThis is based on 3d9d004bde77c847108ece06c727536669b6a640.\nThe original commit message became inaccessible after a refactor\n(4408334bb637501dd3d037c45b2cc0118caaa83c).", "committedDate": "2020-06-12T09:23:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMwOTQ1Nw==", "url": "https://github.com/trinodb/trino/pull/4008#discussion_r439309457", "bodyText": "This line had and still has a warning (DuplicateBranchesInSwitch).\nI am tempted to \"ignore this globally\" (in my IDE and in https://github.com/prestosql/presto/#additional-ide-configuration)\ncc @electrum", "author": "findepi", "createdAt": "2020-06-12T09:24:49Z", "path": "presto-main/src/main/java/io/prestosql/type/TypeCoercion.java", "diffHunk": "@@ -437,6 +437,9 @@ private TypeCompatibility typeCompatibilityForCovariantParametrizedType(Type fro\n             case StandardTypes.CHAR: {\n                 switch (resultTypeBase) {\n                     case StandardTypes.VARCHAR:\n+                        // CHAR could be coercible to VARCHAR, but they cannot be both coercible to each other.\n+                        // VARCHAR to CHAR coercion provides natural semantics when comparing VARCHAR literals to CHAR columns.\n+                        // WITH CHAR to VARCHAR coercion one would need to pad literals with spaces: char_column_len_5 = 'abc  ', so we would not run unmodified TPC-DS queries.\n                         return Optional.empty();", "originalCommit": "0e1f4f2c48cfeb292e290eb2fbd7acfa7aeceebd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}