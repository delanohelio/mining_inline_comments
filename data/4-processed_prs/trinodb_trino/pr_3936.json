{"pr_number": 3936, "pr_title": "Update statistics on insert to empty table in Hive connector", "pr_createdAt": "2020-06-05T23:16:46Z", "pr_url": "https://github.com/trinodb/trino/pull/3936", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIzODY0MQ==", "url": "https://github.com/trinodb/trino/pull/3936#discussion_r436238641", "bodyText": "I do not like the fact that this is not symetric. The method signature does not require that table properties are passed as first argument. Can you make the condition symmetric or at rename the argument to add meaning to parameters?", "author": "losipiuk", "createdAt": "2020-06-06T05:04:20Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/util/Statistics.java", "diffHunk": "@@ -83,6 +83,10 @@ private Statistics() {}\n \n     public static PartitionStatistics merge(PartitionStatistics first, PartitionStatistics second)\n     {\n+        if (first.getBasicStatistics().getRowCount().orElse(0L) == 0) {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI2MDYyNA==", "url": "https://github.com/trinodb/trino/pull/3936#discussion_r436260624", "bodyText": "Good point. Also, I am not sure i like the .orElse part, since lack of information about row count it totally different from having information it's 0.\nlet me try.", "author": "findepi", "createdAt": "2020-06-06T11:22:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjIzODY0MQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "c65d473996392a1ec83d26a4551f382c35c6ecf0", "url": "https://github.com/trinodb/trino/commit/c65d473996392a1ec83d26a4551f382c35c6ecf0", "message": "Update statistics on insert to empty table in Hive connector", "committedDate": "2020-06-06T16:17:50Z", "type": "commit"}, {"oid": "c65d473996392a1ec83d26a4551f382c35c6ecf0", "url": "https://github.com/trinodb/trino/commit/c65d473996392a1ec83d26a4551f382c35c6ecf0", "message": "Update statistics on insert to empty table in Hive connector", "committedDate": "2020-06-06T16:17:50Z", "type": "forcePushed"}]}