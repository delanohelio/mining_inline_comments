{"pr_number": 3249, "pr_title": "Add info about login page", "pr_createdAt": "2020-03-26T16:42:48Z", "pr_url": "https://github.com/trinodb/trino/pull/3249", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODI5Mw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398818293", "bodyText": "Only username+password authentication is supported for the WEB UI.", "author": "dain", "createdAt": "2020-03-26T18:58:05Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n :ref:`config_properties`.\n \n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+a random username to log in successfully.\n+\n+With password authentication enabled, for example via LDAP, password file or\n+Kerberos you are required to configure the server and the Web UI to use", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMDQ4NA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398830484", "bodyText": "updated", "author": "mosabua", "createdAt": "2020-03-26T19:18:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODI5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODg3Mw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398818873", "bodyText": "Any random username will work, but generally people should login using the same username they use when submitting queries.", "author": "dain", "createdAt": "2020-03-26T18:58:57Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n :ref:`config_properties`.\n \n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+a random username to log in successfully.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMDM2Mg==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398830362", "bodyText": "Added", "author": "mosabua", "createdAt": "2020-03-26T19:18:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxODg3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxOTM3OA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398819378", "bodyText": "There is a new property web-ui.enabled that can be used to disable the web UI entirely if desired.", "author": "dain", "createdAt": "2020-03-26T18:59:44Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,10 +3,19 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzMDMwNA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398830304", "bodyText": "Added", "author": "mosabua", "createdAt": "2020-03-26T19:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgxOTM3OA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398836198", "bodyText": "I would maybe put that the other way around.... When the server is configured to use HTTPS/TLS, a username/password authenticator, such as LDAP or FILE, must be configured.", "author": "dain", "createdAt": "2020-03-26T19:28:05Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. If desired, the Web UI can be disabled with\n+``web-ui.enabled=false``.\n+\n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+any username to log in successfully. Best practice is to use the same username,\n+when connecting to other systems in your organization, including running queries\n+on Presto with the CLI or some other application.\n+\n+With username/password authentication enabled, you are required to configure the", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg1MjkwNQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398852905", "bodyText": "Hm .. thats kinda different from what I understand to be the case .. e.g. i thought you could have https/tls but no authentication just like the default behaviour? On the other hand if you have authenticator .. you need to use https/tls since this would be completely insecure otherwise.", "author": "mosabua", "createdAt": "2020-03-26T19:56:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyMzMyNw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398923327", "bodyText": "Can you confirm which is correct?", "author": "mosabua", "createdAt": "2020-03-26T22:10:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyODM3Mw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398928373", "bodyText": "I changed to your suggestion for now but we should still confirm this to be true .. and if so.. I would love to understand the reasoning.", "author": "mosabua", "createdAt": "2020-03-26T22:23:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTM5NTE1NA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399395154", "bodyText": "Reasoning came up in slack. I am good with this.", "author": "mosabua", "createdAt": "2020-03-27T16:37:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzNjE5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzOTIxNg==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398839216", "bodyText": "There are two other properties we may want to document: https://github.com/prestosql/presto/blob/master/presto-main/src/main/java/io/prestosql/server/ui/WebUiConfig.java#L49\nThis is the very technical details (which shouldn't be documented)\nweb-ui.shared-secret is used for signing the authentication cookie.  If this is not set the coordinator generates a random one, which means that when ever the coordinator is restarted, all users are logged out.  If set consistently, the user will stay logged in across coordinator restarts.\nweb-ui.session-timeout is how long a login token is valid.", "author": "dain", "createdAt": "2020-03-26T19:32:48Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg1MTM2Nw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398851367", "bodyText": "Maybe we should document them in the properties page and just link there", "author": "mosabua", "createdAt": "2020-03-26T19:54:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzOTIxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyNDQxOA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398924418", "bodyText": "I am moving all properties to that doc. Stay tuned for new commit .", "author": "mosabua", "createdAt": "2020-03-26T22:13:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzOTIxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyOTAyNQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r398929025", "bodyText": "Available now.", "author": "mosabua", "createdAt": "2020-03-26T22:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODgzOTIxNg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODI2MA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728260", "bodyText": "How about\n\nThis property controls whether or not the Web UI is available.", "author": "electrum", "createdAt": "2020-03-29T00:50:52Z", "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQzNjcwOQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400436709", "bodyText": "Seems a bit verbose but works for me. I changed it.", "author": "mosabua", "createdAt": "2020-03-30T19:21:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODI2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODMwOQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728309", "bodyText": "Let's remove the quotes so it's more obvious this is not the real value\n* **Default value:** (randomly generated unless set)", "author": "electrum", "createdAt": "2020-03-29T00:51:43Z", "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQzNzI5Nw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400437297", "bodyText": "I removed the quote but did not add the brackets since that seems redundant", "author": "mosabua", "createdAt": "2020-03-30T19:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODMwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODQ3MA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728470", "bodyText": "Singular sounds better\n\nIf not set to a static value, any coordinator restart will generate a new random value, which in turn invalidates the session of any currently logged in Web UI user.", "author": "electrum", "createdAt": "2020-03-29T00:53:41Z", "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``\n+\n+    The shared secret is used to generate authentication cookies for users of\n+    the Web UI. If not set to a static value, any coordinator restarts cause a", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQzODE5NA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400438194", "bodyText": "I changed to that apart from avoid usage of future tense.", "author": "mosabua", "createdAt": "2020-03-30T19:24:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODQ3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODU3OQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728579", "bodyText": "How long a user can be logged into the Web UI before the session times out, which forces an automatic log-out.", "author": "electrum", "createdAt": "2020-03-29T00:54:55Z", "path": "presto-docs/src/main/sphinx/admin/properties.rst", "diffHunk": "@@ -836,4 +836,37 @@ Logging Properties\n \n     The maximum file size for the log file of the HTTP server.\n \n+.. _web-ui-properties:\n \n+Web UI Properties\n+-----------------\n+\n+The following properties can be used to configure the :doc:`./web-interface`.\n+\n+``web-ui.enabled``\n+^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``boolean``\n+    * **Default value:** ``true``\n+\n+    Enable availability of the Web UI.\n+\n+``web-ui.shared-secret``\n+^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``string``\n+    * **Default value:** ``randomly generated unless set``\n+\n+    The shared secret is used to generate authentication cookies for users of\n+    the Web UI. If not set to a static value, any coordinator restarts cause a\n+    new random value to be created, which in turn invalidates any current\n+    sessions of Web UI users.\n+\n+web-ui.session-timeout\n+^^^^^^^^^^^^^^^^^^^^^^\n+\n+    * **Type:** ``duration``\n+    * **Default value:** ``1 day``\n+\n+    The duration how long a user can be logged into the Web UI, before the", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQzOTEzMA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400439130", "bodyText": "Added the which clause but left the noun for the sentence in place (The duration)", "author": "mosabua", "createdAt": "2020-03-30T19:25:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODU3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODgyNQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399728825", "bodyText": "I'd rather not say \"best practice\" here since we would need to substantiate that\n\nThe Web UI requires users to log in. If Presto is not configured to require authentication, then any username can be used, and no password will be required (or allowed). Typically, users should login with the same username that they use for running queries.", "author": "electrum", "createdAt": "2020-03-29T00:58:44Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. It can be configured with :ref:`specific related\n+properties <web-ui-properties>`.\n+\n+The Web UI requires users to log in on the initial page. A default Presto", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0NTI1NQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400445255", "bodyText": "adopted without brackets or future use", "author": "mosabua", "createdAt": "2020-03-30T19:37:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyODgyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTA4NA==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399729084", "bodyText": "Let's just say HTTPS since that's what we use elsewhere in the documentation.", "author": "electrum", "createdAt": "2020-03-29T01:02:15Z", "path": "presto-docs/src/main/sphinx/admin/web-interface.rst", "diffHunk": "@@ -3,9 +3,20 @@ Web UI\n ======\n \n Presto provides a web-based user interface (UI) for monitoring a Presto cluster\n-and managing queries. The web UI is accessible on the Presto coordinator via\n+and managing queries. The Web UI is accessible on the coordinator via\n HTTP/HTTPS, using the corresponding port number specified in the coordinator\n-:ref:`config_properties`.\n+:ref:`config_properties`. It can be configured with :ref:`specific related\n+properties <web-ui-properties>`.\n+\n+The Web UI requires users to log in on the initial page. A default Presto\n+installation has no authorization and authentication enabled and you can provide\n+any username to log in successfully. Best practice is to use the same username,\n+when connecting to other systems in your organization, including running queries\n+on Presto with the CLI or some other application.\n+\n+When the server is configured to use HTTPS/TLS, a username/password", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTI2Nw==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r399729267", "bodyText": "We can simplify this to\nWhen the server is configured to use HTTPS, a :doc:`/develop/password-authenticator`\nsuch as :doc:`LDAP </security/ldap>` must be configured in order to use the Web UI.", "author": "electrum", "createdAt": "2020-03-29T01:04:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTA4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ0NTU0NQ==", "url": "https://github.com/trinodb/trino/pull/3249#discussion_r400445545", "bodyText": "adopted but added password auth since that came up in slack for user help and should be specifically mentioned  and added specific wording for links instead of using titles", "author": "mosabua", "createdAt": "2020-03-30T19:37:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTcyOTA4NA=="}], "type": "inlineReview"}, {"oid": "e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "url": "https://github.com/trinodb/trino/commit/e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "message": "Add WebUi properties and info about login page", "committedDate": "2020-03-30T19:40:55Z", "type": "commit"}, {"oid": "e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "url": "https://github.com/trinodb/trino/commit/e686d54ac0e33b0036ce7c2ebb3b079be7526df1", "message": "Add WebUi properties and info about login page", "committedDate": "2020-03-30T19:40:55Z", "type": "forcePushed"}]}