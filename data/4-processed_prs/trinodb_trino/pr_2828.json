{"pr_number": 2828, "pr_title": "Add Hive 3 metastore config for CSV support", "pr_createdAt": "2020-02-13T23:02:24Z", "pr_url": "https://github.com/trinodb/trino/pull/2828", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMxNDI1OQ==", "url": "https://github.com/trinodb/trino/pull/2828#discussion_r379314259", "bodyText": "this is needed for Hive 3 only.\n-- this is the only place where we set this in our tests\nhttps://github.com/prestosql/docker-images/blob/4aadfb19cf5a3d7a2576f4cd670c9ced21debf53/prestodev/hdp3.1-hive/files/etc/hive/conf/hive-site.xml#L69-L70", "author": "findepi", "createdAt": "2020-02-14T08:58:21Z", "path": "presto-docs/src/main/sphinx/connector/hive.rst", "diffHunk": "@@ -40,6 +40,18 @@ The following file types are supported for the Hive connector:\n * CSV (using ``org.apache.hadoop.hive.serde2.OpenCSVSerde``)\n * TextFile\n \n+In order to enable first-class support for CSV files, you need to add the\n+following property definition to the Hive metastore configuration file", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMxNDc1MQ==", "url": "https://github.com/trinodb/trino/pull/2828#discussion_r379314751", "bodyText": "@electrum, maybe we also could catch exception somewhere around https://github.com/prestosql/presto/blob/ebe16716fb76e4c4883cf7196d9b1087edb51582/presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/thrift/BridgingHiveMetastore.java#L89 and provide more actionable message directly to the user?", "author": "findepi", "createdAt": "2020-02-14T08:59:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTMxNDI1OQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NjI2Ng==", "url": "https://github.com/trinodb/trino/pull/2828#discussion_r379856266", "bodyText": "I missed that earlier; same applies to Avro tables with avro_schema_url.\nFor ref, we're talking about:\nhttps://github.com/prestosql/presto/blob/ebe16716fb76e4c4883cf7196d9b1087edb51582/presto-hive/src/main/java/io/prestosql/plugin/hive/metastore/thrift/BridgingHiveMetastore.java#L88-L89", "author": "findepi", "createdAt": "2020-02-15T21:10:16Z", "path": "presto-docs/src/main/sphinx/connector/hive.rst", "diffHunk": "@@ -40,6 +40,18 @@ The following file types are supported for the Hive connector:\n * CSV (using ``org.apache.hadoop.hive.serde2.OpenCSVSerde``)\n * TextFile\n \n+In order to enable first-class support for CSV files when using Hive 3.x, you", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0MjcwNw==", "url": "https://github.com/trinodb/trino/pull/2828#discussion_r380842707", "bodyText": "Updated and ready to merge again.", "author": "mosabua", "createdAt": "2020-02-18T18:04:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg1NjI2Ng=="}], "type": "inlineReview"}, {"oid": "fe6bb4c6cee9d19471a5cdb6014ceafe43e2a57c", "url": "https://github.com/trinodb/trino/commit/fe6bb4c6cee9d19471a5cdb6014ceafe43e2a57c", "message": "Add Hive 3 metastore config for CSV and Avro support", "committedDate": "2020-02-18T18:02:54Z", "type": "commit"}, {"oid": "fe6bb4c6cee9d19471a5cdb6014ceafe43e2a57c", "url": "https://github.com/trinodb/trino/commit/fe6bb4c6cee9d19471a5cdb6014ceafe43e2a57c", "message": "Add Hive 3 metastore config for CSV and Avro support", "committedDate": "2020-02-18T18:02:54Z", "type": "forcePushed"}]}