{"pr_number": 2751, "pr_title": "Require running on Java 11", "pr_createdAt": "2020-02-06T23:45:51Z", "pr_url": "https://github.com/trinodb/trino/pull/2751", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2NTc0Mg==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376265742", "bodyText": "Typo", "author": "kokosing", "createdAt": "2020-02-07T08:27:07Z", "path": "presto-product-tests-launcher/src/main/resources/docker/presto-product-tests/run-presto.sh", "diffHunk": "@@ -11,6 +11,7 @@ set -x\n \n tar xf /docker/presto-server.tar.gz -C /docker\n exec /docker/presto-server-*/bin/launcher \\\n+  -Dresto-temporarily-allow-java8=true \\", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NDg1OQ==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376274859", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              -Dresto-temporarily-allow-java8=true \\\n          \n          \n            \n              -Dpresto-temporarily-allow-java8=true \\", "author": "findepi", "createdAt": "2020-02-07T08:50:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2NTc0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2NjAyMA==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376266020", "bodyText": "I think it should be like 6 months from now.", "author": "kokosing", "createdAt": "2020-02-07T08:27:56Z", "path": "presto-main/src/main/java/io/prestosql/server/PrestoSystemRequirements.java", "diffHunk": "@@ -101,6 +101,14 @@ private static void verifyJavaVersion()\n             return;\n         }\n \n+        if (!Boolean.getBoolean(\"presto-temporarily-allow-java8\")) {\n+            failRequirement(\"\" +\n+                    \"Future versions of Presto will require Java 11 starting in April 2020.\\n\\n\" +", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NDYyMA==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376274620", "bodyText": "This date is the one announced previously on Slack. https://prestosql.slack.com/archives/CFLB9AMBN/p1580870213234300\nHowever, the code build today will continue to work and we will unlikely do a release on April 1st, so I'd use a different wording here\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                \"Future versions of Presto will require Java 11 starting in April 2020.\\n\\n\" +\n          \n          \n            \n                                \"Future versions of Presto will require Java 11 after March 2020.\\n\\n\" +", "author": "findepi", "createdAt": "2020-02-07T08:49:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI2NjAyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTM0MQ==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376275341", "bodyText": "This should be applied only when running on centos7-oj8 image", "author": "findepi", "createdAt": "2020-02-07T08:51:19Z", "path": "presto-server-rpm/src/test/java/io/prestosql/server/rpm/ServerIT.java", "diffHunk": "@@ -63,6 +63,8 @@ private static void testServer(String baseImage, String rpmHostPath, String expe\n         String command = \"\" +\n                 // install RPM\n                 \"yum localinstall -q -y \" + rpm + \"\\n\" +\n+                // temporary hack to allow Java 8\n+                \"echo '-Dpresto-temporarily-allow-java8=true' >> /etc/jvm.config\\n\" +", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwMzM3Mg==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376603372", "bodyText": "There's no harm in having it for both -- it's ignored on Java 11. Do you have a specific concern with having it for both?", "author": "electrum", "createdAt": "2020-02-07T20:56:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTM0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjY5NTE3Mw==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376695173", "bodyText": "I thought that we could verify this property is not needed when running on 11.", "author": "findepi", "createdAt": "2020-02-08T07:54:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTM0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2MDY2Nw==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376760667", "bodyText": "Make sense. I'll update it.", "author": "electrum", "createdAt": "2020-02-09T07:09:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTM0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NTUyOQ==", "url": "https://github.com/trinodb/trino/pull/2751#discussion_r376275529", "bodyText": "Add an explanatory comment", "author": "findepi", "createdAt": "2020-02-07T08:51:48Z", "path": "presto-main/pom.xml", "diffHunk": "@@ -377,6 +377,20 @@\n     </dependencies>\n \n     <build>\n+        <pluginManagement>\n+            <plugins>\n+                <plugin>\n+                    <groupId>org.apache.maven.plugins</groupId>\n+                    <artifactId>maven-surefire-plugin</artifactId>\n+                    <configuration>\n+                        <systemProperties>\n+                            <presto-temporarily-allow-java8>true</presto-temporarily-allow-java8>", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "58d5bf31dc8e288a6284d559379096a9dd20bbb9", "url": "https://github.com/trinodb/trino/commit/58d5bf31dc8e288a6284d559379096a9dd20bbb9", "message": "Require running on Java 11", "committedDate": "2020-02-09T07:22:56Z", "type": "commit"}, {"oid": "58d5bf31dc8e288a6284d559379096a9dd20bbb9", "url": "https://github.com/trinodb/trino/commit/58d5bf31dc8e288a6284d559379096a9dd20bbb9", "message": "Require running on Java 11", "committedDate": "2020-02-09T07:22:56Z", "type": "forcePushed"}]}