{"pr_number": 5982, "pr_title": "Use different table names to prevent a race when running in parallel", "pr_createdAt": "2020-11-16T20:10:08Z", "pr_url": "https://github.com/trinodb/trino/pull/5982", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDU4MDAwMA==", "url": "https://github.com/trinodb/trino/pull/5982#discussion_r524580000", "bodyText": "We typically are using io.prestosql.testing.sql.TestTable#randomTableSuffix", "author": "kokosing", "createdAt": "2020-11-16T21:06:21Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -7442,13 +7442,14 @@ private void testTimestampPrecisionInsert(Session session, HiveStorageFormat sto\n             return;\n         }\n \n-        String createTable = \"CREATE TABLE test_timestamp_precision (ts TIMESTAMP) WITH (format = '%s')\";\n-        @Language(\"SQL\") String insert = \"INSERT INTO test_timestamp_precision VALUES (TIMESTAMP '%s')\";\n+        String createTable = \"CREATE TABLE test_timestamp_precision_insert (ts TIMESTAMP) WITH (format = '%s')\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDkxMjc2NQ==", "url": "https://github.com/trinodb/trino/pull/5982#discussion_r524912765", "bodyText": "fixed and pushed", "author": "kabunchi", "createdAt": "2020-11-17T06:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDU4MDAwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDU4MDY2OQ==", "url": "https://github.com/trinodb/trino/pull/5982#discussion_r524580669", "bodyText": "please extract table name variable", "author": "kokosing", "createdAt": "2020-11-16T21:07:03Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -7467,20 +7468,21 @@ private void testTimestampPrecisionCtas(Session session, HiveStorageFormat stora\n             return;\n         }\n \n-        String createTableAs = \"CREATE TABLE test_timestamp_precision WITH (format = '%s') AS SELECT TIMESTAMP '%s' ts\";\n+        String createTableAs = \"CREATE TABLE test_timestamp_precision_ctas WITH (format = '%s') AS SELECT TIMESTAMP '%s' ts\";\n \n         testTimestampPrecisionWrites(\n                 session,\n+                \"test_timestamp_precision_ctas\",", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDU4MDkyNQ==", "url": "https://github.com/trinodb/trino/pull/5982#discussion_r524580925", "bodyText": "please extract table name variable", "author": "kokosing", "createdAt": "2020-11-16T21:07:17Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/TestHiveIntegrationSmokeTest.java", "diffHunk": "@@ -7442,13 +7442,14 @@ private void testTimestampPrecisionInsert(Session session, HiveStorageFormat sto\n             return;\n         }\n \n-        String createTable = \"CREATE TABLE test_timestamp_precision (ts TIMESTAMP) WITH (format = '%s')\";\n-        @Language(\"SQL\") String insert = \"INSERT INTO test_timestamp_precision VALUES (TIMESTAMP '%s')\";\n+        String createTable = \"CREATE TABLE test_timestamp_precision_insert (ts TIMESTAMP) WITH (format = '%s')\";\n+        @Language(\"SQL\") String insert = \"INSERT INTO test_timestamp_precision_insert VALUES (TIMESTAMP '%s')\";\n \n         testTimestampPrecisionWrites(\n                 session,\n+                \"test_timestamp_precision_insert\",", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "87bd127adc6646c07accfcdbf8b121fb8943f883", "url": "https://github.com/trinodb/trino/commit/87bd127adc6646c07accfcdbf8b121fb8943f883", "message": "Use different table names to prevent a race when running in parallel", "committedDate": "2020-11-17T05:56:56Z", "type": "commit"}, {"oid": "87bd127adc6646c07accfcdbf8b121fb8943f883", "url": "https://github.com/trinodb/trino/commit/87bd127adc6646c07accfcdbf8b121fb8943f883", "message": "Use different table names to prevent a race when running in parallel", "committedDate": "2020-11-17T05:56:56Z", "type": "forcePushed"}]}