{"pr_number": 5399, "pr_title": "Add support for COMMENT ON COLUMN in Oracle connector", "pr_createdAt": "2020-10-03T03:20:53Z", "pr_url": "https://github.com/trinodb/trino/pull/5399", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r503096307", "bodyText": "So with this approach comments would be supported only if user of the connector adds remarksReporting=true into db URL.\nI would suggest that we add the parameter in io.prestosql.plugin.oracle.OracleClientModule#connectionFactory().", "author": "losipiuk", "createdAt": "2020-10-12T07:40:35Z", "path": "presto-oracle/src/test/java/io/prestosql/plugin/oracle/TestingOracleServer.java", "diffHunk": "@@ -87,7 +87,7 @@ public TestingOracleServer()\n     @Override\n     public String getJdbcUrl()\n     {\n-        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid();\n+        return \"jdbc:oracle:thin:@\" + getHost() + \":\" + getOraclePort() + \":\" + getSid() + \"?remarksReporting=true\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NzI5Mw==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r503097293", "bodyText": "Oh - I have just read your comment on the PR :) Let's leave it as is. Can you add a note to the documentation?", "author": "losipiuk", "createdAt": "2020-10-12T07:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM3OTIwMw==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505379203", "bodyText": "is this needed?\noracle always have a comment, empty (\"\") or with some text..", "author": "eskabetxe", "createdAt": "2020-10-15T09:07:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM5OTcxNA==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505399714", "bodyText": "As far as I tested on the current TestingOracleServer, it is needed.\n# With remarksReporting=true\npresto> create table oracle.presto_test.test (c1 int);\nCREATE TABLE\npresto> comment on column oracle.presto_test.test.c1 is 'foo';\nCOMMENT\npresto> desc oracle.presto_test.test;\n Column |     Type      | Extra | Comment\n--------+---------------+-------+---------\n c1     | decimal(10,0) |       |\n\n# Without remarksReporting\npresto> create table oracle.presto_test.test (c1 int);\nCREATE TABLE\npresto> comment on column oracle.presto_test.test.c1 is 'foo';\nCOMMENT\npresto> desc oracle.presto_test.test;\n Column |     Type      | Extra | Comment\n--------+---------------+-------+---------\n c1     | decimal(10,0) |       | foo", "author": "ebyhr", "createdAt": "2020-10-15T09:35:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQ2NTMyOA==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r505465328", "bodyText": "@losipiuk Added a note to the documentation.", "author": "ebyhr", "createdAt": "2020-10-15T11:25:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA5NjMwNw=="}], "type": "inlineReview"}, {"oid": "fdaccbaa587dc23c3acd0d8eedd8f22d714353ae", "url": "https://github.com/trinodb/trino/commit/fdaccbaa587dc23c3acd0d8eedd8f22d714353ae", "message": "Remove redundant spaces in Oracle documentation", "committedDate": "2020-10-15T11:16:53Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r507543391", "bodyText": "Maybe it is worth adding that it may have negative performance implications?\n@electrum, @mosabua WDYT?", "author": "losipiuk", "createdAt": "2020-10-19T07:54:56Z", "path": "presto-docs/src/main/sphinx/connector/oracle.rst", "diffHunk": "@@ -20,6 +20,11 @@ properties in the file:\n     connection-user=root\n     connection-password=secret\n \n+.. note::", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzk3NjUzMg==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r507976532", "bodyText": "Probably yes ... seems like a bad idea to implement this way to some degree but its a Oracle issue. So in the warning about the performance this should maybe link to the Oracle docs about the impact.", "author": "mosabua", "createdAt": "2020-10-19T18:33:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxOTQzNw==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r508319437", "bodyText": "Thanks for your feedback. Updated as follows:", "author": "ebyhr", "createdAt": "2020-10-20T08:44:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODkwMzEyNw==", "url": "https://github.com/trinodb/trino/pull/5399#discussion_r508903127", "bodyText": "Nice. Thanks", "author": "mosabua", "createdAt": "2020-10-20T23:42:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzU0MzM5MQ=="}], "type": "inlineReview"}, {"oid": "80f3fbaf581328a82688cf960f26cf430366f3ea", "url": "https://github.com/trinodb/trino/commit/80f3fbaf581328a82688cf960f26cf430366f3ea", "message": "Add support for COMMENT ON COLUMN in Oracle connector", "committedDate": "2020-10-20T08:42:03Z", "type": "commit"}, {"oid": "80f3fbaf581328a82688cf960f26cf430366f3ea", "url": "https://github.com/trinodb/trino/commit/80f3fbaf581328a82688cf960f26cf430366f3ea", "message": "Add support for COMMENT ON COLUMN in Oracle connector", "committedDate": "2020-10-20T08:42:03Z", "type": "forcePushed"}]}