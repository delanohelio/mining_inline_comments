{"pr_number": 6256, "pr_title": "Simplify exception message formatting in resolveFunction", "pr_createdAt": "2020-12-08T18:14:15Z", "pr_url": "https://github.com/trinodb/trino/pull/6256", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc5MDQ1NQ==", "url": "https://github.com/trinodb/trino/pull/6256#discussion_r538790455", "bodyText": "Maybe wrap expected string into brackets too in case list is empty", "author": "sopel39", "createdAt": "2020-12-08T20:40:45Z", "path": "presto-main/src/main/java/io/prestosql/metadata/FunctionResolver.java", "diffHunk": "@@ -140,13 +144,10 @@ FunctionBinding resolveFunction(Collection<FunctionMetadata> allCandidates, Qual\n                     Joiner.on(\", \").join(function.getSignature().getArgumentTypes()),\n                     Joiner.on(\", \").join(function.getSignature().getTypeVariableConstraints())));\n         }\n-        String parameters = Joiner.on(\", \").join(parameterTypes);\n-        String message = format(\"Function '%s' not registered\", name);\n-        if (!expectedParameters.isEmpty()) {\n-            String expected = Joiner.on(\", \").join(expectedParameters);\n-            message = format(\"Unexpected parameters (%s) for function %s. Expected: %s\", parameters, name, expected);\n-        }\n \n+        String parameters = Joiner.on(\", \").join(parameterTypes);\n+        String expected = Joiner.on(\", \").join(expectedParameters);\n+        String message = format(\"Unexpected parameters (%s) for function %s. Expected: %s\", parameters, name, expected);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwNjU1Mg==", "url": "https://github.com/trinodb/trino/pull/6256#discussion_r538806552", "bodyText": "which list?  i don't think any can be empty at this point", "author": "findepi", "createdAt": "2020-12-08T21:04:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc5MDQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwNzI2MQ==", "url": "https://github.com/trinodb/trino/pull/6256#discussion_r538807261", "bodyText": "Why not? Previous code assumed expectedParameters could be empty", "author": "sopel39", "createdAt": "2020-12-08T21:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc5MDQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg4Njc4NQ==", "url": "https://github.com/trinodb/trino/pull/6256#discussion_r538886785", "bodyText": "Only when there allCandidates are empty, which is now filtered out at the top of the method.", "author": "findepi", "createdAt": "2020-12-08T23:26:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc5MDQ1NQ=="}], "type": "inlineReview"}, {"oid": "7d331dca80202e7acc868e3b1fc93bae9e67a34b", "url": "https://github.com/trinodb/trino/commit/7d331dca80202e7acc868e3b1fc93bae9e67a34b", "message": "Simplify exception message formatting in resolveFunction", "committedDate": "2020-12-08T21:06:08Z", "type": "commit"}, {"oid": "b059d13ccfe31b627c47d6ffc98306bc0de33723", "url": "https://github.com/trinodb/trino/commit/b059d13ccfe31b627c47d6ffc98306bc0de33723", "message": "Use immutable collectors", "committedDate": "2020-12-08T21:06:08Z", "type": "commit"}, {"oid": "b059d13ccfe31b627c47d6ffc98306bc0de33723", "url": "https://github.com/trinodb/trino/commit/b059d13ccfe31b627c47d6ffc98306bc0de33723", "message": "Use immutable collectors", "committedDate": "2020-12-08T21:06:08Z", "type": "forcePushed"}, {"oid": "57c333477faa844c694ff9610f219fdbba946854", "url": "https://github.com/trinodb/trino/commit/57c333477faa844c694ff9610f219fdbba946854", "message": "Ensure immutability of TypeRelationshipConstraintSolver", "committedDate": "2020-12-08T23:23:50Z", "type": "commit"}, {"oid": "ba99a094ecb6180f48223904d36035a5d15b6f52", "url": "https://github.com/trinodb/trino/commit/ba99a094ecb6180f48223904d36035a5d15b6f52", "message": "Ensure immutability of TypeSignatureProvider", "committedDate": "2020-12-08T23:24:35Z", "type": "commit"}]}