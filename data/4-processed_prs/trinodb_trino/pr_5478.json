{"pr_number": 5478, "pr_title": "Wrap getSplits in doAs", "pr_createdAt": "2020-10-08T14:44:13Z", "pr_url": "https://github.com/trinodb/trino/pull/5478", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc5NzAwNA==", "url": "https://github.com/trinodb/trino/pull/5478#discussion_r501797004", "bodyText": "extra space", "author": "sopel39", "createdAt": "2020-10-08T15:07:26Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/BackgroundHiveSplitLoader.java", "diffHunk": "@@ -450,7 +450,7 @@ private void invokeNoMoreSplitsIfNecessary()\n \n             JobConf jobConf = toJobConf(configuration);\n             FileInputFormat.setInputPaths(jobConf, path);\n-            InputSplit[] splits = inputFormat.getSplits(jobConf, 0);\n+            InputSplit[] splits =  hdfsEnvironment.doAs(hdfsContext.getIdentity().getUser(), () -> inputFormat.getSplits(jobConf, 0));", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjAyMTAwNQ==", "url": "https://github.com/trinodb/trino/pull/5478#discussion_r502021005", "bodyText": "thanks", "author": "findepi", "createdAt": "2020-10-08T21:24:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTc5NzAwNA=="}], "type": "inlineReview"}, {"oid": "6e5764640c7134c48ab4c451d726425c1fbdce2f", "url": "https://github.com/trinodb/trino/commit/6e5764640c7134c48ab4c451d726425c1fbdce2f", "message": "Wrap getSplits in doAs", "committedDate": "2020-10-08T21:24:12Z", "type": "commit"}, {"oid": "6e5764640c7134c48ab4c451d726425c1fbdce2f", "url": "https://github.com/trinodb/trino/commit/6e5764640c7134c48ab4c451d726425c1fbdce2f", "message": "Wrap getSplits in doAs", "committedDate": "2020-10-08T21:24:12Z", "type": "forcePushed"}]}