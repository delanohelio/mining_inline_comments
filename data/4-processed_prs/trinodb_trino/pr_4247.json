{"pr_number": 4247, "pr_title": "Update hive caching documentation", "pr_createdAt": "2020-06-26T15:31:33Z", "pr_url": "https://github.com/trinodb/trino/pull/4247", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI1Njg5Mg==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r446256892", "bodyText": "The cache chunks are 1MB in size and are well... this is valid for both async and read-through mode", "author": "sopel39", "createdAt": "2020-06-26T15:34:05Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -61,12 +61,16 @@ systems.\n Architecture\n ------------\n \n-Caching for distributed storage provides a read-through cache. After first\n-retrieval from storage by any query, objects are cached in the local cache\n-storage on the workers. Objects are cached on local storage of each worker and\n-managed by a BookKeeper component. Workers can request cached objects from other\n-workers to avoid requests from the object storage. The cache chunks are 1MB in\n-size and are well suited for ORC or Parquet format objects.\n+Caching can operate in two modes. The default async mode provides the queried\n+data directly and caches any objects asynchronously afterwards. Any following\n+queries requesting the cached objects are served directly from the cache.\n+\n+The second mode is a read-through cache. After first retrieval from storage by\n+any query, objects are cached in the local cache storage on the workers. Objects\n+are cached on local storage of each worker and managed by a BookKeeper\n+component. Workers can request cached objects from other workers to avoid\n+requests from the object storage. The cache chunks are 1MB in size and are well", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI1ODg2MQ==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r446258861", "bodyText": "ok .. I will separate the paragraph", "author": "mosabua", "createdAt": "2020-06-26T15:37:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI1Njg5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI1OTg5NQ==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r446259895", "bodyText": "Separated the different concerns into paragraphs.", "author": "mosabua", "createdAt": "2020-06-26T15:39:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjI1Njg5Mg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyOTMzMw==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451029333", "bodyText": "\"format objects\" -> file formats", "author": "electrum", "createdAt": "2020-07-07T17:30:09Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -61,12 +61,19 @@ systems.\n Architecture\n ------------\n \n-Caching for distributed storage provides a read-through cache. After first\n-retrieval from storage by any query, objects are cached in the local cache\n-storage on the workers. Objects are cached on local storage of each worker and\n-managed by a BookKeeper component. Workers can request cached objects from other\n-workers to avoid requests from the object storage. The cache chunks are 1MB in\n-size and are well suited for ORC or Parquet format objects.\n+Caching can operate in two modes. The default async mode provides the queried\n+data directly and caches any objects asynchronously afterwards. Any following\n+queries requesting the cached objects are served directly from the cache.\n+\n+The second mode is a read-through cache. After first retrieval from storage by\n+any query, objects are cached in the local cache storage on the workers.\n+\n+In both modes objects are cached on local storage of each worker and managed by\n+a BookKeeper component. Workers can request cached objects from other workers to\n+avoid requests from the object storage.\n+\n+The cache chunks are 1MB in size and are well suited for ORC or Parquet format", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2NDE4OQ==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451064189", "bodyText": "fixed", "author": "mosabua", "createdAt": "2020-07-07T18:32:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyOTMzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyOTUwMQ==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451029501", "bodyText": "second -> other", "author": "electrum", "createdAt": "2020-07-07T17:30:25Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -61,12 +61,19 @@ systems.\n Architecture\n ------------\n \n-Caching for distributed storage provides a read-through cache. After first\n-retrieval from storage by any query, objects are cached in the local cache\n-storage on the workers. Objects are cached on local storage of each worker and\n-managed by a BookKeeper component. Workers can request cached objects from other\n-workers to avoid requests from the object storage. The cache chunks are 1MB in\n-size and are well suited for ORC or Parquet format objects.\n+Caching can operate in two modes. The default async mode provides the queried\n+data directly and caches any objects asynchronously afterwards. Any following\n+queries requesting the cached objects are served directly from the cache.\n+\n+The second mode is a read-through cache. After first retrieval from storage by", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2Mzg0NQ==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451063845", "bodyText": "Fixed", "author": "mosabua", "createdAt": "2020-07-07T18:32:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAyOTUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMDI0MA==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451030240", "bodyText": "Why two, specifically? Is this two directories per disk, or is it trying to say that multiple disks can improve performance? What if you only have one cache disk, should you still create two directories on it?", "author": "electrum", "createdAt": "2020-07-07T17:31:48Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -137,7 +143,8 @@ In all cases, you should avoid using the root partition and disk of the node and\n instead attach at multiple dedicated storage devices for the cache on each node.\n The cache uses the drive up to a configurable percentage. Storage should be\n local on each coordinator and worker node. The directory needs to exist before\n-Presto starts.\n+Presto starts. We recommend using two directories to improve performance of the", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA2NDc1Mg==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451064752", "bodyText": "Add clarification", "author": "mosabua", "createdAt": "2020-07-07T18:33:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTAzMDI0MA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA3NDIyNg==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451074226", "bodyText": "How about\n\nWe recommend using multiple devices to improve performance of the cache.", "author": "electrum", "createdAt": "2020-07-07T18:51:51Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -137,7 +143,8 @@ In all cases, you should avoid using the root partition and disk of the node and\n instead attach at multiple dedicated storage devices for the cache on each node.\n The cache uses the drive up to a configurable percentage. Storage should be\n local on each coordinator and worker node. The directory needs to exist before\n-Presto starts.\n+Presto starts. We recommend using at least two directories, located on separate", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTA3NDQwNg==", "url": "https://github.com/trinodb/trino/pull/4247#discussion_r451074406", "bodyText": "drive -> disk", "author": "electrum", "createdAt": "2020-07-07T18:52:13Z", "path": "presto-docs/src/main/sphinx/connector/hive-caching.rst", "diffHunk": "@@ -137,7 +143,8 @@ In all cases, you should avoid using the root partition and disk of the node and\n instead attach at multiple dedicated storage devices for the cache on each node.\n The cache uses the drive up to a configurable percentage. Storage should be", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3fe7678fe6a50872b0c82820630fa36babcdc66b", "url": "https://github.com/trinodb/trino/commit/3fe7678fe6a50872b0c82820630fa36babcdc66b", "message": "Update hive caching documentation", "committedDate": "2020-07-07T19:34:52Z", "type": "commit"}, {"oid": "3fe7678fe6a50872b0c82820630fa36babcdc66b", "url": "https://github.com/trinodb/trino/commit/3fe7678fe6a50872b0c82820630fa36babcdc66b", "message": "Update hive caching documentation", "committedDate": "2020-07-07T19:34:52Z", "type": "forcePushed"}]}