{"pr_number": 5957, "pr_title": "Require Java 11.0.7", "pr_createdAt": "2020-11-13T19:50:36Z", "pr_url": "https://github.com/trinodb/trino/pull/5957", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523188483", "bodyText": "Do we want to say 11.0.7+?", "author": "dain", "createdAt": "2020-11-13T19:51:32Z", "path": "README.md", "diffHunk": "@@ -18,8 +18,7 @@\n ## Build requirements\n \n * Mac OS X or Linux\n-* Java 11.0.8, 64-bit\n-* Python 2.6+ (for running with the launcher script)\n+* Java 11.0.7, 64-bit", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNjMyNQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523236325", "bodyText": "probably... but you also need to clarify that it needs to be Java 11..", "author": "mosabua", "createdAt": "2020-11-13T21:15:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MzQ4NQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523243485", "bodyText": "It should build fine with newer versions, since we set the target version in the POM. We do the run the main Maven build against JDK 15 in the CI.", "author": "electrum", "createdAt": "2020-11-13T21:32:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NjQ5NQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523246495", "bodyText": "We know that the code compiles with Java 15 and I believe it works, but strictly speaking, we do not test this.", "author": "findepi", "createdAt": "2020-11-13T21:40:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI1MDg5OQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523250899", "bodyText": "These are the build requirements. We have CI tests that verify it builds using 15.", "author": "electrum", "createdAt": "2020-11-13T21:50:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI5MzIzNg==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523293236", "bodyText": "My old company came to the same conclusion about Javas before 11.07. Adapting what I wrote for them then, how about the following? Clearly, I prefer being very explicit about what is supported:\n\nJava 11.0.7 or a later Java 11 version. OpenJDK, Oracle Java, and Azul Zulu are supported.", "author": "Ordinant", "createdAt": "2020-11-14T00:00:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzE4ODQ4Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTQwNA==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523235404", "bodyText": "we should remove \"less tested\" from here, as it can be interpreted they are tested and to the best of my knowledge they are not", "author": "findepi", "createdAt": "2020-11-13T21:13:57Z", "path": "presto-docs/src/main/sphinx/installation/deployment.rst", "diffHunk": "@@ -28,8 +28,7 @@ Java Runtime Environment\n ^^^^^^^^^^^^^^^^^^^^^^^^\n \n * 64-bit required\n-* version 11 recommended (lower versions not supported, higher versions less\n-  tested)\n+* version 11.0.7 at minimum (newer major releases are less tested)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNjU5OA==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523236598", "bodyText": "I used \"not tested' in my PR", "author": "mosabua", "createdAt": "2020-11-13T21:16:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNzA5NA==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523237094", "bodyText": "We should required version 11 and mention that patch 11.0.7 or higher is needed", "author": "mosabua", "createdAt": "2020-11-13T21:17:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NTg0Mg==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523245842", "bodyText": "I'll change to \"not tested\" and say \"version 12+ not supported\"\nI don't like saying \"version 11\" and \"patch 11.0.7\" since the \"patch version\" is very specific JDK version terminology that normal users don't know about. They are just going to run java -version or go to the download page and see 11.0.9.", "author": "electrum", "createdAt": "2020-11-13T21:38:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NjQ1NQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523246455", "bodyText": "I think we can simplify this to\n\nversion 11.0.7+ (version 12+ not supported)", "author": "electrum", "createdAt": "2020-11-13T21:39:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTQwNA=="}], "type": "inlineReview"}, {"oid": "cbd98a8d3777a3083e1e3dce795d95fbaf844213", "url": "https://github.com/trinodb/trino/commit/cbd98a8d3777a3083e1e3dce795d95fbaf844213", "message": "Require Java 11.0.7+\n\nEarlier versions are affected by JDK-8206955.", "committedDate": "2020-11-13T21:40:31Z", "type": "commit"}, {"oid": "cbd98a8d3777a3083e1e3dce795d95fbaf844213", "url": "https://github.com/trinodb/trino/commit/cbd98a8d3777a3083e1e3dce795d95fbaf844213", "message": "Require Java 11.0.7+\n\nEarlier versions are affected by JDK-8206955.", "committedDate": "2020-11-13T21:40:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NzczMg==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523247732", "bodyText": "This removes the explicit call out that lower versions are not supported. We specifically added this in the past since we got multiple questions to clarify ..", "author": "mosabua", "createdAt": "2020-11-13T21:43:06Z", "path": "presto-docs/src/main/sphinx/installation/deployment.rst", "diffHunk": "@@ -28,8 +28,7 @@ Java Runtime Environment\n ^^^^^^^^^^^^^^^^^^^^^^^^\n \n * 64-bit required\n-* version 11 recommended (lower versions not supported, higher versions less\n-  tested)\n+* version 11.0.7+ (version 12+ not supported)", "originalCommit": "cbd98a8d3777a3083e1e3dce795d95fbaf844213", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2NjEzOA==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r523266138", "bodyText": "Followed up in #5958", "author": "electrum", "createdAt": "2020-11-13T22:28:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NzczMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDczMDU4NQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r524730585", "bodyText": "I think \"not supported\" in this context is confusing. The \"not supported\" for versions below 11 is not the same as the \"not supported\" for versions above 11. I think it's the subtle difference between \"The Presto software doesn't support it (i.e., it won't work)\" vs \"We don't provide support for it (it may or may not work, but you're on your own\".", "author": "martint", "createdAt": "2020-11-16T23:15:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NzczMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDc5OTM0NQ==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r524799345", "bodyText": "The current master has this clarified in a text", "author": "mosabua", "createdAt": "2020-11-17T00:18:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NzczMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDcwNzc1Mg==", "url": "https://github.com/trinodb/trino/pull/5957#discussion_r524707752", "bodyText": "it's preexisting, but shall we treat Runtime.version() as the official version?\nin some other places we use StandardSystemProperty.JAVA_VERSION.value(). Intentional?", "author": "findepi", "createdAt": "2020-11-16T22:54:31Z", "path": "presto-main/src/main/java/io/prestosql/server/PrestoSystemRequirements.java", "diffHunk": "@@ -92,8 +93,9 @@ else if (\"Mac OS X\".equals(osName)) {\n \n     private static void verifyJavaVersion()\n     {\n-        if (Runtime.version().feature() < 11) {\n-            failRequirement(\"Presto requires Java 11+ (found %s)\", Runtime.version());\n+        Version required = Version.parse(\"11.0.7\");\n+        if (Runtime.version().compareTo(required) < 0) {", "originalCommit": "cbd98a8d3777a3083e1e3dce795d95fbaf844213", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}