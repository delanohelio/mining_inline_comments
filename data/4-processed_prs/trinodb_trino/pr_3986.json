{"pr_number": 3986, "pr_title": "Test getFileBlockLocations with cache", "pr_createdAt": "2020-06-10T13:15:36Z", "pr_url": "https://github.com/trinodb/trino/pull/3986", "timeline": [{"oid": "16f0525d6fda7422e4348aeb9ef0004ff14be645", "url": "https://github.com/trinodb/trino/commit/16f0525d6fda7422e4348aeb9ef0004ff14be645", "message": "Remove unused variable", "committedDate": "2020-06-10T11:26:24Z", "type": "commit"}, {"oid": "efec35cf55c84a04c52cb3044bee971e3ce3166d", "url": "https://github.com/trinodb/trino/commit/efec35cf55c84a04c52cb3044bee971e3ce3166d", "message": "Use more accurate node id", "committedDate": "2020-06-10T13:16:03Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3MzA1Mg==", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438173052", "bodyText": "call this unwrapCachingFileSystem. getCachingFilestystem clashes with method name above.", "author": "losipiuk", "createdAt": "2020-06-10T14:36:16Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -243,6 +249,17 @@ public void closeRubix()\n         }\n     }\n \n+    private static CachingFileSystem<?> getCachingFileSystem(FileSystem fileSystem)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDEzNw==", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438174137", "bodyText": "what was the purpose of this one?", "author": "losipiuk", "createdAt": "2020-06-10T14:37:39Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -191,11 +199,7 @@ private FileSystem getCachingFileSystem(HdfsContext context)\n                 configurationInitializer,\n                 ImmutableSet.of(\n                         rubixConfigInitializer,\n-                        (dynamicConfig, ignoredContext, ignoredUri) -> {\n-                            // make sure that dummy cluster manager is used", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM3Njg2MQ==", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438376861", "bodyText": "Previously rubix native PrestoClusterManager used HTTP to get nodes. Now it can accept NodeManager, so we can provide a testing one and not use DummyClusterManager anymore", "author": "sopel39", "createdAt": "2020-06-10T20:03:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDEzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODE3NDk5Ng==", "url": "https://github.com/trinodb/trino/pull/3986#discussion_r438174996", "bodyText": "This possibly will be the same as one used for master. Shift workers by 1", "author": "losipiuk", "createdAt": "2020-06-10T14:38:50Z", "path": "presto-hive/src/test/java/io/prestosql/plugin/hive/rubix/TestRubixCaching.java", "diffHunk": "@@ -270,6 +287,42 @@ public void testCoordinatorNotJoining()\n                 .hasMessage(\"No coordinator node available\");\n     }\n \n+    @Test\n+    public void testGetBlockLocations()\n+            throws Exception\n+    {\n+        RubixConfig rubixConfig = new RubixConfig();\n+        InternalNode coordinatorNode = new InternalNode(\n+                \"master\",\n+                URI.create(\"http://\" + getLocalHost().getHostAddress() + \":8080\"),\n+                UNKNOWN,\n+                true);\n+        InternalNode workerNode1 = new InternalNode(\n+                \"worker1\",\n+                URI.create(\"http://127.0.0.1:8080\"),", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "69dd927f094d3701d629f88c41d65379962d167e", "url": "https://github.com/trinodb/trino/commit/69dd927f094d3701d629f88c41d65379962d167e", "message": "Test getFileBlockLocations with cache", "committedDate": "2020-06-10T20:05:08Z", "type": "commit"}, {"oid": "69dd927f094d3701d629f88c41d65379962d167e", "url": "https://github.com/trinodb/trino/commit/69dd927f094d3701d629f88c41d65379962d167e", "message": "Test getFileBlockLocations with cache", "committedDate": "2020-06-10T20:05:08Z", "type": "forcePushed"}]}