{"pr_number": 6246, "pr_title": "Represent VARBINARY with hex in ResultSet.getString", "pr_createdAt": "2020-12-08T10:49:16Z", "pr_url": "https://github.com/trinodb/trino/pull/6246", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzODA0Ng==", "url": "https://github.com/trinodb/trino/pull/6246#discussion_r538238046", "bodyText": "This is of course not useful for any other type backed by byte[].\nPerhaps we could realize value is an array and use java.util.Arrays#deepToString here.\n(#6248)", "author": "findepi", "createdAt": "2020-12-08T10:52:10Z", "path": "presto-jdbc/src/main/java/io/prestosql/jdbc/AbstractPrestoResultSet.java", "diffHunk": "@@ -228,7 +230,14 @@ public String getString(int columnIndex)\n             throws SQLException\n     {\n         Object value = column(columnIndex);\n-        return (value != null) ? value.toString() : null;\n+        if (value == null) {\n+            return null;\n+        }\n+        ClientTypeSignature columnTypeSignature = columnInfo(columnIndex).getColumnTypeSignature();\n+        if (TYPE_CONVERSIONS.hasConversion(columnTypeSignature.getRawType(), String.class)) {\n+            return TYPE_CONVERSIONS.convert(columnTypeSignature, value, String.class);\n+        }\n+        return value.toString();", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "9395a8d1f61020a05ede93d1b87654a447ad271f", "url": "https://github.com/trinodb/trino/commit/9395a8d1f61020a05ede93d1b87654a447ad271f", "message": "Test ResultSet with VARBINARY", "committedDate": "2020-12-09T11:33:55Z", "type": "commit"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI2MjAxMg==", "url": "https://github.com/trinodb/trino/pull/6246#discussion_r539262012", "bodyText": "Can you update the javadoc above?", "author": "losipiuk", "createdAt": "2020-12-09T12:22:53Z", "path": "presto-jdbc/src/test/java/io/prestosql/jdbc/TestJdbcVendorCompatibility.java", "diffHunk": "@@ -73,7 +74,7 @@\n  * be affected by the session timezone.  We also compare the behavior to reference JDBC drivers.\n  */\n @Test(singleThreaded = true)\n-public class TestJdbcResultSetTimezone\n+public class TestJdbcVendorCompatibility", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI4NzAzNg==", "url": "https://github.com/trinodb/trino/pull/6246#discussion_r539287036", "bodyText": "i will remove it", "author": "findepi", "createdAt": "2020-12-09T13:01:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTI2MjAxMg=="}], "type": "inlineReview"}, {"oid": "204259fa05846b49ae9882d62567c2dc57ea969e", "url": "https://github.com/trinodb/trino/commit/204259fa05846b49ae9882d62567c2dc57ea969e", "message": "Rename test class to extend its meaning", "committedDate": "2020-12-09T13:01:43Z", "type": "commit"}, {"oid": "3723bdfa479f11942529a8dace34eb816649aeab", "url": "https://github.com/trinodb/trino/commit/3723bdfa479f11942529a8dace34eb816649aeab", "message": "Represent VARBINARY with hex in ResultSet.getString", "committedDate": "2020-12-09T13:01:43Z", "type": "commit"}, {"oid": "b900a1e44d1dddce7e907a67ba6f6e05024c1775", "url": "https://github.com/trinodb/trino/commit/b900a1e44d1dddce7e907a67ba6f6e05024c1775", "message": "Improve code readability", "committedDate": "2020-12-09T13:01:43Z", "type": "commit"}, {"oid": "b900a1e44d1dddce7e907a67ba6f6e05024c1775", "url": "https://github.com/trinodb/trino/commit/b900a1e44d1dddce7e907a67ba6f6e05024c1775", "message": "Improve code readability", "committedDate": "2020-12-09T13:01:43Z", "type": "forcePushed"}]}