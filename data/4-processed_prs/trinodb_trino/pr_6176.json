{"pr_number": 6176, "pr_title": "Reduce unexpected Integer object creation", "pr_createdAt": "2020-12-02T05:50:52Z", "pr_url": "https://github.com/trinodb/trino/pull/6176", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk3ODE2Nw==", "url": "https://github.com/trinodb/trino/pull/6176#discussion_r533978167", "bodyText": "This sounds like separate change? Can you please extract this as separate commit with proper description?", "author": "kokosing", "createdAt": "2020-12-02T08:27:50Z", "path": "presto-main/src/main/java/io/prestosql/operator/PagesRTreeIndex.java", "diffHunk": "@@ -173,7 +173,7 @@ private static Envelope getEnvelope(OGCGeometry ogcGeometry)\n             }\n         });\n \n-        return matchingPositions.toIntArray(null);\n+        return matchingPositions.toIntArray();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4NzcyOQ==", "url": "https://github.com/trinodb/trino/pull/6176#discussion_r533987729", "bodyText": "ok, I'll create another commit/PR. It's just a cosmetic change as the fastutil marked toIntArray(object) deprecated.", "author": "miniway", "createdAt": "2020-12-02T08:44:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk3ODE2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4MDUwNg==", "url": "https://github.com/trinodb/trino/pull/6176#discussion_r533980506", "bodyText": "Are there other collections like that with this issue?", "author": "kokosing", "createdAt": "2020-12-02T08:31:51Z", "path": "presto-main/src/main/java/io/prestosql/operator/LookupJoinPageBuilder.java", "diffHunk": "@@ -145,7 +145,7 @@ private void appendProbeIndex(JoinProbe probe)\n     {\n         int position = probe.getPosition();\n         verify(position >= 0);\n-        int previousPosition = probeIndexBuilder.isEmpty() ? -1 : probeIndexBuilder.get(probeIndexBuilder.size() - 1);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4OTA0NQ==", "url": "https://github.com/trinodb/trino/pull/6176#discussion_r533989045", "bodyText": "Based on profiling, I haven't found it yet. I just tried to find all IntArrayList usage here", "author": "miniway", "createdAt": "2020-12-02T08:46:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4MDUwNg=="}], "type": "inlineReview"}, {"oid": "477285b8da8109fcd869a9da08273ae0698c0f89", "url": "https://github.com/trinodb/trino/commit/477285b8da8109fcd869a9da08273ae0698c0f89", "message": "Reduce unexpected Integer object creation", "committedDate": "2020-12-02T08:47:46Z", "type": "commit"}, {"oid": "477285b8da8109fcd869a9da08273ae0698c0f89", "url": "https://github.com/trinodb/trino/commit/477285b8da8109fcd869a9da08273ae0698c0f89", "message": "Reduce unexpected Integer object creation", "committedDate": "2020-12-02T08:47:46Z", "type": "forcePushed"}]}