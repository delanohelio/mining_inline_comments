{"pr_number": 3074, "pr_title": "Allocate as little memory as necessary for product tests framework", "pr_createdAt": "2020-03-11T20:28:29Z", "pr_url": "https://github.com/trinodb/trino/pull/3074", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MTIwMw==", "url": "https://github.com/trinodb/trino/pull/3074#discussion_r391491203", "bodyText": "I think it should be possible to overwrite this externally.", "author": "kokosing", "createdAt": "2020-03-12T09:23:49Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -165,6 +165,11 @@ private Environment getEnvironment()\n                                 .add(Integer.toString(TESTS_READY_PORT))\n                                 .add(\n                                         \"java\",\n+                                        \"-Xmx1g\",\n+                                        // Force Parallel GC to ensure MaxHeapFreeRatio is respected\n+                                        \"-XX:+UseParallelGC\",\n+                                        \"-XX:MinHeapFreeRatio=10\",\n+                                        \"-XX:MaxHeapFreeRatio=10\",", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5NjgzMQ==", "url": "https://github.com/trinodb/trino/pull/3074#discussion_r391496831", "bodyText": "Which ones?", "author": "findepi", "createdAt": "2020-03-12T09:34:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MTIwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUxMjUzMw==", "url": "https://github.com/trinodb/trino/pull/3074#discussion_r391512533", "bodyText": "\"-Xmx1g\",", "author": "kokosing", "createdAt": "2020-03-12T10:01:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MTIwMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTU2Nzg2NA==", "url": "https://github.com/trinodb/trino/pull/3074#discussion_r391567864", "bodyText": "discussed offline: let's revisit when need arises", "author": "findepi", "createdAt": "2020-03-12T11:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTQ5MTIwMw=="}], "type": "inlineReview"}, {"oid": "032cfb443915f258904a579104f8d461700b77ac", "url": "https://github.com/trinodb/trino/commit/032cfb443915f258904a579104f8d461700b77ac", "message": "Limit memory used by product tests' tests\n\nTests are run along with containers and tests launcher, so they should\nhave memory explicitly capped.", "committedDate": "2020-03-12T09:35:07Z", "type": "commit"}, {"oid": "5e3bc8533d0c4d0ff0616f57f12def4a1600ac85", "url": "https://github.com/trinodb/trino/commit/5e3bc8533d0c4d0ff0616f57f12def4a1600ac85", "message": "Allocate as little memory as necessary for product tests framework", "committedDate": "2020-03-12T09:35:08Z", "type": "commit"}, {"oid": "5e3bc8533d0c4d0ff0616f57f12def4a1600ac85", "url": "https://github.com/trinodb/trino/commit/5e3bc8533d0c4d0ff0616f57f12def4a1600ac85", "message": "Allocate as little memory as necessary for product tests framework", "committedDate": "2020-03-12T09:35:08Z", "type": "forcePushed"}]}