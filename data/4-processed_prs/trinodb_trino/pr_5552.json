{"pr_number": 5552, "pr_title": "Fix NPE in QueryAssertions", "pr_createdAt": "2020-10-14T08:38:28Z", "pr_url": "https://github.com/trinodb/trino/pull/5552", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYxOTk1Mg==", "url": "https://github.com/trinodb/trino/pull/5552#discussion_r505619952", "bodyText": ".map(String::valueOf)\n\n?", "author": "findepi", "createdAt": "2020-10-15T15:06:42Z", "path": "presto-main/src/test/java/io/prestosql/sql/query/QueryAssertions.java", "diffHunk": "@@ -223,7 +223,12 @@ public String toStringOf(Object object)\n                     MaterializedRow row = (MaterializedRow) object;\n \n                     return row.getFields().stream()\n-                            .map(Object::toString)\n+                            .map(field -> {\n+                                if (field == null) {\n+                                    return null;\n+                                }\n+                                return field.toString();", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ecb9d41da56c6e07f4a34d428ee54e43f702a58f", "url": "https://github.com/trinodb/trino/commit/ecb9d41da56c6e07f4a34d428ee54e43f702a58f", "message": "Fix NPE in QueryAssertions\n\nBefore this change, NullPointerException was thrown in QueryAssertions\nwhen formatting error message for mismatched query results.\nIf either the expected or the actual result contained a MaterializedRow\nhaving a null field, NPE was caused by calling `toString()` on null.", "committedDate": "2020-10-15T19:52:10Z", "type": "commit"}, {"oid": "ecb9d41da56c6e07f4a34d428ee54e43f702a58f", "url": "https://github.com/trinodb/trino/commit/ecb9d41da56c6e07f4a34d428ee54e43f702a58f", "message": "Fix NPE in QueryAssertions\n\nBefore this change, NullPointerException was thrown in QueryAssertions\nwhen formatting error message for mismatched query results.\nIf either the expected or the actual result contained a MaterializedRow\nhaving a null field, NPE was caused by calling `toString()` on null.", "committedDate": "2020-10-15T19:52:10Z", "type": "forcePushed"}]}