{"pr_number": 2842, "pr_title": "Ensure QueryCompletedEvent occurs when query fails during planning", "pr_createdAt": "2020-02-15T19:58:47Z", "pr_url": "https://github.com/trinodb/trino/pull/2842", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYxOTM3Ng==", "url": "https://github.com/trinodb/trino/pull/2842#discussion_r381619376", "bodyText": "This shouldn't be needed", "author": "electrum", "createdAt": "2020-02-20T00:08:06Z", "path": "presto-tests/src/test/java/io/prestosql/execution/TestEventListener.java", "diffHunk": "@@ -69,6 +77,22 @@ private void setUp()\n         queryRunner.installPlugin(new TestingEventListenerPlugin(generatedEvents));\n         queryRunner.installPlugin(new ResourceGroupManagerPlugin());\n         queryRunner.createCatalog(\"tpch\", \"tpch\", ImmutableMap.of(\"tpch.splits-per-node\", Integer.toString(SPLITS_PER_NODE)));\n+        queryRunner.installPlugin(new Plugin()\n+        {\n+            @Override\n+            public Iterable<ConnectorFactory> getConnectorFactories()\n+            {\n+                MockConnectorFactory connectorFactory = MockConnectorFactory.builder()\n+                        .withGetViews((session, schemaTablePrefix) -> ImmutableMap.of())", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "adb744c3aa92a9ea7ce8ef8f7fd734cf107102e2", "url": "https://github.com/trinodb/trino/commit/adb744c3aa92a9ea7ce8ef8f7fd734cf107102e2", "message": "Add StateMachine.trySet()", "committedDate": "2020-02-20T00:29:43Z", "type": "commit"}, {"oid": "a801df2664216230b49eab5a56e6c7be0c38c107", "url": "https://github.com/trinodb/trino/commit/a801df2664216230b49eab5a56e6c7be0c38c107", "message": "Ensure QueryCompletedEvent occurs when query fails during planning", "committedDate": "2020-02-20T00:32:20Z", "type": "commit"}, {"oid": "a801df2664216230b49eab5a56e6c7be0c38c107", "url": "https://github.com/trinodb/trino/commit/a801df2664216230b49eab5a56e6c7be0c38c107", "message": "Ensure QueryCompletedEvent occurs when query fails during planning", "committedDate": "2020-02-20T00:32:20Z", "type": "forcePushed"}]}