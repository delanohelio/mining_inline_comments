{"pr_number": 3995, "pr_title": "Document timestamp with precision", "pr_createdAt": "2020-06-10T23:19:46Z", "pr_url": "https://github.com/trinodb/trino/pull/3995", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTg2Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r438459863", "bodyText": "This is not yet supported in master. It's in progress: #3947", "author": "martint", "createdAt": "2020-06-10T23:23:20Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,22 +172,62 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P)``\n+^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    The default ``TIMESTAMP`` is equivalent to ``TIMESTAMP(3)`` and means that\n+    up millisecond values are included. A precision of up to 12, so picoseconds,\n+    is supported.\n+\n+    Casting to lower precision causes rounding, and to higher precision causes\n+    appended zero values.\n+\n+    The following examples illustrate the behavior::\n+\n+        SELECT TIMESTAMP('2020-06-10 15:55:23.383345');\n+        -- 2020-06-10 15:55:23.383345\n+\n+        SELECT typeof(TIMESTAMP '2020-06-10 15:55:23.383345');\n+        -- timestamp(6)\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(1));\n+         -- 2020-06-10 15:55:23.4\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(12));\n+        -- 2020-06-10 15:55:23.383345000000\n+\n ``TIMESTAMP WITH TIME ZONE``\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day with a time zone.\n     Values of this type are rendered using the time zone from the value.\n+    Equivalent to ``TIMESTAMP(3) WITH TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321 America/Los_Angeles'``\n \n+``TIMESTAMP(P) WITH TIME ZONE``", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ2MDE5Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r438460193", "bodyText": "oops ... let me take it back out..", "author": "mosabua", "createdAt": "2020-06-10T23:24:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ2MDUxMQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r438460511", "bodyText": "done", "author": "mosabua", "createdAt": "2020-06-10T23:25:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODQ1OTg2Mw=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzMTU3OA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439131578", "bodyText": "typo: langugage", "author": "martint", "createdAt": "2020-06-11T23:54:45Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the literal TIMESTAMP expression.\n+    Alternatively, langugage constructs such as ``localtimestamp(p)``, or a", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTEzMTcxMA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439131710", "bodyText": "literal TIMESTAMP -> TIMESTAMP literal", "author": "martint", "createdAt": "2020-06-11T23:55:12Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the literal TIMESTAMP expression.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzAzOQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439293039", "bodyText": "This is only reformatting change and could be separate commit.\nWhile at it, what is \"zero time\"? I guess this could be \"time default to 00:00:00\"", "author": "findepi", "createdAt": "2020-06-12T08:51:20Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -66,8 +72,8 @@ Date and Time Functions\n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n     Parses the ISO 8601 formatted date ``string``, optionally with\n-    time and time zone, into a ``timestamp with time zone``. The time defaults\n-    to zero, and the time zone defaults to the session time zone::\n+    time and time zone, into a ``timestamp with time zone``. The time\n+    defaults to zero, and the time zone defaults to the session time zone::", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNDA2MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439524060", "bodyText": "We had a change in here that I backed out .. but left format change. I will update the zero.", "author": "mosabua", "createdAt": "2020-06-12T16:31:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzAzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzU0Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439293546", "bodyText": "Would be good to mention this takes double input. Otherwise, reading the docs, it looks as if getting seond fractions was not possible with this method.\nWhile at it, we could mention this method can be used to process contemporary timestamp values with microseond precision, but no more.\ncc @martint", "author": "findepi", "createdAt": "2020-06-12T08:52:22Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTI5Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439525297", "bodyText": "Updated..", "author": "mosabua", "createdAt": "2020-06-12T16:34:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5MzU0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NDg3MQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439294871", "bodyText": "Please separate reformatting changes from the content changes.", "author": "findepi", "createdAt": "2020-06-12T08:54:56Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``zone`` for the time zone. ``unixtime`` is the number of seconds\n+    since ``1970-01-01 00:00:00``.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTQ1Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439525453", "bodyText": "Add info", "author": "mosabua", "createdAt": "2020-06-12T16:34:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NDg3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NTU4MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439295580", "bodyText": "This should be explicit that unixtime is number of seconds since 1970-01-01 00:00:00 UTC.", "author": "findepi", "createdAt": "2020-06-12T08:56:14Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +107,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``zone`` for the time zone. ``unixtime`` is the number of seconds\n+    since ``1970-01-01 00:00:00``.\n \n .. function:: from_unixtime(unixtime, hours, minutes) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is\n+    the number of seconds since ``1970-01-01 00:00:00``.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNTY4OA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439525688", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-06-12T16:34:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NTU4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NjUzNg==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439296536", "bodyText": "Is it worth documenting that p > 6 doesn't add more actual precision?\nhttps://twitter.com/findepi/status/1270445791832924160 :)", "author": "findepi", "createdAt": "2020-06-12T08:57:46Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -123,6 +132,14 @@ Date and Time Functions\n \n     Returns the current timestamp as of the start of the query.\n \n+.. data:: localtimestamp(p)\n+\n+    Returns the current :ref:`timestamp <timestamp-data-type>` as of the start\n+    of the query, with ``p`` digits of subsecond precision::\n+\n+        SELECT localtimestamp(6);\n+        -- 2020-06-10 15:55:23.383628", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNjE0NA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439526144", "bodyText": "We decided against that for now..", "author": "mosabua", "createdAt": "2020-06-12T16:35:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NjUzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NzI1NQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439297255", "bodyText": "in datetime.rst and elsewhere  we lowercase the type names.", "author": "findepi", "createdAt": "2020-06-12T08:59:10Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNjcyNQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439526725", "bodyText": "Its consistent in this doc .. if we change this we should do it as separate bulk change. So not in this PR.", "author": "mosabua", "createdAt": "2020-06-12T16:37:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5NzI1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODAyOA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298028", "bodyText": "\"so picoseconds\" sounds informal", "author": "findepi", "createdAt": "2020-06-12T09:00:40Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNjQ0MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439526440", "bodyText": "yes.. and that is fine.", "author": "mosabua", "createdAt": "2020-06-12T16:36:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODAyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODMwOQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298309", "bodyText": "wrap TIMESTAMP in `` ?", "author": "findepi", "createdAt": "2020-06-12T09:01:13Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNzE1OQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439527159", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-06-12T16:38:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODMwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODQxNA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298414", "bodyText": "function -> functions", "author": "findepi", "createdAt": "2020-06-12T09:01:29Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.\n+    Alternatively, language constructs such as ``localtimestamp(p)``, or a\n+    number of :doc:`date and time function and operators </functions/datetime>`", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyNzQ4Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439527487", "bodyText": "done", "author": "mosabua", "createdAt": "2020-06-12T16:38:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODQxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODk2Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439298963", "bodyText": "maybe explicit: \"causes rounding (not truncation)\"\nthe other part: values -> digits; but i would rather omit this.", "author": "findepi", "createdAt": "2020-06-12T09:02:46Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the TIMESTAMP literal expression.\n+    Alternatively, language constructs such as ``localtimestamp(p)``, or a\n+    number of :doc:`date and time function and operators </functions/datetime>`\n+    can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and to higher precision causes\n+    appended zero values.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyODA4NA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439528084", "bodyText": "Lets leave it in to be explicit.", "author": "mosabua", "createdAt": "2020-06-12T16:40:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI5ODk2Mw=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc3MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780770", "bodyText": "We don't normally give directives in the documentation. Instead, phrase this as\nThese functions and operators operate on :ref:`date and time data types <date-time-data-types>`.", "author": "electrum", "createdAt": "2020-06-14T00:41:41Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -2,6 +2,12 @@\n Date and Time Functions and Operators\n =====================================\n \n+Use the date and time functions and operators, detailed in the following, to", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNDU1Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440304556", "bodyText": "It would be more approachable to address the user .. do you still want me to rejig?", "author": "mosabua", "createdAt": "2020-06-15T16:37:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAwNjgzOA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441006838", "bodyText": "Yes. We want to keep the style consistent.", "author": "electrum", "createdAt": "2020-06-16T17:03:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc5OQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780799", "bodyText": "This seems to be just changing the wrapping. Please remove", "author": "electrum", "createdAt": "2020-06-14T00:42:17Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -66,8 +72,9 @@ Date and Time Functions\n .. function:: from_iso8601_timestamp(string) -> timestamp with time zone\n \n     Parses the ISO 8601 formatted date ``string``, optionally with\n-    time and time zone, into a ``timestamp with time zone``. The time defaults", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyNzEwOQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440427109", "bodyText": "It adds the milliseconds for correctness as requested by @martint", "author": "mosabua", "createdAt": "2020-06-15T20:26:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMDMwNA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441010304", "bodyText": "This formatting change makes it hard to see what actually changed. Please leave it alone except for adding the fractional seconds.", "author": "electrum", "createdAt": "2020-06-16T17:09:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMjAwMQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441032001", "bodyText": "done", "author": "mosabua", "createdAt": "2020-06-16T17:46:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDc5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg0MQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780841", "bodyText": "Leave this part alone. It's fine to say \"as a timestamp\" since the function definition gives the exact type.", "author": "electrum", "createdAt": "2020-06-14T00:43:11Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwNDExOQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440304119", "bodyText": "@martint wanted to make sure we are explicit .. so I added it as he requested. Personally I think this helps. Can you guys decide together please..", "author": "mosabua", "createdAt": "2020-06-15T16:36:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg0MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyNzQ2OA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440427468", "bodyText": "@martint specifically requested this change on all outputs ..", "author": "mosabua", "createdAt": "2020-06-15T20:27:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780860", "bodyText": "This seems unrelated to timestamp with precision. Please remove.", "author": "electrum", "createdAt": "2020-06-14T00:43:41Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyNzY4Mg==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440427682", "bodyText": "This add UTC as requested by @martint", "author": "mosabua", "createdAt": "2020-06-15T20:27:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMDk3Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441010976", "bodyText": "Please only add \"UTC\" and don't make any formatting changes. Adding data types is unrelated to timestamp precision and should be done / discussed separately.", "author": "electrum", "createdAt": "2020-06-16T17:10:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780867", "bodyText": "Same", "author": "electrum", "createdAt": "2020-06-14T00:43:50Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -101,19 +108,22 @@ Date and Time Functions\n \n     Returns a timestamp with time zone from ``timestamp`` and ``zone``.\n \n-.. function:: from_unixtime(unixtime) -> timestamp\n+.. function:: from_unixtime(unixtime) -> timestamp(3)\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime`` as a ``timestamp(3)``. ``unixtime``\n+    is the number of seconds since ``1970-01-01 00:00:00 UTC``.\n \n .. function:: from_unixtime(unixtime, zone) -> timestamp with time zone\n \n-    Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``zone`` for the time zone. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    Returns the UNIX timestamp ``unixtime``, a double as a timestamp with\n+    time zone using ``zone`` for the time zone. ``unixtime`` is the number of\n+    seconds since ``1970-01-01 00:00:00 UTC`` in ``double`` data type.\n \n .. function:: from_unixtime(unixtime, hours, minutes) -> timestamp with time zone\n \n     Returns the UNIX timestamp ``unixtime`` as a timestamp with time zone\n-    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is the number of seconds since ``1970-01-01 00:00:00``.\n+    using ``hours`` and ``minutes`` for the time zone offset. ``unixtime`` is", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyNzk4MQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440427981", "bodyText": "this add the data type as requested by @findepi", "author": "mosabua", "createdAt": "2020-06-15T20:28:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNzM3OQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440437379", "bodyText": "I am out of context. what did i request that @electrum does not enjoy?", "author": "findepi", "createdAt": "2020-06-15T20:47:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTE2MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441011160", "bodyText": "Please revert this change as it's unrelated to timestamp precision.", "author": "electrum", "createdAt": "2020-06-16T17:11:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg4Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780887", "bodyText": "Add space after comma", "author": "electrum", "createdAt": "2020-06-14T00:44:26Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -220,6 +238,12 @@ Unit              Description\n         SELECT date_diff('day', DATE '2020-03-01', DATE '2020-03-02');\n         -- 1\n \n+        SELECT date_diff('second', TIMESTAMP '2020-06-01 12:30:45.000000000',TIMESTAMP '2020-06-02 12:30:45.123456789');", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQyOTY0Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440429643", "bodyText": "done", "author": "mosabua", "createdAt": "2020-06-15T20:31:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDg4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkwNQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780905", "bodyText": "Remove the precision here, since this is a word, not a type.", "author": "electrum", "createdAt": "2020-06-14T00:44:48Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -307,9 +331,9 @@ Specifier Description\n \n     Formats ``timestamp`` as a string using ``format``.\n \n-.. function:: date_parse(string, format) -> timestamp\n+.. function:: date_parse(string, format) -> timestamp(3)\n \n-    Parses ``string`` into a timestamp using ``format``.\n+    Parses ``string`` into a timestamp(3) using ``format``.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTI2MA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031260", "bodyText": "See comment. Please remove precision.", "author": "electrum", "createdAt": "2020-06-16T17:45:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkxNQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780915", "bodyText": "Remove extra blank line", "author": "electrum", "createdAt": "2020-06-14T00:45:01Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -141,6 +141,9 @@ String\n     JSON value type, which can be a JSON object, a JSON array, a JSON number, a JSON string,\n     ``true``, ``false`` or ``null``.\n \n+", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzMTEzOA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440431138", "bodyText": "done", "author": "mosabua", "createdAt": "2020-06-15T20:34:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDkxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk2Mg==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780962", "bodyText": "Remove the duplicate description. This section should only mention that this is an alias.", "author": "electrum", "createdAt": "2020-06-14T00:45:58Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTQ1Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031457", "bodyText": "See comment", "author": "electrum", "createdAt": "2020-06-16T17:45:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk4NQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439780985", "bodyText": "We don't need to mention all the various redundant syntaxes.\n``TIMESTAMP`` is an alias for ``TIMESTAMP(3)``.", "author": "electrum", "createdAt": "2020-06-14T00:46:29Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTY5Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031696", "bodyText": "See comment", "author": "electrum", "createdAt": "2020-06-16T17:46:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MDk4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA3Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781076", "bodyText": "Change this to just TIMESTAMP(P). We can mention in the description that this type can also be written as TIMESTAMP WITHOUT TIME ZONE. However, the canonical name for the type is just TIMESTAMP, when rendered by the SQL engine (e.g., in DESCRIBE) output, so we should call it that here.", "author": "electrum", "createdAt": "2020-06-14T00:48:36Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgyMjEzNw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439822137", "bodyText": "Also, from purely human (non-scientific) perspective, TIMESTAMP WITHOUT TIME ZONE looks very similar to TIMESTAMP WITH TIME ZONE (eg has levenshtein distance of 3 with length of 27, being 88% similar).  TIMESTAMP is much easier to read.", "author": "findepi", "createdAt": "2020-06-14T11:56:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzMzQ1MQ==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440433451", "bodyText": "Yes, that bit me a few times when writing the code to support these types. It's easy to get lost in a sea of names when you have things likeTimestampWithoutTimeZoneToTimestampWithTimeZoneCast. (I didn't go that route, fwiw)", "author": "martint", "createdAt": "2020-06-15T20:39:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA5Nw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781097", "bodyText": "We are missing this second sentence in the description below.", "author": "electrum", "createdAt": "2020-06-14T00:49:15Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMTYzMA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441031630", "bodyText": "See comment", "author": "electrum", "createdAt": "2020-06-16T17:46:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTA5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTEyMA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781120", "bodyText": "This should be the opposite. WITHOUT TIME ZONE is the equivalent longer name.", "author": "electrum", "createdAt": "2020-06-14T00:49:49Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4NjA3NA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439786074", "bodyText": "Technically, no. The canonical name for the type in the SQL spec is \u201ctimestamp without time zone\u201d, even though we use the short name everywhere in Presto", "author": "martint", "createdAt": "2020-06-14T02:41:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTEyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI3NDk2Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440274963", "bodyText": "You can assume my comment means \"in Presto\".\nThe the documentation should reflect the actual usage. e.g., same with double precision. We document what exists, not what would exist if we exactly followed the specification.\nWhile I can see an argument for changing everything to use the longer name, that also seems like a tradeoff between readability/usability and being pedantic. (PostgreSQL seems to have chosen the latter in this case)", "author": "electrum", "createdAt": "2020-06-15T15:50:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTEyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDQzNTQyMw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440435423", "bodyText": "I'm not suggesting we change the names to the longer form. I was just commenting on the fact that the canonical name is actually the long form and the other version is just an alias, for the benefit of others that might see this discussion in the future.", "author": "martint", "createdAt": "2020-06-15T20:43:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTEyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE1Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781153", "bodyText": "A precision of up to 12 (picoseconds) is supported.", "author": "electrum", "createdAt": "2020-06-14T00:50:23Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE3NA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781174", "bodyText": "It's best not to wrap in the middle of a :doc: reference. Better to put it on it's own line so the entire thing can be read and verified in its entirety.", "author": "electrum", "createdAt": "2020-06-14T00:50:57Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMwMjUzMA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r440302530", "bodyText": "I just use the wrapping of VisualCode to the 80 char and it works just fine. Do you really want me to manually wrap such occurrences..", "author": "mosabua", "createdAt": "2020-06-15T16:33:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAzMjE4Mw==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441032183", "bodyText": "Yes, we format for readability, not arbitrary wrapping at 80 characters", "author": "electrum", "createdAt": "2020-06-16T17:46:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTE4Ng==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781186", "bodyText": "\"truncating\" sounds weird. Let's say\n\ncauses the value to be rounded (not truncated).", "author": "electrum", "createdAt": "2020-06-14T00:51:33Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTIwOA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781208", "bodyText": "Casting to higher precision appends zeros for the additional digits.", "author": "electrum", "createdAt": "2020-06-14T00:52:03Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to\n+    higher precision causes appended zero digits.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc4MTIxNA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r439781214", "bodyText": "Remove, since this is not implemented yet.", "author": "electrum", "createdAt": "2020-06-14T00:52:17Z", "path": "presto-docs/src/main/sphinx/language/types.rst", "diffHunk": "@@ -169,19 +172,57 @@ See also :doc:`/language/timestamp`\n \n     Example: ``TIME '01:02:03.456 America/Los_Angeles'``\n \n+.. _timestamp-data-type:\n+\n ``TIMESTAMP``\n ^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day without a time zone.\n     Values of this type are parsed and rendered in the session time zone.\n+    Equivalent to ``TIMESTAMP WITHOUT TIME ZONE``, ``TIMESTAMP(3)``, and\n+    ``TIMESTAMP(3) WITHOUT TIME ZONE``.\n \n     Example: ``TIMESTAMP '2001-08-22 03:04:05.321'``\n \n+``TIMESTAMP(P) WITHOUT TIME ZONE``\n+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n+\n+    Instant in time that includes the date and time of day without a time zone\n+    with ``P`` digits of precision for the fraction of seconds.\n+\n+    You can use ``TIMESTAMP(P)`` as an equivalent shorter name. The default\n+    ``TIMESTAMP`` is an alias for ``TIMESTAMP(3)`` and means that up to\n+    millisecond values are included. A precision of up to 12, so picoseconds, is\n+    supported.\n+\n+    You can construct a timestamp value with the ``TIMESTAMP`` literal\n+    expression. Alternatively, language constructs such as\n+    ``localtimestamp(p)``, or a number of :doc:`date and time functions and\n+    operators </functions/datetime>` can return timestamp values.\n+\n+    Casting to lower precision causes rounding, and not truncating. Casting to\n+    higher precision causes appended zero digits.\n+\n+    The following examples illustrate the behavior::\n+\n+        SELECT TIMESTAMP('2020-06-10 15:55:23.383345');\n+        -- 2020-06-10 15:55:23.383345\n+\n+        SELECT typeof(TIMESTAMP '2020-06-10 15:55:23.383345');\n+        -- timestamp(6)\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(1));\n+         -- 2020-06-10 15:55:23.4\n+\n+        SELECT cast(TIMESTAMP '2020-06-10 15:55:23.383345' as TIMESTAMP(12));\n+        -- 2020-06-10 15:55:23.383345000000\n+\n ``TIMESTAMP WITH TIME ZONE``\n ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n \n     Instant in time that includes the date and time of day with a time zone.\n     Values of this type are rendered using the time zone from the value.\n+    Equivalent to ``TIMESTAMP(3) WITH TIME ZONE``.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTQ3Mg==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441011472", "bodyText": "We could add\n, with ``3`` digits of subsecond precision.", "author": "electrum", "createdAt": "2020-06-16T17:11:45Z", "path": "presto-docs/src/main/sphinx/functions/datetime.rst", "diffHunk": "@@ -123,6 +133,14 @@ Date and Time Functions\n \n     Returns the current timestamp as of the start of the query.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTA2NzU1NA==", "url": "https://github.com/trinodb/trino/pull/3995#discussion_r441067554", "bodyText": "added", "author": "mosabua", "createdAt": "2020-06-16T18:44:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTAxMTQ3Mg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "645da88878ebab285b258be1c2de6fd082e568fe", "url": "https://github.com/trinodb/trino/commit/645da88878ebab285b258be1c2de6fd082e568fe", "message": "Document timestamp with precision", "committedDate": "2020-06-16T20:41:27Z", "type": "commit"}, {"oid": "645da88878ebab285b258be1c2de6fd082e568fe", "url": "https://github.com/trinodb/trino/commit/645da88878ebab285b258be1c2de6fd082e568fe", "message": "Document timestamp with precision", "committedDate": "2020-06-16T20:41:27Z", "type": "forcePushed"}]}