{"pr_number": 4934, "pr_title": "Allow configuring HDFS replication factor directly in hive.properties", "pr_createdAt": "2020-08-22T10:53:50Z", "pr_url": "https://github.com/trinodb/trino/pull/4934", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMzE0Ng==", "url": "https://github.com/trinodb/trino/pull/4934#discussion_r475123146", "bodyText": "Use primitive type to avoid object allocation.", "author": "phd3", "createdAt": "2020-08-22T19:31:57Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HdfsConfig.java", "diffHunk": "@@ -49,6 +49,7 @@\n     private HostAndPort socksProxy;\n     private boolean wireEncryptionEnabled;\n     private int fileSystemMaxCacheSize = 1000;\n+    private Integer dfsReplication;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzAyODQ0NQ==", "url": "https://github.com/trinodb/trino/pull/4934#discussion_r503028445", "bodyText": "dropped in favor of #4934 (comment)", "author": "phd3", "createdAt": "2020-10-12T04:07:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTEyMzE0Ng=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzAyNzEzMA==", "url": "https://github.com/trinodb/trino/pull/4934#discussion_r503027130", "bodyText": "nit: I think it'd be good to still want to have the @Min(1) annotation, so that invalid values (eg. 0) can be detected during server startup. @agrawalreetika thoughts?\n(The annotation seems to work for Integer class. It also lets null objects go through.)", "author": "phd3", "createdAt": "2020-10-12T04:01:27Z", "path": "presto-hive/src/main/java/io/prestosql/plugin/hive/HdfsConfig.java", "diffHunk": "@@ -216,4 +217,17 @@ public HdfsConfig setFileSystemMaxCacheSize(int fileSystemMaxCacheSize)\n         this.fileSystemMaxCacheSize = fileSystemMaxCacheSize;\n         return this;\n     }\n+\n+    public Integer getDfsReplication()\n+    {\n+        return dfsReplication;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc0OTEyMQ==", "url": "https://github.com/trinodb/trino/pull/4934#discussion_r505749121", "bodyText": "Thanks, @phd3 for your suggestion. This looks like a very valid to cover to avoid null.", "author": "agrawalreetika", "createdAt": "2020-10-15T18:19:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzAyNzEzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzAyNzU5Ng==", "url": "https://github.com/trinodb/trino/pull/4934#discussion_r503027596", "bodyText": "nit: file system would be better for the documentation IMO.", "author": "phd3", "createdAt": "2020-10-12T04:03:54Z", "path": "presto-docs/src/main/sphinx/connector/hive.rst", "diffHunk": "@@ -232,6 +232,8 @@ Property Name                                      Description\n \n ``hive.hdfs.presto.keytab``                        HDFS client keytab location.\n \n+``hive.dfs.replication``                           Hadoop fileSystem replication factor.", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e4d8693df16ac5e65f70dec3d4e648eca57f45f7", "url": "https://github.com/trinodb/trino/commit/e4d8693df16ac5e65f70dec3d4e648eca57f45f7", "message": "Allow configuring HDFS replication factor directly in hive.properties", "committedDate": "2020-10-15T18:20:08Z", "type": "commit"}, {"oid": "e4d8693df16ac5e65f70dec3d4e648eca57f45f7", "url": "https://github.com/trinodb/trino/commit/e4d8693df16ac5e65f70dec3d4e648eca57f45f7", "message": "Allow configuring HDFS replication factor directly in hive.properties", "committedDate": "2020-10-15T18:20:08Z", "type": "forcePushed"}]}