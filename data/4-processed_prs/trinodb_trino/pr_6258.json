{"pr_number": 6258, "pr_title": "Add 348 release notes", "pr_createdAt": "2020-12-08T18:49:29Z", "pr_url": "https://github.com/trinodb/trino/pull/6258", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIzNjIyMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539236220", "bodyText": "@findepi Did it happen always? What was returned previously?", "author": "sopel39", "createdAt": "2020-12-09T11:41:35Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,60 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIzODEyNQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539238125", "bodyText": "Maybe\nPreviously cache did not keep information whether table exists and remote database was always queried for table existence", "author": "sopel39", "createdAt": "2020-12-09T11:44:34Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,60 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata information caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors. Previously cache did not \n+  store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4NjkzMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539486930", "bodyText": "What are \"filtered aggregations\"?", "author": "losipiuk", "createdAt": "2020-12-09T17:07:47Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,60 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU4OTgwMg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539589802", "bodyText": "https://prestosql.io/docs/current/functions/aggregate.html#filtering-during-aggregation", "author": "kokosing", "createdAt": "2020-12-09T19:35:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4NjkzMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzMzQzNQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539633435", "bodyText": "Thanks. Maybe we should quote the syntax in the release notes:\nFix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax.", "author": "losipiuk", "createdAt": "2020-12-09T20:43:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ4NjkzMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU5MDA2Ng==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539590066", "bodyText": "Is this the way to do nested indentation?", "author": "kokosing", "createdAt": "2020-12-09T19:35:50Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MzM3OQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540493379", "bodyText": "How about\nFix cache invalidation by removing entries for all users, not only for the user running the query. ({issue}`6167`)", "author": "phd3", "createdAt": "2020-12-10T21:01:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU5MDA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU0MTgyOQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540541829", "bodyText": "Since the top level item is the only one .. just make that a separate sentence and then use the follow up ones as normal list", "author": "mosabua", "createdAt": "2020-12-10T22:24:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU5MDA2Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2MDY0MA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540760640", "bodyText": "@phd3 \" Fix cache invalidation ...\" doesn't describe the problem for the user. Is it perf improvement (better caching) or correctness, or robustness fix?", "author": "findepi", "createdAt": "2020-12-11T08:07:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTU5MDA2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzNDE4NA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539634184", "bodyText": "s/reporting/being reported/?", "author": "losipiuk", "createdAt": "2020-12-09T20:44:42Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzODE2Mw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539638163", "bodyText": "I feel some commas missing in this sentence. native-english-speaker needed :)", "author": "losipiuk", "createdAt": "2020-12-09T20:51:07Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNDYxMQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540534611", "bodyText": "I am not sure what this actually means so I cant reword.. can you maybe explain?", "author": "mosabua", "createdAt": "2020-12-10T22:11:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzODE2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2Mzk1Mw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541763953", "bodyText": "How about Improve performance of symlink tables", "author": "dain", "createdAt": "2020-12-12T19:54:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzODE2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MTE5OA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539641198", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n          \n          \n            \n            * Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)", "author": "losipiuk", "createdAt": "2020-12-09T20:56:03Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MTI5OA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539641298", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n          \n          \n            \n            * Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)", "author": "losipiuk", "createdAt": "2020-12-09T20:56:14Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MTYwNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539641606", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              are located in same directory. ({issue}`6158`)\n          \n          \n            \n              are located in the same directory. ({issue}`6158`)", "author": "losipiuk", "createdAt": "2020-12-09T20:56:46Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MjU1Mw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539642553", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n          \n          \n            \n              * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)\n          \n          \n            \n              * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)\n          \n          \n            \n              * Previously cache did not store information if table exists and it was always verifying that in the remote database.  ({issue}`6081`)\n          \n          \n            \n              * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)\n          \n          \n            \n              * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)", "author": "losipiuk", "createdAt": "2020-12-09T20:58:16Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MzI0Nw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539643247", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n          \n          \n            \n            * Fix failure when reading a `timestamp` or `timestamp with time zone` value with a second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n          \n      \n    \n    \n  \n\nI am not sure though", "author": "losipiuk", "createdAt": "2020-12-09T20:59:26Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDM3NTAxOQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540375019", "bodyText": "Actually, \"with seconds fraction\" sounds better.", "author": "martint", "createdAt": "2020-12-10T17:50:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY0MzI0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4Mjg0NQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539682845", "bodyText": "Can this be described more from user perspective?\nThis is actually \"Fix potential query failures when using caching\" situation but the wording doesn't apparently communicate this.", "author": "findepi", "createdAt": "2020-12-09T22:05:10Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTY4MzI0Mg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r539683242", "bodyText": "Can this be described more from user perspective?\nThis is actually \"Fix potential query failures -- eg SELECT * seeing a column that has already been removed -- when using caching\" situation but the wording doesn't apparently communicate this.", "author": "findepi", "createdAt": "2020-12-09T22:05:50Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA5OTMyMQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540099321", "bodyText": "Remove redundant )) \u2192 )", "author": "ebyhr", "createdAt": "2020-12-10T11:39:26Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,62 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain filtered aggregations and outer joins. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats reporting in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with second fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+\n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifing that in remote database.  ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for diffent session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)\n+\n+## SPI Changes\n+\n+* Change `SystemAccessControl#filterColumns` and `ConnectorAccessControl#filterColumns` method to accept a set of \n+  column names and return a set of visible column names. ({issue}`6084`))", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4NjQyMw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540486423", "bodyText": "join statements ?", "author": "mosabua", "createdAt": "2020-12-10T20:48:54Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4Njg5OQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540486899", "bodyText": "remove redundant \"in Web UI\"", "author": "mosabua", "createdAt": "2020-12-10T20:49:43Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4Nzk4MA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540487980", "bodyText": "Should we call this out more specifically as a breaking change for users of the JDBC driver?", "author": "mosabua", "createdAt": "2020-12-10T20:51:43Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4MzM2MQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542583361", "bodyText": "I think it is reasonable to mark the bullet with something like Warning: incompatible change or Warning: behavior change. Not sure what wording should be used here.", "author": "losipiuk", "createdAt": "2020-12-14T17:49:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4Nzk4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4NDUzNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542584536", "bodyText": "For the future: maybe we should have some graphical representation to mark notes which introduce backward incompatible changes?", "author": "losipiuk", "createdAt": "2020-12-14T17:51:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4Nzk4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4ODg5OA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540488898", "bodyText": "Again.. do we need to call this out as breaking change?", "author": "mosabua", "createdAt": "2020-12-10T20:53:15Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4NTE0MQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542585141", "bodyText": "Same here.", "author": "losipiuk", "createdAt": "2020-12-14T17:52:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4ODg5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTIxOQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540489219", "bodyText": "Should we add what it does now?", "author": "mosabua", "createdAt": "2020-12-10T20:53:51Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2OTM4NQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540769385", "bodyText": "Yeah I guess.\nMaybe instead sth like this:\n`ResultSetMetaData.getColumnType`now returns `java.sql.Types.TIMESTAMP_WITH_TIMEZONE` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`.", "author": "losipiuk", "createdAt": "2020-12-11T08:23:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTIxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2OTgzMw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540769833", "bodyText": "@findepi should we add similar entry for time with time zone?", "author": "losipiuk", "createdAt": "2020-12-11T08:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTIxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc5MzgyMQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540793821", "bodyText": "Yes, both shoulkd be covered", "author": "findepi", "createdAt": "2020-12-11T09:05:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTIxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2MzQzOQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542263439", "bodyText": "@martint can you please add similar one for time with time zone?\nsorry for missing it in the RN issue", "author": "findepi", "createdAt": "2020-12-14T10:11:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTIxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4OTQwMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540489400", "bodyText": "lowercase geospatial", "author": "mosabua", "createdAt": "2020-12-10T20:54:07Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MjcwOA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540492708", "bodyText": "lowercase geospatial", "author": "mosabua", "createdAt": "2020-12-10T20:59:56Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ4NzU3NQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540487575", "bodyText": "how about in stage performance view -> on the Stage Performance page ?", "author": "phd3", "createdAt": "2020-12-10T20:51:02Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQ5MDcwMw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540490703", "bodyText": "method --> methods", "author": "phd3", "createdAt": "2020-12-10T20:56:26Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifying that in the remote database. ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)\n+\n+## SPI Changes\n+\n+* Change `SystemAccessControl#filterColumns` and `ConnectorAccessControl#filterColumns` method to accept a set of ", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUxODY3MA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540518670", "bodyText": "Uppercase \"Hive connector\"", "author": "mosabua", "createdAt": "2020-12-10T21:43:59Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNDg1MQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540534851", "bodyText": "rather than staged", "author": "mosabua", "createdAt": "2020-12-10T22:12:08Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNTAzNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540535036", "bodyText": "This feature is disabled by default, and", "author": "mosabua", "createdAt": "2020-12-10T22:12:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNDg1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNTQ0Nw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540535447", "bodyText": "also .. is this property documented in https://prestosql.io/docs/current/connector/hive-s3.html ?", "author": "mosabua", "createdAt": "2020-12-10T22:13:08Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNTcyMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540535720", "bodyText": "Break up into two sentenced maybe?", "author": "mosabua", "createdAt": "2020-12-10T22:13:37Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3MjAwMg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541772002", "bodyText": "maybe?\nReduce load on metastore when background cache refresh is enabled by not refreshing partition metadata and statistics in the background.", "author": "dain", "createdAt": "2020-12-12T20:09:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNTcyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNjAwNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540536006", "bodyText": "is this documented in hive.rst ?", "author": "mosabua", "createdAt": "2020-12-10T22:14:05Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3NDcyMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540774720", "bodyText": "nope", "author": "losipiuk", "createdAt": "2020-12-11T08:32:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDUzNjAwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU0MjAyNw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540542027", "bodyText": "comma: if tables exists, and", "author": "mosabua", "createdAt": "2020-12-10T22:25:14Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifying that in the remote database. ({issue}`6081`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU0MjMyMQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540542321", "bodyText": "comma: for all users, not only for the user...", "author": "mosabua", "createdAt": "2020-12-10T22:25:49Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifying that in the remote database. ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDU0MjYzMg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540542632", "bodyText": "comma: column names, and return..", "author": "mosabua", "createdAt": "2020-12-10T22:26:32Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain join. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization in Web UI. ({issue}`5355`)\n+* Fix invalid operator stats being reported in stage performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` Geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to hive connector split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staging to a local temporary file. This feature is disabled by default and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists and it was always verifying that in the remote database. ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)\n+\n+## SPI Changes\n+\n+* Change `SystemAccessControl#filterColumns` and `ConnectorAccessControl#filterColumns` method to accept a set of \n+  column names and return a set of visible column names. ({issue}`6084`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcxNDkxNA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540714914", "bodyText": "Can we move SPI changes after General Changes ? Sometime it might be skipped.", "author": "Praveen2112", "createdAt": "2020-12-11T06:13:45Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists, and it was always verifying that in the remote database. ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)\n+  * Fix cache invalidation to remove entries for all users not only for the user that is running the query. ({issue}`6167`)\n+\n+## SPI Changes", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2MTM1Mw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540761353", "bodyText": "I think we usally have them at the bottom", "author": "findepi", "createdAt": "2020-12-11T08:08:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcxNDkxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc2NTk4OA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540765988", "bodyText": "I think those should be at the bottom. Most consumers of Presto do not care much about those.", "author": "losipiuk", "createdAt": "2020-12-11T08:17:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDcxNDkxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3MjQzOA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540772438", "bodyText": "What is the user visible effect? Performance improvement? If so we should just state that IMO. Maybe we should drop that point at all if it is negligible.", "author": "losipiuk", "createdAt": "2020-12-11T08:28:42Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4Nzc4MA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541087780", "bodyText": "@electrum", "author": "martint", "createdAt": "2020-12-11T16:54:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3MjQzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3Mjk3Nw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541772977", "bodyText": "It is a performance improvement, but I believe it is not much. Maybe drop this entirelly?", "author": "dain", "createdAt": "2020-12-12T20:15:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3MjQzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3NDE3Mw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r540774173", "bodyText": "Can we express this more in terms of user visible effects? Is a broader set of expressions pushed down?  Can we classify those somehow here?", "author": "losipiuk", "createdAt": "2020-12-11T08:31:40Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4Nzk5Ng==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541087996", "bodyText": "@phd3", "author": "martint", "createdAt": "2020-12-11T16:55:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3NDE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1Njc5Nw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541156797", "bodyText": "@losipiuk How about the following? Or may be even just the first sentence of it?\nImprove performance of queries containing filters on non-partition columns. Such filters are now used for optimizing  split generation and table scan.  ({issue}`4932`)", "author": "phd3", "createdAt": "2020-12-11T18:51:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3NDE3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjI2MDkzOA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542260938", "bodyText": "Looks good to me. Thanks.", "author": "losipiuk", "createdAt": "2020-12-14T10:07:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc3NDE3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc1ODc5NA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541758794", "bodyText": "Maybe just Fix invalid operator stats in Stage Performance view. ({issue}6114)", "author": "dain", "createdAt": "2020-12-12T19:46:38Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2MzUzNQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541763535", "bodyText": "Can we say what the new rendering is?", "author": "dain", "createdAt": "2020-12-12T19:54:22Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4NjE0MA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542586140", "bodyText": "Or just say. Drop rendering of fake field names for ``row`` values with unnamed fields.", "author": "losipiuk", "createdAt": "2020-12-14T17:53:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2MzUzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2NTMxMg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541765312", "bodyText": "Add deserializer class name to split information exposed to the event listener.?", "author": "dain", "createdAt": "2020-12-12T19:56:55Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjAxMzIwNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542013206", "bodyText": "the suggestion looks good.", "author": "phd3", "createdAt": "2020-12-13T21:50:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2NTMxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc2NjExOQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541766119", "bodyText": "I say we just merg this into the line above about \"scheduler latency\", and just say \"symlink table are better now\"", "author": "dain", "createdAt": "2020-12-12T19:58:06Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3MzE0Nw==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541773147", "bodyText": "Session properties are now considered when caching metadata", "author": "dain", "createdAt": "2020-12-12T20:16:52Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats being reported in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Consider session properties when caching metadata. ({issue}`6167`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+* Fix cache entries invalidation, so entries are removed for all users, not only the one that was running the query. ({issue}`6167`)\n+\n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Reduce scheduling latency for queries where scanned files that are referenced by symlinks\n+  are located in the same directory. ({issue}`6158`)\n+* Add deserializer class name to split information, which is exposed through the event listener. ({issue}`6006`)\n+* Improve parallelism for queries where scanned files are referenced by symlinks. ({issue}`6213`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when metastore caching is enabled with background refresh\n+  by removing background refresh for partition metadata and statistics. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+    \n+## Iceberg Connector Changes\n+\n+* Optimize predicate pushdown by using filters on non-partition columns during split generation and table scan. ({issue}`4932`)\n+* Remove extra file system stat call when opening files. ({issue}`6174`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors:\n+  * Previously cache did not store information if table exists, and it was always verifying that in the remote database. ({issue}`6081`)\n+  * Consider session properties when caching metadata, so there are different cache entries for different session properties. ({issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTc3NjIxNg==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r541776216", "bodyText": "Add:\n* Improve performance of top-n queries. ({issue}`6072`)", "author": "dain", "createdAt": "2020-12-12T20:37:23Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,81 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzOTI2Ng==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542439266", "bodyText": "I am not sure if this is too detailed entry. Maybe we should just remove it?", "author": "kokosing", "createdAt": "2020-12-14T14:45:34Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,86 @@\n+# Release 348 (XX Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Reduce memory pressure and improve performance of queries that contain joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix duplicate call to event listener on query completion, if query failed early during preparation. ({issue}`6103`)\n+* Support arbitrary query in `SHOW STATS`. ({issue}`3109`)\n+* Output of `SHOW STATS` is changed ({issue}`3109`): ", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjUzNDQyMA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542534420", "bodyText": "Yes, let's remove it.", "author": "martint", "createdAt": "2020-12-14T16:43:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQzOTI2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4MDk4OA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542580988", "bodyText": "This description is long and still does not pass all the information needed to do the actual call (what value of java.sql.Types should be used).\nI think we should either make it shorter; like:\nExtend `PreparedStatement.setObject(int, Object, int)` to allow setting `time` and `timestamp` values with precision higher than nanoseconds. \nThis can be done via `String` object representing valid SQL literal.\n\nOr extend the alongside... part.\ncc: @findepi", "author": "losipiuk", "createdAt": "2020-12-14T17:46:00Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,89 @@\n+# Release 348 (14 Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Support `SHOW STATS` for arbitrary queries. ({issue}`3109`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Improve performance of `ORDER BY ... LIMIT` queries. ({issue}`6072`)\n+* Reduce memory pressure and improve performance of queries involving joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix incorrect query results when using `timestamp with time zone` constants with precision higher than 3 \n+  describing same point in time but in different zones. ({issue}`6318`)\n+* Fix duplicate query completion events if query fails early. ({issue}`6103`)\n+* Fix query failure when views are accessed and current session does not\n+  specify default schema and catalog. ({issue}`6294`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Accept `java.time.LocalDate` in `PreparedStatement.setObject(int, Object)`. ({issue}`6301`)\n+* Extend `PreparedStatement.setObject(int, Object, int)` to allow setting `time` and `timestamp` values with precision higher than nanoseconds. ", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4NjkwOA==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542586908", "bodyText": "User visible effect?", "author": "losipiuk", "createdAt": "2020-12-14T17:54:36Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,89 @@\n+# Release 348 (14 Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Support `SHOW STATS` for arbitrary queries. ({issue}`3109`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Improve performance of `ORDER BY ... LIMIT` queries. ({issue}`6072`)\n+* Reduce memory pressure and improve performance of queries involving joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix incorrect query results when using `timestamp with time zone` constants with precision higher than 3 \n+  describing same point in time but in different zones. ({issue}`6318`)\n+* Fix duplicate query completion events if query fails early. ({issue}`6103`)\n+* Fix query failure when views are accessed and current session does not\n+  specify default schema and catalog. ({issue}`6294`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Accept `java.time.LocalDate` in `PreparedStatement.setObject(int, Object)`. ({issue}`6301`)\n+* Extend `PreparedStatement.setObject(int, Object, int)` to allow setting `time` and `timestamp` values with precision higher than nanoseconds. \n+  To set `time` or `timestamp` value a `String` should be provided with correct SQL literal representation of the value, alongside with `java.sql.Types`\n+  type constant. ({issue}`6300`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Report precision of the `time(p)`, `time(p) with time zone`,  `timestamp(p)` and `timestamp(p) with time zone` in the `DECIMAL_DIGITS` column\n+  in the result set returned from `DatabaseMetaData#getColumns`. ({issue}`6307`)\n+* Fix the value of the `DATA_TYPE` column for `time(p)` and `time(p) with time zone` in the result set returned from `DatabaseMetaData#getColumns`.  ({issue}`6307`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix `ResultSetMetaData.getColumnType` for `time with time zone`. Previously the type was miscategorized as `java.sql.Types.TIME`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+  \n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU4Nzc3NQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542587775", "bodyText": "It seems to me we should merge this point with one above and just use Reduce load on metastore when background cache refresh is enabled as description.", "author": "losipiuk", "createdAt": "2020-12-14T17:55:48Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,89 @@\n+# Release 348 (14 Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Support `SHOW STATS` for arbitrary queries. ({issue}`3109`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Improve performance of `ORDER BY ... LIMIT` queries. ({issue}`6072`)\n+* Reduce memory pressure and improve performance of queries involving joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix incorrect query results when using `timestamp with time zone` constants with precision higher than 3 \n+  describing same point in time but in different zones. ({issue}`6318`)\n+* Fix duplicate query completion events if query fails early. ({issue}`6103`)\n+* Fix query failure when views are accessed and current session does not\n+  specify default schema and catalog. ({issue}`6294`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Accept `java.time.LocalDate` in `PreparedStatement.setObject(int, Object)`. ({issue}`6301`)\n+* Extend `PreparedStatement.setObject(int, Object, int)` to allow setting `time` and `timestamp` values with precision higher than nanoseconds. \n+  To set `time` or `timestamp` value a `String` should be provided with correct SQL literal representation of the value, alongside with `java.sql.Types`\n+  type constant. ({issue}`6300`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Report precision of the `time(p)`, `time(p) with time zone`,  `timestamp(p)` and `timestamp(p) with time zone` in the `DECIMAL_DIGITS` column\n+  in the result set returned from `DatabaseMetaData#getColumns`. ({issue}`6307`)\n+* Fix the value of the `DATA_TYPE` column for `time(p)` and `time(p) with time zone` in the result set returned from `DatabaseMetaData#getColumns`.  ({issue}`6307`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix `ResultSetMetaData.getColumnType` for `time with time zone`. Previously the type was miscategorized as `java.sql.Types.TIME`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+  \n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when background cache refresh is enabled. Partition metadata and statistics are ", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5MDE4MQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542590181", "bodyText": "It would be nice to capture shortly what is the nature of fix? Was cache not working? Or misbehave? Can it be done using single sentence?", "author": "losipiuk", "createdAt": "2020-12-14T17:59:11Z", "path": "presto-docs/src/main/sphinx/release/release-348.md", "diffHunk": "@@ -0,0 +1,89 @@\n+# Release 348 (14 Dec 2020)\n+\n+## General Changes\n+\n+* Add support for `DISTINCT` clause in aggregations within correlated subqueries. ({issue}`5904`)\n+* Support `SHOW STATS` for arbitrary queries. ({issue}`3109`)\n+* Improve query performance by reducing worker to worker communication overhead. ({issue}`6126`)\n+* Improve performance of `ORDER BY ... LIMIT` queries. ({issue}`6072`)\n+* Reduce memory pressure and improve performance of queries involving joins. ({issue}`6176`)\n+* Fix ``EXPLAIN ANALYZE`` for certain queries that contain broadcast join. ({issue}`6115`)\n+* Fix planning failures for queries that contain outer joins and aggregations using `FILTER (WHERE <condition>)` syntax. ({issue}`6141`)\n+* Fix incorrect results when correlated subquery in join contains aggregation functions such as `array_agg` or `checksum`. ({issue}`6145`)\n+* Fix incorrect query results when using `timestamp with time zone` constants with precision higher than 3 \n+  describing same point in time but in different zones. ({issue}`6318`)\n+* Fix duplicate query completion events if query fails early. ({issue}`6103`)\n+* Fix query failure when views are accessed and current session does not\n+  specify default schema and catalog. ({issue}`6294`)\n+\n+## Web UI\n+\n+* Add support for OAuth2 authorization. ({issue}`5355`)\n+* Fix invalid operator stats in Stage Performance view. ({issue}`6114`)\n+\n+## JDBC Driver Changes\n+\n+* Allow reading `timestamp with time zone` value as `ZonedDateTime` using `ResultSet.getObject(int column, Class<?> type)` method. ({issue}`307`)\n+* Accept `java.time.LocalDate` in `PreparedStatement.setObject(int, Object)`. ({issue}`6301`)\n+* Extend `PreparedStatement.setObject(int, Object, int)` to allow setting `time` and `timestamp` values with precision higher than nanoseconds. \n+  To set `time` or `timestamp` value a `String` should be provided with correct SQL literal representation of the value, alongside with `java.sql.Types`\n+  type constant. ({issue}`6300`)\n+* Change representation of a `row` value. `ResultSet.getObject` now returns an instance of `io.prestosql.jdbc.Row` class, which better represents\n+  the returned value. Previously a `row` value was represented as a `Map` instance, with unnamed fields being named like `field0`, `field1`, etc. \n+  You can access the previous behavior by invoking `getObject(column, Map.class)` on the `ResultSet` object. ({issue}`4588`)\n+* Represent `varbinary` value using hex string representation in `ResultSet.getString`. Previously the return value was useless, similar to `\"B@2de82bf8\"`. ({issue}`6247`)\n+* Report precision of the `time(p)`, `time(p) with time zone`,  `timestamp(p)` and `timestamp(p) with time zone` in the `DECIMAL_DIGITS` column\n+  in the result set returned from `DatabaseMetaData#getColumns`. ({issue}`6307`)\n+* Fix the value of the `DATA_TYPE` column for `time(p)` and `time(p) with time zone` in the result set returned from `DatabaseMetaData#getColumns`.  ({issue}`6307`)\n+* Fix failure when reading a `timestamp` or `timestamp with time zone` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6147`)\n+* Fix failure when reading a `time` value with seconds fraction greater than or equal to 999999999500 picoseconds. ({issue}`6204`)\n+* Fix element representation in arrays returned from `ResultSet.getArray`, making it consistent with `ResultSet.getObject`.\n+  Previously the elements were represented using internal client representation (e.g. `String`). ({issue}`6048`)\n+* Fix `ResultSetMetaData.getColumnType` for `timestamp with time zone`. Previously the type was miscategorized as `java.sql.Types.TIMESTAMP`. ({issue}`6251`)\n+* Fix `ResultSetMetaData.getColumnType` for `time with time zone`. Previously the type was miscategorized as `java.sql.Types.TIME`. ({issue}`6251`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned in the `ResultSet`. ({issue}`6240`)\n+  \n+## CLI Changes\n+\n+* Fix rendering of `row` values with unnamed fields. Previously they were printed using fake field names like `field0`, `field1`, etc. ({issue}`4587`)\n+* Fix query progress reporting. ({issue}`6119`)\n+* Fix failure when an instance of `SphericalGeography` geospatial type is returned to the client. ({issue}`6238`)\n+\n+## Hive Connector Changes\n+\n+* Allow configuring S3 endpoint in security mapping. ({issue}`3869`)\n+* Add support for S3 streaming uploads. Data is uploaded to S3 as it is written, rather\n+  than staged to a local temporary file. This feature is disabled by default, and can be enabled\n+  using the `hive.s3.streaming.enabled` configuration property. ({issue}`3712`, {issue}`6201`)\n+* Decrease default refresh thread count for metastore cache. ({issue}`6156`)\n+* Reduce load on metastore when background cache refresh is enabled. Partition metadata and statistics are \n+  no longer refreshed in the background. ({issue}`6101`)\n+* Verify that data is in the correct bucket file when reading bucketed tables.\n+  This is enabled by default, as incorrect bucketing can cause incorrect query results,\n+  but can be disabled using the `hive.validate-bucketing` configuration property\n+  or the `validate_bucketing` session property. ({issue}`6012`)\n+* Allow fallback to legacy Hive view translation logic via `hive.legacy-hive-view-translation` config property or \n+  `legacy_hive_view_translation` session property. ({issue}`6195 `)\n+* Add deserializer class name to split information exposed to the event listener. ({issue}`6006`)\n+* Improve performance when querying tables that contain symlinks. ({issue}`6158`, {issue}`6213`)\n+    \n+## Iceberg Connector Changes\n+\n+* Improve performance of queries containing filters on non-partition columns. Such filters are now used \n+  for optimizing split generation and table scan.  ({issue}`4932`)\n+* Add support for Google Cloud Storage and Azure Storage. ({issue}`6186`)\n+\n+## Kafka Connector Changes\n+\n+* Allow writing `timestamp with time zone` values into columns using `milliseconds-since-epoch` or \n+  `seconds-since-epoch` JSON encoders. ({issue}`6074`)\n+\n+## Other Connector Changes\n+\n+* Fix table metadata caching for PostgreSQL, MySQL, SQL Server, Redshift, MemSQL and Phoenix connectors. ({issue}`6081`, {issue}`6167`)", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mjk3ODAyMQ==", "url": "https://github.com/trinodb/trino/pull/6258#discussion_r542978021", "bodyText": "I changed it to \"Fix ineffective table metadata caching...\"", "author": "martint", "createdAt": "2020-12-15T01:36:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjU5MDE4MQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "458cea57e2fbfbf898081c0b02b506e3c8abe15c", "url": "https://github.com/trinodb/trino/commit/458cea57e2fbfbf898081c0b02b506e3c8abe15c", "message": "Add 348 release notes", "committedDate": "2020-12-15T01:42:42Z", "type": "commit"}, {"oid": "458cea57e2fbfbf898081c0b02b506e3c8abe15c", "url": "https://github.com/trinodb/trino/commit/458cea57e2fbfbf898081c0b02b506e3c8abe15c", "message": "Add 348 release notes", "committedDate": "2020-12-15T01:42:42Z", "type": "forcePushed"}]}