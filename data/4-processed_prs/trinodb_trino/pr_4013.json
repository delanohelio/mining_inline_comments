{"pr_number": 4013, "pr_title": "Add pass-through query documentation", "pr_createdAt": "2020-06-12T18:16:38Z", "pr_url": "https://github.com/trinodb/trino/pull/4013", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NTcwOQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439585709", "bodyText": "DSL. Also, I wouldn't abbreviate ES", "author": "martint", "createdAt": "2020-06-12T18:42:36Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,25 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `ES Query DLS", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MDgzOA==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439590838", "bodyText": "Done", "author": "mosabua", "createdAt": "2020-06-12T18:54:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NTcwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NjMyMA==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439586320", "bodyText": "The result is VARCHAR, not JSON, but it contains the JSON payload returned by Elasticsearch, and can be processed with the built-in JSON functions in presto (https://prestosql.io/docs/current/functions/json.html)", "author": "martint", "createdAt": "2020-06-12T18:43:56Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,25 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `ES Query DLS\n+<https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html>`_\n+in your SQL query.\n+\n+The results can then be used in any SQL statement, wrapping the ES query. The\n+syntax extends the syntax of the enhanced ES table names with the following::\n+\n+    SELECT * FROM es.default.\"<index>$query:<es-query>\"\n+\n+The ES query string ``es-query`` is base32-encoded to avoid having to deal with\n+escaping quotes and case sensitivity issues in table identifiers.\n+\n+The result of these query tables is a table with a single row and a single\n+column named ``result`` of type JSON.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MDgxMQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439590811", "bodyText": "Updated", "author": "mosabua", "createdAt": "2020-06-12T18:54:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU4NjMyMA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MjUzOQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439592539", "bodyText": "\"the Elasticsearch query\"", "author": "martint", "createdAt": "2020-06-12T18:57:49Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,27 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `Elasticsearch Query DLS\n+<https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html>`_\n+in your SQL query.\n+\n+The results can then be used in any SQL statement, wrapping the ES query. The", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MjU3MQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439592571", "bodyText": "DSL", "author": "martint", "createdAt": "2020-06-12T18:57:54Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,27 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `Elasticsearch Query DLS", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MjY0MQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439592641", "bodyText": "ES->Elasticsearch", "author": "martint", "createdAt": "2020-06-12T18:58:05Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,27 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `Elasticsearch Query DLS\n+<https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html>`_\n+in your SQL query.\n+\n+The results can then be used in any SQL statement, wrapping the ES query. The\n+syntax extends the syntax of the enhanced ES table names with the following::", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU5MjcxOQ==", "url": "https://github.com/trinodb/trino/pull/4013#discussion_r439592719", "bodyText": "ES->Elasticsearch", "author": "martint", "createdAt": "2020-06-12T18:58:17Z", "path": "presto-docs/src/main/sphinx/connector/elasticsearch.rst", "diffHunk": "@@ -262,6 +262,27 @@ as part of the table name, separated by a colon. For example:\n .. _full text query: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-query-string-query.html#query-string-syntax\n \n \n+Pass-through Queries\n+--------------------\n+\n+The Elasticsearch connector allows you to embed any valid Elasticsearch query,\n+that uses the `Elasticsearch Query DLS\n+<https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html>`_\n+in your SQL query.\n+\n+The results can then be used in any SQL statement, wrapping the ES query. The\n+syntax extends the syntax of the enhanced ES table names with the following::\n+\n+    SELECT * FROM es.default.\"<index>$query:<es-query>\"\n+\n+The ES query string ``es-query`` is base32-encoded to avoid having to deal with", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "bf947c97fd70f5c9e6a67da9a49c5e9e1bc1ea32", "url": "https://github.com/trinodb/trino/commit/bf947c97fd70f5c9e6a67da9a49c5e9e1bc1ea32", "message": "Add pass-through query documentation", "committedDate": "2020-06-13T01:30:42Z", "type": "commit"}, {"oid": "bf947c97fd70f5c9e6a67da9a49c5e9e1bc1ea32", "url": "https://github.com/trinodb/trino/commit/bf947c97fd70f5c9e6a67da9a49c5e9e1bc1ea32", "message": "Add pass-through query documentation", "committedDate": "2020-06-13T01:30:42Z", "type": "forcePushed"}]}