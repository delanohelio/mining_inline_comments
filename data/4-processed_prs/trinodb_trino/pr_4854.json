{"pr_number": 4854, "pr_title": "interpolation support for access-control.properties", "pr_createdAt": "2020-08-16T14:12:32Z", "pr_url": "https://github.com/trinodb/trino/pull/4854", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5MzIzNg==", "url": "https://github.com/trinodb/trino/pull/4854#discussion_r471293236", "bodyText": "This module is for connector level access control. Please do not use it here. Instead please:\nnew Bootstrap(() -> configBinder(binder).bindConfig(FileBasedAccessControlConfig.class));", "author": "kokosing", "createdAt": "2020-08-17T07:31:17Z", "path": "presto-plugin-toolkit/src/main/java/io/prestosql/plugin/base/security/FileBasedSystemAccessControl.java", "diffHunk": "@@ -138,13 +140,20 @@ public SystemAccessControl create(Map<String, String> config)\n         {\n             requireNonNull(config, \"config is null\");\n \n-            String configFileName = config.get(SECURITY_CONFIG_FILE);\n+            Bootstrap bootstrap = new Bootstrap(\n+                    new FileBasedAccessControlModule(\"fileBasedSystemAccessControlFactory\"));", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTM0ODc2NQ==", "url": "https://github.com/trinodb/trino/pull/4854#discussion_r471348765", "bodyText": "Hey @kokosing , I have updated the pull request with suggested changes and about the CLA I already sent a mail attaching CLA pdf document filling the details and signing it.", "author": "dheerajkulakarni", "createdAt": "2020-08-17T09:16:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5MzIzNg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEwNTY3OQ==", "url": "https://github.com/trinodb/trino/pull/4854#discussion_r472105679", "bodyText": "getConfigFile has @NotNull validation so the check below is not needed and can be removed.", "author": "kokosing", "createdAt": "2020-08-18T11:25:51Z", "path": "presto-plugin-toolkit/src/main/java/io/prestosql/plugin/base/security/FileBasedSystemAccessControl.java", "diffHunk": "@@ -138,13 +141,20 @@ public SystemAccessControl create(Map<String, String> config)\n         {\n             requireNonNull(config, \"config is null\");\n \n-            String configFileName = config.get(SECURITY_CONFIG_FILE);\n+            Bootstrap bootstrap = new Bootstrap(\n+                    binder -> configBinder(binder).bindConfig(FileBasedAccessControlConfig.class));\n+            Injector injector = bootstrap.strictConfig()\n+                    .doNotInitializeLogging()\n+                    .setRequiredConfigurationProperties(config)\n+                    .initialize();\n+            FileBasedAccessControlConfig fileBasedAccessControlConfig = injector.getInstance(FileBasedAccessControlConfig.class);\n+            String configFileName = fileBasedAccessControlConfig.getConfigFile();", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjczNzU3Mw==", "url": "https://github.com/trinodb/trino/pull/4854#discussion_r472737573", "bodyText": "Hey @kokosing , I have done this change. can we merge this pull request?", "author": "dheerajkulakarni", "createdAt": "2020-08-19T06:03:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjEwNTY3OQ=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "adbabc55c01478af8818c908e820ee10a890b300", "url": "https://github.com/trinodb/trino/commit/adbabc55c01478af8818c908e820ee10a890b300", "message": "Allow to configure refresh period with environment variables", "committedDate": "2020-08-18T17:22:35Z", "type": "commit"}, {"oid": "adbabc55c01478af8818c908e820ee10a890b300", "url": "https://github.com/trinodb/trino/commit/adbabc55c01478af8818c908e820ee10a890b300", "message": "Allow to configure refresh period with environment variables", "committedDate": "2020-08-18T17:22:35Z", "type": "forcePushed"}]}