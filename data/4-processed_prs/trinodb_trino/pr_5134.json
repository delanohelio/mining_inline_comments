{"pr_number": 5134, "pr_title": "Wait for final QueryInfo before using in test", "pr_createdAt": "2020-09-10T21:06:48Z", "pr_url": "https://github.com/trinodb/trino/pull/5134", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwOTY5MA==", "url": "https://github.com/trinodb/trino/pull/5134#discussion_r486909690", "bodyText": "use new Duration(5, SECONDS).", "author": "sopel39", "createdAt": "2020-09-11T09:30:40Z", "path": "presto-testing/src/main/java/io/prestosql/testing/AbstractTestQueryFramework.java", "diffHunk": "@@ -446,9 +449,13 @@ protected OperatorStats searchScanFilterAndProjectOperatorStats(QueryId queryId,\n                 })\n                 .findOnlyElement()\n                 .getId();\n-        return runner.getCoordinator()\n+\n+        Supplier<QueryInfo> queryInfoSupplier = () -> runner.getCoordinator()\n                 .getQueryManager()\n-                .getFullQueryInfo(queryId)\n+                .getFullQueryInfo(queryId);\n+        assertEventually(Duration.valueOf(\"5s\"), () -> assertThat(queryInfoSupplier.get().isFinalQueryInfo()));", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkxNTgwOA==", "url": "https://github.com/trinodb/trino/pull/5134#discussion_r486915808", "bodyText": "done", "author": "raunaqmorarka", "createdAt": "2020-09-11T09:37:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjkwOTY5MA=="}], "type": "inlineReview"}, {"oid": "382969d8728096f79abd087ef2416dac2d7eedcc", "url": "https://github.com/trinodb/trino/commit/382969d8728096f79abd087ef2416dac2d7eedcc", "message": "Wait for final QueryInfo before using in test", "committedDate": "2020-09-11T09:35:52Z", "type": "commit"}, {"oid": "382969d8728096f79abd087ef2416dac2d7eedcc", "url": "https://github.com/trinodb/trino/commit/382969d8728096f79abd087ef2416dac2d7eedcc", "message": "Wait for final QueryInfo before using in test", "committedDate": "2020-09-11T09:35:52Z", "type": "forcePushed"}]}