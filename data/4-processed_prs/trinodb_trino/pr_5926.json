{"pr_number": 5926, "pr_title": "Assume tests container is started immediately", "pr_createdAt": "2020-11-11T19:42:09Z", "pr_url": "https://github.com/trinodb/trino/pull/5926", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY2MjM3Mg==", "url": "https://github.com/trinodb/trino/pull/5926#discussion_r521662372", "bodyText": "@wendigo can we remove the field?", "author": "findepi", "createdAt": "2020-11-11T21:56:14Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -72,6 +72,7 @@\n     private static final Logger log = Logger.get(TestRun.class);\n \n     @Option(names = {\"-h\", \"--help\"}, usageHelp = true, description = \"Show this help message and exit\")\n+    @SuppressWarnings(\"unused\")", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTY2MjYwOA==", "url": "https://github.com/trinodb/trino/pull/5926#discussion_r521662608", "bodyText": "Add rationale to commit message and/or the code.", "author": "findepi", "createdAt": "2020-11-11T21:56:43Z", "path": "presto-product-tests-launcher/src/main/java/io/prestosql/tests/product/launcher/cli/TestRun.java", "diffHunk": "@@ -276,10 +274,7 @@ private Environment getEnvironment()\n                                                 .build()))\n                                 .addAll(testArguments)\n                                 .addAll(reportsDirOptions(reportsDirBase))\n-                                .build().toArray(new String[0]))\n-                        // this message marks that environment has started and tests are running\n-                        .waitingFor(forLogMessage(\".*\\\\[TestNG] Running.*\", 1)\n-                                .withStartupTimeout(ofMinutes(15)));\n+                                .build().toArray(new String[0]));", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a0a67f9f04e2108562489a0aa854a972bdfbaa6e", "url": "https://github.com/trinodb/trino/commit/a0a67f9f04e2108562489a0aa854a972bdfbaa6e", "message": "Fix warnings in TestRun", "committedDate": "2020-11-12T08:17:09Z", "type": "commit"}, {"oid": "f074bc8e32ca294246a437e6ac38783601b8f84a", "url": "https://github.com/trinodb/trino/commit/f074bc8e32ca294246a437e6ac38783601b8f84a", "message": "Assume tests container is started immediately\n\nThere is no other container that is waiting for test container. Also\ntest container do not expose any kind of services that other containers\ncould use. Hence waiting to be sure that testng process reached certain\npoint is not needed.\n\nAdditionally, recently Wait.forLogMessage() appeared to be flaky and\nsometimes it failed to mark test container as started.\n\nWithout Wait.forLogMessage() container is immediately marked as started.", "committedDate": "2020-11-12T08:17:09Z", "type": "commit"}, {"oid": "f074bc8e32ca294246a437e6ac38783601b8f84a", "url": "https://github.com/trinodb/trino/commit/f074bc8e32ca294246a437e6ac38783601b8f84a", "message": "Assume tests container is started immediately\n\nThere is no other container that is waiting for test container. Also\ntest container do not expose any kind of services that other containers\ncould use. Hence waiting to be sure that testng process reached certain\npoint is not needed.\n\nAdditionally, recently Wait.forLogMessage() appeared to be flaky and\nsometimes it failed to mark test container as started.\n\nWithout Wait.forLogMessage() container is immediately marked as started.", "committedDate": "2020-11-12T08:17:09Z", "type": "forcePushed"}]}