{"pr_number": 6277, "pr_title": "Fix Aggregation Pushdown docs", "pr_createdAt": "2020-12-09T22:24:13Z", "pr_url": "https://github.com/trinodb/trino/pull/6277", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541013597", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * general support for aggregation pushdown in the connector\n          \n          \n            \n            * function-specific support for pushdown in the connector\n          \n          \n            \n            * query that allows the pushdown to take place\n          \n          \n            \n            * If aggregation pushdown is generally supported by the connector.\n          \n          \n            \n            * If pushdown of specific function is supported by the connector.\n          \n          \n            \n            * If query structure allows pushdown to take place.", "author": "losipiuk", "createdAt": "2020-12-11T15:08:29Z", "path": "presto-docs/src/main/sphinx/optimizer/pushdown.rst", "diffHunk": "@@ -15,22 +16,21 @@ The results of this pushdown can include the following benefits:\n Support for pushdown is specific to each connector and the relevant underlying\n database or storage system.\n \n-Analysis and Confirmation\n--------------------------\n+Aggregation Pushdown\n+--------------------\n \n-Pushdown depends on a number of factors:\n+Aggregation pushdown depends on a number of factors:\n \n-* generic support for pushdown for that function in Presto\n-* function or operation specific support for pushdown in the connector\n-* query that allows the detection of the function to push down\n-* function needs to exist in the underlying system so it can process the\n-  pushdown\n+* general support for aggregation pushdown in the connector\n+* function-specific support for pushdown in the connector\n+* query that allows the pushdown to take place", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4MDE4NA==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541080184", "bodyText": "I would not do that unless you also change the sentence in front of that list .. with this change it would be wrong", "author": "mosabua", "createdAt": "2020-12-11T16:43:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5NDc4NQ==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541094785", "bodyText": "It reads fine to me - but I assume you are right :)\nAs for enumeration, the google documentation style guide recommends making each of the points a capitalized sentence ending with a dot.", "author": "losipiuk", "createdAt": "2020-12-11T17:05:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEyNTYzOA==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541125638", "bodyText": "Mostly true .. so yes, maybe update the opening sentence as well and then go with this", "author": "mosabua", "createdAt": "2020-12-11T17:56:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEzNDQzMw==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541134433", "bodyText": "Like I said above, I do not see why the current one is wrong (it does not mean it is ok). Can you propose sth which makes this correct English paragraph :)", "author": "losipiuk", "createdAt": "2020-12-11T18:11:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE4Mzg2MA==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541183860", "bodyText": "Aggregation push down relies on the following conditions to be true:\nor\nAggregation push down relies on the following conditions to be fulfilled:", "author": "mosabua", "createdAt": "2020-12-11T19:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE4NDg3OA==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541184878", "bodyText": "And you would have to do\n\nIf aggregation pushdown is generally supported by the connector.\nIf pushdown of the specific function is supported by the connector.\nIf the query structure allows pushdown to take place.", "author": "mosabua", "createdAt": "2020-12-11T19:16:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE5NDYwNg==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r542194606", "bodyText": "Thank you :)", "author": "losipiuk", "createdAt": "2020-12-14T08:28:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxMzU5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxNTcwMA==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541015700", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The best way to analyze if aggregation pushdown for a specific query is performed is to\n          \n          \n            \n            take a closer look at the :doc:`EXPLAIN plan </sql/explain>` of the query. If an aggregate\n          \n          \n            \n            function is successfully pushed down to the connector, the explain plan does **not** show\n          \n          \n            \n            that ``Aggregate`` operator. The explain plan only shows the operations that are performed\n          \n          \n            \n            by Presto.\n          \n          \n            \n            You can check if pushdown for a specific query is performed by looking at the :doc:`EXPLAIN plan </sql/explain>` of the query. \n          \n          \n            \n            If an aggregate function is successfully pushed down to the connector, the explain plan does **not** show\n          \n          \n            \n            that ``Aggregate`` operator. The explain plan only shows the operations that are performed by Presto.", "author": "losipiuk", "createdAt": "2020-12-11T15:11:20Z", "path": "presto-docs/src/main/sphinx/optimizer/pushdown.rst", "diffHunk": "@@ -15,22 +16,21 @@ The results of this pushdown can include the following benefits:\n Support for pushdown is specific to each connector and the relevant underlying\n database or storage system.\n \n-Analysis and Confirmation\n--------------------------\n+Aggregation Pushdown\n+--------------------\n \n-Pushdown depends on a number of factors:\n+Aggregation pushdown depends on a number of factors:\n \n-* generic support for pushdown for that function in Presto\n-* function or operation specific support for pushdown in the connector\n-* query that allows the detection of the function to push down\n-* function needs to exist in the underlying system so it can process the\n-  pushdown\n+* general support for aggregation pushdown in the connector\n+* function-specific support for pushdown in the connector\n+* query that allows the pushdown to take place\n \n-The best way to analyze if pushdown for a specific query is performed is to\n-take a closer look at the :doc:`EXPLAIN plan </sql/explain>` of the query. If an\n-operation such as an aggregate function is successfully pushed down to the\n-connector, the explain plan does **not** show that operator. The explain plan\n-only shows the operations that are performed by Presto.\n+\n+The best way to analyze if aggregation pushdown for a specific query is performed is to\n+take a closer look at the :doc:`EXPLAIN plan </sql/explain>` of the query. If an aggregate\n+function is successfully pushed down to the connector, the explain plan does **not** show\n+that ``Aggregate`` operator. The explain plan only shows the operations that are performed\n+by Presto.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA4MDk2OQ==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541080969", "bodyText": "Breaking up the lines and reformatting like this does NOT affect output and violates our line length standard (80 char). Please keep it as is", "author": "mosabua", "createdAt": "2020-12-11T16:45:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxNTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA5MzMyMg==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541093322", "bodyText": "It is not reformatting :) It is a different first sentence.", "author": "losipiuk", "createdAt": "2020-12-11T17:03:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxNTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTExMTgwMg==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541111802", "bodyText": "Yeah.. that too .. wording changes are fine imho .. old one was fine as well.", "author": "mosabua", "createdAt": "2020-12-11T17:33:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxNTcwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTEzMjk0MQ==", "url": "https://github.com/trinodb/trino/pull/6277#discussion_r541132941", "bodyText": "Sure, not forcing anything. Not my area of expertise.", "author": "losipiuk", "createdAt": "2020-12-11T18:09:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTAxNTcwMA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "ad9122b6353b3032222a05b8cb34f18e6e7c9165", "url": "https://github.com/trinodb/trino/commit/ad9122b6353b3032222a05b8cb34f18e6e7c9165", "message": "Fix Aggregation Pushdown docs\n\nThe Aggregation Pushdown docs attempted to describe \"function pushdown\"\nin general, but we do not have it besides aggregation functions, so this\ngeneralization was not being helpful to end users at this point.\n\nThis also improves messaging and removes several minor bullets which did\nnot seem technically correct.", "committedDate": "2020-12-12T21:31:46Z", "type": "commit"}, {"oid": "ad9122b6353b3032222a05b8cb34f18e6e7c9165", "url": "https://github.com/trinodb/trino/commit/ad9122b6353b3032222a05b8cb34f18e6e7c9165", "message": "Fix Aggregation Pushdown docs\n\nThe Aggregation Pushdown docs attempted to describe \"function pushdown\"\nin general, but we do not have it besides aggregation functions, so this\ngeneralization was not being helpful to end users at this point.\n\nThis also improves messaging and removes several minor bullets which did\nnot seem technically correct.", "committedDate": "2020-12-12T21:31:46Z", "type": "forcePushed"}]}