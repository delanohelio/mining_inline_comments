{"pr_number": 358, "pr_title": "Add default audio delay for libVLC", "pr_createdAt": "2020-02-21T20:36:37Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358", "timeline": [{"oid": "35a150a1bbb82fada34ad03df4c71f3db71d602a", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/35a150a1bbb82fada34ad03df4c71f3db71d602a", "message": "Add default audio delay for libVLC", "committedDate": "2020-02-21T20:22:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMDczMg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382800732", "bodyText": "Should probably note the value is defined in milliseconds", "author": "nielsvanvelzen", "createdAt": "2020-02-21T20:53:51Z", "path": "app/src/main/java/org/jellyfin/androidtv/preferences/UserPreferences.kt", "diffHunk": "@@ -126,6 +126,11 @@ class UserPreferences(context: Context) : SharedPreferenceStore(PreferenceManage\n \t */\n \tvar ac3Enabled by booleanPreference(\"pref_bitstream_ac3\", true)\n \n+\t/**\n+\t * Default audio delay for libVLC", "originalCommit": "35a150a1bbb82fada34ad03df4c71f3db71d602a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMTU4Nw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382801587", "bodyText": "I prefer it like this, although not necessary:\nfindPreference<EditLongPreference>(\"libvlc_audio_delay\")?.apply {\n\ttext = TvApp.getApplication().userPreferences.libVLCAudioDelay.toString()\n\tsummaryProvider = Preference.SummaryProvider<EditLongPreference> {\n\t\t\"${it.text} ms\"\n\t}\n}", "author": "nielsvanvelzen", "createdAt": "2020-02-21T20:56:02Z", "path": "app/src/main/java/org/jellyfin/androidtv/preferences/ui/UserPreferencesFragment.kt", "diffHunk": "@@ -134,6 +134,12 @@ class UserPreferencesFragment : LeanbackSettingsFragmentCompat() {\n \t\t\tfindPreference<EditTextPreference>(\"version\")?.summaryProvider = Preference.SummaryProvider<EditTextPreference> {\n \t\t\t\tUtils.getVersionString()\n \t\t\t}\n+\n+\t\t\tval audioDelayPreference = findPreference<EditLongPreference>(\"libvlc_audio_delay\")", "originalCommit": "35a150a1bbb82fada34ad03df4c71f3db71d602a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjk2NjAyNw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382966027", "bodyText": "Eventually I will remember that .apply is a thing. \ud83d\ude04", "author": "thornbill", "createdAt": "2020-02-23T05:34:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMTU4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwNDQ5OQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/358#discussion_r382804499", "bodyText": "To make custom views work you need to pass 2 parameters to the super: the context and attributeset. The others are optional.\nContext will never be null so you can remove the question mark from that one.\nAn example for the extra constructors that should be added can be found in the Rating.kt or MultiBadgeImageCardView.kt from the details branch.", "author": "nielsvanvelzen", "createdAt": "2020-02-21T21:03:20Z", "path": "app/src/main/java/org/jellyfin/androidtv/preferences/ui/EditLongPreference.kt", "diffHunk": "@@ -0,0 +1,25 @@\n+package org.jellyfin.androidtv.preferences.ui\n+\n+import android.content.Context\n+import android.util.AttributeSet\n+import androidx.preference.EditTextPreference\n+import androidx.preference.PreferenceViewHolder\n+\n+class EditLongPreference : EditTextPreference {", "originalCommit": "35a150a1bbb82fada34ad03df4c71f3db71d602a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2b6c105496259845b49ce1f355242d500bb84502", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2b6c105496259845b49ce1f355242d500bb84502", "message": "Fix code review feedback", "committedDate": "2020-02-23T05:31:05Z", "type": "commit"}]}