{"pr_number": 585, "pr_title": "Image card redesign", "pr_createdAt": "2020-10-02T23:03:18Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585", "timeline": [{"oid": "33cc506665f66f8cf555b179e395d5ddcec50293", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/33cc506665f66f8cf555b179e395d5ddcec50293", "message": "Add white border and redesign image_card_view.xml", "committedDate": "2020-11-12T01:31:17Z", "type": "commit"}, {"oid": "d33b5b203dc4dec48093e2638bc89032d3ad07f3", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d33b5b203dc4dec48093e2638bc89032d3ad07f3", "message": "Add ColorFilter to background drawable in BackgroundManagerExtensions.kt", "committedDate": "2020-11-12T01:31:17Z", "type": "commit"}, {"oid": "1af3ff8083eb85687a397011de3b31b591d2aa78", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1af3ff8083eb85687a397011de3b31b591d2aa78", "message": "Add focus listener for card views in MyImageCardView.java; Remove shadow in PositionableListRowPresenter.java", "committedDate": "2020-11-12T01:31:17Z", "type": "commit"}, {"oid": "011c4aa163e1cc3f45a37e90a7b8ab2248e30da9", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/011c4aa163e1cc3f45a37e90a7b8ab2248e30da9", "message": "More xml redesign", "committedDate": "2020-11-12T01:31:17Z", "type": "commit"}, {"oid": "8864db60003ccf770589bf11db9c1fde45957fa9", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/8864db60003ccf770589bf11db9c1fde45957fa9", "message": "Get rid of the RowPresenter out of focus shadow in PositionableListRowPresenter.java", "committedDate": "2020-11-12T01:31:17Z", "type": "commit"}, {"oid": "6522a7670ed4992911966eb3b3ea9e171a986688", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/6522a7670ed4992911966eb3b3ea9e171a986688", "message": "Remove background transparent black in activity_full_details.xml", "committedDate": "2020-11-12T01:31:18Z", "type": "commit"}, {"oid": "d233701f77a1668a03ca14368b323a47c1115669", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d233701f77a1668a03ca14368b323a47c1115669", "message": "Add focus listener for card views in MyImageCardView.java; Remove shadow in PositionableListRowPresenter.java", "committedDate": "2020-11-12T01:31:18Z", "type": "commit"}, {"oid": "79d01fdc6026b72979409af04cb9eb436eeba3d1", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/79d01fdc6026b72979409af04cb9eb436eeba3d1", "message": "More xml redesign", "committedDate": "2020-11-12T01:31:18Z", "type": "commit"}, {"oid": "4e9334d5f9d60052773cfd79e9487cf6af05ee8e", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/4e9334d5f9d60052773cfd79e9487cf6af05ee8e", "message": "Fix background for chapter selection, make border color be based off theme, remove drop shadows", "committedDate": "2020-11-12T01:31:18Z", "type": "commit"}, {"oid": "b5b0cfc1a1b45fa173e567e7479ae2a5897351dc", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b5b0cfc1a1b45fa173e567e7479ae2a5897351dc", "message": "Fix black bar issue", "committedDate": "2020-11-12T01:31:28Z", "type": "commit"}, {"oid": "b5b0cfc1a1b45fa173e567e7479ae2a5897351dc", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b5b0cfc1a1b45fa173e567e7479ae2a5897351dc", "message": "Fix black bar issue", "committedDate": "2020-11-12T01:31:28Z", "type": "forcePushed"}, {"oid": "3a9d1682cd0577b3ea81662363656d2cd70f152a", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3a9d1682cd0577b3ea81662363656d2cd70f152a", "message": "Round image border", "committedDate": "2020-11-12T18:14:40Z", "type": "commit"}, {"oid": "b04856e58efc341da5747da68fa23f6f2356fa29", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/b04856e58efc341da5747da68fa23f6f2356fa29", "message": "Codacy issues; align ProgressBar to bottom of ImageView", "committedDate": "2020-11-12T19:10:00Z", "type": "commit"}, {"oid": "fb48050f804cda4d27c1d4d82b61967f95474bff", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/fb48050f804cda4d27c1d4d82b61967f95474bff", "message": "New progressbar and image_card_view.xml redesign", "committedDate": "2020-11-13T18:31:39Z", "type": "commit"}, {"oid": "d4d7109d31f6afb6d7b7e0813214b8ca348e3f4e", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/d4d7109d31f6afb6d7b7e0813214b8ca348e3f4e", "message": "Unwatched 99+", "committedDate": "2020-11-13T18:35:43Z", "type": "commit"}, {"oid": "0f62c7e2d829e64556ec226ed7f2fe1d4a2e22fa", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/0f62c7e2d829e64556ec226ed7f2fe1d4a2e22fa", "message": "Apply background alpha with Glide", "committedDate": "2020-11-13T19:51:24Z", "type": "commit"}, {"oid": "f8e92b96d239499161cfe50097e471fc754419c2", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f8e92b96d239499161cfe50097e471fc754419c2", "message": "Fix broken AudioNowPlayingActivity.java merge", "committedDate": "2020-11-13T19:55:10Z", "type": "commit"}, {"oid": "3adac0efdcf331f6379d15db355e81ab4c28c925", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3adac0efdcf331f6379d15db355e81ab4c28c925", "message": "Fix broken AudioNowPlayingActivity.java merge part 2", "committedDate": "2020-11-13T19:56:59Z", "type": "commit"}, {"oid": "2ca1abc9d62a6bfe5bf8981c2d4d86b632a918df", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/2ca1abc9d62a6bfe5bf8981c2d4d86b632a918df", "message": "Shift import", "committedDate": "2020-11-13T19:58:50Z", "type": "commit"}, {"oid": "00af43ab8737d3248b4f48ed0cc9e9f839a5ab13", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/00af43ab8737d3248b4f48ed0cc9e9f839a5ab13", "message": "Merge branch 'master' into image-card-redesign", "committedDate": "2020-11-13T20:02:57Z", "type": "commit"}, {"oid": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e6a1c019637b4839826d45aa7cb46a6e326bec77", "message": "Use CustomListRowPresenter", "committedDate": "2020-11-13T21:14:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzMTc0Mw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523231743", "bodyText": "This should be centerCrop for images that are resized, mostly noticeable on image libraries.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:05:07Z", "path": "app/src/main/res/layout/image_card_view.xml", "diffHunk": "@@ -28,7 +27,8 @@\n             lb:layout_viewType=\"main\"\n             android:layout_width=\"wrap_content\"\n             android:layout_height=\"wrap_content\"\n-            android:scaleType=\"centerCrop\"\n+            android:scaleType=\"fitXY\"", "originalCommit": "00af43ab8737d3248b4f48ed0cc9e9f839a5ab13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNDc5NQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523234795", "bodyText": "I'd say the margin should be 5dp on the left,bottom and right but simply using:\n            android:layout_marginStart=\"5dp\"\n            android:layout_marginEnd=\"5dp\"\n            android:layout_marginBottom=\"5dp\"\n\nWill make the progressbar too wide, probably another property should be changed for that too.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:12:20Z", "path": "app/src/main/res/layout/image_card_view.xml", "diffHunk": "@@ -38,7 +38,8 @@\n             android:layout_height=\"25dp\"\n             android:src=\"@drawable/ic_heart_red\"\n             android:alpha=\"0.8\"\n-            android:layout_alignBottom=\"@+id/main_image\"\n+            android:layout_alignBottom=\"@+id/resumeProgress\"\n+            android:layout_marginBottom=\"2dp\"", "originalCommit": "00af43ab8737d3248b4f48ed0cc9e9f839a5ab13", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNTE5OQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523235199", "bodyText": "(don't mind the weird scaling, I screwed up my emulator settings)", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:13:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNDc5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0NTQwMg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523245402", "bodyText": "What weird scaling? It may actually be an issue you just think is scaling lol. If you are wanting to make the progress bar 5dp from the bottom and sides, the padding is what is used for the left and right.\nI believe i have resolved the 5dp margins so I'm going to mark this as resolved.", "author": "MrChip53", "createdAt": "2020-11-13T21:37:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNDc5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI2MTEzNw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523261137", "bodyText": "The scaling issues was definitely me using \"adb wm\" to change some things :p. They're not really noticeable in this screenshot though.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T22:13:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNDc5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzNjE2MQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523236161", "bodyText": "Can't you just remove this part?", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:15:40Z", "path": "app/src/main/res/drawable/transparent_card_border.xml", "diffHunk": "@@ -0,0 +1,11 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:shape=\"rectangle\">\n+    <solid android:color=\"@android:color/transparent\" />\n+\n+    <stroke\n+        android:width=\"3dp\"\n+        android:color=\"@android:color/transparent\" />", "originalCommit": "00af43ab8737d3248b4f48ed0cc9e9f839a5ab13", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzODI2Mg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523238262", "bodyText": "The TODO already says what I wanted to comment", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:20:21Z", "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/CardPresenter.java", "diffHunk": "@@ -359,7 +359,8 @@ public ViewHolder onCreateViewHolder(ViewGroup parent) {\n         MyImageCardView cardView = new MyImageCardView(parent.getContext(), mShowInfo);\n         cardView.setFocusable(true);\n         cardView.setFocusableInTouchMode(true);\n-        cardView.setBackgroundColor(TvApp.getApplication().getResources().getColor(R.color.lb_basic_card_info_bg_color));\n+        //TODO make a themeable color\n+        cardView.setBackgroundColor(Color.parseColor(\"#00FFFFFF\"));", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzODYyMw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523238623", "bodyText": "The TODO already says what I wanted to comment", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:21:12Z", "path": "app/src/main/java/org/jellyfin/androidtv/ui/presentation/GridButtonPresenter.java", "diffHunk": "@@ -70,7 +71,8 @@ public ViewHolder onCreateViewHolder(ViewGroup parent) {\n         MyImageCardView cardView = new MyImageCardView(parent.getContext(), mShowInfo);\n         cardView.setFocusable(true);\n         cardView.setFocusableInTouchMode(true);\n-        cardView.setBackgroundColor(TvApp.getApplication().getResources().getColor(R.color.lb_basic_card_info_bg_color));\n+        //TODO make a themeable color\n+        cardView.setBackgroundColor(Color.parseColor(\"#00FFFFFF\"));", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzOTc4NA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523239784", "bodyText": "I'm not sure why the group was required but it's missing in the ic_watch_red.xml file and the XML file should be formatted.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:23:49Z", "path": "app/src/main/res/drawable/ic_watch.xml", "diffHunk": "@@ -3,7 +3,12 @@\n     android:height=\"24dp\"\n     android:viewportWidth=\"24\"\n     android:viewportHeight=\"24\">\n+  <group\n+    android:pivotX=\"12\"\n+    android:pivotY=\"12\"\n+    >\n   <path\n       android:pathData=\"M9,16.2L4.8,12l-1.4,1.4L9,19 21,7l-1.4,-1.4L9,16.2z\"\n       android:fillColor=\"#fff\"/>\n+  </group>", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0OTcxNA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523249714", "bodyText": "I think this may have been leftovers from something that failed. I'll revert to the master copy and see what happens", "author": "MrChip53", "createdAt": "2020-11-13T21:47:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzIzOTc4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MDIwNQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523240205", "bodyText": "You can remove this empty line and the other one (line 10) and reformat the file.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:24:43Z", "path": "app/src/main/res/drawable/progress_bar.xml", "diffHunk": "@@ -2,21 +2,26 @@\n <layer-list xmlns:android=\"http://schemas.android.com/apk/res/android\">\n     <item android:id=\"@android:id/background\">\n         <shape>\n-            <solid android:color=\"?attr/progressBackground\" />\n+            <corners android:radius=\"8dp\"/>\n+            <solid android:color=\"?attr/progressBackground\"/>\n         </shape>\n     </item>\n-    <item android:id=\"@android:id/secondaryProgress\">\n-        <clip>\n+    <item android:id=\"@android:id/secondaryProgress\" >\n+\n+        <scale android:scaleWidth=\"100%\">\n             <shape>\n-                <solid android:color=\"?attr/progressSecondary\" />\n+                <corners android:radius=\"8dp\"/>\n+                <solid android:color=\"?attr/progressSecondary\"/>\n             </shape>\n-        </clip>\n+        </scale>\n     </item>\n-    <item android:id=\"@android:id/progress\">\n-        <clip>\n+    <item android:id=\"@android:id/progress\" >\n+", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MDQ4Mw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523240483", "bodyText": "Can't you just remove this part?", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:25:19Z", "path": "app/src/main/res/drawable/transparent_card_border.xml", "diffHunk": "@@ -0,0 +1,11 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<shape xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    android:shape=\"rectangle\">\n+    <solid android:color=\"@android:color/transparent\" />", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MTA5Nw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523241097", "bodyText": "Can you make a new color for this? Because themes might want to color it in the future.", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:26:48Z", "path": "app/src/main/res/layout/image_card_view.xml", "diffHunk": "@@ -159,7 +168,7 @@\n                 android:layout_alignParentStart=\"true\"\n                 android:layout_marginStart=\"@dimen/lb_basic_card_info_text_margin\"\n                 android:fontFamily=\"sans-serif-condensed\"\n-                android:textColor=\"@color/lb_basic_card_title_text_color\"\n+                android:textColor=\"@color/gray_gradient_end\"", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MTY2OA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523241668", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <string name=\"nine_nine_plus\">99+</string>\n          \n          \n            \n                <string name=\"watch_count_overflow\">99+</string>\n          \n      \n    \n    \n  \n\nLet's use a name that's more representative of the usage", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:28:08Z", "path": "app/src/main/res/values/strings.xml", "diffHunk": "@@ -417,4 +417,5 @@\n     <string name=\"lbl_sign_in\">Please Sign In</string>\n     <string name=\"lbl_manual_login\">Manual Login</string>\n     <string name=\"lbl_playback_control_ends\">Ends at %1$s</string>\n+    <string name=\"nine_nine_plus\">99+</string>", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMzI0MTkxOQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/585#discussion_r523241919", "bodyText": "Can you use a color value for this (and while you're at it, update the primary/secondary ones) so we can theme the progress bar in the future?", "author": "nielsvanvelzen", "createdAt": "2020-11-13T21:28:46Z", "path": "app/src/main/res/values/themes.xml", "diffHunk": "@@ -17,7 +17,7 @@\n         <item name=\"headerTextColor\">@color/white</item>\n \n         <!-- Progress Bar -->\n-        <item name=\"progressBackground\">@color/black</item>\n+        <item name=\"progressBackground\">#CC4b4b4b</item>", "originalCommit": "e6a1c019637b4839826d45aa7cb46a6e326bec77", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c8730df32f0d6ac4951a0fe665cc54a7e1d88d8f", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c8730df32f0d6ac4951a0fe665cc54a7e1d88d8f", "message": "Review changes", "committedDate": "2020-11-14T06:56:02Z", "type": "commit"}]}