{"pr_number": 341, "pr_title": "Use PreferredVideoPlayer enum for live tv preference", "pr_createdAt": "2020-02-14T21:55:23Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341", "timeline": [{"oid": "f8ef06b0688676c5c38000b4a4ef42e98770f56e", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f8ef06b0688676c5c38000b4a4ef42e98770f56e", "message": "Use PreferredVideoPlayer enum for live tv preference", "committedDate": "2020-02-14T21:35:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NTQ3OQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341#discussion_r379665479", "bodyText": "I think we should add this new enum to the previous migration (toVersion = 3). My intention was to have 1 migration per app release. The initial update will have 2 though, 1 for the setting change in 0.11 for people that upgrade from 0.10->0.12", "author": "nielsvanvelzen", "createdAt": "2020-02-14T22:03:09Z", "path": "app/src/main/java/org/jellyfin/androidtv/preferences/UserPreferences.kt", "diffHunk": "@@ -170,5 +165,14 @@ class UserPreferences(context: Context) : SharedPreferenceStore(PreferenceManage\n \t\t\t// Migrate to login behavior enum\n \t\t\tputEnum(\"login_behavior\", if (it.getString(\"pref_login_behavior\", \"0\") == \"1\") LoginBehavior.AUTO_LOGIN else LoginBehavior.SHOW_LOGIN)\n \t\t}\n+\n+\t\tmigration(toVersion = 4) {", "originalCommit": "f8ef06b0688676c5c38000b4a4ef42e98770f56e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2Nzg0Mw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341#discussion_r379667843", "bodyText": "\ud83d\udc4d Cool sounds good to me. I had wondered about that.", "author": "thornbill", "createdAt": "2020-02-14T22:10:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTY2NTQ3OQ=="}], "type": "inlineReview"}, {"oid": "7f79cfc34cb2612988e8c685722f594b900557e2", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/7f79cfc34cb2612988e8c685722f594b900557e2", "message": "Move live_tv_video_player to migration 3", "committedDate": "2020-02-14T22:13:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyMDE1NA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341#discussion_r379820154", "bodyText": "I don't know a lot about LiveTV but as far as I know this checkbox should only be enabled when the selected player is external. Because the dependency attribute only works when referencing checkboxes this should be added in code.\nYou can add it in the UserPreferencesFragment.kt file.", "author": "nielsvanvelzen", "createdAt": "2020-02-15T09:19:28Z", "path": "app/src/main/res/xml/preferences.xml", "diffHunk": "@@ -121,21 +121,14 @@\n     <PreferenceCategory\n         android:key=\"pref_live_tv_category\"\n         android:title=\"@string/pref_live_tv_cat\">\n-        <CheckBoxPreference\n-            android:defaultValue=\"false\"\n-            android:disableDependentsState=\"true\"\n-            android:key=\"pref_live_tv_use_external\"\n-            android:summary=\"@string/pref_external_live_tv_summary\"\n-            android:title=\"@string/pref_external_live_tv_title\" />\n-        <CheckBoxPreference\n-            android:defaultValue=\"false\"\n-            android:dependency=\"pref_live_tv_use_external\"\n-            android:key=\"pref_enable_vlc_livetv\"\n-            android:summary=\"@string/desc_use_vlc_livetv\"\n-            android:title=\"@string/lbl_use_vlc_livetv\" />\n+        <ListPreference\n+            android:entries=\"@array/pref_video_player_entries\"\n+            android:entryValues=\"@array/pref_video_player_values\"\n+            android:key=\"live_tv_video_player\"\n+            android:title=\"@string/pref_media_player\"\n+            app:useSimpleSummaryProvider=\"true\" />\n         <CheckBoxPreference", "originalCommit": "7f79cfc34cb2612988e8c685722f594b900557e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0MjA3MA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341#discussion_r379842070", "bodyText": "I\u2019m not sure why this was marked as a dependency. This controls direct playing in the embedded players. I have no clue why this isn\u2019t handled automatically like it is for normal videos. \ud83e\udd37\u200d\u2642", "author": "thornbill", "createdAt": "2020-02-15T16:44:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyMDE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTg0NjU3Nw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/341#discussion_r379846577", "bodyText": "We can always make changes to that too in the future, I'll approve it for now :)", "author": "nielsvanvelzen", "createdAt": "2020-02-15T18:08:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTgyMDE1NA=="}], "type": "inlineReview"}]}