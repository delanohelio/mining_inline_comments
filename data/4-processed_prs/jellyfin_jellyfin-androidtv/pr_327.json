{"pr_number": 327, "pr_title": "Update Gradle to Kotlin DSL", "pr_createdAt": "2020-02-09T20:57:02Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327", "timeline": [{"oid": "40a37d941822e5ab0b46a9b91f50d77deae23b03", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/40a37d941822e5ab0b46a9b91f50d77deae23b03", "message": "Update Gradle and Gradle wrapper to latest version", "committedDate": "2020-02-09T20:59:27Z", "type": "commit"}, {"oid": "48875980f6264a86103ceb7f5a877f056fee62eb", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/48875980f6264a86103ceb7f5a877f056fee62eb", "message": "Convert Gradle files to Kotlin", "committedDate": "2020-02-09T21:00:37Z", "type": "commit"}, {"oid": "e37eb1df2d93b948d3f0f4806449a0255488143f", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/e37eb1df2d93b948d3f0f4806449a0255488143f", "message": "Organize dependencies", "committedDate": "2020-02-09T21:00:37Z", "type": "commit"}, {"oid": "1a4f9d29d32212f440843cea6727d4ace19c0fe1", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1a4f9d29d32212f440843cea6727d4ace19c0fe1", "message": "Remove (unused) okhttp dependency", "committedDate": "2020-02-09T21:00:38Z", "type": "commit"}, {"oid": "f3c72412eb04db737227cef177814c046c10b5ff", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/f3c72412eb04db737227cef177814c046c10b5ff", "message": "Update androidx dependencies", "committedDate": "2020-02-09T21:00:38Z", "type": "commit"}, {"oid": "3ea37fd0338bff60b89d1f2a0cb7a75b45a590b2", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3ea37fd0338bff60b89d1f2a0cb7a75b45a590b2", "message": "Update android gradle build tools version", "committedDate": "2020-02-09T21:00:38Z", "type": "commit"}, {"oid": "66e6b026439c39f19201b6cac28760b7ff3d21c6", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/66e6b026439c39f19201b6cac28760b7ff3d21c6", "message": "Remove guava dependency", "committedDate": "2020-02-09T21:00:38Z", "type": "commit"}, {"oid": "11e96f1d4ac5a19202d23f5dd7cd7019f02cc3ab", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/11e96f1d4ac5a19202d23f5dd7cd7019f02cc3ab", "message": "Remove androidx.appcompat dependency", "committedDate": "2020-02-09T21:00:39Z", "type": "commit"}, {"oid": "c28502652ed5f8eebacd19580e2b094c5c7489a0", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c28502652ed5f8eebacd19580e2b094c5c7489a0", "message": "Add back mockito", "committedDate": "2020-02-09T21:01:29Z", "type": "commit"}, {"oid": "c28502652ed5f8eebacd19580e2b094c5c7489a0", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/c28502652ed5f8eebacd19580e2b094c5c7489a0", "message": "Add back mockito", "committedDate": "2020-02-09T21:01:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2NjUzNQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376866535", "bodyText": "Was this redundant?", "author": "thornbill", "createdAt": "2020-02-10T04:43:46Z", "path": "app/build.gradle", "diffHunk": "@@ -1,72 +0,0 @@\n-apply plugin: 'com.android.application'\n-apply plugin: 'kotlin-android'\n-apply plugin: 'kotlin-android-extensions'\n-def version = \"0.11.0\"\n-\n-android {\n-    compileSdkVersion 28\n-    buildToolsVersion \"28.0.3\"\n-\n-    compileOptions {\n-        sourceCompatibility 1.8\n-        targetCompatibility 1.8\n-    }\n-\n-    defaultConfig {\n-        minSdkVersion 21\n-        targetSdkVersion 28\n-        versionCode 905\n-        versionName version\n-    }\n-\n-    buildTypes {\n-        release {\n-            minifyEnabled false\n-            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n-        }\n-        debug {\n-            applicationIdSuffix \".debug\"\n-            debuggable true", "originalCommit": "c28502652ed5f8eebacd19580e2b094c5c7489a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyMTYxNg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376921616", "bodyText": "The \"debug\" version has debug on by default. I think there's some more redundant settings but I didn't look up everything.\n\nWhen you create a new module, Android Studio automatically creates the debug and release build types for you. Although the debug build type doesn't appear in the build configuration file, Android Studio configures it with debuggable true.\n\nsource", "author": "nielsvanvelzen", "createdAt": "2020-02-10T08:34:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2NjUzNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2Njc2Mw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376866763", "bodyText": "Why are we moving away from using the Androidx appcompat classes?", "author": "thornbill", "createdAt": "2020-02-10T04:45:22Z", "path": "app/src/main/java/org/jellyfin/androidtv/ui/ExpandableTextView.java", "diffHunk": "@@ -4,22 +4,23 @@\n import android.content.Intent;\n import android.graphics.Canvas;\n import android.graphics.Rect;\n-import androidx.core.app.ActivityOptionsCompat;\n-import androidx.appcompat.widget.AppCompatTextView;\n import android.text.Layout;\n import android.util.AttributeSet;\n import android.view.SoundEffectConstants;\n import android.view.View;\n+import android.widget.TextView;\n \n import org.jellyfin.androidtv.R;\n import org.jellyfin.androidtv.TvApp;\n import org.jellyfin.androidtv.details.ExpandedTextActivity;\n \n+import androidx.core.app.ActivityOptionsCompat;\n+\n /**\n  * Created by spam on 9/30/2016.\n  */\n \n-public class ExpandableTextView extends AppCompatTextView {\n+public class ExpandableTextView extends TextView {", "originalCommit": "c28502652ed5f8eebacd19580e2b094c5c7489a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyNDEyMg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376924122", "bodyText": "There is only a few custom views that use the AppCompat classes. However if we truly used AppCompat we would need to change almost all UI related code (XML and Java) to use AppCompat.\nThe views we did use AppCompat for did not really use any features that were not available in the first versions of Android so it was not necessary to use it.\nWe can always add back AppCompat in the future but it would need to be done properly for all java/xml. You can see what I mean by using the \"Migrate to Appcompat...\" function in Android Studio. It gives you an impression of how much code was not AppCompat yet.", "author": "nielsvanvelzen", "createdAt": "2020-02-10T08:41:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2Njc2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2NjkwMQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376866901", "bodyText": "Could we make this check an environment variable?", "author": "thornbill", "createdAt": "2020-02-10T04:46:12Z", "path": "settings.gradle.kts", "diffHunk": "@@ -0,0 +1,12 @@\n+include(\":app\")\n+\n+val enableDependencySubstitution = true", "originalCommit": "c28502652ed5f8eebacd19580e2b094c5c7489a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyNDQyNA==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376924424", "bodyText": "My initial idea was to add a property that could be added in the local.properties but I didn't get it working properly. Environment variable might be an idea too.", "author": "nielsvanvelzen", "createdAt": "2020-02-10T08:41:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2NjkwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjkyODU2NQ==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/327#discussion_r376928565", "bodyText": "Added this one now. Adding enable.dependency.substitution=false to the local.properties file will disable dependency substitution. It's enabled by default.", "author": "nielsvanvelzen", "createdAt": "2020-02-10T08:51:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2NjkwMQ=="}], "type": "inlineReview"}, {"oid": "9853e389168663028a4265f797abe3406de6281b", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/9853e389168663028a4265f797abe3406de6281b", "message": "Make enableDependencySubstitution configurable (enabled by default)", "committedDate": "2020-02-10T08:50:14Z", "type": "commit"}]}