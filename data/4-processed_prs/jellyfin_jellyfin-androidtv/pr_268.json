{"pr_number": 268, "pr_title": "Add HomeFragmentRow for live tv buttons", "pr_createdAt": "2020-01-21T19:41:02Z", "pr_url": "https://github.com/jellyfin/jellyfin-androidtv/pull/268", "timeline": [{"oid": "3abc2a0d2c55e71048a33dddb63cebfd3e75e7e8", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/3abc2a0d2c55e71048a33dddb63cebfd3e75e7e8", "message": "Move home fragments to ui package", "committedDate": "2020-01-21T15:57:58Z", "type": "commit"}, {"oid": "97ad3ab320a7f9fc2227ab8146c6db939e869949", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/97ad3ab320a7f9fc2227ab8146c6db939e869949", "message": "Add HomeFragmentRow for live tv buttons", "committedDate": "2020-01-21T19:36:14Z", "type": "commit"}, {"oid": "1f7f4867324eeeb981ad83316cc6584fe0bcd8d2", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/1f7f4867324eeeb981ad83316cc6584fe0bcd8d2", "message": "Update comments", "committedDate": "2020-01-21T19:39:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcxMDEzNg==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/268#discussion_r369710136", "bodyText": "When overriding Java methods in Kotlin you can actually choose if an parameter is non-null. Removing the question marks from the functions parameters so you don't need to use the non-null operator (!!) in the implementation.\nSame for some other places in this file", "author": "nielsvanvelzen", "createdAt": "2020-01-22T17:50:33Z", "path": "app/src/main/java/org/jellyfin/androidtv/ui/home/HomeFragmentLiveTVRow.kt", "diffHunk": "@@ -0,0 +1,76 @@\n+package org.jellyfin.androidtv.ui.home\n+\n+import android.app.Activity\n+import android.content.Intent\n+\n+import androidx.leanback.widget.ArrayObjectAdapter\n+import androidx.leanback.widget.HeaderItem\n+import androidx.leanback.widget.ListRow\n+import androidx.leanback.widget.OnItemViewClickedListener\n+import androidx.leanback.widget.Presenter\n+import androidx.leanback.widget.Row\n+import androidx.leanback.widget.RowPresenter\n+\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+import org.jellyfin.androidtv.browsing.BrowseRecordingsActivity\n+import org.jellyfin.androidtv.browsing.BrowseScheduleActivity\n+import org.jellyfin.androidtv.browsing.UserViewActivity\n+import org.jellyfin.androidtv.livetv.LiveTvGuideActivity\n+import org.jellyfin.androidtv.presentation.CardPresenter\n+import org.jellyfin.androidtv.presentation.GridButtonPresenter\n+import org.jellyfin.androidtv.ui.GridButton\n+import org.jellyfin.apiclient.model.dto.BaseItemDto\n+\n+class HomeFragmentLiveTVRow(val activity: Activity?) : HomeFragmentRow(), OnItemViewClickedListener {\n+\toverride fun addToRowsAdapter(cardPresenter: CardPresenter?, rowsAdapter: ArrayObjectAdapter?) {", "originalCommit": "1f7f4867324eeeb981ad83316cc6584fe0bcd8d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTcxMjIwMw==", "url": "https://github.com/jellyfin/jellyfin-androidtv/pull/268#discussion_r369712203", "bodyText": "Can be written like so (not necessary though, just letting you know):\nval folder = BaseItemDto().apply {\n\tid = \"\"\n\tname = activity?.getString(R.string.lbl_recorded_tv)\n}\nWhen you want to go all-out this one won't use any variables (Should probably add some new lines to make it readable though):\nactivity!!.startActivity(Intent(activity, BrowseRecordingsActivity::class.java).apply {\n\tputExtra(\"Folder\", TvApp.getApplication().serializer.SerializeToString(BaseItemDto().apply {\n\t\tid = \"\"\n\t\tname = activity.getString(R.string.lbl_recorded_tv)\n\t}))\n})\nKotlin can do a lot of fun things like this :)", "author": "nielsvanvelzen", "createdAt": "2020-01-22T17:54:35Z", "path": "app/src/main/java/org/jellyfin/androidtv/ui/home/HomeFragmentLiveTVRow.kt", "diffHunk": "@@ -0,0 +1,76 @@\n+package org.jellyfin.androidtv.ui.home\n+\n+import android.app.Activity\n+import android.content.Intent\n+\n+import androidx.leanback.widget.ArrayObjectAdapter\n+import androidx.leanback.widget.HeaderItem\n+import androidx.leanback.widget.ListRow\n+import androidx.leanback.widget.OnItemViewClickedListener\n+import androidx.leanback.widget.Presenter\n+import androidx.leanback.widget.Row\n+import androidx.leanback.widget.RowPresenter\n+\n+import org.jellyfin.androidtv.R\n+import org.jellyfin.androidtv.TvApp\n+import org.jellyfin.androidtv.browsing.BrowseRecordingsActivity\n+import org.jellyfin.androidtv.browsing.BrowseScheduleActivity\n+import org.jellyfin.androidtv.browsing.UserViewActivity\n+import org.jellyfin.androidtv.livetv.LiveTvGuideActivity\n+import org.jellyfin.androidtv.presentation.CardPresenter\n+import org.jellyfin.androidtv.presentation.GridButtonPresenter\n+import org.jellyfin.androidtv.ui.GridButton\n+import org.jellyfin.apiclient.model.dto.BaseItemDto\n+\n+class HomeFragmentLiveTVRow(val activity: Activity?) : HomeFragmentRow(), OnItemViewClickedListener {\n+\toverride fun addToRowsAdapter(cardPresenter: CardPresenter?, rowsAdapter: ArrayObjectAdapter?) {\n+\t\tval header = HeaderItem(rowsAdapter!!.size().toLong(), activity?.getString(R.string.pref_live_tv_cat))\n+\t\tval presenter = GridButtonPresenter()\n+\t\tval adapter = ArrayObjectAdapter(presenter)\n+\n+\t\t// Live TV Guide button\n+\t\tadapter.add(GridButton(TvApp.LIVE_TV_GUIDE_OPTION_ID, activity?.getString(R.string.lbl_live_tv_guide), R.drawable.tile_port_guide))\n+\t\t// Live TV Recordings button\n+\t\tadapter.add(GridButton(TvApp.LIVE_TV_RECORDINGS_OPTION_ID, activity?.getString(R.string.lbl_recorded_tv), R.drawable.tile_port_record))\n+\t\tif (TvApp.getApplication().canManageRecordings()) {\n+\t\t\t// Recording Schedule button\n+\t\t\tadapter.add(GridButton(TvApp.LIVE_TV_SCHEDULE_OPTION_ID, activity?.getString(R.string.lbl_schedule), R.drawable.tile_port_time))\n+\t\t\t// Recording Series button\n+\t\t\tadapter.add(GridButton(TvApp.LIVE_TV_SERIES_OPTION_ID, activity?.getString(R.string.lbl_series), R.drawable.tile_port_series_timer))\n+\t\t}\n+\n+\t\trowsAdapter.add(ListRow(header, adapter))\n+\t}\n+\n+\toverride fun onItemClicked(itemViewHolder: Presenter.ViewHolder?, item: Any?, rowViewHolder: RowPresenter.ViewHolder?, row: Row?) {\n+\t\tif (item !is GridButton) return\n+\n+\t\twhen (item.id) {\n+\t\t\tTvApp.LIVE_TV_GUIDE_OPTION_ID -> {\n+\t\t\t\tval guide = Intent(activity, LiveTvGuideActivity::class.java)\n+\t\t\t\tactivity!!.startActivity(guide)\n+\t\t\t}\n+\t\t\tTvApp.LIVE_TV_RECORDINGS_OPTION_ID -> {\n+\t\t\t\tval recordings = Intent(activity, BrowseRecordingsActivity::class.java)\n+\t\t\t\tval folder = BaseItemDto()", "originalCommit": "1f7f4867324eeeb981ad83316cc6584fe0bcd8d2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "93302c34f703931f82a02314f643b00134a7da4b", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/93302c34f703931f82a02314f643b00134a7da4b", "message": "Update null safety in HomeFragmentLiveTVRow", "committedDate": "2020-01-23T04:56:19Z", "type": "commit"}, {"oid": "055893eb2b945e68ff996bb3f1fd08599a538e7a", "url": "https://github.com/jellyfin/jellyfin-androidtv/commit/055893eb2b945e68ff996bb3f1fd08599a538e7a", "message": "Remove unneeded variable definitions", "committedDate": "2020-01-23T05:30:53Z", "type": "commit"}]}