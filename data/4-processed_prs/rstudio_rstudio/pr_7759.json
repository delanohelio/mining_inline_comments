{"pr_number": 7759, "pr_title": "Improve cursor and output visibility in embedded editors", "pr_createdAt": "2020-09-09T23:18:53Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7759", "timeline": [{"oid": "26ac2e27a33635e4b3d6e841d7b2a5e385a1be66", "url": "https://github.com/rstudio/rstudio/commit/26ac2e27a33635e4b3d6e841d7b2a5e385a1be66", "message": "scroll cursor into view if necessary", "committedDate": "2020-09-08T23:26:38Z", "type": "commit"}, {"oid": "f6957f6545d5270feadf8b8d28bcc4d1e2859487", "url": "https://github.com/rstudio/rstudio/commit/f6957f6545d5270feadf8b8d28bcc4d1e2859487", "message": "use zenscroll to make output visible", "committedDate": "2020-09-09T22:53:42Z", "type": "commit"}, {"oid": "3e1a197eef12f528379dd9c9babddbcee6c0ddfd", "url": "https://github.com/rstudio/rstudio/commit/3e1a197eef12f528379dd9c9babddbcee6c0ddfd", "message": "cleanup", "committedDate": "2020-09-09T23:00:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk4MTE2OQ==", "url": "https://github.com/rstudio/rstudio/pull/7759#discussion_r485981169", "bodyText": "Is listening for beforeEndOperation signals from the editor instance itself an option here? This is basically where Ace itself looks and tries to scroll into view after a command is executed:\nhttps://github.com/ajaxorg/ace/blob/3ebb0c34dc023aff3b6a951dd116a702510369fe/lib/ace/editor.js#L175", "author": "kevinushey", "createdAt": "2020-09-09T23:45:25Z", "path": "src/gwt/panmirror/src/editor/src/optional/ace/ace.ts", "diffHunk": "@@ -455,6 +501,16 @@ export class AceNodeView implements NodeView {\n       }\n     });\n \n+    // If the cursor moves and we're in focus, ensure that the cursor is\n+    // visible. Ace's own cursor visiblity mechanisms don't work in embedded\n+    // editors.\n+    this.editSession.getSelection().on('changeCursor', () => {", "originalCommit": "3e1a197eef12f528379dd9c9babddbcee6c0ddfd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk4MjMxNg==", "url": "https://github.com/rstudio/rstudio/pull/7759#discussion_r485982316", "bodyText": "I'll look into that. The first couple tries at this fix were unsuccessful because scrolling the document immediately after the cursor moved generated jumpiness and unwanted selections (Ace wasn't really done).", "author": "jmcphers", "createdAt": "2020-09-09T23:49:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk4MTE2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjUzODY3NQ==", "url": "https://github.com/rstudio/rstudio/pull/7759#discussion_r486538675", "bodyText": "@kevinushey beforeEndOperation is indeed better! Updated.", "author": "jmcphers", "createdAt": "2020-09-10T18:12:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk4MTE2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU4MjQ2Mw==", "url": "https://github.com/rstudio/rstudio/pull/7759#discussion_r486582463", "bodyText": "Awesome; LGTM!", "author": "kevinushey", "createdAt": "2020-09-10T19:25:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk4MTE2OQ=="}], "type": "inlineReview"}, {"oid": "6d2dc34058905a1ac6debe682f5c772963f8bd58", "url": "https://github.com/rstudio/rstudio/commit/6d2dc34058905a1ac6debe682f5c772963f8bd58", "message": "detect operation end instead of waiting for key/mouse", "committedDate": "2020-09-10T18:07:55Z", "type": "commit"}]}