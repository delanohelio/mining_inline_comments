{"pr_number": 6598, "pr_title": "improve handling of UNC paths on Windows", "pr_createdAt": "2020-04-06T19:37:40Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6598", "timeline": [{"oid": "3b7dde5c2f161619608ddb65cf0aff2f2e3e7132", "url": "https://github.com/rstudio/rstudio/commit/3b7dde5c2f161619608ddb65cf0aff2f2e3e7132", "message": "convert separators when computing relative path", "committedDate": "2020-04-06T18:45:26Z", "type": "commit"}, {"oid": "437f60e72d851975121a80158c93cd6ac735a1eb", "url": "https://github.com/rstudio/rstudio/commit/437f60e72d851975121a80158c93cd6ac735a1eb", "message": "normalize separators when making aliased path", "committedDate": "2020-04-06T18:57:07Z", "type": "commit"}, {"oid": "bc31b57aca88e69bf6ab8721ec901316fc832ea0", "url": "https://github.com/rstudio/rstudio/commit/bc31b57aca88e69bf6ab8721ec901316fc832ea0", "message": "make FilePath tests run on Windows", "committedDate": "2020-04-06T18:57:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0MzUyOA==", "url": "https://github.com/rstudio/rstudio/pull/6598#discussion_r404343528", "bodyText": "Nit: these tests could still fail on anyone's local machine where the RStudio git drive isn't C:. This is really minor, but if there's a way to check the current drive letter, or maybe just compare against a regex (e.g. [A-Z]), or maybe by stripping ^[^:]+: from the start of the actual paths in the tests it could allow the tests to pass regardless of the drive name.", "author": "MariaSemple", "createdAt": "2020-04-06T19:44:00Z", "path": "src/cpp/core/FilePathTests.cpp", "diffHunk": "@@ -13,15 +13,18 @@\n  *\n  */\n \n-// All of these tests presume Unix-style paths\n-#ifndef _WIN32\n-\n #define RSTUDIO_NO_TESTTHAT_ALIASES\n #include <tests/TestThat.hpp>\n \n #include <shared_core/Error.hpp>\n #include <shared_core/FilePath.hpp>\n \n+#ifdef _WIN32\n+# define kRootPrefix \"C:/\"", "originalCommit": "bc31b57aca88e69bf6ab8721ec901316fc832ea0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0NTY1OQ==", "url": "https://github.com/rstudio/rstudio/pull/6598#discussion_r404345659", "bodyText": "Good idea -- perhaps I should just use the drive associated with the current working directory?", "author": "kevinushey", "createdAt": "2020-04-06T19:48:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0MzUyOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0NzAxMA==", "url": "https://github.com/rstudio/rstudio/pull/6598#discussion_r404347010", "bodyText": "I think that would be ideal, if that's possible.", "author": "MariaSemple", "createdAt": "2020-04-06T19:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDM0MzUyOA=="}], "type": "inlineReview"}, {"oid": "2fca3319400566caca111cf579879c8cec2429ab", "url": "https://github.com/rstudio/rstudio/commit/2fca3319400566caca111cf579879c8cec2429ab", "message": "use same drive as current executable for tests", "committedDate": "2020-04-06T21:42:09Z", "type": "commit"}, {"oid": "298a02bd666d6f03751d5390e9a0e68d4143ede8", "url": "https://github.com/rstudio/rstudio/commit/298a02bd666d6f03751d5390e9a0e68d4143ede8", "message": "tweaks", "committedDate": "2020-04-06T21:46:37Z", "type": "commit"}, {"oid": "dd7e24f769f3f69b07a975e90e187963e53369d5", "url": "https://github.com/rstudio/rstudio/commit/dd7e24f769f3f69b07a975e90e187963e53369d5", "message": "tweak comment", "committedDate": "2020-04-06T21:47:48Z", "type": "commit"}]}