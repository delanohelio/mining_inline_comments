{"pr_number": 6017, "pr_title": "Use R_NoSave over R_Slave for R 4.0+", "pr_createdAt": "2020-01-14T21:02:42Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6017", "timeline": [{"oid": "71b1a935762efd24a79de193662450de5a89f67e", "url": "https://github.com/rstudio/rstudio/commit/71b1a935762efd24a79de193662450de5a89f67e", "message": "use R_NoSave over R_Slave for R 4.0+", "committedDate": "2020-01-14T20:53:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjYxNTM3NQ==", "url": "https://github.com/rstudio/rstudio/pull/6017#discussion_r366615375", "bodyText": "Can we check for / report an error here if one occurs? (Basically signal for future-us that --slave is really gone now)", "author": "kevinushey", "createdAt": "2020-01-14T22:52:46Z", "path": "src/cpp/r/CMakeLists.txt", "diffHunk": "@@ -15,6 +15,18 @@\n \n project (R)\n \n+# find the version of R in play\n+find_package(LibR REQUIRED)\n+execute_process(", "originalCommit": "71b1a935762efd24a79de193662450de5a89f67e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjYzMjczMg==", "url": "https://github.com/rstudio/rstudio/pull/6017#discussion_r366632732", "bodyText": "This will already happen elsewhere:\n\n  \n    \n      rstudio/src/cpp/CMakeLists.txt\n    \n    \n        Lines 469 to 478\n      in\n      b22f63e\n    \n    \n    \n    \n\n        \n          \n           # verify we got the required R version \n        \n\n        \n          \n           if(LIBR_FOUND AND RSTUDIO_VERIFY_R_VERSION) \n        \n\n        \n          \n              set(CMAKE_REQUIRED_INCLUDES ${LIBR_INCLUDE_DIRS}) \n        \n\n        \n          \n              execute_process( \n        \n\n        \n          \n                  COMMAND \"${LIBR_EXECUTABLE}\" \"--vanilla\" \"--slave\" \"-e\" \"cat(as.character(getRversion()))\" \n        \n\n        \n          \n                  OUTPUT_VARIABLE LIBR_VERSION) \n        \n\n        \n          \n              if (LIBR_VERSION VERSION_LESS \"3.0.1\") \n        \n\n        \n          \n                 message(FATAL_ERROR \"Minimum R version (${RSTUDIO_R_MAJOR_VERSION_REQUIRED}.${RSTUDIO_R_MINOR_VERSION_REQUIRED}.${RSTUDIO_R_PATCH_VERSION_REQUIRED}) not found.\") \n        \n\n        \n          \n              endif() \n        \n\n        \n          \n           endif() \n        \n    \n  \n\n\nIf you're wondering why we don't piggyback on this check, it's because the r/ folder is a separate CMake project which has no visibility of the parent project's variables.", "author": "jmcphers", "createdAt": "2020-01-14T23:49:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjYxNTM3NQ=="}], "type": "inlineReview"}]}