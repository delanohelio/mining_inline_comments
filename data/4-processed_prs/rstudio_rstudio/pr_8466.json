{"pr_number": 8466, "pr_title": "don't use virtual console for inline chunk output", "pr_createdAt": "2020-11-23T23:14:55Z", "pr_url": "https://github.com/rstudio/rstudio/pull/8466", "timeline": [{"oid": "03a87dc78b2072aa63cc67bcc689b2d18f544fe8", "url": "https://github.com/rstudio/rstudio/commit/03a87dc78b2072aa63cc67bcc689b2d18f544fe8", "message": "don't use virtual console for inline chunk output", "committedDate": "2020-11-23T23:13:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA4OTI3Mg==", "url": "https://github.com/rstudio/rstudio/pull/8466#discussion_r529089272", "bodyText": "Unfortunately these invariants will just hide bugs. Those two cases are invalid for how this is written. A scroller element with a parent is necessary for the virtualizer, at least at the moment. We could put a check higher up to throw an error early, like when it's traversing up the DOM to find the scroller element, but the assumption is that this class is written expressly to work inside an ace_scroller element.", "author": "adamconroy", "createdAt": "2020-11-24T00:44:30Z", "path": "src/gwt/src/org/rstudio/core/client/virtualscroller/virtualscroller.js", "diffHunk": "@@ -87,7 +87,12 @@ var VirtualScroller;\n       }\n \n       // jump to latest button\n-      if (this.scrollerEle.parentElement.getElementsByClassName(\"jump-to-latest-console\").length < 1) {\n+      var hasJumpToConsoleBtn =\n+        this.scrollerEle &&\n+        this.scrollerEle.parentElement &&\n+        this.scrollerEle.parentElement.getElementsByClassName(\"jump-to-latest-console\").length < 1;", "originalCommit": "03a87dc78b2072aa63cc67bcc689b2d18f544fe8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTEwNjU2NA==", "url": "https://github.com/rstudio/rstudio/pull/8466#discussion_r529106564", "bodyText": "Roger that. I've made a change so that we throw a plain error if we cannot resolve the scroller element, so at least errors will be more \"obvious\" for us. Let me know if this looks okay.", "author": "kevinushey", "createdAt": "2020-11-24T01:26:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA4OTI3Mg=="}], "type": "inlineReview"}, {"oid": "3c295e3284f9087a58e4d7a20ada1cc17aa09787", "url": "https://github.com/rstudio/rstudio/commit/3c295e3284f9087a58e4d7a20ada1cc17aa09787", "message": "throw error when no scroller element found", "committedDate": "2020-11-24T01:25:29Z", "type": "commit"}]}