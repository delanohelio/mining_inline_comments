{"pr_number": 6835, "pr_title": "For IE11 (only), use core-js 3.6.5 polyfill", "pr_createdAt": "2020-05-07T22:13:18Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6835", "timeline": [{"oid": "edcc052d9cc9dce566b975b9fb3c2156a5ef5f72", "url": "https://github.com/rstudio/rstudio/commit/edcc052d9cc9dce566b975b9fb3c2156a5ef5f72", "message": "For IE11 (only), use core-js 3.6.5 polyfill\n\nYes, the core-js version is 3.6.5, despite the files saying 3.6.4.\nSource: https://unpkg.com/browse/core-js-bundle@3.6.5/", "committedDate": "2020-05-07T22:11:57Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MTMwMw==", "url": "https://github.com/rstudio/rstudio/pull/6835#discussion_r421851303", "bodyText": "This looks like a no-op -- should we just omit the else?", "author": "jmcphers", "createdAt": "2020-05-07T23:29:33Z", "path": "src/cpp/core/gwt/GwtFileHandler.cpp", "diffHunk": "@@ -133,11 +133,19 @@ void handleFileRequest(const FileRequestOptions& options,\n                          (request.queryParamValue(\"emulatedStack\") == \"1\");\n       vars[\"compiler_stack_mode\"] = useEmulatedStack ? \"emulated\" : \"native\";\n \n+      // polyfill for IE11 (only)\n+      std::string polyfill = \"<script type=\\\"text/javascript\\\" language=\\\"javascript\\\" src=\\\"js/core-js/minified.js\\\"></script>\\n\";\n+      if (regex_utils::match(request.userAgent(), boost::regex(\".*Trident.*\"))) {\n+         vars[\"head_tags\"] = polyfill;\n+      } else {\n+         vars[\"head_tags\"] = std::string();\n+      }\n+\n       // check for initJs\n       if (!options.initJs.empty())\n-         vars[\"head_tags\"] = \"<script>\" + options.initJs + \"</script>\";\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + \"<script>\" + options.initJs + \"</script>\";\n       else\n-         vars[\"head_tags\"] = std::string();\n+         vars[\"head_tags\"] = vars[\"head_tags\"] + std::string();", "originalCommit": "edcc052d9cc9dce566b975b9fb3c2156a5ef5f72", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MjQwMg==", "url": "https://github.com/rstudio/rstudio/pull/6835#discussion_r421852402", "bodyText": "Good catch, thanks!", "author": "jcheng5", "createdAt": "2020-05-07T23:32:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg1MTMwMw=="}], "type": "inlineReview"}, {"oid": "4eb7b85550796c6e4cf45cd9ae60efe8f92fcba3", "url": "https://github.com/rstudio/rstudio/commit/4eb7b85550796c6e4cf45cd9ae60efe8f92fcba3", "message": "Remove extraneous else", "committedDate": "2020-05-07T23:32:36Z", "type": "commit"}]}