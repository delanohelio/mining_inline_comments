{"pr_number": 6889, "pr_title": "fix cpp unit tests on macos", "pr_createdAt": "2020-05-15T23:39:03Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6889", "timeline": [{"oid": "bddca4e193c40a871cf0d49483559eda20c1cfc5", "url": "https://github.com/rstudio/rstudio/commit/bddca4e193c40a871cf0d49483559eda20c1cfc5", "message": "fix cpp unit tests on macos\n\nTests now relying on timeout command, which isn't on macOS. Use gtimeout from brew coreutils, instead", "committedDate": "2020-05-15T23:38:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA5MTI4MQ==", "url": "https://github.com/rstudio/rstudio/pull/6889#discussion_r426091281", "bodyText": "I know these variables aren't case sensitive but it still feels weird to have one named TIMEOUT and one named timeout!", "author": "jmcphers", "createdAt": "2020-05-15T23:49:31Z", "path": "src/cpp/rstudio-tests.in", "diffHunk": "@@ -33,6 +33,12 @@ findLibSegFault()\n \n runWatchdogProcess()\n {\n+   if [[ \"$OSTYPE\" == \"darwin\"* ]]; then\n+      # requires brew install coreutils\n+      TIMEOUT=gtimeout\n+   else\n+      TIMEOUT=timeout", "originalCommit": "bddca4e193c40a871cf0d49483559eda20c1cfc5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA5MjE4Mg==", "url": "https://github.com/rstudio/rstudio/pull/6889#discussion_r426092182", "bodyText": "Tweaked to be TIMEOUT_CMD instead.", "author": "gtritchie", "createdAt": "2020-05-15T23:54:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjA5MTI4MQ=="}], "type": "inlineReview"}, {"oid": "1a7510a3e13e789d310627a5e98c49c277ca08ed", "url": "https://github.com/rstudio/rstudio/commit/1a7510a3e13e789d310627a5e98c49c277ca08ed", "message": "tweak name of TIMEOUT variable", "committedDate": "2020-05-15T23:53:56Z", "type": "commit"}]}