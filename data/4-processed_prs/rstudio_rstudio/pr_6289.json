{"pr_number": 6289, "pr_title": "Reload packages pane state after installing dependencies", "pr_createdAt": "2020-02-22T00:01:57Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6289", "timeline": [{"oid": "7038e81502b44a1d20136d02737575cf55e749b6", "url": "https://github.com/rstudio/rstudio/commit/7038e81502b44a1d20136d02737575cf55e749b6", "message": "reload packages pane state after installing dependencies", "committedDate": "2020-02-21T23:57:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTc4Mw==", "url": "https://github.com/rstudio/rstudio/pull/6289#discussion_r382869783", "bodyText": "I wonder if this lambda should actually capture by value? IIUC it's capturing the job (a shared pointer) by reference, which means in theory if the job were to be deleted we'd be left with a dangling reference. Seems unlikely to happen in practice but capturing by value feels safer.", "author": "kevinushey", "createdAt": "2020-02-22T01:03:27Z", "path": "src/cpp/session/modules/jobs/AsyncRJobManager.cpp", "diffHunk": "@@ -117,7 +121,7 @@ Error registerAsyncRJob(boost::shared_ptr<AsyncRJob> job,\n    job->registerJob();\n \n    // remove the job from the registry when it's done\n-   job->setOnComplete([&]() \n+   job->addOnComplete([&]() ", "originalCommit": "7038e81502b44a1d20136d02737575cf55e749b6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzQzOTgyMg==", "url": "https://github.com/rstudio/rstudio/pull/6289#discussion_r383439822", "bodyText": "Agreed! I've made this change.", "author": "jmcphers", "createdAt": "2020-02-24T18:34:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Mjg2OTc4Mw=="}], "type": "inlineReview"}, {"oid": "85d272c8473ed2484deaa72e28d137a7e9fd4fdd", "url": "https://github.com/rstudio/rstudio/commit/85d272c8473ed2484deaa72e28d137a7e9fd4fdd", "message": "pass job pointer by value", "committedDate": "2020-02-24T18:34:35Z", "type": "commit"}]}