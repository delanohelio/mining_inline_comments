{"pr_number": 6264, "pr_title": "overhaul display of Tutorial pane tutorials", "pr_createdAt": "2020-02-19T19:29:52Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6264", "timeline": [{"oid": "8bcf9887bd7e5fd61b51e58adcda6fcc6e97d5c3", "url": "https://github.com/rstudio/rstudio/commit/8bcf9887bd7e5fd61b51e58adcda6fcc6e97d5c3", "message": "overhaul display of Tutorial pane tutorials", "committedDate": "2020-02-19T19:26:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU1OTExNQ==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381559115", "bodyText": "The examples make me wonder if we should interpret Markdown here. We already build and include a self-contained Markdown parser (sundown, see R Presentations for use) so might be very straightforward to integrate. What do you think?", "author": "jmcphers", "createdAt": "2020-02-19T21:37:11Z", "path": "src/cpp/session/modules/SessionTutorial.cpp", "diffHunk": "@@ -267,10 +245,12 @@ void handleTutorialHomeRequest(const http::Request& request,\n                << tutorial.description", "originalCommit": "8bcf9887bd7e5fd61b51e58adcda6fcc6e97d5c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU2NTk5NA==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381565994", "bodyText": "That is an excellent idea!", "author": "kevinushey", "createdAt": "2020-02-19T21:51:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU1OTExNQ=="}], "type": "inlineReview"}, {"oid": "b5f9f52db3df87e93e3f77758b0b0cc0ec7ad33a", "url": "https://github.com/rstudio/rstudio/commit/b5f9f52db3df87e93e3f77758b0b0cc0ec7ad33a", "message": "render markdown included in tutorial description", "committedDate": "2020-02-19T21:56:57Z", "type": "commit"}, {"oid": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "url": "https://github.com/rstudio/rstudio/commit/127577bff3a2af114ac916ac1a73d44b0bded2fb", "message": "slightly more compact display", "committedDate": "2020-02-19T21:59:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU3NDA0OQ==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381574049", "bodyText": "Instead of a div use <main class=\"rstudio-tutorials-container\">. This is more semantically correct and provides more context on the page layout to a screen reader user.\nIf main causes styling issues, could instead add role=\"main\" to the div and achieve the same result.", "author": "gtritchie", "createdAt": "2020-02-19T22:08:15Z", "path": "src/cpp/session/resources/tutorial_resources/index.html", "diffHunk": "@@ -7,9 +7,23 @@\n    </head>\n \n    <body class=\"rstudio-tutorials\" style=\"visibility: hidden;\">\n+\n       <div class=\"rstudio-tutorials-container\">", "originalCommit": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU3NTM3OQ==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381575379", "bodyText": "The icon doesn't add any useful information to a screen reader user, so just use an empty alt to mark it as purely a decorative element that a screen-reader can ignore.\n<img class=\"rstudio-tutorials-logo\" alt src=\"./rstudio-logo.png\">", "author": "gtritchie", "createdAt": "2020-02-19T22:11:10Z", "path": "src/cpp/session/resources/tutorial_resources/index.html", "diffHunk": "@@ -7,9 +7,23 @@\n    </head>\n \n    <body class=\"rstudio-tutorials\" style=\"visibility: hidden;\">\n+\n       <div class=\"rstudio-tutorials-container\">\n          #!tutorials#\n       </div>\n+\n+      <div class=\"rstudio-tutorials-footer\">\n+\n+         <img class=\"rstudio-tutorials-logo\" alt=\"RStudio Icon\" src=\"./rstudio-logo.png\">", "originalCommit": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU3NjgxMw==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381576813", "bodyText": "Instead of a div use <footer>. Same reasons as for using main.\nAlternatively can add role=\"contentinfo\" to the div to achieve the same result.", "author": "gtritchie", "createdAt": "2020-02-19T22:14:14Z", "path": "src/cpp/session/resources/tutorial_resources/index.html", "diffHunk": "@@ -7,9 +7,23 @@\n    </head>\n \n    <body class=\"rstudio-tutorials\" style=\"visibility: hidden;\">\n+\n       <div class=\"rstudio-tutorials-container\">\n          #!tutorials#\n       </div>\n+\n+      <div class=\"rstudio-tutorials-footer\">", "originalCommit": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NDYwNQ==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381584605", "bodyText": "The heading of each tutorial should actually be an HTML heading, probably <h2>. Don't want to use <h1> because there should generally only be a single <h1> in a given page/iframe. In this case we have no h1 but that's life in the big city.\nReason to use actual heading is that screen readers can then present a list of the tutorials for easier browsing and navigation. Otherwise it's just a big text document with no structure.\nInstead of using actual <h2> can markup the existing span like this:\n<span role=\"heading\" aria-level=\"2\" class=\"rstudio-tutorials-label\">", "author": "gtritchie", "createdAt": "2020-02-19T22:31:16Z", "path": "src/cpp/session/modules/SessionTutorial.cpp", "diffHunk": "@@ -249,8 +225,11 @@ void handleTutorialHomeRequest(const http::Request& request,\n             << htmlEscape(tutorial.title)", "originalCommit": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTU4NzI1OQ==", "url": "https://github.com/rstudio/rstudio/pull/6264#discussion_r381587259", "bodyText": "The purpose of the button is obvious to a sighted user, but to a screen-reader user the buttons look like a list of identical buttons with no context. Example below from VoiceOver.\nTo fix this, add an aria-label=\"foo\" to each button where \"foo\" is something like \"Start Data Basics Tutorial\". This will be read by screen readers, but visual users will just see the existing label.", "author": "gtritchie", "createdAt": "2020-02-19T22:37:11Z", "path": "src/cpp/session/modules/SessionTutorial.cpp", "diffHunk": "@@ -249,8 +225,11 @@ void handleTutorialHomeRequest(const http::Request& request,\n             << htmlEscape(tutorial.title)\n             << \"</span>\";\n          \n-         ss << \"<span class=\\\"rstudio-tutorials-name\\\">\"\n-            << htmlFormatTutorialName(pkgName, tutorial)\n+         ss << \"<span class=\\\"rstudio-tutorials-run-container\\\">\"\n+            << \"<button class=\\\"rstudio-tutorials-run-button\\\" onclick=\\\"window.parent.tutorialRun('\" << htmlEscape(tutorial.name) << \"', '\" << htmlEscape(pkgName) << \"')\\\">\"\n+            << \"<span class=\\\"rstudio-tutorials-run-button-label\\\">Start Tutorial</span>\"", "originalCommit": "127577bff3a2af114ac916ac1a73d44b0bded2fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "08a382993935193a9cb1e939544a5a6c35d5767b", "url": "https://github.com/rstudio/rstudio/commit/08a382993935193a9cb1e939544a5a6c35d5767b", "message": "further refine styles", "committedDate": "2020-02-19T23:05:04Z", "type": "commit"}, {"oid": "c342e49956400f68374e4fbfab007f9d93441d0c", "url": "https://github.com/rstudio/rstudio/commit/c342e49956400f68374e4fbfab007f9d93441d0c", "message": "accessibility feedback", "committedDate": "2020-02-19T23:21:55Z", "type": "commit"}, {"oid": "73d95188ce799461a8a86de29799b65ee67ed96e", "url": "https://github.com/rstudio/rstudio/commit/73d95188ce799461a8a86de29799b65ee67ed96e", "message": "missed alt", "committedDate": "2020-02-19T23:23:20Z", "type": "commit"}, {"oid": "7991bbbc8ecde17d41869b2ae6a04430ffd137b9", "url": "https://github.com/rstudio/rstudio/commit/7991bbbc8ecde17d41869b2ae6a04430ffd137b9", "message": "disallow selection of button text", "committedDate": "2020-02-19T23:45:10Z", "type": "commit"}, {"oid": "e5f4d7fb044151b9a153b35691fe829baee1a1fb", "url": "https://github.com/rstudio/rstudio/commit/e5f4d7fb044151b9a153b35691fe829baee1a1fb", "message": "implement missing zoom handler for Tutorial", "committedDate": "2020-02-19T23:47:01Z", "type": "commit"}, {"oid": "f82a8f4bbf46f05ffe077be1bb24bc90e2b93050", "url": "https://github.com/rstudio/rstudio/commit/f82a8f4bbf46f05ffe077be1bb24bc90e2b93050", "message": "add missing tutorial activate command", "committedDate": "2020-02-19T23:52:57Z", "type": "commit"}]}