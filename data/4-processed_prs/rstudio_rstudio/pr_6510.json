{"pr_number": 6510, "pr_title": "refresh potentially stale viewer fn definitions", "pr_createdAt": "2020-03-23T17:31:57Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6510", "timeline": [{"oid": "d2ec8f42fee0fa71ae1c625ddc77fb1079628f6d", "url": "https://github.com/rstudio/rstudio/commit/d2ec8f42fee0fa71ae1c625ddc77fb1079628f6d", "message": "refresh potentially stale viewer fn definitions", "committedDate": "2020-03-23T17:31:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzMzA1OQ==", "url": "https://github.com/rstudio/rstudio/pull/6510#discussion_r396633059", "bodyText": "Should this be behind an else? (otherwise it looks like a NULL initial value will cause us to set the option twice)", "author": "jmcphers", "createdAt": "2020-03-23T17:37:06Z", "path": "src/cpp/session/modules/SessionShinyViewer.cpp", "diffHunk": "@@ -329,6 +329,15 @@ Error initShinyViewerPref(boost::shared_ptr<std::string> pShinyViewerType)\n    {\n       setShinyViewerType(*pShinyViewerType);\n    }\n+   \n+   // the functions used to invoke the Shiny viewer changed in v1.2 -> v1.3;\n+   // however, the older versions of these functions may be persisted as part\n+   // of the R options (for shiny.launch.browser). for that reason, we detect\n+   // if this option is set and ensure an up-to-date copy of the function is\n+   // used as appropriate\n+   Error error = r::exec::RFunction(\".rs.refreshShinyLaunchBrowserOption\").call();", "originalCommit": "d2ec8f42fee0fa71ae1c625ddc77fb1079628f6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjY0NzgwMA==", "url": "https://github.com/rstudio/rstudio/pull/6510#discussion_r396647800", "bodyText": "You're correct -- I've made that change.", "author": "kevinushey", "createdAt": "2020-03-23T17:58:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjYzMzA1OQ=="}], "type": "inlineReview"}, {"oid": "6b313a9d02e6994acde539d74e2c984de48cd4fd", "url": "https://github.com/rstudio/rstudio/commit/6b313a9d02e6994acde539d74e2c984de48cd4fd", "message": "only refresh when option is non-null", "committedDate": "2020-03-23T17:57:48Z", "type": "commit"}]}