{"pr_number": 7831, "pr_title": "add 'documentPath' API", "pr_createdAt": "2020-09-18T04:48:08Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7831", "timeline": [{"oid": "af76a9442df3c5011c56f86501a925726071184c", "url": "https://github.com/rstudio/rstudio/commit/af76a9442df3c5011c56f86501a925726071184c", "message": "add 'documentPath' API", "committedDate": "2020-09-18T04:39:28Z", "type": "commit"}, {"oid": "e011b701a527dc5f9998d78ef1679e02261ab6da", "url": "https://github.com/rstudio/rstudio/commit/e011b701a527dc5f9998d78ef1679e02261ab6da", "message": "determine path from source doc props", "committedDate": "2020-09-18T04:42:34Z", "type": "commit"}, {"oid": "bcf269f3c8e02d5e9524e9ab8a544073b365e495", "url": "https://github.com/rstudio/rstudio/commit/bcf269f3c8e02d5e9524e9ab8a544073b365e495", "message": "also route events to console as appropriate", "committedDate": "2020-09-18T04:56:15Z", "type": "commit"}, {"oid": "aa7d04fc365fda45c669f4451cea868c2a019e35", "url": "https://github.com/rstudio/rstudio/commit/aa7d04fc365fda45c669f4451cea868c2a019e35", "message": "better manage exceptions, console targets", "committedDate": "2020-09-18T05:03:06Z", "type": "commit"}, {"oid": "89604abb883fabe0e125ed421056cfd5c2633f63", "url": "https://github.com/rstudio/rstudio/commit/89604abb883fabe0e125ed421056cfd5c2633f63", "message": "fix payload cast", "committedDate": "2020-09-18T05:13:28Z", "type": "commit"}, {"oid": "05bd73428dd54e8d87a86af93bc2115c6399fa9c", "url": "https://github.com/rstudio/rstudio/commit/05bd73428dd54e8d87a86af93bc2115c6399fa9c", "message": "clarity in naming", "committedDate": "2020-09-18T05:16:34Z", "type": "commit"}, {"oid": "e2888b05317e22c59b4dd4f86814ecc0219ef5a6", "url": "https://github.com/rstudio/rstudio/commit/e2888b05317e22c59b4dd4f86814ecc0219ef5a6", "message": "comma fixups", "committedDate": "2020-09-18T05:17:33Z", "type": "commit"}, {"oid": "eaf38c16c0b53ffb19c6f9c0ef6151cd581cc82f", "url": "https://github.com/rstudio/rstudio/commit/eaf38c16c0b53ffb19c6f9c0ef6151cd581cc82f", "message": "fixups", "committedDate": "2020-09-18T05:18:18Z", "type": "commit"}, {"oid": "920f4ec305fcf116f9de557be985744fa137d06c", "url": "https://github.com/rstudio/rstudio/commit/920f4ec305fcf116f9de557be985744fa137d06c", "message": "use plain old 'file.edit()' for navigateToFile when line, col unset", "committedDate": "2020-09-18T05:24:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTA3NDczOQ==", "url": "https://github.com/rstudio/rstudio/pull/7831#discussion_r491074739", "bodyText": "Should this raise an R error (so that the return value isn't \"null\" w/o apparent cause from the R caller's point of view?)", "author": "jmcphers", "createdAt": "2020-09-18T16:53:54Z", "path": "src/cpp/session/modules/RStudioAPI.cpp", "diffHunk": "@@ -233,6 +234,30 @@ SEXP rs_systemUsername()\n    return r::sexp::create(core::system::username(), &protect);\n }\n \n+SEXP rs_documentProperties(SEXP idSEXP,\n+                           SEXP includeContentsSEXP)\n+{\n+   // resolve params\n+   std::string id = r::sexp::asString(idSEXP);\n+   bool includeContents = r::sexp::asLogical(includeContentsSEXP);\n+\n+   // retrieve document\n+   using session::source_database::SourceDocument;\n+   boost::shared_ptr<SourceDocument> pDoc(new SourceDocument);\n+   Error error = source_database::get(id, pDoc);\n+   if (error)\n+   {\n+      LOG_ERROR(error);", "originalCommit": "920f4ec305fcf116f9de557be985744fa137d06c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9d7d16d907e4f8a117219128f757c27889d9c8e9", "url": "https://github.com/rstudio/rstudio/commit/9d7d16d907e4f8a117219128f757c27889d9c8e9", "message": "log warning if we fail to retrieve document properties", "committedDate": "2020-09-18T17:43:36Z", "type": "commit"}]}