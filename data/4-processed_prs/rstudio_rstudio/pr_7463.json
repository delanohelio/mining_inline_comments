{"pr_number": 7463, "pr_title": "Add command focusPreviousPane", "pr_createdAt": "2020-07-27T23:48:26Z", "pr_url": "https://github.com/rstudio/rstudio/pull/7463", "timeline": [{"oid": "ac04418763dc62344095e31161287f7ddcaae8d5", "url": "https://github.com/rstudio/rstudio/commit/ac04418763dc62344095e31161287f7ddcaae8d5", "message": "do not attempt to display source columns before they are ready. Make sure columns are always added\nto the left of the view and end of the manager's list.", "committedDate": "2020-07-27T21:30:39Z", "type": "commit"}, {"oid": "7a2b7f270d1fe5d665e566d16673b4aea0a0e440", "url": "https://github.com/rstudio/rstudio/commit/7a2b7f270d1fe5d665e566d16673b4aea0a0e440", "message": "implement Shift+F6 to navigate to previous pane", "committedDate": "2020-07-27T23:41:42Z", "type": "commit"}, {"oid": "bcb54f55358f392195bcf9096be8aff5b18fdd20", "url": "https://github.com/rstudio/rstudio/commit/bcb54f55358f392195bcf9096be8aff5b18fdd20", "message": "change debugFinish command to Shift+F7", "committedDate": "2020-07-27T23:42:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDEzMw==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250133", "bodyText": "Nit: Extra space after !=.", "author": "gtritchie", "createdAt": "2020-07-28T00:40:34Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -290,8 +290,8 @@ public PaneManager(Provider<MainSplitPanel> pSplitPanel,\n       //\u00a0get the widgets for the extra source columns to be displayed\n       ArrayList<Widget> sourceColumns = new ArrayList<>();\n       additionalSourceCount_ = userPrefs_.panes().getValue().getAdditionalSourceColumns();\n-      if (additionalSourceCount_ !=  sourceColumnManager_.getSize())\n-         syncAdditionalColumnCount(additionalSourceCount_);\n+      if (additionalSourceCount_ !=  sourceColumnManager_.getSize() - 1)", "originalCommit": "bcb54f55358f392195bcf9096be8aff5b18fdd20", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjkxMQ==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316911", "bodyText": "Fixed \ud83d\udc4d", "author": "melissa-barca", "createdAt": "2020-07-28T04:53:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDEzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDk4OA==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461250988", "bodyText": "Nit: although it's a constant now, if we ever make max column count configurable then maybe want this to be a >= comparison just to be safe in case where max changes to be smaller than current number of columns?", "author": "gtritchie", "createdAt": "2020-07-28T00:43:41Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/ui/PaneManager.java", "diffHunk": "@@ -582,55 +583,103 @@ public void onFocusCenterSeparator()\n    @Handler\n    public void onFocusNextPane()\n    {\n-      // get the name of the currently focused pane\n       LogicalWindow currentFocus = getActiveLogicalWindow();\n-      String nextFocusName = null;\n-      if (currentFocus != null)\n+      if (currentFocus == null)\n+         return;\n+\n+      focusWindow(getAdjacentWindow(currentFocus, false /* before */));\n+   }\n+\n+   @Handler\n+   public void onFocusPreviousPane()\n+   {\n+      LogicalWindow currentFocus = getActiveLogicalWindow();\n+      if (currentFocus == null)\n+         return;\n+      focusWindow(getAdjacentWindow(currentFocus, true /* before */));\n+   }\n+\n+   @Handler\n+    public void onNewSourceColumn()\n+    {\n+       if (!userPrefs_.allowSourceColumns().getValue())\n+          pGlobalDisplay_.get().showMessage(GlobalDisplay.MSG_INFO, \"Cannot Add Column\",\n+             \"Allow Source Columns preference is disabled.\");\n+       else if (additionalSourceCount_ == MAX_COLUMN_COUNT)", "originalCommit": "bcb54f55358f392195bcf9096be8aff5b18fdd20", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjg0MA==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316840", "bodyText": "Good idea, done!", "author": "melissa-barca", "createdAt": "2020-07-28T04:52:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MDk4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MTg3MA==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461251870", "bodyText": "Nit: typo \"lsit\"", "author": "gtritchie", "createdAt": "2020-07-28T00:46:53Z", "path": "src/gwt/src/org/rstudio/studio/client/workbench/views/source/SourceColumnManager.java", "diffHunk": "@@ -1440,20 +1452,14 @@ public void consolidateColumns(int num)\n       SourceColumn mainColumn = getByName(MAIN_SOURCE_NAME);\n       if (num < columnList_.size())\n       {\n-         CPSEditingTargetCommand moveCommand = new CPSEditingTargetCommand()\n-         {\n-            @Override\n-            public void execute(EditingTarget editingTarget, Command continuation)\n-            {\n-            }\n-         };\n          ArrayList<SourceColumn> moveColumns = new ArrayList<>(columnList_);\n          moveColumns.remove(mainColumn);\n+\n+         // remove columns from the end of the lsit first", "originalCommit": "bcb54f55358f392195bcf9096be8aff5b18fdd20", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTMxNjk4NQ==", "url": "https://github.com/rstudio/rstudio/pull/7463#discussion_r461316985", "bodyText": "Done!", "author": "melissa-barca", "createdAt": "2020-07-28T04:53:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTI1MTg3MA=="}], "type": "inlineReview"}, {"oid": "8c4ad26395af5c1fa1014904154830a6b744043b", "url": "https://github.com/rstudio/rstudio/commit/8c4ad26395af5c1fa1014904154830a6b744043b", "message": "clean up typos", "committedDate": "2020-07-28T04:50:26Z", "type": "commit"}]}