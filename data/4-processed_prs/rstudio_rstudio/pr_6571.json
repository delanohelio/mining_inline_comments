{"pr_number": 6571, "pr_title": "force software rendering when using nouveau driver w/ older Qt", "pr_createdAt": "2020-04-01T22:20:56Z", "pr_url": "https://github.com/rstudio/rstudio/pull/6571", "timeline": [{"oid": "4d8f1b47dd876c2ff5bb2601761fcf512fef19c3", "url": "https://github.com/rstudio/rstudio/commit/4d8f1b47dd876c2ff5bb2601761fcf512fef19c3", "message": "force software rendering when using nouveau driver", "committedDate": "2020-04-01T22:20:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MzYzNQ==", "url": "https://github.com/rstudio/rstudio/pull/6571#discussion_r401963635", "bodyText": "Does inferDefaultRenderingEngine only get called on Linux?", "author": "jmcphers", "createdAt": "2020-04-01T23:14:12Z", "path": "src/cpp/desktop/DesktopMain.cpp", "diffHunk": "@@ -376,6 +376,32 @@ QString inferDefaultRenderingEngine()\n \n QString inferDefaultRenderingEngine()\n {\n+   // disable opengl when using nouveau drivers, as a large number\n+   // of users have reported crashes when attempting to do so.\n+   //\n+   // NOTE: we'll currently assume this is fixed in the next Qt\n+   // update, so guard only for older Qt for now\n+   //\n+   // https://github.com/rstudio/rstudio/issues/3781\n+   // https://bugreports.qt.io/browse/QTBUG-73715\n+#if QT_VERSION < QT_VERSION_CHECK(5, 13, 0)\n+   core::system::ProcessResult result;\n+   Error error = core::system::runCommand(\n+            \"lspci -mkv | grep -q 'Driver:[[:space:]]*nouveau'\",", "originalCommit": "4d8f1b47dd876c2ff5bb2601761fcf512fef19c3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2NDUxMw==", "url": "https://github.com/rstudio/rstudio/pull/6571#discussion_r401964513", "bodyText": "Each platform gets its own version of this routine (for the three desktop platforms we support). I should probably make this more clear, though.", "author": "kevinushey", "createdAt": "2020-04-01T23:16:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTk2MzYzNQ=="}], "type": "inlineReview"}, {"oid": "c603206655c36e546ab360a628a429b0c34578c7", "url": "https://github.com/rstudio/rstudio/commit/c603206655c36e546ab360a628a429b0c34578c7", "message": "clarify platform-specific code is platform-specific", "committedDate": "2020-04-01T23:21:37Z", "type": "commit"}]}