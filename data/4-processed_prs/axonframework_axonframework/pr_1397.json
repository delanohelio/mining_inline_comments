{"pr_number": 1397, "pr_title": "Complete request stream when response stream completes or errors", "pr_createdAt": "2020-04-06T09:31:34Z", "pr_url": "https://github.com/AxonFramework/AxonFramework/pull/1397", "timeline": [{"oid": "54e1c66520fa226897719165d93ab750f9722772", "url": "https://github.com/AxonFramework/AxonFramework/commit/54e1c66520fa226897719165d93ab750f9722772", "message": "close request stream on error or complete on response stream", "committedDate": "2020-04-06T09:19:17Z", "type": "commit"}, {"oid": "1d89bf833ca04665658b658146b1fe0c44b83b73", "url": "https://github.com/AxonFramework/AxonFramework/commit/1d89bf833ca04665658b658146b1fe0c44b83b73", "message": "close request stream on error or complete on response stream", "committedDate": "2020-04-06T09:25:23Z", "type": "commit"}, {"oid": "8727e85365fe92253be5e1c57fa2a043af94244e", "url": "https://github.com/AxonFramework/AxonFramework/commit/8727e85365fe92253be5e1c57fa2a043af94244e", "message": "Merge remote-tracking branch 'origin/axon-4.3.x' into fix/1388a\n\n# Conflicts:\n#\taxon-server-connector/src/main/java/org/axonframework/axonserver/connector/query/AxonServerQueryBus.java", "committedDate": "2020-04-06T09:30:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1NzQ4Ng==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1397#discussion_r403957486", "bodyText": "There is a StreamObserverUtils that contains this logic already. Can't we use that one instead?", "author": "abuijze", "createdAt": "2020-04-06T09:38:53Z", "path": "axon-server-connector/src/main/java/org/axonframework/axonserver/connector/util/UpstreamAwareStreamObserver.java", "diffHunk": "@@ -27,4 +27,18 @@ public void beforeStart(ClientCallStreamObserver<Object> requestStream) {\n     public ClientCallStreamObserver<?> getRequestStream() {\n         return requestStream;\n     }\n+\n+    /**\n+     * Completes the request steam related to this stream observer. Ignores exceptions that may occur (for instance if\n+     * the request stream is already half-closed).\n+     */\n+    protected void completeRequestStream() {\n+         if( requestStream != null) {", "originalCommit": "8727e85365fe92253be5e1c57fa2a043af94244e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1ODE3OQ==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1397#discussion_r403958179", "bodyText": "StreamObserverUtils is class in axonserver se", "author": "MGathier", "createdAt": "2020-04-06T09:39:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1NzQ4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1OTcwNA==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1397#discussion_r403959704", "bodyText": "\ud83e\udd26\u200d\u2642", "author": "abuijze", "createdAt": "2020-04-06T09:42:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzk1NzQ4Ng=="}], "type": "inlineReview"}]}