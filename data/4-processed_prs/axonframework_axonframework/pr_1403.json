{"pr_number": 1403, "pr_title": "Removed autoconfiguration of EventStore when EventBus is present", "pr_createdAt": "2020-04-09T19:01:55Z", "pr_url": "https://github.com/AxonFramework/AxonFramework/pull/1403", "timeline": [{"oid": "7eca449cd6cb01fca156c5b6145280d57c744804", "url": "https://github.com/AxonFramework/AxonFramework/commit/7eca449cd6cb01fca156c5b6145280d57c744804", "message": "Removed autoconfiguration of EventStore when EventBus is present\n\nWhen explicitly defining an EventBus in the configuration, that should be interpreted as an attempt to suppress Event Sourcing.\n\nResolves #1395", "committedDate": "2020-04-09T19:00:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYzNTczOQ==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1403#discussion_r406635739", "bodyText": "Why have the JdbcSQLErrorCodesResolver and UnitOfWorkAwareConnectionProviderWrapper assertions been removed from the test?", "author": "smcvb", "createdAt": "2020-04-10T07:16:18Z", "path": "spring-boot-autoconfigure/src/test/java/org/axonframework/springboot/JdbcAutoConfigurationTest.java", "diffHunk": "@@ -56,39 +53,38 @@\n  *\n  * @author Milan Savic\n  */\n-@ExtendWith(SpringExtension.class)\n-@EnableMBeanExport(registration = RegistrationPolicy.IGNORE_EXISTING)\n-@ContextConfiguration(classes = JdbcAutoConfigurationTest.Context.class)\n-@EnableAutoConfiguration(exclude = {\n-        JpaRepositoriesAutoConfiguration.class,\n-        HibernateJpaAutoConfiguration.class,\n-        AxonServerAutoConfiguration.class\n-})\n public class JdbcAutoConfigurationTest {\n \n-    @Autowired\n-    private ApplicationContext applicationContext;\n-\n     @Test\n-    void testContextInitialization() {\n-        assertNotNull(applicationContext);\n-\n-        assertTrue(applicationContext.getBean(EventStorageEngine.class) instanceof JdbcEventStorageEngine);\n-        assertTrue(applicationContext.getBean(PersistenceExceptionResolver.class) instanceof JdbcSQLErrorCodesResolver);\n-        assertTrue(\n-                applicationContext.getBean(ConnectionProvider.class) instanceof UnitOfWorkAwareConnectionProviderWrapper\n-        );\n-        assertTrue(applicationContext.getBean(TokenStore.class) instanceof JdbcTokenStore);\n-        assertTrue(applicationContext.getBean(SagaStore.class) instanceof JdbcSagaStore);\n+    void testAllJdbcComponentsAutoConfigured() {", "originalCommit": "7eca449cd6cb01fca156c5b6145280d57c744804", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY1NDA5MA==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1403#discussion_r406654090", "bodyText": "But, they're right there ;-)", "author": "abuijze", "createdAt": "2020-04-10T08:11:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYzNTczOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjY3ODUxNg==", "url": "https://github.com/AxonFramework/AxonFramework/pull/1403#discussion_r406678516", "bodyText": "Sure they are :p", "author": "smcvb", "createdAt": "2020-04-10T09:20:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjYzNTczOQ=="}], "type": "inlineReview"}, {"oid": "3458741231eee2fa55f438cf42719188607f1203", "url": "https://github.com/AxonFramework/AxonFramework/commit/3458741231eee2fa55f438cf42719188607f1203", "message": "Fixed review comments\n\nReimplemented \"lost\" assertions in JdbcAutoConfigurationTest", "committedDate": "2020-04-10T08:10:32Z", "type": "commit"}]}