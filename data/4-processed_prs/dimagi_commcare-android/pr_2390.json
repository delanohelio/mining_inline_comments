{"pr_number": 2390, "pr_title": "Add session expiration test", "pr_createdAt": "2020-10-28T09:08:17Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2390", "timeline": [{"oid": "ac6583b13fcb7094e022cadfc50fa4256ea9b733", "url": "https://github.com/dimagi/commcare-android/commit/ac6583b13fcb7094e022cadfc50fa4256ea9b733", "message": "Add session expiration test", "committedDate": "2020-10-28T09:09:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5ODgzOA==", "url": "https://github.com/dimagi/commcare-android/pull/2390#discussion_r513698838", "bodyText": "you can just paas the activity::class here and localize the instance check in this function as well so that callers to this function just need to paas the class name for the activity", "author": "shubham1g5", "createdAt": "2020-10-28T19:14:59Z", "path": "app/instrumentation-tests/src/org/commcare/utils/InstrumentationUtility.kt", "diffHunk": "@@ -323,6 +324,13 @@ object InstrumentationUtility {\n                 .perform(click())\n     }\n \n+    @JvmStatic\n+    fun assertCurrentActivity(check: (Activity) -> Boolean) {", "originalCommit": "ac6583b13fcb7094e022cadfc50fa4256ea9b733", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDAzMTIzMA==", "url": "https://github.com/dimagi/commcare-android/pull/2390#discussion_r514031230", "bodyText": "I don't really get it. Do you mean to change this to something like\ninline fun <reified T: Activity> assertCurrentActivity() {\n        val application = InstrumentationRegistry.getInstrumentation().targetContext.applicationContext\n                as CommCareInstrumentationTestApplication\n        var activity = application.currentActivity\n        assert(activity is T, \"Current Activity is ${activity.localClassName}\")\n    }\n\nand have tests call it as InstrumentationUtility.assertCurrentActivity<LoginActivity>()", "author": "ShivamPokhriyal", "createdAt": "2020-10-29T06:49:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5ODgzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDA0NTI3OQ==", "url": "https://github.com/dimagi/commcare-android/pull/2390#discussion_r514045279", "bodyText": "You can pass the class name as an argument to the function and check whether the current Activity is instance of that class - fun assertCurrentActivity(Class<T> c)", "author": "shubham1g5", "createdAt": "2020-10-29T07:14:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzY5ODgzOA=="}], "type": "inlineReview"}, {"oid": "17dc51156dc95d7fec6b03eae27b0b545f3830a1", "url": "https://github.com/dimagi/commcare-android/commit/17dc51156dc95d7fec6b03eae27b0b545f3830a1", "message": "Add session expiration test", "committedDate": "2020-11-02T05:20:30Z", "type": "commit"}, {"oid": "62a397e09deea19c5cbe7c13033e0395d5dfb3cc", "url": "https://github.com/dimagi/commcare-android/commit/62a397e09deea19c5cbe7c13033e0395d5dfb3cc", "message": "PR suggestions", "committedDate": "2020-11-02T05:20:30Z", "type": "commit"}, {"oid": "62a397e09deea19c5cbe7c13033e0395d5dfb3cc", "url": "https://github.com/dimagi/commcare-android/commit/62a397e09deea19c5cbe7c13033e0395d5dfb3cc", "message": "PR suggestions", "committedDate": "2020-11-02T05:20:30Z", "type": "forcePushed"}]}