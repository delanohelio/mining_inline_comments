{"pr_number": 2378, "pr_title": "Broadcasts Case updates to Reminders app", "pr_createdAt": "2020-10-15T11:28:44Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2378", "timeline": [{"oid": "a3175dafa1c162cb6dbb236c841e578592f115e9", "url": "https://github.com/dimagi/commcare-android/commit/a3175dafa1c162cb6dbb236c841e578592f115e9", "message": "Associate a permission group with case read permission", "committedDate": "2020-10-08T07:43:30Z", "type": "commit"}, {"oid": "93c9f3b504d051b496ac279a1d2953345cd9fb8d", "url": "https://github.com/dimagi/commcare-android/commit/93c9f3b504d051b496ac279a1d2953345cd9fb8d", "message": "Send explicit broadcast to reminders app", "committedDate": "2020-10-08T07:46:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4NDIwNw==", "url": "https://github.com/dimagi/commcare-android/pull/2378#discussion_r505584207", "bodyText": "can you walk me through again briefly why the reminders application can't receive the standard broadcast instead of a custom one?", "author": "ctsims", "createdAt": "2020-10-15T14:22:47Z", "path": "app/src/org/commcare/models/FormRecordProcessor.java", "diffHunk": "@@ -108,6 +107,17 @@ public TransactionParser getParser(KXmlParser parser) {\n         return updatedRecord;\n     }\n \n+    private void broadcastDataUpdate(AndroidTransactionParserFactory factory) {\n+        Intent i = new Intent(\"org.commcare.dalvik.api.action.data.update\");\n+        i.putStringArrayListExtra(\"cases\", factory.getCreatedAndUpdatedCases());\n+        c.sendBroadcast(i, \"org.commcare.dalvik.provider.cases.read\");\n+\n+        // send explicit broadcast to CommCare Reminders App\n+        i.setComponent(new ComponentName(\"org.commcare.dalvik.reminders\",", "originalCommit": "93c9f3b504d051b496ac279a1d2953345cd9fb8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc2OTE0Mw==", "url": "https://github.com/dimagi/commcare-android/pull/2378#discussion_r505769143", "bodyText": "sure, Android O+ restricts apps to define implicit receivers in their manifest. Any implicit receivers must be registered at runtime. This means that Reminders app can't listen to any implicit broadcasts without it being running in background while we want any case updates to wake Reminders app so that users don't have to repeatedly open the Reminders app manually in order for it to fetch data from CommCare.", "author": "shubham1g5", "createdAt": "2020-10-15T18:53:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4NDIwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ4MzkyNw==", "url": "https://github.com/dimagi/commcare-android/pull/2378#discussion_r506483927", "bodyText": "Right! Thank you.", "author": "ctsims", "createdAt": "2020-10-16T14:27:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4NDIwNw=="}], "type": "inlineReview"}, {"oid": "ac43e56d162618571b7af57f4e5f2feac618e177", "url": "https://github.com/dimagi/commcare-android/commit/ac43e56d162618571b7af57f4e5f2feac618e177", "message": "Merge branch 'master' into remindersApp", "committedDate": "2020-10-17T09:52:07Z", "type": "commit"}]}