{"pr_number": 2415, "pr_title": "Avoid using 5 shards when number of tests are low", "pr_createdAt": "2020-12-03T14:10:14Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2415", "timeline": [{"oid": "f6fdaa1e71cc7f05ae4a39052e0f6311ee4a30bd", "url": "https://github.com/dimagi/commcare-android/commit/f6fdaa1e71cc7f05ae4a39052e0f6311ee4a30bd", "message": "Avoid using 5 shards when number of tests are low\n\nFixes a false positive in test result when number of tests are lower than number of shards and browserstack simply errors out", "committedDate": "2020-12-03T14:08:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTI1OTk5NA==", "url": "https://github.com/dimagi/commcare-android/pull/2415#discussion_r535259994", "bodyText": "nitty nit: we can avoid re-computing len(classes) by using a variable", "author": "shubham1g5", "createdAt": "2020-12-03T14:14:16Z", "path": "scripts/browserstack.py", "diffHunk": "@@ -27,13 +27,13 @@ def buildTestCommand(appToken, testToken, classes=None):\n     test[\"deviceLogs\"] = True\n     test[\"testSuite\"] = testToken\n     test[\"networkLogs\"] = True\n-    test[\"shards\"] = {\n-        \"numberOfShards\": 5\n-    }\n     test[\"annotation\"] = [\"org.commcare.annotations.BrowserstackTests\"]\n \n     if classes:\n         test[\"class\"] = classes\n+        test[\"shards\"] = { \"numberOfShards\": 5 if (len(classes) > 5) else len(classes) }", "originalCommit": "f6fdaa1e71cc7f05ae4a39052e0f6311ee4a30bd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ae2ca2c08a62f76bf0e88ec22c371fc13b6e550c", "url": "https://github.com/dimagi/commcare-android/commit/ae2ca2c08a62f76bf0e88ec22c371fc13b6e550c", "message": "Avoid recomputing class length", "committedDate": "2020-12-04T05:08:06Z", "type": "commit"}]}