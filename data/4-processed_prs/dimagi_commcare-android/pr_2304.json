{"pr_number": 2304, "pr_title": "Only allow the Entity List Action button to be clicked once", "pr_createdAt": "2020-08-01T20:34:41Z", "pr_url": "https://github.com/dimagi/commcare-android/pull/2304", "timeline": [{"oid": "fd3e30c14cb1568b233e870e8c6c3f8eec02c4a4", "url": "https://github.com/dimagi/commcare-android/commit/fd3e30c14cb1568b233e870e8c6c3f8eec02c4a4", "message": "only allow the action listener to be clicked once", "committedDate": "2020-08-01T20:23:59Z", "type": "commit"}, {"oid": "a11e9cc59b56bdab81d6390e61ea27d833bc2db8", "url": "https://github.com/dimagi/commcare-android/commit/a11e9cc59b56bdab81d6390e61ea27d833bc2db8", "message": "cleanup", "committedDate": "2020-08-01T20:25:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyNTM3Ng==", "url": "https://github.com/dimagi/commcare-android/pull/2304#discussion_r464425376", "bodyText": "Extremely minor point: I don't think this is a real concern, but if the EntityList view was recycled entirely (IE: The use pressed 'back' and the view came up exactly as it was) it would be the case that this button would remain disabled.\nAgain, I don't think this applies to the way we use the views, but I didn't want to discount it entirely in case you knew differently, since you have worked with this more recently than  I have.", "author": "ctsims", "createdAt": "2020-08-03T13:49:27Z", "path": "app/src/org/commcare/views/EntityActionViewUtils.java", "diffHunk": "@@ -64,6 +66,9 @@ private static void setupActionClickListener(FrameLayout actionCardView,\n                                                  final Action action,\n                                                  final CommCareActivity commCareActivity) {\n         CardView cardView = actionCardView.findViewById(R.id.card_body);\n-        cardView.setOnClickListener(v -> EntitySelectActivity.triggerDetailAction(action, commCareActivity));\n+        cardView.setOnClickListener(v -> {\n+            cardView.setEnabled(false);", "originalCommit": "a11e9cc59b56bdab81d6390e61ea27d833bc2db8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU5MjgzOA==", "url": "https://github.com/dimagi/commcare-android/pull/2304#discussion_r464592838", "bodyText": "@ctsims Thanks for flagging. You are right that it's a non concern as onClick here calls EntitySelectActivity.triggerDetailAction which is a terminal operation in the sense that it always finish the current activity. So pressing back always results in CommCare session to recreate the EntityListActivity again re-enabling the action button.", "author": "shubham1g5", "createdAt": "2020-08-03T18:36:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyNTM3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU5NjM0Ng==", "url": "https://github.com/dimagi/commcare-android/pull/2304#discussion_r464596346", "bodyText": "great, thanks for confirming", "author": "ctsims", "createdAt": "2020-08-03T18:44:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQyNTM3Ng=="}], "type": "inlineReview"}, {"oid": "8d2ff465c7d97eaa05cbf703f5c95abfaa5a35b1", "url": "https://github.com/dimagi/commcare-android/commit/8d2ff465c7d97eaa05cbf703f5c95abfaa5a35b1", "message": "Merge branch 'master' into handleRageActionClicks", "committedDate": "2020-08-08T15:09:05Z", "type": "commit"}]}