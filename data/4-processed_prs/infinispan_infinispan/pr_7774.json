{"pr_number": 7774, "pr_title": "ISPN-10839 Configuration Doc Updates", "pr_createdAt": "2020-01-22T11:49:05Z", "pr_url": "https://github.com/infinispan/infinispan/pull/7774", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY1NzI4MQ==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r369657281", "bodyText": "Can we link to the HotRod documentation? Or does that not work with how things are separated?", "author": "ryanemerson", "createdAt": "2020-01-22T16:15:04Z", "path": "documentation/src/main/asciidoc/topics/ref_config_programmatic.adoc", "diffHunk": "@@ -0,0 +1,88 @@\n+[id='programmatic-{context}']\n+= Programmatic Configuration\n+Create new Configuration objects with the `ConfigurationBuilder` class and then\n+define cache configurations with the Cache Manager.\n+\n+[NOTE]\n+====\n+The examples in this section use `EmbeddedCacheManager`, which is a Cache\n+Manager that runs in the same JVM as the client.\n+\n+To configure caches remotely with HotRod clients, you use `RemoteCacheManager`.\n+Refer to the HotRod documentation for more information.", "originalCommit": "c27b1005b45b88f2677bd564e33b27fd6f09016c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU1MDIwNg==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r370550206", "bodyText": "@ryanemerson we do link to the HotRod docs but from the .References section. Linking between guides in community is really straightforward. I've added attributes so all you need to do is link:{hotrod_docs}[HotRod Java Clients].\nyou can add anchors as well like link:{hotrod_docs}#anchor_name[HotRod Java Clients].\nalso pushing links to a reference section keeps readers \"on task\". inline linking can lead to distractions. I could go all day with this... let me know what you think though. I can show you some examples and explain in more detail.", "author": "oraNod", "createdAt": "2020-01-24T09:53:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY1NzI4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MTA3Mg==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r369661072", "bodyText": "I think this needs clarifying to make it clear that \"additional named caches\" refers to when a user calls getCache(\"cache-name\"). It does not mean that another declaritevely named cache will inherit it's configuration from the default cache.\nThis is made somewhat more confusing by the fact we also have to explain -configuration and how multiple caches can use it via:", "author": "ryanemerson", "createdAt": "2020-01-22T16:21:17Z", "path": "documentation/src/main/asciidoc/topics/ref_config_declarative.adoc", "diffHunk": "@@ -0,0 +1,38 @@\n+[id='declarative-{context}']\n+= Declarative Configuration\n+You configure {brandname} caches by defining properties in `infinispan.xml`.\n+\n+The following example shows the basic structure of a {brandname} configuration:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<infinispan> <1>\n+   <cache-container default-cache=\"local\"> <2>\n+      <transport stack=\"udp\" cluster=\"mycluster\"/> <3>\n+      <local-cache name=\"local\"/> <4>\n+      <invalidation-cache name=\"invalidation\"/> <5>\n+      <replicated-cache name=\"replicated\"/> <6>\n+      <distributed-cache name=\"distributed\"/> <7>\n+   </cache-container>\n+</infinispan>\n+----\n+\n+<1> adds the root element for the {brandname} configuration. The minimum valid configuration is `<infinispan />`; however this provides very basic capabilities with no clustering and no cache instances.\n+<2> defines properties for all caches within the container and names the default cache.\n+<3> defines transport properties for clustered cache modes. In the preceding example, `stack=\"udp\"` specifies the default JGroups UDP transport stack and names the {brandname} cluster.\n+<4> names a local cache instance.\n+<5> names a cache instance that uses invalidation mode.\n+<6> names a cache instance that uses replicated mode.\n+<7> names a cache instance that uses distributed mode.\n+\n+.Default caches\n+{brandname} does not provide an implicit default cache. You must specify which\n+named cache is the default.\n+\n+Additional named caches inherit settings from the default cache. You can,\n+however, override or extend configuration in each named cache.", "originalCommit": "c27b1005b45b88f2677bd564e33b27fd6f09016c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MjY4NA==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r369662684", "bodyText": "@tristantarrant I can't keep up, do calls to getCache(\"new name\") create a new cache using the default config now?", "author": "ryanemerson", "createdAt": "2020-01-22T16:24:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU2Mzc0OQ==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r370563749", "bodyText": "@ryanemerson thanks for clarifying that detail. tbh I wasn't sure about it and also felt it wasn't clear. I'm going to remove that sentence as it doesn't belong in the declarative config content.", "author": "oraNod", "createdAt": "2020-01-24T10:23:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDcyNTY5Mw==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r374725693", "bodyText": "Caches no longer implicitly inherit from the default cache.", "author": "tristantarrant", "createdAt": "2020-02-04T15:06:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MTA3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDcyNTk5MQ==", "url": "https://github.com/infinispan/infinispan/pull/7774#discussion_r374725991", "bodyText": "The default cache is just any named cache that you obtain when you invoke getCache()", "author": "tristantarrant", "createdAt": "2020-02-04T15:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTY2MTA3Mg=="}], "type": "inlineReview"}, {"oid": "1bf585c9497b372aa14e9d825fefde38e677cdc4", "url": "https://github.com/infinispan/infinispan/commit/1bf585c9497b372aa14e9d825fefde38e677cdc4", "message": "ISPN-10839 declarative and programmatic config updates", "committedDate": "2020-01-24T10:26:10Z", "type": "forcePushed"}, {"oid": "5b360245c3d23195fad441e79cafb0c5b44c1338", "url": "https://github.com/infinispan/infinispan/commit/5b360245c3d23195fad441e79cafb0c5b44c1338", "message": "ISPN-10839 declarative and programmatic config updates", "committedDate": "2020-02-03T13:52:11Z", "type": "forcePushed"}, {"oid": "217a775e2b52adc266d78fc188b49f0cf37ab723", "url": "https://github.com/infinispan/infinispan/commit/217a775e2b52adc266d78fc188b49f0cf37ab723", "message": "ISPN-10839 declarative and programmatic config updates", "committedDate": "2020-02-04T15:30:07Z", "type": "forcePushed"}, {"oid": "93a76b6e95a588f57dc611170f768cf0db00041c", "url": "https://github.com/infinispan/infinispan/commit/93a76b6e95a588f57dc611170f768cf0db00041c", "message": "ISPN-10839 declarative and programmatic config updates", "committedDate": "2020-02-05T12:03:49Z", "type": "commit"}, {"oid": "93a76b6e95a588f57dc611170f768cf0db00041c", "url": "https://github.com/infinispan/infinispan/commit/93a76b6e95a588f57dc611170f768cf0db00041c", "message": "ISPN-10839 declarative and programmatic config updates", "committedDate": "2020-02-05T12:03:49Z", "type": "forcePushed"}]}