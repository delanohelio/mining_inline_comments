{"pr_number": 8950, "pr_title": "ISPN-12592 Improve error message when XML element is removed", "pr_createdAt": "2020-12-22T11:45:12Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8950", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1NzcwMQ==", "url": "https://github.com/infinispan/infinispan/pull/8950#discussion_r547257701", "bodyText": "instead of passing null as a parameter, could we use overloading in ParseUtils ?", "author": "karesti", "createdAt": "2020-12-22T12:45:32Z", "path": "core/src/main/java/org/infinispan/configuration/parsing/CacheParser.java", "diffHunk": "@@ -884,7 +885,7 @@ private final void parseTransaction(XMLExtendedStreamReader reader, Configuratio\n             }\n             case TRANSACTION_PROTOCOL: {\n                if (reader.getSchema().since(11, 0)) {\n-                  throw ParseUtils.unexpectedAttribute(reader, attribute.getLocalName());\n+                  throw ParseUtils.attributeRemoved(reader, i, null);", "originalCommit": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1Nzk5NA==", "url": "https://github.com/infinispan/infinispan/pull/8950#discussion_r547257994", "bodyText": "I don't like the null attribute. why not having two methods ?", "author": "karesti", "createdAt": "2020-12-22T12:46:13Z", "path": "core/src/main/java/org/infinispan/configuration/parsing/ParseUtils.java", "diffHunk": "@@ -322,11 +322,33 @@ public static String requireAttributeProperty(final XMLStreamReader reader, int\n         }\n     }\n \n-    public static void ignoreAttribute(XMLExtendedStreamReader reader, Enum<?> attribute) {\n-       CONFIG.ignoreXmlAttribute(attribute, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n+    public static void ignoreAttribute(XMLExtendedStreamReader reader, String attributeName) {\n+       CONFIG.ignoreXmlAttribute(attributeName, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n+    }\n+\n+    public static void ignoreAttribute(XMLExtendedStreamReader reader, int attributeIndex) {\n+        ignoreAttribute(reader, reader.getAttributeName(attributeIndex).getLocalPart());\n     }\n \n     public static void ignoreElement(XMLExtendedStreamReader reader, Enum<?> element) {\n        CONFIG.ignoreXmlElement(element, reader.getLocation().getLineNumber(), reader.getLocation().getColumnNumber());\n     }\n+\n+    public static XMLStreamException elementRemoved(XMLExtendedStreamReader reader, String newElementName) {\n+        if (newElementName != null) {\n+            return CONFIG.elementRemovedUseOther(reader.getLocalName(), newElementName, reader.getLocation());\n+        } else {\n+            return CONFIG.elementRemoved(reader.getLocalName(), reader.getLocation());\n+        }\n+    }\n+\n+    public static XMLStreamException attributeRemoved(XMLExtendedStreamReader reader, int attributeIndex,", "originalCommit": "79ef23273b0bc47c77102f34ac5b0eb39e500dbb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ5NTkxNA==", "url": "https://github.com/infinispan/infinispan/pull/8950#discussion_r547495914", "bodyText": "Lazyness :)", "author": "danberindei", "createdAt": "2020-12-22T20:37:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzI1Nzk5NA=="}], "type": "inlineReview"}, {"oid": "096bd38524a686edd26038a88a2a11d5cb0c82c5", "url": "https://github.com/infinispan/infinispan/commit/096bd38524a686edd26038a88a2a11d5cb0c82c5", "message": "ISPN-12592 Improve error message when XML element is removed", "committedDate": "2020-12-22T16:53:25Z", "type": "forcePushed"}, {"oid": "a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "url": "https://github.com/infinispan/infinispan/commit/a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "message": "ISPN-12592 Improve error message when XML element is removed", "committedDate": "2020-12-22T20:58:25Z", "type": "commit"}, {"oid": "a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "url": "https://github.com/infinispan/infinispan/commit/a8b07d5b3db4a8fc97481ce45e6ce2dda39c46aa", "message": "ISPN-12592 Improve error message when XML element is removed", "committedDate": "2020-12-22T20:58:25Z", "type": "forcePushed"}]}