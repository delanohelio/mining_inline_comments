{"pr_number": 8183, "pr_title": "ISPN-11612 adding maven repository details", "pr_createdAt": "2020-04-08T15:25:03Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8183", "timeline": [{"oid": "67c21346fee5e3c1746a52681a49d9344da5cbd6", "url": "https://github.com/infinispan/infinispan/commit/67c21346fee5e3c1746a52681a49d9344da5cbd6", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-08T15:49:51Z", "type": "forcePushed"}, {"oid": "8ce95723bb9b86601561503117ba1adb4a8685a5", "url": "https://github.com/infinispan/infinispan/commit/8ce95723bb9b86601561503117ba1adb4a8685a5", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-08T16:19:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NDM4NA==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405684384", "bodyText": "where is this set?\ncan you update ispn_bom.xml to include this info (with the upstream version)? There is no difference between upstream/downstream except the RH GA repository.", "author": "pruivo", "createdAt": "2020-04-08T17:14:46Z", "path": "documentation/src/main/asciidoc/topics/proc_configuring_pom_xml.adoc", "diffHunk": "@@ -0,0 +1,49 @@\n+[id='configure_pom']\n+= Configuring Your {brandname} POM\n+Maven uses configuration files called Project Object Model (POM) files to\n+define projects and manage builds. POM files are in XML format and describe the\n+module and component dependencies, build order, and targets for the resulting\n+project packaging and output.\n+\n+.Procedure\n+\n+. Open your project `pom.xml` for editing.\n+. Define the `version.infinispan` property with the correct {brandname} version.\n+. Include the `infinispan-bom` in a `dependencyManagement` section.\n++\n+The Bill Of Materials (BOM) controls dependency versions, which avoids version\n+conflicts and means you do not need to set the version for each {brandname}\n+artifact you add as a dependency to your project.\n++\n+. Add {brandname} artifacts in a `dependencies` section as required.\n+. Save and close `pom.xml`.\n+\n+The following example shows the {brandname} version, BOM, and dependencies:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<properties>\n+  <version.infinispan>{mvn_version}</version.infinispan>", "originalCommit": "9fd56ef2fc37d1730e03ad850e2537ea2fdfbb87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcwODYxOQ==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405708619", "bodyText": "that is set here: https://gitlab.cee.redhat.com/red-hat-jboss-data-grid-documentation/rhdg-documentation/merge_requests/370/diffs#0bac8f4ce17e78071c1b5d6e841b363ecf9ea8fe_1_19\nit's manual for now. I get the version from the JDG repo but I plan to script it and do a bit of awk/sed magic to automate it via jenkins.\nisn't the version different for community though? you get the coordinates and version from the download page: https://infinispan.org/download/", "author": "oraNod", "createdAt": "2020-04-08T17:55:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NDM4NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcyNzUxNA==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405727514", "bodyText": "the versions are different. but if we can keep ispn_bom.xml example only that would be great IMO...", "author": "pruivo", "createdAt": "2020-04-08T18:27:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NDM4NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NjAwMQ==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405686001", "bodyText": "this can be removed IMO.\nthis is shown in the Hot Rod client docs as well and it isn't required.\nIf you update ispn_bom.xml, it can be used here too.", "author": "pruivo", "createdAt": "2020-04-08T17:17:31Z", "path": "documentation/src/main/asciidoc/topics/proc_configuring_pom_xml.adoc", "diffHunk": "@@ -0,0 +1,49 @@\n+[id='configure_pom']\n+= Configuring Your {brandname} POM\n+Maven uses configuration files called Project Object Model (POM) files to\n+define projects and manage builds. POM files are in XML format and describe the\n+module and component dependencies, build order, and targets for the resulting\n+project packaging and output.\n+\n+.Procedure\n+\n+. Open your project `pom.xml` for editing.\n+. Define the `version.infinispan` property with the correct {brandname} version.\n+. Include the `infinispan-bom` in a `dependencyManagement` section.\n++\n+The Bill Of Materials (BOM) controls dependency versions, which avoids version\n+conflicts and means you do not need to set the version for each {brandname}\n+artifact you add as a dependency to your project.\n++\n+. Add {brandname} artifacts in a `dependencies` section as required.\n+. Save and close `pom.xml`.\n+\n+The following example shows the {brandname} version, BOM, and dependencies:\n+\n+[source,xml,options=\"nowrap\",subs=attributes+]\n+----\n+<properties>\n+  <version.infinispan>{mvn_version}</version.infinispan>\n+</properties>\n+\n+<!-- Use the BOM to manage dependency versions. -->\n+<dependencyManagement>\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.infinispan</groupId>\n+      <artifactId>infinispan-bom</artifactId>\n+      <version>${version.infinispan}</version>\n+      <type>pom</type>\n+      <scope>import</scope>\n+    </dependency>\n+  </dependencies>\n+</dependencyManagement>\n+\n+<!-- Add dependencies as required. -->\n+<dependencies>", "originalCommit": "9fd56ef2fc37d1730e03ad850e2537ea2fdfbb87", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcxMTI5OA==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405711298", "bodyText": "do you mean remove the dependencies section?\nwhile I know the bom is optional I think it should be recommended. this PR is intended for the users who would rather open a support ticket to get the version details than spend 5 mins to find it. perhaps I don't understand your meaning clearly...", "author": "oraNod", "createdAt": "2020-04-08T18:00:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NjAwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTcyNTg2MQ==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r405725861", "bodyText": "do you mean remove the dependencies section?\n\nyes.", "author": "pruivo", "createdAt": "2020-04-08T18:24:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY4NjAwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEzMTA3Ng==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r406131076", "bodyText": "this is only for product.", "author": "pruivo", "createdAt": "2020-04-09T11:12:37Z", "path": "documentation/src/main/asciidoc/stories/assembly_configuring_maven_repository.adoc", "diffHunk": "@@ -0,0 +1,20 @@\n+[id='mvn']\n+:context: install\n+= Configuring the {brandname} Maven Repository\n+{brandname} Java distributions are available from Maven.\n+\n+//Product only\n+ifdef::productized[]\n+You can download the {brandname} Maven repository from the customer portal or\n+pull {brandname} dependencies from the public {RedHat} Enterprise Maven\n+repository.\n+\n+include::{topics}/proc_downloading_maven_repository.adoc[leveloffset=+1]\n+endif::productized[]\n+\n+include::{topics}/proc_adding_maven_repository.adoc[leveloffset=+1]", "originalCommit": "eeeda26a7888a745325d15fd92bdbfe1d3135ce5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjEzMTY5Mw==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r406131693", "bodyText": "you don't need this. Infinispan is available in maven central.\nYou only need to change the maven settings if you are building Infinispan itself.", "author": "pruivo", "createdAt": "2020-04-09T11:13:54Z", "path": "documentation/src/main/asciidoc/topics/proc_adding_maven_repository.adoc", "diffHunk": "@@ -0,0 +1,50 @@\n+[id='mvn_settings']\n+//Community\n+ifndef::productized[]\n+= Using {brandname} Maven Settings", "originalCommit": "eeeda26a7888a745325d15fd92bdbfe1d3135ce5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3c1124eb3f5ca5ea977bab6f518691610af0f39c", "url": "https://github.com/infinispan/infinispan/commit/3c1124eb3f5ca5ea977bab6f518691610af0f39c", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-09T12:36:05Z", "type": "forcePushed"}, {"oid": "1d16bdeae45644c42351286c508d8c6198781c8d", "url": "https://github.com/infinispan/infinispan/commit/1d16bdeae45644c42351286c508d8c6198781c8d", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-09T12:42:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxNDQ3Mw==", "url": "https://github.com/infinispan/infinispan/pull/8183#discussion_r406314473", "bodyText": "I think you need quotes in the command:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                sh sed -i \"s/^:ispn_version:.*$/:ispn_version: ${version}/\" documentation/src/main/asciidoc/topics/attributes/community-attributes.adoc\n          \n          \n            \n                                sh \"sed -i \\\"s/^:ispn_version:.*$/:ispn_version: ${version}/\\\" documentation/src/main/asciidoc/topics/attributes/community-attributes.adoc\"", "author": "pruivo", "createdAt": "2020-04-09T16:08:10Z", "path": "Jenkinsfile-release", "diffHunk": "@@ -50,6 +50,17 @@ pipeline {\n             }\n         }\n \n+        stage('Commit version for documentation') {\n+            steps {\n+                script {\n+                    sh sed -i \"s/^:ispn_version:.*$/:ispn_version: ${version}/\" documentation/src/main/asciidoc/topics/attributes/community-attributes.adoc", "originalCommit": "7945c5e03c7aca570bd0b6a0db1ddfae6fd4f66e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "efae119cd008754932ba67a17b4b5d56945cdb76", "url": "https://github.com/infinispan/infinispan/commit/efae119cd008754932ba67a17b4b5d56945cdb76", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-09T16:47:56Z", "type": "commit"}, {"oid": "efae119cd008754932ba67a17b4b5d56945cdb76", "url": "https://github.com/infinispan/infinispan/commit/efae119cd008754932ba67a17b4b5d56945cdb76", "message": "ISPN-11612 adding maven repository details", "committedDate": "2020-04-09T16:47:56Z", "type": "forcePushed"}]}