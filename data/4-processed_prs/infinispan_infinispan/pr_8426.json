{"pr_number": 8426, "pr_title": "ISPN-11205 Server DataSource docs", "pr_createdAt": "2020-06-04T08:37:40Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8426", "timeline": [{"oid": "0cb163c09ede5f6f0d7236c2647758988d773e75", "url": "https://github.com/infinispan/infinispan/commit/0cb163c09ede5f6f0d7236c2647758988d773e75", "message": "ISPN-11205 Server DataSource docs", "committedDate": "2020-06-04T08:58:36Z", "type": "commit"}, {"oid": "0cb163c09ede5f6f0d7236c2647758988d773e75", "url": "https://github.com/infinispan/infinispan/commit/0cb163c09ede5f6f0d7236c2647758988d773e75", "message": "ISPN-11205 Server DataSource docs", "committedDate": "2020-06-04T08:58:36Z", "type": "forcePushed"}, {"oid": "586cf8dfc4340426856efbbc8724661e2c54c448", "url": "https://github.com/infinispan/infinispan/commit/586cf8dfc4340426856efbbc8724661e2c54c448", "message": "ISPN-11205 Server DataSource suggested doc edits", "committedDate": "2020-06-04T09:54:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzNDM0NA==", "url": "https://github.com/infinispan/infinispan/pull/8426#discussion_r435134344", "bodyText": "I broke this into a separate procedure because it's different to the reference content. We might also reuse this in the configuration guide for JDBC cache store config.", "author": "oraNod", "createdAt": "2020-06-04T09:56:27Z", "path": "documentation/src/main/asciidoc/topics/proc_server_using_datasources.adoc", "diffHunk": "@@ -0,0 +1,36 @@\n+[id='using_datasources']", "originalCommit": "586cf8dfc4340426856efbbc8724661e2c54c448", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzNDg5Mg==", "url": "https://github.com/infinispan/infinispan/pull/8426#discussion_r435134892", "bodyText": "This seems like a good place to use an unordered list, which helps break text up and makes it easier for quick reading.", "author": "oraNod", "createdAt": "2020-06-04T09:57:21Z", "path": "documentation/src/main/asciidoc/topics/ref_server_datasources.adoc", "diffHunk": "@@ -1,8 +1,9 @@\n [id='datasource_config']\n-= Data Sources Configuration\n+= Datasource Configuration for JDBC Cache Stores\n+{brandname} server configuration for datasources is composed of two sections:\n \n-{brandname} configuration for data sources is composed of two sections: a *connection factory* which defines how to\n-connect to the database and a *connection pool* which defines how to pool and reuse connections:\n+* A `connection factory` that defines how to connect to the database.\n+* A `connection pool` that defines how to pool and reuse connections.", "originalCommit": "586cf8dfc4340426856efbbc8724661e2c54c448", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzNjM2NQ==", "url": "https://github.com/infinispan/infinispan/pull/8426#discussion_r435136365", "bodyText": "I've deviated from this myself but callouts should be complete sentences. Capitalize the first word. Also it's good to use third person singular verb forms for parallelism rather than mixing articles (the, a, an) with verbs.", "author": "oraNod", "createdAt": "2020-06-04T09:59:37Z", "path": "documentation/src/main/asciidoc/topics/ref_server_datasources.adoc", "diffHunk": "@@ -28,41 +29,18 @@ connect to the database and a *connection pool* which defines how to pool and re\n </data-sources>\n ----\n \n-<1> defines a data source name, JNDI name and whether to enable statistics collection.\n-<2> specifies the JDBC driver that will be used to create connections. Place driver JARs in the `server/lib` directory.\n-<3> the username to use for the connection.\n-<4> the password to use for the connection.\n-<5> the JDBC URL specific to the driver in use.\n-<6> a query to execute after creating a new connection to verify that it is working correctly.\n-<7> transaction isolation for the connection. One of NONE, READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE.\n-<8> optional JDBC driver-specific connection properties\n-<9> Initial number of connections the pool should hold.\n-<10> Maximum number of connections in the pool.\n-<11> Minimum number of connections the pool should hold.\n-<12> Time in milliseconds between background validation runs.\n-<13> Time in minutes a connection has to be idle before it can be removed.\n-<14> Maximum time in milliseconds to block while waiting for a connection before throwing an exception.\n-<15> Time in milliseconds a connection has to be held before a leak warning.\n-\n-== Using a data source\n-\n-Reference the data source's JNDI name in a cache's JDBC cache store configuration:\n-\n-[source,xml]\n-----\n-<distributed-cache-configuration name=\"persistent-cache\">\n-    <persistence>\n-        <string-keyed-jdbc-store>\n-            <data-source jndi-url=\"jdbc/datasource\"/>\n-            <string-keyed-table drop-on-exit=\"true\"\n-                          create-on-start=\"true\"\n-                          prefix=\"TBL\">\n-                <id-column name=\"ID\" type=\"VARCHAR(255)\"/>\n-                <data-column name=\"DATA\" type=\"BINARY\"/>\n-                <timestamp-column name=\"TS\" type=\"BIGINT\"/>\n-                <segment-column name=\"S\" type=\"INT\"/>\n-            </string-keyed-table>\n-        </string-keyed-jdbc-store>\n-    </persistence>\n-</distributed-cache-configuration>\n-----\n\\ No newline at end of file\n+<1> Defines a datasource name, JNDI name, and whether to enable statistics collection.", "originalCommit": "586cf8dfc4340426856efbbc8724661e2c54c448", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTEzNjk1OQ==", "url": "https://github.com/infinispan/infinispan/pull/8426#discussion_r435136959", "bodyText": "Hopefully I got this right and it's correct to say isolation levels. If so, I think we might need a separate change in the transaction docs.", "author": "oraNod", "createdAt": "2020-06-04T10:00:32Z", "path": "documentation/src/main/asciidoc/topics/ref_server_datasources.adoc", "diffHunk": "@@ -28,41 +29,18 @@ connect to the database and a *connection pool* which defines how to pool and re\n </data-sources>\n ----\n \n-<1> defines a data source name, JNDI name and whether to enable statistics collection.\n-<2> specifies the JDBC driver that will be used to create connections. Place driver JARs in the `server/lib` directory.\n-<3> the username to use for the connection.\n-<4> the password to use for the connection.\n-<5> the JDBC URL specific to the driver in use.\n-<6> a query to execute after creating a new connection to verify that it is working correctly.\n-<7> transaction isolation for the connection. One of NONE, READ_UNCOMMITTED, READ_COMMITTED, REPEATABLE_READ, SERIALIZABLE.\n-<8> optional JDBC driver-specific connection properties\n-<9> Initial number of connections the pool should hold.\n-<10> Maximum number of connections in the pool.\n-<11> Minimum number of connections the pool should hold.\n-<12> Time in milliseconds between background validation runs.\n-<13> Time in minutes a connection has to be idle before it can be removed.\n-<14> Maximum time in milliseconds to block while waiting for a connection before throwing an exception.\n-<15> Time in milliseconds a connection has to be held before a leak warning.\n-\n-== Using a data source\n-\n-Reference the data source's JNDI name in a cache's JDBC cache store configuration:\n-\n-[source,xml]\n-----\n-<distributed-cache-configuration name=\"persistent-cache\">\n-    <persistence>\n-        <string-keyed-jdbc-store>\n-            <data-source jndi-url=\"jdbc/datasource\"/>\n-            <string-keyed-table drop-on-exit=\"true\"\n-                          create-on-start=\"true\"\n-                          prefix=\"TBL\">\n-                <id-column name=\"ID\" type=\"VARCHAR(255)\"/>\n-                <data-column name=\"DATA\" type=\"BINARY\"/>\n-                <timestamp-column name=\"TS\" type=\"BIGINT\"/>\n-                <segment-column name=\"S\" type=\"INT\"/>\n-            </string-keyed-table>\n-        </string-keyed-jdbc-store>\n-    </persistence>\n-</distributed-cache-configuration>\n-----\n\\ No newline at end of file\n+<1> Defines a datasource name, JNDI name, and whether to enable statistics collection.\n+<2> Specifies the JDBC driver that creates connections. Place driver JARs in the `server/lib` directory.\n+<3> Specifies a username for the connection.\n+<4> Specifies a corresponding password for the connection.\n+<5> Specifies the JDBC URL specific to the driver in use.\n+<6> Adds a query that verifies new connections.\n+<7> Configures one of the transaction isolation levels for the connection: `NONE`, `READ_UNCOMMITTED`, `READ_COMMITTED`, `REPEATABLE_READ`, `SERIALIZABLE`.", "originalCommit": "586cf8dfc4340426856efbbc8724661e2c54c448", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}