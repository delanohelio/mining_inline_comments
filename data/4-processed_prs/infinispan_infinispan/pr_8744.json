{"pr_number": 8744, "pr_title": "ISPN-3226 Maven report generation rework", "pr_createdAt": "2020-10-05T10:23:35Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8744", "timeline": [{"oid": "1a8c7cd18279d5f9d198ea9d8aca04c5864e81c1", "url": "https://github.com/infinispan/infinispan/commit/1a8c7cd18279d5f9d198ea9d8aca04c5864e81c1", "message": "WIP", "committedDate": "2020-10-05T14:16:18Z", "type": "forcePushed"}, {"oid": "4a62ec53df0f9443147fbf98013348e33261f8e7", "url": "https://github.com/infinispan/infinispan/commit/4a62ec53df0f9443147fbf98013348e33261f8e7", "message": "WIP", "committedDate": "2020-10-05T19:39:10Z", "type": "forcePushed"}, {"oid": "3444d5b3c582df8adb311895216ef60c202db0ad", "url": "https://github.com/infinispan/infinispan/commit/3444d5b3c582df8adb311895216ef60c202db0ad", "message": "WildFly OpenSSL 1.1.3.Final", "committedDate": "2020-10-06T12:22:45Z", "type": "forcePushed"}, {"oid": "fce3cb2ab7f95e045dcd868316312795867f3858", "url": "https://github.com/infinispan/infinispan/commit/fce3cb2ab7f95e045dcd868316312795867f3858", "message": "WildFly OpenSSL 1.1.3.Final", "committedDate": "2020-10-06T12:37:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwNzM2OQ==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501307369", "bodyText": "I'd like a comment here to explain what's happening.", "author": "danberindei", "createdAt": "2020-10-07T21:01:04Z", "path": "build-configuration/pom.xml", "diffHunk": "@@ -6,6 +6,7 @@\n       <groupId>org.jboss</groupId>\n       <artifactId>jboss-parent</artifactId>\n       <version>36</version>\n+      <relativePath/>", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MTA4Mw==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r503081083", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-10-12T07:09:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwNzM2OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwOTkwMQ==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501309901", "bodyText": "Should also be final", "author": "danberindei", "createdAt": "2020-10-07T21:06:05Z", "path": "commons/all/src/main/java/org/infinispan/commons/util/JVMMemoryInfoInfo.java", "diffHunk": "@@ -19,10 +19,10 @@\n @SuppressWarnings(\"unused\")\n public final class JVMMemoryInfoInfo implements JsonSerialization {\n \n-   private static MemoryMXBean memoryMBean;\n-   private static List<MemoryPoolMXBean> memoryPoolMBeans;\n-   private static List<BufferPoolMXBean> bufferPoolsMBeans;\n-   private static List<GarbageCollectorMXBean> garbageCollectorMXBeans;\n+   private MemoryMXBean memoryMBean;", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MTE3NQ==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r503081175", "bodyText": "Fixed", "author": "tristantarrant", "createdAt": "2020-10-12T07:09:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMwOTkwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMDM2MQ==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501310361", "bodyText": "We can actually control what's going in those marshallers, just create a IPROTO issue ;)", "author": "danberindei", "createdAt": "2020-10-07T21:07:04Z", "path": "etc/spotbugs-exclusions.xml", "diffHunk": "@@ -0,0 +1,9 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<FindBugsFilter>\n+   <Match>\n+      <Source name=\"~.*\\$logger\\.java\" />\n+   </Match>\n+   <Match>\n+      <Source name=\"~.*___Marshaller_.*\\.java\"/>", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MTEzMw==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r503081133", "bodyText": "Sure", "author": "tristantarrant", "createdAt": "2020-10-12T07:09:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMDM2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTMxMTI2Ng==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501311266", "bodyText": "Can't we use properties here? I hope at least the error is going to point to this file when we upgrade the dependencies.", "author": "danberindei", "createdAt": "2020-10-07T21:09:00Z", "path": "etc/suppressions.xml", "diffHunk": "@@ -0,0 +1,27 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<suppressions xmlns=\"https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.3.xsd\">\n+   <suppress>\n+      <notes><![CDATA[\n+      file name: protostream-4.3.4.Final.jar", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU2NzUxNw==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501567517", "bodyText": "I'd put dependency-check in the file name.", "author": "danberindei", "createdAt": "2020-10-08T09:13:19Z", "path": "pom.xml", "diffHunk": "@@ -2042,6 +2048,31 @@\n                <artifactId>protocol-parser-generator</artifactId>\n                <version>${version.infinispan.maven-plugins}</version>\n             </plugin>\n+            <plugin>\n+               <groupId>org.apache.maven.plugins</groupId>\n+               <artifactId>maven-project-info-reports-plugin</artifactId>\n+               <version>3.1.1</version>\n+            </plugin>\n+            <plugin>\n+               <groupId>com.github.spotbugs</groupId>\n+               <artifactId>spotbugs-maven-plugin</artifactId>\n+               <version>4.0.4</version>\n+            </plugin>\n+            <plugin>\n+               <groupId>org.owasp</groupId>\n+               <artifactId>dependency-check-maven</artifactId>\n+               <version>${version.owasp-dependency-check-plugin}</version>\n+               <executions>\n+                  <execution>\n+                     <goals>\n+                        <goal>aggregate</goal>\n+                     </goals>\n+                  </execution>\n+               </executions>\n+               <configuration>\n+                  <suppressionFile>${infinispan.root}/etc/suppressions.xml</suppressionFile>", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MTIyOA==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r503081228", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-10-12T07:09:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU2NzUxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU3NTE5NA==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r501575194", "bodyText": "Could we get away without building the site? The HTML output isn't usable as is anyway, we'd need to run the site:deploy or site:stage goals to put them in the correct directory structure (the links from the parent use the artifact id as the subdirectory name instead of the source directory name).", "author": "danberindei", "createdAt": "2020-10-08T09:25:41Z", "path": "Jenkinsfile", "diffHunk": "@@ -32,6 +32,12 @@ pipeline {\n                     env.DISTRIBUTION_BUILD = env.BRANCH_NAME.startsWith('PR-') && !pullRequest.labels.contains('Documentation') ? \"\" : \"-Pdistribution\"\n                 }\n \n+                // Collect reports on non-prs\n+                script {\n+                    //env.REPORTS_BUILD = env.BRANCH_NAME.startsWith('PR-') ? \"\" : \"site\"\n+                    env.REPORTS_BUILD = \"site\"", "originalCommit": "fce3cb2ab7f95e045dcd868316312795867f3858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzA4MTM2NQ==", "url": "https://github.com/infinispan/infinispan/pull/8744#discussion_r503081365", "bodyText": "I'm now just building the individual reports.", "author": "tristantarrant", "createdAt": "2020-10-12T07:09:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU3NTE5NA=="}], "type": "inlineReview"}, {"oid": "884beb470fa6130c00236265cb5e275b796d8364", "url": "https://github.com/infinispan/infinispan/commit/884beb470fa6130c00236265cb5e275b796d8364", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs\n* Dependency Check", "committedDate": "2020-10-12T07:07:26Z", "type": "forcePushed"}, {"oid": "2c5109f9d8b52f6912679e3af54785d191368ec0", "url": "https://github.com/infinispan/infinispan/commit/2c5109f9d8b52f6912679e3af54785d191368ec0", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds", "committedDate": "2020-10-12T07:08:42Z", "type": "forcePushed"}, {"oid": "50217407ac85f5f7b2a6e48eb3074be018ad58dd", "url": "https://github.com/infinispan/infinispan/commit/50217407ac85f5f7b2a6e48eb3074be018ad58dd", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds", "committedDate": "2020-10-13T16:11:23Z", "type": "forcePushed"}, {"oid": "8e40565a98fb238f942b9c4ca30a2c74d352e15e", "url": "https://github.com/infinispan/infinispan/commit/8e40565a98fb238f942b9c4ca30a2c74d352e15e", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds", "committedDate": "2020-10-19T06:02:38Z", "type": "forcePushed"}, {"oid": "bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "url": "https://github.com/infinispan/infinispan/commit/bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds", "committedDate": "2020-10-19T14:05:36Z", "type": "commit"}, {"oid": "bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "url": "https://github.com/infinispan/infinispan/commit/bd6f2179edadf0a12ee6bbd6021a0e7ae30007f5", "message": "ISPN-3226 Enable various reports so that CI can show them\n\n* PMD\n* CPD\n* SpotBugs (replaces FindBugs)\n* Dependency Check\n* Enable reports for branch builds", "committedDate": "2020-10-19T14:05:36Z", "type": "forcePushed"}]}