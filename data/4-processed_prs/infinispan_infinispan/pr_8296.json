{"pr_number": 8296, "pr_title": "ISPN-11785 server patching docs", "pr_createdAt": "2020-05-08T15:49:35Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8296", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg2MjM3Nw==", "url": "https://github.com/infinispan/infinispan/pull/8296#discussion_r422862377", "bodyText": "suggestion: don't use . to signal the server path. It may be confusing IMO.\nuse something similar path/to/target/server/home and path/to/source/server/home", "author": "pruivo", "createdAt": "2020-05-11T08:14:17Z", "path": "documentation/src/main/asciidoc/topics/proc_server_creating_patches.adoc", "diffHunk": "@@ -0,0 +1,85 @@\n+[id='patching_create-{context}']\n+= Creating Server Patches\n+You can create patches for {brandname} servers from an existing server\n+installation.\n+\n+ifndef::productized[]\n+You can create patches for {brandname} servers starting from 10.1.7. You can\n+patch any 10.1 or later server installation. However you cannot patch 9.4.x or\n+earlier servers with 10.1.7 or later.\n+\n+You can also create patches that either upgrade or downgrade the {brandname}\n+server version. For example, you can create a patch from version 10.1.7 and use\n+it to upgrade version 10.1.5 or downgrade version 11.0.0.\n+endif::productized[]\n+ifdef::productized[]\n+You can create patches for {brandname} servers starting from 8.0.1. You can\n+patch 8.0 GA servers with 8.0.1. However you cannot patch 7.3.x or earlier\n+servers with 8.0.1 or later.\n+\n+You can also create patches that either upgrade or downgrade the {brandname}\n+server version. For example, you can create a patch from version 8.0.1 and use\n+it to upgrade version 8.0 GA or downgrade a later version.\n+\n+[IMPORTANT]\n+====\n+To avoid issues with server installations, {redhat} recommends that you\n+download server patches from the {portal} rather than creating them.\n+====\n+endif::productized[]\n+\n+.Procedure\n+\n+. Navigate to `{server_home}` for a {brandname} server installation that has\n+the target version for the patch you want to create.\n+. Start the CLI.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+$ bin/cli.sh\n+[disconnected]>\n+----\n++\n+. Use the `patch create` command to generate a patch archive and include the `-q` option with a meaningful qualifier to describe the patch.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+[disconnected]> patch create -q \"this is my test patch\" path/to/mypatch.zip . path/to/server/home", "originalCommit": "a36c5d6c340de2842b45c978eb65258fe52981c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg5MTAyNQ==", "url": "https://github.com/infinispan/infinispan/pull/8296#discussion_r422891025", "bodyText": "thanks, Pedro. I've updated with this.", "author": "oraNod", "createdAt": "2020-05-11T09:01:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg2MjM3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg2MzQ1Ng==", "url": "https://github.com/infinispan/infinispan/pull/8296#discussion_r422863456", "bodyText": "same suggestion as above.", "author": "pruivo", "createdAt": "2020-05-11T08:16:05Z", "path": "documentation/src/main/asciidoc/topics/proc_server_creating_patches.adoc", "diffHunk": "@@ -0,0 +1,85 @@\n+[id='patching_create-{context}']\n+= Creating Server Patches\n+You can create patches for {brandname} servers from an existing server\n+installation.\n+\n+ifndef::productized[]\n+You can create patches for {brandname} servers starting from 10.1.7. You can\n+patch any 10.1 or later server installation. However you cannot patch 9.4.x or\n+earlier servers with 10.1.7 or later.\n+\n+You can also create patches that either upgrade or downgrade the {brandname}\n+server version. For example, you can create a patch from version 10.1.7 and use\n+it to upgrade version 10.1.5 or downgrade version 11.0.0.\n+endif::productized[]\n+ifdef::productized[]\n+You can create patches for {brandname} servers starting from 8.0.1. You can\n+patch 8.0 GA servers with 8.0.1. However you cannot patch 7.3.x or earlier\n+servers with 8.0.1 or later.\n+\n+You can also create patches that either upgrade or downgrade the {brandname}\n+server version. For example, you can create a patch from version 8.0.1 and use\n+it to upgrade version 8.0 GA or downgrade a later version.\n+\n+[IMPORTANT]\n+====\n+To avoid issues with server installations, {redhat} recommends that you\n+download server patches from the {portal} rather than creating them.\n+====\n+endif::productized[]\n+\n+.Procedure\n+\n+. Navigate to `{server_home}` for a {brandname} server installation that has\n+the target version for the patch you want to create.\n+. Start the CLI.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+$ bin/cli.sh\n+[disconnected]>\n+----\n++\n+. Use the `patch create` command to generate a patch archive and include the `-q` option with a meaningful qualifier to describe the patch.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+[disconnected]> patch create -q \"this is my test patch\" path/to/mypatch.zip . path/to/server/home\n+----\n++\n+The preceding command generates a `.zip` archive in the specified directory.\n+Note that paths are relative to `{server_home}`.\n++\n+. Describe the generated patch archive.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+[disconnected]> patch describe path/to/mypatch.zip\n+\n+{fullbrandname} patch target=$target_version(my test patch) source=$source_version created=$timestamp\n+----\n++\n+* `$target_version` is the {brandname} server version from which the patch was created.\n+* `$source_version` is the {brandname} server version to which you can apply the patch.\n++\n+You can apply patches to {brandname} servers that match the `$source_version`\n+only. Attempting to apply patches to other versions results in the following\n+exception:\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+java.lang.IllegalStateException: The supplied patch cannot be applied to `$source_version`\n+----\n+\n+[TIP]\n+====\n+Create single patches for multiple different {brandname} versions, for example:\n+\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+[disconnected]> patch create -q \"this is my test patch\" path/to/mypatch.zip . path/to/server1/home path/to/server2/home", "originalCommit": "a36c5d6c340de2842b45c978eb65258fe52981c6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1571de7914bd17c0a40a0e524db1e9f9bf2a53db", "url": "https://github.com/infinispan/infinispan/commit/1571de7914bd17c0a40a0e524db1e9f9bf2a53db", "message": "ISPN-11785 server patching docs", "committedDate": "2020-05-11T09:00:23Z", "type": "forcePushed"}, {"oid": "1db217f8103ba2b707bbe1a501dacff3e171f288", "url": "https://github.com/infinispan/infinispan/commit/1db217f8103ba2b707bbe1a501dacff3e171f288", "message": "ISPN-11785 server patching docs", "committedDate": "2020-05-11T12:52:57Z", "type": "forcePushed"}, {"oid": "836c40f1480a4d36ddab9c43db066e0e521fb77c", "url": "https://github.com/infinispan/infinispan/commit/836c40f1480a4d36ddab9c43db066e0e521fb77c", "message": "ISPN-11785 server patching docs", "committedDate": "2020-05-12T10:50:39Z", "type": "commit"}, {"oid": "836c40f1480a4d36ddab9c43db066e0e521fb77c", "url": "https://github.com/infinispan/infinispan/commit/836c40f1480a4d36ddab9c43db066e0e521fb77c", "message": "ISPN-11785 server patching docs", "committedDate": "2020-05-12T10:50:39Z", "type": "forcePushed"}]}