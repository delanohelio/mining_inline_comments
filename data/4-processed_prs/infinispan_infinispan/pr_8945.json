{"pr_number": 8945, "pr_title": "ISPN-12588 Fix server's common.sh to handle custom paths correctly", "pr_createdAt": "2020-12-21T08:37:12Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8945", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMjgxMw==", "url": "https://github.com/infinispan/infinispan/pull/8945#discussion_r546702813", "bodyText": "If not used I would remove ispn.server.*.path use", "author": "wfink", "createdAt": "2020-12-21T13:23:21Z", "path": "server/runtime/src/main/server/bin/cli.sh", "diffHunk": "@@ -122,16 +127,16 @@ if $linux; then\n     for var in $CONSOLIDATED_OPTS\n     do\n        # Remove quotes\n-       p=$(echo $var | tr -d \"'\")\n+       p=$(echo \"$var\" | tr -d \"'\")\n        case $p in\n-         -Dinfinispan.server.base.dir=*)", "originalCommit": "4510ea76fed36a85b2f36f16b3a71937ead80f0f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcyMjQzNw==", "url": "https://github.com/infinispan/infinispan/pull/8945#discussion_r546722437", "bodyText": "There are some commands that reference those paths: user, credential, so I'd rather leave those in", "author": "tristantarrant", "createdAt": "2020-12-21T14:03:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMjgxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjcwMzE3Mw==", "url": "https://github.com/infinispan/infinispan/pull/8945#discussion_r546703173", "bodyText": "MODULEPATH seems a leftover", "author": "wfink", "createdAt": "2020-12-21T13:24:06Z", "path": "server/runtime/src/main/server/bin/cli.sh", "diffHunk": "@@ -167,65 +172,65 @@ if $darwin || $freebsd || $other ; then\n     for var in $CONSOLIDATED_OPTS\n     do\n        # Remove quotes\n-       p=$(echo $var | tr -d \"'\")\n+       p=$(echo \"$var\" | tr -d \"'\")\n        case $p in\n-         -Dinfinispan.server.base.dir=*)\n-              ISPN_BASE_DIR=$(cd ${p#*=} ; pwd -P)\n+         -Dinfinispan.server.root.path=*|--server-root=*)\n+              ISPN_ROOT_DIR=$(cd \"${p#*=}\" ; pwd -P)\n               ;;\n-         -Dinfinispan.server.log.dir=*)\n+         -Dinfinispan.server.log.path=*)\n               if [ -d \"${p#*=}\" ]; then\n-                ISPN_LOG_DIR=$(cd ${p#*=} ; pwd -P)\n+                ISPN_LOG_DIR=$(cd \"${p#*=}\" ; pwd -P)\n              else\n                 #since the specified directory doesn't exist we don't validate it\n                 ISPN_LOG_DIR=${p#*=}\n              fi\n              ;;\n-         -Dinfinispan.server.config.dir=*)\n-              ISPN_CONFIG_DIR=$(cd ${p#*=} ; pwd -P)\n+         -Dinfinispan.server.config.path=*)\n+              ISPN_CONFIG_DIR=$(cd \"${p#*=}\" ; pwd -P)\n               ;;\n        esac\n     done\n fi\n \n # determine the default base dir, if not set\n-if [ \"x$ISPN_BASE_DIR\" = \"x\" ]; then\n-   ISPN_BASE_DIR=\"$ISPN_HOME/server\"\n+if [ \"x$ISPN_ROOT_DIR\" = \"x\" ]; then\n+   ISPN_ROOT_DIR=\"$ISPN_HOME/server\"\n fi\n # determine the default log dir, if not set\n if [ \"x$ISPN_LOG_DIR\" = \"x\" ]; then\n-   ISPN_LOG_DIR=\"$ISPN_BASE_DIR/log\"\n+   ISPN_LOG_DIR=\"$ISPN_ROOT_DIR/log\"\n fi\n # determine the default configuration dir, if not set\n if [ \"x$ISPN_CONFIG_DIR\" = \"x\" ]; then\n-   ISPN_CONFIG_DIR=\"$ISPN_BASE_DIR/conf\"\n+   ISPN_CONFIG_DIR=\"$ISPN_ROOT_DIR/conf\"\n fi\n \n # For Cygwin, switch paths to Windows format before running java\n if $cygwin; then\n     ISPN_HOME=$(cygpath --path --windows \"$ISPN_HOME\")\n     JAVA_HOME=$(cygpath --path --windows \"$JAVA_HOME\")\n     ISPN_MODULEPATH=$(cygpath --path --windows \"$ISPN_MODULEPATH\")", "originalCommit": "4510ea76fed36a85b2f36f16b3a71937ead80f0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "555474f6b030af27e1ca45d016c9850fc7973175", "url": "https://github.com/infinispan/infinispan/commit/555474f6b030af27e1ca45d016c9850fc7973175", "message": "ISPN-12588 Fix server's common.sh to handle custom paths correctly", "committedDate": "2020-12-21T14:23:50Z", "type": "commit"}, {"oid": "306e3a2af85190b9f4f45e31e2da33a69ae17536", "url": "https://github.com/infinispan/infinispan/commit/306e3a2af85190b9f4f45e31e2da33a69ae17536", "message": "ISPN-12589 Support -D and -P for the CLI", "committedDate": "2020-12-21T14:23:50Z", "type": "commit"}, {"oid": "306e3a2af85190b9f4f45e31e2da33a69ae17536", "url": "https://github.com/infinispan/infinispan/commit/306e3a2af85190b9f4f45e31e2da33a69ae17536", "message": "ISPN-12589 Support -D and -P for the CLI", "committedDate": "2020-12-21T14:23:50Z", "type": "forcePushed"}]}