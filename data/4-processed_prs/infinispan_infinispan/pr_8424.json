{"pr_number": 8424, "pr_title": "ISPN-11960 RemoteCache configuration enhancements", "pr_createdAt": "2020-06-03T14:12:25Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8424", "timeline": [{"oid": "a9d1debcb2a6b608edc874fc0033e5f98ce83063", "url": "https://github.com/infinispan/infinispan/commit/a9d1debcb2a6b608edc874fc0033e5f98ce83063", "message": "ISPN-11960 RemoteCache configuration enhancements\n\n* Allow wildcards in remote cache names\n* Allow `.` characters in remote cache names when used declaratively\n* Allow passing a remote cache configuration via URI", "committedDate": "2020-06-03T14:19:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY4OTU3MQ==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r434689571", "bodyText": "I think we can omit the 2nd .Procedure. You should really only have one per \"proc_\" file.", "author": "oraNod", "createdAt": "2020-06-03T16:14:02Z", "path": "documentation/src/main/asciidoc/topics/proc_configuring_hotrod_percache.adoc", "diffHunk": "@@ -0,0 +1,47 @@\n+[id='hotrod_percache']\n+= Per-cache configuration\n+\n+Certain aspects of remote caches can be configured for each individual cache:\n+\n+* force return values\n+* on-access creation configuration/template\n+* near-caching\n+* transaction mode\n+\n+.Procedure\n+\n+* Enable _force return values_ just for cache `a-cache`\n+\n+[source,java]\n+----\n+import org.infinispan.client.hotrod.configuration.ConfigurationBuilder;\n+...\n+\n+ConfigurationBuilder builder = new ConfigurationBuilder();\n+builder\n+  .remoteCache(\"a-cache\")\n+    .forceReturnValues(true);\n+----\n+\n+You can also use wildcard globbing in the remote cache name to match multiple caches:\n+\n+.Procedure", "originalCommit": "a9d1debcb2a6b608edc874fc0033e5f98ce83063", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5MTk1Ng==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r435091956", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-06-04T08:46:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY4OTU3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY5MDY5MA==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r434690690", "bodyText": "Could probably condense this with the preceding sentence. Maybe consider \"Use wildcard globbing in the remote cache name to enable force return values for all caches that start with the string somecaches:", "author": "oraNod", "createdAt": "2020-06-03T16:15:42Z", "path": "documentation/src/main/asciidoc/topics/proc_configuring_hotrod_percache.adoc", "diffHunk": "@@ -0,0 +1,47 @@\n+[id='hotrod_percache']\n+= Per-cache configuration\n+\n+Certain aspects of remote caches can be configured for each individual cache:\n+\n+* force return values\n+* on-access creation configuration/template\n+* near-caching\n+* transaction mode\n+\n+.Procedure\n+\n+* Enable _force return values_ just for cache `a-cache`\n+\n+[source,java]\n+----\n+import org.infinispan.client.hotrod.configuration.ConfigurationBuilder;\n+...\n+\n+ConfigurationBuilder builder = new ConfigurationBuilder();\n+builder\n+  .remoteCache(\"a-cache\")\n+    .forceReturnValues(true);\n+----\n+\n+You can also use wildcard globbing in the remote cache name to match multiple caches:\n+\n+.Procedure\n+\n+* Enable _force return values_ for all caches starting with the string `somecaches`.", "originalCommit": "a9d1debcb2a6b608edc874fc0033e5f98ce83063", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5MTg5NA==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r435091894", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-06-04T08:45:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDY5MDY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcwMTkxNw==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r434701917", "bodyText": "Apologies in advance because this is probably obvious but I question the \"When using declarative configuration\" part here. Does this mean that if caches defined in infinispan.xml contain the . character in the name? Or is this more about if you use hotrod-client.properties and caches contain the . character?\nAlso, no Latin abbreviations please. \ud83d\ude04 s/e.g./for example:/\nAnother nit that I can't hold back, surround and enclose pretty much mean the same thing. It might be more efficient to say \"you must enclose the cache name in square brackets\"", "author": "oraNod", "createdAt": "2020-06-03T16:32:36Z", "path": "documentation/src/main/asciidoc/topics/proc_configuring_hotrod_percache.adoc", "diffHunk": "@@ -0,0 +1,47 @@\n+[id='hotrod_percache']\n+= Per-cache configuration\n+\n+Certain aspects of remote caches can be configured for each individual cache:\n+\n+* force return values\n+* on-access creation configuration/template\n+* near-caching\n+* transaction mode\n+\n+.Procedure\n+\n+* Enable _force return values_ just for cache `a-cache`\n+\n+[source,java]\n+----\n+import org.infinispan.client.hotrod.configuration.ConfigurationBuilder;\n+...\n+\n+ConfigurationBuilder builder = new ConfigurationBuilder();\n+builder\n+  .remoteCache(\"a-cache\")\n+    .forceReturnValues(true);\n+----\n+\n+You can also use wildcard globbing in the remote cache name to match multiple caches:\n+\n+.Procedure\n+\n+* Enable _force return values_ for all caches starting with the string `somecaches`.\n+\n+[source,java]\n+----\n+import org.infinispan.client.hotrod.configuration.ConfigurationBuilder;\n+...\n+\n+ConfigurationBuilder builder = new ConfigurationBuilder();\n+builder\n+  .remoteCache(\"somecaches*\")\n+    .forceReturnValues(true);\n+----\n+\n+[NOTE]\n+====\n+When using declarative configuration and your cache names contain the `.` character, you must surround the cache name\n+with enclosing square brackets, e.g. `infinispan.client.hotrod.cache.[example.MyCache].template=...`\n+====", "originalCommit": "a9d1debcb2a6b608edc874fc0033e5f98ce83063", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5MTYyNg==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r435091626", "bodyText": "This is about the hotrod-client.properties file, since the . character is already a delimiter in the property name", "author": "tristantarrant", "createdAt": "2020-06-04T08:45:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcwMTkxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA5MjA1Mg==", "url": "https://github.com/infinispan/infinispan/pull/8424#discussion_r435092052", "bodyText": "I've addressed the comments", "author": "tristantarrant", "createdAt": "2020-06-04T08:46:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDcwMTkxNw=="}], "type": "inlineReview"}, {"oid": "11780b6cc6d1709b54aa9ed99e27c4ca0bd2e17e", "url": "https://github.com/infinispan/infinispan/commit/11780b6cc6d1709b54aa9ed99e27c4ca0bd2e17e", "message": "ISPN-11960 RemoteCache configuration enhancements\n\n* Allow wildcards in remote cache names\n* Allow `.` characters in remote cache names when used declaratively\n* Allow passing a remote cache configuration via URI", "committedDate": "2020-06-04T08:45:33Z", "type": "commit"}, {"oid": "11780b6cc6d1709b54aa9ed99e27c4ca0bd2e17e", "url": "https://github.com/infinispan/infinispan/commit/11780b6cc6d1709b54aa9ed99e27c4ca0bd2e17e", "message": "ISPN-11960 RemoteCache configuration enhancements\n\n* Allow wildcards in remote cache names\n* Allow `.` characters in remote cache names when used declaratively\n* Allow passing a remote cache configuration via URI", "committedDate": "2020-06-04T08:45:33Z", "type": "forcePushed"}]}