{"pr_number": 8108, "pr_title": "ISPN-11453 Use Paths.get() to concatenate paths", "pr_createdAt": "2020-03-26T11:27:27Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8108", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzA0NQ==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400093045", "bodyText": "Shouldn't we be using CommonsTestingUtil.tmpDirectory?", "author": "ryanemerson", "createdAt": "2020-03-30T10:40:43Z", "path": "core/src/test/java/org/infinispan/configuration/parsing/UnifiedXmlFileParsingTest.java", "diffHunk": "@@ -71,6 +70,8 @@\n @Test(groups = \"unit\", testName = \"configuration.parsing.UnifiedXmlFileParsingTest\")\n public class UnifiedXmlFileParsingTest extends AbstractInfinispanTest {\n \n+   public static final String TMPDIR = System.getProperty(\"java.io.tmpdir\");", "originalCommit": "9a424bc819f434162fcab3dcc3a56f922cebd662", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1MDM3NQ==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400850375", "bodyText": "No, because this test is only about ensuring that it is parsing things correctly (including expanding of system properties). It won't actually use the persistent paths for anything", "author": "tristantarrant", "createdAt": "2020-03-31T11:51:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzA0NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzYxOQ==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400093619", "bodyText": "CommonsTestingUtil.tmpDirectory", "author": "ryanemerson", "createdAt": "2020-03-30T10:41:50Z", "path": "query/src/test/java/org/infinispan/query/blackbox/LocalCachePerformantConfTest.java", "diffHunk": "@@ -20,7 +21,7 @@\n    /**\n     * The file constant needs to match what's defined in the configuration file.\n     */\n-   private final String indexDirectory = System.getProperty(\"java.io.tmpdir\") + File.separator + \"LocalCachePerformantConfTest\";\n+   private final String indexDirectory = Paths.get(System.getProperty(\"java.io.tmpdir\"), \"LocalCachePerformantConfTest\").toString();", "originalCommit": "9a424bc819f434162fcab3dcc3a56f922cebd662", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDg1MTEwOQ==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r400851109", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-03-31T11:52:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDA5MzYxOQ=="}], "type": "inlineReview"}, {"oid": "baeae37db5d2947e520da528e3d6b0aebc299fc8", "url": "https://github.com/infinispan/infinispan/commit/baeae37db5d2947e520da528e3d6b0aebc299fc8", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-03-31T11:52:19Z", "type": "forcePushed"}, {"oid": "2348039a9dbeb6d6dc012eeddec703792d8bd036", "url": "https://github.com/infinispan/infinispan/commit/2348039a9dbeb6d6dc012eeddec703792d8bd036", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-04-02T16:56:15Z", "type": "forcePushed"}, {"oid": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1", "url": "https://github.com/infinispan/infinispan/commit/fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-04T12:06:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r419956994", "bodyText": "configRoot is never null.\nProbably you will get a NullPointerException if System.getenv(\"APPDATA\") returns null.", "author": "pruivo", "createdAt": "2020-05-05T08:51:49Z", "path": "cli/cli-client/src/main/java/org/infinispan/cli/util/SystemUtils.java", "diffHunk": "@@ -18,26 +19,26 @@\n     * @return\n     */\n    public static String getAppConfigFolder(String appName) {\n-      String configRoot = null;\n+      Path configRoot = null;\n       String osName = System.getProperty(\"os.name\");\n       if (\"Mac OS X\".equals(osName)) {\n-         configRoot = System.getProperty(\"user.home\") + File.separator + \"Library\" + File.separator + \"Java\";\n+         configRoot = Paths.get(System.getProperty(\"user.home\"), \"Library\", \"Java\");\n       } else if (osName.startsWith(\"Windows\")) {\n          // If on Windows, use the APPDATA environment\n          try {\n-            configRoot = System.getenv(\"APPDATA\");\n+            configRoot = Paths.get(System.getenv(\"APPDATA\"));\n             if (configRoot != null) {", "originalCommit": "fb3a91e59bc4315abf1e1154c91ba3deacd9b2b1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4MzE5NQ==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r420683195", "bodyText": "@tristantarrant ^", "author": "pruivo", "createdAt": "2020-05-06T10:16:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjgxNjg0NA==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r426816844", "bodyText": "@tristantarrant can you fix this small issue?", "author": "pruivo", "createdAt": "2020-05-18T18:28:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzEwNjU2Nw==", "url": "https://github.com/infinispan/infinispan/pull/8108#discussion_r427106567", "bodyText": "Done", "author": "tristantarrant", "createdAt": "2020-05-19T08:04:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1Njk5NA=="}], "type": "inlineReview"}, {"oid": "2401f3a63307e68a84a16cfbb369a1f0ef6585a4", "url": "https://github.com/infinispan/infinispan/commit/2401f3a63307e68a84a16cfbb369a1f0ef6585a4", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-05T14:12:31Z", "type": "forcePushed"}, {"oid": "08e42b99d3e68eef9236487f921a4396da7380bb", "url": "https://github.com/infinispan/infinispan/commit/08e42b99d3e68eef9236487f921a4396da7380bb", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-19T08:03:57Z", "type": "forcePushed"}, {"oid": "1fe691f4a5699181cf974bd3f268c70ce344a9ad", "url": "https://github.com/infinispan/infinispan/commit/1fe691f4a5699181cf974bd3f268c70ce344a9ad", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-19T09:32:26Z", "type": "forcePushed"}, {"oid": "f04c5e8204112307e6fe6e6c1f07199727d21bad", "url": "https://github.com/infinispan/infinispan/commit/f04c5e8204112307e6fe6e6c1f07199727d21bad", "message": "ISPN-11453 Use Paths.get() to concatenate paths", "committedDate": "2020-05-19T14:44:09Z", "type": "commit"}, {"oid": "483cea1fc5af8dada574a5107e9df42417e89ffa", "url": "https://github.com/infinispan/infinispan/commit/483cea1fc5af8dada574a5107e9df42417e89ffa", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-19T14:50:25Z", "type": "forcePushed"}, {"oid": "7d4df5778fd67aea1b2cd8cfe1edab679ba77c54", "url": "https://github.com/infinispan/infinispan/commit/7d4df5778fd67aea1b2cd8cfe1edab679ba77c54", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-19T14:55:02Z", "type": "commit"}, {"oid": "7d4df5778fd67aea1b2cd8cfe1edab679ba77c54", "url": "https://github.com/infinispan/infinispan/commit/7d4df5778fd67aea1b2cd8cfe1edab679ba77c54", "message": "ISPN-11462 Correct removal of temporary files after some tests", "committedDate": "2020-05-19T14:55:02Z", "type": "forcePushed"}]}