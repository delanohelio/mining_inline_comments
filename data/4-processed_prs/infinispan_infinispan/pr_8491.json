{"pr_number": 8491, "pr_title": "ISPN-12021 creating remote caches", "pr_createdAt": "2020-06-18T14:39:40Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8491", "timeline": [{"oid": "931fd92306a7aa08a6a54933358b7a98f93f7c06", "url": "https://github.com/infinispan/infinispan/commit/931fd92306a7aa08a6a54933358b7a98f93f7c06", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-19T13:20:15Z", "type": "forcePushed"}, {"oid": "4257a620bd4109d1b20666ce95a8c51401fdf930", "url": "https://github.com/infinispan/infinispan/commit/4257a620bd4109d1b20666ce95a8c51401fdf930", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-22T17:01:44Z", "type": "forcePushed"}, {"oid": "9b37a9589ce840129ca60c6e87dd9002a62ca899", "url": "https://github.com/infinispan/infinispan/commit/9b37a9589ce840129ca60c6e87dd9002a62ca899", "message": "add cache encoding", "committedDate": "2020-06-23T11:16:39Z", "type": "forcePushed"}, {"oid": "5e5757f61d79f5c4f2196d7e1db48387be7f1886", "url": "https://github.com/infinispan/infinispan/commit/5e5757f61d79f5c4f2196d7e1db48387be7f1886", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-24T10:28:44Z", "type": "forcePushed"}, {"oid": "d0758b9f451d101c78a8815d477ea8878b5feec9", "url": "https://github.com/infinispan/infinispan/commit/d0758b9f451d101c78a8815d477ea8878b5feec9", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-24T18:36:33Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxMjU3Mg==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445412572", "bodyText": "this configuration example is broken in multiple places. but if you remove the \"default\" cache, I have the following error:\n09:56:11,281 FATAL (main) [org.infinispan.SERVER] ISPN080028: Infinispan Server failed to start org.infinispan.commons.CacheConfigurationException: ISPN000432: Missing configuration for default cache 'default' declared on container", "author": "pruivo", "createdAt": "2020-06-25T09:01:19Z", "path": "server/runtime/README.adoc", "diffHunk": "@@ -76,7 +76,6 @@ The following is an example server configuration:\n <cache-container default-cache=\"default\" statistics=\"false\">\n       <transport cluster=\"${infinispan.cluster.name}\" stack=\"udp\"/>\n       <global-state/>\n-      <distributed-cache name=\"default\"/>", "originalCommit": "d0758b9f451d101c78a8815d477ea8878b5feec9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2NjY2Ng==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445466666", "bodyText": "ah, yeah. cache-container default-cache=\"default\"", "author": "oraNod", "createdAt": "2020-06-25T10:39:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxMjU3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2Nzg3MQ==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445467871", "bodyText": "let's just make this example community only. I'll add back the default cache config.", "author": "oraNod", "createdAt": "2020-06-25T10:42:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxMjU3Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQxOTU1MQ==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445419551", "bodyText": "shouldn't the \"tip\" be in the bullet below? I find it weird to read about the \"--file\" option with a tip about a \"--template\" option,", "author": "pruivo", "createdAt": "2020-06-25T09:13:47Z", "path": "documentation/src/main/asciidoc/topics/proc_creating_caches_cli.adoc", "diffHunk": "@@ -0,0 +1,52 @@\n+[id='create_cache_cli']\n+= Creating Caches with the {brandname} Command Line Interface (CLI)\n+Use the {brandname} CLI to add caches from templates or configuration files in\n+XML or JSON format.\n+\n+.Prerequisites\n+\n+Add {brandname} credentials and start at least one {brandname} server instance.\n+\n+.Procedure\n+\n+. Create a CLI connection to {brandname}.\n+. Add cache definitions with the [command]`create cache` command.\n++\n+* Add a cache definition from an XML or JSON file with the [command]`--file` option.\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+[//containers/default]> create cache --file=configuration.xml mycache\n+----\n++\n+[TIP]", "originalCommit": "d0758b9f451d101c78a8815d477ea8878b5feec9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQyNjcyMw==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445426723", "bodyText": "I think this line is breaking the HTML formating of this section.", "author": "pruivo", "createdAt": "2020-06-25T09:25:57Z", "path": "documentation/src/main/asciidoc/topics/proc_cli_adding_entries.adoc", "diffHunk": "@@ -1,35 +1,31 @@\n [id='cli_add_entries']\n = Adding Cache Entries\n-Add data to caches with the {brandname} CLI.\n+Create `key:value` pair entries in the data container.\n \n .Prerequisites\n \n-* Create a cache named \"mycache\" and `cd` into it.\n-+\n-[source,options=\"nowrap\",subs=attributes+]\n-----\n-[//containers/default]> cd caches/mycache\n-----\n+Create a {brandname} cache that can store your data.\n \n .Procedure\n \n-. Put an entry into \"mycache\".\n+. Create a CLI connection to {brandname}.\n+. Add entries into your cache as follows:\n++\n+* Use the [command]`put` command from the context of a cache:\n +\n [source,options=\"nowrap\",subs=attributes+]\n ----\n [//containers/default/caches/mycache]> put hello world\n ----\n +\n-[TIP]\n+* Use the [command]`--cache=` with the [command]`put` command:\n ====", "originalCommit": "d0758b9f451d101c78a8815d477ea8878b5feec9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ2ODgxMg==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445468812", "bodyText": "great catch", "author": "oraNod", "createdAt": "2020-06-25T10:44:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQyNjcyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTAzMg==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445431032", "bodyText": "the username and password are prompted after the connect command.\n$ ./server/runtime/target/infinispan-server-11.0.1-SNAPSHOT/bin/cli.sh \n[disconnected]> connect\nUsername: dev\nPassword: ***", "author": "pruivo", "createdAt": "2020-06-25T09:33:10Z", "path": "documentation/src/main/asciidoc/topics/proc_cli_connecting.adoc", "diffHunk": "@@ -1,25 +1,43 @@\n+[id='cli_start-{context}']\n = Connecting to {brandname} Servers\n+Establish CLI connections to {brandname}.\n \n-Do one of the following:\n+.Prerequisites\n \n-* Run the `connect` command to connect to a {brandname} server on the default port of `11222`:\n+Add user credentials and have at least one running {brandname} server instance.\n+\n+.Procedure\n+\n+. Open a terminal in `{server_home}`.\n+. Start the CLI.\n++\n+* *Linux:*\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+include::cmd_examples/cli_nix.adoc[]\n+----\n++\n+* *Microsoft Windows:*\n++\n+[source,options=\"nowrap\",subs=attributes+]\n+----\n+include::cmd_examples/cli_win.adoc[]\n+----\n++\n+. Enter your username and password when prompted.", "originalCommit": "d0758b9f451d101c78a8815d477ea8878b5feec9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTU3Mg==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445431572", "bodyText": "I would probably merge it in the next bullet:\n\"Run the [command]connect command and enter your username and password when prompted.\"", "author": "pruivo", "createdAt": "2020-06-25T09:34:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTAzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTg3NQ==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445431875", "bodyText": "offtopic: what does [command] do?", "author": "pruivo", "createdAt": "2020-06-25T09:34:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTAzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ3MDQzMA==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445470430", "bodyText": "another good comment. [command] adds syntax highlighting downstream. I don't have an example to hand but it's in the markup conventions at: https://redhat-documentation.github.io/asciidoc-markup-conventions/", "author": "oraNod", "createdAt": "2020-06-25T10:47:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQzMTAzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTQ0MDcyNw==", "url": "https://github.com/infinispan/infinispan/pull/8491#discussion_r445440727", "bodyText": "I would not be so drastic (should not). Something like:\nConfigurations declared directly in infinispan.xml are not automatically synchronized across the cluster. If you wish to use this method, ensure that the configuration is propagated to all of the nodes in your cluster using configuration management tools like Ansible or Chef.", "author": "tristantarrant", "createdAt": "2020-06-25T09:49:54Z", "path": "documentation/src/main/asciidoc/topics/con_remote_cache.adoc", "diffHunk": "@@ -0,0 +1,17 @@\n+[id='remote_caches-{context}']\n+= Cache Configuration with {brandname} Server\n+Caches configure the data container on {brandname} Server.\n+\n+You create caches at run-time by adding definitions based on `org.infinispan`\n+templates or {brandname} configuration through the console, the Command Line\n+Interface (CLI), the Hot Rod endpoint, or the REST endpoint.\n+\n+[IMPORTANT]\n+====\n+When you create caches at run-time, {brandname} Server replicates your cache\n+definitions across the cluster.\n+\n+You should not add cache definitions to `{server_config}/infinispan.xml`", "originalCommit": "d0758b9f451d101c78a8815d477ea8878b5feec9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b5db4cde23c6e457c5253164e8e946f283db6be0", "url": "https://github.com/infinispan/infinispan/commit/b5db4cde23c6e457c5253164e8e946f283db6be0", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-25T10:56:38Z", "type": "forcePushed"}, {"oid": "fafdb5677cf32f2b96b900d1b52113708dd140e5", "url": "https://github.com/infinispan/infinispan/commit/fafdb5677cf32f2b96b900d1b52113708dd140e5", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-25T11:20:02Z", "type": "forcePushed"}, {"oid": "63417b6797b253b681764eb7e586167832cd4c81", "url": "https://github.com/infinispan/infinispan/commit/63417b6797b253b681764eb7e586167832cd4c81", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-25T14:03:27Z", "type": "forcePushed"}, {"oid": "4a7a3bd8ef83b69e5d9002648145363439323aa9", "url": "https://github.com/infinispan/infinispan/commit/4a7a3bd8ef83b69e5d9002648145363439323aa9", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-25T14:06:46Z", "type": "commit"}, {"oid": "4a7a3bd8ef83b69e5d9002648145363439323aa9", "url": "https://github.com/infinispan/infinispan/commit/4a7a3bd8ef83b69e5d9002648145363439323aa9", "message": "ISPN-12021 creating remote caches", "committedDate": "2020-06-25T14:06:46Z", "type": "forcePushed"}]}