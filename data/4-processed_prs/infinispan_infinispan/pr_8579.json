{"pr_number": 8579, "pr_title": "ISPN-12150 Improve CLI server report to work with MacOs", "pr_createdAt": "2020-07-22T18:26:33Z", "pr_url": "https://github.com/infinispan/infinispan/pull/8579", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMDQzOQ==", "url": "https://github.com/infinispan/infinispan/pull/8579#discussion_r462410439", "bodyText": "I'd rather have a switch statement with explicit os-specific calls.", "author": "tristantarrant", "createdAt": "2020-07-29T15:59:07Z", "path": "server/runtime/src/main/java/org/infinispan/server/Server.java", "diffHunk": "@@ -554,14 +554,15 @@ public TaskManager getTaskManager() {\n    @Override\n    public CompletionStage<Path> getServerReport() {\n       OS os = OS.getCurrentOs();\n-      if (os != OS.LINUX) {\n+      if (os == OS.WINDOWS) {\n          return CompletableFutures.completedExceptionFuture(log.serverReportUnavailable(os));\n       }\n       long pid = ProcessInfo.getInstance().getPid();\n       Path home = serverHome.toPath();\n       Path root = serverRoot.toPath();\n       ProcessBuilder builder = new ProcessBuilder();\n-      builder.command(\"sh\", \"-c\", home.resolve(\"bin/report.sh\").toString(), Long.toString(pid), root.toString());\n+      String reportFile = String.format(\"bin/%s\", OS.getCurrentOs() == OS.LINUX ? \"report.sh\" : \"report-osx.sh\");", "originalCommit": "4fcdc5642750d4f12c74f1ef92bf23216121e174", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzIwNDM5Mg==", "url": "https://github.com/infinispan/infinispan/pull/8579#discussion_r463204392", "bodyText": "@tristantarrant updated", "author": "gustavolira", "createdAt": "2020-07-30T18:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQxMDQzOQ=="}], "type": "inlineReview"}, {"oid": "de073aec1538b381dec38cbefa626b6d1932a14d", "url": "https://github.com/infinispan/infinispan/commit/de073aec1538b381dec38cbefa626b6d1932a14d", "message": "ISPN-12150 Improve CLI server report to work with MacOs", "committedDate": "2020-07-30T18:53:32Z", "type": "commit"}, {"oid": "de073aec1538b381dec38cbefa626b6d1932a14d", "url": "https://github.com/infinispan/infinispan/commit/de073aec1538b381dec38cbefa626b6d1932a14d", "message": "ISPN-12150 Improve CLI server report to work with MacOs", "committedDate": "2020-07-30T18:53:32Z", "type": "forcePushed"}]}