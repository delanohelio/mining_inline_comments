{"pr_number": 391, "pr_title": "Use Apache Commons in GeoJsonParser; Fix GeoJsonExtent", "pr_createdAt": "2020-03-12T14:45:00Z", "pr_url": "https://github.com/google/ground-android/pull/391", "timeline": [{"oid": "11330c90c776d4f678c92b808d40c127d25d6081", "url": "https://github.com/google/ground-android/commit/11330c90c776d4f678c92b808d40c127d25d6081", "message": "Update GeoJsonParser\n\nThis change includes minor improvements to the GeoJsonParser and Json\nExtent model object:\n\n- Use Apache Commons for reading in the JSON source\n- Fix an error in the Json Extent's handling of coordinates--coordinates\n  are nested one more array deep in the GeoJson source than I originally\n  accounted for, leading to errors.", "committedDate": "2020-03-12T14:39:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTA0NA==", "url": "https://github.com/google/ground-android/pull/391#discussion_r391679044", "bodyText": "Nit: Commons -> proper noun", "author": "gino-m", "createdAt": "2020-03-12T14:56:34Z", "path": "gnd/build.gradle", "diffHunk": "@@ -207,6 +208,10 @@ dependencies {\n \n     implementation \"com.uber.autodispose:autodispose-android:$project.autoDisposeVersion\"\n     implementation \"com.uber.autodispose:autodispose-android-archcomponents:$project.autoDisposeVersion\"\n+\n+    // Apache commons IO", "originalCommit": "11330c90c776d4f678c92b808d40c127d25d6081", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwODA5OA==", "url": "https://github.com/google/ground-android/pull/391#discussion_r391708098", "bodyText": "done!", "author": "scolsen", "createdAt": "2020-03-12T15:38:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTA0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTUwNQ==", "url": "https://github.com/google/ground-android/pull/391#discussion_r391679505", "bodyText": "Nit: Please extract Charset to constant.", "author": "gino-m", "createdAt": "2020-03-12T14:57:13Z", "path": "gnd/src/main/java/com/google/android/gnd/persistence/geojson/GeoJsonParser.java", "diffHunk": "@@ -42,34 +40,24 @@\n \n   private static final String TAG = GeoJsonParser.class.getSimpleName();\n   private final OfflineUuidGenerator uuidGenerator;\n+  private static final String FEATURES_KEY = \"features\";\n \n   @Inject\n   GeoJsonParser(OfflineUuidGenerator uuidGenerator) {\n     this.uuidGenerator = uuidGenerator;\n   }\n \n-  private String readJsonFile(File file) throws IOException {\n-    InputStream is = new FileInputStream(file);\n-    BufferedReader buf = new BufferedReader(new InputStreamReader(is));\n-    StringBuilder sb = new StringBuilder();\n-\n-    int res = buf.read();\n-    while (res != -1) {\n-      sb.append(res);\n-      res = buf.read();\n-    }\n-    return sb.toString();\n-  }\n-\n   /**\n    * Returns the immutable list of tiles specified in {@param geojson} that intersect {@param\n    * bounds}.\n    */\n   public ImmutableList<Tile> intersectingTiles(LatLngBounds bounds, File file) {\n     try {\n-      String fileContents = readJsonFile(file);\n+      String fileContents = FileUtils.readFileToString(file, Charset.forName(\"UTF-8\"));", "originalCommit": "11330c90c776d4f678c92b808d40c127d25d6081", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwODE3NA==", "url": "https://github.com/google/ground-android/pull/391#discussion_r391708174", "bodyText": "Done!", "author": "scolsen", "createdAt": "2020-03-12T15:38:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3OTUwNQ=="}], "type": "inlineReview"}, {"oid": "28645ba339cce720b7cb59b0575813063fd75b4d", "url": "https://github.com/google/ground-android/commit/28645ba339cce720b7cb59b0575813063fd75b4d", "message": "Merge branch 'offline-area-support' of https://github.com/google/ground-android into json-p", "committedDate": "2020-03-12T15:35:27Z", "type": "commit"}, {"oid": "ad50a09614299d4f39ba9f85d184606cd53a43fc", "url": "https://github.com/google/ground-android/commit/ad50a09614299d4f39ba9f85d184606cd53a43fc", "message": "Commons is a proper noun!", "committedDate": "2020-03-12T15:37:50Z", "type": "commit"}, {"oid": "2b587085137ac7e93bf0fc7bdece24f7005674c0", "url": "https://github.com/google/ground-android/commit/2b587085137ac7e93bf0fc7bdece24f7005674c0", "message": "Make JSON source charset a constant", "committedDate": "2020-03-12T15:38:15Z", "type": "commit"}, {"oid": "a72958985d260b73355638e95b0d9c95c92f6fb6", "url": "https://github.com/google/ground-android/commit/a72958985d260b73355638e95b0d9c95c92f6fb6", "message": "Merge branch 'master' into json-p", "committedDate": "2020-03-12T16:04:57Z", "type": "commit"}]}