{"pr_number": 379, "pr_title": "[Feature] Display active project in navigation drawer", "pr_createdAt": "2020-02-24T18:37:59Z", "pr_url": "https://github.com/google/ground-android/pull/379", "timeline": [{"oid": "c5b43699ee9c060d6e1ede995b9e20cc6eff757d", "url": "https://github.com/google/ground-android/commit/c5b43699ee9c060d6e1ede995b9e20cc6eff757d", "message": "Load projects into nav drawer dynamically", "committedDate": "2020-02-24T15:41:59Z", "type": "commit"}, {"oid": "ceff8cf3794d1cdde2a67e96d4f1bd4f0701a36d", "url": "https://github.com/google/ground-android/commit/ceff8cf3794d1cdde2a67e96d4f1bd4f0701a36d", "message": "Set active project on click", "committedDate": "2020-02-24T18:12:29Z", "type": "commit"}, {"oid": "61d39b9a7054f505beb72273189ad6a6e34a18de", "url": "https://github.com/google/ground-android/commit/61d39b9a7054f505beb72273189ad6a6e34a18de", "message": "Update strings", "committedDate": "2020-02-24T18:19:48Z", "type": "commit"}, {"oid": "7c74f2e257d59891c4019419a988dfb06d5fa0ed", "url": "https://github.com/google/ground-android/commit/7c74f2e257d59891c4019419a988dfb06d5fa0ed", "message": "Customize nav item styling", "committedDate": "2020-02-24T18:28:25Z", "type": "commit"}, {"oid": "e82dc04c37268bbd8242ee91628539a3b236a02e", "url": "https://github.com/google/ground-android/commit/e82dc04c37268bbd8242ee91628539a3b236a02e", "message": "Merge branch 'master' into active-project", "committedDate": "2020-02-24T18:40:00Z", "type": "commit"}, {"oid": "6da192bd5879044d31b7fa3d7353b9e1c03f1749", "url": "https://github.com/google/ground-android/commit/6da192bd5879044d31b7fa3d7353b9e1c03f1749", "message": "Display only joined projects in nav drawer", "committedDate": "2020-02-24T19:57:34Z", "type": "commit"}, {"oid": "8ea89549a4376de6ca1db9455826439be1b36848", "url": "https://github.com/google/ground-android/commit/8ea89549a4376de6ca1db9455826439be1b36848", "message": "Merge branch 'master' into active-project", "committedDate": "2020-02-25T05:47:55Z", "type": "commit"}, {"oid": "d8147d0e9c3686ee5f89638422ffb015daee7773", "url": "https://github.com/google/ground-android/commit/d8147d0e9c3686ee5f89638422ffb015daee7773", "message": "Re-arrange join project nav item", "committedDate": "2020-02-25T18:37:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1MzgxOA==", "url": "https://github.com/google/ground-android/pull/379#discussion_r384053818", "bodyText": "We call these \"local\" here, and \"saved\" above.  Is there a more consistent name we can use? From the user's perspective, they will \"join/leave\" a project, which will store them locally for offline use, and sync them when online. Maybe \"offline projects\" would be clear?", "author": "gino-m", "createdAt": "2020-02-25T18:45:40Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/HomeScreenFragment.java", "diffHunk": "@@ -424,7 +427,7 @@ public boolean onBack() {\n   @Override\n   public boolean onNavigationItemSelected(@NonNull MenuItem item) {\n     if (item.getGroupId() == R.id.group_join_project) {\n-      projectSelectorViewModel.activateProject(item.getOrder());\n+      projectSelectorViewModel.activateLocalProject(item.getOrder());", "originalCommit": "6da192bd5879044d31b7fa3d7353b9e1c03f1749", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA1NDgzOQ==", "url": "https://github.com/google/ground-android/pull/379#discussion_r384054839", "bodyText": "getOfflineProjectsOnceAndStream(), as per https://github.com/google/ground-android/wiki/RxJava-Usage-Guidelines#observable-and-flowable", "author": "gino-m", "createdAt": "2020-02-25T18:47:23Z", "path": "gnd/src/main/java/com/google/android/gnd/repository/ProjectRepository.java", "diffHunk": "@@ -131,6 +131,10 @@ public void activateProject(String projectId) {\n         .compose(Loadable::loadingOnceAndWrap);\n   }\n \n+  public Flowable<Loadable<List<Project>>> getSavedProjects() {", "originalCommit": "6da192bd5879044d31b7fa3d7353b9e1c03f1749", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a4b7e767956744f7f41cb78a1baf334ae3cd8a45", "url": "https://github.com/google/ground-android/commit/a4b7e767956744f7f41cb78a1baf334ae3cd8a45", "message": "Merge branch 'master' into active-project", "committedDate": "2020-02-27T17:20:42Z", "type": "commit"}, {"oid": "1255b616164bf6f86022ded9a205fc48fb34fc5e", "url": "https://github.com/google/ground-android/commit/1255b616164bf6f86022ded9a205fc48fb34fc5e", "message": "Better method names", "committedDate": "2020-02-27T17:24:29Z", "type": "commit"}, {"oid": "decb6b66bced7a61cd754f2626f1ae1383d0f63c", "url": "https://github.com/google/ground-android/commit/decb6b66bced7a61cd754f2626f1ae1383d0f63c", "message": "Update remaining references", "committedDate": "2020-02-27T17:26:26Z", "type": "commit"}, {"oid": "f239e5fb44bb901dbd19e16ff3aa9f1ee1303aa6", "url": "https://github.com/google/ground-android/commit/f239e5fb44bb901dbd19e16ff3aa9f1ee1303aa6", "message": "Consolidate duplicate strings", "committedDate": "2020-02-27T17:40:02Z", "type": "commit"}, {"oid": "15724d453ccbdd8efd5e42e3ad1e9cbec92e69e4", "url": "https://github.com/google/ground-android/commit/15724d453ccbdd8efd5e42e3ad1e9cbec92e69e4", "message": "Merge branch 'master' into active-project", "committedDate": "2020-03-05T17:59:59Z", "type": "commit"}, {"oid": "a208b2da875c81a4850afb0883e814cf39d23cda", "url": "https://github.com/google/ground-android/commit/a208b2da875c81a4850afb0883e814cf39d23cda", "message": "Update nav drawer on activating a project", "committedDate": "2020-03-11T13:26:08Z", "type": "commit"}, {"oid": "93b8709ef048e92209d30538245a709460549aeb", "url": "https://github.com/google/ground-android/commit/93b8709ef048e92209d30538245a709460549aeb", "message": "Add separator to nav menu and update string", "committedDate": "2020-03-11T13:37:38Z", "type": "commit"}, {"oid": "4fe488c5a1998906799aa125365802a2a96b96f1", "url": "https://github.com/google/ground-android/commit/4fe488c5a1998906799aa125365802a2a96b96f1", "message": "Add missing fullstop", "committedDate": "2020-03-11T13:44:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk4MzMzNQ==", "url": "https://github.com/google/ground-android/pull/379#discussion_r390983335", "bodyText": "If the project is not yet activated, value() will return null here. Instead, you can replace the  activeProject null check with Loadable.getValue(activeProject) to cover both cases (i.e. Loadable.getValue(activeProject).ifPresent(p => updateSelectedProjectUI(getSelectedProjectIndex(p)));)", "author": "gino-m", "createdAt": "2020-03-11T13:50:32Z", "path": "gnd/src/main/java/com/google/android/gnd/ui/home/HomeScreenFragment.java", "diffHunk": "@@ -210,6 +204,13 @@ private void addProjectToNavDrawer(List<Project> projects) {\n           .add(R.id.group_join_project, Menu.NONE, index, projects.get(index).getTitle())\n           .setIcon(R.drawable.ic_menu_project);\n     }\n+\n+    // Highlight active project\n+    Loadable<Project> activeProject = viewModel.getActiveProject().getValue();\n+    if (activeProject != null) {\n+      int index = getSelectedProjectIndex(activeProject.value().get());", "originalCommit": "93b8709ef048e92209d30538245a709460549aeb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dfb5cebb3b376b76865792c870e823653069a6a2", "url": "https://github.com/google/ground-android/commit/dfb5cebb3b376b76865792c870e823653069a6a2", "message": "Replace null check with cleaner implementation", "committedDate": "2020-03-11T14:00:12Z", "type": "commit"}]}