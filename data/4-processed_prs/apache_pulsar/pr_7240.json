{"pr_number": 7240, "pr_title": "Add tests and documentation for subscribing to non-persistent with topic pattern", "pr_createdAt": "2020-06-11T07:52:41Z", "pr_url": "https://github.com/apache/pulsar/pull/7240", "timeline": [{"oid": "2b5ec3fd495d27f7de6b3a18cdf5a70cf984f7cb", "url": "https://github.com/apache/pulsar/commit/2b5ec3fd495d27f7de6b3a18cdf5a70cf984f7cb", "message": "Add tests and documentation for subscribe to non-persistent with topic pattern .", "committedDate": "2020-06-11T07:50:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY5NjQ1OA==", "url": "https://github.com/apache/pulsar/pull/7240#discussion_r438696458", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            > Note:\n          \n          \n            \n            > \n          \n          \n            \n            > By default, the `subscriptionTopicsMode` of the consumer is `PersistentOnly`. Available options are `PersistentOnly`, `NonPersistentOnly` and `AllTopics`\n          \n          \n            \n            > #### Note\n          \n          \n            \n            > \n          \n          \n            \n            > By default, the `subscriptionTopicsMode` of the consumer is `PersistentOnly`. Available options of `subscriptionTopicsMode` are `PersistentOnly`, `NonPersistentOnly`, and `AllTopics`.", "author": "Anonymitaet", "createdAt": "2020-06-11T10:41:09Z", "path": "site2/docs/client-libraries-java.md", "diffHunk": "@@ -379,18 +379,35 @@ ConsumerBuilder consumerBuilder = pulsarClient.newConsumer()\n         .subscriptionName(subscription);\n \n // Subscribe to all topics in a namespace\n-Pattern allTopicsInNamespace = Pattern.compile(\"persistent://public/default/.*\");\n+Pattern allTopicsInNamespace = Pattern.compile(\"public/default/.*\");\n Consumer allTopicsConsumer = consumerBuilder\n         .topicsPattern(allTopicsInNamespace)\n         .subscribe();\n \n // Subscribe to a subsets of topics in a namespace, based on regex\n-Pattern someTopicsInNamespace = Pattern.compile(\"persistent://public/default/foo.*\");\n+Pattern someTopicsInNamespace = Pattern.compile(\"public/default/foo.*\");\n Consumer allTopicsConsumer = consumerBuilder\n         .topicsPattern(someTopicsInNamespace)\n         .subscribe();\n ```\n \n+In the above example, the consumer subscribes to the `persistent` topics that can match the topic name pattern,\n+If you want the consumer subscribes to all `persistent` and `non-persistent` topics that can match the topic pattern,\n+You need to set `subscriptionTopicsMode` to `RegexSubscriptionMode.AllTopics`.\n+\n+```java\n+Pattern pattern = Pattern.compile(\"public/default/.*\");\n+pulsarClient.newConsumer()\n+        .subscriptionName(\"my-sub\")\n+        .topicsPattern(pattern)\n+        .subscriptionTopicsMode(RegexSubscriptionMode.AllTopics)\n+        .subscribe();\n+```\n+\n+> Note:\n+> \n+> By default, the `subscriptionTopicsMode` of the consumer is `PersistentOnly`. Available options are `PersistentOnly`, `NonPersistentOnly` and `AllTopics`", "originalCommit": "2b5ec3fd495d27f7de6b3a18cdf5a70cf984f7cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODY5NzAzMw==", "url": "https://github.com/apache/pulsar/pull/7240#discussion_r438697033", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In the above example, the consumer subscribes to the `persistent` topics that can match the topic name pattern,\n          \n          \n            \n            If you want the consumer subscribes to all `persistent` and `non-persistent` topics that can match the topic pattern,\n          \n          \n            \n            You need to set `subscriptionTopicsMode` to `RegexSubscriptionMode.AllTopics`.\n          \n          \n            \n            In the above example, the consumer subscribes to the `persistent` topics that can match the topic name pattern. If you want the consumer subscribes to all `persistent` and `non-persistent` topics that can match the topic name pattern, set `subscriptionTopicsMode` to `RegexSubscriptionMode.AllTopics`.", "author": "Anonymitaet", "createdAt": "2020-06-11T10:42:21Z", "path": "site2/docs/client-libraries-java.md", "diffHunk": "@@ -379,18 +379,35 @@ ConsumerBuilder consumerBuilder = pulsarClient.newConsumer()\n         .subscriptionName(subscription);\n \n // Subscribe to all topics in a namespace\n-Pattern allTopicsInNamespace = Pattern.compile(\"persistent://public/default/.*\");\n+Pattern allTopicsInNamespace = Pattern.compile(\"public/default/.*\");\n Consumer allTopicsConsumer = consumerBuilder\n         .topicsPattern(allTopicsInNamespace)\n         .subscribe();\n \n // Subscribe to a subsets of topics in a namespace, based on regex\n-Pattern someTopicsInNamespace = Pattern.compile(\"persistent://public/default/foo.*\");\n+Pattern someTopicsInNamespace = Pattern.compile(\"public/default/foo.*\");\n Consumer allTopicsConsumer = consumerBuilder\n         .topicsPattern(someTopicsInNamespace)\n         .subscribe();\n ```\n \n+In the above example, the consumer subscribes to the `persistent` topics that can match the topic name pattern,\n+If you want the consumer subscribes to all `persistent` and `non-persistent` topics that can match the topic pattern,\n+You need to set `subscriptionTopicsMode` to `RegexSubscriptionMode.AllTopics`.", "originalCommit": "2b5ec3fd495d27f7de6b3a18cdf5a70cf984f7cb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5c538623f3c255613dec8bc0c98c2cecabfd8d81", "url": "https://github.com/apache/pulsar/commit/5c538623f3c255613dec8bc0c98c2cecabfd8d81", "message": "Update site2/docs/client-libraries-java.md\n\nCo-authored-by: Yu Liu <50226895+Anonymitaet@users.noreply.github.com>", "committedDate": "2020-06-11T13:48:05Z", "type": "commit"}, {"oid": "f6cd1f066bcd7b41cbd54a0e9cfc4d1d2276517e", "url": "https://github.com/apache/pulsar/commit/f6cd1f066bcd7b41cbd54a0e9cfc4d1d2276517e", "message": "Update site2/docs/client-libraries-java.md\n\nCo-authored-by: Yu Liu <50226895+Anonymitaet@users.noreply.github.com>", "committedDate": "2020-06-11T13:48:17Z", "type": "commit"}]}