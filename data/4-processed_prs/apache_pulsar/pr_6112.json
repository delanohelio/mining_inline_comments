{"pr_number": 6112, "pr_title": "[Issue 6111][Doc] Add documentation for Debezium Mongodb connector", "pr_createdAt": "2020-01-21T08:10:11Z", "pr_url": "https://github.com/apache/pulsar/pull/6112", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ1OTQ2NQ==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369459465", "bodyText": "why do you change this id? This is going to mess up all the documentation links. I would prefer not changing any doc id.", "author": "sijie", "createdAt": "2020-01-22T09:49:43Z", "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -1,14 +1,15 @@\n ---\n-id: io-debezium-source\n-title: Debezium source onnector\n+id: io-cdc-debezium", "originalCommit": "612de2704392568569f6f0fca58fbd84724ad992", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTA4Nzk1NQ==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r375087955", "bodyText": "I'll  fix it.", "author": "huangdx0726", "createdAt": "2020-02-05T07:06:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ1OTQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2MTkyMA==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r376861920", "bodyText": "I have fixed it,PTAL.", "author": "huangdx0726", "createdAt": "2020-02-10T04:11:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ1OTQ2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ2MDI1Mw==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369460253", "bodyText": "if these settings are only used for mongodb, please a subsection under documentation for mongodb specific settings.\n### MongoDB Configuration\n\n| `mongodb.hosts` | true | null | The comma-separated list of hostname and port pairs (in the form 'host' or 'host:port') of the MongoDB servers in the replica set. The list contains a single hostname and a port pair. If mongodb.members.auto.discover is set to false, the host and port pair are prefixed with the replica set name (e.g., rs0/localhost:27017). |", "author": "sijie", "createdAt": "2020-01-22T09:51:10Z", "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -27,6 +28,13 @@ The configuration of the Debezium source connector has the following properties.\n | `database.history.pulsar.service.url` | true | null | Pulsar cluster service URL for history topic. |\n | `pulsar.service.url` | true | null | Pulsar cluster service URL. |\n | `offset.storage.topic` | true | null | Record the last committed offsets that the connector successfully completes. |\n+| `mongodb.hosts` | true | null | The comma-separated list of hostname and port pairs (in the form 'host' or 'host:port') of the MongoDB servers in the replica set. The list contains a single hostname and a port pair. If mongodb.members.auto.discover is set to false, the host and port pair are prefixed with the replica set name (e.g., rs0/localhost:27017). |", "originalCommit": "612de2704392568569f6f0fca58fbd84724ad992", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njg2MTg3OQ==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r376861879", "bodyText": "I have fixed it,PTAL.", "author": "huangdx0726", "createdAt": "2020-02-10T04:10:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ2MDI1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTQ2MDUyNQ==", "url": "https://github.com/apache/pulsar/pull/6112#discussion_r369460525", "bodyText": "This comment should be updated to mongodb.", "author": "sijie", "createdAt": "2020-01-22T09:51:45Z", "path": "site2/docs/io-debezium-source.md", "diffHunk": "@@ -304,7 +312,124 @@ This example shows how to change the data of a PostgreSQL table using the Pulsar\n     ----- got message -----\n     {\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"}],\"optional\":false,\"name\":\"dbserver1.inventory.products.Key\"},\"payload\":{\"id\":107}}\ufffd{\"schema\":{\"type\":\"struct\",\"fields\":[{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":true,\"field\":\"description\"},{\"type\":\"double\",\"optional\":true,\"field\":\"weight\"}],\"optional\":true,\"name\":\"dbserver1.inventory.products.Value\",\"field\":\"before\"},{\"type\":\"struct\",\"fields\":[{\"type\":\"int32\",\"optional\":false,\"field\":\"id\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":true,\"field\":\"description\"},{\"type\":\"double\",\"optional\":true,\"field\":\"weight\"}],\"optional\":true,\"name\":\"dbserver1.inventory.products.Value\",\"field\":\"after\"},{\"type\":\"struct\",\"fields\":[{\"type\":\"string\",\"optional\":true,\"field\":\"version\"},{\"type\":\"string\",\"optional\":true,\"field\":\"connector\"},{\"type\":\"string\",\"optional\":false,\"field\":\"name\"},{\"type\":\"string\",\"optional\":false,\"field\":\"db\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"ts_usec\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"txId\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"lsn\"},{\"type\":\"string\",\"optional\":true,\"field\":\"schema\"},{\"type\":\"string\",\"optional\":true,\"field\":\"table\"},{\"type\":\"boolean\",\"optional\":true,\"default\":false,\"field\":\"snapshot\"},{\"type\":\"boolean\",\"optional\":true,\"field\":\"last_snapshot_record\"}],\"optional\":false,\"name\":\"io.debezium.connector.postgresql.Source\",\"field\":\"source\"},{\"type\":\"string\",\"optional\":false,\"field\":\"op\"},{\"type\":\"int64\",\"optional\":true,\"field\":\"ts_ms\"}],\"optional\":false,\"name\":\"dbserver1.inventory.products.Envelope\"},\"payload\":{\"before\":{\"id\":107,\"name\":\"rocks\",\"description\":\"box of assorted rocks\",\"weight\":5.3},\"after\":{\"id\":107,\"name\":\"1111111111\",\"description\":\"box of assorted rocks\",\"weight\":5.3},\"source\":{\"version\":\"0.9.2.Final\",\"connector\":\"postgresql\",\"name\":\"dbserver1\",\"db\":\"postgres\",\"ts_usec\":1559208957661080,\"txId\":577,\"lsn\":23862872,\"schema\":\"inventory\",\"table\":\"products\",\"snapshot\":false,\"last_snapshot_record\":null},\"op\":\"u\",\"ts_ms\":1559208957692}}\n     ```\n+## Example of MongoDB\n+\n+You need to create a configuration file before using the Pulsar Debezium connector.\n+\n+* JSON \n+\n+    ```json\n+    {\n+        \"mongodb.hosts\": \"rs0/mongodb:27017\",\n+        \"mongodb.name\": \"dbserver1\",\n+        \"mongodb.user\": \"debezium\",\n+        \"mongodb.password\": \"dbz\",\n+        \"mongodb.task.id\": \"1\",\n+        \"database.whitelist\": \"inventory\",\n+        \"pulsar.service.url\": \"pulsar://127.0.0.1:6650\"\n+    }\n+    ```\n+\n+* YAML \n+\n+    You can create a `debezium-mongodb-source-config.yaml` file and copy the [contents](https://github.com/apache/pulsar/blob/master/pulsar-io/debezium/mongodb/src/main/resources/debezium-mongodb-source-config.yaml) below to the `debezium-mongodb-source-config.yaml` file.\n+\n+    ```yaml\n+    tenant: \"public\"\n+    namespace: \"default\"\n+    name: \"debezium-mongodb-source\"\n+    topicName: \"debezium-mongodb-topic\"\n+    archive: \"connectors/pulsar-io-debezium-mongodb-{{pulsar:version}}.nar\"\n+    parallelism: 1\n+\n+    configs:\n+\n+        ## config for pg, docker image: debezium/example-postgress:0.10", "originalCommit": "612de2704392568569f6f0fca58fbd84724ad992", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5cdf11cdd2521e3236ea71019370517ba774c380", "url": "https://github.com/apache/pulsar/commit/5cdf11cdd2521e3236ea71019370517ba774c380", "message": "fix 6111", "committedDate": "2020-02-10T04:09:19Z", "type": "commit"}, {"oid": "e2d604e13910b1ce9e3bb257c2ba0321674ada66", "url": "https://github.com/apache/pulsar/commit/e2d604e13910b1ce9e3bb257c2ba0321674ada66", "message": "fix 6111", "committedDate": "2020-02-10T04:09:19Z", "type": "commit"}, {"oid": "e2d604e13910b1ce9e3bb257c2ba0321674ada66", "url": "https://github.com/apache/pulsar/commit/e2d604e13910b1ce9e3bb257c2ba0321674ada66", "message": "fix 6111", "committedDate": "2020-02-10T04:09:19Z", "type": "forcePushed"}, {"oid": "7930d608fb9b5f09514c6e7d6e21e70659e3e153", "url": "https://github.com/apache/pulsar/commit/7930d608fb9b5f09514c6e7d6e21e70659e3e153", "message": "fix 6111", "committedDate": "2020-02-10T08:10:10Z", "type": "commit"}]}