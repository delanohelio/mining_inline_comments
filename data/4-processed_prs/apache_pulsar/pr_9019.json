{"pr_number": 9019, "pr_title": "Allow Pulsar to use BookieID instead of Bookie Network Addresses (Update BK to 4.12.1)", "pr_createdAt": "2020-12-21T10:51:23Z", "pr_url": "https://github.com/apache/pulsar/pull/9019", "timeline": [{"oid": "93e06415cc08932c271939edaac57fb7b198c802", "url": "https://github.com/apache/pulsar/commit/93e06415cc08932c271939edaac57fb7b198c802", "message": "Allow Pulsar to use BookieID", "committedDate": "2020-12-28T09:11:15Z", "type": "commit"}, {"oid": "a2494d4edeac0af6e38c1b684cbbb868db984acf", "url": "https://github.com/apache/pulsar/commit/a2494d4edeac0af6e38c1b684cbbb868db984acf", "message": "use BookieAddressResolver", "committedDate": "2020-12-28T09:11:15Z", "type": "commit"}, {"oid": "a08041092e2f3b1c746b335331c1d19b1e29947e", "url": "https://github.com/apache/pulsar/commit/a08041092e2f3b1c746b335331c1d19b1e29947e", "message": "fix tests", "committedDate": "2020-12-28T09:11:15Z", "type": "commit"}, {"oid": "2cf106356b383975d56523888f8076eb7f7dd93b", "url": "https://github.com/apache/pulsar/commit/2cf106356b383975d56523888f8076eb7f7dd93b", "message": "add configuration file examples", "committedDate": "2020-12-28T09:11:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDcwNTY0OA==", "url": "https://github.com/apache/pulsar/pull/9019#discussion_r554705648", "bodyText": "We need clear documentation on how to use this and what is the path for migrating the existing cluster to use BookieId.", "author": "sijie", "createdAt": "2021-01-11T04:31:53Z", "path": "conf/bookkeeper.conf", "diffHunk": "@@ -23,6 +23,10 @@\n ## Server parameters\n #############################################################################\n \n+# Bookie identifier, by default it is computed using the advertised bookies address\n+# This value cannot be changed once the bookie is started for the first time\n+#bookieId=", "originalCommit": "2cf106356b383975d56523888f8076eb7f7dd93b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTA0NDkwMw==", "url": "https://github.com/apache/pulsar/pull/9019#discussion_r555044903", "bodyText": "sure, let's remove this line for the scope of this patch", "author": "eolivelli", "createdAt": "2021-01-11T13:27:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NDcwNTY0OA=="}], "type": "inlineReview"}, {"oid": "ac562d102ed542f669c73ead00ef7f4a344d5596", "url": "https://github.com/apache/pulsar/commit/ac562d102ed542f669c73ead00ef7f4a344d5596", "message": "Use BookKeeper 4.12.1", "committedDate": "2021-01-11T13:26:19Z", "type": "commit"}, {"oid": "ac562d102ed542f669c73ead00ef7f4a344d5596", "url": "https://github.com/apache/pulsar/commit/ac562d102ed542f669c73ead00ef7f4a344d5596", "message": "Use BookKeeper 4.12.1", "committedDate": "2021-01-11T13:26:19Z", "type": "forcePushed"}, {"oid": "a665f81dfed5650a055786cf01fc8911c4e1f663", "url": "https://github.com/apache/pulsar/commit/a665f81dfed5650a055786cf01fc8911c4e1f663", "message": "Fix LICENSE files", "committedDate": "2021-01-11T13:32:37Z", "type": "commit"}, {"oid": "6e23a8b707b292571bff30a55610ce507245aa5f", "url": "https://github.com/apache/pulsar/commit/6e23a8b707b292571bff30a55610ce507245aa5f", "message": "Fix license", "committedDate": "2021-01-11T14:44:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU2MTEyNQ==", "url": "https://github.com/apache/pulsar/pull/9019#discussion_r555561125", "bodyText": "@eolivelli thank you for your contribution.\nI was wondering do we have a way to keep it as a variable, so it will be changed with the bk release automatically in the future. Otherwise, we might need to manually update the versions.", "author": "Jennifer88huang", "createdAt": "2021-01-12T07:27:33Z", "path": "distribution/server/src/assemble/LICENSE.bin.txt", "diffHunk": "@@ -395,32 +395,32 @@ The Apache Software License, Version 2.0\n     - org.apache.logging.log4j-log4j-1.2-api-2.14.0.jar\n  * Java Native Access JNA -- net.java.dev.jna-jna-4.2.0.jar\n  * BookKeeper\n-    - org.apache.bookkeeper-bookkeeper-common-4.12.0.jar\n-    - org.apache.bookkeeper-bookkeeper-common-allocator-4.12.0.jar\n-    - org.apache.bookkeeper-bookkeeper-proto-4.12.0.jar\n-    - org.apache.bookkeeper-bookkeeper-server-4.12.0.jar\n-    - org.apache.bookkeeper-bookkeeper-tools-framework-4.12.0.jar\n-    - org.apache.bookkeeper-circe-checksum-4.12.0.jar\n-    - org.apache.bookkeeper-cpu-affinity-4.12.0.jar\n-    - org.apache.bookkeeper-statelib-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-api-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-common-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-java-client-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-java-client-base-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-proto-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-server-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-service-api-4.12.0.jar\n-    - org.apache.bookkeeper-stream-storage-service-impl-4.12.0.jar\n-    - org.apache.bookkeeper.http-http-server-4.12.0.jar\n-    - org.apache.bookkeeper.http-vertx-http-server-4.12.0.jar\n-    - org.apache.bookkeeper.stats-bookkeeper-stats-api-4.12.0.jar\n-    - org.apache.bookkeeper.stats-prometheus-metrics-provider-4.12.0.jar\n-    - org.apache.bookkeeper.tests-stream-storage-tests-common-4.12.0.jar\n-    - org.apache.distributedlog-distributedlog-common-4.12.0.jar\n-    - org.apache.distributedlog-distributedlog-core-4.12.0-tests.jar\n-    - org.apache.distributedlog-distributedlog-core-4.12.0.jar\n-    - org.apache.distributedlog-distributedlog-protocol-4.12.0.jar\n-    - org.apache.bookkeeper.stats-codahale-metrics-provider-4.12.0.jar\n+    - org.apache.bookkeeper-bookkeeper-common-4.12.1.jar\n+    - org.apache.bookkeeper-bookkeeper-common-allocator-4.12.1.jar\n+    - org.apache.bookkeeper-bookkeeper-proto-4.12.1.jar\n+    - org.apache.bookkeeper-bookkeeper-server-4.12.1.jar\n+    - org.apache.bookkeeper-bookkeeper-tools-framework-4.12.1.jar\n+    - org.apache.bookkeeper-circe-checksum-4.12.1.jar\n+    - org.apache.bookkeeper-cpu-affinity-4.12.1.jar\n+    - org.apache.bookkeeper-statelib-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-api-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-common-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-java-client-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-java-client-base-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-proto-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-server-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-service-api-4.12.1.jar\n+    - org.apache.bookkeeper-stream-storage-service-impl-4.12.1.jar\n+    - org.apache.bookkeeper.http-http-server-4.12.1.jar\n+    - org.apache.bookkeeper.http-vertx-http-server-4.12.1.jar\n+    - org.apache.bookkeeper.stats-bookkeeper-stats-api-4.12.1.jar\n+    - org.apache.bookkeeper.stats-prometheus-metrics-provider-4.12.1.jar\n+    - org.apache.bookkeeper.tests-stream-storage-tests-common-4.12.1.jar\n+    - org.apache.distributedlog-distributedlog-common-4.12.1.jar\n+    - org.apache.distributedlog-distributedlog-core-4.12.1-tests.jar\n+    - org.apache.distributedlog-distributedlog-core-4.12.1.jar\n+    - org.apache.distributedlog-distributedlog-protocol-4.12.1.jar\n+    - org.apache.bookkeeper.stats-codahale-metrics-provider-4.12.1.jar", "originalCommit": "6e23a8b707b292571bff30a55610ce507245aa5f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU2MzEyOA==", "url": "https://github.com/apache/pulsar/pull/9019#discussion_r555563128", "bodyText": "this approach could be feasible, but we should do it for all of the dependencies,\ncurrently we have this manual approach\nand personally I am in favour of having something to do manually in this case\nbecause you are required to validate manually the updates to third party dependencies.\nwe could create a new task in order to automate the generation of this file", "author": "eolivelli", "createdAt": "2021-01-12T07:32:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU2MTEyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NTU2MTI2MA==", "url": "https://github.com/apache/pulsar/pull/9019#discussion_r555561260", "bodyText": "same concern here.", "author": "Jennifer88huang", "createdAt": "2021-01-12T07:27:56Z", "path": "distribution/server/src/assemble/LICENSE.bin.txt", "diffHunk": "@@ -476,9 +476,9 @@ The Apache Software License, Version 2.0\n     - org.apache.avro-avro-1.9.1.jar\n     - org.apache.avro-avro-protobuf-1.9.1.jar\n   * Apache Curator\n-    - org.apache.curator-curator-client-4.0.1.jar\n-    - org.apache.curator-curator-framework-4.0.1.jar\n-    - org.apache.curator-curator-recipes-4.0.1.jar\n+    - org.apache.curator-curator-client-5.1.0.jar\n+    - org.apache.curator-curator-framework-5.1.0.jar\n+    - org.apache.curator-curator-recipes-5.1.0.jar", "originalCommit": "6e23a8b707b292571bff30a55610ce507245aa5f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3bc811b61ee76b355f52ed9a7dd4ee87640d1a14", "url": "https://github.com/apache/pulsar/commit/3bc811b61ee76b355f52ed9a7dd4ee87640d1a14", "message": "Fix test", "committedDate": "2021-01-12T07:36:30Z", "type": "commit"}]}