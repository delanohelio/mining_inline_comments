{"pr_number": 8392, "pr_title": "Try to fix flaky test in the InactiveTopicDeleteTest.java", "pr_createdAt": "2020-10-27T16:44:39Z", "pr_url": "https://github.com/apache/pulsar/pull/8392", "timeline": [{"oid": "b33d1233be3d6ffd0922c9ddb562c166bafabce6", "url": "https://github.com/apache/pulsar/commit/b33d1233be3d6ffd0922c9ddb562c166bafabce6", "message": "fix unit test", "committedDate": "2020-10-27T16:36:27Z", "type": "commit"}, {"oid": "e1e6bc4184776702e1712f3bde19b9877718a574", "url": "https://github.com/apache/pulsar/commit/e1e6bc4184776702e1712f3bde19b9877718a574", "message": "Comment out some code first to see the real cause of the error", "committedDate": "2020-10-27T17:38:16Z", "type": "commit"}, {"oid": "bb76379f5ddd2241a28797961e4a17600e961b4b", "url": "https://github.com/apache/pulsar/commit/bb76379f5ddd2241a28797961e4a17600e961b4b", "message": "Comment out some code first to see the real cause of the error", "committedDate": "2020-10-27T17:45:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyNjI2Nw==", "url": "https://github.com/apache/pulsar/pull/8392#discussion_r512926267", "bodyText": "Can we find a better solution here rather than Thread.sleep?", "author": "sijie", "createdAt": "2020-10-27T18:18:22Z", "path": "pulsar-broker/src/test/java/org/apache/pulsar/broker/service/InactiveTopicDeleteTest.java", "diffHunk": "@@ -303,10 +303,10 @@ public void testTopicLevelInActiveTopicApi() throws Exception {\n         conf.setSystemTopicEnabled(true);\n         conf.setTopicLevelPoliciesEnabled(true);\n         super.baseSetup();\n-        //wait for init\n-        Thread.sleep(2000);\n         final String topicName = \"persistent://prop/ns-abc/testMaxInactiveDuration-\" + UUID.randomUUID().toString();\n         admin.topics().createPartitionedTopic(topicName, 3);\n+        //wait for init\n+        Thread.sleep(3000);", "originalCommit": "bb76379f5ddd2241a28797961e4a17600e961b4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzE0MTU0Mw==", "url": "https://github.com/apache/pulsar/pull/8392#discussion_r513141543", "bodyText": "I added an api to determine whether the cache is initialized", "author": "315157973", "createdAt": "2020-10-28T02:26:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjkyNjI2Nw=="}], "type": "inlineReview"}, {"oid": "98bb47d076a5d4349591cb55ea3a4b629c350616", "url": "https://github.com/apache/pulsar/commit/98bb47d076a5d4349591cb55ea3a4b629c350616", "message": "code style", "committedDate": "2020-10-28T00:17:54Z", "type": "commit"}, {"oid": "bdc0385d15abc54b9cf2399e9deacd0f13a4772d", "url": "https://github.com/apache/pulsar/commit/bdc0385d15abc54b9cf2399e9deacd0f13a4772d", "message": "fix unit test", "committedDate": "2020-10-28T00:26:08Z", "type": "commit"}, {"oid": "09fc8006d5602aab473624d83710a1c2bfeb7855", "url": "https://github.com/apache/pulsar/commit/09fc8006d5602aab473624d83710a1c2bfeb7855", "message": "Re-trigger CI", "committedDate": "2020-10-28T00:42:06Z", "type": "commit"}, {"oid": "c6bd4c889978927b46c4b2630e440c25339f73d7", "url": "https://github.com/apache/pulsar/commit/c6bd4c889978927b46c4b2630e440c25339f73d7", "message": "Determine whether the cache has been initialized", "committedDate": "2020-10-28T00:54:16Z", "type": "commit"}, {"oid": "aff89472b203c3b4107f852299c10701aa0a5c6d", "url": "https://github.com/apache/pulsar/commit/aff89472b203c3b4107f852299c10701aa0a5c6d", "message": "add wait for cache", "committedDate": "2020-10-28T02:28:28Z", "type": "commit"}, {"oid": "92499830e32632e9e2f0a3759277acc28d247ff0", "url": "https://github.com/apache/pulsar/commit/92499830e32632e9e2f0a3759277acc28d247ff0", "message": "code style", "committedDate": "2020-10-28T02:29:44Z", "type": "commit"}, {"oid": "85053d418057fbc177b314753c140f14eead814a", "url": "https://github.com/apache/pulsar/commit/85053d418057fbc177b314753c140f14eead814a", "message": "fix duplicate unit test", "committedDate": "2020-10-28T03:28:39Z", "type": "commit"}]}