{"pr_number": 7603, "pr_title": "Migrate github actions to use container images", "pr_createdAt": "2020-07-20T05:56:58Z", "pr_url": "https://github.com/apache/pulsar/pull/7603", "timeline": [{"oid": "df7e197d9bc03320de20c8f825bcbcd16a807b62", "url": "https://github.com/apache/pulsar/commit/df7e197d9bc03320de20c8f825bcbcd16a807b62", "message": "Gihub CI EXP\nt pusq:", "committedDate": "2020-07-20T05:59:35Z", "type": "forcePushed"}, {"oid": "22385c40fe4eb5c49fbc41cf7e61dbbdd737168b", "url": "https://github.com/apache/pulsar/commit/22385c40fe4eb5c49fbc41cf7e61dbbdd737168b", "message": "Gihub CI EXP", "committedDate": "2020-07-20T06:20:07Z", "type": "forcePushed"}, {"oid": "a31b9cd55277e3de58e3ed9521ca2703bed0fa66", "url": "https://github.com/apache/pulsar/commit/a31b9cd55277e3de58e3ed9521ca2703bed0fa66", "message": "Gihub CI EXP", "committedDate": "2020-07-20T06:31:35Z", "type": "forcePushed"}, {"oid": "bf40e42fad919bd4d33be2fbd58f47340ef287c7", "url": "https://github.com/apache/pulsar/commit/bf40e42fad919bd4d33be2fbd58f47340ef287c7", "message": "Gihub CI EXP", "committedDate": "2020-07-20T06:34:52Z", "type": "forcePushed"}, {"oid": "60db5b018d901326540466fc6a12607876cca36f", "url": "https://github.com/apache/pulsar/commit/60db5b018d901326540466fc6a12607876cca36f", "message": "Gihub CI EXP", "committedDate": "2020-07-20T06:36:29Z", "type": "forcePushed"}, {"oid": "782229bb6934111d60e1099cc8975e3c16c70e1c", "url": "https://github.com/apache/pulsar/commit/782229bb6934111d60e1099cc8975e3c16c70e1c", "message": "Gihub CI EXP", "committedDate": "2020-07-20T07:10:20Z", "type": "forcePushed"}, {"oid": "8b3c316a548cb2b4d5fb5603e4eac311b823530c", "url": "https://github.com/apache/pulsar/commit/8b3c316a548cb2b4d5fb5603e4eac311b823530c", "message": "Gihub CI EXP", "committedDate": "2020-07-20T09:20:59Z", "type": "forcePushed"}, {"oid": "2a16d6ca3e841bd882d6d6feb150ab168ea76c50", "url": "https://github.com/apache/pulsar/commit/2a16d6ca3e841bd882d6d6feb150ab168ea76c50", "message": "Gihub CI EXP", "committedDate": "2020-07-20T09:26:39Z", "type": "forcePushed"}, {"oid": "76a10f4981530ffab575cfda8b9aa96fb6adc53a", "url": "https://github.com/apache/pulsar/commit/76a10f4981530ffab575cfda8b9aa96fb6adc53a", "message": "Gihub CI EXP", "committedDate": "2020-07-21T01:17:02Z", "type": "forcePushed"}, {"oid": "85f9c92d5c092463234ef306587e4e73f52bf696", "url": "https://github.com/apache/pulsar/commit/85f9c92d5c092463234ef306587e4e73f52bf696", "message": "Gihub CI EXP", "committedDate": "2020-07-21T01:28:54Z", "type": "forcePushed"}, {"oid": "225095fc2831b20851b5a037854bf895f6ffb7ff", "url": "https://github.com/apache/pulsar/commit/225095fc2831b20851b5a037854bf895f6ffb7ff", "message": "Gihub CI EXP", "committedDate": "2020-07-21T02:00:01Z", "type": "forcePushed"}, {"oid": "980583ae018086093849395fb18925796f7f93b6", "url": "https://github.com/apache/pulsar/commit/980583ae018086093849395fb18925796f7f93b6", "message": "Gihub CI EXP", "committedDate": "2020-07-21T02:16:19Z", "type": "forcePushed"}, {"oid": "ca6ae606cacdd44c017880219628492ca3e6bd81", "url": "https://github.com/apache/pulsar/commit/ca6ae606cacdd44c017880219628492ca3e6bd81", "message": "Gihub CI EXP", "committedDate": "2020-07-21T02:48:49Z", "type": "forcePushed"}, {"oid": "2e9dcd719d73e6c01a17addfbb0da120ee965640", "url": "https://github.com/apache/pulsar/commit/2e9dcd719d73e6c01a17addfbb0da120ee965640", "message": "Gihub CI EXP", "committedDate": "2020-07-21T03:14:23Z", "type": "forcePushed"}, {"oid": "077205a42b766af87d18db11e057a7da98be308c", "url": "https://github.com/apache/pulsar/commit/077205a42b766af87d18db11e057a7da98be308c", "message": "Gihub CI EXP", "committedDate": "2020-07-21T03:25:32Z", "type": "forcePushed"}, {"oid": "09769aa99e5059f5803af27155dc12fc0ed33881", "url": "https://github.com/apache/pulsar/commit/09769aa99e5059f5803af27155dc12fc0ed33881", "message": "Gihub CI EXP", "committedDate": "2020-07-21T03:32:18Z", "type": "forcePushed"}, {"oid": "5ba28743060c77e44b2b76bf30eb9052559b5fcf", "url": "https://github.com/apache/pulsar/commit/5ba28743060c77e44b2b76bf30eb9052559b5fcf", "message": "Force executor shutdown in mocks", "committedDate": "2020-07-21T04:53:35Z", "type": "forcePushed"}, {"oid": "98f4f4d92503f4a7f1e441669f8c3f0b1bbaa1d9", "url": "https://github.com/apache/pulsar/commit/98f4f4d92503f4a7f1e441669f8c3f0b1bbaa1d9", "message": "Force executor shutdown in mocks", "committedDate": "2020-07-21T05:40:15Z", "type": "forcePushed"}, {"oid": "2dcd2b6a23767425fbdb25b4bebf2ba214021e60", "url": "https://github.com/apache/pulsar/commit/2dcd2b6a23767425fbdb25b4bebf2ba214021e60", "message": "Force executor shutdown in mocks", "committedDate": "2020-07-21T06:02:46Z", "type": "forcePushed"}, {"oid": "f1768b779533f8901064d1b1dc9c97b4a54f8308", "url": "https://github.com/apache/pulsar/commit/f1768b779533f8901064d1b1dc9c97b4a54f8308", "message": "Update", "committedDate": "2020-07-21T06:55:00Z", "type": "forcePushed"}, {"oid": "75eb22e3af774a10b4d5a9936c69c965edc5bec0", "url": "https://github.com/apache/pulsar/commit/75eb22e3af774a10b4d5a9936c69c965edc5bec0", "message": "Update", "committedDate": "2020-07-21T07:35:47Z", "type": "forcePushed"}, {"oid": "1681987f56ab3cd42127939b5e2b833e511866b6", "url": "https://github.com/apache/pulsar/commit/1681987f56ab3cd42127939b5e2b833e511866b6", "message": "Update", "committedDate": "2020-07-21T07:38:16Z", "type": "forcePushed"}, {"oid": "da8b29d312f6eb64fd6c13056db496804a73e57c", "url": "https://github.com/apache/pulsar/commit/da8b29d312f6eb64fd6c13056db496804a73e57c", "message": "Update", "committedDate": "2020-07-21T08:27:39Z", "type": "forcePushed"}, {"oid": "f4a3b22eb49a04778a456a03287f24505b3fa8f2", "url": "https://github.com/apache/pulsar/commit/f4a3b22eb49a04778a456a03287f24505b3fa8f2", "message": "Update", "committedDate": "2020-07-21T09:28:57Z", "type": "forcePushed"}, {"oid": "714f2d5a854bd0257eeb68ae0be33d1998c26e25", "url": "https://github.com/apache/pulsar/commit/714f2d5a854bd0257eeb68ae0be33d1998c26e25", "message": "Update", "committedDate": "2020-07-21T10:36:23Z", "type": "forcePushed"}, {"oid": "206b3bdf57b6feda53fb28e5e630654fd80098b8", "url": "https://github.com/apache/pulsar/commit/206b3bdf57b6feda53fb28e5e630654fd80098b8", "message": "Update", "committedDate": "2020-07-21T10:46:57Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyOTQ3Nw==", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458329477", "bodyText": "-Pcore-modules", "author": "merlimat", "createdAt": "2020-07-21T19:14:59Z", "path": ".github/workflows/ci-license.yaml", "diffHunk": "@@ -40,27 +42,7 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository\n-        uses: actions/cache@v2\n-        with:\n-          path: ~/.m2/repository\n-          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n-          restore-keys: |\n-            ${{ runner.os }}-maven-\n-\n-      - name: Set up JDK 1.8\n-        uses: actions/setup-java@v1\n-        with:\n-          java-version: 1.8\n-\n-      # license check fails with 3.6.2 so we have to downgrade\n-      - name: Set up Maven\n-        uses: apache/pulsar-test-infra/setup-maven@master\n-        with:\n-          maven-version: 3.6.1\n-\n-      - name: build and check license\n-        run: mvn -B -ntp -DskipTests license:check install\n-          \n       - name: license check\n-        run: src/check-binary-license ./distribution/server/target/apache-pulsar-*-bin.tar.gz\n+        run: |\n+          mvn -B -ntp license:check install -DskipTests", "originalCommit": "206b3bdf57b6feda53fb28e5e630654fd80098b8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ2MjUzMw==", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458462533", "bodyText": "license check applies to all modules so we can't filter", "author": "aahmed-se", "createdAt": "2020-07-22T00:22:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMyOTQ3Nw=="}], "type": "inlineReview"}, {"oid": "ab05ff1ba950a80659634439a6c8e9bd3781d115", "url": "https://github.com/apache/pulsar/commit/ab05ff1ba950a80659634439a6c8e9bd3781d115", "message": "Update", "committedDate": "2020-07-21T23:03:36Z", "type": "forcePushed"}, {"oid": "5e7c4f4c80f8be27f6c7686093480c1e6c811620", "url": "https://github.com/apache/pulsar/commit/5e7c4f4c80f8be27f6c7686093480c1e6c811620", "message": "Fix proxy Test", "committedDate": "2020-07-22T02:27:54Z", "type": "forcePushed"}, {"oid": "901ec9ae0208ad491641e6878c3bbfacf36af4ff", "url": "https://github.com/apache/pulsar/commit/901ec9ae0208ad491641e6878c3bbfacf36af4ff", "message": "Fix Workflows", "committedDate": "2020-07-22T03:04:03Z", "type": "forcePushed"}, {"oid": "7823db6419720718cfdf578c47956af1ec81da0c", "url": "https://github.com/apache/pulsar/commit/7823db6419720718cfdf578c47956af1ec81da0c", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T03:56:41Z", "type": "forcePushed"}, {"oid": "77fc1c7dae13c0824a9a01907a3db8213d375ac3", "url": "https://github.com/apache/pulsar/commit/77fc1c7dae13c0824a9a01907a3db8213d375ac3", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T03:57:57Z", "type": "forcePushed"}, {"oid": "11a972f849fd1498eded81373038d0793f8db3d5", "url": "https://github.com/apache/pulsar/commit/11a972f849fd1498eded81373038d0793f8db3d5", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T04:14:33Z", "type": "forcePushed"}, {"oid": "1fc7ef7d6a51e92eebe296d50331ae994eba24d9", "url": "https://github.com/apache/pulsar/commit/1fc7ef7d6a51e92eebe296d50331ae994eba24d9", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T04:15:53Z", "type": "forcePushed"}, {"oid": "4d2741c9c2165da386a57359c7284d212b17850a", "url": "https://github.com/apache/pulsar/commit/4d2741c9c2165da386a57359c7284d212b17850a", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T04:41:03Z", "type": "forcePushed"}, {"oid": "224340631e7d42ec40da8b7610d9c084f4306f69", "url": "https://github.com/apache/pulsar/commit/224340631e7d42ec40da8b7610d9c084f4306f69", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T05:00:27Z", "type": "forcePushed"}, {"oid": "e44eba6b1b7402d9a8e9bd53739061cea7609d00", "url": "https://github.com/apache/pulsar/commit/e44eba6b1b7402d9a8e9bd53739061cea7609d00", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T05:13:16Z", "type": "forcePushed"}, {"oid": "cf9116a8a746e07f88f2d7830a9fd66575bbb811", "url": "https://github.com/apache/pulsar/commit/cf9116a8a746e07f88f2d7830a9fd66575bbb811", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T06:16:36Z", "type": "forcePushed"}, {"oid": "4ae2af1e26cd53094d026e5d61f3ac735e8d841b", "url": "https://github.com/apache/pulsar/commit/4ae2af1e26cd53094d026e5d61f3ac735e8d841b", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T06:59:55Z", "type": "forcePushed"}, {"oid": "cc60b252b26258ddca1182155afac05c8a9a744c", "url": "https://github.com/apache/pulsar/commit/cc60b252b26258ddca1182155afac05c8a9a744c", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T07:27:25Z", "type": "forcePushed"}, {"oid": "5bf0749ef13f684173cbd0f5ee15d76e29e69359", "url": "https://github.com/apache/pulsar/commit/5bf0749ef13f684173cbd0f5ee15d76e29e69359", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T08:04:45Z", "type": "forcePushed"}, {"oid": "723591715cb479fc458ab31bdff552f070cd04ff", "url": "https://github.com/apache/pulsar/commit/723591715cb479fc458ab31bdff552f070cd04ff", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T08:09:22Z", "type": "forcePushed"}, {"oid": "532e69b0648a1eece850bd7b082c706e489c66ea", "url": "https://github.com/apache/pulsar/commit/532e69b0648a1eece850bd7b082c706e489c66ea", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T11:25:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMjY2OA==", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458832668", "bodyText": "This would be fetching snapshot dependencies for other modules and it will fail to compile whenever a commit is also touching more than just pulsar-broker. Rather why not just do install with -Pcore-modules", "author": "merlimat", "createdAt": "2020-07-22T14:25:20Z", "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "diffHunk": "@@ -40,39 +42,11 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository\n-        uses: actions/cache@v2\n-        with:\n-          path: ~/.m2/repository\n-          key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}\n-          restore-keys: |\n-            ${{ runner.os }}-maven-\n-\n-      - name: Check if this pull request only changes documentation\n-        id:   docs\n-        uses: apache/pulsar-test-infra/diff-only@master\n-        with:\n-          args: site2 .github deployment .asf.yaml .ci ct.yaml\n-\n-      - name: Set up JDK 1.8\n-        uses: actions/setup-java@v1\n-        if: steps.docs.outputs.changed_only == 'no'\n-        with:\n-          java-version: 1.8\n-\n-      - name: Set up Maven\n-        uses: apache/pulsar-test-infra/setup-maven@master\n-        if: steps.docs.outputs.changed_only == 'no'\n-        with:\n-          maven-version: 3.6.1\n-\n-      - name: run unit tests install by skip tests\n-        if: steps.docs.outputs.changed_only == 'no'\n-        run: mvn clean install -DskipTests -pl pulsar-broker-auth-sasl -am\n-\n-      - name: run unit tests pulsar auth sasl\n-        if: steps.docs.outputs.changed_only == 'no'\n-        run: mvn test -DfailIfNoTests=false -pl pulsar-broker-auth-sasl\n+      - name: run unit tests for pulsar-broker\n+        run: |\n+          mvn -B -q -ntp install -pl pulsar-broker -am -DskipTests", "originalCommit": "532e69b0648a1eece850bd7b082c706e489c66ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODgzMjk0OA==", "url": "https://github.com/apache/pulsar/pull/7603#discussion_r458832948", "bodyText": "Why removing cache? We can still use it to cache maven deps", "author": "merlimat", "createdAt": "2020-07-22T14:25:44Z", "path": ".github/workflows/ci-unit-broker-broker-gp1.yaml", "diffHunk": "@@ -40,39 +42,11 @@ jobs:\n           fetch-depth: 0\n           ref: ${{ github.event.pull_request.head.sha }}\n \n-      - name: Cache local Maven repository", "originalCommit": "532e69b0648a1eece850bd7b082c706e489c66ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b4e7dcc8606e8d8ab863197318bfd4a72b66ba8c", "url": "https://github.com/apache/pulsar/commit/b4e7dcc8606e8d8ab863197318bfd4a72b66ba8c", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-22T19:17:26Z", "type": "forcePushed"}, {"oid": "de0ccbfdeec984b09a7848700f11b04cae1980af", "url": "https://github.com/apache/pulsar/commit/de0ccbfdeec984b09a7848700f11b04cae1980af", "message": "Update", "committedDate": "2020-07-22T22:27:07Z", "type": "forcePushed"}, {"oid": "5dfa9109d60e9317342e7c611fd4cb65d56d5b9a", "url": "https://github.com/apache/pulsar/commit/5dfa9109d60e9317342e7c611fd4cb65d56d5b9a", "message": "Update", "committedDate": "2020-07-22T22:56:46Z", "type": "forcePushed"}, {"oid": "e0a68d70bc4fea355f50f1d39b8e0f6aa7c1a546", "url": "https://github.com/apache/pulsar/commit/e0a68d70bc4fea355f50f1d39b8e0f6aa7c1a546", "message": "Github update", "committedDate": "2020-07-23T00:16:25Z", "type": "forcePushed"}, {"oid": "36aea9d4d2659ddd280ee5897565c38540804286", "url": "https://github.com/apache/pulsar/commit/36aea9d4d2659ddd280ee5897565c38540804286", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T00:23:18Z", "type": "forcePushed"}, {"oid": "fcd571b4996e88a66384b7a99660c553d179fb09", "url": "https://github.com/apache/pulsar/commit/fcd571b4996e88a66384b7a99660c553d179fb09", "message": "Add server bind address to proxy webserver", "committedDate": "2020-07-23T00:29:08Z", "type": "commit"}, {"oid": "c02329ca14f1845f07ee367cbb31070e46c8a2f8", "url": "https://github.com/apache/pulsar/commit/c02329ca14f1845f07ee367cbb31070e46c8a2f8", "message": "Force executor shutdown in mocks", "committedDate": "2020-07-23T00:29:08Z", "type": "commit"}, {"oid": "5735168db90bf11b525fac21c9ba2cd3c9f36ff0", "url": "https://github.com/apache/pulsar/commit/5735168db90bf11b525fac21c9ba2cd3c9f36ff0", "message": "Add config for surefire reuseForks and forkCount", "committedDate": "2020-07-23T00:29:08Z", "type": "commit"}, {"oid": "86243c80449ddbee385cc53e3a26d177027bb126", "url": "https://github.com/apache/pulsar/commit/86243c80449ddbee385cc53e3a26d177027bb126", "message": "Fix ProxyTest#testRegexSubscription", "committedDate": "2020-07-23T00:29:08Z", "type": "commit"}, {"oid": "96c7d127f20eae2d899c51b57a0c055834b49aac", "url": "https://github.com/apache/pulsar/commit/96c7d127f20eae2d899c51b57a0c055834b49aac", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T00:29:08Z", "type": "forcePushed"}, {"oid": "e9b2e0d7679609bfb15ddb582ba128dbfa630e8c", "url": "https://github.com/apache/pulsar/commit/e9b2e0d7679609bfb15ddb582ba128dbfa630e8c", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T01:02:28Z", "type": "forcePushed"}, {"oid": "bce79bb32e38b57c09a20cf3255c0454e08c37f9", "url": "https://github.com/apache/pulsar/commit/bce79bb32e38b57c09a20cf3255c0454e08c37f9", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T01:32:16Z", "type": "forcePushed"}, {"oid": "ce4964f44f569b6f7e7cde82ed9fa7ca8924d232", "url": "https://github.com/apache/pulsar/commit/ce4964f44f569b6f7e7cde82ed9fa7ca8924d232", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T01:56:24Z", "type": "commit"}, {"oid": "ce4964f44f569b6f7e7cde82ed9fa7ca8924d232", "url": "https://github.com/apache/pulsar/commit/ce4964f44f569b6f7e7cde82ed9fa7ca8924d232", "message": "Migrate github actions to use container images\n\n* Unit test and go function tests are not consistent in runtime behavior", "committedDate": "2020-07-23T01:56:24Z", "type": "forcePushed"}]}