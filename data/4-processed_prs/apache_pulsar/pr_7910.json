{"pr_number": 7910, "pr_title": "[pulsar-broker] add configuration to set number of channels per bookie", "pr_createdAt": "2020-08-26T19:51:00Z", "pr_url": "https://github.com/apache/pulsar/pull/7910", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU0ODgwMg==", "url": "https://github.com/apache/pulsar/pull/7910#discussion_r478548802", "bodyText": "I am not sure 16 is a good default value. Can't we just set the default value to 1?", "author": "sijie", "createdAt": "2020-08-27T16:32:57Z", "path": "conf/broker.conf", "diffHunk": "@@ -624,6 +624,9 @@ bookkeeperClientTimeoutInSeconds=30\n # Using a value of 0, is disabling the speculative reads\n bookkeeperClientSpeculativeReadTimeoutInMillis=0\n \n+# Number of channels per bookie\n+bookkeeperNumberOfChannelsPerBookie=16", "originalCommit": "29a227138d2947628b437c63fcdca52fe53e7220", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODg0ODcxNA==", "url": "https://github.com/apache/pulsar/pull/7910#discussion_r478848714", "bodyText": "right now, hardcoded value is 16 and it was configured > 1 due to per bookie cnx bottleneck. So, changing it to 1 will create an issue for existing system if they will try to use upgrade release without knowledge of this configuration. However, recently while doing testing on high throughput bookies, we figured out that 16 bookie channel was the bottleneck and we need to make it configurable to tune it based on number topics and per bookie traffic.", "author": "rdhabalia", "createdAt": "2020-08-28T06:03:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU0ODgwMg=="}], "type": "inlineReview"}, {"oid": "29a227138d2947628b437c63fcdca52fe53e7220", "url": "https://github.com/apache/pulsar/commit/29a227138d2947628b437c63fcdca52fe53e7220", "message": "[pulsar-broker] add configuration to set number of channels per bookie", "committedDate": "2020-08-26T19:34:50Z", "type": "forcePushed"}, {"oid": "0546466e140c370b86246902c6b42f96ad45f18c", "url": "https://github.com/apache/pulsar/commit/0546466e140c370b86246902c6b42f96ad45f18c", "message": "[pulsar-broker] add configuration to set number of channels per bookie", "committedDate": "2020-09-17T03:48:07Z", "type": "commit"}, {"oid": "e34c08ff4c46284c56f658ee4aefd72bcfaa0e21", "url": "https://github.com/apache/pulsar/commit/e34c08ff4c46284c56f658ee4aefd72bcfaa0e21", "message": "make bookkeeperNumberOfChannelsPerBookie dynamic", "committedDate": "2020-09-17T03:48:07Z", "type": "commit"}, {"oid": "e34c08ff4c46284c56f658ee4aefd72bcfaa0e21", "url": "https://github.com/apache/pulsar/commit/e34c08ff4c46284c56f658ee4aefd72bcfaa0e21", "message": "make bookkeeperNumberOfChannelsPerBookie dynamic", "committedDate": "2020-09-17T03:48:07Z", "type": "forcePushed"}]}