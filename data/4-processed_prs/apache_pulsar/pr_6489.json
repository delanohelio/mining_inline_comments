{"pr_number": 6489, "pr_title": "[broker] Timeout API calls in BrokerService", "pr_createdAt": "2020-03-06T01:31:02Z", "pr_url": "https://github.com/apache/pulsar/pull/6489", "timeline": [{"oid": "7a92a6f2b5fd9a73258abb4e5a7dc4a3a400564b", "url": "https://github.com/apache/pulsar/commit/7a92a6f2b5fd9a73258abb4e5a7dc4a3a400564b", "message": "[broker] Timeout API calls in BrokerService\n\nSee #6416. This change ensures that all futures within BrokerService\nhave a guranteed timeout. As stated in #6416, we see cases where it\nappears that loading or creating a topic fails to resolve the future for\nunknown reasons. It appears that these futures *may* not be returning.\nThis seems like a sane change to make to ensure that these futures\nfinish, however, it still isn't understood under what conditions these\nfutures may not be returning, so this fix is mostly a workaround for\nsome underlying issues", "committedDate": "2020-03-06T01:25:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTE4NTkzNg==", "url": "https://github.com/apache/pulsar/pull/6489#discussion_r389185936", "bodyText": "Can we move this into FutureUtil class?", "author": "sijie", "createdAt": "2020-03-06T23:04:25Z", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/service/BrokerService.java", "diffHunk": "@@ -732,6 +733,20 @@ public void unloadNamespaceBundlesGracefully() {\n         return future;\n     }\n \n+    private <T> CompletableFuture<T> futureWithDeadline(Long delay, TimeUnit unit, Exception exp) {", "originalCommit": "7a92a6f2b5fd9a73258abb4e5a7dc4a3a400564b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}