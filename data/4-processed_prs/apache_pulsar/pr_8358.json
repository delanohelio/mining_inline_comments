{"pr_number": 8358, "pr_title": "[Issue 8346][Admin API] Validate retention policy", "pr_createdAt": "2020-10-23T09:43:15Z", "pr_url": "https://github.com/apache/pulsar/pull/8358", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NDQwOQ==", "url": "https://github.com/apache/pulsar/pull/8358#discussion_r510974409", "bodyText": "Is this change related? If not, I'd suggest removing this change from this pull request. Especially we can the way how we define the dependency to using grpc-bom. It should be done in a separate PR.", "author": "sijie", "createdAt": "2020-10-23T15:42:48Z", "path": "pom.xml", "diffHunk": "@@ -126,7 +126,7 @@ flexible messaging model and an intuitive client API.</description>\n     <protobuf3.version>3.11.4</protobuf3.version>\n     <protoc3.version>3.11.4</protoc3.version>\n     <grpc.version>1.31.0</grpc.version>\n-    <protoc-gen-grpc-java.version>1.12.0</protoc-gen-grpc-java.version>\n+    <protoc-gen-grpc-java.version>${grpc.version}</protoc-gen-grpc-java.version>", "originalCommit": "e6601bae5a353bbd7cecfc43f4b65905cba9cc8d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTA1ODA1MA==", "url": "https://github.com/apache/pulsar/pull/8358#discussion_r511058050", "bodyText": "yes, this is completely unrelated. I was running the experiment in this PR to see if I could fix the grpc upgrade. I'll remove the changes once #8363 has been merged.", "author": "lhotari", "createdAt": "2020-10-23T18:15:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk3NDQwOQ=="}], "type": "inlineReview"}, {"oid": "12a463a3e809a8e4253f786ee7cfc2118cbaed21", "url": "https://github.com/apache/pulsar/commit/12a463a3e809a8e4253f786ee7cfc2118cbaed21", "message": "Validate retention policy in Admin API\n\nFixes #8346\n\n- prevent setting invalid retention policy where either size or time\n  limit is set to zero while the other limit has a non-zero value.\n  - the reason for this is that setting either size or time limit to\n    zero will effectively disable the retention policy.\n    - it is confusing for the end-user if it's possible to set a value\n      for the other limit while it's ignored when the other limit has\n      the value of zero", "committedDate": "2020-10-23T19:49:36Z", "type": "commit"}, {"oid": "12a463a3e809a8e4253f786ee7cfc2118cbaed21", "url": "https://github.com/apache/pulsar/commit/12a463a3e809a8e4253f786ee7cfc2118cbaed21", "message": "Validate retention policy in Admin API\n\nFixes #8346\n\n- prevent setting invalid retention policy where either size or time\n  limit is set to zero while the other limit has a non-zero value.\n  - the reason for this is that setting either size or time limit to\n    zero will effectively disable the retention policy.\n    - it is confusing for the end-user if it's possible to set a value\n      for the other limit while it's ignored when the other limit has\n      the value of zero", "committedDate": "2020-10-23T19:49:36Z", "type": "forcePushed"}, {"oid": "a2a0b146faa4f1a6f101a444e5f6cc238fd8ac18", "url": "https://github.com/apache/pulsar/commit/a2a0b146faa4f1a6f101a444e5f6cc238fd8ac18", "message": "Fix invalid retention policies in tests", "committedDate": "2020-10-24T18:29:38Z", "type": "commit"}]}