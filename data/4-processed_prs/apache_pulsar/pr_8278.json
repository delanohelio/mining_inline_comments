{"pr_number": 8278, "pr_title": "[docs] Add how to SerDe for Java function", "pr_createdAt": "2020-10-16T10:49:47Z", "pr_url": "https://github.com/apache/pulsar/pull/8278", "timeline": [{"oid": "e99893a9bbd95668ea71577f1aa7f4cf9e4913e1", "url": "https://github.com/apache/pulsar/commit/e99893a9bbd95668ea71577f1aa7f4cf9e4913e1", "message": "add info for schema in Java function", "committedDate": "2020-10-16T10:47:50Z", "type": "commit"}, {"oid": "274322cff369c33967d6ab0a71023bc8396f795e", "url": "https://github.com/apache/pulsar/commit/274322cff369c33967d6ab0a71023bc8396f795e", "message": "fix typos", "committedDate": "2020-10-16T11:00:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0NjY1Mg==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r506446652", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Pulsar has a built-in schema registry and is bundled with popular schema types, such as avro, json and protobuf. Pulsar Functions can leverage the existing schema information from input topics and derive the input type. The schema registry applies for output topic as well.\n          \n          \n            \n            Pulsar has a built-in schema registry and is bundled with popular schema types, such as Avro, JSON and Protobuf. Pulsar Functions can leverage the existing schema information from input topics and derive the input type. The schema registry applies for output topic as well.", "author": "Huanli-Meng", "createdAt": "2020-10-16T13:52:11Z", "path": "site2/docs/functions-develop.md", "diffHunk": "@@ -104,22 +104,14 @@ For complete code, see [here](https://github.com/apache/pulsar/blob/master/pulsa\n <!--END_DOCUSAURUS_CODE_TABS-->\n \n ## Schema registry\n-Pulsar has a built in schema registry and comes bundled with a variety of popular schema types(avro, json and protobuf). Pulsar Functions can leverage existing schema information from input topics and derive the input type. The schema registry applies for output topic as well.\n+Pulsar has a built-in schema registry and is bundled with popular schema types, such as avro, json and protobuf. Pulsar Functions can leverage the existing schema information from input topics and derive the input type. The schema registry applies for output topic as well.", "originalCommit": "274322cff369c33967d6ab0a71023bc8396f795e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ0Nzg5NQ==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r506447895", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            SerDe works in the following way in Java Functions.\n          \n          \n            \n            SerDe works in the following ways in Java Functions.", "author": "Huanli-Meng", "createdAt": "2020-10-16T13:53:10Z", "path": "site2/docs/functions-develop.md", "diffHunk": "@@ -129,6 +121,12 @@ public interface SerDe<T> {\n     byte[] serialize(T input);\n }\n ```\n+SerDe works in the following way in Java Functions.", "originalCommit": "274322cff369c33967d6ab0a71023bc8396f795e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ1MDA2NA==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r506450064", "bodyText": "either...or, neither...nor, Please double confirm which one you should use.", "author": "Huanli-Meng", "createdAt": "2020-10-16T13:54:57Z", "path": "site2/docs/functions-develop.md", "diffHunk": "@@ -129,6 +121,12 @@ public interface SerDe<T> {\n     byte[] serialize(T input);\n }\n ```\n+SerDe works in the following way in Java Functions.\n+- If the input and output topics have schema, Pulsar Functions use schema for SerDe.\n+- If the input and output topics do not exist, Pulsar Functions adopt the following rules to determine SerDe:\n+  - If the schema type is specified, Pulsar Functions use the specified schema type.\n+  - If SerDe is specified, Pulsar Functions use the specified SerDe, and the schema type for input and output topics is `Byte`.\n+  - If either the schema type nor SerDe is specified, Pulsar Functions use the built-in SerDe. For non-primitive schema type, the built-in SerDe serializes and deserializes objects in the `json` format. ", "originalCommit": "274322cff369c33967d6ab0a71023bc8396f795e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzMwOTA2MA==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r507309060", "bodyText": "neither ... nor...\nNice catch, thank you.", "author": "Jennifer88huang", "createdAt": "2020-10-19T01:08:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ1MDA2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ1NDk5MA==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r506454990", "bodyText": "If there is no input and output topics, what the schema is used for? Do you mean that the input and output topics do not specify the schema?", "author": "Huanli-Meng", "createdAt": "2020-10-16T13:59:15Z", "path": "site2/docs/functions-develop.md", "diffHunk": "@@ -129,6 +121,12 @@ public interface SerDe<T> {\n     byte[] serialize(T input);\n }\n ```\n+SerDe works in the following way in Java Functions.\n+- If the input and output topics have schema, Pulsar Functions use schema for SerDe.\n+- If the input and output topics do not exist, Pulsar Functions adopt the following rules to determine SerDe:", "originalCommit": "274322cff369c33967d6ab0a71023bc8396f795e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzQzMTIzNg==", "url": "https://github.com/apache/pulsar/pull/8278#discussion_r507431236", "bodyText": "In some scenarios, we do not have input or output topics.\nMaybe I should change \"and\" into \"or\".", "author": "Jennifer88huang", "createdAt": "2020-10-19T04:07:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjQ1NDk5MA=="}], "type": "inlineReview"}, {"oid": "b9804df72ed981bbaccd87c1030cebd89df9459c", "url": "https://github.com/apache/pulsar/commit/b9804df72ed981bbaccd87c1030cebd89df9459c", "message": "address comments", "committedDate": "2020-10-19T01:08:13Z", "type": "commit"}, {"oid": "31ab14369d8a6b34dcf3b3bf1c2d9ed7d5a0ddeb", "url": "https://github.com/apache/pulsar/commit/31ab14369d8a6b34dcf3b3bf1c2d9ed7d5a0ddeb", "message": "update", "committedDate": "2020-10-19T04:08:58Z", "type": "commit"}]}