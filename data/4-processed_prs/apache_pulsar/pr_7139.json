{"pr_number": 7139, "pr_title": "Support KeyValue Schema Use Null Key And Null Value", "pr_createdAt": "2020-06-02T09:08:49Z", "pr_url": "https://github.com/apache/pulsar/pull/7139", "timeline": [{"oid": "c1e56ed90a46844394af1a684da26e976966746f", "url": "https://github.com/apache/pulsar/commit/c1e56ed90a46844394af1a684da26e976966746f", "message": "support keyValue schema use null key or null value", "committedDate": "2020-06-02T09:18:14Z", "type": "forcePushed"}, {"oid": "25fcd02d2a49631c9d485dbae63286541bf06a02", "url": "https://github.com/apache/pulsar/commit/25fcd02d2a49631c9d485dbae63286541bf06a02", "message": "support keyValue schema use null key or null value", "committedDate": "2020-06-03T13:45:26Z", "type": "commit"}, {"oid": "25fcd02d2a49631c9d485dbae63286541bf06a02", "url": "https://github.com/apache/pulsar/commit/25fcd02d2a49631c9d485dbae63286541bf06a02", "message": "support keyValue schema use null key or null value", "committedDate": "2020-06-03T13:45:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkyNDAyMg==", "url": "https://github.com/apache/pulsar/pull/7139#discussion_r434924022", "bodyText": "It's better to use null_partition_key here since we have partition_key and ordering key in the proto. Use null_partition_key will be more accurate.", "author": "codelipenghui", "createdAt": "2020-06-04T00:15:18Z", "path": "pulsar-common/src/main/proto/PulsarApi.proto", "diffHunk": "@@ -143,6 +143,9 @@ message MessageMetadata {\n \toptional int32 num_chunks_from_msg = 27;\n \toptional int32 total_chunk_msg_size = 28;\n \toptional int32 chunk_id = 29;\n+\n+    // Indicate if the message key is set\n+    optional bool null_key = 30 [default = false];", "originalCommit": "25fcd02d2a49631c9d485dbae63286541bf06a02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDkyNDExOA==", "url": "https://github.com/apache/pulsar/pull/7139#discussion_r434924118", "bodyText": "Same as the above comment.", "author": "codelipenghui", "createdAt": "2020-06-04T00:15:41Z", "path": "pulsar-common/src/main/proto/PulsarApi.proto", "diffHunk": "@@ -161,6 +164,8 @@ message SingleMessageMetadata {\n     optional uint64 sequence_id = 8;\n     // Indicate if the message payload value is set\n     optional bool null_value = 9 [ default = false ];\n+    // Indicate if the message key is set\n+    optional bool null_key = 10 [ default = false];", "originalCommit": "25fcd02d2a49631c9d485dbae63286541bf06a02", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "6dc1b81da0f4ad4ffe3023687c78605aa438483c", "url": "https://github.com/apache/pulsar/commit/6dc1b81da0f4ad4ffe3023687c78605aa438483c", "message": "change `null_key` to `null_partition_key`.", "committedDate": "2020-06-04T05:55:54Z", "type": "commit"}]}