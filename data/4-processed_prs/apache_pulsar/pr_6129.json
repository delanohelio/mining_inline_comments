{"pr_number": 6129, "pr_title": "[CPP] Compile fixes for ARM cpus", "pr_createdAt": "2020-01-23T05:03:41Z", "pr_url": "https://github.com/apache/pulsar/pull/6129", "timeline": [{"oid": "3b85b2cc52d15f3c9f9e0d2323fed2afc357380c", "url": "https://github.com/apache/pulsar/commit/3b85b2cc52d15f3c9f9e0d2323fed2afc357380c", "message": "[CPP] Compile fixes for ARM cpus", "committedDate": "2020-01-23T04:56:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzODY2NA==", "url": "https://github.com/apache/pulsar/pull/6129#discussion_r370038664", "bodyText": "These last two changes look completely unrelated. Add something to the commit message to at least explain them.", "author": "ivankelly", "createdAt": "2020-01-23T10:27:37Z", "path": "pulsar-client-cpp/perf/RateLimiter.h", "diffHunk": "@@ -50,7 +50,7 @@ RateLimiter::RateLimiter(double rate)\n         : interval_(std::chrono::microseconds((long)(1e6 / rate))),\n           storedPermits_(0.0),\n           maxPermits_(rate),\n-          nextFree_() {", "originalCommit": "3b85b2cc52d15f3c9f9e0d2323fed2afc357380c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzNDg1Nw==", "url": "https://github.com/apache/pulsar/pull/6129#discussion_r370234857", "bodyText": "These are to correct some initialization differences with the compiler/arch combinations. Without these, the simple perf producer was not working on arm with GCC 6.3.\nIt's mentioned (although briefly) in the description:\n\nFixed some variables initialization", "author": "merlimat", "createdAt": "2020-01-23T16:49:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzODY2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzOTg0Nw==", "url": "https://github.com/apache/pulsar/pull/6129#discussion_r370039847", "bodyText": "Does this mean that arm clients can't use crc32c at all?", "author": "ivankelly", "createdAt": "2020-01-23T10:29:58Z", "path": "pulsar-client-cpp/lib/checksum/crc32c_sse42.cc", "diffHunk": "@@ -228,3 +239,12 @@ uint32_t crc32c(uint32_t init, const void *buf, size_t len, const chunk_config *\n     DEBUG_PRINTF1(\"crc = 0x%08x\\n\", crc);\n     return crc;\n }\n+\n+#else // ! BOOST_ARCH_X86_64", "originalCommit": "3b85b2cc52d15f3c9f9e0d2323fed2afc357380c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDIzMzMyNQ==", "url": "https://github.com/apache/pulsar/pull/6129#discussion_r370233325", "bodyText": "This is only for the SSE 4.2 based implementation, otherwise we fallback to the pure C implementation.", "author": "merlimat", "createdAt": "2020-01-23T16:46:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzOTg0Nw=="}], "type": "inlineReview"}, {"oid": "ea90b9046de167ae1b68bf3f8d10533291bd6d73", "url": "https://github.com/apache/pulsar/commit/ea90b9046de167ae1b68bf3f8d10533291bd6d73", "message": "Fixed formatting", "committedDate": "2020-01-23T16:52:14Z", "type": "commit"}]}