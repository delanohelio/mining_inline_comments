{"pr_number": 8472, "pr_title": "[Issue 8471] command getBrokersWithNamespaceIsolationPolicy, add test", "pr_createdAt": "2020-11-07T03:35:00Z", "pr_url": "https://github.com/apache/pulsar/pull/8472", "timeline": [{"oid": "e2884167a9cc7935630152178097ff10e3ca0a0c", "url": "https://github.com/apache/pulsar/commit/e2884167a9cc7935630152178097ff10e3ca0a0c", "message": "fix command getBrokersWithNamespaceIsolationPolicy, add test", "committedDate": "2020-11-07T03:32:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA==", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520292344", "bodyText": "Do we need to add the initialization of isSecondary?", "author": "tuteng", "createdAt": "2020-11-10T05:19:22Z", "path": "pulsar-broker/src/main/java/org/apache/pulsar/broker/admin/impl/ClustersBase.java", "diffHunk": "@@ -595,6 +595,9 @@ public NamespaceIsolationData getNamespaceIsolationPolicy(\n                             brokerIsolationData.namespaceRegex = Lists.newArrayList();\n                         }\n                         brokerIsolationData.namespaceRegex.addAll(policyData.namespaces);\n+                        if (nsPolicyImpl.isPrimaryBroker(broker)) {\n+                            brokerIsolationData.isPrimary = true;\n+                        }", "originalCommit": "e2884167a9cc7935630152178097ff10e3ca0a0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MzE5NA==", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520293194", "bodyText": "\ud83d\udc4d", "author": "jiazhai", "createdAt": "2020-11-10T05:22:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MzkyNw==", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520293927", "bodyText": "Oh, @tuteng  I see, there is no such an area for isSecondary. Maybe we could add this area if there is requirement from user.\npublic class BrokerNamespaceIsolationData {\n\n    @ApiModelProperty(\n        name = \"brokerName\",\n        value = \"The broker name\",\n        example = \"broker1:8080\"\n    )\n    public String brokerName;\n    @ApiModelProperty(\n            name = \"policyName\",\n            value = \"Policy name\",\n            example = \"my-policy\"\n        )\n    public String policyName;\n    @ApiModelProperty(\n            name = \"isPrimary\",\n            value = \"Is Primary broker\",\n            example = \"true/false\"\n        )\n    public boolean isPrimary;\n    @ApiModelProperty(\n        name = \"namespaceRegex\",\n        value = \"The namespace-isolation policies attached to this broker\"\n    )\n    public List<String> namespaceRegex;", "author": "jiazhai", "createdAt": "2020-11-10T05:24:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5NDc1OQ==", "url": "https://github.com/apache/pulsar/pull/8472#discussion_r520294759", "bodyText": "do we need to add a field isSecondary to this entity? @jiazhai The isPrimary field also seems to be newly added #5314, Or add it in the future", "author": "tuteng", "createdAt": "2020-11-10T05:27:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI5MjM0NA=="}], "type": "inlineReview"}]}