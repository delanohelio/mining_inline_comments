{"pr_number": 8493, "pr_title": "serviced support #8492", "pr_createdAt": "2020-11-20T11:19:06Z", "pr_url": "https://github.com/enonic/xp/pull/8493", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDMzOA==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527634338", "bodyText": "/opt Is it commonly used directory nowadays?", "author": "rymsha", "createdAt": "2020-11-20T11:38:40Z", "path": "modules/runtime/src/service/systemd/xp.service", "diffHunk": "@@ -0,0 +1,40 @@\n+[Unit]\n+Description=Enonic XP\n+Documentation=https://developer.enonic.com/docs\n+Wants=network-online.target\n+After=network-online.target\n+\n+[Service]\n+Type=simple\n+PrivateTmp=true\n+Environment=XP_INSTALL=/opt/enonic/xp\n+Environment=XP_JAVA_HOME=${XP_INSTALL}/jdk\n+\n+WorkingDirectory=/opt/enonic/xp", "originalCommit": "0f003b00a68da7bb5f1e1690e2a11f81eaf49dc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNjk0OA==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527636948", "bodyText": "/opt \u2013 Optional Packages\n\nThe /opt directory contains subdirectories for optional software packages. It\u2019s commonly used by proprietary software that doesn\u2019t obey the standard file system hierarchy \u2013 for example, a proprietary program might dump its files in /opt/application when you install it.\n\nSo if the XP distro is installed there this makes sense.", "author": "gbbirkisson", "createdAt": "2020-11-20T11:43:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDMzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDYwMA==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527634600", "bodyText": "does this apply to sh script? we don't directly call java, but does script propagate same java exit code (143 means java exited normally after SIGTERM)", "author": "rymsha", "createdAt": "2020-11-20T11:39:08Z", "path": "modules/runtime/src/service/systemd/xp.service", "diffHunk": "@@ -0,0 +1,40 @@\n+[Unit]\n+Description=Enonic XP\n+Documentation=https://developer.enonic.com/docs\n+Wants=network-online.target\n+After=network-online.target\n+\n+[Service]\n+Type=simple\n+PrivateTmp=true\n+Environment=XP_INSTALL=/opt/enonic/xp\n+Environment=XP_JAVA_HOME=${XP_INSTALL}/jdk\n+\n+WorkingDirectory=/opt/enonic/xp\n+\n+User=xp\n+Group=xp\n+\n+ExecStart=/opt/enonic/xp/bin/server.sh\n+\n+StandardOutput=journal\n+StandardError=inherit\n+\n+LimitNOFILE=65535\n+\n+LimitNPROC=4096\n+\n+LimitAS=infinity\n+\n+LimitFSIZE=infinity\n+\n+KillSignal=SIGTERM\n+\n+KillMode=process\n+\n+SendSIGKILL=no\n+\n+SuccessExitStatus=143", "originalCommit": "0f003b00a68da7bb5f1e1690e2a11f81eaf49dc0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzODM1Nw==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527638357", "bodyText": "@anatol-sialitski can you verify this, please", "author": "rymsha", "createdAt": "2020-11-20T11:46:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0ODYxMA==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527648610", "bodyText": "Doing a test on my machine:\n$XP_HOME=$HOME/.enonic/sandboxes/jwt/home ./bin/server.sh\n\n....\n\nCTRL+C\n\n$echo $?\n130", "author": "gbbirkisson", "createdAt": "2020-11-20T12:06:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY0OTM0NQ==", "url": "https://github.com/enonic/xp/pull/8493#discussion_r527649345", "bodyText": "Killing with sigterm results in 143.", "author": "gbbirkisson", "createdAt": "2020-11-20T12:08:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzYzNDYwMA=="}], "type": "inlineReview"}, {"oid": "183e129569303c193aefacee44e90d54df96d76d", "url": "https://github.com/enonic/xp/commit/183e129569303c193aefacee44e90d54df96d76d", "message": "serviced support #8492", "committedDate": "2020-11-23T09:05:00Z", "type": "commit"}, {"oid": "183e129569303c193aefacee44e90d54df96d76d", "url": "https://github.com/enonic/xp/commit/183e129569303c193aefacee44e90d54df96d76d", "message": "serviced support #8492", "committedDate": "2020-11-23T09:05:00Z", "type": "forcePushed"}]}