{"pr_number": 1364, "pr_title": "enable syntax mode when importing a partial folder of maven/gradle project", "pr_createdAt": "2020-02-26T02:30:55Z", "pr_url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1364", "timeline": [{"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fdd91524a6a73b8b715e1ae046cad597bfb91149", "message": "enable syntax mode when importing a partial folder of maven/gradle project\n\nSigned-off-by: Jinbo Wang <jinbwan@microsoft.com>", "committedDate": "2020-03-05T02:20:15Z", "type": "commit"}, {"oid": "fdd91524a6a73b8b715e1ae046cad597bfb91149", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/fdd91524a6a73b8b715e1ae046cad597bfb91149", "message": "enable syntax mode when importing a partial folder of maven/gradle project\n\nSigned-off-by: Jinbo Wang <jinbwan@microsoft.com>", "committedDate": "2020-03-05T02:20:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3Mjc4NA==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1364#discussion_r400472784", "bodyText": "I'm not super fan of hardcoding Maven and Gradle specific things here, I think we can improve that by decoupling Build files discovery from the InvisibleProjectImporter, but it'll do for now", "author": "fbricon", "createdAt": "2020-03-30T20:27:30Z", "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/managers/InvisibleProjectImporter.java", "diffHunk": "@@ -140,6 +141,20 @@ public static boolean loadInvisibleProject(IPath javaFile, IPath rootPath, boole\n \t\treturn true;\n \t}\n \n+\tprivate static boolean isPartOfMatureProject(IPath sourcePath) {\n+\t\tsourcePath = sourcePath.removeTrailingSeparator();\n+\t\tList<String> segments = Arrays.asList(sourcePath.segments());\n+\t\tint index = segments.lastIndexOf(\"src\");\n+\t\tif (index <= 0) {\n+\t\t\treturn false;\n+\t\t}\n+\n+\t\tIPath srcPath = sourcePath.removeLastSegments(segments.size() -1 - index);\n+\t\tIPath container = srcPath.removeLastSegments(1);\n+\t\treturn container.append(\"pom.xml\").toFile().exists()\n+\t\t\t|| container.append(\"build.gradle\").toFile().exists();", "originalCommit": "fdd91524a6a73b8b715e1ae046cad597bfb91149", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}