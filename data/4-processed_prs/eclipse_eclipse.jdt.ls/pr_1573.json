{"pr_number": 1573, "pr_title": "Hide inline variable commands when no reference found", "pr_createdAt": "2020-10-16T02:09:09Z", "pr_url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1573", "timeline": [{"oid": "def70208427b1f3fc09238efdd6e695a4f4308f7", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/def70208427b1f3fc09238efdd6e695a4f4308f7", "message": "Hide inline variable commands when no reference\n\nSigned-off-by: schenqce <chenshi@microsoft.com>", "committedDate": "2020-10-16T02:39:50Z", "type": "forcePushed"}, {"oid": "f344986ec7e4514b8862c9c210d1df1335ba04d0", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/f344986ec7e4514b8862c9c210d1df1335ba04d0", "message": "Hide inline variable commands when no reference found\n\nSigned-off-by: schenqce <chenshi@microsoft.com>", "committedDate": "2020-10-16T03:21:05Z", "type": "commit"}, {"oid": "f344986ec7e4514b8862c9c210d1df1335ba04d0", "url": "https://github.com/eclipse/eclipse.jdt.ls/commit/f344986ec7e4514b8862c9c210d1df1335ba04d0", "message": "Hide inline variable commands when no reference found\n\nSigned-off-by: schenqce <chenshi@microsoft.com>", "committedDate": "2020-10-16T03:21:05Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNjA1MzczNw==", "url": "https://github.com/eclipse/eclipse.jdt.ls/pull/1573#discussion_r506053737", "bodyText": "Since refactoring.checkInitialialConditions() will also invoke refactoring.getReferences() and cache the result to a field. The second call refactoring.getReferences() will just return the previous result, and no extra cost.", "author": "testforstephen", "createdAt": "2020-10-16T05:05:01Z", "path": "org.eclipse.jdt.ls.core/src/org/eclipse/jdt/ls/core/internal/corrections/RefactorProcessor.java", "diffHunk": "@@ -346,7 +346,7 @@ private boolean getInlineProposal(IInvocationContext context, ASTNode node, Coll\n \t\t\t\t// Inline Local Variable\n \t\t\t\tif (binding.getJavaElement() instanceof ILocalVariable && RefactoringAvailabilityTesterCore.isInlineTempAvailable((ILocalVariable) binding.getJavaElement())) {\n \t\t\t\t\tInlineTempRefactoring refactoring= new InlineTempRefactoring((VariableDeclaration) decl);\n-\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK()) {\n+\t\t\t\t\tif (refactoring.checkInitialConditions(new NullProgressMonitor()).isOK() && refactoring.getReferences().length > 0) {", "originalCommit": "f344986ec7e4514b8862c9c210d1df1335ba04d0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}