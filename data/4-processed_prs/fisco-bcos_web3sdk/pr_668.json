{"pr_number": 668, "pr_title": "Adapt to IPv6", "pr_createdAt": "2020-06-28T08:18:28Z", "pr_url": "https://github.com/FISCO-BCOS/web3sdk/pull/668", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYxODE1Mw==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446618153", "bodyText": "[PMD Java] String.indexOf(char) is faster than String.indexOf(String). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nUseIndexOfChar\nPerformance\n3\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_performance.html#useindexofchar\n\nYou can close this issue if no need to fix it. Learn more.", "author": "sider", "createdAt": "2020-06-28T08:19:05Z", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(\":\");", "originalCommit": "fe54930c32ba56f760525174ba43d7a60168e174", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYxODE1Ng==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446618156", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'port' (lines '300'-'321'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "author": "sider", "createdAt": "2020-06-28T08:19:06Z", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(\":\");\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0,index);\n+            String port = connectionStr.substring(index+1);", "originalCommit": "fe54930c32ba56f760525174ba43d7a60168e174", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9", "url": "https://github.com/FISCO-BCOS/web3sdk/commit/0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9", "message": "Adapt to IPv6", "committedDate": "2020-06-28T09:21:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjYyNTc1Ng==", "url": "https://github.com/FISCO-BCOS/web3sdk/pull/668#discussion_r446625756", "bodyText": "[PMD Java] Found 'DU'-anomaly for variable 'port' (lines '300'-'321'). (view)\n\n\n\n\nRule\nRuleset\nPriority\n\n\n\n\nDataflowAnomalyAnalysis\nError Prone\n5\n\n\n\nReferences:\n\nhttps://pmd.github.io/pmd-6.24.0/pmd_rules_java_errorprone.html#dataflowanomalyanalysis\n\nYou can close this issue if no need to fix it. Learn more.", "author": "sider", "createdAt": "2020-06-28T09:24:36Z", "path": "src/main/java/org/fisco/bcos/channel/handler/ChannelConnections.java", "diffHunk": "@@ -288,18 +289,17 @@ public void init() {\n         for (String connectionStr : connectionsStr) {\n             ConnectionInfo connection = new ConnectionInfo();\n \n-            String[] stringArray = connectionStr.split(\":\");\n-\n-            if (stringArray.length < 1) {\n+            int index = connectionStr.lastIndexOf(':');\n+            if (index == -1) {\n                 throw new IllegalArgumentException(\n-                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111), value: \"\n+                        \" Invalid configuration, the value should in IP:Port format(eg: 127.0.0.1:1111\u3001[::1]:1111), value: \"\n                                 + connectionStr);\n             }\n \n-            String IP = stringArray[0];\n-            String port = stringArray[1];\n+            String IP = connectionStr.substring(0, index);\n+            String port = connectionStr.substring(index + 1);", "originalCommit": "0f85ee8ed985305cb74675f3cca4ba2e4eedf5d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}