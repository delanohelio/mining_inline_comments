{"pr_number": 1059, "pr_title": "feat(ui-licenseobligation): License obligation changes", "pr_createdAt": "2020-12-01T08:32:38Z", "pr_url": "https://github.com/eclipse/sw360/pull/1059", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzkzMjg5Ng==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533932896", "bodyText": "indendation", "author": "JaideepPalit", "createdAt": "2020-12-02T06:49:59Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/licenses/LicensesPortlet.java", "diffHunk": "@@ -141,8 +142,27 @@ private void prepareEditView(RenderRequest request, RenderResponse response) {\n         LicenseService.Iface client = thriftClients.makeLicenseClient();\n         boolean isAtLeastClearingAdmin = PermissionUtils.isUserAtLeast(UserGroup.CLEARING_ADMIN, user);\n         request.setAttribute(IS_USER_AT_LEAST_CLEARING_ADMIN, isAtLeastClearingAdmin ? \"Yes\" : \"No\");\n+        request.setAttribute(SELECTED_TAB, \"tab-AddLicense\");\n \n         try {\n+            License moderationLicense = client.getByIDWithOwnModerationRequests(id, user.getDepartment(), user);\n+            request.setAttribute(MODERATION_LICENSE_DETAIL, moderationLicense);\n+            List<Obligation> obligations = client.getObligations().stream()\n+                    .filter(Objects::nonNull)\n+                    .filter(Obligation::isSetObligationLevel)\n+                    .filter(obl -> obl.getObligationLevel().equals(ObligationLevel.LICENSE_OBLIGATION))\n+                    .collect(Collectors.toList());\n+            request.setAttribute(KEY_OBLIGATION_LIST, obligations);\n+\n+            final License license = client.getByID(id,user.getDepartment());", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0NTA4Mg==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533945082", "bodyText": "Maybe it could be written as licenseOblIds  is not null and empty then only fetch from DB", "author": "JaideepPalit", "createdAt": "2020-12-02T07:21:07Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/licenses/LicensesPortlet.java", "diffHunk": "@@ -141,8 +142,27 @@ private void prepareEditView(RenderRequest request, RenderResponse response) {\n         LicenseService.Iface client = thriftClients.makeLicenseClient();\n         boolean isAtLeastClearingAdmin = PermissionUtils.isUserAtLeast(UserGroup.CLEARING_ADMIN, user);\n         request.setAttribute(IS_USER_AT_LEAST_CLEARING_ADMIN, isAtLeastClearingAdmin ? \"Yes\" : \"No\");\n+        request.setAttribute(SELECTED_TAB, \"tab-AddLicense\");\n \n         try {\n+            License moderationLicense = client.getByIDWithOwnModerationRequests(id, user.getDepartment(), user);\n+            request.setAttribute(MODERATION_LICENSE_DETAIL, moderationLicense);\n+            List<Obligation> obligations = client.getObligations().stream()\n+                    .filter(Objects::nonNull)\n+                    .filter(Obligation::isSetObligationLevel)\n+                    .filter(obl -> obl.getObligationLevel().equals(ObligationLevel.LICENSE_OBLIGATION))\n+                    .collect(Collectors.toList());\n+            request.setAttribute(KEY_OBLIGATION_LIST, obligations);\n+\n+            final License license = client.getByID(id,user.getDepartment());\n+            Set<String> licenseOblIds = license.getObligationDatabaseIds();\n+            List<Obligation> obls = new ArrayList<Obligation>();\n+\n+            if (licenseOblIds != null) {\n+                obls = CommonUtils.nullToEmptyList(client.getObligationsByIds(Lists.newArrayList(licenseOblIds)));\n+            }", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTgwMg==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955802", "bodyText": "Done", "author": "smrutis1", "createdAt": "2020-12-10T08:06:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0NTA4Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0NjQ0Nw==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533946447", "bodyText": "Indentation", "author": "JaideepPalit", "createdAt": "2020-12-02T07:24:16Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/licenses/edit.jsp", "diffHunk": "@@ -50,7 +50,23 @@\n <core_rt:if test=\"${empty attributeNotFoundException || exceptionInBackend}\">\n \n     <div class=\"container\" style=\"display: none;\">\n-        <div class=\"row portlet-toolbar\">\n+        <div class=\"row\">\n+            <div class=\"col-3 sidebar\">\n+                <div id=\"detailTb\" class=\"list-group\" data-initial-tab=\"${selectedTab}\" role=\"tablist\">\n+                    <a class=\"list-group-item list-group-item-action <core_rt:if test=\"${selectedTab == 'tab-AddLicense'}\">active</core_rt:if>\" href=\"#tab-AddLicense\" data-toggle=\"list\" role=\"tab\">License</a>\n+                    <a class=\"list-group-item list-group-item-action <core_rt:if test=\"${selectedTab == 'tab-AddTodo'}\">active</core_rt:if>\" href=\"#tab-AddTodo\" data-toggle=\"list\" role=\"tab\">Linked Obligation</a>\n+                </div>\n+            </div>\n+        <div class=\"col\">\n+        <div class=\"row\">\n+                <div class=\"col\">\n+                    <div class=\"tab-content\">\n+                        <core_rt:if test=\"${not addMode}\">\n+                            <div id=\"tab-AddTodo\" class=\"tab-pane <core_rt:if test=\"${selectedTab == 'tab-AddTodo'}\">active show</core_rt:if>\">\n+                                <%@include file=\"/html/licenses/includes/detailAddTodo.jspf\" %>\n+                            </div>\n+                            <div id=\"tab-AddLicense\" class=\"tab-pane <core_rt:if test=\"${selectedTab == 'tab-AddLicense'}\">active show</core_rt:if>\">\n+                            <div class=\"row portlet-toolbar\">\n             <div class=\"col-auto\">", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTkzMg==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955932", "bodyText": "Done", "author": "smrutis1", "createdAt": "2020-12-10T08:06:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0NjQ0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0Nzg4OA==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533947888", "bodyText": "Is it possible to use $dialog = dialog.confirm() from modules/dialog", "author": "JaideepPalit", "createdAt": "2020-12-02T07:27:32Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/licenses/includes/detailAddTodo.jspf", "diffHunk": "@@ -19,79 +19,127 @@\n \n <form action=\"<%=addLicenseTodoURL%>\" method=\"post\" id=\"AddTodoModal\" name=\"AddTodoModal\" class=\"needs-validation\" novalidate>\n     <div>\n-        <div class=\"row\">\n-            <div class=\"col\">\n-                <h5><liferay-ui:message key=\"obligation.details\" /></h5>\n-            </div>\n-        </div>\n-        <div class=\"row\">\n-            <div class=\"col-8\">\n-\t\t\t\t<div class=\"form-group\">\n-\t\t\t\t\t<label for=\"oblTitle\"><liferay-ui:message key=\"title\" /></label>\n-\t\t\t\t\t<input id=\"oblTitle\" type=\"text\" class=\"form-control\"\n-\t\t\t\t\t\tplaceholder=\"<liferay-ui:message key=\"enter.title\" />\"\n-\t\t\t\t\t\tname=\"<portlet:namespace/>obligTitle\"/>\n-\t\t\t\t</div>\n-\t\t\t\t<div class=\"form-group\">\n-\t\t\t\t    <label for=\"oblText\"><liferay-ui:message key=\"text\" /></label>\n-                    <textarea name=\"<portlet:namespace/>obligText\" rows=\"5\" class=\"form-control\"\n-                                required placeholder=\"<liferay-ui:message key=\"enter.the.oblig.text.here\" />\"></textarea>\n-                </div>\n-            </div>\n-            <div class=\"col-4\">\n-                <div class=\"form-check\">\n-                    <input type=\"checkbox\" class=\"form-check-input\" name=\"<portlet:namespace/>bools\" id=\"developmentCheckbox\" value=\"development\"/>\n-                    <label class=\"form-check-label\" for=\"developmentCheckbox\"><liferay-ui:message key=\"applies.to.development\" /></label>\n-                </div>\n-                <div class=\"form-check\">\n-                    <input type=\"checkbox\" class=\"form-check-input\" name=\"<portlet:namespace/>bools\" id=\"distributionCheckbox\" value=\"distribution\" />\n-                    <label class=\"form-check-label\" for=\"distributionCheckbox\"><liferay-ui:message key=\"applies.to.distribution\" /></label>\n-                </div>\n-            </div>\n-        </div>\n         <div class=\"row\">\n             <div class=\"col\">\n                 <table id=\"licenseTodoTable\" class=\"table table-bordered\">\n                     <colgroup>\n-                        <col style=\"width: 4rem;\" />\n+                        <col />\n                         <col />\n                     </colgroup>\n                     <thead>\n                         <tr>\n-                            <th></th>\n                             <th><liferay-ui:message key=\"obligation.title\" /></th>\n                             <th><liferay-ui:message key=\"obligation.text\" /></th>\n+                            <th>Action</th>\n                         </tr>\n                     </thead>\n                     <tbody>\n-                        <core_rt:forEach var=\"ob\" varStatus=\"status\" items=\"${obligationList}\">\n-                            <tr>\n-                                <td>\n-                                    <div class=\"form-check\">\n-                                        <input class=\"form-check-input\" type=\"checkbox\" name=\"<portlet:namespace/>obligations\" value=\"${ob.id}\" />\n-                                    </div>\n-                                </td>\n+                        <core_rt:forEach var=\"ob\" varStatus=\"status\" items=\"${linkedObligations}\">\n+                            <tr id=\"oblLinkRow${ob.id}\">\n                                 <td>\n                                     <sw360:out value=\"${ob.title}\"/>\n                                 </td>\n                                 <td>\n                                     <sw360:out value=\"${ob.text}\"/>\n                                 </td>\n+                                <td class=\"content-middle\">\n+                                    <svg class=\"action lexicon-icon\" data-row-id=\"oblLinkRow${ob.id}\" data-obligation-title=\"${ob.title}\">\n+                                    <title><liferay-ui:message key=\"delete\" /></title>\n+                                    <use href=\"/o/org.eclipse.sw360.liferay-theme/images/clay/icons.svg#trash\"/>\n+                                   </svg>\n+                                </td>\n                             </tr>\n                         </core_rt:forEach>\n                     </tbody>\n                 </table>\n-                <button type=\"button\" class=\"btn btn-primary mt-3\" id=\"submitTodo\"><liferay-ui:message key=\"add.obligation\" /></button>\n+                <button type=\"button\" class=\"btn btn-secondary mt-3\" id=\"submitTodo\"><liferay-ui:message key=\"add.obligation\" /></button>\n+                <button type=\"button\" class=\"btn btn-primary mt-3\" id=\"updateObligation\">Update</button>\n             </div>\n         </div>\n     </div>\n </form>\n+<div class=\"dialogs auto-dialogs\">\n+<div id=\"addObligationDialog\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n+<div class=\"modal-dialog modal-lg modal-dialog-centered modal-info\" role=\"document\">\n+    <div class=\"modal-content\">\n+      <div class=\"modal-header\">\n+        <h5 class=\"modal-title\">Select Obligations</h5>\n+        <button id=\"closeModalButton\" type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n+          <span aria-hidden=\"true\">&times;</span>\n+        </button>\n+      </div>\n+      <div class=\"modal-body\" style=\"position: relative; overflow-y: auto; max-height: 400px;\">\n+          <table id=\"licenseTodoTableDialog\" class=\"table table-bordered\">\n+                <colgroup>\n+                   <col style=\"width: 4rem;\" />\n+                   <col />\n+                </colgroup>\n+                <thead>\n+                    <tr>\n+                        <th></th>\n+                        <th><liferay-ui:message key=\"obligation.title\" /></th>\n+                        <th><liferay-ui:message key=\"obligation.text\" /></th>\n+                    </tr>\n+                </thead>\n+                <tbody>\n+                    <core_rt:forEach var=\"ob\" varStatus=\"status\" items=\"${obligationList}\">\n+                        <tr>\n+                            <td>\n+                                <div class=\"form-check\">\n+                                    <input class=\"form-check-input\" type=\"checkbox\" value=\"${ob.id}\" />\n+                               </div>\n+                            </td>\n+                            <td>\n+                                <sw360:out value=\"${ob.title}\"/>\n+                            </td>\n+                            <td>\n+                               <sw360:out value=\"${ob.text}\"/>\n+                            </td>\n+                        </tr>\n+                    </core_rt:forEach>\n+                </tbody>\n+          </table>\n+\t  </div>\n+      <div class=\"modal-footer\">\n+        <button id=\"addObl\" type=\"button\" value=\"Add Obligation\" class=\"btn btn-primary\">Add Obligation</button>\n+        <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\"><liferay-ui:message key=\"close\" /></button>\n+      </div>\n+    </div>\n+  </div>\n+</div>\n+</div>\n \n+<div class=\"dialogs\">\n+    <div id=\"deleteLicenseObligationDialog\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\">\n+\t\t<div class=\"modal-dialog modal-lg modal-dialog-centered modal-danger\" role=\"document\">\n+\t\t    <div class=\"modal-content\">\n+\t\t\t<div class=\"modal-header\">\n+\t\t\t\t<h5 class=\"modal-title\">\n+\t\t\t\t\t<clay:icon symbol=\"question-circle\" />\n+\t\t\t\t\tDelete Obligation\n+\t\t\t\t</h5>\n+\t\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n+\t\t\t\t\t<span aria-hidden=\"true\">&times;</span>\n+\t\t\t\t</button>\n+\t\t\t</div>\n+\t\t\t\t<div class=\"modal-body\">\n+\t\t\t        <p>\n+                        Do you really want to remove the obligation?\n+                    </p>\n+\t\t\t\t</div>\n+\t\t\t    <div class=\"modal-footer\">\n+\t\t\t        <button type=\"button\" class=\"btn btn-light\" data-dismiss=\"modal\"><liferay-ui:message key=\"cancel\" /></button>\n+\t\t\t        <button type=\"button\" class=\"btn btn-danger\"><liferay-ui:message key=\"delete.link\" /></button>\n+\t\t\t    </div>\n+\t\t\t</div>\n+\t\t</div>\n+\t</div>\n+</div>", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTYyNg==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955626", "bodyText": "Have used $dialog = dialog.confirm()", "author": "smrutis1", "createdAt": "2020-12-10T08:06:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0Nzg4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0ODM4Ng==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533948386", "bodyText": "EscapeXML wherever possible", "author": "JaideepPalit", "createdAt": "2020-12-02T07:28:46Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/licenses/includes/detailAddTodo.jspf", "diffHunk": "@@ -153,7 +201,51 @@\n         }\n \n         function submitForm() {\n-            $('#AddTodoModal').submit();\n+            var $dialog;\n+            dialog.open('#addObligationDialog','',function(submit, callback) {\n+                callback(true);\n+            });\n         }\n+\n+        $(\"#addObl\").on(\"click\",function (event){\n+            var existingOblIds = [];\n+            var oblIds = [];\n+            <core_rt:forEach var=\"ob\" varStatus=\"status\" items=\"${obligationList}\">\n+                existingOblIds.push(\"${ob.id}\");\n+            </core_rt:forEach>\n+            if(datatable) {\n+                datatable.destroy();\n+                datatable = undefined;\n+            }\n+            $('#licenseTodoTableDialog > tbody  > tr').each(function() {\n+                isSelectedObl = $('td:eq(0)', this).find(\"input[type='checkbox']\").is(\":checked\");\n+                if(isSelectedObl){\n+                    oblId = $('td:eq(0)', this).find(\"input[type='checkbox']\").val();\n+                    oblIds.push(oblId);\n+                    $OlTitle = $('td:eq(1)', this);\n+                    $OlText = $('td:eq(2)', this);\n+                    row = \"<tr><td>\" + $OlTitle.text() + \"</td><td>\" + $OlText.text() + \"</td><td class='content-middle'><svg class='action lexicon-icon' data-row-id='oblLinkRow${ob.id}' data-obligation-title='${ob.title}'><title><liferay-ui:message key='delete' /></title><use href='/o/org.eclipse.sw360.liferay-theme/images/clay/icons.svg#trash'/></svg></td></tr>\"", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTQwNA==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955404", "bodyText": "Done", "author": "smrutis1", "createdAt": "2020-12-10T08:05:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0ODM4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0OTE1MA==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533949150", "bodyText": "This filter could also be removed , since main field is removed", "author": "JaideepPalit", "createdAt": "2020-12-02T07:30:27Z", "path": "libraries/lib-datahandler/src/main/java/org/eclipse/sw360/datahandler/common/SW360Utils.java", "diffHunk": "@@ -612,7 +612,7 @@ public static Integer parseStringToNumber(String input) {\n         obligationAlreadyPresent.entrySet().stream().forEach(e -> obligationStatusMap.remove(e.getKey()));\n \n         Map<String, ObligationStatusInfo> mapOfObligations = obligations.stream().filter(Objects::nonNull)\n-                .filter(o -> isValidForProjectOptional || o.isValidForProject())\n+                .filter(o -> isValidForProjectOptional)", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTI1OQ==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955259", "bodyText": "removed", "author": "smrutis1", "createdAt": "2020-12-10T08:05:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0OTE1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0OTk5NA==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r533949994", "bodyText": "Could it be written like del entity[fieldToBeRemoved]", "author": "JaideepPalit", "createdAt": "2020-12-02T07:32:22Z", "path": "scripts/migrations/042_remove_validForProject_from_Obligation.py", "diffHunk": "@@ -0,0 +1,83 @@\n+#!/usr/bin/python\n+# -----------------------------------------------------------------------------\n+# Copyright Siemens AG, 2020. Part of the SW360 Portal Project.\n+#\n+# This program and the accompanying materials are made\n+# available under the terms of the Eclipse Public License 2.0\n+# which is available at https://www.eclipse.org/legal/epl-2.0/\n+#\n+# SPDX-License-Identifier: EPL-2.0\n+#\n+# This is a manual database migration script. It is assumed that a\n+# dedicated framework for automatic migration will be written in the\n+# future. When that happens, this script should be refactored to conform\n+# to the framework's prerequisites to be run by the framework. For\n+# example, server address and db name should be parameterized, the code\n+# reorganized into a single class or function, etc.\n+#\n+# This script removes \"validForProject\" field from Obligation\n+# ---------------------------------------------------------------------------------------------------------------------------------------------------------------\n+\n+import time\n+import couchdb\n+import json\n+from webbrowser import get\n+\n+# ---------------------------------------\n+# constants\n+# ---------------------------------------\n+\n+DRY_RUN = True\n+\n+COUCHSERVER = \"http://localhost:5984/\"\n+DBNAME = 'sw360db'\n+\n+couch=couchdb.Server(COUCHSERVER)\n+db = couch[DBNAME]\n+\n+# ----------------------------------------\n+# queries\n+# ----------------------------------------\n+\n+# get all obligation with field \"validForProject\"\n+all_obligation_with_validForProject = {\"selector\": {\"type\": {\"$eq\": \"obligation\"}, \"validForProject\": {\"$exists\": True}}, \"limit\": 20000}\n+\n+# ---------------------------------------\n+# functions\n+# ---------------------------------------\n+\n+def removeFieldName(resultFile, qryResult, fieldToBeRemoved):\n+    log = {}\n+    log['totalCount'] = len(qryResult)\n+    print 'Removing field name '+fieldToBeRemoved\n+    log['Updated obligation fields '+fieldToBeRemoved] = []\n+    for entity in qryResult:\n+        del entity[''+fieldToBeRemoved+'']", "originalCommit": "ae3935ff9190fd9fb53bdf8dee690079ac59dc4b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NTExMg==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r539955112", "bodyText": "Changed it", "author": "smrutis1", "createdAt": "2020-12-10T08:05:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk0OTk5NA=="}], "type": "inlineReview"}, {"oid": "5989133247b5b011e8322404317c2b1a7ab8f0f3", "url": "https://github.com/eclipse/sw360/commit/5989133247b5b011e8322404317c2b1a7ab8f0f3", "message": "feat(ui-licenseobligation): License obligation changes\n\nSigned-off-by: Smruti Prakash Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-12-10T07:53:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExOTUwMQ==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r540119501", "bodyText": "Is it possible to use CommonUtils.isNotNullEmptyOrWhitespace() same for line 457", "author": "JaideepPalit", "createdAt": "2020-12-10T12:12:57Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/portlets/licenses/LicensesPortlet.java", "diffHunk": "@@ -317,6 +359,9 @@ private License updateLicenseFromRequest(License license, ActionRequest request)\n         license.setGPLv2Compat(gpl2compatibility);\n         license.setGPLv3Compat(gpl3compatibility);\n         license.setChecked(checked);\n+        String obligationIds = request.getParameter(\"obligations\");\n+        List<String> oblIds = obligationIds == null || obligationIds.equals(\"\") ? Lists.newArrayList() : Arrays.asList(obligationIds.split(\",\"));", "originalCommit": "5989133247b5b011e8322404317c2b1a7ab8f0f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE2MzE4Mw==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r540163183", "bodyText": "Have used", "author": "smrutis1", "createdAt": "2020-12-10T13:21:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDExOTUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEyMzU5NA==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r540123594", "bodyText": "Should also be removed from method signature.", "author": "JaideepPalit", "createdAt": "2020-12-10T12:19:30Z", "path": "libraries/lib-datahandler/src/main/java/org/eclipse/sw360/datahandler/common/SW360Utils.java", "diffHunk": "@@ -612,7 +612,6 @@ public static Integer parseStringToNumber(String input) {\n         obligationAlreadyPresent.entrySet().stream().forEach(e -> obligationStatusMap.remove(e.getKey()));\n \n         Map<String, ObligationStatusInfo> mapOfObligations = obligations.stream().filter(Objects::nonNull)\n-                .filter(o -> isValidForProjectOptional || o.isValidForProject())", "originalCommit": "5989133247b5b011e8322404317c2b1a7ab8f0f3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDE2MzM4Mw==", "url": "https://github.com/eclipse/sw360/pull/1059#discussion_r540163383", "bodyText": "Removed it", "author": "smrutis1", "createdAt": "2020-12-10T13:21:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDEyMzU5NA=="}], "type": "inlineReview"}, {"oid": "bdc94955c8a98326319110283f452cf29904d2b1", "url": "https://github.com/eclipse/sw360/commit/bdc94955c8a98326319110283f452cf29904d2b1", "message": "feat(ui-licenseobligation): License obligation changes\n\nSigned-off-by: Smruti Prakash Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-12-10T13:19:09Z", "type": "commit"}, {"oid": "bdc94955c8a98326319110283f452cf29904d2b1", "url": "https://github.com/eclipse/sw360/commit/bdc94955c8a98326319110283f452cf29904d2b1", "message": "feat(ui-licenseobligation): License obligation changes\n\nSigned-off-by: Smruti Prakash Sahoo <smruti.sahoo@siemens.com>", "committedDate": "2020-12-10T13:19:09Z", "type": "forcePushed"}]}