{"pr_number": 816, "pr_title": "SW360 support multi-language", "pr_createdAt": "2020-03-24T09:50:50Z", "pr_url": "https://github.com/eclipse/sw360/pull/816", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDAwNzI1Ng==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r400007256", "bodyText": "maybe consider the general (no existing installation in place) page fot it: https://github.com/eclipse/sw360/wiki/Deploy-Natively", "author": "mcjaeger", "createdAt": "2020-03-30T08:19:41Z", "path": "README_LANG.md", "diffHunk": "@@ -0,0 +1,126 @@\n+\n+## SW360 Multi-Language System\n+\n+### Introduction\n+\n+SW360 multi-language can support multiple languages. In this way, SW360 can internationalize. With each localization, user can select the appropriate language and contribute more local translations.\n+\n+### Language Extension \n+\n+By the default SW360 language is English, language extensions are added and based on English.\n+\n+With each language, it will have a special language extension that is language for local.\n+\n+Language extension contains a pair: key and value\n+* Key: used to get value of key and replace text to key in source code.\n+* Value: the local language translation.\n+\n+### How to deploy\n+\n+Refer to the document:\n+\n+https://github.com/eclipse/sw360/wiki/Deploy-Upgrade-to-Liferay-7.2", "originalCommit": "b83b7fd18c17ef244009132d0fba5b8b11d6bae8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "url": "https://github.com/eclipse/sw360/commit/994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "message": "feat: SW360 support multi-language\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>", "committedDate": "2020-04-01T13:46:55Z", "type": "commit"}, {"oid": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "url": "https://github.com/eclipse/sw360/commit/994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "message": "feat: SW360 support multi-language\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>", "committedDate": "2020-04-01T13:46:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771280", "bodyText": "this made me suspicous and it looks like moderations do not work. Accepting a moderation request returns an empty moderation portlet and the following exeption:\n2020-04-05 23:16:08.149 ERROR [http-nio-8080-exec-122][ModerationPortlet:187] Error in Moderation \norg.apache.thrift.transport.TTransportException: HTTP Response code: 500", "author": "mcjaeger", "createdAt": "2020-04-05T23:17:35Z", "path": "frontend/sw360-portlet/src/main/java/org/eclipse/sw360/portal/tags/DisplayProjectChanges.java", "diffHunk": "@@ -114,14 +119,16 @@ public int doStartTag() throws JspException {\n             }\n \n             String renderString = display.toString();\n+            HttpServletRequest request = (HttpServletRequest) pageContext.getRequest();\n+            ResourceBundle resourceBundle = ResourceBundleUtil.getBundle(\"content.Language\", request.getLocale(), getClass());\n \n             if (Strings.isNullOrEmpty(renderString)) {\n-                renderString = \"<div class=\\\"alert alert-info\\\">No changes in basic fields.</div>\";\n+                renderString = \"<div class=\\\"alert alert-info\\\">\"+LanguageUtil.get(resourceBundle,\"no.changes.in.basic.fields\")+\"</div>\";\n             } else {\n                 renderString = String.format(\"<table class=\\\"%s\\\" id=\\\"%schanges\\\" >\", tableClasses, idPrefix)\n                         + \"<thead>\"\n                         + String.format(\"<tr><th>%s</th><th>%s</th><th>%s</th><th>%s</th></tr></thead><tbody>\",\n-                        FIELD_NAME, CURRENT_VAL, DELETED_VAL, SUGGESTED_VAL)", "originalCommit": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTcwMw==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771703", "bodyText": "It seems like the moderation requests for components is broken, not projects. Projects moderation reqeusts seem to work but not component. BTW. screenshot is:\n\n(after accepting a moderation request, screen should return to moderation request list)", "author": "mcjaeger", "createdAt": "2020-04-05T23:21:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTkwMw==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403771903", "bodyText": "moderation request for releases seem to work as well ..", "author": "mcjaeger", "createdAt": "2020-04-05T23:22:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwODUxNQ==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404008515", "bodyText": "ok, I checked this issue and fixed.\nBecause I base on version 6 so when merge with version 8, maybe will appear problem.\nPlease help me re-check.", "author": "nam-np", "createdAt": "2020-04-06T11:08:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1MzIwNg==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404053206", "bodyText": "will check.", "author": "mcjaeger", "createdAt": "2020-04-06T12:31:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA1NjEzNg==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404056136", "bodyText": "awesome, works", "author": "mcjaeger", "createdAt": "2020-04-06T12:36:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MTI4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzAwOA==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403773008", "bodyText": "that looks oddly formatted, but not really a big issue.", "author": "mcjaeger", "createdAt": "2020-04-05T23:31:57Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/view.jsp", "diffHunk": "@@ -189,35 +189,35 @@\n                 <div class=\"modal-header\">\n                     <h5 class=\"modal-title\">\n                         <clay:icon symbol=\"question-circle\" />\n-                        Delete Project?\n+                        <liferay-ui:message key=\"delete.project\" />?\n                     </h5>\n                     <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n                         <span aria-hidden=\"true\">&times;</span>\n                     </button>\n                 </div>\n-                <div class=\"modal-body\">\n-                    <p>Do you really want to delete the project <b data-name=\"name\"></b>?</p>\n+                <div class=\"modal-body\">\t\t \n+\t\t\t\t\t<p><liferay-ui:message key=\"do.you.really.want.to.delete.the.project.x\" /></p>", "originalCommit": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwODU2Mg==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404008562", "bodyText": "yes, I use key format same with Liferay key language.\nex: about-x-hours-ago=About {0} hour(s) ago.", "author": "nam-np", "createdAt": "2020-04-06T11:08:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzAwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzMyOQ==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403773329", "bodyText": "that seems to be at every data table occurrence. I was wondering if that could be put at some single place", "author": "mcjaeger", "createdAt": "2020-04-05T23:34:26Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/projects/includes/projects/clearingStatus.jspf", "diffHunk": "@@ -50,20 +51,40 @@ require(['jquery', 'bridges/datatables', 'utils/render'], function ($, datatable\n         table = datatables.create('#releasesTable', {\n             data: result,\n             columns: [\n-                {title: \"Name\"},\n-                {title: \"Project Origin\"},\n-                {title: \"Clearing State\"},\n-                {title: \"Release Mainline State\"},\n-                {title: \"Project Mainline State\"},\n-                {title: \"Type\"},\n-                {title: \"Actions\", render: {display: renderActions}, className: \"two actions\" }\n+                {title: \"<liferay-ui:message key=\"name\" />\"},\n+                {title: \"<liferay-ui:message key=\"project.origin\" />\"},\n+                {title: \"<liferay-ui:message key=\"clearing.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"release.mainline.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"project.mainline.state\" />\"},\n+                {title: \"<liferay-ui:message key=\"type\" />\"},\n+                {title: \"<liferay-ui:message key=\"actions\" />\", render: {display: renderActions}, className: \"two actions\" }\n             ],\n             columnDefs: [\n                 {\n                     targets: [ 6 ],\n                     visible: $('#releasesTable').data() ? $('#releasesTable').data().detailsContext : false\n                 }\n-            ]\n+            ],\n+            language: {", "originalCommit": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwODYwNg==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404008606", "bodyText": "Good idea, now I changed by using language file for datatables:\nhttps://datatables.net/examples/advanced_init/language_file.html\nBut EmptyTable will default value \"No data available in table\" instead some value (ex: No releases found). If you think it is a big problem, please tell to me.", "author": "nam-np", "createdAt": "2020-04-06T11:08:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3MzMyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NDExMA==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r403774110", "bodyText": "I would have included the question mark, but maybe it is also OK like this.", "author": "mcjaeger", "createdAt": "2020-04-05T23:41:18Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/licenses/edit.jsp", "diffHunk": "@@ -109,18 +109,18 @@\n                     <div class=\"modal-header\">\n                         <h5 class=\"modal-title\">\n                             <clay:icon symbol=\"question-circle\" />\n-                            Delete License?\n+                            <liferay-ui:message key=\"delete.license\" />?", "originalCommit": "994ad5c6388d86fff5fae9190f4939f2dfefd5d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwODY5OQ==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404008699", "bodyText": "yes, because I want to re-use key \"delete.license\" for two cases.", "author": "nam-np", "createdAt": "2020-04-06T11:08:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NDExMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAyODM3MA==", "url": "https://github.com/eclipse/sw360/pull/816#discussion_r404028370", "bodyText": "(it deleted my comment ... I it very fine.)", "author": "mcjaeger", "createdAt": "2020-04-06T11:46:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc3NDExMA=="}], "type": "inlineReview"}, {"oid": "8bd91be9cb5ab04d3af725ec5815017a07e38cf6", "url": "https://github.com/eclipse/sw360/commit/8bd91be9cb5ab04d3af725ec5815017a07e38cf6", "message": "feat: SW360 support multi-language update after review\n\nSigned-off-by: Nguyen Phuong Nam <nam.nguyenphuong@toshiba-tsdv.com>", "committedDate": "2020-04-06T11:06:11Z", "type": "commit"}]}