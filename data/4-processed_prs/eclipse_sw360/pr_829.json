{"pr_number": 829, "pr_title": "feat(additionalData): Support custom fields in Component and Release page", "pr_createdAt": "2020-04-13T12:01:33Z", "pr_url": "https://github.com/eclipse/sw360/pull/829", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU5NTg1OA==", "url": "https://github.com/eclipse/sw360/pull/829#discussion_r420595858", "bodyText": "May be jquery-ui can be removed from here or the date picker can be moved to the already existing require block.", "author": "smrutis1", "createdAt": "2020-05-06T07:32:27Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/utils/includes/editAdditionalData.jsp", "diffHunk": "@@ -47,6 +90,9 @@\n </div>\n \n <script>\n+\trequire(['jquery', /* jquery-plugins */ 'jquery-ui'], function($) {", "originalCommit": "e9da2e6b2bbbca819c18d0fb7f1bf7571973933e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3NzIzOA==", "url": "https://github.com/eclipse/sw360/pull/829#discussion_r422077238", "bodyText": "only release page has jquery-ui and datepicker function, so this is required, when use this feature in the component page.", "author": "AlbertHjy", "createdAt": "2020-05-08T10:50:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU5NTg1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU5NjA3OQ==", "url": "https://github.com/eclipse/sw360/pull/829#discussion_r420596079", "bodyText": "I think, It will always display only the first checkbox.", "author": "smrutis1", "createdAt": "2020-05-06T07:32:54Z", "path": "frontend/sw360-portlet/src/main/resources/META-INF/resources/html/utils/includes/editAdditionalData.jsp", "diffHunk": "@@ -17,6 +17,49 @@\n             <th colspan=\"3\" class=\"headlabel\"><liferay-ui:message key=\"additional.data\" /></th>\n         </tr>\n     </thead>\n+\t<c:forEach var=\"customField\" items=\"${customFields}\">\n+\t\t<tr <c:if test=\"${customField.hidden}\">style=\"display:none\"</c:if> class=\"bodyRow\">\n+\t\t\t<td>\n+\t\t\t\t<div>\n+\t\t\t\t\t<input class=\"form-control\" id=\"${customField.fieldKey}\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_KEY%>${customField.fieldKey}\"\n+\t\t\t\t\t\t   type=\"text\" value=\"<sw360:out value=\"${customField.fieldLabel}\"/>\" readonly/>\n+\t\t\t\t</div>\n+\t\t\t</td>\n+\t\t\t<td>\n+\t\t\t\t<div>\n+\t\t\t\t\t<c:if test=\"${customField.fieldType == 'TEXTFIELD'}\">\n+\t\t\t\t\t\t<input class=\"form-control\" id=\"${customField.fieldLabel}\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_VALUE%>${customField.fieldKey}\"\n+\t\t\t\t\t\t\t   type=\"text\" placeholder=\"Enter ${customField.fieldLabel}\"\n+\t\t\t\t\t\t\t   <c:if test=\"${not empty customField.fieldPattern}\">pattern=\"${customField.fieldPattern}\" title=\"${customField.fieldPattern}\"</c:if>\n+\t\t\t\t\t\t\t   value=\"<sw360:out value=\"${customField.value}\"/>\"/>\n+\t\t\t\t\t</c:if>\n+\t\t\t\t\t<c:if test=\"${customField.fieldType == 'TEXTAREA'}\">\n+\t\t\t\t\t\t<textarea class=\"form-control\" id=\"${customField.fieldLabel}\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_VALUE%>${customField.fieldKey}\"\n+\t\t\t\t\t\t\t\t  rows=\"4\" placeholder=\"Enter ${customField.fieldLabel}\">${customField.value}</textarea>\n+\t\t\t\t\t</c:if>\n+\t\t\t\t\t<c:if test=\"${customField.fieldType == 'DATE'}\">\n+\t\t\t\t\t\t<input id=\"${customField.fieldLabel}\" class=\"datepicker form-control\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_VALUE%>${customField.fieldKey}\" type=\"text\"\n+\t\t\t\t\t\t\t   placeholder=\"Enter ${customField.fieldLabel}\" pattern=\"\\d{4}-\\d{2}-\\d{2}\"\n+\t\t\t\t\t\t\t   value=\"<sw360:out value=\"${customField.value}\"/>\"/>\n+\t\t\t\t\t</c:if>\n+\t\t\t\t\t<c:if test=\"${customField.fieldType == 'DROPDOWN'}\">\n+\t\t\t\t\t\t<select class=\"form-control\" id=\"${customField.fieldLabel}\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_VALUE%>${customField.fieldKey}\">\n+\t\t\t\t\t\t\t<option value=\"\">Select:</option>\n+\t\t\t\t\t\t\t<c:forEach var=\"option\" items=\"${customField.options}\">\n+\t\t\t\t\t\t\t\t<option value=\"${option}\" <c:if test=\"${option eq customField.value}\">selected</c:if>>${option}</option>\n+\t\t\t\t\t\t\t</c:forEach>\n+\t\t\t\t\t\t</select>\n+\t\t\t\t\t</c:if>\n+\t\t\t\t\t<c:if test=\"${customField.fieldType == 'CHECKBOX'}\">\n+\t\t\t\t\t\t<input id=\"${customField.fieldLabel}\" type=\"checkbox\" class=\"form-check-input\" name=\"<portlet:namespace/><%=PortalConstants.ADDITIONAL_DATA_VALUE%>${customField.fieldKey}\"", "originalCommit": "e9da2e6b2bbbca819c18d0fb7f1bf7571973933e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjA3OTE1OA==", "url": "https://github.com/eclipse/sw360/pull/829#discussion_r422079158", "bodyText": "Yes, multi-checkbox is not supported, because of the addtionalData is key:value string pair.\nFollowing is a workaround to store multi values.\nComponent Status 1: Checkbox with value 1\nComponent Status 2: Checkbox with value 2", "author": "AlbertHjy", "createdAt": "2020-05-08T10:55:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDU5NjA3OQ=="}], "type": "inlineReview"}, {"oid": "89714248c6cba6a757d4165d7728728534a1ae38", "url": "https://github.com/eclipse/sw360/commit/89714248c6cba6a757d4165d7728728534a1ae38", "message": "feat: Support custom fields in addionalData group in Component and Release page\n\nSigned-off-by: He, Albert <albert.he@sap.com>", "committedDate": "2020-05-08T10:43:15Z", "type": "commit"}, {"oid": "a4b441076c7e9e9defd32260c8a12e17a78a3f6e", "url": "https://github.com/eclipse/sw360/commit/a4b441076c7e9e9defd32260c8a12e17a78a3f6e", "message": "feat: Resolve conflict\n\nSigned-off-by: He, Albert <albert.he@sap.com>", "committedDate": "2020-05-08T10:44:12Z", "type": "commit"}, {"oid": "a4b441076c7e9e9defd32260c8a12e17a78a3f6e", "url": "https://github.com/eclipse/sw360/commit/a4b441076c7e9e9defd32260c8a12e17a78a3f6e", "message": "feat: Resolve conflict\n\nSigned-off-by: He, Albert <albert.he@sap.com>", "committedDate": "2020-05-08T10:44:12Z", "type": "forcePushed"}, {"oid": "e40b8653232f2d81a1b71e962a2446e2fd89530c", "url": "https://github.com/eclipse/sw360/commit/e40b8653232f2d81a1b71e962a2446e2fd89530c", "message": "Merge branch 'master' into supportCustomFieldToComponentAndRelease", "committedDate": "2020-05-12T00:39:12Z", "type": "commit"}]}