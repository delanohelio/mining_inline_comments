{"pr_number": 1643, "pr_title": "Split travis build into multiple jobs", "pr_createdAt": "2020-10-03T15:20:50Z", "pr_url": "https://github.com/linkedin/ambry/pull/1643", "timeline": [{"oid": "9aa484964ddc7997fdb72a6a435ef2604ee59f00", "url": "https://github.com/linkedin/ambry/commit/9aa484964ddc7997fdb72a6a435ef2604ee59f00", "message": "Split travis build into multiple jobs\n\nOur build on the master branch is occaisionally hitting the 50 minute\ntravis-ci job timeout. To give more headroom, we can split independent\nparts of the build into multiple jobs.\n- Integration tests and unit tests will run in parallel jobs. Coverage\n  reports are supposed to be merged according to codecov docs.\n  (https://docs.codecov.io/docs/merging-reports)\n- Publishing to bintray will run after both test jobs pass on the master\n  branch.", "committedDate": "2020-10-03T16:49:44Z", "type": "forcePushed"}, {"oid": "134609c29d3c88ea7208c7aa31ea0e305b94b6d5", "url": "https://github.com/linkedin/ambry/commit/134609c29d3c88ea7208c7aa31ea0e305b94b6d5", "message": "Split travis build into multiple jobs\n\nOur build on the master branch is occaisionally hitting the 50 minute\ntravis-ci job timeout. To give more headroom, we can split independent\nparts of the build into multiple jobs.\n- Integration tests and unit tests will run in parallel jobs. Coverage\n  reports are supposed to be merged according to codecov docs.\n  (https://docs.codecov.io/docs/merging-reports)\n- Publishing to bintray will run after both test jobs pass on the master\n  branch.", "committedDate": "2020-10-05T16:30:56Z", "type": "forcePushed"}, {"oid": "bcebc362ef826a8c049c434531e54bd0dbc71a5b", "url": "https://github.com/linkedin/ambry/commit/bcebc362ef826a8c049c434531e54bd0dbc71a5b", "message": "Split travis build into multiple jobs\n\nOur build on the master branch is occaisionally hitting the 50 minute\ntravis-ci job timeout. To give more headroom, we can split independent\nparts of the build into multiple jobs.\n- Integration tests and unit tests will run in parallel jobs. Coverage\n  reports are supposed to be merged according to codecov docs.\n  (https://docs.codecov.io/docs/merging-reports)\n- Publishing to bintray will run after both test jobs pass on the master\n  branch.", "committedDate": "2020-10-05T16:36:37Z", "type": "commit"}, {"oid": "bcebc362ef826a8c049c434531e54bd0dbc71a5b", "url": "https://github.com/linkedin/ambry/commit/bcebc362ef826a8c049c434531e54bd0dbc71a5b", "message": "Split travis build into multiple jobs\n\nOur build on the master branch is occaisionally hitting the 50 minute\ntravis-ci job timeout. To give more headroom, we can split independent\nparts of the build into multiple jobs.\n- Integration tests and unit tests will run in parallel jobs. Coverage\n  reports are supposed to be merged according to codecov docs.\n  (https://docs.codecov.io/docs/merging-reports)\n- Publishing to bintray will run after both test jobs pass on the master\n  branch.", "committedDate": "2020-10-05T16:36:37Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1OTk4Ng==", "url": "https://github.com/linkedin/ambry/pull/1643#discussion_r499759986", "bodyText": "what does this do? we download a bash file and run this file? but what does it do?", "author": "justinlin-linkedin", "createdAt": "2020-10-05T17:30:42Z", "path": "travis-int-test.sh", "diffHunk": "@@ -0,0 +1,10 @@\n+#!/bin/bash\n+\n+# exit when any command fails\n+set -e\n+\n+echo \"Running integration tests\"\n+./gradlew -s --scan intTest codeCoverageReport\n+\n+echo \"Uploading integration test coverage to codecov\"\n+bash <(curl -s https://codecov.io/bash)", "originalCommit": "bcebc362ef826a8c049c434531e54bd0dbc71a5b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc2NzI2Nw==", "url": "https://github.com/linkedin/ambry/pull/1643#discussion_r499767267", "bodyText": "This script searches for the coverage report in the project build directory, detects what type it is and then uploads it to the codecov server. This used to be in the after_success part of yaml file but had to be moved since adding the multiple jobs.\nMore details on the script here", "author": "cgtz", "createdAt": "2020-10-05T17:44:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5OTc1OTk4Ng=="}], "type": "inlineReview"}]}