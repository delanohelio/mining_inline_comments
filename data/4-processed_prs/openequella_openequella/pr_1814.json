{"pr_number": 1814, "pr_title": "Created Search Result component, including storybook tests. Renamed D\u2026", "pr_createdAt": "2020-06-11T02:39:14Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/1814", "timeline": [{"oid": "ce2c715b04b9410d885acba4c6dba1d241665a7f", "url": "https://github.com/openequella/openEQUELLA/commit/ce2c715b04b9410d885acba4c6dba1d241665a7f", "message": "Created Search Result component, including storybook tests. Renamed Date component, to prevent clashes with Typescript date object", "committedDate": "2020-06-11T02:13:29Z", "type": "commit"}, {"oid": "23b22d2566fcbfd25843a012a8279d638ee861ca", "url": "https://github.com/openequella/openEQUELLA/commit/23b22d2566fcbfd25843a012a8279d638ee861ca", "message": "fix attachment panel event type errors", "committedDate": "2020-06-11T07:32:17Z", "type": "commit"}, {"oid": "ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "url": "https://github.com/openequella/openEQUELLA/commit/ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "message": "actually add the storybook tests", "committedDate": "2020-06-11T08:07:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgzNzk2Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r438837963", "bodyText": "Date is already the default export, does it also need a named/aliased export?", "author": "ChristianMurphy", "createdAt": "2020-06-11T14:42:11Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/components/Date.tsx", "diffHunk": "@@ -40,18 +40,21 @@ export default function Date({ displayRelative, date }: DateProps) {\n   const luxDate = DateTime.fromJSDate(date);\n   let primaryDate = luxDate.toLocaleString(DateTime.DATETIME_MED);\n   let hoverDate = luxDate.toRelative() || \"undefined\";\n-\n   if (displayRelative) {\n     //swap 'em around\n     [primaryDate, hoverDate] = [hoverDate, primaryDate];\n   }\n \n   return (\n     <Tooltip title={hoverDate}>\n-      <Typography className={classes.dateModified} variant=\"subtitle1\">\n+      <Typography\n+        className={classes.dateModified}\n+        component=\"span\"\n+        variant=\"body1\"\n+      >\n         {primaryDate}\n       </Typography>\n     </Tooltip>\n   );\n }\n-export { Date };\n+export { Date as DateDisplay };", "originalCommit": "ce2c715b04b9410d885acba4c6dba1d241665a7f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgzOTAwNw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r438839007", "bodyText": "There is only one component, a fragment wrapper isn't needed.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <>\n          \n          \n            \n                      <img\n          \n          \n            \n                        className={classes.thumbnail}\n          \n          \n            \n                        src={attachments[0].links.thumbnail}\n          \n          \n            \n                        alt={attachments[0].description}\n          \n          \n            \n                      />\n          \n          \n            \n                    </>\n          \n          \n            \n                    <img\n          \n          \n            \n                      className={classes.thumbnail}\n          \n          \n            \n                      src={attachments[0].links.thumbnail}\n          \n          \n            \n                      alt={attachments[0].description}\n          \n          \n            \n                    />", "author": "ChristianMurphy", "createdAt": "2020-06-11T14:43:40Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,241 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <>\n+          <img\n+            className={classes.thumbnail}\n+            src={attachments[0].links.thumbnail}\n+            alt={attachments[0].description}\n+          />\n+        </>", "originalCommit": "ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIxNjU4MQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439216581", "bodyText": "Yeah, i had only just discovered react fragments, so i just went a bit crazy throwing them in everywhere", "author": "mrblippy", "createdAt": "2020-06-12T05:38:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgzOTAwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0MDIyMQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r438840221", "bodyText": "There is a single root tag, ListItem here, a wrapping fragment isn't needed.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  <>\n          \n          \n            \n                    <ListItem disableGutters dense>\n          \n          \n            \n                      <Typography\n          \n          \n            \n                        component=\"span\"\n          \n          \n            \n                        variant=\"body2\"\n          \n          \n            \n                        className={classes.heading}\n          \n          \n            \n                        color=\"textPrimary\"\n          \n          \n            \n                      >\n          \n          \n            \n                        {element.name}\n          \n          \n            \n                      </Typography>\n          \n          \n            \n                      <Typography\n          \n          \n            \n                        component=\"span\"\n          \n          \n            \n                        variant=\"body2\"\n          \n          \n            \n                        className={classes.inline}\n          \n          \n            \n                        color=\"textPrimary\"\n          \n          \n            \n                        dangerouslySetInnerHTML={{ __html: element.html }}\n          \n          \n            \n                      ></Typography>\n          \n          \n            \n                    </ListItem>\n          \n          \n            \n                  </>\n          \n          \n            \n                  <ListItem disableGutters dense>\n          \n          \n            \n                    <Typography\n          \n          \n            \n                      component=\"span\"\n          \n          \n            \n                      variant=\"body2\"\n          \n          \n            \n                      className={classes.heading}\n          \n          \n            \n                      color=\"textPrimary\"\n          \n          \n            \n                    >\n          \n          \n            \n                      {element.name}\n          \n          \n            \n                    </Typography>\n          \n          \n            \n                    <Typography\n          \n          \n            \n                      component=\"span\"\n          \n          \n            \n                      variant=\"body2\"\n          \n          \n            \n                      className={classes.inline}\n          \n          \n            \n                      color=\"textPrimary\"\n          \n          \n            \n                      dangerouslySetInnerHTML={{ __html: element.html }}\n          \n          \n            \n                    ></Typography>\n          \n          \n            \n                  </ListItem>", "author": "ChristianMurphy", "createdAt": "2020-06-11T14:45:21Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,241 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <>\n+          <img\n+            className={classes.thumbnail}\n+            src={attachments[0].links.thumbnail}\n+            alt={attachments[0].description}\n+          />\n+        </>\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <>\n+        <ListItem disableGutters dense>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.heading}\n+            color=\"textPrimary\"\n+          >\n+            {element.name}\n+          </Typography>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.inline}\n+            color=\"textPrimary\"\n+            dangerouslySetInnerHTML={{ __html: element.html }}\n+          ></Typography>\n+        </ListItem>\n+      </>", "originalCommit": "ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0MDYzNA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r438840634", "bodyText": "same here\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <>\n          \n          \n            \n                      <ListItem\n          \n          \n            \n                        key={attachment.id || attachment.uuid}\n          \n          \n            \n                        button\n          \n          \n            \n                        className={classes.nested}\n          \n          \n            \n                      >\n          \n          \n            \n                        <ListItemIcon>\n          \n          \n            \n                          <InsertDriveFile />\n          \n          \n            \n                        </ListItemIcon>\n          \n          \n            \n                        <ListItemText color=\"primary\" primary={attachment.description} />\n          \n          \n            \n                      </ListItem>\n          \n          \n            \n                    </>\n          \n          \n            \n                    <ListItem\n          \n          \n            \n                      key={attachment.id || attachment.uuid}\n          \n          \n            \n                      button\n          \n          \n            \n                      className={classes.nested}\n          \n          \n            \n                    >\n          \n          \n            \n                      <ListItemIcon>\n          \n          \n            \n                        <InsertDriveFile />\n          \n          \n            \n                      </ListItemIcon>\n          \n          \n            \n                      <ListItemText color=\"primary\" primary={attachment.description} />\n          \n          \n            \n                    </ListItem>", "author": "ChristianMurphy", "createdAt": "2020-06-11T14:45:55Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,241 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <>\n+          <img\n+            className={classes.thumbnail}\n+            src={attachments[0].links.thumbnail}\n+            alt={attachments[0].description}\n+          />\n+        </>\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <>\n+        <ListItem disableGutters dense>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.heading}\n+            color=\"textPrimary\"\n+          >\n+            {element.name}\n+          </Typography>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.inline}\n+            color=\"textPrimary\"\n+            dangerouslySetInnerHTML={{ __html: element.html }}\n+          ></Typography>\n+        </ListItem>\n+      </>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {\n+      return (\n+        <>\n+          <ListItem\n+            key={attachment.id || attachment.uuid}\n+            button\n+            className={classes.nested}\n+          >\n+            <ListItemIcon>\n+              <InsertDriveFile />\n+            </ListItemIcon>\n+            <ListItemText color=\"primary\" primary={attachment.description} />\n+          </ListItem>\n+        </>", "originalCommit": "ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0MTE5OQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r438841199", "bodyText": "the if contains a return, the else on the line can be omitted.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                else return null;\n          \n          \n            \n                return null;", "author": "ChristianMurphy", "createdAt": "2020-06-11T14:46:41Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,241 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <>\n+          <img\n+            className={classes.thumbnail}\n+            src={attachments[0].links.thumbnail}\n+            alt={attachments[0].description}\n+          />\n+        </>\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <>\n+        <ListItem disableGutters dense>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.heading}\n+            color=\"textPrimary\"\n+          >\n+            {element.name}\n+          </Typography>\n+          <Typography\n+            component=\"span\"\n+            variant=\"body2\"\n+            className={classes.inline}\n+            color=\"textPrimary\"\n+            dangerouslySetInnerHTML={{ __html: element.html }}\n+          ></Typography>\n+        </ListItem>\n+      </>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {\n+      return (\n+        <>\n+          <ListItem\n+            key={attachment.id || attachment.uuid}\n+            button\n+            className={classes.nested}\n+          >\n+            <ListItemIcon>\n+              <InsertDriveFile />\n+            </ListItemIcon>\n+            <ListItemText color=\"primary\" primary={attachment.description} />\n+          </ListItem>\n+        </>\n+      );\n+    });\n+\n+    if (attachmentsList.length > 0)\n+      return (\n+        <List component=\"div\">\n+          <ListItem\n+            button\n+            onClick={(event) => handleAttachmentPanelClick(event)}\n+          >\n+            <ListItemIcon>\n+              <AttachFile />\n+            </ListItemIcon>\n+            <ListItemText primary={searchResultStrings.attachments} />\n+            {attachExapanded ? <ExpandLess /> : <ExpandMore />}\n+          </ListItem>\n+          <Collapse in={attachExapanded} timeout=\"auto\" unmountOnExit>\n+            <List component=\"div\" disablePadding>\n+              {attachmentsList}\n+            </List>\n+          </Collapse>\n+        </List>\n+      );\n+    else return null;", "originalCommit": "ae61c8b40c4e7c4d55bf8df18703499d3afcbeb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIxNjgzOA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439216838", "bodyText": "I didn't know that. That's very good to know", "author": "mrblippy", "createdAt": "2020-06-12T05:39:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0MTE5OQ=="}], "type": "inlineReview"}, {"oid": "9ca42e85da566b21e7a5caaa2d06c03a28eb01c1", "url": "https://github.com/openequella/openEQUELLA/commit/9ca42e85da566b21e7a5caaa2d06c03a28eb01c1", "message": "Don't explicitly import the thumb.jpg, just use the path", "committedDate": "2020-06-11T23:50:52Z", "type": "commit"}, {"oid": "47db123a72c3a62ca5309a9eee1931fc65529dba", "url": "https://github.com/openequella/openEQUELLA/commit/47db123a72c3a62ca5309a9eee1931fc65529dba", "message": "actually remove the thumb.jpg import", "committedDate": "2020-06-12T00:00:29Z", "type": "commit"}, {"oid": "0c1a24b2a2479dff182aba6da7e286af17439289", "url": "https://github.com/openequella/openEQUELLA/commit/0c1a24b2a2479dff182aba6da7e286af17439289", "message": "rejigged date component imports", "committedDate": "2020-06-12T05:31:33Z", "type": "commit"}, {"oid": "18762f5796c89244c879adde869c5ca8f335242a", "url": "https://github.com/openequella/openEQUELLA/commit/18762f5796c89244c879adde869c5ca8f335242a", "message": "removed unneccesary react fragments", "committedDate": "2020-06-12T05:43:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMDExMA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439230110", "bodyText": "May I ask why use the thumbnail and description of the first attachment?", "author": "PenghaiZhang", "createdAt": "2020-06-12T06:26:12Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI5Mjg2Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441292867", "bodyText": "Just to keep it simple, i think there was some talk about rotating through all of the different thumbnails. But we're not doing that for the moment", "author": "mrblippy", "createdAt": "2020-06-17T05:42:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMDExMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMDUyMg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439230522", "bodyText": "What about adding the type of returned data and JSDoc?", "author": "PenghaiZhang", "createdAt": "2020-06-12T06:27:24Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMTE4NQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439231185", "bodyText": "body1 is the default value of variant if I remember.", "author": "PenghaiZhang", "createdAt": "2020-06-12T06:29:17Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMjczOA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439232738", "bodyText": "Can we put {searchResultStrings.dateModified} inside DateDisplay  and then there is no need for the outer Typograph?", "author": "PenghaiZhang", "createdAt": "2020-06-12T06:33:38Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyMjI0NA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440522244", "bodyText": "We could, but the Date component won't only be used for dateModified. Perhaps I could alter the Date component to accept an optional Title prop?", "author": "mrblippy", "createdAt": "2020-06-16T00:41:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMjczOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1MDY3Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440550673", "bodyText": "I think it might be okay as is. Not sure we want to add things like a title etc to the simple Date component.", "author": "edalex-ian", "createdAt": "2020-06-16T02:29:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMjczOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMDUyMg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441230522", "bodyText": "I will leave it alone for the moment", "author": "mrblippy", "createdAt": "2020-06-17T01:33:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTIzMjczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI0MzkwNA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r439243904", "bodyText": "Do we need this List which has only one ListItem and one Collapse ?", "author": "PenghaiZhang", "createdAt": "2020-06-12T07:04:06Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <ListItem disableGutters dense>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.heading}\n+          color=\"textPrimary\"\n+        >\n+          {element.name}\n+        </Typography>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.inline}\n+          color=\"textPrimary\"\n+          dangerouslySetInnerHTML={{ __html: element.html }}\n+        ></Typography>\n+      </ListItem>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {\n+      return (\n+        <ListItem\n+          key={attachment.id || attachment.uuid}\n+          button\n+          className={classes.nested}\n+        >\n+          <ListItemIcon>\n+            <InsertDriveFile />\n+          </ListItemIcon>\n+          <ListItemText color=\"primary\" primary={attachment.description} />\n+        </ListItem>\n+      );\n+    });\n+\n+    if (attachmentsList.length > 0)\n+      return (\n+        <List component=\"div\">", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDYyMTY0Ng==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440621646", "bodyText": "Yeah, that's true, it's more a heading than anything. There will never be more than one item in the list. I could change it to an expansion panel, as that makes more sense", "author": "mrblippy", "createdAt": "2020-06-16T06:47:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI0MzkwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyMzgwOA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440523808", "bodyText": "Line 53 is not necessary - the default variant is body1.", "author": "SammyIsConfused", "createdAt": "2020-06-16T00:47:55Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/components/Date.tsx", "diffHunk": "@@ -40,15 +40,18 @@ export default function Date({ displayRelative, date }: DateProps) {\n   const luxDate = DateTime.fromJSDate(date);\n   let primaryDate = luxDate.toLocaleString(DateTime.DATETIME_MED);\n   let hoverDate = luxDate.toRelative() || \"undefined\";\n-\n   if (displayRelative) {\n     //swap 'em around\n     [primaryDate, hoverDate] = [hoverDate, primaryDate];\n   }\n \n   return (\n     <Tooltip title={hoverDate}>\n-      <Typography className={classes.dateModified} variant=\"subtitle1\">\n+      <Typography\n+        className={classes.dateModified}\n+        component=\"span\"\n+        variant=\"body1\"", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyNDg2Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440524863", "bodyText": "Might be worth using something more responsive than px.", "author": "SammyIsConfused", "createdAt": "2020-06-16T00:51:53Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI1NDMyMQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441254321", "bodyText": "88px was chosen because that's the same width as the regular thumbnails in oEQ. I think we leave as-is for now, since the non placeholder thumbnail is not responsive either", "author": "mrblippy", "createdAt": "2020-06-17T03:05:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyNDg2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyODU3Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440528577", "bodyText": "Is there a Material UI wrapper for images?", "author": "SammyIsConfused", "createdAt": "2020-06-16T01:05:22Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI1NDQ4NQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441254485", "bodyText": "Don't think so, the closest thing is the Avatar component. But that doesn't quite fit the purpose", "author": "mrblippy", "createdAt": "2020-06-17T03:06:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyODU3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyOTE5OQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440529199", "bodyText": "Avoid using dangerouslySetInnerHTML as it opens us up to XSS. We have a plugin designed for this - look into react-html-parser.", "author": "SammyIsConfused", "createdAt": "2020-06-16T01:07:40Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <ListItem disableGutters dense>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.heading}\n+          color=\"textPrimary\"\n+        >\n+          {element.name}\n+        </Typography>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.inline}\n+          color=\"textPrimary\"\n+          dangerouslySetInnerHTML={{ __html: element.html }}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyOTM1Mg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440529352", "bodyText": "this can be shorthanded to just button", "author": "SammyIsConfused", "createdAt": "2020-06-16T01:08:17Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <ListItem disableGutters dense>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.heading}\n+          color=\"textPrimary\"\n+        >\n+          {element.name}\n+        </Typography>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.inline}\n+          color=\"textPrimary\"\n+          dangerouslySetInnerHTML={{ __html: element.html }}\n+        ></Typography>\n+      </ListItem>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {\n+      return (\n+        <ListItem\n+          key={attachment.id || attachment.uuid}\n+          button\n+          className={classes.nested}\n+        >\n+          <ListItemIcon>\n+            <InsertDriveFile />\n+          </ListItemIcon>\n+          <ListItemText color=\"primary\" primary={attachment.description} />\n+        </ListItem>\n+      );\n+    });\n+\n+    if (attachmentsList.length > 0)\n+      return (\n+        <List component=\"div\">\n+          <ListItem\n+            button\n+            onClick={(event) => handleAttachmentPanelClick(event)}\n+          >\n+            <ListItemIcon>\n+              <AttachFile />\n+            </ListItemIcon>\n+            <ListItemText primary={searchResultStrings.attachments} />\n+            {attachExapanded ? <ExpandLess /> : <ExpandMore />}\n+          </ListItem>\n+          <Collapse in={attachExapanded} timeout=\"auto\" unmountOnExit>\n+            <List component=\"div\" disablePadding>\n+              {attachmentsList}\n+            </List>\n+          </Collapse>\n+        </List>\n+      );\n+    return null;\n+  };\n+\n+  return (\n+    <ListItem\n+      onClick={onClick}\n+      alignItems=\"flex-start\"\n+      button={true}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2NDkxNg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440564916", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  button={true}\n          \n          \n            \n                  button", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:28:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDUyOTM1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NDI5MQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440544291", "bodyText": "Wowsers, that's ~140 lines of just Mock data. So that the story can focus on the task at hand, could you push them out into a mock file and then import? (See the __mocks__ directory.)", "author": "edalex-ian", "createdAt": "2020-06-16T02:04:55Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NDcwMA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440544700", "bodyText": "Ummm, is this meant to be here? Looks like it's stray...", "author": "edalex-ian", "createdAt": "2020-06-16T02:06:16Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/components/Date.tsx", "diffHunk": "@@ -26,7 +26,7 @@ const useStyles = makeStyles({\n   },\n });\n export interface DateProps {\n-  /**\n+  /**Date", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzMjkyNw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441232927", "bodyText": "Yeah, i reckon I had the wrong window focused without realising", "author": "mrblippy", "createdAt": "2020-06-17T01:42:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NDcwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NTc4OA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440545788", "bodyText": "Correct me if I'm wrong, but this is the only place you use resultData. So if that's correct, then you might as well just do the de-structuring in the function's argument list.", "author": "edalex-ian", "createdAt": "2020-06-16T02:10:34Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIzNDI1OQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441234259", "bodyText": "I spoke to Penghai about this, we have decided to do this when his Search2 endpoint work has been merged in (which contains the type definitions i need) But I will put a TODO to make sure I don't forget it", "author": "mrblippy", "createdAt": "2020-06-17T01:47:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NTc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg5NTAzNA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441895034", "bodyText": "Okay cool. So that's been merged in now, will you do it as part of this PR?", "author": "edalex-ian", "createdAt": "2020-06-17T23:55:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NTc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1MDk3NQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441950975", "bodyText": "I will merge this in as-is, and do a separate PR to fix up the types", "author": "mrblippy", "createdAt": "2020-06-18T03:41:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NTc4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NzQ0Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440547447", "bodyText": "This made me pause, but then I'm guessing this is done so that a click on the attachments does not trigger a click on the item. Is that correct?\nSeeing I'm having to guess, it could be nice to add a short comment above this line.", "author": "edalex-ian", "createdAt": "2020-06-16T02:17:27Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1OTcwNA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440559704", "bodyText": "Yeah, that's correct. But yeah, definitely should have a comment, so the intent is clear", "author": "mrblippy", "createdAt": "2020-06-16T03:06:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0NzQ0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU0OTE5Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440549197", "bodyText": "Having multiple return paths can lead to bugs and can be good to avoid, so if you stayed with this if/else you'd probably want to setup a result variable and return it at the end of the function. However, you may be able to get away with something like:\n  const thumbnail = (disableThumb: boolean) =>\n      (attachments.length > 0 && !disableThumb) ?\n        <img\n          attr1=\"...\"\n          attrn=\"...\"\n        /> :\n        <Subject ...... />\nNo need for return or if/else.", "author": "edalex-ian", "createdAt": "2020-06-16T02:24:13Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU1MDkxMQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440550911", "bodyText": "I guess we need a TODO on this any to update when we update to use the actual types from the REST Client?", "author": "edalex-ian", "createdAt": "2020-06-16T02:30:35Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <ListItem disableGutters dense>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.heading}\n+          color=\"textPrimary\"\n+        >\n+          {element.name}\n+        </Typography>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.inline}\n+          color=\"textPrimary\"\n+          dangerouslySetInnerHTML={{ __html: element.html }}\n+        ></Typography>\n+      </ListItem>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2MzEyMg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563122", "bodyText": "For event listeners use https://github.com/storybookjs/storybook/tree/master/addons/actions\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                onClick={() => alert(\"result clicked\")}\n          \n          \n            \n                onClick={action(\"onClick\")}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:21:59Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}\n+    onClick={() => alert(\"result clicked\")}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2MzE2Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563167", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                onClick={() => alert(\"result clicked\")}\n          \n          \n            \n                onClick={action(\"onClick\")}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:22:10Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const AttachmentSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={attachSearchObj}\n+    onClick={() => alert(\"result clicked\")}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2MzIwMg==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563202", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                onClick={() => alert(\"result clicked\")}\n          \n          \n            \n                onClick={action(\"onClick\")}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:22:17Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const AttachmentSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={attachSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const CustomMetadataSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={customMetaSearchObj}\n+    onClick={() => alert(\"result clicked\")}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2MzU1NQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563555", "bodyText": "consider wrapping the objects in knobs to allow for easy testing with other data.\nhttps://github.com/storybookjs/storybook/tree/master/addons/knobs#object\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                resultData={basicSearchObj}\n          \n          \n            \n                resultData={object(\"resultData\", basicSearchObj)}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:23:50Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2MzY2MA==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563660", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                resultData={attachSearchObj}\n          \n          \n            \n                resultData={object(\"result data\", attachSearchObj)}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:24:18Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const AttachmentSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={attachSearchObj}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2Mzc0Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440563747", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                resultData={customMetaSearchObj}\n          \n          \n            \n                resultData={object(\"result data\", customMetaSearchObj)}", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:24:39Z", "path": "Source/Plugins/Core/com.equella.core/js/__stories__/components/SearchResult.stories.tsx", "diffHunk": "@@ -0,0 +1,164 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import SearchResult from \"../../tsrc/search/components/SearchResult\";\n+\n+export default {\n+  title: \"SerachResult\",\n+  component: SearchResult,\n+};\n+\n+const basicSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const attachSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+const customMetaSearchObj = {\n+  uuid: \"72558c1d-8788-4515-86c8-b24a28cc451e\",\n+  name: \"Little Larry\",\n+  description: \"A description of a bird\",\n+  status: \"live\",\n+  createdDate: \"2020-05-26T13:24:00.889+10:00\",\n+  modifiedDate: \"2020-05-26T12:45:06.857+10:00\",\n+  collectionId: \"b28f1ffe-2008-4f5e-d559-83c8acd79316\",\n+  commentCount: 0,\n+  attachments: [\n+    {\n+      attachmentType: \"file\",\n+      id: \"78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+      description: \"config.json\",\n+      preview: false,\n+      links: {\n+        view:\n+          \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/?attachment.uuid=78b8af7e-f0f5-4b5c-9f44-16f212583fe8\",\n+        thumbnail: \"./thumb.jpg\",\n+      },\n+    },\n+  ],\n+  thumbnail: \"default\",\n+  displayFields: [\n+    {\n+      type: \"node\",\n+      name: \"Collection\",\n+      html: \"cats, bobs, flerps\",\n+    },\n+    {\n+      type: \"node\",\n+      name: \"Url metadata\",\n+      html:\n+        '<a href=\"http://www.abc.net.au/news\">http://www.abc.net.au/news</a>',\n+    },\n+    {\n+      type: \"node\",\n+      name: \"date metadata\",\n+      html: \"02 June 2020\",\n+    },\n+  ],\n+  displayOptions: {\n+    attachmentType: \"STRUCTURED\",\n+    disableThumbnail: false,\n+    standardOpen: true,\n+    integrationOpen: true,\n+  },\n+  links: {\n+    view:\n+      \"http://localhost:8080/rest/items/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+    self:\n+      \"http://localhost:8080/rest/api/item/72558c1d-8788-4515-86c8-b24a28cc451e/1/\",\n+  },\n+};\n+\n+export const BasicSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={basicSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const AttachmentSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={attachSearchObj}\n+    onClick={() => alert(\"result clicked\")}\n+  />\n+);\n+\n+export const CustomMetadataSearchResultComponent = () => (\n+  <SearchResult\n+    resultData={customMetaSearchObj}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDU2NTkzMQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r440565931", "bodyText": "Is there a more semantic tag that could be used here?\nhttps://developer.mozilla.org/en-US/docs/Glossary/semantics#Semantic_elements", "author": "ChristianMurphy", "createdAt": "2020-06-16T03:31:08Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -0,0 +1,235 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import * as React from \"react\";\n+import { SyntheticEvent } from \"react\";\n+import { makeStyles } from \"@material-ui/core/styles\";\n+import { languageStrings } from \"../../util/langstrings\";\n+import {\n+  ListItem,\n+  Theme,\n+  Typography,\n+  ListItemText,\n+  Divider,\n+  List,\n+  ListItemIcon,\n+  Collapse,\n+} from \"@material-ui/core\";\n+import { Date as DateDisplay } from \"../../components/Date\";\n+import {\n+  InsertDriveFile,\n+  ExpandMore,\n+  ExpandLess,\n+  AttachFile,\n+  Subject,\n+} from \"@material-ui/icons\";\n+\n+const useStyles = makeStyles((theme: Theme) => {\n+  return {\n+    inline: {\n+      display: \"inline\",\n+    },\n+    heading: {\n+      fontWeight: \"bold\",\n+      paddingRight: theme.spacing(1),\n+    },\n+    thumbnail: {\n+      paddingRight: theme.spacing(2),\n+    },\n+    placeholderThumbnail: {\n+      paddingRight: theme.spacing(2),\n+      width: \"88px\",\n+      height: \"auto\",\n+      color: theme.palette.text.secondary,\n+    },\n+    itemDescription: {\n+      paddingBottom: theme.spacing(1),\n+    },\n+    additionalDetails: {\n+      flexDirection: \"row\",\n+      display: \"flex\",\n+      paddingTop: theme.spacing(1),\n+    },\n+    status: {\n+      textTransform: \"capitalize\",\n+    },\n+    nested: {\n+      paddingLeft: theme.spacing(4),\n+    },\n+  };\n+});\n+\n+export interface SearchResultProps {\n+  /**\n+   * A json representation of the SearchResult data. TODO: Properly type this when search2 endpoint is merged\n+   */\n+  resultData: any;\n+  /**\n+   * Function will be invoked when the SearchResult list item is clicked\n+   */\n+  onClick: () => void;\n+}\n+export default function SearchResult({\n+  resultData,\n+  onClick,\n+}: SearchResultProps) {\n+  const classes = useStyles();\n+\n+  const searchResultStrings = languageStrings.searchpage.searchresult;\n+\n+  const {\n+    name,\n+    uuid,\n+    description,\n+    displayFields,\n+    modifiedDate,\n+    status,\n+    displayOptions,\n+    attachments,\n+  } = resultData;\n+\n+  const [attachExapanded, setAttachExpanded] = React.useState(\n+    displayOptions.standardOpen\n+  );\n+\n+  const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    event.stopPropagation();\n+    setAttachExpanded(!attachExapanded);\n+  };\n+\n+  const thumbnail = (disableThumb: boolean) => {\n+    if (attachments.length > 0 && !disableThumb) {\n+      return (\n+        <img\n+          className={classes.thumbnail}\n+          src={attachments[0].links.thumbnail}\n+          alt={attachments[0].description}\n+        />\n+      );\n+    } else {\n+      return (\n+        <Subject className={classes.placeholderThumbnail} fontSize=\"large\" />\n+      );\n+    }\n+  };\n+\n+  const itemMetadata = (\n+    <div className={classes.additionalDetails}>\n+      <Typography component=\"span\" variant=\"body1\" className={classes.status}>\n+        {status}\n+      </Typography>\n+      <Divider\n+        flexItem\n+        component=\"span\"\n+        variant=\"middle\"\n+        orientation=\"vertical\"\n+      />\n+      <Typography component=\"span\" variant=\"body1\">\n+        {searchResultStrings.dateModified}&nbsp;\n+        <DateDisplay displayRelative date={new Date(modifiedDate)} />\n+      </Typography>\n+    </div>\n+  );\n+\n+  const customDisplayMetadata = displayFields.map((element: any) => {\n+    return (\n+      <ListItem disableGutters dense>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.heading}\n+          color=\"textPrimary\"\n+        >\n+          {element.name}\n+        </Typography>\n+        <Typography\n+          component=\"span\"\n+          variant=\"body2\"\n+          className={classes.inline}\n+          color=\"textPrimary\"\n+          dangerouslySetInnerHTML={{ __html: element.html }}\n+        ></Typography>\n+      </ListItem>\n+    );\n+  });\n+\n+  const generateAttachmentList = () => {\n+    const attachmentsList = attachments.map((attachment: any) => {\n+      return (\n+        <ListItem\n+          key={attachment.id || attachment.uuid}\n+          button\n+          className={classes.nested}\n+        >\n+          <ListItemIcon>\n+            <InsertDriveFile />\n+          </ListItemIcon>\n+          <ListItemText color=\"primary\" primary={attachment.description} />\n+        </ListItem>\n+      );\n+    });\n+\n+    if (attachmentsList.length > 0)\n+      return (\n+        <List component=\"div\">\n+          <ListItem\n+            button\n+            onClick={(event) => handleAttachmentPanelClick(event)}\n+          >\n+            <ListItemIcon>\n+              <AttachFile />\n+            </ListItemIcon>\n+            <ListItemText primary={searchResultStrings.attachments} />\n+            {attachExapanded ? <ExpandLess /> : <ExpandMore />}\n+          </ListItem>\n+          <Collapse in={attachExapanded} timeout=\"auto\" unmountOnExit>\n+            <List component=\"div\" disablePadding>\n+              {attachmentsList}\n+            </List>\n+          </Collapse>\n+        </List>\n+      );\n+    return null;\n+  };\n+\n+  return (\n+    <ListItem\n+      onClick={onClick}\n+      alignItems=\"flex-start\"\n+      button={true}\n+      key={uuid}\n+    >\n+      {thumbnail(displayOptions.disableThumbnail)}\n+      <ListItemText\n+        primary={name}\n+        secondary={\n+          <>\n+            <Typography className={classes.itemDescription} variant=\"body1\">\n+              {description}\n+            </Typography>\n+            <List disablePadding>{customDisplayMetadata}</List>\n+            {generateAttachmentList()}\n+            <Divider />\n+            {itemMetadata}\n+          </>\n+        }\n+        primaryTypographyProps={{ color: \"primary\", variant: \"h6\" }}\n+        secondaryTypographyProps={{ component: \"div\" }}", "originalCommit": "18762f5796c89244c879adde869c5ca8f335242a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a1883410abcaab70cab6aab362bc1f0979b8de2b", "url": "https://github.com/openequella/openEQUELLA/commit/a1883410abcaab70cab6aab362bc1f0979b8de2b", "message": "removed unnessary variant typography props, body1 is already the default variant", "committedDate": "2020-06-16T04:03:38Z", "type": "commit"}, {"oid": "a3275b3ba90391337126af8a145c1bdf50e730cd", "url": "https://github.com/openequella/openEQUELLA/commit/a3275b3ba90391337126af8a145c1bdf50e730cd", "message": "Replaced attachment list and collapse components with ExpansionPanel", "committedDate": "2020-06-17T01:28:01Z", "type": "commit"}, {"oid": "34d40fd0ed183f9bff4f660f060c6988fa192886", "url": "https://github.com/openequella/openEQUELLA/commit/34d40fd0ed183f9bff4f660f060c6988fa192886", "message": "removed stray comment from Date component", "committedDate": "2020-06-17T01:41:53Z", "type": "commit"}, {"oid": "e70a059175c4ec2835afa2db55e7d5dd01e085ae", "url": "https://github.com/openequella/openEQUELLA/commit/e70a059175c4ec2835afa2db55e7d5dd01e085ae", "message": "removed rouge className prop, added todo for arg destructuring work", "committedDate": "2020-06-17T01:55:45Z", "type": "commit"}, {"oid": "87cb0456abeb6cc091d09b2a1a5b17a6a084e448", "url": "https://github.com/openequella/openEQUELLA/commit/87cb0456abeb6cc091d09b2a1a5b17a6a084e448", "message": "Removed thumbnail ternary, replaced with result variable. Added additional JSDoc", "committedDate": "2020-06-17T03:02:02Z", "type": "commit"}, {"oid": "37019d588f8aa983abb4c9ca7b440494bb841a3e", "url": "https://github.com/openequella/openEQUELLA/commit/37019d588f8aa983abb4c9ca7b440494bb841a3e", "message": "removed unnessesary Date typography variant", "committedDate": "2020-06-17T03:16:58Z", "type": "commit"}, {"oid": "b76c933f5b18d50594add16997ca0943cfa15554", "url": "https://github.com/openequella/openEQUELLA/commit/b76c933f5b18d50594add16997ca0943cfa15554", "message": "handle custom html data in a less dangerous way", "committedDate": "2020-06-17T04:01:53Z", "type": "commit"}, {"oid": "ab15a543306854a9a8ab52359c66a6656b2aca62", "url": "https://github.com/openequella/openEQUELLA/commit/ab15a543306854a9a8ab52359c66a6656b2aca62", "message": "simplify listitem button prop", "committedDate": "2020-06-17T04:04:15Z", "type": "commit"}, {"oid": "f7649921eebe27a550c4be56ac3e23e24a2d5c8d", "url": "https://github.com/openequella/openEQUELLA/commit/f7649921eebe27a550c4be56ac3e23e24a2d5c8d", "message": "moved mock search result data to separate file in __mocks__ dir", "committedDate": "2020-06-17T05:27:41Z", "type": "commit"}, {"oid": "99170c86aa5ace2fd25de17bee96771ddcff3130", "url": "https://github.com/openequella/openEQUELLA/commit/99170c86aa5ace2fd25de17bee96771ddcff3130", "message": "gave SearchResult story some knobs and actions", "committedDate": "2020-06-17T05:37:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTMxMzgxMQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1814#discussion_r441313811", "bodyText": "The current pattern in oEQ is to use ReactElement rather than JSX.Element. They are interchangeable, but since we are a React-specific project its better to use this.", "author": "SammyIsConfused", "createdAt": "2020-06-17T06:40:23Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/components/SearchResult.tsx", "diffHunk": "@@ -107,29 +116,36 @@ export default function SearchResult({\n   );\n \n   const handleAttachmentPanelClick = (event: SyntheticEvent) => {\n+    /** prevents the SearchResult onClick from firing when attachment panel is clicked */\n     event.stopPropagation();\n     setAttachExpanded(!attachExapanded);\n   };\n-\n-  const thumbnail = (disableThumb: boolean) => {\n+  /**\n+   * @param {boolean} disableThumb - controls if item thumbnail is displayed\n+   * @return {JSX.Element} image JSX element is returned if item contains attachments, and thumbnail is not disabled.", "originalCommit": "99170c86aa5ace2fd25de17bee96771ddcff3130", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2b7b9352c1cf1b07fe81187fc87c7abc26c8cd66", "url": "https://github.com/openequella/openEQUELLA/commit/2b7b9352c1cf1b07fe81187fc87c7abc26c8cd66", "message": "replaced thumnail return type", "committedDate": "2020-06-18T04:07:06Z", "type": "commit"}, {"oid": "a58d77775aed5bb78ddb52982871a1a20f9ed3b9", "url": "https://github.com/openequella/openEQUELLA/commit/a58d77775aed5bb78ddb52982871a1a20f9ed3b9", "message": "Merge branch 'component/new-search-page' into feature/search-result-component", "committedDate": "2020-06-18T04:26:06Z", "type": "commit"}, {"oid": "9a279e3b212ceeb40f260964a6e1db3319c62a5d", "url": "https://github.com/openequella/openEQUELLA/commit/9a279e3b212ceeb40f260964a6e1db3319c62a5d", "message": "Add Search types from oeq-ts-rest-api to SearchResult Component\n\nNow that the Search api type definitions have been merged in, I have added types to all areas in SearchResult that previously had todos. This should give us more confidence that the SearchResult component can be integrated smoothly into the wider search page.", "committedDate": "2020-06-18T06:38:30Z", "type": "commit"}, {"oid": "7c641faef944f1a38e55557f865ef47974c9c662", "url": "https://github.com/openequella/openEQUELLA/commit/7c641faef944f1a38e55557f865ef47974c9c662", "message": "Import Search module from correct path.", "committedDate": "2020-06-18T23:56:12Z", "type": "commit"}, {"oid": "0e9b98b3dc6bb6ecef5b677e413ae6e8c1bc8eba", "url": "https://github.com/openequella/openEQUELLA/commit/0e9b98b3dc6bb6ecef5b677e413ae6e8c1bc8eba", "message": "Merge branch 'component/new-search-page' into feature/search-result-component", "committedDate": "2020-06-19T00:30:14Z", "type": "commit"}, {"oid": "e32027b165671f438f0dcc94b166199bbdcd0384", "url": "https://github.com/openequella/openEQUELLA/commit/e32027b165671f438f0dcc94b166199bbdcd0384", "message": "Remove todo comment that i forgot to remove, since Search type definitions have been incorporated", "committedDate": "2020-06-19T00:33:00Z", "type": "commit"}]}