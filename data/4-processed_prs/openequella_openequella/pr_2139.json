{"pr_number": 2139, "pr_title": "Fix resumption token used in REST APIs", "pr_createdAt": "2020-08-04T04:42:23Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2139", "timeline": [{"oid": "43e5f41b947b9bb5f4a74e108d4b97bb275f23f9", "url": "https://github.com/openequella/openEQUELLA/commit/43e5f41b947b9bb5f4a74e108d4b97bb275f23f9", "message": "Fix resumption token used in REST APIs\n\n1. Make the length included in a resumption token higher priority\n   than the one specified in query params.\n2. Do not return a resumption token if no more items are available.\n3. Correctly generate resumption tokens", "committedDate": "2020-08-04T04:28:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM5OTYzNA==", "url": "https://github.com/openequella/openEQUELLA/pull/2139#discussion_r465399634", "bodyText": "I think putting results.length into its own variable impinges on readability later on. Let's not have actualLen and just use results.length.", "author": "edalex-ian", "createdAt": "2020-08-05T00:15:50Z", "path": "Source/Plugins/Core/com.equella.core/scalasrc/com/tle/web/api/entity/PagedResults.scala", "diffHunk": "@@ -99,16 +100,18 @@ object PagedResults {\n       b\n     }\n \n-    val (nextOffset, results) = collectMore(length, firstOffset, 0, Vector.empty)\n-    val pb                    = new PagingBean[BEB]\n-    val actualLen             = results.length\n-    pb.setStart(start)\n+    val (_, results) = collectMore(_length, firstOffset, 0, Vector.empty)\n+    val pb           = new PagingBean[BEB]\n+    val actualLen    = results.length", "originalCommit": "43e5f41b947b9bb5f4a74e108d4b97bb275f23f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "252569f5c2c7d1ddea2cd854d8751c2df425abf7", "url": "https://github.com/openequella/openEQUELLA/commit/252569f5c2c7d1ddea2cd854d8751c2df425abf7", "message": "Remove redundant variable to improve readability.", "committedDate": "2020-08-05T00:21:50Z", "type": "commit"}]}