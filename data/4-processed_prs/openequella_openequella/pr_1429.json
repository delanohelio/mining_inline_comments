{"pr_number": 1429, "pr_title": "fix functional tests", "pr_createdAt": "2020-01-15T06:26:46Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/1429", "timeline": [{"oid": "7d58fa6e72c71ba3db73742354d8c46b4ec50573", "url": "https://github.com/openequella/openEQUELLA/commit/7d58fa6e72c71ba3db73742354d8c46b4ec50573", "message": "Re-enable failing tests\n\nThat way work can commence off this branch to fix them.", "committedDate": "2019-12-19T03:37:51Z", "type": "commit"}, {"oid": "42c705eaaa09a60b69edbaddb75fcd7397f8d031", "url": "https://github.com/openequella/openEQUELLA/commit/42c705eaaa09a60b69edbaddb75fcd7397f8d031", "message": "Enable travis building of branches under travis/...", "committedDate": "2019-12-19T03:40:24Z", "type": "commit"}, {"oid": "7054daa0ce6c4162605c566eba2382e420a9cf51", "url": "https://github.com/openequella/openEQUELLA/commit/7054daa0ce6c4162605c566eba2382e420a9cf51", "message": "Travis: Pre-build IntegTester\n\nA few minutes are spent as part of every functional test job on travis\nbuilding the integ tester. So by pre-building we should be able to save\nsome significant time for the whole build - maybe even an hour.\n\n(Note: Locally it only takes < 1 minute to build the IntegTester, but\nTravis machines have far fewer resources and so take significantly\nlonger.)", "committedDate": "2019-12-19T22:01:59Z", "type": "commit"}, {"oid": "2963410a7a8e9fe7a70d9bf485fd42033c5f3b1a", "url": "https://github.com/openequella/openEQUELLA/commit/2963410a7a8e9fe7a70d9bf485fd42033c5f3b1a", "message": "Travis: Include purescript outputs for pre-built IntegTester\n\nSeems just IntegTester/target is not sufficient with current build, as\nall the expensive purescript building still gets triggered.", "committedDate": "2019-12-19T23:28:02Z", "type": "commit"}, {"oid": "03a800655445be4d813a5dc09a691edb29b46e3c", "url": "https://github.com/openequella/openEQUELLA/commit/03a800655445be4d813a5dc09a691edb29b46e3c", "message": "Travis: Include full ps directory for pre-built IntegTester\n\nThe cache is still not stopping a full rebuild of the integ tester, so\nnow just grabbing the whole directory and adding some debugging - in\ncase the cache is not working as planned.", "committedDate": "2019-12-20T01:32:51Z", "type": "commit"}, {"oid": "28a929ec327a8c18312a07e988cf0a1d25846ad9", "url": "https://github.com/openequella/openEQUELLA/commit/28a929ec327a8c18312a07e988cf0a1d25846ad9", "message": "Use the beta version of Chrome and Chromedriver", "committedDate": "2020-01-06T22:25:27Z", "type": "commit"}, {"oid": "81acd58e778c98791ce73da5c76917f6e9a3e2b1", "url": "https://github.com/openequella/openEQUELLA/commit/81acd58e778c98791ce73da5c76917f6e9a3e2b1", "message": "Set the right directory of unzipped chromedriver for Travis CI", "committedDate": "2020-01-06T23:02:00Z", "type": "commit"}, {"oid": "b6d5543e08e2c93d87159c1786b28b472930a71e", "url": "https://github.com/openequella/openEQUELLA/commit/b6d5543e08e2c93d87159c1786b28b472930a71e", "message": "Install chrome-beta by apt packages", "committedDate": "2020-01-06T23:30:05Z", "type": "commit"}, {"oid": "91313f14f00e3d9d830185f6835109350205326d", "url": "https://github.com/openequella/openEQUELLA/commit/91313f14f00e3d9d830185f6835109350205326d", "message": "Add the Google Chrome PPA", "committedDate": "2020-01-06T23:56:51Z", "type": "commit"}, {"oid": "c3cdd17b55e99a319817c17f9fc9fd618a6d3b33", "url": "https://github.com/openequella/openEQUELLA/commit/c3cdd17b55e99a319817c17f9fc9fd618a6d3b33", "message": "do not use alias to add Google Chrome PPA", "committedDate": "2020-01-07T00:14:32Z", "type": "commit"}, {"oid": "df1cf55362b5748626233ac230f5e67f84ac72a6", "url": "https://github.com/openequella/openEQUELLA/commit/df1cf55362b5748626233ac230f5e67f84ac72a6", "message": "Try google-chrome rather than the beta one", "committedDate": "2020-01-07T00:49:32Z", "type": "commit"}, {"oid": "30c2f36e19e1aa4be991dde67cd0a5dffaca43c1", "url": "https://github.com/openequella/openEQUELLA/commit/30c2f36e19e1aa4be991dde67cd0a5dffaca43c1", "message": "Revert \"Try google-chrome rather than the beta one\"\n\nThis reverts commit df1cf55362b5748626233ac230f5e67f84ac72a6.", "committedDate": "2020-01-07T02:11:05Z", "type": "commit"}, {"oid": "44897a645a3dc6d7879e82e3bb5e0d42a9def097", "url": "https://github.com/openequella/openEQUELLA/commit/44897a645a3dc6d7879e82e3bb5e0d42a9def097", "message": "echo chrome version", "committedDate": "2020-01-07T02:38:59Z", "type": "commit"}, {"oid": "8906a812b7c0375afc0268e1a4728cb298e3ee1a", "url": "https://github.com/openequella/openEQUELLA/commit/8906a812b7c0375afc0268e1a4728cb298e3ee1a", "message": "Add backquotes to version check", "committedDate": "2020-01-07T02:43:50Z", "type": "commit"}, {"oid": "4d9120295573263e1999ea531e0a13b6a456d6f1", "url": "https://github.com/openequella/openEQUELLA/commit/4d9120295573263e1999ea531e0a13b6a456d6f1", "message": "Add some more echos for debugging", "committedDate": "2020-01-07T03:01:04Z", "type": "commit"}, {"oid": "66fce056d22b17cf50d159cee61cf3c74b690e76", "url": "https://github.com/openequella/openEQUELLA/commit/66fce056d22b17cf50d159cee61cf3c74b690e76", "message": "Add chrome beta via deb", "committedDate": "2020-01-07T03:15:04Z", "type": "commit"}, {"oid": "efe4db4117c3b2b571941fb9af91404fb9900fdc", "url": "https://github.com/openequella/openEQUELLA/commit/efe4db4117c3b2b571941fb9af91404fb9900fdc", "message": "Uses travis addon for chrome", "committedDate": "2020-01-07T03:25:49Z", "type": "commit"}, {"oid": "587682872ada68cdf27fbc4d6e3c145b97ef2c8f", "url": "https://github.com/openequella/openEQUELLA/commit/587682872ada68cdf27fbc4d6e3c145b97ef2c8f", "message": "Add a whereis for each chrome version", "committedDate": "2020-01-07T04:11:24Z", "type": "commit"}, {"oid": "f0e79fe6680c232db68a76cdb128d6e3f432ad89", "url": "https://github.com/openequella/openEQUELLA/commit/f0e79fe6680c232db68a76cdb128d6e3f432ad89", "message": "Purge the original version of google chrome", "committedDate": "2020-01-07T04:16:51Z", "type": "commit"}, {"oid": "cbac7b78b7134ace311303f534677ee5e977df4f", "url": "https://github.com/openequella/openEQUELLA/commit/cbac7b78b7134ace311303f534677ee5e977df4f", "message": "Add sudo to apt purge", "committedDate": "2020-01-07T04:21:05Z", "type": "commit"}, {"oid": "14e7883fe8cfd143c3b5e03f153e69b6dede99d2", "url": "https://github.com/openequella/openEQUELLA/commit/14e7883fe8cfd143c3b5e03f153e69b6dede99d2", "message": "Remove debug lines from .travis.yml", "committedDate": "2020-01-07T04:49:33Z", "type": "commit"}, {"oid": "8d2fae88174c7c8ce2e424cf6f32f3458f098de0", "url": "https://github.com/openequella/openEQUELLA/commit/8d2fae88174c7c8ce2e424cf6f32f3458f098de0", "message": "Fix LoginNotice tests", "committedDate": "2020-01-07T23:26:50Z", "type": "commit"}, {"oid": "8c1c80a01813452bb5e20d4bb4775193b7c1398f", "url": "https://github.com/openequella/openEQUELLA/commit/8c1c80a01813452bb5e20d4bb4775193b7c1398f", "message": "Fix PackageAndNavigation Test", "committedDate": "2020-01-08T00:05:07Z", "type": "commit"}, {"oid": "4f7e0b5efafe4790648225c10bb0348115efd714", "url": "https://github.com/openequella/openEQUELLA/commit/4f7e0b5efafe4790648225c10bb0348115efd714", "message": "Fix PortalsTest", "committedDate": "2020-01-08T00:53:32Z", "type": "commit"}, {"oid": "9c62340572767509a8f08c0e58b09288925a0c4c", "url": "https://github.com/openequella/openEQUELLA/commit/9c62340572767509a8f08c0e58b09288925a0c4c", "message": "Fix DecisionPointScriptingByContributorRole Test", "committedDate": "2020-01-08T03:13:00Z", "type": "commit"}, {"oid": "208c8086edbfb18934d87b0bf130e6a8bee4ada2", "url": "https://github.com/openequella/openEQUELLA/commit/208c8086edbfb18934d87b0bf130e6a8bee4ada2", "message": "Fix ItemSummary Test", "committedDate": "2020-01-08T03:13:37Z", "type": "commit"}, {"oid": "6a623fe0c5751759a67267667c68e4700207312d", "url": "https://github.com/openequella/openEQUELLA/commit/6a623fe0c5751759a67267667c68e4700207312d", "message": "Fix MaxAttachments Test", "committedDate": "2020-01-08T03:14:24Z", "type": "commit"}, {"oid": "85932916c74c63f20619c38283634d84b235e20d", "url": "https://github.com/openequella/openEQUELLA/commit/85932916c74c63f20619c38283634d84b235e20d", "message": "For PackageAndNavigation Test, wait until text is present in the iframe", "committedDate": "2020-01-08T04:53:52Z", "type": "commit"}, {"oid": "fa9de6fc2c1e12390c91163845a4f047b11c132c", "url": "https://github.com/openequella/openEQUELLA/commit/fa9de6fc2c1e12390c91163845a4f047b11c132c", "message": "One more fix for PortalsTest", "committedDate": "2020-01-08T05:42:20Z", "type": "commit"}, {"oid": "52584ef24798b30a08b7d67df404760fe4a27a28", "url": "https://github.com/openequella/openEQUELLA/commit/52584ef24798b30a08b7d67df404760fe4a27a28", "message": "For PortalsTest, do not edit the portal until its title is visible", "committedDate": "2020-01-08T23:12:51Z", "type": "commit"}, {"oid": "988ea2338771fa15af75be02339603097cb1653e", "url": "https://github.com/openequella/openEQUELLA/commit/988ea2338771fa15af75be02339603097cb1653e", "message": "Add waits on the iframe switches", "committedDate": "2020-01-08T23:32:37Z", "type": "commit"}, {"oid": "c694d87448ed8d69afa170e632aae8cc854c0372", "url": "https://github.com/openequella/openEQUELLA/commit/c694d87448ed8d69afa170e632aae8cc854c0372", "message": "Make 'saveUserInfoBackup' a synchronised method", "committedDate": "2020-01-09T01:03:39Z", "type": "commit"}, {"oid": "74c62e056f485a305016f9a0d3c4cf408906911a", "url": "https://github.com/openequella/openEQUELLA/commit/74c62e056f485a305016f9a0d3c4cf408906911a", "message": "For PortalsTest, ensure the Recent Portal page is completely loaded;\nFor ASC Test, add a wait in 'ascSelectDropdown'.", "committedDate": "2020-01-09T02:28:28Z", "type": "commit"}, {"oid": "a5f36977bf2882b2b49a31c4c8b7cef5082fda5e", "url": "https://github.com/openequella/openEQUELLA/commit/a5f36977bf2882b2b49a31c4c8b7cef5082fda5e", "message": "Add two waits in CALActivationsRolloverTest;\nOne more change for PortalsTest;\nAdd a wait in AbstractPage", "committedDate": "2020-01-09T04:44:24Z", "type": "commit"}, {"oid": "34db1608903d2f4faa1f2a80b44c97b048862900", "url": "https://github.com/openequella/openEQUELLA/commit/34db1608903d2f4faa1f2a80b44c97b048862900", "message": "Use a different XPATH to find the Portal edit button;\nAdd a wait in the method of 'ascEditBox'.", "committedDate": "2020-01-13T00:14:27Z", "type": "commit"}, {"oid": "398013760c22011fcf828173ac194b1172d9e3fe", "url": "https://github.com/openequella/openEQUELLA/commit/398013760c22011fcf828173ac194b1172d9e3fe", "message": "fixes for PortalsTest and PackageNavigationTest", "committedDate": "2020-01-13T05:29:54Z", "type": "commit"}, {"oid": "5ee7711ed1f3db96ec4b87b0e5506f4d1441af24", "url": "https://github.com/openequella/openEQUELLA/commit/5ee7711ed1f3db96ec4b87b0e5506f4d1441af24", "message": "For PackageAndNavigationTest, use getAttribute to get the text inside the body of frame", "committedDate": "2020-01-14T23:45:43Z", "type": "commit"}, {"oid": "be3a6736101ddbfc9a2cba432605b570e633680a", "url": "https://github.com/openequella/openEQUELLA/commit/be3a6736101ddbfc9a2cba432605b570e633680a", "message": "Reference web elements after executing Javascript code", "committedDate": "2020-01-15T00:50:47Z", "type": "commit"}, {"oid": "be048b5b83e1376bfd7d916ee4e76b426ede15e4", "url": "https://github.com/openequella/openEQUELLA/commit/be048b5b83e1376bfd7d916ee4e76b426ede15e4", "message": "Synchronize saving user details in the right spot;", "committedDate": "2020-01-15T04:13:54Z", "type": "commit"}, {"oid": "581cd25bcd97033d068b8ff6059df2d89ba26d7a", "url": "https://github.com/openequella/openEQUELLA/commit/581cd25bcd97033d068b8ff6059df2d89ba26d7a", "message": "Remove some useless changes", "committedDate": "2020-01-15T06:08:34Z", "type": "commit"}, {"oid": "4f95e1a12b001a37fba7824db820072dcef8ee12", "url": "https://github.com/openequella/openEQUELLA/commit/4f95e1a12b001a37fba7824db820072dcef8ee12", "message": "Add two more selected Collection checking in PortalsTests;\nTidy up code in PackageAndNavigationTest.", "committedDate": "2020-01-15T22:39:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0ODIzOQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1429#discussion_r367148239", "bodyText": "I feel that we can keep Travis builds for this branch at the moment because when we can install new stable version of Chrome and Chromedriver via APT we may need this branch for testing.", "author": "PenghaiZhang", "createdAt": "2020-01-15T22:48:08Z", "path": ".travis.yml", "diffHunk": "@@ -6,6 +6,7 @@ branches:\n     - master\n     - /^release\\/.+/\n     - /^stable-.+/\n+    - /^travis\\/.+/", "originalCommit": "4f95e1a12b001a37fba7824db820072dcef8ee12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0NzkzNw==", "url": "https://github.com/openequella/openEQUELLA/pull/1429#discussion_r367147937", "bodyText": "Is it worth deleting these comments?", "author": "SammyIsConfused", "createdAt": "2020-01-15T22:47:18Z", "path": ".travis.yml", "diffHunk": "@@ -51,6 +51,12 @@ before_install:\n   - sudo ln -s /usr/bin/ffplay /usr/bin/avplay\n   - sudo ln -s /usr/bin/ffprobe /usr/bin/avprobe\n install:\n+  #  - wget https://dl.google.com/linux/direct/google-chrome-beta_current_amd64.deb", "originalCommit": "4f95e1a12b001a37fba7824db820072dcef8ee12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE1NDU1OA==", "url": "https://github.com/openequella/openEQUELLA/pull/1429#discussion_r367154558", "bodyText": "Yes, I will delete these comments.", "author": "PenghaiZhang", "createdAt": "2020-01-15T23:06:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE0NzkzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzE1NzU4MA==", "url": "https://github.com/openequella/openEQUELLA/pull/1429#discussion_r367157580", "bodyText": "I think we can dump these now - as I think this is now working?", "author": "edalex-ian", "createdAt": "2020-01-15T23:16:34Z", "path": ".travis.yml", "diffHunk": "@@ -101,33 +115,46 @@ jobs:\n       name: Build the Import/Export tool\n \n     - stage: functional test\n-      script: sbt -jvm-opts autotest/.jvmopts \"project autotest\" \\\n-        installEquella startEquella configureInstall setupForTests \\\n-        Tests/test dumpCoverage\n+      script:\n+        # DEBUG: Confirm PS directory is being properly cached\n+        - ls -l autotest/IntegTester/ps/\n+        # DEBUG: Confirm Target directory is being properly cached\n+        - ls -l autotest/IntegTester/target/", "originalCommit": "4f95e1a12b001a37fba7824db820072dcef8ee12", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e6bfb6e57b0d52e4c41d520c5d1941ad3f6dfd81", "url": "https://github.com/openequella/openEQUELLA/commit/e6bfb6e57b0d52e4c41d520c5d1941ad3f6dfd81", "message": "Remove useless comments", "committedDate": "2020-01-16T00:28:14Z", "type": "commit"}]}