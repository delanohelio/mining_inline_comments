{"pr_number": 2595, "pr_title": "Improve SearchPage error handling", "pr_createdAt": "2020-12-10T06:34:46Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2595", "timeline": [{"oid": "1fe88a2416c86c6750cf12b07653320461df3e7f", "url": "https://github.com/openequella/openEQUELLA/commit/1fe88a2416c86c6750cf12b07653320461df3e7f", "message": "chore(intellij): Update project settings", "committedDate": "2020-12-10T06:27:39Z", "type": "commit"}, {"oid": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b", "url": "https://github.com/openequella/openEQUELLA/commit/cd3645efc8d66b871fc7384f2c4aa3604938ca9b", "message": "bugfix(front-end): Improve SearchPage error handling\n\nA number of possible errors were not being caught. This would result in\nspurious console log entries, and lack of feedback to the user that an\nissue had occurred.\n\nMost of these are now addressed, by simply shutting down oEQ and then\nchasing things popping up in the console log. Or in a few cases, just by\n manual code analysis and looking at the user result.", "committedDate": "2020-12-10T06:30:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDYyMzA5Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/2595#discussion_r540623093", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  .then((results) => {\n          \n          \n            \n                    const [searchSettings, queryStringSearchOptions] = results;\n          \n          \n            \n                  .then(([searchSettings, queryStringSearchOptions]) => {", "author": "ChristianMurphy", "createdAt": "2020-12-11T01:29:45Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -158,24 +162,29 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n       isSelectionSessionOpen()\n         ? Promise.resolve(undefined)\n         : queryStringParamsToSearchOptions(location),\n-    ]).then((results) => {\n-      const [searchSettings, queryStringSearchOptions] = results;\n-      setSearchSettings(searchSettings);\n-      if (queryStringSearchOptions)\n-        setSearchPageOptions({\n-          ...queryStringSearchOptions,\n-          dateRangeQuickModeEnabled: false,\n-          sortOrder:\n-            queryStringSearchOptions.sortOrder ??\n-            searchSettings.defaultSearchSort,\n-        });\n-      else\n-        setSearchPageOptions({\n-          ...searchPageOptions,\n-          sortOrder:\n-            searchPageOptions.sortOrder ?? searchSettings.defaultSearchSort,\n-        });\n-    });\n+    ])\n+      .then((results) => {\n+        const [searchSettings, queryStringSearchOptions] = results;", "originalCommit": "cd3645efc8d66b871fc7384f2c4aa3604938ca9b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0NDgwNQ==", "url": "https://github.com/openequella/openEQUELLA/pull/2595#discussion_r542044805", "bodyText": "Oh that's an interesting one. That's just part of the prettier reformat. I'll have a play though and see if things are still happy or whether @PenghaiZhang did this for a reason - I've just got a faint memory of something like this coming up before. \ud83e\udd14", "author": "edalex-ian", "createdAt": "2020-12-14T00:42:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDYyMzA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0NzY0Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/2595#discussion_r542047643", "bodyText": "The array destructuring? I think Charlie added this when he worked on converting query string to SearchOption.", "author": "PenghaiZhang", "createdAt": "2020-12-14T00:56:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDYyMzA5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA1MTk5Mw==", "url": "https://github.com/openequella/openEQUELLA/pull/2595#discussion_r542051993", "bodyText": "Yeah, once I was tweaking it I realised it was newer. And seemed all good. \ud83d\udc4d", "author": "edalex-ian", "createdAt": "2020-12-14T01:16:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDYyMzA5Mw=="}], "type": "inlineReview"}, {"oid": "c7fc4b27a0698035724c8b60e548c458aa206051", "url": "https://github.com/openequella/openEQUELLA/commit/c7fc4b27a0698035724c8b60e548c458aa206051", "message": "chore(front-end): Destructure then() args\n\nFeedback from PR #2595", "committedDate": "2020-12-14T01:01:24Z", "type": "commit"}]}