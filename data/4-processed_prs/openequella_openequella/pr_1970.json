{"pr_number": 1970, "pr_title": "Ensure the default search order is included in the first search", "pr_createdAt": "2020-06-30T05:03:47Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/1970", "timeline": [{"oid": "dc69739bef7c1d57c5f078d9b172d8bb87b3005e", "url": "https://github.com/openequella/openEQUELLA/commit/dc69739bef7c1d57c5f078d9b172d8bb87b3005e", "message": "Ensure the default search order is included in the first search.", "committedDate": "2020-06-30T04:24:13Z", "type": "commit"}, {"oid": "2b6efed0b58bdff6bcdf462ad1239f0d22a4f6b5", "url": "https://github.com/openequella/openEQUELLA/commit/2b6efed0b58bdff6bcdf462ad1239f0d22a4f6b5", "message": "Safely lowercase search order.", "committedDate": "2020-06-30T07:07:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAzNzcxMg==", "url": "https://github.com/openequella/openEQUELLA/pull/1970#discussion_r448037712", "bodyText": "Hmm, this is a bit interesting...\nAs really, we'll want to set a sort order control to the default, and then on searches simply read in it's current value. But we don't have that control yet. However, consideration will also need to be given to this value in the work being done over in #1967 .\nMind you, the same also applies for the current hardcoded status.", "author": "edalex-ian", "createdAt": "2020-06-30T23:40:16Z", "path": "Source/Plugins/Core/com.equella.core/js/tsrc/search/SearchPage.tsx", "diffHunk": "@@ -53,9 +57,12 @@ const SearchPage = ({ updateTemplate }: TemplateUpdateProps) => {\n       ...templateDefaults(searchStrings.title)(tp),\n     }));\n \n-    search({\n-      status: [OEQ.Common.ItemStatus.LIVE, OEQ.Common.ItemStatus.REVIEW],\n-    });\n+    getSearchSettingsFromServer().then((settings: SearchSettings) =>\n+      search({\n+        status: [OEQ.Common.ItemStatus.LIVE, OEQ.Common.ItemStatus.REVIEW],\n+        order: settings.defaultSearchSort,", "originalCommit": "2b6efed0b58bdff6bcdf462ad1239f0d22a4f6b5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA1MTU1OQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1970#discussion_r448051559", "bodyText": "The initial idea in my mind is that we will save Search settings in state and then render other controls and side panels depending on the settings.\nAlso, pass (query)=>search({...params, query})  to SearchBar.", "author": "PenghaiZhang", "createdAt": "2020-07-01T00:30:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAzNzcxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODA1MzEyOQ==", "url": "https://github.com/openequella/openEQUELLA/pull/1970#discussion_r448053129", "bodyText": "Yup, sounds about right as it will then trigger a reload of the content on changing any control. It'll be interesting to see if we end up finding it's too dynamic. :)", "author": "edalex-ian", "createdAt": "2020-07-01T00:36:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAzNzcxMg=="}], "type": "inlineReview"}]}