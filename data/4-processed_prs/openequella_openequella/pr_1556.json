{"pr_number": 1556, "pr_title": "style: replace git-format-staged and pretty-quick with lint-staged", "pr_createdAt": "2020-03-21T19:01:30Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/1556", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjAxOTY0NA==", "url": "https://github.com/openequella/openEQUELLA/pull/1556#discussion_r396019644", "bodyText": "having a script on install can cause npm to fail before generating the node_modules folder.\nHaving this as postinstall ensures install can happen and succeed or fail independently of these copy tasks.", "author": "ChristianMurphy", "createdAt": "2020-03-21T19:03:53Z", "path": "package.json", "diffHunk": "@@ -2,11 +2,8 @@\n   \"name\": \"openequella\",\n   \"private\": true,\n   \"scripts\": {\n-    \"install\": \"cross-env-shell \\\"./coursier bootstrap com.geirsson:scalafmt-cli_2.12:1.5.1 -f -o node_modules/.bin/scalafmt && ./coursier bootstrap com.google.googlejavaformat:google-java-format:1.7 -f -o node_modules/.bin/google-java-format\\\"\",\n-    \"format-commit:scala\": \"git-format-staged -f \\\"scalafmt --stdin --assume-filename \\\\\\\"{}\\\\\\\"\\\" \\\"*.scala\\\" \\\"*.sbt\\\"\",\n-    \"format-commit:java\": \"git-format-staged -f \\\"google-java-format --assume-filename \\\\\\\"{}\\\\\\\" -\\\" \\\"*.java\\\"\",\n+    \"postinstall\": \"cross-env-shell \\\"./coursier bootstrap com.geirsson:scalafmt-cli_2.12:1.5.1 -f -o node_modules/.bin/scalafmt && ./coursier bootstrap com.google.googlejavaformat:google-java-format:1.7 -f -o node_modules/.bin/google-java-format\\\"\",", "originalCommit": "57c90917f2374a9180471fdafe1dc098ea1df720", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "90ee9b3d7281ab4325e13943a9f04551402f4cab", "url": "https://github.com/openequella/openEQUELLA/commit/90ee9b3d7281ab4325e13943a9f04551402f4cab", "message": "style: replace git-format-staged and pretty-quick with lint-staged\n\nlint-staged offers a few niceties:\n1. it has more consise and expressive pattern matching than pretty-quick or git-format-staged\n2. it can run lint tasks in parallel\n3. it offers more readable output in the cli\n4. it is a single dependency instead of two dependencies\n\nit maintains the same overall behavior as before, when files are staged, they are run through the linters.\nthe output from the linters are automatically staged as well, and the nicely formatted files are committed.\n\nNOTE: Both lint-staged 10 and husky 4 require Node 10+", "committedDate": "2020-03-21T19:19:49Z", "type": "commit"}, {"oid": "90ee9b3d7281ab4325e13943a9f04551402f4cab", "url": "https://github.com/openequella/openEQUELLA/commit/90ee9b3d7281ab4325e13943a9f04551402f4cab", "message": "style: replace git-format-staged and pretty-quick with lint-staged\n\nlint-staged offers a few niceties:\n1. it has more consise and expressive pattern matching than pretty-quick or git-format-staged\n2. it can run lint tasks in parallel\n3. it offers more readable output in the cli\n4. it is a single dependency instead of two dependencies\n\nit maintains the same overall behavior as before, when files are staged, they are run through the linters.\nthe output from the linters are automatically staged as well, and the nicely formatted files are committed.\n\nNOTE: Both lint-staged 10 and husky 4 require Node 10+", "committedDate": "2020-03-21T19:19:49Z", "type": "forcePushed"}]}