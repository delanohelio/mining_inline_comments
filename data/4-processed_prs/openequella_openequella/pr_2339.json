{"pr_number": 2339, "pr_title": "Retrieve MIME type viewer config", "pr_createdAt": "2020-09-28T06:59:41Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2339", "timeline": [{"oid": "8a2924512e99ff6af0c0428f7997f14e942f505f", "url": "https://github.com/openequella/openEQUELLA/commit/8a2924512e99ff6af0c0428f7997f14e942f505f", "message": "chore: modify .editorconfig to match google style", "committedDate": "2020-09-28T06:14:21Z", "type": "commit"}, {"oid": "2dad6080caa252d7badd0d06c929c8a5c847dfb9", "url": "https://github.com/openequella/openEQUELLA/commit/2dad6080caa252d7badd0d06c929c8a5c847dfb9", "message": "feat(rest): Add endpoint to retrieve viewer configuration", "committedDate": "2020-09-28T06:40:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5OTAzNA==", "url": "https://github.com/openequella/openEQUELLA/pull/2339#discussion_r496299034", "bodyText": "So, the number 153 is the total number of mimetypes in the institution.\nCould that number be placed it a named variable to aid in readability?", "author": "mrblippy", "createdAt": "2020-09-28T23:58:50Z", "path": "autotest/OldTests/src/test/java/io/github/openequella/rest/MimeTypeApiTest.java", "diffHunk": "@@ -0,0 +1,67 @@\n+package io.github.openequella.rest;\n+\n+import static org.junit.Assert.assertEquals;\n+import static org.testng.Assert.assertNotNull;\n+\n+import java.io.IOException;\n+import java.util.List;\n+import org.apache.commons.httpclient.HttpMethod;\n+import org.apache.commons.httpclient.HttpStatus;\n+import org.apache.commons.httpclient.methods.GetMethod;\n+import org.codehaus.jackson.JsonNode;\n+import org.codehaus.jackson.type.TypeReference;\n+import org.testng.annotations.Test;\n+\n+public class MimeTypeApiTest extends AbstractRestApiTest {\n+\n+  private static final String MIMETYPE_API_ENDPOINT =\n+      TEST_CONFIG.getInstitutionUrl() + \"api/mimetype\";\n+\n+  @Test\n+  public void testRetrieveMimeTypes() throws Exception {\n+    final List<MimeTypeDetail> initialFilters = getMimeTypes();\n+    assertEquals(153, initialFilters.size());", "originalCommit": "2dad6080caa252d7badd0d06c929c8a5c847dfb9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMwMzMyMA==", "url": "https://github.com/openequella/openEQUELLA/pull/2339#discussion_r496303320", "bodyText": "Hmmm, this was the original test which I moved across. Ummm, well a variable could be OTT, but at the very least a magic number should be documented in some form - you are correct.\nassertEquals (like many others) allows you to specify a message. So I'll change this to:\n    assertEquals(\"The number of returned filters should match the institution total.\", 153,\n      initialFilters.size());\nWhich then provides a form of documentation, and also on failure would nicely report like:\njava.lang.AssertionError: The number of returned filters should match the institution total. \nExpected :152\nActual   :153", "author": "edalex-ian", "createdAt": "2020-09-29T00:13:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5OTAzNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjMwNTU5NA==", "url": "https://github.com/openequella/openEQUELLA/pull/2339#discussion_r496305594", "bodyText": "Yeah, i think that's a good approach \ud83d\udc4d \ud83d\udc4d", "author": "mrblippy", "createdAt": "2020-09-29T00:22:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjI5OTAzNA=="}], "type": "inlineReview"}, {"oid": "3653a9d1859edc16a0075541fadc0e19c31cb0f3", "url": "https://github.com/openequella/openEQUELLA/commit/3653a9d1859edc16a0075541fadc0e19c31cb0f3", "message": "chore(tests): Document what is being tested in testRetrieveMimeTypes\n\nPR #2339 highlighted we have the magic number of 153. So by adding a message to the assert we document what the meaning of it is - while also improving the test.", "committedDate": "2020-09-29T00:23:22Z", "type": "commit"}]}