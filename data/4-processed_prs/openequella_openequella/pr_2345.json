{"pr_number": 2345, "pr_title": "Add support for retrieving MIME type viewer configuration to oeq-ts-rest-api", "pr_createdAt": "2020-09-29T06:44:01Z", "pr_url": "https://github.com/openequella/openEQUELLA/pull/2345", "timeline": [{"oid": "683672c418f868d4caa8983dec7fdaab1c9d41b5", "url": "https://github.com/openequella/openEQUELLA/commit/683672c418f868d4caa8983dec7fdaab1c9d41b5", "message": "feat(oeq-ts-rest-api): Add support for listing MIME types\n\nThis functionality was currently buried in the front-end, so in preparation for supporting retrieval of MIME type viewer configuration it made sense to refactor.", "committedDate": "2020-09-29T02:41:40Z", "type": "commit"}, {"oid": "0b90e9dd8f2eb1be47a36f0efdbbc6d9894000d8", "url": "https://github.com/openequella/openEQUELLA/commit/0b90e9dd8f2eb1be47a36f0efdbbc6d9894000d8", "message": "refactor(front-end): Refactor to use OEQ.MimeType", "committedDate": "2020-09-29T02:41:40Z", "type": "commit"}, {"oid": "cbaaa829cbae5156704a8ea0e0ef494df2008813", "url": "https://github.com/openequella/openEQUELLA/commit/cbaaa829cbae5156704a8ea0e0ef494df2008813", "message": "feat(oeq-ts-rest-api): Add support for getting MIME type viewer configuration", "committedDate": "2020-09-29T06:23:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1NDg5Nw==", "url": "https://github.com/openequella/openEQUELLA/pull/2345#discussion_r496454897", "bodyText": "Inconsistent capitalisation of MIME in the comments here.", "author": "SammyIsConfused", "createdAt": "2020-09-29T06:48:01Z", "path": "oeq-ts-rest-api/src/MimeType.ts", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { is } from 'typescript-is';\n+import { GET } from './AxiosInstance';\n+\n+export interface MimeTypeEntry {\n+  /**\n+   * The name of a Mime type.\n+   */\n+  mimeType: string;\n+  /**\n+   * The description of a Mime type.\n+   */\n+  desc?: string;\n+}\n+\n+/**\n+ * Configuration for a MIME type viewer.", "originalCommit": "cbaaa829cbae5156704a8ea0e0ef494df2008813", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ1NjI1Ng==", "url": "https://github.com/openequella/openEQUELLA/pull/2345#discussion_r496456256", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               * Which viewer should be used by default - .e.g. on search result pages.\n          \n          \n            \n               * Which viewer should be used by default - e.g. on search result pages.", "author": "SammyIsConfused", "createdAt": "2020-09-29T06:50:49Z", "path": "oeq-ts-rest-api/src/MimeType.ts", "diffHunk": "@@ -0,0 +1,145 @@\n+/*\n+ * Licensed to The Apereo Foundation under one or more contributor license\n+ * agreements. See the NOTICE file distributed with this work for additional\n+ * information regarding copyright ownership.\n+ *\n+ * The Apereo Foundation licenses this file to you under the Apache License,\n+ * Version 2.0, (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+import { is } from 'typescript-is';\n+import { GET } from './AxiosInstance';\n+\n+export interface MimeTypeEntry {\n+  /**\n+   * The name of a Mime type.\n+   */\n+  mimeType: string;\n+  /**\n+   * The description of a Mime type.\n+   */\n+  desc?: string;\n+}\n+\n+/**\n+ * Configuration for a MIME type viewer.\n+ *\n+ * Based on: com.tle.web.viewurl.ResourceViewerConfig\n+ */\n+export interface ViewerConfig {\n+  /**\n+   * Whether the viewer should open in a new window.\n+   */\n+  openInNewWindow: boolean;\n+  /**\n+   * CSS style width specification.\n+   */\n+  width: string;\n+  /**\n+   * CSS style height specification.\n+   */\n+  height: string;\n+  /**\n+   * Whether a light-table type viewer should be used - i.e. originally the old\n+   * [Thickbox](http://codylindley.com/thickbox/) and more recently\n+   * [Fancybox](http://fancybox.net/).\n+   */\n+  thickbox: boolean;\n+  /**\n+   * Various freeform configuration for the specific viewer.\n+   */\n+  attr: Record<string, unknown>;\n+}\n+\n+/**\n+ * Current list of known oEQ ViewerIds.\n+ */\n+export type ViewerId =\n+  | 'downloadIms'\n+  | 'echoCenterViewer'\n+  | 'echoPlayerViewer'\n+  | 'echoPodcastViewer'\n+  | 'echoVodcastViewer'\n+  | 'externalToolViewer'\n+  | 'fancy'\n+  | 'file'\n+  | 'googledocviewer'\n+  | 'htmlFiveViewer'\n+  | 'kalturaViewer'\n+  | 'livNavTreeViewer'\n+  | 'qtiTestViewer'\n+  | 'tohtml'\n+  | 'toimg';\n+\n+/**\n+ * Basic details for each viewer, including optional configuration. If `config` is not present, then\n+ * the consumer should use it's own defaults.\n+ */\n+export interface MimeTypeViewerDetail {\n+  /**\n+   * One of the standard oEQ viewer types.\n+   */\n+  viewerId: ViewerId;\n+  /**\n+   * Standard config (optionally defined) around how this should be displayed.\n+   */\n+  config?: ViewerConfig;\n+}\n+\n+/**\n+ * The complete viewer configuration for a MIME type.\n+ */\n+export interface MimeTypeViewerConfiguration {\n+  /**\n+   * Which viewer should be used by default - .e.g. on search result pages.", "originalCommit": "cbaaa829cbae5156704a8ea0e0ef494df2008813", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "51da3e3b3366e6929609a360ecd127baa93dbc34", "url": "https://github.com/openequella/openEQUELLA/commit/51da3e3b3366e6929609a360ecd127baa93dbc34", "message": "chore(oeq-ts-rest-api): Tidy up comments\n\nFeedback from PR #2345", "committedDate": "2020-09-29T23:31:18Z", "type": "commit"}]}