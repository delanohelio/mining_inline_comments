{"pr_number": 899, "pr_title": "Closes #728: Adds shuffle operation to primitive lists", "pr_createdAt": "2020-05-26T15:34:45Z", "pr_url": "https://github.com/eclipse/eclipse-collections/pull/899", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMTYyOA==", "url": "https://github.com/eclipse/eclipse-collections/pull/899#discussion_r430511628", "bodyText": "Why not have a shuffleThis(Random) and have this method call that one? Both methods should have default method implementations though so this can be introduced safely in a minor release.", "author": "donraab", "createdAt": "2020-05-26T15:39:48Z", "path": "eclipse-collections-code-generator/src/main/resources/impl/list/mutable/primitiveArrayList.stg", "diffHunk": "@@ -1003,6 +1004,25 @@ public class <name>ArrayList extends Abstract<name>Iterable\n         return this;\n     }\n \n+    /**\n+     * Randomly permutes this list in place and returns the same list (this).\n+     *\n+     * Implements the Fisher-Yates shuffle algorithm using {@code java.util.Random} as the source of randomness.\n+     */\n+    @Override\n+    public <name>ArrayList shuffleThis()", "originalCommit": "d018e4fac7529319ab071978ed5f4328b2b9e57f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMjQ1MA==", "url": "https://github.com/eclipse/eclipse-collections/pull/899#discussion_r430512450", "bodyText": "This should have a default implementation unless you want this PR to wait for a major release.", "author": "donraab", "createdAt": "2020-05-26T15:40:31Z", "path": "eclipse-collections-code-generator/src/main/resources/api/list/mutablePrimitiveList.stg", "diffHunk": "@@ -151,6 +151,11 @@ allMethods(type) ::= <<\n  */\n Mutable<name>List sortThis();\n \n+/**\n+ * Randomly permutes this list mutating its contents and returns the same list (this).\n+ */\n+Mutable<name>List shuffleThis();", "originalCommit": "d018e4fac7529319ab071978ed5f4328b2b9e57f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxODQ2NQ==", "url": "https://github.com/eclipse/eclipse-collections/pull/899#discussion_r430518465", "bodyText": "Will pull the implementation up to MutablePrimitveList interface as default", "author": "vmzakharov", "createdAt": "2020-05-26T15:48:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDUxMjQ1MA=="}], "type": "inlineReview"}, {"oid": "992aed8c42620099801a99b7f76ef9acb09e77a3", "url": "https://github.com/eclipse/eclipse-collections/commit/992aed8c42620099801a99b7f76ef9acb09e77a3", "message": "Closes #728: Adds shuffle operation to primitive lists\n\nSigned-off-by: vmzakharov <zakharov.vladimir.m@gmail.com>", "committedDate": "2020-05-26T21:00:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDcyOTI3Nw==", "url": "https://github.com/eclipse/eclipse-collections/pull/899#discussion_r430729277", "bodyText": "This could be replaced with:\n<name>List shuffleOne = list.shuffleThis().toImmutable();\n<name>List shuffleTwo = list.shuffleThis().toImmutable();", "author": "donraab", "createdAt": "2020-05-26T21:54:17Z", "path": "eclipse-collections-code-generator/src/main/resources/test/list/mutable/abstractPrimitiveListTestCase.stg", "diffHunk": "@@ -320,6 +320,24 @@ public abstract class Abstract<name>ListTestCase extends AbstractMutable<name>Co\n         Assert.assertEquals(<(literal.(type))(\"1\")>, list.get(0)<(wideDelta.(type))>);\n     }\n \n+    @Test\n+    public void shuffleThis()\n+    {\n+        Mutable<name>List list = this.newWith(<[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\"]:(literal.(type))(); separator=\", \">);\n+\n+        Mutable<name>List checkList = this.newWith(<[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\"]:(literal.(type))(); separator=\", \">);\n+\n+        Mutable<name>List shuffleOne = this.newWith(list.shuffleThis().toArray());", "originalCommit": "992aed8c42620099801a99b7f76ef9acb09e77a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDczMTI0NQ==", "url": "https://github.com/eclipse/eclipse-collections/pull/899#discussion_r430731245", "bodyText": "These would be replaced by:\nAssert.assertEquals(checkList.toBag(), shuffleOne.toBag());\nAssert.assertEquals(checkList.toBag(), shuffleTwo.toBag());", "author": "donraab", "createdAt": "2020-05-26T21:59:06Z", "path": "eclipse-collections-code-generator/src/main/resources/test/list/mutable/abstractPrimitiveListTestCase.stg", "diffHunk": "@@ -320,6 +320,24 @@ public abstract class Abstract<name>ListTestCase extends AbstractMutable<name>Co\n         Assert.assertEquals(<(literal.(type))(\"1\")>, list.get(0)<(wideDelta.(type))>);\n     }\n \n+    @Test\n+    public void shuffleThis()\n+    {\n+        Mutable<name>List list = this.newWith(<[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\"]:(literal.(type))(); separator=\", \">);\n+\n+        Mutable<name>List checkList = this.newWith(<[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\"]:(literal.(type))(); separator=\", \">);\n+\n+        Mutable<name>List shuffleOne = this.newWith(list.shuffleThis().toArray());\n+        Mutable<name>List shuffleTwo = this.newWith(list.shuffleThis().toArray());\n+\n+        Assert.assertNotEquals(checkList, shuffleOne);\n+        Assert.assertNotEquals(checkList, shuffleTwo);\n+        Assert.assertNotEquals(shuffleOne, shuffleTwo);\n+\n+        Assert.assertEquals(checkList, shuffleOne.sortThis());\n+        Assert.assertEquals(checkList, shuffleTwo.sortThis());\n+    }", "originalCommit": "992aed8c42620099801a99b7f76ef9acb09e77a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4ac2eecff05da5edcb80d361eab4cf7864e914f8", "url": "https://github.com/eclipse/eclipse-collections/commit/4ac2eecff05da5edcb80d361eab4cf7864e914f8", "message": "Closes #728: Adds shuffle operation to primitive lists\n\nSigned-off-by: vmzakharov <zakharov.vladimir.m@gmail.com>", "committedDate": "2020-05-26T23:56:45Z", "type": "commit"}, {"oid": "4ac2eecff05da5edcb80d361eab4cf7864e914f8", "url": "https://github.com/eclipse/eclipse-collections/commit/4ac2eecff05da5edcb80d361eab4cf7864e914f8", "message": "Closes #728: Adds shuffle operation to primitive lists\n\nSigned-off-by: vmzakharov <zakharov.vladimir.m@gmail.com>", "committedDate": "2020-05-26T23:56:45Z", "type": "forcePushed"}]}