{"pr_number": 3305, "pr_title": "[no ticket][risk=no] Refactoring Home page tests", "pr_createdAt": "2020-03-26T20:05:27Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3305", "timeline": [{"oid": "629f7fd014318bebdc79ed6d800eb2753d8cb481", "url": "https://github.com/all-of-us/workbench/commit/629f7fd014318bebdc79ed6d800eb2753d8cb481", "message": "refactor Home page tests", "committedDate": "2020-03-26T20:02:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg1ODYyNg==", "url": "https://github.com/all-of-us/workbench/pull/3305#discussion_r398858626", "bodyText": "relocated steps from 'Check Workspace card on Home page' to this test. Change doesn't affect test coverage or code logic.", "author": "aweng98", "createdAt": "2020-03-26T20:07:19Z", "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -38,19 +37,34 @@ describe('Home page ui tests', () => {\n       const cardElem = new BaseElement(page, card.asElementHandle());\n       expect(await cardElem.isVisible()).toBe(true);\n       const size = await cardElem.getSize();\n-      if (width === undefined) {\n+      expect(size).toBeTruthy();\n+      expect(size.height).toBeGreaterThan(1);\n+      expect(size.width).toBeGreaterThan(1);\n+\n+      if (width === undefined || height === undefined) {\n         width = size.width; // Initialize width and height with first card element's size, compare with rest cards\n         height = size.height;\n       } else {\n         expect(size.height).toEqual(height);\n         expect(size.width).toEqual(width);\n       }\n+\n+      // check workspace name has characters\n+      const cardName = await card.getResourceCardName();\n+      expect(cardName).toMatch(new RegExp(/^[a-zA-Z]+/));\n+\n+      // check ellipsis icon existed\n+      expect(await card.getEllipsisIcon()).toBeTruthy();\n+\n+      // Assumption: test user is workspace Owner.\n+      // Check ellipsis popup has right option values\n+      const links = await card.getPopupLinkTextsArray();\n+      expect(links).toEqual(expect.arrayContaining(['Share', 'Edit', 'Duplicate', 'Delete']));", "originalCommit": "629f7fd014318bebdc79ed6d800eb2753d8cb481", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg2MzIzMg==", "url": "https://github.com/all-of-us/workbench/pull/3305#discussion_r398863232", "bodyText": "fail test early if size isn't as expected. e.g. if size is undefined.", "author": "aweng98", "createdAt": "2020-03-26T20:15:32Z", "path": "e2e/tests/home/home-page.spec.ts", "diffHunk": "@@ -38,19 +37,34 @@ describe('Home page ui tests', () => {\n       const cardElem = new BaseElement(page, card.asElementHandle());\n       expect(await cardElem.isVisible()).toBe(true);\n       const size = await cardElem.getSize();\n-      if (width === undefined) {\n+      expect(size).toBeTruthy();\n+      expect(size.height).toBeGreaterThan(1);\n+      expect(size.width).toBeGreaterThan(1);", "originalCommit": "629f7fd014318bebdc79ed6d800eb2753d8cb481", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}