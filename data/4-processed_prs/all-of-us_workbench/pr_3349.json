{"pr_number": 3349, "pr_title": "[RW-4709][risk=no] Add jest-junit reporter in e2e project", "pr_createdAt": "2020-04-04T23:05:15Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3349", "timeline": [{"oid": "2d2f0b995bd8a20a081cac8f877ef96fb45b1f82", "url": "https://github.com/all-of-us/workbench/commit/2d2f0b995bd8a20a081cac8f877ef96fb45b1f82", "message": "setup jest-junit\n\nenable puppeteer job\n\nmkdir\n\nparallelism\n\njest-junit outputDirectory in package.json\n\njest-junit outputDirectory in package.json\n\nnot working\n\nnot working\n\ntest\n\ntest\n\ntest\n\ntest\n\nparallelism 3\n\nremove jest-cli\n\ncache version\n\nmaxWorker 2\n\nupdate store_artifacts dir\n\nupdate store_artifacts dir\n\nundo skipped tests", "committedDate": "2020-04-05T03:53:17Z", "type": "commit"}, {"oid": "a5f9e9f62296c83436f1dba40d6f068d038e7155", "url": "https://github.com/all-of-us/workbench/commit/a5f9e9f62296c83436f1dba40d6f068d038e7155", "message": "remove yarn --silent switch", "committedDate": "2020-04-05T03:53:15Z", "type": "commit"}, {"oid": "a5f9e9f62296c83436f1dba40d6f068d038e7155", "url": "https://github.com/all-of-us/workbench/commit/a5f9e9f62296c83436f1dba40d6f068d038e7155", "message": "remove yarn --silent switch", "committedDate": "2020-04-05T03:53:15Z", "type": "forcePushed"}, {"oid": "e0f98290e076fa66a6898ed0ad91422c0cd09605", "url": "https://github.com/all-of-us/workbench/commit/e0f98290e076fa66a6898ed0ad91422c0cd09605", "message": "screenshot testing", "committedDate": "2020-04-05T19:08:56Z", "type": "commit"}, {"oid": "e9e9bee5250e58bc4d16704b6be800a36bbd1e1e", "url": "https://github.com/all-of-us/workbench/commit/e9e9bee5250e58bc4d16704b6be800a36bbd1e1e", "message": "restore skipped tests", "committedDate": "2020-04-05T20:21:21Z", "type": "commit"}, {"oid": "2243d75d46bafa357e93ce38a66b87a33e17edf6", "url": "https://github.com/all-of-us/workbench/commit/2243d75d46bafa357e93ce38a66b87a33e17edf6", "message": "undo maxWorker 2", "committedDate": "2020-04-06T14:09:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDExODYwNg==", "url": "https://github.com/all-of-us/workbench/pull/3349#discussion_r404118606", "bodyText": "I am removing jest-cli for now because I haven't used any of its feature.", "author": "aweng98", "createdAt": "2020-04-06T14:07:04Z", "path": "e2e/package.json", "diffHunk": "@@ -39,7 +43,7 @@\n     \"faker\": \"^4.1.0\",\n     \"fs-extra\": \"^9.0.0\",\n     \"jest\": \"^25.1.0\",\n-    \"jest-cli\": \"^25.1.0\",", "originalCommit": "e9e9bee5250e58bc4d16704b6be800a36bbd1e1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDEyODg3MQ==", "url": "https://github.com/all-of-us/workbench/pull/3349#discussion_r404128871", "bodyText": "Adding a version number. From CircleCI official doc:\nIf you would like to invalidate your cache manually, you can bump v1 to v2 in your config.yml file. In this case, you would now have a new cache key v2-npm-deps, which will trigger the storing of a new cache.", "author": "aweng98", "createdAt": "2020-04-06T14:19:58Z", "path": ".circleci/config.yml", "diffHunk": "@@ -298,15 +298,15 @@ jobs:\n           command: git submodule update --init --recursive\n       - restore_cache:\n           keys:\n-          - e2e-test-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n-          - e2e-test-cache-\n+          - v1-e2e-test-cache-{{ checksum \"~/workbench/e2e/yarn.lock\" }}", "originalCommit": "2243d75d46bafa357e93ce38a66b87a33e17edf6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE3MDcxMg==", "url": "https://github.com/all-of-us/workbench/pull/3349#discussion_r404170712", "bodyText": "Just to check, this is writing to circle, right? and nowhere else?", "author": "s-rubenstein", "createdAt": "2020-04-06T15:13:37Z", "path": ".circleci/config.yml", "diffHunk": "@@ -317,9 +317,12 @@ jobs:\n       - run:\n           name: Run e2e tests (Puppeteer and Jest)\n           working_directory: ~/workbench/e2e\n-          command: yarn --silent test:ci\n+          command: yarn test:ci\n       - store_artifacts:\n           path: e2e/logs\n+          destination: logs\n+      - store_test_results:\n+          path: ~/workbench/e2e/logs", "originalCommit": "2243d75d46bafa357e93ce38a66b87a33e17edf6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE5NTE5MQ==", "url": "https://github.com/all-of-us/workbench/pull/3349#discussion_r404195191", "bodyText": "In e2e project, screenshot or/and html file are saved in /logs sub-directory. If you run tests on localhost, you'll find failed screenshots and html files in /logs dir.\nWe have to set store_test_results key to tell CircleCI where to find saved files.", "author": "aweng98", "createdAt": "2020-04-06T15:45:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDE3MDcxMg=="}], "type": "inlineReview"}]}