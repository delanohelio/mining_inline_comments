{"pr_number": 3247, "pr_title": "[RW-2178][RISK=NO]Warning for short research purpose review", "pr_createdAt": "2020-03-12T14:17:41Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3247", "timeline": [{"oid": "b836b8918e0744351c082ff5dc93cb780e7c47a2", "url": "https://github.com/all-of-us/workbench/commit/b836b8918e0744351c082ff5dc93cb780e7c47a2", "message": "Warning message if research summary is < 50 char", "committedDate": "2020-03-12T14:11:50Z", "type": "commit"}, {"oid": "0b143487b06ee5c04a3546223e41758970835831", "url": "https://github.com/all-of-us/workbench/commit/0b143487b06ee5c04a3546223e41758970835831", "message": "stub workspace summary update", "committedDate": "2020-03-12T14:23:09Z", "type": "commit"}, {"oid": "c80b5e3df2d341364fe34fc779e29453490ea582", "url": "https://github.com/all-of-us/workbench/commit/c80b5e3df2d341364fe34fc779e29453490ea582", "message": "update variable name", "committedDate": "2020-03-12T14:28:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2NjY0OA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391666648", "bodyText": "I would explicitly say 50-1000 characters if we're blocking on < 50.", "author": "als364", "createdAt": "2020-03-12T14:38:49Z", "path": "ui/src/app/pages/workspace/workspace-edit-text.tsx", "diffHunk": "@@ -158,7 +158,7 @@ export const researchPurposeQuestions = [\n     description: <div>If you are exploring the data at this stage to formalize a specific\n       research question, please describe the reason for exploring the data, and the scientific\n       question you hope to be able to answer using the data. <br/>\n-      (Free text; 500 Character limit)</div>\n+      (Free text; 1000 Character limit)</div>", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyODM0MQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r392028341", "bodyText": "Now that we not blocking on 50 so i'll keep it as it as 1000", "author": "NehaBroad", "createdAt": "2020-03-13T04:46:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2NjY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI2NTY3Mw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r392265673", "bodyText": "Works for me.", "author": "als364", "createdAt": "2020-03-13T14:34:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2NjY0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2NzU3Mw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391667573", "bodyText": "nit: 'at least' instead of 'atleast'", "author": "als364", "createdAt": "2020-03-12T14:40:09Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -202,6 +210,31 @@ export const WorkspaceEditSection = (props) => {\n   </div>;\n };\n \n+export const WorkspaceText = (props) => {\n+  return  <WorkspaceEditSection data-test-id={props.rowId}\n+      header={props.researchPurpose.header}\n+      description={props.researchPurpose.description} index={props.index} indent>\n+        {/* Change the box border color to red if the number of characters is less than 50 */}\n+      <TextArea style={{...styles.textArea,\n+        borderColor: props.summaryObj.warningMsg ? colors.danger : colorWithWhiteness(colors.dark, 0.5)}}\n+        id={props.rowId} name={props.rowId} value={props.researchValue}  onBlur={() => props.onBlur()}\n+        onChange={v => props.onChange(v)}/>\n+\n+    <FlexRow id={props.rowId} data-test-id='charBox' style={{...styles.textBoxCharRemaining,\n+      borderColor: props.summaryObj.warningMsg ? colors.danger : colorWithWhiteness(colors.dark, 0.5)}}>\n+      {props.summaryObj.warningMsg && <label data-test-id='warningMsg'\n+        style={{color: colors.danger, textAlign: 'right', justifyContent: 'flex-start'}}>\n+        Please enter atleast 50 characters.", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2NzgzOA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391667838", "bodyText": "nit: just write out the entire words of 'characterMessage'", "author": "als364", "createdAt": "2020-03-12T14:40:32Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -202,6 +210,31 @@ export const WorkspaceEditSection = (props) => {\n   </div>;\n };\n \n+export const WorkspaceText = (props) => {\n+  return  <WorkspaceEditSection data-test-id={props.rowId}\n+      header={props.researchPurpose.header}\n+      description={props.researchPurpose.description} index={props.index} indent>\n+        {/* Change the box border color to red if the number of characters is less than 50 */}\n+      <TextArea style={{...styles.textArea,\n+        borderColor: props.summaryObj.warningMsg ? colors.danger : colorWithWhiteness(colors.dark, 0.5)}}\n+        id={props.rowId} name={props.rowId} value={props.researchValue}  onBlur={() => props.onBlur()}\n+        onChange={v => props.onChange(v)}/>\n+\n+    <FlexRow id={props.rowId} data-test-id='charBox' style={{...styles.textBoxCharRemaining,\n+      borderColor: props.summaryObj.warningMsg ? colors.danger : colorWithWhiteness(colors.dark, 0.5)}}>\n+      {props.summaryObj.warningMsg && <label data-test-id='warningMsg'\n+        style={{color: colors.danger, textAlign: 'right', justifyContent: 'flex-start'}}>\n+        Please enter atleast 50 characters.\n+      </label>}\n+      {props.researchValue &&\n+      <div data-test-id='characterMsg' style={{color: props.summaryObj.textColor, marginLeft: 'auto'}}>", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY2ODMwMw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391668303", "bodyText": "I wouldn't call these props if they're part of state.", "author": "als364", "createdAt": "2020-03-12T14:41:13Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -260,7 +305,12 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n         showUnderservedPopulationDetails: false,\n         showStigmatizationDetails: false,\n         billingAccounts: [],\n-        showCreateBillingAccountModal: false\n+        showCreateBillingAccountModal: false,\n+        researchSummaryProps: {", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MDk3Ng==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391670976", "bodyText": "nit: 'atleast' -> 'at least'", "author": "als364", "createdAt": "2020-03-12T14:45:02Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1149,12 +1195,14 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n                 {errors.billingAccountName && <div>You must select a billing account</div>}\n                 {errors.primaryPurpose && <div>You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>You must answer <i>What are the anticipated findings\n-                  from the study? (Question # 2.1)</i></div>}\n-                {errors.scientificApproach && <div>You must answer <i>What are the scientific\n-                  approaches you plan to use for your study (Question # 2.2)</i></div>}\n-                {errors.intendedStudy && <div>You must answer <i>What are the specific\n-                  scientific question(s) you intend to study (Question # 2.3)</i></div>}\n+                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                  from the study? (Question # 2.1)</i> should be of atleast 50 characters and max 1000 characters</div>}", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MTA2NA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391671064", "bodyText": "nit: 'atleast' -> 'at least'", "author": "als364", "createdAt": "2020-03-12T14:45:10Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1149,12 +1195,14 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n                 {errors.billingAccountName && <div>You must select a billing account</div>}\n                 {errors.primaryPurpose && <div>You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>You must answer <i>What are the anticipated findings\n-                  from the study? (Question # 2.1)</i></div>}\n-                {errors.scientificApproach && <div>You must answer <i>What are the scientific\n-                  approaches you plan to use for your study (Question # 2.2)</i></div>}\n-                {errors.intendedStudy && <div>You must answer <i>What are the specific\n-                  scientific question(s) you intend to study (Question # 2.3)</i></div>}\n+                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                  from the study? (Question # 2.1)</i> should be of atleast 50 characters and max 1000 characters</div>}\n+                {errors.scientificApproach && <div>Answer for <i>What are the scientific\n+                  approaches you plan to use for your study (Question # 2.2)</i> should be of\n+                  atleast 50 characters and max 1000 characters</div>}", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MTE0MQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391671141", "bodyText": "nit: 'atleast' -> 'at least'", "author": "als364", "createdAt": "2020-03-12T14:45:17Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -1149,12 +1195,14 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n                 {errors.billingAccountName && <div>You must select a billing account</div>}\n                 {errors.primaryPurpose && <div>You must choose at least one primary research\n                   purpose (Question 1)</div>}\n-                {errors.anticipatedFindings && <div>You must answer <i>What are the anticipated findings\n-                  from the study? (Question # 2.1)</i></div>}\n-                {errors.scientificApproach && <div>You must answer <i>What are the scientific\n-                  approaches you plan to use for your study (Question # 2.2)</i></div>}\n-                {errors.intendedStudy && <div>You must answer <i>What are the specific\n-                  scientific question(s) you intend to study (Question # 2.3)</i></div>}\n+                {errors.anticipatedFindings && <div>Answer for <i>What are the anticipated findings\n+                  from the study? (Question # 2.1)</i> should be of atleast 50 characters and max 1000 characters</div>}\n+                {errors.scientificApproach && <div>Answer for <i>What are the scientific\n+                  approaches you plan to use for your study (Question # 2.2)</i> should be of\n+                  atleast 50 characters and max 1000 characters</div>}\n+                {errors.intendedStudy && <div>Answer for<i>What are the specific\n+                  scientific question(s) you intend to study (Question # 2.3)</i> should be of\n+                  atleast 50 characters and max 1000 characters</div>}", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MTI1MA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391671250", "bodyText": "Don't delete text the user has entered. Just prevent them from submitting it until it's a short enough text.", "author": "als364", "createdAt": "2020-03-12T14:45:26Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -619,6 +669,31 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       return researchPurpose.researchOutcomeList && researchPurpose.researchOutcomeList.length !== 0 ;\n     }\n \n+\n+    updateResearchPurposeSummary(purposeSummary, value) {\n+      if (this.state.researchSummaryProps[purposeSummary].warningMsg && value.length >= 50 ) {\n+        this.setState(fp.set(['researchSummaryProps', purposeSummary, 'warningMsg'], false));\n+      }\n+      if (value.length > 1000) {\n+        value = value.substring(0, 1000);", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwNjQyNw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391706427", "bodyText": "I feel its better to restrict at 1000 rather than showing -ve and have additional checks ( i can remove the 1000 check at submit since it will be redundant)", "author": "NehaBroad", "createdAt": "2020-03-12T15:36:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MTI1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyOTMzMA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391829330", "bodyText": "It's not a good experience for the user. If you have to cut down text to size you want to be able to see what you would have written if you'd had as many words as you want, so you can summarize.", "author": "als364", "createdAt": "2020-03-12T18:59:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3MTI1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3Mzg4MQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391673881", "bodyText": "Why 950?", "author": "als364", "createdAt": "2020-03-12T14:49:13Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -619,6 +669,31 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       return researchPurpose.researchOutcomeList && researchPurpose.researchOutcomeList.length !== 0 ;\n     }\n \n+\n+    updateResearchPurposeSummary(purposeSummary, value) {\n+      if (this.state.researchSummaryProps[purposeSummary].warningMsg && value.length >= 50 ) {\n+        this.setState(fp.set(['researchSummaryProps', purposeSummary, 'warningMsg'], false));\n+      }\n+      if (value.length > 1000) {\n+        value = value.substring(0, 1000);\n+      }\n+      if (value.length >= 950 && this.state.researchSummaryProps[purposeSummary].textColor !== colors.danger) {", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwNjU2OA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391706568", "bodyText": "message at the last 50 characters", "author": "NehaBroad", "createdAt": "2020-03-12T15:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3Mzg4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3NDQzNw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391674437", "bodyText": "This won't make the message go away, right? It'll just turn it grey.", "author": "als364", "createdAt": "2020-03-12T14:50:06Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -619,6 +669,31 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n       return researchPurpose.researchOutcomeList && researchPurpose.researchOutcomeList.length !== 0 ;\n     }\n \n+\n+    updateResearchPurposeSummary(purposeSummary, value) {\n+      if (this.state.researchSummaryProps[purposeSummary].warningMsg && value.length >= 50 ) {\n+        this.setState(fp.set(['researchSummaryProps', purposeSummary, 'warningMsg'], false));\n+      }\n+      if (value.length > 1000) {\n+        value = value.substring(0, 1000);\n+      }\n+      if (value.length >= 950 && this.state.researchSummaryProps[purposeSummary].textColor !== colors.danger) {\n+        this.setState(fp.set(['researchSummaryProps', purposeSummary, 'textColor'], colors.danger));\n+      } else if (value.length < 950 && this.state.researchSummaryProps[purposeSummary].textColor !== colors.disabled) {\n+        this.setState(fp.set(['researchSummaryProps', purposeSummary, 'textColor'], colors.disabled));", "originalCommit": "c80b5e3df2d341364fe34fc779e29453490ea582", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcwNzIwMA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391707200", "bodyText": "ok so (i'll update the description) if the user is down to its last 50 characters then right side text characters remaining will turn red", "author": "NehaBroad", "createdAt": "2020-03-12T15:37:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3NDQzNw=="}], "type": "inlineReview"}, {"oid": "c1029755680124d93939679130718b27645232f8", "url": "https://github.com/all-of-us/workbench/commit/c1029755680124d93939679130718b27645232f8", "message": "PR Comment atleast -> at least and change variable name change to State rather than Props", "committedDate": "2020-03-12T15:46:43Z", "type": "commit"}, {"oid": "516499312e029cf77bee1b0d9734ae1f4394783a", "url": "https://github.com/all-of-us/workbench/commit/516499312e029cf77bee1b0d9734ae1f4394783a", "message": "rebase", "committedDate": "2020-03-12T15:53:32Z", "type": "commit"}, {"oid": "6eeef95b0977e7c69b4da7f75b931e849b501cbd", "url": "https://github.com/all-of-us/workbench/commit/6eeef95b0977e7c69b4da7f75b931e849b501cbd", "message": "correct import", "committedDate": "2020-03-12T16:11:22Z", "type": "commit"}, {"oid": "4532a38c5ebd4f6883831501344054d0fd1358ab", "url": "https://github.com/all-of-us/workbench/commit/4532a38c5ebd4f6883831501344054d0fd1358ab", "message": "had a chat with Karthik removing the blocking which includes red border and disable submit button if char is <50", "committedDate": "2020-03-12T17:43:07Z", "type": "commit"}, {"oid": "dc653b486368d6c2fb0f1d1ce30f201786111c64", "url": "https://github.com/all-of-us/workbench/commit/dc653b486368d6c2fb0f1d1ce30f201786111c64", "message": "update message if char 1000", "committedDate": "2020-03-12T18:24:01Z", "type": "commit"}, {"oid": "b40a177fde60a2c79b83db8a5105905e1e239b9d", "url": "https://github.com/all-of-us/workbench/commit/b40a177fde60a2c79b83db8a5105905e1e239b9d", "message": "add test for 1000 char", "committedDate": "2020-03-12T18:29:46Z", "type": "commit"}, {"oid": "96b4d454ad2a99284688a2788b5604b7688d5322", "url": "https://github.com/all-of-us/workbench/commit/96b4d454ad2a99284688a2788b5604b7688d5322", "message": "some label and id name change as per PR suggestion", "committedDate": "2020-03-12T18:35:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgyOTY0Mg==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391829642", "bodyText": "Can you please change this to warningMessage? No need to abbreviate this", "author": "als364", "createdAt": "2020-03-12T18:59:42Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -223,6 +258,17 @@ export interface WorkspaceEditProps {\n   cancel: Function;\n }\n \n+export interface SummaryProps {\n+  textColor: string;\n+  warningMsg: boolean;", "originalCommit": "96b4d454ad2a99284688a2788b5604b7688d5322", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzMDI4Nw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r391830287", "bodyText": "If researchValue is a prop it shouldn't be changing. This should be a full React.Component with props and state, and anything that has the ability to change should be in state.", "author": "als364", "createdAt": "2020-03-12T19:00:58Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -202,6 +211,32 @@ export const WorkspaceEditSection = (props) => {\n   </div>;\n };\n \n+export const WorkspaceText = (props) => {", "originalCommit": "96b4d454ad2a99284688a2788b5604b7688d5322", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyMTY0Mw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r392021643", "bodyText": "Ohhhhh...yeah and in fact all the logic for warning message and  textColor should happen here as it has direct relation with this Component rather than WorkspaceEdit", "author": "NehaBroad", "createdAt": "2020-03-13T04:09:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTgzMDI4Nw=="}], "type": "inlineReview"}, {"oid": "88b3ee19fbbe29c7bf0a5b321fbf65a5d56b2986", "url": "https://github.com/all-of-us/workbench/commit/88b3ee19fbbe29c7bf0a5b321fbf65a5d56b2986", "message": "move Components to util file and create React class for workspce researchpurposesummary", "committedDate": "2020-03-13T04:41:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyNzgyNw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r392027827", "bodyText": "Moved WorkspaceEditSection along with WorkspaceResearchSummary object to another file since there is already a lot going on in workspace-edit file.", "author": "NehaBroad", "createdAt": "2020-03-13T04:43:09Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -159,49 +134,18 @@ const styles = reactStyles({\n     marginLeft: '-1rem',\n     paddingTop: '0.3rem',\n     paddingBottom: '0.3rem'\n+  },\n+  spinner: {\n+    position: 'fixed',\n+    top: '50%',\n+    left: '50%',\n+    transform: 'translate(-50%, -50%)',\n+    backgroundColor: 'rgba(0, 0, 0, 0.2)',\n+    height: '100%',\n+    width: '100%',\n   }\n });\n \n-export const WorkspaceEditSection = (props) => {", "originalCommit": "88b3ee19fbbe29c7bf0a5b321fbf65a5d56b2986", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "095c6cb1c687aba731d015adf9b7be51c5436388", "url": "https://github.com/all-of-us/workbench/commit/095c6cb1c687aba731d015adf9b7be51c5436388", "message": "logic to change the textBox color is moved to util class", "committedDate": "2020-03-13T04:44:42Z", "type": "commit"}, {"oid": "4e63bcc4363a3894d373d43aa6fb39e31f9d14bb", "url": "https://github.com/all-of-us/workbench/commit/4e63bcc4363a3894d373d43aa6fb39e31f9d14bb", "message": "correct import", "committedDate": "2020-03-13T05:27:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjI3Nzc1Mw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r392277753", "bodyText": "It seems like this should be in its own file, consumed by both WorkspaceResearchSummary and workspace-edit.tsx. That avoids having to name files things like workspace-util-component - you can name one file workspace-edit-section and the other workspace-research-summary.", "author": "als364", "createdAt": "2020-03-13T14:54:13Z", "path": "ui/src/app/pages/workspace/workspace-util-component.tsx", "diffHunk": "@@ -0,0 +1,177 @@\n+import {FlexRow} from 'app/components/flex';\n+import {InfoIcon} from 'app/components/icons';\n+import {TextArea} from 'app/components/inputs';\n+import {TooltipTrigger} from 'app/components/popups';\n+import colors, {colorWithWhiteness} from 'app/styles/colors';\n+import {reactStyles} from 'app/utils';\n+import * as React from 'react';\n+import {ResearchPurposeQuestion} from './workspace-edit-text';\n+\n+\n+const styles = reactStyles({\n+  requiredText: {\n+    fontSize: '13px',\n+    fontStyle: 'italic',\n+    fontWeight: 400,\n+    color: colors.primary,\n+    marginLeft: '0.2rem'\n+  },\n+  header: {\n+    fontWeight: 600,\n+    lineHeight: '24px',\n+    color: colors.primary\n+  },\n+  text: {\n+    fontSize: '13px',\n+    color: colors.primary,\n+    fontWeight: 400,\n+    lineHeight: '24px'\n+  },\n+  infoIcon: {\n+    height: '16px',\n+    marginLeft: '0.2rem',\n+    width: '16px'\n+  },\n+  textBoxCharRemaining: {\n+    justifyContent: 'space-between',\n+    width: '50rem',\n+    backgroundColor: colorWithWhiteness(colors.primary, 0.95),\n+    fontSize: 12,\n+    colors: colors.primary,\n+    padding: '0.25rem',\n+    borderRadius: '0 0 3px 3px', marginTop: '-0.5rem',\n+    border: `1px solid ${colorWithWhiteness(colors.dark, 0.5)}`\n+  },\n+  textArea: {\n+    height: '15rem',\n+    resize: 'none',\n+    width: '50rem',\n+    borderRadius: '3px 3px 0 0',\n+    boderColor: colorWithWhiteness(colors.dark, 0.5)\n+  }\n+});\n+\n+\n+export const WorkspaceEditSection = (props) => {", "originalCommit": "4e63bcc4363a3894d373d43aa6fb39e31f9d14bb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "088a708b2b84633a36e0a5ed8e1d6af214fb31a9", "url": "https://github.com/all-of-us/workbench/commit/088a708b2b84633a36e0a5ed8e1d6af214fb31a9", "message": "Extracting styles and WorkspaceEditComponent seperate file", "committedDate": "2020-03-16T03:47:31Z", "type": "commit"}, {"oid": "039ae1b5efab72c94fc9fb0a9690370b31d2cc19", "url": "https://github.com/all-of-us/workbench/commit/039ae1b5efab72c94fc9fb0a9690370b31d2cc19", "message": "Pushing styles back to individual classes", "committedDate": "2020-03-16T13:46:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzODA5NA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393038094", "bodyText": "Can you please specify the props in an interface and remove any that are never used by modules that create WorkspaceEditSections?", "author": "als364", "createdAt": "2020-03-16T13:53:57Z", "path": "ui/src/app/pages/workspace/workspace-edit-section.tsx", "diffHunk": "@@ -0,0 +1,71 @@\n+import {FlexRow} from 'app/components/flex';\n+import {InfoIcon} from 'app/components/icons';\n+import {TooltipTrigger} from 'app/components/popups';\n+import colors from 'app/styles/colors';\n+import {reactStyles} from 'app/utils';\n+import * as React from 'react';\n+\n+export const styles = reactStyles({\n+  header: {\n+    fontWeight: 600,\n+    lineHeight: '24px',\n+    color: colors.primary\n+  },\n+  infoIcon: {\n+    height: '16px',\n+    marginLeft: '0.2rem',\n+    width: '16px'\n+  },\n+  requiredText: {\n+    fontSize: '13px',\n+    fontStyle: 'italic',\n+    fontWeight: 400,\n+    color: colors.primary,\n+    marginLeft: '0.2rem'\n+  },\n+  text: {\n+    fontSize: '13px',\n+    color: colors.primary,\n+    fontWeight: 400,\n+    lineHeight: '24px'\n+  }\n+});\n+export const WorkspaceEditSection = (props) => {", "originalCommit": "039ae1b5efab72c94fc9fb0a9690370b31d2cc19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA1NzQ0Ng==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393057446", "bodyText": "Will do however Its just an existing code that i just extracted out and put back", "author": "NehaBroad", "createdAt": "2020-03-16T14:19:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzODA5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA0MDYxOQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393040619", "bodyText": "Please fully specify the paths for these; i.e. app/pages/workspace/workspace-edit.", "author": "als364", "createdAt": "2020-03-16T13:57:50Z", "path": "ui/src/app/pages/workspace/workspace-edit.spec.tsx", "diffHunk": "@@ -1,15 +1,17 @@\n import {registerApiClient} from 'app/services/swagger-fetch-clients';\n import {cdrVersionStore, currentWorkspaceStore, navigate, routeConfigDataStore, serverConfigStore} from 'app/utils/navigation';\n+import {WorkspaceData} from 'app/utils/workspace-data';\n import {mount} from 'enzyme';\n import {DisseminateResearchEnum, ResearchOutcomeEnum,\n   SpecificPopulationEnum,UserApi, Workspace, WorkspaceAccessLevel, WorkspacesApi} from 'generated/fetch';\n+import * as fp from 'lodash/fp';\n import * as React from 'react';\n import {waitOneTickAndUpdate} from 'testing/react-test-helpers';\n import {cdrVersionListResponse} from 'testing/stubs/cdr-versions-api-stub';\n import {UserApiStub} from 'testing/stubs/user-api-stub';\n import {WorkspacesApiStub, workspaceStubs} from 'testing/stubs/workspaces-api-stub';\n-import {WorkspaceData} from 'app/utils/workspace-data';\n-import {WorkspaceEdit, WorkspaceEditMode, WorkspaceEditSection} from './workspace-edit';\n+import {WorkspaceEdit, WorkspaceEditMode} from './workspace-edit';", "originalCommit": "039ae1b5efab72c94fc9fb0a9690370b31d2cc19", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA0MDcwMQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393040701", "bodyText": "Please fully specify path", "author": "als364", "createdAt": "2020-03-16T13:57:58Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -42,6 +41,7 @@ import * as fp from 'lodash/fp';\n import {Dropdown} from 'primereact/dropdown';\n import * as React from 'react';\n import * as validate from 'validate.js';\n+import {WorkspaceEditSection} from './workspace-edit-section';", "originalCommit": "039ae1b5efab72c94fc9fb0a9690370b31d2cc19", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ca1ca65a3303c58de7c2881e434fc34a7fb41f6", "url": "https://github.com/all-of-us/workbench/commit/2ca1ca65a3303c58de7c2881e434fc34a7fb41f6", "message": "correct import", "committedDate": "2020-03-16T14:02:53Z", "type": "commit"}, {"oid": "1e365255fd3380a61db1a7127b5ac7ade1d4001c", "url": "https://github.com/all-of-us/workbench/commit/1e365255fd3380a61db1a7127b5ac7ade1d4001c", "message": "PR Comments full path and interface", "committedDate": "2020-03-16T14:52:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393085308", "bodyText": "Not sure the datatype for style", "author": "NehaBroad", "createdAt": "2020-03-16T14:54:11Z", "path": "ui/src/app/pages/workspace/workspace-edit-section.tsx", "diffHunk": "@@ -0,0 +1,86 @@\n+import {FlexRow} from 'app/components/flex';\n+import {InfoIcon} from 'app/components/icons';\n+import {TooltipTrigger} from 'app/components/popups';\n+import colors from 'app/styles/colors';\n+import {reactStyles} from 'app/utils';\n+import * as React from 'react';\n+\n+export const styles = reactStyles({\n+  header: {\n+    fontWeight: 600,\n+    lineHeight: '24px',\n+    color: colors.primary\n+  },\n+  infoIcon: {\n+    height: '16px',\n+    marginLeft: '0.2rem',\n+    width: '16px'\n+  },\n+  requiredText: {\n+    fontSize: '13px',\n+    fontStyle: 'italic',\n+    fontWeight: 400,\n+    color: colors.primary,\n+    marginLeft: '0.2rem'\n+  },\n+  text: {\n+    fontSize: '13px',\n+    color: colors.primary,\n+    fontWeight: 400,\n+    lineHeight: '24px'\n+  }\n+});\n+\n+interface Props {\n+  // As child description or header can be either string or reactNode\n+  children?: any;\n+  description?: any;\n+  header: any;\n+  index?: string;\n+  indent?: boolean;\n+  largeHeader?: any;\n+  required?: boolean;\n+  tooltip?: React.ReactNode;\n+  subHeader?: string;\n+  style?: any;", "originalCommit": "1e365255fd3380a61db1a7127b5ac7ade1d4001c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NjMyNQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393086325", "bodyText": "Nothing passes a style prop in to this component. Just get rid of the prop.", "author": "als364", "createdAt": "2020-03-16T14:55:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEyMTY5OQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393121699", "bodyText": "We cannot since WorkspaceEdit has a common style marginBottom and then add the specific style from each section thats using it in workspace-edit", "author": "NehaBroad", "createdAt": "2020-03-16T15:45:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEyOTU5MQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393129591", "bodyText": "Looking at it, it looks to me like there are a number of existing usages that pass that in as well, like here: https://github.com/all-of-us/workbench/blob/nsaxena/warningResearchPurpose/ui/src/app/pages/workspace/workspace-edit.tsx#L778\nI have one small thing here, but its probably out of scope for this ticket. Now that we have more files relating to workspace edit, can you make a tech debt ticket to move them to their own folder?", "author": "s-rubenstein", "createdAt": "2020-03-16T15:56:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMTYzMA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393131630", "bodyText": "They do however since almost none defines it as interface not sure if i can leave style type as any.  For description and header it makes sense sine it can be either string or node. So now the question is are we OK with data type of style being any?", "author": "NehaBroad", "createdAt": "2020-03-16T15:59:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMzM0Mw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393133343", "bodyText": "any is probably fine, or maybe React.CSSProperty?", "author": "s-rubenstein", "createdAt": "2020-03-16T16:01:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzMzY0Nw==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393133647", "bodyText": "Whatever type our reactStyle() method returns.", "author": "s-rubenstein", "createdAt": "2020-03-16T16:01:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzEzNjI5OQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393136299", "bodyText": "React.CSSProperty gives the error\nNamespace 'React' has no exported member 'CSSProperty'\nSo i guess i'll leave it as ANY", "author": "NehaBroad", "createdAt": "2020-03-16T16:05:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE0MDgxNg==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393140816", "bodyText": "https://precisionmedicineinitiative.atlassian.net/browse/RW-4612 to move it to a new folder", "author": "NehaBroad", "createdAt": "2020-03-16T16:12:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzI1NjI4OA==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393256288", "bodyText": "My bad on missing that the style prop was used, must not have expanded enough things.", "author": "als364", "createdAt": "2020-03-16T19:14:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA4NTMwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzE4MDAwNQ==", "url": "https://github.com/all-of-us/workbench/pull/3247#discussion_r393180005", "bodyText": "Can you type as string | React.ReactNode?", "author": "s-rubenstein", "createdAt": "2020-03-16T17:06:19Z", "path": "ui/src/app/pages/workspace/workspace-edit-section.tsx", "diffHunk": "@@ -0,0 +1,86 @@\n+import {FlexRow} from 'app/components/flex';\n+import {InfoIcon} from 'app/components/icons';\n+import {TooltipTrigger} from 'app/components/popups';\n+import colors from 'app/styles/colors';\n+import {reactStyles} from 'app/utils';\n+import * as React from 'react';\n+\n+export const styles = reactStyles({\n+  header: {\n+    fontWeight: 600,\n+    lineHeight: '24px',\n+    color: colors.primary\n+  },\n+  infoIcon: {\n+    height: '16px',\n+    marginLeft: '0.2rem',\n+    width: '16px'\n+  },\n+  requiredText: {\n+    fontSize: '13px',\n+    fontStyle: 'italic',\n+    fontWeight: 400,\n+    color: colors.primary,\n+    marginLeft: '0.2rem'\n+  },\n+  text: {\n+    fontSize: '13px',\n+    color: colors.primary,\n+    fontWeight: 400,\n+    lineHeight: '24px'\n+  }\n+});\n+\n+interface Props {\n+  // As child description or header can be either string or reactNode\n+  children?: any;", "originalCommit": "1e365255fd3380a61db1a7127b5ac7ade1d4001c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "249f7f1681ef2abe7dfdbc8f510a695d0de64a76", "url": "https://github.com/all-of-us/workbench/commit/249f7f1681ef2abe7dfdbc8f510a695d0de64a76", "message": "children or description can either be string or react node", "committedDate": "2020-03-16T17:46:52Z", "type": "commit"}]}