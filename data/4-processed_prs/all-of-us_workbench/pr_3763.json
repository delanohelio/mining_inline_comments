{"pr_number": 3763, "pr_title": "[no ticket][risk=no] Puppeteer enable rename dataset test code", "pr_createdAt": "2020-07-08T22:36:09Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3763", "timeline": [{"oid": "21bc44133693ba21cdd2d05b5512c5a889f1ab50", "url": "https://github.com/all-of-us/workbench/commit/21bc44133693ba21cdd2d05b5512c5a889f1ab50", "message": "enable rename dataset code", "committedDate": "2020-07-08T22:28:44Z", "type": "commit"}, {"oid": "a4730eabf3d770bedd7abd8e4013e570ade84186", "url": "https://github.com/all-of-us/workbench/commit/a4730eabf3d770bedd7abd8e4013e570ade84186", "message": "clear function fix", "committedDate": "2020-07-09T01:57:23Z", "type": "commit"}, {"oid": "3ab8bb813228f4d831549a68f022721aa03d970d", "url": "https://github.com/all-of-us/workbench/commit/3ab8bb813228f4d831549a68f022721aa03d970d", "message": "fix format", "committedDate": "2020-07-09T02:03:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5ODYzMQ==", "url": "https://github.com/all-of-us/workbench/pull/3763#discussion_r452198631", "bodyText": "While running dataset-create.spec to make sure it runs okay, I observed clear() func acts flaky. Old value in text input was not always cleared before type new text.\nMy fix is to add one retry.", "author": "aweng98", "createdAt": "2020-07-09T13:00:03Z", "path": "e2e/app/element/base-element.ts", "diffHunk": "@@ -151,10 +151,33 @@ export default class BaseElement extends Container {\n       });\n   }\n \n-  async type(text: string, options?: { delay: number }): Promise<this> {\n-    await this.focus();\n-    await this.clear();\n-    await this.asElementHandle().then((handle: ElementHandle) => handle.type(text, options));\n+  /**\n+   * Clear existing value in textbox then type new text value.\n+   * @param {string} The texts string.\n+   * @param options The typing options.\n+   */\n+  async type(textValue: string, options?: { delay: number }): Promise<this> {", "originalCommit": "3ab8bb813228f4d831549a68f022721aa03d970d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5OTU4OA==", "url": "https://github.com/all-of-us/workbench/pull/3763#discussion_r452199588", "bodyText": "clearText alternative: injecting page function.", "author": "aweng98", "createdAt": "2020-07-09T13:01:38Z", "path": "e2e/app/element/base-element.ts", "diffHunk": "@@ -177,12 +200,26 @@ export default class BaseElement extends Container {\n   }\n \n   /**\n-   * Clear value in textbox or textarea.\n+   * Clear value in textbox.\n    */\n-  async clear(): Promise<void> {\n+  async clear(options: ClickOptions = { clickCount: 3 }): Promise<void> {\n     const elemt = await this.asElementHandle();\n-    await elemt.click({ clickCount: 3 });\n-    await elemt.press('Backspace');\n+    await elemt.focus();\n+    await elemt.click(options);\n+    await this.page.keyboard.press('Backspace');\n+  }\n+\n+  async clearTextInput(): Promise<void> {", "originalCommit": "3ab8bb813228f4d831549a68f022721aa03d970d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}