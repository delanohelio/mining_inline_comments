{"pr_number": 3120, "pr_title": "[RW-4437][risk=no] Track sidebar state in local storage", "pr_createdAt": "2020-02-12T19:24:38Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3120", "timeline": [{"oid": "5c3fd2def6ddfc2b5ac6386c0f3ee56ffe846ce2", "url": "https://github.com/all-of-us/workbench/commit/5c3fd2def6ddfc2b5ac6386c0f3ee56ffe846ce2", "message": "RW-4437 track sidebar state in local storage", "committedDate": "2020-02-12T17:39:16Z", "type": "commit"}, {"oid": "2d6accce76ba2fa870d7e2fef12d8de32afe4957", "url": "https://github.com/all-of-us/workbench/commit/2d6accce76ba2fa870d7e2fef12d8de32afe4957", "message": "RW-4437 add box shadow on left of sidebar", "committedDate": "2020-02-12T18:39:34Z", "type": "commit"}, {"oid": "39b20b24a9633926269026b45b074690c1be7858", "url": "https://github.com/all-of-us/workbench/commit/39b20b24a9633926269026b45b074690c1be7858", "message": "RW-4437 move click event from icon to parent element", "committedDate": "2020-02-12T19:12:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NTMwMA==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378665300", "bodyText": "nit: pull out the sidebarState value into a constant. I think we're (loosely) following the convention of using capital letters for local storage keys.\nAlso, prefixing the key value with WORKSPACE may be helpful as we're planning to add the side bar component to the notebooks page.", "author": "ericsong", "createdAt": "2020-02-13T06:01:08Z", "path": "ui/src/app/pages/workspace/workspace-wrapper/component.ts", "diffHunk": "@@ -58,6 +58,12 @@ export class WorkspaceWrapperComponent implements OnInit, OnDestroy {\n   }\n \n   ngOnInit(): void {\n+    if (!!localStorage.getItem('sidebarState')) {", "originalCommit": "39b20b24a9633926269026b45b074690c1be7858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxOTI2Ng==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378919266", "bodyText": "Okay, now I see this convention used in the signed-in component also. Fixed.", "author": "dolbeew", "createdAt": "2020-02-13T15:08:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NTMwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NjUyMg==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378666522", "bodyText": "can we use setSidebarState here?", "author": "ericsong", "createdAt": "2020-02-13T06:06:14Z", "path": "ui/src/app/pages/workspace/workspace-wrapper/component.ts", "diffHunk": "@@ -58,6 +58,12 @@ export class WorkspaceWrapperComponent implements OnInit, OnDestroy {\n   }\n \n   ngOnInit(): void {\n+    if (!!localStorage.getItem('sidebarState')) {\n+      this.sidebarOpen = localStorage.getItem('sidebarState') === 'open';\n+    } else {\n+      this.sidebarOpen = true;", "originalCommit": "39b20b24a9633926269026b45b074690c1be7858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkxOTc1MA==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378919750", "bodyText": "Done.", "author": "dolbeew", "createdAt": "2020-02-13T15:09:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NjUyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NzI4MQ==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378667281", "bodyText": "also here.\nnit - IMO, it's easier to maintain the syncing to localStorage if its done in a one place (the setter) and the rest of the file just uses the setter and doesn't have to worry about localStorage.", "author": "ericsong", "createdAt": "2020-02-13T06:09:27Z", "path": "ui/src/app/pages/workspace/workspace-wrapper/component.ts", "diffHunk": "@@ -67,6 +73,7 @@ export class WorkspaceWrapperComponent implements OnInit, OnDestroy {\n           this.setHelpContent();\n           if (this.helpContent !== 'reviewParticipantDetail') {\n             this.sidebarOpen = false;\n+            localStorage.setItem('sidebarState', 'closed');", "originalCommit": "39b20b24a9633926269026b45b074690c1be7858", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODkyMDIwNQ==", "url": "https://github.com/all-of-us/workbench/pull/3120#discussion_r378920205", "bodyText": "Agreed, much cleaner this way.", "author": "dolbeew", "createdAt": "2020-02-13T15:09:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODY2NzI4MQ=="}], "type": "inlineReview"}, {"oid": "69f63a02965e63edf121faecc3080d911c30c68f", "url": "https://github.com/all-of-us/workbench/commit/69f63a02965e63edf121faecc3080d911c30c68f", "message": "RW-4437 pr feedback", "committedDate": "2020-02-13T14:43:42Z", "type": "commit"}]}