{"pr_number": 3346, "pr_title": "[no ticket][risk=no] Add new clickAndWait()", "pr_createdAt": "2020-04-03T21:12:50Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3346", "timeline": [{"oid": "56272a90d9ca5e11ffc80adc62d4f18192f6c270", "url": "https://github.com/all-of-us/workbench/commit/56272a90d9ca5e11ffc80adc62d4f18192f6c270", "message": "add clickAndWait method to reduce boilerplate code", "committedDate": "2020-04-03T21:10:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzMzOTUzMQ==", "url": "https://github.com/all-of-us/workbench/pull/3346#discussion_r403339531", "bodyText": "not 100% sure about the new method name. Welcoming suggestions for a better name.", "author": "aweng98", "createdAt": "2020-04-03T21:15:06Z", "path": "e2e/app/base-page.ts", "diffHunk": "@@ -45,11 +45,14 @@ export default abstract class BasePage {\n     return this.page.$eval(`${cssSelector}`, elem => elem.textContent.trim())\n   }\n \n-  async waitForNavigation() {\n+  /**\n+   * Click on element then wait for page navigation.\n+   * @param {ElementHandle} clickElement\n+   */\n+  async clickAndWait(clickElement: ElementHandle) {\n     return Promise.all([\n-      this.page.waitForNavigation({waitUntil: 'load'}),\n-      this.page.waitForNavigation({waitUntil: 'domcontentloaded'}),\n-      this.page.waitForNavigation({waitUntil: 'networkidle0', timeout: 60000}),\n+      this.page.waitForNavigation({waitUntil: ['domcontentloaded', 'networkidle0'], timeout: 90000}),\n+      clickElement.click(),", "originalCommit": "56272a90d9ca5e11ffc80adc62d4f18192f6c270", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c03c3a0b7bbf5ddeead80c21674b03619f917912", "url": "https://github.com/all-of-us/workbench/commit/c03c3a0b7bbf5ddeead80c21674b03619f917912", "message": "support type of BaseElement", "committedDate": "2020-04-03T23:53:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc5ODgyMQ==", "url": "https://github.com/all-of-us/workbench/pull/3346#discussion_r403798821", "bodyText": "The large diff here feels like an error, since no packages have been added, modified or removed. Please revert this file or help me understand why it changed so dramatically.", "author": "gjuggler", "createdAt": "2020-04-06T02:23:09Z", "path": "e2e/yarn.lock", "diffHunk": "@@ -265,43 +265,43 @@\n     chalk \"^2.0.1\"", "originalCommit": "c03c3a0b7bbf5ddeead80c21674b03619f917912", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDA5MTM0OA==", "url": "https://github.com/all-of-us/workbench/pull/3346#discussion_r404091348", "bodyText": "Reverted changes. Good eye, Greg. \ud83e\udd85 I don't remember why and how. Thank you.", "author": "aweng98", "createdAt": "2020-04-06T13:30:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzc5ODgyMQ=="}], "type": "inlineReview"}, {"oid": "132663438b726d2ef184e9522cc692bc103634e5", "url": "https://github.com/all-of-us/workbench/commit/132663438b726d2ef184e9522cc692bc103634e5", "message": "revert yarn.lock change", "committedDate": "2020-04-06T13:26:59Z", "type": "commit"}]}