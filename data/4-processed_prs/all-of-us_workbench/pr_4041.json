{"pr_number": 4041, "pr_title": "[no ticket][risk=no] Puppeteer Delete workspace", "pr_createdAt": "2020-09-21T23:21:52Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4041", "timeline": [{"oid": "fcff2212c24700f118c3ddaac76224cc081feebe", "url": "https://github.com/all-of-us/workbench/commit/fcff2212c24700f118c3ddaac76224cc081feebe", "message": "delete workspace test", "committedDate": "2020-09-21T23:20:00Z", "type": "commit"}, {"oid": "64cbfc4e8df4b92583043f64a61b4fa29773f407", "url": "https://github.com/all-of-us/workbench/commit/64cbfc4e8df4b92583043f64a61b4fa29773f407", "message": "rename dismissWorkspaceModal function", "committedDate": "2020-09-21T23:24:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQwMDE0Nw==", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r492400147", "bodyText": "selectWorkspaceAction moved to workspace-base.", "author": "aweng98", "createdAt": "2020-09-21T23:23:10Z", "path": "e2e/app/page/workspace-data-page.ts", "diffHunk": "@@ -45,11 +44,6 @@ export default class WorkspaceDataPage extends WorkspaceBase {\n     ]);\n   }\n \n-  async selectWorkspaceAction(action: EllipsisMenuAction): Promise<void> {", "originalCommit": "fcff2212c24700f118c3ddaac76224cc081feebe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjQwMDM3MQ==", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r492400371", "bodyText": "deleteWorkspaceModal moved to workspace-base and renamed to dismissDeleteWorkspaceModal.", "author": "aweng98", "createdAt": "2020-09-21T23:23:53Z", "path": "e2e/app/page/workspaces-page.ts", "diffHunk": "@@ -157,18 +156,6 @@ export default class WorkspacesPage extends WorkspaceEditPage {\n     return notebookPage.goAnalysisPage();\n   }\n \n-  /**\n-   * Click DELETE WORKSPACE button in delete workspace Confirmation dialog.\n-   * @return {string} Dialog textContent.\n-   */\n-  async deleteWorkspaceModal(): Promise<string[]> {", "originalCommit": "fcff2212c24700f118c3ddaac76224cc081feebe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1e15435a4e61afdcf24c6cdd4aa404955e1319e", "url": "https://github.com/all-of-us/workbench/commit/f1e15435a4e61afdcf24c6cdd4aa404955e1319e", "message": "fix", "committedDate": "2020-09-22T14:01:50Z", "type": "commit"}, {"oid": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178", "url": "https://github.com/all-of-us/workbench/commit/2bcd84cdbb9104370bceebfe6ebbbb68c7569178", "message": "SKIP CI update comment", "committedDate": "2020-09-22T15:39:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwMjM2MA==", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r493002360", "bodyText": "nit: remove console.log before merging", "author": "gjuggler", "createdAt": "2020-09-22T20:07:27Z", "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -212,5 +213,37 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContents;\n   }\n \n+  /**\n+   * Select Workspace action dropdown menu option.\n+   * @param {EllipsisMenuAction} menuOption\n+   * @param opts\n+   */\n+  async selectWorkspaceAction(menuOption: EllipsisMenuAction, opts?: { waitForNav: false }): Promise<void> {\n+    const ellipsisMenu = new EllipsisMenu(this.page, './/*[@data-test-id=\"workspace-menu-button\"]');\n+    return ellipsisMenu.clickAction(menuOption, opts);\n+  }\n+\n+  /**\n+   * Delete workspace via Workspace action menu \"Delete\" option.\n+   */\n+  async deleteWorkspace(): Promise<string[]> {\n+    await this.selectWorkspaceAction(EllipsisMenuAction.Delete, { waitForNav: false });\n+    // Handle Delete Confirmation modal\n+    return this.dismissDeleteWorkspaceModal();\n+  }\n+\n+\n+  /**\n+   * Dismss Delete Workspace Confirmation modal by click a button.\n+   * @return {LinkText} clickButtonText Button to click.\n+   */\n+  async dismissDeleteWorkspaceModal(clickButtonText: LinkText = LinkText.DeleteWorkspace): Promise<string[]> {\n+    const modal = new Modal(this.page);\n+    const contentText = await modal.getTextContent();\n+    await modal.clickButton(clickButtonText, {waitForClose: true});\n+    await waitWhileLoading(this.page);\n+    console.log(`Dismiss Delete Workspace modal by click ${clickButtonText} button`);", "originalCommit": "2bcd84cdbb9104370bceebfe6ebbbb68c7569178", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAyNDY2NQ==", "url": "https://github.com/all-of-us/workbench/pull/4041#discussion_r493024665", "bodyText": "Done", "author": "aweng98", "createdAt": "2020-09-22T20:48:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzAwMjM2MA=="}], "type": "inlineReview"}, {"oid": "689aff700f6d38e0dc40bc7b9be9981513c56e9c", "url": "https://github.com/all-of-us/workbench/commit/689aff700f6d38e0dc40bc7b9be9981513c56e9c", "message": "PR feedback", "committedDate": "2020-09-22T20:49:17Z", "type": "commit"}]}