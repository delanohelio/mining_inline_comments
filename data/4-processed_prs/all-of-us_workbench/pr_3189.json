{"pr_number": 3189, "pr_title": "[RW-4488][risk=no] Add workspace-specific routes for WS admin page", "pr_createdAt": "2020-02-26T15:05:21Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3189", "timeline": [{"oid": "09092fd5883688a1ce6706ac0e72374fd55d8876", "url": "https://github.com/all-of-us/workbench/commit/09092fd5883688a1ce6706ac0e72374fd55d8876", "message": "Split workspace-admin into search & detail components.", "committedDate": "2020-02-26T15:01:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY2NTEyMg==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384665122", "bodyText": "Going direct to this component does mean that a second workspace can't be searched from this page. Probably fine for this use case though.", "author": "als364", "createdAt": "2020-02-26T17:59:29Z", "path": "ui/src/app/app-routing.module.ts", "diffHunk": "@@ -287,9 +288,13 @@ const routes: Routes = [\n         component: AdminBannerComponent,\n         data: {title: 'Create Banner'}\n       }, {\n-        path: 'admin/workspace',\n+        path: 'admin/workspaces',\n+        component: AdminWorkspaceSearchComponent,\n+        data: { title: 'Workspace Admin'},\n+      }, {\n+        path: 'admin/workspaces/:workspaceNamespace',\n         component: AdminWorkspaceComponent,", "originalCommit": "09092fd5883688a1ce6706ac0e72374fd55d8876", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDg2NA==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384670864", "bodyText": "This I object to more than the above comment. Navigating away from the search bar means that you have to go back in order to search a second thing. I would strongly prefer to keep the search bar and do something with state that forces a fetch of the workspace information when the router is sent to admin/workspaces/{namespace}.", "author": "als364", "createdAt": "2020-02-26T18:10:24Z", "path": "ui/src/app/pages/admin/admin-workspace-search.tsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import {Component} from '@angular/core';\n+import {Button} from 'app/components/buttons';\n+import {FlexRow} from 'app/components/flex';\n+import {TextInput} from 'app/components/inputs';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase, UrlParamsProps, withUrlParams} from 'app/utils';\n+import {navigate} from 'app/utils/navigation';\n+import * as React from 'react';\n+\n+interface State {\n+  workspaceNamespace: string;\n+}\n+\n+class AdminWorkspaceSearchImpl extends React.Component<UrlParamsProps, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      workspaceNamespace: '',\n+    };\n+  }\n+\n+  navigateToWorkspace() {", "originalCommit": "09092fd5883688a1ce6706ac0e72374fd55d8876", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY5NjI5OA==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384696298", "bodyText": "You can easily return to the search form via the browser \"back\" command.\nI do agree that this isn't an ideal UX, but it's an intermediate step on the way to a longer-term goal, where the \"search\" page actually shows search results, and then you click into those results to open up a new tab with each workspace's detail view. I think that setup would address your concerns, but we can chat offline if you're worried it won't.", "author": "gjuggler", "createdAt": "2020-02-26T18:56:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDg2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDcwNjYwNA==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384706604", "bodyText": "This proooobably would. Especially if we want to do different kinds of search, like workspaces-by-problem-user or something.", "author": "als364", "createdAt": "2020-02-26T19:16:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDg2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDk2Nw==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384670967", "bodyText": "ty for keeping the enter-to-search though.", "author": "als364", "createdAt": "2020-02-26T18:10:35Z", "path": "ui/src/app/pages/admin/admin-workspace-search.tsx", "diffHunk": "@@ -0,0 +1,62 @@\n+import {Component} from '@angular/core';\n+import {Button} from 'app/components/buttons';\n+import {FlexRow} from 'app/components/flex';\n+import {TextInput} from 'app/components/inputs';\n+import colors from 'app/styles/colors';\n+import {ReactWrapperBase, UrlParamsProps, withUrlParams} from 'app/utils';\n+import {navigate} from 'app/utils/navigation';\n+import * as React from 'react';\n+\n+interface State {\n+  workspaceNamespace: string;\n+}\n+\n+class AdminWorkspaceSearchImpl extends React.Component<UrlParamsProps, State> {\n+  constructor(props) {\n+    super(props);\n+\n+    this.state = {\n+      workspaceNamespace: '',\n+    };\n+  }\n+\n+  navigateToWorkspace() {\n+    navigate(['/admin/workspaces/' + this.state.workspaceNamespace]);\n+  }\n+\n+  render() {\n+    return <FlexRow style={{justifyContent: 'flex-start', alignItems: 'center', marginTop: '1rem'}}>\n+        <label style={{color: colors.primary, marginRight: '1rem'}}>Workspace namespace</label>\n+        <TextInput\n+            style={{\n+              width: '10rem',\n+              marginRight: '1rem'\n+            }}\n+            onChange={value => this.setState({workspaceNamespace: value})}\n+            onKeyDown={(event: KeyboardEvent) => {", "originalCommit": "09092fd5883688a1ce6706ac0e72374fd55d8876", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY5Njk5NQ==", "url": "https://github.com/all-of-us/workbench/pull/3189#discussion_r384696995", "bodyText": "I would die if this went away. Other things that I am unreasonably bothered by: not being able to ctrl-click links to open in a new tab (basically all of our in-app links don't support this), and not being able to cmd-enter to perform primary action on modal dialogs. It may not happen soon, but eventually I will fix all these things :)", "author": "gjuggler", "createdAt": "2020-02-26T18:58:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDY3MDk2Nw=="}], "type": "inlineReview"}]}