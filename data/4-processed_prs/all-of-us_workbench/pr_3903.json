{"pr_number": 3903, "pr_title": "[risk=no][RW-5347] Next step in ESLint migration - rule set in place", "pr_createdAt": "2020-08-21T16:22:02Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3903", "timeline": [{"oid": "d7de68f0fc70ea51787fa3bd2bc396af25a0453d", "url": "https://github.com/all-of-us/workbench/commit/d7de68f0fc70ea51787fa3bd2bc396af25a0453d", "message": "Proposed rule set", "committedDate": "2020-08-21T15:09:00Z", "type": "commit"}, {"oid": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "url": "https://github.com/all-of-us/workbench/commit/56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "message": "Eslint proposal with rules  commented out", "committedDate": "2020-08-21T16:15:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyMTM0NQ==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474821345", "bodyText": "Could you add a comment here that links the documentation of the below rules? I'm assuming https://eslint.org/docs/rules/ but maybe you have a better or more accurate link", "author": "calbach", "createdAt": "2020-08-21T17:07:19Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -27,7 +27,10 @@ module.exports = {\n   // The rules found here were ported and categorized using the tslint migration roadmap:", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyMjMwNQ==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474822305", "bodyText": "Am I missing something? We have many places where we ignore this and I haven't see warnings about it. FWIW I support removing this rule", "author": "calbach", "createdAt": "2020-08-21T17:09:27Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -40,53 +43,50 @@ module.exports = {\n     '@typescript-eslint/unified-signatures': 'warn',\n \n     /* Style */\n-    'arrow-body-style': 'warn',", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDkwNzg4OQ==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474907889", "bodyText": "removed.", "author": "petesantos", "createdAt": "2020-08-21T19:47:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyMjMwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNzQ4NQ==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474827485", "bodyText": "I'm not sure about allowSingleLine: true, though I don't feel very strongly on this point. Specifically, I think in most cases where you're doing this, you should probably just omit the brackets.", "author": "calbach", "createdAt": "2020-08-21T17:20:04Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -40,53 +43,50 @@ module.exports = {\n     '@typescript-eslint/unified-signatures': 'warn',\n \n     /* Style */\n-    'arrow-body-style': 'warn',\n     '@typescript-eslint/prefer-function-type': 'warn',\n     '@typescript-eslint/class-name-casing': 'warn',\n-    'spaced-comment': 'warn',\n+    // 'spaced-comment': 'warn',\n     '@typescript-eslint/consistent-type-definitions': ['warn', 'interface'],\n     'no-trailing-spaces': 'warn',\n     'no-undef-init': 'warn',\n-    'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n-    'simple-import-sort/sort': 'warn',\n-    'quotes': ['warn', 'single'],\n-    '@typescript-eslint/semi': 'warn',\n+    // 'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDkwNzcxMg==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474907712", "bodyText": "Removed allowSingleLine", "author": "petesantos", "createdAt": "2020-08-21T19:47:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyNzQ4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgyODYyNw==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474828627", "bodyText": "What's the rationale for making all of these warnings rather than errors? I'm not entirely sure of the implications of this.", "author": "calbach", "createdAt": "2020-08-21T17:22:23Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -27,7 +27,10 @@ module.exports = {\n   // The rules found here were ported and categorized using the tslint migration roadmap:\n   // https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/ROADMAP.md\n   rules: {\n-    // 'prettier/prettier': 'warn',\n+    // 'prettier/prettier': 'warn', // Possibly use prettier to handle some formatting", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgzMDIzMQ==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474830231", "bodyText": "I would like one of these options: \"ignoreUrls\": true or \"ignoreComments\": true; often you need a include a long URL in a comment, and wrapping it is nonsensical.", "author": "calbach", "createdAt": "2020-08-21T17:25:32Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -40,53 +43,50 @@ module.exports = {\n     '@typescript-eslint/unified-signatures': 'warn',\n \n     /* Style */\n-    'arrow-body-style': 'warn',\n     '@typescript-eslint/prefer-function-type': 'warn',\n     '@typescript-eslint/class-name-casing': 'warn',\n-    'spaced-comment': 'warn',\n+    // 'spaced-comment': 'warn',\n     '@typescript-eslint/consistent-type-definitions': ['warn', 'interface'],\n     'no-trailing-spaces': 'warn',\n     'no-undef-init': 'warn',\n-    'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n-    'simple-import-sort/sort': 'warn',\n-    'quotes': ['warn', 'single'],\n-    '@typescript-eslint/semi': 'warn',\n+    // 'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n+    // 'simple-import-sort/sort': 'warn',\n+    // 'quotes': ['warn', 'single'], \n+    // '@typescript-eslint/semi': 'warn',\n     '@typescript-eslint/naming-convention': 'warn',\n-    'space-before-function-paren': ['warn', 'never'],\n+    // 'space-before-function-paren': ['warn', { 'anonymous': 'never', 'named': 'never', 'asyncArrow': 'always' }],\n+\n \n     /* Functionality */\n     'curly': 'warn',\n     'guard-for-in': 'warn',\n     'no-restricted-imports': ['error', {paths: ['rxjs'] }],\n-    'no-unused-labels': 'warn',\n     'no-caller': 'warn',\n     'no-bitwise': 'warn',\n-    'no-console': 'warn',\n+    // 'no-console': 'warn', \n     'no-new-wrappers': 'warn',\n     'no-debugger': 'warn',\n     'constructor-super': 'warn',\n     'no-empty': 'warn',\n     'no-eval': 'warn',\n     'no-irregular-whitespace': 'warn',\n     '@typescript-eslint/no-misused-new': 'warn',\n-    'no-shadow': 'warn',\n-    'dot-notation': 'warn',\n-    'no-throw-literal': 'warn',\n-    'no-fallthrough': 'warn',\n-    'no-unused-expressions': 'warn',\n-    'no-use-before-define': 'off',\n-    '@typescript-eslint/no-use-before-define': 'warn',\n-    'no-unused-vars': 'off',\n-    '@typescript-eslint/no-unused-vars': 'warn', \n+    // 'no-shadow': 'warn',\n+    // 'dot-notation': 'warn', \n+    'no-throw-literal': 'warn', \n+    'no-fallthrough': 'warn', // For switch statements\n+    'no-use-before-define': 'off', // Needed for TS\n+    // '@typescript-eslint/no-use-before-define': 'warn',\n+    // 'no-unused-vars': 'off', // Needed for TS \n+    // '@typescript-eslint/no-unused-vars': 'warn', \n     'react/jsx-uses-vars': 'warn', \n-    'no-var': 'warn',\n-    'radix': 'warn',\n+    // 'no-var': 'warn',\n+    'radix': 'warn', // Add radix on parseInt\n     'eqeqeq': ['warn', 'always', {'null': 'ignore'}],\n     \n     /* Maintainability */\n-    'eol-last': 'warn',\n-    'max-len': ['warn', {code: 140, ignorePattern: '^import |^export\\\\{(.*?)\\\\}'}], \n-    'sort-keys-fix/sort-keys-fix': 'warn',\n-    'prefer-const': ['warn', {'destructuring': 'all'}],\n+    // 'eol-last': 'warn',\n+    // 'max-len': ['warn', {code: 140, ignorePattern: '^import |^export\\\\{(.*?)\\\\}'}], ", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDkwNzM3Mg==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474907372", "bodyText": "Added ignoreComments", "author": "petesantos", "createdAt": "2020-08-21T19:47:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDgzMDIzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg0Mjc0OA==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474842748", "bodyText": "This is nice. default setting is 'error' which is annoying.", "author": "aweng98", "createdAt": "2020-08-21T17:52:04Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -40,53 +43,50 @@ module.exports = {\n     '@typescript-eslint/unified-signatures': 'warn',\n \n     /* Style */\n-    'arrow-body-style': 'warn',\n     '@typescript-eslint/prefer-function-type': 'warn',\n     '@typescript-eslint/class-name-casing': 'warn',\n-    'spaced-comment': 'warn',\n+    // 'spaced-comment': 'warn',\n     '@typescript-eslint/consistent-type-definitions': ['warn', 'interface'],\n     'no-trailing-spaces': 'warn',\n     'no-undef-init': 'warn',\n-    'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n-    'simple-import-sort/sort': 'warn',\n-    'quotes': ['warn', 'single'],\n-    '@typescript-eslint/semi': 'warn',\n+    // 'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n+    // 'simple-import-sort/sort': 'warn',\n+    // 'quotes': ['warn', 'single'], \n+    // '@typescript-eslint/semi': 'warn',\n     '@typescript-eslint/naming-convention': 'warn',\n-    'space-before-function-paren': ['warn', 'never'],\n+    // 'space-before-function-paren': ['warn', { 'anonymous': 'never', 'named': 'never', 'asyncArrow': 'always' }],\n+\n \n     /* Functionality */\n     'curly': 'warn',\n     'guard-for-in': 'warn',\n     'no-restricted-imports': ['error', {paths: ['rxjs'] }],\n-    'no-unused-labels': 'warn',\n     'no-caller': 'warn',\n     'no-bitwise': 'warn',\n-    'no-console': 'warn',\n+    // 'no-console': 'warn', \n     'no-new-wrappers': 'warn',\n     'no-debugger': 'warn',\n     'constructor-super': 'warn',\n     'no-empty': 'warn',\n     'no-eval': 'warn',\n     'no-irregular-whitespace': 'warn',\n     '@typescript-eslint/no-misused-new': 'warn',\n-    'no-shadow': 'warn',\n-    'dot-notation': 'warn',\n-    'no-throw-literal': 'warn',\n-    'no-fallthrough': 'warn',\n-    'no-unused-expressions': 'warn',\n-    'no-use-before-define': 'off',\n-    '@typescript-eslint/no-use-before-define': 'warn',\n-    'no-unused-vars': 'off',\n-    '@typescript-eslint/no-unused-vars': 'warn', \n+    // 'no-shadow': 'warn',\n+    // 'dot-notation': 'warn', \n+    'no-throw-literal': 'warn', \n+    'no-fallthrough': 'warn', // For switch statements\n+    'no-use-before-define': 'off', // Needed for TS\n+    // '@typescript-eslint/no-use-before-define': 'warn',\n+    // 'no-unused-vars': 'off', // Needed for TS \n+    // '@typescript-eslint/no-unused-vars': 'warn', \n     'react/jsx-uses-vars': 'warn', \n-    'no-var': 'warn',\n-    'radix': 'warn',\n+    // 'no-var': 'warn',\n+    'radix': 'warn', // Add radix on parseInt", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg1MzczOA==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474853738", "bodyText": "I think this setting is good to have. do you have a good reason for disabling it?", "author": "aweng98", "createdAt": "2020-08-21T18:15:50Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -40,53 +43,50 @@ module.exports = {\n     '@typescript-eslint/unified-signatures': 'warn',\n \n     /* Style */\n-    'arrow-body-style': 'warn',\n     '@typescript-eslint/prefer-function-type': 'warn',\n     '@typescript-eslint/class-name-casing': 'warn',\n-    'spaced-comment': 'warn',\n+    // 'spaced-comment': 'warn',\n     '@typescript-eslint/consistent-type-definitions': ['warn', 'interface'],\n     'no-trailing-spaces': 'warn',\n     'no-undef-init': 'warn',\n-    'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n-    'simple-import-sort/sort': 'warn',\n-    'quotes': ['warn', 'single'],\n-    '@typescript-eslint/semi': 'warn',\n+    // 'brace-style': ['warn', '1tbs', { 'allowSingleLine': true }],\n+    // 'simple-import-sort/sort': 'warn',\n+    // 'quotes': ['warn', 'single'], \n+    // '@typescript-eslint/semi': 'warn',\n     '@typescript-eslint/naming-convention': 'warn',\n-    'space-before-function-paren': ['warn', 'never'],\n+    // 'space-before-function-paren': ['warn', { 'anonymous': 'never', 'named': 'never', 'asyncArrow': 'always' }],\n+\n \n     /* Functionality */\n     'curly': 'warn',\n     'guard-for-in': 'warn',\n     'no-restricted-imports': ['error', {paths: ['rxjs'] }],\n-    'no-unused-labels': 'warn',\n     'no-caller': 'warn',\n     'no-bitwise': 'warn',\n-    'no-console': 'warn',\n+    // 'no-console': 'warn', \n     'no-new-wrappers': 'warn',\n     'no-debugger': 'warn',\n     'constructor-super': 'warn',\n     'no-empty': 'warn',\n     'no-eval': 'warn',\n     'no-irregular-whitespace': 'warn',\n     '@typescript-eslint/no-misused-new': 'warn',\n-    'no-shadow': 'warn',\n-    'dot-notation': 'warn',\n-    'no-throw-literal': 'warn',\n-    'no-fallthrough': 'warn',\n-    'no-unused-expressions': 'warn',\n-    'no-use-before-define': 'off',\n-    '@typescript-eslint/no-use-before-define': 'warn',\n-    'no-unused-vars': 'off',\n-    '@typescript-eslint/no-unused-vars': 'warn', \n+    // 'no-shadow': 'warn',", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg2NTE2OA==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474865168", "bodyText": "+1", "author": "jaycarlton", "createdAt": "2020-08-21T18:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg1MzczOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg2NzE1Nw==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474867157", "bodyText": "Per PR description, these are commented out to indicate intent to enable the rules as written in a follow-up PR. If they are applied now, they will generate warnings which need to be fixed, which is outside the scope of this PR / ticket.", "author": "calbach", "createdAt": "2020-08-21T18:46:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg1MzczOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg2NjAxNA==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474866014", "bodyText": "Isn't  this  one auto-fixable? Is it talking about horizontal or  vertical spacinig?", "author": "jaycarlton", "createdAt": "2020-08-21T18:43:46Z", "path": "ui/.eslintrc.js", "diffHunk": "@@ -27,7 +27,10 @@ module.exports = {\n   // The rules found here were ported and categorized using the tslint migration roadmap:\n   // https://github.com/typescript-eslint/typescript-eslint/blob/master/packages/eslint-plugin/ROADMAP.md\n   rules: {\n-    // 'prettier/prettier': 'warn',\n+    // 'prettier/prettier': 'warn', // Possibly use prettier to handle some formatting\n+\n+    /* Best Practices */\n+    // 'no-multi-spaces': 'warn',", "originalCommit": "56d62d0b4bed8c1a6f3fca4ca127f8ee8041f66b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDkwNjg3Mw==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474906873", "bodyText": "Most of these rules are auto-fixable - this PR is meant to get agreement on the rule set. In future PR's we can auto fix one at a time.", "author": "petesantos", "createdAt": "2020-08-21T19:46:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDg2NjAxNA=="}], "type": "inlineReview"}, {"oid": "b2cdb1f7bc97e3d90225a4548f12d4372b98700a", "url": "https://github.com/all-of-us/workbench/commit/b2cdb1f7bc97e3d90225a4548f12d4372b98700a", "message": "Add jest, feedback updates", "committedDate": "2020-08-21T19:50:12Z", "type": "commit"}, {"oid": "8177339322ba66879b1e61abd5e1792afbf3f6b6", "url": "https://github.com/all-of-us/workbench/commit/8177339322ba66879b1e61abd5e1792afbf3f6b6", "message": "Add eslint to lint command", "committedDate": "2020-08-21T20:48:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDk1OTg5Mw==", "url": "https://github.com/all-of-us/workbench/pull/3903#discussion_r474959893", "bodyText": "@calbach - I added eslint to the lint command", "author": "petesantos", "createdAt": "2020-08-21T20:51:28Z", "path": "ui/package.json", "diffHunk": "@@ -9,7 +9,7 @@\n     \"build\": \"ng build\",\n     \"test\": \"ng test --source-map=false\",\n     \"test-react\": \"jest\",\n-    \"lint\": \"ng lint --type-check\",\n+    \"lint\": \"ng lint --type-check && yarn eslint src --ext ts,tsx\",", "originalCommit": "8177339322ba66879b1e61abd5e1792afbf3f6b6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}