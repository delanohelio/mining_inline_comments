{"pr_number": 3983, "pr_title": "[RW-5445][risk=no]UI: Add \"versions\" indicator for COPE in survey hierarchy", "pr_createdAt": "2020-09-10T05:20:23Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3983", "timeline": [{"oid": "faa458c1c391a833eb58f0cb97669b6ce07eecdd", "url": "https://github.com/all-of-us/workbench/commit/faa458c1c391a833eb58f0cb97669b6ce07eecdd", "message": "Add text Versioned to COPE Survey", "committedDate": "2020-09-10T05:18:34Z", "type": "commit"}, {"oid": "a98529e7da44be16af65338d9c8b5bdcdb63171e", "url": "https://github.com/all-of-us/workbench/commit/a98529e7da44be16af65338d9c8b5bdcdb63171e", "message": "Remove Comment", "committedDate": "2020-09-10T05:21:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ4ODQyNw==", "url": "https://github.com/all-of-us/workbench/pull/3983#discussion_r486488427", "bodyText": "Nit: typo on 'Versioned'", "author": "dolbeew", "createdAt": "2020-09-10T16:46:31Z", "path": "ui/src/app/cohort-search/tree-node/tree-node.component.spec.tsx", "diffHunk": "@@ -48,4 +65,16 @@ describe('TreeNode', () => {\n                                       setAttributes={() => {}}/>);\n     expect(wrapper).toBeTruthy();\n   });\n+  it('should display Versiond if SURVEY is COPE', () => {", "originalCommit": "a98529e7da44be16af65338d9c8b5bdcdb63171e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU3MzQ3NQ==", "url": "https://github.com/all-of-us/workbench/pull/3983#discussion_r486573475", "bodyText": "Done", "author": "NehaBroad", "createdAt": "2020-09-10T19:08:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ4ODQyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcyOQ==", "url": "https://github.com/all-of-us/workbench/pull/3983#discussion_r486491729", "bodyText": "We can simplify this condition if we use subtype === CriteriaType.SURVEY.toString() instead of checking domainId (only the top level nodes have this subtype), that way we don't need !hasAttributes.\nAlso, id is the criteria table id that gets generated by Jon's scripts and will likely change eventually. Better to use conceptId or do some type of string match on the node name.", "author": "dolbeew", "createdAt": "2020-09-10T16:52:12Z", "path": "ui/src/app/cohort-search/tree-node/tree-node.component.tsx", "diffHunk": "@@ -286,6 +287,11 @@ export class TreeNode extends React.Component<TreeNodeProps, TreeNodeState> {\n     }\n   }\n \n+  get isCOPESurvey() {\n+    const {node: {domainId, hasAttributes, id}} = this.props;\n+    return !hasAttributes && id === COPE_SURVEY_ID && domainId === DomainType.SURVEY.toString() ;", "originalCommit": "a98529e7da44be16af65338d9c8b5bdcdb63171e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU0MjM1MQ==", "url": "https://github.com/all-of-us/workbench/pull/3983#discussion_r486542351", "bodyText": "thanks! i'll use the combination of conceptId and string match as i thought the concept ID was going to be same (? will verify with Jon)", "author": "NehaBroad", "createdAt": "2020-09-10T18:17:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjU3MzY3Mw==", "url": "https://github.com/all-of-us/workbench/pull/3983#discussion_r486573673", "bodyText": "Just verified the concept Id will remain the same, hence adding checks for both concept Id and name", "author": "NehaBroad", "createdAt": "2020-09-10T19:08:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQ5MTcyOQ=="}], "type": "inlineReview"}, {"oid": "5b1ebaf88239440393854ede8cf32c69d81f1905", "url": "https://github.com/all-of-us/workbench/commit/5b1ebaf88239440393854ede8cf32c69d81f1905", "message": "PR Comments: use concept Id and name check", "committedDate": "2020-09-10T19:02:55Z", "type": "commit"}, {"oid": "35e21c6562affcd3bfd0a596f680e78b1a695938", "url": "https://github.com/all-of-us/workbench/commit/35e21c6562affcd3bfd0a596f680e78b1a695938", "message": "Fix UI Test", "committedDate": "2020-09-10T19:06:44Z", "type": "commit"}]}