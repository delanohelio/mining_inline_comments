{"pr_number": 3656, "pr_title": "Addition of .gradle directory to store in api gradle cache", "pr_createdAt": "2020-06-09T23:07:15Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3656", "timeline": [{"oid": "e6b6b571e4c3a6fd97b159fc15acd9ca2ad771b4", "url": "https://github.com/all-of-us/workbench/commit/e6b6b571e4c3a6fd97b159fc15acd9ca2ad771b4", "message": "api cache version increases and addition of .gradle directory", "committedDate": "2020-06-09T23:06:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NTc3MA==", "url": "https://github.com/all-of-us/workbench/pull/3656#discussion_r437785770", "bodyText": "Why this change? I think I prefer master here. As I understand it, using the branch name here only helps in the following scenario:\n\nI'm working on a feature branch\nI push one set of changes to yarn.lock\nOn that same feature branch, I push a different set of changes to yarn.lock\n\nIn this scenario, unless you are making a ton of changes to the lockfile, you're probably getting the same performance as just restoring from the master cache.\nAlternatively, if I'm working on a new feature branch and change yarn.lock (more likely), my cache hit may be worse in this model, since I'd pull in any recent cache entry, possibly from an unrelated feature branch.", "author": "calbach", "createdAt": "2020-06-09T23:57:00Z", "path": ".circleci/config.yml", "diffHunk": "@@ -158,7 +158,7 @@ commands:\n           name: \"restore e2e cache\"\n           keys:\n             - v1-e2e-cache-{{ .Branch }}-{{ checksum \"~/workbench/e2e/yarn.lock\" }}\n-            - v1-e2e-cache-master\n+            - v1-e2e-cache-{{ .Branch }}", "originalCommit": "e6b6b571e4c3a6fd97b159fc15acd9ca2ad771b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc5MjE2MA==", "url": "https://github.com/all-of-us/workbench/pull/3656#discussion_r437792160", "bodyText": "yeah you're right. I didn't think about that. Reverted change. Also, I realized same mistake I made in e2e cache.", "author": "aweng98", "createdAt": "2020-06-10T00:19:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NTc3MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc5NDc1Mw==", "url": "https://github.com/all-of-us/workbench/pull/3656#discussion_r437794753", "bodyText": "I spoke too soon about e2e cache mistake. I had v1-e2e-cache-master, nothing to fix.", "author": "aweng98", "createdAt": "2020-06-10T00:29:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NTc3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NjEzMw==", "url": "https://github.com/all-of-us/workbench/pull/3656#discussion_r437786133", "bodyText": "Good find. Does this help? Did you confirm there are contents in this directory by SSHing into the Circle VM?", "author": "calbach", "createdAt": "2020-06-09T23:58:14Z", "path": ".circleci/config.yml", "diffHunk": "@@ -186,18 +186,21 @@ commands:\n           steps:\n             - save_cache:\n                 name: \"save api gradle cache\"\n+                # See https://docs.gradle.org/current/userguide/directory_layout.html#dir:project_root\n+                # Save Project-specific cache and Global cache (for everything that\u2019s not project-specific).\n                 paths:\n+                  - .gradle", "originalCommit": "e6b6b571e4c3a6fd97b159fc15acd9ca2ad771b4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc5MDYzOQ==", "url": "https://github.com/all-of-us/workbench/pull/3656#discussion_r437790639", "bodyText": "I did ls -al in api dir. cmd outputs confirms .gradle dir exists after gradle job.", "author": "aweng98", "createdAt": "2020-06-10T00:14:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzc4NjEzMw=="}], "type": "inlineReview"}, {"oid": "59da09af5743d5144e0bbe4af6877a75bdb2871f", "url": "https://github.com/all-of-us/workbench/commit/59da09af5743d5144e0bbe4af6877a75bdb2871f", "message": "PR feedback", "committedDate": "2020-06-10T00:25:30Z", "type": "commit"}]}