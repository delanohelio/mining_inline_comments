{"pr_number": 4426, "pr_title": "[RW-6068][risk=no] Adding ruby def for calling CDR indices build from circle ci", "pr_createdAt": "2020-12-21T19:55:17Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4426", "timeline": [{"oid": "5527c8980c986d5e93d342c4db88f41e6cb2dbba", "url": "https://github.com/all-of-us/workbench/commit/5527c8980c986d5e93d342c4db88f41e6cb2dbba", "message": "RW-6068 adding circle ci command to kick off CDR indices build and removing reference to docker-sync", "committedDate": "2020-12-21T19:53:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNTc0Ng==", "url": "https://github.com/all-of-us/workbench/pull/4426#discussion_r546925746", "bodyText": "Do we need ensure_docker now that we will be running this on circle-ci outside of docker ?", "author": "SrushtiGangireddy", "createdAt": "2020-12-21T20:57:04Z", "path": "api/libproject/devstart.rb", "diffHunk": "@@ -1031,7 +1092,7 @@ def generate_cb_criteria_tables(cmd_name, *args)\n })\n \n def generate_private_cdr_counts(cmd_name, *args)\n-  ensure_docker_sync()\n+  ensure_docker cmd_name, args", "originalCommit": "5527c8980c986d5e93d342c4db88f41e6cb2dbba", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNzk0Ng==", "url": "https://github.com/all-of-us/workbench/pull/4426#discussion_r546927946", "bodyText": "We need docker because this line runs the liquibase build: \n  \n    \n      workbench/api/db-cdr/generate-cdr/generate-private-cdr-counts.sh\n    \n    \n         Line 38\n      in\n      5527c89\n    \n    \n    \n    \n\n        \n          \n           if ./generate-cdr/init-new-cdr-db.sh --drop-if-exists --cdr-db-name $WORKBENCH_DATASET", "author": "freemabd", "createdAt": "2020-12-21T21:02:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNTc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkzMTU1OA==", "url": "https://github.com/all-of-us/workbench/pull/4426#discussion_r546931558", "bodyText": "How does your build create the database and tables?", "author": "freemabd", "createdAt": "2020-12-21T21:12:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNTc0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkzNjIzOA==", "url": "https://github.com/all-of-us/workbench/pull/4426#discussion_r546936238", "bodyText": "I missed this. Running liquibase is part of import script in databrowser which is different step from building cdr indices.", "author": "SrushtiGangireddy", "createdAt": "2020-12-21T21:24:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNTc0Ng=="}], "type": "inlineReview"}]}