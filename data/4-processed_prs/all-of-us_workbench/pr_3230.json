{"pr_number": 3230, "pr_title": "[RW-4572][RISK=NO]Workspace Edit after accessing Workspace About page does not display all Sub category for Race and Age", "pr_createdAt": "2020-03-09T15:57:55Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3230", "timeline": [{"oid": "378032d9103d2804eef16b35918e224dfb1d63df", "url": "https://github.com/all-of-us/workbench/commit/378032d9103d2804eef16b35918e224dfb1d63df", "message": "Fix workspace edit not showing all RACE subcateogries after accessing Workspace About page", "committedDate": "2020-03-09T15:54:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc4OTMyNQ==", "url": "https://github.com/all-of-us/workbench/pull/3230#discussion_r389789325", "bodyText": "Why do we need to deep clone this? Now that its a filter instead of a forEach?", "author": "s-rubenstein", "createdAt": "2020-03-09T16:01:17Z", "path": "ui/src/app/utils/research-purpose.tsx", "diffHunk": "@@ -43,9 +44,9 @@ export function getSelectedResearchPurposeItems(researchPurpose: ResearchPurpose\n }\n \n export function getSelectedPopulations(researchPurpose: ResearchPurpose) {\n-  const categories = SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem\n-    .subCategory.filter(item => researchPurpose.populationDetails.includes(item.shortName)).length > 0);\n-  categories.forEach(category => category.subCategory = category.subCategory\n+  const categories = fp.cloneDeep(SpecificPopulationItems.filter(specificPopulationItem => specificPopulationItem", "originalCommit": "378032d9103d2804eef16b35918e224dfb1d63df", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc5MDM1OA==", "url": "https://github.com/all-of-us/workbench/pull/3230#discussion_r389790358", "bodyText": "the logic within forEach was updating the actually SpecificPopulationItems's subCateogries. It was removing all the subCateogories that were not selected.", "author": "NehaBroad", "createdAt": "2020-03-09T16:02:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc4OTMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTgyOTQ2OQ==", "url": "https://github.com/all-of-us/workbench/pull/3230#discussion_r389829469", "bodyText": "I understand that bit, I was just wondering about the deep clone that its doing. Do we need to generate the copy?", "author": "s-rubenstein", "createdAt": "2020-03-09T17:03:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc4OTMyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTY3ODI1OA==", "url": "https://github.com/all-of-us/workbench/pull/3230#discussion_r391678258", "bodyText": "had an offline discussion with @blrubenstein , we are using deep clone approach here because we want to Filter subCategories from Categories object, i.e we want to filter out nested Object hence making a new copy and manipulating it makes more sense", "author": "NehaBroad", "createdAt": "2020-03-12T14:55:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc4OTMyNQ=="}], "type": "inlineReview"}, {"oid": "fca1d06a81af370699dba4dfc786e2cb6fb83548", "url": "https://github.com/all-of-us/workbench/commit/fca1d06a81af370699dba4dfc786e2cb6fb83548", "message": "test to check original object is not manipulated on workspace about page load", "committedDate": "2020-03-12T15:28:24Z", "type": "commit"}]}