{"pr_number": 4076, "pr_title": "[no ticket][risk=no] cohort definition json schema file", "pr_createdAt": "2020-09-28T17:32:30Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4076", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEzNDY2Ng==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496134666", "bodyText": "Please add a link to here from the top-level README.", "author": "jaycarlton", "createdAt": "2020-09-28T17:58:56Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU1Nzk5Mg==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497557992", "bodyText": "Done.", "author": "freemabd", "createdAt": "2020-09-30T14:31:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEzNDY2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3MzY4NA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496973684", "bodyText": "Confirmed the schema is  valid and a JSON  entry from the DB matches it using https://www.jsonschemavalidator.net/. Good stuff.", "author": "jaycarlton", "createdAt": "2020-09-29T19:09:07Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NDExMA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496974110", "bodyText": "please give an example or two of a search parameter.", "author": "jaycarlton", "createdAt": "2020-09-29T19:09:56Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwNTU5Mw==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497605593", "bodyText": "Done", "author": "freemabd", "createdAt": "2020-09-30T15:32:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NDExMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NDQwOA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496974408", "bodyText": "is there a fixed list (enum) of valid types, or is this free-form?", "author": "jaycarlton", "createdAt": "2020-09-29T19:10:26Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"parameterId\": {\n+          \"description\": \"The unique identifier for the search parameter\",\n+          \"type\": \"string\"\n+        },\n+        \"name\": {\n+          \"description\": \"The concept name\",\n+          \"type\": \"string\"\n+        },\n+        \"domain\": {\n+          \"description\": \"The domain for this concept\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The vocabulary type\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwNzAxNg==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497607016", "bodyText": "CriteriaType enum is used to populate this property.", "author": "freemabd", "createdAt": "2020-09-30T15:34:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NDQwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NTczMg==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496975732", "bodyText": "I don't understand how parent vs child maps to group vs no group. Is this really more of an enum  instead of a boolean?\nI'm guessing group = true indicates this is a parent property.", "author": "jaycarlton", "createdAt": "2020-09-29T19:12:04Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"parameterId\": {\n+          \"description\": \"The unique identifier for the search parameter\",\n+          \"type\": \"string\"\n+        },\n+        \"name\": {\n+          \"description\": \"The concept name\",\n+          \"type\": \"string\"\n+        },\n+        \"domain\": {\n+          \"description\": \"The domain for this concept\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The vocabulary type\",\n+          \"type\": \"string\"\n+        },\n+        \"group\": {\n+          \"description\": \"Is the concept a parent or child\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYwODkxNw==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497608917", "bodyText": "A parent subsumes children and a child subsumes nothing", "author": "freemabd", "createdAt": "2020-09-30T15:37:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NTczMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NzEwOA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496977108", "bodyText": "Can you please indicate what source and standard mean here? Not all analysts will be familiar with the tools.", "author": "jaycarlton", "createdAt": "2020-09-29T19:13:39Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"parameterId\": {\n+          \"description\": \"The unique identifier for the search parameter\",\n+          \"type\": \"string\"\n+        },\n+        \"name\": {\n+          \"description\": \"The concept name\",\n+          \"type\": \"string\"\n+        },\n+        \"domain\": {\n+          \"description\": \"The domain for this concept\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The vocabulary type\",\n+          \"type\": \"string\"\n+        },\n+        \"group\": {\n+          \"description\": \"Is the concept a parent or child\",\n+          \"type\": \"boolean\"\n+        },\n+        \"attributes\": {\n+          \"description\": \"A collection of attributes that can be searched for specific domains, ex: labs\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/attribute\"\n+            }\n+          ]\n+        },\n+        \"ancestorData\": {\n+          \"description\": \"Does the search parameter contain data in the ancestor table\",\n+          \"type\": \"boolean\"\n+        },\n+        \"standard\": {\n+          \"description\": \"Is the search parameter source or standard\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYyMDczNA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497620734", "bodyText": "Done", "author": "freemabd", "createdAt": "2020-09-30T15:54:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3NzEwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3ODAyNw==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496978027", "bodyText": "Please indicate the scope/uniqueness of this  ID, e.g. \"uniquely identifies a concept  in the CDR being  searched to produce  this  cohort.\"", "author": "jaycarlton", "createdAt": "2020-09-29T19:14:41Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"parameterId\": {\n+          \"description\": \"The unique identifier for the search parameter\",\n+          \"type\": \"string\"\n+        },\n+        \"name\": {\n+          \"description\": \"The concept name\",\n+          \"type\": \"string\"\n+        },\n+        \"domain\": {\n+          \"description\": \"The domain for this concept\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The vocabulary type\",\n+          \"type\": \"string\"\n+        },\n+        \"group\": {\n+          \"description\": \"Is the concept a parent or child\",\n+          \"type\": \"boolean\"\n+        },\n+        \"attributes\": {\n+          \"description\": \"A collection of attributes that can be searched for specific domains, ex: labs\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/attribute\"\n+            }\n+          ]\n+        },\n+        \"ancestorData\": {\n+          \"description\": \"Does the search parameter contain data in the ancestor table\",\n+          \"type\": \"boolean\"\n+        },\n+        \"standard\": {\n+          \"description\": \"Is the search parameter source or standard\",\n+          \"type\": \"boolean\"\n+        },\n+        \"conceptId\": {\n+          \"description\": \"The concept id\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYxMTk4NA==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497611984", "bodyText": "Done.", "author": "freemabd", "createdAt": "2020-09-30T15:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3ODAyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3OTAxMQ==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r496979011", "bodyText": "So this is a non-required  property, and will be absent if not applicable?", "author": "jaycarlton", "createdAt": "2020-09-29T19:15:48Z", "path": "api/reporting/docs/cohort_definition_schema.json", "diffHunk": "@@ -0,0 +1,201 @@\n+{\n+  \"$schema\": \"http://json-schema.org/draft-04/schema#\",\n+  \"description\": \"The cohort definition. It contains two arrays(includes and excludes)\",\n+  \"type\": \"object\",\n+  \"properties\": {\n+    \"includes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"excludes\": {\n+      \"description\": \"A collection of search groups which can be 'AND'ed together\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"$ref\": \"#/definitions/search_group\"\n+        }\n+      ]\n+    },\n+    \"dataFilters\": {\n+      \"description\": \"Flags EHR or Physical Measurement data\",\n+      \"type\": \"array\",\n+      \"items\": [\n+        {\n+          \"description\": \"'has_ehr_data' or 'has_physical_measurement_data'\",\n+          \"type\": \"string\"\n+        }\n+      ]\n+    }\n+  },\n+  \"required\": [\"includes\", \"excludes\"],\n+  \"definitions\": {\n+    \"attribute\": {\n+      \"description\": \"An attribute is a categorical/numerical property that contains name, operator and operands\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"The name of the attribute\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"string\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"modifier\": {\n+      \"description\": \"A modifier can be age at event, number of occurrences or visit type\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"name\": {\n+          \"description\": \"Name of the modifier\",\n+          \"type\": \"string\"\n+        },\n+        \"operator\": {\n+          \"description\": \"An operator, ex: =, !=, <, <=, >, >=, between, like, in\",\n+          \"type\": \"string\"\n+        },\n+        \"operands\": {\n+          \"description\": \"A collection of operands\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"description\": \"An operand\",\n+              \"type\": \"integer\"\n+            }\n+          ]\n+        }\n+      },\n+      \"required\": [\"name\", \"operator\", \"operands\"]\n+    },\n+    \"search_group\": {\n+      \"description\": \"A search group is a collection of concepts which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"A unique identifier for the search group\",\n+          \"type\": \"string\"\n+        },\n+        \"items\": {\n+          \"description\": \"A collection of search group items\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_group_item\"\n+            }\n+          ]\n+        },\n+        \"temporal\": {\n+          \"description\": \"Is the search group temporal(relating groups within a time frame). \",\n+          \"type\": \"boolean\"\n+        }\n+      },\n+      \"required\": [\"id\", \"items\", \"temporal\"]\n+    },\n+    \"search_group_item\": {\n+      \"description\": \"A search group item is a collection of concepts of the same domain which can be 'OR'ed together\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"id\": {\n+          \"description\": \"The unique identifier for the search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The description for this search group item\",\n+          \"type\": \"string\"\n+        },\n+        \"searchParameters\": {\n+          \"description\": \"A collection search parameters\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/search_parameter\"\n+            }\n+          ]\n+        },\n+        \"modifiers\": {\n+          \"description\": \"A collection of modifiers that refine the search\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/modifier\"\n+            }\n+          ]\n+        },\n+        \"temporalGroup\": {\n+          \"description\": \"Temporal group index for the search group item\",\n+          \"type\": \"integer\"\n+        }\n+      },\n+      \"required\": [\"id\", \"type\", \"searchParameters\", \"modifiers\"]\n+    },\n+    \"search_parameter\": {\n+      \"description\": \"A search parameter contains metadata about a specific concept\",\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"parameterId\": {\n+          \"description\": \"The unique identifier for the search parameter\",\n+          \"type\": \"string\"\n+        },\n+        \"name\": {\n+          \"description\": \"The concept name\",\n+          \"type\": \"string\"\n+        },\n+        \"domain\": {\n+          \"description\": \"The domain for this concept\",\n+          \"type\": \"string\"\n+        },\n+        \"type\": {\n+          \"description\": \"The vocabulary type\",\n+          \"type\": \"string\"\n+        },\n+        \"group\": {\n+          \"description\": \"Is the concept a parent or child\",\n+          \"type\": \"boolean\"\n+        },\n+        \"attributes\": {\n+          \"description\": \"A collection of attributes that can be searched for specific domains, ex: labs\",\n+          \"type\": \"array\",\n+          \"items\": [\n+            {\n+              \"$ref\": \"#/definitions/attribute\"\n+            }\n+          ]\n+        },\n+        \"ancestorData\": {\n+          \"description\": \"Does the search parameter contain data in the ancestor table\",\n+          \"type\": \"boolean\"\n+        },\n+        \"standard\": {\n+          \"description\": \"Is the search parameter source or standard\",\n+          \"type\": \"boolean\"\n+        },\n+        \"conceptId\": {\n+          \"description\": \"The concept id\",\n+          \"type\": \"integer\"\n+        },\n+        \"value\": {\n+          \"description\": \"For PPI questions this holds the answer concept id\",", "originalCommit": "9c9fc58794495e5c88a356223dacfb8a532329c9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzYxNTM0NQ==", "url": "https://github.com/all-of-us/workbench/pull/4076#discussion_r497615345", "bodyText": "Turns out this is deprecated and no longer used in the codebase, but we still have json cohort definitions that include it. So added deprecation to description and created a ticket to remove this property from the SearchParameter: https://precisionmedicineinitiative.atlassian.net/browse/RW-5680", "author": "freemabd", "createdAt": "2020-09-30T15:46:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njk3OTAxMQ=="}], "type": "inlineReview"}, {"oid": "2c1a67f0597066c41da8302b009fec35487a3bb7", "url": "https://github.com/all-of-us/workbench/commit/2c1a67f0597066c41da8302b009fec35487a3bb7", "message": "cohort def schema json", "committedDate": "2020-10-01T14:05:53Z", "type": "commit"}, {"oid": "ae003d40cdf1d52d8cb32fdf09fcb2d02428834e", "url": "https://github.com/all-of-us/workbench/commit/ae003d40cdf1d52d8cb32fdf09fcb2d02428834e", "message": "added per comment", "committedDate": "2020-10-01T14:05:53Z", "type": "commit"}, {"oid": "1e6f250af6c26b56a6fe1fc77d1d9835353c89bb", "url": "https://github.com/all-of-us/workbench/commit/1e6f250af6c26b56a6fe1fc77d1d9835353c89bb", "message": "adding more comments and examples", "committedDate": "2020-10-01T14:05:53Z", "type": "commit"}, {"oid": "1e6f250af6c26b56a6fe1fc77d1d9835353c89bb", "url": "https://github.com/all-of-us/workbench/commit/1e6f250af6c26b56a6fe1fc77d1d9835353c89bb", "message": "adding more comments and examples", "committedDate": "2020-10-01T14:05:53Z", "type": "forcePushed"}]}