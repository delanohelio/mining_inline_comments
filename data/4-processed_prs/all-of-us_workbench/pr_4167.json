{"pr_number": 4167, "pr_title": "[risk=no] Update local CDR Versions to match test", "pr_createdAt": "2020-10-14T22:07:28Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4167", "timeline": [{"oid": "70e32322931e27579a49732e2cf4c70b11ab97b5", "url": "https://github.com/all-of-us/workbench/commit/70e32322931e27579a49732e2cf4c70b11ab97b5", "message": "rename OLD LOCAL CDRs", "committedDate": "2020-10-14T22:10:34Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcwNjgyOA==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505706828", "bodyText": "1001 - 1003 should be deletable.", "author": "calbach", "createdAt": "2020-10-15T17:12:06Z", "path": "api/config/cdr_versions_local.json", "diffHunk": "@@ -1,7 +1,55 @@\n [\n   {\n     \"cdrVersionId\": 1,\n-    \"name\": \"Synthetic Dataset v1 (Archived)\",\n+    \"name\": \"Synthetic Dataset v1\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"synthetic_cdr20180606\",\n+    \"creationTime\": \"2018-06-06 00:00:00Z\",\n+    \"releaseNumber\": 1,\n+    \"numParticipants\": 946237,\n+    \"cdrDbName\": \"synth_r_2020q1_3\",\n+    \"elasticIndexBaseName\": \"synth_r_2020q1_1\"\n+  },\n+  {\n+    \"cdrVersionId\": 2,\n+    \"name\": \"Synthetic Dataset v2\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"synthetic_cdr20180606\",\n+    \"creationTime\": \"2018-06-06 00:00:00Z\",\n+    \"releaseNumber\": 2,\n+    \"numParticipants\": 946237,\n+    \"cdrDbName\": \"synth_r_2020q1_3\",\n+    \"elasticIndexBaseName\": \"synth_r_2019q1_1\"\n+  },\n+  {\n+    \"cdrVersionId\": 3,\n+    \"isDefault\": true,\n+    \"name\": \"Synthetic Dataset v3\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"SR2019q4r3\",\n+    \"creationTime\": \"2019-09-30 00:00:00Z\",\n+    \"releaseNumber\": 3,\n+    \"numParticipants\": 234525,\n+    \"cdrDbName\": \"synth_r_2019q4_8\"\n+  },\n+  {\n+    \"cdrVersionId\": 4,\n+    \"name\": \"Synthetic Dataset v3 with Microarray\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"SR2019q4r3\",\n+    \"microarrayBigqueryDataset\": \"microarray_data\",\n+    \"creationTime\": \"2020-08-26 00:09:51Z\",\n+    \"releaseNumber\": 3,\n+    \"numParticipants\": 234525,\n+    \"cdrDbName\": \"synth_r_2019q4_8\"\n+  },\n+  {\n+    \"cdrVersionId\": 1001,", "originalCommit": "8f5b0d44e5d26a22b45817d1ecc989dc0fdd24c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcyMjE4Mg==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505722182", "bodyText": "removed", "author": "jmthibault79", "createdAt": "2020-10-15T17:38:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTcwNjgyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNDIwMg==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505734202", "bodyText": "This shouldn't be changed from cdr", "author": "calbach", "createdAt": "2020-10-15T17:57:59Z", "path": "api/config/cdr_versions_local.json", "diffHunk": "@@ -1,42 +1,50 @@\n [\n   {\n     \"cdrVersionId\": 1,\n-    \"name\": \"Synthetic Dataset v1 (Archived)\",\n+    \"name\": \"Synthetic Dataset v1\",\n     \"dataAccessLevel\": 1,\n-    \"archivalStatus\": 1,\n     \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n-    \"bigqueryDataset\": \"SR2019q4r3\",\n+    \"bigqueryDataset\": \"synthetic_cdr20180606\",\n     \"creationTime\": \"2018-06-06 00:00:00Z\",\n     \"releaseNumber\": 1,\n     \"numParticipants\": 946237,\n-    \"cdrDbName\": \"cdr\",\n-    \"elasticIndexBaseName\": \"cdr\"\n+    \"cdrDbName\": \"synth_r_2020q1_3\",", "originalCommit": "e040e627fb0559337ac6150f35da3f8f36aeb3be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczOTk4Nw==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505739987", "bodyText": "This PR is to exactly match test env.  Should I update test env to match the old \"cdr\" ?", "author": "jmthibault79", "createdAt": "2020-10-15T18:07:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNDIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc0MjQ1NQ==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505742455", "bodyText": "The MySQL databases in local and test are different, so that's not going to be possible. This is entirely an internal configuration detail which tells the server which MySQL database to connect to - if Puppeteer is failing on account of this then some level of abstraction has been horribly broken.", "author": "calbach", "createdAt": "2020-10-15T18:11:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNDIwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTc1MzUxNA==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505753514", "bodyText": "I see - I'll revert to \"cdr\"", "author": "jmthibault79", "createdAt": "2020-10-15T18:26:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNDIwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTczNTc2Ng==", "url": "https://github.com/all-of-us/workbench/pull/4167#discussion_r505735766", "bodyText": "Possibly this trailing , is causing the NPE? THat's my only guess", "author": "calbach", "createdAt": "2020-10-15T18:00:30Z", "path": "api/config/cdr_versions_local.json", "diffHunk": "@@ -1,42 +1,50 @@\n [\n   {\n     \"cdrVersionId\": 1,\n-    \"name\": \"Synthetic Dataset v1 (Archived)\",\n+    \"name\": \"Synthetic Dataset v1\",\n     \"dataAccessLevel\": 1,\n-    \"archivalStatus\": 1,\n     \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n-    \"bigqueryDataset\": \"SR2019q4r3\",\n+    \"bigqueryDataset\": \"synthetic_cdr20180606\",\n     \"creationTime\": \"2018-06-06 00:00:00Z\",\n     \"releaseNumber\": 1,\n     \"numParticipants\": 946237,\n-    \"cdrDbName\": \"cdr\",\n-    \"elasticIndexBaseName\": \"cdr\"\n+    \"cdrDbName\": \"synth_r_2020q1_3\",\n+    \"elasticIndexBaseName\": \"synth_r_2020q1_1\"\n   },\n   {\n     \"cdrVersionId\": 2,\n+    \"name\": \"Synthetic Dataset v2\",\n+    \"dataAccessLevel\": 1,\n+    \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n+    \"bigqueryDataset\": \"synthetic_cdr20180606\",\n+    \"creationTime\": \"2018-06-06 00:00:00Z\",\n+    \"releaseNumber\": 2,\n+    \"numParticipants\": 946237,\n+    \"cdrDbName\": \"synth_r_2020q1_3\",\n+    \"elasticIndexBaseName\": \"synth_r_2019q1_1\"\n+  },\n+  {\n+    \"cdrVersionId\": 3,\n     \"isDefault\": true,\n-    \"name\": \"Synthetic Dataset v1\",\n+    \"name\": \"Synthetic Dataset v3\",\n     \"dataAccessLevel\": 1,\n     \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n     \"bigqueryDataset\": \"SR2019q4r3\",\n     \"creationTime\": \"2019-09-30 00:00:00Z\",\n-    \"releaseNumber\": 1,\n-    \"numParticipants\": 946237,\n-    \"cdrDbName\": \"cdr\",\n-    \"elasticIndexBaseName\": \"cdr\"\n+    \"releaseNumber\": 3,\n+    \"numParticipants\": 234525,\n+    \"cdrDbName\": \"synth_r_2019q4_8\"\n   },\n   {\n-    \"cdrVersionId\": 3,\n-    \"isDefault\": false,\n-    \"name\": \"Synthetic Dataset v1 with Microarray\",\n+    \"cdrVersionId\": 4,\n+    \"name\": \"Synthetic Dataset v3 with Microarray\",\n     \"dataAccessLevel\": 1,\n     \"bigqueryProject\": \"fc-aou-cdr-synth-test\",\n     \"bigqueryDataset\": \"SR2019q4r3\",\n     \"microarrayBigqueryDataset\": \"microarray_data\",\n     \"creationTime\": \"2020-08-26 00:09:51Z\",\n-    \"releaseNumber\": 1,\n-    \"numParticipants\": 946237,\n-    \"cdrDbName\": \"cdr\",\n-    \"elasticIndexBaseName\": \"cdr\"\n-  }\n+    \"releaseNumber\": 3,\n+    \"numParticipants\": 234525,\n+    \"cdrDbName\": \"synth_r_2019q4_8\"\n+  },", "originalCommit": "e040e627fb0559337ac6150f35da3f8f36aeb3be", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e1c012791155d1c3cb6dbec6b5fc7579462ce8e0", "url": "https://github.com/all-of-us/workbench/commit/e1c012791155d1c3cb6dbec6b5fc7579462ce8e0", "message": "Rename local CDRs to match test", "committedDate": "2020-10-15T18:27:08Z", "type": "commit"}, {"oid": "f18339986682fe6d78a89cb293467fef5326f4d8", "url": "https://github.com/all-of-us/workbench/commit/f18339986682fe6d78a89cb293467fef5326f4d8", "message": "restore local cdrDbName and elasticIndexBaseName", "committedDate": "2020-10-15T18:29:16Z", "type": "commit"}, {"oid": "f18339986682fe6d78a89cb293467fef5326f4d8", "url": "https://github.com/all-of-us/workbench/commit/f18339986682fe6d78a89cb293467fef5326f4d8", "message": "restore local cdrDbName and elasticIndexBaseName", "committedDate": "2020-10-15T18:29:16Z", "type": "forcePushed"}]}