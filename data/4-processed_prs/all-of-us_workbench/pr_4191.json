{"pr_number": 4191, "pr_title": "[risk=no] Guard against race condition preventing navbar rendering", "pr_createdAt": "2020-10-20T17:11:01Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4191", "timeline": [{"oid": "3226a3ed2ecbd874a0869ddf1b0836e2b62be275", "url": "https://github.com/all-of-us/workbench/commit/3226a3ed2ecbd874a0869ddf1b0836e2b62be275", "message": "Guard against race condition where sometimes cdrVersionListResponse is not yet available", "committedDate": "2020-10-20T17:06:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcwMTU0Mw==", "url": "https://github.com/all-of-us/workbench/pull/4191#discussion_r508701543", "bodyText": "Hm.. this shouldn't be possible. withCdrVersions() doesn't render the wrapped component until cdrVersionListResponse is available. I would expect that to work the same for functional components as well, but perhaps I'm missing something.", "author": "calbach", "createdAt": "2020-10-20T17:14:41Z", "path": "ui/src/app/pages/workspace/workspace-about.tsx", "diffHunk": "@@ -240,7 +240,7 @@ export const WorkspaceAbout = fp.flow(withUserProfile(), withUrlParams(), withCd\n           <div style={styles.infoBox} data-test-id='cdrVersion'>\n             <div style={styles.infoBoxHeader}>Dataset</div>\n             <div style={{fontSize: '0.5rem'}}>\n-              {workspace ? getCdrVersion(workspace, cdrVersionListResponse).name : 'Loading...'}\n+              {(workspace && cdrVersionListResponse) ? getCdrVersion(workspace, cdrVersionListResponse).name : 'Loading...'}", "originalCommit": "3226a3ed2ecbd874a0869ddf1b0836e2b62be275", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcwMjg3Ng==", "url": "https://github.com/all-of-us/workbench/pull/4191#discussion_r508702876", "bodyText": "I did not actually observe the problem here.  I can remove this change if you're confident.", "author": "jmthibault79", "createdAt": "2020-10-20T17:16:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcwMTU0Mw=="}], "type": "inlineReview"}, {"oid": "f7d43cdc4d9f6125186912939adca1547ceaf897", "url": "https://github.com/all-of-us/workbench/commit/f7d43cdc4d9f6125186912939adca1547ceaf897", "message": "should only need to check for the existence of the workspace", "committedDate": "2020-10-20T17:22:04Z", "type": "commit"}]}