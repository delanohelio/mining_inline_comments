{"pr_number": 3184, "pr_title": "[risk=no][RW-4402] remove references to free tier time limits", "pr_createdAt": "2020-02-24T21:06:37Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3184", "timeline": [{"oid": "44bd3dc0388331514e6257717093266a880c7d3f", "url": "https://github.com/all-of-us/workbench/commit/44bd3dc0388331514e6257717093266a880c7d3f", "message": "remove references to free tier time limits", "committedDate": "2020-02-24T20:54:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0MDUxNw==", "url": "https://github.com/all-of-us/workbench/pull/3184#discussion_r383540517", "bodyText": "I agree with the semantic change, but check w/ Karthik", "author": "jmthibault79", "createdAt": "2020-02-24T22:00:30Z", "path": "api/src/main/resources/emails/dollarthresholdemail/content.html", "diffHunk": "@@ -30,8 +30,8 @@\n <img src=\"${HEADER_IMG}\">\n <div>Hello ${FIRST_NAME} ${LAST_NAME},</div>\n <div>This is a reminder that you have used ${USED_CREDITS} in free credits offered by the All of Us Program.\n-  The remaining balance on your free credits is ${CREDIT_BALANCE} which will be valid until ${EXPIRATION_DATE}.</div>\n-<div>Once your free credits expire, you can request for an extension of free credits by contacting support or\n+  The remaining balance on your free credits is ${CREDIT_BALANCE}.</div>\n+<div>Once you use all of your free credits, you can request for an extension of free credits by contacting support or", "originalCommit": "44bd3dc0388331514e6257717093266a880c7d3f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NDI1MA==", "url": "https://github.com/all-of-us/workbench/pull/3184#discussion_r383544250", "bodyText": "Free tier alerting for cost has (or had?) a dependency on registration time which is no longer appropriate.  Removing this block would be a good test to see if we still have that.  IIRC there are other similar blocks in this file, which we should also remove.", "author": "jmthibault79", "createdAt": "2020-02-24T22:09:08Z", "path": "api/src/test/java/org/pmiops/workbench/billing/FreeTierBillingServiceTest.java", "diffHunk": "@@ -131,15 +124,11 @@ public void checkFreeTierBillingUsage_exceedsDollarThresholds() throws Messaging\n     final DbUser user = createUser(SINGLE_WORKSPACE_TEST_USER);\n     createWorkspace(user, SINGLE_WORKSPACE_TEST_PROJECT);\n \n-    final short daysLimit = 1000;\n-    workbenchConfig.billing.defaultFreeCreditsDaysLimit = daysLimit;\n-\n     // set an arbitrary registration time", "originalCommit": "44bd3dc0388331514e6257717093266a880c7d3f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDA2NTg4MQ==", "url": "https://github.com/all-of-us/workbench/pull/3184#discussion_r384065881", "bodyText": "We do also use it to make sure we don't cost-check every single user, only users that are already registered.", "author": "als364", "createdAt": "2020-02-25T19:07:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MzU0NDI1MA=="}], "type": "inlineReview"}]}