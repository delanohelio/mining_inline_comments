{"pr_number": 3909, "pr_title": "Chavanr/e2e delete workspace", "pr_createdAt": "2020-08-24T18:02:41Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3909", "timeline": [{"oid": "cb3b38b01a771224dd34e943c1b54b1c8c96cacf", "url": "https://github.com/all-of-us/workbench/commit/cb3b38b01a771224dd34e943c1b54b1c8c96cacf", "message": "added DeleteWorkspace to LinkText", "committedDate": "2020-08-21T16:03:51Z", "type": "commit"}, {"oid": "4e87f3dc1c3b114f542a6e57525f8801722139f1", "url": "https://github.com/all-of-us/workbench/commit/4e87f3dc1c3b114f542a6e57525f8801722139f1", "message": "added Deleteworkspace to LinkText", "committedDate": "2020-08-24T14:18:41Z", "type": "commit"}, {"oid": "b6bbb030441b27c6fca6fbafd46ab840f7ddff9d", "url": "https://github.com/all-of-us/workbench/commit/b6bbb030441b27c6fca6fbafd46ab840f7ddff9d", "message": "added DeleteWorkspace to LinkText", "committedDate": "2020-08-24T14:40:43Z", "type": "commit"}, {"oid": "4f933d5d5332aed69e87cb182e476afda09a06ca", "url": "https://github.com/all-of-us/workbench/commit/4f933d5d5332aed69e87cb182e476afda09a06ca", "message": "created new test case for Delete-workspace", "committedDate": "2020-08-24T14:41:27Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyMjYyMA==", "url": "https://github.com/all-of-us/workbench/pull/3909#discussion_r477422620", "bodyText": "I think it's the Home page where delete happens, right?", "author": "aweng98", "createdAt": "2020-08-26T16:14:48Z", "path": "e2e/tests/workspace/workspace-delete.spec.ts", "diffHunk": "@@ -0,0 +1,70 @@\n+import WorkspacesPage from 'app/page/workspaces-page';\n+import {findWorkspace, signIn} from 'utils/test-utils';\n+import WorkspaceCard from 'app/component/workspace-card';\n+import {EllipsisMenuAction, WorkspaceAccessLevel, LinkText} from 'app/text-labels';\n+import Modal from 'app/component/modal';\n+\n+\n+describe('Delete workspace', () => {\n+\n+  beforeEach(async () => {\n+    await signIn(page);\n+  });\n+\n+  /**\n+   * Test:\n+   * - Find an existing workspace. Create a new workspace if none exists.\n+   * - Select \"Delete\" thru the Ellipsis menu located on the Workspace card.\n+   * - Get the content on the modal\n+   * - Click the delete workspace button on the modal\n+   * - Navigate to the \"View Workspaces\" page\n+   * - Verify that the workspace has been delete\n+   */\n+  \n+  describe('From \"Your Workspaces\" page using Workspace card ellipsis menu', () => {", "originalCommit": "4f933d5d5332aed69e87cb182e476afda09a06ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU2NTQ1NQ==", "url": "https://github.com/all-of-us/workbench/pull/3909#discussion_r478565455", "bodyText": "the delete happens on\"YOUR WORKSPACES\" page.", "author": "chavanr2019", "createdAt": "2020-08-27T17:00:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyMjYyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyNTEwNw==", "url": "https://github.com/all-of-us/workbench/pull/3909#discussion_r477425107", "bodyText": "Can you create a reusable function for delete workspace modal similar to this one? It's okay if you don't feel comfortable doing it as this is your first PR.\n/**\n   * Click DELETE COHORT button in Cohort Delete Confirmation dialog.\n   * @return {string} Dialog textContent.\n   */\n  async deleteConfirmationDialog(): Promise<string> {\n    const modal = new Modal(this.page);\n    const contentText = await modal.getContent();\n    await modal.clickButton(LinkText.DeleteCohort, {waitForClose: true});\n    await waitWhileLoading(this.page);\n    return contentText;\n  }", "author": "aweng98", "createdAt": "2020-08-26T16:18:40Z", "path": "e2e/tests/workspace/workspace-delete.spec.ts", "diffHunk": "@@ -0,0 +1,70 @@\n+import WorkspacesPage from 'app/page/workspaces-page';\n+import {findWorkspace, signIn} from 'utils/test-utils';\n+import WorkspaceCard from 'app/component/workspace-card';\n+import {EllipsisMenuAction, WorkspaceAccessLevel, LinkText} from 'app/text-labels';\n+import Modal from 'app/component/modal';\n+\n+\n+describe('Delete workspace', () => {\n+\n+  beforeEach(async () => {\n+    await signIn(page);\n+  });\n+\n+  /**\n+   * Test:\n+   * - Find an existing workspace. Create a new workspace if none exists.\n+   * - Select \"Delete\" thru the Ellipsis menu located on the Workspace card.\n+   * - Get the content on the modal\n+   * - Click the delete workspace button on the modal\n+   * - Navigate to the \"View Workspaces\" page\n+   * - Verify that the workspace has been delete\n+   */\n+  \n+  describe('From \"Your Workspaces\" page using Workspace card ellipsis menu', () => {\n+\n+    test('As OWNER, user can delete workspace', async () => {\n+      const workspacesPage = new WorkspacesPage(page);\n+      const workspaceCard = await findWorkspace(page);\n+      const workspaceName = await workspaceCard.getWorkspaceName();\n+      console.log(workspaceName);\n+\n+      // Verify Workspace Access Level is OWNER.\n+      const accessLevel = await workspaceCard.getWorkspaceAccessLevel();\n+      expect(accessLevel).toBe(WorkspaceAccessLevel.Owner);\n+      \n+      await workspaceCard.asElementHandle().hover();\n+      // click on Ellipsis \"Delete\"\n+      await (workspaceCard.getEllipsis()).clickAction(EllipsisMenuAction.Delete, { waitForNav: false });\n+\n+      const modal = new Modal(page);", "originalCommit": "4f933d5d5332aed69e87cb182e476afda09a06ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU2NzMwNw==", "url": "https://github.com/all-of-us/workbench/pull/3909#discussion_r478567307", "bodyText": "working on it!", "author": "chavanr2019", "createdAt": "2020-08-27T17:04:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyNTEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYwMjk4Mg==", "url": "https://github.com/all-of-us/workbench/pull/3909#discussion_r478602982", "bodyText": "Done!", "author": "chavanr2019", "createdAt": "2020-08-27T18:07:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzQyNTEwNw=="}], "type": "inlineReview"}, {"oid": "a59d8617e550d7fa25c96f259489283b218100be", "url": "https://github.com/all-of-us/workbench/commit/a59d8617e550d7fa25c96f259489283b218100be", "message": "created new function: deleteWorkspaceModal", "committedDate": "2020-08-27T17:42:43Z", "type": "commit"}, {"oid": "f49508c7f5de14472ea74f10322b1a9761c28b15", "url": "https://github.com/all-of-us/workbench/commit/f49508c7f5de14472ea74f10322b1a9761c28b15", "message": "added reusable the function-deleteWorkspaceModal", "committedDate": "2020-08-27T17:52:11Z", "type": "commit"}, {"oid": "4c6ef9dbbee510f1f70c361996044315a6ccd9b3", "url": "https://github.com/all-of-us/workbench/commit/4c6ef9dbbee510f1f70c361996044315a6ccd9b3", "message": "Merge branch 'master' into chavanr/e2e-delete-workspace", "committedDate": "2020-08-27T19:36:24Z", "type": "commit"}]}