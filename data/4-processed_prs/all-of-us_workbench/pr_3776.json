{"pr_number": 3776, "pr_title": "[no ticket][risk=no] Puppeteer fix broken tests", "pr_createdAt": "2020-07-13T15:18:44Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3776", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzcyODUzMA==", "url": "https://github.com/all-of-us/workbench/pull/3776#discussion_r453728530", "bodyText": "Add a third parameter for specify custom timeout", "author": "aweng98", "createdAt": "2020-07-13T15:20:15Z", "path": "e2e/utils/waits-utils.ts", "diffHunk": "@@ -75,7 +75,7 @@ export async function waitForPropertyEquality(\n   }\n }\n \n-export async function waitForNumericalString(page: Page, xpath: string): Promise<string> {\n+export async function waitForNumericalString(page: Page, xpath: string, timeOut: number = 30000): Promise<string> {", "originalCommit": "85ca61c453daaa6a507724af7299487ae7f3749d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzczMjMxNg==", "url": "https://github.com/all-of-us/workbench/pull/3776#discussion_r453732316", "bodyText": "Group Count is calculated in bigquery when Finish button is clicked. It could take some time. Relying on 30 sec (default) timeout made dataset/conceptset tests flaky.", "author": "aweng98", "createdAt": "2020-07-13T15:25:29Z", "path": "e2e/app/page/cohort-participants-group.ts", "diffHunk": "@@ -104,7 +104,7 @@ export default class CohortParticipantsGroup {\n   }\n \n   async getGroupCount(): Promise<string> {\n-    return waitForNumericalString(this.page, this.getGroupCountXpath());\n+    return waitForNumericalString(this.page, this.getGroupCountXpath(), 60000);", "originalCommit": "85ca61c453daaa6a507724af7299487ae7f3749d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzc1MjMxMg==", "url": "https://github.com/all-of-us/workbench/pull/3776#discussion_r453752312", "bodyText": "wait for dialog close and spinner to disappear.", "author": "aweng98", "createdAt": "2020-07-13T15:52:23Z", "path": "e2e/app/page/conceptset-save-modal.ts", "diffHunk": "@@ -50,6 +51,10 @@ export default class ConceptsetSaveModal extends Modal {\n \n     // Click SAVE button.\n     await this.clickButton(LinkText.Save);\n+    await Promise.all([\n+      waitWhileLoading(this.page),\n+      this.waitUntilClose(),\n+    ]);", "originalCommit": "14d8afb07dc3c893d4156dec2ada413840bc5a68", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "58f94e939e8d836182361f5d21dde4cd73fe9847", "url": "https://github.com/all-of-us/workbench/commit/58f94e939e8d836182361f5d21dde4cd73fe9847", "message": "fix", "committedDate": "2020-07-13T16:18:39Z", "type": "commit"}, {"oid": "58f94e939e8d836182361f5d21dde4cd73fe9847", "url": "https://github.com/all-of-us/workbench/commit/58f94e939e8d836182361f5d21dde4cd73fe9847", "message": "fix", "committedDate": "2020-07-13T16:18:39Z", "type": "forcePushed"}]}