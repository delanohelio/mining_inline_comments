{"pr_number": 3154, "pr_title": "[RW-3848][Risk=no] Disable links for unregistered user in sidenav", "pr_createdAt": "2020-02-19T21:14:35Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3154", "timeline": [{"oid": "31e2c55be276646e0a7ddc82e6554886655d4849", "url": "https://github.com/all-of-us/workbench/commit/31e2c55be276646e0a7ddc82e6554886655d4849", "message": "[RW-3848][Risk=no] Disable links for unregistered user in sidenav", "committedDate": "2020-02-19T21:11:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYwNDU2NA==", "url": "https://github.com/all-of-us/workbench/pull/3154#discussion_r381604564", "bodyText": "unused", "author": "calbach", "createdAt": "2020-02-19T23:21:15Z", "path": "ui/src/app/components/side-nav.spec.tsx", "diffHunk": "@@ -0,0 +1,39 @@\n+import {mount} from 'enzyme';\n+import * as React from 'react';\n+\n+import {SideNav, SideNavItem, SideNavProps} from './side-nav';\n+import {ProfileStubVariables} from \"../../testing/stubs/profile-api-stub\";\n+import {DataAccessLevel} from \"../../generated/fetch\";\n+\n+\n+describe('SideNav', () => {\n+  const existingNames = [];", "originalCommit": "31e2c55be276646e0a7ddc82e6554886655d4849", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYwNTc2OQ==", "url": "https://github.com/all-of-us/workbench/pull/3154#discussion_r381605769", "bodyText": "It would be better if this test also asserted that you found all the disabled items you were looking for. e.g. by removing elements from disabledItems as you find them and then asserting it's an empty list at the end. Or maybe by keeping a counter.\nFor example, if I added the string \"asdf\" to disabledItems above, the test wouldn't fail (more realistic scenario: we change the label text for one of these buttons and forget to update tests).", "author": "calbach", "createdAt": "2020-02-19T23:24:46Z", "path": "ui/src/app/components/side-nav.spec.tsx", "diffHunk": "@@ -0,0 +1,39 @@\n+import {mount} from 'enzyme';\n+import * as React from 'react';\n+\n+import {SideNav, SideNavItem, SideNavProps} from './side-nav';\n+import {ProfileStubVariables} from \"../../testing/stubs/profile-api-stub\";\n+import {DataAccessLevel} from \"../../generated/fetch\";\n+\n+\n+describe('SideNav', () => {\n+  const existingNames = [];\n+  const props: SideNavProps = {\n+    profile: ProfileStubVariables.PROFILE_STUB,\n+    bannerAdminActive: false,\n+    workspaceAdminActive: false,\n+    homeActive: false,\n+    libraryActive: false,\n+    onToggleSideNav: () => {},\n+    profileActive: false,\n+    userAdminActive: false,\n+    workspacesActive: false,\n+  };\n+  const component = () => mount(<SideNav {...props}/>);\n+  it('should render', () => {\n+    const wrapper = component();\n+    expect(wrapper.exists()).toBeTruthy();\n+  });\n+\n+  it('disables options when user not registered', () => {\n+    const wrapper = mount(<SideNav {...props} profile={{...ProfileStubVariables.PROFILE_STUB,\n+      dataAccessLevel: DataAccessLevel.Unregistered}}/>);\n+    const disabledItems = ['Your Workspaces', 'Featured Workspaces', 'User Support'];\n+    wrapper.find(SideNavItem).forEach(sideNavItem => {\n+      if (disabledItems.includes(sideNavItem.text())) {", "originalCommit": "31e2c55be276646e0a7ddc82e6554886655d4849", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "df2efaedda9743adbe08cfe9ad3e2e52e03a6089", "url": "https://github.com/all-of-us/workbench/commit/df2efaedda9743adbe08cfe9ad3e2e52e03a6089", "message": "PR Feedback", "committedDate": "2020-02-20T15:45:28Z", "type": "commit"}, {"oid": "778f33ead069864eadc5306f4a15ca528b25cec2", "url": "https://github.com/all-of-us/workbench/commit/778f33ead069864eadc5306f4a15ca528b25cec2", "message": "Make tests do what I want", "committedDate": "2020-02-20T16:03:08Z", "type": "commit"}]}