{"pr_number": 3753, "pr_title": "[noTicket][RISK=LOW] Use config flag in UI to show Research Review Prompt", "pr_createdAt": "2020-07-07T21:29:06Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3753", "timeline": [{"oid": "5f57b3f42e3969f7e913eefbedddbc9dc98b0b39", "url": "https://github.com/all-of-us/workbench/commit/5f57b3f42e3969f7e913eefbedddbc9dc98b0b39", "message": "Needs research prompt update always setting to true on update", "committedDate": "2020-07-07T19:53:22Z", "type": "commit"}, {"oid": "0b4730ffa6c95dd1118484585043f5a946733db9", "url": "https://github.com/all-of-us/workbench/commit/0b4730ffa6c95dd1118484585043f5a946733db9", "message": "Add UI flsag to restrict research purpose Prompt", "committedDate": "2020-07-07T21:24:42Z", "type": "commit"}, {"oid": "777f555bbb5c1cd523a44ba85f13c961438a518a", "url": "https://github.com/all-of-us/workbench/commit/777f555bbb5c1cd523a44ba85f13c961438a518a", "message": "Fix UI Test", "committedDate": "2020-07-07T21:37:10Z", "type": "commit"}, {"oid": "cd0931a8e562946f9e705992c4f4f282603a6718", "url": "https://github.com/all-of-us/workbench/commit/cd0931a8e562946f9e705992c4f4f282603a6718", "message": "Fix angular test", "committedDate": "2020-07-07T21:53:06Z", "type": "commit"}, {"oid": "948b7c5c45ab283a274b84d05ede6258dca38847", "url": "https://github.com/all-of-us/workbench/commit/948b7c5c45ab283a274b84d05ede6258dca38847", "message": "Fix nav bar test", "committedDate": "2020-07-07T22:13:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3MzgyMQ==", "url": "https://github.com/all-of-us/workbench/pull/3753#discussion_r451173821", "bodyText": "rm", "author": "calbach", "createdAt": "2020-07-07T22:13:55Z", "path": "ui/src/app/guards/workspace-guard.service.ts", "diffHunk": "@@ -13,7 +14,8 @@ export class WorkspaceGuard implements CanActivate, CanActivateChild {\n     private router: Router) {}\n \n   canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n-    if (route.routeConfig.path === 'data' ||\n+    console.log(serverConfigStore.getValue().enableResearchReviewPrompt);", "originalCommit": "948b7c5c45ab283a274b84d05ede6258dca38847", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3NDE5Ng==", "url": "https://github.com/all-of-us/workbench/pull/3753#discussion_r451174196", "bodyText": "Is this the right if statement? Seems like this should be further down @ line 21", "author": "calbach", "createdAt": "2020-07-07T22:14:46Z", "path": "ui/src/app/guards/workspace-guard.service.ts", "diffHunk": "@@ -13,7 +14,8 @@ export class WorkspaceGuard implements CanActivate, CanActivateChild {\n     private router: Router) {}\n \n   canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean> {\n-    if (route.routeConfig.path === 'data' ||\n+    console.log(serverConfigStore.getValue().enableResearchReviewPrompt);\n+    if (serverConfigStore.getValue().enableResearchReviewPrompt && route.routeConfig.path === 'data' ||", "originalCommit": "948b7c5c45ab283a274b84d05ede6258dca38847", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3NjY3Mw==", "url": "https://github.com/all-of-us/workbench/pull/3753#discussion_r451176673", "bodyText": "Since enableResearchReviewPrompt is false there is no point even to have the api call this.workspaceService.getWorkspace to check for accessLevel or anything and just return\nObservable.from([true])", "author": "NehaBroad", "createdAt": "2020-07-07T22:21:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3NDE5Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE4MjM4OA==", "url": "https://github.com/all-of-us/workbench/pull/3753#discussion_r451182388", "bodyText": "I see - I didn't realize this was a new guard added only for this new review prompt feature. Lets discuss more, I have performance concerns with this approach and I think there may be some inconsistent behavior, but it's all feature flagged with this PR so it's not urgent.", "author": "calbach", "createdAt": "2020-07-07T22:36:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTE3NDE5Ng=="}], "type": "inlineReview"}, {"oid": "797f9666a0c0d9b89757734ba2c1841e53578ce2", "url": "https://github.com/all-of-us/workbench/commit/797f9666a0c0d9b89757734ba2c1841e53578ce2", "message": "Remove console message", "committedDate": "2020-07-07T22:21:56Z", "type": "commit"}, {"oid": "15cdf93d04a76360106603bc48ba5b4aec13afd8", "url": "https://github.com/all-of-us/workbench/commit/15cdf93d04a76360106603bc48ba5b4aec13afd8", "message": "Fix workspace List page", "committedDate": "2020-07-07T22:41:49Z", "type": "commit"}]}