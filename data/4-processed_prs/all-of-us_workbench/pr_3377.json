{"pr_number": 3377, "pr_title": "[risk=no][RW-3211] Show free credits balance on Workspace Create", "pr_createdAt": "2020-04-10T13:42:41Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3377", "timeline": [{"oid": "6542e7f90488056d32697a1c69e2da6b1d073959", "url": "https://github.com/all-of-us/workbench/commit/6542e7f90488056d32697a1c69e2da6b1d073959", "message": "Will saves the day", "committedDate": "2020-04-10T14:35:41Z", "type": "forcePushed"}, {"oid": "562dc70209b7d31c1b2fab2cca360b907009cea1", "url": "https://github.com/all-of-us/workbench/commit/562dc70209b7d31c1b2fab2cca360b907009cea1", "message": "Will saves the day", "committedDate": "2020-04-10T14:57:45Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg4OTcyOQ==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r406889729", "bodyText": "I believe the flex has done strange things to the alignment of the dropdown selection. If you look, it is aligned to the top of the container rather than the center. Could you fix the styling on that? Should be either just putting an alignItems and maybe a fixed height on the dropdown?\nNew:\n\nOld:", "author": "s-rubenstein", "createdAt": "2020-04-10T18:40:43Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -891,21 +916,32 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <div style={{...styles.header, color: colors.primary, fontSize: 14, marginBottom: '0.2rem'}}>\n               Select account\n             </div>\n-            <Dropdown style={{width: '14rem'}}\n-                      value={this.state.workspace.billingAccountName}\n-                      options={this.buildBillingAccountOptions()}\n-                      onChange={e => {\n-                        if (e.value === CREATE_BILLING_ACCOUNT_OPTION_VALUE) {\n-                          this.setState({\n-                            showCreateBillingAccountModal: true\n-                          });\n-                        } else {\n-                          this.setState(fp.set(['workspace', 'billingAccountName'], e.value));\n-                        }\n-                      }}\n-            />\n-          </WorkspaceEditSection>\n-        }\n+            <FlexRow>", "originalCommit": "562dc70209b7d31c1b2fab2cca360b907009cea1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyNTU4MA==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r406925580", "bodyText": "Subtle!\nI was able to keep the FlexRow by removing some padding from the Clickable/div I added to the row", "author": "jmthibault79", "createdAt": "2020-04-10T20:20:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjg4OTcyOQ=="}], "type": "inlineReview"}, {"oid": "11acfa5ffc5e9c64b598b0ba70282d6056fe4beb", "url": "https://github.com/all-of-us/workbench/commit/11acfa5ffc5e9c64b598b0ba70282d6056fe4beb", "message": "Display free tier credits in workspace create screen", "committedDate": "2020-04-10T20:15:17Z", "type": "commit"}, {"oid": "68e297353e271c8a7d02fe93d949558b296dd48b", "url": "https://github.com/all-of-us/workbench/commit/68e297353e271c8a7d02fe93d949558b296dd48b", "message": "overlay first?", "committedDate": "2020-04-10T20:15:17Z", "type": "commit"}, {"oid": "ea80e21853706462d89067764984cab7d9b57722", "url": "https://github.com/all-of-us/workbench/commit/ea80e21853706462d89067764984cab7d9b57722", "message": "Will saves the day", "committedDate": "2020-04-10T20:15:18Z", "type": "commit"}, {"oid": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "url": "https://github.com/all-of-us/workbench/commit/d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "message": "styling tweaks", "committedDate": "2020-04-10T20:15:18Z", "type": "commit"}, {"oid": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "url": "https://github.com/all-of-us/workbench/commit/d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "message": "styling tweaks", "committedDate": "2020-04-10T20:15:18Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjkyNjg0OA==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r406926848", "bodyText": "Have to add the text padding here because we want the Clickable to be exactly the size of the text.\nThis is because the Overlay aligns to the Clickable.", "author": "jmthibault79", "createdAt": "2020-04-10T20:24:24Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -891,21 +916,30 @@ export const WorkspaceEdit = fp.flow(withRouteConfigData(), withCurrentWorkspace\n             <div style={{...styles.header, color: colors.primary, fontSize: 14, marginBottom: '0.2rem'}}>\n               Select account\n             </div>\n-            <Dropdown style={{width: '14rem'}}\n-                      value={this.state.workspace.billingAccountName}\n-                      options={this.buildBillingAccountOptions()}\n-                      onChange={e => {\n-                        if (e.value === CREATE_BILLING_ACCOUNT_OPTION_VALUE) {\n-                          this.setState({\n-                            showCreateBillingAccountModal: true\n-                          });\n-                        } else {\n-                          this.setState(fp.set(['workspace', 'billingAccountName'], e.value));\n-                        }\n-                      }}\n-            />\n-          </WorkspaceEditSection>\n-        }\n+            <OverlayPanel ref={(me) => freeTierBalancePanel = me} dismissable={true} appendTo={document.body}>\n+              <div style={styles.freeCreditsBalanceOverlay}>\n+                FREE CREDIT BALANCE {renderUSD(freeTierCreditsBalance)}\n+              </div>\n+            </OverlayPanel>\n+            <FlexRow>\n+              <Dropdown style={{width: '14rem'}}\n+                        value={this.state.workspace.billingAccountName}\n+                        options={this.buildBillingAccountOptions()}\n+                        onChange={e => {\n+                          if (e.value === CREATE_BILLING_ACCOUNT_OPTION_VALUE) {\n+                            this.setState({\n+                              showCreateBillingAccountModal: true\n+                            });\n+                          } else {\n+                            this.setState(fp.set(['workspace', 'billingAccountName'], e.value));\n+                          }\n+                        }}\n+              />\n+              {freeTierCreditsBalance > 0.0 && <div style={styles.freeCreditsBalanceClickable}>", "originalCommit": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzIwNQ==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r408157205", "bodyText": "Nit: Please change to colors.primary", "author": "s-rubenstein", "createdAt": "2020-04-14T13:57:50Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -81,6 +85,20 @@ export const styles = reactStyles({\n     flex: '1 1 0',\n     marginLeft: '1rem'\n   },\n+  freeCreditsBalanceClickable: {\n+    display: 'inline-block',\n+    color: colors.accent,\n+    padding: '0.25rem 0 0 1rem'\n+  },\n+  freeCreditsBalanceOverlay: {\n+    height: '44px',\n+    width: '150px',\n+    color: '#262262',", "originalCommit": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzU0Ng==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r408157546", "bodyText": "Nit: I think our convention for this is to just put fontSize: 12", "author": "s-rubenstein", "createdAt": "2020-04-14T13:58:18Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -81,6 +85,20 @@ export const styles = reactStyles({\n     flex: '1 1 0',\n     marginLeft: '1rem'\n   },\n+  freeCreditsBalanceClickable: {\n+    display: 'inline-block',\n+    color: colors.accent,\n+    padding: '0.25rem 0 0 1rem'\n+  },\n+  freeCreditsBalanceOverlay: {\n+    height: '44px',\n+    width: '150px',\n+    color: '#262262',\n+    fontFamily: 'Montserrat',\n+    fontSize: '12px',", "originalCommit": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE5MDc1MQ==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r408190751", "bodyText": "I'll update.  A quick search shows we're very inconsistent here.  This one's my favorite: fontSize: '.54167rem',", "author": "jmthibault79", "createdAt": "2020-04-14T14:41:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzU0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzYzNQ==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r408157635", "bodyText": "Nit: I think our convention for this is to just put fontSize: 150", "author": "s-rubenstein", "createdAt": "2020-04-14T13:58:25Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -81,6 +85,20 @@ export const styles = reactStyles({\n     flex: '1 1 0',\n     marginLeft: '1rem'\n   },\n+  freeCreditsBalanceClickable: {\n+    display: 'inline-block',\n+    color: colors.accent,\n+    padding: '0.25rem 0 0 1rem'\n+  },\n+  freeCreditsBalanceOverlay: {\n+    height: '44px',\n+    width: '150px',", "originalCommit": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODE1NzczMA==", "url": "https://github.com/all-of-us/workbench/pull/3377#discussion_r408157730", "bodyText": "Nit: I think our convention for this is to just put fontSize: 44", "author": "s-rubenstein", "createdAt": "2020-04-14T13:58:31Z", "path": "ui/src/app/pages/workspace/workspace-edit.tsx", "diffHunk": "@@ -81,6 +85,20 @@ export const styles = reactStyles({\n     flex: '1 1 0',\n     marginLeft: '1rem'\n   },\n+  freeCreditsBalanceClickable: {\n+    display: 'inline-block',\n+    color: colors.accent,\n+    padding: '0.25rem 0 0 1rem'\n+  },\n+  freeCreditsBalanceOverlay: {\n+    height: '44px',", "originalCommit": "d4ac4d288cc475ab62eb2f657a5de0bf8aea9088", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a9755c53937c6fd722e4bda29fd5fbac9eb39be1", "url": "https://github.com/all-of-us/workbench/commit/a9755c53937c6fd722e4bda29fd5fbac9eb39be1", "message": "styling standards", "committedDate": "2020-04-14T14:48:47Z", "type": "commit"}]}