{"pr_number": 3411, "pr_title": "[RW-4564][risk=no] Replace tutorial videos on homepage", "pr_createdAt": "2020-04-15T16:44:47Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3411", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyOTUwOA==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409029508", "bodyText": "Lots of magic numbers here.", "author": "jaycarlton", "createdAt": "2020-04-15T17:57:23Z", "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;", "originalCommit": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA0NTk0MA==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409045940", "bodyText": "Sorry, meant to add a comment with some context before pushing. Will add one shortly.", "author": "dolbeew", "createdAt": "2020-04-15T18:25:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyOTUwOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg4Mjg5NQ==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409882895", "bodyText": "Added a comment with an explanation and also got rid of one magic number since I'm measuring a different element (the 0.97 was accounting for a 3% margin but not needed now).", "author": "dolbeew", "createdAt": "2020-04-16T22:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAyOTUwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409030091", "bodyText": "Out of curiosity, why are the video titles hard-coded with random characters? I wonder if there's a more straightforward way to store this mapping, outside of code (like in an environment config file).", "author": "jaycarlton", "createdAt": "2020-04-15T17:58:23Z", "path": "ui/src/app/pages/homepage/homepage.tsx", "diffHunk": "@@ -231,28 +236,38 @@ export const Homepage = withUserProfile()(class extends React.Component<Props, S\n     });\n   }\n \n-  openVideo(videoLink: string): void {\n-    this.setState({videoOpen: true, videoLink: videoLink});\n+  openVideo(videoId: string): void {\n+    this.setState({videoOpen: true, videoId: videoId});\n   }\n \n \n   render() {\n     const {betaAccessGranted, videoOpen, accessTasksLoaded, accessTasksRemaining,\n       eraCommonsError, eraCommonsLinked, eraCommonsLoading, firstVisitTraining,\n-      trainingCompleted, quickTour, videoLink, twoFactorAuthCompleted,\n-      dataUserCodeOfConductCompleted\n+      trainingCompleted, quickTour, videoId, twoFactorAuthCompleted,\n+      dataUserCodeOfConductCompleted, quickTourResourceOffset\n     } = this.state;\n+    const limit = this.quickTourResourcesDiv ? Math.floor(this.quickTourResourcesDiv.offsetWidth * 0.97 / 276) : 5;\n \n     const quickTourResources = [\n       {\n         src: '/assets/images/QT-thumbnail.svg',\n         onClick: () => this.setState({quickTour: true})\n       }, {\n-        src: '/assets/images/cohorts-thumbnail.png',\n-        onClick: () => this.openVideo('/assets/videos/Workbench Tutorial - Cohorts.mp4')\n+        src: '/assets/images/intro-workbench.png',\n+        onClick: () => this.openVideo('nqnOvOpnRLE')", "originalCommit": "9239a9d46b7170dc50d648f5130922d2e2f2ce8f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTA1MDcwMA==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409050700", "bodyText": "Those are the YouTube video ids that get inserted into the src url of the iframe. Yeah, not sure the best way to do it but didn't want to change too much since I'm not usually in these components.", "author": "dolbeew", "createdAt": "2020-04-15T18:34:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYzNzI1NQ==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409637255", "bodyText": "I would personally set the id to a constant above, and then put that exact comment about YouTube video ids above it (literally I'd just copy word for word)", "author": "s-rubenstein", "createdAt": "2020-04-16T15:14:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg4Mzk2OA==", "url": "https://github.com/all-of-us/workbench/pull/3411#discussion_r409883968", "bodyText": "Added a comment above. Not sure what you mean about setting the id to a constant.", "author": "dolbeew", "createdAt": "2020-04-16T22:25:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTAzMDA5MQ=="}], "type": "inlineReview"}, {"oid": "b472f334ee83135129973054c0e49de65b0f1120", "url": "https://github.com/all-of-us/workbench/commit/b472f334ee83135129973054c0e49de65b0f1120", "message": "RW-4564 use embedded youtube videos on homepage", "committedDate": "2020-04-16T21:52:10Z", "type": "commit"}, {"oid": "794cc8b8f3f0b028efb0580127fa63f061fab240", "url": "https://github.com/all-of-us/workbench/commit/794cc8b8f3f0b028efb0580127fa63f061fab240", "message": "RW-4564 use new thumbnails for video links", "committedDate": "2020-04-16T21:52:10Z", "type": "commit"}, {"oid": "c3cfb0cde44f274afa06721f0bd394b8fbc8e012", "url": "https://github.com/all-of-us/workbench/commit/c3cfb0cde44f274afa06721f0bd394b8fbc8e012", "message": "RW-4564 add horizontal scroll to video list", "committedDate": "2020-04-16T21:52:10Z", "type": "commit"}, {"oid": "23a0fee3e31b9bb70e52f1f226a1310f947c9e0a", "url": "https://github.com/all-of-us/workbench/commit/23a0fee3e31b9bb70e52f1f226a1310f947c9e0a", "message": "RW-4564 mock element width to fix test", "committedDate": "2020-04-16T21:52:10Z", "type": "commit"}, {"oid": "dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "url": "https://github.com/all-of-us/workbench/commit/dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "message": "RW-4564 pr feedback", "committedDate": "2020-04-16T22:25:56Z", "type": "commit"}, {"oid": "dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "url": "https://github.com/all-of-us/workbench/commit/dc1abb33d0f54fe0d514d8f2b70d00456b91beae", "message": "RW-4564 pr feedback", "committedDate": "2020-04-16T22:25:56Z", "type": "forcePushed"}]}