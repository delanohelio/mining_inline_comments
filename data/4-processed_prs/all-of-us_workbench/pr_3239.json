{"pr_number": 3239, "pr_title": "[RW-4475][Risk=no] Working disabled UI", "pr_createdAt": "2020-03-10T18:31:32Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3239", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDUyNzgxNw==", "url": "https://github.com/all-of-us/workbench/pull/3239#discussion_r390527817", "bodyText": "I wasn't sure where to put this page. It is designed to look like the logged out pages, but I don't really like importing from different modules like this. Any ideas? (I also ended up copying some other code, that could probably be abstracted some more?)", "author": "s-rubenstein", "createdAt": "2020-03-10T18:34:12Z", "path": "ui/src/app/pages/user-disabled.tsx", "diffHunk": "@@ -0,0 +1,57 @@\n+import {Component} from '@angular/core';\n+import * as React from 'react';\n+\n+import {StyledAnchorTag} from 'app/components/buttons';\n+import {FlexColumn} from 'app/components/flex';\n+import {Header} from 'app/components/headers';\n+import {backgroundStyleTemplate, SIGNED_OUT_HEADER_IMAGE, SignInStep, StepToImageConfig} from 'app/pages/login/sign-in';", "originalCommit": "b73dbdc8d098330acf46adecd4c2d2606bd36a46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1NDI3MQ==", "url": "https://github.com/all-of-us/workbench/pull/3239#discussion_r390554271", "bodyText": "It could be abstracted some more, but it's not too bad as-is. The most fragile part looks like the backgroundStyleTemplate method call... I don't think including the bg image is critical to the disabled page, so I might be inclined to leave that out in the name of maintainability, but keep the header image (which could more easily be pulled out into a separate constants file, but also isn't a critical to-do IMO).", "author": "gjuggler", "createdAt": "2020-03-10T19:19:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDUyNzgxNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2MTYxNA==", "url": "https://github.com/all-of-us/workbench/pull/3239#discussion_r390961614", "bodyText": "The background image is actually a relatively clear part of Lou's mock/Karthik's design. I think they wanted it to look like the signin page, so that it was a similar page for users who sign in and find themself disabled:\nhttps://projects.invisionapp.com/d/main#/console/12820961/408493657/inspect", "author": "s-rubenstein", "createdAt": "2020-03-11T13:17:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDUyNzgxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1MjA5NQ==", "url": "https://github.com/all-of-us/workbench/pull/3239#discussion_r390552095", "bodyText": "nit: I don't think you're using any async syntax, so you can drop the 'async' here and below.\nI personally think the async syntax is nicer than nested, but I don't think we have a style requirement to use that (yet...)", "author": "gjuggler", "createdAt": "2020-03-10T19:15:27Z", "path": "ui/src/app/guards/disabled-guard.service.ts", "diffHunk": "@@ -0,0 +1,29 @@\n+import {Injectable} from '@angular/core';\n+import {ActivatedRouteSnapshot, CanActivate, CanActivateChild, Router, RouterStateSnapshot} from '@angular/router';\n+\n+import {SignInService} from 'app/services/sign-in.service';\n+import {profileApi} from 'app/services/swagger-fetch-clients';\n+import {convertAPIError} from 'app/utils/errors';\n+import {ErrorCode} from 'generated/fetch';\n+\n+@Injectable()\n+export class DisabledGuard implements CanActivate, CanActivateChild {\n+  constructor(private signInService: SignInService, private router: Router) {}\n+\n+  async canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Promise<boolean> {", "originalCommit": "b73dbdc8d098330acf46adecd4c2d2606bd36a46", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2MjA1Ng==", "url": "https://github.com/all-of-us/workbench/pull/3239#discussion_r390962056", "bodyText": "Want to bring it up at the eng sync? Then if everyone agrees, we can add it to our style guide markdown.", "author": "s-rubenstein", "createdAt": "2020-03-11T13:17:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDU1MjA5NQ=="}], "type": "inlineReview"}, {"oid": "ac803b2d91701c3fac0b5d1f02d1ef529d99e655", "url": "https://github.com/all-of-us/workbench/commit/ac803b2d91701c3fac0b5d1f02d1ef529d99e655", "message": "[RW-4475][Risk=no] Working disabled UI", "committedDate": "2020-03-11T13:24:17Z", "type": "commit"}, {"oid": "cacfd836c675d9cd8c4702e33b0d97b0b4dd0186", "url": "https://github.com/all-of-us/workbench/commit/cacfd836c675d9cd8c4702e33b0d97b0b4dd0186", "message": "Fix linting", "committedDate": "2020-03-11T13:24:17Z", "type": "commit"}, {"oid": "cacfd836c675d9cd8c4702e33b0d97b0b4dd0186", "url": "https://github.com/all-of-us/workbench/commit/cacfd836c675d9cd8c4702e33b0d97b0b4dd0186", "message": "Fix linting", "committedDate": "2020-03-11T13:24:17Z", "type": "forcePushed"}]}