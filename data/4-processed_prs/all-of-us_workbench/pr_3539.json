{"pr_number": 3539, "pr_title": "[RW-4889][risk=no] Folder icon on help sidebar", "pr_createdAt": "2020-05-05T15:52:31Z", "pr_url": "https://github.com/all-of-us/workbench/pull/3539", "timeline": [{"oid": "07ddffd2c0135f4169fe1134e6fdb0ec9796ad67", "url": "https://github.com/all-of-us/workbench/commit/07ddffd2c0135f4169fe1134e6fdb0ec9796ad67", "message": "add helptext to notebooks, fix styles", "committedDate": "2020-05-05T15:44:04Z", "type": "commit"}, {"oid": "987e14b9fca3f021cc6c30bd6153e790de0b6601", "url": "https://github.com/all-of-us/workbench/commit/987e14b9fca3f021cc6c30bd6153e790de0b6601", "message": "review comments", "committedDate": "2020-05-05T15:44:31Z", "type": "commit"}, {"oid": "64b08d37bc21c9000458cc9bf9dda72682c43a70", "url": "https://github.com/all-of-us/workbench/commit/64b08d37bc21c9000458cc9bf9dda72682c43a70", "message": "comment in both places", "committedDate": "2020-05-05T15:44:52Z", "type": "commit"}, {"oid": "342db221f1d0b58cd53e04cc675f2a428b869c25", "url": "https://github.com/all-of-us/workbench/commit/342db221f1d0b58cd53e04cc675f2a428b869c25", "message": "shelving", "committedDate": "2020-05-05T15:44:52Z", "type": "commit"}, {"oid": "d618ca42922a0285a90b3ef587eede44e29e115c", "url": "https://github.com/all-of-us/workbench/commit/d618ca42922a0285a90b3ef587eede44e29e115c", "message": "now functional", "committedDate": "2020-05-05T15:44:52Z", "type": "commit"}, {"oid": "16315381063ed7acbac3af8a103e94ddd87bd46b", "url": "https://github.com/all-of-us/workbench/commit/16315381063ed7acbac3af8a103e94ddd87bd46b", "message": "remove extraneous", "committedDate": "2020-05-05T15:44:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxNzA0OQ==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420217049", "bodyText": "it was bugging me that I couldn't collapse stuff. I can revert this if you, esteemed reviewer, would prefer.", "author": "als364", "createdAt": "2020-05-05T15:53:02Z", "path": "ui/src/app/app-routing.module.ts", "diffHunk": "@@ -105,7 +105,8 @@ const routes: Routes = [\n                   breadcrumb: BreadcrumbType.Workspace,\n                   helpContent: 'about'\n                 }\n-              }, {\n+              },", "originalCommit": "16315381063ed7acbac3af8a103e94ddd87bd46b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxNzI3OQ==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420217279", "bodyText": "this is a whitespace change", "author": "als364", "createdAt": "2020-05-05T15:53:20Z", "path": "ui/src/app/components/help-sidebar.tsx", "diffHunk": "@@ -180,23 +181,24 @@ const icons = [{\n //   page: null,\n //   style: {height: '22px', width: '22px', marginTop: '0.25rem', opacity: 0.5},\n //   tooltip: 'Compute Configuration',\n-}, {\n-  id: 'dataDictionary',\n-  disabled: false,\n-  faIcon: faBook,\n-  label: 'Data Dictionary Icon',\n-  page: null,\n-  style: {color: colors.white, fontSize: '20px', marginTop: '5px'},\n-  tooltip: 'Data Dictionary',\n-}, {\n-  id: 'annotations',\n-  disabled: false,\n-  faIcon: faEdit,\n-  label: 'Annotations Icon',\n-  page: 'reviewParticipantDetail',\n-  style: {fontSize: '20px', marginLeft: '3px'},\n-  tooltip: 'Annotations',\n-}];\n+  }, {", "originalCommit": "16315381063ed7acbac3af8a103e94ddd87bd46b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxODAxMA==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420218010", "bodyText": "this is also largely a whitespace change", "author": "als364", "createdAt": "2020-05-05T15:54:19Z", "path": "ui/src/app/components/help-sidebar.tsx", "diffHunk": "@@ -428,27 +434,31 @@ export const HelpSidebar = fp.flow(withCurrentWorkspace(), withUserProfile())(\n       return <React.Fragment>\n         <div style={notebookStyles ? {...styles.iconContainer, ...styles.notebookOverrides} : {...styles.iconContainer}}>\n           {this.renderWorkspaceMenu()}\n-          {icons.map((icon, i) => (!icon.page || icon.page === helpContent) && <div key={i} style={{display: 'table'}}>\n-            <TooltipTrigger content={<div>{tooltipId === i && icon.tooltip}</div>} side='left'>\n-              <div style={activeIcon === icon.id ? iconStyles.active : icon.disabled ? iconStyles.disabled : styles.icon}\n-                   onClick={() => {\n-                     if (icon.id !== 'dataDictionary') {\n-                       this.onIconClick(icon);\n-                     }\n-                   }}\n-                   onMouseOver={() => this.setState({tooltipId: i})}\n-                   onMouseOut={() => this.setState({tooltipId: undefined})}>\n-                {icon.id === 'dataDictionary'\n-                  ? <a href={dataDictionaryUrl} target='_blank'>\n-                      <FontAwesomeIcon icon={icon.faIcon} style={icon.style} />\n-                    </a>\n-                  : icon.faIcon === null\n-                    ? <img src={proIcons[icon.id]} style={icon.style} />\n-                    : <FontAwesomeIcon icon={icon.faIcon} style={icon.style} />\n-                }\n+          {icons(helpContent).map((icon, i) =>\n+            (!icon.page || icon.page === helpContent) &&", "originalCommit": "16315381063ed7acbac3af8a103e94ddd87bd46b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIxODE5Ng==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420218196", "bodyText": "forgot to put this in the last PR - so putting it here", "author": "als364", "createdAt": "2020-05-05T15:54:32Z", "path": "ui/src/app/pages/workspace/workspace-wrapper/component.ts", "diffHunk": "@@ -42,6 +42,9 @@ export class WorkspaceWrapperComponent implements OnInit, OnDestroy {\n   helpContent = 'data';\n   sidebarOpen = false;\n   notebookStyles = false;\n+  // The iframe we use to display the Jupyter notebook does something strange", "originalCommit": "16315381063ed7acbac3af8a103e94ddd87bd46b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "db1f7dc6f71a8c113c72dfce1a2fd4d3b80652d8", "url": "https://github.com/all-of-us/workbench/commit/db1f7dc6f71a8c113c72dfce1a2fd4d3b80652d8", "message": "straightening some things up", "committedDate": "2020-05-05T16:02:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIyOTk0OA==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420229948", "bodyText": "I'd add a type annotation for the function param at least. Even better, a one-line comment describing the 'helpContent' parameter and why it's needed.\n[optional] If you're game for as mass-rename, I think s/helpContent/helpContentKey/ in this file would help reduce confusion throughout, since AFAICT this is really a key into the foreign JSON file which contains the actual content.", "author": "gjuggler", "createdAt": "2020-05-05T16:10:21Z", "path": "ui/src/app/components/help-sidebar.tsx", "diffHunk": "@@ -164,14 +164,15 @@ const iconStyles = {\n   }\n };\n // TODO uncomment 'thunderstorm' icon when cluster configuration function is ready\n-const icons = [{\n-  id: 'help',\n-  disabled: false,\n-  faIcon: faInfoCircle,\n-  label: 'Help Icon',\n-  page: null,\n-  style: {fontSize: '21px'},\n-  tooltip: 'Help Tips',\n+const icons = (helpContent) => {", "originalCommit": "db1f7dc6f71a8c113c72dfce1a2fd4d3b80652d8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzNjM5OQ==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420236399", "bodyText": "[opt] Magic string code smell \u2013\u00a0for safety, it may help to break this out into a top-level constant, with a comment clarifying that it needs to match the strings used in app/app-routing-module.ts and assets/json/help-sidebar.json.\nI also would love to see a comment here clarifying why we switch to a folder icon when the \"notebookStorage\" help content is being displayed. Something to the effect of \"Because the 'notebookStorage' help text is about workspace storage, we switch the icon to be a folder instead of a question mark.\"\n(Unrelated comment: do we know of any technical reason why we are loading the help-sidebar content via a static JSON file rather than including it as an object within our Typescript code? The latter approach would add some level of type safety and would keep the content closer to the code which uses it.)", "author": "gjuggler", "createdAt": "2020-05-05T16:19:46Z", "path": "ui/src/app/components/help-sidebar.tsx", "diffHunk": "@@ -164,14 +164,15 @@ const iconStyles = {\n   }\n };\n // TODO uncomment 'thunderstorm' icon when cluster configuration function is ready\n-const icons = [{\n-  id: 'help',\n-  disabled: false,\n-  faIcon: faInfoCircle,\n-  label: 'Help Icon',\n-  page: null,\n-  style: {fontSize: '21px'},\n-  tooltip: 'Help Tips',\n+const icons = (helpContent) => {\n+  return [{\n+    id: 'help',\n+    disabled: false,\n+    faIcon: helpContent === 'notebookStorage' ? faFolderOpen : faInfoCircle,", "originalCommit": "db1f7dc6f71a8c113c72dfce1a2fd4d3b80652d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDM3Mzg5Mg==", "url": "https://github.com/all-of-us/workbench/pull/3539#discussion_r420373892", "bodyText": "I don't know of any technical reason why we're loading the content this way, aside from that the content is not really code. I'm sure there's some historical thing lost to the centuries.", "author": "als364", "createdAt": "2020-05-05T20:05:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzNjM5OQ=="}], "type": "inlineReview"}, {"oid": "86e49a2e8a7a70f049f4cb74f5edf18d24f80d75", "url": "https://github.com/all-of-us/workbench/commit/86e49a2e8a7a70f049f4cb74f5edf18d24f80d75", "message": "revisions", "committedDate": "2020-05-05T18:48:09Z", "type": "commit"}, {"oid": "1f799f0e2d750d6c945ac09be02fbcb13e7310a8", "url": "https://github.com/all-of-us/workbench/commit/1f799f0e2d750d6c945ac09be02fbcb13e7310a8", "message": "global rename of helpContent for clarity, small test", "committedDate": "2020-05-05T20:51:18Z", "type": "commit"}]}