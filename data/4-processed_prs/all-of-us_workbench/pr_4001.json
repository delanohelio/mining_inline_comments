{"pr_number": 4001, "pr_title": "[no ticket][risk=no] Puppeteer: Generic function for rename resource", "pr_createdAt": "2020-09-14T19:00:41Z", "pr_url": "https://github.com/all-of-us/workbench/pull/4001", "timeline": [{"oid": "64b20a930b65bfffb8a8823e8e4cfdd36d298f4e", "url": "https://github.com/all-of-us/workbench/commit/64b20a930b65bfffb8a8823e8e4cfdd36d298f4e", "message": "generic function for rename resource", "committedDate": "2020-09-14T18:45:21Z", "type": "commit"}, {"oid": "97d1909d6c0f7381db35948f44b59b392291a876", "url": "https://github.com/all-of-us/workbench/commit/97d1909d6c0f7381db35948f44b59b392291a876", "message": "additional refactor", "committedDate": "2020-09-14T19:06:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE2MTA3NQ==", "url": "https://github.com/all-of-us/workbench/pull/4001#discussion_r488161075", "bodyText": "Why return the new name if we're passing it in to begin with?", "author": "jaycarlton", "createdAt": "2020-09-14T19:11:46Z", "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -141,4 +146,69 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContent;\n   }\n \n+  /**\n+   * Rename Notebook, Concept Set, Dataset or Cohorts thru the Ellipsis menu located inside the Dataset Resource card.\n+   * @param {string} resourceName\n+   * @param {string} newResourceName", "originalCommit": "97d1909d6c0f7381db35948f44b59b392291a876", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODE2MTUzMA==", "url": "https://github.com/all-of-us/workbench/pull/4001#discussion_r488161530", "bodyText": "can this just be a map?", "author": "jaycarlton", "createdAt": "2020-09-14T19:12:31Z", "path": "e2e/app/page/workspace-base.ts", "diffHunk": "@@ -141,4 +146,69 @@ export default abstract class WorkspaceBase extends AuthenticatedPage {\n     return modalTextContent;\n   }\n \n+  /**\n+   * Rename Notebook, Concept Set, Dataset or Cohorts thru the Ellipsis menu located inside the Dataset Resource card.\n+   * @param {string} resourceName\n+   * @param {string} newResourceName\n+   */\n+  async renameResource(resourceName: string, newResourceName: string, resourceType: ResourceCard): Promise<string[]> {\n+    // Find the Data resource card that match the resource name.\n+    const resourceCard = new DataResourceCard(this.page);\n+    const card = await resourceCard.findCard(resourceName, resourceType);\n+    if (!card) {\n+      throw new Error(`Failed to find ${resourceType} card \"${resourceName}\"`);\n+    }\n+\n+    let menuLink: EllipsisMenuAction;\n+    switch (resourceType) {\n+      case ResourceCard.Dataset:\n+        menuLink = EllipsisMenuAction.RenameDataset;\n+        break;\n+      default:\n+        menuLink = EllipsisMenuAction.Rename;\n+        break;\n+    }\n+    await card.clickEllipsisAction(menuLink, {waitForNav: false});\n+\n+    const modal = new Modal(this.page);\n+    await modal.waitForLoad();\n+\n+    const modalTextContents = await modal.getTextContent();\n+\n+    // Type new name.\n+    const newNameTextbox = new Textbox(this.page, `${modal.getXpath()}//*[@id=\"new-name\"]`);\n+    await newNameTextbox.type(newResourceName);\n+\n+    // Type description.\n+    const descriptionTextarea = await Textarea.findByName(this.page, {containsText: 'Description:'}, modal);\n+    await descriptionTextarea.type(`Puppeteer automation test. Rename ${resourceName}.`);\n+\n+    let buttonLink;\n+    switch (resourceType) {", "originalCommit": "97d1909d6c0f7381db35948f44b59b392291a876", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "752b931ddb3fbc312b1d569cd9c661cb13985608", "url": "https://github.com/all-of-us/workbench/commit/752b931ddb3fbc312b1d569cd9c661cb13985608", "message": "delete notebook fix", "committedDate": "2020-09-14T20:29:16Z", "type": "commit"}]}