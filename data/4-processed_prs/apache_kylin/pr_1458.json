{"pr_number": 1458, "pr_title": "KYLIN-4793 In some Hadoop versions, kylin calcite reported error beca\u2026", "pr_createdAt": "2020-10-22T06:50:35Z", "pr_url": "https://github.com/apache/kylin/pull/1458", "timeline": [{"oid": "07d649a7b304c9d4a80bf80e52ae6a73cca0f4d9", "url": "https://github.com/apache/kylin/commit/07d649a7b304c9d4a80bf80e52ae6a73cca0f4d9", "message": "In some Hadoop versions, kylin calcite reported error because there is no guava14", "committedDate": "2020-10-23T02:52:28Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2NzQ4MA==", "url": "https://github.com/apache/kylin/pull/1458#discussion_r510567480", "bodyText": "It's better to check whether exists unzip command, if not, echo some error message and exit.", "author": "zzcclp", "createdAt": "2020-10-23T03:01:49Z", "path": "build/bin/kylin.sh", "diffHunk": "@@ -72,7 +72,14 @@ function retrieveDependency() {\n     KYLIN_SPARK_JARS_HOME=\"${KYLIN_HOME}/spark/jars\"\n     if [[ -d \"/usr/hdp/current/hdinsight-zookeeper\" && $hdp_version == \"2\"* ]]\n     then\n-       echo \"The current Hadoop environment is HDI3, will replace some jars package for ${KYLIN_HOME}/spark/jars\"\n+       echo \"The current Hadoop environment is HDI3, will remove ${KYLIN_HOME}/tomcat/webapps/kylin/WEB-INF/lib/guava-14.0.jar and replace some jars package for ${KYLIN_HOME}/spark/jars\"\n+       unzip ${KYLIN_HOME}/tomcat/webapps/kylin.war", "originalCommit": "07d649a7b304c9d4a80bf80e52ae6a73cca0f4d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2OTE5Nw==", "url": "https://github.com/apache/kylin/pull/1458#discussion_r510569197", "bodyText": "My negligence. I wiil use jar -xvf to decompression kylin.war.", "author": "zhangayqian", "createdAt": "2020-10-23T03:09:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2NzQ4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2NzYzOQ==", "url": "https://github.com/apache/kylin/pull/1458#discussion_r510567639", "bodyText": "IMO, don't need to re-war this package.", "author": "zzcclp", "createdAt": "2020-10-23T03:02:33Z", "path": "build/bin/kylin.sh", "diffHunk": "@@ -72,7 +72,14 @@ function retrieveDependency() {\n     KYLIN_SPARK_JARS_HOME=\"${KYLIN_HOME}/spark/jars\"\n     if [[ -d \"/usr/hdp/current/hdinsight-zookeeper\" && $hdp_version == \"2\"* ]]\n     then\n-       echo \"The current Hadoop environment is HDI3, will replace some jars package for ${KYLIN_HOME}/spark/jars\"\n+       echo \"The current Hadoop environment is HDI3, will remove ${KYLIN_HOME}/tomcat/webapps/kylin/WEB-INF/lib/guava-14.0.jar and replace some jars package for ${KYLIN_HOME}/spark/jars\"\n+       unzip ${KYLIN_HOME}/tomcat/webapps/kylin.war\n+       if [[ -f ${KYLIN_HOME}/tomcat/webapps/kylin/WEB-INF/lib/guava-14.0.jar ]]\n+       then\n+          rm -rf ${KYLIN_HOME}/tomcat/webapps/kylin/WEB-INF/lib/guava-14.0.jar\n+          jar -cvfM0 ${KYLIN_HOME}/tomcat/webapps/kylin.war ${KYLIN_HOME}/tomcat/webapps/kylin/", "originalCommit": "07d649a7b304c9d4a80bf80e52ae6a73cca0f4d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY2ODA2MA==", "url": "https://github.com/apache/kylin/pull/1458#discussion_r510668060", "bodyText": "I will delete kylin.war after decompression.", "author": "zhangayqian", "createdAt": "2020-10-23T06:44:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2NzYzOQ=="}], "type": "inlineReview"}, {"oid": "1ca01d25accec14b5a409ec698e37e889ccbf267", "url": "https://github.com/apache/kylin/commit/1ca01d25accec14b5a409ec698e37e889ccbf267", "message": "In some Hadoop versions, kylin calcite reported error because there is no guava14", "committedDate": "2020-10-23T06:43:15Z", "type": "commit"}, {"oid": "1ca01d25accec14b5a409ec698e37e889ccbf267", "url": "https://github.com/apache/kylin/commit/1ca01d25accec14b5a409ec698e37e889ccbf267", "message": "In some Hadoop versions, kylin calcite reported error because there is no guava14", "committedDate": "2020-10-23T06:43:15Z", "type": "forcePushed"}]}