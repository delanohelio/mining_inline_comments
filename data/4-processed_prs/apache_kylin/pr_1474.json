{"pr_number": 1474, "pr_title": "update system cube", "pr_createdAt": "2020-11-10T03:32:39Z", "pr_url": "https://github.com/apache/kylin/pull/1474", "timeline": [{"oid": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "url": "https://github.com/apache/kylin/commit/e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "message": "update system cube", "committedDate": "2020-11-10T02:26:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2NjA5OA==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520266098", "bodyText": "Should be job engine or query engine?", "author": "hit-lacus", "createdAt": "2020-11-10T03:39:19Z", "path": "website/_docs/tutorial/setup_systemcube.cn.md", "diffHunk": "@@ -356,17 +376,25 @@ sh ${KYLIN_HOME}/bin/kylin.sh org.apache.kylin.tool.job.CubeBuildingCLI --cube $\n   <tr>\n     <th colspan=\"2\">Dimension</th>\n   </tr>\n+  <tr>\n+    <td>HOST</td>\n+    <td>the host of server for query engine</td>", "originalCommit": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODE0MA==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520268140", "bodyText": "Is the link (#\u4ec0\u4e48\u662f\u7cfb\u7edf Cube) right ?", "author": "hit-lacus", "createdAt": "2020-11-10T03:46:54Z", "path": "website/_docs/tutorial/setup_systemcube.cn.md", "diffHunk": "@@ -7,16 +7,24 @@ permalink: /cn/docs/tutorial/setup_systemcube.html\n \n > \u81ea Apache Kylin v2.3.0 \u8d77\u6709\u6548\n \n-## \u4ec0\u4e48\u662f\u7cfb\u7edf Cube\n+\u672c\u8282\u4e3b\u8981\u5185\u5bb9\uff1a\n+\n+- [\u4ec0\u4e48\u662f\u7cfb\u7edf Cube](#\u4ec0\u4e48\u662f\u7cfb\u7edf Cube)\n+- [\u5982\u4f55\u5efa\u7acb\u7cfb\u7edf Cube](#\u5982\u4f55\u5efa\u7acb\u7cfb\u7edf Cube)\n+- [\u81ea\u52a8\u521b\u5efa\u7cfb\u7edf Cube](#\u81ea\u52a8\u521b\u5efa\u7cfb\u7edf Cube)\n+- [\u7cfb\u7edf Cube \u7684\u7ec6\u8282](#\u7cfb\u7edf Cube \u7684\u7ec6\u8282)\n+\n+## <span id=\"\u4ec0\u4e48\u662f\u7cfb\u7edf Cube\">\u4ec0\u4e48\u662f\u7cfb\u7edf Cube</span>\n \n \u4e3a\u4e86\u66f4\u597d\u7684\u652f\u6301\u81ea\u6211\u76d1\u63a7\uff0c\u5728\u7cfb\u7edf project \u4e0b\u521b\u5efa\u4e00\u7ec4\u7cfb\u7edf Cubes\uff0c\u53eb\u505a \"KYLIN_SYSTEM\"\u3002\u73b0\u5728\uff0c\u8fd9\u91cc\u6709\u4e94\u4e2a Cubes\u3002\u4e09\u4e2a\u7528\u4e8e\u67e5\u8be2\u6307\u6807\uff0c\"METRICS_QUERY\"\uff0c\"METRICS_QUERY_CUBE\"\uff0c\"METRICS_QUERY_RPC\"\u3002\u53e6\u5916\u4e24\u4e2a\u662f job \u6307\u6807\uff0c\"METRICS_JOB\"\uff0c\"METRICS_JOB_EXCEPTION\"\u3002\n \n-## \u5982\u4f55\u5efa\u7acb\u7cfb\u7edf Cube\n+## <span id=\"\u5982\u4f55\u5efa\u7acb\u7cfb\u7edf Cube\">\u5982\u4f55\u5efa\u7acb\u7cfb\u7edf Cube</span>\n \n-### \u51c6\u5907\n-\u5728 KYLIN_HOME \u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6 SCSinkTools.json\u3002\n+\u672c\u8282\u6211\u4eec\u4ecb\u7ecd\u624b\u52a8\u542f\u7528\u7cfb\u7edf Cube \u7684\u65b9\u6cd5\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u901a\u8fc7 shell \u811a\u672c\u81ea\u52a8\u521b\u5efa\u7cfb\u7edf Cube\uff0c\u8bf7\u53c2\u8003[\u81ea\u52a8\u521b\u5efa\u7cfb\u7edf Cube](#\u4ec0\u4e48\u662f\u7cfb\u7edf Cube)\u3002", "originalCommit": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODQ4NQ==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520268485", "bodyText": "It is wrong... and I will modify it", "author": "xuekaiqi", "createdAt": "2020-11-10T03:48:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODQxOQ==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520268419", "bodyText": "Why using chinese character?", "author": "hit-lacus", "createdAt": "2020-11-10T03:47:58Z", "path": "website/_docs/tutorial/setup_systemcube.md", "diffHunk": "@@ -383,56 +414,82 @@ This Cube is for collecting job metrics. The details are as follows:\n     <td></td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of DURATION</td>\n+    <td>MIN\uff0cMAX\uff0cSUM\uff0cPERCENTILE_APPROX of DURATION</td>\n     <td>the duration from a job start to finish</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of TABLE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of TABLE_SIZE</td>\n     <td>the size of data source in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of CUBE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of CUBE_SIZE</td>\n     <td>the size of created Cube segment in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of PER_BYTES_TIME_COST</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of PER_BYTES_TIME_COST</td>\n     <td>= DURATION / TABLE_SIZE</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of WAIT_RESOURCE_TIME</td>\n-    <td>a job may includes several MR(map reduce) jobs. Those MR jobs may wait because of lack of Hadoop resources.</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of WAIT_RESOURCE_TIME</td>\n+    <td>a job may includes serveral MR(map reduce) jobs. Those MR jobs may wait because of lack of Hadoop resources.</td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_distinct_columns</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_dictionary</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_inmem_cubing</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_hfile_convert</td>\n+    <td></td>\n   </tr>\n </table>\n \n+\n ### METRICS_JOB_EXCEPTION\n This Cube is for collecting job exception metrics. The details are as follows:\n \n <table>\n   <tr>\n     <th colspan=\"2\">Dimension</th>\n   </tr>\n+  <tr>\n+    <td>HOST</td>\n+    <td>the host of server for query engine</td>\n+  </tr>\n+  <tr>\n+    <td>KUSER</td>\n+    <td>the user who executes the query</td>\n+  </tr>\n   <tr>\n     <td>PROJECT</td>\n-    <td></td>\n+    <td>the project where the query executes</td>\n   </tr>\n   <tr>\n     <td>CUBE_NAME</td>\n-    <td></td>\n+    <td>the cube which the query hits.</td>\n   </tr>\n   <tr>\n     <td>JOB_TYPE</td>\n-    <td></td>\n+    <td>build, merge or optimize</td>\n   </tr>\n   <tr>\n     <td>CUBING_TYPE</td>\n-    <td></td>\n+    <td>in kylin\uff0cthere are two cubing algorithms\uff0cLayered & Fast(InMemory)</td>\n   </tr>\n   <tr>\n     <td>EXCEPTION</td>\n-    <td>when running a job, exceptions may happen. It's for classifying different exception types</td>\n+    <td>when running a job\uff0cexceptions may happen. It's for classifying different exception types</td>", "originalCommit": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODUyMA==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520268520", "bodyText": "Correct here.", "author": "hit-lacus", "createdAt": "2020-11-10T03:48:24Z", "path": "website/_docs/tutorial/setup_systemcube.md", "diffHunk": "@@ -383,56 +414,82 @@ This Cube is for collecting job metrics. The details are as follows:\n     <td></td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of DURATION</td>\n+    <td>MIN\uff0cMAX\uff0cSUM\uff0cPERCENTILE_APPROX of DURATION</td>\n     <td>the duration from a job start to finish</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of TABLE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of TABLE_SIZE</td>\n     <td>the size of data source in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of CUBE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of CUBE_SIZE</td>\n     <td>the size of created Cube segment in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of PER_BYTES_TIME_COST</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of PER_BYTES_TIME_COST</td>\n     <td>= DURATION / TABLE_SIZE</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of WAIT_RESOURCE_TIME</td>\n-    <td>a job may includes several MR(map reduce) jobs. Those MR jobs may wait because of lack of Hadoop resources.</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of WAIT_RESOURCE_TIME</td>\n+    <td>a job may includes serveral MR(map reduce) jobs. Those MR jobs may wait because of lack of Hadoop resources.</td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_distinct_columns</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_dictionary</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_inmem_cubing</td>\n+    <td></td>\n+  </tr>\n+  <tr>\n+    <td>MAX\uff0cSUM of step_duration_hfile_convert</td>\n+    <td></td>\n   </tr>\n </table>\n \n+\n ### METRICS_JOB_EXCEPTION\n This Cube is for collecting job exception metrics. The details are as follows:\n \n <table>\n   <tr>\n     <th colspan=\"2\">Dimension</th>\n   </tr>\n+  <tr>\n+    <td>HOST</td>\n+    <td>the host of server for query engine</td>", "originalCommit": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDI2ODY3Mg==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520268672", "bodyText": "Not use chinese character please.", "author": "hit-lacus", "createdAt": "2020-11-10T03:49:03Z", "path": "website/_docs/tutorial/setup_systemcube.md", "diffHunk": "@@ -383,56 +414,82 @@ This Cube is for collecting job metrics. The details are as follows:\n     <td></td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of DURATION</td>\n+    <td>MIN\uff0cMAX\uff0cSUM\uff0cPERCENTILE_APPROX of DURATION</td>\n     <td>the duration from a job start to finish</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of TABLE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of TABLE_SIZE</td>\n     <td>the size of data source in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of CUBE_SIZE</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of CUBE_SIZE</td>\n     <td>the size of created Cube segment in bytes</td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of PER_BYTES_TIME_COST</td>\n+    <td>MIN\uff0cMAX\uff0cSUM of PER_BYTES_TIME_COST</td>", "originalCommit": "e66ff0282f9cd8f08e48b0690e0c0de645d6d052", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMyOTY1Ng==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520329656", "bodyText": "Is it correct?", "author": "hit-lacus", "createdAt": "2020-11-10T06:51:13Z", "path": "website/_docs/tutorial/setup_systemcube.md", "diffHunk": "@@ -189,19 +202,19 @@ This Cube is for collecting query metrics at the highest level. The details are\n     <td></td>\n   </tr>\n   <tr>\n-    <td>MIN, MAX, SUM of QUERY_TIME_COST</td>\n+    <td>MIN\uff0cMAX\uff0cSUM\uff0cPERCENTILE_APPROX of QUERY_TIME_COST</td>", "originalCommit": "6db592614a077c260a402b656344a695d1a0a7ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMyOTk2Mw==", "url": "https://github.com/apache/kylin/pull/1474#discussion_r520329963", "bodyText": "\uff0c or ,", "author": "hit-lacus", "createdAt": "2020-11-10T06:52:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDMyOTY1Ng=="}], "type": "inlineReview"}, {"oid": "45d2dc099662fa98ee4ed909679ce6b72e697590", "url": "https://github.com/apache/kylin/commit/45d2dc099662fa98ee4ed909679ce6b72e697590", "message": "a little update", "committedDate": "2020-11-10T07:24:17Z", "type": "commit"}]}