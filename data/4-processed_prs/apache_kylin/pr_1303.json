{"pr_number": 1303, "pr_title": "KYLIN-4618 Upgrade kylin docker image for kylin 3.1.0", "pr_createdAt": "2020-07-03T05:07:53Z", "pr_url": "https://github.com/apache/kylin/pull/1303", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MTkyMQ==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449841921", "bodyText": "Wht should we add this line?", "author": "hit-lacus", "createdAt": "2020-07-05T06:52:52Z", "path": "docker/Dockerfile_hadoop", "diffHunk": "@@ -91,6 +89,7 @@ RUN wget https://archive.apache.org/dist/spark/spark-$SPARK_VERSION/spark-$SPARK\n     && cp $HIVE_HOME/conf/hive-site.xml $SPARK_HOME/conf \\\n     && cp $SPARK_HOME/yarn/*.jar $HADOOP_HOME/share/hadoop/yarn/lib\n RUN cp $HIVE_HOME/lib/mysql-connector-java-5.1.24.jar $SPARK_HOME/jars\n+RUN cp $HBASE_HOME/lib/hbase-protocol-1.1.2.jar $SPARK_HOME/jars", "originalCommit": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0MTU4Nw==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449941587", "bodyText": "when build with spark, it needs this hbase-protocol.jar, otherwise it throws 'NoClassDefFoundError: org/apache/hadoop/hbase/protobuf/generated/HFileProtos'.", "author": "zzcclp", "createdAt": "2020-07-06T01:07:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MTkyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449842229", "bodyText": "I may not accpect this change from archive to \"mirror\", older version is not accessible in mirror, like 2.5.0.", "author": "hit-lacus", "createdAt": "2020-07-05T06:56:38Z", "path": "docker/Dockerfile", "diffHunk": "@@ -18,17 +18,18 @@\n # Docker image for apache kylin, based on the Hadoop image\n FROM hadoop2.7-all-in-one\n \n-ENV KYLIN_VERSION 3.0.1\n+ENV KYLIN_VERSION 3.1.0\n ENV KYLIN_HOME /home/admin/apache-kylin-$KYLIN_VERSION-bin-hbase1x\n \n # Download released Kylin\n-RUN wget https://archive.apache.org/dist/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\\n+RUN wget https://downloads.apache.org/kylin/apache-kylin-$KYLIN_VERSION/apache-kylin-$KYLIN_VERSION-bin-hbase1x.tar.gz \\", "originalCommit": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0MjYwMw==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449942603", "bodyText": "it can't download kylin 3.1.0 from https://archive.apache.org at that time, so I changed to \"mirror\".", "author": "zzcclp", "createdAt": "2020-07-06T01:14:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk5NTY1Mw==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449995653", "bodyText": "Done", "author": "zzcclp", "createdAt": "2020-07-06T05:48:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjIyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjM2Mw==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449842363", "bodyText": "Is this KafkaProduer cause any problem?", "author": "hit-lacus", "createdAt": "2020-07-05T06:58:06Z", "path": "docker/entrypoint.sh", "diffHunk": "@@ -82,7 +79,7 @@ then\n     $KAFKA_HOME/bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 3 --topic kylin_streaming_topic\n fi\n \n-nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &\n+# nohup $KYLIN_HOME/bin/kylin.sh org.apache.kylin.source.kafka.util.KafkaSampleProducer --topic kylin_streaming_topic --broker localhost:9092 > /dev/null 2>&1 > /tmp/kafka-sample.log &", "originalCommit": "f45d313cdf5d349cff3f4f2e5177a8cb7aa7a746", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTk0Mzg5Mw==", "url": "https://github.com/apache/kylin/pull/1303#discussion_r449943893", "bodyText": "This command will send data to kafka continuously, which will generate too much data. I think it can be started manually.", "author": "zzcclp", "createdAt": "2020-07-06T01:23:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTg0MjM2Mw=="}], "type": "inlineReview"}, {"oid": "ed7fc460dfbf794898315ddb81342e572969b6f1", "url": "https://github.com/apache/kylin/commit/ed7fc460dfbf794898315ddb81342e572969b6f1", "message": "KYLIN-4618 Upgrade kylin docker image for kylin 3.1.0\n\nUpgrade kylin docker image for kylin 3.1.0", "committedDate": "2020-07-06T05:46:23Z", "type": "commit"}, {"oid": "ed7fc460dfbf794898315ddb81342e572969b6f1", "url": "https://github.com/apache/kylin/commit/ed7fc460dfbf794898315ddb81342e572969b6f1", "message": "KYLIN-4618 Upgrade kylin docker image for kylin 3.1.0\n\nUpgrade kylin docker image for kylin 3.1.0", "committedDate": "2020-07-06T05:46:23Z", "type": "forcePushed"}]}