{"pr_number": 373, "pr_title": "Support YouTube's new continuations", "pr_createdAt": "2020-07-26T08:04:14Z", "pr_url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/373", "timeline": [{"oid": "4c987a530292bc4b5a43540efcdf4b262c19de0d", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/4c987a530292bc4b5a43540efcdf4b262c19de0d", "message": "Support YouTube's new continuations for search", "committedDate": "2020-07-26T08:01:03Z", "type": "commit"}, {"oid": "f345f667e2bd7306a1c54df1c7cf26d26707067a", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/f345f667e2bd7306a1c54df1c7cf26d26707067a", "message": "Extract YouTube's key", "committedDate": "2020-07-26T10:01:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUwOTg1Ng==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/373#discussion_r460509856", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static void getClientVersionAndKey() throws IOException, ExtractionException {\n          \n          \n            \n                private static void extractClientVersionAndKey() throws IOException, ExtractionException {", "author": "TobiGr", "createdAt": "2020-07-26T10:34:40Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/YoutubeParsingHelper.java", "diffHunk": "@@ -214,39 +216,31 @@ public static boolean isHardcodedClientVersionValid() throws IOException, Extrac\n         return response.length() > 50; // ensure to have a valid response\n     }\n \n-    /**\n-     * Get the client version from a page\n-     * @return\n-     * @throws ParsingException\n-     */\n-    public static String getClientVersion() throws IOException, ExtractionException {\n-        if (!isNullOrEmpty(clientVersion)) return clientVersion;\n-        if (isHardcodedClientVersionValid()) return clientVersion = HARDCODED_CLIENT_VERSION;\n-\n+    private static void getClientVersionAndKey() throws IOException, ExtractionException {", "originalCommit": "f345f667e2bd7306a1c54df1c7cf26d26707067a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUxMTE4Nw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/373#discussion_r460511187", "bodyText": "should be renamed, because this is not a getter anymore.", "author": "TobiGr", "createdAt": "2020-07-26T10:48:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUwOTg1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUxMTA0MQ==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/373#discussion_r460511041", "bodyText": "Add check if clientVersion was already extracted.", "author": "TobiGr", "createdAt": "2020-07-26T10:46:35Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/YoutubeParsingHelper.java", "diffHunk": "@@ -255,26 +249,54 @@ public static String getClientVersion() throws IOException, ExtractionException\n         }\n \n         String contextClientVersion;", "originalCommit": "f345f667e2bd7306a1c54df1c7cf26d26707067a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDUxMTA5OA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/373#discussion_r460511098", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if (shortClientVersion != null) {\n          \n          \n            \n                    if (clientVersion != null && shortClientVersion != null) {", "author": "TobiGr", "createdAt": "2020-07-26T10:47:04Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/YoutubeParsingHelper.java", "diffHunk": "@@ -255,26 +249,54 @@ public static String getClientVersion() throws IOException, ExtractionException\n         }\n \n         String contextClientVersion;\n-        String[] patterns = {\n+        final String[] patterns = {\n                 \"INNERTUBE_CONTEXT_CLIENT_VERSION\\\":\\\"([0-9\\\\.]+?)\\\"\",\n                 \"innertube_context_client_version\\\":\\\"([0-9\\\\.]+?)\\\"\",\n                 \"client.version=([0-9\\\\.]+)\"\n         };\n-        for (String pattern : patterns) {\n+        for (final String pattern : patterns) {\n             try {\n                 contextClientVersion = Parser.matchGroup1(pattern, html);\n                 if (!isNullOrEmpty(contextClientVersion)) {\n-                    return clientVersion = contextClientVersion;\n+                    clientVersion = contextClientVersion;\n                 }\n-            } catch (Exception ignored) {\n-            }\n+            } catch (Parser.RegexException ignored) { }\n         }\n \n         if (shortClientVersion != null) {", "originalCommit": "f345f667e2bd7306a1c54df1c7cf26d26707067a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "667dce034c1aa5a2378b2e4b5a1a9e2dc67c14f5", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/667dce034c1aa5a2378b2e4b5a1a9e2dc67c14f5", "message": "Only use fallback methods for clientVersion when clientVersion hasn't been successfully extracted yet", "committedDate": "2020-07-26T11:14:25Z", "type": "commit"}]}