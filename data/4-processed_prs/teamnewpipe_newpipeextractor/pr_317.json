{"pr_number": 317, "pr_title": "Use our fork of nanojson", "pr_createdAt": "2020-04-16T17:34:41Z", "pr_url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc4ODY1MA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317#discussion_r409788650", "bodyText": "unused", "author": "TobiGr", "createdAt": "2020-04-16T19:12:34Z", "path": "extractor/src/test/java/org/schabi/newpipe/extractor/services/youtube/stream/YoutubeStreamExtractorDefaultTest.java", "diffHunk": "@@ -22,6 +22,7 @@\n import java.text.SimpleDateFormat;\n import java.util.Calendar;\n import java.util.List;\n+import java.util.concurrent.TimeUnit;", "originalCommit": "5e15de9cac8dbc95eff8244abb14f489222a95fc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc5MDQ1OA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317#discussion_r409790458", "bodyText": "Yup, I used that for getting JSON that nanojson fails to parse without spamming YouTube's servers.\nThis is why we need Checkstyle for NewPipeExtractor as well\u2026", "author": "wb9688", "createdAt": "2020-04-16T19:15:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTc4ODY1MA=="}], "type": "inlineReview"}, {"oid": "979c5a75029275ebdd206db726d690a11b9d1db0", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/979c5a75029275ebdd206db726d690a11b9d1db0", "message": "Use our fork of nanojson", "committedDate": "2020-04-17T17:36:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk2NzQ4MA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317#discussion_r410967480", "bodyText": "I don't understand that change.\nApart from that, I don't see how name can be null. I think getTextFromObject() can either return a String or throw a ParsingException.\nSite note: unlike before, getTextFromObject() does not throw an NPE when the JsonObject does not have the expected fields, but returns an empty String, this might be worth of a JDoc comment.", "author": "TobiGr", "createdAt": "2020-04-19T18:54:27Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeStreamInfoItemExtractor.java", "diffHunk": "@@ -98,7 +93,7 @@ public String getUrl() throws ParsingException {\n     @Override\n     public String getName() throws ParsingException {\n         String name = getTextFromObject(videoInfo.getObject(\"title\"));\n-        if (name != null && !name.isEmpty()) return name;\n+        if (name == null || !name.isEmpty()) return name;", "originalCommit": "979c5a75029275ebdd206db726d690a11b9d1db0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk3MTkxMA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317#discussion_r410971910", "bodyText": "This change is indeed an error, and name could indeed not be null. There are probably other usages of getTextFromObject() where that check could be removed as well. I'll do that tomorrow.", "author": "wb9688", "createdAt": "2020-04-19T19:19:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk2NzQ4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk2ODgzOA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/317#discussion_r410968838", "bodyText": "getUrlFromNavigationEndpoint(navigationEndpoint) returns null when navigationEndpoint is an empty Object or YouTube changed something in their JSON. In this case, we could not get the uploader URL and should throw a ParsingException. So please keep the null check for the URL.", "author": "TobiGr", "createdAt": "2020-04-19T19:02:53Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/extractors/YoutubeMusicSearchExtractor.java", "diffHunk": "@@ -301,16 +294,7 @@ public String getUploaderUrl() throws ParsingException {\n                                         .getObject(1).getObject(\"musicResponsiveListItemFlexColumnRenderer\")\n                                         .getObject(\"text\").getArray(\"runs\").getObject(0).getObject(\"navigationEndpoint\");\n \n-                                if (navigationEndpoint == null) {\n-                                    return null;\n-                                }\n-\n-                                final String url = getUrlFromNavigationEndpoint(navigationEndpoint);\n-\n-                                if (url != null && !url.isEmpty()) {\n-                                    return url;\n-                                }\n-                                throw new ParsingException(\"Could not get uploader url\");\n+                                return getUrlFromNavigationEndpoint(navigationEndpoint);", "originalCommit": "979c5a75029275ebdd206db726d690a11b9d1db0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b51699a20e6937301e7c2891bd9b383c677d2a42", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/b51699a20e6937301e7c2891bd9b383c677d2a42", "message": "Implement @TobiGr's suggestions", "committedDate": "2020-04-20T12:27:33Z", "type": "commit"}]}