{"pr_number": 394, "pr_title": "Fix issue #4213:  trim the last char of the URL if it is a closing parenthesis", "pr_createdAt": "2020-09-03T00:31:56Z", "pr_url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MTU0MA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484071540", "bodyText": "Return null instead of an empty string, if you found nothing (also remember to add @Nullable to the function)", "author": "Stypox", "createdAt": "2020-09-06T13:40:33Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);\n+            return m.find() ? m.group(1) : \"\";", "originalCommit": "31129682af923705b99f4c173114b8d5d72a9e54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MTk1Nw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484071957", "bodyText": "We might consider removing isId() altogether and replacing\nif (isId()) {\n    return extractId()\n}\nwith\nfinal String extractedId = extractId(id);\nif (extractedId != null) {\n    return extractedId;\n}\nwhich does one regex comparison less, and is even clearer imo", "author": "Stypox", "createdAt": "2020-09-06T13:44:16Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);\n+            return m.find() ? m.group(1) : \"\";\n+        }\n+        return \"\";\n+    }\n+\n     private static boolean isId(@Nullable String id) {", "originalCommit": "31129682af923705b99f4c173114b8d5d72a9e54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDA3MjExMw==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r484072113", "bodyText": "Move Pattern.compile(\"([a-zA-Z0-9_-]{11})\") to a public static final class field, to prevent compiling it every time.", "author": "Stypox", "createdAt": "2020-09-06T13:45:36Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +48,25 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n+    private static String extractId(@Nullable String id) {\n+        if (id != null) {\n+            Matcher m = Pattern.compile(\"([a-zA-Z0-9_-]{11})\").matcher(id);", "originalCommit": "31129682af923705b99f4c173114b8d5d72a9e54", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTA5NjQxNA==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r485096414", "bodyText": "Merge this and the above line into\nfinal String possiblyId = extractId(schemeSpecificPart.substring(2));", "author": "Stypox", "createdAt": "2020-09-08T17:52:03Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -82,8 +91,9 @@ public String getId(String urlString) throws ParsingException, IllegalArgumentEx\n                 String schemeSpecificPart = uri.getSchemeSpecificPart();\n                 if (schemeSpecificPart.startsWith(\"//\")) {\n                     final String possiblyId = schemeSpecificPart.substring(2);\n-                    if (isId(possiblyId)) {\n-                        return possiblyId;\n+                    final String extractedId = extractId(possiblyId);", "originalCommit": "29cd72a749bb11bac31ceeeb9a05792175347960", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDcxMTgxMg==", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/pull/394#discussion_r510711812", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);\n          \n          \n            \n                        final Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);", "author": "TobiGr", "createdAt": "2020-10-23T08:13:20Z", "path": "extractor/src/main/java/org/schabi/newpipe/extractor/services/youtube/linkHandler/YoutubeStreamLinkHandlerFactory.java", "diffHunk": "@@ -46,13 +49,19 @@ public static YoutubeStreamLinkHandlerFactory getInstance() {\n         return instance;\n     }\n \n-    private static boolean isId(@Nullable String id) {\n-        return id != null && id.matches(\"[a-zA-Z0-9_-]{11}\");\n+    @Nullable\n+    private static String extractId(@Nullable final String id) {\n+        if (id != null) {\n+            Matcher m = YOUTUBE_VIDEO_ID_REGEX_PATTERN.matcher(id);", "originalCommit": "995c167fcbca185a86a34d7ed74c9fdb1c0be91e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "366ed7152346ab3e514f3fc71f9e656f7f722a88", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/366ed7152346ab3e514f3fc71f9e656f7f722a88", "message": "[YouTube] Ignore leading characters in video id", "committedDate": "2020-10-25T13:34:20Z", "type": "commit"}, {"oid": "366ed7152346ab3e514f3fc71f9e656f7f722a88", "url": "https://github.com/TeamNewPipe/NewPipeExtractor/commit/366ed7152346ab3e514f3fc71f9e656f7f722a88", "message": "[YouTube] Ignore leading characters in video id", "committedDate": "2020-10-25T13:34:20Z", "type": "forcePushed"}]}