{"pr_number": 1099, "pr_title": "KeyVault: filter out disabled secret while listing secret versions", "pr_createdAt": "2020-03-13T06:14:15Z", "pr_url": "https://github.com/Azure/azure-libraries-for-java/pull/1099", "timeline": [{"oid": "7ce34c5b86214faf234b169a6a345f7ce00e089e", "url": "https://github.com/Azure/azure-libraries-for-java/commit/7ce34c5b86214faf234b169a6a345f7ce00e089e", "message": "KeyVault: filter out disabled secret while listing secret versions", "committedDate": "2020-03-13T06:08:06Z", "type": "commit"}, {"oid": "d68b9341b450c56dc3cdbcd01d383e275c4bcb59", "url": "https://github.com/Azure/azure-libraries-for-java/commit/d68b9341b450c56dc3cdbcd01d383e275c4bcb59", "message": "KeyVault: revert the filter logic and list all versions with disabled included", "committedDate": "2020-03-13T08:38:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExODM1OA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1099#discussion_r392118358", "bodyText": "What would be the difference if we create SecretBundle this way?", "author": "weidongxu-microsoft", "createdAt": "2020-03-13T09:34:33Z", "path": "azure-mgmt-keyvault/src/main/java/com/microsoft/azure/management/keyvault/implementation/SecretImpl.java", "diffHunk": "@@ -97,7 +97,16 @@ public boolean managed() {\n \n                     @Override\n                     protected ServiceFuture<SecretBundle> callAsync() {\n-                        return vault.client().getSecretAsync(secretItem.identifier().identifier(), null);\n+                        if (secretItem.attributes().enabled()) {\n+                            return vault.client().getSecretAsync(secretItem.identifier().identifier(), null);\n+                        } else {\n+                            SecretBundle secretBundle = new SecretBundle()\n+                                    .withId(secretItem.id())\n+                                    .withAttributes(secretItem.attributes())\n+                                    .withContentType(secretItem.contentType())\n+                                    .withTags(secretItem.tags());\n+                            return ServiceFuture.fromBody(Observable.just(secretBundle), null);", "originalCommit": "d68b9341b450c56dc3cdbcd01d383e275c4bcb59", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyMDQwNQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1099#discussion_r392120405", "bodyText": "The property secretBundle.value() will be NULL. For the enabled secrets, value will be returned by server side.", "author": "xseeseesee", "createdAt": "2020-03-13T09:38:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExODM1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyMjg4Ng==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1099#discussion_r392122886", "bodyText": "That probably is acceptable. From our API user can know it is disabled, correct?", "author": "weidongxu-microsoft", "createdAt": "2020-03-13T09:43:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExODM1OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjEyNTc1Mg==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/1099#discussion_r392125752", "bodyText": "I update the comments at Secret interface. Meanwhile, the status of enabled/disabled can be found via secret.attributes().enabled().", "author": "xseeseesee", "createdAt": "2020-03-13T09:49:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExODM1OA=="}], "type": "inlineReview"}, {"oid": "28eb48c2ad7a8ef9d172e02c2594941b6be4f528", "url": "https://github.com/Azure/azure-libraries-for-java/commit/28eb48c2ad7a8ef9d172e02c2594941b6be4f528", "message": "KeyVault: remove unused import", "committedDate": "2020-03-18T10:43:49Z", "type": "commit"}]}