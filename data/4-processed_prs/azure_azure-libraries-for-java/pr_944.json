{"pr_number": 944, "pr_title": "vnext update gulp", "pr_createdAt": "2020-01-02T07:33:38Z", "pr_url": "https://github.com/Azure/azure-libraries-for-java/pull/944", "timeline": [{"oid": "28a04171e9b95c6d846fdf6b6e0aab61bde7b2ea", "url": "https://github.com/Azure/azure-libraries-for-java/commit/28a04171e9b95c6d846fdf6b6e0aab61bde7b2ea", "message": "update gulp to use autorest-beta", "committedDate": "2020-01-02T07:31:16Z", "type": "commit"}, {"oid": "29a2cf92db290a33f6bb15bd9fbd902a83bbfee5", "url": "https://github.com/Azure/azure-libraries-for-java/commit/29a2cf92db290a33f6bb15bd9fbd902a83bbfee5", "message": "fix import", "committedDate": "2020-01-02T07:32:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5MzA4NQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/944#discussion_r362393085", "bodyText": "Need update package.json", "author": "yaohaizh", "createdAt": "2020-01-02T08:06:35Z", "path": "gulpfile.js", "diffHunk": "@@ -67,7 +67,7 @@ var autoRestExe;\n gulp.task('codegen', function(cb) {\n     if (autoRestVersion.match(/[0-9]+\\.[0-9]+\\.[0-9]+.*/) ||\n         autoRestVersion == 'latest') {\n-            autoRestExe = 'autorest ---version=' + autoRestVersion;\n+            autoRestExe = 'autorest-beta ---version=' + autoRestVersion;", "originalCommit": "29a2cf92db290a33f6bb15bd9fbd902a83bbfee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5MzU1Ng==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/944#discussion_r362393556", "bodyText": "I think package.json is not needed. It just calls autorest-beta on exec. No dependency on nodejs.\nAnd of course, one need to install @autorest/autorest before this script.", "author": "weidongxu-microsoft", "createdAt": "2020-01-02T08:09:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5MzA4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5MzE4NA==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/944#discussion_r362393184", "bodyText": "use path.join for multi platform", "author": "yaohaizh", "createdAt": "2020-01-02T08:07:08Z", "path": "gulpfile.js", "diffHunk": "@@ -107,8 +107,13 @@ var codegen = function(project, cb) {\n         deleteFolderRecursive(sourcesToDelete);\n     }\n \n-    console.log('Generating \"' + project + '\" from spec file ' + specRoot + '/' + mappings[project].source);\n-    var generator = '--fluent';\n+    let readmeFile = specRoot + '/' + mappings[project].source;", "originalCommit": "29a2cf92db290a33f6bb15bd9fbd902a83bbfee5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5NDIzMQ==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/944#discussion_r362394231", "bodyText": "There were a comment nearby: \"path.join won't work if specRoot is a URL\", hence it uses '/'.\nFor now the dirty approach would need the spec on local filesystem to work. But still keep it this way. Some day we might no longer need this hacking and re-enable the URL.", "author": "weidongxu-microsoft", "createdAt": "2020-01-02T08:13:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5MzE4NA=="}], "type": "inlineReview"}, {"oid": "1e66fa6ab8f20a6031fa491f8a48aa33985f575d", "url": "https://github.com/Azure/azure-libraries-for-java/commit/1e66fa6ab8f20a6031fa491f8a48aa33985f575d", "message": "update comment", "committedDate": "2020-01-02T08:10:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjM5NzA3Mg==", "url": "https://github.com/Azure/azure-libraries-for-java/pull/944#discussion_r362397072", "bodyText": "const\nIf using const/let,  Try const always, then let if need change the target reference. Should not use var in the case.", "author": "yaohaizh", "createdAt": "2020-01-02T08:26:49Z", "path": "gulpfile.js", "diffHunk": "@@ -144,6 +150,42 @@ var codegen = function(project, cb) {\n     return execa(cmd, [], { shell: true, stdio: \"inherit\" });\n };\n \n+var findTag = function(stringContainsTag) {\n+    let regex = new RegExp('--tag=(\\\\S+)');", "originalCommit": "29a2cf92db290a33f6bb15bd9fbd902a83bbfee5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8bf36d826ad834800c593310290a71ae391303d2", "url": "https://github.com/Azure/azure-libraries-for-java/commit/8bf36d826ad834800c593310290a71ae391303d2", "message": "use const whenever possible", "committedDate": "2020-01-02T08:35:58Z", "type": "commit"}]}