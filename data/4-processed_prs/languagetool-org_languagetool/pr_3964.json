{"pr_number": 3964, "pr_title": "[en] new rule to remove some false positives for Barca \u2192 Bar\u00e7a", "pr_createdAt": "2020-12-03T14:21:45Z", "pr_url": "https://github.com/languagetool-org/languagetool/pull/3964", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEyMDk3Ng==", "url": "https://github.com/languagetool-org/languagetool/pull/3964#discussion_r536120976", "bodyText": "This rule still gives two FPs in the Rule Editor:\n\nIf the latter, then Hannibal and his brothers also bore the name \"Barca\".\nBarca (, ) was the Semitic surname of his aristocratic family, meaning \"shining\" or \"lightning\".\n\nThe former can be fixed by adding skip=\"-1\" to the first token. The latter is given away by the word \"surname\" afterwards. I think this might be a case for Ruud's trick.", "author": "udomai", "createdAt": "2020-12-04T14:02:58Z", "path": "languagetool-language-modules/en/src/main/resources/org/languagetool/rules/en/grammar.xml", "diffHunk": "@@ -35196,6 +35196,17 @@ USA\n             <message>Did you mean <suggestion><match no=\"1\" regexp_match=\"riel\" regexp_replace=\"rial\" /></suggestion> (= substance) or <suggestion><match no=\"1\" regexp_match=\"eriel\" regexp_replace=\"\u00e9riel\" /></suggestion> (= military equipment)?</message>\n             <example correction=\"materials|mat\u00e9riels\">I needed more electronic <marker>materiels</marker> to build a fully-functional machine.</example>\n         </rule>\n+        <rule id=\"BARCA_DIACRITIC\" name=\"Barca or Bar\u00e7a\">", "originalCommit": "faa09515d336b852db862af38ab341fe7bbc57d5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzI4NzYyNg==", "url": "https://github.com/languagetool-org/languagetool/pull/3964#discussion_r537287626", "bodyText": "Thanks for the pointer! Does the new antipattern suffice, or is it redundant to except the same keywords in two places?", "author": "hftf", "createdAt": "2020-12-07T07:36:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEyMDk3Ng=="}], "type": "inlineReview"}, {"oid": "40f2fa8c5c14a675835c64f4662e865d718becad", "url": "https://github.com/languagetool-org/languagetool/commit/40f2fa8c5c14a675835c64f4662e865d718becad", "message": "[en] new rule to remove EN_DIACRITICS_REPLACE false positives for Barca diacritic", "committedDate": "2020-12-07T07:28:13Z", "type": "commit"}, {"oid": "2520c6cf10c5cf6ab7788c05002f06153a282b8f", "url": "https://github.com/languagetool-org/languagetool/commit/2520c6cf10c5cf6ab7788c05002f06153a282b8f", "message": "[en] fix false positive for BARCA_DIACRITIC using Ruud's collocation trick", "committedDate": "2020-12-07T07:28:14Z", "type": "commit"}, {"oid": "2520c6cf10c5cf6ab7788c05002f06153a282b8f", "url": "https://github.com/languagetool-org/languagetool/commit/2520c6cf10c5cf6ab7788c05002f06153a282b8f", "message": "[en] fix false positive for BARCA_DIACRITIC using Ruud's collocation trick", "committedDate": "2020-12-07T07:28:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU1NDE2MQ==", "url": "https://github.com/languagetool-org/languagetool/pull/3964#discussion_r537554161", "bodyText": "For some reason, there are three lines that are not being shown here. The rule editor shows no more FPs if this part becomes:\n<token>barca\n                    <exception scope=\"previous\" regexp=\"yes\">da|la|cognomen|Hannibal|Hamilcar|Hasdrubal|Latin</exception>\n                </token>\n            </pattern>\n\nNotice the scope=\"previous\" and the added Latin.", "author": "udomai", "createdAt": "2020-12-07T14:35:14Z", "path": "languagetool-language-modules/en/src/main/resources/org/languagetool/rules/en/grammar.xml", "diffHunk": "@@ -35450,6 +35450,11 @@ USA\n             <example correction=\"materials|mat\u00e9riels\">I needed more electronic <marker>materiels</marker> to build a fully-functional machine.</example>\n         </rule>\n         <rule id=\"BARCA_DIACRITIC\" name=\"Barca or Bar\u00e7a\">\n+            <antipattern>\n+                <token skip=\"-1\" postag=\"SENT_START\"/>\n+                <token skip=\"-1\" regexp=\"yes\">surname|cognomen|Hannibal|Hamilcar|Hasdrubal</token>\n+                <token postag=\"SENT_END\"/>\n+            </antipattern>\n             <pattern>\n                 <token>", "originalCommit": "2520c6cf10c5cf6ab7788c05002f06153a282b8f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzU1Njk5Mg==", "url": "https://github.com/languagetool-org/languagetool/pull/3964#discussion_r537556992", "bodyText": "I think this is an interesting variant on Ruud's method. I think it makes sense that some elements are forbidden in the entire sentence (surname and cognomen). For the first names and Latin, it should be sufficient to exclude them directly before Barca. The word \"Latin\" is especially likely to appear in a sentence where one's actually talking about Bar\u00e7a.", "author": "udomai", "createdAt": "2020-12-07T14:39:01Z", "path": "languagetool-language-modules/en/src/main/resources/org/languagetool/rules/en/grammar.xml", "diffHunk": "@@ -35450,6 +35450,11 @@ USA\n             <example correction=\"materials|mat\u00e9riels\">I needed more electronic <marker>materiels</marker> to build a fully-functional machine.</example>\n         </rule>\n         <rule id=\"BARCA_DIACRITIC\" name=\"Barca or Bar\u00e7a\">\n+            <antipattern>\n+                <token skip=\"-1\" postag=\"SENT_START\"/>\n+                <token skip=\"-1\" regexp=\"yes\">surname|cognomen|Hannibal|Hamilcar|Hasdrubal</token>\n+                <token postag=\"SENT_END\"/>\n+            </antipattern>", "originalCommit": "2520c6cf10c5cf6ab7788c05002f06153a282b8f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}