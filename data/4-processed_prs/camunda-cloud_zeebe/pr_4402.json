{"pr_number": 4402, "pr_title": "chore(benchmarks): update benchmark setup", "pr_createdAt": "2020-04-28T16:19:38Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/4402", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc2NTMxMg==", "url": "https://github.com/camunda-cloud/zeebe/pull/4402#discussion_r416765312", "bodyText": "Does it work with the heapDump option? Because without the heap dump we are not able to root cause our memory issues.", "author": "Zelldon", "createdAt": "2020-04-28T16:45:10Z", "path": "benchmarks/setup/default/zeebe-values.yaml", "diffHunk": "@@ -26,6 +31,7 @@ JavaOpts: |\n   -XX:+PrintFlagsFinal\n   -Xmx4g\n   -Xms4g\n+  -XX:+ExitOnOutOfMemoryError", "originalCommit": "317b3b07f0af12aad9f7cfd350b17657a20c9bc3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzEzODY5MQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/4402#discussion_r417138691", "bodyText": "Yes, you will get a heap dump. The downside here is if you get in a crash loop backoff, the heap dump uses the PID, and the PID is always the same, so it fails to dump the second time, but this is already the case as is now anyway. The one downside is that ExitOnOutOfMemoryError does not shutdown gracefully =/", "author": "npepinpe", "createdAt": "2020-04-29T08:09:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc2NTMxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc2ODgyOA==", "url": "https://github.com/camunda-cloud/zeebe/pull/4402#discussion_r416768828", "bodyText": "wouldn't just > be enough here?  Thanks for the reference btw interesting read.", "author": "Zelldon", "createdAt": "2020-04-28T16:50:13Z", "path": "benchmarks/setup/default/zeebe-values.yaml", "diffHunk": "@@ -11,12 +11,17 @@ cpuThreadCount: 4\n ioThreadCount: 4\n gatewayMetrics: true\n \n-zeebeCfg: |\n-  # custom TOML configuration\n+gateway:\n+  replicas: 1\n+  logLevel: debug\n+\n+# Uncomment to add custom YAML configuration\n+# This will overwrite anything at the application.yml location\n+# zeebeCfg: {}\n \n # JavaOpts:\n # DEFAULTS\n-JavaOpts: |\n+JavaOpts: >-", "originalCommit": "317b3b07f0af12aad9f7cfd350b17657a20c9bc3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzEzOTUyNg==", "url": "https://github.com/camunda-cloud/zeebe/pull/4402#discussion_r417139526", "bodyText": "Yeah you're right, plus we don't expect any nested values, so \ud83e\udd37\u200d\u2642\ufe0f", "author": "npepinpe", "createdAt": "2020-04-29T08:11:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjc2ODgyOA=="}], "type": "inlineReview"}, {"oid": "4bf2703adea91d7bb9eea9391f2d18ca6f2f0351", "url": "https://github.com/camunda-cloud/zeebe/commit/4bf2703adea91d7bb9eea9391f2d18ca6f2f0351", "message": "chore(benchmarks): update benchmark setup", "committedDate": "2020-04-29T08:14:13Z", "type": "commit"}, {"oid": "4bf2703adea91d7bb9eea9391f2d18ca6f2f0351", "url": "https://github.com/camunda-cloud/zeebe/commit/4bf2703adea91d7bb9eea9391f2d18ca6f2f0351", "message": "chore(benchmarks): update benchmark setup", "committedDate": "2020-04-29T08:14:13Z", "type": "forcePushed"}]}