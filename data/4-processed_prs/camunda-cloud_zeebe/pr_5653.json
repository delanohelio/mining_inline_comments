{"pr_number": 5653, "pr_title": "chore(ci): add TCK tests to build", "pr_createdAt": "2020-10-21T11:46:26Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5653", "timeline": [{"oid": "48822133228eaf8aa08f82e6d951c94ed8379699", "url": "https://github.com/camunda-cloud/zeebe/commit/48822133228eaf8aa08f82e6d951c94ed8379699", "message": "chore(ci): Revert \"chore(ci): run TCK tests in offline mode\"\n\nThis reverts commit a5860aad2621c1d57c6b7380cdafebadd41dbfd0.\n\nThe offline mode didn't work, because there is one dependency which is not downloaded by default; a better solution needs to be found.", "committedDate": "2020-10-23T07:30:28Z", "type": "forcePushed"}, {"oid": "45757ff76a2362db2276b5f643d1d768f5e21c3e", "url": "https://github.com/camunda-cloud/zeebe/commit/45757ff76a2362db2276b5f643d1d768f5e21c3e", "message": "chore(ci): add TCK tests to build", "committedDate": "2020-10-23T12:54:29Z", "type": "commit"}, {"oid": "45757ff76a2362db2276b5f643d1d768f5e21c3e", "url": "https://github.com/camunda-cloud/zeebe/commit/45757ff76a2362db2276b5f643d1d768f5e21c3e", "message": "chore(ci): add TCK tests to build", "committedDate": "2020-10-23T12:54:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1MDU5OA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r510950598", "bodyText": "What is current-test here?", "author": "korthout", "createdAt": "2020-10-23T15:08:07Z", "path": ".ci/docker/Dockerfile_zeebe-hazelcast-exporter", "diffHunk": "@@ -0,0 +1,12 @@\n+FROM camunda/zeebe:current-test", "originalCommit": "45757ff76a2362db2276b5f643d1d768f5e21c3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc5MTM3NA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r511791374", "bodyText": "current-test is the version that is built in prepare test stage of the build pipeline. It is only available locally and never pushed to any registry. It is also the one used for the integration tests (and I guess go tests, too)", "author": "pihme", "createdAt": "2020-10-26T08:37:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1MDU5OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1MTUzOQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r510951539", "bodyText": "Would it be possible to just collect this from a nexus? Then curl wouldn't have to be installed.", "author": "korthout", "createdAt": "2020-10-23T15:09:38Z", "path": ".ci/docker/Dockerfile_zeebe-hazelcast-exporter", "diffHunk": "@@ -0,0 +1,12 @@\n+FROM camunda/zeebe:current-test\n+\n+RUN apt-get -qq update\n+RUN apt-get install --no-install-recommends -qq -y curl\n+\n+RUN mkdir /usr/local/zeebe/exporters\n+RUN curl -L https://github.com/zeebe-io/zeebe-hazelcast-exporter/releases/download/0.10.0/zeebe-hazelcast-exporter-0.10.0-jar-with-dependencies.jar --output /usr/local/zeebe/exporters/zeebe-hazelcast-exporter-jar-with-dependencies.jar", "originalCommit": "45757ff76a2362db2276b5f643d1d768f5e21c3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc5MjMxOQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r511792319", "bodyText": "I guess it's possible. I don't exactly know how. I have seen calls to maven to download dependencies. But then you need to install maven, which is bigger than curl. Personally, I don't know of any other way that is leaner than curl. If you know one, please let me know.", "author": "pihme", "createdAt": "2020-10-26T08:38:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1MTUzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgxMjI3Ng==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r511812276", "bodyText": "Ah I was mistakenly thinking maven would be available here. Curl makes more sense.", "author": "korthout", "createdAt": "2020-10-26T09:13:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1MTUzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1Mjc3NA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r510952774", "bodyText": "Can't we release bpmn-tck versions and use mvn's packaging powers?", "author": "korthout", "createdAt": "2020-10-23T15:11:34Z", "path": ".ci/scripts/distribution/test-tck.sh", "diffHunk": "@@ -0,0 +1,11 @@\n+#!/bin/bash -xeu\n+\n+git clone https://github.com/zeebe-io/bpmn-tck.git", "originalCommit": "45757ff76a2362db2276b5f643d1d768f5e21c3e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc5Mjc1Ng==", "url": "https://github.com/camunda-cloud/zeebe/pull/5653#discussion_r511792756", "bodyText": "See comments by Phil above", "author": "pihme", "createdAt": "2020-10-26T08:39:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDk1Mjc3NA=="}], "type": "inlineReview"}]}