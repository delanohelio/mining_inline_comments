{"pr_number": 5303, "pr_title": "fix(clients/java): Set a defaultRequestTimeout as 10 seconds", "pr_createdAt": "2020-09-05T09:09:01Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5303", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA1ODYxNw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5303#discussion_r486058617", "bodyText": "DRY: can call activateJob(state) instead.", "author": "saig0", "createdAt": "2020-09-10T04:39:36Z", "path": "upgrade-tests/src/test/java/io/zeebe/test/UpgradeTest.java", "diffHunk": "@@ -148,19 +148,25 @@\n                 .createInstance()\n                 .afterUpgrade(\n                     (state, wfKey, key) -> {\n-                      final ActivatedJob job =\n+                      TestUtil.waitUntil(() -> state.hasElementInState(JOB, \"CREATED\"));\n+\n+                      final var jobsResponse =\n                           state\n                               .client()\n                               .newActivateJobsCommand()\n                               .jobType(TASK)\n                               .maxJobsToActivate(1)\n                               .send()\n-                              .join()\n-                              .getJobs()\n-                              .iterator()\n-                              .next();\n+                              .join();\n+                      assertThat(jobsResponse.getJobs()).hasSize(1);\n+\n+                      TestUtil.waitUntil(() -> state.hasElementInState(JOB, \"ACTIVATED\"));", "originalCommit": "a40528c3477853fb9617066f2d3ec17c46e7b5a8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3f456e9f126093e13fd17e9b3752d1479bf788cc", "url": "https://github.com/camunda-cloud/zeebe/commit/3f456e9f126093e13fd17e9b3752d1479bf788cc", "message": "chore(upgrade-tests): apply review hint", "committedDate": "2020-09-10T09:40:14Z", "type": "forcePushed"}, {"oid": "994a07cb59c40807d0960e9ec74874e0ea2bb043", "url": "https://github.com/camunda-cloud/zeebe/commit/994a07cb59c40807d0960e9ec74874e0ea2bb043", "message": "fix(clients/java): Set a defaultRequestTimeout as 10 seconds", "committedDate": "2020-09-10T12:31:26Z", "type": "commit"}, {"oid": "994a07cb59c40807d0960e9ec74874e0ea2bb043", "url": "https://github.com/camunda-cloud/zeebe/commit/994a07cb59c40807d0960e9ec74874e0ea2bb043", "message": "fix(clients/java): Set a defaultRequestTimeout as 10 seconds", "committedDate": "2020-09-10T12:31:26Z", "type": "forcePushed"}]}