{"pr_number": 4710, "pr_title": "chore(clients/go): skip license test for all mocks", "pr_createdAt": "2020-06-12T09:25:10Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/4710", "timeline": [{"oid": "c5c90168f9586334a5992089bd774dfceaaf5990", "url": "https://github.com/camunda-cloud/zeebe/commit/c5c90168f9586334a5992089bd774dfceaaf5990", "message": "chore(clients/go): skip license test for all mocks", "committedDate": "2020-06-12T09:26:40Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMxNjA3MQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/4710#discussion_r439316071", "bodyText": "What if we turn this into a \"skipList\" with the prefixes of files/dirs to ignore? Then we wouldn't need to add a new if clause for every directory we want to ignore and we're already using this map as a list which is a bit strange. Something like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t// These files are generated.\n          \n          \n            \n            var skipList = []string{\n          \n          \n            \n              // These files are generated.\n          \n          \n            \n              \"../pkg/pb/gateway.pb.go\",\n          \n          \n            \n              \"../internal/mock_pb/\",\n          \n          \n            \n              \"../vendor/\",\n          \n          \n            \n            }\n          \n          \n            \n            \n          \n          \n            \n            func TestLicense(t *testing.T) {\n          \n          \n            \n            \terr := filepath.Walk(\"..\", func(path string, fi os.FileInfo, err error) error {\n          \n          \n            \n                for _, skip := range skipList {\n          \n          \n            \n                  if strings.HasPrefix(path, skip) {\n          \n          \n            \n                    return nil\n          \n          \n            \n                  }\n          \n          \n            \n                }", "author": "MiguelPires", "createdAt": "2020-06-12T09:39:13Z", "path": "clients/go/test/license_test.go", "diffHunk": "@@ -40,8 +40,7 @@ const license = `// Copyright \u00a9 2018 Camunda Services GmbH (info@camunda.com)\n \n var skip = map[string]bool{\n \t// These files are generated.", "originalCommit": "c5c90168f9586334a5992089bd774dfceaaf5990", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMxNzE0OQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/4710#discussion_r439317149", "bodyText": "Sounds good \ud83d\udc4d", "author": "npepinpe", "createdAt": "2020-06-12T09:41:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTMxNjA3MQ=="}], "type": "inlineReview"}, {"oid": "3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "url": "https://github.com/camunda-cloud/zeebe/commit/3b148f9a9b7b5f6d01bb7cc8e2fe3bfcf5a02bfc", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>", "committedDate": "2020-06-12T09:50:42Z", "type": "forcePushed"}, {"oid": "4051e54073590b61f9b2081b687b5bed7bcde076", "url": "https://github.com/camunda-cloud/zeebe/commit/4051e54073590b61f9b2081b687b5bed7bcde076", "message": "chore(clients/go): skip license test for all mocks", "committedDate": "2020-06-12T09:52:00Z", "type": "commit"}, {"oid": "0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "url": "https://github.com/camunda-cloud/zeebe/commit/0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>", "committedDate": "2020-06-12T09:52:00Z", "type": "commit"}, {"oid": "0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "url": "https://github.com/camunda-cloud/zeebe/commit/0b2bf0a3067f1fa08f2106b76e4a27f4fe913807", "message": "chore(clients/go): update skip list to list of prefixes\n\nCo-authored-by: Miguel Pires <miguel.pires@camunda.com>", "committedDate": "2020-06-12T09:52:00Z", "type": "forcePushed"}]}