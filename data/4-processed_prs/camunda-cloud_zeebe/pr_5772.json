{"pr_number": 5772, "pr_title": "[Backport 0.25] chore(ci): move the IT (Java) stage to another agent", "pr_createdAt": "2020-11-06T10:41:26Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5772", "timeline": [{"oid": "1761ab9efcc01ba990eabb1339998140d1c27f24", "url": "https://github.com/camunda-cloud/zeebe/commit/1761ab9efcc01ba990eabb1339998140d1c27f24", "message": "chore(ci): move the IT (Java) stage to another agent\n\n(cherry picked from commit a4a7e24bc4541da4bfec9c23dd1b00a449ca0f8f)", "committedDate": "2020-11-06T10:39:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyMzM5Mw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5772#discussion_r518723393", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'\n          \n      \n    \n    \n  \n\nThis file should only exist in >= 0.26.0-alpha", "author": "pihme", "createdAt": "2020-11-06T12:34:55Z", "path": "Jenkinsfile", "diffHunk": "@@ -168,11 +168,35 @@ pipeline {\n                 }\n \n                 stage('IT (Java)') {\n+                    agent {\n+                        kubernetes {\n+                            cloud 'zeebe-ci'\n+                            label \"zeebe-ci-build_${buildName}_it\"\n+                            defaultContainer 'jnlp'\n+                            yamlFile '.ci/podSpecs/distribution.yml'\n+                        }\n+                    }\n+\n                     environment {\n-                      SUREFIRE_REPORT_NAME_SUFFIX = 'it-testrun'\n+                        SUREFIRE_REPORT_NAME_SUFFIX = 'it-testrun'\n+                        NEXUS = credentials(\"camunda-nexus\")\n+                        IMAGE = \"camunda/zeebe\"\n+                        VERSION = readMavenPom(file: 'parent/pom.xml').getVersion()\n+                        TAG = 'current-test'\n                     }\n \n                     steps {\n+                        container('maven') {\n+                            configFileProvider([configFile(fileId: 'maven-nexus-settings-zeebe', variable: 'MAVEN_SETTINGS_XML')]) {\n+                                sh '.ci/scripts/distribution/prepare.sh'\n+                                sh '.ci/scripts/distribution/build-java.sh'\n+                                sh 'cp dist/target/zeebe-distribution-*.tar.gz zeebe-distribution.tar.gz'\n+                            }\n+                        }\n+                        container('docker') {\n+                            sh '.ci/scripts/docker/build.sh'\n+                            sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'", "originalCommit": "1761ab9efcc01ba990eabb1339998140d1c27f24", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e386ccae8659343704c1c38eba8adafdf2293b3d", "url": "https://github.com/camunda-cloud/zeebe/commit/e386ccae8659343704c1c38eba8adafdf2293b3d", "message": "chore(ci): remove unnecessary build hazelcast exporter\n\nCo-authored-by: Peter Ihme <pihme@users.noreply.github.com>", "committedDate": "2020-11-06T12:53:06Z", "type": "commit"}]}