{"pr_number": 5773, "pr_title": "[Backport 0.24] chore(ci): move the IT (Java) stage to another agent", "pr_createdAt": "2020-11-06T10:45:44Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5773", "timeline": [{"oid": "ae81bd17997191cb7b8d797e391933caedd31d08", "url": "https://github.com/camunda-cloud/zeebe/commit/ae81bd17997191cb7b8d797e391933caedd31d08", "message": "chore(ci): move the IT (Java) stage to another agent\n\n(cherry picked from commit a4a7e24bc4541da4bfec9c23dd1b00a449ca0f8f)", "committedDate": "2020-11-06T10:43:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODcyMjYyNQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5773#discussion_r518722625", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'\n          \n      \n    \n    \n  \n\nThis shell script should only exist in >=0.26.0-alpha", "author": "pihme", "createdAt": "2020-11-06T12:33:17Z", "path": "Jenkinsfile", "diffHunk": "@@ -156,11 +156,35 @@ pipeline {\n                 }\n \n                 stage('IT (Java)') {\n+                    agent {\n+                        kubernetes {\n+                            cloud 'zeebe-ci'\n+                            label \"zeebe-ci-build_${buildName}_it\"\n+                            defaultContainer 'jnlp'\n+                            yamlFile '.ci/podSpecs/distribution.yml'\n+                        }\n+                    }\n+\n                     environment {\n-                      SUREFIRE_REPORT_NAME_SUFFIX = 'it'\n+                        SUREFIRE_REPORT_NAME_SUFFIX = 'it'\n+                        NEXUS = credentials(\"camunda-nexus\")\n+                        IMAGE = \"camunda/zeebe\"\n+                        VERSION = readMavenPom(file: 'parent/pom.xml').getVersion()\n+                        TAG = 'current-test'\n                     }\n \n                     steps {\n+                        container('maven') {\n+                            configFileProvider([configFile(fileId: 'maven-nexus-settings-zeebe', variable: 'MAVEN_SETTINGS_XML')]) {\n+                                sh '.ci/scripts/distribution/prepare.sh'\n+                                sh '.ci/scripts/distribution/build-java.sh'\n+                                sh 'cp dist/target/zeebe-distribution-*.tar.gz zeebe-distribution.tar.gz'\n+                            }\n+                        }\n+                        container('docker') {\n+                            sh '.ci/scripts/docker/build.sh'\n+                            sh '.ci/scripts/docker/build_zeebe-hazelcast-exporter.sh'", "originalCommit": "ae81bd17997191cb7b8d797e391933caedd31d08", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "23c7d507bf19d058363a1521b9300bccb07f1340", "url": "https://github.com/camunda-cloud/zeebe/commit/23c7d507bf19d058363a1521b9300bccb07f1340", "message": "chore(ci): remove unnecessary build hazelcast exporter\n\nCo-authored-by: Peter Ihme <pihme@users.noreply.github.com>", "committedDate": "2020-11-06T12:52:43Z", "type": "commit"}]}