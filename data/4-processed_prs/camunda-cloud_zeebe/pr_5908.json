{"pr_number": 5908, "pr_title": "Introduce new update test build agent", "pr_createdAt": "2020-11-24T18:48:26Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5908", "timeline": [{"oid": "f28abfa5093a5c5508e0a2e8944dfc2faa392557", "url": "https://github.com/camunda-cloud/zeebe/commit/f28abfa5093a5c5508e0a2e8944dfc2faa392557", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-24T18:49:28Z", "type": "forcePushed"}, {"oid": "cfc15ca479ea9b6f56945bfcbcfde4e50abd2915", "url": "https://github.com/camunda-cloud/zeebe/commit/cfc15ca479ea9b6f56945bfcbcfde4e50abd2915", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-24T19:12:30Z", "type": "forcePushed"}, {"oid": "2e02dc07931b8c64e15c6f17864369dc644494e3", "url": "https://github.com/camunda-cloud/zeebe/commit/2e02dc07931b8c64e15c6f17864369dc644494e3", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-24T19:46:47Z", "type": "forcePushed"}, {"oid": "6e9b013b520c86a6bbd931263921aa28c67ad1d0", "url": "https://github.com/camunda-cloud/zeebe/commit/6e9b013b520c86a6bbd931263921aa28c67ad1d0", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-24T20:04:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE1NDIxMg==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530154212", "bodyText": "I think this should be removed based on the PR's description - it's not needed and will leave the pod running for 15min after a build finished but due to using the label \"zeebe-ci-build_${buildName}\" only one build will ever use this pod.", "author": "cmur2", "createdAt": "2020-11-25T07:23:10Z", "path": "Jenkinsfile", "diffHunk": "@@ -22,7 +22,10 @@ pipeline {\n             cloud 'zeebe-ci'\n             label \"zeebe-ci-build_${buildName}\"\n             defaultContainer 'jnlp'\n-            yamlFile '.ci/podSpecs/distribution.yml'\n+            yamlFile \".ci/podSpecs/distribution.yml\"\n+            // allows the pod to remain active for reuse until the configured number of minutes\n+            // has passed since the last step was executed on it.\n+            idleMinutes 15", "originalCommit": "6e9b013b520c86a6bbd931263921aa28c67ad1d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyNDkxMg==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530224912", "bodyText": "Ah, I think this is a leftover from rebasing very often \ud83d\ude48", "author": "npepinpe", "createdAt": "2020-11-25T09:28:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDE1NDIxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwMjA3Nw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530202077", "bodyText": "I noticed you updated some of the other images to newer versions, should we also do that here? Consider maven is currently at 3.6.3", "author": "korthout", "createdAt": "2020-11-25T08:54:14Z", "path": ".ci/podSpecs/distribution.yml", "diffHunk": "@@ -8,9 +8,6 @@ spec:\n     - key: \"agents-n1-standard-32-netssd-preempt\"\n       operator: \"Exists\"\n       effect: \"NoSchedule\"\n-  volumes:\n-    - name: shared-data\n-      emptyDir: {}\n   containers:\n     - name: maven\n       image: maven:3.6.0-jdk-11", "originalCommit": "6e9b013b520c86a6bbd931263921aa28c67ad1d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyNDEzMg==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530224132", "bodyText": "That's a good point, we should \ud83d\udc4d", "author": "npepinpe", "createdAt": "2020-11-25T09:27:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwMjA3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyOTc0OQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530229749", "bodyText": "In that case, note that this image is used in multiple specs.", "author": "korthout", "createdAt": "2020-11-25T09:35:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwMjA3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwODQ3Mg==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530208472", "bodyText": "Can we rename this to IT and Update Test to Update? Currently, it get's truncated on my relatively large laptop screen (16\" macbook pro).", "author": "korthout", "createdAt": "2020-11-25T09:04:10Z", "path": "Jenkinsfile", "diffHunk": "@@ -142,48 +156,104 @@ pipeline {\n                     }\n                 }\n \n-                stage('IT (Java)') {\n+                stage('Integration') {", "originalCommit": "6e9b013b520c86a6bbd931263921aa28c67ad1d0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIyNDUyNw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530224527", "bodyText": "truncation? not in my pipeline! \ud83d\ude0e\nbut yeah sure \ud83d\ude04", "author": "npepinpe", "createdAt": "2020-11-25T09:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwODQ3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMDI1Nw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530230257", "bodyText": "Do you use a 48\" OLED TV as monitor? \ud83d\ude06", "author": "korthout", "createdAt": "2020-11-25T09:36:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwODQ3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzMTM5Ng==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530231396", "bodyText": "UltraWide \ud83c\udd92", "author": "Zelldon", "createdAt": "2020-11-25T09:38:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwODQ3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIzNzMyNA==", "url": "https://github.com/camunda-cloud/zeebe/pull/5908#discussion_r530237324", "bodyText": "I code in the only acceptable way, in IMAX of course", "author": "npepinpe", "createdAt": "2020-11-25T09:46:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDIwODQ3Mg=="}], "type": "inlineReview"}, {"oid": "1381f1a36cfda896b6d66906fa269d3e6dd9b901", "url": "https://github.com/camunda-cloud/zeebe/commit/1381f1a36cfda896b6d66906fa269d3e6dd9b901", "message": "chore(project): fix editorconfig for Jenkinsfile", "committedDate": "2020-11-25T12:31:20Z", "type": "commit"}, {"oid": "8b7809bc572c652b7fc191fe327bc22f8d89061a", "url": "https://github.com/camunda-cloud/zeebe/commit/8b7809bc572c652b7fc191fe327bc22f8d89061a", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-25T12:31:21Z", "type": "commit"}, {"oid": "8b7809bc572c652b7fc191fe327bc22f8d89061a", "url": "https://github.com/camunda-cloud/zeebe/commit/8b7809bc572c652b7fc191fe327bc22f8d89061a", "message": "chore(ci): split update tests to a separate agent\n\n- introduce new podspec for integration tests and update tests\n- reduce resource usage based on what each agent needs\n- parallelize verification stages with sequential branches for IT and UT\n  agents", "committedDate": "2020-11-25T12:31:21Z", "type": "forcePushed"}]}