{"pr_number": 5923, "pr_title": "5754 trigger testbench2", "pr_createdAt": "2020-11-26T16:05:09Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/5923", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU3NzA0Nw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5923#discussion_r531577047", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            def shortTimeout = 10\n          \n          \n            \n            def longTimeout = 45\n          \n          \n            \n            def shortTimeoutMinutes = 10\n          \n          \n            \n            def longTimeoutMinutes = 45\n          \n      \n    \n    \n  \n\nOr just a comment above saying the unit is minutes, otherwise I can already predict questions \ud83d\ude42", "author": "npepinpe", "createdAt": "2020-11-27T12:34:57Z", "path": "Jenkinsfile", "diffHunk": "@@ -13,6 +13,9 @@ def isDevelopBranch = env.BRANCH_NAME == developBranchName\n def daysToKeep = isDevelopBranch ? '7' : '-1'\n def numToKeep = isDevelopBranch ? '-1' : '10'\n \n+def shortTimeout = 10\n+def longTimeout = 45", "originalCommit": "3b08c04a06abee27da6ee2bdb5f8b876555163d5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU3Nzk1NQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/5923#discussion_r531577955", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    timeout(time: shortTimeout, unit: 'MINUTES') {\n          \n          \n            \n                                    timeout(time: longTimeout, unit: 'MINUTES') {\n          \n      \n    \n    \n  \n\nI would just standardize all verification stages to use longTimeout, just go give ourselves room as we add more tests.", "author": "npepinpe", "createdAt": "2020-11-27T12:36:57Z", "path": "Jenkinsfile", "diffHunk": "@@ -105,12 +122,14 @@ pipeline {\n \n                 stage('Test (Go)') {\n                     steps {\n-                        container('golang') {\n-                            sh '.ci/scripts/distribution/build-go.sh'\n-                        }\n+                        timeout(time: shortTimeout, unit: 'MINUTES') {", "originalCommit": "3b08c04a06abee27da6ee2bdb5f8b876555163d5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTU3ODg4Nw==", "url": "https://github.com/camunda-cloud/zeebe/pull/5923#discussion_r531578887", "bodyText": "The image is already available, so you could just take the existing camunda/zeebe:current-test and tag it differently, no need to rebuild it.\nYou can it like this:\ndocker tag camunda/zeebe:current-test ${IMAGE}:${TAG}\ndocker push ${IMAGE}:${TAG}", "author": "npepinpe", "createdAt": "2020-11-27T12:38:58Z", "path": "Jenkinsfile", "diffHunk": "@@ -283,11 +318,56 @@ pipeline {\n             }\n         }\n \n+        stage('QA') {\n+            when {\n+                expression { params.RUN_QA }\n+            }\n+            environment {\n+                IMAGE = \"gcr.io/zeebe-io/zeebe\"\n+                VERSION = readMavenPom(file: 'parent/pom.xml').getVersion()\n+                TAG = \"${env.VERSION}-${env.GIT_COMMIT}\"\n+                DOCKER_GCR = credentials(\"zeebe-gcr-serviceaccount-json\")\n+                ZEEBE_AUTHORIZATION_SERVER_URL = 'https://login.cloud.ultrawombat.com/oauth/token'\n+                ZEEBE_CLIENT_ID = 'W5a4JUc3I1NIetNnodo3YTvdsRIFb12w'\n+                QA_RUN_VARIABLES = \"{\\\"zeebeImage\\\": \\\"${env.IMAGE}:${env.TAG}\\\", \\\"generationTemplate\\\": \\\"${params.GENERATION_TEMPLATE}\\\", \\\"channel\\\": \\\"Internal Dev\\\", \" +\n+                                   \"\\\"branch\\\": \\\"${env.BRANCH_NAME}\\\", \\\"build\\\": \\\"${currentBuild.absoluteUrl}\\\"}\"\n+            }\n+\n+            steps {\n+                timeout(time: shortTimeout, unit: 'MINUTES') {\n+                    container('docker') {\n+                        sh 'cp dist/target/zeebe-distribution-*.tar.gz zeebe-distribution.tar.gz'", "originalCommit": "3b08c04a06abee27da6ee2bdb5f8b876555163d5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f8e30d9762e42a6f6403b40227561fbb4a2097f0", "url": "https://github.com/camunda-cloud/zeebe/commit/f8e30d9762e42a6f6403b40227561fbb4a2097f0", "message": "chore(ci): add timeout to individual build steps", "committedDate": "2020-11-27T13:20:41Z", "type": "forcePushed"}, {"oid": "75627fe66204e7bd44bc5ee8e1d8365c8ac2821e", "url": "https://github.com/camunda-cloud/zeebe/commit/75627fe66204e7bd44bc5ee8e1d8365c8ac2821e", "message": "chore(ci): trigger QA from Jenkins build", "committedDate": "2020-11-27T14:37:06Z", "type": "commit"}, {"oid": "75627fe66204e7bd44bc5ee8e1d8365c8ac2821e", "url": "https://github.com/camunda-cloud/zeebe/commit/75627fe66204e7bd44bc5ee8e1d8365c8ac2821e", "message": "chore(ci): trigger QA from Jenkins build", "committedDate": "2020-11-27T14:37:06Z", "type": "forcePushed"}]}