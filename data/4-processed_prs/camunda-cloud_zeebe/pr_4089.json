{"pr_number": 4089, "pr_title": "chore(logstreams): fix append failure listener", "pr_createdAt": "2020-03-20T08:24:33Z", "pr_url": "https://github.com/camunda-cloud/zeebe/pull/4089", "timeline": [{"oid": "b52d2f97f25d3c5af86168ea96123be4f0b1840e", "url": "https://github.com/camunda-cloud/zeebe/commit/b52d2f97f25d3c5af86168ea96123be4f0b1840e", "message": "chore(logstreams): fix append failure listener", "committedDate": "2020-03-20T08:23:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0MjYwOQ==", "url": "https://github.com/camunda-cloud/zeebe/pull/4089#discussion_r395642609", "bodyText": "speaks anything against moving the actor run into the onFailure?", "author": "Zelldon", "createdAt": "2020-03-20T13:40:56Z", "path": "logstreams/src/main/java/io/zeebe/logstreams/impl/log/LogStorageAppender.java", "diffHunk": "@@ -230,7 +230,7 @@ public void onWriteError(final Throwable error) {\n         // Not a failure. It is probably during transition to follower.\n         return;\n       }\n-      onFailure(error);\n+      actor.run(() -> onFailure(error));", "originalCommit": "b52d2f97f25d3c5af86168ea96123be4f0b1840e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0NDU1Ng==", "url": "https://github.com/camunda-cloud/zeebe/pull/4089#discussion_r395644556", "bodyText": "onFailure is also called in handleFailure(). If we use actor.run() there it won't be executed until other submitted tasks are executed. So we are not immediately failing when an unhandled exception happens.", "author": "deepthidevaki", "createdAt": "2020-03-20T13:44:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0MjYwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0NTA0OA==", "url": "https://github.com/camunda-cloud/zeebe/pull/4089#discussion_r395645048", "bodyText": "ok then leave it like it is thanks", "author": "Zelldon", "createdAt": "2020-03-20T13:44:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTY0MjYwOQ=="}], "type": "inlineReview"}]}