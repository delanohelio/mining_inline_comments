{"pr_number": 6825, "pr_title": "KEYCLOAK-9782: Do not allow duplicate group name when updating.", "pr_createdAt": "2020-02-22T11:23:04Z", "pr_url": "https://github.com/keycloak/keycloak/pull/6825", "timeline": [{"oid": "9a42a9564f6e059745fcae06470d216f844855a1", "url": "https://github.com/keycloak/keycloak/commit/9a42a9564f6e059745fcae06470d216f844855a1", "message": "KEYCLOAK-11412: Do not allow duplicate group name when updating.", "committedDate": "2020-02-24T20:15:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NjY2NA==", "url": "https://github.com/keycloak/keycloak/pull/6825#discussion_r390756664", "bodyText": "I am not sure about changing this to \"Response\" . My vote is to keep return type to \"void\" .\nWith the \"void\", it means that exception is thrown for the client if something is bad (duplicate name etc). Which is in general better IMO as client knows that something was wrong. With \"Response\", the client explicitly needs to check if response status was correct, also he may need to close the responses etc. Just my 2 cents.\n@stianst wdyt about this?\nBTV. It is fine to change the server method with return type \"Response\" and just the client keep to \"void\" . It should work just fine.", "author": "mposolda", "createdAt": "2020-03-11T05:46:11Z", "path": "integration/admin-client/src/main/java/org/keycloak/admin/client/resource/GroupResource.java", "diffHunk": "@@ -82,7 +82,7 @@\n      */\n     @PUT\n     @Consumes(MediaType.APPLICATION_JSON)\n-    void update(GroupRepresentation rep);\n+    Response update(GroupRepresentation rep);", "originalCommit": "9a42a9564f6e059745fcae06470d216f844855a1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDkyODIyMA==", "url": "https://github.com/keycloak/keycloak/pull/6825#discussion_r390928220", "bodyText": "@mposolda @stianst We haven't been consistent about this.  I was trying to follow convention of other API's.  Now I see that some use an exception while others stuff an error into a Response.  (I also found that the admin UI handles a Response better than an exception.  In the future we need to handle errors consistently and also localize the error messages.)\nI would prefer to not change this code just because I would have to go in and rewrite a lot of stuff, especially the tests.  But it's OK if you guys think that's what I should do.  Please let me know.", "author": "ssilvert", "createdAt": "2020-03-11T12:12:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NjY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTAzMzY1Mg==", "url": "https://github.com/keycloak/keycloak/pull/6825#discussion_r391033652", "bodyText": "I can see that admin-client returns usually \"void\" on all the places where @put method is used. There is no other @put method, which returns \"Response\" . Also changing org.keycloak.admin.client.resource.GroupResource.update to return \"Response\" instead of \"void\" can theoretically break backwards compatibility for some clients, who use this (they rely on catching the Exception and now they will need to change to rely on checking Response status).\nAlso I think that admin client is unrelated to the admin UI as admin UI doesn't use admin-client? IMO it's not an issue to keep just org.keycloak.admin.client.resource.GroupResource.update to return \"void\", but return \"Response\" from the server-side org.keycloak.services.resources.admin.GroupResource . Both GroupResource class from admin-client and keycloak-services are unrelated to each other - the only contract between them is REST interface, not tightly coupled java interface or something.", "author": "mposolda", "createdAt": "2020-03-11T14:58:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NjY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc4NzkxMg==", "url": "https://github.com/keycloak/keycloak/pull/6825#discussion_r391787912", "bodyText": "Yes, I was talking about the REST API and not the client.  I guess it's not so bad if we only need to leave the client as returning void.", "author": "ssilvert", "createdAt": "2020-03-12T17:43:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NjY2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc4OTEzNg==", "url": "https://github.com/keycloak/keycloak/pull/6825#discussion_r391789136", "bodyText": "I was talking about the REST API.  I guess it's not so bad if we only need to change the client signature.", "author": "ssilvert", "createdAt": "2020-03-12T17:45:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc1NjY2NA=="}], "type": "inlineReview"}, {"oid": "10cb689e192c9d2854b231b6b7ef4c9005fc46a4", "url": "https://github.com/keycloak/keycloak/commit/10cb689e192c9d2854b231b6b7ef4c9005fc46a4", "message": "KEYCLOAK-9782: Do not allow duplicate group name when updating", "committedDate": "2020-03-12T17:46:27Z", "type": "forcePushed"}, {"oid": "9aa739097c54053577804a389a3c0610c93685d7", "url": "https://github.com/keycloak/keycloak/commit/9aa739097c54053577804a389a3c0610c93685d7", "message": "KEYCLOAK-9782: Do not allow duplicate group name when updating", "committedDate": "2020-03-12T18:52:55Z", "type": "commit"}, {"oid": "9aa739097c54053577804a389a3c0610c93685d7", "url": "https://github.com/keycloak/keycloak/commit/9aa739097c54053577804a389a3c0610c93685d7", "message": "KEYCLOAK-9782: Do not allow duplicate group name when updating", "committedDate": "2020-03-12T18:52:55Z", "type": "forcePushed"}]}