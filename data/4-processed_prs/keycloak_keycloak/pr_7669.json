{"pr_number": 7669, "pr_title": "KEYCLOAK-16566 Display Id Provider DisplayName instead of Alias on login-idp-link-*.ftl", "pr_createdAt": "2020-12-08T14:05:25Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7669", "timeline": [{"oid": "dd614c0645114b4eedc64c77be7aa4a861dad376", "url": "https://github.com/keycloak/keycloak/commit/dd614c0645114b4eedc64c77be7aa4a861dad376", "message": "display idp displayName if available", "committedDate": "2020-12-08T16:30:29Z", "type": "forcePushed"}, {"oid": "fe597c79d6ee89505f71d88b2192e1f3640770a6", "url": "https://github.com/keycloak/keycloak/commit/fe597c79d6ee89505f71d88b2192e1f3640770a6", "message": "KEYCLOAK-16566 Display Idp displayName if available", "committedDate": "2020-12-09T07:47:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng==", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r539639446", "bodyText": "This would give misleading information to the attributes. idpAlias must contain identity provider alias. You can however add another attribute, e.g. idpDisplayName, that would be display name (if set) or alias (if displayname unset), and use that in the template.", "author": "hmlnarik", "createdAt": "2020-12-09T20:53:10Z", "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,6 +209,9 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    idpAlias = brokerContext.getIdpConfig().getDisplayName();\n+                }", "originalCommit": "fe597c79d6ee89505f71d88b2192e1f3640770a6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTU0NTIyNw==", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r541545227", "bodyText": "Hi @hmlnarik, please check again, if I understood it correctly.", "author": "loaded02", "createdAt": "2020-12-12T09:59:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MjU5NQ==", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544242595", "bodyText": "This part is correct, yet see below", "author": "hmlnarik", "createdAt": "2020-12-16T12:01:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTYzOTQ0Ng=="}], "type": "inlineReview"}, {"oid": "c28b7ae38d6f11f23e8d914df7aae95a037075b2", "url": "https://github.com/keycloak/keycloak/commit/c28b7ae38d6f11f23e8d914df7aae95a037075b2", "message": "KEYCLOAK-16566 Display Idp displayName if available", "committedDate": "2020-12-12T09:57:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MTg5MA==", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r544241890", "bodyText": "idpAlias must be retained, idpDisplayName is a new attribute", "author": "hmlnarik", "createdAt": "2020-12-16T12:00:18Z", "path": "services/src/main/java/org/keycloak/forms/login/freemarker/FreeMarkerLoginFormsProvider.java", "diffHunk": "@@ -209,9 +209,13 @@ protected Response createResponse(LoginFormsPages page) {\n                 BrokeredIdentityContext brokerContext = (BrokeredIdentityContext) this.attributes.get(IDENTITY_PROVIDER_BROKER_CONTEXT);\n                 String idpAlias = brokerContext.getIdpConfig().getAlias();\n                 idpAlias = ObjectUtil.capitalize(idpAlias);\n+                String displayName = idpAlias;\n+                if (!ObjectUtil.isBlank(brokerContext.getIdpConfig().getDisplayName())) {\n+                    displayName = brokerContext.getIdpConfig().getDisplayName();\n+                }\n \n                 attributes.put(\"brokerContext\", brokerContext);\n-                attributes.put(\"idpAlias\", idpAlias);\n+                attributes.put(\"idpDisplayName\", displayName);", "originalCommit": "c28b7ae38d6f11f23e8d914df7aae95a037075b2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc3NjQwOQ==", "url": "https://github.com/keycloak/keycloak/pull/7669#discussion_r545776409", "bodyText": "Hi @hmlnarik, please check again", "author": "loaded02", "createdAt": "2020-12-18T11:38:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDI0MTg5MA=="}], "type": "inlineReview"}, {"oid": "b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "url": "https://github.com/keycloak/keycloak/commit/b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "message": "KEYCLOAK-16566 Display Idp displayName if available", "committedDate": "2020-12-16T15:40:16Z", "type": "commit"}, {"oid": "b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "url": "https://github.com/keycloak/keycloak/commit/b574f772f4b0d9a1dddeac07a4f60f96b38a6a96", "message": "KEYCLOAK-16566 Display Idp displayName if available", "committedDate": "2020-12-16T15:40:16Z", "type": "forcePushed"}]}