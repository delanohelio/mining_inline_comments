{"pr_number": 7539, "pr_title": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "pr_createdAt": "2020-10-26T15:38:15Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7539", "timeline": [{"oid": "020349dedf9c230a92323514821d7331eb0f3f66", "url": "https://github.com/keycloak/keycloak/commit/020349dedf9c230a92323514821d7331eb0f3f66", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-10-27T20:47:46Z", "type": "forcePushed"}, {"oid": "fc8ac3bc5c391a58390485393d9841225ca08dd9", "url": "https://github.com/keycloak/keycloak/commit/fc8ac3bc5c391a58390485393d9841225ca08dd9", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-10-27T21:06:42Z", "type": "forcePushed"}, {"oid": "0d1796ead17d9b48bfb1e008cc609bd935953fa2", "url": "https://github.com/keycloak/keycloak/commit/0d1796ead17d9b48bfb1e008cc609bd935953fa2", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-10-28T09:44:04Z", "type": "forcePushed"}, {"oid": "b5eb366fadc3f6fef2d14f0dac9a2af7a633d536", "url": "https://github.com/keycloak/keycloak/commit/b5eb366fadc3f6fef2d14f0dac9a2af7a633d536", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-10-28T11:56:00Z", "type": "forcePushed"}, {"oid": "2b86554e5e808dbe836f1806c66ac5d79d9e1c21", "url": "https://github.com/keycloak/keycloak/commit/2b86554e5e808dbe836f1806c66ac5d79d9e1c21", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-03T09:41:39Z", "type": "forcePushed"}, {"oid": "24297adf2769bbb4c85db117ffba7fb6b86cfb16", "url": "https://github.com/keycloak/keycloak/commit/24297adf2769bbb4c85db117ffba7fb6b86cfb16", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-14T14:35:49Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE0NDEwOQ==", "url": "https://github.com/keycloak/keycloak/pull/7539#discussion_r525144109", "bodyText": "Shouldn't it be Twitter twitter = new TwitterFactory(builder.build()).getInstance(); ?", "author": "bjoernhype", "createdAt": "2020-11-17T13:15:47Z", "path": "services/src/main/java/org/keycloak/social/twitter/TwitterIdentityProvider.java", "diffHunk": "@@ -190,8 +191,10 @@ public Response authResponse(@QueryParam(\"state\") String state,\n \n             AuthenticationSessionModel authSession = null;\n             try (VaultStringSecret vaultStringSecret = session.vault().getStringSecret(getConfig().getClientSecret())) {\n-                Twitter twitter = new TwitterFactory().getInstance();\n+                ConfigurationBuilder builder = new ConfigurationBuilder();\n+                builder.setIncludeEmailEnabled(true);\n \n+                Twitter twitter = new TwitterFactory().getInstance();", "originalCommit": "24297adf2769bbb4c85db117ffba7fb6b86cfb16", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTM2OTMyNQ==", "url": "https://github.com/keycloak/keycloak/pull/7539#discussion_r525369325", "bodyText": "Of course! You're right. I added this line in a previous commit but I rebased on an older commit and forgot to add this \ud83d\ude05", "author": "NathanStrobbe", "createdAt": "2020-11-17T17:55:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTE0NDEwOQ=="}], "type": "inlineReview"}, {"oid": "297815506a56790b7261507e8e43ab3ff7d152ac", "url": "https://github.com/keycloak/keycloak/commit/297815506a56790b7261507e8e43ab3ff7d152ac", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-17T17:59:08Z", "type": "forcePushed"}, {"oid": "67d528be4a03800fc5b446c676a55aa9cf121f7d", "url": "https://github.com/keycloak/keycloak/commit/67d528be4a03800fc5b446c676a55aa9cf121f7d", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-17T18:01:44Z", "type": "forcePushed"}, {"oid": "98ce66ec342c27d2b5445033be653812cd4d46bd", "url": "https://github.com/keycloak/keycloak/commit/98ce66ec342c27d2b5445033be653812cd4d46bd", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-17T18:05:14Z", "type": "forcePushed"}, {"oid": "a0192e0666c016d80a42da8ae5aba3c25c74b4ea", "url": "https://github.com/keycloak/keycloak/commit/a0192e0666c016d80a42da8ae5aba3c25c74b4ea", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-18T10:56:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjI2MTMyOQ==", "url": "https://github.com/keycloak/keycloak/pull/7539#discussion_r532261329", "bodyText": "@NathanStrobbe this could be even shortned to one line:  Twitter twitter = new TwitterFactory(new ConfigurationBuilder().setIncludeEmailEnabled(true).build()).getInstance();", "author": "zak905", "createdAt": "2020-11-29T20:25:00Z", "path": "services/src/main/java/org/keycloak/social/twitter/TwitterIdentityProvider.java", "diffHunk": "@@ -190,8 +191,10 @@ public Response authResponse(@QueryParam(\"state\") String state,\n \n             AuthenticationSessionModel authSession = null;\n             try (VaultStringSecret vaultStringSecret = session.vault().getStringSecret(getConfig().getClientSecret())) {\n-                Twitter twitter = new TwitterFactory().getInstance();\n+                ConfigurationBuilder builder = new ConfigurationBuilder();\n+                builder.setIncludeEmailEnabled(true);\n \n+                Twitter twitter = new TwitterFactory(builder.build()).getInstance();", "originalCommit": "a0192e0666c016d80a42da8ae5aba3c25c74b4ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a79199e1c82d4ab33ac1ec27ef1e65fab5bdad05", "url": "https://github.com/keycloak/keycloak/commit/a79199e1c82d4ab33ac1ec27ef1e65fab5bdad05", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-30T17:32:31Z", "type": "forcePushed"}, {"oid": "ce533b56e86f84e95807ab71a153d37e2c9f8be7", "url": "https://github.com/keycloak/keycloak/commit/ce533b56e86f84e95807ab71a153d37e2c9f8be7", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-11-30T17:34:26Z", "type": "forcePushed"}, {"oid": "968afb2e73819179b627664671ccd743d17840e0", "url": "https://github.com/keycloak/keycloak/commit/968afb2e73819179b627664671ccd743d17840e0", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-12-01T17:25:22Z", "type": "forcePushed"}, {"oid": "5a144c36659c7f9c7f6d102a522a38f68c54a4e6", "url": "https://github.com/keycloak/keycloak/commit/5a144c36659c7f9c7f6d102a522a38f68c54a4e6", "message": "KEYCLOAK-10603 adjust assignments to roles (user-role and group-role assignments, client-scope and client \"scope mappings\"): allow assignments of roles which are already indirectly assigned (e.g. by composite role)\n- extend RoleMapperModel with method hasDirectRole(RoleModel), which only checks for direct assignment in contrast to the existing method hasRole(RoleModel)\n- extend ScopeContainerModel with method hasDirectScope(RoleModel), which only checks for direct scope mapping in contrast to the existing method hasScope(RoleModel)\n- use the new hasDirectRole and hasDirectScope methods to check whether a role is in the \"available\" list and whether it can be assigned (previously, the hasRole method was used for this purpose)\n- add hint to UI that available roles contain effectively assigned roles which are not directly assigned\n- adjust and extend tests", "committedDate": "2021-09-23T22:02:32Z", "type": "forcePushed"}, {"oid": "968afb2e73819179b627664671ccd743d17840e0", "url": "https://github.com/keycloak/keycloak/commit/968afb2e73819179b627664671ccd743d17840e0", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2020-12-01T17:25:22Z", "type": "forcePushed"}, {"oid": "73c22683803c73b16e9022d7fefd49c652d361de", "url": "https://github.com/keycloak/keycloak/commit/73c22683803c73b16e9022d7fefd49c652d361de", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2021-09-24T20:20:19Z", "type": "commit"}, {"oid": "73c22683803c73b16e9022d7fefd49c652d361de", "url": "https://github.com/keycloak/keycloak/commit/73c22683803c73b16e9022d7fefd49c652d361de", "message": "KEYCLOAK-15167 Retrieve email from Twitter IdP", "committedDate": "2021-09-24T20:20:19Z", "type": "forcePushed"}]}