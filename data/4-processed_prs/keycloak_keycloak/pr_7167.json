{"pr_number": 7167, "pr_title": "KEYCLOAK-13739 Add missing type definition for register options", "pr_createdAt": "2020-06-13T14:33:03Z", "pr_url": "https://github.com/keycloak/keycloak/pull/7167", "timeline": [{"oid": "1267a9255674fbb3a5a3b5fd229296ebcab4f488", "url": "https://github.com/keycloak/keycloak/commit/1267a9255674fbb3a5a3b5fd229296ebcab4f488", "message": "KEYCLOAK-13739 Add missing type definition for register options", "committedDate": "2020-06-13T14:41:41Z", "type": "commit"}, {"oid": "1267a9255674fbb3a5a3b5fd229296ebcab4f488", "url": "https://github.com/keycloak/keycloak/commit/1267a9255674fbb3a5a3b5fd229296ebcab4f488", "message": "KEYCLOAK-13739 Add missing type definition for register options", "committedDate": "2020-06-13T14:41:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2NjE5Mw==", "url": "https://github.com/keycloak/keycloak/pull/7167#discussion_r440366193", "bodyText": "I don't think this is quite right.  Today it is valid to pass the action as a register option as long as it is set to 'register'.  So this could possibly break existing code.\nWhat do you think of this instead?\ntype KeycloakRegisterOptions = Omit<KeycloakLoginOptions, 'action'> & {action?: 'register'}", "author": "ssilvert", "createdAt": "2020-06-15T18:29:11Z", "path": "adapters/oidc/js/src/main/resources/keycloak.d.ts", "diffHunk": "@@ -215,6 +215,8 @@ declare namespace Keycloak {\n \t\tredirectUri?: string;\r\n \t}\r\n \r\n+\tinterface KeycloakRegisterOptions extends Omit<KeycloakLoginOptions, 'action'> { }\r", "originalCommit": "1267a9255674fbb3a5a3b5fd229296ebcab4f488", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIwODgxNA==", "url": "https://github.com/keycloak/keycloak/pull/7167#discussion_r441208814", "bodyText": "@jonkoops ^^ ?", "author": "ssilvert", "createdAt": "2020-06-17T00:09:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2NjE5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTY3MTY5Ng==", "url": "https://github.com/keycloak/keycloak/pull/7167#discussion_r441671696", "bodyText": "It might be valid, but in code we never use the action property for any registration related methods. If anyone is passing in this parameter, or any other parameter not in the interface for that matter it will rightly produce an exception during compilation of TypeScript code.\nThe question is, is that really a breaking change? It does not affect any code running in production, rather only projects taking advantage of TypeScript where the author makes a conscious decision to update this specific dependency and build a new version of their application.\nI think it's good to be explicit about what is present and used and what is not to avoid confusion, and I think that others using TypeScript would want to have the same behaviour.\nThat said, if we do want to keep scope around we might as well use KeycloakLoginOptions directly as the action property is already optional there.", "author": "jonkoops", "createdAt": "2020-06-17T16:25:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2NjE5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc4MTYwOA==", "url": "https://github.com/keycloak/keycloak/pull/7167#discussion_r441781608", "bodyText": "I do think it really is a breaking change.\nBut I can buy the argument that we should discourage anyone from passing in the action property anyway.  So maybe that's not such a bad thing.\nI'll approve as-is.", "author": "ssilvert", "createdAt": "2020-06-17T19:25:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDM2NjE5Mw=="}], "type": "inlineReview"}]}