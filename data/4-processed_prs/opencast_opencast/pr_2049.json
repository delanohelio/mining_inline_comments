{"pr_number": 2049, "pr_title": "Endtime of segments fixed in the editor", "pr_createdAt": "2020-11-05T15:02:01Z", "pr_url": "https://github.com/opencast/opencast/pull/2049", "timeline": [{"oid": "ddff20e03c4d522253b0fa0708d5a8235ef4e1c0", "url": "https://github.com/opencast/opencast/commit/ddff20e03c4d522253b0fa0708d5a8235ef4e1c0", "message": "Endtime of segments fixed in the editor", "committedDate": "2020-11-05T15:05:06Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ==", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r525607849", "bodyText": "Could this be added to the loop before it? Is there any issue that \"segment.endTime\" will still be old time that is greater than scope.video.duration? In other words, should the \"if\" check happen before segment.endTime is assigned?", "author": "karendolan", "createdAt": "2020-11-18T00:07:43Z", "path": "modules/admin-ui/src/main/webapp/scripts/shared/directives/segmentsDirective.js", "diffHunk": "@@ -181,6 +181,11 @@ angular.module('adminNg.directives')\n              * Make sure that times are updates if needed.\n              */\n         scope.$root.$on('segmentTimesUpdated', function () {\n+          angular.forEach(scope.video.segments, function (segment) {\n+            if (segment.end > scope.video.duration) {\n+              segment.end = scope.video.duration;\n+            }\n+          });", "originalCommit": "ddff20e03c4d522253b0fa0708d5a8235ef4e1c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzk4NjA0NQ==", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r533986045", "bodyText": "I don't understand exactly what you mean with \"the loop before it\", but the \"if\" check has to happen before the assignment of segment.endTime. I can put the \"if\" statement into the loop of scope.setHumanReadableTimes() (maybe that's what you mean). Then it wouldn't iterate 2 times over the segments.", "author": "marwyg", "createdAt": "2020-12-02T08:41:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4MzQ1OA==", "url": "https://github.com/opencast/opencast/pull/2049#discussion_r538483458", "bodyText": "HI @marwyg , upon revisiting this pull, I don't see which loop I was thinking off. So I'm closing this comment!", "author": "karendolan", "createdAt": "2020-12-08T15:14:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTYwNzg0OQ=="}], "type": "inlineReview"}, {"oid": "1d7748e483e6022792c413c92685b8c91687ae26", "url": "https://github.com/opencast/opencast/commit/1d7748e483e6022792c413c92685b8c91687ae26", "message": "Endtime of segments fixed in the editor", "committedDate": "2020-12-03T12:37:01Z", "type": "commit"}, {"oid": "1d7748e483e6022792c413c92685b8c91687ae26", "url": "https://github.com/opencast/opencast/commit/1d7748e483e6022792c413c92685b8c91687ae26", "message": "Endtime of segments fixed in the editor", "committedDate": "2020-12-03T12:37:01Z", "type": "forcePushed"}]}