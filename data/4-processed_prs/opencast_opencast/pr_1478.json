{"pr_number": 1478, "pr_title": "Studio upload optimized workflows", "pr_createdAt": "2020-03-19T20:54:28Z", "pr_url": "https://github.com/opencast/opencast/pull/1478", "timeline": [{"oid": "c4a82fb9df9dd6b02d6b6a81246fb5a1aec996b4", "url": "https://github.com/opencast/opencast/commit/c4a82fb9df9dd6b02d6b6a81246fb5a1aec996b4", "message": "Fast studio workflow and encoding profiles created\n\nThe default opencast workflows have some issues processing video files created with opencast studio. As we also want an simplified workflow to process these files as fast as possible, I've created a new workflow to cover this case. The encoding profiles are optimized for performance and fixes the issues with uncommon video resolutions and variable frame rate.", "committedDate": "2020-03-19T20:52:45Z", "type": "commit"}, {"oid": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "url": "https://github.com/opencast/opencast/commit/88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "message": "Opencast Studio workflow set to studio-upload", "committedDate": "2020-03-19T20:53:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0MzY0OA==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395343648", "bodyText": "This is identical to the simpler\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              -filter:v scale=w=1280:h='trunc(1280/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\\n          \n          \n            \n              -filter:v scale=w=1280:h='trunc(1280/dar/2)*2',setsar=1,fps=25 \\\n          \n      \n    \n    \n  \n\n\u2026though I'm wondering if it's better to use\u2026\n-filter:v scale=w=1280:720:force_original_aspect_ratio=decrease:force_divisible_by=2,fps=25 \\\n\n\u2026which ensures that the video size does not exceed 1280:720?\nThe same goes for the other filters.", "author": "lkiesow", "createdAt": "2020-03-19T22:00:14Z", "path": "etc/encoding/adaptive-streaming-movies.properties", "diffHunk": "@@ -93,3 +93,45 @@ profile.adaptive-parallel.http.ffmpeg.command = -i #{in.video.path} \\\n   -c:v libx264 -crf 23 -maxrate 800k -bufsize 800k -profile:v high -level 4.0 -pix_fmt yuv420p \\\n     -x264opts keyint=25:min-keyint=25:no-scenecut -movflags +faststart -vf scale='-2:min(ih\\\\,480)',fps=fps=25 \\\n     -c:a aac -b:a 32k -ac 1 -f mp4 #{out.dir}/#{out.name}#{out.suffix.480p-quality}\n+\n+profile.studio.adaptive-parallel.http.name = parallel encoding of studio video in multiple qualities for adaptive streaming\n+profile.studio.adaptive-parallel.http.input = visual\n+profile.studio.adaptive-parallel.http.output = visual\n+profile.studio.adaptive-parallel.http.suffix.2160p-quality = -2160p-quality.mp4\n+profile.studio.adaptive-parallel.http.suffix.1440p-quality = -1440p-quality.mp4\n+profile.studio.adaptive-parallel.http.suffix.1080p-quality = -1080p-quality.mp4\n+profile.studio.adaptive-parallel.http.suffix.720p-quality = -720p-quality.mp4\n+profile.studio.adaptive-parallel.http.suffix.360p-quality = -360p-quality.mp4\n+profile.studio.adaptive-parallel.http.jobload = 4\n+profile.studio.adaptive-parallel.http.ffmpeg.command.if-height-geq-2160 = \\\n+  -filter:v scale=w=3840:h='trunc(3840/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\\n+    -c:v libx264 -preset slower -tune film -pix_fmt yuv420p \\\n+    -x264opts keyint=25:min-keyint=25:no-scenecut -crf 20 -maxrate 14800k -bufsize 18000k \\\n+    -c:a aac -b:a 196k -ac 2 \\\n+    -movflags +faststart #{out.dir}/#{out.name}#{out.suffix.2160p-quality}\n+profile.studio.adaptive-parallel.http.ffmpeg.command.if-height-geq-1440 = \\\n+  -filter:v scale=w=2560:h='trunc(2560/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\\n+    -c:v libx264 -preset slower -tune film -pix_fmt yuv420p \\\n+    -x264opts keyint=25:min-keyint=25:no-scenecut -crf 20 -maxrate 9800k -bufsize 14000k \\\n+    -c:a aac -b:a 128k -ac 2 \\\n+    -movflags +faststart #{out.dir}/#{out.name}#{out.suffix.1440p-quality}\n+profile.studio.adaptive-parallel.http.ffmpeg.command.if-height-geq-1080 = \\\n+  -filter:v scale=w=1920:h='trunc(1920/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\\n+    -c:v libx264 -preset slower -tune film -pix_fmt yuv420p \\\n+    -x264opts keyint=25:min-keyint=25:no-scenecut -crf 20 -maxrate 4800k -bufsize 8000k \\\n+    -c:a aac -b:a 128k -ac 2 \\\n+    -movflags +faststart #{out.dir}/#{out.name}#{out.suffix.1080p-quality}\n+profile.studio.adaptive-parallel.http.ffmpeg.command = -i #{in.video.path} \\\n+  #{if-height-geq-2160} \\\n+  #{if-height-geq-1440} \\\n+  #{if-height-geq-1080} \\\n+  -filter:v scale=w=1280:h='trunc(1280/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NDE3MQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395354171", "bodyText": "You included an fps filter in the pre-processing anyway, so there is no need to include it here again, is there?", "author": "lkiesow", "createdAt": "2020-03-19T22:26:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0MzY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3ODk5OQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395378999", "bodyText": "The latest ffmpeg build from rpmfusion on fedora do not know the paramater force_divisible_by (anymore?!)\n[Parsed_scale_0 @ 0x55c95e30efc0] Option 'force_divisible_by' not found\n\nThe way I made is complicatad but works on allmost every ffmpeg builds. Try to encode a video with an resolution of 1920x1058 without this option.", "author": "wsmirnow", "createdAt": "2020-03-19T23:43:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0MzY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3OTUxMw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395379513", "bodyText": "in this specific case we can remove the fps option.", "author": "wsmirnow", "createdAt": "2020-03-19T23:45:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0MzY0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4OTY4OQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395389689", "bodyText": "Checked and it's not yet included in the FFmpeg version in RPMFusion. So, it might make sense to wait a bit to introduce that and maybe make it a change for Opencast 9 later.\nBut I would still apply the suggestion above because that does not change the semantics of your command just the syntax and makes it easier to understand (less unnecessary calculations and no setting defaults)", "author": "lkiesow", "createdAt": "2020-03-20T00:25:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0MzY0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NTgxOQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395345819", "bodyText": "If it's for studio, then it should not have these tags\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              <tags>\n          \n          \n            \n                <tag>archive</tag>\n          \n          \n            \n                <tag>upload</tag>\n          \n          \n            \n              </tags>", "author": "lkiesow", "createdAt": "2020-03-19T22:05:40Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM3OTc3NQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395379775", "bodyText": "If it's for studio, then it should not have these tags\n\nThese tags are important for the case studio files should be ingested manually using download option of the video files in studio.", "author": "wsmirnow", "createdAt": "2020-03-19T23:46:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NTgxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM5MDgyNQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395390825", "bodyText": "I think it's confusing to have this additional workflow but we could remove the tags and keep the configuration panel. That would make it easy for users to make it visible if they want to.", "author": "lkiesow", "createdAt": "2020-03-20T00:30:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NTgxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgwMjk0NQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395802945", "bodyText": "I was outvoted on this. Let's keep this as it is", "author": "lkiesow", "createdAt": "2020-03-20T17:56:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NTgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NjI4MQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395346281", "bodyText": "This is unnecessary for studio as well\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              <configuration_panel>\n          \n          \n            \n                <![CDATA[\n          \n          \n            \n                  <div id=\"workflow-configuration\">\n          \n          \n            \n                    <fieldset>\n          \n          \n            \n                      <legend>Processing configuration:</legend>\n          \n          \n            \n                      <ul>\n          \n          \n            \n                        <li>\n          \n          \n            \n                          <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n          \n          \n            \n                          <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n          \n          \n            \n                        </li>\n          \n          \n            \n                      </ul>\n          \n          \n            \n                    </fieldset>\n          \n          \n            \n                    <fieldset>\n          \n          \n            \n                      <legend>Publish right away to</legend>\n          \n          \n            \n                      <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n          \n          \n            \n                        <li>\n          \n          \n            \n                          <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n          \n          \n            \n                          <label for=\"publishToSearch\">Opencast Index</label>\n          \n          \n            \n                          <fieldset>\n          \n          \n            \n                            <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n          \n          \n            \n                              <li>\n          \n          \n            \n                                <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n          \n          \n            \n                                <label for=\"publishToEngage\">Opencast Media Module</label>\n          \n          \n            \n                              </li>\n          \n          \n            \n                              <li>\n          \n          \n            \n                                <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n          \n          \n            \n                                <label for=\"publishToAws\">AWS</label>\n          \n          \n            \n                              </li>\n          \n          \n            \n                            </ul>\n          \n          \n            \n                          </fieldset>\n          \n          \n            \n                        </li>\n          \n          \n            \n                        <li>\n          \n          \n            \n                          <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n          \n          \n            \n                          <label for=\"publishToApi\">External Applications</label>\n          \n          \n            \n                        </li>\n          \n          \n            \n                        <li>\n          \n          \n            \n                          <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n          \n          \n            \n                          <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n          \n          \n            \n                        </li>\n          \n          \n            \n                      </ul>\n          \n          \n            \n                    </fieldset>\n          \n          \n            \n                  </div>\n          \n          \n            \n            \n          \n          \n            \n                  <script type=\"text/javascript\">\n          \n          \n            \n                    $('input[name=\"holdOrPublishToggle\"]').change(function(){\n          \n          \n            \n                        var show = $(this).val() == 'publish';\n          \n          \n            \n                        $('#publicationConfigurationPanel').toggle(show);\n          \n          \n            \n                        $('#straightToPublishing').val(show);\n          \n          \n            \n                        // Trigger update of the schedule's workflow config\n          \n          \n            \n                        $('#straightToPublishing').change();\n          \n          \n            \n                    });\n          \n          \n            \n            \n          \n          \n            \n                    <!-- called on loading an exisiting event -->\n          \n          \n            \n                    $('#straightToPublishing').bind('updateConfigUI', function() {\n          \n          \n            \n                        var publish = $(this).val().toLowerCase() === 'true';\n          \n          \n            \n                        $('#publicationConfigurationPanel').toggle(publish);\n          \n          \n            \n                        $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n          \n          \n            \n                    });\n          \n          \n            \n            \n          \n          \n            \n                    <!-- Remove the line below if you wish to publish to AWS S3 -->\n          \n          \n            \n                    $('#publishToAws').prop('disabled', true);\n          \n          \n            \n                    <!-- Remove the line above if you wish to publish to AWS S3 -->\n          \n          \n            \n            \n          \n          \n            \n                    awsWasDisabled = $('#publishToAws').prop('disabled');\n          \n          \n            \n                    awsWasChecked = $('#publishToAws').prop('checked');\n          \n          \n            \n                    engageWasChecked = $('#publishToEngage').prop('checked');\n          \n          \n            \n            \n          \n          \n            \n                    $('input[name=\"publishToSearch\"]').change(function(){\n          \n          \n            \n                        if ($(this).is(':checked')) {\n          \n          \n            \n                          $('#publishToAws').prop('checked', awsWasChecked);\n          \n          \n            \n                          $('#publishToEngage').prop('checked', engageWasChecked);\n          \n          \n            \n                          $('#publishToAws').prop('disabled', awsWasDisabled);\n          \n          \n            \n                          $('#publishToEngage').prop('disabled', false);\n          \n          \n            \n                        } else if (!$(this).is(':checked')) {\n          \n          \n            \n                          awsWasChecked = $('#publishToAws').prop('checked');\n          \n          \n            \n                          engageWasChecked = $('#publishToEngage').prop('checked');\n          \n          \n            \n            \n          \n          \n            \n                          $('#publishToAws').prop('disabled', true);\n          \n          \n            \n                          $('#publishToEngage').prop('disabled', true);\n          \n          \n            \n                          $('#publishToAws').prop('checked', false);\n          \n          \n            \n                          $('#publishToEngage').prop('checked', false);\n          \n          \n            \n                        }\n          \n          \n            \n                    });\n          \n          \n            \n                  </script>\n          \n          \n            \n                ]]>\n          \n          \n            \n              </configuration_panel>", "author": "lkiesow", "createdAt": "2020-03-19T22:06:51Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MDYwNA==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395380604", "bodyText": "But neccessarry if we want to use the workflow to proccess studio videos manually upload by the Admin UI user.", "author": "wsmirnow", "createdAt": "2020-03-19T23:49:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0NjI4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0ODcwMg==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395348702", "bodyText": "It's a bit weird to add the tag to */source here only to remove it later. You could even spare yourself this whole operation by just snapshotting the ACLs and dublincore catalogs according to their flavors later.", "author": "lkiesow", "createdAt": "2020-03-19T22:12:54Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MjY5Mw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395382693", "bodyText": "I know, it's weird. But in case some operation fail before we take the first snapshot for some reason, you will be save. After you've sucessfully transcoded the source material, the flavor (and tag) will be switched.", "author": "wsmirnow", "createdAt": "2020-03-19T23:56:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0ODcwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0OTUxNQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395349515", "bodyText": "Why create a snapshot here? You create another one later anyway.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n                <operation\n          \n          \n            \n                    id=\"snapshot\"\n          \n          \n            \n                    fail-on-error=\"true\"\n          \n          \n            \n                    exception-handler-workflow=\"partial-error\"\n          \n          \n            \n                    description=\"Archiving\">\n          \n          \n            \n                  <configurations>\n          \n          \n            \n                    <configuration key=\"source-tags\">archive</configuration>\n          \n          \n            \n                  </configurations>\n          \n          \n            \n                </operation>", "author": "lkiesow", "createdAt": "2020-03-19T22:14:50Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"include\"\n+        description=\"Include studio tracks normalization tasks\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-transcode-studio-tracks</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        fail-on-error=\"true\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MzE4Mw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395383183", "bodyText": "Cause of loosing the data if some operation later fail.", "author": "wsmirnow", "createdAt": "2020-03-19T23:58:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM0OTUxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1MDQ5MA==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395350490", "bodyText": "It makes no sense to limit this to 1080p here but then include 2.5k and 4k encoding later.", "author": "lkiesow", "createdAt": "2020-03-19T22:17:19Z", "path": "etc/encoding/opencast-movies.properties", "diffHunk": "@@ -168,3 +168,19 @@ profile.import.silent.input = nothing\n profile.import.silent.output = audio\n profile.import.silent.suffix = -silent-audio.mp4\n profile.import.silent.ffmpeg.command = -strict -2 -filter_complex aevalsrc=0::d=#{time} -c:a aac -b:a 8k #{out.dir}/#{out.name}#{out.suffix}\n+\n+# Transcode videos generated with opencast studio to cover some issues\n+# The video resolution should be reduced to maximum of 1080p.", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1MzExMg==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395353112", "bodyText": "This should be identical to\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              -filter:v scale=w='trunc(min(max(1920\\\\,in_w)\\\\,in_w)/2)*2':'trunc(out_w/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\\n          \n          \n            \n              -filter:v scale=w='trunc(min(max(1920\\\\,in_w)\\\\,in_w)/2)*2':'trunc(out_w/dar/2)*2':setsar=1,fps=25 \\\n          \n      \n    \n    \n  \n\n\nbut then again, wouldn't it be easier to use\n```\n -filter:v scale=1920:1080:force_original_aspect_ratio=decrease:force_divisible_by=2,fps=25\n```", "author": "lkiesow", "createdAt": "2020-03-19T22:24:00Z", "path": "etc/encoding/opencast-movies.properties", "diffHunk": "@@ -168,3 +168,19 @@ profile.import.silent.input = nothing\n profile.import.silent.output = audio\n profile.import.silent.suffix = -silent-audio.mp4\n profile.import.silent.ffmpeg.command = -strict -2 -filter_complex aevalsrc=0::d=#{time} -c:a aac -b:a 8k #{out.dir}/#{out.name}#{out.suffix}\n+\n+# Transcode videos generated with opencast studio to cover some issues\n+# The video resolution should be reduced to maximum of 1080p.\n+# The video resolution should be dividable by 2 as the x264 encoder expect this.\n+# the framerate should be fixed t0 25\n+profile.scale.fhd.framerate.fix.name = Scale video to maximum resolution of FHD and set framerate to 25\n+profile.scale.fhd.framerate.fix.input = stream\n+profile.scale.fhd.framerate.fix.output = audiovisual\n+profile.scale.fhd.framerate.fix.suffix = .mp4\n+profile.scale.fhd.framerate.fix.ffmpeg.command = -i #{in.video.path} \\\n+  -max_muxing_queue_size 1000 \\\n+  -filter:v scale=w='trunc(min(max(1920\\\\,in_w)\\\\,in_w)/2)*2':'trunc(out_w/dar/2)*2':force_original_aspect_ratio=disable,setsar=1/1,fps=fps=25 \\", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NTk3MA==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395355970", "bodyText": "Just wondering if you couldn't do the initial re-encoding in here instead of adding another encode operation?", "author": "lkiesow", "createdAt": "2020-03-19T22:31:44Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"include\"\n+        description=\"Include studio tracks normalization tasks\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-transcode-studio-tracks</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        fail-on-error=\"true\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4Mzc2Ng==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395383766", "bodyText": "This operations will be skipped in most cases. Opencast studio pack the audio stream in both video files on dualstream recording. But just in case\u2026", "author": "wsmirnow", "createdAt": "2020-03-20T00:00:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NTk3MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NjgxOQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395356819", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <configuration key=\"source-tags\"></configuration>", "author": "lkiesow", "createdAt": "2020-03-19T22:33:58Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"include\"\n+        description=\"Include studio tracks normalization tasks\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-transcode-studio-tracks</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        fail-on-error=\"true\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presenter (camera) audio and video work versions\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presenter/source</configuration>\n+        <configuration key=\"target-flavor\">presenter/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presentation (screen) audio and video work version\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/source</configuration>\n+        <configuration key=\"target-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Create preview artifacts -->\n+\n+    <operation\n+        id=\"include\"\n+        if=\"NOT ${skipEditorPreview}\"\n+        description=\"Prepare preview versions of the recording\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-preview</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"encode\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Encoding videos to delivery formats\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"target-flavor\">*/delivery</configuration>\n+        <configuration key=\"target-tags\">engage-download,engage-streaming</configuration>\n+        <configuration key=\"encoding-profile\">studio.adaptive-parallel.http</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Encode to engage player preview images -->\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating player preview image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4NDc3MQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395384771", "bodyText": "This is an copy paste artifact from existing workflow I've copied from, see \n  \n    \n      opencast/etc/workflows/partial-publish.xml\n    \n    \n         Line 157\n      in\n      5144e24\n    \n    \n    \n    \n\n        \n          \n           <configuration key=\"source-tags\"></configuration> \n        \n    \n  \n\n\nWe can remove it.", "author": "wsmirnow", "createdAt": "2020-03-20T00:04:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NjgxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NzM4Nw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395357387", "bodyText": "Why do you create the image in the first place if you remove the tag here so it's never being used?", "author": "lkiesow", "createdAt": "2020-03-19T22:35:46Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"include\"\n+        description=\"Include studio tracks normalization tasks\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-transcode-studio-tracks</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        fail-on-error=\"true\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presenter (camera) audio and video work versions\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presenter/source</configuration>\n+        <configuration key=\"target-flavor\">presenter/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presentation (screen) audio and video work version\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/source</configuration>\n+        <configuration key=\"target-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Create preview artifacts -->\n+\n+    <operation\n+        id=\"include\"\n+        if=\"NOT ${skipEditorPreview}\"\n+        description=\"Prepare preview versions of the recording\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-preview</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"encode\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Encoding videos to delivery formats\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"target-flavor\">*/delivery</configuration>\n+        <configuration key=\"target-tags\">engage-download,engage-streaming</configuration>\n+        <configuration key=\"encoding-profile\">studio.adaptive-parallel.http</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Encode to engage player preview images -->\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating player preview image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>\n+        <configuration key=\"target-flavor\">*/player+preview</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+        <configuration key=\"encoding-profile\">player-preview.http</configuration>\n+        <configuration key=\"time\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Encode to feed cover images -->\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating feed cover image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>\n+        <configuration key=\"target-flavor\">*/feed+preview</configuration>\n+        <configuration key=\"target-tags\">atom,rss</configuration>\n+        <configuration key=\"encoding-profile\">feed-cover.http</configuration>\n+        <configuration key=\"time\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Create a cover image with the default template -->\n+\n+    <operation\n+        id=\"tag\"\n+        description=\"Removing unneeded presenter-cover from download publication\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">presenter/player+preview</configuration>\n+        <configuration key=\"target-tags\">-engage-download</configuration>\n+      </configurations>\n+    </operation>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4NTUyNw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395385527", "bodyText": "Same as before, copy paste issue. But the question is, does the player show the presenter preview image?", "author": "wsmirnow", "createdAt": "2020-03-20T00:07:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1NzM4Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1ODQ1NQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395358455", "bodyText": "This makes a lot of sense in a lot of cases but is not a safe choice in every case\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    <configuration key=\"delete-external\">false</configuration>\n          \n          \n            \n                    <configuration key=\"delete-external\">true</configuration>", "author": "lkiesow", "createdAt": "2020-03-19T22:39:04Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"inspect\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Inspecting audio and video streams\">\n+      <configurations>\n+        <configuration key=\"overwrite\">false</configuration>\n+        <configuration key=\"accept-no-media\">false</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"series\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Applying series dublincore catalogs and access control entries\">\n+      <configurations>\n+        <!-- <configuration key=\"series\">[put your fixed series id here]</configuration> -->\n+        <configuration key=\"attach\">*</configuration>\n+        <configuration key=\"apply-acl\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Tagging source material for archival\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">dublincore/*,security/*,*/source</configuration>\n+        <configuration key=\"target-tags\">+archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"include\"\n+        description=\"Include studio tracks normalization tasks\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-transcode-studio-tracks</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        fail-on-error=\"true\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presenter (camera) audio and video work versions\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presenter/source</configuration>\n+        <configuration key=\"target-flavor\">presenter/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"prepare-av\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Preparing presentation (screen) audio and video work version\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/source</configuration>\n+        <configuration key=\"target-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-tags\">-archive</configuration>\n+        <configuration key=\"rewrite\">false</configuration>\n+        <configuration key=\"audio-muxing-source-flavors\">*/?,*/*</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Create preview artifacts -->\n+\n+    <operation\n+        id=\"include\"\n+        if=\"NOT ${skipEditorPreview}\"\n+        description=\"Prepare preview versions of the recording\">\n+      <configurations>\n+        <configuration key=\"workflow-id\">partial-preview</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"encode\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Encoding videos to delivery formats\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"target-flavor\">*/delivery</configuration>\n+        <configuration key=\"target-tags\">engage-download,engage-streaming</configuration>\n+        <configuration key=\"encoding-profile\">studio.adaptive-parallel.http</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Encode to engage player preview images -->\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating player preview image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>\n+        <configuration key=\"target-flavor\">*/player+preview</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+        <configuration key=\"encoding-profile\">player-preview.http</configuration>\n+        <configuration key=\"time\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Encode to feed cover images -->\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating feed cover image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>\n+        <configuration key=\"target-flavor\">*/feed+preview</configuration>\n+        <configuration key=\"target-tags\">atom,rss</configuration>\n+        <configuration key=\"encoding-profile\">feed-cover.http</configuration>\n+        <configuration key=\"time\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Create a cover image with the default template -->\n+\n+    <operation\n+        id=\"tag\"\n+        description=\"Removing unneeded presenter-cover from download publication\">\n+      <configurations>\n+        <configuration key=\"source-flavors\">presenter/player+preview</configuration>\n+        <configuration key=\"target-tags\">-engage-download</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating player preview image\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presenter/prepared</configuration>\n+        <configuration key=\"source-tags\"></configuration>\n+        <configuration key=\"target-flavor\">presenter/coverbackground</configuration>\n+        <configuration key=\"encoding-profile\">player-preview.http</configuration>\n+        <configuration key=\"time\">1</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"cover-image\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Create a cover image\">\n+      <configurations>\n+        <configuration key=\"stylesheet\">file://${karaf.etc}/branding/coverimage.xsl</configuration>\n+        <configuration key=\"width\">1920</configuration>\n+        <configuration key=\"height\">1080</configuration>\n+        <configuration key=\"posterimage-flavor\">presenter/coverbackground</configuration>\n+        <configuration key=\"target-flavor\">presenter/player+preview</configuration>\n+        <configuration key=\"target-tags\">archive, engage-download</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Generate timeline preview images -->\n+\n+    <operation\n+        id=\"timelinepreviews\"\n+        fail-on-error=\"false\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Creating timeline preview images\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">*/prepared</configuration>\n+        <configuration key=\"target-flavor\">*/timeline+preview</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+        <configuration key=\"image-count\">100</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n+    <!-- Segment video streams and extract metadata                        -->\n+    <!--                                                                   -->\n+    <!-- Apply the video segmentation algorithm to the presentation tracks -->\n+    <!-- and extract segment preview images and metadata.                  -->\n+    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n+\n+    <!-- Run the videosegmentation -->\n+\n+    <operation\n+        id=\"segment-video\"\n+        fail-on-error=\"false\"\n+        description=\"Detecting slide transitions in presentation track\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Generate segment preview images -->\n+\n+    <operation\n+        id=\"segmentpreviews\"\n+        fail-on-error=\"false\"\n+        description=\"Creating preview images for presentation segments\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-flavor\">presentation/segment+preview</configuration>\n+        <configuration key=\"reference-flavor\">presentation/delivery</configuration>\n+        <configuration key=\"reference-tags\">engage-download</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+        <configuration key=\"encoding-profile\">player-slides.http</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Extract text form slide preview images -->\n+\n+    <operation\n+        id=\"extract-text\"\n+        fail-on-error=\"false\"\n+        description=\"Extracting text from presentation segments\">\n+      <configurations>\n+        <configuration key=\"source-flavor\">presentation/prepared</configuration>\n+        <configuration key=\"target-tags\">engage-download</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n+    <!-- Publish to publication channels                                   -->\n+    <!--                                                                   -->\n+    <!-- Send the encoded material along with the metadata to the          -->\n+    <!-- publication channels.                                             -->\n+    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->\n+\n+    <!-- Publish to engage player -->\n+\n+    <operation\n+        id=\"publish-engage\"\n+        if=\"${publishToEngage}\"\n+        max-attempts=\"2\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Publishing to Opencast Media Module\">\n+      <configurations>\n+        <configuration key=\"download-source-flavors\">dublincore/*,security/*</configuration>\n+        <configuration key=\"download-source-tags\">engage-download,atom,rss,mobile</configuration>\n+        <configuration key=\"streaming-source-tags\">engage-streaming</configuration>\n+        <configuration key=\"check-availability\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"publish-aws\"\n+        if=\"${publishToAws}\"\n+        max-attempts=\"2\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Publishing to Amazon Web Services\">\n+      <configurations>\n+        <configuration key=\"download-source-flavors\">dublincore/*,security/*</configuration>\n+        <configuration key=\"download-source-tags\">engage-download,atom,rss,mobile</configuration>\n+        <configuration key=\"streaming-source-tags\">engage-streaming</configuration>\n+        <configuration key=\"strategy\">merge</configuration>\n+        <configuration key=\"check-availability\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"publish-configure\"\n+        if=\"${publishToApi}\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Publish to external api publication channel\">\n+      <configurations>\n+        <configuration key=\"channel-id\">api</configuration>\n+        <configuration key=\"mimetype\">application/json</configuration>\n+        <configuration key=\"source-tags\">engage-download,engage-streaming</configuration>\n+        <configuration key=\"url-pattern\">http://localhost:8080/api/events/${event_id}</configuration>\n+        <configuration key=\"with-published-elements\">false</configuration>\n+        <configuration key=\"check-availability\">true</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <!-- Publish to OAI-PMH -->\n+\n+    <operation\n+        id=\"publish-oaipmh\"\n+        if=\"${publishToOaiPmh}\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Publish to OAI-PMH Default Repository\">\n+      <configurations>\n+        <configuration key=\"download-flavors\">dublincore/*,security/*</configuration>\n+        <configuration key=\"download-tags\">engage-download,atom,rss</configuration>\n+        <configuration key=\"streaming-tags\">engage-streaming</configuration>\n+        <configuration key=\"check-availability\">true</configuration>\n+        <configuration key=\"repository\">default</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"tag\"\n+        fail-on-error=\"false\"\n+        description=\"Remove processing tags\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+        <configuration key=\"target-tags\">-engage-download</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"snapshot\"\n+        exception-handler-workflow=\"partial-error\"\n+        description=\"Archiving\">\n+      <configurations>\n+        <configuration key=\"source-tags\">archive</configuration>\n+      </configurations>\n+    </operation>\n+\n+    <operation\n+        id=\"cleanup\"\n+        fail-on-error=\"false\"\n+        description=\"Remove temporary processing artifacts\">\n+      <configurations>\n+        <configuration key=\"preserve-flavors\">security/*</configuration>\n+        <configuration key=\"delete-external\">false</configuration>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4NTc3Mw==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395385773", "bodyText": "The not save case is not really exists on studio uploads.", "author": "wsmirnow", "createdAt": "2020-03-20T00:08:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1ODQ1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1OTEyNg==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395359126", "bodyText": "What are these for?", "author": "lkiesow", "createdAt": "2020-03-19T22:40:56Z", "path": "etc/workflows/studio-upload.xml", "diffHunk": "@@ -0,0 +1,448 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n+<definition xmlns=\"http://workflow.opencastproject.org\">\n+\n+  <id>studio-upload</id>\n+  <title>Studio Upload</title>\n+  <tags>\n+    <tag>archive</tag>\n+    <tag>upload</tag>\n+  </tags>\n+  <description>\n+    A simple and fast workflow for publishing videos created by Opencast Studio.\n+  </description>\n+\n+  <configuration_panel>\n+    <![CDATA[\n+      <div id=\"workflow-configuration\">\n+        <fieldset>\n+          <legend>Processing configuration:</legend>\n+          <ul>\n+            <li>\n+              <input id=\"skipEditorPreview\" name=\"skipEditorPreview\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"skipEditorPreview\">Skip generating editor preview</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+        <fieldset>\n+          <legend>Publish right away to</legend>\n+          <ul id=\"publicationConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+            <li>\n+              <input id=\"publishToSearch\" name=\"publishToSearch\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToSearch\">Opencast Index</label>\n+              <fieldset>\n+                <ul id=\"searchConfigurationPanel\" class=\"workflow-configuration-subpanel\">\n+                  <li>\n+                    <input id=\"publishToEngage\" name=\"searchPublishType\" type=\"radio\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+                    <label for=\"publishToEngage\">Opencast Media Module</label>\n+                  </li>\n+                  <li>\n+                    <input id=\"publishToAws\" name=\"searchPublishType\" type=\"radio\" class=\"configField\" value=\"true\"/>\n+                    <label for=\"publishToAws\">AWS</label>\n+                  </li>\n+                </ul>\n+              </fieldset>\n+            </li>\n+            <li>\n+              <input id=\"publishToApi\" name=\"publishToApi\" type=\"checkbox\" checked=\"checked\" class=\"configField\" value=\"true\" />\n+              <label for=\"publishToApi\">External Applications</label>\n+            </li>\n+            <li>\n+              <input id=\"publishToOaiPmh\" name=\"publishToOaiPmh\" type=\"checkbox\" class=\"configField\" value=\"false\" />\n+              <label for=\"publishToOaiPmh\">OAI-PMH Default Repository</label>\n+            </li>\n+          </ul>\n+        </fieldset>\n+      </div>\n+\n+      <script type=\"text/javascript\">\n+        $('input[name=\"holdOrPublishToggle\"]').change(function(){\n+            var show = $(this).val() == 'publish';\n+            $('#publicationConfigurationPanel').toggle(show);\n+            $('#straightToPublishing').val(show);\n+            // Trigger update of the schedule's workflow config\n+            $('#straightToPublishing').change();\n+        });\n+\n+        <!-- called on loading an exisiting event -->\n+        $('#straightToPublishing').bind('updateConfigUI', function() {\n+            var publish = $(this).val().toLowerCase() === 'true';\n+            $('#publicationConfigurationPanel').toggle(publish);\n+            $('#holdOrPublishToggle_' + (publish ? 'publish':'hold')).prop('checked', 'checked');\n+        });\n+\n+        <!-- Remove the line below if you wish to publish to AWS S3 -->\n+        $('#publishToAws').prop('disabled', true);\n+        <!-- Remove the line above if you wish to publish to AWS S3 -->\n+\n+        awsWasDisabled = $('#publishToAws').prop('disabled');\n+        awsWasChecked = $('#publishToAws').prop('checked');\n+        engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+        $('input[name=\"publishToSearch\"]').change(function(){\n+            if ($(this).is(':checked')) {\n+              $('#publishToAws').prop('checked', awsWasChecked);\n+              $('#publishToEngage').prop('checked', engageWasChecked);\n+              $('#publishToAws').prop('disabled', awsWasDisabled);\n+              $('#publishToEngage').prop('disabled', false);\n+            } else if (!$(this).is(':checked')) {\n+              awsWasChecked = $('#publishToAws').prop('checked');\n+              engageWasChecked = $('#publishToEngage').prop('checked');\n+\n+              $('#publishToAws').prop('disabled', true);\n+              $('#publishToEngage').prop('disabled', true);\n+              $('#publishToAws').prop('checked', false);\n+              $('#publishToEngage').prop('checked', false);\n+            }\n+        });\n+      </script>\n+    ]]>\n+  </configuration_panel>\n+\n+  <operations>\n+\n+    <!-- Apply the default workflow configuration -->\n+\n+    <operation\n+        id=\"defaults\"\n+        description=\"Applying default configuration values\">\n+      <configurations>\n+        <configuration key=\"skipEditorPreview\">true</configuration>\n+        <configuration key=\"publishToEngage\">true</configuration>\n+        <configuration key=\"publishToApi\">true</configuration>\n+        <configuration key=\"publishToOaiPmh\">false</configuration>\n+        <configuration key=\"publishToAws\">false</configuration>\n+        <configuration key=\"thumbnailType\">0</configuration>\n+        <configuration key=\"thumbnailPosition\">1</configuration>", "originalCommit": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM4MTY5MQ==", "url": "https://github.com/opencast/opencast/pull/1478#discussion_r395381691", "bodyText": "Is the question about the last two properties? They will be expected by the partial-preview (existing) workflow.", "author": "wsmirnow", "createdAt": "2020-03-19T23:53:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTM1OTEyNg=="}], "type": "inlineReview"}, {"oid": "88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "url": "https://github.com/opencast/opencast/commit/88cf1cb583b77a40f81f487a9ab7ff7e033bf676", "message": "Opencast Studio workflow set to studio-upload", "committedDate": "2020-03-19T20:53:02Z", "type": "forcePushed"}, {"oid": "1ffc09a8162ad1db1715c0a494bcffb5a62a7b8c", "url": "https://github.com/opencast/opencast/commit/1ffc09a8162ad1db1715c0a494bcffb5a62a7b8c", "message": "Apply suggestions from code review\r\n\r\nReview fixes\n\nCo-Authored-By: Lars Kiesow <lkiesow@uos.de>", "committedDate": "2020-03-20T18:11:56Z", "type": "commit"}, {"oid": "abbaaf7dde57e635ce083a29da8c446699fe56e7", "url": "https://github.com/opencast/opencast/commit/abbaaf7dde57e635ce083a29da8c446699fe56e7", "message": "adaptive encoding profile optimization", "committedDate": "2020-03-20T18:26:36Z", "type": "commit"}, {"oid": "ed853d8ff1fa0416c2360ef40325547df35c9eef", "url": "https://github.com/opencast/opencast/commit/ed853d8ff1fa0416c2360ef40325547df35c9eef", "message": "Fix Typo In Encoding Profile\n\nThis patch fixes a typo in the filter definition of the encoding profile\nused in the studio workflow.", "committedDate": "2020-03-22T14:44:53Z", "type": "commit"}]}