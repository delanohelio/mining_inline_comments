{"pr_number": 2163, "pr_title": "Added upload progressbar to the LTI upload tool", "pr_createdAt": "2020-12-17T10:17:39Z", "pr_url": "https://github.com/opencast/opencast/pull/2163", "timeline": [{"oid": "14636d36297c4db1ce6f313042ec424ead036f12", "url": "https://github.com/opencast/opencast/commit/14636d36297c4db1ce6f313042ec424ead036f12", "message": "Added upload progressbar", "committedDate": "2020-12-17T10:15:17Z", "type": "commit"}, {"oid": "caaf873d0d6175c90b1080eec4f4ba33e8d8f3bb", "url": "https://github.com/opencast/opencast/commit/caaf873d0d6175c90b1080eec4f4ba33e8d8f3bb", "message": "adding react-bootstrap which was coming from another pull request not yet merged", "committedDate": "2020-12-17T10:33:50Z", "type": "commit"}, {"oid": "a92a63bd171c8b2a8bf842b676d8e927d14c096e", "url": "https://github.com/opencast/opencast/commit/a92a63bd171c8b2a8bf842b676d8e927d14c096e", "message": "syntax error", "committedDate": "2020-12-17T10:51:01Z", "type": "commit"}, {"oid": "aa95b7f5e198e514f2b716dabc0fa6da26e03919", "url": "https://github.com/opencast/opencast/commit/aa95b7f5e198e514f2b716dabc0fa6da26e03919", "message": "updating the lockfile as well, arghh", "committedDate": "2020-12-17T12:02:31Z", "type": "commit"}, {"oid": "e92aed70e07cfd721971392dd8cd9de7dc8e584f", "url": "https://github.com/opencast/opencast/commit/e92aed70e07cfd721971392dd8cd9de7dc8e584f", "message": "update package.json", "committedDate": "2020-12-17T13:03:41Z", "type": "commit"}, {"oid": "a02926bdb619693efec42aa30323ccedb766784c", "url": "https://github.com/opencast/opencast/commit/a02926bdb619693efec42aa30323ccedb766784c", "message": "undoing manual changes to lockfile and using the original files", "committedDate": "2020-12-17T13:10:35Z", "type": "commit"}, {"oid": "c63ca8fe72ca0f9d1aecb54860938d25edf144d3", "url": "https://github.com/opencast/opencast/commit/c63ca8fe72ca0f9d1aecb54860938d25edf144d3", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-01-19T10:43:19Z", "type": "commit"}, {"oid": "eaa2faf8f3dfdabfc89fa6a7851e7c827a09c6ea", "url": "https://github.com/opencast/opencast/commit/eaa2faf8f3dfdabfc89fa6a7851e7c827a09c6ea", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-02-12T07:41:39Z", "type": "commit"}, {"oid": "cccd1a5745682334802712c5af475963a81e02ea", "url": "https://github.com/opencast/opencast/commit/cccd1a5745682334802712c5af475963a81e02ea", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-02-15T15:30:29Z", "type": "commit"}, {"oid": "ff5c363b743caae962e57b8e686616bec5de892a", "url": "https://github.com/opencast/opencast/commit/ff5c363b743caae962e57b8e686616bec5de892a", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-02-26T15:56:31Z", "type": "commit"}, {"oid": "527e06c9aa75eb1335888b75d1cbde56a2ab5a7f", "url": "https://github.com/opencast/opencast/commit/527e06c9aa75eb1335888b75d1cbde56a2ab5a7f", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-03-09T13:11:04Z", "type": "commit"}, {"oid": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "url": "https://github.com/opencast/opencast/commit/17f1adbf04ad4c393251c7986a513cfb7ab04500", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-03-12T09:30:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIyNDIxNA==", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597224214", "bodyText": "This is already listed as devDependency. It's probably not necessary to listr this as runtime dependency as well.", "author": "lkiesow", "createdAt": "2021-03-18T20:35:59Z", "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",\n+    \"http-mock-server\": \"^0.5.2\",", "originalCommit": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5ODcwMDE0MQ==", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r598700141", "bodyText": "These dependencies came from the deeplink PR and are not needed here, removed them.", "author": "kristofkeppens", "createdAt": "2021-03-22T13:11:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIyNDIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMDYzMg==", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597230632", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    console.log(progress)\n          \n          \n            \n                    console.debug(progress)", "author": "lkiesow", "createdAt": "2021-03-18T20:46:33Z", "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {\n+        if (this.state.refreshTimerId !== undefined)\n+            clearInterval(this.state.refreshTimerId);\n+    }\n+\n+    refreshTimer() {\n+        getEventMetadata(this.state.eventId).then((metadataCollection) => {\n+            if (this.state.metadata === undefined || this.state.metadata === \"error\" || metadataCollection.length === 0)\n+                return;\n+\n+            const metadata = metadataCollection[0];\n+            const lockedBefore = this.state.metadata.edited.locked !== undefined;\n+            const lockedAfter = metadata.locked !== undefined;\n+            if (lockedBefore !== lockedAfter) {\n+                this.setState({\n+                    ...this.state,\n+                    metadata: {\n+                        ...this.state.metadata,\n+                        initial: metadata,\n+                        edited: metadata,\n+                    },\n+                });\n+            }\n+        }).catch((_) => {\n+            console.log(\"couldn't retrieve metadata at this time, ignoring...\");\n+        });\n+    }\n+\n+    setUploadPogress(progress: number) {\n+        console.log(progress)", "originalCommit": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjQzNQ==", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232435", "bodyText": "You removed this block in pull request #2263\nThis probably shouldn't be in here, should it?", "author": "lkiesow", "createdAt": "2021-03-18T20:49:39Z", "path": "modules/lti/src/components/Upload.tsx", "diffHunk": "@@ -108,6 +111,42 @@ class TranslatedUpload extends React.Component<UploadProps, UploadState> {\n         }));\n     }\n \n+    componentWillUnmount() {", "originalCommit": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NzIzMjg2OA==", "url": "https://github.com/opencast/opencast/pull/2163#discussion_r597232868", "bodyText": "What do we need to include the engage-ui module for?", "author": "lkiesow", "createdAt": "2021-03-18T20:50:22Z", "path": "modules/lti/package.json", "diffHunk": "@@ -9,10 +9,14 @@\n     \"@fortawesome/react-fontawesome\": \"^0.1.14\",\n     \"axios\": \"^0.21.1\",\n     \"bootstrap\": \"^4.6.0\",\n+    \"dangerously-set-html-content\": \"^1.0.8\",\n+    \"engage-ui\": \"../engage-ui\",", "originalCommit": "17f1adbf04ad4c393251c7986a513cfb7ab04500", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "30d5d8f8e56253842ab057e212b00d56bbc6cb38", "url": "https://github.com/opencast/opencast/commit/30d5d8f8e56253842ab057e212b00d56bbc6cb38", "message": "Fixed PR remarks", "committedDate": "2021-03-22T10:21:22Z", "type": "commit"}, {"oid": "5f6ba4f214d2ae79dda6c93afd0685aa6765afe7", "url": "https://github.com/opencast/opencast/commit/5f6ba4f214d2ae79dda6c93afd0685aa6765afe7", "message": "Remove deleted state", "committedDate": "2021-03-22T10:28:48Z", "type": "commit"}, {"oid": "2b220554e13ec29ec3084cb02176e035c1827a84", "url": "https://github.com/opencast/opencast/commit/2b220554e13ec29ec3084cb02176e035c1827a84", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress", "committedDate": "2021-03-22T10:33:46Z", "type": "commit"}, {"oid": "daeb6b9297063667cf07a1953d9d8f0bc8daa5ef", "url": "https://github.com/opencast/opencast/commit/daeb6b9297063667cf07a1953d9d8f0bc8daa5ef", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress", "committedDate": "2021-03-22T10:40:24Z", "type": "commit"}, {"oid": "7d7e16657445a8c68cb4dfcad4aa7d4e58705766", "url": "https://github.com/opencast/opencast/commit/7d7e16657445a8c68cb4dfcad4aa7d4e58705766", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress", "committedDate": "2021-03-29T12:54:47Z", "type": "commit"}, {"oid": "7e4576a3782c09ce97a3b3be58f501aa09cdf3a0", "url": "https://github.com/opencast/opencast/commit/7e4576a3782c09ce97a3b3be58f501aa09cdf3a0", "message": "Merge branch 'develop' into feature/lti-uploadprogress", "committedDate": "2021-04-30T09:55:43Z", "type": "commit"}, {"oid": "40d6eafdd4ae52560b2fb9fcdf8da1fd422bb6cf", "url": "https://github.com/opencast/opencast/commit/40d6eafdd4ae52560b2fb9fcdf8da1fd422bb6cf", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress", "committedDate": "2021-05-07T14:09:10Z", "type": "commit"}, {"oid": "7084ceb8dc923f12f20f4cc5799f6b292ed054a5", "url": "https://github.com/opencast/opencast/commit/7084ceb8dc923f12f20f4cc5799f6b292ed054a5", "message": "Merge remote-tracking branch 'upstream/develop' into feature/lti-uploadprogress", "committedDate": "2021-05-10T10:52:14Z", "type": "commit"}]}