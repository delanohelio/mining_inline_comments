{"pr_number": 1636, "pr_title": "Support Serverless HLS", "pr_createdAt": "2020-06-10T01:56:38Z", "pr_url": "https://github.com/opencast/opencast/pull/1636", "timeline": [{"oid": "fcca48f6b887be009ca641d064af22a3e333b367", "url": "https://github.com/opencast/opencast/commit/fcca48f6b887be009ca641d064af22a3e333b367", "message": "Serverless HLS\n\n- AdaptivePlaylist track creation and manipulation\n- Adjustment of some workflows to accept source-tags\n- FFmpeg encoding profiles tested on ffmpeg 4.2.3 (requires 4.1+)\n- Composer changes to encode HLS with ffmpeg\n- Encoding profile changes to accept manifest type and mimetype\n- Inspection changes to inspect playlists and add metadata\n- FastHLS.xml as demo workflow", "committedDate": "2020-06-09T23:04:11Z", "type": "commit"}, {"oid": "6992190d1a6c340dc97482647a6049de67af8abe", "url": "https://github.com/opencast/opencast/commit/6992190d1a6c340dc97482647a6049de67af8abe", "message": "Formating and truncated video files", "committedDate": "2020-06-09T23:44:59Z", "type": "commit"}, {"oid": "a1426448420a7b4cee7ec0c6d307712cf2c89cdc", "url": "https://github.com/opencast/opencast/commit/a1426448420a7b4cee7ec0c6d307712cf2c89cdc", "message": "space", "committedDate": "2020-06-10T15:06:15Z", "type": "commit"}, {"oid": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c", "url": "https://github.com/opencast/opencast/commit/ec69541ce21ecafa06e7720d37bf6811fbb9a58c", "message": "javadoc changes", "committedDate": "2020-06-10T19:52:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ==", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r442823455", "bodyText": "@phoebem That delete line is not in DCE's deploy. Is it needed here because the version of OC develop Paella prefers mp4 to hls source?", "author": "karendolan", "createdAt": "2020-06-19T12:54:33Z", "path": "modules/engage-paella-player/src/main/paella-opencast/plugins/es.upv.paella.opencast.loader/03_oc_search_converter.js", "diffHunk": "@@ -258,6 +277,13 @@ class OpencastToPaellaConverter {\n         }\n       }\n     });\n+    // HLS-VOD Where there's a master HLS index, remove all non-master HLS sources\n+    if (hasAdaptiveMasterTrack && currentStream.sources.hls) {\n+      var filteredHls = currentStream.sources.hls.filter(track => track.master);\n+      currentStream.sources.hls = filteredHls;\n+      /****  NOTE: This is a hack to force it to play HLS as a demo, probably wrong, Please fix ****/\n+      delete currentStream.sources.mp4;\n+    }\n ", "originalCommit": "ec69541ce21ecafa06e7720d37bf6811fbb9a58c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MzM4OTAwOA==", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r443389008", "bodyText": "@phoebem, @karendolan In the default configuration mp4 take priority over HLS. You can change this in the config.json. The order in which the loaders appear in the list defines the priority.\nhttps://github.com/opencast/opencast/blob/develop/etc/ui-config/mh_default_org/paella/config.json#L31-L76", "author": "miesgre", "createdAt": "2020-06-22T08:15:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAwODIzMQ==", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r445008231", "bodyText": "@phoebem, @karendolan In the default configuration mp4 take priority over HLS. You can change this in the config.json. The order in which the loaders appear in the list defines the priority.\n\n@miesgre thanks! If we reverse the order in the config to put HLSVideoFactory before Html5VideoFactory, is it true that browsers that do no support HLS, will still fall back to the mp4 sources?", "author": "karendolan", "createdAt": "2020-06-24T16:08:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTAxNTM2OA==", "url": "https://github.com/opencast/opencast/pull/1636#discussion_r445015368", "bodyText": "Yes, Paella uses the first method the browser supports. We are using it in our installation.", "author": "miesgre", "createdAt": "2020-06-24T16:19:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjgyMzQ1NQ=="}], "type": "inlineReview"}, {"oid": "ab2a27392fd7a6d4b67d7ebad27fc105b75792f8", "url": "https://github.com/opencast/opencast/commit/ab2a27392fd7a6d4b67d7ebad27fc105b75792f8", "message": "play HLS if available,but preserve mp4", "committedDate": "2020-06-25T21:39:35Z", "type": "commit"}]}