{"pr_number": 2437, "pr_title": "Replaced DatastoreTemplate with DatastoreOperations", "pr_createdAt": "2020-06-17T02:19:32Z", "pr_url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437", "timeline": [{"oid": "5781a25e34e4fe645fd3bc9eee75f62426222595", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/5781a25e34e4fe645fd3bc9eee75f62426222595", "message": "Replaced DatastoreTemplate with DatastoreOperations", "committedDate": "2020-06-17T02:12:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODE1Nw==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268157", "bodyText": "We should javadoc here, since it's the interface.", "author": "meltsufin", "createdAt": "2020-06-17T04:05:07Z", "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/core/DatastoreOperations.java", "diffHunk": "@@ -260,4 +262,23 @@\n \t * @return result keys\n \t */\n \t<T> Iterable<Key> keyQueryByExample(Example<T> example, DatastoreQueryOptions queryOptions);\n+\n+\t/**\n+\t * Get the {@link DatastoreEntityConverter} used by this template.\n+\t * @return the converter.\n+\t */\n+\tDatastoreEntityConverter getDatastoreEntityConverter();\n+\n+\t/**\n+\t * Finds objects by using a Cloud Datastore query. If the query is a key-query, then keys are\n+\t * returned.\n+\t * @param query the query to execute.\n+\t * @param entityClass the type of object to retrieve.\n+\t * @param <T> the type of object to retrieve.\n+\t * @return a list of the objects found. If no keys could be found the list will be\n+\t * empty.\n+\t */\n+\t<T> DatastoreResultsIterable<?> queryKeysOrEntities(Query query, Class<T> entityClass);\n+\n+\t<A, T> DatastoreResultsIterable<T> queryIterable(Query<A> query, Function<A, T> entityFunc);", "originalCommit": "5781a25e34e4fe645fd3bc9eee75f62426222595", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODI3Ng==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268276", "bodyText": "Unintentional spacing change?", "author": "meltsufin", "createdAt": "2020-06-17T04:05:42Z", "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/query/AbstractDatastoreQuery.java", "diffHunk": "@@ -40,12 +40,12 @@\n \n \tfinal DatastoreQueryMethod queryMethod;\n \n-\tfinal DatastoreTemplate datastoreTemplate;\n+\tfinal DatastoreOperations datastoreTemplate;\n \n \tfinal Class<T> entityType;\n \n \tpublic AbstractDatastoreQuery(DatastoreQueryMethod queryMethod,\n-\t\t\tDatastoreTemplate datastoreTemplate,\n+\t\t\t\t\t\t\tDatastoreOperations datastoreTemplate,", "originalCommit": "5781a25e34e4fe645fd3bc9eee75f62426222595", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODU1MA==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268550", "bodyText": "Shouldn't it be getDatastoreOperations then?", "author": "meltsufin", "createdAt": "2020-06-17T04:06:50Z", "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/query/AbstractDatastoreQuery.java", "diffHunk": "@@ -79,7 +79,7 @@ Object processRawObjectForProjection(Object object) {\n \t\treturn this.queryMethod.getResultProcessor().processResult(object);\n \t}\n \n-\tpublic DatastoreTemplate getDatastoreTemplate() {\n+\tpublic DatastoreOperations getDatastoreTemplate() {", "originalCommit": "5781a25e34e4fe645fd3bc9eee75f62426222595", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTI2ODY0MA==", "url": "https://github.com/spring-cloud/spring-cloud-gcp/pull/2437#discussion_r441268640", "bodyText": "Unintentional spacing change?", "author": "meltsufin", "createdAt": "2020-06-17T04:07:15Z", "path": "spring-cloud-gcp-data-datastore/src/main/java/org/springframework/cloud/gcp/data/datastore/repository/support/DatastoreRepositoryFactory.java", "diffHunk": "@@ -66,7 +66,7 @@\n \t * repositories.\n \t */\n \tDatastoreRepositoryFactory(DatastoreMappingContext datastoreMappingContext,\n-\t\t\tDatastoreTemplate datastoreTemplate) {\n+\t\t\t\t\t\t\tDatastoreOperations datastoreTemplate) {", "originalCommit": "5781a25e34e4fe645fd3bc9eee75f62426222595", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2c905b84eb9a3c578d03f8251396f94ae2b18edd", "url": "https://github.com/spring-cloud/spring-cloud-gcp/commit/2c905b84eb9a3c578d03f8251396f94ae2b18edd", "message": "fixed PR comments", "committedDate": "2020-06-18T14:41:19Z", "type": "commit"}]}