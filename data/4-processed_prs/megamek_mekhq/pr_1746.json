{"pr_number": 1746, "pr_title": "Variable equipment size", "pr_createdAt": "2020-05-07T21:18:28Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1746", "timeline": [{"oid": "bca0649f28189084e687c0fdb9c79caa960b1b74", "url": "https://github.com/MegaMek/mekhq/commit/bca0649f28189084e687c0fdb9c79caa960b1b74", "message": "Added size field to EquipmentPart and MissingEquipmentPart.\n\nRemoved capacity field from LargeCraftAmmoBin to use size field instead.", "committedDate": "2020-05-01T19:46:04Z", "type": "commit"}, {"oid": "8e5417ba1ea74bdc4e01e3fb8884adf50a68d0f3", "url": "https://github.com/MegaMek/mekhq/commit/8e5417ba1ea74bdc4e01e3fb8884adf50a68d0f3", "message": "Use size field when setting EquipmentPart name.", "committedDate": "2020-05-01T19:50:32Z", "type": "commit"}, {"oid": "4b7651f97960bef183086f73079849289770ba7c", "url": "https://github.com/MegaMek/mekhq/commit/4b7651f97960bef183086f73079849289770ba7c", "message": "Fix Drone carrier control system and MASH equipment part costs.", "committedDate": "2020-05-01T20:25:58Z", "type": "commit"}, {"oid": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "url": "https://github.com/MegaMek/mekhq/commit/2881869b9d25aa0144cddb51e7dc72f60a974f11", "message": "Merge remote-tracking branch 'origin/master' into variable_equipment_size", "committedDate": "2020-05-07T21:10:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMjEwNw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421802107", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n          \n          \n            \n                            MekHqXmlUtil.escape(type.getInternalName()));\n          \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\", type.getInternalName());", "author": "Windchild292", "createdAt": "2020-05-07T21:21:52Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/BattleArmorEquipmentPart.java", "diffHunk": "@@ -81,22 +82,12 @@ public EquipmentPart clone() {\n     @Override\n     public void writeToXml(PrintWriter pw1, int indent) {\n         writeToXmlBegin(pw1, indent);\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<equipmentNum>\"\n-                +equipmentNum\n-                +\"</equipmentNum>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<typeName>\"\n-                +MekHqXmlUtil.escape(type.getInternalName())\n-                +\"</typeName>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<equipTonnage>\"\n-                +equipTonnage\n-                +\"</equipTonnage>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<trooper>\"\n-                +trooper\n-                +\"</trooper>\");\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"equipmentNum\", equipmentNum);\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n+                MekHqXmlUtil.escape(type.getInternalName()));", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMjI2Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421802263", "bodyText": "Strings are always escaped, so no need to call it here.", "author": "Windchild292", "createdAt": "2020-05-07T21:22:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMjEwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMjc3OA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421802778", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            && getType().equals(((BattleArmorEquipmentPart)part).getType())\n          \n          \n            \n                            && getType().equals(((BattleArmorEquipmentPart) part).getType())", "author": "Windchild292", "createdAt": "2020-05-07T21:23:18Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/BattleArmorEquipmentPart.java", "diffHunk": "@@ -235,13 +225,15 @@ public int getLocation() {\n \n     @Override\n     public MissingPart getMissingPart() {\n-        return new MissingBattleArmorEquipmentPart(getUnitTonnage(), type, equipmentNum, trooper, campaign, equipTonnage);\n+        return new MissingBattleArmorEquipmentPart(getUnitTonnage(), type, equipmentNum, size, trooper,\n+                campaign, equipTonnage);\n     }\n \n     @Override\n     public boolean isSamePartType(Part part) {\n         return part instanceof BattleArmorEquipmentPart\n                 && getType().equals(((BattleArmorEquipmentPart)part).getType())", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMzA4MA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421803080", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                        epart = new EquipmentPart(0, et, -1, 1.0,true, c);\n          \n          \n            \n                                        epart = new EquipmentPart(0, et, -1, 1.0, true, c);", "author": "Windchild292", "createdAt": "2020-05-07T21:23:57Z", "path": "MekHQ/src/mekhq/campaign/market/PartsStore.java", "diffHunk": "@@ -273,22 +273,22 @@ private void stockWeaponsAmmoAndEquipment(Campaign c) {\n                 if(EquipmentPart.hasVariableTonnage(et)) {\n                     EquipmentPart epart;\n                     for(double ton = EquipmentPart.getStartingTonnage(et); ton <= EquipmentPart.getMaxTonnage(et); ton += EquipmentPart.getTonnageIncrement(et)) {\n-                        epart = new EquipmentPart(0, et, -1, false, c);\n+                        epart = new EquipmentPart(0, et, -1, 1.0, false, c);\n                         epart.setEquipTonnage(ton);\n                         parts.add(epart);\n                         if (poddable) {\n-                            epart = new EquipmentPart(0, et, -1, true, c);\n+                            epart = new EquipmentPart(0, et, -1, 1.0,true, c);", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMzE2OQ==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421803169", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                Part p = new EquipmentPart(0, et, -1, 1.0,false, c);\n          \n          \n            \n                                Part p = new EquipmentPart(0, et, -1, 1.0, false, c);", "author": "Windchild292", "createdAt": "2020-05-07T21:24:04Z", "path": "MekHQ/src/mekhq/campaign/market/PartsStore.java", "diffHunk": "@@ -273,22 +273,22 @@ private void stockWeaponsAmmoAndEquipment(Campaign c) {\n                 if(EquipmentPart.hasVariableTonnage(et)) {\n                     EquipmentPart epart;\n                     for(double ton = EquipmentPart.getStartingTonnage(et); ton <= EquipmentPart.getMaxTonnage(et); ton += EquipmentPart.getTonnageIncrement(et)) {\n-                        epart = new EquipmentPart(0, et, -1, false, c);\n+                        epart = new EquipmentPart(0, et, -1, 1.0, false, c);\n                         epart.setEquipTonnage(ton);\n                         parts.add(epart);\n                         if (poddable) {\n-                            epart = new EquipmentPart(0, et, -1, true, c);\n+                            epart = new EquipmentPart(0, et, -1, 1.0,true, c);\n                             epart.setEquipTonnage(ton);\n                             parts.add(epart);\n                             parts.add(new OmniPod(epart, c));\n                         }\n                         //TODO: still need to deal with talons (unit tonnage) and masc (engine rating)\n                     }\n                 } else {\n-                    Part p = new EquipmentPart(0, et, -1, false, c);\n+                    Part p = new EquipmentPart(0, et, -1, 1.0,false, c);", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMzIzOA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421803238", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    parts.add(new EquipmentPart(0, et, -1, 1.0,true, c));\n          \n          \n            \n                                    parts.add(new EquipmentPart(0, et, -1, 1.0, true, c));", "author": "Windchild292", "createdAt": "2020-05-07T21:24:12Z", "path": "MekHQ/src/mekhq/campaign/market/PartsStore.java", "diffHunk": "@@ -273,22 +273,22 @@ private void stockWeaponsAmmoAndEquipment(Campaign c) {\n                 if(EquipmentPart.hasVariableTonnage(et)) {\n                     EquipmentPart epart;\n                     for(double ton = EquipmentPart.getStartingTonnage(et); ton <= EquipmentPart.getMaxTonnage(et); ton += EquipmentPart.getTonnageIncrement(et)) {\n-                        epart = new EquipmentPart(0, et, -1, false, c);\n+                        epart = new EquipmentPart(0, et, -1, 1.0, false, c);\n                         epart.setEquipTonnage(ton);\n                         parts.add(epart);\n                         if (poddable) {\n-                            epart = new EquipmentPart(0, et, -1, true, c);\n+                            epart = new EquipmentPart(0, et, -1, 1.0,true, c);\n                             epart.setEquipTonnage(ton);\n                             parts.add(epart);\n                             parts.add(new OmniPod(epart, c));\n                         }\n                         //TODO: still need to deal with talons (unit tonnage) and masc (engine rating)\n                     }\n                 } else {\n-                    Part p = new EquipmentPart(0, et, -1, false, c);\n+                    Part p = new EquipmentPart(0, et, -1, 1.0,false, c);\n                     parts.add(p);\n                     if (poddable) {\n-                        parts.add(new EquipmentPart(0, et, -1, true, c));\n+                        parts.add(new EquipmentPart(0, et, -1, 1.0,true, c));", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwMzc4MA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421803780", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n          \n          \n            \n                            MekHqXmlUtil.escape(type.getInternalName()));\n          \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\", type.getInternalName());", "author": "Windchild292", "createdAt": "2020-05-07T21:25:16Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/EquipmentPart.java", "diffHunk": "@@ -154,16 +155,18 @@ public boolean isSamePartType(Part part) {\n         // http://bg.battletech.com/forums/strategic-operations/(answered)-can-a-lance-for-a-35-ton-mech-be-used-on-a-40-ton-mech-and-so-on/\n         return part instanceof EquipmentPart && getType().equals(((EquipmentPart) part).getType())\n                 && getTonnage() == part.getTonnage() && getStickerPrice().equals(part.getStickerPrice())\n+                && getSize() == ((EquipmentPart) part).getSize()\n                 && isOmniPodded() == part.isOmniPodded();\n     }\n \n     @Override\n     public void writeToXml(PrintWriter pw1, int indent) {\n         writeToXmlBegin(pw1, indent);\n-        pw1.println(MekHqXmlUtil.indentStr(indent + 1) + \"<equipmentNum>\" + equipmentNum + \"</equipmentNum>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent + 1) + \"<typeName>\" + MekHqXmlUtil.escape(type.getInternalName())\n-                + \"</typeName>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent + 1) + \"<equipTonnage>\" + equipTonnage + \"</equipTonnage>\");\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"equipmentNum\", equipmentNum);\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n+                MekHqXmlUtil.escape(type.getInternalName()));", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTQyNA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421805424", "bodyText": "Why is there no setter for size?", "author": "Windchild292", "createdAt": "2020-05-07T21:28:35Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/EquipmentPart.java", "diffHunk": "@@ -330,6 +335,10 @@ public int getLocation() {\n         return -1;\n     }\n \n+    public double getSize() {\n+        return size;\n+    }\n+", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg5Nzc2Mg==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421897762", "bodyText": "The size doesn't change.", "author": "neoancient", "createdAt": "2020-05-08T02:15:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg5NzkyNg==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421897926", "bodyText": "Except for LargeCraftAmmoBin?", "author": "Windchild292", "createdAt": "2020-05-08T02:15:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTQyNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTkwNDE2NA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421904164", "bodyText": "No. That doesn't change either.", "author": "neoancient", "createdAt": "2020-05-08T02:40:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTQyNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTgwOQ==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421805809", "bodyText": "Why even keep these, or at least not deprecate them?\nJust temporary cause you don't want to make the change now to remove them? Or is it because they is no setter for size?", "author": "Windchild292", "createdAt": "2020-05-07T21:29:23Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/LargeCraftAmmoBin.java", "diffHunk": "@@ -139,20 +138,20 @@ public double getTonnage() {\n     }\n \n     public double getCapacity() {\n-        return capacity;\n+        return size;\n     }\n \n     public void setCapacity(double capacity) {\n-        this.capacity = capacity;\n+        this.size = capacity;\n     }", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTg5ODYyNg==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421898626", "bodyText": "I considered that but in the context of a LargeCraftAmmoBin I think the getCapacity() alias is more intuitive. I deprecated Mounted::getCapacity because the concept of capacity doesn't make sense for Mounted in every context.", "author": "neoancient", "createdAt": "2020-05-08T02:18:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNTgwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNjMwNw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421806307", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    epart = new EquipmentPart((int)entity.getWeight(), type, eqnum, m.getSize(),\n          \n          \n            \n                                    epart = new EquipmentPart((int) entity.getWeight(), type, eqnum, m.getSize(),", "author": "Windchild292", "createdAt": "2020-05-07T21:30:27Z", "path": "MekHQ/src/mekhq/campaign/unit/Unit.java", "diffHunk": "@@ -2740,7 +2741,7 @@ else if(entity instanceof BattleArmor) {\n                             //weapon bays aren't real parts\n                             continue;\n                         }\n-                        epart = new EquipmentPart((int)entity.getWeight(), type, eqnum,\n+                        epart = new EquipmentPart((int)entity.getWeight(), type, eqnum, m.getSize(),", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNjQxNw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421806417", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                infantryArmor = new EquipmentPart(0, eq, 0, 1.0,false, getCampaign());\n          \n          \n            \n                                infantryArmor = new EquipmentPart(0, eq, 0, 1.0, false, getCampaign());", "author": "Windchild292", "createdAt": "2020-05-07T21:30:43Z", "path": "MekHQ/src/mekhq/campaign/unit/Unit.java", "diffHunk": "@@ -3168,7 +3169,7 @@ else if(entity instanceof BattleArmor) {\n             if(null == infantryArmor) {\n                 EquipmentType eq = ((Infantry)entity).getArmorKit();\n                 if (null != eq) {\n-                    infantryArmor = new EquipmentPart(0, eq, 0, false, getCampaign());\n+                    infantryArmor = new EquipmentPart(0, eq, 0, 1.0,false, getCampaign());", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNjgzNg==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421806836", "bodyText": "Same as equipment part, why not include a set size?", "author": "Windchild292", "createdAt": "2020-05-07T21:31:36Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingEquipmentPart.java", "diffHunk": "@@ -299,6 +298,9 @@ public int getLocation() {\n     \treturn -1;\n     }\n \n+    public double getSize() {\n+\t    return size;\n+    }\n ", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNzEyMA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421807120", "bodyText": "Looks like tab spacing.", "author": "Windchild292", "createdAt": "2020-05-07T21:32:10Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingEquipmentPart.java", "diffHunk": "@@ -148,7 +143,9 @@ protected void loadFieldsFromXmlNode(Node wn) {\n \t\t\tif (wn2.getNodeName().equalsIgnoreCase(\"equipmentNum\")) {\n \t\t\t\tequipmentNum = Integer.parseInt(wn2.getTextContent());\n \t\t\t} else if (wn2.getNodeName().equalsIgnoreCase(\"typeName\")) {\n-\t\t\t\ttypeName = wn2.getTextContent();\n+                typeName = wn2.getTextContent();\n+            } else if (wn2.getNodeName().equalsIgnoreCase(\"size\")) {\n+\t\t\t    size = Double.parseDouble(wn2.getTextContent());\n \t\t\t} else if (wn2.getNodeName().equalsIgnoreCase(\"equipTonnage\")) {\n \t\t\t\tequipTonnage = Double.parseDouble(wn2.getTextContent());\n \t\t\t}", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNzI0OA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421807248", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n          \n          \n            \n                            MekHqXmlUtil.escape(type.getInternalName()));\n          \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\", type.getInternalName());", "author": "Windchild292", "createdAt": "2020-05-07T21:32:28Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingEquipmentPart.java", "diffHunk": "@@ -124,18 +126,11 @@ public double getTonnage() {\n     @Override\n \tpublic void writeToXml(PrintWriter pw1, int indent) {\n \t\twriteToXmlBegin(pw1, indent);\n-\t\tpw1.println(MekHqXmlUtil.indentStr(indent+1)\n-\t\t\t\t+\"<typeName>\"\n-\t\t\t\t+MekHqXmlUtil.escape(typeName)\n-\t\t\t\t+\"</typeName>\");\n-\t\tpw1.println(MekHqXmlUtil.indentStr(indent+1)\n-\t\t\t\t+\"<equipmentNum>\"\n-\t\t\t\t+equipmentNum\n-\t\t\t\t+\"</equipmentNum>\");\n-\t\tpw1.println(MekHqXmlUtil.indentStr(indent+1)\n-\t\t\t\t+\"<equipTonnage>\"\n-\t\t\t\t+equipTonnage\n-\t\t\t\t+\"</equipTonnage>\");\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n+                MekHqXmlUtil.escape(type.getInternalName()));", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNzcyMA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421807720", "bodyText": "Should the two == comparisons be bracketed? Asking as that's part of our coding style guide I've never been certain on for return values", "author": "Windchild292", "createdAt": "2020-05-07T21:33:35Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingEquipmentPart.java", "diffHunk": "@@ -187,7 +184,9 @@ public boolean isAcceptableReplacement(Part part, boolean refit) {\n \t\tif(part instanceof EquipmentPart) {\n \t\t\tEquipmentPart eqpart = (EquipmentPart)part;\n \t\t\tEquipmentType et = eqpart.getType();\n-\t\t\treturn type.equals(et) && getTonnage() == part.getTonnage() && part.getStickerPrice().equals(newPart.getStickerPrice());\n+\t\t\treturn type.equals(et) && getTonnage() == part.getTonnage()\n+                    && size == eqpart.getSize()", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTkwMDE0Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421900143", "bodyText": "I usually add them. I missed it here.", "author": "neoancient", "createdAt": "2020-05-08T02:24:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwNzcyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwODEzNA==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421808134", "bodyText": "Same as the non-missing part, why leave these in or not deprecate them?", "author": "Windchild292", "createdAt": "2020-05-07T21:34:23Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingLargeCraftAmmoBin.java", "diffHunk": "@@ -106,20 +105,20 @@ public void setBay(int bayEqNum) {\n             bay = unit.getEntity().getEquipment(bayEqNum);\n         }\n     }\n-        \n+\n     @Override\n     public double getTonnage() {\n-        return capacity;\n+        return size;\n     }\n-    \n+\n     public double getCapacity() {\n-        return capacity;\n+        return size;\n     }\n-    \n+\n     public void setCapacity(double capacity) {\n-        this.capacity = capacity;\n+        this.size = capacity;\n     }\n-    \n+", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwOTM3OQ==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421809379", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    super(tonnage, et, equipNum, c, 1.0, 1, omniPodded);\n          \n          \n            \n                    super(tonnage, et, equipNum, c, 1.0, 1.0, omniPodded);", "author": "Windchild292", "createdAt": "2020-05-07T21:37:21Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingAmmoBin.java", "diffHunk": "@@ -47,18 +47,18 @@\n     public MissingAmmoBin() {\n         this(0, null, -1, false, false, null);\n     }\n-    \n+\n     public MissingAmmoBin(int tonnage, EquipmentType et, int equipNum, boolean singleShot,\n             boolean omniPodded, Campaign c) {\n-        super(tonnage, et, equipNum, c, 1, omniPodded);\n+        super(tonnage, et, equipNum, c, 1.0, 1, omniPodded);", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTgwOTc0Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1746#discussion_r421809743", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n          \n          \n            \n                            MekHqXmlUtil.escape(type.getInternalName()));\n          \n          \n            \n                    MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\", type.getInternalName());", "author": "Windchild292", "createdAt": "2020-05-07T21:38:15Z", "path": "MekHQ/src/mekhq/campaign/parts/equipment/MissingBattleArmorEquipmentPart.java", "diffHunk": "@@ -68,22 +69,12 @@ public int getDifficulty() {\n     @Override\n     public void writeToXml(PrintWriter pw1, int indent) {\n         writeToXmlBegin(pw1, indent);\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<equipmentNum>\"\n-                +equipmentNum\n-                +\"</equipmentNum>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<typeName>\"\n-                +MekHqXmlUtil.escape(type.getInternalName())\n-                +\"</typeName>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<equipTonnage>\"\n-                +equipTonnage\n-                +\"</equipTonnage>\");\n-        pw1.println(MekHqXmlUtil.indentStr(indent+1)\n-                +\"<trooper>\"\n-                +trooper\n-                +\"</trooper>\");\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"equipmentNum\", equipmentNum);\n+        MekHqXmlUtil.writeSimpleXmlTag(pw1, indent + 1, \"typeName\",\n+                MekHqXmlUtil.escape(type.getInternalName()));", "originalCommit": "2881869b9d25aa0144cddb51e7dc72f60a974f11", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "26ecf8774fad948f3146c5941527afe266c6c7a1", "url": "https://github.com/MegaMek/mekhq/commit/26ecf8774fad948f3146c5941527afe266c6c7a1", "message": "Remove redundant double xml escape.", "committedDate": "2020-05-08T02:07:29Z", "type": "commit"}, {"oid": "d6fe75911411562cd8a74fd20d69e4a854e65cb4", "url": "https://github.com/MegaMek/mekhq/commit/d6fe75911411562cd8a74fd20d69e4a854e65cb4", "message": "Whitespace fixes", "committedDate": "2020-05-08T02:26:54Z", "type": "commit"}, {"oid": "de8f3dc68e3ae8d33ff16dc569fdcda4aa94ecf6", "url": "https://github.com/MegaMek/mekhq/commit/de8f3dc68e3ae8d33ff16dc569fdcda4aa94ecf6", "message": "Remove unused method.", "committedDate": "2020-05-08T02:37:32Z", "type": "commit"}]}