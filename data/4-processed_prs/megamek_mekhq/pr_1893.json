{"pr_number": 1893, "pr_title": "Personnel Status: Fixing ChangeStatus, Standardizing Boolean Comparisons, and Implementing Death Options ", "pr_createdAt": "2020-08-03T15:41:56Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1893", "timeline": [{"oid": "3a4c390717196879638ccb918cab521def74b07c", "url": "https://github.com/MegaMek/mekhq/commit/3a4c390717196879638ccb918cab521def74b07c", "message": "Implementing Status changes", "committedDate": "2020-07-31T19:43:13Z", "type": "commit"}, {"oid": "44db968ee70f4e1a416d3f4d94943e18cade925b", "url": "https://github.com/MegaMek/mekhq/commit/44db968ee70f4e1a416d3f4d94943e18cade925b", "message": "Fixing issues found during review", "committedDate": "2020-07-31T20:08:27Z", "type": "commit"}, {"oid": "51760fe17442c725a1167591b7aeb5fa005a099c", "url": "https://github.com/MegaMek/mekhq/commit/51760fe17442c725a1167591b7aeb5fa005a099c", "message": "Merge remote-tracking branch 'upstream/master' into dev_Windchild_ChangeStatus", "committedDate": "2020-08-03T13:47:15Z", "type": "commit"}, {"oid": "be9abbc8ccdffd7734a8d8d9f7bdede301aeecc5", "url": "https://github.com/MegaMek/mekhq/commit/be9abbc8ccdffd7734a8d8d9f7bdede301aeecc5", "message": "Cleaning up DataLoadingDialog formatting as part of debugging", "committedDate": "2020-08-03T14:48:24Z", "type": "commit"}, {"oid": "f330f1c5aeaaf3d4d7ac4c6891c4fbfaa3664fc5", "url": "https://github.com/MegaMek/mekhq/commit/f330f1c5aeaaf3d4d7ac4c6891c4fbfaa3664fc5", "message": "Fixing formatting in ChooseGamePresetDialog as part of cleaning up the DataLoadingDialog", "committedDate": "2020-08-03T14:59:51Z", "type": "commit"}, {"oid": "069c3fc407f27182739ead6133e0c266e60821a8", "url": "https://github.com/MegaMek/mekhq/commit/069c3fc407f27182739ead6133e0c266e60821a8", "message": "Adding missing resources", "committedDate": "2020-08-03T15:11:16Z", "type": "commit"}, {"oid": "0bba9a67aa71309ccf5e9e599401bd15482215d8", "url": "https://github.com/MegaMek/mekhq/commit/0bba9a67aa71309ccf5e9e599401bd15482215d8", "message": "Fixing last minute findings", "committedDate": "2020-08-03T15:20:29Z", "type": "commit"}, {"oid": "e40265beeac027ad0dd1888e5eea30508453ed47", "url": "https://github.com/MegaMek/mekhq/commit/e40265beeac027ad0dd1888e5eea30508453ed47", "message": "Fixing merge conflicts", "committedDate": "2020-08-03T15:37:07Z", "type": "commit"}, {"oid": "8cdeb401335fce1b1ddd66c401c905c94514a0b4", "url": "https://github.com/MegaMek/mekhq/commit/8cdeb401335fce1b1ddd66c401c905c94514a0b4", "message": "Fixing tab spacing", "committedDate": "2020-08-03T15:37:42Z", "type": "commit"}, {"oid": "5c259b0da20c32bdd21d1ee5bccc5e2543688788", "url": "https://github.com/MegaMek/mekhq/commit/5c259b0da20c32bdd21d1ee5bccc5e2543688788", "message": "Fixing form title", "committedDate": "2020-08-03T15:37:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NzQwMg==", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597402", "bodyText": "Should we make this explicit? Might look weird if the person is in a status where it doesn't make sense for them to be re-hired.", "author": "NickAragua", "createdAt": "2020-08-09T15:33:12Z", "path": "MekHQ/src/mekhq/campaign/personnel/Person.java", "diffHunk": "@@ -863,6 +867,103 @@ public PersonnelStatus getStatus() {\n         return status;\n     }\n \n+    /**\n+     * This is used to change the person's PersonnelStatus\n+     * @param campaign the campaign the person is part of\n+     * @param status the person's new PersonnelStatus\n+     */\n+    public void changeStatus(Campaign campaign, PersonnelStatus status) {\n+        if (status == getStatus()) { // no change means we don't need to process anything\n+            return;\n+        } else if (getStatus().isKIA()) {\n+            // remove date of death for resurrection\n+            setDateOfDeath(null);\n+        }\n+\n+        switch (status) {\n+            case ACTIVE:\n+                if (getStatus().isMIA()) {\n+                    ServiceLogger.recoveredMia(this, campaign.getDate());\n+                } else if (getStatus().isDead()) {\n+                    ServiceLogger.resurrected(this, campaign.getDate());\n+                } else {", "originalCommit": "5c259b0da20c32bdd21d1ee5bccc5e2543688788", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYwNzAzNw==", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467607037", "bodyText": "The above handle all of the potential statuses that would not be a rehire, plus this would make the most sense for any status being changed to active that is not MIA or a version of death. (unless I'm missing a potential future addition, but this should be a solid future proofed method to do so)", "author": "Windchild292", "createdAt": "2020-08-09T17:12:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5NzQwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5Nzc2Nw==", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467597767", "bodyText": "Why would these \"isMIA/Retired\" checks even be necessary? This is the personnel market, for hiring new personnel? Unless I'm missing something.", "author": "NickAragua", "createdAt": "2020-08-09T15:37:12Z", "path": "MekHQ/src/mekhq/gui/dialog/PersonnelMarketDialog.java", "diffHunk": "@@ -443,15 +442,18 @@ public boolean include(Entry<? extends PersonnelTableModel, ? extends Integer> e\n                             (nGroup == PersonnelTab.PG_DOC && ((type == Person.T_DOCTOR) || (type == Person.T_MEDIC))) ||\n                             (nGroup == PersonnelTab.PG_ADMIN && type > Person.T_MEDIC)\n                             ) {\n-                        return person.isActive();\n-                    } else if(nGroup == PersonnelTab.PG_RETIRE) {\n-                        return person.getStatus() == PersonnelStatus.RETIRED;\n-                    } else if(nGroup == PersonnelTab.PG_MIA) {\n-                        return person.getStatus() == PersonnelStatus.MIA;\n-                    } else if(nGroup == PersonnelTab.PG_KIA) {\n-                        return person.getStatus() == PersonnelStatus.KIA;\n+                        return person.getStatus().isActive();\n+                    } else if (nGroup == PersonnelTab.PG_RETIRE) {\n+                        return person.getStatus().isRetired();\n+                    } else if (nGroup == PersonnelTab.PG_MIA) {\n+                        return person.getStatus().isMIA();", "originalCommit": "5c259b0da20c32bdd21d1ee5bccc5e2543688788", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzYwNjUyNA==", "url": "https://github.com/MegaMek/mekhq/pull/1893#discussion_r467606524", "bodyText": "This is required because of how the tabs on this dialog are currently set up (otherwise we end up with '?' selection options). I'm planning a refactor in the near future to fix this requirement.", "author": "Windchild292", "createdAt": "2020-08-09T17:06:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NzU5Nzc2Nw=="}], "type": "inlineReview"}, {"oid": "724f04c85edfb8aa17010618fc895afb449d41ca", "url": "https://github.com/MegaMek/mekhq/commit/724f04c85edfb8aa17010618fc895afb449d41ca", "message": "Fixing merge conflicts", "committedDate": "2020-08-09T17:26:02Z", "type": "commit"}]}