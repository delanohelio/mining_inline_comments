{"pr_number": 1668, "pr_title": "Fix null checks per LGTM", "pr_createdAt": "2020-04-12T19:15:35Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1668", "timeline": [{"oid": "ac295b31c32847bac69d6847e23501604e3d0cde", "url": "https://github.com/MegaMek/mekhq/commit/ac295b31c32847bac69d6847e23501604e3d0cde", "message": "Add missing null guard to UnitMarketTableModel", "committedDate": "2020-04-12T17:12:27Z", "type": "commit"}, {"oid": "c578bae0f5006e831433ad531e56a869e5621c08", "url": "https://github.com/MegaMek/mekhq/commit/c578bae0f5006e831433ad531e56a869e5621c08", "message": "Add missing null check to FilterableListModel", "committedDate": "2020-04-12T17:13:57Z", "type": "commit"}, {"oid": "a02af5dd3293f09fe25ec69bc3557f21eaf3aba8", "url": "https://github.com/MegaMek/mekhq/commit/a02af5dd3293f09fe25ec69bc3557f21eaf3aba8", "message": "Patient can never be null in refreshPatientList", "committedDate": "2020-04-12T17:15:18Z", "type": "commit"}, {"oid": "a5d1206e52e1e9fc959f84847ef0209981d25e2f", "url": "https://github.com/MegaMek/mekhq/commit/a5d1206e52e1e9fc959f84847ef0209981d25e2f", "message": "Scenario can't be null in ScenarioTableMouseAdapter", "committedDate": "2020-04-12T17:17:44Z", "type": "commit"}, {"oid": "3cef0b27d78ac1407a248e9b26cf25d14a1ec973", "url": "https://github.com/MegaMek/mekhq/commit/3cef0b27d78ac1407a248e9b26cf25d14a1ec973", "message": "Fix possible NPE if xmlDoc is null", "committedDate": "2020-04-12T18:39:44Z", "type": "commit"}, {"oid": "de6f234b30331ac7dddd936e1818110ea4d44900", "url": "https://github.com/MegaMek/mekhq/commit/de6f234b30331ac7dddd936e1818110ea4d44900", "message": "Fix null check in SpacecraftCoolingSystem", "committedDate": "2020-04-12T18:41:24Z", "type": "commit"}, {"oid": "6d574bf4e748fd77b5119faa7640dd981b4693c9", "url": "https://github.com/MegaMek/mekhq/commit/6d574bf4e748fd77b5119faa7640dd981b4693c9", "message": "Don't NPE if entity is null in MekLabTab", "committedDate": "2020-04-12T18:42:20Z", "type": "commit"}, {"oid": "af3993e24f874966dff34477b73e9a7b5d011987", "url": "https://github.com/MegaMek/mekhq/commit/af3993e24f874966dff34477b73e9a7b5d011987", "message": "Don't NPE in Faction::generateFactions", "committedDate": "2020-04-12T18:42:55Z", "type": "commit"}, {"oid": "f2435d55a944043742bb98a78cf44a616ee1cc2a", "url": "https://github.com/MegaMek/mekhq/commit/f2435d55a944043742bb98a78cf44a616ee1cc2a", "message": "Don't NPE in MissingPart::scrap", "committedDate": "2020-04-12T18:44:01Z", "type": "commit"}, {"oid": "269e35e5ea9114b0ca621f643f5e1cc8fc01911a", "url": "https://github.com/MegaMek/mekhq/commit/269e35e5ea9114b0ca621f643f5e1cc8fc01911a", "message": "Fix null check in TankLocation::fix", "committedDate": "2020-04-12T18:45:16Z", "type": "commit"}, {"oid": "1c051003a069a9402677e8ba541db67b847f0398", "url": "https://github.com/MegaMek/mekhq/commit/1c051003a069a9402677e8ba541db67b847f0398", "message": "Don't NPE in SkillType::generate*InstanceFromXML", "committedDate": "2020-04-12T18:47:02Z", "type": "commit"}, {"oid": "27e43434023076c5041a68797b4112b89bf4a89a", "url": "https://github.com/MegaMek/mekhq/commit/27e43434023076c5041a68797b4112b89bf4a89a", "message": "Don't NPE in ProtomekLocation::fix", "committedDate": "2020-04-12T18:48:00Z", "type": "commit"}, {"oid": "ae13249c25bce3c5d01fc7879ac0508b6f7bd79e", "url": "https://github.com/MegaMek/mekhq/commit/ae13249c25bce3c5d01fc7879ac0508b6f7bd79e", "message": "Don't NPE in MekLocation::fix", "committedDate": "2020-04-12T18:48:45Z", "type": "commit"}, {"oid": "04f52921cb8959796077316e8bde9594af1546e7", "url": "https://github.com/MegaMek/mekhq/commit/04f52921cb8959796077316e8bde9594af1546e7", "message": "Fix null check in UnitTableModel", "committedDate": "2020-04-12T18:50:24Z", "type": "commit"}, {"oid": "07105b3969dcfb978364cf9625f1016e53bccbbb", "url": "https://github.com/MegaMek/mekhq/commit/07105b3969dcfb978364cf9625f1016e53bccbbb", "message": "Fix possible NPE in UnitAssignmentTableModel", "committedDate": "2020-04-12T18:52:25Z", "type": "commit"}, {"oid": "74ed309d07c448a0e238b216cd7a5a6437a7ef6a", "url": "https://github.com/MegaMek/mekhq/commit/74ed309d07c448a0e238b216cd7a5a6437a7ef6a", "message": "Fix possible NPE in ServicedUnitsTableMouseAdapter", "committedDate": "2020-04-12T18:53:35Z", "type": "commit"}, {"oid": "ef71a4969bedc68bef9c4ad27019f334e5f08e64", "url": "https://github.com/MegaMek/mekhq/commit/ef71a4969bedc68bef9c4ad27019f334e5f08e64", "message": "Fix NPE in CustomOption", "committedDate": "2020-04-12T18:55:15Z", "type": "commit"}, {"oid": "1f66c687b9c782ce0523145c75596636dc9ade4e", "url": "https://github.com/MegaMek/mekhq/commit/1f66c687b9c782ce0523145c75596636dc9ade4e", "message": "Avoid NPE in SpecialAbility::generate*InstanceFromXML", "committedDate": "2020-04-12T18:57:12Z", "type": "commit"}, {"oid": "bdcc6f0c95ca5c2643e963085e0663a5d6892fa1", "url": "https://github.com/MegaMek/mekhq/commit/bdcc6f0c95ca5c2643e963085e0663a5d6892fa1", "message": "Fix possible NPE in RetirementTableModel", "committedDate": "2020-04-12T18:59:56Z", "type": "commit"}, {"oid": "2b55994aa69f1b5bd8d2972fc9ea9ba71dfe5b88", "url": "https://github.com/MegaMek/mekhq/commit/2b55994aa69f1b5bd8d2972fc9ea9ba71dfe5b88", "message": "Help static analysis understand null checks in Part", "committedDate": "2020-04-12T19:02:39Z", "type": "commit"}, {"oid": "9ee81649ca0f7b2a78c94213ecd5f9e81ae4a0a8", "url": "https://github.com/MegaMek/mekhq/commit/9ee81649ca0f7b2a78c94213ecd5f9e81ae4a0a8", "message": "Avoid NPE in FactionHints::loadFactionHints", "committedDate": "2020-04-12T19:03:11Z", "type": "commit"}, {"oid": "50f71f3b59bdccfa6105aae393b2e6cda1bdebe3", "url": "https://github.com/MegaMek/mekhq/commit/50f71f3b59bdccfa6105aae393b2e6cda1bdebe3", "message": "Avoid NPE in Ranks::initializeRankSystems", "committedDate": "2020-04-12T19:03:37Z", "type": "commit"}, {"oid": "56d843bd4621f48b103208da42acd8bb4ad7361b", "url": "https://github.com/MegaMek/mekhq/commit/56d843bd4621f48b103208da42acd8bb4ad7361b", "message": "Part is not null in TaskTableModel", "committedDate": "2020-04-12T19:05:01Z", "type": "commit"}, {"oid": "e00f2dd0152fa1a1764f8e532203388483cca650", "url": "https://github.com/MegaMek/mekhq/commit/e00f2dd0152fa1a1764f8e532203388483cca650", "message": "Unit is never null in ForceViewPanel", "committedDate": "2020-04-12T19:06:18Z", "type": "commit"}, {"oid": "1445cb618b2e2a6127751c0d342b3eb9b8569a42", "url": "https://github.com/MegaMek/mekhq/commit/1445cb618b2e2a6127751c0d342b3eb9b8569a42", "message": "Don't NPE in CampaignGUI on xmlDoc's", "committedDate": "2020-04-12T19:07:31Z", "type": "commit"}, {"oid": "b16926a796047adea4cd4069be194dbca3c46c8c", "url": "https://github.com/MegaMek/mekhq/commit/b16926a796047adea4cd4069be194dbca3c46c8c", "message": "Only reference surplus unit if one exists in AtBContract", "committedDate": "2020-04-12T19:09:26Z", "type": "commit"}, {"oid": "8db3ed7986e919178f91a6c1c878dc36d489780c", "url": "https://github.com/MegaMek/mekhq/commit/8db3ed7986e919178f91a6c1c878dc36d489780c", "message": "Fix possible NPE in PersonnelMarketDialog::addUnit", "committedDate": "2020-04-12T19:13:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MDg2Mg==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407240862", "bodyText": "Looks like this is tab spaced.", "author": "Windchild292", "createdAt": "2020-04-12T19:16:55Z", "path": "MekHQ/src/mekhq/campaign/parts/MissingPart.java", "diffHunk": "@@ -369,12 +369,15 @@ public String checkScrappable() {\n \n \t@Override\n \tpublic String scrap() {\n-\t\tPart replace = findReplacement(false);\n+        Part replace = findReplacement(false);\n \t\tif(null != replace) {\n \t\t\treplace.decrementQuantity();\n-\t\t}\n+            return replace.getName() + \" scrapped.\";\n+        }\n+\n \t\tskillMin = SkillType.EXP_GREEN;\n-\t\treturn replace.getName() + \" scrapped.\";\n+\n+        return getName() + \" scrapped.\";\n \t}", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MDk2MA==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407240960", "bodyText": "I made no attempt to adjust whitespacing in files.", "author": "sixlettervariables", "createdAt": "2020-04-12T19:17:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MDg2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MTQ2Mw==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407241463", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(null == filter) {\n          \n          \n            \n                        if (null == filter) {", "author": "Windchild292", "createdAt": "2020-04-12T19:22:16Z", "path": "MekHQ/src/mekhq/gui/model/FilterableListModel.java", "diffHunk": "@@ -119,20 +119,20 @@ public void updateFilter() {\n             });\n         }\n     }\n-    \n+\n     @Override\n     public int getSize() {\n         return (null == filter) ? ((null == peerModel) ? 0 : peerModel.getSize()) : indices.size();\n     }\n \n     @Override\n     public E getElementAt(int index) {\n-        if(null == filter) {\n-            if(null != peerModel) {\n+        if(null != peerModel) {\n+            if(null == filter) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MTQ2OQ==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407241469", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(null != peerModel) {\n          \n          \n            \n                    if (null != peerModel) {", "author": "Windchild292", "createdAt": "2020-04-12T19:22:23Z", "path": "MekHQ/src/mekhq/gui/model/FilterableListModel.java", "diffHunk": "@@ -119,20 +119,20 @@ public void updateFilter() {\n             });\n         }\n     }\n-    \n+\n     @Override\n     public int getSize() {\n         return (null == filter) ? ((null == peerModel) ? 0 : peerModel.getSize()) : indices.size();\n     }\n \n     @Override\n     public E getElementAt(int index) {\n-        if(null == filter) {\n-            if(null != peerModel) {\n+        if(null != peerModel) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MjA3NQ==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407242075", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(null != getUnit()) {\n          \n          \n            \n                    if (null != getUnit()) {", "author": "Windchild292", "createdAt": "2020-04-12T19:27:40Z", "path": "MekHQ/src/mekhq/campaign/parts/Part.java", "diffHunk": "@@ -980,21 +980,22 @@ public TargetRoll getAllModsForMaintenance() {\n         TargetRoll mods = new TargetRoll(campaign.getCampaignOptions().getMaintenanceBonus(), \"maintenance\");\n         mods.addModifier(Availability.getTechModifier(getTechRating()), \"tech rating \" + ITechnology.getRatingName(getTechRating()));\n \n-        if(null != unit) {\n-            mods.append(unit.getSiteMod());\n-            if(unit.getEntity().hasQuirk(\"easy_maintain\")) {\n+        if(null != getUnit()) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MjA5Ng==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407242096", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(getUnit().getEntity().hasQuirk(\"easy_maintain\")) {\n          \n          \n            \n                        if (getUnit().getEntity().hasQuirk(\"easy_maintain\")) {", "author": "Windchild292", "createdAt": "2020-04-12T19:27:49Z", "path": "MekHQ/src/mekhq/campaign/parts/Part.java", "diffHunk": "@@ -980,21 +980,22 @@ public TargetRoll getAllModsForMaintenance() {\n         TargetRoll mods = new TargetRoll(campaign.getCampaignOptions().getMaintenanceBonus(), \"maintenance\");\n         mods.addModifier(Availability.getTechModifier(getTechRating()), \"tech rating \" + ITechnology.getRatingName(getTechRating()));\n \n-        if(null != unit) {\n-            mods.append(unit.getSiteMod());\n-            if(unit.getEntity().hasQuirk(\"easy_maintain\")) {\n+        if(null != getUnit()) {\n+            mods.append(getUnit().getSiteMod());\n+            if(getUnit().getEntity().hasQuirk(\"easy_maintain\")) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MjEyMA==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407242120", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        else if(getUnit().getEntity().hasQuirk(\"difficult_maintain\")) {\n          \n          \n            \n                        else if (getUnit().getEntity().hasQuirk(\"difficult_maintain\")) {", "author": "Windchild292", "createdAt": "2020-04-12T19:28:00Z", "path": "MekHQ/src/mekhq/campaign/parts/Part.java", "diffHunk": "@@ -980,21 +980,22 @@ public TargetRoll getAllModsForMaintenance() {\n         TargetRoll mods = new TargetRoll(campaign.getCampaignOptions().getMaintenanceBonus(), \"maintenance\");\n         mods.addModifier(Availability.getTechModifier(getTechRating()), \"tech rating \" + ITechnology.getRatingName(getTechRating()));\n \n-        if(null != unit) {\n-            mods.append(unit.getSiteMod());\n-            if(unit.getEntity().hasQuirk(\"easy_maintain\")) {\n+        if(null != getUnit()) {\n+            mods.append(getUnit().getSiteMod());\n+            if(getUnit().getEntity().hasQuirk(\"easy_maintain\")) {\n                 mods.addModifier(-1, \"easy to maintain\");\n             }\n-            else if(unit.getEntity().hasQuirk(\"difficult_maintain\")) {\n+            else if(getUnit().getEntity().hasQuirk(\"difficult_maintain\")) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzI0MjE0OA==", "url": "https://github.com/MegaMek/mekhq/pull/1668#discussion_r407242148", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if(isClanTechBase() || (this instanceof MekLocation && getUnit().getEntity().isClan())) {\n          \n          \n            \n                        if (isClanTechBase() || ((this instanceof MekLocation) && getUnit().getEntity().isClan())) {", "author": "Windchild292", "createdAt": "2020-04-12T19:28:19Z", "path": "MekHQ/src/mekhq/campaign/parts/Part.java", "diffHunk": "@@ -980,21 +980,22 @@ public TargetRoll getAllModsForMaintenance() {\n         TargetRoll mods = new TargetRoll(campaign.getCampaignOptions().getMaintenanceBonus(), \"maintenance\");\n         mods.addModifier(Availability.getTechModifier(getTechRating()), \"tech rating \" + ITechnology.getRatingName(getTechRating()));\n \n-        if(null != unit) {\n-            mods.append(unit.getSiteMod());\n-            if(unit.getEntity().hasQuirk(\"easy_maintain\")) {\n+        if(null != getUnit()) {\n+            mods.append(getUnit().getSiteMod());\n+            if(getUnit().getEntity().hasQuirk(\"easy_maintain\")) {\n                 mods.addModifier(-1, \"easy to maintain\");\n             }\n-            else if(unit.getEntity().hasQuirk(\"difficult_maintain\")) {\n+            else if(getUnit().getEntity().hasQuirk(\"difficult_maintain\")) {\n                 mods.addModifier(1, \"difficult to maintain\");\n             }\n-        }\n-        if(isClanTechBase() || (this instanceof MekLocation && this.getUnit() != null && this.getUnit().getEntity().isClan())) {\n-            if (unit.getTech() == null) {\n-                mods.addModifier(2, \"Clan tech\");\n-            } else if (!unit.getTech().isClanner()\n-                    && !unit.getTech().getOptions().booleanOption(PersonnelOptions.TECH_CLAN_TECH_KNOWLEDGE)) {\n-                mods.addModifier(2, \"Clan tech\");\n+\n+            if(isClanTechBase() || (this instanceof MekLocation && getUnit().getEntity().isClan())) {", "originalCommit": "8db3ed7986e919178f91a6c1c878dc36d489780c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "fa0271dede34613bf43b303f662a95e8a7206a93", "url": "https://github.com/MegaMek/mekhq/commit/fa0271dede34613bf43b303f662a95e8a7206a93", "message": "Apply suggestions from code review\n\nCo-Authored-By: Justin Bowen <39067288+Windchild292@users.noreply.github.com>", "committedDate": "2020-04-16T00:28:22Z", "type": "commit"}]}