{"pr_number": 1491, "pr_title": "Add customization for colors used throughout MekHQ #1480", "pr_createdAt": "2020-02-16T19:04:42Z", "pr_url": "https://github.com/MegaMek/mekhq/pull/1491", "timeline": [{"oid": "f6375135ebf67f0ed5ff3218901ca76af67dae65", "url": "https://github.com/MegaMek/mekhq/commit/f6375135ebf67f0ed5ff3218901ca76af67dae65", "message": "Adds settings for the hangar tab colors #1480", "committedDate": "2020-02-15T19:34:43Z", "type": "commit"}, {"oid": "a2d91e3d0823192fc184f9f42b14fda5125df685", "url": "https://github.com/MegaMek/mekhq/commit/a2d91e3d0823192fc184f9f42b14fda5125df685", "message": "Remove unnecessary imports added during theming work", "committedDate": "2020-02-16T18:32:47Z", "type": "commit"}, {"oid": "c997c911f39bd3a477dd048522412970f5dc6471", "url": "https://github.com/MegaMek/mekhq/commit/c997c911f39bd3a477dd048522412970f5dc6471", "message": "Allow various colors across MHQ to be customized #1480", "committedDate": "2020-02-16T19:02:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyOTc1Ng==", "url": "https://github.com/MegaMek/mekhq/pull/1491#discussion_r379929756", "bodyText": "Is this TODO needed?", "author": "Windchild292", "createdAt": "2020-02-16T20:11:39Z", "path": "MekHQ/src/mekhq/gui/preferences/ColorPreference.java", "diffHunk": "@@ -0,0 +1,135 @@\n+/*\n+ * Copyright (c) 2020 The MegaMek Team. All rights reserved.\n+ *\n+ * This file is part of MekHQ.\n+ *\n+ * MekHQ is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU General Public License as published by\n+ * the Free Software Foundation, either version 3 of the License, or\n+ * (at your option) any later version.\n+ *\n+ * MekHQ is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n+ * GNU General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU General Public License\n+ * along with MekHQ.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package mekhq.gui.preferences;\n+\n+import java.awt.Color;\n+import java.util.Optional;\n+\n+import megamek.common.annotations.Nullable;\n+import mekhq.preferences.PreferenceElement;\n+\n+/**\n+ * Represents a preference which can manage a color and\n+ * an optional alternate color.\n+ */\n+public class ColorPreference extends PreferenceElement {\n+\n+    private final Color defaultColor;\n+    private final Color defaultAlternateColor;\n+    private Optional<Color> color = Optional.empty();\n+    private Optional<Color> alternateColor = Optional.empty();\n+\n+    /**\n+     * Creates a new {@code ColorPreference} with a default {@link Color}.\n+     */\n+    public ColorPreference(String name, Color defaultColor) {\n+        super(name);\n+\n+        this.defaultColor = defaultColor;\n+        this.defaultAlternateColor = null;\n+    }\n+\n+    /**\n+     * Creates a new {@code ColorPreference} with a default {@link Color}\n+     * and a default alternate color.\n+     */\n+    public ColorPreference(String name, Color defaultColor, Color defaultAlternateColor) {\n+        super(name);\n+\n+        this.defaultColor = defaultColor;\n+        this.defaultAlternateColor = defaultAlternateColor;\n+    }\n+\n+    /**\n+     * Gets the main color.\n+     * @return The main color.\n+     */\n+    public Optional<Color> getColor() {\n+        return Optional.ofNullable(color.orElse(defaultColor));\n+    }\n+\n+    /**\n+     * Sets the main color.\n+     * @param color The main color.\n+     */\n+    public void setColor(Optional<Color> color) {\n+        this.color = color;\n+    }\n+\n+    /**\n+     * Gets the alternate color.\n+     * @param color The alternate color.\n+     */\n+    public Optional<Color> getAlternateColor() {\n+        return Optional.ofNullable(alternateColor.orElse(defaultAlternateColor));\n+    }\n+\n+    /**\n+     * Sets the alternate color.\n+     * @param color The alternate color.\n+     */\n+    public void setAlternateColor(Optional<Color> alternateColor) {\n+        this.alternateColor = alternateColor;\n+    }\n+\n+    @Override\n+    protected String getValue() {\n+        if (alternateColor.isPresent()) {\n+            return String.format(\"%s|%s\", format(color), format(alternateColor));\n+        } else {\n+            return format(color);\n+        }\n+    }\n+\n+    @Nullable\n+    private static String format(Optional<Color> color) {\n+        return color.isPresent() ? \"#\" + Integer.toHexString(color.get().getRGB()) : null;\n+    }\n+\n+    @Override\n+    protected void initialize(String value) {\n+        if (value != null) {\n+            String[] values = value.split(\"\\\\|\");\n+            if (values.length > 0) {\n+                color = decode(values[0]);\n+            }\n+            if (values.length > 1) {\n+                alternateColor = decode(values[1]);\n+            }\n+        }\n+    }\n+\n+    private static Optional<Color> decode(String value) {\n+        try {\n+            return Optional.ofNullable(Color.decode(value));\n+        } catch (NumberFormatException ex0) {\n+            try {\n+                return Optional.ofNullable(Color.getColor(value));\n+            } catch (NumberFormatException ex1) {\n+                // CAW: Ignored.\n+            }\n+        }\n+        return Optional.empty();\n+    }\n+\n+    @Override\n+    protected void dispose() {\n+        // TODO Auto-generated method stub", "originalCommit": "c997c911f39bd3a477dd048522412970f5dc6471", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkzMTYwNw==", "url": "https://github.com/MegaMek/mekhq/pull/1491#discussion_r379931607", "bodyText": "Unlikely.", "author": "sixlettervariables", "createdAt": "2020-02-16T20:39:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTkyOTc1Ng=="}], "type": "inlineReview"}, {"oid": "fc48f6aac4d2624812887c5aad6c7ee9033f89b5", "url": "https://github.com/MegaMek/mekhq/commit/fc48f6aac4d2624812887c5aad6c7ee9033f89b5", "message": "Address review and LGTM comments", "committedDate": "2020-02-17T01:00:26Z", "type": "commit"}]}