{"pr_number": 4272, "pr_title": "Small fixes of issues with old devices support, brightness, etc", "pr_createdAt": "2020-09-11T18:10:59Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/4272", "timeline": [{"oid": "883e4fcd7c2827ea5fc778447bed966842aa1a0e", "url": "https://github.com/TeamNewPipe/NewPipe/commit/883e4fcd7c2827ea5fc778447bed966842aa1a0e", "message": "Small fixes of issues with old devices support, brightness, etc", "committedDate": "2020-09-11T17:52:38Z", "type": "commit"}, {"oid": "011cc7d3376f14d4f92e3bac9ef5bf2c8483b789", "url": "https://github.com/TeamNewPipe/NewPipe/commit/011cc7d3376f14d4f92e3bac9ef5bf2c8483b789", "message": "Android 11 initial support", "committedDate": "2020-09-13T23:46:00Z", "type": "commit"}, {"oid": "6d38615ea8453a712e487e4ab9409ac7ecf73a34", "url": "https://github.com/TeamNewPipe/NewPipe/commit/6d38615ea8453a712e487e4ab9409ac7ecf73a34", "message": "Android 11: transparent navigation and status bars", "committedDate": "2020-09-14T08:30:41Z", "type": "commit"}, {"oid": "150e156d26162063304dcf8ba361598f749cb697", "url": "https://github.com/TeamNewPipe/NewPipe/commit/150e156d26162063304dcf8ba361598f749cb697", "message": "Reimagined player positioning", "committedDate": "2020-09-15T11:43:43Z", "type": "commit"}, {"oid": "a5312c1341c9cf3a6edd350955a2b8a63ad09a0b", "url": "https://github.com/TeamNewPipe/NewPipe/commit/a5312c1341c9cf3a6edd350955a2b8a63ad09a0b", "message": "Perfect shadow", "committedDate": "2020-09-15T16:50:46Z", "type": "commit"}, {"oid": "5ada0ae2c7e67a965031b3cf3ae2b91536d046b6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5ada0ae2c7e67a965031b3cf3ae2b91536d046b6", "message": "Hiding controls when orientation changes to landscape", "committedDate": "2020-09-15T19:10:38Z", "type": "commit"}, {"oid": "a1e4ef9e8e8b0efdc494774a4e26f8de30ea7c1c", "url": "https://github.com/TeamNewPipe/NewPipe/commit/a1e4ef9e8e8b0efdc494774a4e26f8de30ea7c1c", "message": "Fix for multiple listeners of insets", "committedDate": "2020-09-16T01:49:26Z", "type": "commit"}, {"oid": "c9be812330dd80e0901ccc9a16fe99f06dd7f737", "url": "https://github.com/TeamNewPipe/NewPipe/commit/c9be812330dd80e0901ccc9a16fe99f06dd7f737", "message": "Fix for untouchable area", "committedDate": "2020-09-16T20:41:49Z", "type": "commit"}, {"oid": "92e13dafe534eb40b0c8309cca15d943f1095852", "url": "https://github.com/TeamNewPipe/NewPipe/commit/92e13dafe534eb40b0c8309cca15d943f1095852", "message": "Correct exit from fullscreen in case of error or close from notification,", "committedDate": "2020-09-17T16:01:20Z", "type": "commit"}, {"oid": "886a949a0021e722d4702aebfb216c57a4154a60", "url": "https://github.com/TeamNewPipe/NewPipe/commit/886a949a0021e722d4702aebfb216c57a4154a60", "message": "Enable/disable video after screen on/off regardless of background playback setting", "committedDate": "2020-09-17T19:30:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyMjQzMw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491422433", "bodyText": "Add another parenthesis here before searchForAutogenerated and userPreferredLanguage, in order to make it more clear that the &&s are referred to only the two items to the left and to the right.", "author": "Stypox", "createdAt": "2020-09-19T12:50:40Z", "path": "app/src/main/java/org/schabi/newpipe/player/VideoPlayer.java", "diffHunk": "@@ -359,8 +363,8 @@ private void buildCaptionMenu(final List<String> availableLanguages) {\n             if (userPreferredLanguage != null && (captionLanguage.equals(userPreferredLanguage)\n                     || searchForAutogenerated && captionLanguage.startsWith(userPreferredLanguage)\n                     || userPreferredLanguage.contains(\"(\") && captionLanguage.startsWith(", "originalCommit": "886a949a0021e722d4702aebfb216c57a4154a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ1NDc0Ng==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491454746", "bodyText": "I didn't write this mess there is only a spacing change from IDEA. Anyway I added parenthesis:)", "author": "avently", "createdAt": "2020-09-19T14:27:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyMjQzMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyOTE5Nw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491429197", "bodyText": "Could you better explain in which way this overrides a method? At first I interpreted it as a Java-language override, but it is not and you meant override in the sense of overwrite, so please change this to \"Override Google's behaviour\"", "author": "Stypox", "createdAt": "2020-09-19T13:08:41Z", "path": "app/src/main/java/org/schabi/newpipe/views/CustomCollapsingToolbarLayout.java", "diffHunk": "@@ -0,0 +1,36 @@\n+package org.schabi.newpipe.views;\n+\n+import android.content.Context;\n+import android.util.AttributeSet;\n+import androidx.annotation.NonNull;\n+import androidx.annotation.Nullable;\n+import androidx.core.view.ViewCompat;\n+import com.google.android.material.appbar.CollapsingToolbarLayout;\n+\n+public class CustomCollapsingToolbarLayout extends CollapsingToolbarLayout {\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context) {\n+        super(context);\n+        overrideListener();\n+    }\n+\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context,\n+                                         @Nullable final AttributeSet attrs) {\n+        super(context, attrs);\n+        overrideListener();\n+    }\n+\n+    public CustomCollapsingToolbarLayout(@NonNull final Context context,\n+                                         @Nullable final AttributeSet attrs,\n+                                         final int defStyleAttr) {\n+        super(context, attrs, defStyleAttr);\n+        overrideListener();\n+    }\n+\n+    /**\n+     * CollapsingToolbarLayout overrides our logic with fitsSystemWindows and ruins the layout.\n+     * Override Google's method", "originalCommit": "886a949a0021e722d4702aebfb216c57a4154a60", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQ1Mzk4Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r491453982", "bodyText": "Done", "author": "avently", "createdAt": "2020-09-19T14:26:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTQyOTE5Nw=="}], "type": "inlineReview"}, {"oid": "f41549ccf17fb12e8c38de5a5d049291159ceead", "url": "https://github.com/TeamNewPipe/NewPipe/commit/f41549ccf17fb12e8c38de5a5d049291159ceead", "message": "Added a comment and excluded automatic switch of orientation on tablets and Android TVs", "committedDate": "2020-09-19T14:21:01Z", "type": "commit"}, {"oid": "518eb97e3ab299f91e3f247582e9c4fa5de319d6", "url": "https://github.com/TeamNewPipe/NewPipe/commit/518eb97e3ab299f91e3f247582e9c4fa5de319d6", "message": "Variable width for caption button and hiding system UI after popup close", "committedDate": "2020-09-19T19:52:59Z", "type": "commit"}, {"oid": "3add24b8aa40d9029a1387ae2197afc2f8adedb8", "url": "https://github.com/TeamNewPipe/NewPipe/commit/3add24b8aa40d9029a1387ae2197afc2f8adedb8", "message": "Merged 'dev' branch", "committedDate": "2020-09-25T23:42:26Z", "type": "commit"}, {"oid": "df9823988ef3c386a5c4d3c4b18946937ba42276", "url": "https://github.com/TeamNewPipe/NewPipe/commit/df9823988ef3c386a5c4d3c4b18946937ba42276", "message": "Changes for tablets and device's orientation behavior\n- the app will not rotate the screen to portrait after video completes, it will just exit from fullscreen mode\n- ability to rotate the orientation via fullscreen button from landscape to portrait when device has locked orientation in landscape\n- ability to enter/exit to/from fullscreen on tablets with unlocked global orientation in portrait mode", "committedDate": "2020-09-27T01:11:38Z", "type": "commit"}, {"oid": "d0fc9fda711346b3cbc0f79ddfbbc50933de02d5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/d0fc9fda711346b3cbc0f79ddfbbc50933de02d5", "message": "Fixed player's ZOOM mode for KitKat devices", "committedDate": "2020-09-27T01:25:06Z", "type": "commit"}, {"oid": "9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8", "message": "Refactoring and made the player returning from landscape & fullscreen on vertical video to portrait after clicking on fullscreen button", "committedDate": "2020-09-27T03:39:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzNzE5OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r495537198", "bodyText": "Is that line needed to remember something or was it just commented out, because it did not help?", "author": "TobiGr", "createdAt": "2020-09-27T06:49:32Z", "path": "app/src/main/java/org/schabi/newpipe/fragments/detail/VideoDetailFragment.java", "diffHunk": "@@ -1927,21 +1946,29 @@ public void onFullscreenStateChanged(final boolean fullscreen) {\n         }\n         scrollToTop();\n \n-        addVideoPlayerView();\n+        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\n+            addVideoPlayerView();\n+        } else {\n+            // KitKat needs a delay before addVideoPlayerView call or it reports wrong height in\n+            // activity.getWindow().getDecorView().getHeight()", "originalCommit": "9a0c2c40bd6fa6e5f77fd9ee317ba8ebb881aba8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU2MTcwMw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r495561703", "bodyText": "It's a part of an explanation/comments. It probably should be written in JavaDoc style", "author": "avently", "createdAt": "2020-09-27T11:13:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzNzE5OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTU2MjM0Ng==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/4272#discussion_r495562346", "bodyText": "all good, i was a little sleepy while reviewing your changes this morning.", "author": "TobiGr", "createdAt": "2020-09-27T11:21:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTUzNzE5OA=="}], "type": "inlineReview"}, {"oid": "609bf64856574100bffba6e1e7313498986d1632", "url": "https://github.com/TeamNewPipe/NewPipe/commit/609bf64856574100bffba6e1e7313498986d1632", "message": "Merged 'dev' branch", "committedDate": "2020-09-27T12:04:20Z", "type": "commit"}, {"oid": "e53e5ca20e9b1494f07878e549bc66b3eedcd472", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e53e5ca20e9b1494f07878e549bc66b3eedcd472", "message": "Disabled nested scrolling of queue", "committedDate": "2020-09-27T12:50:21Z", "type": "commit"}]}