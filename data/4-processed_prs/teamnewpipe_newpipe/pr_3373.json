{"pr_number": 3373, "pr_title": "Add search for subscription picker in the feed group dialog", "pr_createdAt": "2020-04-05T19:36:04Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3373", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwNjUwMA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3373#discussion_r404006500", "bodyText": "You made it diacritic sensitive, and it's really annoying for languages with diacritics, because you never know if people have respected diacritics or not.\nFrom this SO, collate Latin1_general_CI_AI (Case Insensitive Accent Insensitive) should do the job\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    ORDER BY name COLLATE NOCASE ASC\n          \n          \n            \n                    ORDER BY name COLLATE Latin1_general_CI_AI", "author": "B0pol", "createdAt": "2020-04-06T11:04:19Z", "path": "app/src/main/java/org/schabi/newpipe/database/subscription/SubscriptionDAO.kt", "diffHunk": "@@ -16,6 +16,13 @@ abstract class SubscriptionDAO : BasicDAO<SubscriptionEntity> {\n     @Query(\"SELECT * FROM subscriptions ORDER BY name COLLATE NOCASE ASC\")\n     abstract override fun getAll(): Flowable<List<SubscriptionEntity>>\n \n+    @Query(\"\"\"\n+        SELECT * FROM subscriptions\n+        WHERE name LIKE '%' || :filter || '%'\n+        ORDER BY name COLLATE NOCASE ASC", "originalCommit": "a91ee2d2c8e36ab2e9eeae6175aba59a5adba074", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMxMDg2Mw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3373#discussion_r406310863", "bodyText": "Yep, I did noticed that.\nHowever, I don't think it is that easy to fix it. Android's SQLite doesn't have a collation available for this use case and I'm not sure if SQLite itself even supports using it for the LIKE statement.\nSome solutions that I found is to either have a column (in some table) where you normalize these characters when inserting to it, or transforming the search query into a expression that treat those special characters as normal ones (e.g. [a\u00e1\u00e0\u00e3A\u00c1\u00c0\u00c3...]). We could also add support for the accent insensitive LIKE natively, but I'm not so sure about that...\nMaybe I missed something about this in Android, so let me know if you find some native solution for this.\nStill, for the order, UNICODE or LOCALIZED would've been better here (available in Android).\nI'll leave these issues for another PR because that's how it's done in multiple queries across the app, would have to change them as well.", "author": "mauriciocolli", "createdAt": "2020-04-09T16:02:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDAwNjUwMA=="}], "type": "inlineReview"}, {"oid": "841f47ecfe36d8f80706a3911601995ced759993", "url": "https://github.com/TeamNewPipe/NewPipe/commit/841f47ecfe36d8f80706a3911601995ced759993", "message": "Fix subscription picker items flickering in the feed group dialog\n\nThe adapter could not tell the items were the same because the\nsubscription class was missing some methods (i.e. equals and hashcode),\nso a full rebind was being done.", "committedDate": "2020-04-09T15:59:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODY4NTQzMw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3373#discussion_r408685433", "bodyText": "Here it seems like you are returning something even though the function is void, I find it confusing\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                return super.onBackPressed()\n          \n          \n            \n                                super.onBackPressed()", "author": "Stypox", "createdAt": "2020-04-15T08:54:53Z", "path": "app/src/main/java/org/schabi/newpipe/local/subscription/dialog/FeedGroupDialog.kt", "diffHunk": "@@ -81,15 +85,19 @@ class FeedGroupDialog : DialogFragment() {\n     override fun onCreateDialog(savedInstanceState: Bundle?): Dialog {\n         return object : Dialog(requireActivity(), theme) {\n             override fun onBackPressed() {\n-                if (currentScreen !is InitialScreen) {\n-                    showScreen(InitialScreen)\n-                } else {\n-                    super.onBackPressed()\n+                if (!this@FeedGroupDialog.onBackPressed()) {\n+                    return super.onBackPressed()", "originalCommit": "841f47ecfe36d8f80706a3911601995ced759993", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c24dfc63dce8caa161d76b7cb5743a082b33caa0", "url": "https://github.com/TeamNewPipe/NewPipe/commit/c24dfc63dce8caa161d76b7cb5743a082b33caa0", "message": "Add search for subscription picker in the feed group dialog", "committedDate": "2020-06-27T14:25:25Z", "type": "commit"}, {"oid": "9f3b35634a66ad07776145020c30a553482af478", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9f3b35634a66ad07776145020c30a553482af478", "message": "Fix subscription picker items flickering in the feed group dialog\n\nThe adapter could not tell the items were the same because the\nsubscription class was missing some methods (i.e. equals and hashcode),\nso a full rebind was being done.", "committedDate": "2020-06-27T14:25:31Z", "type": "commit"}, {"oid": "9f3b35634a66ad07776145020c30a553482af478", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9f3b35634a66ad07776145020c30a553482af478", "message": "Fix subscription picker items flickering in the feed group dialog\n\nThe adapter could not tell the items were the same because the\nsubscription class was missing some methods (i.e. equals and hashcode),\nso a full rebind was being done.", "committedDate": "2020-06-27T14:25:31Z", "type": "forcePushed"}]}