{"pr_number": 5029, "pr_title": "Switch to Groupie's view binding module.", "pr_createdAt": "2020-11-29T01:09:06Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/5029", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE3NzEwNA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r532177104", "bodyText": "Wouldn't there be side-effects by just moving the id like this? I think tools:viewBindingIgnore=\"true\" would be safer since this layout doesn't need view binding anyway.", "author": "vkay94", "createdAt": "2020-11-29T08:52:30Z", "path": "app/src/main/res/layout-large-land/fragment_video_detail.xml", "diffHunk": "@@ -2,12 +2,12 @@\n <FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n     xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n     xmlns:tools=\"http://schemas.android.com/tools\"\n+    android:id=\"@+id/video_item_detail\"\n     android:layout_width=\"match_parent\"\n     android:layout_height=\"match_parent\"\n     android:background=\"?attr/windowBackground\">\n \n     <LinearLayout\n-        android:id=\"@+id/video_item_detail\"", "originalCommit": "4fc7312edd0b9be104ad5805bdaa669846f78936", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE4Nzk0OQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r532187949", "bodyText": "I found that a compile error is generated even with tools:viewBindingIgnore=\"true\", and it's needed here anyway.", "author": "Isira-Seneviratne", "createdAt": "2020-11-29T10:19:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE3NzEwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE5Njg1Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r532196852", "bodyText": "Ah okay. If it's required later than it's the better approach. I'm just curious because the root layout also covers overlay_layout and there might be unexpected behavior if, for example, the visibility of video_item_detail  is changed (but I didn't look whether there is such case xD)", "author": "vkay94", "createdAt": "2020-11-29T11:37:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjE3NzEwNA=="}], "type": "inlineReview"}, {"oid": "017b3069bbf9ff38def1937f79cb12687ca164de", "url": "https://github.com/TeamNewPipe/NewPipe/commit/017b3069bbf9ff38def1937f79cb12687ca164de", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2020-11-29T10:46:09Z", "type": "forcePushed"}, {"oid": "2546b44073a22702ad182e2431443b7f3ed20b6c", "url": "https://github.com/TeamNewPipe/NewPipe/commit/2546b44073a22702ad182e2431443b7f3ed20b6c", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2020-12-15T09:22:30Z", "type": "forcePushed"}, {"oid": "efee6460b70b630b35b06af2aadd9e1e3371410f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/efee6460b70b630b35b06af2aadd9e1e3371410f", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2020-12-16T01:02:37Z", "type": "forcePushed"}, {"oid": "7535c5f229f9e78c6be230d3d86a93453e0c32f1", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7535c5f229f9e78c6be230d3d86a93453e0c32f1", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2020-12-19T23:09:48Z", "type": "forcePushed"}, {"oid": "1f997609a85851e6a44ad37ab033c60c93a6f353", "url": "https://github.com/TeamNewPipe/NewPipe/commit/1f997609a85851e6a44ad37ab033c60c93a6f353", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-02T03:56:33Z", "type": "forcePushed"}, {"oid": "7443826c39b2f627b6f0096dab7ca18d5a4f15de", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7443826c39b2f627b6f0096dab7ca18d5a4f15de", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-14T06:27:49Z", "type": "forcePushed"}, {"oid": "5db5f6c92599045e8fa95c9df8c646450721ef7c", "url": "https://github.com/TeamNewPipe/NewPipe/commit/5db5f6c92599045e8fa95c9df8c646450721ef7c", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-16T04:38:41Z", "type": "forcePushed"}, {"oid": "7c0dfcdd355c8877e699c2faad68f3ee47d443c0", "url": "https://github.com/TeamNewPipe/NewPipe/commit/7c0dfcdd355c8877e699c2faad68f3ee47d443c0", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-16T05:04:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODgyMTQ5Mg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558821492", "bodyText": "Why don't you use view binding here?", "author": "Stypox", "createdAt": "2021-01-16T07:40:09Z", "path": "app/src/main/java/org/schabi/newpipe/local/subscription/item/ChannelItem.kt", "diffHunk": "@@ -32,18 +29,25 @@ class ChannelItem(\n     }\n \n     override fun bind(viewHolder: GroupieViewHolder, position: Int) {\n-        viewHolder.itemTitleView.text = infoItem.name\n-        viewHolder.itemAdditionalDetails.text = getDetailLine(viewHolder.root.context)\n-        if (itemVersion == ItemVersion.NORMAL) viewHolder.itemChannelDescriptionView.text = infoItem.description\n+        val itemTitleView = viewHolder.root.findViewById<TextView>(R.id.itemTitleView)\n+        val itemAdditionalDetails = viewHolder.root.findViewById<TextView>(R.id.itemAdditionalDetails)\n+        val itemChannelDescriptionView = viewHolder.root.findViewById<TextView>(R.id.itemChannelDescriptionView)\n+        val itemThumbnailView = viewHolder.root.findViewById<ImageView>(R.id.itemThumbnailView)", "originalCommit": "7c0dfcdd355c8877e699c2faad68f3ee47d443c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODg1Nzk3OQ==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558857979", "bodyText": "@Stypox This change was the first attempt to switch from the deprecated Android-Kotlin-Extensions. As you can see this class uses the \"default\" Item class. @Isira-Seneviratne This class should extend from the BindableItem too as the other classes do.", "author": "vkay94", "createdAt": "2021-01-16T12:27:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODgyMTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODg4MTg2OA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558881868", "bodyText": "What should be used as the generic parameter? There are three possible layouts.", "author": "Isira-Seneviratne", "createdAt": "2021-01-16T13:27:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODgyMTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODg4NjI0Nw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558886247", "bodyText": "Ah right, that was the point back then. Ignore my above comment :')", "author": "vkay94", "createdAt": "2021-01-16T13:39:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODgyMTQ5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODk2ODAzNw==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558968037", "bodyText": "Oh, I see", "author": "Stypox", "createdAt": "2021-01-16T17:14:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODgyMTQ5Mg=="}], "type": "inlineReview"}, {"oid": "fb56b65f5ec2a46dd04af162d61b0a32351b9d61", "url": "https://github.com/TeamNewPipe/NewPipe/commit/fb56b65f5ec2a46dd04af162d61b0a32351b9d61", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-16T10:58:16Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODg3MDEzMg==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/5029#discussion_r558870132", "bodyText": "You could use apply to reduce some code:\nviewholder.binding.selectedHighlight.apply {\n    animate().setListener(null).cancel()\n    isGone = true\n    alpha = 1F\n}", "author": "vkay94", "createdAt": "2021-01-16T12:58:08Z", "path": "app/src/main/java/org/schabi/newpipe/local/subscription/item/PickerSubscriptionItem.kt", "diffHunk": "@@ -1,46 +1,50 @@\n package org.schabi.newpipe.local.subscription.item\n \n import android.view.View\n+import androidx.core.view.isGone\n import androidx.core.view.isVisible\n import com.nostra13.universalimageloader.core.ImageLoader\n-import com.xwray.groupie.kotlinandroidextensions.GroupieViewHolder\n-import com.xwray.groupie.kotlinandroidextensions.Item\n-import kotlinx.android.synthetic.main.picker_subscription_item.*\n-import kotlinx.android.synthetic.main.picker_subscription_item.view.*\n+import com.xwray.groupie.viewbinding.BindableItem\n+import com.xwray.groupie.viewbinding.GroupieViewHolder\n import org.schabi.newpipe.R\n import org.schabi.newpipe.database.subscription.SubscriptionEntity\n+import org.schabi.newpipe.databinding.PickerSubscriptionItemBinding\n import org.schabi.newpipe.ktx.AnimationType\n import org.schabi.newpipe.ktx.animate\n import org.schabi.newpipe.util.ImageDisplayConstants\n \n data class PickerSubscriptionItem(\n     val subscriptionEntity: SubscriptionEntity,\n     var isSelected: Boolean = false\n-) : Item() {\n+) : BindableItem<PickerSubscriptionItemBinding>() {\n     override fun getId(): Long = subscriptionEntity.uid\n     override fun getLayout(): Int = R.layout.picker_subscription_item\n     override fun getSpanSize(spanCount: Int, position: Int): Int = 1\n \n-    override fun bind(viewHolder: GroupieViewHolder, position: Int) {\n+    override fun bind(viewBinding: PickerSubscriptionItemBinding, position: Int) {\n         ImageLoader.getInstance().displayImage(\n             subscriptionEntity.avatarUrl,\n-            viewHolder.thumbnail_view, ImageDisplayConstants.DISPLAY_AVATAR_OPTIONS\n+            viewBinding.thumbnailView, ImageDisplayConstants.DISPLAY_AVATAR_OPTIONS\n         )\n \n-        viewHolder.title_view.text = subscriptionEntity.name\n-        viewHolder.selected_highlight.isVisible = isSelected\n+        viewBinding.titleView.text = subscriptionEntity.name\n+        viewBinding.selectedHighlight.isVisible = isSelected\n     }\n \n-    override fun unbind(viewHolder: GroupieViewHolder) {\n+    override fun unbind(viewHolder: GroupieViewHolder<PickerSubscriptionItemBinding>) {\n         super.unbind(viewHolder)\n \n-        viewHolder.selected_highlight.animate().setListener(null).cancel()\n-        viewHolder.selected_highlight.visibility = View.GONE\n-        viewHolder.selected_highlight.alpha = 1F\n+        val binding = viewHolder.binding\n+        binding.selectedHighlight.animate().setListener(null).cancel()\n+        binding.selectedHighlight.isGone = true\n+        binding.selectedHighlight.alpha = 1F", "originalCommit": "fb56b65f5ec2a46dd04af162d61b0a32351b9d61", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "68be87724ae4470aae7a6058f98082f4e0b7316f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/68be87724ae4470aae7a6058f98082f4e0b7316f", "message": "Switch to Groupie view binding module.", "committedDate": "2021-01-16T13:25:38Z", "type": "commit"}, {"oid": "46afe5153f6d7e774fd63e0a07007eb485d42e84", "url": "https://github.com/TeamNewPipe/NewPipe/commit/46afe5153f6d7e774fd63e0a07007eb485d42e84", "message": "Use BindableItem in EmptyPlaceholderItem.", "committedDate": "2021-01-16T13:25:38Z", "type": "commit"}, {"oid": "b387946d34e388a7c9a54a745b5c693a9d445c0a", "url": "https://github.com/TeamNewPipe/NewPipe/commit/b387946d34e388a7c9a54a745b5c693a9d445c0a", "message": "Use BindableItem in FeedGroupAddItem.", "committedDate": "2021-01-16T13:25:39Z", "type": "commit"}, {"oid": "ee94b296ae77054e8097c3ba3817761a0648737f", "url": "https://github.com/TeamNewPipe/NewPipe/commit/ee94b296ae77054e8097c3ba3817761a0648737f", "message": "Use BindableItem in FeedGroupCardItem.", "committedDate": "2021-01-16T13:25:40Z", "type": "commit"}, {"oid": "761f6568fa1e4a3da0964552e60376224158e5e0", "url": "https://github.com/TeamNewPipe/NewPipe/commit/761f6568fa1e4a3da0964552e60376224158e5e0", "message": "Use BindableItem in FeedGroupCarouselItem.", "committedDate": "2021-01-16T13:25:40Z", "type": "commit"}, {"oid": "9d27d49c1f849b3a6170bfb6efa2680761406ee2", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9d27d49c1f849b3a6170bfb6efa2680761406ee2", "message": "Use BindableItem in FeedGroupReorderItem.", "committedDate": "2021-01-16T13:25:41Z", "type": "commit"}, {"oid": "51a948bfcf2b733e5497c67432e0d9145f1b7376", "url": "https://github.com/TeamNewPipe/NewPipe/commit/51a948bfcf2b733e5497c67432e0d9145f1b7376", "message": "Use BindableItem in FeedImportExportItem.", "committedDate": "2021-01-16T13:25:41Z", "type": "commit"}, {"oid": "9e5f079cf254d741b9e3357075f0c43cb81730ab", "url": "https://github.com/TeamNewPipe/NewPipe/commit/9e5f079cf254d741b9e3357075f0c43cb81730ab", "message": "Use BindableItem in HeaderItem.", "committedDate": "2021-01-16T13:25:41Z", "type": "commit"}, {"oid": "a188125982626a9cdb2d5584fa2bfa82ef530119", "url": "https://github.com/TeamNewPipe/NewPipe/commit/a188125982626a9cdb2d5584fa2bfa82ef530119", "message": "Use BindableItem in HeaderWithMenuItem.", "committedDate": "2021-01-16T13:25:42Z", "type": "commit"}, {"oid": "e2dd058430ef92c315b0e2fd59c88efa141e8944", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e2dd058430ef92c315b0e2fd59c88efa141e8944", "message": "Use BindableItem in PickerIconItem.", "committedDate": "2021-01-16T13:25:42Z", "type": "commit"}, {"oid": "77675b361fa5f516b96d03d045d11ccf1250db20", "url": "https://github.com/TeamNewPipe/NewPipe/commit/77675b361fa5f516b96d03d045d11ccf1250db20", "message": "Use BindableItem in PickerSubscriptionItem.", "committedDate": "2021-01-16T13:29:45Z", "type": "commit"}, {"oid": "e0de66b1bea0ca70859261f1872955734b5db2da", "url": "https://github.com/TeamNewPipe/NewPipe/commit/e0de66b1bea0ca70859261f1872955734b5db2da", "message": "Fix some issues.", "committedDate": "2021-01-16T13:29:48Z", "type": "commit"}, {"oid": "01396923f112e965ead4a92f1c92f41ceec2ae24", "url": "https://github.com/TeamNewPipe/NewPipe/commit/01396923f112e965ead4a92f1c92f41ceec2ae24", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-16T13:29:49Z", "type": "commit"}, {"oid": "01396923f112e965ead4a92f1c92f41ceec2ae24", "url": "https://github.com/TeamNewPipe/NewPipe/commit/01396923f112e965ead4a92f1c92f41ceec2ae24", "message": "Use the base Groupie library in ChannelItem.", "committedDate": "2021-01-16T13:29:49Z", "type": "forcePushed"}]}