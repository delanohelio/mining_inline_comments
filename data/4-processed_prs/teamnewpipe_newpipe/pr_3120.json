{"pr_number": 3120, "pr_title": "checkpoint db before export", "pr_createdAt": "2020-02-21T12:42:21Z", "pr_url": "https://github.com/TeamNewPipe/NewPipe/pull/3120", "timeline": [{"oid": "afe4151421c8ae49d2d14eaa586dbb2ea00888b5", "url": "https://github.com/TeamNewPipe/NewPipe/commit/afe4151421c8ae49d2d14eaa586dbb2ea00888b5", "message": "checkpoint db before export", "committedDate": "2020-02-21T12:37:19Z", "type": "commit"}, {"oid": "aaef532598e6f77812dfe59b622d75b7c0471772", "url": "https://github.com/TeamNewPipe/NewPipe/commit/aaef532598e6f77812dfe59b622d75b7c0471772", "message": "refactor checkpointing", "committedDate": "2020-02-21T13:13:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMzcwMA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3120#discussion_r382803700", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(null == databaseInstance){\n          \n          \n            \n                    if (databaseInstance == null) {", "author": "B0pol", "createdAt": "2020-02-21T21:01:17Z", "path": "app/src/main/java/org/schabi/newpipe/NewPipeDatabase.java", "diffHunk": "@@ -39,4 +41,14 @@ public static AppDatabase getInstance(@NonNull Context context) {\n \n         return result;\n     }\n+\n+    public static void checkpoint() {\n+        if(null == databaseInstance){", "originalCommit": "aaef532598e6f77812dfe59b622d75b7c0471772", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjgwMzgwMA==", "url": "https://github.com/TeamNewPipe/NewPipe/pull/3120#discussion_r382803800", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    if(c.moveToFirst() && c.getInt(0) == 1) {\n          \n          \n            \n                    if (c.moveToFirst() && c.getInt(0) == 1) {", "author": "B0pol", "createdAt": "2020-02-21T21:01:31Z", "path": "app/src/main/java/org/schabi/newpipe/NewPipeDatabase.java", "diffHunk": "@@ -39,4 +41,14 @@ public static AppDatabase getInstance(@NonNull Context context) {\n \n         return result;\n     }\n+\n+    public static void checkpoint() {\n+        if(null == databaseInstance){\n+            throw new IllegalStateException(\"database is not initialized\");\n+        }\n+        Cursor c = databaseInstance.query(\"pragma wal_checkpoint(full)\", null);\n+        if(c.moveToFirst() && c.getInt(0) == 1) {", "originalCommit": "aaef532598e6f77812dfe59b622d75b7c0471772", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "15d5b4a9ac47a5283bf3ac4312699caf74ebeb2d", "url": "https://github.com/TeamNewPipe/NewPipe/commit/15d5b4a9ac47a5283bf3ac4312699caf74ebeb2d", "message": "Improve code style\n\nCo-Authored-By: B0pol <bopol@e.email>", "committedDate": "2020-03-07T18:10:32Z", "type": "commit"}]}