{"pr_number": 8585, "pr_title": "SAK-44309 Save event when student upload or delete an attachment in samigo", "pr_createdAt": "2020-09-17T15:23:21Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8585", "timeline": [{"oid": "043aeac914af0ce07521e59c920aaab57e6df82c", "url": "https://github.com/sakaiproject/sakai/commit/043aeac914af0ce07521e59c920aaab57e6df82c", "message": "SAK-44309 Save event when student upload or delete an attachment in samigo", "committedDate": "2020-09-17T15:24:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4MjM4OA==", "url": "https://github.com/sakaiproject/sakai/pull/8585#discussion_r496782388", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaFilename, null, true, NotificationService.NOTI_REQUIRED));\n          \n          \n            \n                        EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\" + itemGradingData.getItemGradingId() + \", \" + mediaFilename, null, true, NotificationService.NOTI_REQUIRED));", "author": "ern", "createdAt": "2020-09-29T14:50:39Z", "path": "samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentGradingFacadeQueries.java", "diffHunk": "@@ -748,6 +753,7 @@ public void removeMediaById(Long mediaId, Long itemGradingId) {\n             ItemGradingData itemGradingData = getItemGrading(itemGradingId);\n             itemGradingData.setAutoScore(Double.valueOf(0));\n             saveItemGrading(itemGradingData);\n+            EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_DELETE, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaFilename, null, true, NotificationService.NOTI_REQUIRED));", "originalCommit": "043aeac914af0ce07521e59c920aaab57e6df82c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4MjkyNg==", "url": "https://github.com/sakaiproject/sakai/pull/8585#discussion_r496782926", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));\n          \n          \n            \n                EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\" + itemGradingData.getItemGradingId() + \", \" + mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));", "author": "ern", "createdAt": "2020-09-29T14:51:17Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/delivery/DeliveryBean.java", "diffHunk": "@@ -1603,6 +1603,7 @@ public void saveMedia(String agent, String mediaLocation, ItemGradingData itemGr\n     log.debug(\"***7. addMediaToItemGrading, adata={}\", adata);\n     itemGradingData.setAnswerText(mediaId + \"\");\n     gradingService.saveItemGrading(itemGradingData);\n+    EventTrackingService.post(EventTrackingService.newEvent(SamigoConstants.EVENT_ASSESSMENT_ATTACHMENT_NEW, \"itemGradingId=\"+itemGradingData.getItemGradingId()+\", \"+mediaData.getFilename(), null, true, NotificationService.NOTI_REQUIRED));", "originalCommit": "043aeac914af0ce07521e59c920aaab57e6df82c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "14ec72480d6c7fba58d708129232b1fc534bee9e", "url": "https://github.com/sakaiproject/sakai/commit/14ec72480d6c7fba58d708129232b1fc534bee9e", "message": "Update samigo/samigo-app/src/java/org/sakaiproject/tool/assessment/ui/bean/delivery/DeliveryBean.java", "committedDate": "2020-09-29T14:52:36Z", "type": "commit"}, {"oid": "55caee0ea6858dfd59301d2c849438a2240b737a", "url": "https://github.com/sakaiproject/sakai/commit/55caee0ea6858dfd59301d2c849438a2240b737a", "message": "Update samigo/samigo-services/src/java/org/sakaiproject/tool/assessment/facade/AssessmentGradingFacadeQueries.java", "committedDate": "2020-09-29T14:52:43Z", "type": "commit"}]}