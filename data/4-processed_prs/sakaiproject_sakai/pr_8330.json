{"pr_number": 8330, "pr_title": "SAK-43879 Samigo - clicking MCSC answer labels don't select their radio buttons", "pr_createdAt": "2020-07-02T22:10:41Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8330", "timeline": [{"oid": "1d2131fb0c4738f18ffbdb2ebe47bf1ddab5f4de", "url": "https://github.com/sakaiproject/sakai/commit/1d2131fb0c4738f18ffbdb2ebe47bf1ddab5f4de", "message": "SAK-43879 Samigo - clicking MCSC answer labels don't select their radio buttons", "committedDate": "2020-07-02T22:09:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYxMDQ5NQ==", "url": "https://github.com/sakaiproject/sakai/pull/8330#discussion_r449610495", "bodyText": "are you reverting your previous fix?", "author": "ottenhoff", "createdAt": "2020-07-03T14:28:07Z", "path": "samigo/samigo-app/src/webapp/jsf/delivery/item/deliverMultipleChoiceSingleCorrect.jsp", "diffHunk": "@@ -89,16 +89,30 @@ should be included in file importing DeliveryMessages\n   </t:dataList>\n \n   </h:panelGroup>\n-  <h:outputText value=\"<script>\" escape=\"false\" />\n-  <h:outputText value=\"    var elBlockToFix = $('.mcscFixUpClassForSelector-#{question.itemData.itemId}');\" escape=\"false\" />\n-  <h:outputText value=\"    $(elBlockToFix).find('div.mcscFixUpSource td').each(function(index,elLabelAndInputToMove) {\" escape=\"false\" />\n-  <h:outputText value=\"      var contentsToMove = $(elLabelAndInputToMove).contents();\" escape=\"false\" />\n-  <h:outputText value=\"      if (typeof contentsToMove !== 'undefined') {\" escape=\"false\" />\n-  <h:outputText value=\"        $(elBlockToFix).find('div.mcscFixUpTarget:first').replaceWith(contentsToMove);\" escape=\"false\" />\n-  <h:outputText value=\"      }\" escape=\"false\" />\n-  <h:outputText value=\"    });\" escape=\"false\" />\n-  <h:outputText value=\"    $(elBlockToFix).find('div.mcscFixUpSource').remove();\" escape=\"false\" />\n-  <h:outputText value=\"</script>\" escape=\"false\" />\n+  <script>", "originalCommit": "1d2131fb0c4738f18ffbdb2ebe47bf1ddab5f4de", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcxMzkwMw==", "url": "https://github.com/sakaiproject/sakai/pull/8330#discussion_r449713903", "bodyText": "I'm partially reverting it, but with changes.\nIn my previous fix for SAK-43625 with PR #8306, I had removed the code that moved the question's answer, radio button, and icon into the radio button's label section because I thought it wasn't necessary after I made the script tag only work on that script tag's question block.  That fix made the formatting \"look\" correct, but I didn't realize removing that code broke being able to click the label to select the radio button.\nSo I'm putting that code back in, but I also had to include a new change to fix the JS error that was causing SAK-43625.\nThe new change adds another 'fake' class to use as a jquery selector, 'span.imageClassForSelector'\nvar properImage = $(answerLabel).parent('li').find('span.imageClassForSelector')[0];\nMy first fix (PR #8306) also added a bunch of <h:outputText> tags to display the <script> tag, because at the time, I thought I was hitting an error if I didn't add it to all the lines of the <script> tag (But maybe that error was from a typo or bad code?). While testing this new fix, I tried to put the <h:outputText> only around the one line that needed it, and that seemed to work.  This also makes it easier to read in Chrome web developer because my previous fix put the script tag all on one line so it was hard to debug unless you use the 'pretty print' feature in web developer.", "author": "austin48", "createdAt": "2020-07-03T22:31:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYxMDQ5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcyMDExMQ==", "url": "https://github.com/sakaiproject/sakai/pull/8330#discussion_r449720111", "bodyText": "I'm not sure if there's an easy way to compare specific files across forks via git or github, but if you download these two files, you should be able to see the differences between this file before my \"other\" fix in #8306\" and this PR\nhttps://raw.githubusercontent.com/sakaiproject/sakai/135f9cbd79c05d315d886c882b1c56253d3e2913/samigo/samigo-app/src/webapp/jsf/delivery/item/deliverMultipleChoiceSingleCorrect.jsp\nhttps://raw.githubusercontent.com/austin48/sakai/SAK-43879/samigo/samigo-app/src/webapp/jsf/delivery/item/deliverMultipleChoiceSingleCorrect.jsp", "author": "austin48", "createdAt": "2020-07-03T23:41:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTYxMDQ5NQ=="}], "type": "inlineReview"}]}