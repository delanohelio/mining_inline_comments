{"pr_number": 8064, "pr_title": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associat\u2026", "pr_createdAt": "2020-03-23T14:29:34Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8064", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjQ5Mjc2OQ==", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396492769", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-23T14:29:39Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -222,8 +225,9 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "originalCommit": "3d5e8981a009708d0ee36b7a0454faff0ad9c198", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2", "url": "https://github.com/sakaiproject/sakai/commit/53c98a3d800d982d7131cec63892d63e927fe8f2", "message": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associated with their respective labels", "committedDate": "2020-03-24T09:07:00Z", "type": "commit"}, {"oid": "53c98a3d800d982d7131cec63892d63e927fe8f2", "url": "https://github.com/sakaiproject/sakai/commit/53c98a3d800d982d7131cec63892d63e927fe8f2", "message": "SAK-41964 - Tests&Quizzes: Edit Question form fields are not associated with their respective labels", "committedDate": "2020-03-24T09:07:00Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI2Nw==", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998267", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-24T09:08:58Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";", "originalCommit": "53c98a3d800d982d7131cec63892d63e927fe8f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3MQ==", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998271", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-24T09:08:58Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");", "originalCommit": "53c98a3d800d982d7131cec63892d63e927fe8f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Mw==", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998273", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-24T09:08:58Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");", "originalCommit": "53c98a3d800d982d7131cec63892d63e927fe8f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Njk5ODI3Ng==", "url": "https://github.com/sakaiproject/sakai/pull/8064#discussion_r396998276", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-24T09:08:58Z", "path": "samigo/samigo-app/src/java/org/sakaiproject/jsf/renderer/RichTextEditArea.java", "diffHunk": "@@ -217,33 +221,33 @@ private void encodeCK(ResponseWriter writer, String value, String identity, Stri\n     if(shouldToggle && !disableWysiwyg)\n     {    \t\n     \tString show_editor = rb.getString(\"show_editor\");\n-    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +clientId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" +  clientId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n+    \twriter.write(\"<div class=\\\"toggle_link_container\\\"><a class=\\\"toggle_link\\\" id=\\\"\" +componentId+ \"_toggle\\\" href=\\\"javascript:show_editor('\" + componentId + \"', '\" + samigoFrameId + \"');\\\">\" + show_editor + \"</a></div>\\n\");\n     }\n     else {\n         \tvalue = ComponentManager.get(FormattedText.class).escapeHtmlFormattedTextarea((String) value);\n     }\n-    \n-    writer.write(\"<textarea name=\\\"\" + clientId + \"_textinput\\\" id=\\\"\" + clientId + \"_textinput\\\" \" + getIdentityAttribute(identity) + \" rows=\\\"\"+ textBoxRows + \"\\\" cols=\\\"\"+ textBoxCols + \"\\\" class=\\\"simple_text_area\\\">\");\n+\n+    String inputTextArea = \"<textarea name='%s' id='%s' rows='%d' cols='%d' class='%s'>\";\n+    writer.write(String.format(inputTextArea, clientId + \"_textinput\", componentId + \"_textinput\", textBoxRows, textBoxCols, \"simple_text_area\"));\n     writer.write((String) value);\n     writer.write(\"</textarea>\");\n     if (!disableWysiwyg) \n     \tif (shouldToggle) {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"firsttime\\\">\");\n     \t}\n     \telse if(hasToggle.equals(\"plain\") && !valueHasRichText){\n-        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + clientId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n+        \twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\" data-first=\\\"\" + componentId + \"\\\" data-second=\\\"\" + samigoFrameId + \"\\\">\");\n         }\n     \telse {\n-    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + clientId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");\n+    \t\twriter.write(\"<input type=\\\"hidden\\\" name=\\\"\" + clientId + \"_textinput_current_status\\\" id=\\\"\" + componentId + \"_textinput_current_status\\\" value=\\\"fckonly\\\">\");", "originalCommit": "53c98a3d800d982d7131cec63892d63e927fe8f2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}