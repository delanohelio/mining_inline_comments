{"pr_number": 8373, "pr_title": "SAK-32130 elFinder new service strategy", "pr_createdAt": "2020-07-17T22:09:05Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8373", "timeline": [{"oid": "24919bd8cb23c23306e678fe24ea1809d22747d3", "url": "https://github.com/sakaiproject/sakai/commit/24919bd8cb23c23306e678fe24ea1809d22747d3", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-17T22:31:24Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzNTA4NQ==", "url": "https://github.com/sakaiproject/sakai/pull/8373#discussion_r457335085", "bodyText": "These comments can be removed now. The samigo provider is now in samigo, and I'll refactor the SCORM one to live in the contrib project, so there won't be a need to add them here any more!", "author": "bjones86", "createdAt": "2020-07-20T12:25:17Z", "path": "textarea/elfinder-sakai/src/webapp/WEB-INF/applicationContext.xml", "diffHunk": "@@ -5,54 +5,51 @@\n \n \t<!-- FsService is often retrieved from HttpRequest -->\n \t<!-- while a static FsService is defined here -->\n-\t<bean id=\"fsServiceFactory\" class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceFactory\">\n-\t\t<property name=\"fsService\">\n-\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.SakaiFsService\">\n-\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t<property name=\"securityChecker\">\n-\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsSecurityChecker\"/>\n-\t\t\t\t</property>\n-\t\t\t\t<property name=\"toolVolume\">\n-\t\t\t\t\t<set>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.content.ContentSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t\t\t\t<property name=\"securityService\" ref=\"org.sakaiproject.authz.api.SecurityService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"threadLocalManager\" ref=\"org.sakaiproject.thread_local.api.ThreadLocalManager\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.content.DropboxSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t\t\t\t<property name=\"securityService\" ref=\"org.sakaiproject.authz.api.SecurityService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"threadLocalManager\" ref=\"org.sakaiproject.thread_local.api.ThreadLocalManager\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"discussionForumManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.DiscussionForumManager\"/>\n-\t\t\t\t\t\t\t<property name=\"messageForumsForumManager\" ref=\"org.sakaiproject.api.app.messageforums.MessageForumsForumManager\"/>\n-\t\t\t\t\t\t\t<property name=\"uiPermissionsManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.UIPermissionsManager\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n-\t\t\t\t\t\t</bean>\n-\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.assignment.AssignmentSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"assignmentService\" ref=\"org.sakaiproject.assignment.api.AssignmentService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.samigo.SamSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"publishedAssessmentService\" >\n-\t\t\t\t\t\t\t\t<bean class=\"org.sakaiproject.tool.assessment.services.assessment.PublishedAssessmentService\"/>\n-\t\t\t\t\t\t\t</property>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n+\t<bean id=\"fsServiceFactory\"\n+\t\t  class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceFactory\">\n+\t\t<property name=\"fsService\" ref=\"org.sakaiproject.elfinder.impl.SakaiFsServiceAdapter\"/>\n+\t</bean>\n \n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t</set>\n-\t\t\t\t</property>\n-\t\t\t</bean>\n+\t<bean id=\"org.sakaiproject.elfinder.impl.SakaiFsServiceAdapter\"\n+\t\t  class=\"org.sakaiproject.elfinder.impl.FsServiceAdapter\">\n+\t\t<property name=\"sakaiFsService\" ref=\"org.sakaiproject.elfinder.SakaiFsService\"/>\n+\t\t<property name=\"securityChecker\">\n+\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsSecurityChecker\"/>\n+\t\t</property>\n+\t\t<property name=\"fsServiceConfig\">\n+\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceConfig\"/>\n \t\t</property>\n \t</bean>\n+\n+<!--\t<bean id=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolume\"-->\n+<!--\t\t  class=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolumeFactory\"-->\n+<!--\t\t  init-method=\"init\">-->\n+<!--\t\t<property name=\"discussionForumManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.DiscussionForumManager\"/>-->\n+<!--\t\t<property name=\"messageForumsForumManager\" ref=\"org.sakaiproject.api.app.messageforums.MessageForumsForumManager\"/>-->\n+<!--\t\t<property name=\"sakaiFsService\" ref=\"org.sakaiproject.elfinder.sakai.SakaiFsService\"/>-->\n+<!--\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>-->\n+<!--\t\t<property name=\"uiPermissionsManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.UIPermissionsManager\"/>-->\n+<!--\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>-->\n+<!--\t</bean>-->\n+\n+<!--\t<bean id=\"org.sakaiproject.elfinder.sakai.samigo.SamSiteVolume\"-->\n+<!--\t\t  class=\"org.sakaiproject.elfinder.sakai.samigo.SamSiteVolumeFactory\"-->\n+<!--\t\t  init-method=\"init\">-->\n+<!--\t\t<property name=\"publishedAssessmentService\" >-->\n+<!--\t\t\t<bean class=\"org.sakaiproject.tool.assessment.services.assessment.PublishedAssessmentService\"/>-->\n+<!--\t\t</property>-->\n+<!--\t\t<property name=\"sakaiFsService\" ref=\"org.sakaiproject.elfinder.sakai.SakaiFsService\"/>-->\n+<!--\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>-->\n+<!--\t</bean>-->\n+\n+\t<!-- Uncomment the following bean definition to enable entity linking to SCORM Player modules. -->\n+\t<!-- NOTE: this requires the SCORM Player project to be build and deployed to your Tomcat. -->\n+\t<!--<bean class=\"org.sakaiproject.elfinder.sakai.scorm.ScormSiteVolumeFactory\">\n+        <property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\" />\n+        <property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n+        <property name=\"securityService\" ref=\"org.sakaiproject.authz.api.SecurityService\"/>\n+        <property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\" />\n+        <property name=\"scormContentService\" ref=\"org.sakaiproject.scorm.service.api.ScormContentService\" />\n+    </bean>-->\n+", "originalCommit": "24919bd8cb23c23306e678fe24ea1809d22747d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzNjc3NA==", "url": "https://github.com/sakaiproject/sakai/pull/8373#discussion_r457336774", "bodyText": "I noticed the forums/msg providers were removed rather than moved. Just wondering if this was intentional?\nEither way I think this comment can be removed.", "author": "bjones86", "createdAt": "2020-07-20T12:27:54Z", "path": "textarea/elfinder-sakai/src/webapp/WEB-INF/applicationContext.xml", "diffHunk": "@@ -5,54 +5,51 @@\n \n \t<!-- FsService is often retrieved from HttpRequest -->\n \t<!-- while a static FsService is defined here -->\n-\t<bean id=\"fsServiceFactory\" class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceFactory\">\n-\t\t<property name=\"fsService\">\n-\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.SakaiFsService\">\n-\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t<property name=\"securityChecker\">\n-\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsSecurityChecker\"/>\n-\t\t\t\t</property>\n-\t\t\t\t<property name=\"toolVolume\">\n-\t\t\t\t\t<set>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.content.ContentSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t\t\t\t<property name=\"securityService\" ref=\"org.sakaiproject.authz.api.SecurityService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"threadLocalManager\" ref=\"org.sakaiproject.thread_local.api.ThreadLocalManager\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.content.DropboxSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"contentHostingService\" ref=\"org.sakaiproject.content.api.ContentHostingService\"/>\n-\t\t\t\t\t\t\t<property name=\"siteService\" ref=\"org.sakaiproject.site.api.SiteService\"/>\n-\t\t\t\t\t\t\t<property name=\"securityService\" ref=\"org.sakaiproject.authz.api.SecurityService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"threadLocalManager\" ref=\"org.sakaiproject.thread_local.api.ThreadLocalManager\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"discussionForumManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.DiscussionForumManager\"/>\n-\t\t\t\t\t\t\t<property name=\"messageForumsForumManager\" ref=\"org.sakaiproject.api.app.messageforums.MessageForumsForumManager\"/>\n-\t\t\t\t\t\t\t<property name=\"uiPermissionsManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.UIPermissionsManager\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n-\t\t\t\t\t\t</bean>\n-\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.assignment.AssignmentSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"assignmentService\" ref=\"org.sakaiproject.assignment.api.AssignmentService\"/>\n-\t\t\t\t\t\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t\t<bean class=\"org.sakaiproject.elfinder.sakai.samigo.SamSiteVolumeFactory\">\n-\t\t\t\t\t\t\t<property name=\"publishedAssessmentService\" >\n-\t\t\t\t\t\t\t\t<bean class=\"org.sakaiproject.tool.assessment.services.assessment.PublishedAssessmentService\"/>\n-\t\t\t\t\t\t\t</property>\n-\t\t\t\t\t\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n+\t<bean id=\"fsServiceFactory\"\n+\t\t  class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceFactory\">\n+\t\t<property name=\"fsService\" ref=\"org.sakaiproject.elfinder.impl.SakaiFsServiceAdapter\"/>\n+\t</bean>\n \n-\t\t\t\t\t\t</bean>\n-\t\t\t\t\t</set>\n-\t\t\t\t</property>\n-\t\t\t</bean>\n+\t<bean id=\"org.sakaiproject.elfinder.impl.SakaiFsServiceAdapter\"\n+\t\t  class=\"org.sakaiproject.elfinder.impl.FsServiceAdapter\">\n+\t\t<property name=\"sakaiFsService\" ref=\"org.sakaiproject.elfinder.SakaiFsService\"/>\n+\t\t<property name=\"securityChecker\">\n+\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsSecurityChecker\"/>\n+\t\t</property>\n+\t\t<property name=\"fsServiceConfig\">\n+\t\t\t<bean class=\"org.sakaiproject.elfinder.impl.SakaiFsServiceConfig\"/>\n \t\t</property>\n \t</bean>\n+\n+<!--\t<bean id=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolume\"-->\n+<!--\t\t  class=\"org.sakaiproject.elfinder.sakai.msgcntr.MsgCntrSiteVolumeFactory\"-->\n+<!--\t\t  init-method=\"init\">-->\n+<!--\t\t<property name=\"discussionForumManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.DiscussionForumManager\"/>-->\n+<!--\t\t<property name=\"messageForumsForumManager\" ref=\"org.sakaiproject.api.app.messageforums.MessageForumsForumManager\"/>-->\n+<!--\t\t<property name=\"sakaiFsService\" ref=\"org.sakaiproject.elfinder.sakai.SakaiFsService\"/>-->\n+<!--\t\t<property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>-->\n+<!--\t\t<property name=\"uiPermissionsManager\" ref=\"org.sakaiproject.api.app.messageforums.ui.UIPermissionsManager\"/>-->\n+<!--\t\t<property name=\"userDirectoryService\" ref=\"org.sakaiproject.user.api.UserDirectoryService\"/>-->\n+<!--\t</bean>-->", "originalCommit": "24919bd8cb23c23306e678fe24ea1809d22747d3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d32bd36af2c1fc6700333d5f2b33d45a67914ae6", "url": "https://github.com/sakaiproject/sakai/commit/d32bd36af2c1fc6700333d5f2b33d45a67914ae6", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-22T22:38:54Z", "type": "forcePushed"}, {"oid": "eeb9db038d2c4ff203c74e11573ef2baa6316bf0", "url": "https://github.com/sakaiproject/sakai/commit/eeb9db038d2c4ff203c74e11573ef2baa6316bf0", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-22T22:41:54Z", "type": "forcePushed"}, {"oid": "0299ce1aa87d46801e68318d8e970a0ec9d9a30e", "url": "https://github.com/sakaiproject/sakai/commit/0299ce1aa87d46801e68318d8e970a0ec9d9a30e", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-22T22:51:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTQzMDYzNA==", "url": "https://github.com/sakaiproject/sakai/pull/8373#discussion_r459430634", "bodyText": "Thanks for putting this here for me :)", "author": "bjones86", "createdAt": "2020-07-23T13:01:51Z", "path": "kernel/api/src/main/java/org/sakaiproject/elfinder/FsType.java", "diffHunk": "@@ -0,0 +1,26 @@\n+package org.sakaiproject.elfinder;\n+\n+/**\n+ * This is an enumeration of sakai fs types\n+ * In the future making this a dynamic enumeration will better support registration\n+ */\n+public enum FsType {\n+    ASSESSMENT(\"assessment\"),\n+    ASSIGNMENT(\"assignment\"),\n+    CONTENT(\"content\"),\n+    DROPBOX(\"dropbox\"),\n+    FORUMS_FORUM(\"forum\"),\n+    FORUMS_TOPIC(\"topic\"),\n+    SCORM(\"scorm\"),", "originalCommit": "0299ce1aa87d46801e68318d8e970a0ec9d9a30e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c75524227d58e06a8e7389a1a3c7f234ac3617f8", "url": "https://github.com/sakaiproject/sakai/commit/c75524227d58e06a8e7389a1a3c7f234ac3617f8", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-29T15:07:31Z", "type": "forcePushed"}, {"oid": "7394df2086b3facbe84556bea074fcb392011d4b", "url": "https://github.com/sakaiproject/sakai/commit/7394df2086b3facbe84556bea074fcb392011d4b", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-29T15:34:36Z", "type": "commit"}, {"oid": "7394df2086b3facbe84556bea074fcb392011d4b", "url": "https://github.com/sakaiproject/sakai/commit/7394df2086b3facbe84556bea074fcb392011d4b", "message": "SAK-32130 elFinder new service strategy", "committedDate": "2020-07-29T15:34:36Z", "type": "forcePushed"}]}