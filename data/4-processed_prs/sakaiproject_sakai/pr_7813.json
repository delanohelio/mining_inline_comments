{"pr_number": 7813, "pr_title": "SAK-41390 Add Apache Ignite as Spring jCache/Hibernate provider", "pr_createdAt": "2020-01-26T23:38:16Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/7813", "timeline": [{"oid": "2082c90f02e9540a544f2717368c3635e69f450e", "url": "https://github.com/sakaiproject/sakai/commit/2082c90f02e9540a544f2717368c3635e69f450e", "message": "SAK-41390 Add Ignite Spring jCache", "committedDate": "2020-01-26T23:41:20Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTExOTAxNg==", "url": "https://github.com/sakaiproject/sakai/pull/7813#discussion_r371119016", "bodyText": "Looks like a minor mistake?", "author": "mpellicer", "createdAt": "2020-01-27T08:55:08Z", "path": "config/configuration/bundles/src/bundle/org/sakaiproject/config/bundle/default.sakai.properties", "diffHunk": "@@ -3174,7 +3172,7 @@\n \n # SAK-13389: the ability to hide input area for adding non-official participant\n # DEFAULT=true\n-# nonOfficialAccount=false\n+# nonOfficialAccount=fals", "originalCommit": "2082c90f02e9540a544f2717368c3635e69f450e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTExOTcxOQ==", "url": "https://github.com/sakaiproject/sakai/pull/7813#discussion_r371119719", "bodyText": "Missing EOF", "author": "mpellicer", "createdAt": "2020-01-27T08:56:51Z", "path": "kernel/kernel-impl/src/main/webapp/WEB-INF/ignite-components.xml", "diffHunk": "@@ -0,0 +1,164 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\" ?>\n+<beans xmlns=\"http://www.springframework.org/schema/beans\"\n+       xmlns:cache=\"http://www.springframework.org/schema/cache\"\n+       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n+                           http://www.springframework.org/schema/cache http://www.springframework.org/schema/cache/spring-cache.xsd\">\n+\n+    <cache:annotation-driven cache-manager=\"org.sakaiproject.ignite.SakaiCacheManager\"/>\n+\n+    <bean id=\"org.sakaiproject.ignite.SakaiCacheManager\"\n+          class=\"org.sakaiproject.ignite.SakaiSpringCacheManager\">\n+        <property name=\"igniteInstanceName\" value=\"${serverName}\"/>\n+        <property name=\"configuration\" ref=\"org.sakaiproject.ignite.SakaiIgniteConfiguration\"/>\n+        <property name=\"dynamicCacheConfiguration\">\n+            <bean class=\"org.apache.ignite.configuration.CacheConfiguration\">\n+                <property name=\"cacheMode\" value=\"REPLICATED\"/>\n+            </bean>\n+        </property>\n+    </bean>\n+\n+    <bean id=\"org.sakaiproject.ignite.SakaiIgnite\"\n+          class=\"org.sakaiproject.ignite.SakaiIgniteSpringBean\"\n+          destroy-method=\"destroy\">\n+        <property name=\"configuration\" ref=\"org.sakaiproject.ignite.SakaiIgniteConfiguration\"/>\n+    </bean>\n+\n+\n+    <bean id=\"org.sakaiproject.ignite.SakaiIgniteConfiguration\"\n+          class=\"org.sakaiproject.ignite.IgniteConfigurationAdapter\">\n+        <property name=\"cacheConfiguration\">\n+            <list>\n+                <bean parent=\"org.sakaiproject.ignite.cache.atomic\">\n+                    <property name=\"name\" value=\"org.hibernate.cache.spi.UpdateTimestampsCache\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.atomic\">\n+                    <property name=\"name\" value=\"org.hibernate.cache.internal.StandardQueryCache\"/>\n+                </bean>\n+                <!-- Entity Caches -->\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.AcademicSessionCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.CrossListingCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.EnrollmentCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.EnrollmentSetCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.MeetingCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.MembershipCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.AbstractMembershipContainerCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.coursemanagement.impl.SectionCategoryCmImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.ChecklistItemStatusImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimplePageImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimplePageCommentImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimplePageGroupImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimplePageItemImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimplePagePropertyImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.lessonbuildertool.SimpleStudentPageImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.component.common.edu.person.PersonImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.api.common.type.Type\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.component.common.type.TypeImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.taggable.impl.LinkImpl\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.messagebundle.api.MessageBundleProperty\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.Assignment\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.Assignment.attachments\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.Assignment.properties\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.Assignment.groups\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.AssignmentSubmission\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.AssignmentSubmission.submitters\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.AssignmentSubmission.attachments\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.AssignmentSubmission.feedbackAttachments\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.assignment.api.model.AssignmentSubmission.properties\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.chat2.model.ChatChannel\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.chat2.model.ChatMessage\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.content.hbm.Lock\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.tool.assessment.data.dao.assessment.PublishedAnswer.answerFeedbackSet\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.tool.assessment.data.dao.grading.ItemGradingData.itemGradingAttachmentSet\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.tool.assessment.data.dao.grading.AssessmentGradingData.itemGradingSet\"/>\n+                </bean>\n+                <bean parent=\"org.sakaiproject.ignite.cache.transactional\">\n+                    <property name=\"name\" value=\"org.sakaiproject.tool.assessment.data.dao.grading.AssessmentGradingData.assessmentGradingAttachmentSet\"/>\n+                </bean>\n+            </list>\n+        </property>\n+        <property name=\"serverConfigurationService\" ref=\"org.sakaiproject.component.api.ServerConfigurationService\"/>\n+    </bean>\n+\n+    <bean id=\"org.sakaiproject.ignite.cache.atomic\" class=\"org.apache.ignite.configuration.CacheConfiguration\" abstract=\"true\">\n+        <property name=\"cacheMode\" value=\"PARTITIONED\"/>\n+        <property name=\"atomicityMode\" value=\"ATOMIC\"/>\n+        <property name=\"writeSynchronizationMode\" value=\"FULL_SYNC\"/>\n+    </bean>\n+\n+    <bean id=\"org.sakaiproject.ignite.cache.transactional\" class=\"org.apache.ignite.configuration.CacheConfiguration\" abstract=\"true\">\n+        <property name=\"cacheMode\" value=\"PARTITIONED\"/>\n+        <property name=\"atomicityMode\" value=\"TRANSACTIONAL\"/>\n+        <property name=\"writeSynchronizationMode\" value=\"FULL_SYNC\"/>\n+    </bean>\n+\n+</beans>", "originalCommit": "2082c90f02e9540a544f2717368c3635e69f450e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTEyMDI0MA==", "url": "https://github.com/sakaiproject/sakai/pull/7813#discussion_r371120240", "bodyText": "Should we use 2.7.6 which is the latest?", "author": "mpellicer", "createdAt": "2020-01-27T08:57:59Z", "path": "master/pom.xml", "diffHunk": "@@ -41,6 +41,7 @@\n     <sakai.httpclient.version>4.5.11</sakai.httpclient.version>\n     <sakai.httpcore.version>4.4.13</sakai.httpcore.version>\n     <sakai.httpmime.version>4.5.11</sakai.httpmime.version>\n+    <sakai.ignite.version>2.7.2</sakai.ignite.version>", "originalCommit": "2082c90f02e9540a544f2717368c3635e69f450e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "63e20110a728a7cc23614bcad2e00474685626ea", "url": "https://github.com/sakaiproject/sakai/commit/63e20110a728a7cc23614bcad2e00474685626ea", "message": "SAK-41390 Add Ignite Spring jCache", "committedDate": "2020-01-27T15:30:26Z", "type": "forcePushed"}, {"oid": "8192ce3b78deeff24c04b980ba4e9df0178bd47c", "url": "https://github.com/sakaiproject/sakai/commit/8192ce3b78deeff24c04b980ba4e9df0178bd47c", "message": "SAK-41390 Add Ignite Spring jCache", "committedDate": "2020-01-27T15:33:56Z", "type": "forcePushed"}, {"oid": "5c575b461fe26699cc3e97262df833e30c9bed67", "url": "https://github.com/sakaiproject/sakai/commit/5c575b461fe26699cc3e97262df833e30c9bed67", "message": "WIP Add Spring jCache", "committedDate": "2020-05-27T21:24:58Z", "type": "forcePushed"}, {"oid": "edbee77e2c376e19ea20909dd47fd466694ab3bd", "url": "https://github.com/sakaiproject/sakai/commit/edbee77e2c376e19ea20909dd47fd466694ab3bd", "message": "SAK-41390 Apache Ignite cache provider", "committedDate": "2020-05-27T21:29:47Z", "type": "commit"}, {"oid": "d455911c75f43712d4dd9f68be3ca9802a42180a", "url": "https://github.com/sakaiproject/sakai/commit/d455911c75f43712d4dd9f68be3ca9802a42180a", "message": "SAK-41390 Remove hibernate ehcache and update tests", "committedDate": "2020-05-27T21:30:04Z", "type": "commit"}, {"oid": "d070e4b347c01d79e74328c9cae51cad1a2ab82b", "url": "https://github.com/sakaiproject/sakai/commit/d070e4b347c01d79e74328c9cae51cad1a2ab82b", "message": "SAK-41390 Add Spring jCache", "committedDate": "2020-05-27T21:30:04Z", "type": "commit"}, {"oid": "d070e4b347c01d79e74328c9cae51cad1a2ab82b", "url": "https://github.com/sakaiproject/sakai/commit/d070e4b347c01d79e74328c9cae51cad1a2ab82b", "message": "SAK-41390 Add Spring jCache", "committedDate": "2020-05-27T21:30:04Z", "type": "forcePushed"}]}