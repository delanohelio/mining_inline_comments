{"pr_number": 8068, "pr_title": "SAK-43470 TurnitinOC: Pass TCA user roles when submitting and viewing\u2026", "pr_createdAt": "2020-03-24T13:56:54Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8068", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE3MzM3Mw==", "url": "https://github.com/sakaiproject/sakai/pull/8068#discussion_r397173373", "bodyText": "I just looked through the existing default templates... are there any default Sakai roles that I may have missed? Custom roles can be mapped in the sakai.properties?", "author": "baholladay", "createdAt": "2020-03-24T13:59:33Z", "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "diffHunk": "@@ -159,8 +166,26 @@\n \tprivate static final String VIEWER_PERMISSION_MAY_VIEW_SUBMISSIONS_FULL_SOURCE = \"may_view_submission_full_source\";\n \tprivate static final String VIEWER_PERMISSION_MAY_VIEW_MATCH_SUBMISSION_INFO = \"may_view_match_submission_info\";\n \tprivate static final String VIEWER_DEFAULT_PERMISSIONS = \"viewer_default_permission_set\";\n-\tprivate static final String INSTRUCTOR = \"INSTRUCTOR\";\n-\tprivate static final String LEARNER = \"LEARNER\";\n+\tprivate enum ROLES{\n+\t\tINSTRUCTOR(Arrays.asList(\"Faculty\", \"Instructor\", \"Mentor\", \"Staff\", \"maintain\", \"Teaching Assistant\")),", "originalCommit": "8b64d039a31ebd926c020ef91787ebe4f80f1b1d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE5NTE5NQ==", "url": "https://github.com/sakaiproject/sakai/pull/8068#discussion_r397195195", "bodyText": "Can this be put into the above if(site != null) block? Conditional seems duplicated.\nEdit: disregard, I didn't notice the check on submitterID", "author": "bjones86", "createdAt": "2020-03-24T14:28:26Z", "path": "content-review/impl/turnitin-oc/src/main/java/org/sakaiproject/contentreview/turnitin/oc/ContentReviewServiceTurnitinOC.java", "diffHunk": "@@ -883,8 +911,14 @@ private String getSubmissionId(ContentReviewItem item, String fileName, Site sit\n \t\t\t// Build header maps\n \t\t\tMap<String, Object> data = new HashMap<String, Object>();\n \t\t\tdata.put(\"owner\", userID);\n+\t\t\tif(site != null) {\n+\t\t\t\tdata.put(\"owner_default_permission_set\", mapUserRole(userID, site.getId(), false));\n+\t\t\t}\n \t\t\tif (StringUtils.isNotBlank(submitterID)) {\n-\t\t\t\tdata.put(\"submitter\", submitterID);\t\n+\t\t\t\tdata.put(\"submitter\", submitterID);\n+\t\t\t\tif(site != null) {\n+\t\t\t\t\tdata.put(\"submitter_default_permission_set\", mapUserRole(submitterID, site.getId(), false));", "originalCommit": "8b64d039a31ebd926c020ef91787ebe4f80f1b1d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c959bc07d55c0c0eea47a2d57ab69c8c91734d8b", "url": "https://github.com/sakaiproject/sakai/commit/c959bc07d55c0c0eea47a2d57ab69c8c91734d8b", "message": "SAK-43470 TurnitinOC: Pass TCA user roles when submitting and viewing reports", "committedDate": "2020-03-24T20:42:17Z", "type": "commit"}, {"oid": "c959bc07d55c0c0eea47a2d57ab69c8c91734d8b", "url": "https://github.com/sakaiproject/sakai/commit/c959bc07d55c0c0eea47a2d57ab69c8c91734d8b", "message": "SAK-43470 TurnitinOC: Pass TCA user roles when submitting and viewing reports", "committedDate": "2020-03-24T20:42:17Z", "type": "forcePushed"}]}