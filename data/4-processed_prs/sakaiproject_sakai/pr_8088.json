{"pr_number": 8088, "pr_title": "SAK-41905 - site info: Import from Site always shows complete list of\u2026", "pr_createdAt": "2020-03-26T16:10:21Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8088", "timeline": [{"oid": "c8e79623f16971b881154e0a46f1c42e8bfca308", "url": "https://github.com/sakaiproject/sakai/commit/c8e79623f16971b881154e0a46f1c42e8bfca308", "message": "SAK-41905 - site info: Import from Site always shows complete list of sites, including hidden ones.", "committedDate": "2020-03-27T07:11:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTA3MjAwNA==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r399072004", "bodyText": "This input has more that one label.", "author": "accesslint", "createdAt": "2020-03-27T07:12:09Z", "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm", "diffHunk": "@@ -32,6 +29,26 @@\n \t\t\t\t\t</div>\t\n \t\t\t\t#end\n \t\t\t#end\n+\t\t\t#if ($!hiddenSites && $hiddenSites.size() > 1)\n+\t\t\t\t<p class=\"instruction\">\n+\t\t\t\t\t$tlang.getString(\"sitinfimp.hiddensites\")\n+\t\t\t\t</p>\n+\t\t\t\t#foreach($hiddenSite in $hiddenSites)\n+\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t#if ($!currentSite && ($hiddenSite.Id != $!currentSite.Id))\n+\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" value=\"$hiddenSite.getId()\" \n+\t\t\t\t\t\t\t\t\t#if ($!importSiteList.containsKey($!hiddenSite))\n+\t\t\t\t\t\t\t\t\t\tchecked=\"checked\"\n+\t\t\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t\t\t/>", "originalCommit": "c8e79623f16971b881154e0a46f1c42e8bfca308", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "07e8c6f0f095b70d28453df1e4da60ee66cc6272", "url": "https://github.com/sakaiproject/sakai/commit/07e8c6f0f095b70d28453df1e4da60ee66cc6272", "message": "SAK-41905 - site info: Import from Site always shows complete list of sites, including hidden ones.", "committedDate": "2020-03-27T17:54:17Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ0MzEwMQ==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r399443101", "bodyText": "This input has more that one label.", "author": "accesslint", "createdAt": "2020-03-27T17:54:44Z", "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm", "diffHunk": "@@ -10,28 +10,60 @@\n \t<form name=\"featuresForm\" action=\"#toolForm(\"$action\")\" method=\"post\">\n \t\t## import is possible when use has maintain rights on at least one site other than the current one\n \t\t#if ($!sites && $sites.size()>1)\n-\t\t\t<p class=\"step\">\n-\t\t\t\t$tlang.getString(\"sitinfimp.reuse\")\n-\t\t\t</p>\n \t\t\t<p class=\"instruction\">\n \t\t\t\t$tlang.getString(\"sitinfimp.replace\")\n \t\t\t</p>\n-\t\t\t#set ($siteIDCounter =0)\n-\t\t\t#foreach($site in $sites)\n-\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n-\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n-\t\t\t\t\t<div class=\"radio\">\t\n-\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n-\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" value=\"$site.getId()\" \n-\t\t\t\t\t\t\t\t#if ($!importSiteList.containsKey($!site))\n-\t\t\t\t\t\t\t\t\tchecked=\"checked\"\n+\t\t\t<div class=\"panel-group\" id=\"sitesAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#mysites\">$tlang.getString(\"sitinfimp.mysites\") ($sites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"mysites\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t#set ($siteIDCounter =0)\n+\t\t\t\t\t\t\t#foreach($site in $sites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!site)) checked=\"checked\"#end value=\"$site.getId()\"/>", "originalCommit": "07e8c6f0f095b70d28453df1e4da60ee66cc6272", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ0MzEwMw==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r399443103", "bodyText": "This input has more that one label.", "author": "accesslint", "createdAt": "2020-03-27T17:54:44Z", "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm", "diffHunk": "@@ -10,28 +10,60 @@\n \t<form name=\"featuresForm\" action=\"#toolForm(\"$action\")\" method=\"post\">\n \t\t## import is possible when use has maintain rights on at least one site other than the current one\n \t\t#if ($!sites && $sites.size()>1)\n-\t\t\t<p class=\"step\">\n-\t\t\t\t$tlang.getString(\"sitinfimp.reuse\")\n-\t\t\t</p>\n \t\t\t<p class=\"instruction\">\n \t\t\t\t$tlang.getString(\"sitinfimp.replace\")\n \t\t\t</p>\n-\t\t\t#set ($siteIDCounter =0)\n-\t\t\t#foreach($site in $sites)\n-\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n-\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n-\t\t\t\t\t<div class=\"radio\">\t\n-\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n-\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" value=\"$site.getId()\" \n-\t\t\t\t\t\t\t\t#if ($!importSiteList.containsKey($!site))\n-\t\t\t\t\t\t\t\t\tchecked=\"checked\"\n+\t\t\t<div class=\"panel-group\" id=\"sitesAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#mysites\">$tlang.getString(\"sitinfimp.mysites\") ($sites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"mysites\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t#set ($siteIDCounter =0)\n+\t\t\t\t\t\t\t#foreach($site in $sites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!site)) checked=\"checked\"#end value=\"$site.getId()\"/>\n+\t\t\t\t\t\t\t\t\t\t\t$formattedText.escapeHtml($site.getTitle())\n+\t\t\t\t\t\t\t\t\t\t</label>\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\n+\t\t\t#if ($!hiddenSites && $hiddenSites.size() > 0)\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#hiddenSites\">$tlang.getString(\"sitinfimp.hiddensites\") ($hiddenSites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"hiddenSites\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t#foreach($hiddenSite in $hiddenSites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($hiddenSite.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!hiddenSite)) checked=\"checked\" #end value=\"$hiddenSite.getId()\"/>", "originalCommit": "07e8c6f0f095b70d28453df1e4da60ee66cc6272", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "23705ed08c308332ebd8bbee3f046106c6877d1d", "url": "https://github.com/sakaiproject/sakai/commit/23705ed08c308332ebd8bbee3f046106c6877d1d", "message": "SAK-41905 - site info: Import from Site always shows complete list of sites, including hidden ones.", "committedDate": "2020-03-27T18:05:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ0OTYyNg==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r399449626", "bodyText": "This input has more that one label.", "author": "accesslint", "createdAt": "2020-03-27T18:06:01Z", "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm", "diffHunk": "@@ -10,28 +10,63 @@\n \t<form name=\"featuresForm\" action=\"#toolForm(\"$action\")\" method=\"post\">\n \t\t## import is possible when use has maintain rights on at least one site other than the current one\n \t\t#if ($!sites && $sites.size()>1)\n-\t\t\t<p class=\"step\">\n-\t\t\t\t$tlang.getString(\"sitinfimp.reuse\")\n-\t\t\t</p>\n \t\t\t<p class=\"instruction\">\n \t\t\t\t$tlang.getString(\"sitinfimp.replace\")\n \t\t\t</p>\n-\t\t\t#set ($siteIDCounter =0)\n-\t\t\t#foreach($site in $sites)\n-\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n-\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n-\t\t\t\t\t<div class=\"radio\">\t\n-\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n-\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" value=\"$site.getId()\" \n-\t\t\t\t\t\t\t\t#if ($!importSiteList.containsKey($!site))\n-\t\t\t\t\t\t\t\t\tchecked=\"checked\"\n+\t\t\t<div class=\"panel-group\" id=\"sitesAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#mysites\">$tlang.getString(\"sitinfimp.mysites\") ($sites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"mysites\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t#set ($siteIDCounter =0)\n+\t\t\t\t\t\t\t#foreach($site in $sites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!site)) checked=\"checked\"#end value=\"$site.getId()\"/>\n+\t\t\t\t\t\t\t\t\t\t\t$formattedText.escapeHtml($site.getTitle())\n+\t\t\t\t\t\t\t\t\t\t</label>\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\n+\t\t\t#if ($!hiddenSites && $hiddenSites.size() > 0)\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#hiddenSites\">$tlang.getString(\"sitinfimp.hiddensites\") ($hiddenSites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"hiddenSites\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t<p class=\"instruction\">\n+\t\t\t\t\t\t\t\ttlang.getString(\"sitinfimp.hiddensites.info\")\n+\t\t\t\t\t\t\t</p>\n+\t\t\t\t\t\t\t#foreach($hiddenSite in $hiddenSites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($hiddenSite.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!hiddenSite)) checked=\"checked\" #end value=\"$hiddenSite.getId()\"/>", "originalCommit": "23705ed08c308332ebd8bbee3f046106c6877d1d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk4MzI3Mg==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r400983272", "bodyText": "This is a autogenerated unique id", "author": "jonespm", "createdAt": "2020-03-31T14:59:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ0OTYyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDk4MjM1MA==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r400982350", "bodyText": "Could be reduced to a one line lambda ;)", "author": "ern", "createdAt": "2020-03-31T14:58:10Z", "path": "site-manage/site-manage-tool/tool/src/java/org/sakaiproject/site/tool/SiteAction.java", "diffHunk": "@@ -4205,11 +4206,31 @@ private void pageOrderToolTitleIntoContext(Context context, SessionState state,\n \t */\n \tprivate void putImportSitesInfoIntoContext(Context context, Site site, SessionState state, boolean ownTypeOnly) {\n \t\tcontext.put(\"currentSite\", site);\n-\t\tcontext.put(\"importSiteList\", state\n-\t\t\t\t.getAttribute(STATE_IMPORT_SITES));\n-\t\tcontext.put(\"sites\", SiteService.getSites(\n-\t\t\t\torg.sakaiproject.site.api.SiteService.SelectionType.UPDATE,\n-\t\t\t\townTypeOnly?site.getType():null, null, null, SortType.TITLE_ASC, null));\n+\t\tcontext.put(\"importSiteList\", state.getAttribute(STATE_IMPORT_SITES));\n+\t\tfinal List<Site> siteList = SiteService.getSites(org.sakaiproject.site.api.SiteService.SelectionType.UPDATE, ownTypeOnly?site.getType():null, null, null, SortType.TITLE_ASC, null);\n+\t\tList<String> hiddenSiteIdList = new ArrayList<>();\n+\t\tList<Site> hiddenSiteList = new ArrayList<>();\n+\t\tList<Site> visibleSiteList = new ArrayList<>();\n+\t\tPreferences preferences = preferencesService.getPreferences(userDirectoryService.getCurrentUser().getId());\n+\t\tif (preferences != null) {\n+\t\t\tResourceProperties properties = preferences.getProperties(PreferencesService.SITENAV_PREFS_KEY);\n+\t\t\thiddenSiteIdList = (List<String>) properties.getPropertyList(PreferencesService.SITENAV_PREFS_EXCLUDE_KEY);\n+\t\t}\n+\n+\t\tif (hiddenSiteIdList != null && !hiddenSiteIdList.isEmpty()) {", "originalCommit": "23705ed08c308332ebd8bbee3f046106c6877d1d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1c4c6b0130c74b025b2b37be4527dcdf36a72b0d", "url": "https://github.com/sakaiproject/sakai/commit/1c4c6b0130c74b025b2b37be4527dcdf36a72b0d", "message": "SAK-41905 - site info: Import from Site always shows complete list of sites, including hidden ones.", "committedDate": "2020-04-01T13:18:46Z", "type": "commit"}, {"oid": "1c4c6b0130c74b025b2b37be4527dcdf36a72b0d", "url": "https://github.com/sakaiproject/sakai/commit/1c4c6b0130c74b025b2b37be4527dcdf36a72b0d", "message": "SAK-41905 - site info: Import from Site always shows complete list of sites, including hidden ones.", "committedDate": "2020-04-01T13:18:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTYwNzg4Mw==", "url": "https://github.com/sakaiproject/sakai/pull/8088#discussion_r401607883", "bodyText": "This input has more that one label.", "author": "accesslint", "createdAt": "2020-04-01T13:19:08Z", "path": "site-manage/site-manage-tool/tool/src/webapp/vm/sitesetup/chef_site-siteInfo-importMigrate.vm", "diffHunk": "@@ -10,28 +10,63 @@\n \t<form name=\"featuresForm\" action=\"#toolForm(\"$action\")\" method=\"post\">\n \t\t## import is possible when use has maintain rights on at least one site other than the current one\n \t\t#if ($!sites && $sites.size()>1)\n-\t\t\t<p class=\"step\">\n-\t\t\t\t$tlang.getString(\"sitinfimp.reuse\")\n-\t\t\t</p>\n \t\t\t<p class=\"instruction\">\n \t\t\t\t$tlang.getString(\"sitinfimp.replace\")\n \t\t\t</p>\n-\t\t\t#set ($siteIDCounter =0)\n-\t\t\t#foreach($site in $sites)\n-\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n-\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n-\t\t\t\t\t<div class=\"radio\">\t\n-\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n-\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" value=\"$site.getId()\" \n-\t\t\t\t\t\t\t\t#if ($!importSiteList.containsKey($!site))\n-\t\t\t\t\t\t\t\t\tchecked=\"checked\"\n+\t\t\t<div class=\"panel-group\" id=\"sitesAccordion\">\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#mysites\">$tlang.getString(\"sitinfimp.mysites\") ($sites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"mysites\" class=\"panel-collapse collapse in\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t#set ($siteIDCounter =0)\n+\t\t\t\t\t\t\t#foreach($site in $sites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($site.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!site)) checked=\"checked\"#end value=\"$site.getId()\"/>\n+\t\t\t\t\t\t\t\t\t\t\t$formattedText.escapeHtml($site.getTitle())\n+\t\t\t\t\t\t\t\t\t\t</label>\n+\t\t\t\t\t\t\t\t\t</div>\n+\t\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t\t#end\n+\t\t\t\t\t\t</div>\n+\t\t\t\t\t</div>\n+\t\t\t\t</div>\n+\n+\t\t\t#if ($!hiddenSites && $hiddenSites.size() > 0)\n+\t\t\t\t<div class=\"panel panel-default\">\n+\t\t\t\t\t<div class=\"panel-heading\">\n+\t\t\t\t\t\t<h4 class=\"panel-title\">\n+\t\t\t\t\t\t\t<a data-toggle=\"collapse\" data-parent=\"#sitesAccordion\" href=\"#hiddenSites\">$tlang.getString(\"sitinfimp.hiddensites\") ($hiddenSites.size())</a>\n+\t\t\t\t\t\t</h4>\n+\t\t\t\t\t</div>\n+\t\t\t\t\t<div id=\"hiddenSites\" class=\"panel-collapse collapse\">\n+\t\t\t\t\t\t<div class=\"panel-body\">\n+\t\t\t\t\t\t\t<p class=\"instruction\">\n+\t\t\t\t\t\t\t\ttlang.getString(\"sitinfimp.hiddensites.info\")\n+\t\t\t\t\t\t\t</p>\n+\t\t\t\t\t\t\t#foreach($hiddenSite in $hiddenSites)\n+\t\t\t\t\t\t\t\t#set ($siteIDCounter = $siteIDCounter + 1)\n+\t\t\t\t\t\t\t\t#if ($!currentSite && ($hiddenSite.Id != $!currentSite.Id))\n+\t\t\t\t\t\t\t\t\t<div class=\"radio\">\t\n+\t\t\t\t\t\t\t\t\t\t<label for=\"site_$siteIDCounter\">\n+\t\t\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"importSites\" id=\"site_$siteIDCounter\" #if ($!importSiteList.containsKey($!hiddenSite)) checked=\"checked\" #end value=\"$hiddenSite.getId()\"/>", "originalCommit": "1c4c6b0130c74b025b2b37be4527dcdf36a72b0d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}