{"pr_number": 8747, "pr_title": "SAK-44553 handle scenario where tab is backgrounded and XHR syncing submission status is missing", "pr_createdAt": "2020-10-27T00:50:42Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8747", "timeline": [{"oid": "3599d9a995246e58b84bc43395c5d85071563bc3", "url": "https://github.com/sakaiproject/sakai/commit/3599d9a995246e58b84bc43395c5d85071563bc3", "message": "SAK-44553 handle scenario where tab is backgrounded and XHR syncing submission status is missing", "committedDate": "2020-10-27T00:48:28Z", "type": "commit"}, {"oid": "d267b7c20ab4694a8ea10b24ff8a4d100a77570e", "url": "https://github.com/sakaiproject/sakai/commit/d267b7c20ab4694a8ea10b24ff8a4d100a77570e", "message": "not typed", "committedDate": "2020-10-27T00:51:01Z", "type": "commit"}, {"oid": "ed8e114d700c131af16d627949c985e65e1699a8", "url": "https://github.com/sakaiproject/sakai/commit/ed8e114d700c131af16d627949c985e65e1699a8", "message": "tabs", "committedDate": "2020-10-27T00:52:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjM1MzI4Ng==", "url": "https://github.com/sakaiproject/sakai/pull/8747#discussion_r512353286", "bodyText": "Main mod is here is adding submissionStatus to the getTimerProgress XHR call so that there is no chance a user can background a tab and then come back to an already-submitted/already-expired exam and continue working on it", "author": "ottenhoff", "createdAt": "2020-10-27T00:53:54Z", "path": "samigo/samigo-app/src/webapp/jsf/widget/timerBar/timerbar.js", "diffHunk": "@@ -282,7 +282,9 @@\n       $.getJSON(routePrefix + \"getTimerProgress\" + routeSuffix, ajaxQuery, function(data) {\n           totalTime = data[0];\n           elapsedTime = data[1];\n-          if (totalTime === elapsedTime) {\n+          submissionStatus = data[2];\n+\n+          if (submissionStatus == 0 || totalTime === elapsedTime) {", "originalCommit": "ed8e114d700c131af16d627949c985e65e1699a8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}