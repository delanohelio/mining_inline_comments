{"pr_number": 8145, "pr_title": "SAK-43535 - Site Info > Manage Groups: Auto-Groups Creation Wizard - \u2026", "pr_createdAt": "2020-04-14T13:14:35Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8145", "timeline": [{"oid": "351a0e4e4e2e2c66a6a25d2b954ab85bacd649bf", "url": "https://github.com/sakaiproject/sakai/commit/351a0e4e4e2e2c66a6a25d2b954ab85bacd649bf", "message": "SAK-43535 - Site Info > Manage Groups: Auto-Groups Creation Wizard - Step 4 Improvements", "committedDate": "2020-04-14T13:12:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEyNTk5OA==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r408125998", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-04-14T13:14:43Z", "path": "site-manage/site-group-manager/src/main/webapp/WEB-INF/templates/auto_groups_step4.html", "diffHunk": "@@ -27,11 +28,13 @@\n           <input type=\"hidden\" th:field=\"*{groupNumberByUser}\" name=\"groupNumberByUser\">\n           <input type=\"hidden\" th:field=\"*{useManuallyAddedUsers}\" name=\"useManuallyAddedUsers\">\n           <input type=\"hidden\" th:value=\"${serializedAutoGroupsMap}\" name=\"serializedAutoGroupsMap\">\n+          <div class=\"form-row\">\n+            <label for=\"allowViewMembership\"><input id=\"allowViewMembership\" type=\"checkbox\" name=\"allowViewMembership\" th:field=\"*{allowViewMembership}\"><span th:text=\"#{autogroups.step4.allow.membership}\">Allow members to see who else is in their Group.</span></label>\n+          </div>\n           <div class=\"act\">\n-            <input accesskey=\"c\" type=\"submit\" class=\"active\" id=\"autogroups-creategroups-button-top\" th:value=\"#{autogroups.button.save}\" onclick=\"SPNR.disableControlsAndSpin( this, null );\">\n+            <input accesskey=\"c\" type=\"submit\" class=\"active\" id=\"autogroups-creategroups-button-top\" th:value=\"#{autogroups.button.create}\" onclick=\"SPNR.disableControlsAndSpin( this, null );\">", "originalCommit": "351a0e4e4e2e2c66a6a25d2b954ab85bacd649bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEyNjAwMw==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r408126003", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-04-14T13:14:43Z", "path": "site-manage/site-group-manager/src/main/webapp/WEB-INF/templates/auto_groups_step4.html", "diffHunk": "@@ -56,7 +59,7 @@ <h3 th:text=\"#{autogroups.step4.group.label(${autoGroup.key}, ${autoGroup.value.\n               </table>\n           </div>\n           <div class=\"act\">\n-            <input accesskey=\"c\" type=\"submit\" class=\"active\" id=\"autogroups-creategroups-button\" th:value=\"#{autogroups.button.save}\" onclick=\"SPNR.disableControlsAndSpin( this, null );\">\n+            <input accesskey=\"c\" type=\"submit\" class=\"active\" id=\"autogroups-creategroups-button\" th:value=\"#{autogroups.button.create}\" onclick=\"SPNR.disableControlsAndSpin( this, null );\">", "originalCommit": "351a0e4e4e2e2c66a6a25d2b954ab85bacd649bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1Njg2OQ==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r410256869", "bodyText": "Can you explain how this works?", "author": "fostersdesign", "createdAt": "2020-04-17T14:22:59Z", "path": "site-manage/site-group-manager/src/main/java/org/sakaiproject/groupmanager/controller/AutoGroupsController.java", "diffHunk": "@@ -337,9 +337,9 @@ public String showStep4(Model model, @ModelAttribute AutoGroupsForm autoGroupsFo\n                 String groupPrefix = autoGroupsForm.getGroupTitleByGroup();\n                 int groupNumber = autoGroupsForm.getGroupNumberByGroup();\n                 int groupSize = filteredMembers.size() / groupNumber;\n-\n+                String indexFormat = String.format(\"%%0%dd\", String.valueOf(groupNumber).length());", "originalCommit": "351a0e4e4e2e2c66a6a25d2b954ab85bacd649bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI2Mzg4Ng==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r410263886", "bodyText": "Oh, I see: it will result in \"%0xd\" where x is the number of digits of the number of groups being created. And then you pass this into the formatter below to pad the group titles with the appropriate number of zeroes. Nice!\nMaybe we need a comment to explain what we are trying to achieve here?", "author": "fostersdesign", "createdAt": "2020-04-17T14:33:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1Njg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI2ODU1Ng==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r410268556", "bodyText": "Makes sense, added a comment.", "author": "mpellicer", "createdAt": "2020-04-17T14:40:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1Njg2OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI3MzExOQ==", "url": "https://github.com/sakaiproject/sakai/pull/8145#discussion_r410273119", "bodyText": "Thanks! Looks good.", "author": "fostersdesign", "createdAt": "2020-04-17T14:47:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI1Njg2OQ=="}], "type": "inlineReview"}, {"oid": "60323cf3491d6f2010705af3af16b6e44d9e7d10", "url": "https://github.com/sakaiproject/sakai/commit/60323cf3491d6f2010705af3af16b6e44d9e7d10", "message": "Comment", "committedDate": "2020-04-17T14:40:18Z", "type": "commit"}]}