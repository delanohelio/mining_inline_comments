{"pr_number": 8020, "pr_title": "SAK-43414 - SWITCH: Syllabus: Fix bad pattern in the first selected tab", "pr_createdAt": "2020-03-12T16:33:12Z", "pr_url": "https://github.com/sakaiproject/sakai/pull/8020", "timeline": [{"oid": "2a75d72015e90e8d5dfe47035dc7d893c7ecbde1", "url": "https://github.com/sakaiproject/sakai/commit/2a75d72015e90e8d5dfe47035dc7d893c7ecbde1", "message": "SAK-43414 - SWITCH: Syllabus: Fix bad pattern in the first selected tab", "committedDate": "2020-03-12T16:32:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTc0NDI5Mg==", "url": "https://github.com/sakaiproject/sakai/pull/8020#discussion_r391744292", "bodyText": "Looks like there's a label missing for this input. That makes it hard for people using screen readers or voice control to use the input.", "author": "accesslint", "createdAt": "2020-03-12T16:33:19Z", "path": "syllabus/syllabus-app/src/webapp/syllabus/main.jsp", "diffHunk": "@@ -108,94 +108,30 @@\n \t// after all content has loaded.\n \twindow.onbeforeunload = function()\n \t{ return \"\"; };// default message is OK\n-\t\n+\n+  $(document).ready(function() {\n+    var menuLink = $('#syllabusMenuMainLink');\n+    menuLink.addClass('current');\n+    menuLink.find('a').removeAttr('href');\n+    $('#expandLink').on('click', function () {\n+      expandAccordion(mainframeId);\n+    });\n+    $('#collapseLink').on('click', function () {\n+      collapseAccordion(mainframeId);\n+    });\n+  });\n+\n </script>\n \n <%-- gsilver: global things about syllabus tool:\n 1 ) what happens to empty lists - still generate a table?\n 2 ) Ids generated by jsf start with _  not optimal keeps us from validating fully.\n  --%>\n \t<h:form id=\"syllabus\">\n-\t\t<%--gsilver: would be best if used all sakai tags, or none, 2 blocks\n-\t\tfollowing just gets tries to get around the mix --%>\t\t\n-\t\t<f:verbatim><ul class=\"navIntraTool actionToolbar\"></f:verbatim>\n-\t\t\t\t<c:if test=\"${SyllabusTool.addItem}\">\n-\t\t\t\t<f:verbatim>\n-\t\t\t\t<li class=\"firstToolBarItem\">\n-\t\t\t\t\t<span>\n-\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" onclick=\"showConfirmAddHelper();\">\n-\t\t\t\t\t\t\t\t</f:verbatim><h:outputText value=\"#{msgs.addItemTitle}\"/><f:verbatim>\n-\t\t\t\t\t\t\t</a>\n-\t\t\t\t\t\t\t<input type=\"hidden\" id=\"siteId\" value=\"</f:verbatim><h:outputText value=\"#{SyllabusTool.siteId}\"/><f:verbatim>\">\n-\t\t\t\t\t</span>\n-\t\t\t\t</li></f:verbatim>\n-\t\t\t\t</c:if>\n-\t\t\t\t<c:if test=\"${SyllabusTool.bulkAddItem}\">\n-\t\t\t\t<f:verbatim>\n-\t\t\t\t<li>\n-\t\t\t\t\t<span>\n-\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t<h:commandLink action=\"#{SyllabusTool.processListNewBulkMain}\">\n-\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.bar_new_bulk}\"/>\n-\t\t\t\t\t\t</h:commandLink>\n-\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t</span>\n-\t\t\t\t</li>\n-\t\t\t\t</f:verbatim>\n-\t\t\t\t</c:if>\n-\t\t\t\t<c:if test=\"${SyllabusTool.bulkEdit}\">\n-\t\t\t\t<f:verbatim>\n-\t\t\t\t<li>\n-\t\t\t\t\t<span>\n-\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t<h:commandLink action=\"#{SyllabusTool.processCreateAndEdit}\">\n-\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.bar_create_edit}\"/>\n-\t\t\t\t\t\t</h:commandLink>\n-\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t</span>\n-\t\t\t\t</li>\n-\t\t\t\t</f:verbatim>\n-\t\t\t\t</c:if>\n-\t\t\t\t<c:if test=\"${SyllabusTool.redirect}\">\n-\t\t\t\t<f:verbatim>\n-\t\t\t\t<li>\n-\t\t\t\t\t<span>\n-\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t<h:commandLink action=\"#{SyllabusTool.processRedirect}\">\n-\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.bar_redirect}\"/>\n-\t\t\t\t\t\t</h:commandLink>\n-\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t</span>\n-\t\t\t\t</li>\n-\t\t\t\t</f:verbatim>\n-\t\t\t\t</c:if>\n-\t\t\t\t<f:verbatim>\n-\t\t\t\t<li>\n-\t\t\t\t\t<span>\n-\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" id=\"expandLink\" onclick=\"expandAccordion('<%= org.sakaiproject.util.Web.escapeJavascript(thisId)%>')\">\n-\t\t\t\t\t   <span class=\"fa fa-expand\" aria-hidden=\"true\"></span>&nbsp;&nbsp;\n-\t\t\t\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.expandAll}\"/>\n-\t\t\t\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t\t\t</a>\n-\t\t\t\t\t\t\t<a href=\"javascript:void(0)\" id=\"collapseLink\" style=\"display:none\" onclick=\"collapseAccordion('<%= org.sakaiproject.util.Web.escapeJavascript(thisId)%>')\">\n-\t\t\t\t\t      <span class=\"fa fa-compress\" aria-hidden=\"true\"></span>&nbsp;&nbsp;\n-\t\t\t\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.collapseAll}\"/>\n-\t\t\t\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t\t\t</a>\n-\t\t\t\t\t</span>\n-\t\t\t\t</li>\n-\t\t\t\t<li>\n-\t\t\t\t\t<span>\n-\t\t\t\t\t</f:verbatim>\n-\t\t\t\t\t\t<h:outputLink id=\"print\" value=\"javascript:printFriendly('#{SyllabusTool.printFriendlyUrl}');\">\n-\t\t\t\t\t\t\t<h:outputText value=\"#{msgs.printView}\"/>\n-\t\t\t\t\t\t</h:outputLink>\n-\t\t\t\t\t<f:verbatim>\n-\t\t\t\t\t</span>\n-\t\t\t\t</li>\n-\t\t\t\t</ul></f:verbatim>\n+\t\t<input type=\"hidden\" id=\"siteId\" value=\"<h:outputText value=\"#{SyllabusTool.siteId}\"/>\">", "originalCommit": "2a75d72015e90e8d5dfe47035dc7d893c7ecbde1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}