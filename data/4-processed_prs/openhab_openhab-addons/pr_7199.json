{"pr_number": 7199, "pr_title": "[bluetooth] Add support for devices jumping between adapters.", "pr_createdAt": "2020-03-21T05:11:32Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/7199", "timeline": [{"oid": "b98cd59ad8fff641a0dc52351440d875d38d41de", "url": "https://github.com/openhab/openhab-addons/commit/b98cd59ad8fff641a0dc52351440d875d38d41de", "message": "Added support for roaming bluetooth devices\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-13T23:58:53Z", "type": "commit"}, {"oid": "a9a97b057419f7fc8254f9b2d9d10d6d046f7f7a", "url": "https://github.com/openhab/openhab-addons/commit/a9a97b057419f7fc8254f9b2d9d10d6d046f7f7a", "message": "Initial commit of roaming bluetooth support\n\nSigned-off-by: Connor Petty <cpmeister@users.noreply.github.com>", "committedDate": "2020-02-18T00:43:53Z", "type": "commit"}, {"oid": "609b8c828214614a05e6fb1a8bb94d9f870095ec", "url": "https://github.com/openhab/openhab-addons/commit/609b8c828214614a05e6fb1a8bb94d9f870095ec", "message": "Fix OSGI integration for RoamingBluetoothBridgeHandler\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-21T05:00:25Z", "type": "commit"}, {"oid": "e94d5866aa15e42f600edf65bcc295ab402327a0", "url": "https://github.com/openhab/openhab-addons/commit/e94d5866aa15e42f600edf65bcc295ab402327a0", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\n# Conflicts:\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BeaconBluetoothHandler.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BluetoothAdapter.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/discovery/internal/BluetoothDiscoveryService.java\n\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-21T05:20:25Z", "type": "commit"}, {"oid": "c5cc37eb3e9af5cec12aeb9e2608764dcbc92f84", "url": "https://github.com/openhab/openhab-addons/commit/c5cc37eb3e9af5cec12aeb9e2608764dcbc92f84", "message": "Fix build errors\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-25T05:46:46Z", "type": "commit"}, {"oid": "0095e2e7a3487f88616ed5f0c53462aa18a6959b", "url": "https://github.com/openhab/openhab-addons/commit/0095e2e7a3487f88616ed5f0c53462aa18a6959b", "message": "Fix osgi resolve behavior\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-26T01:57:50Z", "type": "commit"}, {"oid": "e1b82780518f0d4982bfcc9b2d33ff707a6939e1", "url": "https://github.com/openhab/openhab-addons/commit/e1b82780518f0d4982bfcc9b2d33ff707a6939e1", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-26T03:21:28Z", "type": "commit"}, {"oid": "b8e199d834823de534f6d7bcb478a17729a1762e", "url": "https://github.com/openhab/openhab-addons/commit/b8e199d834823de534f6d7bcb478a17729a1762e", "message": "Add NonNullByDefault annotations\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-26T03:33:59Z", "type": "commit"}, {"oid": "98859dc2744fb2e2647c946504f54718f0d7369e", "url": "https://github.com/openhab/openhab-addons/commit/98859dc2744fb2e2647c946504f54718f0d7369e", "message": "Fixed unmerged code and added roaming bridgeid to extensions\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-26T19:10:11Z", "type": "commit"}, {"oid": "d1d92988b51f59f02e95bec048430ff4100bd261", "url": "https://github.com/openhab/openhab-addons/commit/d1d92988b51f59f02e95bec048430ff4100bd261", "message": "Add comment to empty code block\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-03-26T19:21:05Z", "type": "commit"}, {"oid": "f95ef76c02b27a52dff2141c794709dbcb2ca639", "url": "https://github.com/openhab/openhab-addons/commit/f95ef76c02b27a52dff2141c794709dbcb2ca639", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\n# Conflicts:\n#\tbundles/org.openhab.binding.bluetooth.bluegiga/src/main/java/org/openhab/binding/bluetooth/bluegiga/handler/BlueGigaBridgeHandler.java\n#\tbundles/org.openhab.binding.bluetooth.bluez/src/main/java/org/openhab/binding/bluetooth/bluez/handler/BlueZBridgeHandler.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BeaconBluetoothHandler.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BluetoothDevice.java\n\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-04-05T02:23:42Z", "type": "commit"}, {"oid": "59e247a16abcb1c26a614142c2a0d20f6cbba6f0", "url": "https://github.com/openhab/openhab-addons/commit/59e247a16abcb1c26a614142c2a0d20f6cbba6f0", "message": "Various fixes\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-04-05T06:10:08Z", "type": "commit"}, {"oid": "d3c7334138ffe7aa96f402dfbb5c795426ab758d", "url": "https://github.com/openhab/openhab-addons/commit/d3c7334138ffe7aa96f402dfbb5c795426ab758d", "message": "Embed the bluetooth adapter identifier in discovery results.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-04-14T23:22:27Z", "type": "commit"}, {"oid": "a10fd7fc4f8ad39128d9ccf2fa6839db6a71cc7c", "url": "https://github.com/openhab/openhab-addons/commit/a10fd7fc4f8ad39128d9ccf2fa6839db6a71cc7c", "message": "Make sure to only notify adapter changes when adapter actually changes.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-04-15T01:03:29Z", "type": "commit"}, {"oid": "64da09e3f63ccba50755f7f213f7d64b2da48ac0", "url": "https://github.com/openhab/openhab-addons/commit/64da09e3f63ccba50755f7f213f7d64b2da48ac0", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\n# Conflicts:\n#\tbundles/org.openhab.binding.bluetooth.airthings/src/main/resources/ESH-INF/thing/airthings.xml\n#\tbundles/org.openhab.binding.bluetooth.blukii/src/main/resources/ESH-INF/thing/blukii.xml\n#\tbundles/org.openhab.binding.bluetooth.ruuvitag/src/main/resources/ESH-INF/thing/ruuvitag.xml\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BeaconBluetoothHandler.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BluetoothDevice.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/discovery/internal/BluetoothDeviceSnapshot.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/discovery/internal/BluetoothDiscoveryProcess.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/discovery/internal/BluetoothDiscoveryService.java\n#\tbundles/org.openhab.binding.bluetooth/src/main/resources/ESH-INF/thing/thing-types.xml\n#\tbundles/org.openhab.binding.bluetooth/src/test/java/org/openhab/binding/bluetooth/MockBluetoothAdapter.java\n#\tbundles/org.openhab.binding.bluetooth/src/test/java/org/openhab/binding/bluetooth/MockBluetoothDevice.java\n\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-02T21:30:48Z", "type": "commit"}, {"oid": "b24e418b72e1bd060b2a0721c07cd670a52375c2", "url": "https://github.com/openhab/openhab-addons/commit/b24e418b72e1bd060b2a0721c07cd670a52375c2", "message": "Resolve errors\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-06T05:15:50Z", "type": "commit"}, {"oid": "aae1d873e295d28c6361a1a874c35c183f13cc74", "url": "https://github.com/openhab/openhab-addons/commit/aae1d873e295d28c6361a1a874c35c183f13cc74", "message": "Minor optimization\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-06T21:09:31Z", "type": "commit"}, {"oid": "4c05493db6c69f852afd1c7550f549d36d129616", "url": "https://github.com/openhab/openhab-addons/commit/4c05493db6c69f852afd1c7550f549d36d129616", "message": "Minor refactoring and improvements\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-06T23:46:49Z", "type": "commit"}, {"oid": "2a74453b858d9d699eee1095dda5e1287d66e44e", "url": "https://github.com/openhab/openhab-addons/commit/2a74453b858d9d699eee1095dda5e1287d66e44e", "message": "Update lastSeenTime as part of BluetoothDevice event dispatching.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-14T22:56:22Z", "type": "commit"}, {"oid": "bce562dd87a426c32c7c90bb21fde120065ba4aa", "url": "https://github.com/openhab/openhab-addons/commit/bce562dd87a426c32c7c90bb21fde120065ba4aa", "message": "Removed `lastSeenTime` methods from the BluetoothDevice\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-14T23:23:39Z", "type": "commit"}, {"oid": "4e688f5c22a0de2a1b5252fcdd876632e11cbb58", "url": "https://github.com/openhab/openhab-addons/commit/4e688f5c22a0de2a1b5252fcdd876632e11cbb58", "message": "Move createTime field from BluetoothDevice to BaseBluetoothDevice\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-15T04:08:35Z", "type": "commit"}, {"oid": "f80862df177fd33c54b2c442dc44a69ffa882b69", "url": "https://github.com/openhab/openhab-addons/commit/f80862df177fd33c54b2c442dc44a69ffa882b69", "message": "Dynamically generate channels common to all bluetooth devices.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-15T06:45:53Z", "type": "commit"}, {"oid": "ed70db6e204c62600eca8269532ee485352f72cd", "url": "https://github.com/openhab/openhab-addons/commit/ed70db6e204c62600eca8269532ee485352f72cd", "message": "Code cleanup\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-05-16T01:53:16Z", "type": "commit"}, {"oid": "f759d7595d414bfb405f20de0a9aade05126ea36", "url": "https://github.com/openhab/openhab-addons/commit/f759d7595d414bfb405f20de0a9aade05126ea36", "message": "Add roaming adapter to README\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-01T23:41:06Z", "type": "commit"}, {"oid": "41a3991f0490a2b8b1a26b46ee5f40ddbce19d25", "url": "https://github.com/openhab/openhab-addons/commit/41a3991f0490a2b8b1a26b46ee5f40ddbce19d25", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\n# Conflicts:\n#\tbundles/org.openhab.binding.bluetooth/src/main/java/org/openhab/binding/bluetooth/BluetoothDevice.java\n\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-01T23:52:15Z", "type": "commit"}, {"oid": "e57f3166ba17c36125a706842a0749ed80f76711", "url": "https://github.com/openhab/openhab-addons/commit/e57f3166ba17c36125a706842a0749ed80f76711", "message": "fix readme\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-02T00:27:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MTM2NA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434181364", "bodyText": "Does it harm to have it listed here? If Things are created manually, this has the advantage that this channel is available without any handler required to be present.", "author": "kaikreuzer", "createdAt": "2020-06-02T21:18:43Z", "path": "bundles/org.openhab.binding.bluetooth.airthings/src/main/resources/ESH-INF/thing/airthings.xml", "diffHunk": "@@ -14,8 +15,6 @@\n \t\t<description>Indoor air quality monitor with radon detection</description>\n \n \t\t<channels>\n-\t\t\t<channel id=\"rssi\" typeId=\"rssi\"/>", "originalCommit": "e57f3166ba17c36125a706842a0749ed80f76711", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4ODkzNA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434188934", "bodyText": "I didn't realize they had that use case. I'll add them back in then.", "author": "cpmeister", "createdAt": "2020-06-02T21:35:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MTM2NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MTc5Mw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434181793", "bodyText": "This is not the right place to add it - if I get it right, \"roaming\" is a new adapter (next to BlueZ and BlueGiga) and not a BT device type (beacon or connected).", "author": "kaikreuzer", "createdAt": "2020-06-02T21:19:40Z", "path": "bundles/org.openhab.binding.bluetooth/README.md", "diffHunk": "@@ -19,10 +19,11 @@ This should be the best choice for any Linux-based single board computers like e\n \n Two thing types are supported by this binding:\n \n-| Thing Type ID | Description                                                                                             |\n-|---------------|---------------------------------------------------------------------------------------------------------|\n-| beacon        | A Bluetooth device that is not connected, but only broadcasts annoucements.                             |\n-| connected     | A Bluetooth device that allows a direct connection and which provides specific services when connected. |\n+| Thing Type ID | Description                                                                                                |\n+|---------------|------------------------------------------------------------------------------------------------------------|\n+| beacon        | A Bluetooth device that is not connected, but only broadcasts annoucements.                                |\n+| connected     | A Bluetooth device that allows a direct connection and which provides specific services when connected.    |\n+| roaming       | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |", "originalCommit": "e57f3166ba17c36125a706842a0749ed80f76711", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5MDc2OQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434190769", "bodyText": "You are correct, \"roaming\" is a type of adapter, not a regular bluetooth device. I just put it in this table since I thought all thing types should be listed there. Should I create a separate section/table for the roaming adapter?", "author": "cpmeister", "createdAt": "2020-06-02T21:39:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MTc5Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk1MDI0MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r436950241", "bodyText": "As mentioned further below, this should ideally be a separate bundle, just like the other adapters.", "author": "kaikreuzer", "createdAt": "2020-06-08T19:29:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MTc5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MjczNA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434182734", "bodyText": "How is that related to this PR?\nI am not too keen on such channels - if we feel such information is needed, we should rather solve it for ALL bindings at the same time.\nWhat I could live with here is to keep track of it as a Thing property instead.", "author": "kaikreuzer", "createdAt": "2020-06-02T21:21:39Z", "path": "bundles/org.openhab.binding.bluetooth/README.md", "diffHunk": "@@ -37,11 +38,12 @@ Both thing types only require a single configuration parameter `address`, which\n \n ## Channels\n \n-Every Bluetooth thing has the following channel:\n+Every Bluetooth thing has the following channels:\n \n-| Channel ID | Item Type | Description                                                                                         |\n-|------------|-----------|-----------------------------------------------------------------------------------------------------|\n-| rssi       | Number    | The \"Received Signal Strength Indicator\", the [RSSI](https://blog.bluetooth.com/proximity-and-rssi) |\n+| Channel ID    | Item Type | Description                                                                                         |\n+|---------------|-----------|-----------------------------------------------------------------------------------------------------|\n+| rssi          | Number    | The \"Received Signal Strength Indicator\", the [RSSI](https://blog.bluetooth.com/proximity-and-rssi) |\n+| last-activity | DateTime  | The last time that any radio activity was received from this device                                 |", "originalCommit": "e57f3166ba17c36125a706842a0749ed80f76711", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NDYwOA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434194608", "bodyText": "This PR is a general adaptation of the features available in the 3rd party bluetooth binding. One of the primary features of the binding was presence detection, which a last-activity channel would almost certainly be required for.\nWhile beacon bluetooth devices could be tracked by a change in their RSSI channel, such a method can't be used for connected devices which don't send out advertisement information that would trigger an RSSI channel update. (This is the case for devices tracked through Bluez adapters, but not for Bluegiga, because they are special I guess).\nThe \"last-activity\" channel would be updated on either rssi changes or on successful responses during connected communications.\nI can change this to a thing property if you wish, but I don't know if users will be able to make rules that would use it then. WDYT?", "author": "cpmeister", "createdAt": "2020-06-02T21:48:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MjczNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk1NDAzMw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r436954033", "bodyText": "Can you elaborate what kind of rules people write when having that channel available? Could the logic of such rules possibly be captured within the binding and be provided as a special channel?\nFor presence detection, I would possibly consider the Thing status to be the best instrument - if the Thing is OFFLINE, it means the device isn't in reach anymore. BT things could have a configuration parameter, which says after what period of inactivity the Thing should move to OFFLINE status. Would that address the requirement?", "author": "kaikreuzer", "createdAt": "2020-06-08T19:36:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MjczNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3Nzk2MA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r436977960", "bodyText": "For presence detection, I would possibly consider the Thing status to be the best instrument - if the Thing is OFFLINE, it means the device isn't in reach anymore. BT things could have a configuration parameter, which says after what period of inactivity the Thing should move to OFFLINE status. Would that address the requirement?\n\nYou have a point there. I'll adjust the feature to control thing status and get rid of the last-activity channel. Thank for pointing this out.", "author": "cpmeister", "createdAt": "2020-06-08T20:23:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MjczNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MzM2NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434183365", "bodyText": "Just like the other adapters, this one should go into its own bundle. Is there any strong reason against that?", "author": "kaikreuzer", "createdAt": "2020-06-02T21:23:03Z", "path": "bundles/org.openhab.binding.bluetooth/README.md", "diffHunk": "@@ -50,18 +52,31 @@ Every Bluetooth thing has the following channel:\n | battery_level | Number    | The device's battery level in percent                           |\n \n \n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |\n+\n+\n+## Roaming Adapter", "originalCommit": "e57f3166ba17c36125a706842a0749ed80f76711", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NzIyMg==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434197222", "bodyText": "I initially attempted something akin to that approach but I found that the BluetoothDiscoveryService would need to handle roaming bluetooth devices differently than other devices, and in order to do that they would need awareness of what a roaming device was. This awareness, as well as an overall increase in the complexity of the problems that would need to be resolved, made me decide to just embed the roaming adapter into the base bluetooth bundle itself.\nThis does make sense in a way, since the roaming adapter isn't any sort of concrete implementation of a Bluetooth adapter as it delegates all of its operations to a real adapter instead.", "author": "cpmeister", "createdAt": "2020-06-02T21:54:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MzM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk1NjEwNA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r436956104", "bodyText": "The roaming adapter is nonetheless just an optional feature, which could be left away easily and not a mandatory core part of the binding. I think wrt code cleanliness and structure, it would be nice to have it as a separate bundle.\nWrt the discovery service I'd suggest to think about a way to introduce an interface to the \"generic\" discovery service, which allows the customization of its logic by extensions. Similar to the \"UPnPDiscoveryParticipant\", which plugs into the \"UPnPDiscoveryService\".\nDo you think that would be feasible?", "author": "kaikreuzer", "createdAt": "2020-06-08T19:40:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MzM2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjk3ODg3Ng==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r436978876", "bodyText": "Wrt the discovery service I'd suggest to think about a way to introduce an interface to the \"generic\" discovery service, which allows the customization of its logic by extensions. Similar to the \"UPnPDiscoveryParticipant\", which plugs into the \"UPnPDiscoveryService\".\nDo you think that would be feasible?\n\nI think that should be feasible, I'll get to work on that. Thanks!", "author": "cpmeister", "createdAt": "2020-06-08T20:25:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4MzM2NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4NTYwMA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434185600", "bodyText": "Are you sure? According to https://en.wikipedia.org/wiki/DBm, \"dBm\" is dimensionless.", "author": "kaikreuzer", "createdAt": "2020-06-02T21:27:51Z", "path": "bundles/org.openhab.binding.bluetooth/src/main/resources/ESH-INF/thing/channels.xml", "diffHunk": "@@ -5,11 +5,32 @@\n \txsi:schemaLocation=\"https://openhab.org/schemas/thing-description/v1.0.0 https://openhab.org/schemas/thing-description-1.0.0.xsd\">\n \n \t<channel-type id=\"rssi\">\n-\t\t<item-type>Number</item-type>\n+\t\t<item-type>Number:Power</item-type>", "originalCommit": "e57f3166ba17c36125a706842a0749ed80f76711", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5OTExMA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r434199110", "bodyText": "I just looked up the smarthome unit that used \"dBm\" as its symbol. SmartHomeUnits.DECIBEL_MILLIWATTS uses \"Power\" as its quantity type.\nAlso I think that the wiki article states that \"dB\" is dimensionless, not \"dBm\".", "author": "cpmeister", "createdAt": "2020-06-02T21:59:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4NTYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjY2Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439766667", "bodyText": "We might have to fix SmartHomeUnits then...\n\nAlso I think that the wiki article states that \"dB\" is dimensionless, not \"dBm\".\n\nI guess you are just reading the wrong sentence in it. It states:\n\"The dBm is also dimensionless but since it compares to a fixed reference value the dBm rating is an absolute one.\"", "author": "kaikreuzer", "createdAt": "2020-06-13T20:22:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4NTYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3MDM5NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439770395", "bodyText": "\"The dBm is also dimensionless but since it compares to a fixed reference value the dBm rating is an absolute one.\"\n\nHuh, does this mean that I shouldn't be using SmartHomeUnits.DECIBEL_MILLIWATTS then since it is wrongly typed as a unit of Power? Should probably be fixed then.\nI'll leave rssi as a regular Number type for now then until the units get sorted out.\nSorry for the back and forth, I should have taken the time to read sentence following the one I posted.", "author": "cpmeister", "createdAt": "2020-06-13T21:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4NTYwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3MDY3OQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439770679", "bodyText": "Should probably be fixed then.\n\nWanna do a PR against openhab-core?\n\nI'll leave rssi as a regular Number type for now then until the units get sorted out.\n\nSounds like a reasonable solution for now.", "author": "kaikreuzer", "createdAt": "2020-06-13T21:26:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE4NTYwMA=="}], "type": "inlineReview"}, {"oid": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "url": "https://github.com/openhab/openhab-addons/commit/d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "message": "Refactored the roaming adapter into its own binding.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-09T23:16:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTY2MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439765661", "bodyText": "To me as a reader it is completely unclear what this \"Location\" string will contain. Would be nice to have some better explanation for it.", "author": "kaikreuzer", "createdAt": "2020-06-13T20:08:02Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -0,0 +1,41 @@\n+# Bluetooth Roaming Adapter\n+\n+This extension adds support for accessing Bluetooth devices from any other configured adapter via a virtual adapter.\n+\n+## Supported Things\n+\n+It defines the following bridge type:\n+\n+| Bridge Type ID | Description                                                                                                |\n+|----------------|------------------------------------------------------------------------------------------------------------|\n+| roaming        | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |\n+\n+## Channels\n+\n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2OTYzNg==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439769636", "bodyText": "Will do", "author": "cpmeister", "createdAt": "2020-06-13T21:15:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTY2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTgzMQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439765831", "bodyText": "Why? Discovery is meant for real stuff where it is clear that it exists. The roaming adapter is a feature that the user can decide by himself whether he wants to make use of it or not. If he does, he can simply add a roaming bridge very easily.", "author": "kaikreuzer", "createdAt": "2020-06-13T20:11:08Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -0,0 +1,41 @@\n+# Bluetooth Roaming Adapter\n+\n+This extension adds support for accessing Bluetooth devices from any other configured adapter via a virtual adapter.\n+\n+## Supported Things\n+\n+It defines the following bridge type:\n+\n+| Bridge Type ID | Description                                                                                                |\n+|----------------|------------------------------------------------------------------------------------------------------------|\n+| roaming        | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |\n+\n+## Channels\n+\n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |\n+\n+## Discovery\n+\n+A default roaming adapter is discovered automatically, although you can still configure it textually if you want.", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2OTA3Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439769077", "bodyText": "I'll remove it then since users could always create it manually if they wanted.", "author": "cpmeister", "createdAt": "2020-06-13T21:05:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTgzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTkzMg==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439765932", "bodyText": "If this is due to technical constraints, it smells like some unclean design. In general, it should be allowed to create any number of things/bridges of a given type.", "author": "kaikreuzer", "createdAt": "2020-06-13T20:12:43Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -0,0 +1,41 @@\n+# Bluetooth Roaming Adapter\n+\n+This extension adds support for accessing Bluetooth devices from any other configured adapter via a virtual adapter.\n+\n+## Supported Things\n+\n+It defines the following bridge type:\n+\n+| Bridge Type ID | Description                                                                                                |\n+|----------------|------------------------------------------------------------------------------------------------------------|\n+| roaming        | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |\n+\n+## Channels\n+\n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |\n+\n+## Discovery\n+\n+A default roaming adapter is discovered automatically, although you can still configure it textually if you want.\n+There can be only a single roaming adapter on a system.", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2OTA0Ng==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439769046", "bodyText": "Well I was worried a bit of how that particular aspect would blow over. Technically I could support more than one but since every roaming adapter monitors every other real adapter I didn't see a reason to allow supporting more than one since they would both report the same thing. So the roaming adapter limitation was more a design choice rather than a technical limitation. I can add support for it if you think that is what I should do.\nI suppose down the line multiple roaming adapters could come in handy if I added support for manually choosing which real adapters a roaming adapter would monitor. Then you could have multiple roaming adapters each responsible for a separate set of real adapters.\nBut I don't know if that is something worth pursuing at the moment since the number of bluetooth adapters available to openhab is limited to the number that can be directly connected to the device that openhab is running on (might not be the case for bluegiga adapters if you use serial->net software).\nBut once ble->mqtt support comes down the line then adding that feature would very likely need to be considered.\nWDYT?", "author": "cpmeister", "createdAt": "2020-06-13T21:04:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTkzMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2OTQzNQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439769435", "bodyText": "If it is not so much a technical constraint, but rather a functional/logical one, then this sounds good to me. I mainly wanted to make sure that such \"logic simplifications\" do not result in shortcuts in the code, which would go against the architectural guidelines (to have things independent from each other and individually referenceable).\nNo need to make any use of the fact that there might be more than one through features in the code right now.", "author": "kaikreuzer", "createdAt": "2020-06-13T21:11:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTkzMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NTk4NA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439765984", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The roaming bridge requires an `address` parameter which mearly servers as an identifier for the virtual adapter, its value doesn't really matter. \n          \n          \n            \n            The roaming bridge requires an `address` parameter which merely serves as an identifier for the virtual adapter, its value does not matter.", "author": "kaikreuzer", "createdAt": "2020-06-13T20:13:44Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -0,0 +1,41 @@\n+# Bluetooth Roaming Adapter\n+\n+This extension adds support for accessing Bluetooth devices from any other configured adapter via a virtual adapter.\n+\n+## Supported Things\n+\n+It defines the following bridge type:\n+\n+| Bridge Type ID | Description                                                                                                |\n+|----------------|------------------------------------------------------------------------------------------------------------|\n+| roaming        | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |\n+\n+## Channels\n+\n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |\n+\n+## Discovery\n+\n+A default roaming adapter is discovered automatically, although you can still configure it textually if you want.\n+There can be only a single roaming adapter on a system.\n+\n+## Bridge Configuration\n+\n+The roaming bridge requires an `address` parameter which mearly servers as an identifier for the virtual adapter, its value doesn't really matter. ", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439766101", "bodyText": "This sounds as if the value should be a mac address. Could it also be /(%\u00a7&@~$\") or is its syntax checked against mac structure?", "author": "kaikreuzer", "createdAt": "2020-06-13T20:15:23Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -0,0 +1,41 @@\n+# Bluetooth Roaming Adapter\n+\n+This extension adds support for accessing Bluetooth devices from any other configured adapter via a virtual adapter.\n+\n+## Supported Things\n+\n+It defines the following bridge type:\n+\n+| Bridge Type ID | Description                                                                                                |\n+|----------------|------------------------------------------------------------------------------------------------------------|\n+| roaming        | A virtual Bluetooth adapter that interacts with Bluetooth devices through their nearest Bluetooth adapter. |\n+\n+## Channels\n+\n+Devices which use a `roaming` adapter as their bridge also gain the following channels:\n+\n+| Channel ID       | Item Type | Description                                                     |\n+|------------------|-----------|-----------------------------------------------------------------|\n+| adapter-uid      | String    | The thingUID of the adapter that is nearest to this device      |\n+| adapter-location | String    | The value of the `Location` specified for the nearest adapter    |\n+\n+## Discovery\n+\n+A default roaming adapter is discovered automatically, although you can still configure it textually if you want.\n+There can be only a single roaming adapter on a system.\n+\n+## Bridge Configuration\n+\n+The roaming bridge requires an `address` parameter which mearly servers as an identifier for the virtual adapter, its value doesn't really matter. \n+It is advised to make sure it is set to a value outside of the normal bluetooth mac address range, for example: \"FF:FF:FF:FF:FF:FF\".", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2OTU3NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439769575", "bodyText": "Right now the value is required to be a mac address to create an instance of BluetoothAddress for the adapter's getAddress() method to return.\nFunnily enough, after looking through the Bluetooth binding code it seems that only place that BluetoothAdapter.getAddress() is even called is in a logging statement. So there isn't really any architectural requirement for BluetoothAdapter to even have a getAddress method.\nWould it make sense to remove that method from the BluetoothAdapter interface to allow users to create roaming thing instances without having to specify a fake bluetooth mac address?", "author": "cpmeister", "createdAt": "2020-06-13T21:14:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3MDU4OQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439770589", "bodyText": "Well, this parameter is what makes the bridge unique - it is the only differentiator between two bridges. Just as you say \"it merely serves as an identifier\". But this means we cannot remove it (or if we did, we would need to add some other parameter as a replacement). So I guess we can keep it and should only specify, what the value of the address should be for roaming adapters. If it does not have to be a mac, you could come up with something yourself, like saying it has to be virtual:XX with XX a byte value or whatever. And having a small syntax check on the parameter then probably won't hurt.", "author": "kaikreuzer", "createdAt": "2020-06-13T21:25:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3MTkwOA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439771908", "bodyText": "If it does not have to be a mac, you could come up with something yourself, like saying it has to be virtual:XX with XX a byte value or whatever. And having a small syntax check on the parameter then probably won't hurt.\n\nWell right now it has to be a mac in order to be able to implement the BluetoothAdapter.getAddress() method but if that method were to be removed you are correct that the identifier could be anything we want.\nBut it might also be possible to not have any identifier for roaming bridges at all outside of their thingUID. Roaming bridges only exist as ThingHandlers and have no actual backing device; they exist as soon as a roaming thing requests a handler.\nIs the ThingUID not a sufficient bridge identifier? Or do you think a separate identifier is required?", "author": "cpmeister", "createdAt": "2020-06-13T21:48:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTEyNDgwOQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r441124809", "bodyText": "right now it has to be a mac in order to be able to implement the BluetoothAdapter.getAddress()\n\nBut what you are saying is that this method isn't really used anywhere. So why does it have to be a mac when it just says \"address\"? My idea was to define \"address\" a bit wider than being a mac and thus use something artificial like virtual:01 as an address for the roaming bridge.\n\nIs the ThingUID not a sufficient bridge identifier?\n\nNo, as mentioned above, it would mean that it is the very same \"thing\", just being referenced with different ids. For the roaming bridge it is difficult to argue, since it is an exceptional abstract case. I somehow feel that we nonetheless should not make any exceptions for it, at least when it isn't a big deal for us.", "author": "kaikreuzer", "createdAt": "2020-06-16T20:33:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTE4ODU0OA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r441188548", "bodyText": "So why does it have to be a mac when it just says \"address\"?\n\nIt is meant to be reflective of the how the bluetooth protocols are meant to operate. All devices on a bluetooth network have a mac address, host and devices, through which they identify themselves as they communicate across the network. The BluetoothAdapter.getAddress method was meant to reflect an attribute of real physical bluetooth adapters which have unique mac addresses.\nAll BluetoothAdapter implementations are required to return a non-null BluetoothAddress object from their BluetoothAdapter.getAddress implementation.\nBecause the roaming adapter has to implement BluetoothAdapter then it must also be able to provide an BluetoothAddress instance to return. The BluetoothAddress enforces the mac format of the address on creation, so their is no way to not have a BluetoothAddress that isn't in the XX:XX:XX:XX:XX:XX format.\nSo if we want the roaming adapter to support non-mac addresses then we would either have to do one of the following:\n\nremove BluetoothAdapter.getAddress\nchange BluetoothAdapter.getAddress's return type to be nullable so that the roaming adapter can return null\nchange the return type to something that isn't BluetoothAddress\nmodify BluetoothAddress to allow non-mac address formats.\n\nWhich one do you think I should go with?", "author": "cpmeister", "createdAt": "2020-06-16T23:00:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU5MDg0Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r448590847", "bodyText": "I just read that devices are often using random MAC addresses for privacy reasons. It therefore seems to me that it is legit to just provide ANY MAC address - so your suggestion in the readme to just define any MAC address as long as it is in the valid format might indeed be the simplest way to go?\nYou say \"a value outside of the normal bluetooth mac address range\" - can this be specified in more detail?", "author": "kaikreuzer", "createdAt": "2020-07-01T20:10:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM2MTI3MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r453361271", "bodyText": "@cpmeister If you want to get it into 2.5.7, we should now finish it soon.\nWould you agree with my comment above? If so, please adapt the code, rebase it and we should be good to merge!", "author": "kaikreuzer", "createdAt": "2020-07-12T20:42:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwODE5MA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490008190", "bodyText": "You say \"a value outside of the normal bluetooth mac address range\" - can this be specified in more detail?\n\nYou give one example now (\"FF:FF:FF:FF:FF:FF\"), but \"value outside normal range\" sounds like there should be a kind of \"reserved\" address space for local/private addresses. What values other than \"FF:FF:FF:FF:FF:FF\" would you think are ok to use?", "author": "kaikreuzer", "createdAt": "2020-09-17T06:47:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDUwODE5NA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490508194", "bodyText": "I went ahead and just removed the address from the roaming adapters entirely. It wasn't meaningfully used in the code and would only confuse users trying to configure a roaming adapter thing.", "author": "cpmeister", "createdAt": "2020-09-17T19:30:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDkyNDcwOQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490924709", "bodyText": "Hm, it seems you forgot about all previous discussion we had here - removing the address was not really an option, see #7199 (comment).", "author": "kaikreuzer", "createdAt": "2020-09-18T12:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTI2NTY3MQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r491265671", "bodyText": "Hm, it seems you forgot about all previous discussion we had here - removing the address was not really an option, see #7199 (comment).\n\nApparently I did forget! But since I loathe idea of a useless configuration parameter I went ahead and implemented the roaming adapter groups feature. This feature adds a groupUIDs parameter which could serve as an identifier for any roaming bridge thing. I've also eliminated the restriction of only allowing a single roaming adapter thing to be defined.\nI hope this is sufficient compromise.", "author": "cpmeister", "createdAt": "2020-09-19T04:03:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTI5MzE1MA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r491293150", "bodyText": "Ok, sounds like a decent compromise, thank you!", "author": "kaikreuzer", "createdAt": "2020-09-19T06:37:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2NjEwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc2Njc1MA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r439766750", "bodyText": "please revert this change - the indentation was correct before", "author": "kaikreuzer", "createdAt": "2020-06-13T20:23:13Z", "path": "features/openhab-addons/src/main/resources/footer.xml", "diffHunk": "@@ -1,4 +1,4 @@\n-    <!-- aggregated features -->\n+\t<!-- aggregated features -->", "originalCommit": "d0fcdd6bc1b7e3570026e94ad15b164a3a803e29", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "030dcc9884a6d003289a567b0076645bff25c3c0", "url": "https://github.com/openhab/openhab-addons/commit/030dcc9884a6d003289a567b0076645bff25c3c0", "message": "Review changes\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-14T00:17:28Z", "type": "commit"}, {"oid": "6b739df1f51347e349c6a50bb194ae01f12ccc6e", "url": "https://github.com/openhab/openhab-addons/commit/6b739df1f51347e349c6a50bb194ae01f12ccc6e", "message": "Fix roaming readme.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-14T00:24:32Z", "type": "commit"}, {"oid": "53d40947928142390819082fe282e09ce194bee2", "url": "https://github.com/openhab/openhab-addons/commit/53d40947928142390819082fe282e09ce194bee2", "message": "Fix config\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-14T00:32:33Z", "type": "commit"}, {"oid": "54a791cb305e89a062f57d7e330f119a34be751c", "url": "https://github.com/openhab/openhab-addons/commit/54a791cb305e89a062f57d7e330f119a34be751c", "message": "Changing BluetoothAddress.getAddress to return nullable.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-25T20:31:16Z", "type": "commit"}, {"oid": "2d133477eb2ceb69275dc6d6e06c1711ccd53fa1", "url": "https://github.com/openhab/openhab-addons/commit/2d133477eb2ceb69275dc6d6e06c1711ccd53fa1", "message": "Just to be consistent\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-06-25T20:39:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzM2MDY3Nw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r453360677", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <!-- aggregated features -->\n          \n          \n            \n            <!-- aggregated features -->", "author": "kaikreuzer", "createdAt": "2020-07-12T20:36:16Z", "path": "features/openhab-addons/src/main/resources/footer.xml", "diffHunk": "@@ -1,4 +1,4 @@\n-\t<!-- aggregated features -->\n+    <!-- aggregated features -->", "originalCommit": "030dcc9884a6d003289a567b0076645bff25c3c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "545eaa4682b6c2c35071c7161a37361d30398260", "url": "https://github.com/openhab/openhab-addons/commit/545eaa4682b6c2c35071c7161a37361d30398260", "message": "Merge branch '2.5.x' of https://github.com/openhab/openhab-addons into\n7008\n\n# Conflicts:\n#\tCODEOWNERS\n#\tbom/openhab-addons/pom.xml\n#\tbundles/pom.xml\n#\tfeatures/openhab-addons/src/main/resources/footer.xml\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-16T22:40:04Z", "type": "commit"}, {"oid": "fe237c856c09c10ea32348594e1d8e7410c6b70a", "url": "https://github.com/openhab/openhab-addons/commit/fe237c856c09c10ea32348594e1d8e7410c6b70a", "message": "Ran spotless\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-16T22:40:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwOTIxMw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490009213", "bodyText": "Here seems to be something wrong, you're duplicating all information in this file.", "author": "kaikreuzer", "createdAt": "2020-09-17T06:49:40Z", "path": "features/openhab-addons/src/main/resources/footer.xml", "diffHunk": "@@ -1,4 +1,113 @@\n \t<!-- aggregated features -->\n+\t<feature name=\"openhab-binding-bluetooth\" description=\"Bluetooth Binding\" version=\"${project.version}\">", "originalCommit": "fe237c856c09c10ea32348594e1d8e7410c6b70a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM2MDIyOA==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490360228", "bodyText": "Something wrong indeed, I'll fix it.", "author": "cpmeister", "createdAt": "2020-09-17T15:51:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwOTIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ0OTk4NQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490449985", "bodyText": "Strange, I've fixed it on my branch but it doesn't show it as fixed here...", "author": "cpmeister", "createdAt": "2020-09-17T17:54:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwOTIxMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDQ1MDk4Ng==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490450986", "bodyText": "nvm, fixed it", "author": "cpmeister", "createdAt": "2020-09-17T17:55:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAwOTIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAxMDUxNw==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490010517", "bodyText": "Spotless complains about this file, so you should apply it here as well, I guess.", "author": "kaikreuzer", "createdAt": "2020-09-17T06:52:29Z", "path": "bundles/pom.xml", "diffHunk": "@@ -1,6 +1,5 @@\n <?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\n-<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"", "originalCommit": "fe237c856c09c10ea32348594e1d8e7410c6b70a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDM1OTIyNQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r490359225", "bodyText": "strange, spotless was the one that made that change... I'll manually edit it back", "author": "cpmeister", "createdAt": "2020-09-17T15:50:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDAxMDUxNw=="}], "type": "inlineReview"}, {"oid": "2ee051bbd11933d46ebab32f8eac03294f2a251c", "url": "https://github.com/openhab/openhab-addons/commit/2ee051bbd11933d46ebab32f8eac03294f2a251c", "message": "Fix merge issues\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-17T17:18:35Z", "type": "commit"}, {"oid": "6f306e79ff41b4c2cd908ced45e327c39dc131c0", "url": "https://github.com/openhab/openhab-addons/commit/6f306e79ff41b4c2cd908ced45e327c39dc131c0", "message": "Fix footer.xml\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-17T17:55:28Z", "type": "commit"}, {"oid": "696a0473ca58cebc0db4b4da32878f8fe11d4d39", "url": "https://github.com/openhab/openhab-addons/commit/696a0473ca58cebc0db4b4da32878f8fe11d4d39", "message": "Remove address parameter from documentation since it is not used.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-17T19:24:17Z", "type": "commit"}, {"oid": "5e0027fa68e83ab901100b7bdc57022411073fce", "url": "https://github.com/openhab/openhab-addons/commit/5e0027fa68e83ab901100b7bdc57022411073fce", "message": "Add some javadocs to new method in BluetoothDiscoveryParticipant\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-18T04:11:28Z", "type": "commit"}, {"oid": "7dbbb3c9af8e9d3366c314b963eefd5566a7711d", "url": "https://github.com/openhab/openhab-addons/commit/7dbbb3c9af8e9d3366c314b963eefd5566a7711d", "message": "Added support for roaming adapter groups.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-19T03:48:19Z", "type": "commit"}, {"oid": "68a78f5b32cd17eff15e46c566c87d7a175cc58b", "url": "https://github.com/openhab/openhab-addons/commit/68a78f5b32cd17eff15e46c566c87d7a175cc58b", "message": "Add new config param to the thing xml.\n\nSigned-off-by: Connor Petty <mistercpp2000+gitsignoff@gmail.com>", "committedDate": "2020-09-19T05:31:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTI5MzQzNQ==", "url": "https://github.com/openhab/openhab-addons/pull/7199#discussion_r491293435", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The Roaming bridge has an optional parameter `groupUIDs` that configures which Bluetooth adapters this roaming bridge will be monitored for the purpose of roaming devices. `groupUIDs` must be formatted as a comma separated list of Bluetooth adapter thing UID values. If the `groupUIDs` parameter is not specified or left empty then the Roaming adapter will track devices across all other Bluetooth adapters.\n          \n          \n            \n            \n          \n          \n            \n            The Roaming bridge has an optional parameter `groupUIDs` that configures which Bluetooth adapters this roaming bridge will be monitored for the purpose of roaming devices.\n          \n          \n            \n            `groupUIDs` must be formatted as a comma separated list of Bluetooth adapter thing UID values.\n          \n          \n            \n            If the `groupUIDs` parameter is not specified or left empty then the Roaming adapter will track devices across all other Bluetooth adapters.", "author": "kaikreuzer", "createdAt": "2020-09-19T06:38:10Z", "path": "bundles/org.openhab.binding.bluetooth.roaming/README.md", "diffHunk": "@@ -22,11 +22,11 @@ Devices which use a `roaming` adapter as their bridge also gain the following ch\n ## Discovery\n \n Roaming adapters cannot be discovered, they can only be created manually.\n-There can be only a single roaming adapter on a system.\n \n ## Bridge Configuration\n+The Roaming bridge has an optional parameter `groupUIDs` that configures which Bluetooth adapters this roaming bridge will be monitored for the purpose of roaming devices. `groupUIDs` must be formatted as a comma separated list of Bluetooth adapter thing UID values. If the `groupUIDs` parameter is not specified or left empty then the Roaming adapter will track devices across all other Bluetooth adapters.", "originalCommit": "7dbbb3c9af8e9d3366c314b963eefd5566a7711d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8e6fef8be584c385319a1133771cc3f32278ad02", "url": "https://github.com/openhab/openhab-addons/commit/8e6fef8be584c385319a1133771cc3f32278ad02", "message": "Update bundles/org.openhab.binding.bluetooth.roaming/README.md", "committedDate": "2020-09-19T06:38:31Z", "type": "commit"}]}