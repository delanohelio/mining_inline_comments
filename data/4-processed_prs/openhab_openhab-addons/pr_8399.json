{"pr_number": 8399, "pr_title": "[miio] Fix for $value$ wrong at 2nd time", "pr_createdAt": "2020-09-04T20:58:34Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8399", "timeline": [{"oid": "17a818610e2f6b22fedc9eb3900b5d7fb514f785", "url": "https://github.com/openhab/openhab-addons/commit/17a818610e2f6b22fedc9eb3900b5d7fb514f785", "message": "[miio] Fix for $value$ wrong at 2nd time\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>", "committedDate": "2020-09-04T20:57:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0Njk5Nw==", "url": "https://github.com/openhab/openhab-addons/pull/8399#discussion_r483846997", "bodyText": "Are you sure this is correct? continue here is the last statement in the for loop. So it just continues with the next entry. Did you mean to abort the for loop with break?", "author": "Hilbrand", "createdAt": "2020-09-04T21:16:01Z", "path": "bundles/org.openhab.binding.miio/src/main/java/org/openhab/binding/miio/internal/handler/MiIoBasicHandler.java", "diffHunk": "@@ -121,11 +121,12 @@ public void handleCommand(ChannelUID channelUID, Command command) {\n                 for (MiIoDeviceAction action : miIoBasicChannel.getActions()) {\n                     @Nullable\n                     JsonElement value = null;\n-                    JsonArray parameters = action.getParameters();\n+                    JsonArray parameters = action.getParameters().deepCopy();\n                     for (int i = 0; i < action.getParameters().size(); i++) {\n                         JsonElement p = action.getParameters().get(i);\n                         if (p.isJsonPrimitive() && p.getAsString().toLowerCase().contains(\"$value$\")) {\n                             valuePos = i;\n+                            continue;", "originalCommit": "17a818610e2f6b22fedc9eb3900b5d7fb514f785", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0NzY2OQ==", "url": "https://github.com/openhab/openhab-addons/pull/8399#discussion_r483847669", "bodyText": "thanks. I think you're right. will fix right away", "author": "marcelrv", "createdAt": "2020-09-04T21:18:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg0Njk5Nw=="}], "type": "inlineReview"}, {"oid": "e945a86abfc04784c1621b96b21b207977ca23cb", "url": "https://github.com/openhab/openhab-addons/commit/e945a86abfc04784c1621b96b21b207977ca23cb", "message": "[miio] improvement after feedback\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>", "committedDate": "2020-09-04T21:18:33Z", "type": "commit"}]}