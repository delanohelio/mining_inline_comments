{"pr_number": 6776, "pr_title": "[tplinksmarthome] Fix special characters in data", "pr_createdAt": "2020-01-06T13:25:50Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6776", "timeline": [{"oid": "b6a4111eecd47e91dccfdbf324c4691cde505819", "url": "https://github.com/openhab/openhab-addons/commit/b6a4111eecd47e91dccfdbf324c4691cde505819", "message": "[tplinksmarthome] Fix special characters in data\n\nCloses #6722\n\nSigned-off-by: Hilbrand Bouwkamp <hilbrand@h72.nl>", "committedDate": "2020-01-06T13:23:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwNjYyNw==", "url": "https://github.com/openhab/openhab-addons/pull/6776#discussion_r363906627", "bodyText": "With Java 9 you could to byte[] array = is.readAllBytes();", "author": "J-N-K", "createdAt": "2020-01-07T19:16:20Z", "path": "bundles/org.openhab.binding.tplinksmarthome/src/main/java/org/openhab/binding/tplinksmarthome/internal/CryptUtil.java", "diffHunk": "@@ -72,15 +73,16 @@ public static String decryptWithLength(InputStream inputStream) throws IOExcepti\n      * @throws IOException exception in case device not reachable\n      */\n     private static String decrypt(InputStream inputStream, int length) throws IOException {\n-        StringBuilder sb = new StringBuilder();\n+        final byte[] decryptedData = new byte[length];\n         int in;\n         int key = KEY;\n-        while (sb.length() < length && (in = inputStream.read()) != -1) {\n-            int nextKey = in;\n-            sb.append((char) (in ^ key));\n+        int i = 0;", "originalCommit": "b6a4111eecd47e91dccfdbf324c4691cde505819", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}