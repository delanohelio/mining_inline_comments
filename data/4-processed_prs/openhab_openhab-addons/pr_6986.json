{"pr_number": 6986, "pr_title": "[infrastructure] exclude feature-templates from spotless formatter", "pr_createdAt": "2020-02-09T15:28:24Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6986", "timeline": [{"oid": "8ae586968aef409b1329b0c8ca4231a1f892fa03", "url": "https://github.com/openhab/openhab-addons/commit/8ae586968aef409b1329b0c8ca4231a1f892fa03", "message": "exclude feature-templates\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-02-09T15:26:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc5ODU0Mw==", "url": "https://github.com/openhab/openhab-addons/pull/6986#discussion_r376798543", "bodyText": "Together with #6874 in master branch the first build is working when using relative paths:\n                  <exclude>src/main/resources/header.xml</exclude>\n                  <exclude>src/main/resources/footer.xml</exclude>\nThe second build is still failing because of the header in the generated feature file. I guess we have to include openhab/openhab-core#1302 (comment) too:\n[ERROR] Failed to execute goal com.diffplug.spotless:spotless-maven-plugin:1.24.3:check (codestyle_check) on project org.openhab.addons.features.karaf.openhab-addons: The following files had format violations:\n[ERROR]     src/main/feature/feature.xml\n[ERROR]         @@ -1,21 +1,8 @@\n[ERROR]          <?xml\u00b7version=\"1.0\"\u00b7encoding=\"UTF-8\"?>\n[ERROR]         -<!--\n[ERROR]         -\n[ERROR]         -\\tCopyright\u00b7(c)\u00b72010-2020\u00b7Contributors\u00b7to\u00b7the\u00b7openHAB\u00b7project\n[ERROR]         -\n[ERROR]         -\\tSee\u00b7the\u00b7NOTICE\u00b7file(s)\u00b7distributed\u00b7with\u00b7this\u00b7work\u00b7for\u00b7additional\n[ERROR]         -\\tinformation.\n[ERROR]         -\n[ERROR]         -\\tThis\u00b7program\u00b7and\u00b7the\u00b7accompanying\u00b7materials\u00b7are\u00b7made\u00b7available\u00b7under\u00b7the\n[ERROR]         -\\tterms\u00b7of\u00b7the\u00b7Eclipse\u00b7Public\u00b7License\u00b72.0\u00b7which\u00b7is\u00b7available\u00b7at\n[ERROR]         -\\thttp://www.eclipse.org/legal/epl-2.0\n[ERROR]         -\n[ERROR]         -\\tSPDX-License-Identifier:\u00b7EPL-2.0\n[ERROR]         -\n[ERROR]         --->\n[ERROR]         +<!--\u00b7Copyright\u00b7(c)\u00b72010-2020\u00b7Contributors\u00b7to\u00b7the\u00b7openHAB\u00b7project\u00b7See\u00b7the\u00b7NOTICE\u00b7file(s)\u00b7distributed\u00b7with\u00b7this\u00b7work\u00b7for\u00b7additional\u00b7information.\u00b7This\u00b7program\u00b7and\u00b7the\u00b7accompanying\u00b7materials\u00b7are\u00b7made\u00b7available\u00b7under\u00b7the\u00b7terms\u00b7of\u00b7the\u00b7Eclipse\u00b7Public\u00b7License\u00b72.0\u00b7which\u00b7is\u00b7available\u00b7at\u00b7http://www.eclipse.org/legal/epl-2.0\u00b7SPDX-License-Identifier:\u00b7EPL-2.0\u00b7-->\n[ERROR]          <features\u00b7name=\"${project.artifactId}-${project.version}\"\u00b7xmlns=\"http://karaf.apache.org/xmlns/features/v1.4.0\">\n[ERROR]          \n[ERROR]         -\u00b7\u00b7\u00b7\u00b7<repository>mvn:org.openhab.core.features.karaf/org.openhab.core.features.karaf.openhab-core/${ohc.version}/xml/features</repository>\n[ERROR]         +\\t<repository>mvn:org.openhab.core.features.karaf/org.openhab.core.features.karaf.openhab-core/${ohc.version}/xml/features</repository>\n[ERROR]          \n[ERROR]          \\t<feature\u00b7name=\"openhab-binding-kodi\"\u00b7description=\"Kodi\u00b7Binding\"\u00b7version=\"${project.version}\">\n[ERROR]          \\t\\t<feature>openhab-runtime-base</feature>\n[ERROR] Run 'mvn spotless:apply' to fix these violations.\n[ERROR] -> [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn <goals> -rf :org.openhab.addons.features.karaf.openhab-addons", "author": "cweitkamp", "createdAt": "2020-02-09T16:57:10Z", "path": "pom.xml", "diffHunk": "@@ -549,6 +549,8 @@ Import-Package: \\\\\n                 </excludes>\n                 <excludes>\n                   <exclude>**/feature.xml</exclude>\n+                  <exclude>features/openhab-addons/src/main/resources/header.xml</exclude>\n+                  <exclude>features/openhab-addons/src/main/resources/footer.xml</exclude>", "originalCommit": "8ae586968aef409b1329b0c8ca4231a1f892fa03", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3ODE1NDUxMw==", "url": "https://github.com/openhab/openhab-addons/pull/6986#discussion_r378154513", "bodyText": "I created openhab/static-code-analysis#375 for it.", "author": "cweitkamp", "createdAt": "2020-02-12T10:12:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc5ODU0Mw=="}], "type": "inlineReview"}]}