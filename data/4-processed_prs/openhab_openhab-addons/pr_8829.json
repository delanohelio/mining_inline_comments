{"pr_number": 8829, "pr_title": "[comfoair] Re-implement device options as channels", "pr_createdAt": "2020-10-21T18:31:30Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8829", "timeline": [{"oid": "ba51540caf3e206edcabfe2d70053644ea3ea785", "url": "https://github.com/openhab/openhab-addons/commit/ba51540caf3e206edcabfe2d70053644ea3ea785", "message": "Re-implement device options as channels\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-21T18:09:34Z", "type": "commit"}, {"oid": "62ecbe7d9d41541e71039f7b81d40ad15a7c0029", "url": "https://github.com/openhab/openhab-addons/commit/62ecbe7d9d41541e71039f7b81d40ad15a7c0029", "message": "add i18n for channel groups\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-21T20:55:17Z", "type": "commit"}, {"oid": "1062d13edfd5f34866a86c204febd37e23dd3edd", "url": "https://github.com/openhab/openhab-addons/commit/1062d13edfd5f34866a86c204febd37e23dd3edd", "message": "harmonize internal constant naming\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-25T11:04:46Z", "type": "forcePushed"}, {"oid": "bc5542855d2ec528d7a73e0a3c36e485de6947b0", "url": "https://github.com/openhab/openhab-addons/commit/bc5542855d2ec528d7a73e0a3c36e485de6947b0", "message": "harmonize internal constant naming\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-25T11:06:17Z", "type": "forcePushed"}, {"oid": "1f48725ce9d1606e7b67f92801bddb6de21b006b", "url": "https://github.com/openhab/openhab-addons/commit/1f48725ce9d1606e7b67f92801bddb6de21b006b", "message": "revert ewt channel renaming\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-27T09:38:30Z", "type": "commit"}, {"oid": "5e6fd05d53156cc392f4016e451b84ec7fb7496a", "url": "https://github.com/openhab/openhab-addons/commit/5e6fd05d53156cc392f4016e451b84ec7fb7496a", "message": "harmonize internal constant naming\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-27T09:38:30Z", "type": "commit"}, {"oid": "5e6fd05d53156cc392f4016e451b84ec7fb7496a", "url": "https://github.com/openhab/openhab-addons/commit/5e6fd05d53156cc392f4016e451b84ec7fb7496a", "message": "harmonize internal constant naming\n\nSigned-off-by: Hans B\u00f6hm <h.boehm@gmx.at>", "committedDate": "2020-10-27T09:38:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MDUxMg==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515650512", "bodyText": "Can these change over time? If they are fixed, they should be properties rather than Channels.", "author": "fwolter", "createdAt": "2020-11-01T17:44:31Z", "path": "bundles/org.openhab.binding.comfoair/README.md", "diffHunk": "@@ -114,46 +112,57 @@ Available device options are shown in thing properties.\n | menuP2#RFLongDelay                 | Number                   | Menu P26                        | End delay (RF long actuation) for ventilation level 3 (min)                                 | false     | yes      |\n | menuP2#cookerhoodDelay             | Number                   | Menu P20                        | End delay for cooker hood control (min)                                                     | false     | yes      |\n | **Menu P9: Option States**         |                          |                                 |                                                                                             |           |          |\n-| menuP9#chimneyState (dynamic)      | Switch                   | Chimney Control State           | State of the chimney control                                                                | true      | yes      |\n-| menuP9#bypassState (dynamic)       | Switch                   | Bypass State                    | State of the bypass (ON = open / OFF = closed)                                              | true      | yes      |\n-| menuP9#ewtState (dynamic)          | Switch                   | EWT State                       | State of the EWT valve (ON = open / OFF = closed)                                           | true      | yes      |\n-| menuP9#heaterState (dynamic)       | Switch                   | Heater State                    | State of the heater                                                                         | true      | yes      |\n+| menuP9#chimneyState                | Switch                   | Chimney Control State           | State of the chimney control                                                                | true      | yes      |\n+| menuP9#bypassState                 | Switch                   | Bypass State                    | State of the bypass (ON = open / OFF = closed)                                              | true      | yes      |\n+| menuP9#ewtState                    | Switch                   | GHX State                       | State of the geothermal heat exchanger valve (ON = open / OFF = closed)                     | true      | yes      |\n+| menuP9#heaterState                 | Switch                   | Heater State                    | State of the heater                                                                         | true      | yes      |\n | menuP9#vControlState               | Switch                   | 0-10V Control State             | State of the 0-10V control                                                                  | true      | yes      |\n-| menuP9#frostState (dynamic)        | Switch                   | Antifrost State                 | State of the antifrost control                                                              | true      | yes      |\n-| menuP9#cookerhoodState (dynamic)   | Switch                   | Cookerhood State                | State of the cookerhood control                                                             | true      | yes      |\n-| menuP9#enthalpyState (dynamic)     | Switch                   | Enthalpy State                  | State of the enthalpy module                                                                | true      | yes      |\n+| menuP9#frostState                  | Switch                   | Antifrost State                 | State of the antifrost control                                                              | true      | yes      |\n+| menuP9#cookerhoodState             | Switch                   | Cookerhood State                | State of the cookerhood control                                                             | true      | yes      |\n+| menuP9#enthalpyState               | Switch                   | Enthalpy State                  | State of the enthalpy module                                                                | true      | yes      |\n | **Error States**                   |                          |                                 |                                                                                             |           |          |\n | errors#filterError                 | Switch                   | Filter Error                    | Filter full                                                                                 | true      | no       |\n | errors#errorsCurrent               | String                   | Errors Current                  | Current errors                                                                              | true      | no       |\n | errors#errorsLast                  | String                   | Errors Last                     | Last errors                                                                                 | true      | yes      |\n | errors#errorsPrelast               | String                   | Errors Prelast                  | Prelast errors                                                                              | true      | yes      |\n | errors#errorsPrePrelast            | String                   | Errors Pre-Prelast              | Pre-Prelast errors                                                                          | true      | yes      |\n-| **Bypass Values (dynamic)**        |                          |                                 |                                                                                             |           |          |\n+| **Bypass Values**                  |                          |                                 |                                                                                             |           |          |\n | bypass#bypassFactor                | Number                   | Bypass Factor                   | Bypass factor value                                                                         | true      | yes      |\n | bypass#bypassLevel                 | Number                   | Bypass Level                    | Bypass level state                                                                          | true      | yes      |\n | bypass#bypassCorrection            | Number                   | Bypass Correction               | Bypass correction state                                                                     | true      | yes      |\n | bypass#bypassSummer                | Switch                   | Bypass Summer Mode              | Bypass summer mode                                                                          | true      | yes      |\n-| **Preheater Values (dynamic)**     |                          |                                 |                                                                                             |           |          |\n+| **Preheater Values**               |                          |                                 |                                                                                             |           |          |\n | preheater#preheaterValve           | Number                   | Preheater Valve                 | State of the preheater valve                                                                | true      | yes      |\n | preheater#preheaterFrostProtect    | Switch                   | Frost Protection                | State of the frost protection                                                               | true      | yes      |\n | preheater#preheaterHeating         | Switch                   | Preheater                       | State of the preheater                                                                      | true      | yes      |\n | preheater#preheaterFrostTime       | Number                   | Preheater Frost Time            | Frost minutes                                                                               | true      | yes      |\n | preheater#preheaterSafety          | Number                   | Preheater Frost Safety          | Frost safety setting                                                                        | true      | yes      |\n-| **EWT Values (dynamic)**           |                          |                                 |                                                                                             |           |          |\n-| ewt#ewtTemperatureLow              | Number:Temperature       | EWT Temperature (low)           | Lower temperature of the geothermal heat exchanger                                          | true      | yes      |\n-| ewt#ewtTemperatureHigh             | Number:Temperature       | EWT Temperature (high)          | Upper temperature of the geothermal heat exchanger                                          | true      | yes      |\n-| ewt#ewtSpeed                       | Number                   | EWT Speed Up (%)                | Speed up of the geothermal heat exchanger                                                   | true      | yes      |\n-| **Heater Values (dynamic)**        |                          |                                 |                                                                                             |           |          |\n+| **GHX Values**                     |                          |                                 |                                                                                             |           |          |\n+| ewt#ewtTemperatureLow              | Number:Temperature       | GHX Temperature (low)           | Lower temperature of the geothermal heat exchanger                                          | true      | yes      |\n+| ewt#ewtTemperatureHigh             | Number:Temperature       | GHX Temperature (high)          | Upper temperature of the geothermal heat exchanger                                          | true      | yes      |\n+| ewt#ewtSpeed                       | Number                   | GHX Speed Up (%)                | Speed up of the geothermal heat exchanger                                                   | true      | yes      |\n+| **Heater Values**                  |                          |                                 |                                                                                             |           |          |\n | heater#heaterPower                 | Number                   | Heater Power                    | Heater power value                                                                          | true      | yes      |\n | heater#heaterPowerI                | Number                   | Heater Power I-parameter        | Heater power I-parameter value                                                              | true      | yes      |\n | heater#heaterTargetTemperature     | Number:Temperature       | Heater Target Temperature       | Target temperature of the heater                                                            | true      | yes      |\n-| **Cookerhood Values (dynamic)**    |                          |                                 |                                                                                             |           |          |\n+| **Cookerhood Values**              |                          |                                 |                                                                                             |           |          |\n | cookerhood#cookerhoodSpeed         | Number                   | Cookerhood Speed Up (%)         | Speed up of the cookerhood                                                                  | true      | yes      |\n-| **Enthalpy Values (dynamic)**      |                          |                                 |                                                                                             |           |          |\n+| **Enthalpy Values**                |                          |                                 |                                                                                             |           |          |\n | enthalpy#enthalpyTemperature       | Number:Temperature       | Enthalpy Sensor Temperature     | Temperature of the enthalpy sensor                                                          | true      | yes      |\n | enthalpy#enthalpyHumidity          | Number                   | Enthalpy Sensor Humidity        | Humidity of the enthalpy sensor                                                             | true      | yes      |\n | enthalpy#enthalpyLevel             | Number                   | Enthalpy Sensor Level           | Level of the enthalpy sensor                                                                | true      | yes      |\n | enthalpy#enthalpyTime              | Number                   | Enthalpy Sensor Timer           | Timer state of the enthalpy sensor                                                          | true      | yes      |\n+| **Option Settings**                |                          |                                 |                                                                                             |           |          |\n+| options#isPreheater                | Switch                   | Preheater                       | Preheater option installed                                                                  | true      | yes      |\n+| options#isBypass                   | Switch                   | Bypass                          | Bypass option installed                                                                     | true      | yes      |\n+| options#recuType                   | Number                   | ComfoAir Type                   | Type of the ComfoAir (1 = left / 2 = right)                                                 | true      | yes      |\n+| options#recuSize                   | Number                   | ComfoAir Size                   | Size of the ComfoAir (1 = big / 2 = small)                                                  | true      | yes      |\n+| options#isChimney                  | Switch                   | Chimney                         | Chimney option installed                                                                    | true      | yes      |\n+| options#isCookerhood               | Switch                   | Cookerhood                      | Cookerhood option installed                                                                 | true      | yes      |\n+| options#isHeater                   | Switch                   | Heater                          | Heater option installed                                                                     | true      | yes      |\n+| options#isEnthalpy                 | Number                   | Enthalpy                        | Enthalpy option installed                                                                   | true      | yes      |\n+| options#isEWT                      | Number                   | Geothermal Heat Exchanger       | Geothermal heat exchanger option installed                                                  | true      | yes      |\n+| options#analogPriority             | Number                   | Analog Priority                 | Priority of analog inputs for highest fan level                                             | true      | yes      |", "originalCommit": "5e6fd05d53156cc392f4016e451b84ec7fb7496a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc5NDk0NA==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515794944", "bodyText": "Unlike my assumption, and thus the initial implementation as properties, it seems to be quite common that individual device options are swapped or deactivated during operation (as communicated by users).", "author": "boehan", "createdAt": "2020-11-02T08:03:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MDUxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgwMDI0NQ==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515800245", "bodyText": "Ok, fair enough.", "author": "fwolter", "createdAt": "2020-11-02T08:15:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MDUxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MTI2MQ==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515651261", "bodyText": "The readme states, these are read only.", "author": "fwolter", "createdAt": "2020-11-01T17:51:44Z", "path": "bundles/org.openhab.binding.comfoair/src/main/resources/OH-INF/thing/thing-types.xml", "diffHunk": "@@ -833,6 +849,100 @@\n \t\t<state readOnly=\"true\"/>\n \t</channel-type>\n \n+\t<channel-type id=\"is_preheater\" advanced=\"true\">\n+\t\t<item-type>Switch</item-type>\n+\t\t<label>Preheater</label>\n+\t\t<description>Preheater option installed</description>\n+\t\t<category>Switch</category>\n+\t\t<state readOnly=\"false\"/>", "originalCommit": "5e6fd05d53156cc392f4016e451b84ec7fb7496a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc5NTc5MA==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515795790", "bodyText": "I'm not sure if I understand your comment correctly, but as stated above these channels are NOT meant to be read only", "author": "boehan", "createdAt": "2020-11-02T08:05:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MTI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTgwMDU4Nw==", "url": "https://github.com/openhab/openhab-addons/pull/8829#discussion_r515800587", "bodyText": "Please ignore my comment, was a bit to late yesterday.", "author": "fwolter", "createdAt": "2020-11-02T08:16:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTY1MTI2MQ=="}], "type": "inlineReview"}]}