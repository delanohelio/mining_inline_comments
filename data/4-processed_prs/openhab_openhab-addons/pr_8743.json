{"pr_number": 8743, "pr_title": "[miio] Add Zhimi Heater za1", "pr_createdAt": "2020-10-12T22:31:09Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8743", "timeline": [{"oid": "a4c75203daad3c7283cacb86dfd33844ec0d97eb", "url": "https://github.com/openhab/openhab-addons/commit/a4c75203daad3c7283cacb86dfd33844ec0d97eb", "message": "[miio] Add Zhimi Heater za1\n\nadd model zhimi.heater.za1\n\nSigned-off-by: Marcel Verpaalen <marcel@verpaalen.com>", "committedDate": "2020-10-12T22:30:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5NDg0OA==", "url": "https://github.com/openhab/openhab-addons/pull/8743#discussion_r503594848", "bodyText": "Can you use units here?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Number temperature \"Temperature\" (G_heater) {channel=\"miio:basic:heater:temperature\"}\n          \n          \n            \n            Number:Temperature temperature \"Temperature\" (G_heater) {channel=\"miio:basic:heater:temperature\"}", "author": "cpmeister", "createdAt": "2020-10-12T23:58:44Z", "path": "bundles/org.openhab.binding.miio/README.md", "diffHunk": "@@ -6116,4 +6131,21 @@ String customScene \"Set Scene\" (G_light) {channel=\"miio:basic:light:customScene\"\n Number nightlightBrightness \"Nightlight Brightness\" (G_light) {channel=\"miio:basic:light:nightlightBrightness\"}\n ```\n \n+### Zhimi Heater (zhimi.heater.za1) item file lines\n+\n+note: Autogenerated example. Replace the id (heater) in the channel with your own. Replace `basic` with `generic` in the thing UID depending on how your thing was discovered.\n+\n+```java\n+Group G_heater \"Zhimi Heater\" <status>\n+Switch power \"Power\" (G_heater) {channel=\"miio:basic:heater:power\"}\n+Number target_temperature \"Target Temperature\" (G_heater) {channel=\"miio:basic:heater:target_temperature\"}\n+Number brightness \"Brightness\" (G_heater) {channel=\"miio:basic:heater:brightness\"}\n+Switch buzzer \"Buzzer Status\" (G_heater) {channel=\"miio:basic:heater:buzzer\"}\n+Number relative_humidity \"Relative Humidity\" (G_heater) {channel=\"miio:basic:heater:relative_humidity\"}\n+Switch childlock \"Child Lock\" (G_heater) {channel=\"miio:basic:heater:childlock\"}\n+Switch HWSwitch \"HW Switch\" (G_heater) {channel=\"miio:basic:heater:HWSwitch\"}\n+Number temperature \"Temperature\" (G_heater) {channel=\"miio:basic:heater:temperature\"}", "originalCommit": "a4c75203daad3c7283cacb86dfd33844ec0d97eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDEyODEwNw==", "url": "https://github.com/openhab/openhab-addons/pull/8743#discussion_r504128107", "bodyText": "the honest answer is... I don't know.\nThe documentation https://www.openhab.org/docs/developer/bindings/thing-xml.html#channels does not have much explanation,\nI'm not too clear  anymore on the difference between the Number:Temperature  vs channel-type     <category>Temperature</category> vs   new QuantityType<>(temperature, SIUnits.CELSIUS));\nas I create all channels dynamically, is it enough to just change the datatype to Number:Temperature when the channel is created like:    Channel newChannel = ChannelBuilder.create(channelUID, datatype). .withLabel(friendlyName).build();\nAnd if I create it that way, does it require the quantity type in the update or not...\nanyway... in my wishlist #7276 I do have the wish to somehow implement this... but is not too high on my priority list...  as I don't understand it well enough, don't understand the big advantage if it is there....  and am bit afraid it breaks things...", "author": "marcelrv", "createdAt": "2020-10-13T17:19:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5NDg0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk3OTQxMQ==", "url": "https://github.com/openhab/openhab-addons/pull/8743#discussion_r504979411", "bodyText": "as I create all channels dynamically, is it enough to just change the datatype to Number:Temperature when the channel is created like: Channel newChannel = ChannelBuilder.create(channelUID, datatype). .withLabel(friendlyName).build();\n\nYes, that is all that would be necessary. At that point you just need to use QuantityType instead of DecimalType for those relevant channels. and also make sure to use QuantityType.toUnit() when processing the state from handleCommand.\nQuantityType allows users to use different units for their UI. For example a binding may report temperature in C but the user wants it displayed as F.\nYou don't need to make the transition just yet, but please plan for it.", "author": "cpmeister", "createdAt": "2020-10-14T21:21:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5NDg0OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTA3MjkzNA==", "url": "https://github.com/openhab/openhab-addons/pull/8743#discussion_r505072934", "bodyText": "yes, made placeholder #8756 for it.\nTemperature updates are fine, but still need test  how to conveniently go from a unit string to a Unit\ne.g. from \"Celcius\" to  Units.CELSIUS in a generic way", "author": "marcelrv", "createdAt": "2020-10-14T23:39:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzU5NDg0OA=="}], "type": "inlineReview"}]}