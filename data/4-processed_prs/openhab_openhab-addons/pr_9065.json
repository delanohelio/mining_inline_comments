{"pr_number": 9065, "pr_title": "[ecobee] Updates in prep for Dec 1 changes to Ecobee authorization process", "pr_createdAt": "2020-11-18T22:48:59Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/9065", "timeline": [{"oid": "8ed5662c094832eda687a52dec8322d5810e8c98", "url": "https://github.com/openhab/openhab-addons/commit/8ed5662c094832eda687a52dec8322d5810e8c98", "message": "Updates in prep for Dec 1 back-end change\n\nSigned-off-by: Mark Hilbush <mark@hilbush.com>", "committedDate": "2020-11-18T22:37:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2OTMyOQ==", "url": "https://github.com/openhab/openhab-addons/pull/9065#discussion_r529769329", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - At this point the Ecobee Account thing should be OFFLINE with a CONFIGURATION_PENING status.\n          \n          \n            \n            - At this point the Ecobee Account thing should be OFFLINE with a CONFIGURATION_PENDING status.", "author": "fwolter", "createdAt": "2020-11-24T17:54:27Z", "path": "bundles/org.openhab.binding.ecobee/README.md", "diffHunk": "@@ -57,21 +57,43 @@ After you have installed the binding, you can create the Account thing using the\n Once the Account thing is created, the binding will try to get information about your thermostats from the Ecobee web service.\n When this happens, the binding will determine that it has not yet been authorized by the Ecobee web service.\n \n-At this point the binding will retrieve a four-character PIN code from the Ecobee web service.\n+At this point the binding will retrieve a multi-character PIN code from the Ecobee web service.\n The binding will mark the Account thing OFFLINE with a detailed status message that contains the\n PIN code needed to complete the authorization.\n-The PIN code will be valid for 9 minutes.\n+The PIN code will be valid for several minutes.\n The status message will look something like this.\n \n ```\n-Enter PIN 'RVLA' in MyApps. PIN expires in 9 minutes.\n+Enter PIN 'JULO-RVLA' in MyApps. PIN expires in 257 minutes.\n ```\n \n To complete the authorization, the PIN code must be entered into the Ecobee **My Apps** settings in your account at ecobee.com.\n This will authorize the binding to work with the thermostats associated with your Ecobee account.\n Once authorization is complete, the binding will retrieve information about the available thermostats, \n and add those thermostats to the inbox.\n \n+## Ecobee Authorization Changes Effective 1 December 2020\n+\n+Effective 1 Dec 2020, Ecobee implemented changes to their authorization process.\n+Ecobee recommends that users who authorized with Ecobee prior to 1 Dec 2020 should reauthorize their application as the new process affords greater security.\n+While the binding will continue to work using the old authorization method, it's recommended that you reauthorize the binding using the following process.\n+\n+- You may need to update openHAB to get the latest version of the binding\n+\n+- In the MyApps section of your Ecobee Portal, remove the application using the **Remove App** function.\n+\n+- Wait up to one hour for the binding to do a token refresh with the Ecobee servers.\n+\n+- At this point the Ecobee Account thing should be OFFLINE with a CONFIGURATION_PENING status.", "originalCommit": "8ed5662c094832eda687a52dec8322d5810e8c98", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc3MzgxMA==", "url": "https://github.com/openhab/openhab-addons/pull/9065#discussion_r529773810", "bodyText": "Thanks for catching this.", "author": "mhilbush", "createdAt": "2020-11-24T18:01:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc2OTMyOQ=="}], "type": "inlineReview"}, {"oid": "477048dd93648af432ed9d75f1d794121398fce6", "url": "https://github.com/openhab/openhab-addons/commit/477048dd93648af432ed9d75f1d794121398fce6", "message": "Fix typo\n\nSigned-off-by: Mark Hilbush <mark@hilbush.com>", "committedDate": "2020-11-24T18:00:22Z", "type": "commit"}]}