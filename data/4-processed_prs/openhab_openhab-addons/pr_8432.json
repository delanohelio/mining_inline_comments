{"pr_number": 8432, "pr_title": "[smaenergymeter] Add per-phase channels", "pr_createdAt": "2020-09-08T09:43:24Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/8432", "timeline": [{"oid": "6f8c9fb796a7f9ca60afc0aba29e7e839c2352b9", "url": "https://github.com/openhab/openhab-addons/commit/6f8c9fb796a7f9ca60afc0aba29e7e839c2352b9", "message": "Signed-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>\n\nAdded per-phase signals\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-08T09:51:08Z", "type": "commit"}, {"oid": "6f8c9fb796a7f9ca60afc0aba29e7e839c2352b9", "url": "https://github.com/openhab/openhab-addons/commit/6f8c9fb796a7f9ca60afc0aba29e7e839c2352b9", "message": "Signed-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>\n\nAdded per-phase signals\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-08T09:51:08Z", "type": "forcePushed"}, {"oid": "2469c8c2477b05378e6366027582bb21ea042d52", "url": "https://github.com/openhab/openhab-addons/commit/2469c8c2477b05378e6366027582bb21ea042d52", "message": "Fixed formatting violations.\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-08T10:17:32Z", "type": "commit"}, {"oid": "c7e46f61ec7a2a42c1b876a36b9a3381ebe16235", "url": "https://github.com/openhab/openhab-addons/commit/c7e46f61ec7a2a42c1b876a36b9a3381ebe16235", "message": "Updated readme\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-08T19:53:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTE2Njk4NQ==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485166985", "bodyText": "The Channel names need an update.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            -   **powerIn** Purchased power L1&lsqb;W&rsqb;\n          \n          \n            \n            -   **powerInL1** Purchased power L1&lsqb;W&rsqb;", "author": "fwolter", "createdAt": "2020-09-08T20:06:53Z", "path": "bundles/org.openhab.binding.smaenergymeter/README.md", "diffHunk": "@@ -23,9 +23,21 @@ Optionally, a refresh interval (in seconds) can be defined.\n ## Channels\n \n -   **powerIn** Purchased power &lsqb;W&rsqb;\n+-   **powerIn** Purchased power L1&lsqb;W&rsqb;", "originalCommit": "c7e46f61ec7a2a42c1b876a36b9a3381ebe16235", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzNDk1MA==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485934950", "bodyText": "It's not needed to create new channel-types, because the channel-types are the same as the orignal onces, except for the title. So it's better to remove all all the newly added channel types and define the channels as follows:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\t<channel id=\"powerInL1\" typeId=\"powerInTypeL1\"/>\n          \n          \n            \n            \t\t\t<channel id=\"powerInL1\" typeId=\"powerInType\">\n          \n          \n            \n            \t\t\t    <label>Purchased Power L1</label>\n          \n          \n            \n            \t\t\t</channel>", "author": "Hilbrand", "createdAt": "2020-09-09T21:34:46Z", "path": "bundles/org.openhab.binding.smaenergymeter/src/main/resources/ESH-INF/thing/energyMeter.xml", "diffHunk": "@@ -12,6 +12,18 @@\n \t\t\t<channel id=\"powerOut\" typeId=\"powerOutType\"/>\n \t\t\t<channel id=\"energyIn\" typeId=\"energyInType\"/>\n \t\t\t<channel id=\"energyOut\" typeId=\"energyOutType\"/>\n+\t\t\t<channel id=\"powerInL1\" typeId=\"powerInTypeL1\"/>", "originalCommit": "c7e46f61ec7a2a42c1b876a36b9a3381ebe16235", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk0MzA4MQ==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485943081", "bodyText": "Thank you for your time. However, regarding the matter at hand I disagree.\nFrom an electrical perspective the sum and all three individual phases have semantically distinct meanings and are not just anonymous channels with different names.\nFrom the docs \"The granularity of channel types should be on its semantic level, i.e. very fine-grained: If a Thing measures two temperature values, one for indoor and one for outdoor, this should be modelled as two different channel types. Overriding labels of a channel type must only be done if the very same functionality is offered multiple times, e.g. having an actuator with 5 relays, which each is a simple \"switch\", but you want to individually name the channels (1-5).\"", "author": "uebber", "createdAt": "2020-09-09T21:53:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzNDk1MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk0NzAwNw==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485947007", "bodyText": "I stand corrected \ud83d\ude04 (time to reread the documentation)\nSo instead of sharing it with the sumarized channel-types you can shared them between the L1-L3 types.", "author": "Hilbrand", "createdAt": "2020-09-09T22:02:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzNDk1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzNzYyOA==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485937628", "bodyText": "Since this list has become much longer it's probably better to make this a markdown table (which is done in most other binding documentation)\n| Channel | Description                   |\n|---------|-------------------------------|\n| powerIn | Purchased power &lsqb;W&rsqb; |\n....\n\nYou can format the table with: http://markdowntable.com/", "author": "Hilbrand", "createdAt": "2020-09-09T21:40:46Z", "path": "bundles/org.openhab.binding.smaenergymeter/README.md", "diffHunk": "@@ -23,9 +23,21 @@ Optionally, a refresh interval (in seconds) can be defined.\n ## Channels\n \n -   **powerIn** Purchased power &lsqb;W&rsqb;", "originalCommit": "c7e46f61ec7a2a42c1b876a36b9a3381ebe16235", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTk2MTE5MQ==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r485961191", "bodyText": "I have created a markdown table, as you suggested.\nI left the phase mappings in the types for now, since, IMHO, they are not independent. But if anyone wants to change this across all files, I won't feel offended.\nFor my taste, there are too many type dependencies spread all over the existing code, anyway. It is also not robust agains potential future changes, as it is using fixed offsets instead of OBIS IDs. But I wanted to submit a working delta before starting a major refactoring (if ever :) ).", "author": "uebber", "createdAt": "2020-09-09T22:41:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTkzNzYyOA=="}], "type": "inlineReview"}, {"oid": "1207f3379f933a3e39020db37a030b00550f11c8", "url": "https://github.com/openhab/openhab-addons/commit/1207f3379f933a3e39020db37a030b00550f11c8", "message": "Updated Readme\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-09T22:35:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjA5NjExOQ==", "url": "https://github.com/openhab/openhab-addons/pull/8432#discussion_r486096119", "bodyText": "There is an empty first column?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            |   | Channel     | Description            |\n          \n          \n            \n            |---|-------------|------------------------|\n          \n          \n            \n            |   | powerIn     | Purchased power        |\n          \n          \n            \n            |   | powerInL1   | Purchased power L3     |\n          \n          \n            \n            |   | powerInL2   | Purchased power L2     |\n          \n          \n            \n            |   | powerInL3   | Purchased power L3     |\n          \n          \n            \n            |   | powerOut    | Grid feed-in power     |\n          \n          \n            \n            |   | powerOutL1  | Grid feed-in power L1  |\n          \n          \n            \n            |   | powerOutL2  | Grid feed-in power L2  |\n          \n          \n            \n            |   | powerOutL3  | Grid feed-in power L3  |\n          \n          \n            \n            |   | energyIn    | Purchased energy       |\n          \n          \n            \n            |   | energyInL1  | Purchased energy L1    |\n          \n          \n            \n            |   | energyInL2  | Purchased energy L2    |\n          \n          \n            \n            |   | energyInL3  | Purchased energy L3    |\n          \n          \n            \n            |   | energyOut   | Grid feed-in energy    |\n          \n          \n            \n            |   | energyOutL1 | Grid feed-in energy L1 |\n          \n          \n            \n            |   | energyOutL2 | Grid feed-in energy L2 |\n          \n          \n            \n            |   | energyOutL3 | Grid feed-in energy L3 |\n          \n          \n            \n            | Channel     | Description            |\n          \n          \n            \n            |-------------|------------------------|\n          \n          \n            \n            | powerIn     | Purchased power        |\n          \n          \n            \n            | powerInL1   | Purchased power L3     |\n          \n          \n            \n            | powerInL2   | Purchased power L2     |\n          \n          \n            \n            | powerInL3   | Purchased power L3     |\n          \n          \n            \n            | powerOut    | Grid feed-in power     |\n          \n          \n            \n            | powerOutL1  | Grid feed-in power L1  |\n          \n          \n            \n            | powerOutL2  | Grid feed-in power L2  |\n          \n          \n            \n            | powerOutL3  | Grid feed-in power L3  |\n          \n          \n            \n            | energyIn    | Purchased energy       |\n          \n          \n            \n            | energyInL1  | Purchased energy L1    |\n          \n          \n            \n            | energyInL2  | Purchased energy L2    |\n          \n          \n            \n            | energyInL3  | Purchased energy L3    |\n          \n          \n            \n            | energyOut   | Grid feed-in energy    |\n          \n          \n            \n            | energyOutL1 | Grid feed-in energy L1 |\n          \n          \n            \n            | energyOutL2 | Grid feed-in energy L2 |\n          \n          \n            \n            | energyOutL3 | Grid feed-in energy L3 |", "author": "Hilbrand", "createdAt": "2020-09-10T06:31:55Z", "path": "bundles/org.openhab.binding.smaenergymeter/README.md", "diffHunk": "@@ -22,10 +22,24 @@ Optionally, a refresh interval (in seconds) can be defined.\n \n ## Channels\n \n--   **powerIn** Purchased power &lsqb;W&rsqb;\n--   **powerOut** Grid feed-in power &lsqb;W&rsqb;\n--   **energyIn** Purchased energy &lsqb;kWh&rsqb;\n--   **energyOut** Grid feed-in energy &lsqb;kWh&rsqb;\n+|   | Channel     | Description            |\n+|---|-------------|------------------------|\n+|   | powerIn     | Purchased power        |\n+|   | powerInL1   | Purchased power L3     |\n+|   | powerInL2   | Purchased power L2     |\n+|   | powerInL3   | Purchased power L3     |\n+|   | powerOut    | Grid feed-in power     |\n+|   | powerOutL1  | Grid feed-in power L1  |\n+|   | powerOutL2  | Grid feed-in power L2  |\n+|   | powerOutL3  | Grid feed-in power L3  |\n+|   | energyIn    | Purchased energy       |\n+|   | energyInL1  | Purchased energy L1    |\n+|   | energyInL2  | Purchased energy L2    |\n+|   | energyInL3  | Purchased energy L3    |\n+|   | energyOut   | Grid feed-in energy    |\n+|   | energyOutL1 | Grid feed-in energy L1 |\n+|   | energyOutL2 | Grid feed-in energy L2 |\n+|   | energyOutL3 | Grid feed-in energy L3 |", "originalCommit": "1207f3379f933a3e39020db37a030b00550f11c8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "314c40627a3fb8739b0bda85b6d01f21de8f440d", "url": "https://github.com/openhab/openhab-addons/commit/314c40627a3fb8739b0bda85b6d01f21de8f440d", "message": "Update bundles/org.openhab.binding.smaenergymeter/README.md\r\n\r\nPasst, danke!\n\nCo-authored-by: Hilbrand Bouwkamp <hilbrand@h72.nl>", "committedDate": "2020-09-10T14:29:57Z", "type": "commit"}, {"oid": "1087a7a6b3be458efe4553378f44c5f20e4c6982", "url": "https://github.com/openhab/openhab-addons/commit/1087a7a6b3be458efe4553378f44c5f20e4c6982", "message": "Update bundles/org.openhab.binding.smaenergymeter/README.md\n\nPasst, danke!\n\nCo-authored-by: Hilbrand Bouwkamp <hilbrand@h72.nl>\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-10T14:30:50Z", "type": "commit"}, {"oid": "56ddcbae0f31a69fd20c6a50b89ebb6a91f2a505", "url": "https://github.com/openhab/openhab-addons/commit/56ddcbae0f31a69fd20c6a50b89ebb6a91f2a505", "message": "Merge branch '5919-smaenergymeter_enhancements' of https://github.com/uebber/openhab-addons into 5919-smaenergymeter_enhancements", "committedDate": "2020-09-10T14:31:17Z", "type": "commit"}, {"oid": "5225ece634f2479328412062aebd9bee511ec058", "url": "https://github.com/openhab/openhab-addons/commit/5225ece634f2479328412062aebd9bee511ec058", "message": "Merge branch '5919-smaenergymeter_enhancements' of https://github.com/uebber/openhab-addons into 5919-smaenergymeter_enhancements\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-10T14:32:30Z", "type": "commit"}, {"oid": "7af554f46c4830f093554fb8f5fff370bc1a2e9d", "url": "https://github.com/openhab/openhab-addons/commit/7af554f46c4830f093554fb8f5fff370bc1a2e9d", "message": "Merge branch '5919-smaenergymeter_enhancements' of https://github.com/uebber/openhab-addons into 5919-smaenergymeter_enhancements\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-10T14:34:13Z", "type": "commit"}, {"oid": "7af554f46c4830f093554fb8f5fff370bc1a2e9d", "url": "https://github.com/openhab/openhab-addons/commit/7af554f46c4830f093554fb8f5fff370bc1a2e9d", "message": "Merge branch '5919-smaenergymeter_enhancements' of https://github.com/uebber/openhab-addons into 5919-smaenergymeter_enhancements\n\nSigned-off-by: Christian Uebber <ntnkbtce2km@temp.mailbox.org>", "committedDate": "2020-09-10T14:34:13Z", "type": "forcePushed"}]}