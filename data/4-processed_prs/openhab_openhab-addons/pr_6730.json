{"pr_number": 6730, "pr_title": "[skeleton] Fixed versions in create binding skeleton scripts", "pr_createdAt": "2020-01-01T12:51:54Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/6730", "timeline": [{"oid": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "url": "https://github.com/openhab/openhab-addons/commit/a12c043dd2c12a06c9e8876cd990891702e0a04d", "message": "Fixed versions in create binding skeleton scripts\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-01-01T12:46:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMDM2MA==", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362330360", "bodyText": "According to https://stackoverflow.com/questions/127318/is-there-any-sed-like-utility-for-cmd-exe this @powershell --command \"get-content  org.openhab.binding.%BindingIdInLowerCase%\\src\\main\\feature\\feature.xml | %{$_ -replace \\\"${project.version}\\\",\\\"$[ohc.version\\\"}\" should work", "author": "J-N-K", "createdAt": "2020-01-01T15:55:01Z", "path": "bundles/create_openhab_binding_skeleton.cmd", "diffHunk": "@@ -19,18 +20,20 @@ SET GithubUser=%~3\n \r\n call :LoCase BindingIdInLowerCase\r\n \r\n-call mvn -s archetype-settings.xml archetype:generate -N -DarchetypeGroupId=org.openhab.core.tools.archetypes -DarchetypeArtifactId=org.openhab.core.tools.archetypes.binding -DarchetypeVersion=%OpenhabVersion% -DgroupId=org.openhab.binding -DartifactId=org.openhab.binding.%BindingIdInLowerCase% -Dpackage=org.openhab.binding.%BindingIdInLowerCase% -Dversion=%OpenhabVersion% -DbindingId=%BindingIdInLowerCase% -DbindingIdCamelCase=%BindingIdInCamelCase% -DvendorName=openHAB -Dnamespace=org.openhab -Dauthor=\"%Author%\" -DgithubUser=\"%GithubUser%\"\r\n+call mvn -s archetype-settings.xml archetype:generate -N -DarchetypeGroupId=org.openhab.core.tools.archetypes -DarchetypeArtifactId=org.openhab.core.tools.archetypes.binding -DarchetypeVersion=%OpenhabCoreVersion% -DgroupId=org.openhab.binding -DartifactId=org.openhab.binding.%BindingIdInLowerCase% -Dpackage=org.openhab.binding.%BindingIdInLowerCase% -Dversion=%OpenhabVersion% -DbindingId=%BindingIdInLowerCase% -DbindingIdCamelCase=%BindingIdInCamelCase% -DvendorName=openHAB -Dnamespace=org.openhab -Dauthor=\"%Author%\" -DgithubUser=\"%GithubUser%\"\r\n \r\n COPY ..\\src\\etc\\NOTICE org.openhab.binding.%BindingIdInLowerCase%\\\r\n \r\n+:: temporary fix\r\n+:: TODO replace ${project.version} by ${ohc.version} in src/main/feature/feature.xml\r\n+\r", "originalCommit": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f189380e4abe94bdb866dbfe6fa5a196ae8a93fb", "url": "https://github.com/openhab/openhab-addons/commit/f189380e4abe94bdb866dbfe6fa5a196ae8a93fb", "message": "Added Powershell command to replace variable\n\nSigned-off-by: Christoph Weitkamp <github@christophweitkamp.de>", "committedDate": "2020-01-02T16:06:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMTU2Mw==", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362331563", "bodyText": "This should be just 2.5.0 without SNAPSHOT.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            SET OpenhabCoreVersion=\"2.5.0-SNAPSHOT\"\n          \n          \n            \n            SET OpenhabCoreVersion=\"2.5.0\"", "author": "Hilbrand", "createdAt": "2020-01-01T16:22:21Z", "path": "bundles/create_openhab_binding_skeleton.cmd", "diffHunk": "@@ -10,7 +10,8 @@ IF %ARGC% NEQ 3 (\n \texit /B 1\r\n )\r\n \r\n-SET OpenhabVersion=\"2.5.0-SNAPSHOT\"\r\n+SET OpenhabCoreVersion=\"2.5.0-SNAPSHOT\"\r", "originalCommit": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjMzMTY2Mg==", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362331662", "bodyText": "Same here you can remove SNAPSHOT.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            openHABCoreVersion=2.5.0-SNAPSHOT\n          \n          \n            \n            openHABCoreVersion=2.5.0", "author": "Hilbrand", "createdAt": "2020-01-01T16:24:31Z", "path": "bundles/create_openhab_binding_skeleton.sh", "diffHunk": "@@ -2,7 +2,8 @@\n \n [ $# -lt 3 ] && { echo \"Usage: $0 <BindingIdInCamelCase> <Author> <GitHub Username>\"; exit 1; }\n \n-openHABVersion=2.5.0-SNAPSHOT\n+openHABCoreVersion=2.5.0-SNAPSHOT", "originalCommit": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjQ0MDc5OQ==", "url": "https://github.com/openhab/openhab-addons/pull/6730#discussion_r362440799", "bodyText": "I would drop creating a .bak file. It's only confusing and will probably lead to people committing that file too\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            sed -i'.bak' -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"\n          \n          \n            \n            sed -i -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"", "author": "Hilbrand", "createdAt": "2020-01-02T11:18:46Z", "path": "bundles/create_openhab_binding_skeleton.sh", "diffHunk": "@@ -29,3 +30,6 @@ directory=\"org.openhab.binding.$id/\"\n \n cp ../src/etc/NOTICE \"$directory\"\n \n+# temporary fix\n+sed -i'.bak' -e \"s|\\-core\\/\\${project.version}|\\-core\\/\\${ohc.version}|g\" \"$directory/src/main/feature/feature.xml\"", "originalCommit": "a12c043dd2c12a06c9e8876cd990891702e0a04d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a5d01d14d80b4b20868a6c120dad9a8612859b3e", "url": "https://github.com/openhab/openhab-addons/commit/a5d01d14d80b4b20868a6c120dad9a8612859b3e", "message": "fix windows replace in feature (#3)\n\nSigned-off-by: Jan N. Klug <jan.n.klug@rub.de>", "committedDate": "2020-01-03T13:07:32Z", "type": "commit"}, {"oid": "3f44a10d15c7c2213df30d6dee744c918c9d8666", "url": "https://github.com/openhab/openhab-addons/commit/3f44a10d15c7c2213df30d6dee744c918c9d8666", "message": "Update bundles/create_openhab_binding_skeleton.cmd\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>", "committedDate": "2020-01-03T13:08:51Z", "type": "commit"}, {"oid": "7d782745d7b19b57aa72494f11954688d1c2a982", "url": "https://github.com/openhab/openhab-addons/commit/7d782745d7b19b57aa72494f11954688d1c2a982", "message": "Update bundles/create_openhab_binding_skeleton.sh\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>", "committedDate": "2020-01-03T13:08:58Z", "type": "commit"}, {"oid": "31c388234890ab0a303862b426272e42a6446e6e", "url": "https://github.com/openhab/openhab-addons/commit/31c388234890ab0a303862b426272e42a6446e6e", "message": "Update bundles/create_openhab_binding_skeleton.sh\r\n\r\nChristoph Weitkamp <github@christophweitkamp.de>\n\nCo-Authored-By: Hilbrand Bouwkamp <hilbrand@h72.nl>", "committedDate": "2020-01-03T13:09:20Z", "type": "commit"}]}