{"pr_number": 9602, "pr_title": "[daikin] add energy usage day & week", "pr_createdAt": "2020-12-30T15:38:17Z", "pr_url": "https://github.com/openhab/openhab-addons/pull/9602", "timeline": [{"oid": "8faf850fc29aa76b67a915c09503d312063e4b65", "url": "https://github.com/openhab/openhab-addons/commit/8faf850fc29aa76b67a915c09503d312063e4b65", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T15:56:46Z", "type": "forcePushed"}, {"oid": "056afe6f1a52f554ae6750c009c109a6f7005803", "url": "https://github.com/openhab/openhab-addons/commit/056afe6f1a52f554ae6750c009c109a6f7005803", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T16:17:17Z", "type": "forcePushed"}, {"oid": "43349c17a07b98e87e05522ad91b2215cc0e2194", "url": "https://github.com/openhab/openhab-addons/commit/43349c17a07b98e87e05522ad91b2215cc0e2194", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T16:21:11Z", "type": "forcePushed"}, {"oid": "2f04c0c970e89e74467dd02c75812104cb6b5c3b", "url": "https://github.com/openhab/openhab-addons/commit/2f04c0c970e89e74467dd02c75812104cb6b5c3b", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T16:30:18Z", "type": "forcePushed"}, {"oid": "c44b6c1c6a9466a7466472e0a41379d1f2b26524", "url": "https://github.com/openhab/openhab-addons/commit/c44b6c1c6a9466a7466472e0a41379d1f2b26524", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T16:34:56Z", "type": "forcePushed"}, {"oid": "e064b1e342c5fcb9c620cb86877a9cc11c8c1b3d", "url": "https://github.com/openhab/openhab-addons/commit/e064b1e342c5fcb9c620cb86877a9cc11c8c1b3d", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-30T16:39:57Z", "type": "forcePushed"}, {"oid": "83a1066a6522a26b8de81b745ac5bd8695878eb2", "url": "https://github.com/openhab/openhab-addons/commit/83a1066a6522a26b8de81b745ac5bd8695878eb2", "message": "add energy usage day & week\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-31T10:01:02Z", "type": "commit"}, {"oid": "c2c7bd1085c31c122b32fe85d146099f8d65376c", "url": "https://github.com/openhab/openhab-addons/commit/c2c7bd1085c31c122b32fe85d146099f8d65376c", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-31T10:03:56Z", "type": "commit"}, {"oid": "c2e6a953e5e34ff1247b50f46888acbe895a0fec", "url": "https://github.com/openhab/openhab-addons/commit/c2e6a953e5e34ff1247b50f46888acbe895a0fec", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-31T10:03:56Z", "type": "commit"}, {"oid": "c2e6a953e5e34ff1247b50f46888acbe895a0fec", "url": "https://github.com/openhab/openhab-addons/commit/c2e6a953e5e34ff1247b50f46888acbe895a0fec", "message": "updated readme\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-31T10:03:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NTkzOQ==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550485939", "bodyText": "The email adress shouldn't be part of the athor tag.", "author": "fwolter", "createdAt": "2020-12-31T13:43:24Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/api/EnergyInfoDayAndWeek.java", "diffHunk": "@@ -0,0 +1,104 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.daikin.internal.api;\n+\n+import java.util.Arrays;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Holds information from the get_week_power_ex call.\n+ *\n+ * @author Wouter Denayer <wouter@denayer.com> - Added to support for weekly & daily energy reading", "originalCommit": "c2e6a953e5e34ff1247b50f46888acbe895a0fec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ5MjgxNA==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550492814", "bodyText": "no problem to remove, it does seem to be very frequent that email is added (cf other source files in this same binding)", "author": "gitwouter", "createdAt": "2020-12-31T14:21:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NTkzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NjE5NQ==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550486195", "bodyText": "Can this message be replaced by using the debugger or by increasing the framework's log level? See point 4 https://www.openhab.org/docs/developer/guidelines.html#f-logging", "author": "fwolter", "createdAt": "2020-12-31T13:44:14Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/api/EnergyInfoDayAndWeek.java", "diffHunk": "@@ -0,0 +1,104 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.daikin.internal.api;\n+\n+import java.util.Arrays;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Holds information from the get_week_power_ex call.\n+ *\n+ * @author Wouter Denayer <wouter@denayer.com> - Added to support for weekly & daily energy reading\n+ *\n+ */\n+@NonNullByDefault\n+public class EnergyInfoDayAndWeek {\n+    public Optional<Double> energyHeatingToday = Optional.empty();\n+    public Optional<Double> energyHeatingThisWeek = Optional.empty();\n+    public Optional<Double> energyHeatingLastWeek = Optional.empty();\n+    public Optional<Double> energyCoolingToday = Optional.empty();\n+    public Optional<Double> energyCoolingThisWeek = Optional.empty();\n+    public Optional<Double> energyCoolingLastWeek = Optional.empty();\n+\n+    private static final Logger logger = LoggerFactory.getLogger(EnergyInfoDayAndWeek.class);\n+\n+    private EnergyInfoDayAndWeek() {\n+    }\n+\n+    public static EnergyInfoDayAndWeek parse(String response) {\n+\n+        EnergyInfoDayAndWeek info = new EnergyInfoDayAndWeek();\n+\n+        logger.debug(\"Parsing string: \\\"{}\\\"\", response);", "originalCommit": "c2e6a953e5e34ff1247b50f46888acbe895a0fec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ5MzE4Mg==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550493182", "bodyText": "agree, this should be trace level probably. Will change it in EnergyInfoYear as well.", "author": "gitwouter", "createdAt": "2020-12-31T14:23:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NjE5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUwMDEzMw==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550500133", "bodyText": "It seems to me that this output is only needed during development. Can you use the debugger if you want to inspect it?", "author": "fwolter", "createdAt": "2020-12-31T15:01:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NjE5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDUyNzc5Nw==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r550527797", "bodyText": "well.. I can't... haven't worked with the debugger. I guess it should be possible. It's only one line, so why not keep it in trace?", "author": "gitwouter", "createdAt": "2020-12-31T16:20:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDQ4NjE5NQ=="}], "type": "inlineReview"}, {"oid": "8758b1dc3f754e6585540ac43a7e5f7b017b67d5", "url": "https://github.com/openhab/openhab-addons/commit/8758b1dc3f754e6585540ac43a7e5f7b017b67d5", "message": "removed email from @author, set log lvl to trace for parsed strings\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2020-12-31T14:26:34Z", "type": "commit"}, {"oid": "c003ab5fd2b79fc62a838d5322ade1120bc7404a", "url": "https://github.com/openhab/openhab-addons/commit/c003ab5fd2b79fc62a838d5322ade1120bc7404a", "message": "fixed some some checkstyle warnings\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2021-01-07T12:12:13Z", "type": "commit"}, {"oid": "81e3ad21e71ffc63679694cd304a43dae1d81408", "url": "https://github.com/openhab/openhab-addons/commit/81e3ad21e71ffc63679694cd304a43dae1d81408", "message": "addressed some checkstyle warnings\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2021-01-14T09:11:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MDMxMzkwNw==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r580313907", "bodyText": "This should fix the build:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Copyright (c) 2010-2020 Contributors to the openHAB project\n          \n          \n            \n             * Copyright (c) 2010-2021 Contributors to the openHAB project", "author": "wborn", "createdAt": "2021-02-22T14:56:08Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/api/EnergyInfoDayAndWeek.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/**\n+ * Copyright (c) 2010-2020 Contributors to the openHAB project", "originalCommit": "81e3ad21e71ffc63679694cd304a43dae1d81408", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ed189716510d270ce9e6bd5a11534eaa8a2e20e5", "url": "https://github.com/openhab/openhab-addons/commit/ed189716510d270ce9e6bd5a11534eaa8a2e20e5", "message": "updated copyright to 2021\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2021-02-23T13:37:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDMzOA==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r581314338", "bodyText": "Are these public by intention?", "author": "fwolter", "createdAt": "2021-02-23T19:09:46Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/api/EnergyInfoDayAndWeek.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.daikin.internal.api;\n+\n+import java.util.Arrays;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Holds information from the get_week_power_ex call.\n+ *\n+ * @author Wouter Denayer - Initial contribution\n+ *\n+ */\n+@NonNullByDefault\n+public class EnergyInfoDayAndWeek {\n+    public Optional<Double> energyHeatingToday = Optional.empty();\n+    public Optional<Double> energyHeatingThisWeek = Optional.empty();\n+    public Optional<Double> energyHeatingLastWeek = Optional.empty();\n+    public Optional<Double> energyCoolingToday = Optional.empty();\n+    public Optional<Double> energyCoolingThisWeek = Optional.empty();\n+    public Optional<Double> energyCoolingLastWeek = Optional.empty();", "originalCommit": "ed189716510d270ce9e6bd5a11534eaa8a2e20e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzQ5OTczOA==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r587499738", "bodyText": "it is the same in the other similar classes in this binding", "author": "gitwouter", "createdAt": "2021-03-04T14:10:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4NzY0MjcyNA==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r587642724", "bodyText": "If they don't need to be public, you could make them private, too.", "author": "fwolter", "createdAt": "2021-03-04T16:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODg2Mjk2MQ==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r588862961", "bodyText": "it has to be public", "author": "gitwouter", "createdAt": "2021-03-06T10:09:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDMzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODg3MjkxMA==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r588872910", "bodyText": "Fields shouldn't be accessed directly by other classes. You can generate the necessary getters with Alt-Shift-S, R in eclipse.", "author": "fwolter", "createdAt": "2021-03-06T11:51:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDMzOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4MTMxNDY4NQ==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r581314685", "bodyText": "As the logger is static now, the field name should be all uppercase.", "author": "fwolter", "createdAt": "2021-02-23T19:10:16Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/api/EnergyInfoDayAndWeek.java", "diffHunk": "@@ -0,0 +1,101 @@\n+/**\n+ * Copyright (c) 2010-2021 Contributors to the openHAB project\n+ *\n+ * See the NOTICE file(s) distributed with this work for additional\n+ * information.\n+ *\n+ * This program and the accompanying materials are made available under the\n+ * terms of the Eclipse Public License 2.0 which is available at\n+ * http://www.eclipse.org/legal/epl-2.0\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ */\n+package org.openhab.binding.daikin.internal.api;\n+\n+import java.util.Arrays;\n+import java.util.Map;\n+import java.util.Optional;\n+import java.util.stream.Collectors;\n+\n+import org.eclipse.jdt.annotation.NonNullByDefault;\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+/**\n+ * Holds information from the get_week_power_ex call.\n+ *\n+ * @author Wouter Denayer - Initial contribution\n+ *\n+ */\n+@NonNullByDefault\n+public class EnergyInfoDayAndWeek {\n+    public Optional<Double> energyHeatingToday = Optional.empty();\n+    public Optional<Double> energyHeatingThisWeek = Optional.empty();\n+    public Optional<Double> energyHeatingLastWeek = Optional.empty();\n+    public Optional<Double> energyCoolingToday = Optional.empty();\n+    public Optional<Double> energyCoolingThisWeek = Optional.empty();\n+    public Optional<Double> energyCoolingLastWeek = Optional.empty();\n+\n+    private static final Logger logger = LoggerFactory.getLogger(EnergyInfoDayAndWeek.class);", "originalCommit": "ed189716510d270ce9e6bd5a11534eaa8a2e20e5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0eb2b8c5d8a4df9acce706b3e1004c78426d8461", "url": "https://github.com/openhab/openhab-addons/commit/0eb2b8c5d8a4df9acce706b3e1004c78426d8461", "message": "made private static final Logger logger uppercase\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2021-03-03T08:24:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU4ODg3MjYwMg==", "url": "https://github.com/openhab/openhab-addons/pull/9602#discussion_r588872602", "bodyText": "As this logger is not static, it must be lower case.", "author": "fwolter", "createdAt": "2021-03-06T11:48:20Z", "path": "bundles/org.openhab.binding.daikin/src/main/java/org/openhab/binding/daikin/internal/handler/DaikinAcUnitHandler.java", "diffHunk": "@@ -49,12 +51,14 @@\n  * Handles communicating with a Daikin air conditioning unit.\n  *\n  * @author Tim Waterhouse - Initial Contribution\n- * @author Paul Smedley <paul@smedley.id.au> - Modifications to support Airbase Controllers\n+ * @author Paul Smedley - Modifications to support Airbase Controllers\n  * @author Lukas Agethen - Added support for Energy Year reading, compressor frequency and powerful mode\n+ * @author Wouter Denayer - Added to support for weekly & daily energy reading\n+ * \n  */\n @NonNullByDefault\n public class DaikinAcUnitHandler extends DaikinBaseHandler {\n-    private final Logger logger = LoggerFactory.getLogger(DaikinAcUnitHandler.class);\n+    private final Logger LOGGER = LoggerFactory.getLogger(DaikinAcUnitHandler.class);", "originalCommit": "0eb2b8c5d8a4df9acce706b3e1004c78426d8461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5f45b11a80ba49af037a1b83d769a2b2ab578364", "url": "https://github.com/openhab/openhab-addons/commit/5f45b11a80ba49af037a1b83d769a2b2ab578364", "message": "made this logger lowercase again\n\nSigned-off-by: Wouter Denayer <wouter@denayer.com>", "committedDate": "2021-03-06T15:38:42Z", "type": "commit"}]}