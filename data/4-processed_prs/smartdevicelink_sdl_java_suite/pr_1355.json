{"pr_number": 1355, "pr_title": "iOS alignment/lock screen", "pr_createdAt": "2020-05-19T19:44:13Z", "pr_url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355", "timeline": [{"oid": "a2f4d4d7ec5c7e3b84e83293e1a54a1528a739d5", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a2f4d4d7ec5c7e3b84e83293e1a54a1528a739d5", "message": "Changes LocScreen Icon to align with iOS", "committedDate": "2020-05-19T19:39:41Z", "type": "commit"}, {"oid": "01020dbf402f4200f257e6a09b0256a9409411ee", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/01020dbf402f4200f257e6a09b0256a9409411ee", "message": "Fixed issue with TextColor for warning message", "committedDate": "2020-05-19T20:52:10Z", "type": "commit"}, {"oid": "fa501a41a2b296963b0d62686c31047d106f6701", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/fa501a41a2b296963b0d62686c31047d106f6701", "message": "Fixed Formatting", "committedDate": "2020-05-19T20:54:04Z", "type": "commit"}, {"oid": "38324c820fb86cb842e0b42a886db5afb0f8b6fa", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/38324c820fb86cb842e0b42a886db5afb0f8b6fa", "message": "Updated Icon scaling", "committedDate": "2020-05-20T21:08:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4MjQxNA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431282414", "bodyText": "Do we typically reference stack overflow in the code like this?", "author": "RHenigan", "createdAt": "2020-05-27T16:35:14Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -158,19 +168,85 @@ public void initializeActivity(Intent intent){\n \t\t\t\tString warningMsg = intent.getStringExtra(KEY_LOCKSCREEN_WARNING_MSG);\n \t\t\t\tif (mIsDismissible) {\n \t\t\t\t\tsetLockscreenWarningMessage(warningMsg);\n+\t\t\t\t} else if (!useWhiteIconAndTextColor) {\n+\t\t\t\t\tsetTextColorBlack();\n \t\t\t\t}\n \t\t\t}\n \t\t}\n \t}\n \n-\tprivate void changeBackgroundColor(int customColor) {\n+\t/**\n+\t *  Sets the lockScreen logo\n+\t */\n+\tprivate void setSdlLogo() {\n+\t\tImageView lockScreen_iv = findViewById(R.id.lockscreen_image);\n+\t\tDrawable sdlIcon = getResources().getDrawable(R.drawable.sdl_lockscreen_icon);\n+\t\t// Checks color contrast and determines if the logo should be black or white\n+\t\tif (useWhiteIconAndTextColor) {\n+\t\t\tint color = Color.parseColor(\"#ffffff\");\n+\n+\t\t\tint red = (color & 0xFF0000) / 0xFFFF;\n+\t\t\tint green = (color & 0xFF00) / 0xFF;\n+\t\t\tint blue = color & 0xFF;\n+\n+\t\t\tfloat[] matrix = {0, 0, 0, 0, red,\n+\t\t\t\t\t0, 0, 0, 0, green,\n+\t\t\t\t\t0, 0, 0, 0, blue,\n+\t\t\t\t\t0, 0, 0, 1, 0};\n+\n+\t\t\tColorFilter colorFilter = new ColorMatrixColorFilter(matrix);\n+\t\t\tsdlIcon.setColorFilter(colorFilter);\n+\t\t}\n+\t\tlockScreen_iv.setImageDrawable(sdlIcon);\n+\t}\n+\n+\t/**\n+\t * Changes the text color to white on the lockScreen\n+\t */\n+\tprivate void setTextColorBlack() {\n+\t\tTextView tv = findViewById(R.id.lockscreen_text);\n+\t\ttv.setTextColor(Color.parseColor(\"#000000\"));\n+\t}\n+\n+\t/**\n+\t *  Calculates the contrast of the background to determine if the Icon and Text color\n+\t *  should be white or black\n+\t * @return True if Background and Icon should be white, False if black\n+\t */\n+\tprivate boolean shouldUseWhiteForegroundForBackgroundColor() {\n+\t\tfloat r = Color.red(backgroundColor) / 255f;\n+\t\tfloat b = Color.blue(backgroundColor) / 255f;\n+\t\tfloat g = Color.green(backgroundColor) / 255f;\n+\n+\t\t// http://stackoverflow.com/a/3943023", "originalCommit": "38324c820fb86cb842e0b42a886db5afb0f8b6fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxNDg2NA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431314864", "bodyText": "This code was pulled from IOS and minor changes were made to convert to Java. Since IOS has it, I left it", "author": "JulianKast", "createdAt": "2020-05-27T17:24:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4MjQxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431286646", "bodyText": "Should \"#394e60\" be some sort of magic number? or maybe we can name backgroundColor something like defaultBackgroundColor", "author": "RHenigan", "createdAt": "2020-05-27T16:40:14Z", "path": "android/sdl_android/src/main/java/com/smartdevicelink/managers/lockscreen/SDLLockScreenActivity.java", "diffHunk": "@@ -64,6 +69,9 @@\n \tprivate static final int MIN_SWIPE_DISTANCE = 200;\n \tprivate boolean mIsDismissible;\n \tprivate GestureDetector mGestureDetector;\n+\tprivate int backgroundColor = Color.parseColor(\"#394e60\");", "originalCommit": "38324c820fb86cb842e0b42a886db5afb0f8b6fa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMxNTY4OQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r431315689", "bodyText": "\"394e60\" is the default color, That can be changed if a custom color is set in initialzeActivity(). Before it was set in the XML but due to limitations with having to support older version of Android, I had to put it in the activity. Since the variable can be either a custom color or the default I think leaving it as backgroundColor is appropriate", "author": "JulianKast", "createdAt": "2020-05-27T17:25:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjYwNTkyMA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1355#discussion_r432605920", "bodyText": "Agreed, I was missing some of the context", "author": "RHenigan", "createdAt": "2020-05-29T16:41:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTI4NjY0Ng=="}], "type": "inlineReview"}]}