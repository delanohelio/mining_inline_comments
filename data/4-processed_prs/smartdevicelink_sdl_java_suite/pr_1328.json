{"pr_number": 1328, "pr_title": "Inconsistencies in ScreenManager behavior if displayCapabilities is null & revisions", "pr_createdAt": "2020-04-02T15:24:33Z", "pr_url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328", "timeline": [{"oid": "116310d0c6887ed19fc2f7c433e3d15a92945c22", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/116310d0c6887ed19fc2f7c433e3d15a92945c22", "message": "Fixed WindowCapability logic in BaseText and graphic manager", "committedDate": "2020-03-19T16:07:54Z", "type": "commit"}, {"oid": "fcf53125f5f2337063b90e0906436f49e3d1bd1b", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/fcf53125f5f2337063b90e0906436f49e3d1bd1b", "message": "Fixed spacing", "committedDate": "2020-03-19T16:13:12Z", "type": "commit"}, {"oid": "53da44d5a6cd6d49ff4ff018f0e509363eb9ef15", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/53da44d5a6cd6d49ff4ff018f0e509363eb9ef15", "message": "Made to look like IOS", "committedDate": "2020-03-19T19:26:08Z", "type": "commit"}, {"oid": "11ed30768b2d5438b47c8dcb249e0f607b5ddb79", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/11ed30768b2d5438b47c8dcb249e0f607b5ddb79", "message": "Merge branch 'develop' into bugfix/issue_1310", "committedDate": "2020-03-20T20:00:11Z", "type": "commit"}, {"oid": "bd7112bc97bbc95bd92dc0b8e529f721c89d7b8c", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/bd7112bc97bbc95bd92dc0b8e529f721c89d7b8c", "message": "Remove unnecessary check", "committedDate": "2020-03-20T20:29:39Z", "type": "commit"}, {"oid": "d23deada8e8b224a20b69b990d6d521f7a09a3a9", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/d23deada8e8b224a20b69b990d6d521f7a09a3a9", "message": "Fixed unit test", "committedDate": "2020-03-20T20:53:05Z", "type": "commit"}, {"oid": "bdf850d41c1bcaeceac672e2645000df78cab78a", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/bdf850d41c1bcaeceac672e2645000df78cab78a", "message": "Added three methods to WindowCapability  to be used in managers of the ScreenManager\n\nhasImageFieldOfName,  hasTextFieldOfName, getMaxNumberOfMainFieldLines", "committedDate": "2020-03-25T20:50:47Z", "type": "commit"}, {"oid": "9ad10826080a790a289ad65dc50ceb94549b23ea", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/9ad10826080a790a289ad65dc50ceb94549b23ea", "message": "Aligned how java uses WindowCapability  in TextAndGraphicManager  with IOS", "committedDate": "2020-03-25T21:12:05Z", "type": "commit"}, {"oid": "765e47d5e6ad8a3f15e9e8b26f36bc496f973567", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/765e47d5e6ad8a3f15e9e8b26f36bc496f973567", "message": "removed redudant checks in BaseTextAndGraphicManager", "committedDate": "2020-03-26T16:43:24Z", "type": "commit"}, {"oid": "09fcf0f743b7dca4075aeefd548e9b3c4b9b76c7", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/09fcf0f743b7dca4075aeefd548e9b3c4b9b76c7", "message": "Updated MenuManager handling of WindowCapability to align with IOS", "committedDate": "2020-03-26T19:18:04Z", "type": "commit"}, {"oid": "59570247015a05d9b50bb40aa1b023ab22636798", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/59570247015a05d9b50bb40aa1b023ab22636798", "message": "Added ManagerUtility to extend capabilities of WindowCapability, Removed added methods from WindowCapability and added them to ManagerUtility.WindowCapabilityUtility", "committedDate": "2020-03-27T14:58:30Z", "type": "commit"}, {"oid": "52961a90dfb932598a09938f280afc9f58dfec0a", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/52961a90dfb932598a09938f280afc9f58dfec0a", "message": "Deprecated hasTextFieldOfName and hasImageFieldOfName, changed where they were used to use ManagerUtility.WindowCapability methods", "committedDate": "2020-03-27T15:22:28Z", "type": "commit"}, {"oid": "153f02cc27178335306bf76f721e8683c41acfb1", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/153f02cc27178335306bf76f721e8683c41acfb1", "message": "Changed logic to use new Class and methods in ManagerUtility.WindowCapabilityUtility", "committedDate": "2020-03-27T15:25:00Z", "type": "commit"}, {"oid": "08dc7ac1e4a295a75c1a0f217e18714b68a81e31", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/08dc7ac1e4a295a75c1a0f217e18714b68a81e31", "message": "Moved ManagerUtility class and created symlink", "committedDate": "2020-03-27T16:54:32Z", "type": "commit"}, {"oid": "3343aa6cf322504a7a27916fdff870bbe3d43571", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/3343aa6cf322504a7a27916fdff870bbe3d43571", "message": "Fixing imports for ManagerUtility", "committedDate": "2020-03-27T18:19:35Z", "type": "commit"}, {"oid": "ae388d20cb559419a045208052be47ad149ad8c5", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/ae388d20cb559419a045208052be47ad149ad8c5", "message": "Removed Method that was added by mistake", "committedDate": "2020-03-27T18:33:11Z", "type": "commit"}, {"oid": "97f081340b9441226b76118a76563c896c6ab299", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/97f081340b9441226b76118a76563c896c6ab299", "message": "removed unused import", "committedDate": "2020-03-27T19:13:30Z", "type": "commit"}, {"oid": "165da413a858ebc8bca20d48b4eac8dec9e33c52", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/165da413a858ebc8bca20d48b4eac8dec9e33c52", "message": "Moved this class to base managers", "committedDate": "2020-03-27T19:17:21Z", "type": "commit"}, {"oid": "f1e233d5a2a97f591843d4e6b94b26957370ee42", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f1e233d5a2a97f591843d4e6b94b26957370ee42", "message": "Fixed logic for unit test", "committedDate": "2020-03-27T20:05:46Z", "type": "commit"}, {"oid": "a094e7ac754bc540316d712863fcacb129394fe3", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/a094e7ac754bc540316d712863fcacb129394fe3", "message": "Fixed preloadChoicOperation logic for WindowCapability", "committedDate": "2020-03-27T20:58:04Z", "type": "commit"}, {"oid": "838a524fa0d3d9bf83b9d540b0f1d3c05fc1ec79", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/838a524fa0d3d9bf83b9d540b0f1d3c05fc1ec79", "message": "Added check back that checks if capability is null", "committedDate": "2020-03-29T23:04:56Z", "type": "commit"}, {"oid": "4f7cab824d6d8a5d87fc9c80ca3d50a4b25c31bc", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/4f7cab824d6d8a5d87fc9c80ca3d50a4b25c31bc", "message": "Fixed Test for MenuManager: testSetMenuConfiguration", "committedDate": "2020-03-29T23:24:19Z", "type": "commit"}, {"oid": "3e62843b558c60cae3046cb76dacb9d5b7358110", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/3e62843b558c60cae3046cb76dacb9d5b7358110", "message": "Added test for nonNullCapability", "committedDate": "2020-03-30T13:09:11Z", "type": "commit"}, {"oid": "dff4bc53989d8f2caf2f5eca60c132d7d9602b38", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/dff4bc53989d8f2caf2f5eca60c132d7d9602b38", "message": "Fixed unit Test for TextandGraphicManager", "committedDate": "2020-03-30T14:36:17Z", "type": "commit"}, {"oid": "eb4efc5aaa40e0fa70d1972538f18a45d78fdbb4", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/eb4efc5aaa40e0fa70d1972538f18a45d78fdbb4", "message": "Adding javaDocs", "committedDate": "2020-03-30T15:12:43Z", "type": "commit"}, {"oid": "45c8c3bc4814b69229a17be2f3079aa86f6b44dd", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/45c8c3bc4814b69229a17be2f3079aa86f6b44dd", "message": "Added unit test to PreloadChoicesOperation", "committedDate": "2020-03-30T16:43:24Z", "type": "commit"}, {"oid": "0af803c2a248dcd423d20f05aed055b052df7b34", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0af803c2a248dcd423d20f05aed055b052df7b34", "message": "Removed old test that get covered in newly added test testShouldSendText", "committedDate": "2020-03-30T16:55:21Z", "type": "commit"}, {"oid": "b7a30c2dcbb7fe62013f1d94a2b1c2863be47842", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/b7a30c2dcbb7fe62013f1d94a2b1c2863be47842", "message": "Removed unused imports", "committedDate": "2020-03-30T17:13:40Z", "type": "commit"}, {"oid": "eae8aa958b27737146d7781c90563a15f4d3d85b", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/eae8aa958b27737146d7781c90563a15f4d3d85b", "message": "Update getMaxNumberOfMainFieldLines to align with iOS", "committedDate": "2020-04-02T14:15:41Z", "type": "commit"}, {"oid": "13844194574ca4c1d8307684523a30cd54a43d36", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/13844194574ca4c1d8307684523a30cd54a43d36", "message": "Update ManagerUtility formatting", "committedDate": "2020-04-02T14:26:15Z", "type": "commit"}, {"oid": "f4e5c312044e3a97daa865a54a9ed628174dba3f", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f4e5c312044e3a97daa865a54a9ed628174dba3f", "message": "Update T&G manager capability handling to align with iOS", "committedDate": "2020-04-02T15:20:31Z", "type": "commit"}, {"oid": "2f66c5c56d45801a6313d25d14f0939ca228147d", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/2f66c5c56d45801a6313d25d14f0939ca228147d", "message": "Update supportsImages", "committedDate": "2020-04-02T19:18:18Z", "type": "commit"}, {"oid": "c744b2d7d4902ed0ff9a6b8ecc2695be6cd3d901", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/c744b2d7d4902ed0ff9a6b8ecc2695be6cd3d901", "message": "Update setMenuConfiguration", "committedDate": "2020-04-02T19:44:47Z", "type": "commit"}, {"oid": "0d735b1079bed06c6c400991e9b0f758e7b30d5f", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0d735b1079bed06c6c400991e9b0f758e7b30d5f", "message": "Update ChoiceSetManager capability handling", "committedDate": "2020-04-02T21:00:57Z", "type": "commit"}, {"oid": "3c99b27d2600a3dfa1ce16011d012c9ed45f7b03", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/3c99b27d2600a3dfa1ce16011d012c9ed45f7b03", "message": "Fix ChoiceSetManager unit tests", "committedDate": "2020-04-03T13:37:12Z", "type": "commit"}, {"oid": "0cbcceac20dd4bf179f3ac42021e9364849e61c2", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0cbcceac20dd4bf179f3ac42021e9364849e61c2", "message": "Fixing space issue", "committedDate": "2020-04-03T16:45:26Z", "type": "commit"}, {"oid": "9761aab7668d3546efd0750f9c276efb1925daa2", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/9761aab7668d3546efd0750f9c276efb1925daa2", "message": "Remove some duplicate code from TextAndGraphicManager", "committedDate": "2020-04-08T14:35:27Z", "type": "commit"}, {"oid": "0f045661724a7100fbb6890a3277da46aed3a36d", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/0f045661724a7100fbb6890a3277da46aed3a36d", "message": "Remove duplicate code from PreloadChoicesOperation", "committedDate": "2020-04-08T14:45:56Z", "type": "commit"}, {"oid": "40ed2d11522da4529c645b5df05df0fedd8769e1", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/40ed2d11522da4529c645b5df05df0fedd8769e1", "message": "Simplify some helper methods in screen manager", "committedDate": "2020-04-08T15:14:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI2OTEyMA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406269120", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (windowCapability == null) {\n          \n          \n            \n                        if (windowCapability == null || name == null) {", "author": "joeygrover", "createdAt": "2020-04-09T15:00:27Z", "path": "base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java", "diffHunk": "@@ -0,0 +1,86 @@\n+package com.smartdevicelink.managers;\n+\n+import com.smartdevicelink.proxy.rpc.ImageField;\n+import com.smartdevicelink.proxy.rpc.TextField;\n+import com.smartdevicelink.proxy.rpc.WindowCapability;\n+import com.smartdevicelink.proxy.rpc.enums.ImageFieldName;\n+import com.smartdevicelink.proxy.rpc.enums.TextFieldName;\n+\n+/**\n+ * <strong>ManagerUtility</strong> <br>\n+ * <p>\n+ * Static Methods to be used throughout the Manager classes <br>\n+ */\n+public class ManagerUtility {\n+\n+    public static class WindowCapabilityUtility {\n+\n+        /**\n+         * Check to see if WindowCapability has an ImageFieldName of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name ImageFieldName representing a name of a given Image field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasImageFieldOfName(WindowCapability windowCapability, ImageFieldName name) {\n+            if (windowCapability == null) {", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3MDE3OQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406270179", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if (field != null && field.getName() != null && field.getName().equals(name)) {\n          \n          \n            \n                                if (field != null && name.equals(field.getName())) {", "author": "joeygrover", "createdAt": "2020-04-09T15:02:01Z", "path": "base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java", "diffHunk": "@@ -0,0 +1,86 @@\n+package com.smartdevicelink.managers;\n+\n+import com.smartdevicelink.proxy.rpc.ImageField;\n+import com.smartdevicelink.proxy.rpc.TextField;\n+import com.smartdevicelink.proxy.rpc.WindowCapability;\n+import com.smartdevicelink.proxy.rpc.enums.ImageFieldName;\n+import com.smartdevicelink.proxy.rpc.enums.TextFieldName;\n+\n+/**\n+ * <strong>ManagerUtility</strong> <br>\n+ * <p>\n+ * Static Methods to be used throughout the Manager classes <br>\n+ */\n+public class ManagerUtility {\n+\n+    public static class WindowCapabilityUtility {\n+\n+        /**\n+         * Check to see if WindowCapability has an ImageFieldName of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name ImageFieldName representing a name of a given Image field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasImageFieldOfName(WindowCapability windowCapability, ImageFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getImageFields() != null) {\n+                for (ImageField field : windowCapability.getImageFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3MDY0Mg==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406270642", "bodyText": "If we add the null check to name above, we can avoid the null check to field.getName().", "author": "joeygrover", "createdAt": "2020-04-09T15:02:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3MDE3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3Mjg1Mg==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406272852", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        if (windowCapability == null) {\n          \n          \n            \n                        if (windowCapability == null || name == null) {", "author": "joeygrover", "createdAt": "2020-04-09T15:05:52Z", "path": "base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java", "diffHunk": "@@ -0,0 +1,86 @@\n+package com.smartdevicelink.managers;\n+\n+import com.smartdevicelink.proxy.rpc.ImageField;\n+import com.smartdevicelink.proxy.rpc.TextField;\n+import com.smartdevicelink.proxy.rpc.WindowCapability;\n+import com.smartdevicelink.proxy.rpc.enums.ImageFieldName;\n+import com.smartdevicelink.proxy.rpc.enums.TextFieldName;\n+\n+/**\n+ * <strong>ManagerUtility</strong> <br>\n+ * <p>\n+ * Static Methods to be used throughout the Manager classes <br>\n+ */\n+public class ManagerUtility {\n+\n+    public static class WindowCapabilityUtility {\n+\n+        /**\n+         * Check to see if WindowCapability has an ImageFieldName of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name ImageFieldName representing a name of a given Image field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasImageFieldOfName(WindowCapability windowCapability, ImageFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getImageFields() != null) {\n+                for (ImageField field : windowCapability.getImageFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {\n+                        return true;\n+                    }\n+                }\n+            }\n+            return false;\n+        }\n+\n+        /**\n+         * Check to see if WindowCapability has a textField of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name TextFieldName representing a name of a given text field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasTextFieldOfName(WindowCapability windowCapability, TextFieldName name) {\n+            if (windowCapability == null) {", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI3MzIxMQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406273211", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                if (field != null && field.getName() != null && field.getName().equals(name)) {\n          \n          \n            \n                                if (field != null && name.equals(field.getName())) {", "author": "joeygrover", "createdAt": "2020-04-09T15:06:24Z", "path": "base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java", "diffHunk": "@@ -0,0 +1,86 @@\n+package com.smartdevicelink.managers;\n+\n+import com.smartdevicelink.proxy.rpc.ImageField;\n+import com.smartdevicelink.proxy.rpc.TextField;\n+import com.smartdevicelink.proxy.rpc.WindowCapability;\n+import com.smartdevicelink.proxy.rpc.enums.ImageFieldName;\n+import com.smartdevicelink.proxy.rpc.enums.TextFieldName;\n+\n+/**\n+ * <strong>ManagerUtility</strong> <br>\n+ * <p>\n+ * Static Methods to be used throughout the Manager classes <br>\n+ */\n+public class ManagerUtility {\n+\n+    public static class WindowCapabilityUtility {\n+\n+        /**\n+         * Check to see if WindowCapability has an ImageFieldName of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name ImageFieldName representing a name of a given Image field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasImageFieldOfName(WindowCapability windowCapability, ImageFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getImageFields() != null) {\n+                for (ImageField field : windowCapability.getImageFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {\n+                        return true;\n+                    }\n+                }\n+            }\n+            return false;\n+        }\n+\n+        /**\n+         * Check to see if WindowCapability has a textField of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name TextFieldName representing a name of a given text field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasTextFieldOfName(WindowCapability windowCapability, TextFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getTextFields() != null) {\n+                for (TextField field : windowCapability.getTextFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4Mjg4MA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406282880", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    name = field.getName();\n          \n          \n            \n                                    if (name == TextFieldName.mainField1 || name == TextFieldName.mainField2 || name == TextFieldName.mainField3 || name == TextFieldName.mainField4) {\n          \n          \n            \n                                        int fieldNumber = Integer.parseInt(name.toString().substring(name.toString().length() - 1));\n          \n          \n            \n                                        highestFound = Math.max(highestFound, fieldNumber);\n          \n          \n            \n                                        if (highestFound == 4) {\n          \n          \n            \n                                            break;\n          \n          \n            \n                                        }\n          \n          \n            \n                                    }\n          \n          \n            \n            \n          \n          \n            \n                                    int fieldNumber =0;\n          \n          \n            \n                                    switch (textField.getName()){\n          \n          \n            \n                                        case mainField1:\n          \n          \n            \n                                            fieldNumber = 1;\n          \n          \n            \n                                            break;\n          \n          \n            \n                                        case mainField2:\n          \n          \n            \n                                            fieldNumber = 2;\n          \n          \n            \n                                            break;\n          \n          \n            \n                                        case mainField3:\n          \n          \n            \n                                            fieldNumber = 3;\n          \n          \n            \n                                            break;\n          \n          \n            \n                                        case mainField4:\n          \n          \n            \n                                            fieldNumber = 4;\n          \n          \n            \n                                            break;\n          \n          \n            \n                                    }\n          \n          \n            \n                                    if(fieldNumber > 0){\n          \n          \n            \n                                        highestFound = Math.max(highestFound, fieldNumber);\n          \n          \n            \n                                        if (highestFound == 4) {\n          \n          \n            \n                                            break;\n          \n          \n            \n                                        }\n          \n          \n            \n                                    }", "author": "joeygrover", "createdAt": "2020-04-09T15:20:44Z", "path": "base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java", "diffHunk": "@@ -0,0 +1,86 @@\n+package com.smartdevicelink.managers;\n+\n+import com.smartdevicelink.proxy.rpc.ImageField;\n+import com.smartdevicelink.proxy.rpc.TextField;\n+import com.smartdevicelink.proxy.rpc.WindowCapability;\n+import com.smartdevicelink.proxy.rpc.enums.ImageFieldName;\n+import com.smartdevicelink.proxy.rpc.enums.TextFieldName;\n+\n+/**\n+ * <strong>ManagerUtility</strong> <br>\n+ * <p>\n+ * Static Methods to be used throughout the Manager classes <br>\n+ */\n+public class ManagerUtility {\n+\n+    public static class WindowCapabilityUtility {\n+\n+        /**\n+         * Check to see if WindowCapability has an ImageFieldName of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name ImageFieldName representing a name of a given Image field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasImageFieldOfName(WindowCapability windowCapability, ImageFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getImageFields() != null) {\n+                for (ImageField field : windowCapability.getImageFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {\n+                        return true;\n+                    }\n+                }\n+            }\n+            return false;\n+        }\n+\n+        /**\n+         * Check to see if WindowCapability has a textField of a given name.\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @param name TextFieldName representing a name of a given text field that would be stored in WindowCapability\n+         * @return true if name exist in WindowCapability else false\n+         */\n+        public static boolean hasTextFieldOfName(WindowCapability windowCapability, TextFieldName name) {\n+            if (windowCapability == null) {\n+                return false;\n+            }\n+            if (windowCapability.getTextFields() != null) {\n+                for (TextField field : windowCapability.getTextFields()) {\n+                    if (field != null && field.getName() != null && field.getName().equals(name)) {\n+                        return true;\n+                    }\n+                }\n+            }\n+            return false;\n+        }\n+\n+        /**\n+         * Method to get number of textFields allowed to be set according to WindowCapability\n+         *\n+         * @param windowCapability WindowCapability representing the capabilities of the desired window\n+         * @return linesFound Number of textFields found in WindowCapability\n+         */\n+        public static int getMaxNumberOfMainFieldLines(WindowCapability windowCapability) {\n+            int highestFound = 0;\n+            TextFieldName name;\n+            if (windowCapability != null && windowCapability.getTextFields() != null) {\n+                for (TextField field : windowCapability.getTextFields()) {\n+                    if (field.getName() != null) {\n+                        name = field.getName();\n+                        if (name == TextFieldName.mainField1 || name == TextFieldName.mainField2 || name == TextFieldName.mainField3 || name == TextFieldName.mainField4) {\n+                            int fieldNumber = Integer.parseInt(name.toString().substring(name.toString().length() - 1));\n+                            highestFound = Math.max(highestFound, fieldNumber);\n+                            if (highestFound == 4) {\n+                                break;\n+                            }\n+                        }", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4Mzk1NQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406283955", "bodyText": "While the current solution is more adaptable/clever, the reality is that there are only 4 specific cases that we care about and therefore should avoid string manipulation. I suggest not taking this suggestions from github, but making the changes in Android Studio.", "author": "joeygrover", "createdAt": "2020-04-09T15:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4Mjg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjMyMDY1OA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406320658", "bodyText": "I agree that the suggested code should be better in performance. I will update the method.", "author": "bilal-alsharifi", "createdAt": "2020-04-09T16:18:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4Mjg4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4NTQ4MA==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406285480", "bodyText": "Does it max sense to just alter the utility method call to return 4 by default instead of this long inline if statement? This is not a hard requirement and would be interested to know how iOS handles it.", "author": "joeygrover", "createdAt": "2020-04-09T15:24:35Z", "path": "base/src/main/java/com/smartdevicelink/managers/screen/BaseTextAndGraphicManager.java", "diffHunk": "@@ -409,7 +410,7 @@ Show assembleShowText(Show show){\n \t\t\treturn show;\n \t\t}\n \n-\t\tint numberOfLines = getNumberOfLines();\n+\t\tint numberOfLines = (defaultMainWindowCapability != null && defaultMainWindowCapability.getTextFields() != null) ? ManagerUtility.WindowCapabilityUtility.getMaxNumberOfMainFieldLines(defaultMainWindowCapability) : 4;", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2OTY2Ng==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406369666", "bodyText": "We kind of abstracted the logic in the helper methods in ManagerUtility to just return the actually supported things. And we kept the implementation for the rule \"if null, then all enabled\" directly in the manager's implementation. Of course, that is not a hard rule. We can apply the suggestion if you think that makes more sense. I just did it this way for alignment purposes as iOS implementation also does it similarly:\nhttps://github.com/smartdevicelink/sdl_ios/blob/d4bd0eed98cb1e872da5bcd4a62b04d81a87f815/SmartDeviceLink/SDLTextAndGraphicManager.m#L315:", "author": "bilal-alsharifi", "createdAt": "2020-04-09T17:42:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4NTQ4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3OTM3Nw==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406379377", "bodyText": "If that's how iOS does it then staying aligned is more important right now. We can always address a better method for both in the future.", "author": "joeygrover", "createdAt": "2020-04-09T17:58:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI4NTQ4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5NjE4Ng==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406296186", "bodyText": "I don't believe this logic is correct. Based on the RPC spec, the imageField array is not mandatory. Therefore if it is not included, we should infer that it is not supported, right? @joeljfischer can you confirm?", "author": "joeygrover", "createdAt": "2020-04-09T15:39:51Z", "path": "base/src/main/java/com/smartdevicelink/managers/screen/BaseTextAndGraphicManager.java", "diffHunk": "@@ -741,53 +742,64 @@ private boolean sdlArtworkNeedsUpload(SdlArtwork artwork){\n \t\treturn false;\n \t}\n \n+\t/**\n+\t * Check to see if primaryGraphic should be updated\n+\t * @return true if primaryGraphic should be updated, false if not\n+\t */\n \tprivate boolean shouldUpdatePrimaryImage() {\n-\t\tif (defaultMainWindowCapability == null || defaultMainWindowCapability.getImageTypeSupported() == null || defaultMainWindowCapability.getImageTypeSupported().size() > 0) {\n-\t\t\tif (currentScreenData.getGraphic() == null) {\n-\t\t\t\treturn primaryGraphic != null;\n-\t\t\t} else {\n-\t\t\t\treturn currentScreenData != null\n-\t\t\t\t\t\t&& (primaryGraphic != null && !CompareUtils.areStringsEqual(currentScreenData.getGraphic().getValue(), primaryGraphic.getName(), true, true));\n-\t\t\t}\n-\t\t}\n-\t\treturn false;\n+\t\tboolean templateSupportsPrimaryArtwork = templateSupportsImageField(ImageFieldName.graphic);\n+\n+\t\tString currentScreenDataPrimaryGraphicName = (currentScreenData != null && currentScreenData.getGraphic() != null) ? currentScreenData.getGraphic().getValue() : null;\n+\t\tString primaryGraphicName = primaryGraphic != null ? primaryGraphic.getName() : null;\n+\t\treturn templateSupportsPrimaryArtwork\n+\t\t\t\t&& !CompareUtils.areStringsEqual(currentScreenDataPrimaryGraphicName, primaryGraphicName, true, true)\n+\t\t\t\t&& primaryGraphic != null;\n \t}\n \n+\t/**\n+\t * Check to see if secondaryGraphic should be updated\n+\t * @return true if secondaryGraphic should be updated, false if not\n+\t */\n \tprivate boolean shouldUpdateSecondaryImage() {\n-\t\t// Cannot detect if there is a secondary image, so we'll just try to detect if there's a primary image and allow it if there is.\n-\t\tif (defaultMainWindowCapability == null || defaultMainWindowCapability.getImageTypeSupported() == null || defaultMainWindowCapability.getImageTypeSupported().size() > 0) {\n-\t\t\tif (currentScreenData.getGraphic() == null) {\n-\t\t\t\treturn secondaryGraphic != null;\n-\t\t\t} else {\n-\t\t\t\treturn currentScreenData != null\n-\t\t\t\t\t\t&& (secondaryGraphic != null && !CompareUtils.areStringsEqual(currentScreenData.getGraphic().getValue(), secondaryGraphic.getName(), true, true));\n-\t\t\t}\n-\t\t}\n-\t\treturn false;\n-\t}\n+\t\tboolean templateSupportsSecondaryArtwork = (templateSupportsImageField(ImageFieldName.graphic) || templateSupportsImageField(ImageFieldName.secondaryGraphic));\n \n-\tint getNumberOfLines() {\n+\t\tString currentScreenDataSecondaryGraphicName = (currentScreenData != null && currentScreenData.getSecondaryGraphic() != null) ? currentScreenData.getSecondaryGraphic().getValue() : null;\n+\t\tString secondaryGraphicName = secondaryGraphic != null ? secondaryGraphic.getName() : null;\n+\t\treturn templateSupportsSecondaryArtwork\n+\t\t\t\t&& !CompareUtils.areStringsEqual(currentScreenDataSecondaryGraphicName, secondaryGraphicName, true, true)\n+\t\t\t\t&& secondaryGraphic != null;\n+\t}\n \n-\t\tif (defaultMainWindowCapability == null){\n-\t\t\treturn 4;\n-\t\t}\n+\t/**\n+\t * Check to see if template supports the specified image field\n+\t * @return true if image field is supported, false if not\n+\t */\n+\tprivate boolean templateSupportsImageField(ImageFieldName name) {\n+\t\treturn (defaultMainWindowCapability == null || defaultMainWindowCapability.getImageFields() == null) || ManagerUtility.WindowCapabilityUtility.hasImageFieldOfName(defaultMainWindowCapability, name);", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODA2MQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406298061", "bodyText": "Is there a reason why this methods are shouldSend____Text instead of something more like is___TextSupported?", "author": "joeygrover", "createdAt": "2020-04-09T15:42:34Z", "path": "base/src/main/java/com/smartdevicelink/managers/screen/choiceset/PreloadChoicesOperation.java", "diffHunk": "@@ -227,14 +230,44 @@ private CreateInteractionChoiceSet choiceFromCell(ChoiceCell cell){\n \t}\n \n \t// HELPERS\n+\tboolean shouldSendChoiceText() {", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3NjA3OQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406376079", "bodyText": "No reason other than following the iOS naming to make them easier to compare and maintain in the future. If you prefer changing the names, I suggest removing these 5 methods and call templateSupports___Field() directly.", "author": "bilal-alsharifi", "createdAt": "2020-04-09T17:53:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODA2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3OTg4Ng==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406379886", "bodyText": "If this matches iOS then we can keep these for now. I would like to revisit for both after this release if possible. The naming doesn't make sense in my opinion.", "author": "joeygrover", "createdAt": "2020-04-09T17:59:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5ODA2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjI5OTMwOQ==", "url": "https://github.com/smartdevicelink/sdl_java_suite/pull/1328#discussion_r406299309", "bodyText": "Same question before around if the imageField array is null. @joeljfischer for visibility.", "author": "joeygrover", "createdAt": "2020-04-09T15:44:20Z", "path": "base/src/main/java/com/smartdevicelink/managers/screen/menu/BaseMenuManager.java", "diffHunk": "@@ -780,17 +780,7 @@ private void setAddStatus(Integer size, List<Integer> newArray){\n \n \t@SuppressWarnings(\"BooleanMethodIsAlwaysInverted\")\n \tprivate boolean supportsImages(){\n-\t\tif (defaultMainWindowCapability != null && defaultMainWindowCapability.getImageFields() != null) {\n-\t\t\tList<ImageField> imageFields = defaultMainWindowCapability.getImageFields();\n-\t\t\tif (imageFields != null && !imageFields.isEmpty()) {\n-\t\t\t\tfor (ImageField field : imageFields) {\n-\t\t\t\t\tif (field != null && field.getName() != null && field.getName().equals(ImageFieldName.cmdIcon)) {\n-\t\t\t\t\t\treturn true;\n-\t\t\t\t\t}\n-\t\t\t\t}\n-\t\t\t}\n-\t\t}\n-\t\treturn false;\n+\t\treturn (defaultMainWindowCapability == null || defaultMainWindowCapability.getImageFields() == null) || ManagerUtility.WindowCapabilityUtility.hasImageFieldOfName(defaultMainWindowCapability, ImageFieldName.cmdIcon);", "originalCommit": "40ed2d11522da4529c645b5df05df0fedd8769e1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5d271d43ad21b23e3437e4d19c5f1aff75994936", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/5d271d43ad21b23e3437e4d19c5f1aff75994936", "message": "Update base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java\n\nCo-Authored-By: Joey Grover <joeygrover@gmail.com>", "committedDate": "2020-04-09T16:06:55Z", "type": "commit"}, {"oid": "f0e56e34018c6ec4b8fb0cd469456b8c2397b882", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/f0e56e34018c6ec4b8fb0cd469456b8c2397b882", "message": "Update base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java\n\nCo-Authored-By: Joey Grover <joeygrover@gmail.com>", "committedDate": "2020-04-09T16:07:21Z", "type": "commit"}, {"oid": "e285d375b2a0ba32798adc84e481bc990a120cc3", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/e285d375b2a0ba32798adc84e481bc990a120cc3", "message": "Update base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java\n\nCo-Authored-By: Joey Grover <joeygrover@gmail.com>", "committedDate": "2020-04-09T16:08:04Z", "type": "commit"}, {"oid": "8fed860092b7e07a891e420a6095b4aeeaa8a9c0", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/8fed860092b7e07a891e420a6095b4aeeaa8a9c0", "message": "Update base/src/main/java/com/smartdevicelink/managers/ManagerUtility.java\n\nCo-Authored-By: Joey Grover <joeygrover@gmail.com>", "committedDate": "2020-04-09T16:08:20Z", "type": "commit"}, {"oid": "62a57bdbc2f8794ea020d6bdd293ba92789eb278", "url": "https://github.com/smartdevicelink/sdl_java_suite/commit/62a57bdbc2f8794ea020d6bdd293ba92789eb278", "message": "Simplify getMaxNumberOfMainFieldLines() logic", "committedDate": "2020-04-09T16:22:11Z", "type": "commit"}]}