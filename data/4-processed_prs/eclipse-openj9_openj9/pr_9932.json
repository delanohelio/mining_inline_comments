{"pr_number": 9932, "pr_title": "Update mkdocker.sh: include jdk15 in git cache", "pr_createdAt": "2020-06-18T15:41:01Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9932", "timeline": [{"oid": "bf34676ed586b4055faa7a38751ff82dc88e12ec", "url": "https://github.com/eclipse-openj9/openj9/commit/bf34676ed586b4055faa7a38751ff82dc88e12ec", "message": "Update mkdocker.sh: include jdk15 in git cache\n\n* use 'git repack' instead of 'git gc' to shrink repository cache\n* use just one thread to reduce memory required\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-06-18T14:55:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3ODA2MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9932#discussion_r442378061", "bodyText": "For the record, what is the explanation for using --window=250, when the default is 10?", "author": "pshipton", "createdAt": "2020-06-18T17:10:05Z", "path": "buildenv/docker/mkdocker.sh", "diffHunk": "@@ -636,14 +636,15 @@ create_git_cache() {\n   add_git_remote jdk8    https://github.com/ibmruntimes/openj9-openjdk-jdk8.git\n   add_git_remote jdk11   https://github.com/ibmruntimes/openj9-openjdk-jdk11.git\n   add_git_remote jdk14   https://github.com/ibmruntimes/openj9-openjdk-jdk14.git\n+  add_git_remote jdk15   https://github.com/ibmruntimes/openj9-openjdk-jdk15.git\n   add_git_remote jdknext https://github.com/ibmruntimes/openj9-openjdk-jdk.git\n   add_git_remote omr     https://github.com/eclipse/openj9-omr.git\n   add_git_remote openj9  https://github.com/eclipse/openj9.git\n   echo \" && echo Fetching repository cache... \\\\\"\n-  echo \" && git fetch jdk14 \\\\\"\n+  echo \" && git fetch jdk15 \\\\\"\n   echo \" && git fetch --all \\\\\"\n   echo \" && echo Shrinking repository cache... \\\\\"\n-  echo \" && git gc --aggressive --prune=all\"\n+  echo \" && git repack -a -d -f --depth=50 --window=250 --threads=1\"", "originalCommit": "bf34676ed586b4055faa7a38751ff82dc88e12ec", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM4NDQ5NA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9932#discussion_r442384494", "bodyText": "The suggestion is attributed to Linus Torvalds here.\nThe git gc documentation explains that --depth=50 and --window=250 are the defaults when --aggressive is used.", "author": "keithc-ca", "createdAt": "2020-06-18T17:21:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM3ODA2MQ=="}], "type": "inlineReview"}]}