{"pr_number": 9718, "pr_title": "Add function for aborting compilation with bad value type operations", "pr_createdAt": "2020-05-27T21:10:14Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9718", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NDg4MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9718#discussion_r431444880", "bodyText": "I'm not a fan of this name but I couldn't think of anything else off the top of my head. I'm open to suggestions if anyone has a better name.", "author": "Leonardo2718", "createdAt": "2020-05-27T21:11:44Z", "path": "runtime/compiler/ilgen/J9ByteCodeIlGenerator.hpp", "diffHunk": "@@ -238,6 +238,7 @@ class TR_J9ByteCodeIlGenerator : public TR_IlGenerator, public TR_J9ByteCodeIter\n    void         handleSideEffect(TR::Node *);\n    bool         valueMayBeModified(TR::Node *, TR::Node *);\n    TR::Node *    genCompressedRefs(TR::Node *, bool genTT = true, int32_t isLoad = 1);\n+   void         unresolvedValueTypeOpAbort(const char* bytecodeName, const char* refType);", "originalCommit": "cc951c5d92fde11bd3685599eba984c1379149f9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTgwMzMzMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9718#discussion_r431803331", "bodyText": "This isn't much better, but how about making it imperative?  Something like abortOnUnresolvedValueType or abortForUnresolvedValueTypeOp", "author": "hzongaro", "createdAt": "2020-05-28T12:39:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NDg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTgwNTIxNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/9718#discussion_r431805216", "bodyText": "Moving abort to the start of the method name would aid readability IMO - I'm not sure if we want to make it more obvious with an ABORTForUnresolvedValueTypeOp or something like that.", "author": "andrewcraik", "createdAt": "2020-05-28T12:42:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NDg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTg5MTg2OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9718#discussion_r431891869", "bodyText": "Alright, I'll change it to abortForUnresolvedValueTypeOp. I don't think there's a particular need to make it stand out because there's really nothing special about it.", "author": "Leonardo2718", "createdAt": "2020-05-28T14:42:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTQ0NDg4MA=="}], "type": "inlineReview"}, {"oid": "77a25a2c9c41cc554a21312211ae82618007a06d", "url": "https://github.com/eclipse-openj9/openj9/commit/77a25a2c9c41cc554a21312211ae82618007a06d", "message": "Add function for aborting compilation with bad value type operations\n\nCurrently, the IL generator will abort compilation when an operation\nwith an unresolved CP reference that may need value type handling\nis encountered. To aid readability and maintainability, this commit\nadds a new helper function that encapsulates the code that does the\nabort. All instances of similar code are replaced with a call\nto this new function.\n\nSigned-off-by: Leonardo Banderali <leonardo2718@protonmail.com>", "committedDate": "2020-05-28T14:43:39Z", "type": "commit"}, {"oid": "77a25a2c9c41cc554a21312211ae82618007a06d", "url": "https://github.com/eclipse-openj9/openj9/commit/77a25a2c9c41cc554a21312211ae82618007a06d", "message": "Add function for aborting compilation with bad value type operations\n\nCurrently, the IL generator will abort compilation when an operation\nwith an unresolved CP reference that may need value type handling\nis encountered. To aid readability and maintainability, this commit\nadds a new helper function that encapsulates the code that does the\nabort. All instances of similar code are replaced with a call\nto this new function.\n\nSigned-off-by: Leonardo Banderali <leonardo2718@protonmail.com>", "committedDate": "2020-05-28T14:43:39Z", "type": "forcePushed"}]}