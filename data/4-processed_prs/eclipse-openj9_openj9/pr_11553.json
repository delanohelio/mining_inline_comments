{"pr_number": 11553, "pr_title": "Add Involuntary OSR support for AOT", "pr_createdAt": "2020-12-30T21:27:06Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11553", "timeline": [{"oid": "074daa6604c50d73ad9edc7402f69cead2b4914d", "url": "https://github.com/eclipse-openj9/openj9/commit/074daa6604c50d73ad9edc7402f69cead2b4914d", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-07T22:04:32Z", "type": "forcePushed"}, {"oid": "fcd56f371a26351ad3d3cc0709bbf29762655a4f", "url": "https://github.com/eclipse-openj9/openj9/commit/fcd56f371a26351ad3d3cc0709bbf29762655a4f", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-08T19:04:39Z", "type": "forcePushed"}, {"oid": "c5ec710cc2241a6bc24665ee26a781b8f66958de", "url": "https://github.com/eclipse-openj9/openj9/commit/c5ec710cc2241a6bc24665ee26a781b8f66958de", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-14T16:38:06Z", "type": "forcePushed"}, {"oid": "d090f66fd4bb8949db993d3a845e9fc9f0601345", "url": "https://github.com/eclipse-openj9/openj9/commit/d090f66fd4bb8949db993d3a845e9fc9f0601345", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-14T17:12:29Z", "type": "forcePushed"}, {"oid": "3613dc0d9495ed9bcec54ec400076c9be3f603b6", "url": "https://github.com/eclipse-openj9/openj9/commit/3613dc0d9495ed9bcec54ec400076c9be3f603b6", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-15T22:00:16Z", "type": "forcePushed"}, {"oid": "944bb812d11aaf8c116644fba1f0d34a06d9e04e", "url": "https://github.com/eclipse-openj9/openj9/commit/944bb812d11aaf8c116644fba1f0d34a06d9e04e", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-15T22:09:57Z", "type": "forcePushed"}, {"oid": "e7f086c97a258224d22dffafe8880526f7a8fda9", "url": "https://github.com/eclipse-openj9/openj9/commit/e7f086c97a258224d22dffafe8880526f7a8fda9", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-20T16:25:34Z", "type": "forcePushed"}, {"oid": "0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "url": "https://github.com/eclipse-openj9/openj9/commit/0175e0e1075c73e7be40ed448940c2f5e6b1ce11", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-21T22:49:41Z", "type": "forcePushed"}, {"oid": "2f47c96feaa82ee69bdea831595fe1cfb9e048de", "url": "https://github.com/eclipse-openj9/openj9/commit/2f47c96feaa82ee69bdea831595fe1cfb9e048de", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-25T15:39:42Z", "type": "forcePushed"}, {"oid": "fd8ebe5509b269c515f594b81950542c83d86db2", "url": "https://github.com/eclipse-openj9/openj9/commit/fd8ebe5509b269c515f594b81950542c83d86db2", "message": "Add API to get the AOT method header entry\n\nAdd an API to prevent doing manual pointer manipulation to get the AOT\nmethod header entry from the SCC.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-29T15:15:19Z", "type": "commit"}, {"oid": "9feaad57ad5af48fe2cf4de1001bec69f69bd146", "url": "https://github.com/eclipse-openj9/openj9/commit/9feaad57ad5af48fe2cf4de1001bec69f69bd146", "message": "Use new API when getting the AOT method entry from the SCC\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-29T15:15:19Z", "type": "commit"}, {"oid": "291e49fd005f26d30688d41a682935fdba8877f1", "url": "https://github.com/eclipse-openj9/openj9/commit/291e49fd005f26d30688d41a682935fdba8877f1", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-01-29T15:15:19Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTE1NjQzNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11553#discussion_r571156436", "bodyText": "Do you why the unused exists? can be eliminated?\nAlso, for better packing and smaller headers we should probably move the flags after the last uint32_t entry.\nAlso, I think we need to bump TR_AOTMethodHeader_MajorVersion since its structure has changed.", "author": "mpirvu", "createdAt": "2021-02-05T18:11:05Z", "path": "runtime/compiler/runtime/J9Runtime.hpp", "diffHunk": "@@ -169,6 +169,12 @@ typedef struct TR_AOTMethodHeader {\n    uintptr_t compileMethodDataSize;\n    uintptr_t unused;", "originalCommit": "2b53456aaf48c4cd319944ec0d9f58249c25eea4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTE2NDM5MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11553#discussion_r571164390", "bodyText": "Do you why the unused exists? can be eliminated?\n\nLooks like there's a PR out to remove it #11736\n\nAlso, for better packing and smaller headers we should probably move the flags after the last uint32_t entry.\nAlso, I think we need to bump TR_AOTMethodHeader_MajorVersion since its structure has changed.\n\nOk will do.", "author": "dsouzai", "createdAt": "2021-02-05T18:24:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MTE1NjQzNg=="}], "type": "inlineReview"}, {"oid": "2bdb38ad0a2b6742cd4158353d86256f1a624db3", "url": "https://github.com/eclipse-openj9/openj9/commit/2bdb38ad0a2b6742cd4158353d86256f1a624db3", "message": "Validate and Relocate OSR Data\n\nThis commit ensures that the emergency OSR buffer is large enough for an\nAOT method compiled with OSR, as well as relocates the osrInfo pointer\nin the J9JITExceptionTable.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-02-05T18:32:49Z", "type": "commit"}, {"oid": "2ae967372af0bfd04770cc30da41248f084756bd", "url": "https://github.com/eclipse-openj9/openj9/commit/2ae967372af0bfd04770cc30da41248f084756bd", "message": "Increment JITServer Minor Version\n\nChange in relocation requires a change to the minor version.\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-02-05T18:33:58Z", "type": "commit"}, {"oid": "83455b031f1ee6f852f4e047c36603ee1888cd6a", "url": "https://github.com/eclipse-openj9/openj9/commit/83455b031f1ee6f852f4e047c36603ee1888cd6a", "message": "Update copyrights\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-02-05T18:34:15Z", "type": "commit"}, {"oid": "83455b031f1ee6f852f4e047c36603ee1888cd6a", "url": "https://github.com/eclipse-openj9/openj9/commit/83455b031f1ee6f852f4e047c36603ee1888cd6a", "message": "Update copyrights\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2021-02-05T18:34:15Z", "type": "forcePushed"}]}