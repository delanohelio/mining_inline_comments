{"pr_number": 10053, "pr_title": "Omit debuginfo files from the main SDK archive", "pr_createdAt": "2020-06-30T16:14:33Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10053", "timeline": [{"oid": "d78d212437b102c430d818782edc5d27cea93df7", "url": "https://github.com/eclipse-openj9/openj9/commit/d78d212437b102c430d818782edc5d27cea93df7", "message": "Omit debuginfo files from the main SDK archive\n\nMost of the omitted files are available in the debug image\n(an exception is *.map files on Windows).\n\n[ci skip]\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-06-30T16:12:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyMzc3Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10053#discussion_r449223772", "bodyText": "There's a // before the d in the .dSYM case:\n-e '/\\\\.dSYM\\\\//d' -> -e '/\\\\.dSYM\\\\/d'", "author": "DanHeidinga", "createdAt": "2020-07-02T19:24:55Z", "path": "buildenv/jenkins/common/build.groovy", "diffHunk": "@@ -288,7 +288,11 @@ def archive_sdk() {\n         def testDir = \"test\"\n \n         dir(OPENJDK_CLONE_DIR) {\n-            sh \"tar -C ${buildDir} -zcvf ${SDK_FILENAME} ${JDK_FOLDER}\"\n+            // The archiver receives pathnames on stdin and writes to stdout.\n+            def archiveCmd = SPEC.contains('zos') ? 'pax -wvz' : 'tar -cvz -T -'\n+            // Filter out unwanted files (most of which are available in the debug-image).\n+            def filterCmd = \"sed -e '/\\\\.dbg\\$/d' -e '/\\\\.debuginfo\\$/d' -e '/\\\\.diz\\$/d' -e '/\\\\.dSYM\\\\//d' -e '/\\\\.map\\$/d' -e '/\\\\.pdb\\$/d'\"", "originalCommit": "d78d212437b102c430d818782edc5d27cea93df7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyNDQ2Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10053#discussion_r449224462", "bodyText": "That's intentional (to match .dSYM/).", "author": "keithc-ca", "createdAt": "2020-07-02T19:26:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyMzc3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyNTM2NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10053#discussion_r449225365", "bodyText": "And looking at the osx build, it's clearly working", "author": "DanHeidinga", "createdAt": "2020-07-02T19:28:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTIyMzc3Mg=="}], "type": "inlineReview"}]}