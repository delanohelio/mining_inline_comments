{"pr_number": 9366, "pr_title": "Add specialized error messages for AOT validation failures", "pr_createdAt": "2020-04-24T21:21:20Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9366", "timeline": [{"oid": "876063b6e1d25866eb837be172cd92e929d1a39d", "url": "https://github.com/eclipse-openj9/openj9/commit/876063b6e1d25866eb837be172cd92e929d1a39d", "message": "Update AOT validation with the new error msgs\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2020-04-24T21:22:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg5NTU4Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/9366#discussion_r414895583", "bodyText": "Not sure this is needed since it's not supported any more. I think I saw some of the JIT code being deleted.", "author": "pshipton", "createdAt": "2020-04-24T22:22:15Z", "path": "runtime/nls/jitm/j9jit.nls", "diffHunk": "@@ -96,6 +96,159 @@ J9NLS_RELOCATABLE_CODE_NOT_AVAILABLE_WITH_FSD_JVMPI.user_response=Disable JVMPI\n J9NLS_RELOCATABLE_CODE_NOT_AVAILABLE_WITH_FSD_JVMPI.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n # END NON-TRANSLATABLE\n \n+J9NLS_RELOCATABLE_CODE_HEADER_START_SANITY_BIT_MANGLED=AOT Header Validation failed; feature flag start sanity bit mangled. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_HEADER_START_SANITY_BIT_MANGLED.explanation=The AOT Header is corrupted.\n+J9NLS_RELOCATABLE_CODE_HEADER_START_SANITY_BIT_MANGLED.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_HEADER_START_SANITY_BIT_MANGLED.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_HEADER_START_SANITY_BIT_MANGLED.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_HEADER_END_SANITY_BIT_MANGLED=AOT Header Validation failed; feature flag end sanity bit mangled. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_HEADER_END_SANITY_BIT_MANGLED.explanation=The AOT Header is corrupted.\n+J9NLS_RELOCATABLE_CODE_HEADER_END_SANITY_BIT_MANGLED.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_HEADER_END_SANITY_BIT_MANGLED.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_HEADER_END_SANITY_BIT_MANGLED.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_SMP_MISMATCH=SMP feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_SMP_MISMATCH.explanation=The JVM is not running in the same SMP mode as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_SMP_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_SMP_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_SMP_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_CMPRS_PTR_MISMATCH=Compressed References feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_CMPRS_PTR_MISMATCH.explanation=The JVM is not running in the same compressedrefs mode as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_CMPRS_PTR_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_CMPRS_PTR_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_CMPRS_PTR_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_DFP_MISMATCH=DFP feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_DFP_MISMATCH.explanation=The JVM is not running in the same DFP mode as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_DFP_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_DFP_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_DFP_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_DISABLE_TRAPS_MISMATCH=Disable Traps feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_DISABLE_TRAPS_MISMATCH.explanation=The JVM is not running with the same Disable Traps option as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_DISABLE_TRAPS_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_DISABLE_TRAPS_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_DISABLE_TRAPS_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_TLH_PREFETCH_MISMATCH=TLH Prefetch feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_TLH_PREFETCH_MISMATCH.explanation=The JVM is not running in the same TLH Prefetch mode as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_TLH_PREFETCH_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_TLH_PREFETCH_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_TLH_PREFETCH_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_METHOD_TRAMPOLINE_MISMATCH=Method Trampoline feature mismatch. Ignoring AOT code in shared class cache.\n+# START NON-TRANSLATABLE\n+J9NLS_RELOCATABLE_CODE_METHOD_TRAMPOLINE_MISMATCH.explanation=The JVM is not running in the same Method Trampoline mode as the one that generated the code in the SCC.\n+J9NLS_RELOCATABLE_CODE_METHOD_TRAMPOLINE_MISMATCH.system_action=The compiler will not generate AOT code. AOT code from the shared class cache will not be used.\n+J9NLS_RELOCATABLE_CODE_METHOD_TRAMPOLINE_MISMATCH.user_response=Destroy and recreate the AOT code in the shared class cache for the current platform using the -Xshareclasses:reset option.\n+J9NLS_RELOCATABLE_CODE_METHOD_TRAMPOLINE_MISMATCH.link=dita:///diag/appendixes/cmdline/cmdline_x.dita#cmdline_x/xshareclasses-reset\n+# END NON-TRANSLATABLE\n+\n+J9NLS_RELOCATABLE_CODE_MULTI_TENANCY_MISMATCH=Multi Tenancy feature mismatch. Ignoring AOT code in shared class cache.", "originalCommit": "876063b6e1d25866eb837be172cd92e929d1a39d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDkwMjk3Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/9366#discussion_r414902976", "bodyText": "Indeed, scanning the code I cannot find a point where we set this flag, so this particular flag can be deleted.", "author": "mpirvu", "createdAt": "2020-04-24T22:43:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg5NTU4Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTgzNjY3Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/9366#discussion_r415836676", "bodyText": "Ok I'll remove this.", "author": "dsouzai", "createdAt": "2020-04-27T13:59:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDg5NTU4Mw=="}], "type": "inlineReview"}, {"oid": "54aa0a84e6861ce89a46771eb82bf97a225e19a8", "url": "https://github.com/eclipse-openj9/openj9/commit/54aa0a84e6861ce89a46771eb82bf97a225e19a8", "message": "Add more specific AOT Validation Error Messages\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2020-04-27T14:05:07Z", "type": "commit"}, {"oid": "08552c5f9be915d30cdca4c5f7436335b0eb5be0", "url": "https://github.com/eclipse-openj9/openj9/commit/08552c5f9be915d30cdca4c5f7436335b0eb5be0", "message": "Remove TR_FeatureFlag_MultiTenancy flag\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2020-04-27T14:05:11Z", "type": "commit"}, {"oid": "f51f7596938b3bdd748fe0d31a6e42805132278b", "url": "https://github.com/eclipse-openj9/openj9/commit/f51f7596938b3bdd748fe0d31a6e42805132278b", "message": "Update AOT validation with the new error msgs\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2020-04-27T14:53:37Z", "type": "commit"}, {"oid": "f51f7596938b3bdd748fe0d31a6e42805132278b", "url": "https://github.com/eclipse-openj9/openj9/commit/f51f7596938b3bdd748fe0d31a6e42805132278b", "message": "Update AOT validation with the new error msgs\n\nSigned-off-by: Irwin D'Souza <dsouzai.gh@gmail.com>", "committedDate": "2020-04-27T14:53:37Z", "type": "forcePushed"}]}