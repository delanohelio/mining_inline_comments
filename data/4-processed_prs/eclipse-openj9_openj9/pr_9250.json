{"pr_number": 9250, "pr_title": "Match number of artifacts to number of build logs", "pr_createdAt": "2020-04-15T05:21:05Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9250", "timeline": [{"oid": "b5ecc11e3a23fe8ce0c166511aacd87d01da5a6d", "url": "https://github.com/eclipse-openj9/openj9/commit/b5ecc11e3a23fe8ce0c166511aacd87d01da5a6d", "message": "Reduce history on builds\n\n- Reduce Release from 10 to 5\n- Reduce OMR Acceptance from 20 to 15\n- Reduce JDK Acceptances from 20 to 10\n\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-04-15T05:32:06Z", "type": "forcePushed"}, {"oid": "bc3048f2200ea4c07d6e187d017737bb3704d7c2", "url": "https://github.com/eclipse-openj9/openj9/commit/bc3048f2200ea4c07d6e187d017737bb3704d7c2", "message": "Reduce history on builds\n\n- Reduce Release from 10 to 5\n- Reduce OMR Acceptance from 20 to 15\n- Reduce JDK Acceptances from 20 to 10\n\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-04-15T06:33:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTcxNDg2OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9250#discussion_r409714868", "bodyText": "Why set it for unb since useBuildDiscarderNumArtifacts is set to false and uses build_discarder.logs?", "author": "vsebe", "createdAt": "2020-04-16T17:07:30Z", "path": "buildenv/jenkins/variables/defaults.yml", "diffHunk": "@@ -57,6 +57,9 @@ artifactory:\n   numArtifacts:\n     osu: 30\n     unb: 5", "originalCommit": "bc3048f2200ea4c07d6e187d017737bb3704d7c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTcxNjE2OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9250#discussion_r409716168", "bodyText": "Doesn't seem to be required. It could be removed. If numArtifacts for geo is not set use build_discarder.logs in set_artifactory_config() method:\ne.g.\ndef numArtifacts = get_value(VARIABLES.artifactory.numArtifacts, geo)\nif (!numArtifacts ){\n    numArtifacts = get_value(VARIABLES.build_discarder.logs, pipelineFunctions.convert_build_identifier(id))\n}\nARTIFACTORY_CONFIG[geo]['numArtifacts'] = numArtifacts.toInteger()", "author": "vsebe", "createdAt": "2020-04-16T17:09:41Z", "path": "buildenv/jenkins/variables/defaults.yml", "diffHunk": "@@ -57,6 +57,9 @@ artifactory:\n   numArtifacts:\n     osu: 30\n     unb: 5\n+  useBuildDiscarderNumArtifacts:", "originalCommit": "bc3048f2200ea4c07d6e187d017737bb3704d7c2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "46a0ea1d4c40a3d144936b3dda87aa1d82a25c0e", "url": "https://github.com/eclipse-openj9/openj9/commit/46a0ea1d4c40a3d144936b3dda87aa1d82a25c0e", "message": "Match number of artifacts to number of build logs\n\n- Add option to allow number of Artifactory artifacts\n  to match the number of build logs we rotate. If\n  numArtifacts is not set, use build_discarder. This\n  will have several positive effects. The first is\n  it should reduce our overall disk usage. It will\n  also be more practical to have a) Same number of\n  build logs and artifacts and b) Different number\n  of artifacts for different builds. This can be\n  enabled on a per server basis and I have enabled\n  it for the main (default) OSU server.\n\n[skip ci]\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-04-17T03:58:17Z", "type": "commit"}, {"oid": "406108a96d024f833348e8568997000a2162bda9", "url": "https://github.com/eclipse-openj9/openj9/commit/406108a96d024f833348e8568997000a2162bda9", "message": "Reduce history on builds\n\n- Reduce Release from 10 to 5\n- Reduce OMR Acceptance from 20 to 15\n- Reduce JDK Acceptances from 20 to 10\n\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-04-17T03:59:34Z", "type": "commit"}, {"oid": "406108a96d024f833348e8568997000a2162bda9", "url": "https://github.com/eclipse-openj9/openj9/commit/406108a96d024f833348e8568997000a2162bda9", "message": "Reduce history on builds\n\n- Reduce Release from 10 to 5\n- Reduce OMR Acceptance from 20 to 15\n- Reduce JDK Acceptances from 20 to 10\n\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-04-17T03:59:34Z", "type": "forcePushed"}]}