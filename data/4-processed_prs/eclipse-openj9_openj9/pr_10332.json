{"pr_number": 10332, "pr_title": "Update macOS buildenv variables", "pr_createdAt": "2020-08-04T22:01:06Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10332", "timeline": [{"oid": "879fd01f0122ebb108c52accc00ef0f1c26e5e42", "url": "https://github.com/eclipse-openj9/openj9/commit/879fd01f0122ebb108c52accc00ef0f1c26e5e42", "message": "macOS: Updated buildenv variables\n\nFor issue #9806\n\nextra_configure_options:\n    8: '--with-toolchain-type=clang'\n\nSDKPATH removed\n\nnode_labels changed to sw.os.osx.10_14\n  build_env var changed to MACOSX_DEPLOYMENT_TARGET=10.10.0\n\nSigned-off-by: Pavlo Salimon Pav.Salimon@ibm.com", "committedDate": "2020-08-04T22:04:08Z", "type": "forcePushed"}, {"oid": "977e606e1fbfd1e4c4b1b430d015ce7be6f78126", "url": "https://github.com/eclipse-openj9/openj9/commit/977e606e1fbfd1e4c4b1b430d015ce7be6f78126", "message": "macOS: Updated buildenv variables\n\nFor issue #9806\n\nextra_configure_options:\n    8: '--with-toolchain-type=clang'\n\nSDKPATH removed\n\nnode_labels changed to sw.os.osx.10_14\n  build_env var changed to MACOSX_DEPLOYMENT_TARGET=10.10.0\n\nSigned-off-by: Pavlo Salimon <Pav.Salimon@ibm.com>", "committedDate": "2020-08-04T22:08:15Z", "type": "forcePushed"}, {"oid": "5578506bd66a8615b70d221d7991d01ca0ce4571", "url": "https://github.com/eclipse-openj9/openj9/commit/5578506bd66a8615b70d221d7991d01ca0ce4571", "message": "macOS: Updated buildenv variables\n\n*Part of issue #9806\nSigned-off-by: Pavlo Salimon <Pav.Salimon@ibm.com>", "committedDate": "2020-08-04T22:14:21Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM2NTM3MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r465365370", "bodyText": "Previous line was space separated options.", "author": "jdekonin", "createdAt": "2020-08-04T22:27:39Z", "path": "buildenv/jenkins/variables/defaults.yml", "diffHunk": "@@ -545,17 +545,13 @@ x86-64_mac:\n     8: 'macosx-x86_64-normal-server-release'\n     11: 'macosx-x86_64-normal-server-release'\n   extra_configure_options:\n-    8: '--with-xcode-path=/Users/jenkins/Xcode4/Xcode.app --with-openj9-cc=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang --with-openj9-cxx=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ --with-openj9-developer-dir=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer'\n+    8: '--with-toolchain-type=clang'\n   freemarker: '/Users/jenkins/freemarker.jar'\n   openjdk_reference_repo: '/Users/jenkins/openjdk_cache'\n   node_labels:\n-    build:\n-      all: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_13'\n-      8: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_11'\n+    build: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_14'\n   build_env:\n-    vars:\n-      all: 'OPENJ9_JAVA_OPTIONS=-Xdump:system+java:events=systhrow,filter=java/lang/ClassCastException,request=exclusive+prepwalk+preempt'\n-      8: 'MACOSX_DEPLOYMENT_TARGET=10.9.0 SDKPATH=/Users/jenkins/Xcode4/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk'\n+    vars: 'MACOSX_DEPLOYMENT_TARGET=10.10.0,OPENJ9_JAVA_OPTIONS=-Xdump:system+java:events=systhrow,filter=java/lang/ClassCastException,request=exclusive+prepwalk+preempt'", "originalCommit": "5578506bd66a8615b70d221d7991d01ca0ce4571", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM2ODA2OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r465368068", "bodyText": "Fixed", "author": "olvap377", "createdAt": "2020-08-04T22:35:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTM2NTM3MA=="}], "type": "inlineReview"}, {"oid": "e3d57ed0c866f66293515fa7542e09e3488daa7f", "url": "https://github.com/eclipse-openj9/openj9/commit/e3d57ed0c866f66293515fa7542e09e3488daa7f", "message": "macOS: Updated buildenv variables\n\n*Part of issue #9806\nSigned-off-by: Pavlo Salimon <Pav.Salimon@ibm.com>", "committedDate": "2020-08-04T22:32:12Z", "type": "forcePushed"}, {"oid": "f574ab86040b620ea1cebc2433cb8042489a9f31", "url": "https://github.com/eclipse-openj9/openj9/commit/f574ab86040b620ea1cebc2433cb8042489a9f31", "message": "macOS: Updated buildenv variables\n\n*Part of issue #9806\nSigned-off-by: Pavlo Salimon <olvap377@gmail.com>", "committedDate": "2020-08-04T22:41:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzMzczMg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r468133732", "bodyText": "Why is the deployment target updated from 10.9.0 to 10.10.0? I think it should just be removed; I don't think it has any effect anyway - build and configure scripts appear to ignore it.", "author": "keithc-ca", "createdAt": "2020-08-10T19:31:22Z", "path": "buildenv/jenkins/variables/defaults.yml", "diffHunk": "@@ -545,17 +545,13 @@ x86-64_mac:\n     8: 'macosx-x86_64-normal-server-release'\n     11: 'macosx-x86_64-normal-server-release'\n   extra_configure_options:\n-    8: '--with-xcode-path=/Users/jenkins/Xcode4/Xcode.app --with-openj9-cc=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang --with-openj9-cxx=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ --with-openj9-developer-dir=/Users/jenkins/Xcode7/Xcode.app/Contents/Developer'\n+    8: '--with-toolchain-type=clang'\n   freemarker: '/Users/jenkins/freemarker.jar'\n   openjdk_reference_repo: '/Users/jenkins/openjdk_cache'\n   node_labels:\n-    build:\n-      all: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_13'\n-      8: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_11'\n+    build: 'ci.role.build && hw.arch.x86 && sw.os.osx.10_14'\n   build_env:\n-    vars:\n-      all: 'OPENJ9_JAVA_OPTIONS=-Xdump:system+java:events=systhrow,filter=java/lang/ClassCastException,request=exclusive+prepwalk+preempt'\n-      8: 'MACOSX_DEPLOYMENT_TARGET=10.9.0 SDKPATH=/Users/jenkins/Xcode4/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk'\n+    vars: 'MACOSX_DEPLOYMENT_TARGET=10.10.0 OPENJ9_JAVA_OPTIONS=-Xdump:system+java:events=systhrow,filter=java/lang/ClassCastException,request=exclusive+prepwalk+preempt'", "originalCommit": "f574ab86040b620ea1cebc2433cb8042489a9f31", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE1ODIyNQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r468158225", "bodyText": "Its not used by xcode/clang to support older releases?", "author": "jdekonin", "createdAt": "2020-08-10T20:15:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzMzczMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE2MzkzMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r468163931", "bodyText": "Even if it is used by the compiler, the value supplied here is ignored; see e.g. https://github.com/ibmruntimes/openj9-openjdk-jdk11/blob/openj9/closed/autoconf/custom-spec.gmk.in#L109.", "author": "keithc-ca", "createdAt": "2020-08-10T20:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzMzczMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE3MTA4MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r468171081", "bodyText": "Right and set in https://github.com/ibmruntimes/openj9-openjdk-jdk11/blob/22c634c40143ed77119efa3800a8a9f1a726d19f/make/autoconf/flags.m4#L119 to 10.9.0, understood.  So back to you @olvap377 to remove MACOSX_DEPLOYMENT_TARGET=10.10.0", "author": "jdekonin", "createdAt": "2020-08-10T20:36:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzMzczMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5Mjg2MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10332#discussion_r468192860", "bodyText": "Removed", "author": "olvap377", "createdAt": "2020-08-10T21:21:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODEzMzczMg=="}], "type": "inlineReview"}, {"oid": "c67a8f54c3252f43c33286f5dd8b115a92c1465d", "url": "https://github.com/eclipse-openj9/openj9/commit/c67a8f54c3252f43c33286f5dd8b115a92c1465d", "message": "macOS: Updated buildenv variables\n\n*Part of issue #9806\nSigned-off-by: Pavlo Salimon <olvap377@gmail.com>", "committedDate": "2020-08-10T21:19:40Z", "type": "commit"}, {"oid": "c67a8f54c3252f43c33286f5dd8b115a92c1465d", "url": "https://github.com/eclipse-openj9/openj9/commit/c67a8f54c3252f43c33286f5dd8b115a92c1465d", "message": "macOS: Updated buildenv variables\n\n*Part of issue #9806\nSigned-off-by: Pavlo Salimon <olvap377@gmail.com>", "committedDate": "2020-08-10T21:19:40Z", "type": "forcePushed"}]}