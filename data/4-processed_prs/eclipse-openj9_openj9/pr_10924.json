{"pr_number": 10924, "pr_title": "CMake: Fix nasm define handling", "pr_createdAt": "2020-10-19T15:05:56Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10924", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM1ODYyMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10924#discussion_r509358620", "bodyText": "Please complete sentences with a period.", "author": "keithc-ca", "createdAt": "2020-10-21T14:54:27Z", "path": "runtime/compiler/CMakeLists.txt", "diffHunk": "@@ -48,6 +48,18 @@ if(OMR_ARCH_X86)\n \t\t\"-I${CMAKE_CURRENT_SOURCE_DIR}/x/i386/runtime/\"\n \t)\n \tomr_append_flags(CMAKE_ASM_NASM_FLAGS ${asm_inc_dirs})\n+\t# For whatever reason cmake does not apply compile definitions when building nasm objects\n+\t# The if guard is here in case they ever start doing so\n+\tif(NOT CMAKE_ASM_NASM_COMPILE_OBJECT MATCHES \"<DEFINES>\")\n+\t\t# Tack on defines immediately following the compiler name", "originalCommit": "df7c3018512fce4c4d9e6e9d4292cf1e7dfb9deb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTUzMTgwNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10924#discussion_r509531807", "bodyText": "The comment on line 54 is not fixed.", "author": "keithc-ca", "createdAt": "2020-10-21T18:04:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM1ODYyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDU2NTE2Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10924#discussion_r510565162", "bodyText": "@dnakamura pls add the other period so we can get this merged.", "author": "pshipton", "createdAt": "2020-10-23T02:52:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM1ODYyMA=="}], "type": "inlineReview"}, {"oid": "6b7c3a8b3d7cb3dc21603e58a71b24dc920f5dae", "url": "https://github.com/eclipse-openj9/openj9/commit/6b7c3a8b3d7cb3dc21603e58a71b24dc920f5dae", "message": "CMake: Fix nasm define handling\n\nBy defualt cmake does not add preprocessor define options when building\nnasm objects. To work around this, add <DEFINES> to\nCMAKE_ASM_NASM_COMPILE_OBJECT\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-10-21T17:42:43Z", "type": "forcePushed"}, {"oid": "1286b4fb1e29a996af3053bf9e8742fd8bde2c74", "url": "https://github.com/eclipse-openj9/openj9/commit/1286b4fb1e29a996af3053bf9e8742fd8bde2c74", "message": "CMake: Fix nasm define handling\n\nBy default cmake does not add preprocessor define options when building\nnasm objects. To work around this, add <DEFINES> to\nCMAKE_ASM_NASM_COMPILE_OBJECT\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-10-21T17:43:35Z", "type": "forcePushed"}, {"oid": "acec31615a58b506c5a98a3ab04f035596c26610", "url": "https://github.com/eclipse-openj9/openj9/commit/acec31615a58b506c5a98a3ab04f035596c26610", "message": "CMake: Fix nasm define handling\n\nBy default cmake does not add preprocessor define options when building\nnasm objects. To work around this, add <DEFINES> to\nCMAKE_ASM_NASM_COMPILE_OBJECT\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-10-26T15:55:43Z", "type": "commit"}, {"oid": "acec31615a58b506c5a98a3ab04f035596c26610", "url": "https://github.com/eclipse-openj9/openj9/commit/acec31615a58b506c5a98a3ab04f035596c26610", "message": "CMake: Fix nasm define handling\n\nBy default cmake does not add preprocessor define options when building\nnasm objects. To work around this, add <DEFINES> to\nCMAKE_ASM_NASM_COMPILE_OBJECT\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-10-26T15:55:43Z", "type": "forcePushed"}]}