{"pr_number": 9091, "pr_title": "Enable c99 interfaces on zos", "pr_createdAt": "2020-04-02T15:54:06Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9091", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcyMzE0Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/9091#discussion_r402723143", "bodyText": "This doesn't seem sufficient or complete as there are several other references to c89 on zOS:\nhttps://github.com/eclipse/openj9/blob/d1eb4ed8225550c810bf4b6a7e9d84f0b10b63e2/runtime/gc_glue_java/configure_includes/configure_zos_390.mk.ftl#L72-L73\nhttps://github.com/eclipse/openj9/blob/2f295ea91cdd97ff37eb5d164fc63014ea718bc7/runtime/ddr/autoblob_rules.mk#L46 (several in this file)\nhttps://github.com/eclipse/openj9/blob/fbbe1cd6b3fadbddf979d30239ff3dbf409b5e44/buildspecs/zos_390-64.spec#L88-L89 (same in other z-specs)", "author": "DanHeidinga", "createdAt": "2020-04-03T03:55:02Z", "path": "runtime/makelib/targets.mk.zos.inc.ftl", "diffHunk": "@@ -68,7 +68,7 @@ ifdef j9vm_uma_supportsIpv6\n   UMA_ZOS_FLAGS += -DIPv6_FUNCTION_SUPPORT\n endif\n \n-UMA_ZOS_FLAGS += -DJ9ZOS390 -DLONGLONG -DJ9VM_TIERED_CODE_CACHE -D_ALL_SOURCE -D_XOPEN_SOURCE_EXTENDED -DIBM_ATOE -D_POSIX_SOURCE\n+UMA_ZOS_FLAGS += -DJ9ZOS390 -DLONGLONG -DJ9VM_TIERED_CODE_CACHE -D_ALL_SOURCE -D_XOPEN_SOURCE_EXTENDED -DIBM_ATOE -D_POSIX_SOURCE -D_ISOC99_SOURCE", "originalCommit": "f8a318eab8d2031d8bf044ac2689a0ce9105fa7b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI1NjUzNQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9091#discussion_r403256535", "bodyText": "That's fine. The _ISOC99_SOURCE flag is only meant to expose std library changes which don't require a c99 compiler. (https://www.ibm.com/support/knowledgecenter/SSLTBW_2.4.0/com.ibm.zos.v2r4.cbcpx01/c99ftmacros.htm) Although looking at it, we probably also want __STDC_LIMIT_MACROS", "author": "dnakamura", "createdAt": "2020-04-03T19:14:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcyMzE0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzI3MjEwMg==", "url": "https://github.com/eclipse-openj9/openj9/pull/9091#discussion_r403272102", "bodyText": "Please update the commit to have both flags and add a comment to the UMA file describing why we need these flags.  When we update to a c99 compiler, it will be easier to find and remove these flags then", "author": "DanHeidinga", "createdAt": "2020-04-03T19:39:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjcyMzE0Mw=="}], "type": "inlineReview"}, {"oid": "7b9fa4fd925ff354520dc89a4e77ccffc75cb165", "url": "https://github.com/eclipse-openj9/openj9/commit/7b9fa4fd925ff354520dc89a4e77ccffc75cb165", "message": "Enable c99 interfaces on zos\n\nNeeded for eclipse/omr#4645\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-04-03T20:52:22Z", "type": "commit"}, {"oid": "7b9fa4fd925ff354520dc89a4e77ccffc75cb165", "url": "https://github.com/eclipse-openj9/openj9/commit/7b9fa4fd925ff354520dc89a4e77ccffc75cb165", "message": "Enable c99 interfaces on zos\n\nNeeded for eclipse/omr#4645\n\nSigned-off-by: Devin Nakamura <devinn@ca.ibm.com>", "committedDate": "2020-04-03T20:52:22Z", "type": "forcePushed"}]}