{"pr_number": 11017, "pr_title": "Use package-private fields to avoid accessor functions", "pr_createdAt": "2020-10-28T13:13:04Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11017", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUwNDExOQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11017#discussion_r513504119", "bodyText": "Won't removing the initialization to -1 break the code by returning 0 for the offset?\n\t\tMetadataCache.cachedSimpleNameOffset = getFieldOffset(\n\t\t\t\tMetadataCache.class, \"cachedSimpleName\", MetadataCache.cachedSimpleNameOffset);\n\nprivate long getFieldOffset(Class<?> hostClass, String fieldName, long initialOffset) {\n\tif (initialOffset == -1) {\n...\n\t}\n\treturn initialOffset;", "author": "pshipton", "createdAt": "2020-10-28T14:46:48Z", "path": "jcl/src/java.base/share/classes/java/lang/Class.java", "diffHunk": "@@ -240,11 +240,11 @@\n \tprivate static final class MetadataCache {\n \t\tMetadataCache() {}\n \n-\t\tprivate static long cachedCanonicalNameOffset = -1;\n-\t\tprivate static long cachedSimpleNameOffset = -1;\n+\t\tstatic long cachedCanonicalNameOffset;", "originalCommit": "be5dc2aa3be35053242b82af2b1944c8bd7a1d4e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUwODE4OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11017#discussion_r513508188", "bodyText": "Yes, you're right. I'll restore that initialization.", "author": "keithc-ca", "createdAt": "2020-10-28T14:51:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUwNDExOQ=="}], "type": "inlineReview"}, {"oid": "4021d2acf4598c56ad1e97917f676cf536ead0d7", "url": "https://github.com/eclipse-openj9/openj9/commit/4021d2acf4598c56ad1e97917f676cf536ead0d7", "message": "Use package-private fields to avoid accessor functions\n\n* conditionally include CacheKey.newDeclaredPublicMethodsKey()\n* make some private methods static\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-28T15:30:42Z", "type": "commit"}, {"oid": "4021d2acf4598c56ad1e97917f676cf536ead0d7", "url": "https://github.com/eclipse-openj9/openj9/commit/4021d2acf4598c56ad1e97917f676cf536ead0d7", "message": "Use package-private fields to avoid accessor functions\n\n* conditionally include CacheKey.newDeclaredPublicMethodsKey()\n* make some private methods static\n\nSigned-off-by: Keith W. Campbell <keithc@ca.ibm.com>", "committedDate": "2020-10-28T15:30:42Z", "type": "forcePushed"}]}