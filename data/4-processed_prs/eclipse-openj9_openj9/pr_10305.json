{"pr_number": 10305, "pr_title": "Handle -XX:[+|-]PortableSharedCache in the VM init module", "pr_createdAt": "2020-07-30T21:59:32Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10305", "timeline": [{"oid": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "url": "https://github.com/eclipse-openj9/openj9/commit/fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "message": "Fix compressedref shift to 3 for portable SCC\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-07-30T22:27:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyOTcxMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465229710", "bodyText": "I don't like style portableSharedCacheIndex == noportableSharedCacheIndex means both not found.\nIt is hard to read. Please be explicit.\nAlso this change means we always will run with shift 3 in any container run by default.\n@DanHeidinga @vijaysun-omr Most of container runs uses small heap so use bit shift 0. Do we want to change this behaviour for all runs in container? 0-shift has better performance\nAlso please change formatting. Should be\n    if (....) {\n        ....\n    } else if () {\n        ....\n    } else if () {\n        ....\n    } else {\n        ....\n    }", "author": "dmitripivkine", "createdAt": "2020-08-04T17:57:39Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,25 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\textensions->shouldForceToLowMemoryHeapCeilingShiftIfPossible = true;\n+\t\t}\n+\t\telse if (portableSharedCacheIndex < noportableSharedCacheIndex) {\n+\t\t\textensions->shouldForceToLowMemoryHeapCeilingShiftIfPossible = false;\n+\t\t}\n+\t\telse {", "originalCommit": "fd33010ab81c3a083c106ca0e31959a1bbe6f3ff", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIzNTY3Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465235677", "bodyText": "Also if we want this behaviour for containers I believe this is wrong place to set it. It should be set explicitly in MM_Configuration::initializeRunTimeObjectAlignmentAndCRShift(). Parser should not make such decisions.\nI understand it is require to pass more information to recognize case VMOPT_XXNOPORTABLESHAREDCACHE is requested.", "author": "dmitripivkine", "createdAt": "2020-08-04T18:08:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyOTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI2ODUwOA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465268508", "bodyText": "Also if we want this behaviour for containers I believe this is wrong place to set it. It should be set explicitly in MM_Configuration::initializeRunTimeObjectAlignmentAndCRShift(). Parser should not make such decisions.\nI understand it is require to pass more information to recognize case VMOPT_XXNOPORTABLESHAREDCACHE is requested.\n\nOkay I will move the decision to initializeRunTimeObjectAlignmentAndCRShift().\n\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n\t\t\t/* At least one option is set. Find the right most one. */\n\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n\t\t\t\textensions->portableSharedCacheEnabled = true;\n\t\t\t} else {\n\t\t\t\textensions->portableSharedCacheEnabled = false;\n\t\t\t}\n\t\t\textensions->portableSharedCacheExplicitlySet = true;\n\t\t} else {\n\t\t\textensions->portableSharedCacheExplicitlySet = false;\n\t\t}\n\nThough with that, one boolean variable won't be enough. The container decision is made if user has not explicitly set the option.", "author": "harryyu1994", "createdAt": "2020-08-04T19:09:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyOTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTMwNDQ0Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465304447", "bodyText": "Also this change means we always will run with shift 3 in any container run by default.\n\nI think shift 3 should be used when the JVM is run in container AND uses AOT (for portability reasons)", "author": "mpirvu", "createdAt": "2020-08-04T20:15:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTIyOTcxMA=="}], "type": "inlineReview"}, {"oid": "876a329510aba7792439a9109ca5fbf700cbf8e6", "url": "https://github.com/eclipse-openj9/openj9/commit/876a329510aba7792439a9109ca5fbf700cbf8e6", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-04T18:50:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI2NTYxNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465265617", "bodyText": "please join two lines to one:\n    } else {", "author": "dmitripivkine", "createdAt": "2020-08-04T19:03:54Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,19 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t}\n+\t\t\telse {", "originalCommit": "876a329510aba7792439a9109ca5fbf700cbf8e6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI2NjkxMw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r465266913", "bodyText": "oops, didn't realize this was the format problem you were talking about, now i get it, thanks!", "author": "harryyu1994", "createdAt": "2020-08-04T19:06:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTI2NTYxNw=="}], "type": "inlineReview"}, {"oid": "9cd72575ca91a78b6a410d6b0c44648a4b949301", "url": "https://github.com/eclipse-openj9/openj9/commit/9cd72575ca91a78b6a410d6b0c44648a4b949301", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-04T19:06:24Z", "type": "forcePushed"}, {"oid": "e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "url": "https://github.com/eclipse-openj9/openj9/commit/e21fb16a29b0dd7daf2b7747276424e5b2b8e861", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-04T22:31:39Z", "type": "forcePushed"}, {"oid": "a27cff8036e66ba151ea3fb2dee5bc86106bb841", "url": "https://github.com/eclipse-openj9/openj9/commit/a27cff8036e66ba151ea3fb2dee5bc86106bb841", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-05T21:15:00Z", "type": "forcePushed"}, {"oid": "db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "url": "https://github.com/eclipse-openj9/openj9/commit/db7f5f8a1f279d772cea1202fb5e8cb0b1f481f1", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-05T21:31:15Z", "type": "forcePushed"}, {"oid": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "url": "https://github.com/eclipse-openj9/openj9/commit/eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-05T22:00:09Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU3NTkwMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466575900", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tchar optionsBuffer[2*EsMaxPath];\n          \n          \n            \n            \t\t\tchar optionsBuffer[2 * EsMaxPath];", "author": "dmitripivkine", "createdAt": "2020-08-06T17:34:28Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+\n+\t\tIDATA shareClassesIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xshareclasses\", NULL);\n+\t\tif (shareClassesIndex >= 0) {\n+\t\t\tchar optionsBuffer[2*EsMaxPath];", "originalCommit": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU3NjA5Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466576092", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2*EsMaxPath) == OPTION_OK) {\n          \n          \n            \n            \t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2 * EsMaxPath) == OPTION_OK) {", "author": "dmitripivkine", "createdAt": "2020-08-06T17:34:48Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+\n+\t\tIDATA shareClassesIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xshareclasses\", NULL);\n+\t\tif (shareClassesIndex >= 0) {\n+\t\t\tchar optionsBuffer[2*EsMaxPath];\n+\t\t\tchar* optionsBufferPtr = (char*)optionsBuffer;\n+\n+\t\t\tif (GET_OPTION_VALUES(shareClassesIndex, ':', ',', &optionsBufferPtr, 2*EsMaxPath) == OPTION_OK) {", "originalCommit": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjY3NzU3NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r466677575", "bodyText": "we can skip code below if extensions->shouldForceCeilingShiftForContainers is not set to true", "author": "dmitripivkine", "createdAt": "2020-08-06T20:48:20Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1247,6 +1247,42 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+\t{\n+#if defined(J9VM_ARCH_X86)\n+\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t} else {\n+\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t}\n+\t\t} else {\n+\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t}\n+", "originalCommit": "eebf4e5f3f35329d4293d7d45ca7aaf265dae4e9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "url": "https://github.com/eclipse-openj9/openj9/commit/80bbf9f95ddd19db7a727a0cc8342a4587600d1c", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-10T17:59:45Z", "type": "forcePushed"}, {"oid": "2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "url": "https://github.com/eclipse-openj9/openj9/commit/2e47b4d2de1ea7e2d8d67a620ece3efb755c7a97", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T19:21:49Z", "type": "forcePushed"}, {"oid": "0376436a2059c9251b52811c4a9e79f476318c35", "url": "https://github.com/eclipse-openj9/openj9/commit/0376436a2059c9251b52811c4a9e79f476318c35", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T19:23:05Z", "type": "forcePushed"}, {"oid": "1b7dee748b18e1fe61a396092df0aac803661828", "url": "https://github.com/eclipse-openj9/openj9/commit/1b7dee748b18e1fe61a396092df0aac803661828", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T19:26:54Z", "type": "forcePushed"}, {"oid": "1fbcd7669a3f0d08bad161699223c80ecc500faf", "url": "https://github.com/eclipse-openj9/openj9/commit/1fbcd7669a3f0d08bad161699223c80ecc500faf", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T19:54:18Z", "type": "forcePushed"}, {"oid": "bd58a72463b64839745e76ef44ebff229f2a1b6a", "url": "https://github.com/eclipse-openj9/openj9/commit/bd58a72463b64839745e76ef44ebff229f2a1b6a", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T20:05:30Z", "type": "forcePushed"}, {"oid": "2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "url": "https://github.com/eclipse-openj9/openj9/commit/2ff061a8a6d8879ebd9d9c837c19b4a28bbeeeb1", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T20:25:22Z", "type": "forcePushed"}, {"oid": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "url": "https://github.com/eclipse-openj9/openj9/commit/6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "message": "Parse -XX:[+|-]PortableSharedCache in gc parser\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-25T20:29:07Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzMxMDc0MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477310741", "bodyText": "There are a few things I have problem with:\n\nIf we want to enable feature for x86 platforms only we should have boolean responsible to enable/disable feature.\nAn initialization of this variable should be only place where #if defined(J9VM_ARCH_X86) is used. All other related code should be platform independent (should exist for all platforms and not for x86 only). This helps in future to expand feature to other platforms.\nThere is a parsing of options parsed earlier. Would be better to reuse result of previous parsing (and maybe even deeper - results of logical analysis made based on previous parsing)\nParsing of options under logical condition might lead to potential existence of cases with unconsumed arguments. Parsing of provided options should be done regardless of applicability of them. I understand this is second parsing, so see previous bullet\nLast but not least this is absolutely wrong place to set extensions->shouldForceCeilingShiftForContainers in case if none of the options are discovered. This new value for variable must be initialized as default before this parsing in a proper place.\n\nI believe this is wrong place for this code. I suggest:\n\ncreate required booleans somewhere in VM substructure (find a right place)\ninitialize them properly at the time of first options parsing in jvminit.c\nif it is possible to add such booleans visible from OMR code you don't need these booleans in GCExtensionsBase. Use OMR VM variables instead directly.\nif such booleans are visible from OpenJ9 only you still need new variables in GCExtensionsBase. These variables should be initialized properly for standalone OMR and be set at OpenJ9 side accordinly (somewhere in mminit.cpp I guess)\n\nSo I believe we don't need any change in this file at all. This is wrong place to do it. There is a much better way to do it.", "author": "dmitripivkine", "createdAt": "2020-08-26T13:43:30Z", "path": "runtime/gc_modron_startup/mmparse.cpp", "diffHunk": "@@ -1260,6 +1260,29 @@ gcParseXXArguments(J9JavaVM *vm)\n \t\t}\n \t}\n \n+#if defined(J9VM_ARCH_X86)\n+\t{\n+\t\tif (NULL != vm->sharedClassPreinitConfig) {\n+\t\t\tIDATA argIndexXaot = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xaot\", 0);\n+\t\t\tIDATA argIndexXnoaot = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, \"-Xnoaot\", 0);\n+\t\t\tif (argIndexXaot >= argIndexXnoaot) { \n+\t\t\t\tIDATA portableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXPORTABLESHAREDCACHE, NULL);\n+\t\t\t\tIDATA noportableSharedCacheIndex = FIND_ARG_IN_VMARGS(EXACT_MATCH, VMOPT_XXNOPORTABLESHAREDCACHE, NULL);\n+\t\t\t\tif (portableSharedCacheIndex != noportableSharedCacheIndex) {\n+\t\t\t\t\t/* At least one option is set. Find the right most one. */\n+\t\t\t\t\tif (portableSharedCacheIndex > noportableSharedCacheIndex) {\n+\t\t\t\t\t\textensions->portableSharedCacheEnabled = true;\n+\t\t\t\t\t} else {\n+\t\t\t\t\t\textensions->portableSharedCacheEnabled = false;\n+\t\t\t\t\t}\n+\t\t\t\t} else {\n+\t\t\t\t\textensions->shouldForceCeilingShiftForContainers = true;\n+\t\t\t\t}\n+\t\t\t}\n+\t\t}\n+\t}\n+#endif /* defined(J9VM_ARCH_X86) */\n+", "originalCommit": "6b2f5f0082da4189dfe9d1a777efb7ea060393a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8fc03ce22430ef64c5775421313e570ce1a40d29", "url": "https://github.com/eclipse-openj9/openj9/commit/8fc03ce22430ef64c5775421313e570ce1a40d29", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T20:46:34Z", "type": "forcePushed"}, {"oid": "16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "url": "https://github.com/eclipse-openj9/openj9/commit/16dfdc4176572c4cc9f775e5c33c32ac64ad985f", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nIssue: 7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T20:49:30Z", "type": "forcePushed"}, {"oid": "7a33796c880f03f20934b99942562f98475b8bb6", "url": "https://github.com/eclipse-openj9/openj9/commit/7a33796c880f03f20934b99942562f98475b8bb6", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T20:54:53Z", "type": "forcePushed"}, {"oid": "c505da6d1d9b505d28f43c2ced9794388ac1bd53", "url": "https://github.com/eclipse-openj9/openj9/commit/c505da6d1d9b505d28f43c2ced9794388ac1bd53", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T21:04:11Z", "type": "forcePushed"}, {"oid": "a366256c07207d9428299f383973da374be6ca3b", "url": "https://github.com/eclipse-openj9/openj9/commit/a366256c07207d9428299f383973da374be6ca3b", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T21:23:14Z", "type": "forcePushed"}, {"oid": "f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "url": "https://github.com/eclipse-openj9/openj9/commit/f2d328e54a99497cf6e91f9a382c5c22e32f19b6", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T21:24:23Z", "type": "forcePushed"}, {"oid": "03606c73d02e506509960a5c7e23265835ddbccf", "url": "https://github.com/eclipse-openj9/openj9/commit/03606c73d02e506509960a5c7e23265835ddbccf", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T21:29:41Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwNzM0Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477607342", "bodyText": "it is much better but I still don't like #if defined(J9VM_ARCH_X86) here. This is not clear connection why shift should be forced for x86 only (something else hidden here happen somewhere, right?) I believe would be better to have global feature control boolean and use it here instead of true. Or you can just set bit for x86 only if it is fits better to your logic.", "author": "dmitripivkine", "createdAt": "2020-08-26T21:45:13Z", "path": "runtime/gc_modron_startup/mminit.cpp", "diffHunk": "@@ -492,6 +492,12 @@ j9gc_initialize_heap(J9JavaVM *vm, IDATA *memoryParameterTable, UDATA heapBytesR\n \t}\n #endif\n \n+#if defined(J9VM_ARCH_X86)\n+\tif (J9_ARE_ANY_BITS_SET(vm->extendedRuntimeFlags2, J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE)) {\n+\t\textensions->shouldForceLowMemoryHeapCeilingShiftIfPossible = true;\n+\t}\n+#endif /* defined(J9VM_ARCH_X86) */", "originalCommit": "03606c73d02e506509960a5c7e23265835ddbccf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwOTg0Mw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477609843", "bodyText": "the rational for this when you need to expand the feature to another platform would be no need to modify this code again... Ideally should be a single place single boolean to control enabled/disabled platforms", "author": "dmitripivkine", "createdAt": "2020-08-26T21:51:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwNzM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYxNzQzNg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477617436", "bodyText": "Also is it correct place to set variable? Looks like it is too late... Should be set at the beginning of this function before line 321:\n    extensions->heap = extensions->configuration->createHeap(&env, heapBytesRequested);", "author": "dmitripivkine", "createdAt": "2020-08-26T22:10:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwNzM0Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYyNDU5OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477624599", "bodyText": "Okay I agree, it makes more sense to set J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE for x86 only.", "author": "harryyu1994", "createdAt": "2020-08-26T22:29:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzYwNzM0Mg=="}], "type": "inlineReview"}, {"oid": "f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "url": "https://github.com/eclipse-openj9/openj9/commit/f7b54e8d620b7e0f39aabe4f9a517ad5cfdc011d", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T22:30:13Z", "type": "forcePushed"}, {"oid": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "url": "https://github.com/eclipse-openj9/openj9/commit/e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-26T22:35:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY0OTU1NA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477649554", "bodyText": "J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE may set even if AOT is off. I would put this code in the same block that sets vm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT; because only if AOT is enabled make sense to generate portable code.", "author": "mpirvu", "createdAt": "2020-08-26T23:08:12Z", "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1766,7 +1788,22 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\t\t}\n \t\t\t\t\tpiConfig->sharedClassReadWriteBytes = -1;\t\t\t\t\t/* -1 == proportion of cache size */\n \t\t\t\t\tvm->sharedClassPreinitConfig = piConfig;\n-\t\t\t\t}\n+\n+\t\t\t\t\tif (argIndexXaot >= argIndexXnoaot) {\n+\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;\n+\t\t\t\t\t}\n+\n+#if defined(J9VM_ARCH_X86)\n+\t\t\t\t\tif (argIndexXXPortableSharedCache > argIndexXXNoPortableSharedCache) {", "originalCommit": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY1MzAwOQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477653009", "bodyText": "Just curious: what does this do? Emits a trace point that specifies the enablement of the portable AOT?", "author": "mpirvu", "createdAt": "2020-08-26T23:11:17Z", "path": "runtime/compiler/control/rossa.cpp", "diffHunk": "@@ -1976,7 +1976,7 @@ aboutToBootstrap(J9JavaVM * javaVM, J9JITConfig * jitConfig)\n \n    UT_MODULE_LOADED(J9_UTINTERFACE_FROM_VM(javaVM));\n    Trc_JIT_VMInitStages_Event1(curThread);\n-   Trc_JIT_portableSharedCache_enabled_or_disabled(curThread, TRUE == javaVM->sharedCacheAPI->sharedCachePortable ? 1 : 0);\n+   Trc_JIT_portableSharedCache_enabled_or_disabled(curThread, J9_ARE_ANY_BITS_SET(javaVM->extendedRuntimeFlags2, J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE) ? 1 : 0);", "originalCommit": "e6a41e9de079f5a76f0adb1e6df1020cb992ae57", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Nzc0OTg2Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r477749867", "bodyText": "Yes. And it is used by testing.", "author": "harryyu1994", "createdAt": "2020-08-27T00:16:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzY1MzAwOQ=="}], "type": "inlineReview"}, {"oid": "5b8479c1d11d921d3b011796377855dd4feb7608", "url": "https://github.com/eclipse-openj9/openj9/commit/5b8479c1d11d921d3b011796377855dd4feb7608", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T14:50:46Z", "type": "forcePushed"}, {"oid": "c34f33974b017dd6c33d810287536ca208258df3", "url": "https://github.com/eclipse-openj9/openj9/commit/c34f33974b017dd6c33d810287536ca208258df3", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT\nto cache the parsed results of -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T14:53:26Z", "type": "forcePushed"}, {"oid": "f2b6c37c973899a98e425c57fd84d29063b80003", "url": "https://github.com/eclipse-openj9/openj9/commit/f2b6c37c973899a98e425c57fd84d29063b80003", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T14:57:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY2NjI2Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478666262", "bodyText": "Please define one variable each line and initialize them to 0.", "author": "hangshao0", "createdAt": "2020-08-27T20:07:36Z", "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1675,10 +1675,27 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t{\n \t\t\t\tIDATA argIndex3, argIndex4, argIndex5, argIndex6, argIndex7, argIndex8;\n \t\t\t\tIDATA argIndex9 = 0;\n+\t\t\t\tBOOLEAN sharedClassDisabled = FALSE;\n+\t\t\t\tIDATA argIndexXXPortableSharedCache, argIndexXXNoPortableSharedCache, argIndexXaot, argIndexXnoaot;", "originalCommit": "f2b6c37c973899a98e425c57fd84d29063b80003", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY2NjgzMw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478666833", "bodyText": "Missing spaces before and after \"+\".", "author": "hangshao0", "createdAt": "2020-08-27T20:08:35Z", "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1675,10 +1675,27 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t{\n \t\t\t\tIDATA argIndex3, argIndex4, argIndex5, argIndex6, argIndex7, argIndex8;\n \t\t\t\tIDATA argIndex9 = 0;\n+\t\t\t\tBOOLEAN sharedClassDisabled = FALSE;\n+\t\t\t\tIDATA argIndexXXPortableSharedCache, argIndexXXNoPortableSharedCache, argIndexXaot, argIndexXnoaot;\n \n \t\t\t\tvm->sharedClassPreinitConfig = NULL;\n \n \t\t\t\targIndex = FIND_ARG_IN_VMARGS(OPTIONAL_LIST_MATCH, VMOPT_XSHARECLASSES, NULL);\n+\t\t\t\tif (argIndex >= 0) {\n+\t\t\t\t\tchar optionsBuffer[2 * J9SH_MAXPATH];\n+\t\t\t\t\tchar* optionsBufferPtr = (char*)optionsBuffer;\n+\n+\t\t\t\t\tif (GET_OPTION_VALUES(argIndex, ':', ',', &optionsBufferPtr, 2 * J9SH_MAXPATH) == OPTION_OK) {\n+\t\t\t\t\t\twhile (*optionsBufferPtr) {\n+\t\t\t\t\t\t\tif (try_scan(&optionsBufferPtr, OPT_NONE)) {\n+\t\t\t\t\t\t\t\tsharedClassDisabled = TRUE;\n+\t\t\t\t\t\t\t\tbreak;\n+\t\t\t\t\t\t\t}\n+\t\t\t\t\t\t\toptionsBufferPtr += strlen(optionsBufferPtr)+1;\n+\t\t\t\t\t\t}", "originalCommit": "f2b6c37c973899a98e425c57fd84d29063b80003", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY3MzEzOA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478673138", "bodyText": "Does this == case mean that these options are not found in the command line ?", "author": "hangshao0", "createdAt": "2020-08-27T20:20:58Z", "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -1766,7 +1788,24 @@ IDATA VMInitStages(J9JavaVM *vm, IDATA stage, void* reserved) {\n \t\t\t\t\t}\n \t\t\t\t\tpiConfig->sharedClassReadWriteBytes = -1;\t\t\t\t\t/* -1 == proportion of cache size */\n \t\t\t\t\tvm->sharedClassPreinitConfig = piConfig;\n+\n+\t\t\t\t\tif (argIndexXaot >= argIndexXnoaot) {\n+\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;\n+#if defined(J9VM_ARCH_X86)\n+\t\t\t\t\t\tif (argIndexXXPortableSharedCache > argIndexXXNoPortableSharedCache) {\n+\t\t\t\t\t\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE;\n+\t\t\t\t\t\t} else if (argIndexXXPortableSharedCache == argIndexXXNoPortableSharedCache) {", "originalCommit": "f2b6c37c973899a98e425c57fd84d29063b80003", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY3NzE1OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478677158", "bodyText": "Yes, == means not found so we follow the default behavior which is enabled by default in containers and disabled by default otherwise.", "author": "harryyu1994", "createdAt": "2020-08-27T20:29:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY3MzEzOA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjI2MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478682261", "bodyText": "OK. Then please add a comment saying that none of these options are used in this case.", "author": "hangshao0", "createdAt": "2020-08-27T20:39:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY3MzEzOA=="}], "type": "inlineReview"}, {"oid": "8e479dd87a361d7eb9eba7ada381fcafad24d07c", "url": "https://github.com/eclipse-openj9/openj9/commit/8e479dd87a361d7eb9eba7ada381fcafad24d07c", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:25:49Z", "type": "forcePushed"}, {"oid": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "url": "https://github.com/eclipse-openj9/openj9/commit/2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:27:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MTA3OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478681078", "bodyText": "Is this correct ? setting J9_EXTENDED_RUNTIME2_ENABLE_AOT when xnoaot is found.", "author": "hangshao0", "createdAt": "2020-08-27T20:37:00Z", "path": "runtime/vm/jvminit.c", "diffHunk": "@@ -2866,6 +2906,7 @@ modifyDllLoadTable(J9JavaVM * vm, J9Pool* loadTable, J9VMInitArgs* j9vm_args)\n \t\tJVMINIT_VERBOSE_INIT_VM_TRACE(vm, \"-Xint set\\n\");\n \t}\n \tif (xnoaot) {\n+\t\tvm->extendedRuntimeFlags2 |= J9_EXTENDED_RUNTIME2_ENABLE_AOT;", "originalCommit": "2cb1b442d1acb220c2038a10bc34cb2a9c3319cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MTg2MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478681861", "bodyText": "Sorry I just fixed this. Should be under xaot.", "author": "harryyu1994", "createdAt": "2020-08-27T20:38:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MTA3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MjEyNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/10305#discussion_r478682127", "bodyText": "I'm going to double check the logic here again", "author": "harryyu1994", "createdAt": "2020-08-27T20:39:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODY4MTA3OA=="}], "type": "inlineReview"}, {"oid": "cc32ccb979d36f8344f4087251c680279b62372b", "url": "https://github.com/eclipse-openj9/openj9/commit/cc32ccb979d36f8344f4087251c680279b62372b", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:37:23Z", "type": "forcePushed"}, {"oid": "b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "url": "https://github.com/eclipse-openj9/openj9/commit/b51e01d23fb1365eb254454ea7f5c7ad3ae570f2", "message": "Parse -XX:[+|-]PortableSharedCache and -Xaot in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache and -Xaot to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:44:37Z", "type": "forcePushed"}, {"oid": "2d85c4176d6fe479336ace0c58739d54ef4a0d86", "url": "https://github.com/eclipse-openj9/openj9/commit/2d85c4176d6fe479336ace0c58739d54ef4a0d86", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier\npoint in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE\nand J9_EXTENDED_RUNTIME2_ENABLE_AOT to cache the parsing results\nof -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:49:01Z", "type": "forcePushed"}, {"oid": "82e56fe63f789a26f876a21e58e794199e9882a7", "url": "https://github.com/eclipse-openj9/openj9/commit/82e56fe63f789a26f876a21e58e794199e9882a7", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T20:58:25Z", "type": "forcePushed"}, {"oid": "3d5d5279b14fe401213f1ddfb019a926bc452de9", "url": "https://github.com/eclipse-openj9/openj9/commit/3d5d5279b14fe401213f1ddfb019a926bc452de9", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T22:04:02Z", "type": "forcePushed"}, {"oid": "13197744c78a3a92a24572ce8d7aa2a37ab957e7", "url": "https://github.com/eclipse-openj9/openj9/commit/13197744c78a3a92a24572ce8d7aa2a37ab957e7", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-27T22:36:04Z", "type": "forcePushed"}, {"oid": "fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "url": "https://github.com/eclipse-openj9/openj9/commit/fc5c0ce6aecac648ac6dc8e475a77cdaee441006", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-31T18:59:49Z", "type": "forcePushed"}, {"oid": "73d65fac67f555044aa5646f3501a0651df6770a", "url": "https://github.com/eclipse-openj9/openj9/commit/73d65fac67f555044aa5646f3501a0651df6770a", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-08-31T19:16:19Z", "type": "forcePushed"}, {"oid": "55468e90bcb2944aa2510fda9cfc44e1a638a107", "url": "https://github.com/eclipse-openj9/openj9/commit/55468e90bcb2944aa2510fda9cfc44e1a638a107", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-09-08T04:15:55Z", "type": "commit"}, {"oid": "55468e90bcb2944aa2510fda9cfc44e1a638a107", "url": "https://github.com/eclipse-openj9/openj9/commit/55468e90bcb2944aa2510fda9cfc44e1a638a107", "message": "Handle -XX:[+|-]PortableSharedCache in the VM init module\n\nMove the parsing of -XX:[+|-]PortableSharedCache to an earlier point in the VM init module\nAdd J9_EXTENDED_RUNTIME2_ENABLE_PORTABLE_SHARED_CACHE and J9_EXTENDED_RUNTIME2_ENABLE_AOT i\nto cache the parsing results of -XX:[+|-]PortableSharedCache and -Xaot/-Xnoaot\nSet Compressed reference shift to 3 (low memory heap ceiling shift) by default in containers\n\nIssue: #7965\n\nSigned-off-by: Harry Yu <harryyu1994@gmail.com>", "committedDate": "2020-09-08T04:15:55Z", "type": "forcePushed"}]}