{"pr_number": 8998, "pr_title": "Enable interp_atomicFreeJni for OSX", "pr_createdAt": "2020-03-26T21:31:47Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/8998", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxOTgwNA==", "url": "https://github.com/eclipse-openj9/openj9/pull/8998#discussion_r398919804", "bodyText": "As a general rule, we include system headers before any openj9 ones. There's no need to keep the elif nesting, but the include should move up.", "author": "gacholio", "createdAt": "2020-03-26T22:02:45Z", "path": "runtime/vm/FlushProcessWriteBuffers.cpp", "diffHunk": "@@ -22,11 +22,12 @@\n \n #if defined(WIN32)\n #include <windows.h>\n-#elif defined(LINUX) || defined(AIXPPC) /* WIN32 */\n-#include <sys/mman.h>\n-#endif /* LINUX || AIXPPC */\n+#endif /* WIN32 */\n \n #include \"vm_internal.h\"\n+#if defined(J9UNIX) || defined(AIXPPC)", "originalCommit": "2827255b1a956787aa30e6c9bd1ddcfac27d6841", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyMzg0Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/8998#discussion_r398923842", "bodyText": "This is because J9UNIX is defined within j9comp.h included by vm_internal.h.\nIf it is preferred to keep system header ahead of  openj9 ones, #if defined(J9UNIX) || defined(AIXPPC) can be changed to #if defined(LINUX) || defined(AIXPPC) || defined(OSX).", "author": "JasonFengJ9", "createdAt": "2020-03-26T22:12:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxOTgwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkyNDc2OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/8998#discussion_r398924768", "bodyText": "I think that's a bit too ugly, so let's leave it.", "author": "gacholio", "createdAt": "2020-03-26T22:14:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxOTgwNA=="}], "type": "inlineReview"}, {"oid": "05bf1d849df5b33e7fc94865b58c98f8b7a33efb", "url": "https://github.com/eclipse-openj9/openj9/commit/05bf1d849df5b33e7fc94865b58c98f8b7a33efb", "message": "Enable interp_atomicFreeJni for OSX\n\nEnabled interp_atomicFreeJni, interp_atomicFreeJniUsesFlush and\ninterp_twoPassExclusive for two OSX specs;\nDefined J9UNIX for related code to support OSX Atomic-free JNI.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-03-26T22:05:42Z", "type": "commit"}, {"oid": "05bf1d849df5b33e7fc94865b58c98f8b7a33efb", "url": "https://github.com/eclipse-openj9/openj9/commit/05bf1d849df5b33e7fc94865b58c98f8b7a33efb", "message": "Enable interp_atomicFreeJni for OSX\n\nEnabled interp_atomicFreeJni, interp_atomicFreeJniUsesFlush and\ninterp_twoPassExclusive for two OSX specs;\nDefined J9UNIX for related code to support OSX Atomic-free JNI.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-03-26T22:05:42Z", "type": "forcePushed"}]}