{"pr_number": 10494, "pr_title": "AArch64: Implement monitor enter/exit VM helper call for value types", "pr_createdAt": "2020-08-31T05:52:24Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10494", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxOTc2NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/10494#discussion_r479919765", "bodyText": "Use TR_CHelper for jitNewValue and jitNewValueNoZeroInit regardless of J9VM_JIT_NEW_DUAL_HELPERS, because there are no definitions of old_fast_jitNewValue/old_fast_jitNewValueNoZeroInit() functions in cnathelp.cpp.", "author": "knn-k", "createdAt": "2020-08-31T06:28:08Z", "path": "runtime/compiler/runtime/Runtime.cpp", "diffHunk": "@@ -1008,26 +1008,25 @@ void initializeCodeRuntimeHelperTable(J9JITConfig *jitConfig, char isSMP)\n \n #if (defined(TR_HOST_X86) || defined(TR_HOST_POWER) || defined(TR_HOST_S390)) && defined(J9VM_JIT_NEW_DUAL_HELPERS)\n    SET(TR_newObject,                  (void *)jitNewObject,              TR_CHelper);\n-   SET(TR_newValue,                   (void *)jitNewValue,              TR_CHelper);\n    SET(TR_newArray,                   (void *)jitNewArray,               TR_CHelper);\n    SET(TR_aNewArray,                  (void *)jitANewArray,              TR_CHelper);\n \n-   SET(TR_newObjectNoZeroInit,        (void *)jitNewObjectNoZeroInit, TR_CHelper);\n-   SET(TR_newValueNoZeroInit,        (void *)jitNewValueNoZeroInit, TR_CHelper);\n-   SET(TR_newArrayNoZeroInit,         (void *)jitNewArrayNoZeroInit,  TR_CHelper);\n-   SET(TR_aNewArrayNoZeroInit,        (void *)jitANewArrayNoZeroInit, TR_CHelper);\n+   SET(TR_newObjectNoZeroInit,        (void *)jitNewObjectNoZeroInit,    TR_CHelper);\n+   SET(TR_newArrayNoZeroInit,         (void *)jitNewArrayNoZeroInit,     TR_CHelper);\n+   SET(TR_aNewArrayNoZeroInit,        (void *)jitANewArrayNoZeroInit,    TR_CHelper);\n #else\n    SET(TR_newObject,                  (void *)jitNewObject,              TR_Helper);\n-   SET(TR_newValue,                  (void *)jitNewValue,              TR_Helper);\n    SET(TR_newArray,                   (void *)jitNewArray,               TR_Helper);\n    SET(TR_aNewArray,                  (void *)jitANewArray,              TR_Helper);\n \n-   SET(TR_newObjectNoZeroInit,        (void *)jitNewObjectNoZeroInit, TR_Helper);\n-   SET(TR_newValueNoZeroInit,        (void *)jitNewValueNoZeroInit, TR_Helper);\n-   SET(TR_newArrayNoZeroInit,         (void *)jitNewArrayNoZeroInit,  TR_Helper);\n-   SET(TR_aNewArrayNoZeroInit,        (void *)jitANewArrayNoZeroInit, TR_Helper);\n+   SET(TR_newObjectNoZeroInit,        (void *)jitNewObjectNoZeroInit,    TR_Helper);\n+   SET(TR_newArrayNoZeroInit,         (void *)jitNewArrayNoZeroInit,     TR_Helper);\n+   SET(TR_aNewArrayNoZeroInit,        (void *)jitANewArrayNoZeroInit,    TR_Helper);\n #endif\n \n+   SET(TR_newValue,                   (void *)jitNewValue,               TR_CHelper);\n+   SET(TR_newValueNoZeroInit,         (void *)jitNewValueNoZeroInit,     TR_CHelper);", "originalCommit": "5339e152ac864940fc2759ef47f69764d41c03e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk2MjU2Ng==", "url": "https://github.com/eclipse-openj9/openj9/pull/10494#discussion_r479962566", "bodyText": "See #8160 (arm) and #8161 (aarch64).\nThose helpers are explicitly defined by NEW_DUAL_MODE_HELPER instead of DUAL_MODE_HELPER to avoid \"undefined symbol\" errors for missing old_fast_* functions.", "author": "knn-k", "createdAt": "2020-08-31T08:00:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTkxOTc2NQ=="}], "type": "inlineReview"}, {"oid": "977eaf71586b1121e618a1a8238256ef2199f45f", "url": "https://github.com/eclipse-openj9/openj9/commit/977eaf71586b1121e618a1a8238256ef2199f45f", "message": "AArch64: Implement monitor enter/exit VM helper call for value types\n\nThis commit implements monitor enter/exit VM helper call for value types\nfor AArch64.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>", "committedDate": "2020-11-05T00:17:50Z", "type": "forcePushed"}, {"oid": "430831e97f9720d936f0fce331289c5cedab1b23", "url": "https://github.com/eclipse-openj9/openj9/commit/430831e97f9720d936f0fce331289c5cedab1b23", "message": "AArch64: Implement monitor enter/exit VM helper call for value types\n\nThis commit implements monitor enter/exit VM helper call for value types\nfor AArch64.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>", "committedDate": "2021-01-25T12:24:42Z", "type": "commit"}, {"oid": "430831e97f9720d936f0fce331289c5cedab1b23", "url": "https://github.com/eclipse-openj9/openj9/commit/430831e97f9720d936f0fce331289c5cedab1b23", "message": "AArch64: Implement monitor enter/exit VM helper call for value types\n\nThis commit implements monitor enter/exit VM helper call for value types\nfor AArch64.\n\nSigned-off-by: KONNO Kazuhiro <konno@jp.ibm.com>", "committedDate": "2021-01-25T12:24:42Z", "type": "forcePushed"}]}