{"pr_number": 11047, "pr_title": "-Xcheck:jni ThrowNew() should check a jclass object", "pr_createdAt": "2020-10-29T18:06:29Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11047", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4NzQ0Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11047#discussion_r514487447", "bodyText": "To make it clearer, you should use jclass instead of jobject (and change the parameter name).", "author": "gacholio", "createdAt": "2020-10-29T18:45:14Z", "path": "runtime/jnichk/jnicheck.c", "diffHunk": "@@ -79,6 +79,7 @@ static IDATA jniCheckParseOptions(J9JavaVM* javaVM, char* options);\n static IDATA jniCheckProcessCommandLine(J9JavaVM* javaVM, J9VMDllLoadInfo* loadInfo);\n static UDATA globrefHashTableHashFn(void *entry, void *userData);\n static UDATA globrefHashTableEqualFn(void *leftEntry, void *rightEntry, void *userData);\n+static void jniCheckJClassSubclass(JNIEnv* env, const char* function, IDATA argNum, jobject aJobject, J9Class* expectedSupclass, const char* expectedType);", "originalCommit": "c18d0bb284b30cf31eda6549be3552d292150008", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ5Nzc3NA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11047#discussion_r514497774", "bodyText": "Replaced jobject aJobject with jclass aJclass, please have another look.", "author": "JasonFengJ9", "createdAt": "2020-10-29T19:01:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ4NzQ0Nw=="}], "type": "inlineReview"}, {"oid": "bab3f94a02c21cae5eb7b768f49a3ee7ce6889d6", "url": "https://github.com/eclipse-openj9/openj9/commit/bab3f94a02c21cae5eb7b768f49a3ee7ce6889d6", "message": "-Xcheck:jni ThrowNew() should check a jclass object\n\nCreated a new type JNIC_CLASSTHROWABLE to check if a jclass object is a\nsubclass of java.lang.Throwable;\nAdded jniCheckJClassSubclass() to check if a jclass argument is a\nsubclass of an expected super class;\ncheckThrowNew() checks JNIC_CLASSTHROWABLEinstead of JNIC_JTHROWABLE.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-10-29T18:58:22Z", "type": "forcePushed"}, {"oid": "294cdbdfa8f97c8cf6224aeda361c31426fab5b7", "url": "https://github.com/eclipse-openj9/openj9/commit/294cdbdfa8f97c8cf6224aeda361c31426fab5b7", "message": "-Xcheck:jni ThrowNew() should check a jclass object\n\nCreated a new type JNIC_CLASSTHROWABLE to check if a jclass object is a\nsubclass of java.lang.Throwable;\nAdded jniCheckJClassSubclass() to check if a jclass argument is a\nsubclass of an expected super class;\ncheckThrowNew() checks JNIC_CLASSTHROWABLEinstead of JNIC_JTHROWABLE.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-10-29T23:04:20Z", "type": "commit"}, {"oid": "294cdbdfa8f97c8cf6224aeda361c31426fab5b7", "url": "https://github.com/eclipse-openj9/openj9/commit/294cdbdfa8f97c8cf6224aeda361c31426fab5b7", "message": "-Xcheck:jni ThrowNew() should check a jclass object\n\nCreated a new type JNIC_CLASSTHROWABLE to check if a jclass object is a\nsubclass of java.lang.Throwable;\nAdded jniCheckJClassSubclass() to check if a jclass argument is a\nsubclass of an expected super class;\ncheckThrowNew() checks JNIC_CLASSTHROWABLEinstead of JNIC_JTHROWABLE.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-10-29T23:04:20Z", "type": "forcePushed"}]}