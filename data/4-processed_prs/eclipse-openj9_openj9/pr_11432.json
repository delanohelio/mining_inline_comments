{"pr_number": 11432, "pr_title": "Change the new CML options for JEP390", "pr_createdAt": "2020-12-10T19:05:07Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11432", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3MTMyNQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11432#discussion_r540671325", "bodyText": "This comment could also refer to the runtime flags since the code actually checks those.", "author": "pshipton", "createdAt": "2020-12-11T03:52:44Z", "path": "runtime/oti/vm_api.h", "diffHunk": "@@ -1489,9 +1489,9 @@ areValueTypesEnabled(J9JavaVM *vm);\n \n \n /**\n- * @brief Queries if -XX:ValueBasedClassCheck=exception or -XX:ValueBasedClassCheck=exception are found in the CML\n+ * @brief Queries if -XX:DiagnoseSyncOnValuedBasedClasses=1 or -XX:DiagnoseSyncOnValuedBasedClasses=2 are found in the CML", "originalCommit": "e5a784b96dec30a47042ff4f3ee161c259262128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA2NjczMg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11432#discussion_r541066732", "bodyText": "Comment added.", "author": "hangshao0", "createdAt": "2020-12-11T16:24:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3MTMyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3MTQzOA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11432#discussion_r540671438", "bodyText": "Since these are non obvious, pls comment what they mean.", "author": "pshipton", "createdAt": "2020-12-11T03:53:04Z", "path": "runtime/oti/jvminit.h", "diffHunk": "@@ -391,8 +391,8 @@ enum INIT_STAGE {\n #define VMOPT_XXDISABLEVALHALLA \"-XX:-EnableValhalla\"\n #endif /* defined(J9VM_OPT_VALHALLA_VALUE_TYPES) */\n \n-#define VMOPT_XXVALUEBASEDCLASSCHECKEXCEPTION \"-XX:ValueBasedClassCheck=exception\"\n-#define VMOPT_XXVALUEBASEDCLASSCHECKWARN \"-XX:ValueBasedClassCheck=warn\"\n+#define VMOPT_XXDIAGNOSE_SYNC_ON_VALUEBASED_CLASSES_EQUALS1 \"-XX:DiagnoseSyncOnValuedBasedClasses=1\"", "originalCommit": "e5a784b96dec30a47042ff4f3ee161c259262128", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTA2NjkwNw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11432#discussion_r541066907", "bodyText": "Comment added.", "author": "hangshao0", "createdAt": "2020-12-11T16:24:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3MTQzOA=="}], "type": "inlineReview"}, {"oid": "ec0bed94357761d16d1b97793869e0294a16e229", "url": "https://github.com/eclipse-openj9/openj9/commit/ec0bed94357761d16d1b97793869e0294a16e229", "message": "Change the new CML options for JEP390\n\nChange the new CML options -XX:ValueBasedClassCheck=exception/warn to\n-XX:DiagnoseSyncOnValuedBasedClasses=1/2 to match RI.\n\nissue #10620\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>", "committedDate": "2020-12-11T16:22:28Z", "type": "commit"}, {"oid": "ec0bed94357761d16d1b97793869e0294a16e229", "url": "https://github.com/eclipse-openj9/openj9/commit/ec0bed94357761d16d1b97793869e0294a16e229", "message": "Change the new CML options for JEP390\n\nChange the new CML options -XX:ValueBasedClassCheck=exception/warn to\n-XX:DiagnoseSyncOnValuedBasedClasses=1/2 to match RI.\n\nissue #10620\n\nSigned-off-by: Hang Shao <hangshao@ca.ibm.com>", "committedDate": "2020-12-11T16:22:28Z", "type": "forcePushed"}]}