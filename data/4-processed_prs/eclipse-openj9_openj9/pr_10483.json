{"pr_number": 10483, "pr_title": "Allow retransform of anon classes in java 8 and lower", "pr_createdAt": "2020-08-27T20:36:31Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/10483", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcyMjYyMg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10483#discussion_r478722622", "bodyText": "I think there's an extra level of bracketting here around the J9_ARE_NO_BITS_SET.", "author": "gacholio", "createdAt": "2020-08-27T22:07:22Z", "path": "runtime/bcutil/defineclass.c", "diffHunk": "@@ -320,7 +320,7 @@ internalLoadROMClass(J9VMThread * vmThread, J9LoadROMClassData *loadData, J9Tran\n \n \t/* Call the class load hook to potentially replace the class data */\n \n-\tif ((J9_ARE_NO_BITS_SET(loadData->options, J9_FINDCLASS_FLAG_ANON | J9_FINDCLASS_FLAG_HIDDEN))\n+\tif (((J9_ARE_NO_BITS_SET(loadData->options, J9_FINDCLASS_FLAG_ANON | J9_FINDCLASS_FLAG_HIDDEN)) || (J2SE_VERSION(vm) <= J2SE_18))", "originalCommit": "165a28ed9488f3b4a79f1f1951174b89e465969e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc2NDI0Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/10483#discussion_r478764242", "bodyText": "Fixed it, thanks.", "author": "mikezhang1234567890", "createdAt": "2020-08-28T00:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODcyMjYyMg=="}], "type": "inlineReview"}, {"oid": "fe2d8a2dc0bfa8a92bb4ea86372048e55b268ee5", "url": "https://github.com/eclipse-openj9/openj9/commit/fe2d8a2dc0bfa8a92bb4ea86372048e55b268ee5", "message": "Allow retransform of anon classes in java 8 and lower\n\nIn the reference implementation, anonymous classes are modifiable in Java 8 and\nbelow. Thus, a condition in internalLoadROMClass needs to be relaxed  so that\nanonymous classes are retransformable in Java 8 and lower.\n\nSigned-off-by: Mike Zhang <mike.h.zhang@ibm.com>", "committedDate": "2020-08-28T00:19:44Z", "type": "commit"}, {"oid": "fe2d8a2dc0bfa8a92bb4ea86372048e55b268ee5", "url": "https://github.com/eclipse-openj9/openj9/commit/fe2d8a2dc0bfa8a92bb4ea86372048e55b268ee5", "message": "Allow retransform of anon classes in java 8 and lower\n\nIn the reference implementation, anonymous classes are modifiable in Java 8 and\nbelow. Thus, a condition in internalLoadROMClass needs to be relaxed  so that\nanonymous classes are retransformable in Java 8 and lower.\n\nSigned-off-by: Mike Zhang <mike.h.zhang@ibm.com>", "committedDate": "2020-08-28T00:19:44Z", "type": "forcePushed"}]}