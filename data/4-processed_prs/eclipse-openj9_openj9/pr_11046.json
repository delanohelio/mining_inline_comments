{"pr_number": 11046, "pr_title": "Combine isAbstractClass() and isInterfaceClass() into isConcreteClass()", "pr_createdAt": "2020-10-29T16:47:24Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11046", "timeline": [{"oid": "481431400bc607c6e01cf58a0321ba89a48c5117", "url": "https://github.com/eclipse-openj9/openj9/commit/481431400bc607c6e01cf58a0321ba89a48c5117", "message": "Combine isAbstractClass() and isInterfaceClass() into isConcreteClass()\n\nCombined isAbstractClass() and isInterfaceClass() into one query, isConcreteClass()\nto reduce overhead, since each of these queries performs a locking operation.\nIssue: #11029\n\nSigned-off-by: Eman Elsabban <eman.elsaban1@gmail.com>", "committedDate": "2020-10-29T16:57:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDQ1MjU0MQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11046#discussion_r514452541", "bodyText": "This could be combined into one operation:\nreturn (TR::Compiler->cls.romClassOf(clazzPointer)->modifiers & (J9AccAbstract | J9AccInterface)) ? false : true;", "author": "mpirvu", "createdAt": "2020-10-29T17:48:43Z", "path": "runtime/compiler/env/VMJ9.cpp", "diffHunk": "@@ -6503,6 +6503,15 @@ TR_J9VMBase::isAbstractClass(TR_OpaqueClassBlock * clazzPointer)\n    return (TR::Compiler->cls.romClassOf(clazzPointer)->modifiers & J9AccAbstract) ? true : false;\n    }\n \n+bool\n+TR_J9VMBase::isConcreteClass(TR_OpaqueClassBlock * clazzPointer)\n+   {\n+   if ((TR::Compiler->cls.romClassOf(clazzPointer)->modifiers & J9AccInterface) || ", "originalCommit": "481431400bc607c6e01cf58a0321ba89a48c5117", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "eb53fd542e2e458d7ab23d09b2da82ff2e6e4f44", "url": "https://github.com/eclipse-openj9/openj9/commit/eb53fd542e2e458d7ab23d09b2da82ff2e6e4f44", "message": "Combine isAbstractClass() and isInterfaceClass() into isConcreteClass()\n\nCombined isAbstractClass() and isInterfaceClass() into one query, isConcreteClass()\nto reduce overhead, since each of these queries performs a locking operation.\nIssue: #11029\n\nSigned-off-by: Eman Elsabban <eman.elsaban1@gmail.com>", "committedDate": "2020-10-29T19:52:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDUzNzY1Mg==", "url": "https://github.com/eclipse-openj9/openj9/pull/11046#discussion_r514537652", "bodyText": "! is the logical not. What you want here is to isolate the two bits you are interested in, and then test they have the values you want:\n(modifiers & (J9AccInterface | J9AccAbstract)) == J9AccAbstract", "author": "mpirvu", "createdAt": "2020-10-29T20:12:12Z", "path": "runtime/compiler/env/VMJ9.cpp", "diffHunk": "@@ -6498,9 +6498,13 @@ TR_J9VMBase::isEnumClass(TR_OpaqueClassBlock * clazzPointer, TR_ResolvedMethod *\n bool\n TR_J9VMBase::isAbstractClass(TR_OpaqueClassBlock * clazzPointer)\n    {\n-   if (isInterfaceClass(clazzPointer))\n-      return false;\n-   return (TR::Compiler->cls.romClassOf(clazzPointer)->modifiers & J9AccAbstract) ? true : false;\n+   return (TR::Compiler->cls.romClassOf(clazzPointer)->modifiers & (!J9AccInterface & J9AccAbstract)) ? true : false;", "originalCommit": "eb53fd542e2e458d7ab23d09b2da82ff2e6e4f44", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e0fa811704765577bfdd53bb081527113c79cb83", "url": "https://github.com/eclipse-openj9/openj9/commit/e0fa811704765577bfdd53bb081527113c79cb83", "message": "Combine isAbstractClass() and isInterfaceClass() into isConcreteClass()\n\nCombined isAbstractClass() and isInterfaceClass() into one query, isConcreteClass()\nto reduce overhead, since each of these queries performs a locking operation.\nIssue: #11029\n\nSigned-off-by: Eman Elsabban <eman.elsaban1@gmail.com>", "committedDate": "2020-10-29T21:23:55Z", "type": "commit"}, {"oid": "e0fa811704765577bfdd53bb081527113c79cb83", "url": "https://github.com/eclipse-openj9/openj9/commit/e0fa811704765577bfdd53bb081527113c79cb83", "message": "Combine isAbstractClass() and isInterfaceClass() into isConcreteClass()\n\nCombined isAbstractClass() and isInterfaceClass() into one query, isConcreteClass()\nto reduce overhead, since each of these queries performs a locking operation.\nIssue: #11029\n\nSigned-off-by: Eman Elsabban <eman.elsaban1@gmail.com>", "committedDate": "2020-10-29T21:23:55Z", "type": "forcePushed"}]}