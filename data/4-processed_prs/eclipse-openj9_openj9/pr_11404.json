{"pr_number": 11404, "pr_title": "Skip module access check for processMethod()", "pr_createdAt": "2020-12-08T13:28:23Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/11404", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0Mzg4MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11404#discussion_r538443880", "bodyText": "instead of this can we just introduce a J9_LOOK_NO_MODULE_CHECKS ?", "author": "tajila", "createdAt": "2020-12-08T14:38:47Z", "path": "runtime/vm/visible.c", "diffHunk": "@@ -85,6 +85,12 @@ checkModuleAccess(J9VMThread *currentThread, J9JavaVM* vm, J9ROMClass* srcRomCla\n  */\n IDATA\n checkVisibility(J9VMThread *currentThread, J9Class* sourceClass, J9Class* destClass, UDATA modifiers, UDATA lookupOptions)\n+{\n+\treturn checkVisibilityModuleAccessOption(currentThread, sourceClass, destClass, modifiers, lookupOptions, TRUE);", "originalCommit": "e28ba30599755dc6227c75a7df914a3f3ca7fcb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0ODcwMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11404#discussion_r538448701", "bodyText": "i just changed the name, last one didnt really make sense", "author": "tajila", "createdAt": "2020-12-08T14:43:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0Mzg4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTIxMA==", "url": "https://github.com/eclipse-openj9/openj9/pull/11404#discussion_r538489210", "bodyText": "Good idea, use J9_LOOK_NO_MODULE_CHECKS instead. Please have another look.", "author": "JasonFengJ9", "createdAt": "2020-12-08T15:19:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0Mzg4MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0NDE5Nw==", "url": "https://github.com/eclipse-openj9/openj9/pull/11404#discussion_r538444197", "bodyText": "The flag can be used here", "author": "tajila", "createdAt": "2020-12-08T14:39:01Z", "path": "runtime/vm/visible.c", "diffHunk": "@@ -100,7 +106,8 @@ checkVisibility(J9VMThread *currentThread, J9Class* sourceClass, J9Class* destCl\n \tif (!J9CLASS_IS_EXEMPT_FROM_VALIDATION(sourceClass)) {\n \t\tif ( modifiers & J9AccPublic ) {\n \t\t\t/* Public */\n-\t\t\tif ((sourceClass != destClass)\n+\t\t\tif (doModuleAccessCheck", "originalCommit": "e28ba30599755dc6227c75a7df914a3f3ca7fcb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ4OTkwMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/11404#discussion_r538489901", "bodyText": "yeah, check via J9_ARE_NO_BITS_SET(lookupOptions, J9_LOOK_NO_MODULE_CHECKS).", "author": "JasonFengJ9", "createdAt": "2020-12-08T15:20:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODQ0NDE5Nw=="}], "type": "inlineReview"}, {"oid": "940959a702acaedc6662127c9978abcd121b2665", "url": "https://github.com/eclipse-openj9/openj9/commit/940959a702acaedc6662127c9978abcd121b2665", "message": "Skip module access check for processMethod()\n\nThe module access check has been performed at class/interface resolving\ntime, can be skipped within processMethod();\nAdded J9_LOOK_NO_MODULE_CHECKS to skip module access check.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-12-08T15:17:07Z", "type": "commit"}, {"oid": "940959a702acaedc6662127c9978abcd121b2665", "url": "https://github.com/eclipse-openj9/openj9/commit/940959a702acaedc6662127c9978abcd121b2665", "message": "Skip module access check for processMethod()\n\nThe module access check has been performed at class/interface resolving\ntime, can be skipped within processMethod();\nAdded J9_LOOK_NO_MODULE_CHECKS to skip module access check.\n\nSigned-off-by: Jason Feng <fengj@ca.ibm.com>", "committedDate": "2020-12-08T15:17:07Z", "type": "forcePushed"}]}