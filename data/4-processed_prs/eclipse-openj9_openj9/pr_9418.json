{"pr_number": 9418, "pr_title": "Abort AOT when symbol owning method is not inlined", "pr_createdAt": "2020-04-30T16:49:51Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9418", "timeline": [{"oid": "d16b8cbb272e633baafc98080672735e782b0509", "url": "https://github.com/eclipse-openj9/openj9/commit/d16b8cbb272e633baafc98080672735e782b0509", "message": "Abort AOT when symbol owning method is not inlined\n\nSometimes a symRef's owning method might not be inlined. Currently\nAOT can't handle this case. A new AOT exception type called\n`AOTRelocationRecordGenerationFailure` is added so that\ncompiler will retry compiling the current method without AOT when\ndetecting something goes wrong while generating relocation records.\n\nSigned-off-by: Yi Zhang <yizhang@ca.ibm.com>", "committedDate": "2020-04-30T16:54:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NDc1OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9418#discussion_r418164758", "bodyText": "I believe there's a string array in rossa.cpp that you'll have to add to as well.", "author": "dsouzai", "createdAt": "2020-04-30T17:15:36Z", "path": "runtime/compiler/control/rossa.h", "diffHunk": "@@ -77,6 +77,7 @@ typedef enum {\n    compilationAOTNoSupportForAOTFailure            = 51,\n    compilationAOTValidateTMFailure                 = 52,\n    compilationILGenUnsupportedValueTypeOperationFailure = 53,\n+   compilationAOTRelocationRecordGenerationFailure = 54,", "originalCommit": "d16b8cbb272e633baafc98080672735e782b0509", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MTEzMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9418#discussion_r418251131", "bodyText": "updated the string array.", "author": "cathyzhyi", "createdAt": "2020-04-30T19:51:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NDc1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NTE3OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9418#discussion_r418165179", "bodyText": "This should be removed as matchFound is a possible circumstance now.", "author": "dsouzai", "createdAt": "2020-04-30T17:16:14Z", "path": "runtime/compiler/codegen/J9AheadOfTimeCompile.cpp", "diffHunk": "@@ -147,6 +147,8 @@ J9::AheadOfTimeCompile::findCorrectInlinedSiteIndex(void *constantPool, uintptr_\n       }\n \n    TR_ASSERT(matchFound, \"Couldn't find this CP in inlined site list\");", "originalCommit": "d16b8cbb272e633baafc98080672735e782b0509", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODI1MTI0OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9418#discussion_r418251249", "bodyText": "removed the assert as suggested.", "author": "cathyzhyi", "createdAt": "2020-04-30T19:51:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE2NTE3OQ=="}], "type": "inlineReview"}, {"oid": "9669a8597cba8101e9f980b9ba414ebcdbcae18b", "url": "https://github.com/eclipse-openj9/openj9/commit/9669a8597cba8101e9f980b9ba414ebcdbcae18b", "message": "Abort AOT when symbol owning method is not inlined\n\nSometimes a symRef's owning method might not be inlined. Currently\nAOT can't handle this case. A new AOT exception type called\n`AOTRelocationRecordGenerationFailure` is added so that\ncompiler will retry compiling the current method without AOT when\ndetecting something goes wrong while generating relocation records.\n\nSigned-off-by: Yi Zhang <yizhang@ca.ibm.com>", "committedDate": "2020-04-30T19:50:40Z", "type": "commit"}, {"oid": "9669a8597cba8101e9f980b9ba414ebcdbcae18b", "url": "https://github.com/eclipse-openj9/openj9/commit/9669a8597cba8101e9f980b9ba414ebcdbcae18b", "message": "Abort AOT when symbol owning method is not inlined\n\nSometimes a symRef's owning method might not be inlined. Currently\nAOT can't handle this case. A new AOT exception type called\n`AOTRelocationRecordGenerationFailure` is added so that\ncompiler will retry compiling the current method without AOT when\ndetecting something goes wrong while generating relocation records.\n\nSigned-off-by: Yi Zhang <yizhang@ca.ibm.com>", "committedDate": "2020-04-30T19:50:40Z", "type": "forcePushed"}]}