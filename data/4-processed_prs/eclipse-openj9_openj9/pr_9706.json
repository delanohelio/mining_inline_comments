{"pr_number": 9706, "pr_title": "Add OpenJ9 & OMR to Reference Repo", "pr_createdAt": "2020-05-27T06:27:41Z", "pr_url": "https://github.com/eclipse-openj9/openj9/pull/9706", "timeline": [{"oid": "8e606f31cd60515f0bc0c55c6cb16f834bfcc4d1", "url": "https://github.com/eclipse-openj9/openj9/commit/8e606f31cd60515f0bc0c55c6cb16f834bfcc4d1", "message": "Add OpenJ9 & OMR to Reference Repo\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-05-27T06:30:12Z", "type": "forcePushed"}, {"oid": "f6357a51968c4f27231961249d8ab095627179d7", "url": "https://github.com/eclipse-openj9/openj9/commit/f6357a51968c4f27231961249d8ab095627179d7", "message": "remove unesary releases array (imo) [skip ci]\"\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-16T07:40:50Z", "type": "forcePushed"}, {"oid": "b23edb730de6316fdb4c0352ba8ea28cfc0e0db7", "url": "https://github.com/eclipse-openj9/openj9/commit/b23edb730de6316fdb4c0352ba8ea28cfc0e0db7", "message": "Add OpenJ9 & OMR to Reference Repo Updater\n\n- Also remove unnessary releases array and\n  EXTENSIONS_REPOS array.\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-17T02:47:35Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc5OTYxOQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r441799619", "bodyText": "This could introduce duplicates, thus you could check if repos contain openj9 repo or add repos.unique() after this if statement (at L147)", "author": "vsebe", "createdAt": "2020-06-17T20:00:15Z", "path": "buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy", "diffHunk": "@@ -141,7 +141,7 @@ timeout(time: 6, unit: 'HOURS') {\n \n                         if (jenkins.model.Jenkins.instance.getLabel(SETUP_LABEL).getNodes().contains(aNode)) {\n                             // add OpenJ9 repo\n-                            repos.addAll(EXTENSIONS_REPOS)\n+                            repos.add([name: \"openj9\", url: VARIABLES.openj9.get('default').get('repoUrl')])", "originalCommit": "b23edb730de6316fdb4c0352ba8ea28cfc0e0db7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk4NTc0OA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r441985748", "bodyText": "Good catch, added.", "author": "AdamBrousseau", "createdAt": "2020-06-18T06:00:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc5OTYxOQ=="}], "type": "inlineReview"}, {"oid": "5ad6f26eac4578799d62292f7f66980350980915", "url": "https://github.com/eclipse-openj9/openj9/commit/5ad6f26eac4578799d62292f7f66980350980915", "message": "Add OpenJ9 & OMR to Reference Repo Updater\n\n- Also remove unnessary releases array and\n  EXTENSIONS_REPOS array.\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-18T05:56:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzODA0NQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r442338045", "bodyText": "This should be an array not a string (e.g [[name: \"openj9\", url: VARIABLES.openj9.get('default').get('repoUrl')]]), see refresh() signature. This should fix the failure in your build: No such field found: field java.lang.String name .", "author": "vsebe", "createdAt": "2020-06-18T16:04:35Z", "path": "buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy", "diffHunk": "@@ -100,7 +98,7 @@ timeout(time: 6, unit: 'HOURS') {\n                         jobs[\"${sNodeName}\"] = {\n                             node(\"${sNodeName}\"){\n                                 stage(\"${sNodeName} - Update Reference Repo\") {\n-                                    refresh(sNodeName, \"${HOME}/openjdk_cache\", EXTENSIONS_REPOS, true)\n+                                    refresh(sNodeName, \"${HOME}/openjdk_cache\", VARIABLES.openj9.get('default').get('repoUrl'), true)", "originalCommit": "5ad6f26eac4578799d62292f7f66980350980915", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjUzMzAyMQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r442533021", "bodyText": "That worked. I think this is ready now?", "author": "AdamBrousseau", "createdAt": "2020-06-18T22:20:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzODA0NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwNjQ2OQ==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r442906469", "bodyText": "What build?\nBuild 696 used eclipse/openj9 not your script\nObtained buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy from git git@github.com:eclipse/openj9.git\nShouldn't be an array [[name: \"openj9\", url: VARIABLES.openj9.get('default').get('repoUrl')]] instead of a map [name: \"openj9\", url: VARIABLES.openj9.get('default').get('repoUrl')]?\nIt would fail in refresh() at https://github.com/eclipse/openj9/blob/e501ff270127f286a188ae64a6971855dd329ac1/buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy#L184)\n(add extra [])", "author": "vsebe", "createdAt": "2020-06-19T15:30:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjMzODA0NQ=="}], "type": "inlineReview"}, {"oid": "e501ff270127f286a188ae64a6971855dd329ac1", "url": "https://github.com/eclipse-openj9/openj9/commit/e501ff270127f286a188ae64a6971855dd329ac1", "message": "Add OpenJ9 & OMR to Reference Repo Updater\n\n- Also remove unnessary releases array and\n  EXTENSIONS_REPOS array.\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-18T22:19:56Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjkwNTI2MA==", "url": "https://github.com/eclipse-openj9/openj9/pull/9706#discussion_r442905260", "bodyText": "refresh() expects an array, not a map: see https://github.com/eclipse/openj9/blob/e501ff270127f286a188ae64a6971855dd329ac1/buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy#L184", "author": "vsebe", "createdAt": "2020-06-19T15:27:48Z", "path": "buildenv/jenkins/jobs/infrastructure/Update-Reference-Repos.groovy", "diffHunk": "@@ -100,7 +98,7 @@ timeout(time: 6, unit: 'HOURS') {\n                         jobs[\"${sNodeName}\"] = {\n                             node(\"${sNodeName}\"){\n                                 stage(\"${sNodeName} - Update Reference Repo\") {\n-                                    refresh(sNodeName, \"${HOME}/openjdk_cache\", EXTENSIONS_REPOS, true)\n+                                    refresh(sNodeName, \"${HOME}/openjdk_cache\", [name: \"openj9\", url: VARIABLES.openj9.get('default').get('repoUrl')], true)", "originalCommit": "e501ff270127f286a188ae64a6971855dd329ac1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1ccbdcb303ab6a9cdc89d2d094ebb65d090ffe81", "url": "https://github.com/eclipse-openj9/openj9/commit/1ccbdcb303ab6a9cdc89d2d094ebb65d090ffe81", "message": "Add OpenJ9 & OMR to Reference Repo Updater\n\n- Also remove unnessary releases array and\n  EXTENSIONS_REPOS array.\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-19T15:53:19Z", "type": "commit"}, {"oid": "1ccbdcb303ab6a9cdc89d2d094ebb65d090ffe81", "url": "https://github.com/eclipse-openj9/openj9/commit/1ccbdcb303ab6a9cdc89d2d094ebb65d090ffe81", "message": "Add OpenJ9 & OMR to Reference Repo Updater\n\n- Also remove unnessary releases array and\n  EXTENSIONS_REPOS array.\n\nRelated #6744\n[skip ci]\n\nSigned-off-by: Adam Brousseau <adam.brousseau88@gmail.com>", "committedDate": "2020-06-19T15:53:19Z", "type": "forcePushed"}]}