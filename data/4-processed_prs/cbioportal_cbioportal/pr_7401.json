{"pr_number": 7401, "pr_title": "Make metaImport.py use subcommands instead of -c", "pr_createdAt": "2020-04-15T20:11:21Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7401", "timeline": [{"oid": "5b227cdee26452d30846750dd9fae0e65c8f72fc", "url": "https://github.com/cBioPortal/cbioportal/commit/5b227cdee26452d30846750dd9fae0e65c8f72fc", "message": "Added subcommand functionality using argparse", "committedDate": "2020-04-15T19:46:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3NzUxOA==", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409877518", "bodyText": "this command only applies to remove-study command so i would suggest to only add this to the remove_study subparser", "author": "inodb", "createdAt": "2020-04-16T22:09:32Z", "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -410,6 +405,25 @@ def interface():\n                         help='Path to Data file')\n     parser.add_argument('-id', '--study_ids', type=str, required=False,\n                         help='Cancer Study IDs for `remove-study` command, comma separated')", "originalCommit": "5b227cdee26452d30846750dd9fae0e65c8f72fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg3OTI4MQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409879281", "bodyText": "all these commands above are shared among the various subcommands. I think the way to handle that in argparse is to add them to the parent command as described here: https://stackoverflow.com/questions/7498595/python-argparse-add-argument-to-multiple-subparsers", "author": "inodb", "createdAt": "2020-04-16T22:13:39Z", "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -410,6 +405,25 @@ def interface():\n                         help='Path to Data file')", "originalCommit": "5b227cdee26452d30846750dd9fae0e65c8f72fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTg4MDY5MQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7401#discussion_r409880691", "bodyText": "It would be nice to offer backwards compatibility for the -c parameter. I.e. if someone supplies that, call the relevant command accordingly. Maybe add in the help text that the recommended way is to use the command directly and that this is only to provide backwards compatibility", "author": "inodb", "createdAt": "2020-04-16T22:17:25Z", "path": "core/src/main/scripts/importer/cbioportalImporter.py", "diffHunk": "@@ -394,12 +394,7 @@ def check_dir(study_directory):\n         print('Study cannot be found: ' + study_directory, file=ERROR_FILE)\n         sys.exit(2)\n \n-def interface():\n-    parser = argparse.ArgumentParser(description='cBioPortal meta Importer')\n-    parser.add_argument('-c', '--command', type=str, required=False,", "originalCommit": "5b227cdee26452d30846750dd9fae0e65c8f72fc", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cccb8864d688a06b62e98e2dca5cd939dfc399db", "url": "https://github.com/cBioPortal/cbioportal/commit/cccb8864d688a06b62e98e2dca5cd939dfc399db", "message": "PR Fixes. Added backwards compatibility and parent parsing.", "committedDate": "2020-04-17T18:31:56Z", "type": "commit"}, {"oid": "997469076548cf4484425ca7be150a88252b4131", "url": "https://github.com/cBioPortal/cbioportal/commit/997469076548cf4484425ca7be150a88252b4131", "message": "Added outdated version message.", "committedDate": "2020-04-17T18:45:20Z", "type": "commit"}, {"oid": "37d38d0d0a0945856943ceae7147938cef178ada", "url": "https://github.com/cBioPortal/cbioportal/commit/37d38d0d0a0945856943ceae7147938cef178ada", "message": "Added error checking for calling multiple commands.", "committedDate": "2020-04-17T21:27:43Z", "type": "commit"}]}