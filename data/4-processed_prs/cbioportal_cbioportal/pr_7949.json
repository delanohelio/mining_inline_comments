{"pr_number": 7949, "pr_title": "Update keycloak auth docs to specify how to get jwtRolesPath", "pr_createdAt": "2020-10-07T19:05:20Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7949", "timeline": [{"oid": "a4036405897c6af5edddcd7b7373ef9fd800191d", "url": "https://github.com/cBioPortal/cbioportal/commit/a4036405897c6af5edddcd7b7373ef9fd800191d", "message": "Update keycloak auth docs to specify how to get jwtRolesPath", "committedDate": "2020-10-13T17:59:48Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDQzMjQzMw==", "url": "https://github.com/cBioPortal/cbioportal/pull/7949#discussion_r504432433", "bodyText": "The trigger for looking at this section should not be a 4xx error. I propose to remove this line and replace it for something like this:\n\nBy default user-roles are extracted from path resource_access::cbioportal::roles in the JWT json. When the configuration of roles at the realm and client level in a Keycloak instance differ from that described in this manual, configure the path can be specified using the dat.oauth2.jwtRolesPath property in the portal.properties file.", "author": "pvannierop", "createdAt": "2020-10-14T06:32:13Z", "path": "docs/Authenticating-and-Authorizing-Users-via-keycloak.md", "diffHunk": "@@ -357,3 +357,32 @@ log4j.logger.org.springframework.security=DEBUG\n ```\n \n Then, rebuild the WAR, redeploy, and try to authenticate again.  Your log file will then include hundreds of SAML-specific messages, even the full XML of each SAML message, and this should help you debug the error.\n+\n+#### Determining jwtRolesPath for OAuth2 Token\n+If the generated token returns a 4XX error when used, confirm that the `jwtRolesPath` property matches the roles path. ", "originalCommit": "a4036405897c6af5edddcd7b7373ef9fd800191d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "55ee8febc1c1198c6016cca0d72bef31c37954b9", "url": "https://github.com/cBioPortal/cbioportal/commit/55ee8febc1c1198c6016cca0d72bef31c37954b9", "message": "Update keycloak auth docs to specify how to get jwtRolesPath", "committedDate": "2020-10-14T18:14:12Z", "type": "commit"}, {"oid": "55ee8febc1c1198c6016cca0d72bef31c37954b9", "url": "https://github.com/cBioPortal/cbioportal/commit/55ee8febc1c1198c6016cca0d72bef31c37954b9", "message": "Update keycloak auth docs to specify how to get jwtRolesPath", "committedDate": "2020-10-14T18:14:12Z", "type": "forcePushed"}]}