{"pr_number": 7530, "pr_title": "documentation for importing data with docker", "pr_createdAt": "2020-05-21T22:01:11Z", "pr_url": "https://github.com/cBioPortal/cbioportal/pull/7530", "timeline": [{"oid": "80e5406791cc2a9046526b1dcc0813d79397fbd8", "url": "https://github.com/cBioPortal/cbioportal/commit/80e5406791cc2a9046526b1dcc0813d79397fbd8", "message": "documentation for importing data with docker", "committedDate": "2020-05-21T22:04:07Z", "type": "forcePushed"}, {"oid": "eb9c2221a87ab4a7018f7e9a3bc7ec3122e93a11", "url": "https://github.com/cBioPortal/cbioportal/commit/eb9c2221a87ab4a7018f7e9a3bc7ec3122e93a11", "message": "documentation for importing data with docker", "committedDate": "2020-05-21T22:06:07Z", "type": "forcePushed"}, {"oid": "cd3f5f5554f6b50c0494f3573b4c73ba297cc1ca", "url": "https://github.com/cBioPortal/cbioportal/commit/cd3f5f5554f6b50c0494f3573b4c73ba297cc1ca", "message": "documentation for importing data with docker", "committedDate": "2020-05-21T22:17:33Z", "type": "forcePushed"}, {"oid": "cbeb2613e30ee62f03791c761849a5121646b4a1", "url": "https://github.com/cBioPortal/cbioportal/commit/cbeb2613e30ee62f03791c761849a5121646b4a1", "message": "documentation for importing data with docker", "committedDate": "2020-05-21T22:20:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNzcxNw==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429437717", "bodyText": "good to also add to SUMMARY.md, this is what gitbook.io uses to make the table of contents (TOC). Ideally the TOC in README.md and SUMMARY.md are always the same. I should prolly add some test for that", "author": "inodb", "createdAt": "2020-05-22T20:22:34Z", "path": "docs/README.md", "diffHunk": "@@ -20,6 +20,7 @@ We also maintain an active [list of RFCs (Requests for Comments)](RFC-List.md) w\n \n ### 2.1.1 Deploy with Docker (Recommended)\n * [Deploy with Docker](docker/README.md)\n+* [Import data with Docker](docker/import_data.md)", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzNzkwNQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429437905", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For importing sample study, see [this tutorial](import_data.md)\n          \n          \n            \n            For documentation on how to import a study, see [this tutorial](import_data.md)", "author": "inodb", "createdAt": "2020-05-22T20:23:39Z", "path": "docs/docker/README.md", "diffHunk": "@@ -175,6 +175,7 @@ echo $LATEST_VERSION\n ```\n \n ## Data loading & more commands ##\n+For importing sample study, see [this tutorial](import_data.md)", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzOTEyNw==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429439127", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            When try to import other studies, please follow the same routine:\n          \n          \n            \n            1. import gene panels (if applicable, some studies may don't need to import gene panels)\n          \n          \n            \n            2. import data\n          \n          \n            \n            When trying to import other studies, please follow the same routine:\n          \n          \n            \n            1. import gene panels (if applicable, studies without gene panels are assumed to be whole exome/genome)\n          \n          \n            \n            2. import study data", "author": "inodb", "createdAt": "2020-05-22T20:28:19Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,59 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When try to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, some studies may don't need to import gene panels)\n+2. import data", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQzOTI3Nw==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429439277", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To import gene panels for your study, please referece the example commands in [this file](example_commands.md#importing-gene-panel)\n          \n          \n            \n            To import gene panels for your study, please reference the example commands in [this file](example_commands.md#importing-gene-panel)", "author": "inodb", "createdAt": "2020-05-22T20:28:46Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,59 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When try to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, some studies may don't need to import gene panels)\n+2. import data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please referece the example commands in [this file](example_commands.md#importing-gene-panel)", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ0MDIwMw==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429440203", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Commands for importing `study_es_0` gene panels(`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):\n          \n          \n            \n            These are the commands for importing `study_es_0` gene panels (`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):", "author": "inodb", "createdAt": "2020-05-22T20:31:39Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,59 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When try to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, some studies may don't need to import gene panels)\n+2. import data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please referece the example commands in [this file](example_commands.md#importing-gene-panel)\n+\n+Commands for importing `study_es_0` gene panels(`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ0NzM3OQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429447379", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To import data for your study, please referece the example commands in [this file](example_commands.md#importing-data)\n          \n          \n            \n            To import data for your study, please reference the example commands in [this file](example_commands.md#importing-data)", "author": "inodb", "createdAt": "2020-05-22T20:53:52Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,59 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When try to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, some studies may don't need to import gene panels)\n+2. import data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please referece the example commands in [this file](example_commands.md#importing-gene-panel)\n+\n+Commands for importing `study_es_0` gene panels(`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel1.txt'\n+```\n+\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel2.txt'\n+```\n+\n+### Step 2 - Import data\n+\n+To import data for your study, please referece the example commands in [this file](example_commands.md#importing-data)", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTQ0ODI2MQ==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r429448261", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Common Questions and solutions\n          \n          \n            \n            ## Frequently Asked Questions\n          \n      \n    \n    \n  \n\nI think this is the common title for these kind of sections\nThis is a great idea to include btw \ud83d\udc4d", "author": "inodb", "createdAt": "2020-05-22T20:56:15Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,59 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When try to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, some studies may don't need to import gene panels)\n+2. import data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please referece the example commands in [this file](example_commands.md#importing-gene-panel)\n+\n+Commands for importing `study_es_0` gene panels(`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel1.txt'\n+```\n+\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel2.txt'\n+```\n+\n+### Step 2 - Import data\n+\n+To import data for your study, please referece the example commands in [this file](example_commands.md#importing-data)\n+\n+Command for importing `study_es_0` data:\n+\n+```shell\n+docker run -it --rm --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    metaImport.py -u http://cbioportal-container:8080 -s /cbioportal/core/src/test/scripts/test_data/study_es_0\n+```\n+\n+:warning: after importing a study, remember to restart `cbioportal-container`\n+to see the study on the home page. Run `docker restart cbioportal-container`.\n+\n+\n+## Common Questions and solutions", "originalCommit": "cbeb2613e30ee62f03791c761849a5121646b4a1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c6bb28d1e419c7f128e067b1f189c3287f6aacd", "url": "https://github.com/cBioPortal/cbioportal/commit/8c6bb28d1e419c7f128e067b1f189c3287f6aacd", "message": "documentation for importing data with docker", "committedDate": "2020-05-27T14:05:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE3NTIxMg==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r431175212", "bodyText": "Maybe good to have some concluding notes at the end. E.g.:\nYou have now imported the test study study_es_0. This study is included inside the cbioportal container. The process for adding a study that is outside of the container is almost the same. The difference is that one needs to add the -v parameter to mount the folder with the study data inside the container. See How to import a real study section (add markdown link) for an example.", "author": "inodb", "createdAt": "2020-05-27T14:27:27Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,80 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When trying to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, studies without gene panels are assumed to be whole exome/genome)\n+2. import study data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please reference the example commands in [this file](example_commands.md#importing-gene-panel)\n+\n+These are the commands for importing `study_es_0` gene panels (`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel1.txt'\n+```\n+\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel2.txt'\n+```\n+\n+### Step 2 - Import data\n+\n+To import data for your study, please reference the example commands in [this file](example_commands.md#importing-data)\n+\n+Command for importing `study_es_0` data:\n+\n+```shell\n+docker run -it --rm --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    metaImport.py -u http://cbioportal-container:8080 -s /cbioportal/core/src/test/scripts/test_data/study_es_0\n+```\n+\n+:warning: after importing a study, remember to restart `cbioportal-container`\n+to see the study on the home page. Run `docker restart cbioportal-container`.\n+", "originalCommit": "8c6bb28d1e419c7f128e067b1f189c3287f6aacd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTE4NDczOA==", "url": "https://github.com/cBioPortal/cbioportal/pull/7530#discussion_r431184738", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can find all public studies at [cbioportal.org](http://www.cbioportal.org/data_sets.jsp) a zipped folder with staging files from each study can be downloaded. These zip files are compressed versions of the study folders in [datahub](https://github.com/cBioPortal/datahub).\n          \n          \n            \n            \n          \n          \n            \n            Take study `Cholangiocarcinoma (TCGA, PanCancer Atlas)` as an example:  \n          \n          \n            \n            Study `Cholangiocarcinoma (TCGA, PanCancer Atlas)` is a whole exome/genome study, so just need to download the study data and run the command from step2.\n          \n          \n            \n            You can find all public studies at [cbioportal.org](http://www.cbioportal.org/data_sets.jsp) a zipped folder with staging files from each study can be downloaded. These zip files are compressed versions of the study folders in [datahub](https://github.com/cBioPortal/datahub).\n          \n          \n            \n            \n          \n          \n            \n            Download and extract the zip file for study `Cholangiocarcinoma (TCGA, PanCancer Atlas)`. Study `Cholangiocarcinoma (TCGA, PanCancer Atlas)` is a whole exome study. You can therefore skip step 1 from the import data instructions section (add markdown link): the default gene panel is whole exome. Proceed with the command from step2", "author": "inodb", "createdAt": "2020-05-27T14:34:49Z", "path": "docs/docker/import_data.md", "diffHunk": "@@ -0,0 +1,80 @@\n+## Import data instructions ##\n+This is an example to import a sample study: `study_es_0`.\n+When trying to import other studies, please follow the same routine:\n+1. import gene panels (if applicable, studies without gene panels are assumed to be whole exome/genome)\n+2. import study data\n+\n+### Step 1 - Import gene panels\n+\n+To import gene panels for your study, please reference the example commands in [this file](example_commands.md#importing-gene-panel)\n+\n+These are the commands for importing `study_es_0` gene panels (`data_gene_panel_testpanel1` and `data_gene_panel_testpanel2`):\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel1.txt'\n+```\n+\n+```shell\n+docker run -it --rm \\\n+    --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    bash -c 'cd /cbioportal/core/src/main/scripts/ && ./importGenePanel.pl --data /cbioportal/core/src/test/scripts/test_data/study_es_0/data_gene_panel_testpanel2.txt'\n+```\n+\n+### Step 2 - Import data\n+\n+To import data for your study, please reference the example commands in [this file](example_commands.md#importing-data)\n+\n+Command for importing `study_es_0` data:\n+\n+```shell\n+docker run -it --rm --net cbio-net \\\n+    -v /<path_to_config_file>/portal.properties:/cbioportal/portal.properties:ro \\\n+    cbioportal/cbioportal:latest \\\n+    metaImport.py -u http://cbioportal-container:8080 -s /cbioportal/core/src/test/scripts/test_data/study_es_0\n+```\n+\n+:warning: after importing a study, remember to restart `cbioportal-container`\n+to see the study on the home page. Run `docker restart cbioportal-container`.\n+\n+\n+## Frequently Asked Questions\n+\n+### Gene panel ID is not in database\n+\n+If you see an error like this when you importing the data:  \n+`ERROR: data_gene_panel_matrix.txt: lines [2, 3, 4, (10 more)]: Gene panel ID is not in database. Please import this gene panel before loading study data.; values encountered: ['TESTPANEL1', 'TESTPANEL2']`  \n+\n+please follow the first step to import gene panels (e.g. import `data_gene_panel_testpanel1` and `data_gene_panel_testpanel2` for `study_es_0`), then try to import the data again.\n+\n+### Study imported correctly, but got error when trying to query something\n+\n+Remember to restart the `cbioportal-container` after data imported.\n+```shell\n+docker restart cbioportal-container\n+```\n+\n+### How to import a real study\n+\n+You can find all public studies at [cbioportal.org](http://www.cbioportal.org/data_sets.jsp) a zipped folder with staging files from each study can be downloaded. These zip files are compressed versions of the study folders in [datahub](https://github.com/cBioPortal/datahub).\n+\n+Take study `Cholangiocarcinoma (TCGA, PanCancer Atlas)` as an example:  \n+Study `Cholangiocarcinoma (TCGA, PanCancer Atlas)` is a whole exome/genome study, so just need to download the study data and run the command from step2.", "originalCommit": "8c6bb28d1e419c7f128e067b1f189c3287f6aacd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7578631c2903ca53b1403b5eeef07a4b244f363a", "url": "https://github.com/cBioPortal/cbioportal/commit/7578631c2903ca53b1403b5eeef07a4b244f363a", "message": "documentation for importing data with docker", "committedDate": "2020-05-27T14:56:40Z", "type": "forcePushed"}, {"oid": "52a06a1bcaf94a64958a4ce53dc353e7ffecfd34", "url": "https://github.com/cBioPortal/cbioportal/commit/52a06a1bcaf94a64958a4ce53dc353e7ffecfd34", "message": "documentation for importing data with docker", "committedDate": "2020-05-27T15:06:01Z", "type": "commit"}, {"oid": "52a06a1bcaf94a64958a4ce53dc353e7ffecfd34", "url": "https://github.com/cBioPortal/cbioportal/commit/52a06a1bcaf94a64958a4ce53dc353e7ffecfd34", "message": "documentation for importing data with docker", "committedDate": "2020-05-27T15:06:01Z", "type": "forcePushed"}]}