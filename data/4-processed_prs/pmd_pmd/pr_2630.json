{"pr_number": 2630, "pr_title": "[apex] UnusedLocalVariable - false positive on case insensitivity all\u2026", "pr_createdAt": "2020-07-02T20:40:40Z", "pr_url": "https://github.com/pmd/pmd/pull/2630", "timeline": [{"oid": "147f1ac05302c0044dfaa0cf5f87efbb6d08a6f2", "url": "https://github.com/pmd/pmd/commit/147f1ac05302c0044dfaa0cf5f87efbb6d08a6f2", "message": "[apex] UnusedLocalVariable - false positive on case insensitivity allowed in Apex\n\nFixes #2626", "committedDate": "2020-07-02T20:39:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI2MTgwNw==", "url": "https://github.com/pmd/pmd/pull/2630#discussion_r449261807", "bodyText": "I think StringUtils.equalsIgnoreCase is exactly this method", "author": "oowekyala", "createdAt": "2020-07-02T20:55:52Z", "path": "pmd-apex/src/main/java/net/sourceforge/pmd/lang/apex/rule/bestpractices/UnusedLocalVariableRule.java", "diffHunk": "@@ -41,12 +41,22 @@ public Object visit(ASTVariableDeclaration node, Object data) {\n                 continue;\n             }\n \n-            if (usage.hasImageEqualTo(variableName)) {\n+            if (equalsIgnoreCase(variableName, usage.getImage())) {\n                 return data;\n             }\n         }\n \n         addViolation(data, node, variableName);\n         return data;\n     }\n+\n+    private static boolean equalsIgnoreCase(String a, String b) {", "originalCommit": "147f1ac05302c0044dfaa0cf5f87efbb6d08a6f2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQ5NTcwMw==", "url": "https://github.com/pmd/pmd/pull/2630#discussion_r449495703", "bodyText": "Oh yes, I forgot, I can use StringUtils....", "author": "adangel", "createdAt": "2020-07-03T09:57:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTI2MTgwNw=="}], "type": "inlineReview"}, {"oid": "1fb085f7ab48ecafafeeaab1b5cd6760b4417ca5", "url": "https://github.com/pmd/pmd/commit/1fb085f7ab48ecafafeeaab1b5cd6760b4417ca5", "message": "Use StringUtils.equalsIgnoreCase", "committedDate": "2020-07-03T09:58:38Z", "type": "commit"}]}