{"pr_number": 2666, "pr_title": "[swift] Manage swift5 string literals", "pr_createdAt": "2020-07-27T09:49:04Z", "pr_url": "https://github.com/pmd/pmd/pull/2666", "timeline": [{"oid": "4a6bc933e196d0f281bf6851e49729125a733699", "url": "https://github.com/pmd/pmd/commit/4a6bc933e196d0f281bf6851e49729125a733699", "message": "Manage swift5 string literals", "committedDate": "2020-07-27T09:47:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2MzM5MA==", "url": "https://github.com/pmd/pmd/pull/2666#discussion_r460963390", "bodyText": "Looks like this line has no counterpart in the source file. Maybe this was forgotten?", "author": "oowekyala", "createdAt": "2020-07-27T15:11:22Z", "path": "pmd-swift/src/test/resources/net/sourceforge/pmd/lang/swift/cpd/testdata/Swift5.0.txt", "diffHunk": "@@ -197,4 +197,37 @@ L40\n     [id]                                    18        19\n     [\\]]                                    20        20\n     [)]                                     21        21\n+L43\n+    [let]                                   1         3\n+    [rawString]                             5         13\n+    [=]                                     15        15\n+    [#\"Press \"Continue\" to close this d[    17        58\n+L44\n+    [extension]                             1         9\n+    [URL]                                   11        13\n+    [{]                                     15        15\n+L45\n+    [func]                                  5         8\n+    [html]                                  10        13\n+    [(]                                     14        14\n+    [withTitle]                             15        23\n+    [title]                                 25        29\n+    [:]                                     30        30\n+    [String]                                32        37\n+    [)]                                     38        38\n+    [->]                                    40        41\n+    [String]                                43        48\n+    [{]                                     50        50\n+L46\n+    [return]                                9         14\n+    [#\"<a href=\"\\\\#(absoluteString)\">\\\\[    16        61\n+L47\n+    [}]                                     5         5\n+L48\n+    [}]                                     1         1\n+L49", "originalCommit": "4a6bc933e196d0f281bf6851e49729125a733699", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk2OTM0MQ==", "url": "https://github.com/pmd/pmd/pull/2666#discussion_r460969341", "bodyText": "I'm not sure EscapedCharacter should be here. Apparently those dashed string literals are raw strings, so the only escape being processed is \\#(..) I guess\nLooking at this, it looks like MultiQuotedTextItem (just above) is missing EscapedCharacter too...", "author": "oowekyala", "createdAt": "2020-07-27T15:19:43Z", "path": "pmd-swift/src/main/antlr4/net/sourceforge/pmd/lang/swift/antlr4/Swift.g4", "diffHunk": "@@ -1078,6 +1078,13 @@ fragment MultiQuotedTextItem : MultiInterpolatedString\n  ;\n fragment MultiInterpolatedString: '\\\\(' (MultiQuotedTextItem | SingleStringLiteral)* ')';\n \n+DashedSingleStringLiteral : '#\"' DashedMultiQuotedText? '\"#' ;\n+fragment DashedMultiQuotedText : DashedMultiQuotedTextItem+ ;\n+fragment DashedMultiQuotedTextItem : EscapedCharacter | DashedMultiInterpolatedString", "originalCommit": "4a6bc933e196d0f281bf6851e49729125a733699", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDk3NzY0Nw==", "url": "https://github.com/pmd/pmd/pull/2666#discussion_r460977647", "bodyText": "One may use an arbitrary number of # delimiters provided they're balanced, eg ##\"...\"##\nThis link may be a good starting point to implement this", "author": "oowekyala", "createdAt": "2020-07-27T15:31:04Z", "path": "pmd-swift/src/main/antlr4/net/sourceforge/pmd/lang/swift/antlr4/Swift.g4", "diffHunk": "@@ -1078,6 +1078,13 @@ fragment MultiQuotedTextItem : MultiInterpolatedString\n  ;\n fragment MultiInterpolatedString: '\\\\(' (MultiQuotedTextItem | SingleStringLiteral)* ')';\n \n+DashedSingleStringLiteral : '#\"' DashedMultiQuotedText? '\"#' ;", "originalCommit": "4a6bc933e196d0f281bf6851e49729125a733699", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}