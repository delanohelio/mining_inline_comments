{"pr_number": 2297, "pr_title": "[apex] Cognitive complexity metrics", "pr_createdAt": "2020-02-18T17:47:24Z", "pr_url": "https://github.com/pmd/pmd/pull/2297", "timeline": [{"oid": "9c09303d753cbd46cbd8f05218b1f99eba891096", "url": "https://github.com/pmd/pmd/commit/9c09303d753cbd46cbd8f05218b1f99eba891096", "message": "Skeleton implementation of CognativeComplexityVisitor", "committedDate": "2020-02-18T10:47:33Z", "type": "commit"}, {"oid": "69c239e5a37366f613c7330d8015e70c9a14e07c", "url": "https://github.com/pmd/pmd/commit/69c239e5a37366f613c7330d8015e70c9a14e07c", "message": "Register the cognitive complexity measure", "committedDate": "2020-02-18T11:02:06Z", "type": "commit"}, {"oid": "0967e437671f53aab2aa6a7bfb830698109eb411", "url": "https://github.com/pmd/pmd/commit/0967e437671f53aab2aa6a7bfb830698109eb411", "message": "Add class level cognitive complexity measures", "committedDate": "2020-02-18T11:02:31Z", "type": "commit"}, {"oid": "a8234af9a6aaeb950999c234ab3b93669467d35c", "url": "https://github.com/pmd/pmd/commit/a8234af9a6aaeb950999c234ab3b93669467d35c", "message": "Create design rule for cognitive complexity", "committedDate": "2020-02-18T11:02:56Z", "type": "commit"}, {"oid": "01da573f5fcda19dcce70241fac88e5d97b3f553", "url": "https://github.com/pmd/pmd/commit/01da573f5fcda19dcce70241fac88e5d97b3f553", "message": "Add design rule for CognitiveComplexity", "committedDate": "2020-02-18T11:24:39Z", "type": "commit"}, {"oid": "8c357fb8876da1db4957015859383e594296a134", "url": "https://github.com/pmd/pmd/commit/8c357fb8876da1db4957015859383e594296a134", "message": "Add tests for CognitiveComplexity", "committedDate": "2020-02-18T11:47:36Z", "type": "commit"}, {"oid": "38ea3d1be92066783ce139c7ceaa12d0e7b99eb5", "url": "https://github.com/pmd/pmd/commit/38ea3d1be92066783ce139c7ceaa12d0e7b99eb5", "message": "Implement complexity for `if`", "committedDate": "2020-02-18T11:47:40Z", "type": "commit"}, {"oid": "cea2081628dee5c1cfb9222596efbc30539c48c5", "url": "https://github.com/pmd/pmd/commit/cea2081628dee5c1cfb9222596efbc30539c48c5", "message": "Cognitive complexity for nested if statements", "committedDate": "2020-02-18T11:51:46Z", "type": "commit"}, {"oid": "9492ca02c171e52a11814712f4951b1aa404eba9", "url": "https://github.com/pmd/pmd/commit/9492ca02c171e52a11814712f4951b1aa404eba9", "message": "Add test for non-nested if statements", "committedDate": "2020-02-18T11:53:00Z", "type": "commit"}, {"oid": "1b93be5f600ac262aae26a79750977eaa8be7a86", "url": "https://github.com/pmd/pmd/commit/1b93be5f600ac262aae26a79750977eaa8be7a86", "message": "Handle if-else correctly", "committedDate": "2020-02-18T14:02:56Z", "type": "commit"}, {"oid": "50d2bcb7f1ea0df1d8611680e1d419e9fd69194d", "url": "https://github.com/pmd/pmd/commit/50d2bcb7f1ea0df1d8611680e1d419e9fd69194d", "message": "Cognitive complexity for for loops", "committedDate": "2020-02-18T14:08:05Z", "type": "commit"}, {"oid": "7d3a5ef7f4e222e35ed015aad34f6fb22a0e6e2d", "url": "https://github.com/pmd/pmd/commit/7d3a5ef7f4e222e35ed015aad34f6fb22a0e6e2d", "message": "When increasing nesting level we always get structure and nesting complexity", "committedDate": "2020-02-18T14:08:44Z", "type": "commit"}, {"oid": "d9e7928d75b7ec00bb3a09adbd2473372b86154b", "url": "https://github.com/pmd/pmd/commit/d9e7928d75b7ec00bb3a09adbd2473372b86154b", "message": "For each statements incur cognitive complexity", "committedDate": "2020-02-18T14:10:32Z", "type": "commit"}, {"oid": "7d3bb60d8381d7889112bc5e600aacb56e969167", "url": "https://github.com/pmd/pmd/commit/7d3bb60d8381d7889112bc5e600aacb56e969167", "message": "Continue statements incur complexity", "committedDate": "2020-02-18T14:12:07Z", "type": "commit"}, {"oid": "b2a42bf8ccc9c7c883c666a48b34cef7ae26f3a4", "url": "https://github.com/pmd/pmd/commit/b2a42bf8ccc9c7c883c666a48b34cef7ae26f3a4", "message": "Break statements incur complexity", "committedDate": "2020-02-18T14:12:49Z", "type": "commit"}, {"oid": "ec870225f2ecb9797f9f7b726bed6a3c9d761723", "url": "https://github.com/pmd/pmd/commit/ec870225f2ecb9797f9f7b726bed6a3c9d761723", "message": "While statements incur nesting complexity", "committedDate": "2020-02-18T15:16:26Z", "type": "commit"}, {"oid": "559c1d9c397eafe87e6d54a070db4e6666043397", "url": "https://github.com/pmd/pmd/commit/559c1d9c397eafe87e6d54a070db4e6666043397", "message": "Catch blocks incur nesting complexity", "committedDate": "2020-02-18T15:19:39Z", "type": "commit"}, {"oid": "5ea69530d7a65dae5a6173368c01ff9e3e639d74", "url": "https://github.com/pmd/pmd/commit/5ea69530d7a65dae5a6173368c01ff9e3e639d74", "message": "Add do-while loop nesting complexity", "committedDate": "2020-02-18T15:40:46Z", "type": "commit"}, {"oid": "4b26d22c73c42a77d53871a217163197a4e80472", "url": "https://github.com/pmd/pmd/commit/4b26d22c73c42a77d53871a217163197a4e80472", "message": "Ternary operators increase nesting complexity", "committedDate": "2020-02-18T15:56:08Z", "type": "commit"}, {"oid": "a4db0ea069f513fd5671aa6897e31025397400ea", "url": "https://github.com/pmd/pmd/commit/a4db0ea069f513fd5671aa6897e31025397400ea", "message": "Any boolean expression causes increases in cognative complexity", "committedDate": "2020-02-18T16:32:28Z", "type": "commit"}, {"oid": "0231350dea7b8235a9309b24d15088ab59eea09f", "url": "https://github.com/pmd/pmd/commit/0231350dea7b8235a9309b24d15088ab59eea09f", "message": "Handle boolean expressions on different statements", "committedDate": "2020-02-18T16:59:12Z", "type": "commit"}, {"oid": "9d0fb82d6f5f66cec01b6c3537fe9e78da3cc678", "url": "https://github.com/pmd/pmd/commit/9d0fb82d6f5f66cec01b6c3537fe9e78da3cc678", "message": "Increase cognitive complexity on recursion", "committedDate": "2020-02-18T17:06:18Z", "type": "commit"}, {"oid": "acfbb132d199fef8e40cdbaedd1ea4e00dd857b4", "url": "https://github.com/pmd/pmd/commit/acfbb132d199fef8e40cdbaedd1ea4e00dd857b4", "message": "We don't actually support switch statements yet", "committedDate": "2020-02-18T17:07:22Z", "type": "commit"}, {"oid": "5d55b84f96e93f92e139827cb4db4b7def581cb5", "url": "https://github.com/pmd/pmd/commit/5d55b84f96e93f92e139827cb4db4b7def581cb5", "message": "Fix checkstyle errors", "committedDate": "2020-02-18T17:24:40Z", "type": "commit"}, {"oid": "de878175c8bc42d98872883e84c2598fd80b05c7", "url": "https://github.com/pmd/pmd/commit/de878175c8bc42d98872883e84c2598fd80b05c7", "message": "Use correct message for cognitive complexity rule", "committedDate": "2020-02-18T17:29:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NTY2Mw==", "url": "https://github.com/pmd/pmd/pull/2297#discussion_r380845663", "bodyText": "This would be since=\"6.22.0\", if it ships with the next release.", "author": "adangel", "createdAt": "2020-02-18T18:10:14Z", "path": "pmd-apex/src/main/resources/category/apex/design.xml", "diffHunk": "@@ -86,6 +86,22 @@ public class Complicated {\n         </example>\n     </rule>\n \n+    <rule name=\"CognitiveComplexity\"\n+          message=\"The {0} ''{1}'' has a{2} cognitive complexity of {3}.\"\n+          since=\"6.0.0\"", "originalCommit": "de878175c8bc42d98872883e84c2598fd80b05c7", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NzYyNg==", "url": "https://github.com/pmd/pmd/pull/2297#discussion_r380847626", "bodyText": "What you enter here will appear in the generated online documentation -> Example entry for cyclomatic complexity: https://pmd.github.io/latest/pmd_rules_apex_design.html#cyclomaticcomplexity\nThe description should help users to decide, whether they want to enable this rule or not. In this case, it should probably shortly explain what cognitive complexity is and link to the paper. You may also reason about the advantages of simpler software (less bugs, easier to understand, less maintenance cost).\nThe example section below could give 2 or 3 short examples to explain, how the metric is calculated - similar to what you did in the tests (// +1 or // +2).", "author": "adangel", "createdAt": "2020-02-18T18:13:57Z", "path": "pmd-apex/src/main/resources/category/apex/design.xml", "diffHunk": "@@ -86,6 +86,22 @@ public class Complicated {\n         </example>\n     </rule>\n \n+    <rule name=\"CognitiveComplexity\"\n+          message=\"The {0} ''{1}'' has a{2} cognitive complexity of {3}.\"\n+          since=\"6.0.0\"\n+          class=\"net.sourceforge.pmd.lang.apex.rule.design.CognitiveComplexityRule\"\n+          externalInfoUrl=\"${pmd.website.baseurl}/pmd_rules_apex_design.html#cognitivecomplexity\">\n+        <description>\n+            TODO", "originalCommit": "de878175c8bc42d98872883e84c2598fd80b05c7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDkxOTc3Mw==", "url": "https://github.com/pmd/pmd/pull/2297#discussion_r380919773", "bodyText": "@gwilymatgearset  Please check what I added for the existing Apex rules", "author": "rsoesemann", "createdAt": "2020-02-18T20:35:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDg0NzYyNg=="}], "type": "inlineReview"}, {"oid": "a22d6f62b470d64eb0448db653e99053ff5e818e", "url": "https://github.com/pmd/pmd/commit/a22d6f62b470d64eb0448db653e99053ff5e818e", "message": "Optimistically say that cognitive complexity is in the next release", "committedDate": "2020-02-19T10:24:40Z", "type": "commit"}, {"oid": "413d64ff39a5e074b6bca7e1af57527c87a45b0f", "url": "https://github.com/pmd/pmd/commit/413d64ff39a5e074b6bca7e1af57527c87a45b0f", "message": "Increase default values for cognitive complexity based on authors opinions", "committedDate": "2020-02-19T14:22:30Z", "type": "commit"}, {"oid": "68e4f52da1f6330881e2d860bbb400f96e7fe9e6", "url": "https://github.com/pmd/pmd/commit/68e4f52da1f6330881e2d860bbb400f96e7fe9e6", "message": "Fill in TODO in documentation for coginitive complexity", "committedDate": "2020-02-19T16:28:02Z", "type": "commit"}]}