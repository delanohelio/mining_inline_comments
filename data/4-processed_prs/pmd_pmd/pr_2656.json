{"pr_number": 2656, "pr_title": "[all] Ensure PMD/CPD uses tab width of 1 for tabs consistently", "pr_createdAt": "2020-07-20T08:45:04Z", "pr_url": "https://github.com/pmd/pmd/pull/2656", "timeline": [{"oid": "6fb5ac59b92f72e473e9995808138d8017dbf42c", "url": "https://github.com/pmd/pmd/commit/6fb5ac59b92f72e473e9995808138d8017dbf42c", "message": "Ensure CPD uses tab width of 1 for tabs consistently\n\nThe columns that are reported by CPD were inconsistent across languages\nbefore. A language like Java (using a JavaCC-based tokenizer) would use\na width of 8 for tabs, whereas a language like C# (using an Antlr-based\ntokenizer) would use 1 instead.\n\nThis includes unit tests for most languages to ensure a tab character is\ncounted as 1. The configuration for JavaCC has been adjusted to respect\nthis as well.", "committedDate": "2020-07-20T08:42:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMDc1MA==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458300750", "bodyText": "I think, this file got accidentally added....", "author": "adangel", "createdAt": "2020-07-21T18:23:29Z", "path": "pmd-java/src/main/java/net/sourceforge/pmd/lang/java/JavaTokenManager.java.bak", "diffHunk": "@@ -0,0 +1,47 @@\n+/**", "originalCommit": "6fb5ac59b92f72e473e9995808138d8017dbf42c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYyODAxMA==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458628010", "bodyText": "Yes, sorry, you're right. I've removed it now.", "author": "maikelsteneker", "createdAt": "2020-07-22T08:34:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMDc1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMjc0OA==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458302748", "bodyText": "Alternatively there is also a setter, we could call. But for now, I think, it's ok let it hard code to 1. We could add later a configuration option, to use a custom tab size, see #292", "author": "adangel", "createdAt": "2020-07-21T18:26:54Z", "path": "pmd-core/src/main/ant/alljavacc.xml", "diffHunk": "@@ -71,6 +71,10 @@\n         <replace file=\"${target}/net/sourceforge/pmd/lang/ast/dummy/JavaCharStream.java\"\n                  token=\"throw new Error(t.getMessage())\"\n                  value=\"throw t\" />\n+        <!-- Set tab size of JavaCC to 1 -->\n+        <replace file=\"${target}/net/sourceforge/pmd/lang/ast/dummy/JavaCharStream.java\"", "originalCommit": "6fb5ac59b92f72e473e9995808138d8017dbf42c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYzMjQzMQ==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458632431", "bodyText": "I originally wanted to use the setter, but that requires introducing a subclass just to call the getter (since it's protected). I think this is the cleaner solution for now, but that changes when introducing a configuration option for it, of course.", "author": "maikelsteneker", "createdAt": "2020-07-22T08:41:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwMjc0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwNDE4Mg==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458304182", "bodyText": "Please add for PLSQL an additional test case, similar like in the other languages (tabWidth.pls).", "author": "adangel", "createdAt": "2020-07-21T18:29:26Z", "path": "pmd-plsql/src/test/resources/net/sourceforge/pmd/lang/plsql/cpd/testdata/sample-plsql.txt", "diffHunk": "@@ -12,55 +12,55 @@ L3\n     [IS]                                    1         2", "originalCommit": "6fb5ac59b92f72e473e9995808138d8017dbf42c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODYzMDc5NQ==", "url": "https://github.com/pmd/pmd/pull/2656#discussion_r458630795", "bodyText": "I've added another test case!", "author": "maikelsteneker", "createdAt": "2020-07-22T08:38:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODMwNDE4Mg=="}], "type": "inlineReview"}, {"oid": "15379361707523e26eb6d05c6b78f539dcc8050b", "url": "https://github.com/pmd/pmd/commit/15379361707523e26eb6d05c6b78f539dcc8050b", "message": "Remove accidentally committed file", "committedDate": "2020-07-22T08:24:43Z", "type": "commit"}, {"oid": "f03fab409a15a67f5411a4af938031f084da1e25", "url": "https://github.com/pmd/pmd/commit/f03fab409a15a67f5411a4af938031f084da1e25", "message": "Add test case for SQL tab width", "committedDate": "2020-07-22T08:29:17Z", "type": "commit"}]}