{"pr_number": 2227, "pr_title": "Add Thrift compiler related issues in README", "pr_createdAt": "2020-12-09T05:46:34Z", "pr_url": "https://github.com/apache/iotdb/pull/2227", "timeline": [{"oid": "5b3b42321611523d52a1693bbbfcb4418ac7d5da", "url": "https://github.com/apache/iotdb/commit/5b3b42321611523d52a1693bbbfcb4418ac7d5da", "message": "add thrift readme", "committedDate": "2020-12-09T05:39:31Z", "type": "commit"}, {"oid": "ab2b3db4e7d453d75b5d28b1babf04ee803d9ca9", "url": "https://github.com/apache/iotdb/commit/ab2b3db4e7d453d75b5d28b1babf04ee803d9ca9", "message": "minor fixes", "committedDate": "2020-12-09T05:53:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NDIyMw==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539054223", "bodyText": "More reasonable solution is :\nadd parameters in the maven command:\n\nIf the user has installed thrift or has a binary thrift, then use -Dthrift.download-url=http://apache.org/licenses/LICENSE-2.0.txt   -Dthrift.exec.absolute.path=<YOUR LOCAL THRIFT BINARY FILE>\nIf the user wants to download the binary thrift file from somewhere, then use -Dthrift.download-url=<THE REMOTE URL FOR DOWNLOADING>   -Dthrift.exec.absolute.path=<THE DOWNLOADED BINARY FILE NAME>", "author": "jixuan1989", "createdAt": "2020-12-09T06:56:34Z", "path": "README_ZH.md", "diffHunk": "@@ -99,6 +99,13 @@ IoTDB\u63d0\u4f9b\u4e86\u4e09\u79cd\u5b89\u88c5\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u4ee5\u4e0b\u5efa\u8bae\uff0c\u9009\u62e9\u6700\u9002\u5408\n \n ## \u4ece\u6e90\u7801\u6784\u5efa\n \n+\u5982\u679c\u60a8\u4f7f\u7528Windows\uff0c\u8bf7\u8df3\u8fc7\u6b64\u6bb5\u3002\u6211\u4eec\u4f7f\u7528Thrift\u4f5c\u4e3aRPC\u6a21\u5757\u6765\u63d0\u4f9b\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u95f4\u7684\u901a\u4fe1\u548c\u534f\u8bae\u652f\u6301\uff0c\u56e0\u6b64\u5728\u7f16\u8bd1\u9636\u6bb5\u6211\u4eec\u9700\u8981\u4f7f\u7528Thrift 0.13.0\n+\uff08\u6216\u66f4\u9ad8\uff09\u7f16\u8bd1\u5668\u751f\u6210\u5bf9\u5e94\u7684Java\u4ee3\u7801\u3002Thrift\u53ea\u63d0\u4f9b\u4e86Windows\u4e0b\u7684\u4e8c\u8fdb\u5236\u7f16\u8bd1\u5668\uff0cUnix\u4e0b\u9700\u8981\u901a\u8fc7\u6e90\u7801\u81ea\u884c\u7f16\u8bd1\u3002\u4f46\u6211\u4eec\u9884\u5148\u7f16\u8bd1\u4e86\u4e00\u4e2aThrift\u7f16\u8bd1\u5668\uff0c\u5e76\u5c06\u5176\u4e0a\u4f20\u5230\u4e86GitHub\n+\uff0c\u501f\u52a9\u4e00\u4e2aMaven\u63d2\u4ef6\uff0c\u5728\u7f16\u8bd1\u65f6\u53ef\u4ee5\u81ea\u52a8\u5c06\u5176\u4e0b\u8f7d\u3002\u8be5\u9884\u7f16\u8bd1\u7684Thrift\u7f16\u8bd1\u5668\u5728gcc8\uff0cUbuntu, CentOS, MacOS\u4e0b\u53ef\u4ee5\u5de5\u4f5c\uff0c\u4f46\u662f\u5728\u66f4\u4f4e\u7684gcc\n+\u7248\u672c\u4ee5\u53ca\u5176\u4ed6\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u5c1a\u672a\u786e\u8ba4\u3002\u5982\u679c\u60a8\u5728\u7f16\u8bd1\u65f6\u53d1\u73b0\u4e86Thrift\u7f16\u8bd1\u5668\u76f8\u5173\u7684\u95ee\u9898\uff0c\u8bf7\u5347\u7ea7\u60a8\u7684gcc\u7248\u672c\u6216\u8005\u4f9d\u7167Thrift\n+\u5b98\u65b9\u7684\u6307\u793a\u81ea\u884c\u7f16\u8bd1\u7f16\u8bd1\u5668\uff0c\u5e76\u5c06\u7f16\u8bd1\u5668\u653e\u7f6e\u5230\u76ee\u5f55`{project_root}\\thrift\\target\\tools\\thrift_0.12.0_0.13.0_linux.exe`\u3002\n+Thrift\u5b98\u65b9\u7f51\u5740\u4e3a\uff1ahttps://thrift.apache.org/\n+", "originalCommit": "ab2b3db4e7d453d75b5d28b1babf04ee803d9ca9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEwNTYwMg==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539105602", "bodyText": "Do you think we can add this description to readme ?", "author": "sunjincheng121", "createdAt": "2020-12-09T08:31:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc3MzA0Mg==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539773042", "bodyText": "I would keep both. The parameters are long and not that easy to remember, and adding them each time will not be handy. If you move the thrift binary properly, you will not need to add the parameters. Modifying the pom is another way, but it is dangerous for some one who is not familiar with pom.", "author": "jt2594838", "createdAt": "2020-12-10T01:26:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NDIyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDY3MDI3Mg==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r540670272", "bodyText": "Keep both is fine.", "author": "jixuan1989", "createdAt": "2020-12-11T03:49:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTA1NDIyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEwMzIwOQ==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539103209", "bodyText": "{project_root}\\thrift\\target\\tools\\thrift_0.12.0_0.13.0_linux.exe -> ``{project_root}\\thrift\\target\\tools` ?", "author": "sunjincheng121", "createdAt": "2020-12-09T08:27:55Z", "path": "README.md", "diffHunk": "@@ -101,6 +101,17 @@ Here in the Quick Start, we give a brief introduction of using source code to in\n \n ## Build from source\n \n+Skip this paragraph if you are using Windows. As we use Thrift for our RPC module (communication and\n+protocol definition), we involve Thrift during the compilation, so Thrift compiler 0.13.0 (or\n+higher) is required to generate Thrift Java code. Thrift officially provides binary compiler for\n+Windows, but unfortunately, they do not provide that for Unix OSs. However, we compiled a Unix\n+compiler ourselves and put it onto GitHub, and with the help of a maven plugin, it will be\n+downloaded automatically during compilation. This compiler works fine with gcc8 or later, Ubuntu\n+MacOS, and CentOS, but previous versions and other OSs are not guaranteed. Should you find your gcc\n+version or OS does not support the precompiled compiler, please upgrade your gcc version or follow the\n+Thrift official instructions to compile the compiler yourself and rename it into `{project_root}\\thrift\\target\\tools\\thrift_0.12.0_0.13.0_linux.exe`.", "originalCommit": "ab2b3db4e7d453d75b5d28b1babf04ee803d9ca9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc3MzQ5Mw==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539773493", "bodyText": "Unfortuantely, the filename must be consistent, otherwise the plugin will not recognize it.", "author": "jt2594838", "createdAt": "2020-12-10T01:27:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEwMzIwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEwNDU0MQ==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539104541", "bodyText": "How about remove put it onto GitHub\uff1f Users may mistakenly think that it is uploaded to git of our IoTDB repo\uff1f", "author": "sunjincheng121", "createdAt": "2020-12-09T08:30:02Z", "path": "README.md", "diffHunk": "@@ -101,6 +101,17 @@ Here in the Quick Start, we give a brief introduction of using source code to in\n \n ## Build from source\n \n+Skip this paragraph if you are using Windows. As we use Thrift for our RPC module (communication and\n+protocol definition), we involve Thrift during the compilation, so Thrift compiler 0.13.0 (or\n+higher) is required to generate Thrift Java code. Thrift officially provides binary compiler for\n+Windows, but unfortunately, they do not provide that for Unix OSs. However, we compiled a Unix\n+compiler ourselves and put it onto GitHub, and with the help of a maven plugin, it will be", "originalCommit": "ab2b3db4e7d453d75b5d28b1babf04ee803d9ca9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTc3Mzk1Ng==", "url": "https://github.com/apache/iotdb/pull/2227#discussion_r539773956", "bodyText": "That does not matter which repo we put it in, and I only intend to tell the user that he must be able to access GitHub.", "author": "jt2594838", "createdAt": "2020-12-10T01:28:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTEwNDU0MQ=="}], "type": "inlineReview"}, {"oid": "72ba8b9781f695b280a8b37b45cb8944430f5f30", "url": "https://github.com/apache/iotdb/commit/72ba8b9781f695b280a8b37b45cb8944430f5f30", "message": "add options of using maven parameter", "committedDate": "2020-12-10T01:48:37Z", "type": "commit"}]}