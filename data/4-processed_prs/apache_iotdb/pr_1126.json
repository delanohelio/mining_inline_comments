{"pr_number": 1126, "pr_title": "[IOTDB-620] Add the ability to persist and maintain voteFor for the raft node and amend the judgment conditions for elections", "pr_createdAt": "2020-04-29T07:48:59Z", "pr_url": "https://github.com/apache/iotdb/pull/1126", "timeline": [{"oid": "5dfa3110e49c68829a870d34564558ba34d688ac", "url": "https://github.com/apache/iotdb/commit/5dfa3110e49c68829a870d34564558ba34d688ac", "message": "add voteFor persistence && use raftLogManager's isLogUpToDate", "committedDate": "2020-04-27T14:45:46Z", "type": "commit"}, {"oid": "602e3b492c31c837a9c6506cd7da04a61210018f", "url": "https://github.com/apache/iotdb/commit/602e3b492c31c837a9c6506cd7da04a61210018f", "message": "fix election logic", "committedDate": "2020-04-29T05:19:25Z", "type": "commit"}, {"oid": "dd26eb2f282c648f5a7aef340aaa8aece46633db", "url": "https://github.com/apache/iotdb/commit/dd26eb2f282c648f5a7aef340aaa8aece46633db", "message": "Merge branch 'cluster_new' of github.com:Apache/incubator-iotdb into cluster_new_persistence_votefor", "committedDate": "2020-04-29T05:19:53Z", "type": "commit"}, {"oid": "d4323fbecc69e423419abdb0ada6b375527b252a", "url": "https://github.com/apache/iotdb/commit/d4323fbecc69e423419abdb0ada6b375527b252a", "message": "minor fix", "committedDate": "2020-04-29T06:07:15Z", "type": "commit"}, {"oid": "d22772e5934df4b76eae7032758ec144d043f341", "url": "https://github.com/apache/iotdb/commit/d22772e5934df4b76eae7032758ec144d043f341", "message": "Merge branch 'cluster_new' of github.com:Apache/incubator-iotdb into cluster_new_persistence_votefor", "committedDate": "2020-04-29T06:13:01Z", "type": "commit"}, {"oid": "67d74740e79fe4d6cfab61f15cd6af57238a593b", "url": "https://github.com/apache/iotdb/commit/67d74740e79fe4d6cfab61f15cd6af57238a593b", "message": "minor fix", "committedDate": "2020-04-29T07:46:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE2MDg3Mw==", "url": "https://github.com/apache/iotdb/pull/1126#discussion_r417160873", "bodyText": "It seemed strange here.", "author": "jt2594838", "createdAt": "2020-04-29T08:49:38Z", "path": "cluster/src/main/java/org/apache/iotdb/cluster/server/member/RaftMember.java", "diffHunk": "@@ -516,11 +546,20 @@ public void setLastHeartbeatReceivedTime(long lastHeartbeatReceivedTime) {\n \n   public void setLeader(Node leader) {\n     if (!Objects.equals(leader, this.leader)) {\n-      logger.info(\"{} has become a follower of {}\", getName(), leader);\n+      if (!Objects.equals(leader, this.thisNode)) {\n+        logger.info(\"{} has become a follower of {}\", getName(), leader);\n+      }\n       this.leader = leader;", "originalCommit": "67d74740e79fe4d6cfab61f15cd6af57238a593b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}