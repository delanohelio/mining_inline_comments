{"pr_number": 1533, "pr_title": "[IOTDB-807]Make heartbeat thread commit log tasks asynchronous", "pr_createdAt": "2020-07-22T01:12:47Z", "pr_url": "https://github.com/apache/iotdb/pull/1533", "timeline": [{"oid": "50d1f3aea891b69a11b61669153ece99d90d6886", "url": "https://github.com/apache/iotdb/commit/50d1f3aea891b69a11b61669153ece99d90d6886", "message": "Make heartbeat thread commit log task asynchronous", "committedDate": "2020-07-22T01:10:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODQ5MzE1NA==", "url": "https://github.com/apache/iotdb/pull/1533#discussion_r458493154", "bodyText": "\"async commit log failed\", e is more generally used.", "author": "jt2594838", "createdAt": "2020-07-22T02:14:58Z", "path": "cluster/src/main/java/org/apache/iotdb/cluster/server/member/RaftMember.java", "diffHunk": "@@ -1564,4 +1582,33 @@ public void setAppendLogThreadPool(ExecutorService appendLogThreadPool) {\n   public ExecutorService getAsyncThreadPool() {\n     return asyncThreadPool;\n   }\n+\n+  public interface OnCommitLogEventListener {\n+\n+    /**\n+     * the callback method when committed log async success\n+     */\n+    void onSuccess();\n+\n+    /**\n+     * @param e the exception raised when committed log async failed\n+     */\n+    void onError(Exception e);\n+  }\n+\n+  public class AsyncCommitLogEvent implements OnCommitLogEventListener {\n+\n+    @Override\n+    public void onSuccess() {\n+      synchronized (syncLock) {\n+        syncLock.notifyAll();\n+      }\n+    }\n+\n+    @Override\n+    public void onError(Exception e) {\n+      logger.error(\"async commit log failed, {}\", e.toString());", "originalCommit": "50d1f3aea891b69a11b61669153ece99d90d6886", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}