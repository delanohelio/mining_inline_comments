{"pr_number": 2276, "pr_title": "gh-2266 Command line Operation runner.", "pr_createdAt": "2020-05-12T10:18:23Z", "pr_url": "https://github.com/gchq/Gaffer/pull/2276", "timeline": [{"oid": "69c3abf4a46eb8e70285e83b77f4adfb57a18abb", "url": "https://github.com/gchq/Gaffer/commit/69c3abf4a46eb8e70285e83b77f4adfb57a18abb", "message": "gh-2266 Command line Operation runner.", "committedDate": "2020-05-12T10:26:52Z", "type": "forcePushed"}, {"oid": "7c6224a7705b264a4a068190bbec070483b9f914", "url": "https://github.com/gchq/Gaffer/commit/7c6224a7705b264a4a068190bbec070483b9f914", "message": "gh-2266 Command line Operation runner.", "committedDate": "2020-05-12T10:54:43Z", "type": "commit"}, {"oid": "7c6224a7705b264a4a068190bbec070483b9f914", "url": "https://github.com/gchq/Gaffer/commit/7c6224a7705b264a4a068190bbec070483b9f914", "message": "gh-2266 Command line Operation runner.", "committedDate": "2020-05-12T10:54:43Z", "type": "forcePushed"}, {"oid": "2306c79d96f1ffa2287a77f0be6ff054f7ee5683", "url": "https://github.com/gchq/Gaffer/commit/2306c79d96f1ffa2287a77f0be6ff054f7ee5683", "message": "gh-2266 Adding Hadoop client libraries for AddElementsFromHdfs", "committedDate": "2020-05-15T12:45:52Z", "type": "commit"}, {"oid": "564e40d7832b83d075b7841f7506aff37d8aa760", "url": "https://github.com/gchq/Gaffer/commit/564e40d7832b83d075b7841f7506aff37d8aa760", "message": "Merge branch 'develop' into gh-2266-command-line-operation-runner", "committedDate": "2020-05-18T06:42:14Z", "type": "commit"}, {"oid": "e2a7dc47a5c120328d7b05d2f717869f2254cd04", "url": "https://github.com/gchq/Gaffer/commit/e2a7dc47a5c120328d7b05d2f717869f2254cd04", "message": "gh-2266 updating version", "committedDate": "2020-05-18T07:32:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg3NjcyOQ==", "url": "https://github.com/gchq/Gaffer/pull/2276#discussion_r427876729", "bodyText": "As this is designed to be a command line tool, it might be better to leave these out and the user can include them if they need to. Also when running with Accumulo the dependencies are included automatically as iterators. By doing this we can shrink the size of the actual Jar", "author": "d47853", "createdAt": "2020-05-20T09:39:45Z", "path": "operation-runner/pom.xml", "diffHunk": "@@ -0,0 +1,120 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>gaffer2</artifactId>\n+        <groupId>uk.gov.gchq.gaffer</groupId>\n+        <version>1.12.1-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>operation-runner</artifactId>\n+\n+    <dependencies>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>graph</artifactId>\n+            <version>${project.parent.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>bitmap-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>sketches-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>time-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>", "originalCommit": "e2a7dc47a5c120328d7b05d2f717869f2254cd04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg4NDM0NA==", "url": "https://github.com/gchq/Gaffer/pull/2276#discussion_r427884344", "bodyText": "Including Hadoop as a dependency might cause issues with deploying onto different versions. It might be better to rely on the user using the Hadoop classpath on their cluster. Again with Accumulo, the hadoop client jars are included in the iterators. With Hbase, you can do a similar thing with hbase classpath. Removing these should reduce the size of the build artefact without sacrificing functionality, provided the correct classpath is provided by the user.", "author": "d47853", "createdAt": "2020-05-20T09:52:07Z", "path": "operation-runner/pom.xml", "diffHunk": "@@ -0,0 +1,120 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>gaffer2</artifactId>\n+        <groupId>uk.gov.gchq.gaffer</groupId>\n+        <version>1.12.1-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>operation-runner</artifactId>\n+\n+    <dependencies>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>graph</artifactId>\n+            <version>${project.parent.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>bitmap-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>sketches-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>time-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.beust</groupId>\n+            <artifactId>jcommander</artifactId>\n+            <version>${jcommander.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-hdfs</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-yarn-client</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-client</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-mapreduce-client-common</artifactId>\n+            <version>${hadoop.version}</version>\n+            <scope>compile</scope>\n+        </dependency>", "originalCommit": "e2a7dc47a5c120328d7b05d2f717869f2254cd04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzg4NDg5Nw==", "url": "https://github.com/gchq/Gaffer/pull/2276#discussion_r427884897", "bodyText": "This should be store agnostic and so should not require store dependencies. These should be provided by the user at runtime.", "author": "d47853", "createdAt": "2020-05-20T09:53:01Z", "path": "operation-runner/pom.xml", "diffHunk": "@@ -0,0 +1,120 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <parent>\n+        <artifactId>gaffer2</artifactId>\n+        <groupId>uk.gov.gchq.gaffer</groupId>\n+        <version>1.12.1-SNAPSHOT</version>\n+    </parent>\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>operation-runner</artifactId>\n+\n+    <dependencies>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>graph</artifactId>\n+            <version>${project.parent.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>bitmap-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>sketches-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>time-library</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.beust</groupId>\n+            <artifactId>jcommander</artifactId>\n+            <version>${jcommander.version}</version>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-hdfs</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-yarn-client</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-client</artifactId>\n+            <version>${hadoop.version}</version>\n+        </dependency>\n+        <dependency>\n+            <groupId>org.apache.hadoop</groupId>\n+            <artifactId>hadoop-mapreduce-client-common</artifactId>\n+            <version>${hadoop.version}</version>\n+            <scope>compile</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>accumulo-store</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>iterators</classifier>\n+        </dependency>\n+        <dependency>\n+            <groupId>uk.gov.gchq.gaffer</groupId>\n+            <artifactId>hbase-store</artifactId>\n+            <version>${project.parent.version}</version>\n+            <classifier>deploy</classifier>\n+        </dependency>", "originalCommit": "e2a7dc47a5c120328d7b05d2f717869f2254cd04", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a6f4e4c27aeb3d52ad2bf85d28a9353f49535a9b", "url": "https://github.com/gchq/Gaffer/commit/a6f4e4c27aeb3d52ad2bf85d28a9353f49535a9b", "message": "Merge branch 'develop' into gh-2266-command-line-operation-runner", "committedDate": "2020-05-21T06:54:41Z", "type": "commit"}, {"oid": "1b2d8e234b695e2ea68022d7d9fa5931bf182555", "url": "https://github.com/gchq/Gaffer/commit/1b2d8e234b695e2ea68022d7d9fa5931bf182555", "message": "gh-2266 Add command line arguments to Context allowing Hadoop jobs to be configured.", "committedDate": "2020-06-04T13:47:30Z", "type": "commit"}, {"oid": "65728f80a659358ddbda80daa106b16c20b1f603", "url": "https://github.com/gchq/Gaffer/commit/65728f80a659358ddbda80daa106b16c20b1f603", "message": "gh-2266 Removing jcommander to avoid clashes between version packaged with Accumulo.", "committedDate": "2020-06-05T16:03:51Z", "type": "commit"}, {"oid": "1de087004f1ac5aa0582c6fc703acab712c2eba6", "url": "https://github.com/gchq/Gaffer/commit/1de087004f1ac5aa0582c6fc703acab712c2eba6", "message": "Merge branch 'develop' into gh-2266-command-line-operation-runner", "committedDate": "2020-06-05T16:06:13Z", "type": "commit"}, {"oid": "5417ab832bbf47f3284182ad3725978b20bae6cd", "url": "https://github.com/gchq/Gaffer/commit/5417ab832bbf47f3284182ad3725978b20bae6cd", "message": "gh-2266 Updating README and conforming to style checks", "committedDate": "2020-06-07T15:22:54Z", "type": "commit"}, {"oid": "5417ab832bbf47f3284182ad3725978b20bae6cd", "url": "https://github.com/gchq/Gaffer/commit/5417ab832bbf47f3284182ad3725978b20bae6cd", "message": "gh-2266 Updating README and conforming to style checks", "committedDate": "2020-06-07T15:22:54Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjUxOTM1NQ==", "url": "https://github.com/gchq/Gaffer/pull/2276#discussion_r436519355", "bodyText": "It might be worth extending this class in the operation-runner module rather than adding this code here.", "author": "d47853", "createdAt": "2020-06-08T08:01:44Z", "path": "core/store/src/main/java/uk/gov/gchq/gaffer/store/Context.java", "diffHunk": "@@ -34,6 +34,7 @@\n  * as the user who executed the operation chain and a map of {@link Exporter}s.\n  */\n public class Context {\n+    public static final String COMMAND_LINE_ARGS_CONFIG_KEY = \"config.command.line.args\";", "originalCommit": "5417ab832bbf47f3284182ad3725978b20bae6cd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d0fed68b3517d701e607a53090fbd4abaa5f8efe", "url": "https://github.com/gchq/Gaffer/commit/d0fed68b3517d701e607a53090fbd4abaa5f8efe", "message": "gh-2266 Adding commandLineArgs property to MapReduce interface.", "committedDate": "2020-06-08T17:17:36Z", "type": "forcePushed"}, {"oid": "dfe9fd07f8fb188096a2a702c160ebf5e2c66b4b", "url": "https://github.com/gchq/Gaffer/commit/dfe9fd07f8fb188096a2a702c160ebf5e2c66b4b", "message": "gh-2266 Adding commandLineArgs property to MapReduce interface.", "committedDate": "2020-06-09T07:43:48Z", "type": "commit"}, {"oid": "dfe9fd07f8fb188096a2a702c160ebf5e2c66b4b", "url": "https://github.com/gchq/Gaffer/commit/dfe9fd07f8fb188096a2a702c160ebf5e2c66b4b", "message": "gh-2266 Adding commandLineArgs property to MapReduce interface.", "committedDate": "2020-06-09T07:43:48Z", "type": "forcePushed"}, {"oid": "48691907b35467c3788d1e5e3be47ea6e3863367", "url": "https://github.com/gchq/Gaffer/commit/48691907b35467c3788d1e5e3be47ea6e3863367", "message": "gh-2266 Correcting README", "committedDate": "2020-06-10T12:32:53Z", "type": "commit"}]}