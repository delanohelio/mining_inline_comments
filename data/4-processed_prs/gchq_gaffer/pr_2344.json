{"pr_number": 2344, "pr_title": "gh-2335 Adding github workflow to automate koryphe version update.", "pr_createdAt": "2020-11-19T08:26:10Z", "pr_url": "https://github.com/gchq/Gaffer/pull/2344", "timeline": [{"oid": "99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c", "url": "https://github.com/gchq/Gaffer/commit/99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c", "message": "gh-2335 Adding github workflow to automate koryphe version update.", "committedDate": "2020-11-18T21:13:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY5NTIwMQ==", "url": "https://github.com/gchq/Gaffer/pull/2344#discussion_r526695201", "bodyText": "Could make the pull request afterwards?", "author": "d47853", "createdAt": "2020-11-19T09:00:47Z", "path": ".github/workflows/update-koryphe-version.yaml", "diffHunk": "@@ -0,0 +1,33 @@\n+name: Update Korpyhe Version\n+on:\n+  workflow_dispatch:\n+    inputs:\n+      version:\n+        description: 'Korpyhe Version'\n+        required: true\n+\n+jobs:\n+  update-koryphe-version:\n+    runs-on: ubuntu-latest\n+    env:\n+      MAVEN_OPTS: -Dmaven.wagon.http.retryHandler.count=3 -Dmaven.wagon.httpconnectionManager.ttlSeconds=25\n+    steps:\n+\n+      - name: Checkout develop\n+        uses: actions/checkout@v2\n+        with:\n+          ref: develop\n+          token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n+\n+      - name: Set up Github credentials\n+        run: |\n+          git config user.name Gaffer\n+          git config user.email github-actions@github.com\n+\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+\n+      - name: Update Korpyhe Version", "originalCommit": "99ca7eb821ec717f7e94cf5d3aae93b5f1929c0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjc3MTExNg==", "url": "https://github.com/gchq/Gaffer/pull/2344#discussion_r526771116", "bodyText": "Now creating a PR.", "author": "m29827", "createdAt": "2020-11-19T10:57:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjY5NTIwMQ=="}], "type": "inlineReview"}, {"oid": "74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe", "url": "https://github.com/gchq/Gaffer/commit/74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe", "message": "gh-2335 Automating PR creation and parameterising update branch name.", "committedDate": "2020-11-19T10:55:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTYzNTIzOA==", "url": "https://github.com/gchq/Gaffer/pull/2344#discussion_r529635238", "bodyText": "Don't think admin token would be required for this. You could use the default one:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      github_token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n          \n          \n            \n                      github_token: ${{ secrets.GITHUB_TOKEN }}", "author": "d47853", "createdAt": "2020-11-24T15:28:14Z", "path": ".github/workflows/update-koryphe-version.yaml", "diffHunk": "@@ -0,0 +1,42 @@\n+name: Update Korpyhe Version\n+on:\n+  workflow_dispatch:\n+    inputs:\n+      version:\n+        description: 'Korpyhe Version'\n+        required: true\n+\n+jobs:\n+  update-koryphe-version:\n+    runs-on: ubuntu-latest\n+    env:\n+      MAVEN_OPTS: -Dmaven.wagon.http.retryHandler.count=3 -Dmaven.wagon.httpconnectionManager.ttlSeconds=25\n+      VERSION_UPDATE_BRANCH: update-koryphe-version-${{ github.event.inputs.version }}\n+    steps:\n+\n+      - name: Checkout develop\n+        uses: actions/checkout@v2\n+        with:\n+          ref: develop\n+          token: ${{ secrets.ADMIN_GITHUB_TOKEN }}\n+\n+      - name: Set up Github credentials\n+        run: |\n+          git config user.name Gaffer\n+          git config user.email github-actions@github.com\n+\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+\n+      - name: Update Korpyhe Version\n+        run: ./cd/updateKorypheVersion.sh ${{ github.event.inputs.version }}\n+\n+      - name: Submit PR\n+        if: ${{ success() }}\n+        uses: repo-sync/pull-request@v2\n+        with:\n+          source_branch: ${{ env.VERSION_UPDATE_BRANCH }}\n+          destination_branch: develop\n+          github_token: ${{ secrets.ADMIN_GITHUB_TOKEN }}", "originalCommit": "74d6054ac9f35ebfef32e01b0b93d3861b4ebfbe", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e0d0d99a46fe179ca73212f49124dbd8923e9015", "url": "https://github.com/gchq/Gaffer/commit/e0d0d99a46fe179ca73212f49124dbd8923e9015", "message": "Switch to use the default GITHUB_TOKEN\n\nCo-authored-by: d47853 <d47853@users.noreply.github.com>", "committedDate": "2020-11-24T17:02:03Z", "type": "commit"}, {"oid": "ffa4ed6b3ed7e400f36e3a87acc70f0f872fc061", "url": "https://github.com/gchq/Gaffer/commit/ffa4ed6b3ed7e400f36e3a87acc70f0f872fc061", "message": "Merge branch 'develop' into gh-2335-automate-korpyhe-version-updates-on-release", "committedDate": "2020-11-30T10:12:19Z", "type": "commit"}, {"oid": "5ef7f805cb995e6aef2354b71e5b4863da317c96", "url": "https://github.com/gchq/Gaffer/commit/5ef7f805cb995e6aef2354b71e5b4863da317c96", "message": "Merge branch 'develop' into gh-2335-automate-korpyhe-version-updates-on-release", "committedDate": "2020-12-01T12:18:16Z", "type": "commit"}]}