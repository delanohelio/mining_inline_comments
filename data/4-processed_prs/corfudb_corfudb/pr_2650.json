{"pr_number": 2650, "pr_title": "Fix NullPointerException in StreamView.", "pr_createdAt": "2020-07-22T02:32:52Z", "pr_url": "https://github.com/CorfuDB/CorfuDB/pull/2650", "timeline": [{"oid": "09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "url": "https://github.com/CorfuDB/CorfuDB/commit/09f52ea815d0f704f9cd97cec1adcc8bd6a4de38", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException.", "committedDate": "2020-07-22T02:37:52Z", "type": "forcePushed"}, {"oid": "a8d8890a484e413306b1f35ecce3c31af8f103bc", "url": "https://github.com/CorfuDB/CorfuDB/commit/a8d8890a484e413306b1f35ecce3c31af8f103bc", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException.", "committedDate": "2020-07-22T02:49:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzE3NA==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r458517174", "bodyText": "I think its cleaner to make this field final and assign the empty list in the constructors that don't need it.", "author": "Maithem", "createdAt": "2020-07-22T03:48:29Z", "path": "runtime/src/main/java/org/corfudb/runtime/exceptions/TrimmedException.java", "diffHunk": "@@ -24,7 +25,7 @@\n      */\n     @Getter\n     @Setter\n-    private List<Long> trimmedAddresses;\n+    private List<Long> trimmedAddresses = Collections.emptyList();", "originalCommit": "a8d8890a484e413306b1f35ecce3c31af8f103bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA5MjQ2MQ==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r459092461", "bodyText": "Done.", "author": "WenbinZhu", "createdAt": "2020-07-22T21:24:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzE3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzQzMA==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r458517430", "bodyText": "Cleaner to push down to the constructor.", "author": "Maithem", "createdAt": "2020-07-22T03:49:33Z", "path": "runtime/src/main/java/org/corfudb/runtime/view/AddressSpaceView.java", "diffHunk": "@@ -727,7 +727,7 @@ private boolean isLogDataValid(long address, ILogData logData, boolean throwExce\n \n         if (logData.isTrimmed()) {\n             if (throwException) {\n-                throw new TrimmedException(String.format(\"Trimmed address %s\", address));\n+                throw new TrimmedException(Collections.singletonList(address));", "originalCommit": "a8d8890a484e413306b1f35ecce3c31af8f103bc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTA5MjUxMg==", "url": "https://github.com/CorfuDB/CorfuDB/pull/2650#discussion_r459092512", "bodyText": "Done.", "author": "WenbinZhu", "createdAt": "2020-07-22T21:24:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODUxNzQzMA=="}], "type": "inlineReview"}, {"oid": "3348e1f41ca82172eebe39538b154c47e12f7a3e", "url": "https://github.com/CorfuDB/CorfuDB/commit/3348e1f41ca82172eebe39538b154c47e12f7a3e", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException.", "committedDate": "2020-07-22T21:24:02Z", "type": "forcePushed"}, {"oid": "3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "url": "https://github.com/CorfuDB/CorfuDB/commit/3df130b05e8b1827dea3bd3abab09ff2f7d49e89", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException.", "committedDate": "2020-07-22T21:33:30Z", "type": "forcePushed"}, {"oid": "f8447691f39b4f0315dc4528ed9b29441b3b9785", "url": "https://github.com/CorfuDB/CorfuDB/commit/f8447691f39b4f0315dc4528ed9b29441b3b9785", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException, but is null.", "committedDate": "2020-07-23T00:40:57Z", "type": "commit"}, {"oid": "f8447691f39b4f0315dc4528ed9b29441b3b9785", "url": "https://github.com/CorfuDB/CorfuDB/commit/f8447691f39b4f0315dc4528ed9b29441b3b9785", "message": "Fix NullPointerException in StreamView.\n\nWhen read option is set to ignoreTrim and non cacheable, removeFromQueue\nwill throw NPE when encountering TrimmedException and trying to get the\ntrimmed addresses list from TrimmedException, but is null.", "committedDate": "2020-07-23T00:40:57Z", "type": "forcePushed"}]}