{"pr_number": 9477, "pr_title": "Add aidl interface to lock and unlock the screen.", "pr_createdAt": "2020-07-19T14:53:40Z", "pr_url": "https://github.com/osmandapp/OsmAnd/pull/9477", "timeline": [{"oid": "440ad5828b003e98472ff88732c62c000b0c0d34", "url": "https://github.com/osmandapp/OsmAnd/commit/440ad5828b003e98472ff88732c62c000b0c0d34", "message": "Add aidl interface to lock and unlock the screen.\nFor instance it call allow a service to wake up the navigation using media buttons", "committedDate": "2020-07-19T14:50:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxODM0Ng==", "url": "https://github.com/osmandapp/OsmAnd/pull/9477#discussion_r457618346", "bodyText": "This will bring some problems for apps which try to update to new API version because aidlapi is another package (newer API) and it might be unimported in some apps.", "author": "Chumva", "createdAt": "2020-07-20T18:45:45Z", "path": "OsmAnd/src/net/osmand/aidl/IOsmAndAidlInterface.aidl", "diffHunk": "@@ -96,6 +96,7 @@ import net.osmand.aidl.mapmarker.RemoveMapMarkersParams;\n \n import net.osmand.aidl.quickaction.QuickActionParams;\n import net.osmand.aidl.quickaction.QuickActionInfoParams;\n+import net.osmand.aidlapi.lock.SetLockStateParams;", "originalCommit": "440ad5828b003e98472ff88732c62c000b0c0d34", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY3NTM3OA==", "url": "https://github.com/osmandapp/OsmAnd/pull/9477#discussion_r457675378", "bodyText": "I must confess that I didn't completely understand the concept behind OsmandAidlServiceV2 and OsmandAidlService, since there are a lot of code duplication.\nIs V2 intended to replace the old?", "author": "ehermann", "createdAt": "2020-07-20T20:34:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxODM0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzY3OTMwMw==", "url": "https://github.com/osmandapp/OsmAnd/pull/9477#discussion_r457679303", "bodyText": "Yes, V2 is intended to replace old, because there were issues with backwards compatibility for new fields. V2 has a similar structure but uses bundle as the main storage element and it solves some issues with write/read fields order and backwards compatibility for items inside lists.  It is not necessary to add new methods to old api.", "author": "Chumva", "createdAt": "2020-07-20T20:42:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxODM0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcwNjA2MA==", "url": "https://github.com/osmandapp/OsmAnd/pull/9477#discussion_r457706060", "bodyText": "Ok, now it's clear! Thanks!\nSo, maybe I'll make a commit removing my adds in the old api, It would be easier to maintain with less code duplication. What do you think?", "author": "ehermann", "createdAt": "2020-07-20T21:37:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxODM0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzcxMjgwOQ==", "url": "https://github.com/osmandapp/OsmAnd/pull/9477#discussion_r457712809", "bodyText": "I don't think that removing these changes is necessary, there is much code duplication and one more method will not change the situation. It will be better to test new methods thoroughly instead of removing this adds.", "author": "Chumva", "createdAt": "2020-07-20T21:52:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzYxODM0Ng=="}], "type": "inlineReview"}, {"oid": "b5c6593743cb58d31dcaba927989cbbfa9a3134e", "url": "https://github.com/osmandapp/OsmAnd/commit/b5c6593743cb58d31dcaba927989cbbfa9a3134e", "message": "Fix support for old aidl api", "committedDate": "2020-07-20T18:49:00Z", "type": "commit"}]}