{"pr_number": 1125, "pr_title": "Cleans up MongoDB for release", "pr_createdAt": "2020-03-26T06:28:11Z", "pr_url": "https://github.com/openzipkin/brave/pull/1125", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODM0MjI5OA==", "url": "https://github.com/openzipkin/brave/pull/1125#discussion_r398342298", "bodyText": "I checked every reference in mongo's driver. My guess is that this guard was added because of mocks. I've noticed some irrelevant null defense elsewhere when mocks are used primarily.", "author": "codefromthecrypt", "createdAt": "2020-03-26T06:29:28Z", "path": "instrumentation/mongodb/src/main/java/brave/mongodb/TraceMongoCommandListener.java", "diffHunk": "@@ -104,8 +104,7 @@\n   @Override public void commandFailed(CommandFailedEvent event) {\n     Span span = threadLocalSpan.remove();\n     if (span == null) return;\n-    Throwable throwable = event.getThrowable();\n-    span.error(throwable == null ? new MongoException(\"Command failed but no throwable was reported\") : throwable);", "originalCommit": "e90fbee4d1986ef7a7b76c76687e11d4560e2a67", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "46b11b12b3c088778aca78b5ac271f4fe59ffedf", "url": "https://github.com/openzipkin/brave/commit/46b11b12b3c088778aca78b5ac271f4fe59ffedf", "message": "Cleans up MongoDB for release\n\n* Removes unused dependency on async\n* Removes irrelevant dependency on reactivestreams\n* Adds note to vote for async\n* Removes toBuilder\n* Removes unnecessary null defense on command failed\n* Backports tests to ITRemote\n* Makes tags checking more strict, notably with cluster ID\n* Adjusts formatting\n* Fixes pom versions", "committedDate": "2020-03-28T01:52:18Z", "type": "commit"}, {"oid": "46b11b12b3c088778aca78b5ac271f4fe59ffedf", "url": "https://github.com/openzipkin/brave/commit/46b11b12b3c088778aca78b5ac271f4fe59ffedf", "message": "Cleans up MongoDB for release\n\n* Removes unused dependency on async\n* Removes irrelevant dependency on reactivestreams\n* Adds note to vote for async\n* Removes toBuilder\n* Removes unnecessary null defense on command failed\n* Backports tests to ITRemote\n* Makes tags checking more strict, notably with cluster ID\n* Adjusts formatting\n* Fixes pom versions", "committedDate": "2020-03-28T01:52:18Z", "type": "forcePushed"}]}