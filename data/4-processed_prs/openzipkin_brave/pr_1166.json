{"pr_number": 1166, "pr_title": "Moves FinishedSpanHandler.alwaysSampleLocal to Tracing.Builder", "pr_createdAt": "2020-04-20T05:55:36Z", "pr_url": "https://github.com/openzipkin/brave/pull/1166", "timeline": [{"oid": "bb02cacba2a653a0d6bdec285c1e60515a4ce401", "url": "https://github.com/openzipkin/brave/commit/bb02cacba2a653a0d6bdec285c1e60515a4ce401", "message": "Moves FinishedSpanHandler.alwaysSampleLocal to Tracing.Builder\n\nWhen FinishedSpanHandler.alwaysSampleLocal was defined, we didn't have\nTracingCustomizer which allowed looser coupling of configuration. This\nmoves `FinishedSpanHandler.alwaysSampleLocal()` to `Tracing.Builder` so\nwe don't have to inherit this burden in the upcoming `SpanHandler`.", "committedDate": "2020-04-20T05:53:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTExMzI4Nw==", "url": "https://github.com/openzipkin/brave/pull/1166#discussion_r411113287", "bodyText": "// Handle deprecated FinishedSpanHandler.alwaysSampleLocal", "author": "anuraaga", "createdAt": "2020-04-20T06:00:36Z", "path": "brave/src/main/java/brave/Tracing.java", "diffHunk": "@@ -455,6 +478,10 @@ public Tracing build() {\n       // Make sure any exceptions caused by handlers don't crash callers\n       FinishedSpanHandler finishedSpanHandler =\n         NoopAwareFinishedSpanHandler.create(spanHandlers, noop);\n+      boolean alwaysSampleLocal = builder.alwaysSampleLocal;\n+      for (FinishedSpanHandler handler : spanHandlers) {\n+        if (handler.alwaysSampleLocal()) alwaysSampleLocal = true;", "originalCommit": "bb02cacba2a653a0d6bdec285c1e60515a4ce401", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "04a1fe112b6b2a308e28a7c78a16679051c539ba", "url": "https://github.com/openzipkin/brave/commit/04a1fe112b6b2a308e28a7c78a16679051c539ba", "message": "feedback", "committedDate": "2020-04-20T06:11:34Z", "type": "commit"}]}