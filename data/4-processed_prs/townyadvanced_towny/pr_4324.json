{"pr_number": 4324, "pr_title": "Improve delete events.", "pr_createdAt": "2020-09-17T06:07:38Z", "pr_url": "https://github.com/TownyAdvanced/Towny/pull/4324", "timeline": [{"oid": "94c758726ad80d106b22394095d067bd79ba022e", "url": "https://github.com/TownyAdvanced/Towny/commit/94c758726ad80d106b22394095d067bd79ba022e", "message": "Improve delete events.", "committedDate": "2020-09-17T06:03:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MDI1MjYzNg==", "url": "https://github.com/TownyAdvanced/Towny/pull/4324#discussion_r490252636", "bodyText": "This one here could be a bit of trouble. It would return null if the resident has not had a UUID applied to it, (which could certainly happen if they haven't logged in since UUID collection began and the old-resident-delete is why they're deleted,) or if the admin has the UUID gathering task turned off. Maybe put a warning that it could return null in the javadoc?", "author": "LlmDl", "createdAt": "2020-09-17T13:37:39Z", "path": "src/com/palmergames/bukkit/towny/event/DeletePlayerEvent.java", "diffHunk": "@@ -18,15 +17,28 @@ public static HandlerList getHandlerList() {\n         return handlers;\n     }\n \n-    public DeletePlayerEvent(String player) {\n-        super(!Bukkit.getServer().isPrimaryThread());\n-        this.playerName = player;\n+    public DeletePlayerEvent(Resident resident) {\n+        super(resident.getName(), resident.getUUID(), resident.getRegistered());\n     }\n \n     /**\n      * @return the deleted player's name.\n      */\n     public String getPlayerName() {\n-        return playerName;\n+        return name;\n     }\n+\n+\t/**\n+\t * @return deleted player's uuid\n+\t */\n+\tpublic UUID getPlayerUUID() {", "originalCommit": "94c758726ad80d106b22394095d067bd79ba022e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cc0a9e8e657683e4272fbbcf86b33f30cd67a264", "url": "https://github.com/TownyAdvanced/Towny/commit/cc0a9e8e657683e4272fbbcf86b33f30cd67a264", "message": "Notate player UUID nullability.", "committedDate": "2020-09-17T19:22:14Z", "type": "commit"}]}