{"pr_number": 4519, "pr_title": "Adds NationRankRemoveEvent and NationRankAddEvent", "pr_createdAt": "2020-12-04T14:15:44Z", "pr_url": "https://github.com/TownyAdvanced/Towny/pull/4519", "timeline": [{"oid": "40aa3ad0f51abb35535dc0367b7bc0145e1b8d90", "url": "https://github.com/TownyAdvanced/Towny/commit/40aa3ad0f51abb35535dc0367b7bc0145e1b8d90", "message": "Adds NationRankRemoveEvent and NationRankAddEvent", "committedDate": "2020-12-04T14:12:46Z", "type": "commit"}, {"oid": "cf56abec468ac49fead0399162e9e01c7fc98634", "url": "https://github.com/TownyAdvanced/Towny/commit/cf56abec468ac49fead0399162e9e01c7fc98634", "message": "adding new line at the end of the event classes", "committedDate": "2020-12-04T14:16:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEzMzQ2Mg==", "url": "https://github.com/TownyAdvanced/Towny/pull/4519#discussion_r536133462", "bodyText": "This should have been done to line 958.", "author": "LlmDl", "createdAt": "2020-12-04T14:21:55Z", "path": "src/com/palmergames/bukkit/towny/command/NationCommand.java", "diffHunk": "@@ -954,11 +960,20 @@ public void nationRank(Player player, String[] split) throws TownyException {\n \t\t\t\t\t}\r\n \t\t\t\t} catch (AlreadyRegisteredException e) {\r\n \t\t\t\t\t// Must already have this rank\r\n-\t\t\t\t\tTownyMessaging.sendMsg(player, Translation.of(\"msg_resident_already_has_rank\", target.getName(), \"Nation\"));\r\n+\t\t\t\t\tTownyMessaging.sendMsg(player, nationRankAddEvent.getCancelMessage());\r", "originalCommit": "cf56abec468ac49fead0399162e9e01c7fc98634", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjEzNTMwNA==", "url": "https://github.com/TownyAdvanced/Towny/pull/4519#discussion_r536135304", "bodyText": "The cancelMessage should be Translation.of(\"msg_resident_not_part_of_any_town\") which can be set directly on line 18.", "author": "LlmDl", "createdAt": "2020-12-04T14:24:35Z", "path": "src/com/palmergames/bukkit/towny/event/NationRankAddEvent.java", "diffHunk": "@@ -0,0 +1,65 @@\n+package com.palmergames.bukkit.towny.event;\n+\n+import com.palmergames.bukkit.towny.object.Nation;\n+import com.palmergames.bukkit.towny.object.Resident;\n+import com.palmergames.bukkit.towny.object.Translation;\n+import org.bukkit.event.Cancellable;\n+import org.bukkit.event.Event;\n+import org.bukkit.event.HandlerList;\n+\n+public class NationRankAddEvent extends Event implements Cancellable {\n+\n+\tprivate static final HandlerList handlers = new HandlerList();\n+\n+\tprivate final Nation nation;\n+\tprivate final Resident res;\n+\tprivate final String rank;\n+\tprivate boolean isCancelled = false;\n+\tprivate String cancelMessage;\n+\n+\tpublic NationRankAddEvent(Nation nation, String rank, Resident res) {\n+\t\tthis.nation = nation;\n+\t\tthis.rank = rank;\n+\t\tthis.res = res;\n+\t\tthis.cancelMessage = Translation.of(\"msg_resident_already_has_rank\", res.getName(), \"Nation\");", "originalCommit": "cf56abec468ac49fead0399162e9e01c7fc98634", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "655c967031229fcfc1716e47f3a6bfa21b5c3ef7", "url": "https://github.com/TownyAdvanced/Towny/commit/655c967031229fcfc1716e47f3a6bfa21b5c3ef7", "message": "adding new line at the end of the event classes", "committedDate": "2020-12-04T14:28:49Z", "type": "commit"}, {"oid": "baa4a5d847f21530b3d7e22fa0698a30d1951e8b", "url": "https://github.com/TownyAdvanced/Towny/commit/baa4a5d847f21530b3d7e22fa0698a30d1951e8b", "message": "Fixes up cancel message", "committedDate": "2020-12-04T14:34:27Z", "type": "commit"}, {"oid": "e1d2a010ab3acc1333302a535a8d31de1c44a5ad", "url": "https://github.com/TownyAdvanced/Towny/commit/e1d2a010ab3acc1333302a535a8d31de1c44a5ad", "message": "Fixes people actually getting the rank", "committedDate": "2020-12-04T14:47:52Z", "type": "commit"}, {"oid": "edfc18dd8f974e27d7b8984d4fefb45f88bafb46", "url": "https://github.com/TownyAdvanced/Towny/commit/edfc18dd8f974e27d7b8984d4fefb45f88bafb46", "message": "moving events to nation package", "committedDate": "2020-12-04T15:34:23Z", "type": "commit"}]}