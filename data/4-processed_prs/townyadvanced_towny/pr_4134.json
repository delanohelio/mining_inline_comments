{"pr_number": 4134, "pr_title": "1.16.1: Add Respawn Anchor Integration", "pr_createdAt": "2020-07-03T16:29:24Z", "pr_url": "https://github.com/TownyAdvanced/Towny/pull/4134", "timeline": [{"oid": "5822c245cf7415dbcb42e3486a2f94315e0a1044", "url": "https://github.com/TownyAdvanced/Towny/commit/5822c245cf7415dbcb42e3486a2f94315e0a1044", "message": "Add respawn anchor precedence.", "committedDate": "2020-07-03T16:24:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcwMjk3NQ==", "url": "https://github.com/TownyAdvanced/Towny/pull/4134#discussion_r449702975", "bodyText": "Remove debug message.", "author": "LlmDl", "createdAt": "2020-07-03T21:00:37Z", "path": "src/com/palmergames/bukkit/towny/listeners/TownyPlayerListener.java", "diffHunk": "@@ -156,8 +156,15 @@ public void onPlayerRespawn(PlayerRespawnEvent event) {\n \t\t\n \t\tPlayer player = event.getPlayer();\n \t\t\n-\t\tif (!TownySettings.isTownRespawning())\n+\t\tif (!TownySettings.isTownRespawning()) {\n \t\t\treturn;\n+\t\t}\n+\t\t\n+\t\t// If respawn anchors have higher precedence than town spawns, use them instead.\n+\t\tif (Towny.is116Plus() && event.isAnchorSpawn() && TownySettings.isRespawnAnchorHigherPrecedence()) {\n+\t\t\tTownyMessaging.sendErrorMsg(\"got here\");", "originalCommit": "5822c245cf7415dbcb42e3486a2f94315e0a1044", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f191b871b0ab209fd3f68ab9ad29e072a930b9c0", "url": "https://github.com/TownyAdvanced/Towny/commit/f191b871b0ab209fd3f68ab9ad29e072a930b9c0", "message": "Remove debug message.", "committedDate": "2020-07-03T22:01:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcxMTI0Nw==", "url": "https://github.com/TownyAdvanced/Towny/pull/4134#discussion_r449711247", "bodyText": "Just caught this one. This will broadcast an error message any time its run on non-1.16+, right? If so, it will have to be removed as well.", "author": "LlmDl", "createdAt": "2020-07-03T22:05:17Z", "path": "src/com/palmergames/bukkit/towny/Towny.java", "diffHunk": "@@ -851,4 +852,16 @@ else if (Bukkit.getServer().getName().equalsIgnoreCase(\"craftbukkit\")) {\n \t\t\n \t\tmetrics.addCustomChart(new Metrics.SimplePie(\"resident_uuids_stored\", () -> TownySettings.getUUIDPercent()));\n \t}\n+\t\n+\tpublic static boolean is116Plus() {\n+\t\tString verString = Bukkit.getBukkitVersion();\n+\t\tverString = verString.replace(\"-R0.1-SNAPSHOT\", \"\");\n+\t\t\n+\t\tVersion ver = new Version(verString);\n+\t\tVersion required = new Version(\"1.16.1\");\n+\t\t\n+\t\tTownyMessaging.sendErrorMsg(ver.compareTo(required) + \"\");", "originalCommit": "f191b871b0ab209fd3f68ab9ad29e072a930b9c0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcxMTQ5Nw==", "url": "https://github.com/TownyAdvanced/Towny/pull/4134#discussion_r449711497", "bodyText": "Yeah, it was left there on accident.", "author": null, "createdAt": "2020-07-03T22:07:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTcxMTI0Nw=="}], "type": "inlineReview"}, {"oid": "13a922c574a8b8059679cc0216a2a37d5ef65ca8", "url": "https://github.com/TownyAdvanced/Towny/commit/13a922c574a8b8059679cc0216a2a37d5ef65ca8", "message": "Remove other debug message.", "committedDate": "2020-07-03T22:07:15Z", "type": "commit"}]}