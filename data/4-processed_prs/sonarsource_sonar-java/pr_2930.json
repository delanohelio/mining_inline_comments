{"pr_number": 2930, "pr_title": "SONARJAVA-3354 Rule S5777: Exception testing via JUnit @Test annotation should be avoided", "pr_createdAt": "2020-04-30T14:23:11Z", "pr_url": "https://github.com/SonarSource/sonar-java/pull/2930", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODQ0NTM4OA==", "url": "https://github.com/SonarSource/sonar-java/pull/2930#discussion_r418445388", "bodyText": "This * should be an HTML list, it's a bug in rule API, I fixed the RSPEC description, in case it happens again, it's due to one space before the * in the rule description, removing it solves the problem.", "author": "quentin-jaquier-sonarsource", "createdAt": "2020-05-01T07:24:08Z", "path": "java-checks/src/main/resources/org/sonar/l10n/java/rules/java/S5777_java.html", "diffHunk": "@@ -0,0 +1,49 @@\n+<p>When testing exception via <code>@Test</code> annotation, any code after the raised exception will not be executed. It will prevent you to test the\n+state of the program after the raised exception and, at worst, make you&nbsp;misleadingly think that it is executed.</p>\n+<p>You should consider moving any assertions into a separate test method where possible, or using <a\n+href=\"https://github.com/junit-team/junit4/wiki/Exception-testing#using-assertthrows-method\">org.junit.Assert.assertThrows</a> instead.</p>\n+<p> Alternatively, you could use <a href=\"https://github.com/junit-team/junit4/wiki/Exception-testing#trycatch-idiom\">try-catch idiom</a> for JUnit\n+version &lt; 4.13 or if your project does not support lambdas.</p>\n+<h2>Noncompliant Code Example</h2>\n+<pre>\n+@Test(expected = IndexOutOfBoundsException.class)\n+public void testShouldFail() {\n+  get();\n+  // This test pass since execution will never get past this line.\n+  Assert.assertEquals(0, 1);\n+}\n+\n+private Object get() {\n+  throw new IndexOutOfBoundsException();\n+}\n+</pre>\n+<h2>Compliant Solution</h2>\n+<p> * For JUnit &gt;= 4.13, use <a", "originalCommit": "9062b58d1c19f537e45150275d9c1726cc8e9942", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a7962930d2716cbfab84c2ff64c6aefb45359579", "url": "https://github.com/SonarSource/sonar-java/commit/a7962930d2716cbfab84c2ff64c6aefb45359579", "message": "Rule S5777: Exception testing via JUnit @Test annotation should ...\n\n... be avoided", "committedDate": "2020-05-04T17:18:07Z", "type": "commit"}, {"oid": "d2b24a486032e86aca51646dfa294abfef31d2d4", "url": "https://github.com/SonarSource/sonar-java/commit/d2b24a486032e86aca51646dfa294abfef31d2d4", "message": "Only complain if annotated method contains assertions", "committedDate": "2020-05-04T17:18:07Z", "type": "commit"}, {"oid": "2d1c00eca3cccc03250243e8a5d646f5bc68a1dd", "url": "https://github.com/SonarSource/sonar-java/commit/2d1c00eca3cccc03250243e8a5d646f5bc68a1dd", "message": "Update message and rule description", "committedDate": "2020-05-04T17:18:07Z", "type": "commit"}, {"oid": "b0e12064025e1fc6f26ad3fd3d6c17cc45fa567b", "url": "https://github.com/SonarSource/sonar-java/commit/b0e12064025e1fc6f26ad3fd3d6c17cc45fa567b", "message": "Change issue location to match rule description", "committedDate": "2020-05-04T17:18:07Z", "type": "commit"}, {"oid": "b0e12064025e1fc6f26ad3fd3d6c17cc45fa567b", "url": "https://github.com/SonarSource/sonar-java/commit/b0e12064025e1fc6f26ad3fd3d6c17cc45fa567b", "message": "Change issue location to match rule description", "committedDate": "2020-05-04T17:18:07Z", "type": "forcePushed"}]}