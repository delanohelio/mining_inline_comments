{"pr_number": 3337, "pr_title": "SONARJAVA-2154 Remove unages of guava Lists from sonar-java-frontend package", "pr_createdAt": "2020-12-09T09:19:51Z", "pr_url": "https://github.com/SonarSource/sonar-java/pull/3337", "timeline": [{"oid": "04bb748d76d80e083bfb33ece3d7161a5b4e2ae2", "url": "https://github.com/SonarSource/sonar-java/commit/04bb748d76d80e083bfb33ece3d7161a5b4e2ae2", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-09T11:11:18Z", "type": "forcePushed"}, {"oid": "aa17722bd4e92c2a45760bfcfe323ac9ce941b16", "url": "https://github.com/SonarSource/sonar-java/commit/aa17722bd4e92c2a45760bfcfe323ac9ce941b16", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-09T11:31:07Z", "type": "forcePushed"}, {"oid": "c9471682cef5ad45f97db87efb22a1d2588a5901", "url": "https://github.com/SonarSource/sonar-java/commit/c9471682cef5ad45f97db87efb22a1d2588a5901", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-09T13:50:16Z", "type": "forcePushed"}, {"oid": "d66e3d3c0ccc58f4637daddff507cce9aa147eb6", "url": "https://github.com/SonarSource/sonar-java/commit/d66e3d3c0ccc58f4637daddff507cce9aa147eb6", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-09T15:52:53Z", "type": "forcePushed"}, {"oid": "55da28903b01b7f9e34e1390ba9cee6b461a917a", "url": "https://github.com/SonarSource/sonar-java/commit/55da28903b01b7f9e34e1390ba9cee6b461a917a", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-09T16:54:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTk1NjU3OQ==", "url": "https://github.com/SonarSource/sonar-java/pull/3337#discussion_r539956579", "bodyText": "It can probably be Collections.emptyList() here", "author": "m-g-sonar", "createdAt": "2020-12-10T08:07:44Z", "path": "java-frontend/src/main/java/org/sonar/java/SonarComponents.java", "diffHunk": "@@ -114,13 +114,19 @@ public SonarComponents(FileLinesContextFactory fileLinesContextFactory, FileSyst\n       CheckRegistrar.RegistrarContext registrarContext = new CheckRegistrar.RegistrarContext();\n       for (CheckRegistrar checkClassesRegister : checkRegistrars) {\n         checkClassesRegister.register(registrarContext);\n-        Iterable<Class<? extends JavaCheck>> checkClasses = registrarContext.checkClasses();\n-        Iterable<Class<? extends JavaCheck>> testCheckClasses = registrarContext.testCheckClasses();\n-        registerCheckClasses(registrarContext.repositoryKey(), Lists.newArrayList(checkClasses != null ? checkClasses : new ArrayList<>()));\n-        registerTestCheckClasses(registrarContext.repositoryKey(), Lists.newArrayList(testCheckClasses != null ? testCheckClasses : new ArrayList<>()));\n+        List<Class<? extends JavaCheck>> checkClasses = getChecks(registrarContext.checkClasses());\n+        List<Class<? extends JavaCheck>> testCheckClasses = getChecks(registrarContext.testCheckClasses());\n+        registerCheckClasses(registrarContext.repositoryKey(), checkClasses);\n+        registerTestCheckClasses(registrarContext.repositoryKey(), testCheckClasses);\n       }\n     }\n   }\n+  \n+  private static List<Class<? extends JavaCheck>> getChecks(@Nullable Iterable<Class<? extends JavaCheck>> iterable) {\n+    return iterable != null ?\n+      StreamSupport.stream(iterable.spliterator(), false).collect(Collectors.toList()) :\n+      new ArrayList<>();", "originalCommit": "55da28903b01b7f9e34e1390ba9cee6b461a917a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a3bc176c006796f8caddf44fe7397ab34b5fe34", "url": "https://github.com/SonarSource/sonar-java/commit/2a3bc176c006796f8caddf44fe7397ab34b5fe34", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-10T08:59:03Z", "type": "commit"}, {"oid": "2a3bc176c006796f8caddf44fe7397ab34b5fe34", "url": "https://github.com/SonarSource/sonar-java/commit/2a3bc176c006796f8caddf44fe7397ab34b5fe34", "message": "SONARJAVA-2154 Remove usages of guava Lists from java-frontend module", "committedDate": "2020-12-10T08:59:03Z", "type": "forcePushed"}]}