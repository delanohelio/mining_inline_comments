{"pr_number": 352, "pr_title": "Pull parts of FirebaseAuth into an abstract class.", "pr_createdAt": "2020-01-23T19:07:51Z", "pr_url": "https://github.com/firebase/firebase-admin-java/pull/352", "timeline": [{"oid": "f4c59bea9d29a984abcebfc072121a72ac4cedc8", "url": "https://github.com/firebase/firebase-admin-java/commit/f4c59bea9d29a984abcebfc072121a72ac4cedc8", "message": "Pull parts of FirebaseAuth into an abstract class.", "committedDate": "2020-01-23T19:01:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzIwMg==", "url": "https://github.com/firebase/firebase-admin-java/pull/352#discussion_r370303202", "bodyText": "Do checkNotNull in the parent constructor.", "author": "hiranya911", "createdAt": "2020-01-23T19:11:27Z", "path": "src/main/java/com/google/firebase/auth/FirebaseAuth.java", "diffHunk": "@@ -53,35 +33,19 @@\n  * then use it to perform a variety of authentication-related operations, including generating\n  * custom tokens for use by client-side code, verifying Firebase ID Tokens received from clients, or\n  * creating new FirebaseApp instances that are scoped to a particular authentication UID.\n+ * \n+ * <p>TODO(micahstairs): Add getTenantManager() method.\n  */\n-public class FirebaseAuth {\n+public class FirebaseAuth extends AbstractFirebaseAuth {\n \n   private static final String SERVICE_ID = FirebaseAuth.class.getName();\n \n-  private static final String ERROR_CUSTOM_TOKEN = \"ERROR_CUSTOM_TOKEN\";\n-\n-  private final Object lock = new Object();\n-  private final AtomicBoolean destroyed = new AtomicBoolean(false);\n-\n-  private final FirebaseApp firebaseApp;\n-  private final Supplier<FirebaseTokenFactory> tokenFactory;\n-  private final Supplier<? extends FirebaseTokenVerifier> idTokenVerifier;\n-  private final Supplier<? extends FirebaseTokenVerifier> cookieVerifier;\n-  private final Supplier<? extends FirebaseUserManager> userManager;\n-  private final JsonFactory jsonFactory;\n-\n   private FirebaseAuth(Builder builder) {\n-    this.firebaseApp = checkNotNull(builder.firebaseApp);\n-    this.tokenFactory = threadSafeMemoize(builder.tokenFactory);\n-    this.idTokenVerifier = threadSafeMemoize(builder.idTokenVerifier);\n-    this.cookieVerifier = threadSafeMemoize(builder.cookieVerifier);\n-    this.userManager = threadSafeMemoize(new Supplier<FirebaseUserManager>() {\n-      @Override\n-      public FirebaseUserManager get() {\n-        return new FirebaseUserManager(firebaseApp);\n-      }\n-    });\n-    this.jsonFactory = firebaseApp.getOptions().getJsonFactory();\n+    super(\n+        checkNotNull(builder.firebaseApp),", "originalCommit": "f4c59bea9d29a984abcebfc072121a72ac4cedc8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwOTQ3NQ==", "url": "https://github.com/firebase/firebase-admin-java/pull/352#discussion_r370309475", "bodyText": "Done.", "author": "micahstairs", "createdAt": "2020-01-23T19:24:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzIwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzc0NQ==", "url": "https://github.com/firebase/firebase-admin-java/pull/352#discussion_r370303745", "bodyText": "Add newline", "author": "hiranya911", "createdAt": "2020-01-23T19:12:32Z", "path": "src/main/java/com/google/firebase/auth/FirebaseAuth.java", "diffHunk": "@@ -1207,4 +148,4 @@ public void destroy() {\n       instance.destroy();\n     }\n   }\n-}\n+}", "originalCommit": "f4c59bea9d29a984abcebfc072121a72ac4cedc8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwOTQzNQ==", "url": "https://github.com/firebase/firebase-admin-java/pull/352#discussion_r370309435", "bodyText": "Done.", "author": "micahstairs", "createdAt": "2020-01-23T19:24:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDMwMzc0NQ=="}], "type": "inlineReview"}, {"oid": "67a8691eeb787aa34d82f18da679e895db111056", "url": "https://github.com/firebase/firebase-admin-java/commit/67a8691eeb787aa34d82f18da679e895db111056", "message": "Move null check to abstract class constructor and add missing newline.", "committedDate": "2020-01-23T19:23:47Z", "type": "commit"}, {"oid": "bd1997c4249b83758fd4acb4333907574af127d3", "url": "https://github.com/firebase/firebase-admin-java/commit/bd1997c4249b83758fd4acb4333907574af127d3", "message": "Remove unused import from FirebaseAuth.", "committedDate": "2020-01-23T19:27:11Z", "type": "commit"}]}