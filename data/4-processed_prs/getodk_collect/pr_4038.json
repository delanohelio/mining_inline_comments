{"pr_number": 4038, "pr_title": "Match exactly tweaks and polish", "pr_createdAt": "2020-08-24T12:14:08Z", "pr_url": "https://github.com/getodk/collect/pull/4038", "timeline": [{"oid": "8cfbc2eab30c2be468368d72bf923b4ec99ef7b6", "url": "https://github.com/getodk/collect/commit/8cfbc2eab30c2be468368d72bf923b4ec99ef7b6", "message": "Remove assertion with tests at lower level", "committedDate": "2020-08-24T12:41:33Z", "type": "forcePushed"}, {"oid": "d01d09badf878a11e8816927da326f8ca3432a60", "url": "https://github.com/getodk/collect/commit/d01d09badf878a11e8816927da326f8ca3432a60", "message": "Remove assertion with tests at lower level", "committedDate": "2020-08-24T14:08:07Z", "type": "forcePushed"}, {"oid": "e76006558db04bb1d839f9f1a42d96fb3a5c323a", "url": "https://github.com/getodk/collect/commit/e76006558db04bb1d839f9f1a42d96fb3a5c323a", "message": "Remove assertion with tests at lower level", "committedDate": "2020-08-24T16:12:06Z", "type": "forcePushed"}, {"oid": "752fa17ffd5712fd6ccb769e95acd144fa743892", "url": "https://github.com/getodk/collect/commit/752fa17ffd5712fd6ccb769e95acd144fa743892", "message": "Remove assertion with tests at lower level", "committedDate": "2020-08-27T16:16:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU1NjYxOA==", "url": "https://github.com/getodk/collect/pull/4038#discussion_r478556618", "bodyText": "This ended up not being needed for anything but will be nice to have in the future I think.", "author": "seadowg", "createdAt": "2020-08-27T16:45:59Z", "path": "async/src/main/java/org/odk/collect/async/CoroutineAndWorkManagerScheduler.kt", "diffHunk": "@@ -7,13 +7,20 @@ import java.util.function.Consumer\n import java.util.function.Supplier\n import kotlin.coroutines.CoroutineContext\n \n-class CoroutineAndWorkManagerScheduler(private val foreground: CoroutineContext, private val background: CoroutineContext, private val workManager: WorkManager) : Scheduler {\n+class CoroutineAndWorkManagerScheduler(private val foregroundContext: CoroutineContext, private val backgroundContext: CoroutineContext, private val workManager: WorkManager) : Scheduler {\n \n     constructor(workManager: WorkManager) : this(Dispatchers.Main, Dispatchers.IO, workManager) // Needed for Java construction\n \n     override fun <T> immediate(background: Supplier<T>, foreground: Consumer<T>) {\n-        CoroutineScope(this.foreground).launch {\n-            foreground.accept(withContext(this@CoroutineAndWorkManagerScheduler.background) { background.get() })\n+        CoroutineScope(foregroundContext).launch {\n+            val result = withContext(backgroundContext) { background.get() }\n+            foreground.accept(result)\n+        }\n+    }\n+\n+    override fun immediate(foreground: java.lang.Runnable) {", "originalCommit": "7a97864df5fc65eb1d3d8a3d8bfcb85dfe437357", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODU5MzA2Mw==", "url": "https://github.com/getodk/collect/pull/4038#discussion_r478593063", "bodyText": "While here, can I ask you to change the resource name. \ud83d\ude48", "author": "lognaturel", "createdAt": "2020-08-27T17:49:10Z", "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -695,7 +695,7 @@\n     <string name=\"legacy_custom_server_paths_summary\">Will be removed in a future version. Please use /formList and /submission on your server.</string>\n     <string name=\"experimental\">Experimental</string>\n     <string name=\"match_exactly\">Exactly match server</string>\n-    <string name=\"manually\">Manually</string>\n+    <string name=\"manually\">Manual</string>", "originalCommit": "6a0cd8785f8e8597c3c06a0d45b28ccd00b07be9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODYwMDI4Ng==", "url": "https://github.com/getodk/collect/pull/4038#discussion_r478600286", "bodyText": "How about \"Form update succeeded\" or \"Form update completed successfully\"?", "author": "lognaturel", "createdAt": "2020-08-27T18:02:09Z", "path": "collect_app/src/main/res/values/strings.xml", "diffHunk": "@@ -695,11 +695,12 @@\n     <string name=\"legacy_custom_server_paths_summary\">Will be removed in a future version. Please use /formList and /submission on your server.</string>\n     <string name=\"experimental\">Experimental</string>\n     <string name=\"match_exactly\">Exactly match server</string>\n-    <string name=\"manually\">Manually</string>\n+    <string name=\"manually\">Manual</string>\n     <string name=\"form_update_mode_title\">Blank form update mode</string>\n     <string name=\"previously_downloaded_only\">Previously downloaded forms only</string>\n     <string name=\"form_update_frequency_title\">Automatic update frequency</string>\n     <string name=\"form_update_error\">Form update failed</string>\n     <string name=\"report_to_project_lead\">If you keep having this problem, report it to the person who asked you to collect data.</string>\n     <string name=\"unknown_host_error\">Collect can\\'t reach the server at %s. Did you enter the URL correctly?</string>\n+    <string name=\"form_update_complete\">Form update complete</string>", "originalCommit": "7a97864df5fc65eb1d3d8a3d8bfcb85dfe437357", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8c1de462debc37c8c6f6e5c1257eeecfe652ca8d", "url": "https://github.com/getodk/collect/commit/8c1de462debc37c8c6f6e5c1257eeecfe652ca8d", "message": "Use sync problem icon for match exactly errors", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "5074f7873d71e3b081350b51ff3254e9ff4f950d", "url": "https://github.com/getodk/collect/commit/5074f7873d71e3b081350b51ff3254e9ff4f950d", "message": "Use correctly sized icons for form list menu", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "520cfafc0bcc3521aea309aa92a1843e5a4e26d6", "url": "https://github.com/getodk/collect/commit/520cfafc0bcc3521aea309aa92a1843e5a4e26d6", "message": "Update form mode text", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "71e19a09b54eb4977d453ba8048884358adbb5ce", "url": "https://github.com/getodk/collect/commit/71e19a09b54eb4977d453ba8048884358adbb5ce", "message": "Show toast when manual sync is successful", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "285b0ecc4498a2ee4b919c00b286943107e575c6", "url": "https://github.com/getodk/collect/commit/285b0ecc4498a2ee4b919c00b286943107e575c6", "message": "Make sure match exactly progress bar is visible to user", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "92ab8e06f4d5ee19d8e9fd6c35c989863e8b70b6", "url": "https://github.com/getodk/collect/commit/92ab8e06f4d5ee19d8e9fd6c35c989863e8b70b6", "message": "Simplify showing toast", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "3cfde2a4cf1198c5316563d5f23117914b29db3c", "url": "https://github.com/getodk/collect/commit/3cfde2a4cf1198c5316563d5f23117914b29db3c", "message": "Remove assertion with tests at lower level", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "d9392ed093c6c4c3953e06f2fc2738ded5d698a2", "url": "https://github.com/getodk/collect/commit/d9392ed093c6c4c3953e06f2fc2738ded5d698a2", "message": "Update search icon for minimal select dialog", "committedDate": "2020-08-31T08:20:14Z", "type": "commit"}, {"oid": "cc38a0967f652062a932a6e56e1f616e91c5189f", "url": "https://github.com/getodk/collect/commit/cc38a0967f652062a932a6e56e1f616e91c5189f", "message": "Rename resource", "committedDate": "2020-08-31T08:20:15Z", "type": "commit"}, {"oid": "29ec8e98d2aaf508a3c79106343a381789e7fbf1", "url": "https://github.com/getodk/collect/commit/29ec8e98d2aaf508a3c79106343a381789e7fbf1", "message": "Revise success text", "committedDate": "2020-08-31T08:20:15Z", "type": "commit"}, {"oid": "8081696a3e97bc86724c564f501f160b1c44518e", "url": "https://github.com/getodk/collect/commit/8081696a3e97bc86724c564f501f160b1c44518e", "message": "Make sure refresh is hidden when search expands", "committedDate": "2020-08-31T08:20:15Z", "type": "commit"}, {"oid": "8081696a3e97bc86724c564f501f160b1c44518e", "url": "https://github.com/getodk/collect/commit/8081696a3e97bc86724c564f501f160b1c44518e", "message": "Make sure refresh is hidden when search expands", "committedDate": "2020-08-31T08:20:15Z", "type": "forcePushed"}, {"oid": "aca74af4b4597b6fc09e2cf8ca207c635648ca03", "url": "https://github.com/getodk/collect/commit/aca74af4b4597b6fc09e2cf8ca207c635648ca03", "message": "Only show progress bar for min time when syncing", "committedDate": "2020-08-31T08:40:27Z", "type": "commit"}]}