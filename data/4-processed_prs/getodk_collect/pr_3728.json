{"pr_number": 3728, "pr_title": "Update dependencies", "pr_createdAt": "2020-03-20T10:16:25Z", "pr_url": "https://github.com/getodk/collect/pull/3728", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0Mzc1Ng==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r395543756", "bodyText": "According to https://square.github.io/leakcanary/upgrading-to-leakcanary-2.0/ we no longer need no-op artifacts", "author": "grzesiek2010", "createdAt": "2020-03-20T10:17:55Z", "path": "collect_app/build.gradle", "diffHunk": "@@ -262,15 +262,10 @@ dependencies {\n     implementation \"net.danlew:android.joda:2.10.3\"\n \n     // Real LeakCanary for debug builds only: notifications, analysis, etc\n-    debugImplementation \"com.squareup.leakcanary:leakcanary-android:${rootProject.leakyCanaryVersion}\"\n-    // No-Op version of LeakCanary for release builds: no notifications, no analysis, nothing\n-    releaseImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${rootProject.leakyCanaryVersion}\"\n-    testImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${rootProject.leakyCanaryVersion}\"\n-    androidTestImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${rootProject.leakyCanaryVersion}\"\n-    odkCollectReleaseImplementation \"com.squareup.leakcanary:leakcanary-android-no-op:${rootProject.leakyCanaryVersion}\"", "originalCommit": "3fd5b0f62aa7895620cd0d13ee99072cddfd1bee", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NDc0Nw==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r395544747", "bodyText": "Huh so LeakCanary won't be running in any test build automatically now?", "author": "seadowg", "createdAt": "2020-03-20T10:19:53Z", "path": "collect_app/src/main/java/org/odk/collect/android/application/TestCollect.java", "diffHunk": "@@ -12,12 +10,6 @@\n \n public class TestCollect extends Collect {\n \n-    @Override\n-    protected RefWatcher setupLeakCanary() {", "originalCommit": "3fd5b0f62aa7895620cd0d13ee99072cddfd1bee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NjQ3OQ==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r395546479", "bodyText": "That's what I understand https://square.github.io/leakcanary/recipes/#running-leakcanary-in-instrumentation-tests", "author": "grzesiek2010", "createdAt": "2020-03-20T10:23:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NDc0Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NzgzOA==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r395547838", "bodyText": "So much better!", "author": "seadowg", "createdAt": "2020-03-20T10:26:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTU0NDc0Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMDY0MA==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397130640", "bodyText": "Why not the latest 6.2.2?", "author": "grzesiek2010", "createdAt": "2020-03-24T12:56:40Z", "path": "gradle/wrapper/gradle-wrapper.properties", "diffHunk": "@@ -1,9 +1,8 @@\n-#Wed May 08 10:57:16 CEST 2019\n+#Tue Mar 24 09:13:30 GMT 2020\n distributionBase=GRADLE_USER_HOME\n distributionPath=wrapper/dists\n zipStoreBase=GRADLE_USER_HOME\n zipStorePath=wrapper/dists\n android.enableD8.desugaring=true\n-distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.3-all.zip\n-# Android Studio Gradle wrapper >= 3.1.2 doesn't support configure on demand\n+distributionUrl=https\\://services.gradle.org/distributions/gradle-5.6.4-all.zip", "originalCommit": "051b26b92b7126eb74459e7056dcbc8315b77bc8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE1OTc2OQ==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397159769", "bodyText": "Huh that was auto generated. Probably just game me the minimum for that plugin version. I'll update it.", "author": "seadowg", "createdAt": "2020-03-24T13:41:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMDY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE4ODk3OA==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397188978", "bodyText": "Wow this is causing all kinds of problems. Did you try and update spotbugs at all as part of this? It looks like we might be using a very old version.", "author": "seadowg", "createdAt": "2020-03-24T14:20:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMDY0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzE5MjM3Nw==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397192377", "bodyText": "ahh spotbugs... I think I was able to update it to version 2.0.0 but not the latest 4.0.4 because it was related somehow with gradle version", "author": "grzesiek2010", "createdAt": "2020-03-24T14:24:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzEzMDY0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNTQ0OQ==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397315449", "bodyText": "This repo link doesn't seem to be working any longer as they don't provide a .pom for the dependency. Given its a pretty stagnant dependency I think using a local jar is fine.", "author": "seadowg", "createdAt": "2020-03-24T17:01:18Z", "path": "build.gradle", "diffHunk": "@@ -23,7 +23,6 @@ allprojects {\n         jcenter()\n         maven { url 'https://oss.sonatype.org/content/groups/public' }\n         maven { url 'https://jitpack.io' }\n-        maven { url 'https://staging.dev.medicmobile.org/_couch/maven-repo' }", "originalCommit": "9590e8fb5ae5832a98a781e425e9026add4cec7c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzM5NDgzMw==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397394833", "bodyText": "I think such a trick would work:\nmaven {\n            url 'https://staging.dev.medicmobile.org/_couch/maven-repo'\n            metadataSources { artifact() }\n        }\n\nand you won't need anything more.", "author": "grzesiek2010", "createdAt": "2020-03-24T19:05:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNTQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ0MDAxOA==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397440018", "bodyText": "I was looking around for something like this as it really surprised me that there wasn't a way to get it working with just a JAR. Will give this a go tomorrow!", "author": "seadowg", "createdAt": "2020-03-24T20:28:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNTQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ4MDk1Mw==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397480953", "bodyText": "Great if we can track the Medic repo but not super important I don\u2019t think.", "author": "lognaturel", "createdAt": "2020-03-24T21:45:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNTQ0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ5Mzc5NA==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397493794", "bodyText": "Yes I was right. Just added a commit on my own, so that you don't need to play with it just take a look.", "author": "grzesiek2010", "createdAt": "2020-03-24T22:13:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzMxNTQ0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ5NDY0OQ==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397494649", "bodyText": "It's marked as won't fix. We can leave it as if for now but in this case we can't block it for ever.", "author": "grzesiek2010", "createdAt": "2020-03-24T22:15:38Z", "path": "collect_app/build.gradle", "diffHunk": "@@ -194,12 +196,6 @@ configurations.all {\n }\n \n dependencies {\n-    // To make ODK Collect is installable on all devices even though the Mapbox\n-    // native library is missing for some ABIs, we include an .aar dependency\n-    // named \"nbi-stubs\", which causes there to be at least one .so library\n-    // present for every ABI (armeabi, armeabi-v7a, arm64-v8a, x86, x86_64).\n-    implementation fileTree(dir: 'libs', include: ['*.jar', '*.aar'])\n-\n     implementation 'androidx.legacy:legacy-support-v13:1.0.0'\n     implementation 'androidx.browser:browser:1.2.0'\n     implementation 'androidx.appcompat:appcompat:1.1.0-rc01' // Shouldn't be upgraded until https://issuetracker.google.com/issues/141869006 is fixed", "originalCommit": "b505f0e3068ca177461c0ab00bc4bf22571b8371", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzcxODcxMg==", "url": "https://github.com/getodk/collect/pull/3728#discussion_r397718712", "bodyText": "We actully have our own issue for tracking this with notes on the possible workaround. I'll update this so it references that rather than Google's issue.", "author": "seadowg", "createdAt": "2020-03-25T09:38:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzQ5NDY0OQ=="}], "type": "inlineReview"}, {"oid": "639d7ff33aa6b0bbd3d0963acbe2c16fada8742c", "url": "https://github.com/getodk/collect/commit/639d7ff33aa6b0bbd3d0963acbe2c16fada8742c", "message": "Updated dependencies", "committedDate": "2020-03-31T14:54:58Z", "type": "commit"}, {"oid": "4901fed3045dfa856dc6c5ec45aaa0f1dd8cda40", "url": "https://github.com/getodk/collect/commit/4901fed3045dfa856dc6c5ec45aaa0f1dd8cda40", "message": "Upgrading to LeakCanary 2", "committedDate": "2020-03-31T14:56:57Z", "type": "commit"}, {"oid": "f53fc95929b65cd202976c7c31c2af43e0d421ae", "url": "https://github.com/getodk/collect/commit/f53fc95929b65cd202976c7c31c2af43e0d421ae", "message": "Updated osmdroid", "committedDate": "2020-03-31T14:56:58Z", "type": "commit"}, {"oid": "c3dcd3e20383e954e63893afdc70766ac55d88cd", "url": "https://github.com/getodk/collect/commit/c3dcd3e20383e954e63893afdc70766ac55d88cd", "message": "More updates", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "36a7eab5b8345624a683cd939129b3879d34d6e9", "url": "https://github.com/getodk/collect/commit/36a7eab5b8345624a683cd939129b3879d34d6e9", "message": "Use Android Library for nbi-stubs rather than precompiled .aar [fixes #3732]\n\nThis means the aar used in the build should work with build tools\nupdates. Should also make it easier to debug any problems as the build\nchain will be clearer.", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "d26ed9d65206688afe42eebda264bf5378655f79", "url": "https://github.com/getodk/collect/commit/d26ed9d65206688afe42eebda264bf5378655f79", "message": "Correct typo comment", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "a6e82d47d39cb655b083c7d3a2706c3d2275f3b5", "url": "https://github.com/getodk/collect/commit/a6e82d47d39cb655b083c7d3a2706c3d2275f3b5", "message": "Remove spotbugs", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "6eea8c881629d4921b2efc41753068cf5eb26733", "url": "https://github.com/getodk/collect/commit/6eea8c881629d4921b2efc41753068cf5eb26733", "message": "Move bikram-sambat dep to local jar to prevent Gradle 6.2.2 problems", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "8ba6faf3a5a4952c6216ca016d678aff7b8010b2", "url": "https://github.com/getodk/collect/commit/8ba6faf3a5a4952c6216ca016d678aff7b8010b2", "message": "Update Gradle", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "ed5200e9998624e7305e360b7a5b4c04278929ad", "url": "https://github.com/getodk/collect/commit/ed5200e9998624e7305e360b7a5b4c04278929ad", "message": "Added the Medic repo back", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "60e3e09cd62c377f539080b673df60a9e9274926", "url": "https://github.com/getodk/collect/commit/60e3e09cd62c377f539080b673df60a9e9274926", "message": "Update comment on appcompat issue", "committedDate": "2020-03-31T14:58:28Z", "type": "commit"}, {"oid": "60e3e09cd62c377f539080b673df60a9e9274926", "url": "https://github.com/getodk/collect/commit/60e3e09cd62c377f539080b673df60a9e9274926", "message": "Update comment on appcompat issue", "committedDate": "2020-03-31T14:58:28Z", "type": "forcePushed"}]}