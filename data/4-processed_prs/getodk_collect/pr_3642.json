{"pr_number": 3642, "pr_title": "Replace Espresso tests for default image with Widget tests", "pr_createdAt": "2020-02-18T13:00:07Z", "pr_url": "https://github.com/getodk/collect/pull/3642", "timeline": [{"oid": "27e489172181797540ef309d3ddbb091a15d550a", "url": "https://github.com/getodk/collect/commit/27e489172181797540ef309d3ddbb091a15d550a", "message": "Replace default image Espresso test with Widget tests", "committedDate": "2020-02-18T08:50:23Z", "type": "commit"}, {"oid": "1d3121edffb5a8546036b9cf6264859b860c8b01", "url": "https://github.com/getodk/collect/commit/1d3121edffb5a8546036b9cf6264859b860c8b01", "message": "Improve fake reference manager setup", "committedDate": "2020-02-18T10:48:17Z", "type": "commit"}, {"oid": "8e5994c0534e57de548b863fae5b1a40fe108f6f", "url": "https://github.com/getodk/collect/commit/8e5994c0534e57de548b863fae5b1a40fe108f6f", "message": "Use new fake reference manager setup in PromptAutoplayerTest", "committedDate": "2020-02-18T11:18:55Z", "type": "commit"}, {"oid": "ba01043760c1262ef24d8619f73a3eb56bdbcce9", "url": "https://github.com/getodk/collect/commit/ba01043760c1262ef24d8619f73a3eb56bdbcce9", "message": "Use new reference manager setup in all tests", "committedDate": "2020-02-18T12:38:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2MTk1Ng==", "url": "https://github.com/getodk/collect/pull/3642#discussion_r380661956", "bodyText": "This is potentially contraversial so happy to reenable the check and fix the problems if people disagree with me here.\nThe reason for disabling the check is that I think it can make writing tests with setup data hard. For instance:\nString testData1 = // setup test data\nString testData2 = // setup test data\nString testData3 = // setup tests data\n\ntestObject.doAThing(testData1);\ntestObject.doAThing(testData2);\ntestObject.doSomethingElse();\n\nassertThat(testObject.getSomething(), notNullValue());\nassertThat(testObject.getSomething().anotherThing(), equalTo(testData3));\nThis is a pretty common pattern for a test - we're setting up our inputs and outputs, carrying out the steps we're testing and then making an assertion on something we set up at the beginning of the test. This can make tests more readable and also helps if you need to mutate input/output values. This would fail our checkstyle build however as the testData3 declaration would be too far away from it's use.", "author": "seadowg", "createdAt": "2020-02-18T13:12:33Z", "path": "config/checkstyle.xml", "diffHunk": "@@ -186,7 +186,7 @@\n             <property name=\"allowedAbbreviationLength\" value=\"1\"/>\n         </module> -->\n         <module name=\"OverloadMethodsDeclarationOrder\" />\n-        <module name=\"VariableDeclarationUsageDistance\" />\n+        <!-- <module name=\"VariableDeclarationUsageDistance\" /> -->", "originalCommit": "ba01043760c1262ef24d8619f73a3eb56bdbcce9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ0ODAxOA==", "url": "https://github.com/getodk/collect/pull/3642#discussion_r381448018", "bodyText": "I agree that this split is reasonable for tests. I do't feel strongly one way or the other but I will say that I have had that checkstyle rule fail on code I was writing and was glad for it. Maybe it's something that would have been flagged in review anyway.", "author": "lognaturel", "createdAt": "2020-02-19T18:02:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDY2MTk1Ng=="}], "type": "inlineReview"}, {"oid": "644314922f7295fb1a9646968e6c668e6b6fa984", "url": "https://github.com/getodk/collect/commit/644314922f7295fb1a9646968e6c668e6b6fa984", "message": "Make methods private", "committedDate": "2020-02-19T18:30:35Z", "type": "commit"}]}