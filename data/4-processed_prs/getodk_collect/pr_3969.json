{"pr_number": 3969, "pr_title": "Reworking Range Widget", "pr_createdAt": "2020-07-14T08:40:56Z", "pr_url": "https://github.com/getodk/collect/pull/3969", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODc4OQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r454208789", "bodyText": "@seadowg clickingPickerButton_showsNumberPickerDialog() unit test is failing. I'm looking onto it. If you have a hint, please let me know.", "author": "SaumiaSinghal", "createdAt": "2020-07-14T08:58:40Z", "path": "collect_app/src/test/java/org/odk/collect/android/widgets/RangePickerDecimalWidgetTest.java", "diffHunk": "@@ -0,0 +1,147 @@\n+package org.odk.collect.android.widgets;\n+\n+import android.view.View;\n+\n+import org.javarosa.core.model.RangeQuestion;\n+import org.javarosa.core.model.data.StringData;\n+import org.javarosa.form.api.FormEntryPrompt;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.formentry.questions.QuestionDetails;\n+import org.odk.collect.android.fragments.dialogs.NumberPickerDialog;\n+import org.odk.collect.android.listeners.WidgetValueChangedListener;\n+import org.odk.collect.android.support.TestScreenContextActivity;\n+import org.robolectric.RobolectricTestRunner;\n+import java.math.BigDecimal;\n+\n+import static android.os.Looper.getMainLooper;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.nullValue;\n+import static org.junit.Assert.assertNotNull;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.mockValueChangedListener;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.promptWithQuestionDefAndAnswer;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.promptWithReadOnlyAndQuestionDef;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.widgetTestActivity;\n+import static org.robolectric.Shadows.shadowOf;\n+\n+@RunWith(RobolectricTestRunner.class)\n+public class RangePickerDecimalWidgetTest {\n+\n+    private TestScreenContextActivity widgetActivity;\n+    private RangeQuestion rangeQuestion;\n+\n+    @Before\n+    public void setup() {\n+        widgetActivity = widgetTestActivity();\n+        rangeQuestion = mock(RangeQuestion.class);\n+\n+        when(rangeQuestion.getRangeStart()).thenReturn(new BigDecimal(\"1.5\"));\n+        when(rangeQuestion.getRangeEnd()).thenReturn(new BigDecimal(\"5.5\"));\n+        when(rangeQuestion.getRangeStep()).thenReturn(new BigDecimal(\"0.5\"));\n+    }\n+\n+    @Test\n+    public void whenRangeEndIsGreaterThanRangeStart_widgetsSetsCorrectValuesForNumberPicker() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        int index = 0;\n+\n+        for (double i = 5.5F; i >= 1.5F; i -= 0.5F, index++) {\n+            assertThat(widget.displayedValuesForNumberPicker[index], equalTo(String.valueOf(i)));\n+        }\n+    }\n+\n+    @Test\n+    public void whenRangeStartIsGreaterThanRangeEnd_widgetsSetsCorrectValuesForNumberPicker() {\n+        when(rangeQuestion.getRangeStart()).thenReturn(new BigDecimal(\"5.5\"));\n+        when(rangeQuestion.getRangeEnd()).thenReturn(new BigDecimal(\"1.5\"));\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        int index = 0;\n+\n+        for (double i = 1.5F; i <= 5.5F; i += 0.5F, index++) {\n+            assertThat(widget.displayedValuesForNumberPicker[index], equalTo(String.valueOf(i)));\n+        }\n+    }\n+\n+    @Test\n+    public void getAnswer_whenPromptDoesNotHaveAnswer_returnsNull() {\n+        assertThat(createWidget(promptWithReadOnlyAndQuestionDef(rangeQuestion)).getAnswer(), nullValue());\n+    }\n+\n+    @Test\n+    public void getAnswer_whenPromptHasAnswer_returnsAnswer() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, new StringData(\"2.5\")));\n+        assertThat(widget.getAnswer().getValue(), equalTo(2.5));\n+    }\n+\n+    @Test\n+    public void clearAnswer_clearsWidgetAnswer() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, new StringData(\"2.5\")));\n+        widget.clearAnswer();\n+\n+        assertThat(widget.getAnswer(), nullValue());\n+        assertThat(widget.binding.widgetAnswerText.getText(), equalTo(widget.getContext().getString(R.string.no_value_selected)));\n+    }\n+\n+    @Test\n+    public void clearAnswer_callsValueChangeListener() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        WidgetValueChangedListener valueChangedListener = mockValueChangedListener(widget);\n+\n+        widget.clearAnswer();\n+        verify(valueChangedListener).widgetValueChanged(widget);\n+    }\n+\n+    @Test\n+    public void setNumberPickerValue_updatesAnswer() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        widget.setNumberPickerValue(4);\n+\n+        assertThat(widget.getAnswer().getDisplayText(), equalTo(\"3.5\"));\n+    }\n+\n+    @Test\n+    public void setNumberPickerValue_whenRangeStartIsGreaterThenRangeEnd_updatesAnswer() {\n+        when(rangeQuestion.getRangeStart()).thenReturn(new BigDecimal(\"5.5\"));\n+        when(rangeQuestion.getRangeEnd()).thenReturn(new BigDecimal(\"1.5\"));\n+\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        widget.setNumberPickerValue(4);\n+\n+        assertThat(widget.getAnswer().getDisplayText(), equalTo(\"3.5\"));\n+    }\n+\n+    @Test\n+    public void clickingPickerButton_showsNumberPickerDialog() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        widget.binding.widgetButton.performClick();\n+\n+        NumberPickerDialog numberPickerDialog = (NumberPickerDialog) widgetActivity.getActivity().getSupportFragmentManager()\n+                .findFragmentByTag(NumberPickerDialog.NUMBER_PICKER_DIALOG_TAG);\n+        shadowOf(getMainLooper()).idle();\n+\n+        assertNotNull(numberPickerDialog);\n+    }\n+", "originalCommit": "c7fd8fe85122bf42c44efe8caa81f2df43936e7e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkyNjczNw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r454926737", "bodyText": "Yeah if you debug you'll see that in RangeWidgetUtils.showNumberPickerDialog the catch branch will run as there is a ClassCastException. The code is trying to cast the context to a FormEntryActivity but it doesn't need to be one of those to add a Fragment right? I think it just needs to cast it to a FragmentActivity (Activity doesn't have getSupportFragmentManager on it).\nI think you'll also need to have the activity in fully created state to add a fragment (rather than one that's just been \"built\").  Maybe just for those tests you can create a different test activity using createThemedActivity. The extra work is pretty slow so good to only use it in tests that need it!", "author": "seadowg", "createdAt": "2020-07-15T09:43:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODc4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkzODEyOA==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r454938128", "bodyText": "Right I think that's why the tests simply failed instead of giving an error", "author": "SaumiaSinghal", "createdAt": "2020-07-15T10:03:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODc4OQ=="}], "type": "inlineReview"}, {"oid": "c2c0d24691a389feb6572f585fd1c3a0a94caa39", "url": "https://github.com/getodk/collect/commit/c2c0d24691a389feb6572f585fd1c3a0a94caa39", "message": "fix failing unit tests", "committedDate": "2020-07-23T13:50:11Z", "type": "forcePushed"}, {"oid": "c7977906dbbbac8f9baab0968654867c96e940bf", "url": "https://github.com/getodk/collect/commit/c7977906dbbbac8f9baab0968654867c96e940bf", "message": "fix failing unit tests", "committedDate": "2020-07-27T00:33:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDU3MQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460844571", "bodyText": "I'm not a big fan of the FormEntryActivity having to know about widget implementations here but this structure existed a long time before this PR and I think it's be awkward to unravel.", "author": "seadowg", "createdAt": "2020-07-27T12:10:32Z", "path": "collect_app/src/main/java/org/odk/collect/android/activities/FormEntryActivity.java", "diffHunk": "@@ -2633,8 +2634,12 @@ public void onSaveFormIndexError(String errorMessage) {\n     public void onNumberPickerValueSelected(int widgetId, int value) {\n         if (currentView != null) {\n             for (QuestionWidget qw : ((ODKView) currentView).getWidgets()) {\n-                if (qw instanceof RangeWidget && widgetId == qw.getId()) {\n-                    ((RangeWidget) qw).setNumberPickerValue(value);\n+                if (qw instanceof RangePickerIntegerWidget && widgetId == qw.getId()) {", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTA5MTM2MA==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r461091360", "bodyText": "@seadowg I think the other option that we can use is having a separate viewModel for RangeWidget. I also don't like having a callback implemented in FormEntryActivity.", "author": "SaumiaSinghal", "createdAt": "2020-07-27T18:38:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NDU3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0NzAzNw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460847037", "bodyText": "Probably worth combining this with the test above so it tests that the ACTION_UP after the ACTION_DOWN works. With these tests the implementation could just set isTrackingTouch to true on an ACTION_DOWN and then never change it back \ud83d\ude09", "author": "seadowg", "createdAt": "2020-07-27T12:15:20Z", "path": "collect_app/src/test/java/org/odk/collect/android/views/TrackingTouchSliderTest.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package org.odk.collect.android.views;\n+\n+import android.widget.LinearLayout;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.core.view.MotionEventBuilder;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.odk.collect.android.R;\n+import org.robolectric.RobolectricTestRunner;\n+\n+import static android.view.MotionEvent.ACTION_DOWN;\n+import static android.view.MotionEvent.ACTION_UP;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.equalTo;\n+\n+@RunWith(RobolectricTestRunner.class)\n+public class TrackingTouchSliderTest {\n+\n+    private TrackingTouchSlider slider;\n+\n+    @Before\n+    public void setUp() {\n+        ApplicationProvider.getApplicationContext().setTheme(R.style.Theme_Collect_Light);\n+\n+        LinearLayout linearLayout = new LinearLayout(ApplicationProvider.getApplicationContext());\n+        slider = new TrackingTouchSlider(ApplicationProvider.getApplicationContext(), null);\n+\n+        linearLayout.addView(slider);\n+    }\n+\n+    @Test\n+    public void onStartTrackingTouch_suppressesFlingGesture() {\n+        slider.onTouchEvent(MotionEventBuilder.newBuilder().setAction(ACTION_DOWN).build());\n+        assertThat(slider.isTrackingTouch(), equalTo(true));\n+    }\n+\n+    @Test\n+    public void onStopTrackingTouch_doesNotSuppressFlingGesture() {", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0ODIwNQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460848205", "bodyText": "Oh this is very cool! It never occurred to me to just set the application context theme. This could probably help us speed up tests where we're building an Activity just to set the context theme. Maybe you could add this to RobolectricHelpers as createThemedContext(int theme) so we  can use it other places?", "author": "seadowg", "createdAt": "2020-07-27T12:17:36Z", "path": "collect_app/src/test/java/org/odk/collect/android/views/TrackingTouchSliderTest.java", "diffHunk": "@@ -0,0 +1,45 @@\n+package org.odk.collect.android.views;\n+\n+import android.widget.LinearLayout;\n+\n+import androidx.test.core.app.ApplicationProvider;\n+import androidx.test.core.view.MotionEventBuilder;\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.odk.collect.android.R;\n+import org.robolectric.RobolectricTestRunner;\n+\n+import static android.view.MotionEvent.ACTION_DOWN;\n+import static android.view.MotionEvent.ACTION_UP;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.equalTo;\n+\n+@RunWith(RobolectricTestRunner.class)\n+public class TrackingTouchSliderTest {\n+\n+    private TrackingTouchSlider slider;\n+\n+    @Before\n+    public void setUp() {\n+        ApplicationProvider.getApplicationContext().setTheme(R.style.Theme_Collect_Light);\n+", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTQzMzU1OQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r461433559", "bodyText": "Yes sure @seadowg :)", "author": "SaumiaSinghal", "createdAt": "2020-07-28T09:08:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg0ODIwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1MDU3Ng==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460850576", "bodyText": "I think in future this could probably be extracted to its own custom view but for the moment it's great progress!", "author": "seadowg", "createdAt": "2020-07-27T12:22:11Z", "path": "collect_app/src/main/java/org/odk/collect/android/widgets/RangeDecimalWidget.java", "diffHunk": "@@ -18,20 +18,56 @@\n \n import android.annotation.SuppressLint;\n import android.content.Context;\n+import android.view.MotionEvent;\n+import android.view.View;\n+import android.widget.TextView;\n \n+import androidx.annotation.NonNull;\n+\n+import com.google.android.material.slider.Slider;\n+\n+import org.javarosa.core.model.RangeQuestion;\n import org.javarosa.core.model.data.DecimalData;\n import org.javarosa.core.model.data.IAnswerData;\n+import org.javarosa.form.api.FormEntryPrompt;\n import org.odk.collect.android.formentry.questions.QuestionDetails;\n+import org.odk.collect.android.views.TrackingTouchSlider;\n+import org.odk.collect.android.widgets.utilities.RangeWidgetUtils;\n \n import java.math.BigDecimal;\n \n @SuppressLint(\"ViewConstructor\")\n-public class RangeDecimalWidget extends RangeWidget {\n+public class RangeDecimalWidget extends QuestionWidget implements Slider.OnChangeListener {\n+    private RangeQuestion rangeQuestion;\n+    private BigDecimal actualValue;\n+\n+    TrackingTouchSlider slider;\n+    TextView currentValue;\n \n     public RangeDecimalWidget(Context context, QuestionDetails prompt) {\n         super(context, prompt);\n     }\n \n+    @Override\n+    protected View onCreateAnswerView(Context context, FormEntryPrompt prompt, int answerFontSize) {\n+        rangeQuestion = (RangeQuestion) getFormEntryPrompt().getQuestion();\n+        RangeWidgetUtils.RangeWidgetLayoutElements layoutElements = RangeWidgetUtils.setUpLayoutElements(context, prompt);", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5MTM1MQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r461191351", "bodyText": "Yes correct @seadowg Thank you!", "author": "SaumiaSinghal", "createdAt": "2020-07-27T21:50:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1MDU3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1MzQxNw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460853417", "bodyText": "I think this layout should be called button_and_answer or something. I don't like suggesting that it's the \"default\" answer view.", "author": "seadowg", "createdAt": "2020-07-27T12:27:39Z", "path": "collect_app/src/main/java/org/odk/collect/android/widgets/UrlWidget.java", "diffHunk": "@@ -43,18 +44,20 @@ public UrlWidget(Context context, QuestionDetails questionDetails, CustomTabHelp\n \n     @Override\n     protected View onCreateAnswerView(Context context, FormEntryPrompt prompt, int answerFontSize) {\n-        binding = UrlWidgetAnswerBinding.inflate(((Activity) context).getLayoutInflater());\n+        binding = WidgetAnswerBinding.inflate(((Activity) context).getLayoutInflater());", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NTM5Nw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r461195397", "bodyText": "I renamed it to widget_button_and_answer_layout", "author": "SaumiaSinghal", "createdAt": "2020-07-27T22:00:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1MzQxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1NTYwOA==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460855608", "bodyText": "I don't think we should use dividerColor here. Could you find a color to use in the standard material color set and use that instead? If it isn't in our themes already you might have to define it.\nIf it seems doable you could then replace dividerColor everywhere and delete it? No worries if that seems like a distraction though.", "author": "seadowg", "createdAt": "2020-07-27T12:31:46Z", "path": "collect_app/src/main/res/layout/range_widget_horizontal.xml", "diffHunk": "@@ -31,16 +34,15 @@ limitations under the License.\n         android:layout_width=\"match_parent\"\n         android:layout_height=\"wrap_content\">\n \n-        <SeekBar\n-            android:id=\"@+id/seek_bar_no_ticks\"\n-            android:layout_width=\"match_parent\"\n-            android:layout_height=\"wrap_content\" />\n-\n-        <SeekBar\n-            android:id=\"@+id/seek_bar\"\n+        <org.odk.collect.android.views.TrackingTouchSlider\n+            android:id=\"@+id/slider\"\n             android:layout_width=\"match_parent\"\n             android:layout_height=\"wrap_content\"\n-            android:theme=\"@style/Base.Widget.AppCompat.SeekBar.Discrete\" />\n+            app:thumbColor=\"?colorSecondary\"\n+            app:tickColor=\"?colorOnBackground\"\n+            app:haloColor=\"?dividerColor\"", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTE5NjU4Mg==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r461196582", "bodyText": "Yes sure", "author": "SaumiaSinghal", "createdAt": "2020-07-27T22:03:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1NTYwOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDg1NTc0Mw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r460855743", "bodyText": "This should use theme colors rather than hardcoded colors.", "author": "seadowg", "createdAt": "2020-07-27T12:32:04Z", "path": "collect_app/src/main/res/layout/range_widget_vertical.xml", "diffHunk": "@@ -33,22 +34,18 @@ limitations under the License.\n         android:layout_width=\"50dp\"\n         android:layout_height=\"330dp\">\n \n-        <SeekBar\n-            android:id=\"@+id/seek_bar_no_ticks\"\n+        <org.odk.collect.android.views.TrackingTouchSlider\n+            android:id=\"@+id/slider\"\n             android:layout_width=\"330dp\"\n             android:layout_height=\"wrap_content\"\n+            app:thumbColor=\"?colorSecondary\"\n+            app:tickColor=\"#696969\"", "originalCommit": "c7977906dbbbac8f9baab0968654867c96e940bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2b5c741c9ff8b3a88f2c07a1ea00cb3630995a38", "url": "https://github.com/getodk/collect/commit/2b5c741c9ff8b3a88f2c07a1ea00cb3630995a38", "message": "code refactor", "committedDate": "2020-07-27T21:41:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE3NzMxNA==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462177314", "bodyText": "I think you misunderstood what I was trying to communicate before. I just meant if we were missing one of the standard material theme colors we might have to add it to our themes. Sorry if that was confusing!\nThe theme shouldn't have to know that there is a slider that needs a color right? The slider should use a material theme color we have a value for not a new custom one.", "author": "seadowg", "createdAt": "2020-07-29T09:49:28Z", "path": "collect_app/src/main/res/values/attrs.xml", "diffHunk": "@@ -2,6 +2,7 @@\n <resources>\n     <declare-styleable name=\"Collect\">\n         <attr name=\"iconColor\" format=\"color\" />\n+        <attr name=\"sliderTrackColor\" format=\"color\" />", "originalCommit": "e2393015b6c8e37f1069b387432dadf283d94a1a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM2OTUzNQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462369535", "bodyText": "Oh now I get it. We have values for almost all the theme colors except for colorBackground. However, I feel that I shouldn't be using it as sliderTrackColor, as it doesn't sound correct. I feel like I should use colorOnBackground as slider track color. Am I correct? I found that we are not using the value of  colorOnBackground anywhere in the app. Should I update it?", "author": "SaumiaSinghal", "createdAt": "2020-07-29T15:02:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE3NzMxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjM5MjQwOA==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462392408", "bodyText": "I'd say colorOnSurface probably makes sense?", "author": "seadowg", "createdAt": "2020-07-29T15:33:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjE3NzMxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwNzY4Mw==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462407683", "bodyText": "I don't think you need to pass a NewInstanceFactory here. Could you not just use the 1 arg constructor for ViewModelProvider?", "author": "seadowg", "createdAt": "2020-07-29T15:55:23Z", "path": "collect_app/src/main/java/org/odk/collect/android/fragments/dialogs/NumberPickerDialog.java", "diffHunk": "@@ -55,12 +53,7 @@ public static NumberPickerDialog newInstance(int widgetId, String[] displayedVal\n     @Override\n     public void onAttach(Context context) {\n         super.onAttach(context);\n-\n-        try {\n-            listener = (NumberPickerListener) context;\n-        } catch (ClassCastException e) {\n-            throw new ClassCastException(context.toString() + \" must implement OnHeadlineSelectedListener\");\n-        }\n+        rangePickerViewModel = new ViewModelProvider(requireActivity(), new ViewModelProvider.NewInstanceFactory()).get(RangePickerViewModel.class);", "originalCommit": "3cebfef4b1477122500159de4d2a1fdbb1a2294c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MjQwOTI2Mg==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462409262", "bodyText": "I feel like getNumberPickerProgress should probably remain a util method as it doesn't rely on any state in the view model.", "author": "seadowg", "createdAt": "2020-07-29T15:57:33Z", "path": "collect_app/src/main/java/org/odk/collect/android/widgets/RangePickerDecimalWidget.java", "diffHunk": "@@ -0,0 +1,100 @@\n+package org.odk.collect.android.widgets;\n+\n+import android.annotation.SuppressLint;\n+import android.app.Activity;\n+import android.content.Context;\n+import android.util.TypedValue;\n+import android.view.View;\n+\n+import androidx.lifecycle.ViewModelProvider;\n+\n+import org.javarosa.core.model.RangeQuestion;\n+import org.javarosa.core.model.data.DecimalData;\n+import org.javarosa.core.model.data.IAnswerData;\n+import org.javarosa.form.api.FormEntryPrompt;\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.activities.FormEntryActivity;\n+import org.odk.collect.android.databinding.WidgetButtonAndAnswerLayoutBinding;\n+import org.odk.collect.android.formentry.questions.QuestionDetails;\n+import org.odk.collect.android.utilities.ScreenContext;\n+import org.odk.collect.android.widgets.utilities.RangeWidgetUtils;\n+import org.odk.collect.android.widgets.viewmodels.RangePickerViewModel;\n+\n+import java.math.BigDecimal;\n+\n+@SuppressLint(\"ViewConstructor\")\n+public class RangePickerDecimalWidget extends QuestionWidget {\n+    WidgetButtonAndAnswerLayoutBinding binding;\n+    String[] displayedValuesForNumberPicker;\n+\n+    private BigDecimal rangeStart;\n+    private BigDecimal rangeEnd;\n+    private BigDecimal rangeStep;\n+\n+    private int progress;\n+\n+    public RangePickerDecimalWidget(Context context, QuestionDetails questionDetails) {\n+        super(context, questionDetails);\n+        RangePickerViewModel rangePickerViewModel = new ViewModelProvider(((ScreenContext) getContext()).getActivity(),\n+                new ViewModelProvider.NewInstanceFactory()).get(RangePickerViewModel.class);\n+\n+        rangePickerViewModel.getNumberPickerValue().observe(((ScreenContext) getContext()).getViewLifecycle(), answer -> {\n+            if (answer != null) {\n+                progress = rangePickerViewModel.getNumberPickerProgress(rangeStart, rangeStep, rangeEnd, answer);", "originalCommit": "3cebfef4b1477122500159de4d2a1fdbb1a2294c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e2393015b6c8e37f1069b387432dadf283d94a1a", "url": "https://github.com/getodk/collect/commit/e2393015b6c8e37f1069b387432dadf283d94a1a", "message": "code refactor", "committedDate": "2020-07-28T19:45:22Z", "type": "forcePushed"}, {"oid": "019808e1279e1ef2aa1ad708b88a2a3ef4bcac5a", "url": "https://github.com/getodk/collect/commit/019808e1279e1ef2aa1ad708b88a2a3ef4bcac5a", "message": "remove slider track color and use color_on_surface_low_emphasis", "committedDate": "2020-07-29T16:38:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mjg3NTI2OQ==", "url": "https://github.com/getodk/collect/pull/3969#discussion_r462875269", "bodyText": "I'm not a fan of testing this field here as there is no reason for it to be public. Really the test should click on the button and test that the dialog receives the right values. I know you're reworking how all that functions though so I think we go with this for the moment!\nAs a general tip for tests like this I would avoid the for loop and just write out what I expect the values to be. That way it's clearer to the reader of the test. Tests serve as documentation as much as they serve as checks so it's good for them to be very clear what the behaviour they expect is.", "author": "seadowg", "createdAt": "2020-07-30T09:36:48Z", "path": "collect_app/src/test/java/org/odk/collect/android/widgets/RangePickerDecimalWidgetTest.java", "diffHunk": "@@ -0,0 +1,128 @@\n+package org.odk.collect.android.widgets;\n+\n+import android.view.View;\n+\n+import org.javarosa.core.model.RangeQuestion;\n+import org.javarosa.core.model.data.StringData;\n+import org.javarosa.form.api.FormEntryPrompt;\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.junit.runner.RunWith;\n+import org.odk.collect.android.R;\n+import org.odk.collect.android.formentry.questions.QuestionDetails;\n+import org.odk.collect.android.listeners.WidgetValueChangedListener;\n+import org.robolectric.RobolectricTestRunner;\n+import java.math.BigDecimal;\n+\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.equalTo;\n+import static org.hamcrest.Matchers.nullValue;\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.verify;\n+import static org.mockito.Mockito.when;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.mockValueChangedListener;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.promptWithQuestionDefAndAnswer;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.promptWithReadOnlyAndQuestionDef;\n+import static org.odk.collect.android.widgets.support.QuestionWidgetHelpers.widgetTestActivity;\n+\n+@RunWith(RobolectricTestRunner.class)\n+public class RangePickerDecimalWidgetTest {\n+\n+    private RangeQuestion rangeQuestion;\n+\n+    @Before\n+    public void setup() {\n+        rangeQuestion = mock(RangeQuestion.class);\n+\n+        when(rangeQuestion.getRangeStart()).thenReturn(new BigDecimal(\"1.5\"));\n+        when(rangeQuestion.getRangeEnd()).thenReturn(new BigDecimal(\"5.5\"));\n+        when(rangeQuestion.getRangeStep()).thenReturn(new BigDecimal(\"0.5\"));\n+    }\n+\n+    @Test\n+    public void whenRangeEndIsGreaterThanRangeStart_widgetsSetsCorrectValuesForNumberPicker() {\n+        RangePickerDecimalWidget widget = createWidget(promptWithQuestionDefAndAnswer(rangeQuestion, null));\n+        int index = 0;\n+\n+        for (double i = 5.5F; i >= 1.5F; i -= 0.5F, index++) {\n+            assertThat(widget.displayedValuesForNumberPicker[index], equalTo(String.valueOf(i)));", "originalCommit": "019808e1279e1ef2aa1ad708b88a2a3ef4bcac5a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2c4b6679a9154ee61a52b447f2de4ba91c8402f9", "url": "https://github.com/getodk/collect/commit/2c4b6679a9154ee61a52b447f2de4ba91c8402f9", "message": "fix slider thumb and code refactor", "committedDate": "2020-08-10T08:07:24Z", "type": "forcePushed"}, {"oid": "b97fe0c6ea47726b0f2ae836f87ab868d246c7e3", "url": "https://github.com/getodk/collect/commit/b97fe0c6ea47726b0f2ae836f87ab868d246c7e3", "message": "retain null answer on screen rotation", "committedDate": "2020-08-19T10:27:37Z", "type": "forcePushed"}, {"oid": "6efb5687b07854d6e80956bf008a54024fcb64a5", "url": "https://github.com/getodk/collect/commit/6efb5687b07854d6e80956bf008a54024fcb64a5", "message": "add unit tests", "committedDate": "2020-09-08T09:31:25Z", "type": "forcePushed"}, {"oid": "b44378232bde39923360d6be927fe8a0e69823d5", "url": "https://github.com/getodk/collect/commit/b44378232bde39923360d6be927fe8a0e69823d5", "message": "update google material library to stable version 1.2.1", "committedDate": "2020-09-28T13:02:35Z", "type": "forcePushed"}, {"oid": "a88264e04aae775cdceae9c0aa160f9c2e1c00c5", "url": "https://github.com/getodk/collect/commit/a88264e04aae775cdceae9c0aa160f9c2e1c00c5", "message": "remove widget_button_and_answer_layout", "committedDate": "2020-10-06T08:59:31Z", "type": "forcePushed"}, {"oid": "5b25ebfdc488a6002685c225eb2c93638fec2294", "url": "https://github.com/getodk/collect/commit/5b25ebfdc488a6002685c225eb2c93638fec2294", "message": "add unit tests", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "61d19ec1d930571ddd0fb97a262cc0c75f863bbd", "url": "https://github.com/getodk/collect/commit/61d19ec1d930571ddd0fb97a262cc0c75f863bbd", "message": "resolve conflict in build.gradle", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "96a7542757793a4cd91f15ce1a9ed9f4ae591cb5", "url": "https://github.com/getodk/collect/commit/96a7542757793a4cd91f15ce1a9ed9f4ae591cb5", "message": "use material slider instead of seekbar", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "0176461f4ec138180b592abb9d7daf879eee3832", "url": "https://github.com/getodk/collect/commit/0176461f4ec138180b592abb9d7daf879eee3832", "message": "update range widget xml file", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "db6e4c9459b22785140fe5982112b7b8623d7ad6", "url": "https://github.com/getodk/collect/commit/db6e4c9459b22785140fe5982112b7b8623d7ad6", "message": "fix slider.setValue() behaviour", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "80c6d71d36ddea1a744636749356804d237a6c3b", "url": "https://github.com/getodk/collect/commit/80c6d71d36ddea1a744636749356804d237a6c3b", "message": "implement Slider.onTouchListener", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "0cb8479b5083030eb1d98bdf5bdb62ac03a1c7a4", "url": "https://github.com/getodk/collect/commit/0cb8479b5083030eb1d98bdf5bdb62ac03a1c7a4", "message": "fix slider colors", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "270d314ee1fdc1cf9cce013ccfa031b8e8b77dde", "url": "https://github.com/getodk/collect/commit/270d314ee1fdc1cf9cce013ccfa031b8e8b77dde", "message": "update range integer java class", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "d6f3bde84a2a1c10b0bf14232ff79ccb54b42a95", "url": "https://github.com/getodk/collect/commit/d6f3bde84a2a1c10b0bf14232ff79ccb54b42a95", "message": "update range integer java class", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "3b69049eec6d7318ff941bc22dc7d7b5285d3d46", "url": "https://github.com/getodk/collect/commit/3b69049eec6d7318ff941bc22dc7d7b5285d3d46", "message": "add check for vertical appearnce", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "bbf1926ea56c806e44119abfdb381db1691c25ef", "url": "https://github.com/getodk/collect/commit/bbf1926ea56c806e44119abfdb381db1691c25ef", "message": "add unit tests", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "4138080a4e3f98e0ad84ffa5310cca359e387907", "url": "https://github.com/getodk/collect/commit/4138080a4e3f98e0ad84ffa5310cca359e387907", "message": "make getAnswerShouldReflectActualValueSetViaSeekBar() test greeen", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "436fc2339d21c9a5a43a21f5270afeaa8dc3abed", "url": "https://github.com/getodk/collect/commit/436fc2339d21c9a5a43a21f5270afeaa8dc3abed", "message": "update slider color to theme colors", "committedDate": "2020-10-06T09:07:22Z", "type": "commit"}, {"oid": "bdc8cea6a1b3d8d595dbb97f145c9d9972351658", "url": "https://github.com/getodk/collect/commit/bdc8cea6a1b3d8d595dbb97f145c9d9972351658", "message": "add unit test for range decimal widget", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "4faa3714280b7735948b73c8b30c49b93df244c3", "url": "https://github.com/getodk/collect/commit/4faa3714280b7735948b73c8b30c49b93df244c3", "message": "update range decimal widgte java class", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "20843b74dd0b8962e4626e2757197a2e4406a73d", "url": "https://github.com/getodk/collect/commit/20843b74dd0b8962e4626e2757197a2e4406a73d", "message": "create RangeWidgetUtils class", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "261cd4930ca815c9ab5c9bd53cb2738e2d5bf84f", "url": "https://github.com/getodk/collect/commit/261cd4930ca815c9ab5c9bd53cb2738e2d5bf84f", "message": "add unit tests for RangeWidgetUtils", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "1f2e9e91f88090a6960f285f1a2cab4e12127640", "url": "https://github.com/getodk/collect/commit/1f2e9e91f88090a6960f285f1a2cab4e12127640", "message": "create CustomRangeSlider class and code refactor", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "b03ecc6560a7c0d31c17b1c47af52b058c135762", "url": "https://github.com/getodk/collect/commit/b03ecc6560a7c0d31c17b1c47af52b058c135762", "message": "add unit tests for CustomRangeSlider", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "4d667976523d0a5d527de385dec5b237f32a1b7c", "url": "https://github.com/getodk/collect/commit/4d667976523d0a5d527de385dec5b237f32a1b7c", "message": "code refactor", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "699e982dae9c72f1d7bc2e1a72f009fe37d8b97f", "url": "https://github.com/getodk/collect/commit/699e982dae9c72f1d7bc2e1a72f009fe37d8b97f", "message": "refactor SuppressFlingGestureSlider", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "0eb932e9eee9e69fbd7fe01e19a6488a284b003d", "url": "https://github.com/getodk/collect/commit/0eb932e9eee9e69fbd7fe01e19a6488a284b003d", "message": "remove RangeWidget and RangeWidgetTest class", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "93401e5071c5ef93bb6521c8cd94ea29c6ee0b9f", "url": "https://github.com/getodk/collect/commit/93401e5071c5ef93bb6521c8cd94ea29c6ee0b9f", "message": "create custom nested class for returning range widget layout elements in RangeWidgetUtils", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "8690b83fe0dcc55d463940286f37548fda877b6a", "url": "https://github.com/getodk/collect/commit/8690b83fe0dcc55d463940286f37548fda877b6a", "message": "fix usingReadOnlyOption_disablesTheSlider unit test", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "10a923a51e3cbd00032a6868277f62b03a1c4ff8", "url": "https://github.com/getodk/collect/commit/10a923a51e3cbd00032a6868277f62b03a1c4ff8", "message": "fix check_quality error", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "8ecf662e0a41ecdfef02feafff45b1c6ea150529", "url": "https://github.com/getodk/collect/commit/8ecf662e0a41ecdfef02feafff45b1c6ea150529", "message": "code refactor", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "eb24545e5b1b6d3954205f1c7d26f1a6b6fd0cbc", "url": "https://github.com/getodk/collect/commit/eb24545e5b1b6d3954205f1c7d26f1a6b6fd0cbc", "message": "code refactor", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "a344184a8739f7c924f352443d301beadd207c0b", "url": "https://github.com/getodk/collect/commit/a344184a8739f7c924f352443d301beadd207c0b", "message": "add unit tests for vertical slider", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "db37ff10620de47ae3d5bf8fd61e88c166e30bcb", "url": "https://github.com/getodk/collect/commit/db37ff10620de47ae3d5bf8fd61e88c166e30bcb", "message": "unit tests refactor", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "8d45f7bb61d629007020ca3fc0282e88adb2f66a", "url": "https://github.com/getodk/collect/commit/8d45f7bb61d629007020ca3fc0282e88adb2f66a", "message": "create Range picker classes", "committedDate": "2020-10-06T09:07:23Z", "type": "commit"}, {"oid": "05f64d3df37c410d99c47fdcd78e1aaa0aa7b74d", "url": "https://github.com/getodk/collect/commit/05f64d3df37c410d99c47fdcd78e1aaa0aa7b74d", "message": "refactor code", "committedDate": "2020-10-06T09:10:48Z", "type": "commit"}, {"oid": "bedf2c8e247668b7cff056d94aec64b0c197d762", "url": "https://github.com/getodk/collect/commit/bedf2c8e247668b7cff056d94aec64b0c197d762", "message": "code refactor", "committedDate": "2020-10-06T09:15:24Z", "type": "commit"}, {"oid": "35210fcea866cccef89b18378cb9699525a0c85a", "url": "https://github.com/getodk/collect/commit/35210fcea866cccef89b18378cb9699525a0c85a", "message": "update RangePickerIntegerWidget", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "3e7b0e075c2a623a74c05bdff7664d2b948314f3", "url": "https://github.com/getodk/collect/commit/3e7b0e075c2a623a74c05bdff7664d2b948314f3", "message": "update RangePickerIntegerWidget class", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "c4bef2f19f0e3b97bb1aad330dd9112a92c7f39c", "url": "https://github.com/getodk/collect/commit/c4bef2f19f0e3b97bb1aad330dd9112a92c7f39c", "message": "add unit tests for RangePickerIntegerWidget", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "4680d40c4ad321858e1182901b98618ee13ac19d", "url": "https://github.com/getodk/collect/commit/4680d40c4ad321858e1182901b98618ee13ac19d", "message": "add unit tests", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "10fa032fa058dff5acba3e2a916d9cb094368620", "url": "https://github.com/getodk/collect/commit/10fa032fa058dff5acba3e2a916d9cb094368620", "message": "add unit tests for RangePickerDecimalWidget", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "31e5beea8ea6c5ba2d89a3f4846b88d3cdd3a607", "url": "https://github.com/getodk/collect/commit/31e5beea8ea6c5ba2d89a3f4846b88d3cdd3a607", "message": "update RangePickerDecimalWidget class", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "8454ee3646cf9ce6a1ec5f86c532db3e33f86d31", "url": "https://github.com/getodk/collect/commit/8454ee3646cf9ce6a1ec5f86c532db3e33f86d31", "message": "code refactor to make unit tests pass", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "e0e1cddcca0efb9a5872de3daf8130d594709819", "url": "https://github.com/getodk/collect/commit/e0e1cddcca0efb9a5872de3daf8130d594709819", "message": "refactor code", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "fc0f86fa7774c4c842d33a53398fbcc73120e04e", "url": "https://github.com/getodk/collect/commit/fc0f86fa7774c4c842d33a53398fbcc73120e04e", "message": "add unit tests for RangeWidgetUtils", "committedDate": "2020-10-06T09:15:28Z", "type": "commit"}, {"oid": "4ea5bd6fc8132706bec8acf68bda849417517a64", "url": "https://github.com/getodk/collect/commit/4ea5bd6fc8132706bec8acf68bda849417517a64", "message": "code refactor", "committedDate": "2020-10-06T09:16:46Z", "type": "commit"}, {"oid": "75de29afdc7348a0e3dcb1a98a5477d26bb598c4", "url": "https://github.com/getodk/collect/commit/75de29afdc7348a0e3dcb1a98a5477d26bb598c4", "message": "shift checkNumberPickerDialogShown test to RangeWidgetUtilsTest", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "23f1de47a4bf640ccc047647037ed235f67b1c93", "url": "https://github.com/getodk/collect/commit/23f1de47a4bf640ccc047647037ed235f67b1c93", "message": "implement conitnuos slider based on 'no ticks' appearance", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "5cdfc9f8c2624b64271775493579fe672b3f2f64", "url": "https://github.com/getodk/collect/commit/5cdfc9f8c2624b64271775493579fe672b3f2f64", "message": "fix failing unit tests", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "e8c79ce730879dc2e6743be3f2b4e539e64b70b9", "url": "https://github.com/getodk/collect/commit/e8c79ce730879dc2e6743be3f2b4e539e64b70b9", "message": "fix crash when start value is greater tahn end value", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "0a640861866d1bf4919ca85198263cc231d2b656", "url": "https://github.com/getodk/collect/commit/0a640861866d1bf4919ca85198263cc231d2b656", "message": "add touch listener on the slider", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "c6bc510e62c78f5cdb11dcf25e45197dbf48e5c2", "url": "https://github.com/getodk/collect/commit/c6bc510e62c78f5cdb11dcf25e45197dbf48e5c2", "message": "add unit tests for TrackingTouchSlider", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "6c6717f76be9037b972f8051a6fb56372f319b1d", "url": "https://github.com/getodk/collect/commit/6c6717f76be9037b972f8051a6fb56372f319b1d", "message": "fix failing unit tests", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "f74193f95d0f0f6ece24b72e4ceb372869a708cc", "url": "https://github.com/getodk/collect/commit/f74193f95d0f0f6ece24b72e4ceb372869a708cc", "message": "code refactor", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "d3d9df15142176289a088c3532ac24a71710e717", "url": "https://github.com/getodk/collect/commit/d3d9df15142176289a088c3532ac24a71710e717", "message": "code refactor", "committedDate": "2020-10-06T09:16:51Z", "type": "commit"}, {"oid": "85796d62e43b1985290e7cb8a08306abc3d79979", "url": "https://github.com/getodk/collect/commit/85796d62e43b1985290e7cb8a08306abc3d79979", "message": "refactor WidgetButtonAndAnswerBinding", "committedDate": "2020-10-06T09:18:52Z", "type": "commit"}, {"oid": "b20cc6ecf0cc9bebf79293188e7d987cf06c3c09", "url": "https://github.com/getodk/collect/commit/b20cc6ecf0cc9bebf79293188e7d987cf06c3c09", "message": "create slider theme", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "aa1313d7280c526b22759de5bacb59d9adc282ec", "url": "https://github.com/getodk/collect/commit/aa1313d7280c526b22759de5bacb59d9adc282ec", "message": "used material design color", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "aa7db937e9a9b1d565178c5f0153067f92b3de58", "url": "https://github.com/getodk/collect/commit/aa7db937e9a9b1d565178c5f0153067f92b3de58", "message": "create method createThemedContext() in RobolectricHelpers", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "f079561e9d968f17889363a35b9ac03e7d6cec3e", "url": "https://github.com/getodk/collect/commit/f079561e9d968f17889363a35b9ac03e7d6cec3e", "message": "fix slider behaviour when range start is greater than range end value", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "05d64a2919df63878390815d8aee52b617c889f8", "url": "https://github.com/getodk/collect/commit/05d64a2919df63878390815d8aee52b617c889f8", "message": "code refactor", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "ad92235f0991a92752754c29f028357860c6f34c", "url": "https://github.com/getodk/collect/commit/ad92235f0991a92752754c29f028357860c6f34c", "message": "remove slider track color and use color_on_surface_low_emphasis", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "68fcbf27b154bc13f1e3c9760f7d31fa57df910e", "url": "https://github.com/getodk/collect/commit/68fcbf27b154bc13f1e3c9760f7d31fa57df910e", "message": "fix slider ripple", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "c7685c3e28f482cfb07292820b9dc92551c7fea6", "url": "https://github.com/getodk/collect/commit/c7685c3e28f482cfb07292820b9dc92551c7fea6", "message": "hide thumb when widget has no answer", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "3dae8e40005e09d1b4a5aa6eeca24a8492af9491", "url": "https://github.com/getodk/collect/commit/3dae8e40005e09d1b4a5aa6eeca24a8492af9491", "message": "hide picker button when readonly and code refactor", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "88fe4779c5f693da504be6260c18c1f30226378a", "url": "https://github.com/getodk/collect/commit/88fe4779c5f693da504be6260c18c1f30226378a", "message": "create slider tint list", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "94d17fc3a6062bb64f1675df049586b72d398dfe", "url": "https://github.com/getodk/collect/commit/94d17fc3a6062bb64f1675df049586b72d398dfe", "message": "fix slider thumb and code refactor", "committedDate": "2020-10-06T09:19:03Z", "type": "commit"}, {"oid": "a5e8b4a016a0dd2bbe463d1ce02affd5e9c474cc", "url": "https://github.com/getodk/collect/commit/a5e8b4a016a0dd2bbe463d1ce02affd5e9c474cc", "message": "add styles for widget button and answer text view", "committedDate": "2020-10-06T09:19:55Z", "type": "commit"}, {"oid": "56875b2966fe206e4f9a74e8c35eba39cf4e809d", "url": "https://github.com/getodk/collect/commit/56875b2966fe206e4f9a74e8c35eba39cf4e809d", "message": "retain null answer on screen rotation", "committedDate": "2020-10-06T09:20:00Z", "type": "commit"}, {"oid": "8e9252164646383455c2747eb2f75f59a498022b", "url": "https://github.com/getodk/collect/commit/8e9252164646383455c2747eb2f75f59a498022b", "message": "add unit tests", "committedDate": "2020-10-06T09:20:00Z", "type": "commit"}, {"oid": "8e9252164646383455c2747eb2f75f59a498022b", "url": "https://github.com/getodk/collect/commit/8e9252164646383455c2747eb2f75f59a498022b", "message": "add unit tests", "committedDate": "2020-10-06T09:20:00Z", "type": "forcePushed"}]}