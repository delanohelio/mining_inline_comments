{"pr_number": 4197, "pr_title": "Show warning when importing legacy settings", "pr_createdAt": "2020-11-02T16:18:49Z", "pr_url": "https://github.com/getodk/collect/pull/4197", "timeline": [{"oid": "4b980565bfdef0703a4086a192bd56c756ab52b2", "url": "https://github.com/getodk/collect/commit/4b980565bfdef0703a4086a192bd56c756ab52b2", "message": "Add failing test for legacy settings flows", "committedDate": "2020-11-02T14:57:04Z", "type": "commit"}, {"oid": "4f36b3cdee4537cde82f91362b57cd26824c60e8", "url": "https://github.com/getodk/collect/commit/4f36b3cdee4537cde82f91362b57cd26824c60e8", "message": "Show dialog when legacy settings are imported", "committedDate": "2020-11-02T15:36:43Z", "type": "commit"}, {"oid": "fe0f48b6654669aa014e75892b7c7af648a26772", "url": "https://github.com/getodk/collect/commit/fe0f48b6654669aa014e75892b7c7af648a26772", "message": "Delete test replaced by Espresso", "committedDate": "2020-11-02T15:52:18Z", "type": "commit"}, {"oid": "12024edd97a307db55f4fe062ad6376c6c967ad2", "url": "https://github.com/getodk/collect/commit/12024edd97a307db55f4fe062ad6376c6c967ad2", "message": "Encapsulate legacy import logic in use case", "committedDate": "2020-11-02T16:10:10Z", "type": "commit"}, {"oid": "f5178ef1db21f96cd92a47a0003eb30bed20cdb6", "url": "https://github.com/getodk/collect/commit/f5178ef1db21f96cd92a47a0003eb30bed20cdb6", "message": "Simplify import UI logic", "committedDate": "2020-11-02T16:17:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjA4OTk5Ng==", "url": "https://github.com/getodk/collect/pull/4197#discussion_r516089996", "bodyText": "This actually wouldn't ever have worked as LegacySettingsFileReader deleted the files. I've moved that out to a separate action so this should now fire correctly.", "author": "seadowg", "createdAt": "2020-11-02T16:22:26Z", "path": "collect_app/src/main/java/org/odk/collect/android/activities/MainMenuActivity.java", "diffHunk": "@@ -574,31 +582,4 @@ private void displayBannerWithSuccessStorageMigrationResult() {\n             storageMigrationRepository.clearResult();\n         });\n     }\n-\n-    private void importSettingsFromLegacyFiles() {\n-        try {\n-            String settings = new LegacySettingsFileReader(storagePathProvider).toJSON();\n-\n-            if (settings != null) {\n-                String type = new File(storagePathProvider.getStorageRootDirPath() + \"/collect.settings.json\").exists()", "originalCommit": "f5178ef1db21f96cd92a47a0003eb30bed20cdb6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}