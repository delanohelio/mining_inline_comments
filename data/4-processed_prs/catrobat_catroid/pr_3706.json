{"pr_number": 3706, "pr_title": "CATROID-612 new Touch at... for _ seconds brick", "pr_createdAt": "2020-07-24T15:46:47Z", "pr_url": "https://github.com/Catrobat/Catroid/pull/3706", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDQ2NjA3Nw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r460466077", "bodyText": "you can use interpretFloat(sprite)", "author": "ndrnour", "createdAt": "2020-07-26T01:46:18Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/actions/TapAtAction.kt", "diffHunk": "@@ -0,0 +1,90 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2018 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.catrobat.catroid.content.actions\n+\n+import android.util.Log\n+import com.badlogic.gdx.math.Vector2\n+import com.badlogic.gdx.scenes.scene2d.Stage\n+import com.badlogic.gdx.scenes.scene2d.actions.TemporalAction\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.formulaeditor.Formula\n+import org.catrobat.catroid.formulaeditor.InterpretationException\n+import org.catrobat.catroid.stage.StageActivity\n+\n+class TapAtAction : TemporalAction() {\n+\n+    var x = 0f\n+    var y = 0f\n+    var sprite: Sprite? = null\n+    lateinit var stage: Stage\n+    private lateinit var touchCoords: Vector2\n+    private var pointer: Int = 0\n+    private var errorDetected: Boolean = false\n+\n+    override fun begin() {\n+        super.begin()\n+        if (!errorDetected) {\n+            pointer = sprite?.unusedPosition ?: 0\n+            stage = StageActivity.stageListener.stage\n+            touchCoords = Vector2()\n+            touchCoords[x] = y\n+            stage.stageToScreenCoordinates(touchCoords)\n+            stage.touchDown(touchCoords.x.toInt(), touchCoords.y.toInt(), pointer, 0)\n+        } else {\n+            duration = 0f\n+        }\n+    }\n+\n+    override fun update(percent: Float) = Unit\n+\n+    override fun end() {\n+        if (!errorDetected) {\n+            stage.touchUp(touchCoords.x.toInt(), touchCoords.y.toInt(), pointer, 0)\n+            sprite?.releaseUsedPoistion(pointer)\n+        }\n+    }\n+\n+    fun setPosition(x: Formula?, y: Formula?) {\n+        try {\n+            this.x = x?.interpretInteger(sprite)?.toFloat() ?: 0f\n+            this.y = y?.interpretInteger(sprite)?.toFloat() ?: 0f", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDkyODA5Mw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r460928093", "bodyText": "the icon layout must be the first View in the BrickLayout.\nplease move this <include layout=\"@layout/icon_brick_category_look\" /> to line 42 before TextViews", "author": "ndrnour", "createdAt": "2020-07-27T14:24:00Z", "path": "catroid/src/main/res/layout/brick_tap_for.xml", "diffHunk": "@@ -0,0 +1,88 @@\n+<?xml version=\"1.0\" encoding=\"utf-8\"?>\n+<!--\n+  ~ Catroid: An on-device visual programming system for Android devices\n+  ~ Copyright (C) 2010-2018 The Catrobat Team\n+  ~ (<http://developer.catrobat.org/credits>)\n+  ~\n+  ~ This program is free software: you can redistribute it and/or modify\n+  ~ it under the terms of the GNU Affero General Public License as\n+  ~ published by the Free Software Foundation, either version 3 of the\n+  ~ License, or (at your option) any later version.\n+  ~\n+  ~ An additional term exception under section 7 of the GNU Affero\n+  ~ General Public License, version 3, is available at\n+  ~ http://developer.catrobat.org/license_additional_term\n+  ~\n+  ~ This program is distributed in the hope that it will be useful,\n+  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of\n+  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+  ~ GNU Affero General Public License for more details.\n+  ~\n+  ~ You should have received a copy of the GNU Affero General Public License\n+  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+  -->\n+\n+<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n+    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n+    android:layout_width=\"match_parent\"\n+    android:layout_height=\"wrap_content\"\n+    android:gravity=\"center_vertical\"\n+    android:orientation=\"horizontal\">\n+\n+    <CheckBox\n+        android:id=\"@+id/brick_checkbox\"\n+        android:layout_width=\"wrap_content\"\n+        android:layout_height=\"wrap_content\"\n+        android:gravity=\"center_vertical\"\n+        android:visibility=\"gone\" />\n+\n+    <org.catrobat.catroid.ui.BrickLayout\n+        android:id=\"@+id/brick_place_at_layout\"\n+        style=\"@style/BrickContainer.Test.Medium\">\n+\n+        <TextView\n+            style=\"@style/BrickText.SingleLine\"\n+            android:text=\"@string/brick_tap_at\" />\n+        \n+        <TextView\n+            style=\"@style/BrickText.SingleLine\"\n+            android:text=\"@string/x_label\"\n+            app:layout_newLine=\"true\" />\n+\n+        <TextView\n+            android:id=\"@+id/brick_tap_for_edit_x\"\n+            style=\"@style/BrickEditText\"\n+            app:layout_inputType=\"number\"\n+            app:layout_textField=\"true\" />\n+\n+        <TextView\n+            style=\"@style/BrickText.SingleLine\"\n+            android:paddingStart=\"@dimen/material_design_spacing_small\"\n+            android:text=\"@string/y_label\"\n+            android:paddingEnd=\"@dimen/material_design_spacing_small\" />\n+\n+        <TextView\n+            android:id=\"@+id/brick_tap_for_edit_y\"\n+            style=\"@style/BrickEditText\"\n+            app:layout_inputType=\"number\"\n+            app:layout_textField=\"true\" />\n+\n+        <TextView\n+            style=\"@style/BrickText.SingleLine\"\n+            android:text=\"@string/brick_tap_for\"\n+            app:layout_newLine=\"true\" />\n+\n+        <TextView\n+            android:id=\"@+id/brick_tap_for_edit_duration\"\n+            style=\"@style/BrickEditText\"\n+            app:layout_inputType=\"number\"\n+            app:layout_textField=\"true\" />\n+\n+        <TextView\n+            android:id=\"@+id/brick_seconds_label\"\n+            style=\"@style/BrickText.SingleLine\" />\n+\n+        <include layout=\"@layout/icon_brick_category_look\" />", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "65537ef0f13839b6873cf2872f913650b24eeddd", "url": "https://github.com/Catrobat/Catroid/commit/65537ef0f13839b6873cf2872f913650b24eeddd", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-27T15:34:18Z", "type": "forcePushed"}, {"oid": "baebd06c4302ba6e229791c377d7a983da474566", "url": "https://github.com/Catrobat/Catroid/commit/baebd06c4302ba6e229791c377d7a983da474566", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-27T20:24:22Z", "type": "forcePushed"}, {"oid": "96d18705d2d7efde1f00d7d47c85aac7861cf766", "url": "https://github.com/Catrobat/Catroid/commit/96d18705d2d7efde1f00d7d47c85aac7861cf766", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-28T15:03:50Z", "type": "forcePushed"}, {"oid": "c3a9fd5616b5f82fd54a666935baafff1e29ac1a", "url": "https://github.com/Catrobat/Catroid/commit/c3a9fd5616b5f82fd54a666935baafff1e29ac1a", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T11:12:57Z", "type": "forcePushed"}, {"oid": "a0592d1a86389deb4b266fc62dd81431c5f45526", "url": "https://github.com/Catrobat/Catroid/commit/a0592d1a86389deb4b266fc62dd81431c5f45526", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T11:20:50Z", "type": "forcePushed"}, {"oid": "ddb464b720853a4f435e437ad717b0ba2a77033f", "url": "https://github.com/Catrobat/Catroid/commit/ddb464b720853a4f435e437ad717b0ba2a77033f", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T11:58:51Z", "type": "forcePushed"}, {"oid": "bced6e46608bf4be8a5d3075fc19ebea17e05c56", "url": "https://github.com/Catrobat/Catroid/commit/bced6e46608bf4be8a5d3075fc19ebea17e05c56", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T12:07:16Z", "type": "forcePushed"}, {"oid": "55704bf894bf388368708833329140b5b3ae55c6", "url": "https://github.com/Catrobat/Catroid/commit/55704bf894bf388368708833329140b5b3ae55c6", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T12:20:12Z", "type": "forcePushed"}, {"oid": "e9332e6ef3676f77346697d087811667e85261ab", "url": "https://github.com/Catrobat/Catroid/commit/e9332e6ef3676f77346697d087811667e85261ab", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T12:43:40Z", "type": "forcePushed"}, {"oid": "a045f8b17c804a80d856c3e38494e62fccc6f3f0", "url": "https://github.com/Catrobat/Catroid/commit/a045f8b17c804a80d856c3e38494e62fccc6f3f0", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T12:51:07Z", "type": "forcePushed"}, {"oid": "d94f329a8223ec35aca30b6000ca45738296f079", "url": "https://github.com/Catrobat/Catroid/commit/d94f329a8223ec35aca30b6000ca45738296f079", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-07-29T12:53:02Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MDA2Nw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463640067", "bodyText": "I see no changes from line 154 until this line. please avoid reformating the whole file.\nalso please revert it and push only your changes.", "author": "ndrnour", "createdAt": "2020-07-31T14:21:02Z", "path": "catroid/src/test/java/org/catrobat/catroid/test/robolectric/bricks/BrickSingleFormulaFieldTest.java", "diffHunk": "@@ -151,139 +150,137 @@\n \t@ParameterizedRobolectricTestRunner.Parameters(name = \"{0}\")\n \tpublic static Collection<Object[]> data() {\n \t\treturn Arrays.asList(new Object[][] {\n-\t\t\t\t//Bricks with single formula fields\n-\t\t\t\t{WhenConditionBrick.class.getSimpleName(), new WhenConditionBrick(), R.id.brick_when_condition_edit_text},\n-\t\t\t\t{SetXBrick.class.getSimpleName(), new SetXBrick(), R.id.brick_set_x_edit_text},\n-\t\t\t\t{SetYBrick.class.getSimpleName(), new SetYBrick(), R.id.brick_set_y_edit_text},\n-\t\t\t\t{WaitBrick.class.getSimpleName(), new WaitBrick(), R.id.brick_wait_edit_text},\n-\t\t\t\t{NoteBrick.class.getSimpleName(), new NoteBrick(), R.id.brick_note_edit_text},\n-\t\t\t\t{WaitUntilBrick.class.getSimpleName(), new WaitUntilBrick(), R.id.brick_wait_until_edit_text},\n-\t\t\t\t{ChangeXByNBrick.class.getSimpleName(), new ChangeXByNBrick(), R.id.brick_change_x_edit_text},\n-\t\t\t\t{ChangeYByNBrick.class.getSimpleName(), new ChangeYByNBrick(), R.id.brick_change_y_edit_text},\n-\t\t\t\t{MoveNStepsBrick.class.getSimpleName(), new MoveNStepsBrick(), R.id.brick_move_n_steps_edit_text},\n-\t\t\t\t{TurnLeftBrick.class.getSimpleName(), new TurnLeftBrick(), R.id.brick_turn_left_edit_text},\n-\t\t\t\t{TurnRightBrick.class.getSimpleName(), new TurnRightBrick(), R.id.brick_turn_right_edit_text},\n-\t\t\t\t{PointInDirectionBrick.class.getSimpleName(), new PointInDirectionBrick(), R.id.brick_point_in_direction_edit_text},\n-\t\t\t\t{GoNStepsBackBrick.class.getSimpleName(), new GoNStepsBackBrick(), R.id.brick_go_back_edit_text},\n-\t\t\t\t{VibrationBrick.class.getSimpleName(), new VibrationBrick(), R.id.brick_vibration_edit_text},\n-\t\t\t\t{TurnLeftSpeedBrick.class.getSimpleName(), new TurnLeftSpeedBrick(), R.id.brick_turn_left_speed_edit_text},\n-\t\t\t\t{TurnRightSpeedBrick.class.getSimpleName(), new TurnRightSpeedBrick(), R.id.brick_turn_right_speed_edit_text},\n-\t\t\t\t{SetMassBrick.class.getSimpleName(), new SetMassBrick(), R.id.brick_set_mass_edit_text},\n-\t\t\t\t{SetBounceBrick.class.getSimpleName(), new SetBounceBrick(), R.id.brick_set_bounce_factor_edit_text},\n-\t\t\t\t{SetFrictionBrick.class.getSimpleName(), new SetFrictionBrick(), R.id.brick_set_friction_edit_text},\n-\t\t\t\t{SetVolumeToBrick.class.getSimpleName(), new SetVolumeToBrick(), R.id.brick_set_volume_to_edit_text},\n-\t\t\t\t{ChangeVolumeByNBrick.class.getSimpleName(), new ChangeVolumeByNBrick(), R.id.brick_change_volume_by_edit_text},\n-\t\t\t\t{SpeakBrick.class.getSimpleName(), new SpeakBrick(), R.id.brick_speak_edit_text},\n-\t\t\t\t{SpeakAndWaitBrick.class.getSimpleName(), new SpeakAndWaitBrick(), R.id.brick_speak_and_wait_edit_text},\n-\t\t\t\t{AskBrick.class.getSimpleName(), new AskBrick(), R.id.brick_ask_question_edit_text},\n-\t\t\t\t{SetLookByIndexBrick.class.getSimpleName(), new SetLookByIndexBrick(), R.id.brick_set_look_by_index_edit_text},\n-\t\t\t\t{SetSizeToBrick.class.getSimpleName(), new SetSizeToBrick(), R.id.brick_set_size_to_edit_text},\n-\t\t\t\t{ChangeSizeByNBrick.class.getSimpleName(), new ChangeSizeByNBrick(), R.id.brick_change_size_by_edit_text},\n-\t\t\t\t{AskSpeechBrick.class.getSimpleName(), new AskSpeechBrick(), R.id.brick_ask_speech_question_edit_text},\n-\t\t\t\t{SayBubbleBrick.class.getSimpleName(), new SayBubbleBrick(), R.id.brick_bubble_edit_text},\n-\t\t\t\t{ThinkBubbleBrick.class.getSimpleName(), new ThinkBubbleBrick(), R.id.brick_bubble_edit_text},\n-\t\t\t\t{SetTransparencyBrick.class.getSimpleName(), new SetTransparencyBrick(), R.id.brick_set_transparency_to_edit_text},\n-\t\t\t\t{ChangeTransparencyByNBrick.class.getSimpleName(), new ChangeTransparencyByNBrick(), R.id.brick_change_transparency_edit_text},\n-\t\t\t\t{SetBrightnessBrick.class.getSimpleName(), new SetBrightnessBrick(), R.id.brick_set_brightness_edit_text},\n-\t\t\t\t{ChangeBrightnessByNBrick.class.getSimpleName(), new ChangeBrightnessByNBrick(), R.id.brick_change_brightness_edit_text},\n-\t\t\t\t{SetColorBrick.class.getSimpleName(), new SetColorBrick(), R.id.brick_set_color_edit_text},\n-\t\t\t\t{ChangeColorByNBrick.class.getSimpleName(), new ChangeColorByNBrick(), R.id.brick_change_color_by_edit_text},\n-\t\t\t\t{SetBackgroundByIndexBrick.class.getSimpleName(), new SetBackgroundByIndexBrick(), R.id.brick_set_background_by_index_edit_text},\n-\t\t\t\t{SetBackgroundByIndexAndWaitBrick.class.getSimpleName(), new SetBackgroundByIndexAndWaitBrick(), R.id.brick_set_background_by_index_edit_text},\n-\t\t\t\t{SetBackgroundByIndexAndWaitBrick.class.getSimpleName(), new SetBackgroundByIndexAndWaitBrick(), R.id.brick_set_background_by_index_edit_text},\n-\t\t\t\t{SetPenSizeBrick.class.getSimpleName(), new SetPenSizeBrick(), R.id.brick_set_pen_size_edit_text},\n-\t\t\t\t{SetVariableBrick.class.getSimpleName(), new SetVariableBrick(), R.id.brick_set_variable_edit_text},\n-\t\t\t\t{ChangeVariableBrick.class.getSimpleName(), new ChangeVariableBrick(), R.id.brick_change_variable_edit_text},\n-\t\t\t\t{AddItemToUserListBrick.class.getSimpleName(), new AddItemToUserListBrick(), R.id.brick_add_item_to_userlist_edit_text},\n-\t\t\t\t{DeleteItemOfUserListBrick.class.getSimpleName(), new DeleteItemOfUserListBrick(), R.id.brick_delete_item_of_userlist_edit_text},\n-\t\t\t\t{IfLogicBeginBrick.class.getSimpleName(), new IfLogicBeginBrick(), R.id.brick_if_begin_edit_text},\n-\t\t\t\t{IfThenLogicBeginBrick.class.getSimpleName(), new IfThenLogicBeginBrick(), R.id.brick_if_begin_edit_text},\n-\n-\t\t\t\t//Bricks with multiple formula fields:\n-\t\t\t\t{GlideToBrick.class.getSimpleName() + \" duration\", new GlideToBrick(), R.id.brick_glide_to_edit_text_duration},\n-\t\t\t\t{SetVelocityBrick.class.getSimpleName() + \" x\", new SetVelocityBrick(), R.id.brick_set_velocity_edit_text_x},\n-\t\t\t\t{SetVelocityBrick.class.getSimpleName() + \" y\", new SetVelocityBrick(), R.id.brick_set_velocity_edit_text_y},\n-\t\t\t\t{SetGravityBrick.class.getSimpleName() + \" x\", new SetGravityBrick(), R.id.brick_set_gravity_edit_text_x},\n-\t\t\t\t{SetGravityBrick.class.getSimpleName() + \" y\", new SetGravityBrick(), R.id.brick_set_gravity_edit_text_y},\n-\t\t\t\t{SayForBubbleBrick.class.getSimpleName() + \" text\", new SayForBubbleBrick(), R.id.brick_for_bubble_edit_text_text},\n-\t\t\t\t{SayForBubbleBrick.class.getSimpleName() + \" duration\", new SayForBubbleBrick(), R.id.brick_for_bubble_edit_text_duration},\n-\t\t\t\t{ThinkForBubbleBrick.class.getSimpleName() + \" text\", new ThinkForBubbleBrick(), R.id.brick_for_bubble_edit_text_text},\n-\t\t\t\t{ThinkForBubbleBrick.class.getSimpleName() + \" duration\", new ThinkForBubbleBrick(), R.id.brick_for_bubble_edit_text_duration},\n-\t\t\t\t{ShowTextBrick.class.getSimpleName() + \" x\", new ShowTextBrick(), R.id.brick_show_variable_edit_text_x},\n-\t\t\t\t{ShowTextBrick.class.getSimpleName() + \" y\", new ShowTextBrick(), R.id.brick_show_variable_edit_text_y},\n-\t\t\t\t{ShowTextColorSizeAlignmentBrick.class.getSimpleName() + \" x\", new ShowTextColorSizeAlignmentBrick(), R.id.brick_show_variable_color_size_edit_text_x},\n-\t\t\t\t{ShowTextColorSizeAlignmentBrick.class.getSimpleName() + \" y\", new ShowTextColorSizeAlignmentBrick(), R.id.brick_show_variable_color_size_edit_text_y},\n-\t\t\t\t{ShowTextColorSizeAlignmentBrick.class.getSimpleName() + \" size\", new ShowTextColorSizeAlignmentBrick(), R.id.brick_show_variable_color_size_edit_relative_size},\n-\t\t\t\t{InsertItemIntoUserListBrick.class.getSimpleName() + \" value\", new InsertItemIntoUserListBrick(), R.id.brick_insert_item_into_userlist_value_edit_text},\n-\t\t\t\t{InsertItemIntoUserListBrick.class.getSimpleName() + \" index\", new InsertItemIntoUserListBrick(), R.id.brick_insert_item_into_userlist_at_index_edit_text},\n-\t\t\t\t{ReplaceItemInUserListBrick.class.getSimpleName() + \" value\", new ReplaceItemInUserListBrick(), R.id.brick_replace_item_in_userlist_value_edit_text},\n-\t\t\t\t{ReplaceItemInUserListBrick.class.getSimpleName() + \" index\", new ReplaceItemInUserListBrick(), R.id.brick_replace_item_in_userlist_at_index_edit_text},\n-\t\t\t\t{ReplaceItemInUserListBrick.class.getSimpleName() + \" index\", new ReplaceItemInUserListBrick(), R.id.brick_replace_item_in_userlist_at_index_edit_text},\n-\n-\t\t\t\t//NFC bricks:\n-\t\t\t\t{SetNfcTagBrick.class.getSimpleName(), new SetNfcTagBrick(), R.id.brick_set_nfc_tag_edit_text},\n-\n-\t\t\t\t//Lego bricks:\n-\t\t\t\t{LegoNxtMotorTurnAngleBrick.class.getSimpleName(), new LegoNxtMotorTurnAngleBrick(), R.id.motor_turn_angle_edit_text},\n-\t\t\t\t{LegoNxtMotorMoveBrick.class.getSimpleName(), new LegoNxtMotorMoveBrick(), R.id.motor_action_speed_edit_text},\n-\t\t\t\t{LegoNxtPlayToneBrick.class.getSimpleName() + \" freq\", new LegoNxtPlayToneBrick(), R.id.nxt_tone_freq_edit_text},\n-\t\t\t\t{LegoNxtPlayToneBrick.class.getSimpleName() + \" duration\", new LegoNxtPlayToneBrick(), R.id.nxt_tone_duration_edit_text},\n-\t\t\t\t{LegoEv3MotorTurnAngleBrick.class.getSimpleName(), new LegoEv3MotorTurnAngleBrick(), R.id.ev3_motor_turn_angle_edit_text},\n-\t\t\t\t{LegoEv3MotorMoveBrick.class.getSimpleName(), new LegoEv3MotorMoveBrick(), R.id.ev3_motor_move_speed_edit_text},\n-\t\t\t\t{LegoEv3PlayToneBrick.class.getSimpleName() + \" freq\", new LegoEv3PlayToneBrick(), R.id.brick_ev3_tone_freq_edit_text},\n-\t\t\t\t{LegoEv3PlayToneBrick.class.getSimpleName() + \" duration\", new LegoEv3PlayToneBrick(), R.id.brick_ev3_tone_duration_edit_text},\n-\t\t\t\t{LegoEv3PlayToneBrick.class.getSimpleName() + \" volume\", new LegoEv3PlayToneBrick(), R.id.brick_ev3_tone_volume_edit_text},\n-\n-\t\t\t\t//Drone Bricks\n-\t\t\t\t{DroneMoveRightBrick.class.getSimpleName() + \" duration\", new DroneMoveRightBrick(), R.id.brick_drone_move_right_edit_text_second},\n-\t\t\t\t{DroneMoveRightBrick.class.getSimpleName() + \" power\", new DroneMoveRightBrick(), R.id.brick_drone_move_right_edit_text_power},\n-\t\t\t\t{DroneMoveLeftBrick.class.getSimpleName() + \" duration\", new DroneMoveLeftBrick(), R.id.brick_drone_move_left_edit_text_second},\n-\t\t\t\t{DroneMoveLeftBrick.class.getSimpleName() + \" power\", new DroneMoveLeftBrick(), R.id.brick_drone_move_left_edit_text_power},\n-\t\t\t\t{DroneMoveDownBrick.class.getSimpleName() + \" duration\", new DroneMoveDownBrick(), R.id.brick_drone_move_down_edit_text_second},\n-\t\t\t\t{DroneMoveDownBrick.class.getSimpleName() + \" power\", new DroneMoveDownBrick(), R.id.brick_drone_move_down_edit_text_power},\n-\t\t\t\t{DroneMoveUpBrick.class.getSimpleName() + \" duration\", new DroneMoveUpBrick(), R.id.brick_drone_move_up_edit_text_second},\n-\t\t\t\t{DroneMoveUpBrick.class.getSimpleName() + \" power\", new DroneMoveUpBrick(), R.id.brick_drone_move_up_edit_text_power},\n-\t\t\t\t{DroneMoveForwardBrick.class.getSimpleName() + \" duration\", new DroneMoveForwardBrick(), R.id.brick_drone_move_forward_edit_text_second},\n-\t\t\t\t{DroneMoveForwardBrick.class.getSimpleName() + \" power\", new DroneMoveForwardBrick(), R.id.brick_drone_move_forward_edit_text_power},\n-\t\t\t\t{DroneMoveBackwardBrick.class.getSimpleName() + \" duration\", new DroneMoveBackwardBrick(), R.id.brick_drone_move_backward_edit_text_second},\n-\t\t\t\t{DroneMoveBackwardBrick.class.getSimpleName() + \" power\", new DroneMoveBackwardBrick(), R.id.brick_drone_move_backward_edit_text_power},\n-\t\t\t\t{DroneTurnRightBrick.class.getSimpleName() + \" duration\", new DroneTurnRightBrick(), R.id.brick_drone_turn_right_edit_text_second},\n-\t\t\t\t{DroneTurnRightBrick.class.getSimpleName() + \" power\", new DroneTurnRightBrick(), R.id.brick_drone_turn_right_edit_text_power},\n-\t\t\t\t{DroneTurnLeftBrick.class.getSimpleName() + \" duration\", new DroneTurnLeftBrick(), R.id.brick_drone_turn_left_edit_text_second},\n-\t\t\t\t{DroneTurnLeftBrick.class.getSimpleName() + \" power\", new DroneTurnLeftBrick(), R.id.brick_drone_turn_left_edit_text_power},\n-\n-\t\t\t\t{JumpingSumoMoveForwardBrick.class.getSimpleName() + \" duration\", new JumpingSumoMoveForwardBrick(), R.id.brick_jumping_sumo_move_forward_edit_text_second},\n-\t\t\t\t{JumpingSumoMoveForwardBrick.class.getSimpleName() + \" power\", new JumpingSumoMoveForwardBrick(), R.id.brick_jumping_sumo_move_forward_edit_text_power},\n-\t\t\t\t{JumpingSumoMoveBackwardBrick.class.getSimpleName() + \" duration\", new JumpingSumoMoveBackwardBrick(), R.id.brick_jumping_sumo_move_backward_edit_text_second},\n-\t\t\t\t{JumpingSumoMoveBackwardBrick.class.getSimpleName() + \" power\", new JumpingSumoMoveBackwardBrick(), R.id.brick_jumping_sumo_move_backward_edit_text_power},\n-\t\t\t\t{JumpingSumoSoundBrick.class.getSimpleName(), new JumpingSumoSoundBrick(), R.id.brick_jumping_sumo_sound_edit_text},\n-\t\t\t\t{JumpingSumoRotateLeftBrick.class.getSimpleName(), new JumpingSumoRotateLeftBrick(), R.id.brick_jumping_sumo_change_left_variable_edit_text},\n-\t\t\t\t{JumpingSumoRotateRightBrick.class.getSimpleName(), new JumpingSumoRotateRightBrick(), R.id.brick_jumping_sumo_change_right_variable_edit_text},\n-\n-\t\t\t\t//Phiro bricks\n-\t\t\t\t{PhiroMotorMoveBackwardBrick.class.getSimpleName(), new PhiroMotorMoveBackwardBrick(), R.id.brick_phiro_motor_backward_action_speed_edit_text},\n-\t\t\t\t{PhiroMotorMoveForwardBrick.class.getSimpleName(), new PhiroMotorMoveForwardBrick(), R.id.brick_phiro_motor_forward_action_speed_edit_text},\n-\t\t\t\t{PhiroPlayToneBrick.class.getSimpleName(), new PhiroPlayToneBrick(), R.id.brick_phiro_play_tone_duration_edit_text},\n-\n-\t\t\t\t//Arduino bricks\n-\t\t\t\t{ArduinoSendDigitalValueBrick.class.getSimpleName() + \" pin\", new ArduinoSendDigitalValueBrick(), R.id.brick_arduino_set_digital_pin_edit_text},\n-\t\t\t\t{ArduinoSendDigitalValueBrick.class.getSimpleName() + \" value\", new ArduinoSendDigitalValueBrick(), R.id.brick_arduino_set_digital_value_edit_text},\n-\t\t\t\t{ArduinoSendPWMValueBrick.class.getSimpleName() + \" pin\", new ArduinoSendPWMValueBrick(), R.id.brick_arduino_set_analog_pin_edit_text},\n-\t\t\t\t{ArduinoSendPWMValueBrick.class.getSimpleName() + \" value\", new ArduinoSendPWMValueBrick(), R.id.brick_arduino_set_analog_value_edit_text},\n-\n-\t\t\t\t//Raspberry bricks\n-\t\t\t\t{RaspiSendDigitalValueBrick.class.getSimpleName() + \" pin\", new RaspiSendDigitalValueBrick(), R.id.brick_raspi_set_digital_pin_edit_text},\n-\t\t\t\t{RaspiSendDigitalValueBrick.class.getSimpleName() + \" value\", new RaspiSendDigitalValueBrick(), R.id.brick_raspi_set_digital_value_edit_text},\n-\t\t\t\t{RaspiPwmBrick.class.getSimpleName() + \" pin\", new RaspiPwmBrick(), R.id.brick_raspi_pwm_pin_edit_text},\n-\t\t\t\t{RaspiPwmBrick.class.getSimpleName() + \" frequency\", new RaspiPwmBrick(), R.id.brick_raspi_pwm_frequency_edit_text},\n-\t\t\t\t{RaspiPwmBrick.class.getSimpleName() + \" percentage\", new RaspiPwmBrick(), R.id.brick_raspi_pwm_percentage_edit_text},\n-\t\t\t\t{RaspiIfLogicBeginBrick.class.getSimpleName(), new RaspiIfLogicBeginBrick(), R.id.brick_if_begin_edit_text},\n-", "originalCommit": "d94f329a8223ec35aca30b6000ca45738296f079", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463642113", "bodyText": "no usage for this function, could you provide some Info what's the purpose of it?", "author": "ndrnour", "createdAt": "2020-07-31T14:24:37Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/Sprite.java", "diffHunk": "@@ -545,4 +549,28 @@ public boolean isBackgroundSprite() {\n \tpublic Multimap<EventId, EventThread> getIdToEventThreadMap() {\n \t\treturn idToEventThreadMap;\n \t}\n+\n+\tpublic int getUnusedPointer() {", "originalCommit": "d94f329a8223ec35aca30b6000ca45738296f079", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk1MDc4MA==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463950780", "bodyText": "depending which of these two functions you mean\ngetUnusedPointer provides a unused pointer in the range of 0-19 as there can only be 20 touch events simultaneously\ngetIdToEventThreadMap was there before so your guess might be better than mine", "author": "Koell", "createdAt": "2020-08-01T10:59:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk1OTA5Ng==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463959096", "bodyText": "getUnusedPointer() has no usage as far as I can see? did I miss something?", "author": "ndrnour", "createdAt": "2020-08-01T12:49:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk4MjExOA==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463982118", "bodyText": "TapAtAction line 47, kotlin removes the \"get\" from functions", "author": "Koell", "createdAt": "2020-08-01T17:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Mzk4MjE1Mg==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463982152", "bodyText": "pointer = sprite?.unusedPointer ?: 0", "author": "Koell", "createdAt": "2020-08-01T17:22:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2NTMxMQ==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r464065311", "bodyText": "ach ja, I overlooked it", "author": "ndrnour", "createdAt": "2020-08-02T11:22:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0MjExMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0NDU0Mw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463644543", "bodyText": "for removing one object from an ArrayList, remove should be used instead of removeAll, right?", "author": "ndrnour", "createdAt": "2020-07-31T14:28:54Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/Sprite.java", "diffHunk": "@@ -545,4 +549,28 @@ public boolean isBackgroundSprite() {\n \tpublic Multimap<EventId, EventThread> getIdToEventThreadMap() {\n \t\treturn idToEventThreadMap;\n \t}\n+\n+\tpublic int getUnusedPointer() {\n+\t\tint result = 0;\n+\t\twhile (result < 20 && usedTouchPointer.contains(result)) {\n+\t\t\t++result;\n+\t\t}\n+\t\tusedTouchPointer.add(result);\n+\n+\t\treturn result;\n+\t}\n+\n+\tpublic void releaseUsedPointer(int position) {\n+\t\tusedTouchPointer.removeAll(Collections.singleton(position));", "originalCommit": "d94f329a8223ec35aca30b6000ca45738296f079", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY1NTI2MQ==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463655261", "bodyText": "never mind, I got it, this removes all occurrences of the position from ArrayList", "author": "ndrnour", "createdAt": "2020-07-31T14:47:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0NDU0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzY0NjI2Mg==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r463646262", "bodyText": "make it private", "author": "ndrnour", "createdAt": "2020-07-31T14:31:59Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/actions/TapAtAction.kt", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2018 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.catrobat.catroid.content.actions\n+\n+import android.util.Log\n+import com.badlogic.gdx.math.Vector2\n+import com.badlogic.gdx.scenes.scene2d.Stage\n+import com.badlogic.gdx.scenes.scene2d.actions.TemporalAction\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.formulaeditor.Formula\n+import org.catrobat.catroid.formulaeditor.InterpretationException\n+import org.catrobat.catroid.stage.StageActivity\n+\n+class TapAtAction : TemporalAction() {\n+\n+    var x = 0f\n+    var y = 0f\n+    var sprite: Sprite? = null\n+    lateinit var stage: Stage", "originalCommit": "d94f329a8223ec35aca30b6000ca45738296f079", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9c556b2ddc948fc3baf68ba03226f6a66b410545", "url": "https://github.com/Catrobat/Catroid/commit/9c556b2ddc948fc3baf68ba03226f6a66b410545", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-01T11:02:17Z", "type": "forcePushed"}, {"oid": "6b963400edfb64d1fa53fb08ce70f65770c29e3e", "url": "https://github.com/Catrobat/Catroid/commit/6b963400edfb64d1fa53fb08ce70f65770c29e3e", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-01T11:06:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU5MjQ5Nw==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r464592497", "bodyText": "change it to lateinit var sprite: Sprite", "author": "ndrnour", "createdAt": "2020-08-03T18:35:54Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/actions/TapAtAction.kt", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2018 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+package org.catrobat.catroid.content.actions\n+\n+import android.util.Log\n+import com.badlogic.gdx.math.Vector2\n+import com.badlogic.gdx.scenes.scene2d.Stage\n+import com.badlogic.gdx.scenes.scene2d.actions.TemporalAction\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.formulaeditor.Formula\n+import org.catrobat.catroid.formulaeditor.InterpretationException\n+import org.catrobat.catroid.stage.StageActivity\n+\n+class TapAtAction : TemporalAction() {\n+\n+    private lateinit var stage: Stage\n+    private lateinit var touchCoords: Vector2\n+    private var errorDetected: Boolean = false\n+    private var pointer: Int = 0\n+    private var x = 0f\n+    private var y = 0f\n+    var sprite: Sprite? = null", "originalCommit": "6b963400edfb64d1fa53fb08ce70f65770c29e3e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU5NDE0OA==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r464594148", "bodyText": "action.setSprite(sprite); should be called before  action.setPosition(x, y);", "author": "ndrnour", "createdAt": "2020-08-03T18:39:24Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/ActionFactory.java", "diffHunk": "@@ -1355,6 +1358,15 @@ public Action createTapAtAction(Sprite sprite, Formula x, Formula y) {\n \t\tTapAtAction action = Actions.action(TapAtAction.class);\n \t\taction.setPosition(x, y);\n \t\taction.setSprite(sprite);\n+\t\taction.setDuration(0);\n+\t\treturn action;\n+\t}\n+\n+\tpublic Action createTapForAction(Sprite sprite, Formula x, Formula y, Formula duration) {\n+\t\tTapAtAction action = Actions.action(TapAtAction.class);\n+\t\taction.setPosition(x, y);\n+\t\taction.setSprite(sprite);", "originalCommit": "6b963400edfb64d1fa53fb08ce70f65770c29e3e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDU5NDM1NA==", "url": "https://github.com/Catrobat/Catroid/pull/3706#discussion_r464594354", "bodyText": "action.setSprite(sprite); should be called before  action.setPosition(x, y);", "author": "ndrnour", "createdAt": "2020-08-03T18:39:53Z", "path": "catroid/src/main/java/org/catrobat/catroid/content/ActionFactory.java", "diffHunk": "@@ -1355,6 +1358,15 @@ public Action createTapAtAction(Sprite sprite, Formula x, Formula y) {\n \t\tTapAtAction action = Actions.action(TapAtAction.class);\n \t\taction.setPosition(x, y);\n \t\taction.setSprite(sprite);", "originalCommit": "6b963400edfb64d1fa53fb08ce70f65770c29e3e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8e95c3752836afd8f23db685d40609b37fc30a1b", "url": "https://github.com/Catrobat/Catroid/commit/8e95c3752836afd8f23db685d40609b37fc30a1b", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-04T13:20:17Z", "type": "forcePushed"}, {"oid": "e3c9be64d2617fe9c46e1b714724f16a2a0b4111", "url": "https://github.com/Catrobat/Catroid/commit/e3c9be64d2617fe9c46e1b714724f16a2a0b4111", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-08T12:46:32Z", "type": "forcePushed"}, {"oid": "5836045f50d8d2cd6e1b51378928fd4401a1eedc", "url": "https://github.com/Catrobat/Catroid/commit/5836045f50d8d2cd6e1b51378928fd4401a1eedc", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-08T13:17:36Z", "type": "commit"}, {"oid": "5836045f50d8d2cd6e1b51378928fd4401a1eedc", "url": "https://github.com/Catrobat/Catroid/commit/5836045f50d8d2cd6e1b51378928fd4401a1eedc", "message": "CATROID-612 new Touch at... for _ seconds brick\nnew TapForBrick\nedited TapAtAction to also include duration", "committedDate": "2020-08-08T13:17:36Z", "type": "forcePushed"}]}