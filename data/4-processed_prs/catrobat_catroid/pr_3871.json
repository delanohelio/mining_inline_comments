{"pr_number": 3871, "pr_title": "CATROID-816 Basic Catblocks Integration", "pr_createdAt": "2020-11-14T21:37:39Z", "pr_url": "https://github.com/Catrobat/Catroid/pull/3871", "timeline": [{"oid": "74e6a4b39175f7ca959d0984d1b29fbccf1e3963", "url": "https://github.com/Catrobat/Catroid/commit/74e6a4b39175f7ca959d0984d1b29fbccf1e3963", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T20:07:05Z", "type": "forcePushed"}, {"oid": "d1de6bcbbc2a08efd97b1cb7c466a2e047dffcd4", "url": "https://github.com/Catrobat/Catroid/commit/d1de6bcbbc2a08efd97b1cb7c466a2e047dffcd4", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T20:26:37Z", "type": "forcePushed"}, {"oid": "a46ba0a7c9a23a8040edd33faa263b23e38a2891", "url": "https://github.com/Catrobat/Catroid/commit/a46ba0a7c9a23a8040edd33faa263b23e38a2891", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:03:21Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "805ead8fee7d101aaa2ef6ef5727efb0c7beae3e", "url": "https://github.com/Catrobat/Catroid/commit/805ead8fee7d101aaa2ef6ef5727efb0c7beae3e", "message": "CATROID-750 fix TabLayout shown in ActionMode Bug", "committedDate": "2020-11-22T13:31:25Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "cafee1e013fd6c166c30d34c7dff7b7ea0305f8c", "url": "https://github.com/Catrobat/Catroid/commit/cafee1e013fd6c166c30d34c7dff7b7ea0305f8c", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-22T13:45:30Z", "type": "forcePushed"}, {"oid": "b749f05ef045bfbde3b25a80bba4223d17367207", "url": "https://github.com/Catrobat/Catroid/commit/b749f05ef045bfbde3b25a80bba4223d17367207", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-22T13:48:27Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "d8a8673c99cdc45839a50c2a2c5d471135f989e9", "url": "https://github.com/Catrobat/Catroid/commit/d8a8673c99cdc45839a50c2a2c5d471135f989e9", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-22T13:56:16Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "eca8f976214ec4a66b42b9f77a94360a326e96b7", "url": "https://github.com/Catrobat/Catroid/commit/eca8f976214ec4a66b42b9f77a94360a326e96b7", "message": "Merge branch 'develop' into CATROID-816", "committedDate": "2020-11-22T14:07:25Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "6ed81a3d1213a18014f1a901cd6797762b3b50cd", "url": "https://github.com/Catrobat/Catroid/commit/6ed81a3d1213a18014f1a901cd6797762b3b50cd", "message": "Merge branch 'develop' of github.com:Catrobat/Catroid into CATROID-816", "committedDate": "2020-11-22T14:17:58Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "a24d010931bac0e03c95654130529ec111ce241b", "url": "https://github.com/Catrobat/Catroid/commit/a24d010931bac0e03c95654130529ec111ce241b", "message": "Merge", "committedDate": "2020-11-22T14:52:11Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "102d8936399b0d3940ce6a10b07a5ff0f04bc607", "url": "https://github.com/Catrobat/Catroid/commit/102d8936399b0d3940ce6a10b07a5ff0f04bc607", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-22T15:18:23Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "8b2fc744abe0259e46f6c859706f790a48c6bf64", "url": "https://github.com/Catrobat/Catroid/commit/8b2fc744abe0259e46f6c859706f790a48c6bf64", "message": "Merge branch 'develop' of into CATROID-816", "committedDate": "2020-11-22T15:25:25Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "9cafd6ff9d73a0dce30b4d1e9facb155bc9da715", "url": "https://github.com/Catrobat/Catroid/commit/9cafd6ff9d73a0dce30b4d1e9facb155bc9da715", "message": "Merge branch 'develop' of github.com:Catrobat/Catroid into CATROID-816", "committedDate": "2020-11-22T15:33:48Z", "type": "forcePushed"}, {"oid": "8b2fc744abe0259e46f6c859706f790a48c6bf64", "url": "https://github.com/Catrobat/Catroid/commit/8b2fc744abe0259e46f6c859706f790a48c6bf64", "message": "Merge branch 'develop' of into CATROID-816", "committedDate": "2020-11-22T15:25:25Z", "type": "forcePushed"}, {"oid": "339998a4291ab96b78143d81223e42606618fe94", "url": "https://github.com/Catrobat/Catroid/commit/339998a4291ab96b78143d81223e42606618fe94", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-22T15:42:48Z", "type": "forcePushed"}, {"oid": "9d00911c16967d56853db06938fc39812cc74bb6", "url": "https://github.com/Catrobat/Catroid/commit/9d00911c16967d56853db06938fc39812cc74bb6", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-20T21:13:23Z", "type": "forcePushed"}, {"oid": "2e823ca6bffe48cdb7073e227318ab3248d10024", "url": "https://github.com/Catrobat/Catroid/commit/2e823ca6bffe48cdb7073e227318ab3248d10024", "message": "Merge pull request #3879 from Rawbat/MaintenanceTestFix\n\nMaintenance test fix", "committedDate": "2020-11-22T13:21:53Z", "type": "forcePushed"}, {"oid": "907833f9fcedac0ac070070bb9dbb9e5f2690463", "url": "https://github.com/Catrobat/Catroid/commit/907833f9fcedac0ac070070bb9dbb9e5f2690463", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-24T17:13:38Z", "type": "forcePushed"}, {"oid": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "url": "https://github.com/Catrobat/Catroid/commit/a48ae5c6b8bebc0904113ec601bb82da897254fb", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-25T11:29:30Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA4NzExMA==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531087110", "bodyText": "Delete this if already set by default config", "author": "juliajulie95", "createdAt": "2020-11-26T15:03:22Z", "path": "catroid/build.gradle", "diffHunk": "@@ -241,11 +243,14 @@ android {\n         debug {\n             buildConfigField \"boolean\", \"USE_ANDROID_LOCALES_FOR_SCREENSHOTS\", useAndroidLocales()\n             resValue \"string\", \"DEBUG_MODE\", \"true\"\n+            buildConfigField \"boolean\", \"FEATURE_CATBLOCKS_ENABLED\", \"true\"\n+            buildConfigField \"boolean\", \"FEATURE_CATBLOCKS_DEBUGABLE\", \"true\"\n             testCoverageEnabled = rootProject.hasProperty('enableCoverage')\n             signingConfig signingConfigs.debug\n         }\n \n         release {\n+            buildConfigField \"boolean\", \"FEATURE_CATBLOCKS_DEBUGABLE\", \"false\"", "originalCommit": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA4ODUzOQ==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531088539", "bodyText": "Hide action mode in looks and sounds", "author": "juliajulie95", "createdAt": "2020-11-26T15:05:50Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/ScriptFragment.java", "diffHunk": "@@ -263,6 +277,10 @@ public void onPause() {\n \tpublic void onPrepareOptionsMenu(Menu menu) {\n \t\tmenu.findItem(R.id.show_details).setVisible(false);\n \t\tmenu.findItem(R.id.rename).setVisible(false);\n+\t\tmenu.findItem(R.id.catblocks_reorder_scripts).setVisible(false);", "originalCommit": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA4OTA3Ng==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531089076", "bodyText": "deprecated, use getParentFragmentManager() if possible", "author": "juliajulie95", "createdAt": "2020-11-26T15:06:50Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/CatblocksScriptFragment.kt", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.ui.recyclerview.fragment\n+\n+import android.annotation.SuppressLint\n+import android.os.Build\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.Menu\n+import android.view.MenuItem\n+import android.view.View\n+import android.view.ViewGroup\n+import android.webkit.JavascriptInterface\n+import android.webkit.ValueCallback\n+import android.webkit.WebResourceRequest\n+import android.webkit.WebResourceResponse\n+import android.webkit.WebView\n+import android.webkit.WebViewClient\n+import androidx.annotation.RequiresApi\n+import androidx.appcompat.app.AppCompatActivity\n+import androidx.fragment.app.Fragment\n+import androidx.webkit.WebViewAssetLoader\n+import org.catrobat.catroid.BuildConfig\n+import org.catrobat.catroid.R\n+import org.catrobat.catroid.content.Project\n+import org.catrobat.catroid.content.Scene\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.io.XstreamSerializer\n+import org.catrobat.catroid.ui.BottomBar\n+import org.catrobat.catroid.ui.settingsfragments.SettingsFragment\n+import java.util.Locale\n+import java.util.UUID\n+\n+class CatblocksScriptFragment(\n+    private val currentProject: Project?,\n+    private val currentScene: Scene?,\n+    private val currentSprite: Sprite?,\n+    private val currentScriptIndex: Int\n+) : Fragment() {\n+\n+    private var webview: WebView? = null\n+\n+    companion object {\n+        val TAG: String = CatblocksScriptFragment::class.java.simpleName\n+    }\n+\n+    override fun onPrepareOptionsMenu(menu: Menu) {\n+        super.onPrepareOptionsMenu(menu)\n+        menu.removeItem(R.id.backpack)\n+        menu.removeItem(R.id.copy)\n+        menu.removeItem(R.id.delete)\n+        menu.removeItem(R.id.rename)\n+        menu.removeItem(R.id.show_details)\n+    }\n+\n+    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n+        if (item.itemId == R.id.catblocks) {\n+            SettingsFragment.setUseCatBlocks(context, false)\n+\n+            val fragmentTransaction = fragmentManager?.beginTransaction()", "originalCommit": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA5MDIxOQ==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531090219", "bodyText": "Naming", "author": "juliajulie95", "createdAt": "2020-11-26T15:08:46Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/CatblocksScriptFragment.kt", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.ui.recyclerview.fragment\n+\n+import android.annotation.SuppressLint\n+import android.os.Build\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.Menu\n+import android.view.MenuItem\n+import android.view.View\n+import android.view.ViewGroup\n+import android.webkit.JavascriptInterface\n+import android.webkit.ValueCallback\n+import android.webkit.WebResourceRequest\n+import android.webkit.WebResourceResponse\n+import android.webkit.WebView\n+import android.webkit.WebViewClient\n+import androidx.annotation.RequiresApi\n+import androidx.appcompat.app.AppCompatActivity\n+import androidx.fragment.app.Fragment\n+import androidx.webkit.WebViewAssetLoader\n+import org.catrobat.catroid.BuildConfig\n+import org.catrobat.catroid.R\n+import org.catrobat.catroid.content.Project\n+import org.catrobat.catroid.content.Scene\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.io.XstreamSerializer\n+import org.catrobat.catroid.ui.BottomBar\n+import org.catrobat.catroid.ui.settingsfragments.SettingsFragment\n+import java.util.Locale\n+import java.util.UUID\n+\n+class CatblocksScriptFragment(\n+    private val currentProject: Project?,\n+    private val currentScene: Scene?,\n+    private val currentSprite: Sprite?,\n+    private val currentScriptIndex: Int\n+) : Fragment() {\n+\n+    private var webview: WebView? = null\n+\n+    companion object {\n+        val TAG: String = CatblocksScriptFragment::class.java.simpleName\n+    }\n+\n+    override fun onPrepareOptionsMenu(menu: Menu) {\n+        super.onPrepareOptionsMenu(menu)\n+        menu.removeItem(R.id.backpack)\n+        menu.removeItem(R.id.copy)\n+        menu.removeItem(R.id.delete)\n+        menu.removeItem(R.id.rename)\n+        menu.removeItem(R.id.show_details)\n+    }\n+\n+    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n+        if (item.itemId == R.id.catblocks) {\n+            SettingsFragment.setUseCatBlocks(context, false)\n+\n+            val fragmentTransaction = fragmentManager?.beginTransaction()\n+            fragmentTransaction?.replace(\n+                R.id.fragment_container, ScriptFragment(currentProject),\n+                ScriptFragment.TAG\n+            )\n+            fragmentTransaction?.commit()\n+\n+            return true\n+        } else if (item.itemId == R.id.catblocks_reorder_scripts) {\n+            val callback = ReorderCallback()\n+            webview!!.evaluateJavascript(\"javascript:CatBlocks.reorderCurrentScripts();\", callback)\n+        }\n+        return super.onOptionsItemSelected(item)\n+    }\n+\n+    override fun onResume() {\n+        super.onResume()\n+\n+        val actionBar = (activity as AppCompatActivity?)!!.supportActionBar\n+        actionBar?.title = currentProject?.name\n+    }\n+\n+    override fun onCreateView(\n+        inflater: LayoutInflater,\n+        container: ViewGroup?,\n+        savedInstanceState: Bundle?\n+    ): View? {\n+        BottomBar.showBottomBar(activity)\n+        BottomBar.showPlayButton(activity)\n+        BottomBar.hideAddButton(activity)\n+\n+        setHasOptionsMenu(true)\n+\n+        val view = View.inflate(activity, R.layout.fragment_catblocks, null)\n+        val webView = view.findViewById<WebView>(R.id.catblocksWebView)\n+        initWebView(webView)\n+        this.webview = webView\n+        return view\n+    }\n+\n+    @SuppressLint(\"SetJavaScriptEnabled\")\n+    private fun initWebView(catblocksWebview: WebView) {", "originalCommit": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTA5MTUwNQ==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531091505", "bodyText": "Do we need this? Else disable catblocks for lower android versions", "author": "juliajulie95", "createdAt": "2020-11-26T15:10:50Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/CatblocksScriptFragment.kt", "diffHunk": "@@ -0,0 +1,252 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.ui.recyclerview.fragment\n+\n+import android.annotation.SuppressLint\n+import android.os.Build\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.Menu\n+import android.view.MenuItem\n+import android.view.View\n+import android.view.ViewGroup\n+import android.webkit.JavascriptInterface\n+import android.webkit.ValueCallback\n+import android.webkit.WebResourceRequest\n+import android.webkit.WebResourceResponse\n+import android.webkit.WebView\n+import android.webkit.WebViewClient\n+import androidx.annotation.RequiresApi\n+import androidx.appcompat.app.AppCompatActivity\n+import androidx.fragment.app.Fragment\n+import androidx.webkit.WebViewAssetLoader\n+import org.catrobat.catroid.BuildConfig\n+import org.catrobat.catroid.R\n+import org.catrobat.catroid.content.Project\n+import org.catrobat.catroid.content.Scene\n+import org.catrobat.catroid.content.Sprite\n+import org.catrobat.catroid.io.XstreamSerializer\n+import org.catrobat.catroid.ui.BottomBar\n+import org.catrobat.catroid.ui.settingsfragments.SettingsFragment\n+import java.util.Locale\n+import java.util.UUID\n+\n+class CatblocksScriptFragment(\n+    private val currentProject: Project?,\n+    private val currentScene: Scene?,\n+    private val currentSprite: Sprite?,\n+    private val currentScriptIndex: Int\n+) : Fragment() {\n+\n+    private var webview: WebView? = null\n+\n+    companion object {\n+        val TAG: String = CatblocksScriptFragment::class.java.simpleName\n+    }\n+\n+    override fun onPrepareOptionsMenu(menu: Menu) {\n+        super.onPrepareOptionsMenu(menu)\n+        menu.removeItem(R.id.backpack)\n+        menu.removeItem(R.id.copy)\n+        menu.removeItem(R.id.delete)\n+        menu.removeItem(R.id.rename)\n+        menu.removeItem(R.id.show_details)\n+    }\n+\n+    override fun onOptionsItemSelected(item: MenuItem): Boolean {\n+        if (item.itemId == R.id.catblocks) {\n+            SettingsFragment.setUseCatBlocks(context, false)\n+\n+            val fragmentTransaction = fragmentManager?.beginTransaction()\n+            fragmentTransaction?.replace(\n+                R.id.fragment_container, ScriptFragment(currentProject),\n+                ScriptFragment.TAG\n+            )\n+            fragmentTransaction?.commit()\n+\n+            return true\n+        } else if (item.itemId == R.id.catblocks_reorder_scripts) {\n+            val callback = ReorderCallback()\n+            webview!!.evaluateJavascript(\"javascript:CatBlocks.reorderCurrentScripts();\", callback)\n+        }\n+        return super.onOptionsItemSelected(item)\n+    }\n+\n+    override fun onResume() {\n+        super.onResume()\n+\n+        val actionBar = (activity as AppCompatActivity?)!!.supportActionBar\n+        actionBar?.title = currentProject?.name\n+    }\n+\n+    override fun onCreateView(\n+        inflater: LayoutInflater,\n+        container: ViewGroup?,\n+        savedInstanceState: Bundle?\n+    ): View? {\n+        BottomBar.showBottomBar(activity)\n+        BottomBar.showPlayButton(activity)\n+        BottomBar.hideAddButton(activity)\n+\n+        setHasOptionsMenu(true)\n+\n+        val view = View.inflate(activity, R.layout.fragment_catblocks, null)\n+        val webView = view.findViewById<WebView>(R.id.catblocksWebView)\n+        initWebView(webView)\n+        this.webview = webView\n+        return view\n+    }\n+\n+    @SuppressLint(\"SetJavaScriptEnabled\")\n+    private fun initWebView(catblocksWebview: WebView) {\n+        catblocksWebview.settings.javaScriptEnabled = true\n+\n+        if (BuildConfig.FEATURE_CATBLOCKS_DEBUGABLE) {\n+            WebView.setWebContentsDebuggingEnabled(true)\n+        }\n+\n+        val assetLoader: WebViewAssetLoader = WebViewAssetLoader.Builder()\n+            .addPathHandler(\"/assets/\", WebViewAssetLoader.AssetsPathHandler(requireActivity()))\n+            .addPathHandler(\"/res/\", WebViewAssetLoader.ResourcesPathHandler(requireActivity()))\n+            .build()\n+\n+        catblocksWebview.addJavascriptInterface(\n+            JSInterface(\n+                currentProject,\n+                currentScene,\n+                currentSprite,\n+                currentScriptIndex\n+            ), \"Android\"\n+        )\n+\n+        catblocksWebview.webViewClient = object : WebViewClient() {\n+            @RequiresApi(Build.VERSION_CODES.LOLLIPOP)", "originalCommit": "a48ae5c6b8bebc0904113ec601bb82da897254fb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "46177a2e352cf259d25404ff4ddf404b65e4b2f4", "url": "https://github.com/Catrobat/Catroid/commit/46177a2e352cf259d25404ff4ddf404b65e4b2f4", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-27T11:01:14Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTY1ODIyMw==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531658223", "bodyText": "Unused import", "author": "juliajulie95", "createdAt": "2020-11-27T15:20:14Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/CatblocksScriptFragment.kt", "diffHunk": "@@ -0,0 +1,251 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.ui.recyclerview.fragment\n+\n+import android.annotation.SuppressLint\n+import android.os.Build", "originalCommit": "46177a2e352cf259d25404ff4ddf404b65e4b2f4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTY1ODI4MQ==", "url": "https://github.com/Catrobat/Catroid/pull/3871#discussion_r531658281", "bodyText": "Unused import", "author": "juliajulie95", "createdAt": "2020-11-27T15:20:22Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/fragment/CatblocksScriptFragment.kt", "diffHunk": "@@ -0,0 +1,251 @@\n+/*\n+ * Catroid: An on-device visual programming system for Android devices\n+ * Copyright (C) 2010-2020 The Catrobat Team\n+ * (<http://developer.catrobat.org/credits>)\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the GNU Affero General Public License as\n+ * published by the Free Software Foundation, either version 3 of the\n+ * License, or (at your option) any later version.\n+ *\n+ * An additional term exception under section 7 of the GNU Affero\n+ * General Public License, version 3, is available at\n+ * http://developer.catrobat.org/license_additional_term\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * GNU Affero General Public License for more details.\n+ *\n+ * You should have received a copy of the GNU Affero General Public License\n+ * along with this program.  If not, see <http://www.gnu.org/licenses/>.\n+ */\n+\n+package org.catrobat.catroid.ui.recyclerview.fragment\n+\n+import android.annotation.SuppressLint\n+import android.os.Build\n+import android.os.Bundle\n+import android.view.LayoutInflater\n+import android.view.Menu\n+import android.view.MenuItem\n+import android.view.View\n+import android.view.ViewGroup\n+import android.webkit.JavascriptInterface\n+import android.webkit.ValueCallback\n+import android.webkit.WebResourceRequest\n+import android.webkit.WebResourceResponse\n+import android.webkit.WebView\n+import android.webkit.WebViewClient\n+import androidx.annotation.RequiresApi", "originalCommit": "46177a2e352cf259d25404ff4ddf404b65e4b2f4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9c206121058ae9a30f7b93c81e2935c2d26202a7", "url": "https://github.com/Catrobat/Catroid/commit/9c206121058ae9a30f7b93c81e2935c2d26202a7", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-27T20:12:37Z", "type": "commit"}, {"oid": "9c206121058ae9a30f7b93c81e2935c2d26202a7", "url": "https://github.com/Catrobat/Catroid/commit/9c206121058ae9a30f7b93c81e2935c2d26202a7", "message": "CATROID-816 basic Catblocks integration", "committedDate": "2020-11-27T20:12:37Z", "type": "forcePushed"}]}