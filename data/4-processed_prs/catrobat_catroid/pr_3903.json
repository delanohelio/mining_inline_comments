{"pr_number": 3903, "pr_title": "CATROID-523 Refactor textwatchers of dialog", "pr_createdAt": "2020-12-21T16:26:44Z", "pr_url": "https://github.com/Catrobat/Catroid/pull/3903", "timeline": [{"oid": "aeb5e875b5ad1e5d0dbf71739a57f7903c5e4593", "url": "https://github.com/Catrobat/Catroid/commit/aeb5e875b5ad1e5d0dbf71739a57f7903c5e4593", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-21T16:40:28Z", "type": "forcePushed"}, {"oid": "2d221144369f20321f5aa84ffa6e260522b543a6", "url": "https://github.com/Catrobat/Catroid/commit/2d221144369f20321f5aa84ffa6e260522b543a6", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-22T10:02:49Z", "type": "forcePushed"}, {"oid": "2b091118a9a4ea2e6a387abff008e7f702ed281c", "url": "https://github.com/Catrobat/Catroid/commit/2b091118a9a4ea2e6a387abff008e7f702ed281c", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-29T10:58:47Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIxMTQxOA==", "url": "https://github.com/Catrobat/Catroid/pull/3903#discussion_r550211418", "bodyText": "I think you don't need to override this function, as the same functionality is already provided by the base class.", "author": "mstoeg", "createdAt": "2020-12-30T14:24:00Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/fragment/AddUserDataToUserDefinedBrickFragment.java", "diffHunk": "@@ -95,8 +95,32 @@ public View onCreateView(@NotNull LayoutInflater inflater, ViewGroup container,\n \t\tTextView addUserDataUserBrickTextView = view.findViewById(R.id.brick_user_defined_add_user_data_description);\n \n \t\taddUserDataUserBrickEditText.setText(userBrickTextView.getText());\n+\t\tInputWatcher.TextWatcher textWatcher = new InputWatcher.TextWatcher() {\n+\t\t\t@Override\n+\t\t\tprotected boolean isNameUnique(String name) {", "originalCommit": "2b091118a9a4ea2e6a387abff008e7f702ed281c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIxMjQ2OA==", "url": "https://github.com/Catrobat/Catroid/pull/3903#discussion_r550212468", "bodyText": "Could you please use camelCase for TextWatcher to stay consistent here.", "author": "mstoeg", "createdAt": "2020-12-30T14:26:56Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/dialog/textwatcher/DuplicateInputTextwatcher.java", "diffHunk": "@@ -23,30 +23,27 @@\n \n package org.catrobat.catroid.ui.recyclerview.dialog.textwatcher;\n \n-import android.content.Context;\n+import org.catrobat.catroid.common.Nameable;\n \n-import org.catrobat.catroid.R;\n-import org.catrobat.catroid.ui.recyclerview.dialog.TextInputDialog;\n+import java.util.List;\n \n-import androidx.annotation.Nullable;\n+public class DuplicateInputTextwatcher<T extends Nameable> extends InputWatcher.TextWatcher {", "originalCommit": "2b091118a9a4ea2e6a387abff008e7f702ed281c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIxMzUzMA==", "url": "https://github.com/Catrobat/Catroid/pull/3903#discussion_r550213530", "bodyText": "Also please use camelCase here for OriginalScope.", "author": "mstoeg", "createdAt": "2020-12-30T14:30:12Z", "path": "catroid/src/main/java/org/catrobat/catroid/ui/recyclerview/dialog/textwatcher/DuplicateInputTextwatcher.java", "diffHunk": "@@ -23,30 +23,27 @@\n \n package org.catrobat.catroid.ui.recyclerview.dialog.textwatcher;\n \n-import android.content.Context;\n+import org.catrobat.catroid.common.Nameable;\n \n-import org.catrobat.catroid.R;\n-import org.catrobat.catroid.ui.recyclerview.dialog.TextInputDialog;\n+import java.util.List;\n \n-import androidx.annotation.Nullable;\n+public class DuplicateInputTextwatcher<T extends Nameable> extends InputWatcher.TextWatcher {\n \n-public class NonEmptyStringTextWatcher extends TextInputDialog.TextWatcher {\n+\tprivate List<T> originalScope;\n \n-\t@Nullable\n-\t@Override\n-\tpublic String validateInput(String input, Context context) {\n-\t\tString error = null;\n-\n-\t\tif (input.isEmpty()) {\n-\t\t\treturn context.getString(R.string.name_empty);\n-\t\t}\n-\n-\t\tinput = input.trim();\n-\n-\t\tif (input.isEmpty()) {\n-\t\t\terror = context.getString(R.string.name_consists_of_spaces_only);\n+\tpublic DuplicateInputTextwatcher(List<T> originalScope) {\n+\t\tthis.originalScope = originalScope;\n+\t\tgetScopeFromoriginalScope();\n+\t}\n+\tpublic void setOriginalScope(List<T> scope) {\n+\t\tthis.originalScope = scope;\n+\t\tgetScopeFromoriginalScope();\n+\t}\n+\tprivate void getScopeFromoriginalScope() {", "originalCommit": "2b091118a9a4ea2e6a387abff008e7f702ed281c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MDIyMTI2Mg==", "url": "https://github.com/Catrobat/Catroid/pull/3903#discussion_r550221262", "bodyText": "I think there is some kind of logic inversion here, which also leads to the failing testcases. If a project does exist it is NOT unique.", "author": "mstoeg", "createdAt": "2020-12-30T14:53:35Z", "path": "catroid/src/main/java/org/catrobat/catroid/merge/NewProjectNameTextWatcher.java", "diffHunk": "@@ -22,34 +22,14 @@\n  */\n package org.catrobat.catroid.merge;\n \n-import android.content.Context;\n-\n-import org.catrobat.catroid.R;\n import org.catrobat.catroid.common.Nameable;\n import org.catrobat.catroid.ui.recyclerview.dialog.ReplaceExistingProjectDialogFragment;\n-import org.catrobat.catroid.ui.recyclerview.dialog.TextInputDialog;\n-\n-import androidx.annotation.Nullable;\n+import org.catrobat.catroid.ui.recyclerview.dialog.textwatcher.InputWatcher;\n \n-public class NewProjectNameTextWatcher<T extends Nameable> extends TextInputDialog.TextWatcher {\n+public class NewProjectNameTextWatcher<T extends Nameable> extends InputWatcher.TextWatcher {\n \n-\t@Nullable\n \t@Override\n-\tpublic String validateInput(String input, Context context) {\n-\t\tString error = null;\n-\n-\t\tif (input.isEmpty()) {\n-\t\t\treturn context.getString(R.string.name_empty);\n-\t\t}\n-\n-\t\tinput = input.trim();\n-\n-\t\tif (input.isEmpty()) {\n-\t\t\terror = context.getString(R.string.name_consists_of_spaces_only);\n-\t\t} else if (ReplaceExistingProjectDialogFragment.projectExistsInDirectory(input)) {\n-\t\t\terror = context.getString(R.string.name_already_exists);\n-\t\t}\n-\n-\t\treturn error;\n+\tprotected boolean isNameUnique(String name) {\n+\t\treturn ReplaceExistingProjectDialogFragment.projectExistsInDirectory(name);", "originalCommit": "2b091118a9a4ea2e6a387abff008e7f702ed281c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9dfc0c16ac6aaf09194479861d62b11bc80e599e", "url": "https://github.com/Catrobat/Catroid/commit/9dfc0c16ac6aaf09194479861d62b11bc80e599e", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-31T11:10:15Z", "type": "forcePushed"}, {"oid": "6158ae32ec847ebd84dc4b76f3b7933d8dd9921d", "url": "https://github.com/Catrobat/Catroid/commit/6158ae32ec847ebd84dc4b76f3b7933d8dd9921d", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-31T11:20:27Z", "type": "forcePushed"}, {"oid": "fb288376f81bc723ad75dd7718bc80e97d3f9bf2", "url": "https://github.com/Catrobat/Catroid/commit/fb288376f81bc723ad75dd7718bc80e97d3f9bf2", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-31T11:23:08Z", "type": "commit"}, {"oid": "fb288376f81bc723ad75dd7718bc80e97d3f9bf2", "url": "https://github.com/Catrobat/Catroid/commit/fb288376f81bc723ad75dd7718bc80e97d3f9bf2", "message": "CATROID-523 Refactor textwatchers of dialog", "committedDate": "2020-12-31T11:23:08Z", "type": "forcePushed"}]}