{"pr_number": 4541, "pr_title": "Refactor native image config to avoid warnings", "pr_createdAt": "2020-11-18T15:33:34Z", "pr_url": "https://github.com/micronaut-projects/micronaut-core/pull/4541", "timeline": [{"oid": "25278118ada32bb2f42bae832f4c7097f4cd119c", "url": "https://github.com/micronaut-projects/micronaut-core/commit/25278118ada32bb2f42bae832f4c7097f4cd119c", "message": "Refactor native image config to avoid warnings", "committedDate": "2020-11-18T15:33:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526197178", "bodyText": "Why do you delete this?", "author": "ilopmar", "createdAt": "2020-11-18T15:53:04Z", "path": "graal/src/main/java/io/micronaut/graal/reflect/GraalTypeElementVisitor.java", "diffHunk": "@@ -261,16 +259,6 @@ private void generateNativeImageProperties(VisitorContext visitorContext) {\n         try {\n             String path = buildNativeImagePath(visitorContext);\n             String reflectFile = path + REFLECTION_CONFIG_JSON;\n-            String propsFile = path + NATIVE_IMAGE_PROPERTIES;\n-\n-            visitorContext.visitMetaInfFile(propsFile).ifPresent(gf -> {\n-                visitorContext.info(\"Writing \" + NATIVE_IMAGE_PROPERTIES + \" file to destination: \" + gf.getName());\n-                try (PrintWriter w = new PrintWriter(gf.openWriter())) {\n-                    w.println(\"Args = -H:ReflectionConfigurationResources=${.}/reflection-config.json\");\n-                } catch (IOException e) {\n-                    visitorContext.fail(\"Error writing \" + NATIVE_IMAGE_PROPERTIES + \": \" + e.getMessage(), null);\n-                }\n-            });", "originalCommit": "25278118ada32bb2f42bae832f4c7097f4cd119c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwMTY1Nw==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526201657", "bodyText": "if the file is named reflect-config.json it is automatically picked up. We were only generating this file to load our inconsistently named reflection-config.json file", "author": "graemerocher", "createdAt": "2020-11-18T15:57:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwNDYwMg==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526204602", "bodyText": "You are right. Then I think you can rename REFLECTION_CONFIG_JSON to REFLECT_CONFIG_JSON here https://github.com/micronaut-projects/micronaut-core/pull/4541/files#diff-a6f6eed2d556fc4571d32b10ec2a16d17cb98075c9e1b3ae0395176281cbb061R73\nFor the rest of the changes, everything looks good.", "author": "ilopmar", "createdAt": "2020-11-18T16:00:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjIwOTI4Mg==", "url": "https://github.com/micronaut-projects/micronaut-core/pull/4541#discussion_r526209282", "bodyText": "That is already done", "author": "graemerocher", "createdAt": "2020-11-18T16:06:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjE5NzE3OA=="}], "type": "inlineReview"}, {"oid": "20d44d38b3b8ff8f1e15eb1827610ce290d492be", "url": "https://github.com/micronaut-projects/micronaut-core/commit/20d44d38b3b8ff8f1e15eb1827610ce290d492be", "message": "fix tests", "committedDate": "2020-11-18T15:58:35Z", "type": "commit"}]}