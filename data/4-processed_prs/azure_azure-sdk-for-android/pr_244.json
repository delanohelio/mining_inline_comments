{"pr_number": 244, "pr_title": "Added public APIs for deleting blobs.", "pr_createdAt": "2020-06-13T01:49:10Z", "pr_url": "https://github.com/Azure/azure-sdk-for-android/pull/244", "timeline": [{"oid": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "url": "https://github.com/Azure/azure-sdk-for-android/commit/feb0690a4e64d58dea4b38cba26a2968820cb75d", "message": "Added a public API for deleting blobs.", "committedDate": "2020-06-13T01:44:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxMzE1NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441213154", "bodyText": "seems its JavaDoc for different API.", "author": "anuchandy", "createdAt": "2020-06-17T00:25:31Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk0OTE0Nw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441949147", "bodyText": "Thank you, I took the template from getBlobProperties and forgot to modify it.", "author": "vcolin7", "createdAt": "2020-06-18T03:34:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxMzE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxMzI1NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441213254", "bodyText": "Javadoc need to be fixed I think.", "author": "anuchandy", "createdAt": "2020-06-17T00:25:50Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxMzYwMg==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441213602", "bodyText": "Looks like this link \"(Set-Blob-Service-Properties.md)\" is invalid", "author": "anuchandy", "createdAt": "2020-06-17T00:27:08Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxMzgyNg==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441213826", "bodyText": "missing return", "author": "anuchandy", "createdAt": "2020-06-17T00:27:57Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data\n+     * is permanently removed from the storage account. Note that you continue to be charged for the soft-deleted\n+     * blob's storage until it is permanently removed. Use the List Blobs API and specify the \"include=deleted\" query\n+     * parameter to discover which blobs and snapshots have been soft deleted. You can then use the Undelete Blob API\n+     * to restore a soft-deleted blob. All other operations on a soft-deleted blob or snapshot causes the service to\n+     * return an HTTP status code of 404 (ResourceNotFound). If the storage account's automatic snapshot feature is\n+     * enabled, then, when a blob is deleted, an automatic snapshot is created. The blob becomes inaccessible\n+     * immediately. All other operations on the blob causes the service to return an HTTP status code of 404\n+     * (ResourceNotFound). You can access automatic snapshot using snapshot timestamp or version id. You can restore\n+     * the blob by calling Put or Copy Blob API with automatic snapshot as source. Deleting automatic snapshot\n+     * requires shared key or special SAS/RBAC permissions.\n+     *\n+     * @param containerName     The container name.\n+     * @param blobName          The blob name.\n+     * @param snapshot          The snapshot parameter is an opaque DateTime value that, when present, specifies the\n+     *                          blob snapshot to retrieve. For more information on working with blob snapshots, see &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob\"&gt;Creating a Snapshot of a Blob.&lt;/a&gt;.\n+     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n+     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n+     * @param leaseId           If specified, the operation only succeeds if the resource's lease is active and\n+     *                          matches this ID.\n+     * @param deleteSnapshots   Required if the blob has associated snapshots. Specify one of the following two\n+     *                          options: include: Delete the base blob and all of its snapshots. only: Delete only the blob's snapshots and not the blob itself. Possible values include: 'include', 'only'.\n+     * @param ifModifiedSince   Specify this header value to operate only on a blob if it has been modified since the\n+     *                          specified date/time.\n+     * @param ifUnmodifiedSince Specify this header value to operate only on a blob if it has not been modified since\n+     *                          the specified date/time.\n+     * @param ifMatch           Specify an ETag value to operate only on blobs with a matching value.\n+     * @param ifNoneMatch       Specify an ETag value to operate only on blobs without a matching value.\n+     * @param requestId         Provides a client-generated, opaque value with a 1 KB character limit that is\n+     *                          recorded in the analytics logs when storage analytics logging is enabled.\n+     */", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDE3OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441214178", "bodyText": "before this detailed doc for delete, it will be helpful to have a short doc indicating this API delete the blob?", "author": "anuchandy", "createdAt": "2020-06-17T00:29:22Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1MjcxNA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441952714", "bodyText": "I think you are right. I'll add a more brief description.", "author": "vcolin7", "createdAt": "2020-06-18T03:49:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDE3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDMwMA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441214300", "bodyText": "missing return", "author": "anuchandy", "createdAt": "2020-06-17T00:29:50Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data\n+     * is permanently removed from the storage account. Note that you continue to be charged for the soft-deleted\n+     * blob's storage until it is permanently removed. Use the List Blobs API and specify the \"include=deleted\" query\n+     * parameter to discover which blobs and snapshots have been soft deleted. You can then use the Undelete Blob API\n+     * to restore a soft-deleted blob. All other operations on a soft-deleted blob or snapshot causes the service to\n+     * return an HTTP status code of 404 (ResourceNotFound). If the storage account's automatic snapshot feature is\n+     * enabled, then, when a blob is deleted, an automatic snapshot is created. The blob becomes inaccessible\n+     * immediately. All other operations on the blob causes the service to return an HTTP status code of 404\n+     * (ResourceNotFound). You can access automatic snapshot using snapshot timestamp or version id. You can restore\n+     * the blob by calling Put or Copy Blob API with automatic snapshot as source. Deleting automatic snapshot\n+     * requires shared key or special SAS/RBAC permissions.\n+     *\n+     * @param containerName     The container name.\n+     * @param blobName          The blob name.\n+     * @param snapshot          The snapshot parameter is an opaque DateTime value that, when present, specifies the\n+     *                          blob snapshot to retrieve. For more information on working with blob snapshots, see &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob\"&gt;Creating a Snapshot of a Blob.&lt;/a&gt;.\n+     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n+     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n+     * @param leaseId           If specified, the operation only succeeds if the resource's lease is active and\n+     *                          matches this ID.\n+     * @param deleteSnapshots   Required if the blob has associated snapshots. Specify one of the following two\n+     *                          options: include: Delete the base blob and all of its snapshots. only: Delete only the blob's snapshots and not the blob itself. Possible values include: 'include', 'only'.\n+     * @param ifModifiedSince   Specify this header value to operate only on a blob if it has been modified since the\n+     *                          specified date/time.\n+     * @param ifUnmodifiedSince Specify this header value to operate only on a blob if it has not been modified since\n+     *                          the specified date/time.\n+     * @param ifMatch           Specify an ETag value to operate only on blobs with a matching value.\n+     * @param ifNoneMatch       Specify an ETag value to operate only on blobs without a matching value.\n+     * @param requestId         Provides a client-generated, opaque value with a 1 KB character limit that is\n+     *                          recorded in the analytics logs when storage analytics logging is enabled.\n+     */\n+    BlobDeleteResponse deleteWithResponse(String containerName,\n+                                          String blobName,\n+                                          String snapshot,\n+                                          Integer timeout,\n+                                          String version,\n+                                          String leaseId,\n+                                          DeleteSnapshotsOptionType deleteSnapshots,\n+                                          OffsetDateTime ifModifiedSince,\n+                                          OffsetDateTime ifUnmodifiedSince,\n+                                          String ifMatch,\n+                                          String ifNoneMatch,\n+                                          String requestId) {\n+        return storageBlobServiceClient.deleteWithResponse(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            version,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSince,\n+            ifUnmodifiedSince,\n+            ifMatch,\n+            ifNoneMatch,\n+            requestId);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data\n+     * is permanently removed from the storage account. Note that you continue to be charged for the soft-deleted\n+     * blob's storage until it is permanently removed. Use the List Blobs API and specify the \"include=deleted\" query\n+     * parameter to discover which blobs and snapshots have been soft deleted. You can then use the Undelete Blob API\n+     * to restore a soft-deleted blob. All other operations on a soft-deleted blob or snapshot causes the service to\n+     * return an HTTP status code of 404 (ResourceNotFound). If the storage account's automatic snapshot feature is\n+     * enabled, then, when a blob is deleted, an automatic snapshot is created. The blob becomes inaccessible\n+     * immediately. All other operations on the blob causes the service to return an HTTP status code of 404\n+     * (ResourceNotFound). You can access automatic snapshot using snapshot timestamp or version id. You can restore\n+     * the blob by calling Put or Copy Blob API with automatic snapshot as source. Deleting automatic snapshot\n+     * requires shared key or special SAS/RBAC permissions.\n+     *\n+     * @param containerName     The container name.\n+     * @param blobName          The blob name.\n+     * @param snapshot          The snapshot parameter is an opaque DateTime value that, when present, specifies the\n+     *                          blob snapshot to retrieve. For more information on working with blob snapshots, see &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob\"&gt;Creating a Snapshot of a Blob.&lt;/a&gt;.\n+     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n+     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n+     * @param leaseId           If specified, the operation only succeeds if the resource's lease is active and\n+     *                          matches this ID.\n+     * @param deleteSnapshots   Required if the blob has associated snapshots. Specify one of the following two\n+     *                          options: include: Delete the base blob and all of its snapshots. only: Delete only the blob's snapshots and not the blob itself. Possible values include: 'include', 'only'.\n+     * @param ifModifiedSince   Specify this header value to operate only on a blob if it has been modified since the\n+     *                          specified date/time.\n+     * @param ifUnmodifiedSince Specify this header value to operate only on a blob if it has not been modified since\n+     *                          the specified date/time.\n+     * @param ifMatch           Specify an ETag value to operate only on blobs with a matching value.\n+     * @param ifNoneMatch       Specify an ETag value to operate only on blobs without a matching value.\n+     * @param requestId         Provides a client-generated, opaque value with a 1 KB character limit that is\n+     *                          recorded in the analytics logs when storage analytics logging is enabled.\n+     * @param callback          Callback that receives the response.", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDQ3OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441214478", "bodyText": "a short description of API before this detailed description will be helpful", "author": "anuchandy", "createdAt": "2020-06-17T00:30:28Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data\n+     * is permanently removed from the storage account. Note that you continue to be charged for the soft-deleted\n+     * blob's storage until it is permanently removed. Use the List Blobs API and specify the \"include=deleted\" query\n+     * parameter to discover which blobs and snapshots have been soft deleted. You can then use the Undelete Blob API\n+     * to restore a soft-deleted blob. All other operations on a soft-deleted blob or snapshot causes the service to\n+     * return an HTTP status code of 404 (ResourceNotFound). If the storage account's automatic snapshot feature is\n+     * enabled, then, when a blob is deleted, an automatic snapshot is created. The blob becomes inaccessible\n+     * immediately. All other operations on the blob causes the service to return an HTTP status code of 404\n+     * (ResourceNotFound). You can access automatic snapshot using snapshot timestamp or version id. You can restore\n+     * the blob by calling Put or Copy Blob API with automatic snapshot as source. Deleting automatic snapshot\n+     * requires shared key or special SAS/RBAC permissions.\n+     *\n+     * @param containerName     The container name.\n+     * @param blobName          The blob name.\n+     * @param snapshot          The snapshot parameter is an opaque DateTime value that, when present, specifies the\n+     *                          blob snapshot to retrieve. For more information on working with blob snapshots, see &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob\"&gt;Creating a Snapshot of a Blob.&lt;/a&gt;.\n+     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n+     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n+     * @param leaseId           If specified, the operation only succeeds if the resource's lease is active and\n+     *                          matches this ID.\n+     * @param deleteSnapshots   Required if the blob has associated snapshots. Specify one of the following two\n+     *                          options: include: Delete the base blob and all of its snapshots. only: Delete only the blob's snapshots and not the blob itself. Possible values include: 'include', 'only'.\n+     * @param ifModifiedSince   Specify this header value to operate only on a blob if it has been modified since the\n+     *                          specified date/time.\n+     * @param ifUnmodifiedSince Specify this header value to operate only on a blob if it has not been modified since\n+     *                          the specified date/time.\n+     * @param ifMatch           Specify an ETag value to operate only on blobs with a matching value.\n+     * @param ifNoneMatch       Specify an ETag value to operate only on blobs without a matching value.\n+     * @param requestId         Provides a client-generated, opaque value with a 1 KB character limit that is\n+     *                          recorded in the analytics logs when storage analytics logging is enabled.\n+     */\n+    BlobDeleteResponse deleteWithResponse(String containerName,\n+                                          String blobName,\n+                                          String snapshot,\n+                                          Integer timeout,\n+                                          String version,\n+                                          String leaseId,\n+                                          DeleteSnapshotsOptionType deleteSnapshots,\n+                                          OffsetDateTime ifModifiedSince,\n+                                          OffsetDateTime ifUnmodifiedSince,\n+                                          String ifMatch,\n+                                          String ifNoneMatch,\n+                                          String requestId) {\n+        return storageBlobServiceClient.deleteWithResponse(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            version,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSince,\n+            ifUnmodifiedSince,\n+            ifMatch,\n+            ifNoneMatch,\n+            requestId);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDU3Ng==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441214576", "bodyText": "same as previous comment invalid link I guess.", "author": "anuchandy", "createdAt": "2020-06-17T00:30:46Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobClient.java", "diffHunk": "@@ -547,6 +551,161 @@ public ServiceCall commitBlockListWithRestResponse(String containerName,\n             tier, callback);\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */\n+    Void delete(String containerName,\n+                String blobName) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName);\n+    }\n+\n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @param callback      Callback that receives the response.\n+     */\n+    ServiceCall delete(String containerName,\n+                       String blobName,\n+                       Callback<Void> callback) {\n+        return storageBlobServiceClient.delete(containerName,\n+            blobName,\n+            callback);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data\n+     * is permanently removed from the storage account. Note that you continue to be charged for the soft-deleted\n+     * blob's storage until it is permanently removed. Use the List Blobs API and specify the \"include=deleted\" query\n+     * parameter to discover which blobs and snapshots have been soft deleted. You can then use the Undelete Blob API\n+     * to restore a soft-deleted blob. All other operations on a soft-deleted blob or snapshot causes the service to\n+     * return an HTTP status code of 404 (ResourceNotFound). If the storage account's automatic snapshot feature is\n+     * enabled, then, when a blob is deleted, an automatic snapshot is created. The blob becomes inaccessible\n+     * immediately. All other operations on the blob causes the service to return an HTTP status code of 404\n+     * (ResourceNotFound). You can access automatic snapshot using snapshot timestamp or version id. You can restore\n+     * the blob by calling Put or Copy Blob API with automatic snapshot as source. Deleting automatic snapshot\n+     * requires shared key or special SAS/RBAC permissions.\n+     *\n+     * @param containerName     The container name.\n+     * @param blobName          The blob name.\n+     * @param snapshot          The snapshot parameter is an opaque DateTime value that, when present, specifies the\n+     *                          blob snapshot to retrieve. For more information on working with blob snapshots, see &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/creating-a-snapshot-of-a-blob\"&gt;Creating a Snapshot of a Blob.&lt;/a&gt;.\n+     * @param timeout           The timeout parameter is expressed in seconds. For more information, see\n+     *                          &lt;a href=\"https://docs.microsoft.com/en-us/rest/api/storageservices/fileservices/setting-timeouts-for-blob-service-operations\"&gt;Setting Timeouts for Blob Service Operations.&lt;/a&gt;.\n+     * @param leaseId           If specified, the operation only succeeds if the resource's lease is active and\n+     *                          matches this ID.\n+     * @param deleteSnapshots   Required if the blob has associated snapshots. Specify one of the following two\n+     *                          options: include: Delete the base blob and all of its snapshots. only: Delete only the blob's snapshots and not the blob itself. Possible values include: 'include', 'only'.\n+     * @param ifModifiedSince   Specify this header value to operate only on a blob if it has been modified since the\n+     *                          specified date/time.\n+     * @param ifUnmodifiedSince Specify this header value to operate only on a blob if it has not been modified since\n+     *                          the specified date/time.\n+     * @param ifMatch           Specify an ETag value to operate only on blobs with a matching value.\n+     * @param ifNoneMatch       Specify an ETag value to operate only on blobs without a matching value.\n+     * @param requestId         Provides a client-generated, opaque value with a 1 KB character limit that is\n+     *                          recorded in the analytics logs when storage analytics logging is enabled.\n+     */\n+    BlobDeleteResponse deleteWithResponse(String containerName,\n+                                          String blobName,\n+                                          String snapshot,\n+                                          Integer timeout,\n+                                          String version,\n+                                          String leaseId,\n+                                          DeleteSnapshotsOptionType deleteSnapshots,\n+                                          OffsetDateTime ifModifiedSince,\n+                                          OffsetDateTime ifUnmodifiedSince,\n+                                          String ifMatch,\n+                                          String ifNoneMatch,\n+                                          String requestId) {\n+        return storageBlobServiceClient.deleteWithResponse(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            version,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSince,\n+            ifUnmodifiedSince,\n+            ifMatch,\n+            ifNoneMatch,\n+            requestId);\n+    }\n+\n+    /**\n+     * If the storage account's soft delete feature is disabled then, when a blob is deleted, it is permanently\n+     * removed from the storage account. If the storage account's soft delete feature is enabled, then, when a blob\n+     * is deleted, it is marked for deletion and becomes inaccessible immediately. However, the blob service retains\n+     * the blob or snapshot for the number of days specified by the DeleteRetentionPolicy section of [Storage service\n+     * properties] (Set-Blob-Service-Properties.md). After the specified number of days has passed, the blob's data", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNDg4Mg==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441214882", "bodyText": "doc seems for getProperties.", "author": "anuchandy", "createdAt": "2020-06-17T00:31:53Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -682,6 +686,194 @@ ServiceCall commitBlockListWithRestResponse(String containerName,\n         return new ServiceCall(callAndOptionalResult.getCall());\n     }\n \n+    /**\n+     * Reads the blob's metadata & properties.\n+     *\n+     * @param containerName The container name.\n+     * @param blobName      The blob name.\n+     * @return The blob's metadata.\n+     */", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxNzMzNw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441217337", "bodyText": "this should be like below:\nString strContent = readAsString(response.body());\ncallback.onFailure(new BlobStorageException(strContent, response.raw()));\nthis snippet is consistent with the pattern we follow in other APIs and also we shouldn't add our own text to the error message: ref: #239 (comment)", "author": "anuchandy", "createdAt": "2020-06-17T00:41:46Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {\n+                @Override\n+                public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() >= 200 && response.code() < 300) {\n+                            BlobDeleteHeaders typedHeaders = deserializeHeaders(response.headers(),\n+                                BlobDeleteHeaders.class);\n+\n+                            callback.onResponse(new BlobDeleteResponse(response.raw().request(),\n+                                response.code(),\n+                                response.headers(),\n+                                response.body(),\n+                                typedHeaders));\n+                        } else {\n+                            callback.onFailure(new BlobStorageException(\"Response failed with error code: \" + response.code(),\n+                                response.raw()));", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxODM0NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441218344", "bodyText": "The only valid response status code for a successful delete is 202, all other code 2XX status code should hit else case.", "author": "anuchandy", "createdAt": "2020-06-17T00:45:12Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {\n+                @Override\n+                public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() >= 200 && response.code() < 300) {", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxODgzNA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441218834", "bodyText": "Not sure why we check the range 200-300 for async delete and 200 for sync delete, as per swagger the only valid response status code for a successful delete is 202.", "author": "anuchandy", "createdAt": "2020-06-17T00:47:11Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {\n+                @Override\n+                public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() >= 200 && response.code() < 300) {\n+                            BlobDeleteHeaders typedHeaders = deserializeHeaders(response.headers(),\n+                                BlobDeleteHeaders.class);\n+\n+                            callback.onResponse(new BlobDeleteResponse(response.raw().request(),\n+                                response.code(),\n+                                response.headers(),\n+                                response.body(),\n+                                typedHeaders));\n+                        } else {\n+                            callback.onFailure(new BlobStorageException(\"Response failed with error code: \" + response.code(),\n+                                response.raw()));\n+                        }\n+                    } else {\n+                        String strContent = readAsString(response.errorBody());\n+\n+                        callback.onFailure(new BlobStorageException(strContent, response.raw()));\n+                    }\n+                }\n+\n+                @Override\n+                public void onFailure(@NonNull Call<Void> call, @NonNull Throwable t) {\n+                    callback.onFailure(t);\n+                }\n+            });\n+\n+            return new CallAndOptionalResult<>(call, null);\n+        } else {\n+            Response<Void> response = executeCall(call);\n+\n+            if (response.isSuccessful()) {\n+                if (response.code() == 200) {", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMjI5Nw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441222297", "bodyText": "The java SDK API is here for reference.", "author": "anuchandy", "createdAt": "2020-06-17T01:00:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxODgzNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIxOTEwMA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441219100", "bodyText": "String strContent = readAsString(response.body());\ncallback.onFailure(new BlobStorageException(strContent, response.raw()));", "author": "anuchandy", "createdAt": "2020-06-17T00:48:14Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {\n+                @Override\n+                public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() >= 200 && response.code() < 300) {\n+                            BlobDeleteHeaders typedHeaders = deserializeHeaders(response.headers(),\n+                                BlobDeleteHeaders.class);\n+\n+                            callback.onResponse(new BlobDeleteResponse(response.raw().request(),\n+                                response.code(),\n+                                response.headers(),\n+                                response.body(),\n+                                typedHeaders));\n+                        } else {\n+                            callback.onFailure(new BlobStorageException(\"Response failed with error code: \" + response.code(),\n+                                response.raw()));\n+                        }\n+                    } else {\n+                        String strContent = readAsString(response.errorBody());\n+\n+                        callback.onFailure(new BlobStorageException(strContent, response.raw()));\n+                    }\n+                }\n+\n+                @Override\n+                public void onFailure(@NonNull Call<Void> call, @NonNull Throwable t) {\n+                    callback.onFailure(t);\n+                }\n+            });\n+\n+            return new CallAndOptionalResult<>(call, null);\n+        } else {\n+            Response<Void> response = executeCall(call);\n+\n+            if (response.isSuccessful()) {\n+                if (response.code() == 200) {\n+                    BlobDeleteHeaders headers = deserializeHeaders(response.headers(),\n+                        BlobDeleteHeaders.class);\n+\n+                    BlobDeleteResponse result = new BlobDeleteResponse(response.raw().request(),\n+                        response.code(),\n+                        response.headers(),\n+                        response.body(),\n+                        headers);\n+\n+                    return new CallAndOptionalResult<>(call, result);\n+                } else {\n+                    throw new BlobStorageException(\"Response failed with error code: \" + response.code(),", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMDY5OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441220698", "bodyText": "\"Code generated by\" txt might be misleading for Android case, we shouldn't include it in our files I guess.", "author": "anuchandy", "createdAt": "2020-06-17T00:54:23Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/models/BlobDeleteHeaders.java", "diffHunk": "@@ -0,0 +1,171 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMDk4NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441220984", "bodyText": "nit; we shouldn't include the txt \"Code generated by..\"", "author": "anuchandy", "createdAt": "2020-06-17T00:55:36Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/models/BlobDeleteResponse.java", "diffHunk": "@@ -0,0 +1,32 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMTE1OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441221158", "bodyText": "same comment as above w.r.t auto-gen txt", "author": "anuchandy", "createdAt": "2020-06-17T00:56:10Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/models/DeleteSnapshotsOptionType.java", "diffHunk": "@@ -0,0 +1,55 @@\n+// Copyright (c) Microsoft Corporation. All rights reserved.\n+// Licensed under the MIT License.\n+// Code generated by Microsoft (R) AutoRest Code Generator.", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzIwMw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441223203", "bodyText": "This should be Call<ResponseBody> instead of  Call<Void>.", "author": "anuchandy", "createdAt": "2020-06-17T01:04:05Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzcwNQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441223705", "bodyText": "The reason for \"ResponseBody\" is, we want later read the body if the delete fails i.e. if service returns non-202.", "author": "anuchandy", "createdAt": "2020-06-17T01:06:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzIwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzMzOQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441223339", "bodyText": "return type should be Call <ResponseBody>", "author": "anuchandy", "createdAt": "2020-06-17T01:04:41Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1485,5 +1686,19 @@ T getResult() {\n                                            @Header(\"x-ms-encryption-key\") String encryptionKey,\n                                            @Header(\"x-ms-encryption-key-sha256\") String encryptionKeySha256,\n                                            @Header(\"x-ms-encryption-algorithm\") EncryptionAlgorithmType encryptionAlgorithm);\n+\n+        @DELETE(\"{containerName}/{blob}\")\n+        Call<Void> delete(@Path(\"containerName\") String containerName,", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1NTI2OA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441955268", "bodyText": "I assume we should also do this for APIs like getBlobProperties where we don't expect a body in a successful call, but there could be one in a failed call, right?", "author": "vcolin7", "createdAt": "2020-06-18T04:00:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk1OTA2OQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441959069", "bodyText": "Also, the reason I went with Void is because the Java API returns a Mono<Void> for the delete operation and the BlobDeleteResponse object.", "author": "vcolin7", "createdAt": "2020-06-18T04:17:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTk3OTg1Mw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441979853", "bodyText": "I guess this means we want to return a Void at the public API level but a ResponseBody at the service interface level. Is this correct?", "author": "vcolin7", "createdAt": "2020-06-18T05:41:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzMzOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyMTQyNw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r442421427", "bodyText": "I assume we should also do this for APIs like getBlobProperties where we don't expect a body in a successful call, but there could be one in a failed call, right?\nYes, it seems there is a similar bug in getBlobProperties as well, that needs to be fixed.\nI guess this means we want to return a Void at the public API level but a ResponseBody at the service interface level. Is this correct?\nright, like java SDK, from public API we return Void but in internal service interface we need ResponseBody so that we can read error body from it and throw.", "author": "anuchandy", "createdAt": "2020-06-18T18:28:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzMzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyMzc4NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441223784", "bodyText": "new retrofit2.Callback<ResponseBody>()", "author": "anuchandy", "createdAt": "2020-06-17T01:06:30Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTIyNDA2OQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/244#discussion_r441224069", "bodyText": "since we need to change from Call<Void> to Call<ResponseBody> here instead of response.body() it should be null.", "author": "anuchandy", "createdAt": "2020-06-17T01:07:43Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1335,6 +1446,96 @@ public void onFailure(Call<ResponseBody> call, Throwable t) {\n         }\n     }\n \n+    private CallAndOptionalResult<BlobDeleteResponse> deleteWithRestResponseIntern(String containerName,\n+                                                                                   String blobName,\n+                                                                                   String snapshot,\n+                                                                                   Integer timeout,\n+                                                                                   String version,\n+                                                                                   String leaseId,\n+                                                                                   DeleteSnapshotsOptionType deleteSnapshots,\n+                                                                                   OffsetDateTime ifModifiedSince,\n+                                                                                   OffsetDateTime ifUnmodifiedSince,\n+                                                                                   String ifMatch,\n+                                                                                   String ifNoneMatch,\n+                                                                                   String requestId,\n+                                                                                   Callback<BlobDeleteResponse> callback) {\n+        DateTimeRfc1123 ifModifiedSinceConverted = ifModifiedSince == null ? null :\n+            new DateTimeRfc1123(ifModifiedSince);\n+        DateTimeRfc1123 ifUnmodifiedSinceConverted = ifUnmodifiedSince == null ? null :\n+            new DateTimeRfc1123(ifUnmodifiedSince);\n+\n+        Call<Void> call = service.delete(containerName,\n+            blobName,\n+            snapshot,\n+            timeout,\n+            leaseId,\n+            deleteSnapshots,\n+            ifModifiedSinceConverted,\n+            ifUnmodifiedSinceConverted,\n+            ifMatch,\n+            ifNoneMatch,\n+            XMS_VERSION, // TODO: Replace with 'version'.\n+            requestId);\n+\n+        if (callback != null) {\n+            executeCall(call, new retrofit2.Callback<Void>() {\n+                @Override\n+                public void onResponse(@NonNull Call<Void> call, @NonNull Response<Void> response) {\n+                    if (response.isSuccessful()) {\n+                        if (response.code() >= 200 && response.code() < 300) {\n+                            BlobDeleteHeaders typedHeaders = deserializeHeaders(response.headers(),\n+                                BlobDeleteHeaders.class);\n+\n+                            callback.onResponse(new BlobDeleteResponse(response.raw().request(),\n+                                response.code(),\n+                                response.headers(),\n+                                response.body(),", "originalCommit": "feb0690a4e64d58dea4b38cba26a2968820cb75d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a9f066b7be1431d24271219b9b891d46739840e7", "url": "https://github.com/Azure/azure-sdk-for-android/commit/a9f066b7be1431d24271219b9b891d46739840e7", "message": "Addressed PR comments by @anuchandy.", "committedDate": "2020-06-18T05:53:49Z", "type": "commit"}, {"oid": "eaf169a066489c6f911c83e0a086e545bab1216d", "url": "https://github.com/Azure/azure-sdk-for-android/commit/eaf169a066489c6f911c83e0a086e545bab1216d", "message": "Modified the `getBlobProperties` API in the service interface to return a `ResponseBody` instead of `Void`.", "committedDate": "2020-06-18T07:26:34Z", "type": "commit"}, {"oid": "f5a4e7534c35804feadb7550823c065652a559e1", "url": "https://github.com/Azure/azure-sdk-for-android/commit/f5a4e7534c35804feadb7550823c065652a559e1", "message": "Added an API to undelete blobs.", "committedDate": "2020-06-18T07:51:56Z", "type": "commit"}, {"oid": "6a8bcb18998f73ad06718b1d5dd8f61d0de35c19", "url": "https://github.com/Azure/azure-sdk-for-android/commit/6a8bcb18998f73ad06718b1d5dd8f61d0de35c19", "message": "Removed the undelete API. Will create a separate PR for it.", "committedDate": "2020-06-19T21:28:13Z", "type": "commit"}, {"oid": "90b481a0998c4581dd62e88dadddf19e3d4dd207", "url": "https://github.com/Azure/azure-sdk-for-android/commit/90b481a0998c4581dd62e88dadddf19e3d4dd207", "message": "Merge branch 'dev' into delete-api", "committedDate": "2020-06-22T18:15:46Z", "type": "commit"}, {"oid": "c680a7877e9e53cdd50af0c73c3646bcc2cb4a16", "url": "https://github.com/Azure/azure-sdk-for-android/commit/c680a7877e9e53cdd50af0c73c3646bcc2cb4a16", "message": "Reverted the `getBlobProperties()` return type change from `Void` to `ResponseBody`. An OkHttp HEAD service call does not allow for a return type other than `Void`.", "committedDate": "2020-06-22T23:41:14Z", "type": "commit"}, {"oid": "22fdb0a61038aa128d002cd0e13058d5af85f3c1", "url": "https://github.com/Azure/azure-sdk-for-android/commit/22fdb0a61038aa128d002cd0e13058d5af85f3c1", "message": "Added unit tests for the delete API variants.", "committedDate": "2020-06-22T23:42:18Z", "type": "commit"}, {"oid": "0ab5d7dae614f08524e369aeca608cb570644dee", "url": "https://github.com/Azure/azure-sdk-for-android/commit/0ab5d7dae614f08524e369aeca608cb570644dee", "message": "Merge branch 'dev' into delete-api", "committedDate": "2020-06-23T00:18:19Z", "type": "commit"}]}