{"pr_number": 414, "pr_title": "Added support to automatically compute Md5", "pr_createdAt": "2020-10-20T20:55:06Z", "pr_url": "https://github.com/Azure/azure-sdk-for-android/pull/414", "timeline": [{"oid": "d249200cb078d0dd133519e3edfbb0e2e7b64b53", "url": "https://github.com/Azure/azure-sdk-for-android/commit/d249200cb078d0dd133519e3edfbb0e2e7b64b53", "message": "Added support to automatically compute Md5", "committedDate": "2020-10-20T20:53:49Z", "type": "commit"}, {"oid": "933b83a078180d3d101525c2e279a3f9ada90808", "url": "https://github.com/Azure/azure-sdk-for-android/commit/933b83a078180d3d101525c2e279a3f9ada90808", "message": "Ignore tests", "committedDate": "2020-10-20T20:55:41Z", "type": "commit"}, {"oid": "6a9fc99b7b2bac6108e982eda3cdd1e03108c2eb", "url": "https://github.com/Azure/azure-sdk-for-android/commit/6a9fc99b7b2bac6108e982eda3cdd1e03108c2eb", "message": "reverted change to enable fiddler", "committedDate": "2020-10-20T20:56:17Z", "type": "commit"}, {"oid": "c66270a9b4d0a4d6f1667057de1218359fc59bbc", "url": "https://github.com/Azure/azure-sdk-for-android/commit/c66270a9b4d0a4d6f1667057de1218359fc59bbc", "message": "Added support to specify if a user wants the library to compute md5", "committedDate": "2020-10-20T21:23:18Z", "type": "commit"}, {"oid": "18849828b3a07521a66ee99b09d549929658b3e3", "url": "https://github.com/Azure/azure-sdk-for-android/commit/18849828b3a07521a66ee99b09d549929658b3e3", "message": "Added ability to set compute md5. TODO: write instrumentation test", "committedDate": "2020-10-20T22:37:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTAyNQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r509695025", "bodyText": "I wonder why we would prefer to throw this as a RuntimeException instead of the original type.", "author": "vcolin7", "createdAt": "2020-10-21T21:04:04Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -1839,6 +1848,18 @@ private BlockBlobsStageBlockResponse stageBlockWithRestResponseIntern(String con\n         }\n         //\n         final String comp = \"block\";\n+\n+        if (computeMd5) {\n+            if (transactionalContentMD5 != null) {\n+                throw new IllegalArgumentException(\"'transactionalContentMD5' can not be set when 'computeMd5' is true.\");\n+            }\n+            try {\n+                transactionalContentMD5 = MessageDigest.getInstance(\"MD5\").digest(blockContent);\n+            } catch (NoSuchAlgorithmException e) {\n+                throw new RuntimeException(e);", "originalCommit": "c66270a9b4d0a4d6f1667057de1218359fc59bbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMxMzg1Mw==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r510313853", "bodyText": "This is what we do in Java usually. I think its just a remnant of some logging deficiency that used to exist and Im still not used to keeping the original type. Let me change to just throw the original exception.", "author": "gapra-msft", "createdAt": "2020-10-22T16:52:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTAyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDMxNDYxOA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r510314618", "bodyText": "Hmm if I change it to just throw its mad that Im not declaring the exception as part of the method type.", "author": "gapra-msft", "createdAt": "2020-10-22T16:53:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTAyNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDQ1NjcxMQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r510456711", "bodyText": "Ok, let's leave it like this for now :)", "author": "vcolin7", "createdAt": "2020-10-22T21:05:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTAyNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTk1NA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r509695954", "bodyText": "These two Javadoc entries should be swapped.", "author": "vcolin7", "createdAt": "2020-10-21T21:05:10Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/transfer/UploadRequest.java", "diffHunk": "@@ -63,14 +67,23 @@ String getContainerName() {\n     }\n \n     /**\n-     * Get the name of the target blob holding uploaded file.\n+     * Get whether or not the library should calculate the md5 and send it for the service to verify.\n      *\n-     * @return The blob name.\n+     * @return Whether or not the library should calculate the md5 and send it for the service to verify.\n      */\n     String getBlobName() {\n         return this.blobName;\n     }\n \n+    /**\n+     * Get the name of the target blob holding uploaded file.\n+     *\n+     * @return The blob name.\n+     */", "originalCommit": "c66270a9b4d0a4d6f1667057de1218359fc59bbc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5ODQwNA==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r509698404", "bodyText": "Whoops thanks for catching that", "author": "gapra-msft", "createdAt": "2020-10-21T21:08:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTY5NTk1NA=="}], "type": "inlineReview"}, {"oid": "c3c337a79fbb36caf4bd76cbd5a5dc36dcd2e0c5", "url": "https://github.com/Azure/azure-sdk-for-android/commit/c3c337a79fbb36caf4bd76cbd5a5dc36dcd2e0c5", "message": "Swapped javadoc", "committedDate": "2020-10-22T16:51:03Z", "type": "commit"}, {"oid": "84cbd521caa3b02fecc5d8c5077dd1a338eb3ad9", "url": "https://github.com/Azure/azure-sdk-for-android/commit/84cbd521caa3b02fecc5d8c5077dd1a338eb3ad9", "message": "Merge branch 'master' into storage/stageBlockMd5", "committedDate": "2020-10-27T16:24:02Z", "type": "commit"}, {"oid": "db753c2de4f8df1310628d205ae71a6c94fdf5d9", "url": "https://github.com/Azure/azure-sdk-for-android/commit/db753c2de4f8df1310628d205ae71a6c94fdf5d9", "message": "Merge branch 'master' into storage/stageBlockMd5", "committedDate": "2020-10-27T21:13:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzOTQ4MQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r513039481", "bodyText": "I wonder if this should be a Boolean instead of boolean?", "author": "rickle-msft", "createdAt": "2020-10-27T21:20:11Z", "path": "sdk/storage/azure-storage-blob/src/main/java/com/azure/android/storage/blob/StorageBlobServiceImpl.java", "diffHunk": "@@ -2197,6 +2205,7 @@ private BlockBlobsStageBlockResponse stageBlockWithRestResponseIntern(String con\n                                                                           byte[] blockContent,\n                                                                           byte[] transactionalContentMD5,\n                                                                           byte[] transactionalContentCrc64,\n+                                                                          boolean computeMd5,", "originalCommit": "db753c2de4f8df1310628d205ae71a6c94fdf5d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzOTkxNQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r513039915", "bodyText": "True, I think Boolean is easier for people", "author": "gapra-msft", "createdAt": "2020-10-27T21:21:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzOTQ4MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzA0NzMxOQ==", "url": "https://github.com/Azure/azure-sdk-for-android/pull/414#discussion_r513047319", "bodyText": "Fixed", "author": "gapra-msft", "createdAt": "2020-10-27T21:36:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzAzOTQ4MQ=="}], "type": "inlineReview"}, {"oid": "838fa67d653b82db7aee1ef5c9e68f62ffafe9a1", "url": "https://github.com/Azure/azure-sdk-for-android/commit/838fa67d653b82db7aee1ef5c9e68f62ffafe9a1", "message": "Changed computeMd5 to object boolean", "committedDate": "2020-10-27T21:28:17Z", "type": "commit"}, {"oid": "cd39ba9151c2c5c1274057dc8fb51e06e5f27fb5", "url": "https://github.com/Azure/azure-sdk-for-android/commit/cd39ba9151c2c5c1274057dc8fb51e06e5f27fb5", "message": "Changed another boolean to object", "committedDate": "2020-10-27T21:38:37Z", "type": "commit"}, {"oid": "6253e6d044c33b9749a88cebd0979711ed0c4c64", "url": "https://github.com/Azure/azure-sdk-for-android/commit/6253e6d044c33b9749a88cebd0979711ed0c4c64", "message": "Added another test", "committedDate": "2020-10-27T23:05:29Z", "type": "commit"}, {"oid": "feabe0ec4bf3d778c1e8db0e3334b4ed031753b6", "url": "https://github.com/Azure/azure-sdk-for-android/commit/feabe0ec4bf3d778c1e8db0e3334b4ed031753b6", "message": "Added tests to a diff method", "committedDate": "2020-10-27T23:11:13Z", "type": "commit"}]}