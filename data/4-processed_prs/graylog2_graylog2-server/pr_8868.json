{"pr_number": 8868, "pr_title": "Search Popovers and Tooltips", "pr_createdAt": "2020-08-25T15:30:18Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8868", "timeline": [{"oid": "8d5edfe2e455efeaae9cccf8786612cad0f29a17", "url": "https://github.com/Graylog2/graylog2-server/commit/8d5edfe2e455efeaae9cccf8786612cad0f29a17", "message": "Graph legend color popover", "committedDate": "2020-08-25T22:56:28Z", "type": "forcePushed"}, {"oid": "341ec014a04c713851c43e746f1fa1322512b2d5", "url": "https://github.com/Graylog2/graylog2-server/commit/341ec014a04c713851c43e746f1fa1322512b2d5", "message": "flow", "committedDate": "2020-08-27T14:39:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NDM0Mg==", "url": "https://github.com/Graylog2/graylog2-server/pull/8868#discussion_r478474342", "bodyText": "Maybe a conditional here, if defaultMode is set, no reason to do the useCurrentThemeMode?", "author": "kyleknighted", "createdAt": "2020-08-27T14:45:05Z", "path": "graylog2-web-interface/src/theme/GraylogThemeProvider.jsx", "diffHunk": "@@ -37,13 +37,13 @@ const createTheme = (mode, themeColors, changeMode): ThemeInterface => {\n   };\n };\n \n-const GraylogThemeProvider = ({ children }: Props) => {\n-  const colorScheme = usePrefersColorScheme();\n-  const [mode, setCurrentThemeMode] = useCurrentThemeMode(colorScheme);\n+const GraylogThemeProvider = ({ children, defaultMode }: Props) => {\n+  const [mode, setCurrentThemeMode] = useCurrentThemeMode();\n+  const themeMode = defaultMode ?? mode;", "originalCommit": "341ec014a04c713851c43e746f1fa1322512b2d5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1NTY4Ng==", "url": "https://github.com/Graylog2/graylog2-server/pull/8868#discussion_r481055686", "bodyText": "That would break the first rule for hooks, not calling them from the top-level/unconditionally imo. Might work right now, but could introduce subtle bugs in the future if GraylogThemeProvider gets more state.", "author": "dennisoelkers", "createdAt": "2020-09-01T11:04:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQ3NDM0Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1OTMzMQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8868#discussion_r481059331", "bodyText": "IMO this is a no-go for hooks, which should always be called unconditionally. Instead, we could pass in the defaultMode and use it accordingly.", "author": "dennisoelkers", "createdAt": "2020-09-01T11:12:00Z", "path": "graylog2-web-interface/src/theme/GraylogThemeProvider.jsx", "diffHunk": "@@ -37,13 +37,12 @@ const createTheme = (mode, themeColors, changeMode): ThemeInterface => {\n   };\n };\n \n-const GraylogThemeProvider = ({ children }: Props) => {\n-  const colorScheme = usePrefersColorScheme();\n-  const [mode, setCurrentThemeMode] = useCurrentThemeMode(colorScheme);\n+const GraylogThemeProvider = ({ children, defaultMode }: Props) => {\n+  const [mode, setCurrentThemeMode] = defaultMode ? [defaultMode, () => {}] : useCurrentThemeMode();", "originalCommit": "b3ad5160d61703d20d95b2dae958bc3cd47982aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1OTg4NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8868#discussion_r481059884", "bodyText": "Should we extract this into a styled component instead of using an inline style?", "author": "dennisoelkers", "createdAt": "2020-09-01T11:13:04Z", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchForm.jsx", "diffHunk": "@@ -43,7 +43,7 @@ const SavedSearchForm = (props: Props) => {\n                 placement=\"left\"\n                 target={target}>\n         <Popover title=\"Name of search\" id=\"saved-search-popover\">\n-          <form onSubmit={stopEvent}>\n+          <form onSubmit={stopEvent} style={{ width: '210px' }}>", "originalCommit": "b3ad5160d61703d20d95b2dae958bc3cd47982aa", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ab9fc0e7f1c8617ef485def53ab778d252ec33b5", "url": "https://github.com/Graylog2/graylog2-server/commit/ab9fc0e7f1c8617ef485def53ab778d252ec33b5", "message": "Search Popovers and Tooltips", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "ef6fe25dbe8432591650f8ee1aea57753f68f3ba", "url": "https://github.com/Graylog2/graylog2-server/commit/ef6fe25dbe8432591650f8ee1aea57753f68f3ba", "message": "Graph legend color popover", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "bf958aad4aa2bb1ace36ba2f319e5aeaeaf3ecaa", "url": "https://github.com/Graylog2/graylog2-server/commit/bf958aad4aa2bb1ace36ba2f319e5aeaeaf3ecaa", "message": "Revert some unnecessary changes and update theme in Popover & Tooltip", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "b91472c35250889c67c1ca3c172065e4de4e870c", "url": "https://github.com/Graylog2/graylog2-server/commit/b91472c35250889c67c1ca3c172065e4de4e870c", "message": "lint", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "e01833e03d0e9a09ebe28ee94d0213dbc7888d18", "url": "https://github.com/Graylog2/graylog2-server/commit/e01833e03d0e9a09ebe28ee94d0213dbc7888d18", "message": "flow", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "5cb6c63103c7c0230b383a8a765f4cc688bfc3de", "url": "https://github.com/Graylog2/graylog2-server/commit/5cb6c63103c7c0230b383a8a765f4cc688bfc3de", "message": "conditional mode", "committedDate": "2020-09-02T11:59:03Z", "type": "commit"}, {"oid": "96a0ca29fc97fcd2268bf82f8c62770f8774de2d", "url": "https://github.com/Graylog2/graylog2-server/commit/96a0ca29fc97fcd2268bf82f8c62770f8774de2d", "message": "Feedback from @dennisoelkers", "committedDate": "2020-09-02T12:44:53Z", "type": "commit"}, {"oid": "96a0ca29fc97fcd2268bf82f8c62770f8774de2d", "url": "https://github.com/Graylog2/graylog2-server/commit/96a0ca29fc97fcd2268bf82f8c62770f8774de2d", "message": "Feedback from @dennisoelkers", "committedDate": "2020-09-02T12:44:53Z", "type": "forcePushed"}]}