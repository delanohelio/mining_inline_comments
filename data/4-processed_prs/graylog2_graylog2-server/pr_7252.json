{"pr_number": 7252, "pr_title": "Update current view title, summary and description on view edit", "pr_createdAt": "2020-01-23T08:02:51Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7252", "timeline": [{"oid": "eda2e2c10d0a1c404fb6d0890f92c55be2ed78af", "url": "https://github.com/Graylog2/graylog2-server/commit/eda2e2c10d0a1c404fb6d0890f92c55be2ed78af", "message": "Update current view title, summary and description on view edit\n\n- implement new ViewActions update method\n- remove not needed title, description and summary ViewActions", "committedDate": "2020-01-23T09:49:10Z", "type": "forcePushed"}, {"oid": "920eb9d55c394cb0ffc491e76ecb9b6f8c7ddd00", "url": "https://github.com/Graylog2/graylog2-server/commit/920eb9d55c394cb0ffc491e76ecb9b6f8c7ddd00", "message": "Update current view title, summary and description on view edit\n\n- implement new ViewActions update method\n- remove not needed title, description and summary ViewActions", "committedDate": "2020-01-23T09:52:48Z", "type": "commit"}, {"oid": "6927ab16175416638a5ea1475a031cfdd037c5ae", "url": "https://github.com/Graylog2/graylog2-server/commit/6927ab16175416638a5ea1475a031cfdd037c5ae", "message": "Fix OnSaveView test", "committedDate": "2020-01-23T10:09:36Z", "type": "commit"}, {"oid": "6927ab16175416638a5ea1475a031cfdd037c5ae", "url": "https://github.com/Graylog2/graylog2-server/commit/6927ab16175416638a5ea1475a031cfdd037c5ae", "message": "Fix OnSaveView test", "committedDate": "2020-01-23T10:09:36Z", "type": "forcePushed"}, {"oid": "78e577385396d37297e96763cfc8ad3f6aa8de10", "url": "https://github.com/Graylog2/graylog2-server/commit/78e577385396d37297e96763cfc8ad3f6aa8de10", "message": "Remove empty line", "committedDate": "2020-01-23T10:16:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzNTI2NQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7252#discussion_r370035265", "bodyText": "Do you prefer using the view title, returned from the database, or the initial view title we passed to the onSaveViewAction?", "author": "linuspahl", "createdAt": "2020-01-23T10:20:31Z", "path": "graylog2-web-interface/src/views/logic/views/OnSaveViewAction.js", "diffHunk": "@@ -1,8 +1,11 @@\n import UserNotification from 'util/UserNotification';\n import { ViewManagementActions } from 'views/stores/ViewManagementStore';\n+import { ViewActions } from 'views/stores/ViewStore';\n \n-export default (view) => {\n-  return ViewManagementActions.update(view)\n-    .then(() => UserNotification.success(`Saving view \"${view.title}\" was successful!`, 'Success!'))\n-    .catch(error => UserNotification.error(`Saving view failed: ${error}`, 'Error!'));\n+export default (newView) => {\n+  return ViewActions.update(newView).then(({ view }) => {\n+    return ViewManagementActions.update(view);\n+  }).then(({ title }) => {\n+    return UserNotification.success(`Saving view \"${title}\" was successful!`, 'Success!');", "originalCommit": "78e577385396d37297e96763cfc8ad3f6aa8de10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "863d3e64872f1ddb349432f0103089cc04f243a1", "url": "https://github.com/Graylog2/graylog2-server/commit/863d3e64872f1ddb349432f0103089cc04f243a1", "message": "Remove empty line", "committedDate": "2020-01-23T10:21:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDAzNjY1OQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7252#discussion_r370036659", "bodyText": "I am not sure if this action should return the ViewStoreState or just the View. ViewManagementActions.update returns only the view, but I decided to return the ViewStoreState, to unify the type of the return value with `ViewActions.create``", "author": "linuspahl", "createdAt": "2020-01-23T10:23:33Z", "path": "graylog2-web-interface/src/views/stores/ViewStore.js", "diffHunk": "@@ -27,30 +27,26 @@ export type ViewStoreState = {\n \n type ViewActionsType = RefluxActions<{\n   create: (ViewType, ?string) => Promise<ViewStoreState>,\n-  description: (string) => Promise<ViewStoreState>,\n   load: (View, ?boolean) => Promise<ViewStoreState>,\n   properties: (Properties) => Promise<void>,\n   search: (Search) => Promise<View>,\n   selectQuery: (string) => Promise<string>,\n   state: (ViewState) => Promise<View>,\n-  summary: (string) => Promise<void>,\n-  title: (string) => Promise<void>,\n+  update: (View) => Promise<ViewStoreState>,", "originalCommit": "78e577385396d37297e96763cfc8ad3f6aa8de10", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}