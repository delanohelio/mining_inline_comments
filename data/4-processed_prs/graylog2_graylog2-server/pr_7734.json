{"pr_number": 7734, "pr_title": "Remove query_string from queries when exporting search to dashboard", "pr_createdAt": "2020-03-23T15:09:05Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7734", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjUyNTUxNw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7734#discussion_r396525517", "bodyText": "With these changes the search -> query equals the query we create, on a normal dashboard creation. In both cases the query has its own timerange. I thought about removing the timerange as well, but it is a required attribute and because every widget has its own timerange, this will not result in any problems.", "author": "linuspahl", "createdAt": "2020-03-23T15:12:41Z", "path": "graylog2-web-interface/src/views/logic/views/ViewTransformer.js", "diffHunk": "@@ -30,11 +30,17 @@ const ViewTransformer = (searchView: View): View => {\n       .widgets(widgets)\n       .build();\n   });\n+  // Remove query string attached to the existing search query\n+  const newQueries = searchView.search.queries.map(\n+    query => query.toBuilder().query({ ...query.query, query_string: '' }).build(),\n+  );\n+  const newSearch = searchView.search.toBuilder().queries(newQueries).build();", "originalCommit": "4a62f1d6063e7b93180b4b0f130e6b48aeff86b2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "670e0b148bc25ed222b832d51875ecbcc5db6bc7", "url": "https://github.com/Graylog2/graylog2-server/commit/670e0b148bc25ed222b832d51875ecbcc5db6bc7", "message": "Remove query_string from queries when exporting search to dashboard", "committedDate": "2020-03-25T08:45:05Z", "type": "commit"}, {"oid": "f2824b3ced62bf22a261ee3125b2867ce7b3db6f", "url": "https://github.com/Graylog2/graylog2-server/commit/f2824b3ced62bf22a261ee3125b2867ce7b3db6f", "message": "Improve readability adn add comment", "committedDate": "2020-03-25T08:45:05Z", "type": "commit"}, {"oid": "f2824b3ced62bf22a261ee3125b2867ce7b3db6f", "url": "https://github.com/Graylog2/graylog2-server/commit/f2824b3ced62bf22a261ee3125b2867ce7b3db6f", "message": "Improve readability adn add comment", "committedDate": "2020-03-25T08:45:05Z", "type": "forcePushed"}]}