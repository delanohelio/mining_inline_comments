{"pr_number": 7215, "pr_title": "Improve form validation for dashboard full screen config modal", "pr_createdAt": "2020-01-17T09:42:30Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7215", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1ODQ1MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7215#discussion_r368458450", "bodyText": "When the value falsy is you set the refreshInterval to that? Why not to 0 or a other default value?", "author": "kmerz", "createdAt": "2020-01-20T09:59:00Z", "path": "graylog2-web-interface/src/views/components/dashboard/BigDisplayModeConfiguration.jsx", "diffHunk": "@@ -47,50 +47,56 @@ const ConfigurationModal = ({ onSave, onCancel, view }: ConfigurationModalProps)\n \n   return (\n     <Modal show bsSize=\"large\" onHide={onCancel}>\n-      <Modal.Header closeButton>\n-        <Modal.Title>Configuring Full Screen</Modal.Title>\n-      </Modal.Header>\n-      <Modal.Body>\n-        <Input id=\"refresh-interval\"\n-               type=\"number\"\n-               name=\"refresh-interval\"\n-               label=\"Refresh Interval\"\n-               help=\"After how many seconds should the dashboard refresh?\"\n-               onChange={({ target: { value } }) => setRefreshInterval(Number.parseInt(value, 10))}\n-               required\n-               value={refreshInterval} />\n-\n-        <FormGroup>\n-          <ControlLabel>Tabs</ControlLabel>\n-          <ul>\n-            {availableTabs.map(([idx, title]) => (\n-              <li key={`${idx}-${title}`}>\n-                <Checkbox inline\n-                          checked={queryTabs.includes(idx)}\n-                          onChange={event => (event.target.checked ? addQueryTab(idx) : removeQueryTab(idx))}>\n-                  {title}\n-                </Checkbox>\n-              </li>\n-            ))}\n-          </ul>\n-          <HelpBlock>\n+      <form onSubmit={_onSave} data-testid=\"display-mode-config-form\">\n+        <Modal.Header closeButton>\n+          <Modal.Title>Configuring Full Screen</Modal.Title>\n+        </Modal.Header>\n+        <Modal.Body>\n+          <Input id=\"refresh-interval\"\n+                 type=\"number\"\n+                 min=\"1\"\n+                 name=\"refresh-interval\"\n+                 label=\"Refresh Interval\"\n+                 help=\"After how many seconds should the dashboard refresh?\"\n+                 onChange={({ target: { value } }) => setRefreshInterval(value ? Number.parseInt(value, 10) : value)}", "originalCommit": "60f939ea960d60d3864e23397a9f57f3a33c6457", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "a780bb9c28d06311e170908ea8555724d33d6441", "url": "https://github.com/Graylog2/graylog2-server/commit/a780bb9c28d06311e170908ea8555724d33d6441", "message": "Improve form validation for dashboard full screen config modal\n\n* Enable HTML form validation by wrapping inputs in HTML form\n* Only allow refresh and cycle interval greater than one\n* Convert cycle interval to a number before updating the component state\n* Prevent NaN error for empty number inputs", "committedDate": "2020-01-20T11:02:52Z", "type": "commit"}, {"oid": "794ea8b717c73fe2e7daf77e45acb54258ecde3c", "url": "https://github.com/Graylog2/graylog2-server/commit/794ea8b717c73fe2e7daf77e45acb54258ecde3c", "message": "Fixing form submit for BigDisplayModeConfiguration tests", "committedDate": "2020-01-20T11:02:52Z", "type": "commit"}, {"oid": "794ea8b717c73fe2e7daf77e45acb54258ecde3c", "url": "https://github.com/Graylog2/graylog2-server/commit/794ea8b717c73fe2e7daf77e45acb54258ecde3c", "message": "Fixing form submit for BigDisplayModeConfiguration tests", "committedDate": "2020-01-20T11:02:52Z", "type": "forcePushed"}, {"oid": "18bff3e512d553225ee2240642dbf7b84cdc8d06", "url": "https://github.com/Graylog2/graylog2-server/commit/18bff3e512d553225ee2240642dbf7b84cdc8d06", "message": "Add tests for dashboard display mode refresh and cycle interval values", "committedDate": "2020-01-20T11:44:15Z", "type": "commit"}]}