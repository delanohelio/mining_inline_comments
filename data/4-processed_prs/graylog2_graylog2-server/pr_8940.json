{"pr_number": 8940, "pr_title": "Add shared form helper components, e.g. to wrap the common Input with a formik Field.", "pr_createdAt": "2020-09-09T10:22:07Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8940", "timeline": [{"oid": "8b22eccf99fade81e03ac78e150c51d578e0577a", "url": "https://github.com/Graylog2/graylog2-server/commit/8b22eccf99fade81e03ac78e150c51d578e0577a", "message": "Add FormikInput, FormikFormGroup and ReadOnlyFormGroup", "committedDate": "2020-09-09T08:46:21Z", "type": "commit"}, {"oid": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "url": "https://github.com/Graylog2/graylog2-server/commit/254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "message": "Add FormikInput test", "committedDate": "2020-09-09T10:04:51Z", "type": "commit"}, {"oid": "d7cc99d19f68400628597e391e6b9550cd52dc0e", "url": "https://github.com/Graylog2/graylog2-server/commit/d7cc99d19f68400628597e391e6b9550cd52dc0e", "message": "Add JSDoc comments", "committedDate": "2020-09-09T10:19:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NDI1Nw==", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r488444257", "bodyText": "If you start with {...rest} you can never overwrite all the following props, is that intended?", "author": "Gaya", "createdAt": "2020-09-15T07:24:42Z", "path": "graylog2-web-interface/src/components/common/FormikFormGroup.jsx", "diffHunk": "@@ -0,0 +1,31 @@\n+// @flow strict\n+import * as React from 'react';\n+\n+import FormikInput from './FormikInput';\n+\n+type Props = {\n+  label: string,\n+  name: string,\n+  type?: string,\n+  help?: string,\n+  validate?: (string) => ?string,\n+};\n+\n+const FormikFormGroup = ({ label, name, type, help, validate, ...rest }: Props) => (\n+  <FormikInput {...rest}", "originalCommit": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMxMzA4MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r489313080", "bodyText": "In this case I have to structure it like that, otherwise flow complains:\nCannot spread props because Flow cannot determine a type for  props [1].  rest of object pattern [2] is inexact, so it may contain valuewith a type that conflicts withvalue's definition in  props [1]. Try making  rest of object pattern [2] exact.", "author": "linuspahl", "createdAt": "2020-09-16T09:54:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NDI1Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NTUwNg==", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r488445506", "bodyText": "You're only rendering text here in a container that looks like a form input. Maybe an <input disabled /> would work better?", "author": "Gaya", "createdAt": "2020-09-15T07:26:38Z", "path": "graylog2-web-interface/src/components/common/ReadOnlyFormGroup.jsx", "diffHunk": "@@ -0,0 +1,63 @@\n+// @flow strict\n+import * as React from 'react';\n+import styled, { css, type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { Col, Row, HelpBlock } from 'components/graylog';\n+import Icon from 'components/common/Icon';\n+\n+type Props = {\n+  label: React.Node,\n+  value: ?mixed,\n+  help?: string,\n+};\n+\n+const ValueCol = styled(Col)`\n+  padding-top: 7px;\n+`;\n+\n+const LabelCol = styled(ValueCol)(({ theme }) => css`\n+  font-weight: bold;\n+\n+  @media (min-width: ${theme.breakpoints.min.md}) {\n+    text-align: right;\n+  }\n+`);\n+\n+const BooleanIcon: StyledComponent<{value?: boolean}, ThemeInterface, Icon> = styled(Icon)(({ theme, value }) => `\n+  color: ${value ? theme.colors.variant.success : theme.colors.variant.danger};\n+`);\n+\n+const BooleanValue = ({ value }: { value: boolean }) => (\n+  <><BooleanIcon name={value ? 'check-circle' : 'times-circle'} value={value} /> {value ? 'yes' : 'no'}</>\n+);\n+\n+const readableValue = (value: $PropertyType<Props, 'value'>) => {\n+  if (typeof value === 'boolean') {\n+    return <BooleanValue value={value} />;\n+  }\n+\n+  if (value) {\n+    return value;\n+  }\n+\n+  return '-';\n+};\n+\n+const ReadOnlyFormGroup = ({ label, value, help }: Props) => (\n+  <Row>\n+    <LabelCol sm={3}>\n+      {label}\n+    </LabelCol>\n+    <ValueCol sm={9}>\n+      {readableValue(value)}", "originalCommit": "254595e41c3cb54b9933a38acbc7a70dd91c2cc1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4OTMxNjQzNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8940#discussion_r489316435", "bodyText": "In the context of the screenshot I posted, a disabled input would probably be the better option. But we will mainly use this component on a details pages where we just need this form group column and label styling. On these pages I prefer to display just text instead of a disabled input.", "author": "linuspahl", "createdAt": "2020-09-16T09:59:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0NTUwNg=="}], "type": "inlineReview"}, {"oid": "855443a69546cdab767272ce8da0628c2362ed5d", "url": "https://github.com/Graylog2/graylog2-server/commit/855443a69546cdab767272ce8da0628c2362ed5d", "message": "Remove not needed FormikInput error message", "committedDate": "2020-09-16T10:00:20Z", "type": "commit"}]}