{"pr_number": 8803, "pr_title": "Permissions / management UI improvements", "pr_createdAt": "2020-08-14T13:29:05Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8803", "timeline": [{"oid": "912b577abf2c85f785c49bbd5bcb2bbbee9d1ed1", "url": "https://github.com/Graylog2/graylog2-server/commit/912b577abf2c85f785c49bbd5bcb2bbbee9d1ed1", "message": "Fix EntityShareModal GranteesList collaborators list header alignment", "committedDate": "2020-08-14T11:49:23Z", "type": "commit"}, {"oid": "47b8636cfc4bf3f08a4562bc1f7e38757901ae3e", "url": "https://github.com/Graylog2/graylog2-server/commit/47b8636cfc4bf3f08a4562bc1f7e38757901ae3e", "message": "Adjust EntityShareModal spacing", "committedDate": "2020-08-14T11:55:38Z", "type": "commit"}, {"oid": "b77d688ed4eee5b54ae607ead18fc66977c06bf9", "url": "https://github.com/Graylog2/graylog2-server/commit/b77d688ed4eee5b54ae607ead18fc66977c06bf9", "message": "Add info for EntityShareModal if entity has no collaborators", "committedDate": "2020-08-14T12:15:11Z", "type": "commit"}, {"oid": "d5a22ce869c5f23d209e5ab930cad60b70c28e4a", "url": "https://github.com/Graylog2/graylog2-server/commit/d5a22ce869c5f23d209e5ab930cad60b70c28e4a", "message": "Use PropertyType for EntityShareModal prop type definitions", "committedDate": "2020-08-14T12:22:47Z", "type": "commit"}, {"oid": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "url": "https://github.com/Graylog2/graylog2-server/commit/e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "message": "Remove client address from users overview popover and only display it for active users", "committedDate": "2020-08-14T13:11:24Z", "type": "commit"}, {"oid": "0fc475af429c8779be41a36c979735fc1810b7b7", "url": "https://github.com/Graylog2/graylog2-server/commit/0fc475af429c8779be41a36c979735fc1810b7b7", "message": "Update snapshots", "committedDate": "2020-08-14T13:26:18Z", "type": "commit"}, {"oid": "8066d85823026b14520916bb5267f38b63a94275", "url": "https://github.com/Graylog2/graylog2-server/commit/8066d85823026b14520916bb5267f38b63a94275", "message": "Do not display initital role in user create role select and add role desc", "committedDate": "2020-08-14T14:26:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ0MzQwNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#discussion_r471443405", "bodyText": "We only wanted to remove the client address if the user was not logged in.", "author": "kmerz", "createdAt": "2020-08-17T12:26:49Z", "path": "graylog2-web-interface/src/components/users/UsersOverview/UserOverviewItem/LoggedInCell.jsx", "diffHunk": "@@ -20,19 +19,22 @@ const Td: StyledComponent<{}, ThemeInterface, HTMLTableCellElement> = styled.td`\n   text-align: right;\n `;\n \n-const LoggedInCell = ({ lastActivity, clientAddress, sessionActive }: Props) => (\n+const LoggedInInfo = ({ lastActivity }: { lastActivity: $PropertyType<UserOverview, 'lastActivity'> }) => (\n+  <OverlayTrigger trigger={['hover', 'focus']}\n+                  placement=\"right\"\n+                  overlay={(\n+                    <Popover id=\"session-badge-details\" title=\"Logged in\">\n+                      <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n+                    </Popover>\n+                  )}\n+                  rootClose>", "originalCommit": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTQ0NDAzMg==", "url": "https://github.com/Graylog2/graylog2-server/pull/8803#discussion_r471444032", "bodyText": "And we still want to show the pop over but only then with the info: \"Not logged in\"", "author": "kmerz", "createdAt": "2020-08-17T12:28:02Z", "path": "graylog2-web-interface/src/components/users/UsersOverview/UserOverviewItem/LoggedInCell.jsx", "diffHunk": "@@ -20,19 +19,22 @@ const Td: StyledComponent<{}, ThemeInterface, HTMLTableCellElement> = styled.td`\n   text-align: right;\n `;\n \n-const LoggedInCell = ({ lastActivity, clientAddress, sessionActive }: Props) => (\n+const LoggedInInfo = ({ lastActivity }: { lastActivity: $PropertyType<UserOverview, 'lastActivity'> }) => (\n+  <OverlayTrigger trigger={['hover', 'focus']}\n+                  placement=\"right\"\n+                  overlay={(\n+                    <Popover id=\"session-badge-details\" title=\"Logged in\">\n+                      <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n+                    </Popover>\n+                  )}\n+                  rootClose>\n+    <LoggedInIcon active />\n+  </OverlayTrigger>\n+);\n+\n+const LoggedInCell = ({ lastActivity, sessionActive }: Props) => (\n   <Td>\n-    <OverlayTrigger trigger={['hover', 'focus']}\n-                    placement=\"right\"\n-                    overlay={(\n-                      <Popover id=\"session-badge-details\" title={sessionActive ? 'Logged in' : 'Logged out'}>\n-                        <div>Last activity: {lastActivity ? <Timestamp dateTime={lastActivity} relative /> : '-'}</div>\n-                        <div>Client address: {clientAddress ?? '-'}</div>\n-                      </Popover>\n-                    )}\n-                    rootClose>\n-      <LoggedInIcon active={sessionActive} />\n-    </OverlayTrigger>\n+    {sessionActive ? <LoggedInInfo lastActivity={lastActivity} /> : <LoggedInIcon active={false} />}", "originalCommit": "e0f2c10d310cc1c18070f9f9f317989ab3686fe5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "505caff4a969fcfca495efc7e320677f7685186f", "url": "https://github.com/Graylog2/graylog2-server/commit/505caff4a969fcfca495efc7e320677f7685186f", "message": "Reimplement popover for logged in icon", "committedDate": "2020-08-17T13:36:28Z", "type": "commit"}]}