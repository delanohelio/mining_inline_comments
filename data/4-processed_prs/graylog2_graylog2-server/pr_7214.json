{"pr_number": 7214, "pr_title": "Improving search controls by adding text and dropdown, fixing reset.", "pr_createdAt": "2020-01-17T09:29:24Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7214", "timeline": [{"oid": "83b7b08a924300a45b238ac82f53337f01382336", "url": "https://github.com/Graylog2/graylog2-server/commit/83b7b08a924300a45b238ac82f53337f01382336", "message": "Fixing linter hints.", "committedDate": "2020-01-20T10:39:43Z", "type": "forcePushed"}, {"oid": "fff60711a46ff5f4d624cf35588e784872553519", "url": "https://github.com/Graylog2/graylog2-server/commit/fff60711a46ff5f4d624cf35588e784872553519", "message": "Redirect to default search page, when resetinng a search on ShowViewPage", "committedDate": "2020-01-21T15:38:48Z", "type": "forcePushed"}, {"oid": "a92ca49be1a2906e0b48b42e60eb068c013b437c", "url": "https://github.com/Graylog2/graylog2-server/commit/a92ca49be1a2906e0b48b42e60eb068c013b437c", "message": "Redirect to default search page, when resetinng a search on ShowViewPage", "committedDate": "2020-01-22T13:10:47Z", "type": "forcePushed"}, {"oid": "bbaa7afa8b4e906f64a506a0a3524c1e8ba9a4d0", "url": "https://github.com/Graylog2/graylog2-server/commit/bbaa7afa8b4e906f64a506a0a3524c1e8ba9a4d0", "message": "Redirect to default search page, when resetinng a search on ShowViewPage", "committedDate": "2020-01-23T13:45:46Z", "type": "forcePushed"}, {"oid": "0bb7d0c711d0352fd07ba45d629a84970a1e1ef7", "url": "https://github.com/Graylog2/graylog2-server/commit/0bb7d0c711d0352fd07ba45d629a84970a1e1ef7", "message": "Changing glyphs, adding text & dropdown, fixing reset search.", "committedDate": "2020-01-24T08:23:54Z", "type": "commit"}, {"oid": "4d0a3d1334ec38b05883b68010c8efdb0e77a433", "url": "https://github.com/Graylog2/graylog2-server/commit/4d0a3d1334ec38b05883b68010c8efdb0e77a433", "message": "Adding testid to reset search item.", "committedDate": "2020-01-24T08:23:54Z", "type": "commit"}, {"oid": "30edfb015a8e2ab2e6e02000cbeb03e928e4343d", "url": "https://github.com/Graylog2/graylog2-server/commit/30edfb015a8e2ab2e6e02000cbeb03e928e4343d", "message": "Simplifying & updating snapshots, adapting test case.", "committedDate": "2020-01-24T08:23:54Z", "type": "commit"}, {"oid": "201a33802f0456f8a15e2dad7294145975204277", "url": "https://github.com/Graylog2/graylog2-server/commit/201a33802f0456f8a15e2dad7294145975204277", "message": "Implement NewViewLoaderContext for StreamSearchPage, to enable search reset", "committedDate": "2020-01-24T08:23:54Z", "type": "commit"}, {"oid": "5af3c271bac83b6da01bfe8df87997b80182d41d", "url": "https://github.com/Graylog2/graylog2-server/commit/5af3c271bac83b6da01bfe8df87997b80182d41d", "message": "Fix NewSearchPage search reset by overwriting the current query and updating the URL", "committedDate": "2020-01-24T08:23:55Z", "type": "commit"}, {"oid": "d1115d11a8401b3b8107fb09ac1360c7530b25ed", "url": "https://github.com/Graylog2/graylog2-server/commit/d1115d11a8401b3b8107fb09ac1360c7530b25ed", "message": "Fix StreamSearchPage search reset by overwriting the current query and updating the URL", "committedDate": "2020-01-24T08:23:55Z", "type": "commit"}, {"oid": "8f2f0d4b0ba70a24270a8b5398cf5c3429feea79", "url": "https://github.com/Graylog2/graylog2-server/commit/8f2f0d4b0ba70a24270a8b5398cf5c3429feea79", "message": "Redirect to default search page, when resetinng a search on ShowViewPage", "committedDate": "2020-01-24T08:23:55Z", "type": "commit"}, {"oid": "0881bb3b4a192c92abd2b28d211ab387a2db490e", "url": "https://github.com/Graylog2/graylog2-server/commit/0881bb3b4a192c92abd2b28d211ab387a2db490e", "message": "Remove empty row", "committedDate": "2020-01-24T08:23:55Z", "type": "commit"}, {"oid": "ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "url": "https://github.com/Graylog2/graylog2-server/commit/ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "message": "Change searchbar grid regarding new bookmark controls", "committedDate": "2020-01-24T08:23:55Z", "type": "commit"}, {"oid": "ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "url": "https://github.com/Graylog2/graylog2-server/commit/ec4ed54d28a3a9cbc129e84e4783e0a62be7aa7b", "message": "Change searchbar grid regarding new bookmark controls", "committedDate": "2020-01-24T08:23:55Z", "type": "forcePushed"}, {"oid": "d5c1854b663eaed84dbce5d562bb3be0860cb967", "url": "https://github.com/Graylog2/graylog2-server/commit/d5c1854b663eaed84dbce5d562bb3be0860cb967", "message": "Refactor StreamSearchPage view setup by defining stream realation on initial create\n\n- defined stream is no longer getting lost on reload\n- fixes intial state for reset button", "committedDate": "2020-01-24T09:55:55Z", "type": "commit"}, {"oid": "a673b1f3cd7b85909973ec7403b733994d8a0e56", "url": "https://github.com/Graylog2/graylog2-server/commit/a673b1f3cd7b85909973ec7403b733994d8a0e56", "message": "Remove empty row", "committedDate": "2020-01-24T10:11:04Z", "type": "commit"}, {"oid": "a6d8317213c338f22cdb02f9773a6cd3c6376cc4", "url": "https://github.com/Graylog2/graylog2-server/commit/a6d8317213c338f22cdb02f9773a6cd3c6376cc4", "message": "Remove empty row", "committedDate": "2020-01-24T10:12:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDU1OTAxMQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7214#discussion_r370559011", "bodyText": "I am not so sure where the best place for this helper function is. I can't use the QueriesFilterStore, due to a dependency cycle.", "author": "linuspahl", "createdAt": "2020-01-24T10:13:15Z", "path": "graylog2-web-interface/src/views/logic/queries/Query.js", "diffHunk": "@@ -32,6 +32,22 @@ export type ElasticsearchQueryString = {\n \n export const createElasticsearchQueryString = (query: string = ''): ElasticsearchQueryString => ({ type: 'elasticsearch', query_string: query });\n \n+const _streamFilters = (selectedStreams: Array<string>): Array<{ type: string, id: string }> => {\n+  return selectedStreams.map(stream => ({ type: 'stream', id: stream }));\n+};\n+\n+export const filtersForQuery = (streams: ?Array<string>) => {", "originalCommit": "d5c1854b663eaed84dbce5d562bb3be0860cb967", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "308020b6ded050279381a4261745541e284fc470", "url": "https://github.com/Graylog2/graylog2-server/commit/308020b6ded050279381a4261745541e284fc470", "message": "Fix promise return error for NewSearchPage and StreamSearchPage", "committedDate": "2020-01-24T11:57:12Z", "type": "commit"}, {"oid": "2e0a1b9b7dc88c89b834718f58ca3357552e2cdf", "url": "https://github.com/Graylog2/graylog2-server/commit/2e0a1b9b7dc88c89b834718f58ca3357552e2cdf", "message": "Refactor QueryGenerator parameter usage", "committedDate": "2020-01-24T14:33:30Z", "type": "commit"}]}