{"pr_number": 7762, "pr_title": "Use spread object creation to copy configurations before update", "pr_createdAt": "2020-03-26T11:53:36Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7762", "timeline": [{"oid": "b400ef50cc2b02417bd3422784ef7a4b1b2b754f", "url": "https://github.com/Graylog2/graylog2-server/commit/b400ef50cc2b02417bd3422784ef7a4b1b2b754f", "message": "Use cloneDeep to copy configurations befor update\n\n- create setConfigurationState and use cloneDeep to update\n- Update methods to use setConfigurationState before propagateChanges", "committedDate": "2020-03-26T11:45:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU0MDQwMw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7762#discussion_r398540403", "bodyText": "I think we do not deep copying here. What we could do is creating a new object for configuration instead of mutating the existing one:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  this.setConfigurationState(configType, response);\n          \n          \n            \n                  this.configuration = { ...this.configuration, [configType]: response };", "author": "dennisoelkers", "createdAt": "2020-03-26T12:41:34Z", "path": "graylog2-web-interface/src/stores/configurations/ConfigurationsStore.js", "diffHunk": "@@ -49,7 +56,7 @@ const ConfigurationsStore = Reflux.createStore({\n   list(configType) {\n     const promise = fetch('GET', this._url(`/${configType}`));\n     promise.then((response) => {\n-      this.configuration[configType] = response;\n+      this.setConfigurationState(configType, response);", "originalCommit": "b400ef50cc2b02417bd3422784ef7a4b1b2b754f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODYxMTY5Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7762#discussion_r398611693", "bodyText": "Great ! much cleaner \ud83d\udc4d", "author": "ousmaneo", "createdAt": "2020-03-26T14:22:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODU0MDQwMw=="}], "type": "inlineReview"}, {"oid": "1d9f50ad0c9ba541018072926b4910fa29b25601", "url": "https://github.com/Graylog2/graylog2-server/commit/1d9f50ad0c9ba541018072926b4910fa29b25601", "message": "Use spread object creation instead of cloneDeep", "committedDate": "2020-03-26T14:23:08Z", "type": "commit"}, {"oid": "0ed0ed429865a46061bdbb6216d50f73b6484387", "url": "https://github.com/Graylog2/graylog2-server/commit/0ed0ed429865a46061bdbb6216d50f73b6484387", "message": "Remove unused import", "committedDate": "2020-03-26T14:28:19Z", "type": "commit"}]}