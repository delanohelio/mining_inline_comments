{"pr_number": 9225, "pr_title": "Implement PaginatedDataTable component", "pr_createdAt": "2020-10-21T11:32:43Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/9225", "timeline": [{"oid": "c4b87086e2e487499ff69cab6d4a08deb961326e", "url": "https://github.com/Graylog2/graylog2-server/commit/c4b87086e2e487499ff69cab6d4a08deb961326e", "message": "Make filter input value accessible outside of TypeAheadDataFilter", "committedDate": "2020-10-27T10:24:36Z", "type": "commit"}, {"oid": "3aa248438f50c2a5bca6eaba8359885e23975ab5", "url": "https://github.com/Graylog2/graylog2-server/commit/3aa248438f50c2a5bca6eaba8359885e23975ab5", "message": "Create common PaginatedDattable comppnent", "committedDate": "2020-10-27T13:09:46Z", "type": "commit"}, {"oid": "3aa248438f50c2a5bca6eaba8359885e23975ab5", "url": "https://github.com/Graylog2/graylog2-server/commit/3aa248438f50c2a5bca6eaba8359885e23975ab5", "message": "Create common PaginatedDattable comppnent", "committedDate": "2020-10-27T13:09:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjY5NTE1NQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/9225#discussion_r512695155", "bodyText": "I tried to implement the following approach:\nconst TableFilter = customFilter ?? Filter\n\nreturn (<div> \n  <TableFilter\n      ...\n\nThis way the customFilter has access to all props the Filter component receives. This caused a problem where the filter input value got removed after submitting the filter. I tried to fix the problem with useCallback / useMemo, but due to the dependency chain, I would have to split up the pagination state of every component which uses the DataTable with a customFilter.", "author": "linuspahl", "createdAt": "2020-10-27T13:34:30Z", "path": "graylog2-web-interface/src/components/common/DataTable/DataTable.jsx", "diffHunk": "@@ -197,17 +197,18 @@ class DataTable extends React.Component {\n \n     return (\n       <div>\n-        <Filter customFilter={customFilter}\n-                label={filterLabel}\n-                id={id}\n-                rows={rows}\n-                displayKey={displayKey}\n-                filterBy={filterBy}\n-                filterSuggestions={filterSuggestions}\n-                filterKeys={filterKeys}\n-                onDataFiltered={this.filterDataRows}>\n-          {children}\n-        </Filter>\n+        {customFilter || (\n+          <Filter label={filterLabel}\n+                  rows={rows}\n+                  id={id}\n+                  displayKey={displayKey}\n+                  filterBy={filterBy}\n+                  filterSuggestions={filterSuggestions}\n+                  filterKeys={filterKeys}\n+                  onDataFiltered={this.filterDataRows}>\n+            {children}\n+          </Filter>\n+        )}", "originalCommit": "3aa248438f50c2a5bca6eaba8359885e23975ab5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9990ab76ee280b13ccc19cf8715d5167bc637362", "url": "https://github.com/Graylog2/graylog2-server/commit/9990ab76ee280b13ccc19cf8715d5167bc637362", "message": "Add id for Filter in PaginatedDataTable", "committedDate": "2020-10-27T14:08:08Z", "type": "commit"}, {"oid": "f2d3cbae9850516ed7f7b994bc57b67d3526d3a3", "url": "https://github.com/Graylog2/graylog2-server/commit/f2d3cbae9850516ed7f7b994bc57b67d3526d3a3", "message": "Remove linter warnings", "committedDate": "2020-10-27T14:44:41Z", "type": "commit"}]}