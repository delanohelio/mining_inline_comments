{"pr_number": 8823, "pr_title": "Implement domain actions for users, authz roles, teams and entity share actions.", "pr_createdAt": "2020-08-19T10:15:29Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8823", "timeline": [{"oid": "148994302f734c34799edcead7ae4a2aa00a1453", "url": "https://github.com/Graylog2/graylog2-server/commit/148994302f734c34799edcead7ae4a2aa00a1453", "message": "Fix flow type definitions", "committedDate": "2020-08-24T19:56:05Z", "type": "forcePushed"}, {"oid": "a5ccbbc8dcacde0c0a420b930ee265d2b1dac329", "url": "https://github.com/Graylog2/graylog2-server/commit/a5ccbbc8dcacde0c0a420b930ee265d2b1dac329", "message": "Implement domain actions for EntityShareActions", "committedDate": "2020-08-25T06:54:52Z", "type": "forcePushed"}, {"oid": "c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "url": "https://github.com/Graylog2/graylog2-server/commit/c3d92db9a9aff3c98321d3482f8efd24652cbf0a", "message": "Fix Users update error message", "committedDate": "2020-08-26T09:27:51Z", "type": "forcePushed"}, {"oid": "8131a1f203ab9151d67cd736e44b9ad0d077c92f", "url": "https://github.com/Graylog2/graylog2-server/commit/8131a1f203ab9151d67cd736e44b9ad0d077c92f", "message": "Fix Users update error message", "committedDate": "2020-08-26T09:39:01Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyODQyOQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#discussion_r478428429", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                message: `Updating user \"${payload?.username}\" failed with status: ${error}`,\n          \n          \n            \n                message: `Creating user \"${payload?.username}\" failed with status: ${error}`,", "author": "kmerz", "createdAt": "2020-08-27T13:42:20Z", "path": "graylog2-web-interface/src/domainActions/users/UsersDomain.js", "diffHunk": "@@ -0,0 +1,107 @@\n+// @flow strict\n+import type { ActionsType } from 'actions/users/UsersActions';\n+import { UsersActions } from 'stores/users/UsersStore';\n+\n+import notifyingAction from '../notifyingAction';\n+\n+const create: $PropertyType<ActionsType, 'create'> = notifyingAction({\n+  action: UsersActions.create,\n+  success: (payload) => ({\n+    message: `User \"${payload?.username}\" was created successfully`,\n+  }),\n+  error: (error, payload) => ({\n+    message: `Updating user \"${payload?.username}\" failed with status: ${error}`,", "originalCommit": "8131a1f203ab9151d67cd736e44b9ad0d077c92f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODQyOTEwMQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8823#discussion_r478429101", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                message: `Loading token for user \"${username}\" failed with status: ${error}`,\n          \n          \n            \n                message: `Loading tokens for user \"${username}\" failed with status: ${error}`,", "author": "kmerz", "createdAt": "2020-08-27T13:43:17Z", "path": "graylog2-web-interface/src/domainActions/users/UsersDomain.js", "diffHunk": "@@ -0,0 +1,107 @@\n+// @flow strict\n+import type { ActionsType } from 'actions/users/UsersActions';\n+import { UsersActions } from 'stores/users/UsersStore';\n+\n+import notifyingAction from '../notifyingAction';\n+\n+const create: $PropertyType<ActionsType, 'create'> = notifyingAction({\n+  action: UsersActions.create,\n+  success: (payload) => ({\n+    message: `User \"${payload?.username}\" was created successfully`,\n+  }),\n+  error: (error, payload) => ({\n+    message: `Updating user \"${payload?.username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const load: $PropertyType<ActionsType, 'load'> = notifyingAction({\n+  action: UsersActions.load,\n+  error: (error, username) => ({\n+    message: `Loading user \"${username}\" failed with status: ${error}`,\n+  }),\n+  notFoundRedirect: true,\n+});\n+\n+const update: $PropertyType<ActionsType, 'update'> = notifyingAction({\n+  action: UsersActions.update,\n+  success: (username) => ({\n+    message: `User \"${username}\" was updated successfully`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Updating user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const deleteAction: $PropertyType<ActionsType, 'delete'> = notifyingAction({\n+  action: UsersActions.delete,\n+  success: (username) => ({\n+    message: `User \"${username}\" was deleted successfully`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Deleting user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const changePassword: $PropertyType<ActionsType, 'changePassword'> = notifyingAction({\n+  action: UsersActions.changePassword,\n+  success: (username) => ({\n+    message: `Password was changed successfully for user \"${username}\"`,\n+  }),\n+  error: (error, username) => ({\n+    message: `Changing password for user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const createToken: $PropertyType<ActionsType, 'createToken'> = notifyingAction({\n+  action: UsersActions.createToken,\n+  success: (username, tokenName) => ({\n+    message: `Token \"${tokenName}\" created successfully for user \"${username}\"`,\n+  }),\n+  error: (error, username, tokenName) => ({\n+    message: `Creating token \"${tokenName}\" for user \"${username}\" failed with status: ${error}`,\n+  }),\n+});\n+\n+const loadTokens: $PropertyType<ActionsType, 'loadTokens'> = notifyingAction({\n+  action: UsersActions.loadTokens,\n+  error: (error, username) => ({\n+    message: `Loading token for user \"${username}\" failed with status: ${error}`,", "originalCommit": "8131a1f203ab9151d67cd736e44b9ad0d077c92f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "242ffb0c3498298347e64ddf33f5a83871b9c97e", "url": "https://github.com/Graylog2/graylog2-server/commit/242ffb0c3498298347e64ddf33f5a83871b9c97e", "message": "Implement domain actions for AuthzRoles", "committedDate": "2020-08-28T09:08:50Z", "type": "commit"}, {"oid": "ef633e638ff6370daebbcdb16d4362e4151e2734", "url": "https://github.com/Graylog2/graylog2-server/commit/ef633e638ff6370daebbcdb16d4362e4151e2734", "message": "Implement domain actions for UsersActions", "committedDate": "2020-08-28T09:11:11Z", "type": "commit"}, {"oid": "1bf5aeb8cc7d8de2c5414c9140f34cb5182e90da", "url": "https://github.com/Graylog2/graylog2-server/commit/1bf5aeb8cc7d8de2c5414c9140f34cb5182e90da", "message": "Change notifyingAction parameter names", "committedDate": "2020-08-28T09:11:11Z", "type": "commit"}, {"oid": "2250563e9455940acf954b15a5220b3c4f6aec36", "url": "https://github.com/Graylog2/graylog2-server/commit/2250563e9455940acf954b15a5220b3c4f6aec36", "message": "Code refactoring", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "cf3366db41cfc77daa2f8226e33fbde374d84533", "url": "https://github.com/Graylog2/graylog2-server/commit/cf3366db41cfc77daa2f8226e33fbde374d84533", "message": "Fix flow type definitions", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "284f6ef2e44a55db212581f3995e268fe97ddac3", "url": "https://github.com/Graylog2/graylog2-server/commit/284f6ef2e44a55db212581f3995e268fe97ddac3", "message": "Implement domain actions for EntityShareActions", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "9556858117a2d691f45c74541c5e8d36acd964c2", "url": "https://github.com/Graylog2/graylog2-server/commit/9556858117a2d691f45c74541c5e8d36acd964c2", "message": "Fix EntityShareModal test", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "1d2ba98c22bf51468a18d2af064714dff440f7f4", "url": "https://github.com/Graylog2/graylog2-server/commit/1d2ba98c22bf51468a18d2af064714dff440f7f4", "message": "Fix user notification for EntityShare action loadTeamSharesPaginated", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "ad5b436e224081983def5b01d4903deff16f1d99", "url": "https://github.com/Graylog2/graylog2-server/commit/ad5b436e224081983def5b01d4903deff16f1d99", "message": "Fix loadTeamSharesPaginated error message", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "fc3924a2efa038e1c12f4a892b5930b1cf2a0a5e", "url": "https://github.com/Graylog2/graylog2-server/commit/fc3924a2efa038e1c12f4a892b5930b1cf2a0a5e", "message": "Fix Users update error message", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "acd3e1925e3276af6fc9eaf6c9e8c0e071e61444", "url": "https://github.com/Graylog2/graylog2-server/commit/acd3e1925e3276af6fc9eaf6c9e8c0e071e61444", "message": "Display error page when 404 error gets catched with notifyingAction", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "a4e49286045e9f2e18f510edc69b436d8aa602d0", "url": "https://github.com/Graylog2/graylog2-server/commit/a4e49286045e9f2e18f510edc69b436d8aa602d0", "message": "Display meaningful error message for 400 errors which get handled by notifyingAction", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "9eea4e54ff0edb62451240c156359b5115945023", "url": "https://github.com/Graylog2/graylog2-server/commit/9eea4e54ff0edb62451240c156359b5115945023", "message": "Typo fixes", "committedDate": "2020-08-28T09:11:12Z", "type": "commit"}, {"oid": "c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "url": "https://github.com/Graylog2/graylog2-server/commit/c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "message": "Rename variable in UsersDomain", "committedDate": "2020-08-28T09:12:32Z", "type": "commit"}, {"oid": "c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "url": "https://github.com/Graylog2/graylog2-server/commit/c5fa10cc80de3d463a9c3458584c4dbf9e223cca", "message": "Rename variable in UsersDomain", "committedDate": "2020-08-28T09:12:32Z", "type": "forcePushed"}]}