{"pr_number": 9761, "pr_title": "Fix various Formatting and styling issue", "pr_createdAt": "2020-12-10T13:24:27Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/9761", "timeline": [{"oid": "ab61839426d9a4cdbca6f0e831555d693d05ee1c", "url": "https://github.com/Graylog2/graylog2-server/commit/ab61839426d9a4cdbca6f0e831555d693d05ee1c", "message": " Move Config summary css to StyledComponent", "committedDate": "2020-12-10T13:02:01Z", "type": "commit"}, {"oid": "791bd6448727c18c98f2bd736377ace59fcc6c27", "url": "https://github.com/Graylog2/graylog2-server/commit/791bd6448727c18c98f2bd736377ace59fcc6c27", "message": " Use ConfigSummaryDefinitionListWrapper to wrap dl", "committedDate": "2020-12-10T13:02:19Z", "type": "commit"}, {"oid": "25ce98a898a11ce244e2d79b9b855ddcf35fedf3", "url": "https://github.com/Graylog2/graylog2-server/commit/25ce98a898a11ce244e2d79b9b855ddcf35fedf3", "message": " Fix linter", "committedDate": "2020-12-10T13:12:55Z", "type": "commit"}, {"oid": "a9a0c10fbdd15bfa81c02f266b23bc16d403358a", "url": "https://github.com/Graylog2/graylog2-server/commit/a9a0c10fbdd15bfa81c02f266b23bc16d403358a", "message": " Replace indexSet Row css with StyledComponent", "committedDate": "2020-12-10T13:40:14Z", "type": "commit"}, {"oid": "e1a51b1603ccb630a2250e76bcdbf4ce9a50105e", "url": "https://github.com/Graylog2/graylog2-server/commit/e1a51b1603ccb630a2250e76bcdbf4ce9a50105e", "message": " Use StyledIndexSetDetailsRow\n\n - remove unnecessary components lifecycle methods", "committedDate": "2020-12-10T13:41:14Z", "type": "commit"}, {"oid": "53dc37bba481c20eaa4a78d1ff9ef6d826903978", "url": "https://github.com/Graylog2/graylog2-server/commit/53dc37bba481c20eaa4a78d1ff9ef6d826903978", "message": " Move IndexSetDetails to functional components\n\n - Remove lifecycle methods\n - remove unused import", "committedDate": "2020-12-10T13:54:17Z", "type": "commit"}, {"oid": "53dc37bba481c20eaa4a78d1ff9ef6d826903978", "url": "https://github.com/Graylog2/graylog2-server/commit/53dc37bba481c20eaa4a78d1ff9ef6d826903978", "message": " Move IndexSetDetails to functional components\n\n - Remove lifecycle methods\n - remove unused import", "committedDate": "2020-12-10T13:54:17Z", "type": "forcePushed"}, {"oid": "5ee79a1e0cee4a8c31d221ef63c2e6551e07a413", "url": "https://github.com/Graylog2/graylog2-server/commit/5ee79a1e0cee4a8c31d221ef63c2e6551e07a413", "message": " Convert SystemInformation to Class component", "committedDate": "2020-12-10T14:43:59Z", "type": "commit"}, {"oid": "d2d16cdb9528a35a60ae8323b12c9c1a1f7fe0b8", "url": "https://github.com/Graylog2/graylog2-server/commit/d2d16cdb9528a35a60ae8323b12c9c1a1f7fe0b8", "message": " Replace className with StyledDl", "committedDate": "2020-12-10T14:54:19Z", "type": "commit"}, {"oid": "0d6a594bf0eca01197ea3f7ae4095018a8becabf", "url": "https://github.com/Graylog2/graylog2-server/commit/0d6a594bf0eca01197ea3f7ae4095018a8becabf", "message": " Convert RestApiOverview class to arrow function.", "committedDate": "2020-12-10T15:06:35Z", "type": "commit"}, {"oid": "19c20bff62995b255f976de1e8e3c922c6b078fe", "url": "https://github.com/Graylog2/graylog2-server/commit/19c20bff62995b255f976de1e8e3c922c6b078fe", "message": "Move RestApiOverview css to StyledDl", "committedDate": "2020-12-10T15:14:04Z", "type": "commit"}, {"oid": "080160b2396cdce3fe9a8f8c4e7e60bcccefe7b4", "url": "https://github.com/Graylog2/graylog2-server/commit/080160b2396cdce3fe9a8f8c4e7e60bcccefe7b4", "message": "Merge branch 'master' into issue-9447", "committedDate": "2020-12-11T08:57:25Z", "type": "commit"}, {"oid": "ee90591b617587613dbab7350a87e18b16e619ed", "url": "https://github.com/Graylog2/graylog2-server/commit/ee90591b617587613dbab7350a87e18b16e619ed", "message": " fix styled-components typing", "committedDate": "2020-12-11T08:58:36Z", "type": "commit"}, {"oid": "215a498eb84b7b66e27e731555c795954c3d4560", "url": "https://github.com/Graylog2/graylog2-server/commit/215a498eb84b7b66e27e731555c795954c3d4560", "message": " Convert MetricDetails to class component", "committedDate": "2020-12-11T09:49:49Z", "type": "commit"}, {"oid": "ee059e8cfc46ac02224c9ca4643027677844343a", "url": "https://github.com/Graylog2/graylog2-server/commit/ee059e8cfc46ac02224c9ca4643027677844343a", "message": " Move MetricDetails css to styled-components\n\n - Fix ui issue by increasing margin-left", "committedDate": "2020-12-11T10:18:41Z", "type": "commit"}, {"oid": "8290d2d846cc49fea6a11352fa8a43b228a0ad2c", "url": "https://github.com/Graylog2/graylog2-server/commit/8290d2d846cc49fea6a11352fa8a43b228a0ad2c", "message": " use colors.global.link for aceEditor Keyword", "committedDate": "2020-12-11T13:44:14Z", "type": "commit"}, {"oid": "35938d1dcbbb8007d4f550f7d21c85836f215592", "url": "https://github.com/Graylog2/graylog2-server/commit/35938d1dcbbb8007d4f550f7d21c85836f215592", "message": "Merge branch 'master' into issue-9447", "committedDate": "2020-12-11T13:45:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0NjQ2MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541146460", "bodyText": "\ud83e\udd70", "author": "kyleknighted", "createdAt": "2020-12-11T18:32:42Z", "path": "graylog2-web-interface/src/theme/GlobalThemeStyles.jsx", "diffHunk": "@@ -254,28 +254,8 @@ const GlobalThemeStyles = createGlobalStyle(({ theme }) => css`\n     margin-bottom: 15px !important;\n   }\n \n-  dl.metric-def dt {\n-    float: left;\n-  }\n-", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0NjYzNA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541146634", "bodyText": "\ud83d\ude0d", "author": "kyleknighted", "createdAt": "2020-12-11T18:33:01Z", "path": "graylog2-web-interface/src/theme/GlobalThemeStyles.jsx", "diffHunk": "@@ -254,28 +254,8 @@ const GlobalThemeStyles = createGlobalStyle(({ theme }) => css`\n     margin-bottom: 15px !important;\n   }\n \n-  dl.metric-def dt {\n-    float: left;\n-  }\n-\n   dl.metric-timer dd {\n-    margin-left: 125px;\n-  }\n-\n-  dl.metric-meter dd {\n-    margin-left: 95px;\n-  }\n-\n-  dl.metric-gauge dd {\n-    margin-left: 80px;\n-  }\n-\n-  dl.metric-counter dd {\n-    margin-left: 80px;\n-  }\n-\n-  dl.metric-histogram dd {\n-    margin-left: 125px;", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0NjkyMQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541146921", "bodyText": "Love seeing all this red in the global styles file", "author": "kyleknighted", "createdAt": "2020-12-11T18:33:34Z", "path": "graylog2-web-interface/src/theme/GlobalThemeStyles.jsx", "diffHunk": "@@ -345,14 +325,6 @@ const GlobalThemeStyles = createGlobalStyle(({ theme }) => css`\n     margin-top: 5px;\n   }\n \n-  .system-system dt {\n-    float: left;\n-  }\n-\n-  .system-system dd {\n-    margin-left: 75px;\n-  }\n-", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2ODY0MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r542168640", "bodyText": "Me too \ud83d\ude09", "author": "ousmaneo", "createdAt": "2020-12-14T07:38:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0NjkyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0ODU0MQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541148541", "bodyText": "Something we should all discuss as a team, I don't mind having all the styles in their own specific file, but I want to make sure the whole team is onboard and we have a specific naming structure and some defined \"conventions\" (IndexSetDetails.styles.tsx maybe so related styles stay with their component)\nCurrently, styles have just been defined within the component file itself.", "author": "kyleknighted", "createdAt": "2020-12-11T18:36:28Z", "path": "graylog2-web-interface/src/components/indices/StyledIndexSetDetailsRow.tsx", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright (C) 2020 Graylog, Inc.\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the Server Side Public License, version 1,\n+ * as published by MongoDB, Inc.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * Server Side Public License for more details.\n+ *\n+ * You should have received a copy of the Server Side Public License\n+ * along with this program. If not, see\n+ * <http://www.mongodb.com/licensing/server-side-public-license>.\n+ */\n+import styled from 'styled-components';\n+\n+import { Row } from 'components/graylog';\n+\n+const StyledIndexSetDetailsRow = styled(Row)`", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE0OTI1NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541149254", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // @flow strict", "author": "kyleknighted", "createdAt": "2020-12-11T18:37:40Z", "path": "graylog2-web-interface/src/components/metrics/MetricDetails.jsx", "diffHunk": "@@ -14,67 +14,106 @@\n  * along with this program. If not, see\n  * <http://www.mongodb.com/licensing/server-side-public-license>.\n  */\n+// @flow strict", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MjExNw==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541152117", "bodyText": "I know this was there when you got here, but do you think there is a clearer way to write this conditional?\nMaybe this would work?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n               const currentMetric = metrics && metrics[nodeId] && metrics[nodeId][metricName]\n          \n          \n            \n                 ? metrics[nodeId][metricName] : metric;\n          \n          \n            \n               const currentMetric = metrics?.[nodeId]?.[metricName] ?? metric;", "author": "kyleknighted", "createdAt": "2020-12-11T18:43:01Z", "path": "graylog2-web-interface/src/components/metrics/MetricDetails.jsx", "diffHunk": "@@ -14,67 +14,106 @@\n  * along with this program. If not, see\n  * <http://www.mongodb.com/licensing/server-side-public-license>.\n  */\n+// @flow strict\n import PropTypes from 'prop-types';\n import React from 'react';\n-import createReactClass from 'create-react-class';\n-import Reflux from 'reflux';\n import lodash from 'lodash';\n+import styled from 'styled-components';\n \n import { CounterDetails, GaugeDetails, HistogramDetails, MeterDetails, TimerDetails } from 'components/metrics';\n import CombinedProvider from 'injection/CombinedProvider';\n+import connect from 'stores/connect';\n \n const { MetricsStore, MetricsActions } = CombinedProvider.get('Metrics');\n+const StyledMetricDetail = styled.div`\n+  dl {\n+    > dt {\n+      float: left;\n+    }\n \n-const MetricDetails = createReactClass({\n-  displayName: 'MetricDetails',\n-\n-  propTypes: {\n-    metric: PropTypes.object.isRequired,\n-  },\n+    &.metric-timer > dd {\n+      margin-left: 145px;\n+    }\n \n-  mixins: [Reflux.connect(MetricsStore)],\n+    &.metric-meter > dd {\n+      margin-left: 115px;\n+    }\n \n-  componentDidMount() {\n-    MetricsActions.add(this.props.nodeId, this.props.metric.full_name);\n-  },\n+    &.metric-gauge > dd {\n+      margin-left: 90px;\n+    }\n \n-  componentWillUnmount() {\n-    MetricsActions.remove(this.props.nodeId, this.props.metric.full_name);\n-  },\n+    &.metric-counter > dd {\n+      margin-left: 90px;\n+    }\n \n-  _formatDetailsForType(type, metric) {\n-    switch (type) {\n-      case 'Counter':\n-        return <CounterDetails metric={metric} />;\n-      case 'Gauge':\n-        return <GaugeDetails metric={metric} />;\n-      case 'Histogram':\n-        return <HistogramDetails metric={metric} />;\n-      case 'Meter':\n-        return <MeterDetails metric={metric} />;\n-      case 'Timer':\n-        return <TimerDetails metric={metric} />;\n-      default:\n-        return <i>Invalid metric type: {type}</i>;\n+    &.metric-histogram > dd {\n+      margin-left: 145px;\n     }\n-  },\n+  }\n+`;\n+\n+class MetricDetails extends React.Component {\n+ static propTypes = {\n+   metrics: PropTypes.object,\n+   metric: PropTypes.object.isRequired,\n+   nodeId: PropTypes.string.isRequired,\n+ };\n+\n+ static defaultProps = {\n+   metrics: undefined,\n+ }\n+\n+ componentDidMount() {\n+   const { nodeId, metric: { full_name: fullName } } = this.props;\n+   MetricsActions.add(nodeId, fullName);\n+ }\n+\n+ componentWillUnmount() {\n+   const { nodeId, metric: { full_name: fullName } } = this.props;\n+   MetricsActions.remove(nodeId, fullName);\n+ }\n \n-  render() {\n-    const metricName = this.props.metric.full_name;\n-    const { nodeId } = this.props;\n-    const metric = this.state.metrics && this.state.metrics[nodeId] && this.state.metrics[nodeId][metricName]\n-      ? this.state.metrics[nodeId][metricName] : this.props.metric;\n-    const type = lodash.capitalize(metric.type);\n-    const details = this._formatDetailsForType(type, metric);\n+ _formatDetailsForType = (type, metric) => {\n+   switch (type) {\n+     case 'Counter':\n+       return <CounterDetails metric={metric} />;\n+     case 'Gauge':\n+       return <GaugeDetails metric={metric} />;\n+     case 'Histogram':\n+       return <HistogramDetails metric={metric} />;\n+     case 'Meter':\n+       return <MeterDetails metric={metric} />;\n+     case 'Timer':\n+       return <TimerDetails metric={metric} />;\n+     default:\n+       return <i>Invalid metric type: {type}</i>;\n+   }\n+ }\n \n-    return (\n-      <div className=\"metric\">\n-        <h3>{type}</h3>\n+ render() {\n+   const { nodeId, metric, metric: { full_name: metricName }, metrics } = this.props;\n+   const currentMetric = metrics && metrics[nodeId] && metrics[nodeId][metricName]\n+     ? metrics[nodeId][metricName] : metric;", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2ODQ0Mg==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r542168442", "bodyText": "This works ! Thanks", "author": "ousmaneo", "createdAt": "2020-12-14T07:37:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MjExNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MjgxNw==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r541152817", "bodyText": "Ampersand isn't necessary in this instance.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  &:not(:last-child) {\n          \n          \n            \n                  :not(:last-child) {", "author": "kyleknighted", "createdAt": "2020-12-11T18:44:17Z", "path": "graylog2-web-interface/src/components/lookup-tables/ConfigSummaryDefinitionListWrapper.tsx", "diffHunk": "@@ -0,0 +1,41 @@\n+/*\n+ * Copyright (C) 2020 Graylog, Inc.\n+ *\n+ * This program is free software: you can redistribute it and/or modify\n+ * it under the terms of the Server Side Public License, version 1,\n+ * as published by MongoDB, Inc.\n+ *\n+ * This program is distributed in the hope that it will be useful,\n+ * but WITHOUT ANY WARRANTY; without even the implied warranty of\n+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\n+ * Server Side Public License for more details.\n+ *\n+ * You should have received a copy of the Server Side Public License\n+ * along with this program. If not, see\n+ * <http://www.mongodb.com/licensing/server-side-public-license>.\n+ */\n+import styled from 'styled-components';\n+\n+const ConfigSummaryDefinitionListWrapper = styled.div`\n+  dl {\n+    margin-top: 10px;\n+\n+    dt {\n+      float: left;\n+      clear: left;\n+    }\n+\n+    dd {\n+      margin-left: 185px;\n+      word-wrap: break-word;\n+\n+      &:not(:last-child) {", "originalCommit": "35938d1dcbbb8007d4f550f7d21c85836f215592", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjE2ODAzNg==", "url": "https://github.com/Graylog2/graylog2-server/pull/9761#discussion_r542168036", "bodyText": "\ud83d\udc4d", "author": "ousmaneo", "createdAt": "2020-12-14T07:36:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MTE1MjgxNw=="}], "type": "inlineReview"}, {"oid": "36a80ae40b3d163dff7c5fafd81671bacf9b9cc6", "url": "https://github.com/Graylog2/graylog2-server/commit/36a80ae40b3d163dff7c5fafd81671bacf9b9cc6", "message": "fix review comments", "committedDate": "2020-12-14T07:36:15Z", "type": "commit"}, {"oid": "7a0ab24da4d03ac761bcda0d70d3c8922d6b80af", "url": "https://github.com/Graylog2/graylog2-server/commit/7a0ab24da4d03ac761bcda0d70d3c8922d6b80af", "message": "Fix aceEditore active-line style", "committedDate": "2020-12-15T08:23:12Z", "type": "commit"}, {"oid": "938a812f5d57aa02aa780ae0e29776bc172cdf74", "url": "https://github.com/Graylog2/graylog2-server/commit/938a812f5d57aa02aa780ae0e29776bc172cdf74", "message": "Merge branch 'master' into issue-9447", "committedDate": "2020-12-15T08:24:24Z", "type": "commit"}, {"oid": "c0b0d7d84d8a104f91f531bff5174e224b75bc6c", "url": "https://github.com/Graylog2/graylog2-server/commit/c0b0d7d84d8a104f91f531bff5174e224b75bc6c", "message": " Change indexSet row breakpoint\n\n- Show stacked on smaller screen", "committedDate": "2020-12-15T10:45:51Z", "type": "commit"}]}