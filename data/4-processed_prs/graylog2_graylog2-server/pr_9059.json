{"pr_number": 9059, "pr_title": "Add error prop for `Input` to be able to display an error message together with the input help text", "pr_createdAt": "2020-09-29T14:49:15Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/9059", "timeline": [{"oid": "13684bb19859251954e5fa39c5418525740ccd76", "url": "https://github.com/Graylog2/graylog2-server/commit/13684bb19859251954e5fa39c5418525740ccd76", "message": "Create InputDescription component", "committedDate": "2020-09-29T14:12:13Z", "type": "commit"}, {"oid": "0776e8bc5292ac3bcf8eda63bb509a2bb3720692", "url": "https://github.com/Graylog2/graylog2-server/commit/0776e8bc5292ac3bcf8eda63bb509a2bb3720692", "message": "Implement InputDescription for Input component", "committedDate": "2020-09-29T14:29:26Z", "type": "commit"}, {"oid": "41ef7a3aa51c3440ddbb6d3d09bd73b775487abd", "url": "https://github.com/Graylog2/graylog2-server/commit/41ef7a3aa51c3440ddbb6d3d09bd73b775487abd", "message": "Add tests for InputDescription", "committedDate": "2020-09-29T14:29:48Z", "type": "commit"}, {"oid": "ac30ce74f83ef9df853308b57f8325103055bf67", "url": "https://github.com/Graylog2/graylog2-server/commit/ac30ce74f83ef9df853308b57f8325103055bf67", "message": "Use Input error prop in ForikInput", "committedDate": "2020-09-29T14:30:36Z", "type": "commit"}, {"oid": "6494a8de9c7ec7670931cb8e7789ee78cf0b3862", "url": "https://github.com/Graylog2/graylog2-server/commit/6494a8de9c7ec7670931cb8e7789ee78cf0b3862", "message": "Use Input error prop in ContentPackSelection.", "committedDate": "2020-09-29T14:31:40Z", "type": "commit"}, {"oid": "742c13d91e5380e181aa565b23ce95b2215ce9a3", "url": "https://github.com/Graylog2/graylog2-server/commit/742c13d91e5380e181aa565b23ce95b2215ce9a3", "message": "Only display InputDescription line break when error and help exist", "committedDate": "2020-09-29T14:33:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njc4NTUyMg==", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#discussion_r496785522", "bodyText": "I made sure the text color changes when there is an error, this way the component can be used independently of the  Input component. I tried to style the HelpBlock, but it is not possible because the hasError attribute would be added to the DOM.", "author": "linuspahl", "createdAt": "2020-09-29T14:54:29Z", "path": "graylog2-web-interface/src/components/common/InputDescription.jsx", "diffHunk": "@@ -0,0 +1,56 @@\n+// @flow strict\n+import * as React from 'react';\n+import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { HelpBlock } from 'components/graylog';\n+\n+const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `\n+  ${hasError ? `\n+    color: ${theme.colors.variant.danger};\n+  ` : ''};\n+`);", "originalCommit": "742c13d91e5380e181aa565b23ce95b2215ce9a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI2MzcxNA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#discussion_r497263714", "bodyText": "I find that putting a conditional with a template string and using a template string again can be confusing. Personally I think this reads better:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `\n          \n          \n            \n            const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => hasError ? `color: ${theme.colors.variant.danger};` : '';", "author": "Gaya", "createdAt": "2020-09-30T06:10:48Z", "path": "graylog2-web-interface/src/components/common/InputDescription.jsx", "diffHunk": "@@ -0,0 +1,56 @@\n+// @flow strict\n+import * as React from 'react';\n+import PropTypes from 'prop-types';\n+import styled, { type StyledComponent } from 'styled-components';\n+\n+import type { ThemeInterface } from 'theme';\n+import { HelpBlock } from 'components/graylog';\n+\n+const Wrapper: StyledComponent<{hasError: boolean}, ThemeInterface, HTMLSpanElement> = styled.span(({ theme, hasError }) => `", "originalCommit": "742c13d91e5380e181aa565b23ce95b2215ce9a3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQ3NjcyOA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9059#discussion_r497476728", "bodyText": "Thanks, thats a good hint!", "author": "linuspahl", "createdAt": "2020-09-30T12:41:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzI2MzcxNA=="}], "type": "inlineReview"}, {"oid": "1de0469f8625eac9c905ba9f0267ef86b5b4a984", "url": "https://github.com/Graylog2/graylog2-server/commit/1de0469f8625eac9c905ba9f0267ef86b5b4a984", "message": "Always use bsStyle error for Input form group if Input has an error", "committedDate": "2020-09-30T12:40:02Z", "type": "commit"}, {"oid": "83a2eb0a4ad9f1d43053310f10285962fb1a1e13", "url": "https://github.com/Graylog2/graylog2-server/commit/83a2eb0a4ad9f1d43053310f10285962fb1a1e13", "message": "Refactor InputDescription code style", "committedDate": "2020-09-30T12:40:34Z", "type": "commit"}, {"oid": "824941a6850b66a8628af0fc7bc1f52fce7183ae", "url": "https://github.com/Graylog2/graylog2-server/commit/824941a6850b66a8628af0fc7bc1f52fce7183ae", "message": "Do not change color of an input help text if input has an error", "committedDate": "2020-09-30T13:21:46Z", "type": "commit"}, {"oid": "836bc7c051db754fb3b2dc55b73873ef2fbff4f0", "url": "https://github.com/Graylog2/graylog2-server/commit/836bc7c051db754fb3b2dc55b73873ef2fbff4f0", "message": "Fix flow error", "committedDate": "2020-09-30T13:25:10Z", "type": "commit"}, {"oid": "f1c5179d258667c219e729d2e53bed6e4e5601f4", "url": "https://github.com/Graylog2/graylog2-server/commit/f1c5179d258667c219e729d2e53bed6e4e5601f4", "message": "Refactor InputDescription code style", "committedDate": "2020-09-30T13:27:26Z", "type": "commit"}]}