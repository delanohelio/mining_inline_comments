{"pr_number": 7782, "pr_title": "Show helpful message on dashboard page for missing stream permission", "pr_createdAt": "2020-03-30T12:57:33Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7782", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE4MDUwNA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r400180504", "bodyText": "I received an act() warning because of the update triggered by throwing the error. How do we deal with this case normally when using enzyme? There has to be a more elegant way.", "author": "linuspahl", "createdAt": "2020-03-30T13:14:22Z", "path": "graylog2-web-interface/src/views/pages/ExtendedSearchPage.test.jsx", "diffHunk": "@@ -261,4 +262,17 @@ describe('ExtendedSearchPage', () => {\n         expect(SearchActions.execute).not.toHaveBeenCalled();\n       });\n   });\n+\n+  it('information about execution error will be displayed', async () => {\n+    asMock(SearchActions.execute).mockImplementationOnce(() => Promise.reject(new Error('The error message.')));\n+    let wrapper;\n+    await act(async () => {\n+      wrapper = mount(<SimpleExtendedSearchPage />);\n+    });\n+\n+    if (wrapper) {\n+      wrapper.update();\n+      expect(wrapper.contains('The error message.')).not.toBeNull();\n+    }\n+  });", "originalCommit": "663b8240279ed0812ce426997671bde80cc8a059", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDYwNzg3NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r404607874", "bodyText": "This comment is no longer relevant, because we've adjusted the error handling.", "author": "linuspahl", "createdAt": "2020-04-07T07:52:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE4MDUwNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDE4ODg0Ng==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r400188846", "bodyText": "I wrote the SearchExectuionErrors component in a way it can handle all types of errors. initially I've tried to add the .catch() to SearchActions.execute(executionState) but I prefer catching and informing the user about all possible errors (which are not part of a 403 / 404 request).\nI've also tried to add the .catch() before the .finally(). but this results in some test failures I couldn't fix easily.", "author": "linuspahl", "createdAt": "2020-03-30T13:26:31Z", "path": "graylog2-web-interface/src/views/pages/ExtendedSearchPage.jsx", "diffHunk": "@@ -154,14 +155,22 @@ const ExtendedSearchPage = ({ route, location = { query: {} }, router, searchRef\n         .push(SearchActions.refresh.listen(refreshIfNotUndeclared))\n         .push(ViewActions.search.completed.listen(refreshIfNotUndeclared));\n       return null;\n-    });\n+    }).catch((error) => setErrors([error]));", "originalCommit": "663b8240279ed0812ce426997671bde80cc8a059", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16ac5081ffc423c8ffe00edf273ffb8a1cef8569", "url": "https://github.com/Graylog2/graylog2-server/commit/16ac5081ffc423c8ffe00edf273ffb8a1cef8569", "message": "Change error code from 406 to 403", "committedDate": "2020-04-02T12:47:55Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjQyMDA5Nw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r402420097", "bodyText": "@dennisoelkers A few questions regarding these changes:\nWould you add e.g. logoutIfUnauthorized  as a Builder method? And would you allow a customisation of the whole part or only the condition check? (in the context of logoutIfUnauthorized and redirectIfForbidden )", "author": "linuspahl", "createdAt": "2020-04-02T15:49:59Z", "path": "graylog2-web-interface/src/logic/rest/FetchProvider.js", "diffHunk": "@@ -152,29 +149,29 @@ function queuePromiseIfNotLoggedin(promise) {\n   return promise;\n }\n \n-export default function fetch(method, url, body) {\n+export default function fetch(method, url, body, handleForbidden, handleUnauthorized) {\n   const promise = () => new Builder(method, url)\n     .authenticated()\n-    .json(body)\n+    .json(body, handleForbidden, handleUnauthorized)\n     .build();\n \n   return queuePromiseIfNotLoggedin(promise)();\n }\n \n-export function fetchPlainText(method, url, body) {\n+export function fetchPlainText(method, url, body, handleForbidden, handleUnauthorized) {\n   const promise = () => new Builder(method, url)\n     .authenticated()\n-    .plaintext(body)\n+    .plaintext(body, handleForbidden, handleUnauthorized)\n     .build();\n \n   return queuePromiseIfNotLoggedin(promise)();\n }\n \n-export function fetchPeriodically(method, url, body) {\n+export function fetchPeriodically(method, url, body, handleForbidden, handleUnauthorized) {\n   const promise = () => new Builder(method, url)\n     .authenticated()\n     .noSessionExtension()\n-    .json(body)\n+    .json(body, handleForbidden, handleUnauthorized)\n     .build();\n ", "originalCommit": "625eedd6710e45863b54a5d38f249d5c0a430596", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "255e6a15719985fbadb4f6250c5cc5ba63442ddf", "url": "https://github.com/Graylog2/graylog2-server/commit/255e6a15719985fbadb4f6250c5cc5ba63442ddf", "message": "Fix typo in ExtendedSearchPage test", "committedDate": "2020-04-07T07:55:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ0MTY1OQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r405441659", "bodyText": "We should also check if the exception contains the missing streams.", "author": "dennisoelkers", "createdAt": "2020-04-08T11:05:00Z", "path": "graylog2-server/src/test/java/org/graylog/plugins/views/search/SearchExecutionGuardTest.java", "diffHunk": "@@ -60,7 +61,7 @@ public void setUp() throws Exception {\n     public void failsForNonPermittedStreams() {\n         final Search search = searchWithStreamIds(\"ok\", \"not-ok\");\n \n-        assertThatExceptionOfType(ForbiddenException.class)\n+        assertThatExceptionOfType(MissingStreamPermissionException.class)", "originalCommit": "dcaeeae6b0845cb7a97bfe22d09d8b45e88aeace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ0MzM2Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r405443363", "bodyText": "Instead of having to pass handleForbidden/handleUnauthorized to every method, we should introduce two builder methods for these, which allows consumers to set these. Creating a new FetchBuilder would default to redirectIfForbidden respectively logoutIfUnauthorized.", "author": "dennisoelkers", "createdAt": "2020-04-08T11:08:27Z", "path": "graylog2-web-interface/src/logic/rest/FetchProvider.js", "diffHunk": "@@ -54,7 +74,7 @@ export class Builder {\n     return this;\n   }\n \n-  json(body) {\n+  json(body, handleForbidden = redirectIfForbidden, handleUnauthorized = logoutIfUnauthorized) {", "originalCommit": "dcaeeae6b0845cb7a97bfe22d09d8b45e88aeace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTQ0NTU4Nw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r405445587", "bodyText": "I think this should be either Array<Error> or Array<mixed>. Object is not recommended for use, ever:\n\nObject is an alias to any and will be deprecated and removed in a future version of Flow.", "author": "dennisoelkers", "createdAt": "2020-04-08T11:13:01Z", "path": "graylog2-web-interface/src/views/pages/ExtendedSearchPage.jsx", "diffHunk": "@@ -86,6 +87,7 @@ const ConnectedFieldList = connect(FieldList, { fieldTypes: FieldTypesStore, vie\n   }));\n \n type Props = {\n+  errors: Object[],", "originalCommit": "dcaeeae6b0845cb7a97bfe22d09d8b45e88aeace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "00e7eb7b57091cb88f25b1d7290eed98c12630ae", "url": "https://github.com/Graylog2/graylog2-server/commit/00e7eb7b57091cb88f25b1d7290eed98c12630ae", "message": "Implement unauthorized and forbidden handling as customizable builder methods for fetch provider", "committedDate": "2020-04-08T17:13:21Z", "type": "forcePushed"}, {"oid": "1b00c070b128ac7e42d8278ea1b1350018fcd6a8", "url": "https://github.com/Graylog2/graylog2-server/commit/1b00c070b128ac7e42d8278ea1b1350018fcd6a8", "message": "Fix typo", "committedDate": "2020-04-21T08:31:29Z", "type": "forcePushed"}, {"oid": "18e3d6e5e15c8984d2ad453984ab03a256c26035", "url": "https://github.com/Graylog2/graylog2-server/commit/18e3d6e5e15c8984d2ad453984ab03a256c26035", "message": "Add displayError action to handle global errors\n\n- Add class for app errors\n- Create separate component to display errors\n- Rename ErrorBoundary to RuntineErrorBoundary", "committedDate": "2020-04-21T08:48:09Z", "type": "commit"}, {"oid": "8802f6e63dd99e9a5f5a8c6f149e43c0e10ddebc", "url": "https://github.com/Graylog2/graylog2-server/commit/8802f6e63dd99e9a5f5a8c6f149e43c0e10ddebc", "message": "Do not redirect to not found page on unauthorized api requests and display global error instead", "committedDate": "2020-04-21T08:48:09Z", "type": "commit"}, {"oid": "4f62226a471bf4f9e118258d31b6133daf18d69e", "url": "https://github.com/Graylog2/graylog2-server/commit/4f62226a471bf4f9e118258d31b6133daf18d69e", "message": "Rename ErrorsAction displayError to report", "committedDate": "2020-04-21T08:48:09Z", "type": "commit"}, {"oid": "a8ec99df9f440190bdf08c9e65ed0144be7849a6", "url": "https://github.com/Graylog2/graylog2-server/commit/a8ec99df9f440190bdf08c9e65ed0144be7849a6", "message": "Include ScretchPad and ScrollToHint component in app runtime error boundary", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "e44c7c49c7d7a81b6411f064f55de8f6d63ab414", "url": "https://github.com/Graylog2/graylog2-server/commit/e44c7c49c7d7a81b6411f064f55de8f6d63ab414", "message": "Use styled components for RuntimeErrorPage", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "e0e27c743bbe1334032a06b820e35571d5d75053", "url": "https://github.com/Graylog2/graylog2-server/commit/e0e27c743bbe1334032a06b820e35571d5d75053", "message": "Unify runtime and unauthorized error page layout", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "9d4392e047bf61e7643375b0520cc9af5c6f25c0", "url": "https://github.com/Graylog2/graylog2-server/commit/9d4392e047bf61e7643375b0520cc9af5c6f25c0", "message": "Fix RuntimeErrorBoundary test", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "32143ccb12772664c38a967c03b10a84fdc0dd9f", "url": "https://github.com/Graylog2/graylog2-server/commit/32143ccb12772664c38a967c03b10a84fdc0dd9f", "message": "Rename AppError component to ReportedError", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "a62dc7fa00ba69891e9c90291c8df43de3e24726", "url": "https://github.com/Graylog2/graylog2-server/commit/a62dc7fa00ba69891e9c90291c8df43de3e24726", "message": "Add separate error boundary for routing", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "d2d96b28f94d0d025266953752241d5b3154eedc", "url": "https://github.com/Graylog2/graylog2-server/commit/d2d96b28f94d0d025266953752241d5b3154eedc", "message": "Rename AppError in ReportedError and use objects instad of a class", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "c60f1ce030da338cd3a2e32457a1957bdce7e9ca", "url": "https://github.com/Graylog2/graylog2-server/commit/c60f1ce030da338cd3a2e32457a1957bdce7e9ca", "message": "Fix linting errors", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "4201602998247f3b97757a30b74e2cff9aca21bf", "url": "https://github.com/Graylog2/graylog2-server/commit/4201602998247f3b97757a30b74e2cff9aca21bf", "message": "ADjust ReportedError creation and fix flow error", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "d2a5515be9d79f47f5b66c1e3065c18fafc0e5c7", "url": "https://github.com/Graylog2/graylog2-server/commit/d2a5515be9d79f47f5b66c1e3065c18fafc0e5c7", "message": "Only reset reported error on route change when reported error is being displayed", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "6b576436d1e349fee13f3c08078e522772d52394", "url": "https://github.com/Graylog2/graylog2-server/commit/6b576436d1e349fee13f3c08078e522772d52394", "message": "Fix RuntimeErrorBoundary test", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "44817981afecffe3a91a1b2291a2f662c67eacd7", "url": "https://github.com/Graylog2/graylog2-server/commit/44817981afecffe3a91a1b2291a2f662c67eacd7", "message": "Remove not needed prop in RouterErrorBoundary test", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "3628f8b9f9bb5dfb9e857bb4b027924bd59fcde2", "url": "https://github.com/Graylog2/graylog2-server/commit/3628f8b9f9bb5dfb9e857bb4b027924bd59fcde2", "message": "Unsubscribe from report error action when unmounting ReportedError component", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "c44f03477c84b8b65c970ea15f54f28797937bb9", "url": "https://github.com/Graylog2/graylog2-server/commit/c44f03477c84b8b65c970ea15f54f28797937bb9", "message": "Add test for ReportedError", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "0fcf8a44381ab5612b68fd9d3f81d3460006e5af", "url": "https://github.com/Graylog2/graylog2-server/commit/0fcf8a44381ab5612b68fd9d3f81d3460006e5af", "message": "Create own components directory for error handling related components\n\n* Rename ReportedErrorDetails to ErrorPage", "committedDate": "2020-04-21T08:48:10Z", "type": "commit"}, {"oid": "45f43a2834c419bf80da18c6032441c4212febed", "url": "https://github.com/Graylog2/graylog2-server/commit/45f43a2834c419bf80da18c6032441c4212febed", "message": "Imolement ErrorPage layout for PageErrorOverview", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "2a52299598d2ff829852040ccd6da8694fe25f20", "url": "https://github.com/Graylog2/graylog2-server/commit/2a52299598d2ff829852040ccd6da8694fe25f20", "message": "Fix linter warning", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "32573dec46ea8de622166a4aba9ca07e6cb07a3b", "url": "https://github.com/Graylog2/graylog2-server/commit/32573dec46ea8de622166a4aba9ca07e6cb07a3b", "message": "Revert not working linter fix and add missing import", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "4b97d6f6172134b18e01e47ff386f6e7ea70079d", "url": "https://github.com/Graylog2/graylog2-server/commit/4b97d6f6172134b18e01e47ff386f6e7ea70079d", "message": "Fix reported error reset on route change", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "d354b4bd616a076deb9b8cc3900dffdfef04c0d3", "url": "https://github.com/Graylog2/graylog2-server/commit/d354b4bd616a076deb9b8cc3900dffdfef04c0d3", "message": "Display ErrorPage title inside ErrorJumbotron", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "bc251a21e64176c096ea0c0318385feb28cd43c6", "url": "https://github.com/Graylog2/graylog2-server/commit/bc251a21e64176c096ea0c0318385feb28cd43c6", "message": "Add test for RuntimeErrorPage and UnauthorizedErrorPage", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "933c9ce6cf2d0a7332f5e82a985a1d496de38c72", "url": "https://github.com/Graylog2/graylog2-server/commit/933c9ce6cf2d0a7332f5e82a985a1d496de38c72", "message": "Rename ReportedError.js file in ReportedErrors.js and rename functions to create reported errors", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "d9c240318addf5069ba2bec191671bb32d64a2c6", "url": "https://github.com/Graylog2/graylog2-server/commit/d9c240318addf5069ba2bec191671bb32d64a2c6", "message": "Fix typos", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "b326e06c9ac8360ee9f96318aae0f4d9a7fe411d", "url": "https://github.com/Graylog2/graylog2-server/commit/b326e06c9ac8360ee9f96318aae0f4d9a7fe411d", "message": "Use not found background image by default for ErrorPage component", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "2585f4269cd3ca7b22a441e2aa7ac022b2d21b6f", "url": "https://github.com/Graylog2/graylog2-server/commit/2585f4269cd3ca7b22a441e2aa7ac022b2d21b6f", "message": "Remove not needed suppressConsole from tests and restrict scope of remaining", "committedDate": "2020-04-21T08:48:11Z", "type": "commit"}, {"oid": "d98bb6398bf869de7bbb4a288f95bc1e64bfbf96", "url": "https://github.com/Graylog2/graylog2-server/commit/d98bb6398bf869de7bbb4a288f95bc1e64bfbf96", "message": "Remove not needed parentheses", "committedDate": "2020-04-21T08:48:12Z", "type": "commit"}, {"oid": "66b7ef35805e74d33501da2e52b237f5ea2d4f73", "url": "https://github.com/Graylog2/graylog2-server/commit/66b7ef35805e74d33501da2e52b237f5ea2d4f73", "message": "Remove not needed async keyword", "committedDate": "2020-04-21T08:48:12Z", "type": "commit"}, {"oid": "d3994404f682eb82e427e20c6fe24e6755bdd8cf", "url": "https://github.com/Graylog2/graylog2-server/commit/d3994404f682eb82e427e20c6fe24e6755bdd8cf", "message": "Use wait instead of waitForElement inside tests", "committedDate": "2020-04-21T08:48:12Z", "type": "commit"}, {"oid": "f684b4206ac5a79b39e7df0bc2269d49a3c97498", "url": "https://github.com/Graylog2/graylog2-server/commit/f684b4206ac5a79b39e7df0bc2269d49a3c97498", "message": "Decrease ErrorJumbotron background opacity to improve readability", "committedDate": "2020-04-21T08:48:12Z", "type": "commit"}, {"oid": "df6abfe77df082ce4ba8640692e312a95ffbb0bb", "url": "https://github.com/Graylog2/graylog2-server/commit/df6abfe77df082ce4ba8640692e312a95ffbb0bb", "message": "Fix linter warnings", "committedDate": "2020-04-21T08:48:12Z", "type": "commit"}, {"oid": "5a0b8a9fe5347e71077cd9953e4f45115e87c013", "url": "https://github.com/Graylog2/graylog2-server/commit/5a0b8a9fe5347e71077cd9953e4f45115e87c013", "message": "Implement custom Exception for missing stream permissions\n\nPrior to this change, we did not provide any information about\nwhat streams the user is lacking permissions.\n\nThis change will implement a new exception where a set of stream\nids can be passed to, so the frontend can display them in a\norderly fashion.\n\nFixes #7505", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "5e0e1393effc8959ff9d97dd011073623bd3af1f", "url": "https://github.com/Graylog2/graylog2-server/commit/5e0e1393effc8959ff9d97dd011073623bd3af1f", "message": "Use http error code NOT_ACCEPTABLE (406)", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "0c713b0f9c4c5bd024b77fa90fd0972fbf3e22bc", "url": "https://github.com/Graylog2/graylog2-server/commit/0c713b0f9c4c5bd024b77fa90fd0972fbf3e22bc", "message": "Raise MissingStreamPermissionException for having no streams at all\n\nPrior to this change, if a user did not have permissions to any streams\nwe raised a exception which would lead to an 404 error on the\nfrontend.\n\nThis change will raise an MissingStreamPermissionException which\nwill mapped to a NOT_ACCETPABLE (406) error code which will be\ntreated differently on the frontend side and not show a not found error.", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "c7178c1f87c708a7e99353c4a9c867cbc61d8646", "url": "https://github.com/Graylog2/graylog2-server/commit/c7178c1f87c708a7e99353c4a9c867cbc61d8646", "message": "Display error info on search pages when search execution fails", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "d3ca3caf241548dd906b1c372f31a19397416030", "url": "https://github.com/Graylog2/graylog2-server/commit/d3ca3caf241548dd906b1c372f31a19397416030", "message": "Add SearchExecutionErrors tests", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "fc91947036cdd5d412fde49f3c66a3b20343fdc0", "url": "https://github.com/Graylog2/graylog2-server/commit/fc91947036cdd5d412fde49f3c66a3b20343fdc0", "message": "Change SearchExecutionErrors structure", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "b31bb05a68c80971b07a81e03088a58cb253c880", "url": "https://github.com/Graylog2/graylog2-server/commit/b31bb05a68c80971b07a81e03088a58cb253c880", "message": "Catch all search data fetching errors", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "396c99ce388420617b4f337e9c559dc46b0e791f", "url": "https://github.com/Graylog2/graylog2-server/commit/396c99ce388420617b4f337e9c559dc46b0e791f", "message": "Add ExtendedSearchPage test for failing search execution", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "f371287178fceb06a382106aa6fa5af4e2d421b5", "url": "https://github.com/Graylog2/graylog2-server/commit/f371287178fceb06a382106aa6fa5af4e2d421b5", "message": "Add prop types for SearchExecutionErrors component", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "b0ad7da75dcace08c186581552a9846892085489", "url": "https://github.com/Graylog2/graylog2-server/commit/b0ad7da75dcace08c186581552a9846892085489", "message": "Adjust error info text", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "9d0e69a0e9a5210772a1231e7f3fd4653e7919d9", "url": "https://github.com/Graylog2/graylog2-server/commit/9d0e69a0e9a5210772a1231e7f3fd4653e7919d9", "message": "Add empty row", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "dc3207778459d29c71d56d819ae29f98ea8c65f2", "url": "https://github.com/Graylog2/graylog2-server/commit/dc3207778459d29c71d56d819ae29f98ea8c65f2", "message": "Add missing headers", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "902560bc73ee8810a321968d17db53c93193a037", "url": "https://github.com/Graylog2/graylog2-server/commit/902560bc73ee8810a321968d17db53c93193a037", "message": "Fix failing backend tests", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "9bc3b214fc8d504be3f3e59d38410f664aa2dfa6", "url": "https://github.com/Graylog2/graylog2-server/commit/9bc3b214fc8d504be3f3e59d38410f664aa2dfa6", "message": "Change error code from 406 to 403", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "828e3d36913761c0143ba29abbd22d8850c680bf", "url": "https://github.com/Graylog2/graylog2-server/commit/828e3d36913761c0143ba29abbd22d8850c680bf", "message": "Only show missing stream error info in search execution error component when error contains streams", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "b9bd4a2b71028f493c7d0127956b3c95546cde3c", "url": "https://github.com/Graylog2/graylog2-server/commit/b9bd4a2b71028f493c7d0127956b3c95546cde3c", "message": "Implement search execution error handling in SearchStore instead of using .catch inside ExtendedSearchPage", "committedDate": "2020-04-21T09:01:29Z", "type": "commit"}, {"oid": "20efad8948c2c8cd2c69622aa060af0317586ea2", "url": "https://github.com/Graylog2/graylog2-server/commit/20efad8948c2c8cd2c69622aa060af0317586ea2", "message": "Allow customization of FetchProvider unauthorized and forbidden request hadnling", "committedDate": "2020-04-21T09:02:06Z", "type": "commit"}, {"oid": "47994379124988b316cb9f10ee3e6751266c34f0", "url": "https://github.com/Graylog2/graylog2-server/commit/47994379124988b316cb9f10ee3e6751266c34f0", "message": "Do not redirect user to 404 page on missing streams error during search execution", "committedDate": "2020-04-21T09:02:06Z", "type": "commit"}, {"oid": "484750c3545511ebf4f9f5a0f453d650e16d73da", "url": "https://github.com/Graylog2/graylog2-server/commit/484750c3545511ebf4f9f5a0f453d650e16d73da", "message": "Remove console.log", "committedDate": "2020-04-21T09:02:06Z", "type": "commit"}, {"oid": "fdabf826c62e39a6ad0d3cadd5e91b423aad43f5", "url": "https://github.com/Graylog2/graylog2-server/commit/fdabf826c62e39a6ad0d3cadd5e91b423aad43f5", "message": "Change type for missing stream perission error", "committedDate": "2020-04-21T09:02:06Z", "type": "commit"}, {"oid": "f3cc5cefa048ae13a340a8de1004e2f3c614fc27", "url": "https://github.com/Graylog2/graylog2-server/commit/f3cc5cefa048ae13a340a8de1004e2f3c614fc27", "message": "Add test for error handling in ExtendedSearchPage", "committedDate": "2020-04-21T09:02:06Z", "type": "commit"}, {"oid": "3fa5069582817986005f23a4ac8c7c8820c8ff70", "url": "https://github.com/Graylog2/graylog2-server/commit/3fa5069582817986005f23a4ac8c7c8820c8ff70", "message": "Allow customization of FetchProvider unauthorized and forbidden request handling for all fetch methods", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "67c1654a6890d7057d1a8e58f7c136a6c78566e5", "url": "https://github.com/Graylog2/graylog2-server/commit/67c1654a6890d7057d1a8e58f7c136a6c78566e5", "message": "Change missing stream permissions error message", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "7a27fa0e45781b9dff3999dbc6c5eee08233807a", "url": "https://github.com/Graylog2/graylog2-server/commit/7a27fa0e45781b9dff3999dbc6c5eee08233807a", "message": "Fix SearchExecutionErrors test", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "34ad4342ed93101f3855f6fade8d67445c30b382", "url": "https://github.com/Graylog2/graylog2-server/commit/34ad4342ed93101f3855f6fade8d67445c30b382", "message": "Fix typo in ExtendedSearchPage test", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "ad66ce902aeb6cb4046674db2865514afcefa935", "url": "https://github.com/Graylog2/graylog2-server/commit/ad66ce902aeb6cb4046674db2865514afcefa935", "message": "Fix linting errors", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "70e7911bc3fa027fe0c5ada7f37521c7f89964af", "url": "https://github.com/Graylog2/graylog2-server/commit/70e7911bc3fa027fe0c5ada7f37521c7f89964af", "message": "Only avoid redirect when search execution error has type MissingStreamPermission", "committedDate": "2020-04-21T09:02:56Z", "type": "commit"}, {"oid": "26a78a8986a8a517e6c3827a06e89dc87777f32f", "url": "https://github.com/Graylog2/graylog2-server/commit/26a78a8986a8a517e6c3827a06e89dc87777f32f", "message": "Implement unauthorized and forbidden handling as customizable builder methods for fetch provider", "committedDate": "2020-04-21T09:03:11Z", "type": "commit"}, {"oid": "78e6ecf54126375ca1a43089f8bb273ecbac8a1c", "url": "https://github.com/Graylog2/graylog2-server/commit/78e6ecf54126375ca1a43089f8bb273ecbac8a1c", "message": "Remove Object type from SearchExectuionErrors", "committedDate": "2020-04-21T09:03:11Z", "type": "commit"}, {"oid": "a8f7e0763d2b11404ed4fbb6813bd675ef95e9be", "url": "https://github.com/Graylog2/graylog2-server/commit/a8f7e0763d2b11404ed4fbb6813bd675ef95e9be", "message": "Type search execution errors as FetchErrors", "committedDate": "2020-04-21T09:03:11Z", "type": "commit"}, {"oid": "1aa9f4b392038ade81d7bcf1fa0e3c90f13052c9", "url": "https://github.com/Graylog2/graylog2-server/commit/1aa9f4b392038ade81d7bcf1fa0e3c90f13052c9", "message": "Fix typo", "committedDate": "2020-04-21T09:03:11Z", "type": "commit"}, {"oid": "a8d4e73162c130d521fe838b9999a0dbb9a48464", "url": "https://github.com/Graylog2/graylog2-server/commit/a8d4e73162c130d521fe838b9999a0dbb9a48464", "message": "Fix merge conflict", "committedDate": "2020-04-21T09:07:17Z", "type": "commit"}, {"oid": "b364139ecd7ab278f0b2ccf1ba900eb674432fdc", "url": "https://github.com/Graylog2/graylog2-server/commit/b364139ecd7ab278f0b2ccf1ba900eb674432fdc", "message": "Revert missing stream permissions error handling and report error instead\n* Remove FetchProvider, SearchJob and ExtendedSearchPage changes\n* Add StreamPermissionError to ReportedErrors\n* Create page to display StreamPermissionErrors", "committedDate": "2020-04-21T10:24:37Z", "type": "commit"}, {"oid": "b364139ecd7ab278f0b2ccf1ba900eb674432fdc", "url": "https://github.com/Graylog2/graylog2-server/commit/b364139ecd7ab278f0b2ccf1ba900eb674432fdc", "message": "Revert missing stream permissions error handling and report error instead\n* Remove FetchProvider, SearchJob and ExtendedSearchPage changes\n* Add StreamPermissionError to ReportedErrors\n* Create page to display StreamPermissionErrors", "committedDate": "2020-04-21T10:24:37Z", "type": "forcePushed"}, {"oid": "0f5b50eb40463bbf70d724485c1afc762c5d9fef", "url": "https://github.com/Graylog2/graylog2-server/commit/0f5b50eb40463bbf70d724485c1afc762c5d9fef", "message": "Report real FetchError on unauthorized requests", "committedDate": "2020-04-21T12:16:32Z", "type": "commit"}, {"oid": "be1bb3c3a4231f35907995193f3076bb941f5b91", "url": "https://github.com/Graylog2/graylog2-server/commit/be1bb3c3a4231f35907995193f3076bb941f5b91", "message": "ADd test for SteamPermissionErrorPage", "committedDate": "2020-04-21T12:19:52Z", "type": "commit"}, {"oid": "df8770641e5c4079e29f42f19b9b23f88d7f32f2", "url": "https://github.com/Graylog2/graylog2-server/commit/df8770641e5c4079e29f42f19b9b23f88d7f32f2", "message": "Merge branch 'master' into issue-7505-raise-custom-exception-for-missing-stream-permission", "committedDate": "2020-04-21T12:34:24Z", "type": "commit"}, {"oid": "7cdbf2c770e2169771a4cc29eb5f6546a9f311db", "url": "https://github.com/Graylog2/graylog2-server/commit/7cdbf2c770e2169771a4cc29eb5f6546a9f311db", "message": "Remove error handling from SeachStore", "committedDate": "2020-04-21T12:37:11Z", "type": "commit"}, {"oid": "d9ac91da17f5eb14e5a7330be5dc5e73c370f1b7", "url": "https://github.com/Graylog2/graylog2-server/commit/d9ac91da17f5eb14e5a7330be5dc5e73c370f1b7", "message": "Add missing stream check to FieldTypesResource\n\nPrior to this change, if a user requested the fields to a stream\nand he did not have the necessary stream permissions he got a\ngeneric ForbiddenAccess error.\n\nThis change will return a MissingStremPermission error with the\nmissing steram ids.", "committedDate": "2020-04-21T13:24:43Z", "type": "commit"}, {"oid": "cb04080a47081a236cbc413f7c0cdf7dab14108a", "url": "https://github.com/Graylog2/graylog2-server/commit/cb04080a47081a236cbc413f7c0cdf7dab14108a", "message": "Show all missing streams in field types resource", "committedDate": "2020-04-21T13:24:56Z", "type": "commit"}, {"oid": "f60e7656308e638422ca49b7386bdc24ceb01e80", "url": "https://github.com/Graylog2/graylog2-server/commit/f60e7656308e638422ca49b7386bdc24ceb01e80", "message": "Adjust missing stream permission page description", "committedDate": "2020-04-21T13:36:28Z", "type": "commit"}, {"oid": "ebd4e1ee3bf95bcf937278acecbb361b2503efe7", "url": "https://github.com/Graylog2/graylog2-server/commit/ebd4e1ee3bf95bcf937278acecbb361b2503efe7", "message": "Merge branch 'master' into issue-7505-raise-custom-exception-for-missing-stream-permission", "committedDate": "2020-04-22T06:29:59Z", "type": "commit"}, {"oid": "f1323b625d44c4dd171f6a96fb0f7b1719979a09", "url": "https://github.com/Graylog2/graylog2-server/commit/f1323b625d44c4dd171f6a96fb0f7b1719979a09", "message": "Remove not neeeded test change", "committedDate": "2020-04-22T06:32:45Z", "type": "commit"}, {"oid": "313200f83442c409956157d3d8536836d1ff0e1c", "url": "https://github.com/Graylog2/graylog2-server/commit/313200f83442c409956157d3d8536836d1ff0e1c", "message": "Fixing typo", "committedDate": "2020-04-22T06:34:06Z", "type": "commit"}, {"oid": "4cac3498db397a1f3ab33c720291d8fc6e30a4f5", "url": "https://github.com/Graylog2/graylog2-server/commit/4cac3498db397a1f3ab33c720291d8fc6e30a4f5", "message": "Remove not needed paragraph from stream permission error details", "committedDate": "2020-04-22T06:36:04Z", "type": "commit"}, {"oid": "e39cd548e951d213fcfa990faa4c0370946e30c8", "url": "https://github.com/Graylog2/graylog2-server/commit/e39cd548e951d213fcfa990faa4c0370946e30c8", "message": "Include missing stream ids info in text which can be copied with clipboard button", "committedDate": "2020-04-22T07:10:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjczMzg0Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412733843", "bodyText": "This part is also the base to display the error message for 404 api requests, instead of redirecting to /notfound.\nE.g. for the dashboard and saved search page, we just need to adjust the ViewLoader, once we have a custom ReportedError.", "author": "linuspahl", "createdAt": "2020-04-22T07:20:57Z", "path": "graylog2-web-interface/src/logic/errors/ReportedErrors.js", "diffHunk": "@@ -23,8 +28,20 @@ export const createReactError = (error: $PropertyType<ReactError, 'error'>, info\n   info,\n   type: ReactErrorType,\n });\n-\n export const createUnauthorizedError = (error: $PropertyType<UnauthorizedError, 'error'>): UnauthorizedError => ({\n   error,\n   type: UnauthorizedErrorType,\n });\n+export const createStreamPermissionError = (error: $PropertyType<StreamPermissionError, 'error'>): StreamPermissionError => ({\n+  error,\n+  type: StreamPermissionErrorType,\n+});\n+\n+export const createFromFetchError = (error: FetchError) => {\n+  switch (error.status) {\n+    case 403:\n+      return error?.additional?.body?.type === 'MissingStreamPermission' ? createStreamPermissionError(error) : createUnauthorizedError(error);\n+    default:\n+      throw Error(`Provided FetchError is not a valid ReportedError because status code ${error.status} is not supported`);\n+  }", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjczNzkxNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412737915", "bodyText": "While having another look, I realised we were not providing a real FetchError when creating a ReportedError.\nI've decided to create a FetchError instead of using the SuperagentPromiseError, because the checks we are doing when we create a FetchError are still useful and it is easier to work with our own interface.", "author": "linuspahl", "createdAt": "2020-04-22T07:27:14Z", "path": "graylog2-web-interface/src/logic/rest/FetchProvider.js", "diffHunk": "@@ -78,15 +80,15 @@ export class Builder {\n \n         // Redirect to the start page if a user is logged in but not allowed to access a certain HTTP API.\n         if (SessionStore.isLoggedIn() && error.status === 403) {\n-          ErrorsActions.report(createUnauthorizedError(error));\n+          ErrorsActions.report(createFromFetchError(fetchError));", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjczOTg4OQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412739889", "bodyText": "One side note regarding the FetchProvider, during the development we've discussed the unification of redundant code. I did not implemented these changes inside this PR, because they are also part of the CSV export PR #7709", "author": "linuspahl", "createdAt": "2020-04-22T07:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjczNzkxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MTQwMA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412781400", "bodyText": "Typo: indlude -> include", "author": "dennisoelkers", "createdAt": "2020-04-22T08:30:42Z", "path": "graylog2-web-interface/src/pages/StreamPermissionErrorPage.jsx", "diffHunk": "@@ -0,0 +1,34 @@\n+// @flow strict\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+import { withRouter } from 'react-router';\n+\n+import { FetchError } from 'logic/rest/FetchProvider';\n+\n+import UnauthorizedErrorPage from './UnauthorizedErrorPage';\n+\n+type Props = {\n+  error: FetchError,\n+};\n+\n+const StreamPermissionErrorPage = ({ error }: Props) => {\n+  const description = (\n+    <>\n+      <p>This resource includes streams you do not have permissions to.</p>\n+      <p>Please contact your administrator and provide the error details which indlude a list of streams you need access to.</p>", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MTYwOQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412781609", "bodyText": "Not 100% sure, but I think it should be you do not have permissions _for_", "author": "dennisoelkers", "createdAt": "2020-04-22T08:30:59Z", "path": "graylog2-web-interface/src/pages/StreamPermissionErrorPage.jsx", "diffHunk": "@@ -0,0 +1,34 @@\n+// @flow strict\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+import { withRouter } from 'react-router';\n+\n+import { FetchError } from 'logic/rest/FetchProvider';\n+\n+import UnauthorizedErrorPage from './UnauthorizedErrorPage';\n+\n+type Props = {\n+  error: FetchError,\n+};\n+\n+const StreamPermissionErrorPage = ({ error }: Props) => {\n+  const description = (\n+    <>\n+      <p>This resource includes streams you do not have permissions to.</p>", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA0NTQ5Nw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413045497", "bodyText": "I thought about this as well and found examples for both cases, but having a look at the oxford dictionary it is \"permissions for somebody/something\" / \"permissions to do something\".", "author": "linuspahl", "createdAt": "2020-04-22T14:44:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MTYwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU3NjUyMQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413576521", "bodyText": "But then, it is permissions for (streams), right?", "author": "dennisoelkers", "createdAt": "2020-04-23T07:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MTYwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU4NDc4OQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413584789", "bodyText": "It is and I've changed it accordingly.", "author": "linuspahl", "createdAt": "2020-04-23T07:40:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MTYwOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MjU3Ng==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412782576", "bodyText": "Is additional always present if error is, or do we want to make it optional too?", "author": "dennisoelkers", "createdAt": "2020-04-22T08:32:14Z", "path": "graylog2-web-interface/src/pages/StreamPermissionErrorPage.jsx", "diffHunk": "@@ -0,0 +1,34 @@\n+// @flow strict\n+import React from 'react';\n+import PropTypes from 'prop-types';\n+import { withRouter } from 'react-router';\n+\n+import { FetchError } from 'logic/rest/FetchProvider';\n+\n+import UnauthorizedErrorPage from './UnauthorizedErrorPage';\n+\n+type Props = {\n+  error: FetchError,\n+};\n+\n+const StreamPermissionErrorPage = ({ error }: Props) => {\n+  const description = (\n+    <>\n+      <p>This resource includes streams you do not have permissions to.</p>\n+      <p>Please contact your administrator and provide the error details which indlude a list of streams you need access to.</p>\n+    </>\n+  );\n+  const streamIds = error?.additional.body?.streams;", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzA0OTYxNg==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413049616", "bodyText": "Good catch, the FetchError should always have additional, but we are handling errors with an unknown format e.g. in the UnauthorizedErrorPage as well, just in case,  so I added the another check.", "author": "linuspahl", "createdAt": "2020-04-22T14:48:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4MjU3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjc4NDA3OA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r412784078", "bodyText": "Whenever we do not want the result of a boolean expression, we should now use ?? instead of ||. (As long as in this case we do not want to support setting the description prop to null to explicitly disable showing a description)", "author": "dennisoelkers", "createdAt": "2020-04-22T08:34:13Z", "path": "graylog2-web-interface/src/pages/UnauthorizedErrorPage.jsx", "diffHunk": "@@ -8,37 +8,56 @@ import { FetchError } from 'logic/rest/FetchProvider';\n import { Icon, ClipboardButton } from 'components/common';\n import ErrorPage from 'components/errors/ErrorPage';\n \n+const createErrorMessageString = (errorDetails: ?string, pageDetails: string, errorMessage: string) => {\n+  const defaultText = `${pageDetails}\\n${errorMessage}`;\n+  if (errorDetails) {\n+    return `${errorDetails}\\n${defaultText}`;\n+  }\n+  return defaultText;\n+};\n+\n type Props = {\n+  description?: React.Node,\n   error: FetchError,\n+  errorDetails?: string,\n   location: {\n     pathname: string,\n   },\n+  title: string,\n };\n \n-const UnauthorizedErrorPage = ({ error, location: { pathname } }: Props) => {\n+const UnauthorizedErrorPage = ({ error, errorDetails, title, description, location: { pathname } }: Props) => {\n   const errorMessage = error?.message || JSON.stringify(error);\n   const pageDetails = `The permissions check for the following request failed,\\nwhile trying to access ${pathname}.`;\n-  const description = (\n+  const defaultDescription = (\n     <>\n       <p>You do not have the required permissions to view this resource.</p>\n       <p>Please contact your administrator and provide the error details.</p>\n     </>\n   );\n+  const errorMessageString = createErrorMessageString(errorDetails, pageDetails, errorMessage);\n   return (\n-    <ErrorPage title=\"Missing Permissions\" description={description}>\n+    <ErrorPage title={title} description={description || defaultDescription}>", "originalCommit": "e39cd548e951d213fcfa990faa4c0370946e30c8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "aff819e470334185e2999e94b59f427899c3b52f", "url": "https://github.com/Graylog2/graylog2-server/commit/aff819e470334185e2999e94b59f427899c3b52f", "message": "Fixing typos", "committedDate": "2020-04-22T14:43:38Z", "type": "commit"}, {"oid": "3d2a51cddccd4cdd71b7f0753e51c9b98f3d274f", "url": "https://github.com/Graylog2/graylog2-server/commit/3d2a51cddccd4cdd71b7f0753e51c9b98f3d274f", "message": "Add optional check for error.additional in StreamPermissionErrorPage", "committedDate": "2020-04-22T14:49:50Z", "type": "commit"}, {"oid": "0549b56c939dea22c54c6bfa4e5debc03eae4981", "url": "https://github.com/Graylog2/graylog2-server/commit/0549b56c939dea22c54c6bfa4e5debc03eae4981", "message": "Add proper check when displaying default description in UnauthorizedErrorPage", "committedDate": "2020-04-22T14:54:03Z", "type": "commit"}, {"oid": "cfa7112f3f30866d0f4b89431a71b3432fdcfe84", "url": "https://github.com/Graylog2/graylog2-server/commit/cfa7112f3f30866d0f4b89431a71b3432fdcfe84", "message": "Update StreamPermissionErrorPage test", "committedDate": "2020-04-22T14:55:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU4NTcwNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413585705", "bodyText": "This component needs a better name, imo. Maybe something like ReportedErrorBoundary? It is not a react error boundary, nevertheless that's what it is doing: Rendering its children or an error if present. Renaming the component also removes the need to rename the ReportedError type import.", "author": "dennisoelkers", "createdAt": "2020-04-23T07:41:59Z", "path": "graylog2-web-interface/src/components/errors/ReportedError.jsx", "diffHunk": "@@ -4,10 +4,11 @@ import { useState, useEffect } from 'react';\n import { withRouter } from 'react-router';\n \n import ErrorsActions from 'actions/errors/ErrorsActions';\n-import { type ReportedError as ReportedErrorType, ReactErrorType, UnauthorizedErrorType } from 'logic/errors/ReportedErrors';\n+import { type ReportedError as ReportedErrorType, ReactErrorType, UnauthorizedErrorType, StreamPermissionErrorType } from 'logic/errors/ReportedErrors';\n \n import RuntimeErrorPage from 'pages/RuntimeErrorPage';\n import UnauthorizedErrorPage from 'pages/UnauthorizedErrorPage';\n+import StreamPermissionErrorPage from 'pages/StreamPermissionErrorPage';\n \n const ReportedError = ({ children, router }) => {", "originalCommit": "cfa7112f3f30866d0f4b89431a71b3432fdcfe84", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzYwNDQzNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413604435", "bodyText": "I agree, my only problem was I connect \"ErrorBoundary\" in React with componentDidCatch, but of course it is a more meaningful name.", "author": "linuspahl", "createdAt": "2020-04-23T08:09:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU4NTcwNQ=="}], "type": "inlineReview"}, {"oid": "c3208e526364a0c8dfb0b23a286839019fb35557", "url": "https://github.com/Graylog2/graylog2-server/commit/c3208e526364a0c8dfb0b23a286839019fb35557", "message": "Rename ReportedError to ReportedErrorBoundary", "committedDate": "2020-04-23T08:01:25Z", "type": "commit"}, {"oid": "bc19e3d1affb518b37d2cfb5ac6ce26b5befde3e", "url": "https://github.com/Graylog2/graylog2-server/commit/bc19e3d1affb518b37d2cfb5ac6ce26b5befde3e", "message": "Check for correct missing streams in exception of test", "committedDate": "2020-04-23T08:10:07Z", "type": "commit"}, {"oid": "6fc7f67078b57c05758c514dcb08f55176fd3ba0", "url": "https://github.com/Graylog2/graylog2-server/commit/6fc7f67078b57c05758c514dcb08f55176fd3ba0", "message": "Remove not needed ReportedErrors type for NotFoundErrors", "committedDate": "2020-04-23T08:30:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzYxNDA0Nw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7782#discussion_r413614047", "bodyText": "This constant is not used, from what I can see. I guess we will introduce it later, but let's remove it for now if it's not used yet.", "author": "dennisoelkers", "createdAt": "2020-04-23T08:23:47Z", "path": "graylog2-web-interface/src/logic/errors/ReportedErrors.js", "diffHunk": "@@ -3,18 +3,23 @@\n import { FetchError } from 'logic/rest/FetchProvider';\n \n export const ReactErrorType = 'ReactError';\n+export const NotFoundErrorType = 'NotFoundError';", "originalCommit": "bc19e3d1affb518b37d2cfb5ac6ce26b5befde3e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}