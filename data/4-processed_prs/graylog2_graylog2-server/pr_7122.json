{"pr_number": 7122, "pr_title": "Use Urlwhitelist API instead of clusterConfig API", "pr_createdAt": "2020-01-09T09:38:43Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7122", "timeline": [{"oid": "0ce05e5e89fee4ff4198d65d6122fb668dff021f", "url": "https://github.com/Graylog2/graylog2-server/commit/0ce05e5e89fee4ff4198d65d6122fb668dff021f", "message": "Use Urlwhitelist API instead of clusterConfig API\n\nBefore this change we were using ClusterConfig API to update\nUrlwhitelist, result of that audit log shows cluster config event\ninstead of Urlwhitelist event.\n\n* Add updateWhitelist method to store\n* Update ConfigurationsPage to use updateWhitelist when updating\nurlwhitelist", "committedDate": "2020-01-09T09:33:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY0NzczMg==", "url": "https://github.com/Graylog2/graylog2-server/pull/7122#discussion_r364647732", "bodyText": "We should adjust the wording here to refer to the URL whitelist instead of \"Search\".", "author": "thll", "createdAt": "2020-01-09T09:55:33Z", "path": "graylog2-web-interface/src/stores/configurations/ConfigurationsStore.js", "diffHunk": "@@ -115,6 +115,24 @@ const ConfigurationsStore = Reflux.createStore({\n     ConfigurationActions.update.promise(promise);\n   },\n \n+  updateWhitelist(configType, config) {\n+    const promise = fetch('PUT', URLUtils.qualifyUrl('/system/urlwhitelist'), config);\n+\n+    promise.then(\n+      () => {\n+        this.configuration[configType] = config;\n+        this.propagateChanges();\n+        UserNotification.success('Configuration updated successfully');\n+        return config;\n+      },\n+      (error) => {\n+        UserNotification.error(`Search config update failed: ${error}`, `Could not update search config: ${configType}`);", "originalCommit": "0ce05e5e89fee4ff4198d65d6122fb668dff021f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY2MDE3Ng==", "url": "https://github.com/Graylog2/graylog2-server/pull/7122#discussion_r364660176", "bodyText": "sure ! Thank you for the catch.", "author": "ousmaneo", "createdAt": "2020-01-09T10:21:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDY0NzczMg=="}], "type": "inlineReview"}, {"oid": "ef27b5f1a076c04c8fdb7c507d053cae0846e751", "url": "https://github.com/Graylog2/graylog2-server/commit/ef27b5f1a076c04c8fdb7c507d053cae0846e751", "message": "Change wording", "committedDate": "2020-01-09T10:21:59Z", "type": "commit"}]}