{"pr_number": 7159, "pr_title": "Implement overlay for select menu", "pr_createdAt": "2020-01-13T13:45:42Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7159", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMTU4Ng==", "url": "https://github.com/Graylog2/graylog2-server/pull/7159#discussion_r365811586", "bodyText": "Would it make sense to implement useMemo for this function call as well?", "author": "linuspahl", "createdAt": "2020-01-13T13:47:17Z", "path": "graylog2-web-interface/src/views/components/Select.jsx", "diffHunk": "@@ -62,9 +99,10 @@ const Select = ({ components, styles, ...rest }: Props) => {\n     multiValueLabel,\n     multiValueRemove,\n     valueContainer,\n+    menu: menu(selectRef),", "originalCommit": "d4ee1dc231ec287ae559bfff6b793389fd4e1d19", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMjk3Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7159#discussion_r365812973", "bodyText": "Should I make this min width optional?\nRight now I could not find a use case where the min width of 200px is not suitable.", "author": "linuspahl", "createdAt": "2020-01-13T13:50:02Z", "path": "graylog2-web-interface/src/views/components/Select.jsx", "diffHunk": "@@ -11,6 +14,20 @@ const MultiValueRemove = (props) => {\n   );\n };\n \n+const OverlayInner = ({ children, style }: {children: Node, style?: Object}) => React.Children.map(children,\n+  child => React.cloneElement(child, { style: Object.assign({}, style, child.props.style) }));\n+\n+const menu = (selectRef) => {\n+  const defaultMinWidth = 200;", "originalCommit": "d4ee1dc231ec287ae559bfff6b793389fd4e1d19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ1MzE5NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7159#discussion_r368453194", "bodyText": "I think it is fine that way. I would wait for the need.", "author": "kmerz", "createdAt": "2020-01-20T09:49:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxMjk3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxNDAyNQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/7159#discussion_r365814025", "bodyText": "With this implementation we are defining the width without a unit. The px info gets added automatically. Do you prefer adding px manually with a template string, to be more explicit?", "author": "linuspahl", "createdAt": "2020-01-13T13:52:18Z", "path": "graylog2-web-interface/src/views/components/Select.jsx", "diffHunk": "@@ -11,6 +14,20 @@ const MultiValueRemove = (props) => {\n   );\n };\n \n+const OverlayInner = ({ children, style }: {children: Node, style?: Object}) => React.Children.map(children,\n+  child => React.cloneElement(child, { style: Object.assign({}, style, child.props.style) }));\n+\n+const menu = (selectRef) => {\n+  const defaultMinWidth = 200;\n+  const containerWidth = get(selectRef, 'current.select.controlRef.offsetWidth');\n+  const width = containerWidth > defaultMinWidth ? containerWidth : defaultMinWidth;\n+  return base => ({\n+    ...base,\n+    position: 'relative',\n+    width,", "originalCommit": "d4ee1dc231ec287ae559bfff6b793389fd4e1d19", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTkzOTczMA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7159#discussion_r365939730", "bodyText": "I think being explicit with the width is a good thing 50 does not tell me what width it will be... is that px, vw, em, etc", "author": "kyleknighted", "createdAt": "2020-01-13T17:48:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTgxNDAyNQ=="}], "type": "inlineReview"}, {"oid": "4a3307c3860505344201a5d17d4af0f399a4bb7e", "url": "https://github.com/Graylog2/graylog2-server/commit/4a3307c3860505344201a5d17d4af0f399a4bb7e", "message": "Implement react overlay for select menu", "committedDate": "2020-01-15T07:56:31Z", "type": "commit"}, {"oid": "a56e7bc1c736b6b298d91bd2f6d1101d44fe96c2", "url": "https://github.com/Graylog2/graylog2-server/commit/a56e7bc1c736b6b298d91bd2f6d1101d44fe96c2", "message": "Remove not needed Select menu overlay props", "committedDate": "2020-01-15T07:56:31Z", "type": "commit"}, {"oid": "4e8d0adbff4470b1d285fa13b8a070a55f43c079", "url": "https://github.com/Graylog2/graylog2-server/commit/4e8d0adbff4470b1d285fa13b8a070a55f43c079", "message": "Add needed showUpdatePosition for Select menu overview", "committedDate": "2020-01-15T07:56:31Z", "type": "commit"}, {"oid": "f615353b00e8d296a606e7cf471f2d654f9d50c4", "url": "https://github.com/Graylog2/graylog2-server/commit/f615353b00e8d296a606e7cf471f2d654f9d50c4", "message": "Use unit when defining Select menu width", "committedDate": "2020-01-15T07:56:31Z", "type": "commit"}, {"oid": "6067017b73e8cdff7da23a6b52846b94bc0d04aa", "url": "https://github.com/Graylog2/graylog2-server/commit/6067017b73e8cdff7da23a6b52846b94bc0d04aa", "message": "Break long option names inside Select menu", "committedDate": "2020-01-15T07:56:32Z", "type": "commit"}, {"oid": "6067017b73e8cdff7da23a6b52846b94bc0d04aa", "url": "https://github.com/Graylog2/graylog2-server/commit/6067017b73e8cdff7da23a6b52846b94bc0d04aa", "message": "Break long option names inside Select menu", "committedDate": "2020-01-15T07:56:32Z", "type": "forcePushed"}, {"oid": "940276555d7fc7eb90ec1c10a2240ba3433e100e", "url": "https://github.com/Graylog2/graylog2-server/commit/940276555d7fc7eb90ec1c10a2240ba3433e100e", "message": "Implement useMemo for Select menu style creation", "committedDate": "2020-01-16T10:26:08Z", "type": "commit"}]}