{"pr_number": 9307, "pr_title": "Avoid using throw by displaying an Alert", "pr_createdAt": "2020-10-29T13:44:11Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/9307", "timeline": [{"oid": "9916d9568b9601bf5c72ca81847d68fcc204ad09", "url": "https://github.com/Graylog2/graylog2-server/commit/9916d9568b9601bf5c72ca81847d68fcc204ad09", "message": "Avoid using throw by displaying an Alert\n\n## Motivation\nPrior to this change, when we had an runtime error we rendered the error\npage to the user even though he might have been able to workarround an\nissue.\n\n## Description\nThis change implements a ErrorAlert component which is closable and\nwhich will display an runtime error or warning. It replaces the\nwarnings already implemented and does also replace the `throw` errors\nfor users and roles components.", "committedDate": "2020-10-29T13:39:48Z", "type": "commit"}, {"oid": "591e892e1b109f9a17be60f3cc22ea8f492c6909", "url": "https://github.com/Graylog2/graylog2-server/commit/591e892e1b109f9a17be60f3cc22ea8f492c6909", "message": "Add missing tests", "committedDate": "2020-10-29T14:39:57Z", "type": "commit"}, {"oid": "06cc475d46ac893602da09caf6ad88f01bf09461", "url": "https://github.com/Graylog2/graylog2-server/commit/06cc475d46ac893602da09caf6ad88f01bf09461", "message": "Fix flow and linter warnings", "committedDate": "2020-10-29T15:31:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA0OTU5NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#discussion_r515049594", "bodyText": "Lets reset the error somewhere, otherwise it will not get removed on a successful request.", "author": "linuspahl", "createdAt": "2020-10-30T12:02:33Z", "path": "graylog2-web-interface/src/components/permissions/RolesSelector.jsx", "diffHunk": "@@ -44,7 +44,7 @@ const _options = (roles, assignedRolesIds, identifier) => roles\n   .toArray()\n   .map((r) => ({ label: r.name, value: r.name, role: r }));\n \n-const _assignRole = (selectedRoleName, roles, onSubmit, setSelectedRoleName, setIsSubmitting) => {\n+const _assignRole = (selectedRoleName, roles, onSubmit, setSelectedRoleName, setIsSubmitting, setError) => {", "originalCommit": "06cc475d46ac893602da09caf6ad88f01bf09461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA1MDI2Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/9307#discussion_r515050263", "bodyText": "We should somewhere reset the error in this case as well.", "author": "linuspahl", "createdAt": "2020-10-30T12:03:59Z", "path": "graylog2-web-interface/src/components/roles/RoleEdit/UsersSelector.jsx", "diffHunk": "@@ -88,7 +89,9 @@ const UsersSelector = ({ role, onSubmit }: Props) => {\n     })));\n \n     if (!userOverview) {\n-      throw new Error(`Unable to find user with name ${user} in ${users.map((u) => u.username).join(', ')}`);\n+      setError(`This is an exceptional error! Unable to find user with name ${user} in ${users.map((u) => u.username).join(', ')}`);", "originalCommit": "06cc475d46ac893602da09caf6ad88f01bf09461", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "805c7b5fd686b6ad4627f0e2b7020da49981a079", "url": "https://github.com/Graylog2/graylog2-server/commit/805c7b5fd686b6ad4627f0e2b7020da49981a079", "message": "Reset Error if the next request was successfull", "committedDate": "2020-11-02T08:41:24Z", "type": "commit"}]}