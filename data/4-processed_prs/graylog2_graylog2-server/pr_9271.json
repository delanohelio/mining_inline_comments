{"pr_number": 9271, "pr_title": "Render conditionals for Cloud specific elements", "pr_createdAt": "2020-10-26T09:47:22Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/9271", "timeline": [{"oid": "a53ff966c381fcac79180bbe7db7f1edc4c3656f", "url": "https://github.com/Graylog2/graylog2-server/commit/a53ff966c381fcac79180bbe7db7f1edc4c3656f", "message": "HOC to hide hide UI elements when cloud", "committedDate": "2020-10-26T08:35:20Z", "type": "commit"}, {"oid": "1ad8bf087358fd43c94b3dbb4dc35fd18e7dd43c", "url": "https://github.com/Graylog2/graylog2-server/commit/1ad8bf087358fd43c94b3dbb4dc35fd18e7dd43c", "message": "allow filtering menu items", "committedDate": "2020-10-26T09:26:37Z", "type": "commit"}, {"oid": "e12c8e46bb33d1d3bdfbd0c65fe334cb8ac22a81", "url": "https://github.com/Graylog2/graylog2-server/commit/e12c8e46bb33d1d3bdfbd0c65fe334cb8ac22a81", "message": "add tests for isCloud", "committedDate": "2020-10-26T09:32:47Z", "type": "commit"}, {"oid": "252cb022a15f5f1c2878e429ecfc398dcb95f419", "url": "https://github.com/Graylog2/graylog2-server/commit/252cb022a15f5f1c2878e429ecfc398dcb95f419", "message": "add comments to withHideOnCloud", "committedDate": "2020-10-26T09:33:58Z", "type": "commit"}, {"oid": "cd0f5d31b411ced9f106b570f1a14c1e7ee4291e", "url": "https://github.com/Graylog2/graylog2-server/commit/cd0f5d31b411ced9f106b570f1a14c1e7ee4291e", "message": "add test for filter menu items", "committedDate": "2020-10-26T09:40:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA3OTk1NA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r515079954", "bodyText": "I'm failing to see why we need this at the moment, could you please explain what the reasoning behind it is?", "author": "edmundoa", "createdAt": "2020-10-30T13:01:42Z", "path": "graylog2-web-interface/src/util/conditional/isCloud.js", "diffHunk": "@@ -0,0 +1,9 @@\n+// @flow strict\n+\n+import AppConfig from '../AppConfig';\n+\n+function isCloud(): boolean {", "originalCommit": "cd0f5d31b411ced9f106b570f1a14c1e7ee4291e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc2NDE4MQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r515764181", "bodyText": "It was a fallback for when we didn't have the AppConfig. I'll refactor it out.", "author": "Gaya", "createdAt": "2020-11-02T06:36:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA3OTk1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA4MjY3Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r515082673", "bodyText": "Could we make it clearer that the array should contain the paths to filter? I think renaming the parameter to pathsToFilter would be enough.", "author": "edmundoa", "createdAt": "2020-10-30T13:06:51Z", "path": "graylog2-web-interface/src/util/conditional/filterMenuItems.js", "diffHunk": "@@ -0,0 +1,24 @@\n+// @flow strict\n+\n+import isCloud from './isCloud';\n+\n+type MenuItem = { path: string };\n+\n+function filterMenuItems(\n+  menuItems: Array<MenuItem>,\n+  toFilter: Array<string>,", "originalCommit": "cd0f5d31b411ced9f106b570f1a14c1e7ee4291e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTc2Mzk3MQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r515763971", "bodyText": "But wouldn't that imply that the array just contains paths, and not the whole menu items? I'd change it to Array<string> and just ask for the paths, makes it more reusable too. What do you think?", "author": "Gaya", "createdAt": "2020-11-02T06:35:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA4MjY3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU1OTEyMA==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r516559120", "bodyText": "I think making both arguments take the same data structure makes it clearer, so I like changing them to Array<string> and passing paths in this particular case.", "author": "edmundoa", "createdAt": "2020-11-03T10:20:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA4MjY3Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU2MDEwMg==", "url": "https://github.com/Graylog2/graylog2-server/pull/9271#discussion_r516560102", "bodyText": "Will do that, thanks!", "author": "Gaya", "createdAt": "2020-11-03T10:22:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTA4MjY3Mw=="}], "type": "inlineReview"}, {"oid": "cdedd146313cdebad234105f67785063fbe9dd08", "url": "https://github.com/Graylog2/graylog2-server/commit/cdedd146313cdebad234105f67785063fbe9dd08", "message": "use isCloud directly", "committedDate": "2020-11-03T08:05:18Z", "type": "commit"}, {"oid": "c070702368e2640a87253875e33a794ff100469d", "url": "https://github.com/Graylog2/graylog2-server/commit/c070702368e2640a87253875e33a794ff100469d", "message": "refactor filterMenuItems", "committedDate": "2020-11-03T10:39:04Z", "type": "commit"}]}