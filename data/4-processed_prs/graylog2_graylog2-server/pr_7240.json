{"pr_number": 7240, "pr_title": "Update MongoDB Java driver", "pr_createdAt": "2020-01-21T17:06:42Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/7240", "timeline": [{"oid": "6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "url": "https://github.com/Graylog2/graylog2-server/commit/6cfa4a69a8fbb333a3187b0b4977e44b7803f897", "message": "Replace fongo/nosqlunit tests with testcontainers", "committedDate": "2020-01-21T17:32:28Z", "type": "forcePushed"}, {"oid": "661c6693636b96ed50fd4ce058f818e6fbc6ee49", "url": "https://github.com/Graylog2/graylog2-server/commit/661c6693636b96ed50fd4ce058f818e6fbc6ee49", "message": "Replace fongo/nosqlunit tests with testcontainers", "committedDate": "2020-01-21T17:56:20Z", "type": "forcePushed"}, {"oid": "127fb0333ac381b3f54265dd3cfc689eec307b36", "url": "https://github.com/Graylog2/graylog2-server/commit/127fb0333ac381b3f54265dd3cfc689eec307b36", "message": "Fix expected fingerprint", "committedDate": "2020-02-04T22:09:39Z", "type": "forcePushed"}, {"oid": "48d53a2a3e60de3159d37c6f137b9a39b2991f3f", "url": "https://github.com/Graylog2/graylog2-server/commit/48d53a2a3e60de3159d37c6f137b9a39b2991f3f", "message": "Replace fongo/nosqlunit tests with testcontainers", "committedDate": "2020-02-08T08:41:54Z", "type": "commit"}, {"oid": "667f2ca60cc4a431e7877e413c520f7a2d8b2fce", "url": "https://github.com/Graylog2/graylog2-server/commit/667f2ca60cc4a431e7877e413c520f7a2d8b2fce", "message": "Update mongodb-driver and mongojack versions", "committedDate": "2020-02-08T08:41:54Z", "type": "commit"}, {"oid": "4759d9b049c01281640d606132ec8fd1df94d945", "url": "https://github.com/Graylog2/graylog2-server/commit/4759d9b049c01281640d606132ec8fd1df94d945", "message": "Fix json asserts with extra spaces", "committedDate": "2020-02-08T08:41:54Z", "type": "commit"}, {"oid": "eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "url": "https://github.com/Graylog2/graylog2-server/commit/eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "message": "Fix expected fingerprint", "committedDate": "2020-02-08T08:41:54Z", "type": "commit"}, {"oid": "eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "url": "https://github.com/Graylog2/graylog2-server/commit/eb9cac6e919bd661d4a0228b01d8b5fcf2d94a56", "message": "Fix expected fingerprint", "committedDate": "2020-02-08T08:41:54Z", "type": "forcePushed"}, {"oid": "79b1c6d960bfd2b7f91dd06427979467410dffa4", "url": "https://github.com/Graylog2/graylog2-server/commit/79b1c6d960bfd2b7f91dd06427979467410dffa4", "message": "Fix compile error due to ambiguous call in tests", "committedDate": "2020-02-08T09:00:04Z", "type": "commit"}, {"oid": "79b1c6d960bfd2b7f91dd06427979467410dffa4", "url": "https://github.com/Graylog2/graylog2-server/commit/79b1c6d960bfd2b7f91dd06427979467410dffa4", "message": "Fix compile error due to ambiguous call in tests", "committedDate": "2020-02-08T09:00:04Z", "type": "forcePushed"}, {"oid": "d8187bebf73e78a8fa500cecf780d0672b0be1cb", "url": "https://github.com/Graylog2/graylog2-server/commit/d8187bebf73e78a8fa500cecf780d0672b0be1cb", "message": "Move fixtures to the correct test namespace and rename to better identify the test using them", "committedDate": "2020-02-08T10:23:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjcwMTk0Mg==", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376701942", "bodyText": "Previous to the change 8b3e73e#diff-6474ec601eb016132c8b75872b017319R105\nIt was posible to write relative paths from resources root dir in the form of\n\norg/graylog/.../...\n\nthis change allows it again.", "author": "radykal-com", "createdAt": "2020-02-08T10:29:53Z", "path": "graylog2-server/src/test/java/org/graylog/testing/mongodb/MongoDBFixtureImporter.java", "diffHunk": "@@ -102,7 +102,7 @@ void importResources(MongoDatabase database) {\n     }\n \n     private static URL toResource(final String resourceName, final Class<?> contextClass) {\n-        if (Paths.get(resourceName).isAbsolute()) {\n+        if (Paths.get(resourceName).isAbsolute() || (Paths.get(resourceName).getNameCount() > 1)) {", "originalCommit": "8f8a25ebb74cef5148b2d16155841c361b0fc433", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "url": "https://github.com/Graylog2/graylog2-server/commit/4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "message": "Allow using relative paths from resources root in MongoDBFixtureImporter", "committedDate": "2020-02-08T10:52:35Z", "type": "commit"}, {"oid": "4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "url": "https://github.com/Graylog2/graylog2-server/commit/4b4006f8dfc98818a86a766ae89d9bf2a85f3dcd", "message": "Allow using relative paths from resources root in MongoDBFixtureImporter", "committedDate": "2020-02-08T10:52:35Z", "type": "forcePushed"}, {"oid": "cfadb36974fa9f673bfe4adba8aa285928ed696c", "url": "https://github.com/Graylog2/graylog2-server/commit/cfadb36974fa9f673bfe4adba8aa285928ed696c", "message": "Refactor to prevent duplicated code", "committedDate": "2020-02-08T10:56:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2OTI0Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376769243", "bodyText": "You can use any(Bson.class) here instead of casting the value.", "author": "bernd", "createdAt": "2020-02-09T09:43:44Z", "path": "graylog2-server/src/test/java/org/graylog2/migrations/V20170110150100_FixAlertConditionsMigrationTest.java", "diffHunk": "@@ -159,7 +162,7 @@ public void upgradeWhenMigrationCompleted() throws Exception {\n \n         migration.upgrade();\n \n-        verify(collection, never()).updateOne(any(), any());\n+        verify(collection, never()).updateOne(any(), (Bson) any());", "originalCommit": "cfadb36974fa9f673bfe4adba8aa285928ed696c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc3NzkyMA==", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376777920", "bodyText": "Done", "author": "radykal-com", "createdAt": "2020-02-09T11:59:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2OTI0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc3OTg0Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/7240#discussion_r376779843", "bodyText": "Thank you!", "author": "bernd", "createdAt": "2020-02-09T12:29:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3Njc2OTI0Mw=="}], "type": "inlineReview"}, {"oid": "b3cfe9af12fef620ef2e1d65443005703b33475a", "url": "https://github.com/Graylog2/graylog2-server/commit/b3cfe9af12fef620ef2e1d65443005703b33475a", "message": "Use any(Bson.class) instead of type casting to Bson", "committedDate": "2020-02-09T11:59:12Z", "type": "commit"}, {"oid": "51df57b7892d1c8d67851f612a9596846900ded8", "url": "https://github.com/Graylog2/graylog2-server/commit/51df57b7892d1c8d67851f612a9596846900ded8", "message": "Ensure correct version of mongodb and mongodb-legacy dependencies", "committedDate": "2020-02-09T16:25:30Z", "type": "commit"}]}