{"pr_number": 8052, "pr_title": "Give search input focus when saved search list is opening", "pr_createdAt": "2020-05-06T13:13:28Z", "pr_url": "https://github.com/Graylog2/graylog2-server/pull/8052", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3NzQzOQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421477439", "bodyText": "Don't we only need to do * as when it's Flowtyped?", "author": "kyleknighted", "createdAt": "2020-05-07T12:49:46Z", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -1,5 +1,5 @@\n import PropTypes from 'prop-types';\n-import React from 'react';\n+import * as React from 'react';", "originalCommit": "80f59f88fb08c28bd8036eafd93a0661638f5609", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzExNDY1MQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423114651", "bodyText": "It is not required to add * as when using flow, but for a few weeks I also prefer importing React this way, because we can be sure React contains all exports and not only default.", "author": "linuspahl", "createdAt": "2020-05-11T15:15:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3NzQzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODUwOQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478509", "bodyText": "What's your feeling on using React's createRef?", "author": "kyleknighted", "createdAt": "2020-05-07T12:51:27Z", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -162,6 +171,7 @@ class SearchForm extends React.Component {\n           <div className=\"form-group has-feedback\">\n             {this.props.label && <label htmlFor=\"common-search-form-query-input\" className=\"control-label\">{this.props.label}</label>}\n             <input id=\"common-search-form-query-input\"\n+                   ref={(ref) => { this.searchInput = ref; }}", "originalCommit": "80f59f88fb08c28bd8036eafd93a0661638f5609", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ3ODk0MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r421478940", "bodyText": "What is the : void for?", "author": "kyleknighted", "createdAt": "2020-05-07T12:52:07Z", "path": "graylog2-web-interface/src/components/common/SearchForm.jsx", "diffHunk": "@@ -93,13 +94,21 @@ class SearchForm extends React.Component {\n     loadingLabel: 'Loading...',\n     queryHelpComponent: null,\n     children: null,\n+    focusAfterMount: false,\n   };\n \n   state = {\n     query: this.props.query,\n     isLoading: false,\n   };\n \n+  componentDidMount(): void {", "originalCommit": "80f59f88fb08c28bd8036eafd93a0661638f5609", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzMTY3NQ==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423631675", "bodyText": "Looks like this comment is not required", "author": "linuspahl", "createdAt": "2020-05-12T10:33:14Z", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -2,6 +2,7 @@\n import React from 'react';\n import PropTypes from 'prop-types';\n import { browserHistory } from 'react-router';\n+// $FlowFixMe should be there", "originalCommit": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0Mjc5Mw==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r426642793", "bodyText": "Well my flow does say something else \ud83e\udd37", "author": "kmerz", "createdAt": "2020-05-18T13:53:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzMTY3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNDY2MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423634660", "bodyText": "I see that we are using the * for other component type definitions in this file, but I would prefer HTMLSpanElement.", "author": "linuspahl", "createdAt": "2020-05-12T10:38:55Z", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -39,6 +40,12 @@ const NoSavedSearches: StyledComponent<{}, ThemeInterface, *> = styled(Alert)`\n   align-items: center;\n `;\n \n+const DeleteButton: StyledComponent<{}, ThemeInterface, *> = styled.span`", "originalCommit": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjEwMg==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r423636102", "bodyText": "The DeleteButton can't be accessed with the keyboard right now. Maybe we can use the IconButton in the future instead. #8064", "author": "linuspahl", "createdAt": "2020-05-12T10:41:34Z", "path": "graylog2-web-interface/src/views/components/searchbar/saved-search/SavedSearchList.jsx", "diffHunk": "@@ -117,11 +127,19 @@ class SavedSearchList extends React.Component<Props, State> {\n     const { selectedSavedSearch } = this.state;\n     const savedSearchList = (views.list || []).map((savedSearch) => {\n       return (\n-        <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n-                       onClick={() => this.setState({ selectedSavedSearch: savedSearch.id })}\n-                       key={savedSearch.id}>\n-          {savedSearch.title}\n-        </ListGroupItem>\n+        <ViewLoaderContext.Consumer key={savedSearch.id}>\n+          {(loaderFunc) => (\n+            <ListGroupItem active={selectedSavedSearch === savedSearch.id}\n+                           onClick={() => this.onLoad(savedSearch.id, loaderFunc)}>\n+              {savedSearch.title}\n+              <span>\n+                <DeleteButton bsSize=\"xsmall\" bsStyle=\"danger\" onClick={(e) => this.onDelete(e, savedSearch.id)}>\n+                  <Icon name=\"trash\" ttile=\"Delete\" data-testid={`delete-${savedSearch.id}`} />\n+                </DeleteButton>", "originalCommit": "7954bbcb8123d27f600cf4ada26f1d3c4ccb35eb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjY0MzY4MA==", "url": "https://github.com/Graylog2/graylog2-server/pull/8052#discussion_r426643680", "bodyText": "When the future is ready, so am I ;)", "author": "kmerz", "createdAt": "2020-05-18T13:54:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzYzNjEwMg=="}], "type": "inlineReview"}, {"oid": "72c8fe202d7ce4f1bf5c2bc2e83d349f9fd8d776", "url": "https://github.com/Graylog2/graylog2-server/commit/72c8fe202d7ce4f1bf5c2bc2e83d349f9fd8d776", "message": "Give search input focus when saved search list is opening\n\nPrior to this change, a user needed to click on the search\ninput after he opened the saved search modal.\n\nThis change will give the search input of the saved search\nmodal focus, so the user needs one click less.", "committedDate": "2020-05-18T13:56:32Z", "type": "commit"}, {"oid": "4d1b9d0ab18f39d6f6a30a2098807482521202b6", "url": "https://github.com/Graylog2/graylog2-server/commit/4d1b9d0ab18f39d6f6a30a2098807482521202b6", "message": "Use autofocus instead of componentDidMount", "committedDate": "2020-05-18T13:56:33Z", "type": "commit"}, {"oid": "e86713ccfb0b0f0afd09f6fb8b64b1484e246a01", "url": "https://github.com/Graylog2/graylog2-server/commit/e86713ccfb0b0f0afd09f6fb8b64b1484e246a01", "message": "Stop Propagation\n\nthe submit event was bubbeling up and executed a search when filtering the saved searches", "committedDate": "2020-05-18T13:56:33Z", "type": "commit"}, {"oid": "383a0a42a9ee12b98a74d43ecddc5858770296fd", "url": "https://github.com/Graylog2/graylog2-server/commit/383a0a42a9ee12b98a74d43ecddc5858770296fd", "message": "Fix snapshot tests", "committedDate": "2020-05-18T13:56:34Z", "type": "commit"}, {"oid": "71ffe60f4cb071dba133114983e4ba0b4199fa69", "url": "https://github.com/Graylog2/graylog2-server/commit/71ffe60f4cb071dba133114983e4ba0b4199fa69", "message": "Reduce the clicks on loading a search once more", "committedDate": "2020-05-18T13:56:34Z", "type": "commit"}, {"oid": "acb59c0c73a228882ff3c7008664340e6e243183", "url": "https://github.com/Graylog2/graylog2-server/commit/acb59c0c73a228882ff3c7008664340e6e243183", "message": "Fix linter warnings", "committedDate": "2020-05-18T13:56:34Z", "type": "commit"}, {"oid": "408b1d99d9f6dd764c2ae07ba576860373c69bbb", "url": "https://github.com/Graylog2/graylog2-server/commit/408b1d99d9f6dd764c2ae07ba576860373c69bbb", "message": "Use more concrete flow type", "committedDate": "2020-05-18T13:56:35Z", "type": "commit"}, {"oid": "408b1d99d9f6dd764c2ae07ba576860373c69bbb", "url": "https://github.com/Graylog2/graylog2-server/commit/408b1d99d9f6dd764c2ae07ba576860373c69bbb", "message": "Use more concrete flow type", "committedDate": "2020-05-18T13:56:35Z", "type": "forcePushed"}]}