{"pr_number": 2156, "pr_title": "[build] Backport last relevant build changes from 3.3", "pr_createdAt": "2020-05-14T13:38:44Z", "pr_url": "https://github.com/reactor/reactor-core/pull/2156", "timeline": [{"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221", "url": "https://github.com/reactor/reactor-core/commit/2f24bca7b0f716888df67465d6e46d0a13c9f221", "message": "[build] Backport last relevant build changes from 3.3 (#2156)\n\nThis includes:\n - using local buildSrc plugins rather than adhoc code blocks (detecting\n ci, java conventions, custom version)\n - splitting out javadoc/asciidoc gradle files\n - fixing the directory into which asciidocs are built\n - avoid building pdf reference guide locally (unless release)\n - remove spring-io-plugin / platform\n - bump asciidoctor.convert plugin\n - micrometer version defined in gradle.properties and pinned\n - reactiveStream version defined in gradle.properties\n - junit, awaitility, jol and testNg versions defined in properties\n rather than inline\n - use gradle enterprise plugin for buildScan\n - removed hamcrest-library dependency\n - automatic module names", "committedDate": "2020-05-14T13:38:26Z", "type": "commit"}, {"oid": "2bd073882dacd62f842c91677f302d11642aa67b", "url": "https://github.com/reactor/reactor-core/commit/2bd073882dacd62f842c91677f302d11642aa67b", "message": "[polish] Consistently use tabs for gradle file indentation\n\nAlso use one testCompile instruction per line.\n\nReviewed-in: #2156", "committedDate": "2020-05-14T13:38:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE0ODQ3OA==", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425148478", "bodyText": "I'll fix that, spaces are used in the license template", "author": "simonbasle", "createdAt": "2020-05-14T13:45:20Z", "path": "reactor-test/build.gradle", "diffHunk": "@@ -5,7 +5,7 @@\n  * you may not use this file except in compliance with the License.\n  * You may obtain a copy of the License at\n  *\n- *       https://www.apache.org/licenses/LICENSE-2.0\n+ *\t\t\t https://www.apache.org/licenses/LICENSE-2.0", "originalCommit": "2bd073882dacd62f842c91677f302d11642aa67b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2f24bca7b0f716888df67465d6e46d0a13c9f221", "url": "https://github.com/reactor/reactor-core/commit/2f24bca7b0f716888df67465d6e46d0a13c9f221", "message": "[build] Backport last relevant build changes from 3.3 (#2156)\n\nThis includes:\n - using local buildSrc plugins rather than adhoc code blocks (detecting\n ci, java conventions, custom version)\n - splitting out javadoc/asciidoc gradle files\n - fixing the directory into which asciidocs are built\n - avoid building pdf reference guide locally (unless release)\n - remove spring-io-plugin / platform\n - bump asciidoctor.convert plugin\n - micrometer version defined in gradle.properties and pinned\n - reactiveStream version defined in gradle.properties\n - junit, awaitility, jol and testNg versions defined in properties\n rather than inline\n - use gradle enterprise plugin for buildScan\n - removed hamcrest-library dependency\n - automatic module names", "committedDate": "2020-05-14T13:38:26Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1NDA5Mg==", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425154092", "bodyText": "do we really need top-level shadow? I don't even think we shade anything in 3.2.x", "author": "bsideup", "createdAt": "2020-05-14T13:52:56Z", "path": "build.gradle", "diffHunk": "@@ -13,92 +13,95 @@\n  * See the License for the specific language governing permissions and\n  * limitations under the License.\n  */\n-\n buildscript {\n+  //we define kotlin version for benefit of both core and test (see kotlin-gradle-plugin below)\n   ext.kotlinVersion = '1.3.71'\n   repositories {\n \tmaven { url \"https://repo.spring.io/plugins-release\" }\n   }\n   dependencies {\n-\tclasspath 'org.springframework.build.gradle:propdeps-plugin:0.0.7'\n-\tclasspath 'io.spring.gradle:spring-io-plugin:0.0.4.RELEASE'\n-\tclasspath 'com.github.jengelman.gradle.plugins:shadow:1.2.0'\n+\tclasspath 'org.springframework.build.gradle:propdeps-plugin:0.0.7' //still uses the old ways\n \tclasspath \"org.jetbrains.kotlin:kotlin-gradle-plugin:${kotlinVersion}\"\n   }\n }\n \n \n plugins {\n-\tid 'org.asciidoctor.convert' version '1.5.9.2'\n+\tid \"com.github.johnrengelman.shadow\" version \"4.0.2\"", "originalCommit": "2f24bca7b0f716888df67465d6e46d0a13c9f221", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE2MTk3Nw==", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425161977", "bodyText": "mmh maybe we can remove it from this commit and keep it only in 3.3.x ? I think we need it for either benchmarks or reactor-tools, don't we?", "author": "simonbasle", "createdAt": "2020-05-14T14:03:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1NDA5Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE3MjU0Mg==", "url": "https://github.com/reactor/reactor-core/pull/2156#discussion_r425172542", "bodyText": "yeah, I think this is indeed only needed for 3.3", "author": "simonbasle", "createdAt": "2020-05-14T14:17:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE1NDA5Mg=="}], "type": "inlineReview"}, {"oid": "0211118e87e070050ae1f6e700db097c64203808", "url": "https://github.com/reactor/reactor-core/commit/0211118e87e070050ae1f6e700db097c64203808", "message": "remove shadow plugin (will need it back in 3.3.x)", "committedDate": "2020-05-14T14:19:40Z", "type": "commit"}]}