{"pr_number": 2071, "pr_title": "fix #2070 Avoid cancel in toFuture#onNext on Mono source", "pr_createdAt": "2020-03-11T13:03:26Z", "pr_url": "https://github.com/reactor/reactor-core/pull/2071", "timeline": [{"oid": "6bdb0d6ef67726ec9a2de2a96fedcc14e4ead8ce", "url": "https://github.com/reactor/reactor-core/commit/6bdb0d6ef67726ec9a2de2a96fedcc14e4ead8ce", "message": "fix #2070 Avoid cancel in toFuture#onNext on Mono source", "committedDate": "2020-03-11T13:01:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2MTc3NQ==", "url": "https://github.com/reactor/reactor-core/pull/2071#discussion_r390961775", "bodyText": "I can't find any use of this constructor where sourceCanEmitMoreThanOnce is true. Do we even need it?", "author": "bsideup", "createdAt": "2020-03-11T13:17:20Z", "path": "reactor-core/src/main/java/reactor/core/publisher/MonoToCompletableFuture.java", "diffHunk": "@@ -27,6 +27,11 @@\n final class MonoToCompletableFuture<T> extends CompletableFuture<T> implements CoreSubscriber<T> {\n \n \tfinal AtomicReference<Subscription> ref = new AtomicReference<>();\n+\tfinal boolean cancelSourceOnNext;\n+\n+\tMonoToCompletableFuture(boolean sourceCanEmitMoreThanOnce) {", "originalCommit": "6bdb0d6ef67726ec9a2de2a96fedcc14e4ead8ce", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk4OTc1NQ==", "url": "https://github.com/reactor/reactor-core/pull/2071#discussion_r390989755", "bodyText": "no we don't use it but since this is a Subscriber nothing in the constructor would force us to use it exclusively with a Mono. If we ever use it on a Flux that signature will force us to consider the cancel-in-onNext case (which would become necessary) rather than totally forget about it.", "author": "simonbasle", "createdAt": "2020-03-11T13:59:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDk2MTc3NQ=="}], "type": "inlineReview"}]}