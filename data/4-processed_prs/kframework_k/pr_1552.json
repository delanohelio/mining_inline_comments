{"pr_number": 1552, "pr_title": "Update installation documentation", "pr_createdAt": "2020-09-22T17:23:11Z", "pr_url": "https://github.com/kframework/k/pull/1552", "timeline": [{"oid": "cef9c77cd21612f2e416e50a67b90d3e44e9e329", "url": "https://github.com/kframework/k/commit/cef9c77cd21612f2e416e50a67b90d3e44e9e329", "message": "docs: fix typo in INSTALL.md and clarify install process", "committedDate": "2020-09-22T16:35:07Z", "type": "commit"}, {"oid": "c84976753a58f43906f443e1f81c48219d7503c5", "url": "https://github.com/kframework/k/commit/c84976753a58f43906f443e1f81c48219d7503c5", "message": "docs: add OSX/brew alternate installation instructions", "committedDate": "2020-09-22T16:35:55Z", "type": "commit"}, {"oid": "360e1b7cd961d27026ad36f7c855c57276729284", "url": "https://github.com/kframework/k/commit/360e1b7cd961d27026ad36f7c855c57276729284", "message": "docs: remove stale install instructions from README", "committedDate": "2020-09-22T16:37:21Z", "type": "commit"}, {"oid": "f669e1660ad0088bac38a8fb48b5b563157585ad", "url": "https://github.com/kframework/k/commit/f669e1660ad0088bac38a8fb48b5b563157585ad", "message": "docs: add additional headings for clarity", "committedDate": "2020-09-22T16:38:00Z", "type": "commit"}, {"oid": "12228e6ab889d9dc4de2d756410349500e1f012a", "url": "https://github.com/kframework/k/commit/12228e6ab889d9dc4de2d756410349500e1f012a", "message": "docs: add note to README for K-based tool users", "committedDate": "2020-09-22T16:58:06Z", "type": "commit"}, {"oid": "a8c5ad70f2ccfc3e8ec205d9b574ca94f6ff4c5b", "url": "https://github.com/kframework/k/commit/a8c5ad70f2ccfc3e8ec205d9b574ca94f6ff4c5b", "message": "docs: clarify linux distro names in README", "committedDate": "2020-09-22T17:02:13Z", "type": "commit"}, {"oid": "ef100a42721d1610787736d362c81492a1712e7f", "url": "https://github.com/kframework/k/commit/ef100a42721d1610787736d362c81492a1712e7f", "message": "docs: format troubleshooting section in README", "committedDate": "2020-09-22T19:25:50Z", "type": "commit"}, {"oid": "8dcdf8fd5bc408772a629f2df2fc538c73cda464", "url": "https://github.com/kframework/k/commit/8dcdf8fd5bc408772a629f2df2fc538c73cda464", "message": "docs: document build error on WSLv1", "committedDate": "2020-09-22T19:26:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYxNDU5OA==", "url": "https://github.com/kframework/k/pull/1552#discussion_r493614598", "bodyText": "Using WSL 2 is also an option, and probably a better one; at some point WSL 1 won't be supported any more.", "author": "ttuegel", "createdAt": "2020-09-23T13:57:42Z", "path": "README.md", "diffHunk": "@@ -143,51 +157,66 @@ eclipse does not support hierarchical projects.\n IntelliJ IDEA comes with built-in maven integration. For more information, refer to\n the [IntelliJ IDEA wiki](http://wiki.jetbrains.net/intellij/Creating_and_importing_Maven_projects)\n \n-# Run test suite\n+# Running the Test Suite\n+\n To completely test the current version of the K framework, run `mvn verify`.\n This normally takes roughly 30 minutes on a fast machine. If you are interested only\n in running the unit tests and checkstyle goals, run `mvn verify -DskipKTest` to\n skip the lengthy `ktest` execution.\n \n-# Changing the KORE data structures\n+# Changing the KORE Data Structures\n If you need to change the KORE data structures (unless you are a K core developer, you probably do not), see [Guide-for-changing-the-KORE-data-structures](https://github.com/kframework/k/wiki/Guide-for-changing-the-KORE-data-structures).\n \n-# Build the final release directory/archives\n+# Building the Final Release Directory/Archives\n Call `mvn install` in the base directory. This will attach an artifact to the local\n maven repository containing a zip and tar.gz of the distribution.\n \n The functionality to create a tagged release is currently incomplete.\n \n-# Compiling definitions and running programs\n+# Compiling Definitions and Running Programs\n Assuming k-distribution/target/release/k/bin is in your path, you can compile definitions using\n the `kompile` command.  To execute a program you can use `krun`.\n \n For running either program in the debugger, use the main class `org.kframework.main.Main` with an additional argument `-kompile` or `-krun` added before other command line arguments, and use the classpath from the `k-distribution` module.\n \n # Troubleshooting\n-Common error messages:\n+Common build-time error messages:\n \n--  `Error: JAVA_HOME not found in your environment.\n-    Please set the JAVA_HOME variable in your environment to match the\n-    location of your Java installation.`\n+-   `Error: JAVA_HOME not found in your environment.\n+     Please set the JAVA_HOME variable in your environment to match the\n+     location of your Java installation.`\n     + Make sure `JAVA_HOME` points to the JDK and not the JRE directory.\n \n-- `[WARNING] Cannot get the branch information from the git repository:\n-   Detecting the current branch failed: 'git' is not recognized as an internal or external command,\n-   operable program or batch file.`\n-   +  `git` might not be installed on your system. Make sure that you can execute\n+-   `[WARNING] Cannot get the branch information from the git repository:\n+     Detecting the current branch failed: 'git' is not recognized as an internal or external command,\n+     operable program or batch file.`\n+    + `git` might not be installed on your system. Make sure that you can execute\n       `git` from the command line.\n \n-- `1) Error injecting constructor, java.lang.Error: Unresolved compilation problems:\n-        The import org.kframework.parser.outer.Outer cannot be resolved\n-        Outer cannot be resolved`\n-   + You may run into this issue if target/generated-sources/javacc is not added to the\n-     build path of your IDE. Generally this is solved by regenerating your project /\n-     re-syncing it with the pom.xml.\n-\n-- `[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile\n-   (default-compile) on project k-core: Fatal error compiling: invalid target release: 1.8 -> [Help 1]`\n-   + You either do not have Java 8 installed, or `$JAVA_HOME` does not point to a Java 8 JDK.\n+-   `1) Error injecting constructor, java.lang.Error: Unresolved compilation problems:\n+          The import org.kframework.parser.outer.Outer cannot be resolved\n+          Outer cannot be resolved`\n+    + You may run into this issue if target/generated-sources/javacc is not added to the\n+      build path of your IDE. Generally this is solved by regenerating your project /\n+      re-syncing it with the pom.xml.\n+\n+-   `[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile\n+     (default-compile) on project k-core: Fatal error compiling: invalid target release: 1.8 -> [Help 1]`\n+    + You either do not have Java 8 installed, or `$JAVA_HOME` does not point to a Java 8 JDK.\n+\n+-   `[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.7:run\n+     (build-haskell) on project haskell-backend: An Ant BuildException has occured: exec returned: 1`\n+\n+    and scrolling up, you see an error message similar to:\n+\n+    `[exec] Installing GHC ...\n+     [exec] ghc-pkg: Couldn't open database $HOME/.stack/programs/x86_64-linux/ghc-tinfo6-8.10.1/lib/ghc-8.10.1/package.conf.d for modification:\n+     {handle: $HOME/.stack/programs/x86_64-linux/ghc-tinfo6-8.10.1/lib/ghc-8.10.1/package.conf.d/package.cache.lock}:\n+     hLock: invalid argument (Invalid argument)`\n+    + If you are using a [WSL version 1 environment](https://docs.microsoft.com/en-us/windows/wsl/compare-versions),\n+      then you have encountered a known issue with the latest versions of GHC. In this\n+      case, please either build the K Framework in a different environment\n+      or else install a [packaged release for your WSL version 1 distribution](https://github.com/kframework/k/releases/).", "originalCommit": "8dcdf8fd5bc408772a629f2df2fc538c73cda464", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzY0NjM3MQ==", "url": "https://github.com/kframework/k/pull/1552#discussion_r493646371", "bodyText": "@ttuegel I added text indicating this possibility as well as just doing mvn package -Dhaskell.backend.skip", "author": "sskeirik", "createdAt": "2020-09-23T14:37:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYxNDU5OA=="}], "type": "inlineReview"}, {"oid": "0d7bc4ad7dab7e199a6c7f31b860fe66cdf59e2f", "url": "https://github.com/kframework/k/commit/0d7bc4ad7dab7e199a6c7f31b860fe66cdf59e2f", "message": "docs: clarify possible solutions to GHC WSLv1 issue", "committedDate": "2020-09-23T14:34:40Z", "type": "commit"}, {"oid": "6eaf90d5084defdf66d32aa8de4b513f4cbec41d", "url": "https://github.com/kframework/k/commit/6eaf90d5084defdf66d32aa8de4b513f4cbec41d", "message": "docs: use proper sublist formatting", "committedDate": "2020-09-23T14:41:52Z", "type": "forcePushed"}, {"oid": "7a0a3f5db1ff895904061a42398f91579d40ed98", "url": "https://github.com/kframework/k/commit/7a0a3f5db1ff895904061a42398f91579d40ed98", "message": "docs: use proper sublist formatting", "committedDate": "2020-09-23T14:42:19Z", "type": "commit"}, {"oid": "7a0a3f5db1ff895904061a42398f91579d40ed98", "url": "https://github.com/kframework/k/commit/7a0a3f5db1ff895904061a42398f91579d40ed98", "message": "docs: use proper sublist formatting", "committedDate": "2020-09-23T14:42:19Z", "type": "forcePushed"}, {"oid": "6f8aeca3cb3251010d2bb0bb6c8869f96f838c74", "url": "https://github.com/kframework/k/commit/6f8aeca3cb3251010d2bb0bb6c8869f96f838c74", "message": "Merge branch 'master' into kframework_install_docs", "committedDate": "2020-09-23T16:45:32Z", "type": "commit"}]}