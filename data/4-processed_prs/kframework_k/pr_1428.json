{"pr_number": 1428, "pr_title": "Fine-tuned warning control", "pr_createdAt": "2020-07-15T13:54:26Z", "pr_url": "https://github.com/kframework/k/pull/1428", "timeline": [{"oid": "f60fb513c8bced191e45095aaf48322884196dbe", "url": "https://github.com/kframework/k/commit/f60fb513c8bced191e45095aaf48322884196dbe", "message": "remove references to hidden warnings", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "d52c94eb410edc66fd1163140f7d38e1c63fdb22", "url": "https://github.com/kframework/k/commit/d52c94eb410edc66fd1163140f7d38e1c63fdb22", "message": "add types to all warnings", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "efce9e1825a107601eed2d55cbf92e9f86edf7ee", "url": "https://github.com/kframework/k/commit/efce9e1825a107601eed2d55cbf92e9f86edf7ee", "message": "fix compile errors", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "8865ce1b079654b3fa2f25cdca67cd28146e7af1", "url": "https://github.com/kframework/k/commit/8865ce1b079654b3fa2f25cdca67cd28146e7af1", "message": "disable missing hook exception by default on java backend", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "411a2b8cd37052e5a96fe3e83f8dd825c286483d", "url": "https://github.com/kframework/k/commit/411a2b8cd37052e5a96fe3e83f8dd825c286483d", "message": "add ocntrols to enable or disable specific warnings", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "6dee3f9b5c2d79e41f86f99f282bb2bb1ddf8f35", "url": "https://github.com/kframework/k/commit/6dee3f9b5c2d79e41f86f99f282bb2bb1ddf8f35", "message": "update test makefiles", "committedDate": "2020-07-15T13:38:17Z", "type": "commit"}, {"oid": "92cb389c77918051209de12a81c9d069f0ad0999", "url": "https://github.com/kframework/k/commit/92cb389c77918051209de12a81c9d069f0ad0999", "message": "update tests", "committedDate": "2020-07-15T13:52:30Z", "type": "commit"}, {"oid": "7280802b2fe3eac3c367ea68b83a436ed0e2151c", "url": "https://github.com/kframework/k/commit/7280802b2fe3eac3c367ea68b83a436ed0e2151c", "message": "fix bug", "committedDate": "2020-07-15T13:52:37Z", "type": "commit"}, {"oid": "2df37b4f862be78787813c0becf203896ad8cc20", "url": "https://github.com/kframework/k/commit/2df37b4f862be78787813c0becf203896ad8cc20", "message": "fix another bug where warning count was incorrect in llvm backend", "committedDate": "2020-07-15T13:52:40Z", "type": "commit"}, {"oid": "00cd1c2be772dc02449937010563e1834eb00fd2", "url": "https://github.com/kframework/k/commit/00cd1c2be772dc02449937010563e1834eb00fd2", "message": "fix whitespace", "committedDate": "2020-07-15T14:01:15Z", "type": "commit"}, {"oid": "1eb00f9e4b1bc43acb4c8a6c5c8fd0ebadcc5770", "url": "https://github.com/kframework/k/commit/1eb00f9e4b1bc43acb4c8a6c5c8fd0ebadcc5770", "message": "fix tests", "committedDate": "2020-07-15T14:21:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIyNDcyOQ==", "url": "https://github.com/kframework/k/pull/1428#discussion_r455224729", "bodyText": "Is there much use in distinguishing DEPRECATED_BACKEND from FUTURE_ERROR? Seems to me that DEPRECATED_BACKEND will only be used twice, and equally well could be just thrown into \"these are features that we will not support in the future.", "author": "ehildenb", "createdAt": "2020-07-15T17:37:16Z", "path": "kernel/src/main/java/org/kframework/kompile/Kompile.java", "diffHunk": "@@ -105,7 +105,7 @@ public Kompile(KompileOptions kompileOptions, FileUtil files, KExceptionManager\n         this.sw = sw;\n \n         if (kompileOptions.backend.equals(\"ocaml\")) {\n-            kem.registerCriticalWarning(\"The OCaml backend is in the process of being deprecated (final date May 31, 2020). Please switch to the LLVM backend.\");\n+            kem.registerCriticalWarning(ExceptionType.DEPRECATED_BACKEND, \"The OCaml backend is in the process of being deprecated (final date May 31, 2020). Please switch to the LLVM backend.\");\n         }", "originalCommit": "1eb00f9e4b1bc43acb4c8a6c5c8fd0ebadcc5770", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIyNzg3Nw==", "url": "https://github.com/kframework/k/pull/1428#discussion_r455227877", "bodyText": "I think backend-specific things should not be in this list. So we should just have MISSING_HOOK, instead of MISSING_HOOK_OCAML or MISSING_HOOK_JAVA. And we should get rid of DEPRECATED_BACKEND and just use FUTURE_ERROR.", "author": "ehildenb", "createdAt": "2020-07-15T17:41:48Z", "path": "kore/src/main/java/org/kframework/utils/errorsystem/KException.java", "diffHunk": "@@ -103,7 +95,24 @@ public int hashCode() {\n     }\n \n     public enum ExceptionType {\n-        ERROR, WARNING, HIDDENWARNING, NON_EXHAUSTIVE_MATCH, USELESS_RULE\n+        ERROR,\n+        NON_EXHAUSTIVE_MATCH,\n+        UNDELETED_TEMP_DIR,\n+        MISSING_HOOK_OCAML,\n+        MISSING_SYNTAX_MODULE,\n+        INVALID_EXIT_CODE,\n+        DEPRECATED_BACKEND,\n+        INVALID_CONFIG_VAR,\n+        FUTURE_ERROR,\n+        UNUSED_VAR,\n+        PROOF_LINT,\n+        FIRST_HIDDEN, // warnings below here are hidden by default\n+        MISSING_HOOK_JAVA,\n+        USELESS_RULE,\n+        UNRESOLVED_FUNCTION_SYMBOL,\n+        MALFORMED_MARKDOWN,\n+        INVALIDATED_CACHE,\n+        UNUSED_SYMBOL", "originalCommit": "1eb00f9e4b1bc43acb4c8a6c5c8fd0ebadcc5770", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI2NDkwNQ==", "url": "https://github.com/kframework/k/pull/1428#discussion_r455264905", "bodyText": "I actually originally had these separate, but they had to be split because most java backend definitions report a lot of missing hook warnings just because a bunch of hooks were never implemented, and it makes the output extremely verbose whenever you call krun.", "author": "dwightguth", "createdAt": "2020-07-15T18:42:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIyNzg3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI2NTE4Mw==", "url": "https://github.com/kframework/k/pull/1428#discussion_r455265183", "bodyText": "So I had to make a separate category so I could make it disabled by default.", "author": "dwightguth", "createdAt": "2020-07-15T18:43:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIyNzg3Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTI4MDk1NA==", "url": "https://github.com/kframework/k/pull/1428#discussion_r455280954", "bodyText": "Ah OK, makes sense.", "author": "ehildenb", "createdAt": "2020-07-15T19:11:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTIyNzg3Nw=="}], "type": "inlineReview"}, {"oid": "909db8b74d39c60404fcfc4a6751adb87b0d434f", "url": "https://github.com/kframework/k/commit/909db8b74d39c60404fcfc4a6751adb87b0d434f", "message": "fix review comment", "committedDate": "2020-07-15T19:49:31Z", "type": "commit"}, {"oid": "c9be5f92ecc24e2afa5e052e10aede7487b73ce5", "url": "https://github.com/kframework/k/commit/c9be5f92ecc24e2afa5e052e10aede7487b73ce5", "message": "Merge branch 'master' into warns", "committedDate": "2020-07-15T20:51:07Z", "type": "commit"}]}