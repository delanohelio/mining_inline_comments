{"pr_number": 1104, "pr_title": "Fix add empty list pass for parametric productions", "pr_createdAt": "2020-02-13T21:12:23Z", "pr_url": "https://github.com/kframework/k/pull/1104", "timeline": [{"oid": "117847dd4fe0b0f769bc2df8edfa9772f56e0dd8", "url": "https://github.com/kframework/k/commit/117847dd4fe0b0f769bc2df8edfa9772f56e0dd8", "message": "fix definitions", "committedDate": "2020-02-13T20:58:22Z", "type": "commit"}, {"oid": "3ef301aab99b07a152c019b34ae51bb5acd6b55e", "url": "https://github.com/kframework/k/commit/3ef301aab99b07a152c019b34ae51bb5acd6b55e", "message": "fix add empty list for parametric productions", "committedDate": "2020-02-13T20:58:32Z", "type": "commit"}, {"oid": "f1b6ce3bb539603c4e73fdf5b42eefa929b7a748", "url": "https://github.com/kframework/k/commit/f1b6ce3bb539603c4e73fdf5b42eefa929b7a748", "message": "add test", "committedDate": "2020-02-13T21:06:49Z", "type": "commit"}, {"oid": "ab91dc56c017a313a8718c50abe56aa4ca6764dc", "url": "https://github.com/kframework/k/commit/ab91dc56c017a313a8718c50abe56aa4ca6764dc", "message": "add start symbol", "committedDate": "2020-02-13T21:25:34Z", "type": "commit"}, {"oid": "72e1e12bb27d671cd39599829baaf2a64759beb1", "url": "https://github.com/kframework/k/commit/72e1e12bb27d671cd39599829baaf2a64759beb1", "message": "update tests", "committedDate": "2020-02-13T21:31:02Z", "type": "commit"}, {"oid": "477a64c6bb032d877014e8d044c81ed6c58fb97a", "url": "https://github.com/kframework/k/commit/477a64c6bb032d877014e8d044c81ed6c58fb97a", "message": "fix another case where an empty list should not be added", "committedDate": "2020-02-14T18:22:01Z", "type": "commit"}, {"oid": "59ed50991df2ef12138511109c41f792b27d31ef", "url": "https://github.com/kframework/k/commit/59ed50991df2ef12138511109c41f792b27d31ef", "message": "fix bug with error when rewrite is at top of term and child is\npolymorphic in return sort", "committedDate": "2020-02-14T18:22:19Z", "type": "commit"}, {"oid": "67cc1be4924f6d657aaecf189186626c40162864", "url": "https://github.com/kframework/k/commit/67cc1be4924f6d657aaecf189186626c40162864", "message": "tmp: Jenkinsfile", "committedDate": "2020-02-14T19:20:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyMTU1Ng==", "url": "https://github.com/kframework/k/pull/1104#discussion_r380221556", "bodyText": "I think I understand why, but this looks wrong. I'm curious what Grigore has to say.", "author": "radumereuta", "createdAt": "2020-02-17T14:45:24Z", "path": "k-distribution/tutorial/2_languages/4_logik/basic/logik.k", "diffHunk": "@@ -343,7 +343,7 @@ another clause can be chosen using the rule above):  */\n   rule <k> L:Term => . ...</k>\n        <fresh>  L:Term . => . </fresh>\n \n-  rule <k> L:Term => Ls ...</k>\n+  rule <k> L:Term :KItem => Ls ...</k>", "originalCommit": "67cc1be4924f6d657aaecf189186626c40162864", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI2OTI4NA==", "url": "https://github.com/kframework/k/pull/1104#discussion_r380269284", "bodyText": "The reason this happens is in order to set the sort of the rewrite to KItem instead of Terms. This then prevents a list terminator from being erroneously added.", "author": "dwightguth", "createdAt": "2020-02-17T16:14:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyMTU1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDI4MDY1NA==", "url": "https://github.com/kframework/k/pull/1104#discussion_r380280654", "bodyText": "@radumereuta I agree that it looks suspicious, but I think it is ok.  Now with the more generous AML semantics to K, where you can define and do pretty much whatever makes sense with sorts and types, almost every decision that makes practical sense is acceptable.  Especially if it improves the performance and the error messages.", "author": "grosu", "createdAt": "2020-02-17T16:36:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIyMTU1Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDIzNTE0NA==", "url": "https://github.com/kframework/k/pull/1104#discussion_r380235144", "bodyText": "This needs a small description.", "author": "radumereuta", "createdAt": "2020-02-17T15:09:43Z", "path": "kernel/src/main/java/org/kframework/compile/AddSortInjections.java", "diffHunk": "@@ -249,6 +221,40 @@ private K visitChildren(K term, Sort actualSort, Sort expectedSort) {\n         }\n     }\n \n+    public Production substituteProd(Production prod, Sort expectedSort, BiFunction<Integer, Production, Sort> getSort, HasLocation loc) {", "originalCommit": "67cc1be4924f6d657aaecf189186626c40162864", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "004375bad3794e1fc2db0b745463c5cf69c9b8ae", "url": "https://github.com/kframework/k/commit/004375bad3794e1fc2db0b745463c5cf69c9b8ae", "message": "add comment", "committedDate": "2020-02-17T16:18:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwMzk5OQ==", "url": "https://github.com/kframework/k/pull/1104#discussion_r380303999", "bodyText": "Is this for the final version? I haven't seen it before.", "author": "radumereuta", "createdAt": "2020-02-17T17:31:35Z", "path": "Jenkinsfile", "diffHunk": "@@ -89,7 +89,7 @@ pipeline {\n                     stage('Checkout code') {\n                       steps {\n                         dir('k-exercises') {\n-                          git url: 'git@github.com:kframework/k-exercises.git'\n+                          git url: 'git@github.com:kframework/k-exercises.git', branch: 'emptylists'", "originalCommit": "004375bad3794e1fc2db0b745463c5cf69c9b8ae", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTQ5NzY4NA==", "url": "https://github.com/kframework/k/pull/1104#discussion_r381497684", "bodyText": "no, this is just for testing purposes.", "author": "dwightguth", "createdAt": "2020-02-19T19:33:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDMwMzk5OQ=="}], "type": "inlineReview"}, {"oid": "ae199cbe1b32ebc95858f76fb3a89445f25b0c9f", "url": "https://github.com/kframework/k/commit/ae199cbe1b32ebc95858f76fb3a89445f25b0c9f", "message": "Revert \"tmp: Jenkinsfile\"\n\nThis reverts commit 67cc1be4924f6d657aaecf189186626c40162864.", "committedDate": "2020-02-19T19:33:52Z", "type": "commit"}, {"oid": "79ee7911d6126bf3810263f2ac46b94caf085b42", "url": "https://github.com/kframework/k/commit/79ee7911d6126bf3810263f2ac46b94caf085b42", "message": "Merge branch 'master' into emptylists", "committedDate": "2020-02-19T19:34:09Z", "type": "commit"}, {"oid": "d9d4d8b46ca6341536a0a94608cf0f8d5fcae4fc", "url": "https://github.com/kframework/k/commit/d9d4d8b46ca6341536a0a94608cf0f8d5fcae4fc", "message": "Merge branch 'master' into emptylists", "committedDate": "2020-02-19T21:22:01Z", "type": "commit"}]}