{"pr_number": 1476, "pr_title": "convert domains.k to markdown", "pr_createdAt": "2020-07-31T14:19:45Z", "pr_url": "https://github.com/kframework/k/pull/1476", "timeline": [{"oid": "dfbf78a7a0acb30326617463ba203e8902fdeef2", "url": "https://github.com/kframework/k/commit/dfbf78a7a0acb30326617463ba203e8902fdeef2", "message": "remove a permalink that was missed", "committedDate": "2020-07-30T19:07:02Z", "type": "commit"}, {"oid": "933a088a407dc7baca1f97da64abbe52fbf6eb10", "url": "https://github.com/kframework/k/commit/933a088a407dc7baca1f97da64abbe52fbf6eb10", "message": "update domains.k to domains.md", "committedDate": "2020-07-31T14:38:46Z", "type": "commit"}, {"oid": "ef9cf210614c4724ccd3c5f67916c238f9884953", "url": "https://github.com/kframework/k/commit/ef9cf210614c4724ccd3c5f67916c238f9884953", "message": "rename file", "committedDate": "2020-07-31T14:38:46Z", "type": "commit"}, {"oid": "836ab0ed9c5419b7c765f28f2f184d5b28e2ae45", "url": "https://github.com/kframework/k/commit/836ab0ed9c5419b7c765f28f2f184d5b28e2ae45", "message": "update references to domains.k", "committedDate": "2020-07-31T14:38:46Z", "type": "commit"}, {"oid": "b4e827c8b342462a38eb6964b1c2596de677f85f", "url": "https://github.com/kframework/k/commit/b4e827c8b342462a38eb6964b1c2596de677f85f", "message": "add warning for domains.k", "committedDate": "2020-07-31T14:38:46Z", "type": "commit"}, {"oid": "b4e827c8b342462a38eb6964b1c2596de677f85f", "url": "https://github.com/kframework/k/commit/b4e827c8b342462a38eb6964b1c2596de677f85f", "message": "add warning for domains.k", "committedDate": "2020-07-31T14:38:46Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcwMDk4OA==", "url": "https://github.com/kframework/k/pull/1476#discussion_r463700988", "bodyText": "What's going on here? Are we removing support for some class of floating point parses?", "author": "ehildenb", "createdAt": "2020-07-31T16:10:47Z", "path": "k-distribution/include/kframework/builtin/domains.md", "diffHunk": "@@ -533,10 +1082,43 @@ module INT\n   syntax Int ::= randInt(Int) [function, hook(INT.rand)]\n   syntax K ::= srandInt(Int) [function, hook(INT.srand)]\n endmodule\n-\n+```\n+\n+IEEE 754 Floating-point Numbers\n+-------------------------------\n+\n+Provided here is the syntax of an implementation of arbitrary-precision\n+floating-point arithmetic in K based on a generalization of the IEEE 754\n+standard. This type is hooked to an implementation of floats provided by the \n+backend.\n+\n+The syntax of ordinary floating-point values in K consists of an optional sign\n+(+ or -) followed by an optional integer part, followed by a decimal point,\n+followed by an optional fractional part. Either the integer part or the \n+fractional part must be specified. The mantissa is followed by an optional\n+exponent part, which consists of an `e` or `E`, an optional sign (+ or -), \n+and an integer. The expoennt is followed by an optional suffix, which can be\n+either `f`, `F`, `d`, `D`, or `pNxM` where `N` and `M` are positive integers.\n+`p` and `x` can be either upper or lowercase.\n+\n+The value of a floating-point literal is computed as follows: First the\n+mantissa is read as a rational number. Then it is multiplied by 10 to the\n+power of the exponent, which is interpreted as an integer, and defaults to\n+zero if it is not present. Finally, it is rounded to the nearest possible\n+value in a floating-point type represented like an IEEE754 floating-point type,\n+with the number of bits of precision and exponent specified by the suffix.\n+A suffix of `f` or `f` represents the IEEE `binary32` format. A suffix of `d`\n+or `D`, or no suffix, represents the IEEE `binary64` format. A suffix of\n+`pNxM` (either upper or lowercase) specifies exactly `N` bits of precision and\n+`M` bits of exponent. The number of bits of precision is assumed to include\n+any optional `1` that precedes the IEEE 754 mantissa. In other words, `p24x8`\n+is equal to the IEEE `binary32` format, and `p53x11` is equal to the IEEE\n+`binary64` format.\n+\n+```k\n module FLOAT-SYNTAX\n   syntax Float [hook(FLOAT.Float)]\n-  syntax Float ::= r\"([\\\\+-]?[0-9]+(\\\\.[0-9]*)?|\\\\.[0-9]+)([eE][\\\\+-]?([0-9]+(\\\\.[0-9]*)?|\\\\.[0-9]d+))?([fFdD]|([pP][0-9]+[xX][0-9]+))?\" [token, prec(1)]\n+  syntax Float ::= r\"([\\\\+-]?[0-9]+(\\\\.[0-9]*)?|\\\\.[0-9]+)([eE][\\\\+-]?[0-9]+)?([fFdD]|([pP][0-9]+[xX][0-9]+))?\" [token, prec(1)]", "originalCommit": "b4e827c8b342462a38eb6964b1c2596de677f85f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcwNjA1NA==", "url": "https://github.com/kframework/k/pull/1476#discussion_r463706054", "bodyText": "Removed here is the case when the exponent has a decimal point, which I'm quite certain was never actually working and should never have been part of this syntax.", "author": "dwightguth", "createdAt": "2020-07-31T16:20:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzcwMDk4OA=="}], "type": "inlineReview"}, {"oid": "2c85fb232233d7a569acbb2a6fd23e4dd6bfe625", "url": "https://github.com/kframework/k/commit/2c85fb232233d7a569acbb2a6fd23e4dd6bfe625", "message": "Merge branch 'master' into domains", "committedDate": "2020-07-31T19:33:48Z", "type": "commit"}]}