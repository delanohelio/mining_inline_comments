{"pr_number": 1540, "pr_title": "Add missing check and update error message", "pr_createdAt": "2020-09-04T14:49:55Z", "pr_url": "https://github.com/kframework/k/pull/1540", "timeline": [{"oid": "df5ff753d620c32238d6398197ca0d0789b36a22", "url": "https://github.com/kframework/k/commit/df5ff753d620c32238d6398197ca0d0789b36a22", "message": "update error message", "committedDate": "2020-09-04T14:42:30Z", "type": "commit"}, {"oid": "5255f22b8d2e1274df14805b56fe03a9cffb09eb", "url": "https://github.com/kframework/k/commit/5255f22b8d2e1274df14805b56fe03a9cffb09eb", "message": "error if rewrite is inside #as", "committedDate": "2020-09-04T14:48:18Z", "type": "commit"}, {"oid": "02f53ddd50a2628232ec2d4663dbb8a7c4851abb", "url": "https://github.com/kframework/k/commit/02f53ddd50a2628232ec2d4663dbb8a7c4851abb", "message": "add test", "committedDate": "2020-09-04T14:49:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzg3MjcyMw==", "url": "https://github.com/kframework/k/pull/1540#discussion_r483872723", "bodyText": "Add a test for this one.", "author": "ehildenb", "createdAt": "2020-09-04T22:50:51Z", "path": "kernel/src/main/java/org/kframework/compile/AddSortInjections.java", "diffHunk": "@@ -181,7 +181,9 @@ private K visitChildren(K term, Sort actualSort, Sort expectedSort) {\n             Production substituted = substituteProd(prod, expectedSort, (i, fresh) -> sort(kapp.items().get(i), fresh.nonterminals().apply(i).sort()), kapp);\n             for (int i = 0; i < kapp.items().size(); i++) {\n                 if (kapp.items().size() != substituted.nonterminals().size()) {\n-                    throw KEMException.internalError(\"Invalid initial configuration with wrong number of children for term with label \" + kapp.klabel(), kapp);\n+                    throw KEMException.internalError(\"Invalid sort predicate \" + kapp.klabel() +\n+                        \" that depends directly or indirectly on the current configuration. \" +\n+                        \"Is it possible to replace the sort predicate with a regular function?\", kapp);", "originalCommit": "02f53ddd50a2628232ec2d4663dbb8a7c4851abb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "553ee79a232a98d387dd0302174bf5a87c4a31fb", "url": "https://github.com/kframework/k/commit/553ee79a232a98d387dd0302174bf5a87c4a31fb", "message": "fix type of error", "committedDate": "2020-09-08T17:06:48Z", "type": "commit"}, {"oid": "48e0ac170753c85f9a4af1f951feeea345245450", "url": "https://github.com/kframework/k/commit/48e0ac170753c85f9a4af1f951feeea345245450", "message": "add test", "committedDate": "2020-09-08T17:09:51Z", "type": "commit"}, {"oid": "04469518ec929964073f0813dc096a79684a7db9", "url": "https://github.com/kframework/k/commit/04469518ec929964073f0813dc096a79684a7db9", "message": "Merge branch 'master' into checks", "committedDate": "2020-09-08T19:49:53Z", "type": "commit"}]}