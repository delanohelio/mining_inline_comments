{"pr_number": 183, "pr_title": "AsciiDoc documentation of the @ReportEntry extension", "pr_createdAt": "2020-03-11T18:04:36Z", "pr_url": "https://github.com/junit-pioneer/junit-pioneer/pull/183", "timeline": [{"oid": "6527c5ded19ed6693d50487216c2e633fb7076a3", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/6527c5ded19ed6693d50487216c2e633fb7076a3", "message": "Basic implementation of the ReportEntry feature.", "committedDate": "2020-02-18T15:42:45Z", "type": "commit"}, {"oid": "807e91e6ea215f511007ed52533e1c8e5f180b77", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/807e91e6ea215f511007ed52533e1c8e5f180b77", "message": "Basic implementation of the ReportEntry feature.", "committedDate": "2020-02-18T19:54:19Z", "type": "commit"}, {"oid": "ab0306913bc093b8f8164c2737196594808d8c80", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/ab0306913bc093b8f8164c2737196594808d8c80", "message": "Apply new formatter", "committedDate": "2020-02-18T19:54:19Z", "type": "commit"}, {"oid": "11b441ff94593a61a440a4b8a1d834619ccc6fd3", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/11b441ff94593a61a440a4b8a1d834619ccc6fd3", "message": "Merge branch 'report-entry' of https://github.com/Michael1993/junit-pioneer into report-entry", "committedDate": "2020-02-19T10:10:43Z", "type": "commit"}, {"oid": "2a96aa5c2cf3eeae5df7227df25e5b84a9ad34fe", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/2a96aa5c2cf3eeae5df7227df25e5b84a9ad34fe", "message": "Improve tests", "committedDate": "2020-03-03T20:19:47Z", "type": "commit"}, {"oid": "2ea6cf8f6a170e7a390c9e76848e1ddbb4076fcb", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/2ea6cf8f6a170e7a390c9e76848e1ddbb4076fcb", "message": "Add Javadoc", "committedDate": "2020-03-03T20:30:19Z", "type": "commit"}, {"oid": "29aa31b6dc30439a6e7a8a5d5e8605988ef7c4d2", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/29aa31b6dc30439a6e7a8a5d5e8605988ef7c4d2", "message": "Added empty doc, will work on it later.", "committedDate": "2020-03-04T16:59:54Z", "type": "commit"}, {"oid": "42fbad70d555d33a30808b9729ede731ac1dcfab", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/42fbad70d555d33a30808b9729ede731ac1dcfab", "message": "Created documentation about @ReportEntry", "committedDate": "2020-03-11T18:00:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNjI0Mw==", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/183#discussion_r392606243", "bodyText": "Does ist really use the value of the entry as the key or does it use the string value as the key?", "author": "Bukama", "createdAt": "2020-03-14T17:50:04Z", "path": "docs/report-entries.adoc", "diffHunk": "@@ -0,0 +1,79 @@\n+:page-title: Report entries\n+:page-description: JUnit Jupiter extension to report things with annotations.\n+\n+You can use `@ReportEntry` as a simple way to declaratively add metadata to test methods.\n+\n+From the https://https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection[JUnit 5 documentation]:\n+\n+\"In JUnit Jupiter you should use `TestReporter` where you used to print information to\n+`stdout` or `stderr` in JUnit 4. Using `@RunWith(JUnitPlatform.class)` will output all reported\n+entries to `stdout`. In addition, some IDEs print report entries to `stdout` or display them\n+in the user interface for test results.\"\n+\n+== Standard Use of TestReporter\n+\n+From the https://https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection[JUnit 5 documentation]:\n+\n+\"If a constructor or method parameter is of type `TestReporter`, the `TestReporterParameterResolver`\n+will supply an instance of `TestReporter`. The `TestReporter` can be used to publish additional\n+data about the current test run. The data can be consumed via the `reportingEntryPublished()`\n+method in a `TestExecutionListener`, allowing it to be viewed in IDEs or included in reports.\"\n+\n+So, you would use it kind of like this:\n+\n+[source,java]\n+----\n+@Test\n+void reportingTest(TestReporter reporter) {\n+    reporter.publishEntry(\"Hello World!\");\n+    // YOUR TEST CODE HERE\n+}\n+----\n+\n+You can have a look at https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/TestReporter.html[the official documentation how TestReporter works].\n+\n+== With the extension\n+\n+It can be argued that publishing data about your tests should not be in your test code because it\n+is simply not part of your test. It is meta-data.\n+\n+So it makes sense that you should be able to add that meta-data to your test declaratively with\n+annotations and have JUnit take care of the publishing. This is what this extension is for!\n+\n+You can write...\n+\n+[source,java]\n+----\n+@Test\n+@ReportEntry(\"Hello World!\")\n+void reportingTest() {\n+    // YOUR TEST CODE HERE\n+}\n+----\n+\n+...and the extension will publish your report entry for you!\n+\n+You can declare multiple report entries on the same test (the annotation is repeatable).\n+\n+[source,java]\n+----\n+@Test\n+@ReportEntry(\"foo\")\n+@ReportEntry(\"bar\")\n+void reportingTest() {\n+    // YOUR TEST CODE HERE\n+}\n+----\n+\n+You can also declare your own keys in the annotation (if you don't declare it, JUnit\n+will use the value of the entry as the key).", "originalCommit": "42fbad70d555d33a30808b9729ede731ac1dcfab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNzk2NA==", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/183#discussion_r392607964", "bodyText": "You are right, the new solution does use the String \"value\" as a key if there is no key specified. My original solution used publishReportEntry(String value) <- that does behave this way.\nI'll rewrite it.", "author": "Michael1993", "createdAt": "2020-03-14T18:15:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNjI0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNjQyMg==", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/183#discussion_r392606422", "bodyText": "I mean this: The String \"value\" is used as default.", "author": "Bukama", "createdAt": "2020-03-14T17:52:30Z", "path": "src/main/java/org/junitpioneer/jupiter/ReportEntry.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright 2015-2020 the original author or authors.\n+ *\n+ * All rights reserved. This program and the accompanying materials are\n+ * made available under the terms of the Eclipse Public License v2.0 which\n+ * accompanies this distribution and is available at\n+ *\n+ * http://www.eclipse.org/legal/epl-v20.html\n+ */\n+\n+package org.junitpioneer.jupiter;\n+\n+import java.lang.annotation.Repeatable;\n+import java.lang.annotation.Retention;\n+import java.lang.annotation.RetentionPolicy;\n+\n+import org.junit.jupiter.api.extension.ExtendWith;\n+\n+/**\n+ * Publish the specified key-value pair to be consumed by an\n+ * {@code org.junit.platform.engine.EngineExecutionListener}\n+ * in order to supply additional information to the reporting\n+ * infrastructure. This is funtionally identical to calling\n+ * {@link org.junit.jupiter.api.extension.ExtensionContext#publishReportEntry(String, String) ExtensionContext::publishReportEntry}\n+ * from within the test method.\n+ */\n+@Repeatable(ReportEntries.class)\n+@Retention(RetentionPolicy.RUNTIME)\n+@ExtendWith(ReportEntryExtension.class)\n+public @interface ReportEntry {\n+\n+\t/**\n+\t * Specifies the key of the pair that's to be published as a report entry.\n+\t * Defaults to {@code \"value\"} and can't be blank.\n+\t *\n+\t * @see org.junit.jupiter.api.extension.ExtensionContext#publishReportEntry(String, String) ExtensionContext::publishReportEntry\n+\t */\n+\tString key() default \"value\";", "originalCommit": "42fbad70d555d33a30808b9729ede731ac1dcfab", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjcwNTI3Nw==", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/183#discussion_r392705277", "bodyText": "Yes, even the unit tests show that you are correct.", "author": "Michael1993", "createdAt": "2020-03-15T19:39:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjYwNjQyMg=="}], "type": "inlineReview"}, {"oid": "1f4b13b77e8a209bab4399c69719ba562a1b6ae1", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/1f4b13b77e8a209bab4399c69719ba562a1b6ae1", "message": "Rewrote line about report entry key using 'value'", "committedDate": "2020-03-16T09:52:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mzg3NTY2MA==", "url": "https://github.com/junit-pioneer/junit-pioneer/pull/183#discussion_r393875660", "bodyText": "This should be correct. Thanks for editing it.", "author": "Bukama", "createdAt": "2020-03-17T18:11:09Z", "path": "docs/report-entries.adoc", "diffHunk": "@@ -65,8 +65,8 @@ void reportingTest() {\n }\n ----\n \n-You can also declare your own keys in the annotation (if you don't declare it, JUnit\n-will use the value of the entry as the key).\n+You can also declare your own keys in the annotation (if you don't declare it, the\n+extension will use 'value' as the key).", "originalCommit": "1f4b13b77e8a209bab4399c69719ba562a1b6ae1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "54f2733351d581ab8e6609751aba91020979c4cd", "url": "https://github.com/junit-pioneer/junit-pioneer/commit/54f2733351d581ab8e6609751aba91020979c4cd", "message": "Edited documentation", "committedDate": "2020-03-26T20:19:56Z", "type": "commit"}]}