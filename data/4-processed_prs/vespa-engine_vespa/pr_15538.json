{"pr_number": 15538, "pr_title": "Arnej/less simple tensor engine", "pr_createdAt": "2020-11-30T13:19:17Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15538", "timeline": [{"oid": "450c0f9bd7eee971c8f63824cbb4f2b7a3a4d1c4", "url": "https://github.com/vespa-engine/vespa/commit/450c0f9bd7eee971c8f63824cbb4f2b7a3a4d1c4", "message": "compare with reference operation", "committedDate": "2020-11-30T12:55:13Z", "type": "commit"}, {"oid": "7a9047804a199fb3472a6c31127cf0368ecb173e", "url": "https://github.com/vespa-engine/vespa/commit/7a9047804a199fb3472a6c31127cf0368ecb173e", "message": "SimpleTensorEngine -> SimpleValueBuilderFactory", "committedDate": "2020-11-30T12:55:17Z", "type": "commit"}, {"oid": "6cfdc395d29bbb399c3010c0d60a3141f8d4d915", "url": "https://github.com/vespa-engine/vespa/commit/6cfdc395d29bbb399c3010c0d60a3141f8d4d915", "message": "remove comparison with SimpleTensor results", "committedDate": "2020-11-30T12:56:41Z", "type": "commit"}, {"oid": "1161a1a21db6d967cecf0bd16887d608285cc53c", "url": "https://github.com/vespa-engine/vespa/commit/1161a1a21db6d967cecf0bd16887d608285cc53c", "message": "SimpleTensorEngine -> SimpleValueBuilderFactory", "committedDate": "2020-11-30T12:58:34Z", "type": "commit"}, {"oid": "958c6b36103f9d638cf25a83ab9b79eae85d30a7", "url": "https://github.com/vespa-engine/vespa/commit/958c6b36103f9d638cf25a83ab9b79eae85d30a7", "message": "out-of-bound verbatim label not allowed, use dynamic peek", "committedDate": "2020-11-30T13:09:01Z", "type": "commit"}, {"oid": "b8601ce03e91fd8caba36c3d5ca056e5876cc0f3", "url": "https://github.com/vespa-engine/vespa/commit/b8601ce03e91fd8caba36c3d5ca056e5876cc0f3", "message": "test with SimpleValueBuilderFactory instead", "committedDate": "2020-11-30T13:09:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzIzNTk4MQ==", "url": "https://github.com/vespa-engine/vespa/pull/15538#discussion_r533235981", "bodyText": "here I think we should use the reference evaluation instead", "author": "havardpe", "createdAt": "2020-12-01T09:42:32Z", "path": "eval/src/vespa/eval/eval/tensor_spec.cpp", "diffHunk": "@@ -208,7 +208,8 @@ TensorSpec::from_expr(const vespalib::string &expr)\n     NoParams no_params;\n     auto fun = Function::parse(expr);\n     if (!fun->has_error() && (fun->num_params() == 0)) {\n-        InterpretedFunction ifun(SimpleTensorEngine::ref(), *fun, NodeTypes());\n+        NodeTypes node_types(*fun, {});\n+        InterpretedFunction ifun(SimpleValueBuilderFactory::get(), *fun, node_types);", "originalCommit": "b8601ce03e91fd8caba36c3d5ca056e5876cc0f3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "57e93a62faf5f7f34ea2de07cb6f37246353fb30", "url": "https://github.com/vespa-engine/vespa/commit/57e93a62faf5f7f34ea2de07cb6f37246353fb30", "message": "use ReferenceEvaluation instead", "committedDate": "2020-12-01T11:24:56Z", "type": "commit"}]}