{"pr_number": 12065, "pr_title": "track the total number of connection objects", "pr_createdAt": "2020-02-04T13:45:13Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12065", "timeline": [{"oid": "b0f12f2e14682e322bd8e43500378fe0ffd4a6ae", "url": "https://github.com/vespa-engine/vespa/commit/b0f12f2e14682e322bd8e43500378fe0ffd4a6ae", "message": "track the total number of connection objects", "committedDate": "2020-02-04T12:07:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NDY4NTQ4OQ==", "url": "https://github.com/vespa-engine/vespa/pull/12065#discussion_r374685489", "bodyText": "These could be fetch_add(1, std::memory_order_relaxed)/fetch_sub(1, std::memory_order_relaxed) instead to avoid fences, but it won't matter much in the grand scheme of things.", "author": "vekterli", "createdAt": "2020-02-04T14:00:31Z", "path": "fnet/src/vespa/fnet/connection.cpp", "diffHunk": "@@ -489,6 +491,7 @@ FNET_Connection::FNET_Connection(FNET_TransportThread *owner,\n       _cleanup(nullptr)\n {\n     assert(_socket && (_socket->get_fd() >= 0));\n+    ++_num_connections;", "originalCommit": "b0f12f2e14682e322bd8e43500378fe0ffd4a6ae", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e1291b03db1a536baba04fa899a99f5450304b99", "url": "https://github.com/vespa-engine/vespa/commit/e1291b03db1a536baba04fa899a99f5450304b99", "message": "use relaxed add/sub", "committedDate": "2020-02-04T14:45:04Z", "type": "commit"}]}