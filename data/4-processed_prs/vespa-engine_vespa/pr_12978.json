{"pr_number": 12978, "pr_title": "Use std::conditional to selct correct type depending on if std::atomi\u2026", "pr_createdAt": "2020-04-19T21:12:18Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12978", "timeline": [{"oid": "8e88818447406c8f5c4f6133dfe4ac063c858e15", "url": "https://github.com/vespa-engine/vespa/commit/8e88818447406c8f5c4f6133dfe4ac063c858e15", "message": "Use std::conditional to selct correct type depending on if std::atomic<TaggedPtr> is lock free.", "committedDate": "2020-04-19T21:08:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk5NDY3MA==", "url": "https://github.com/vespa-engine/vespa/pull/12978#discussion_r410994670", "bodyText": "TagTaggedPtr ?", "author": "toregge", "createdAt": "2020-04-19T21:25:25Z", "path": "vespamalloc/src/vespamalloc/malloc/allocchunk.h", "diffHunk": "@@ -50,21 +57,20 @@ struct TaggedPtr {\n         );\n         return result;\n     }\n-#endif\n \n     void *_ptr;\n     size_t _tag;\n } __attribute__ ((aligned (16)));\n+#else\n+    using AtomicTaggedPtr = TagTaggedPtr;", "originalCommit": "8e88818447406c8f5c4f6133dfe4ac063c858e15", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk5NTE0OQ==", "url": "https://github.com/vespa-engine/vespa/pull/12978#discussion_r410995149", "bodyText": "Fixed", "author": "baldersheim", "createdAt": "2020-04-19T21:28:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk5NDY3MA=="}], "type": "inlineReview"}, {"oid": "e79c87f47a7695727d9f19a011c2ede1a270d1c2", "url": "https://github.com/vespa-engine/vespa/commit/e79c87f47a7695727d9f19a011c2ede1a270d1c2", "message": "The challenge when having config system dependent compiles...", "committedDate": "2020-04-19T21:27:50Z", "type": "commit"}]}