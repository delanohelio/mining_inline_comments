{"pr_number": 15437, "pr_title": "Balder/some preliminary cleanup", "pr_createdAt": "2020-11-23T20:27:57Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15437", "timeline": [{"oid": "45ef55eb4c13ed89391b4c61f81c719fc4f2033a", "url": "https://github.com/vespa-engine/vespa/commit/45ef55eb4c13ed89391b4c61f81c719fc4f2033a", "message": "- Reorder members for compactness.\n- Avoid needing the definition of Error everywhere.\n- use std::make_xxx and other c++11 constructs.", "committedDate": "2020-11-23T19:54:57Z", "type": "commit"}, {"oid": "3e2f13c7052267680696ed192a3789e756746c08", "url": "https://github.com/vespa-engine/vespa/commit/3e2f13c7052267680696ed192a3789e756746c08", "message": "Use std::string for selection as that is required for parsing and as it has a smaller memory footprint.", "committedDate": "2020-11-23T20:19:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4OTU5OQ==", "url": "https://github.com/vespa-engine/vespa/pull/15437#discussion_r529489599", "bodyText": "Consider wrapping in a temporary string, data() isn't guaranteed to be null-terminated", "author": "vekterli", "createdAt": "2020-11-24T11:55:31Z", "path": "messagebus_test/src/tests/speed/cpp-client.cpp", "diffHunk": "@@ -76,7 +77,7 @@ Client::handleReply(Reply::UP reply) {\n         for (uint32_t i = 0; i < reply->getNumErrors(); ++i) {\n             fprintf(stderr, \"ERR[%d]: code=%d, msg=%s\\n\", i,\n                     reply->getError(i).getCode(),\n-                    reply->getError(i).getMessage().c_str());\n+                    reply->getError(i).getMessage().data());", "originalCommit": "3e2f13c7052267680696ed192a3789e756746c08", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTUyODI4OQ==", "url": "https://github.com/vespa-engine/vespa/pull/15437#discussion_r529528289", "bodyText": "Fixed", "author": "baldersheim", "createdAt": "2020-11-24T13:03:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTQ4OTU5OQ=="}], "type": "inlineReview"}, {"oid": "589ab13f8d23fce8363a03656d270b617e603829", "url": "https://github.com/vespa-engine/vespa/commit/589ab13f8d23fce8363a03656d270b617e603829", "message": "Use c_str instead of data.", "committedDate": "2020-11-24T12:59:10Z", "type": "commit"}]}