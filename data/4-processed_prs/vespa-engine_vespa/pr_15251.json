{"pr_number": 15251, "pr_title": "Reapply \"Report metrics on athenz client errors\"", "pr_createdAt": "2020-11-10T10:58:48Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15251", "timeline": [{"oid": "2f85ccf289e957a0d798ae61994ffd3f21bc1e11", "url": "https://github.com/vespa-engine/vespa/commit/2f85ccf289e957a0d798ae61994ffd3f21bc1e11", "message": "Revert \"Revert \"Report metrics on athenz client errors\"\"", "committedDate": "2020-11-10T10:58:36Z", "type": "commit"}, {"oid": "908ccf17e86b14efc5f074cb999079cec11e6fbf", "url": "https://github.com/vespa-engine/vespa/commit/908ccf17e86b14efc5f074cb999079cec11e6fbf", "message": "Move ErrorHandler", "committedDate": "2020-11-10T11:14:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMDU1MzU0MQ==", "url": "https://github.com/vespa-engine/vespa/pull/15251#discussion_r520553541", "bodyText": "Replace HttpUriRequest with a custom sub-interface containing the getters you need for metric reporting", "author": "bjorncs", "createdAt": "2020-11-10T13:17:10Z", "path": "vespa-athenz/src/main/java/com/yahoo/vespa/athenz/client/ErrorHandler.java", "diffHunk": "@@ -0,0 +1,13 @@\n+package com.yahoo.vespa.athenz.client;\n+\n+import com.yahoo.vespa.athenz.client.common.ClientBase;\n+import org.apache.http.client.methods.HttpUriRequest;\n+\n+public interface ErrorHandler {\n+    static ErrorHandler empty() {\n+        return (r, e) -> {\n+        };\n+    }\n+\n+    void reportError(HttpUriRequest request, Exception error);", "originalCommit": "908ccf17e86b14efc5f074cb999079cec11e6fbf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf38ecd0ec3c835a00d860eb30223800e82a4b92", "url": "https://github.com/vespa-engine/vespa/commit/cf38ecd0ec3c835a00d860eb30223800e82a4b92", "message": "Remove http client types", "committedDate": "2020-11-10T13:31:13Z", "type": "commit"}, {"oid": "cf38ecd0ec3c835a00d860eb30223800e82a4b92", "url": "https://github.com/vespa-engine/vespa/commit/cf38ecd0ec3c835a00d860eb30223800e82a4b92", "message": "Remove http client types", "committedDate": "2020-11-10T13:31:13Z", "type": "forcePushed"}]}