{"pr_number": 13503, "pr_title": "Split cd test module in implementation and api modules", "pr_createdAt": "2020-06-08T07:35:36Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/13503", "timeline": [{"oid": "c1e109021d4439c9245ce97a1d5fb05048153c86", "url": "https://github.com/vespa-engine/vespa/commit/c1e109021d4439c9245ce97a1d5fb05048153c86", "message": "Split cd test module in implementation and api modules", "committedDate": "2020-06-10T09:34:30Z", "type": "forcePushed"}, {"oid": "9f18b1c614d6fa664bd13bcd20e16fd9f28db394", "url": "https://github.com/vespa-engine/vespa/commit/9f18b1c614d6fa664bd13bcd20e16fd9f28db394", "message": "Correct artifact name", "committedDate": "2020-06-10T17:29:52Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0MzY5Ng==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r438743696", "bodyText": "Should this be hosted-tenant-base?", "author": "bjorncs", "createdAt": "2020-06-11T12:24:12Z", "path": "cloud-tenant-base/pom.xml", "diffHunk": "@@ -0,0 +1,383 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- Copyright 2019 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root. -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <artifactId>cloud-tenant-base</artifactId>\n+    <name>Vespa Cloud tenant base</name>\n+    <version>7-SNAPSHOT</version>\n+    <description>Parent POM for all Vespa Cloud applications.</description>\n+    <url>https://github.com/vespa-engine</url>\n+    <packaging>pom</packaging>\n+\n+    <parent>\n+        <artifactId>tenant-base</artifactId>", "originalCommit": "912578c1a99d660112e93a642541511ec5a5b1a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0NDUzNA==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r438744534", "bodyText": "We'll need to clean up these dependencies when we redesign this as a bundle", "author": "bjorncs", "createdAt": "2020-06-11T12:25:48Z", "path": "cloud-tenant-cd/pom.xml", "diffHunk": "@@ -20,6 +18,11 @@\n     </parent>\n \n     <dependencies>", "originalCommit": "912578c1a99d660112e93a642541511ec5a5b1a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0NTk2Mg==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r438745962", "bodyText": "We'll have to override the scope to runtime for cloud-tenant-base, perhaps we need to move this definition down.", "author": "bjorncs", "createdAt": "2020-06-11T12:28:42Z", "path": "hosted-tenant-base/pom.xml", "diffHunk": "@@ -0,0 +1,408 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- Copyright 2019 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root. -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <!--    <version>7-SNAPSHOT</version>-->\n+    <!--    <url>https://github.com/vespa-engine</url>-->\n+    <!--    <packaging>pom</packaging>-->\n+\n+    <groupId>com.yahoo.vespa</groupId>\n+    <artifactId>hosted-tenant-base</artifactId>\n+    <version>7-SNAPSHOT</version>\n+    <name>Base pom for all tenant base poms</name>\n+    <description>Parent POM for all Vespa base poms.</description>\n+    <url>https://github.com/vespa-engine</url>\n+    <packaging>pom</packaging>\n+\n+    <licenses>\n+        <license>\n+            <name>The Apache License, Version 2.0</name>\n+            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\n+        </license>\n+    </licenses>\n+    <developers>\n+        <developer>\n+            <name>Vespa</name>\n+            <url>https://github.com/vespa-engine</url>\n+        </developer>\n+    </developers>\n+    <scm>\n+        <connection>scm:git:git@github.com:vespa-engine/vespa.git</connection>\n+        <developerConnection>scm:git:git@github.com:vespa-engine/vespa.git</developerConnection>\n+        <url>git@github.com:vespa-engine/vespa.git</url>\n+    </scm>\n+\n+    <properties>\n+        <vespaversion>${project.version}</vespaversion>\n+        <test-framework.version>${project.version}</test-framework.version>\n+        <target_jdk_version>11</target_jdk_version>\n+        <maven-compiler-plugin.version>3.8.0</maven-compiler-plugin.version>\n+        <maven-surefire-plugin.version>2.22.0</maven-surefire-plugin.version>\n+        <junit.version>5.4.2</junit.version>\n+        <endpoint>https://api.vespa-external.aws.oath.cloud:4443</endpoint>\n+        <test.categories>!integration</test.categories>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>com.yahoo.vespa</groupId>\n+                <artifactId>container-dependency-versions</artifactId>\n+                <version>${vespaversion}</version>\n+                <type>pom</type>\n+                <scope>import</scope>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>org.junit.vintage</groupId>\n+                <artifactId>junit-vintage-engine</artifactId>\n+                <version>${junit.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>org.junit.jupiter</groupId>\n+                <artifactId>junit-jupiter-engine</artifactId>\n+                <version>${junit.version}</version>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>com.yahoo.vespa</groupId>\n+            <artifactId>container</artifactId>\n+            <version>${vespaversion}</version>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.yahoo.vespa</groupId>\n+            <artifactId>container-test</artifactId>\n+            <version>${vespaversion}</version>\n+            <scope>test</scope>", "originalCommit": "912578c1a99d660112e93a642541511ec5a5b1a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI2NzQwNg==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r439267406", "bodyText": "can't we just set the scope to runtime in hosted-tenant-base?", "author": "tokle", "createdAt": "2020-06-12T07:58:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0NTk2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0NjEwMQ==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r438746101", "bodyText": "No idea why these exclusions are here.", "author": "bjorncs", "createdAt": "2020-06-11T12:28:58Z", "path": "hosted-tenant-base/pom.xml", "diffHunk": "@@ -0,0 +1,408 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!-- Copyright 2019 Oath Inc. Licensed under the terms of the Apache 2.0 license. See LICENSE in the project root. -->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n+         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+    <modelVersion>4.0.0</modelVersion>\n+\n+    <!--    <version>7-SNAPSHOT</version>-->\n+    <!--    <url>https://github.com/vespa-engine</url>-->\n+    <!--    <packaging>pom</packaging>-->\n+\n+    <groupId>com.yahoo.vespa</groupId>\n+    <artifactId>hosted-tenant-base</artifactId>\n+    <version>7-SNAPSHOT</version>\n+    <name>Base pom for all tenant base poms</name>\n+    <description>Parent POM for all Vespa base poms.</description>\n+    <url>https://github.com/vespa-engine</url>\n+    <packaging>pom</packaging>\n+\n+    <licenses>\n+        <license>\n+            <name>The Apache License, Version 2.0</name>\n+            <url>http://www.apache.org/licenses/LICENSE-2.0.txt</url>\n+        </license>\n+    </licenses>\n+    <developers>\n+        <developer>\n+            <name>Vespa</name>\n+            <url>https://github.com/vespa-engine</url>\n+        </developer>\n+    </developers>\n+    <scm>\n+        <connection>scm:git:git@github.com:vespa-engine/vespa.git</connection>\n+        <developerConnection>scm:git:git@github.com:vespa-engine/vespa.git</developerConnection>\n+        <url>git@github.com:vespa-engine/vespa.git</url>\n+    </scm>\n+\n+    <properties>\n+        <vespaversion>${project.version}</vespaversion>\n+        <test-framework.version>${project.version}</test-framework.version>\n+        <target_jdk_version>11</target_jdk_version>\n+        <maven-compiler-plugin.version>3.8.0</maven-compiler-plugin.version>\n+        <maven-surefire-plugin.version>2.22.0</maven-surefire-plugin.version>\n+        <junit.version>5.4.2</junit.version>\n+        <endpoint>https://api.vespa-external.aws.oath.cloud:4443</endpoint>\n+        <test.categories>!integration</test.categories>\n+    </properties>\n+\n+    <dependencyManagement>\n+        <dependencies>\n+            <dependency>\n+                <groupId>com.yahoo.vespa</groupId>\n+                <artifactId>container-dependency-versions</artifactId>\n+                <version>${vespaversion}</version>\n+                <type>pom</type>\n+                <scope>import</scope>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>org.junit.vintage</groupId>\n+                <artifactId>junit-vintage-engine</artifactId>\n+                <version>${junit.version}</version>\n+            </dependency>\n+\n+            <dependency>\n+                <groupId>org.junit.jupiter</groupId>\n+                <artifactId>junit-jupiter-engine</artifactId>\n+                <version>${junit.version}</version>\n+            </dependency>\n+        </dependencies>\n+    </dependencyManagement>\n+\n+    <dependencies>\n+        <dependency>\n+            <groupId>com.yahoo.vespa</groupId>\n+            <artifactId>container</artifactId>\n+            <version>${vespaversion}</version>\n+            <scope>provided</scope>\n+        </dependency>\n+\n+        <dependency>\n+            <groupId>com.yahoo.vespa</groupId>\n+            <artifactId>container-test</artifactId>\n+            <version>${vespaversion}</version>\n+            <scope>test</scope>\n+            <exclusions>\n+                <exclusion>\n+                    <groupId>org.apache.commons</groupId>", "originalCommit": "912578c1a99d660112e93a642541511ec5a5b1a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTI2NzU5Mw==", "url": "https://github.com/vespa-engine/vespa/pull/13503#discussion_r439267593", "bodyText": "\ud83e\udd37", "author": "tokle", "createdAt": "2020-06-12T07:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODc0NjEwMQ=="}], "type": "inlineReview"}, {"oid": "d36dba4485c598160e35ea9fc492950633910586", "url": "https://github.com/vespa-engine/vespa/commit/d36dba4485c598160e35ea9fc492950633910586", "message": "Change container-test scope to 'runtime'", "committedDate": "2020-06-15T09:27:45Z", "type": "forcePushed"}, {"oid": "5a5221dd531c1a927685a5d18f2fb9eb3e2a474c", "url": "https://github.com/vespa-engine/vespa/commit/5a5221dd531c1a927685a5d18f2fb9eb3e2a474c", "message": "Split cd test module in implementation and api modules", "committedDate": "2020-06-15T10:34:45Z", "type": "commit"}, {"oid": "a19da10e4ab5997e3398754cdffc4e948f5ede60", "url": "https://github.com/vespa-engine/vespa/commit/a19da10e4ab5997e3398754cdffc4e948f5ede60", "message": "Rename tenant-cd-impl -> cloud-tenant-cd", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "71d24e5944fae958383cdb4fa63e37f4bbe1f2a0", "url": "https://github.com/vespa-engine/vespa/commit/71d24e5944fae958383cdb4fa63e37f4bbe1f2a0", "message": "tenant-cd -> tenant-cd-api", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "bdedf768a0f50374f793c4e06a31226edf33abe3", "url": "https://github.com/vespa-engine/vespa/commit/bdedf768a0f50374f793c4e06a31226edf33abe3", "message": "Introduce cloud-tenant-base and hosted-tenant-base", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "9c05a9a193f4e851b8b1dc37954adf5575522a92", "url": "https://github.com/vespa-engine/vespa/commit/9c05a9a193f4e851b8b1dc37954adf5575522a92", "message": "Correct artifact name", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "cf801611d775800e11ee0414c36c1db2871981ac", "url": "https://github.com/vespa-engine/vespa/commit/cf801611d775800e11ee0414c36c1db2871981ac", "message": "Move excludes to correct module", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "89b0f8c7f960105e9949f052703b6bbad28965c1", "url": "https://github.com/vespa-engine/vespa/commit/89b0f8c7f960105e9949f052703b6bbad28965c1", "message": "Use correct parent", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "a6204f050b213a2c2f4d28fbc604acf36d8a37c1", "url": "https://github.com/vespa-engine/vespa/commit/a6204f050b213a2c2f4d28fbc604acf36d8a37c1", "message": "Change container-test scope to 'runtime'", "committedDate": "2020-06-15T10:34:46Z", "type": "commit"}, {"oid": "27f7caad383b133836be7414309921cee3b23e2b", "url": "https://github.com/vespa-engine/vespa/commit/27f7caad383b133836be7414309921cee3b23e2b", "message": "Fix merge conflicts", "committedDate": "2020-06-15T10:35:57Z", "type": "commit"}, {"oid": "27f7caad383b133836be7414309921cee3b23e2b", "url": "https://github.com/vespa-engine/vespa/commit/27f7caad383b133836be7414309921cee3b23e2b", "message": "Fix merge conflicts", "committedDate": "2020-06-15T10:35:57Z", "type": "forcePushed"}]}