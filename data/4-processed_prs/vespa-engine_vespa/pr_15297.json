{"pr_number": 15297, "pr_title": "Arnej/add join with number optimization", "pr_createdAt": "2020-11-11T17:49:16Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/15297", "timeline": [{"oid": "3968f683fd4a6883d896cda698a34729e7338148", "url": "https://github.com/vespa-engine/vespa/commit/3968f683fd4a6883d896cda698a34729e7338148", "message": "optimize join with number, with unit test", "committedDate": "2020-11-11T16:03:17Z", "type": "commit"}, {"oid": "1594fe98bd25586887cb5ea2f395fcd12cc01912", "url": "https://github.com/vespa-engine/vespa/commit/1594fe98bd25586887cb5ea2f395fcd12cc01912", "message": "try adding a utility and more tests", "committedDate": "2020-11-11T17:42:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk2OTM3Nw==", "url": "https://github.com/vespa-engine/vespa/pull/15297#discussion_r521969377", "bodyText": "no need to return this here", "author": "havardpe", "createdAt": "2020-11-12T09:42:33Z", "path": "eval/src/vespa/eval/eval/test/param_variants.h", "diffHunk": "@@ -0,0 +1,23 @@\n+#include \"eval_fixture.h\"\n+#include \"tensor_model.hpp\"\n+\n+namespace vespalib::eval::test {\n+\n+// for testing of optimizers / tensor functions\n+// we produce the same param three times:\n+// as-is, with float cells, and tagged as mutable.\n+EvalFixture::ParamRepo &", "originalCommit": "1594fe98bd25586887cb5ea2f395fcd12cc01912", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTk3MDk4Nw==", "url": "https://github.com/vespa-engine/vespa/pull/15297#discussion_r521970987", "bodyText": "after discussion: names should be with '@' prefix for mutable and '_f' for float cells (4 variants)", "author": "havardpe", "createdAt": "2020-11-12T09:45:00Z", "path": "eval/src/vespa/eval/eval/test/param_variants.h", "diffHunk": "@@ -0,0 +1,23 @@\n+#include \"eval_fixture.h\"\n+#include \"tensor_model.hpp\"\n+\n+namespace vespalib::eval::test {\n+\n+// for testing of optimizers / tensor functions\n+// we produce the same param three times:\n+// as-is, with float cells, and tagged as mutable.\n+EvalFixture::ParamRepo &\n+add_variants(EvalFixture::ParamRepo &repo,\n+             const vespalib::string &name_base,\n+             const Layout &base_layout,\n+             const Sequence &seq)\n+{\n+    auto name_f = name_base + \"_float\";\n+    auto name_m = name_base + \"_mutable\";\n+    repo.add(name_base, spec(base_layout, seq), false);", "originalCommit": "1594fe98bd25586887cb5ea2f395fcd12cc01912", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "cf0f2a8dc65a581bc55c3c3b66cf3e6ed2c23120", "url": "https://github.com/vespa-engine/vespa/commit/cf0f2a8dc65a581bc55c3c3b66cf3e6ed2c23120", "message": "update add_variants after review", "committedDate": "2020-11-12T10:43:36Z", "type": "commit"}, {"oid": "c8e26367ded09a6f5d205fd5b74e41b6d7d4af83", "url": "https://github.com/vespa-engine/vespa/commit/c8e26367ded09a6f5d205fd5b74e41b6d7d4af83", "message": "Merge branch 'master' into arnej/add-join-with-number-optimization\n\nConflicts:\n\teval/CMakeLists.txt\n\teval/src/vespa/eval/instruction/CMakeLists.txt", "committedDate": "2020-11-12T10:44:57Z", "type": "commit"}]}