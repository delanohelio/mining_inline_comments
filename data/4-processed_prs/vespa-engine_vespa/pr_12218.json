{"pr_number": 12218, "pr_title": "Add tenant access rules for /routing/v1/", "pr_createdAt": "2020-02-17T11:57:05Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12218", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1Mjg4Mw==", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380152883", "bodyText": "Seems to me everything under /status/ is GET, and could lie here, with .../{tenant}/{*}.", "author": "jonmv", "createdAt": "2020-02-17T12:25:50Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -53,7 +55,8 @@\n                Optional.of(\"/api\"),\n                \"/application/v4/tenant/{tenant}/application/\",\n                \"/application/v4/tenant/{tenant}/cost\",\n-               \"/application/v4/tenant/{tenant}/cost/{date}\"),\n+               \"/application/v4/tenant/{tenant}/cost/{date}\",\n+               \"/routing/v1/status/tenant/{tenant}\"),", "originalCommit": "e06a00c19a1340ea5efbc7d0e05a114fac4ac8cc", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1MzQ3Nw==", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380153477", "bodyText": "Thanks!", "author": "mpolden", "createdAt": "2020-02-17T12:27:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE1Mjg4Mw=="}], "type": "inlineReview"}, {"oid": "40e429feef528c3203b0f23c0ed3d59e0906a55a", "url": "https://github.com/vespa-engine/vespa/commit/40e429feef528c3203b0f23c0ed3d59e0906a55a", "message": "Add tenant access rules for /routing/v1/", "committedDate": "2020-02-17T12:46:10Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng==", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380176646", "bodyText": "Ah, there was one /inactive/ as well? So I guess this is to allow application owners to manipulate endpoint status? The athenzTenantAdmin does not cover this group \u2014\u00a0it was split out specifically for the legacy pipeline. Putting this under the applicationInfo should work for both sets of roles (Athenz and otherwise).", "author": "jonmv", "createdAt": "2020-02-17T13:19:19Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/role/PathGroup.java", "diffHunk": "@@ -153,7 +156,8 @@\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/test/region/{region}/instance/{ignored}/deploy\",\n                          \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}\",\n-                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\"),\n+                         \"/application/v4/tenant/{tenant}/application/{application}/environment/staging/region/{region}/instance/{ignored}/deploy\",\n+                         \"/routing/v1/inactive/tenant/{tenant}/application/{application}/instance/{ignored}/environment/prod/region/{region}\"),", "originalCommit": "40e429feef528c3203b0f23c0ed3d59e0906a55a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4NTgwNg==", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380185806", "bodyText": "Done. There's too many groups!", "author": "mpolden", "createdAt": "2020-02-17T13:38:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE5MjU5MA==", "url": "https://github.com/vespa-engine/vespa/pull/12218#discussion_r380192590", "bodyText": "Yes, should be able to remove some already now.", "author": "jonmv", "createdAt": "2020-02-17T13:50:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE3NjY0Ng=="}], "type": "inlineReview"}, {"oid": "350797fb677fd5936bf4bec50dfb250fea9b1886", "url": "https://github.com/vespa-engine/vespa/commit/350797fb677fd5936bf4bec50dfb250fea9b1886", "message": "Add tenant access rules for /routing/v1/", "committedDate": "2020-02-17T13:37:11Z", "type": "commit"}, {"oid": "350797fb677fd5936bf4bec50dfb250fea9b1886", "url": "https://github.com/vespa-engine/vespa/commit/350797fb677fd5936bf4bec50dfb250fea9b1886", "message": "Add tenant access rules for /routing/v1/", "committedDate": "2020-02-17T13:37:11Z", "type": "forcePushed"}]}