{"pr_number": 14869, "pr_title": "Arnej/minor document cleanup", "pr_createdAt": "2020-10-14T15:07:10Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14869", "timeline": [{"oid": "3d2645d8593874be4da8e5f73cd5a7e2cecfd399", "url": "https://github.com/vespa-engine/vespa/commit/3d2645d8593874be4da8e5f73cd5a7e2cecfd399", "message": "getAsTensorPtr() method can return \"pointer to tensor\"", "committedDate": "2020-10-14T15:05:32Z", "type": "commit"}, {"oid": "3d89b1eaf56c686a9e795f3a544050173ee503e3", "url": "https://github.com/vespa-engine/vespa/commit/3d89b1eaf56c686a9e795f3a544050173ee503e3", "message": "fix TensorFieldValue::compare to be correct (but slow)", "committedDate": "2020-10-14T15:05:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTMzOTg5Mw==", "url": "https://github.com/vespa-engine/vespa/pull/14869#discussion_r505339893", "bodyText": "Do we want to explicitly signal that these are raw pointers with auto* for such variables?", "author": "vekterli", "createdAt": "2020-10-15T08:33:04Z", "path": "document/src/vespa/document/serialization/vespadocumentserializer.cpp", "diffHunk": "@@ -368,7 +368,7 @@ VespaDocumentSerializer::write(const WeightedSetFieldValue &value) {\n void\n VespaDocumentSerializer::write(const TensorFieldValue &value) {\n     vespalib::nbostream tmpStream;\n-    auto &tensor = value.getAsTensorPtr();\n+    auto tensor = value.getAsTensorPtr();", "originalCommit": "3d89b1eaf56c686a9e795f3a544050173ee503e3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM5NTgzNw==", "url": "https://github.com/vespa-engine/vespa/pull/14869#discussion_r505395837", "bodyText": "+1 for auto* here", "author": "havardpe", "createdAt": "2020-10-15T09:30:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTMzOTg5Mw=="}], "type": "inlineReview"}]}