{"pr_number": 11807, "pr_title": "Jvenstad/cap log sizes during deployment jobs", "pr_createdAt": "2020-01-16T10:47:39Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/11807", "timeline": [{"oid": "2631d4ae0d5631c81bd19433439f1c65aa0ac4b3", "url": "https://github.com/vespa-engine/vespa/commit/2631d4ae0d5631c81bd19433439f1c65aa0ac4b3", "message": "Cap log entries from tests to 8kb per entry (line)", "committedDate": "2020-01-16T09:29:46Z", "type": "commit"}, {"oid": "8dc0f193ae78d0d61e7fc8f3de3b07498dc5d65b", "url": "https://github.com/vespa-engine/vespa/commit/8dc0f193ae78d0d61e7fc8f3de3b07498dc5d65b", "message": "Cap number of log chunks per job run", "committedDate": "2020-01-16T10:47:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzM4ODYzMQ==", "url": "https://github.com/vespa-engine/vespa/pull/11807#discussion_r367388631", "bodyText": "Hehe, This is 64kb >_<", "author": "jonmv", "createdAt": "2020-01-16T12:22:22Z", "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/persistence/BufferedLogStore.java", "diffHunk": "@@ -24,13 +25,22 @@\n  */\n public class BufferedLogStore {\n \n-    static final int chunkSize = 1 << 13;\n+    private static final int defaultChunkSize = 1 << 13; // 8kb per node stored in ZK.\n+    private static final int defaultMaxLogSize = 1 << 16; // 64Mb max per run.", "originalCommit": "8dc0f193ae78d0d61e7fc8f3de3b07498dc5d65b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}