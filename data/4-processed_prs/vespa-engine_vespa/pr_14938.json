{"pr_number": 14938, "pr_title": "Merge LocalSession and RemoteSession", "pr_createdAt": "2020-10-19T06:26:45Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14938", "timeline": [{"oid": "575c4df90a8391eaea5f797d679ff9979f4b4496", "url": "https://github.com/vespa-engine/vespa/commit/575c4df90a8391eaea5f797d679ff9979f4b4496", "message": "Merge LocalSession and RemoteSession", "committedDate": "2020-10-19T06:26:15Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3MDQ2OA==", "url": "https://github.com/vespa-engine/vespa/pull/14938#discussion_r507670468", "bodyText": "Perhaps rename this method as well, to be in line with others? deleteSessionFromFileSystem?", "author": "jonmv", "createdAt": "2020-10-19T11:25:27Z", "path": "configserver/src/main/java/com/yahoo/vespa/config/server/session/SessionRepository.java", "diffHunk": "@@ -320,28 +276,21 @@ void activate(RemoteSession session) {\n         log.log(Level.INFO, session.logPre() + \"Session activated: \" + sessionId);\n     }\n \n-    public void delete(Session remoteSession) {\n-        long sessionId = remoteSession.getSessionId();\n-        // TODO: Change log level to FINE when debugging is finished\n-        log.log(Level.INFO, () -> remoteSession.logPre() + \"Deactivating and deleting remote session \" + sessionId);\n-        deleteRemoteSessionFromZooKeeper(remoteSession);\n-        remoteSessionCache.remove(sessionId);\n-        LocalSession localSession = getLocalSession(sessionId);\n-        if (localSession != null) {\n-            // TODO: Change log level to FINE when debugging is finished\n-            log.log(Level.INFO, () -> localSession.logPre() + \"Deleting local session \" + sessionId);\n-            deleteLocalSession(localSession);\n-        }\n+    public void delete(Session session) {\n+        long sessionId = session.getSessionId();\n+        deleteSessionFromZooKeeper(session);\n+        sessionCache.remove(sessionId);\n+        deleteLocalSession(session);", "originalCommit": "575c4df90a8391eaea5f797d679ff9979f4b4496", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3NDg5MQ==", "url": "https://github.com/vespa-engine/vespa/pull/14938#discussion_r507674891", "bodyText": "Yeah, there is more renaming, collapsing and simplification that can be done. Will follow up in a later PR", "author": "hmusum", "createdAt": "2020-10-19T11:33:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3MDQ2OA=="}], "type": "inlineReview"}]}