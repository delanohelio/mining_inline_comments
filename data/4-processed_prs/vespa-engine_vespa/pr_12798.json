{"pr_number": 12798, "pr_title": "Default to epoch 0 with YumPackageName::toVersionLockName", "pr_createdAt": "2020-04-01T17:14:25Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12798", "timeline": [{"oid": "80f8f43b841f45e14929ee5801a5bc8e7448a385", "url": "https://github.com/vespa-engine/vespa/commit/80f8f43b841f45e14929ee5801a5bc8e7448a385", "message": "Default to epoch 0 with YumPackageName::toVersionLockName", "committedDate": "2020-04-01T17:14:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc4MjA3Nw==", "url": "https://github.com/vespa-engine/vespa/pull/12798#discussion_r401782077", "bodyText": "Throw if 0?", "author": "freva", "createdAt": "2020-04-01T17:21:09Z", "path": "node-admin/src/main/java/com/yahoo/vespa/hosted/node/admin/task/util/yum/YumPackageName.java", "diffHunk": "@@ -72,6 +72,15 @@ public Builder(YumPackageName packageName) {\n             architecture = packageName.architecture;\n         }\n \n+        /**\n+         * Set the epoch of the YUM package.\n+         *\n+         * <p>WARNING: Should only be invoked if the YUM package actually has an epoch. Typically\n+         * YUM packages doesn't have one explicitly set, and in case \"0\" will be used with\n+         * {@link #toVersionLockName()} (otherwise it fails), but it will be absent from an\n+         * install with {@link #toName()} (otherwise it fails). This typically means that\n+         * you should set this only if the epoch is != \"0\".</p>\n+         */\n         public Builder setEpoch(String epoch) { this.epoch = Optional.of(epoch); return this; }", "originalCommit": "80f8f43b841f45e14929ee5801a5bc8e7448a385", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc4MzMzMA==", "url": "https://github.com/vespa-engine/vespa/pull/12798#discussion_r401783330", "bodyText": "I'm not sure. I'm guessing the critical thing is whether an epoch has been set or not in the RPM spec?  One could theoretically set epoch 0, in case it might work and could serve to document it?\nIn any case I would like to avoid touching https://git.ouroath.com/vespa/vespa-yahoo/blob/master/hosted/host-admin/src/main/java/com/yahoo/vespa/hosted/hostadmin/task/network/FirewallTask.java#L71", "author": "hakonhall", "createdAt": "2020-04-01T17:23:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc4MjA3Nw=="}], "type": "inlineReview"}]}