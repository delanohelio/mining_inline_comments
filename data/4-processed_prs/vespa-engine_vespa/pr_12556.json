{"pr_number": 12556, "pr_title": "Cleanup rank setup validator", "pr_createdAt": "2020-03-13T08:43:32Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12556", "timeline": [{"oid": "592172e5b992149a7f0d04528943861d188403f1", "url": "https://github.com/vespa-engine/vespa/commit/592172e5b992149a7f0d04528943861d188403f1", "message": "Cleanup", "committedDate": "2020-03-12T10:36:03Z", "type": "commit"}, {"oid": "2195e1201eda50787c63e786d5a4f3a3d42882e7", "url": "https://github.com/vespa-engine/vespa/commit/2195e1201eda50787c63e786d5a4f3a3d42882e7", "message": "Merge commit '592172e5b992149a7f0d04528943861d188403f1' into hmusum/cleanup-RankSetupValidator", "committedDate": "2020-03-13T07:34:01Z", "type": "commit"}, {"oid": "76e8ead456dfa160eec758d079de40fd95e10567", "url": "https://github.com/vespa-engine/vespa/commit/76e8ead456dfa160eec758d079de40fd95e10567", "message": "Change name of temp dir and include application id in name of dir", "committedDate": "2020-03-13T08:42:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExNTg0NA==", "url": "https://github.com/vespa-engine/vespa/pull/12556#discussion_r392115844", "bodyText": "For consistency you should use append to avoid the '+' entirely here to.", "author": "baldersheim", "createdAt": "2020-03-13T09:29:23Z", "path": "config-model/src/main/java/com/yahoo/vespa/model/application/validation/RankSetupValidator.java", "diffHunk": "@@ -147,27 +152,27 @@ private boolean execValidate(String configId, SearchCluster sc, String sdName, D\n     }\n \n     private void validateWarn(Exception e, DeployLogger deployLogger) {\n-        String msg = \"Unable to execute 'vespa-verify-ranksetup', validation of rank expressions will only take place when you start Vespa: \" +\n+        String msg = \"Unable to execute '\"+ binaryName + \"', validation of rank expressions will only take place when you start Vespa: \" +\n                 Exceptions.toMessageString(e);\n         deployLogger.log(LogLevel.WARNING, msg);\n     }\n \n     private void validateFail(String output, SearchCluster sc, String sdName, DeployLogger deployLogger) {\n-        String errMsg = \"For search cluster '\" + sc.getClusterName() + \"', search definition '\" + sdName + \"': error in rank setup. Details:\\n\";\n+        StringBuilder errMsg = new StringBuilder(\"For search cluster '\" + sc.getClusterName() + \"', search definition '\" + sdName + \"': error in rank setup. Details:\\n\");", "originalCommit": "76e8ead456dfa160eec758d079de40fd95e10567", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExODAzNw==", "url": "https://github.com/vespa-engine/vespa/pull/12556#discussion_r392118037", "bodyText": "Yes, apparently IntelliJ didn't fix all this when I accepted the suggested change from String to StringBuilder. Will fix", "author": "hmusum", "createdAt": "2020-03-13T09:33:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjExNTg0NA=="}], "type": "inlineReview"}, {"oid": "7e63a481a108837843953029c6f94335672ac170", "url": "https://github.com/vespa-engine/vespa/commit/7e63a481a108837843953029c6f94335672ac170", "message": "Fix StringBuilder usage based on review feedback", "committedDate": "2020-03-13T09:41:24Z", "type": "commit"}]}