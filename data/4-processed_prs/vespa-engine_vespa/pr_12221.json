{"pr_number": 12221, "pr_title": "Production tests must start after a successful deployment", "pr_createdAt": "2020-02-17T13:14:10Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12221", "timeline": [{"oid": "197e45c615eb8dfe796f2e61d68019e69b8023fb", "url": "https://github.com/vespa-engine/vespa/commit/197e45c615eb8dfe796f2e61d68019e69b8023fb", "message": "Production tests must start after a successful deployment\n\n@mpolden please review and merge. This fixes an error where a production test would be marked as complete\nas long as it was on the correct version, and _any_ production deployment had previously completed", "committedDate": "2020-02-17T13:13:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4ODI0Ng==", "url": "https://github.com/vespa-engine/vespa/pull/12221#discussion_r380188246", "bodyText": "Consider naming endedAtOrBefore to match doc.\nNit: Javadoc says \"of the given type\", but there is no type given here that I can tell.", "author": "mpolden", "createdAt": "2020-02-17T13:42:36Z", "path": "controller-server/src/main/java/com/yahoo/vespa/hosted/controller/deployment/JobList.java", "diffHunk": "@@ -141,24 +141,9 @@ public JobList present() {\n             return mapToList(Function.identity());\n         }\n \n-        /** Returns the subset of jobs where the run of the given type occurred before the given instant */\n-        public JobList endedBefore(Instant threshold) {\n-            return matching(run -> run.end().orElse(Instant.MAX).isBefore(threshold));\n-        }\n-\n-        /** Returns the subset of jobs where the run of the given type occurred after the given instant */\n-        public JobList endedAfter(Instant threshold) {\n-            return matching(run -> run.end().orElse(Instant.MIN).isAfter(threshold));\n-        }\n-\n-        /** Returns the subset of jobs where the run of the given type occurred before the given instant */\n-        public JobList startedBefore(Instant threshold) {\n-            return matching(run -> run.start().isBefore(threshold));\n-        }\n-\n-        /** Returns the subset of jobs where the run of the given type occurred after the given instant */\n-        public JobList startedAfter(Instant threshold) {\n-            return matching(run -> run.start().isAfter(threshold));\n+        /** Returns the subset of jobs where the run of the given type occurred at or before the given instant */\n+        public JobList endedNoLaterThan(Instant threshold) {", "originalCommit": "197e45c615eb8dfe796f2e61d68019e69b8023fb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE5NDUwNw==", "url": "https://github.com/vespa-engine/vespa/pull/12221#discussion_r380194507", "bodyText": "Makes sense :)", "author": "jonmv", "createdAt": "2020-02-17T13:54:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDE4ODI0Ng=="}], "type": "inlineReview"}, {"oid": "db7b9a005d19e7876295995bfa4e3d11929205ea", "url": "https://github.com/vespa-engine/vespa/commit/db7b9a005d19e7876295995bfa4e3d11929205ea", "message": "Doc nits", "committedDate": "2020-02-17T13:54:11Z", "type": "commit"}]}