{"pr_number": 14321, "pr_title": "Cluster size independent autoscaling reaction time", "pr_createdAt": "2020-09-08T09:14:05Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14321", "timeline": [{"oid": "8891a7d5574ee34c3f7663c964171ad15a8003ac", "url": "https://github.com/vespa-engine/vespa/commit/8891a7d5574ee34c3f7663c964171ad15a8003ac", "message": "Cluster size independent autoscaling reaction time\n\nThis makes the window considered about 1 hour regardless of cluster size.", "committedDate": "2020-09-08T08:07:34Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc4MTk1OA==", "url": "https://github.com/vespa-engine/vespa/pull/14321#discussion_r484781958", "bodyText": "The second part of this reads more like we don't require having any measurements from all nodes, instead of not requiring at least minimumMeasurementsPerNode for all nodes", "author": "freva", "createdAt": "2020-09-08T09:31:14Z", "path": "node-repository/src/main/java/com/yahoo/vespa/hosted/provision/autoscale/Autoscaler.java", "diffHunk": "@@ -113,8 +105,9 @@ private boolean similar(double r1, double r2, double threshold) {\n                                                           resource,\n                                                           clusterNodes.stream().map(Node::hostname).collect(Collectors.toList()));\n \n-        if (window.measurementCount() < minimumMeasurements) return Optional.empty();\n-        if (window.hostnames() != clusterNodes.size()) return Optional.empty(); // Regulate only when all nodes are measured\n+        // Require a total number of measurements scaling with the number of nodes but don't require them from all nodes", "originalCommit": "8891a7d5574ee34c3f7663c964171ad15a8003ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc5OTA2OA==", "url": "https://github.com/vespa-engine/vespa/pull/14321#discussion_r484799068", "bodyText": "Better now?", "author": "bratseth", "createdAt": "2020-09-08T09:59:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDc4MTk1OA=="}], "type": "inlineReview"}, {"oid": "7c71ed8be42c2f4d69898ca85d7e92afd2a8106f", "url": "https://github.com/vespa-engine/vespa/commit/7c71ed8be42c2f4d69898ca85d7e92afd2a8106f", "message": "Improve comment", "committedDate": "2020-09-08T09:59:08Z", "type": "commit"}]}