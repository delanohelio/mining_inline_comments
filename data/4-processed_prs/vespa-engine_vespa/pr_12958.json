{"pr_number": 12958, "pr_title": "Validate application ID and node type in flag conditions", "pr_createdAt": "2020-04-17T07:35:37Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12958", "timeline": [{"oid": "fd3bb4882effd8687c524eb8b7b9853fda7baa4a", "url": "https://github.com/vespa-engine/vespa/commit/fd3bb4882effd8687c524eb8b7b9853fda7baa4a", "message": "Validate application ID and node type in flag conditions", "committedDate": "2020-04-17T07:35:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE3MzcyOQ==", "url": "https://github.com/vespa-engine/vespa/pull/12958#discussion_r410173729", "bodyText": "?", "author": "freva", "createdAt": "2020-04-17T11:55:14Z", "path": "controller-api/src/main/java/com/yahoo/vespa/hosted/controller/api/systemflags/v1/SystemFlagsDataArchive.java", "diffHunk": "@@ -206,4 +236,44 @@ public SystemFlagsDataArchive build() {\n         }\n \n     }\n+\n+    private static class JsonAccessor {\n+        private final JsonNode jsonNode;\n+\n+        public JsonAccessor(JsonNode jsonNode) {\n+            this.jsonNode = jsonNode;\n+        }\n+\n+        public JsonAccessor get(String fieldName) {\n+            if (jsonNode == null) {\n+                return this;\n+            } else {\n+                return new JsonAccessor(jsonNode.get(fieldName));\n+            }\n+        }\n+\n+        public Optional<String> asString() {\n+            return jsonNode != null && jsonNode.isTextual() ? Optional.of(jsonNode.textValue()) : Optional.empty();\n+        }\n+\n+        public void forEachArrayElement(Consumer<JsonAccessor> consumer) {\n+            if (jsonNode != null && jsonNode.isArray()) {\n+                jsonNode.forEach(jsonNodeElement -> consumer.accept(new JsonAccessor(jsonNodeElement)));\n+            }\n+        }\n+\n+        public void removeCommentRecursively() {", "originalCommit": "fd3bb4882effd8687c524eb8b7b9853fda7baa4a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIxNTkwOA==", "url": "https://github.com/vespa-engine/vespa/pull/12958#discussion_r410215908", "bodyText": "PR on your way to remove this unused method", "author": "hakonhall", "createdAt": "2020-04-17T13:18:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDE3MzcyOQ=="}], "type": "inlineReview"}]}