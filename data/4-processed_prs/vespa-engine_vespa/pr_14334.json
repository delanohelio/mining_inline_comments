{"pr_number": 14334, "pr_title": "Arnej/get memory usage from tensors ", "pr_createdAt": "2020-09-09T11:36:55Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14334", "timeline": [{"oid": "cd0e5fae5156294354ad589b0148853266c79500", "url": "https://github.com/vespa-engine/vespa/commit/cd0e5fae5156294354ad589b0148853266c79500", "message": "add methods to extract memory usage", "committedDate": "2020-09-09T10:32:38Z", "type": "commit"}, {"oid": "30777d5b3d2f6f0fe921341ba04c7f68650e68f2", "url": "https://github.com/vespa-engine/vespa/commit/30777d5b3d2f6f0fe921341ba04c7f68650e68f2", "message": "add get_memory_usage for Stash", "committedDate": "2020-09-09T10:32:38Z", "type": "commit"}, {"oid": "3c66f7b74eb6c1fdd672f6ba8c83df78bc1dabf3", "url": "https://github.com/vespa-engine/vespa/commit/3c66f7b74eb6c1fdd672f6ba8c83df78bc1dabf3", "message": "add get_memory_usage for tensor::Tensor", "committedDate": "2020-09-09T10:32:38Z", "type": "commit"}, {"oid": "472e6794ce4c74431b387f9783ee17467ca86a2c", "url": "https://github.com/vespa-engine/vespa/commit/472e6794ce4c74431b387f9783ee17467ca86a2c", "message": "use MemoryUsage from Tensor", "committedDate": "2020-09-09T10:32:39Z", "type": "commit"}, {"oid": "8e2654ea61067b11381c74ed5cb8689c5f69e225", "url": "https://github.com/vespa-engine/vespa/commit/8e2654ea61067b11381c74ed5cb8689c5f69e225", "message": "remove count_memory_used from Tensor", "committedDate": "2020-09-09T10:32:39Z", "type": "commit"}, {"oid": "66e2767c871ebdfae2fe4411e90662750ce19d58", "url": "https://github.com/vespa-engine/vespa/commit/66e2767c871ebdfae2fe4411e90662750ce19d58", "message": "account for accounting info", "committedDate": "2020-09-09T10:32:39Z", "type": "commit"}, {"oid": "ae03fd6023ca84571d2bca610ad93e45511e75e2", "url": "https://github.com/vespa-engine/vespa/commit/ae03fd6023ca84571d2bca610ad93e45511e75e2", "message": "better accounting in SimpleTensor", "committedDate": "2020-09-09T11:03:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU2ODI4MQ==", "url": "https://github.com/vespa-engine/vespa/pull/14334#discussion_r485568281", "bodyText": "Consider rename tensor_memory_used to e.g tensor_memory. Applies further down in file as well.", "author": "geirst", "createdAt": "2020-09-09T12:23:33Z", "path": "searchlib/src/tests/tensor/direct_tensor_store/direct_tensor_store_test.cpp", "diffHunk": "@@ -61,11 +61,12 @@ TEST_F(DirectTensorStoreTest, heap_allocated_memory_is_tracked)\n     store.store_tensor(make_tensor(5));\n     auto mem_1 = store.getMemoryUsage();\n     auto ref = store.store_tensor(make_tensor(10));\n-    size_t tensor_memory_used = store.get_tensor(ref)->count_memory_used();\n+    auto tensor_memory_used = store.get_tensor(ref)->get_memory_usage();", "originalCommit": "ae03fd6023ca84571d2bca610ad93e45511e75e2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "949c4c0cb61e234823e247c1efe5582ca50e7448", "url": "https://github.com/vespa-engine/vespa/commit/949c4c0cb61e234823e247c1efe5582ca50e7448", "message": "memory_used -> mem_usage to reflect semantic change", "committedDate": "2020-09-10T07:32:04Z", "type": "commit"}]}