{"pr_number": 14536, "pr_title": "Arnej/minor codec fixes ", "pr_createdAt": "2020-09-24T14:21:58Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14536", "timeline": [{"oid": "0a1dfe824b66d1ff54b10cfdd65aac0ce874b232", "url": "https://github.com/vespa-engine/vespa/commit/0a1dfe824b66d1ff54b10cfdd65aac0ce874b232", "message": "add protection against bogus sizes", "committedDate": "2020-09-24T14:19:40Z", "type": "commit"}, {"oid": "6b3d2d9d86ab752c7546fa0c49dd780d4e24996f", "url": "https://github.com/vespa-engine/vespa/commit/6b3d2d9d86ab752c7546fa0c49dd780d4e24996f", "message": "test dense auto-fill", "committedDate": "2020-09-24T14:19:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3NDk4Ng==", "url": "https://github.com/vespa-engine/vespa/pull/14536#discussion_r494374986", "bodyText": "or is it too small...?", "author": "havardpe", "createdAt": "2020-09-24T14:40:29Z", "path": "eval/src/vespa/eval/eval/value_codec.cpp", "diffHunk": "@@ -154,6 +153,9 @@ struct ContentDecoder {\n     template<typename T>\n     static std::unique_ptr<Value> invoke(nbostream &input, const DecodeState &state, const ValueBuilderFactory &factory) {\n         std::vector<vespalib::stringref> address(state.num_mapped_dims);\n+        if (state.num_blocks * state.subspace_size * sizeof(T) > input.size()) {\n+            throw IllegalStateException(\"serialized input too big\");", "originalCommit": "6b3d2d9d86ab752c7546fa0c49dd780d4e24996f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM5NTA4OQ==", "url": "https://github.com/vespa-engine/vespa/pull/14536#discussion_r494395089", "bodyText": "Also some information about the sizes in the exception message would be nice.", "author": "geirst", "createdAt": "2020-09-24T15:06:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDM3NDk4Ng=="}], "type": "inlineReview"}, {"oid": "7bfba51845a84f8ac876780182026bcc05a39159", "url": "https://github.com/vespa-engine/vespa/commit/7bfba51845a84f8ac876780182026bcc05a39159", "message": "fix exception message", "committedDate": "2020-09-30T13:31:47Z", "type": "commit"}, {"oid": "a23cb1bb18e4130652bcf28d088e644b88d69ce3", "url": "https://github.com/vespa-engine/vespa/commit/a23cb1bb18e4130652bcf28d088e644b88d69ce3", "message": "also extend test with bad input data", "committedDate": "2020-10-01T06:08:12Z", "type": "commit"}]}