{"pr_number": 14973, "pr_title": "optimize sparse only merge", "pr_createdAt": "2020-10-20T12:53:35Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14973", "timeline": [{"oid": "a800874200820d1e61b93e558abceda2c63d5c79", "url": "https://github.com/vespa-engine/vespa/commit/a800874200820d1e61b93e558abceda2c63d5c79", "message": "optimize sparse only merge", "committedDate": "2020-10-20T12:50:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODQ5MTc3Ng==", "url": "https://github.com/vespa-engine/vespa/pull/14973#discussion_r508491776", "bodyText": "I would prefer sending param to the Select function and having that choose the implementation (like for join)", "author": "havardpe", "createdAt": "2020-10-20T13:16:49Z", "path": "eval/src/vespa/eval/instruction/generic_merge.cpp", "diffHunk": "@@ -140,6 +172,10 @@ GenericMerge::make_instruction(const ValueType &lhs_type, const ValueType &rhs_t\n                                const ValueBuilderFactory &factory, Stash &stash)\n {\n     const auto &param = stash.create<MergeParam>(lhs_type, rhs_type, function, factory);\n+    if (param.dense_subspace_size == 1) {", "originalCommit": "a800874200820d1e61b93e558abceda2c63d5c79", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d3ce4b41b428694a5812bf24fc9ae78713a20576", "url": "https://github.com/vespa-engine/vespa/commit/d3ce4b41b428694a5812bf24fc9ae78713a20576", "message": "do all selection in SelectGenericMergeOp", "committedDate": "2020-10-21T06:12:33Z", "type": "commit"}]}