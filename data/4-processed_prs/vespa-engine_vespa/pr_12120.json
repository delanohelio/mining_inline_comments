{"pr_number": 12120, "pr_title": "Support setting PERMANENTLY_DOWN at end of retirement", "pr_createdAt": "2020-02-07T14:51:43Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12120", "timeline": [{"oid": "8cfc11479049405eb66ec3de50496c0a39ab9775", "url": "https://github.com/vespa-engine/vespa/commit/8cfc11479049405eb66ec3de50496c0a39ab9775", "message": "Support setting PERMANENTLY_DOWN at end of retirement", "committedDate": "2020-02-07T14:51:35Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ2MzA4NQ==", "url": "https://github.com/vespa-engine/vespa/pull/12120#discussion_r376463085", "bodyText": "First or next?", "author": "freva", "createdAt": "2020-02-07T15:49:00Z", "path": "flags/src/main/java/com/yahoo/vespa/flags/Flags.java", "diffHunk": "@@ -122,6 +122,13 @@\n             \"Takes immediate effect for new batch suspensions.\",\n             HOSTNAME);\n \n+    public static final UnboundBooleanFlag RETIRE_WITH_PERMANENTLY_DOWN = defineFeatureFlag(\n+            \"retire-with-permanently-down\", true,\n+            \"If enabled, retirement will end with setting the host status to PERMANENTLY_DOWN, \" +\n+            \"instead of ALLOWED_TO_BE_DOWN (old behavior).\",\n+            \"Takes effect on the first run of RetiredExpirer.\",", "originalCommit": "8cfc11479049405eb66ec3de50496c0a39ab9775", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ2OTgwMA==", "url": "https://github.com/vespa-engine/vespa/pull/12120#discussion_r376469800", "bodyText": "Changed to \"next\"", "author": "hakonhall", "createdAt": "2020-02-07T16:00:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQ2MzA4NQ=="}], "type": "inlineReview"}, {"oid": "f3255c02d40496d9eeab62ab7c5590b87abcf2b2", "url": "https://github.com/vespa-engine/vespa/commit/f3255c02d40496d9eeab62ab7c5590b87abcf2b2", "message": "Clarify when flag takes effect", "committedDate": "2020-02-07T16:00:40Z", "type": "commit"}]}