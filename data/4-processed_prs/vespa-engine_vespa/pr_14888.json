{"pr_number": 14888, "pr_title": "Arnej/backwards compatible tensor partial update", "pr_createdAt": "2020-10-15T06:56:19Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/14888", "timeline": [{"oid": "2f994cf0d761252a4699bd51a42a3ad77354f402", "url": "https://github.com/vespa-engine/vespa/commit/2f994cf0d761252a4699bd51a42a3ad77354f402", "message": "compatibility adapters for add/modify/remove", "committedDate": "2020-10-15T06:18:47Z", "type": "commit"}, {"oid": "e67bc2b8191de560fedcc3948a0703507664a07c", "url": "https://github.com/vespa-engine/vespa/commit/e67bc2b8191de560fedcc3948a0703507664a07c", "message": "test via compatibility layer", "committedDate": "2020-10-15T06:55:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwMjY2Ng==", "url": "https://github.com/vespa-engine/vespa/pull/14888#discussion_r505402666", "bodyText": "prefer tensor::Tensor to be more explicit", "author": "havardpe", "createdAt": "2020-10-15T09:39:01Z", "path": "eval/src/vespa/eval/tensor/partial_update.cpp", "diffHunk": "@@ -356,4 +359,62 @@ TensorPartialUpdate::remove(const Value &input, const Value &remove_spec, const\n             input, remove_spec, factory);\n }\n \n+Value::UP\n+TensorPartialUpdate::modify(const Value &input, join_fun_t function,\n+                            const Value &modifier, EngineOrFactory engine)\n+{\n+    if (engine.is_engine()) {\n+        auto inp_ptr = dynamic_cast<const Tensor *>(&input);", "originalCommit": "e67bc2b8191de560fedcc3948a0703507664a07c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "63f7a1efe47ea4819b3d0771e418855213d9c93a", "url": "https://github.com/vespa-engine/vespa/commit/63f7a1efe47ea4819b3d0771e418855213d9c93a", "message": "use tensor::Tensor", "committedDate": "2020-10-15T09:52:48Z", "type": "commit"}]}