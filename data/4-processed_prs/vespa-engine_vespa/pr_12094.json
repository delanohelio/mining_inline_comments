{"pr_number": 12094, "pr_title": "Add latest application and normal conf. Vespa, and blockers, to dep.g\u2026", "pr_createdAt": "2020-02-06T13:45:28Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12094", "timeline": [{"oid": "c06239a6c424d82280737d821ffe741f55a4cd24", "url": "https://github.com/vespa-engine/vespa/commit/c06239a6c424d82280737d821ffe741f55a4cd24", "message": "Add latest application and normal conf. Vespa, and blockers, to dep.graph.view API", "committedDate": "2020-02-06T13:41:20Z", "type": "commit"}, {"oid": "6be3c25da892ab3cbd036fb99d9c31beed6ac6b3", "url": "https://github.com/vespa-engine/vespa/commit/6be3c25da892ab3cbd036fb99d9c31beed6ac6b3", "message": "Ignore deployment spec for non-prod applications (without project ID)", "committedDate": "2020-02-06T13:45:07Z", "type": "commit"}, {"oid": "26dae6eba587c5c1946ff2d322ab39e56417c3bc", "url": "https://github.com/vespa-engine/vespa/commit/26dae6eba587c5c1946ff2d322ab39e56417c3bc", "message": "Remove unused code", "committedDate": "2020-02-06T13:47:13Z", "type": "commit"}, {"oid": "b7d4e4643512f57845192fab5a1c5825e0995ef2", "url": "https://github.com/vespa-engine/vespa/commit/b7d4e4643512f57845192fab5a1c5825e0995ef2", "message": "Rename application version id -> build", "committedDate": "2020-02-06T13:51:25Z", "type": "commit"}, {"oid": "c35cf98f6e308c178bd5755667854142fa62aeaf", "url": "https://github.com/vespa-engine/vespa/commit/c35cf98f6e308c178bd5755667854142fa62aeaf", "message": "Show whether instance should be allowed to upgrade to given version", "committedDate": "2020-02-06T13:57:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTAyNw==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r375859027", "bodyText": "What is this?", "author": "smorgrav", "createdAt": "2020-02-06T14:18:54Z", "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/restapi/application/responses/deployment-overview.json", "diffHunk": "@@ -6,19 +6,47 @@\n       \"type\": \"instance\",\n       \"dependencies\": [],\n       \"declared\": true,\n-      \"instance\": \"instance1\"\n+      \"instance\": \"instance1\",\n+      \"readyAt\": 0,\n+      \"deploying\": {\n+        \"application\": {\n+          \"build\": 4,\n+          \"compileVersion\": \"6.1.0\",\n+          \"sourceUrl\": \"repository1/tree/commit1\",\n+          \"commit\": \"commit1\"\n+        }\n+      },\n+      \"latestVersions\": {\n+        \"platform\": {\n+          \"platform\": \"7.164.0\",\n+          \"at\": \"(ignore)\",\n+          \"upgrade\": false,\n+          \"blockers\": []\n+        },\n+        \"application\": {\n+          \"application\": {\n+            \"build\": 4,\n+            \"compileVersion\": \"6.1.0\",\n+            \"sourceUrl\": \"repository1/tree/commit1\",\n+            \"commit\": \"commit1\"\n+          },\n+          \"at\": 1000,", "originalCommit": "c35cf98f6e308c178bd5755667854142fa62aeaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIzODc5Mw==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r376238793", "bodyText": "millis at which the version was built (application) or of last commit (Vespa).", "author": "jonmv", "createdAt": "2020-02-07T06:57:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTAyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTc0NA==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r375859744", "bodyText": "Do you have a test where there are blockers?", "author": "smorgrav", "createdAt": "2020-02-06T14:20:14Z", "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/restapi/application/responses/deployment-overview.json", "diffHunk": "@@ -6,19 +6,47 @@\n       \"type\": \"instance\",\n       \"dependencies\": [],\n       \"declared\": true,\n-      \"instance\": \"instance1\"\n+      \"instance\": \"instance1\",\n+      \"readyAt\": 0,\n+      \"deploying\": {\n+        \"application\": {\n+          \"build\": 4,\n+          \"compileVersion\": \"6.1.0\",\n+          \"sourceUrl\": \"repository1/tree/commit1\",\n+          \"commit\": \"commit1\"\n+        }\n+      },\n+      \"latestVersions\": {\n+        \"platform\": {\n+          \"platform\": \"7.164.0\",\n+          \"at\": \"(ignore)\",\n+          \"upgrade\": false,\n+          \"blockers\": []\n+        },\n+        \"application\": {\n+          \"application\": {\n+            \"build\": 4,\n+            \"compileVersion\": \"6.1.0\",\n+            \"sourceUrl\": \"repository1/tree/commit1\",\n+            \"commit\": \"commit1\"\n+          },\n+          \"at\": 1000,\n+          \"upgrade\": false,\n+          \"blockers\": []", "originalCommit": "c35cf98f6e308c178bd5755667854142fa62aeaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIzODg3Ng==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r376238876", "bodyText": "I\u2019ll add some.", "author": "jonmv", "createdAt": "2020-02-07T06:57:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTc0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTg4NA==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r375859884", "bodyText": "And this upgrade field - what is that?", "author": "smorgrav", "createdAt": "2020-02-06T14:20:29Z", "path": "controller-server/src/test/java/com/yahoo/vespa/hosted/controller/restapi/application/responses/deployment-overview.json", "diffHunk": "@@ -6,19 +6,47 @@\n       \"type\": \"instance\",\n       \"dependencies\": [],\n       \"declared\": true,\n-      \"instance\": \"instance1\"\n+      \"instance\": \"instance1\",\n+      \"readyAt\": 0,\n+      \"deploying\": {\n+        \"application\": {\n+          \"build\": 4,\n+          \"compileVersion\": \"6.1.0\",\n+          \"sourceUrl\": \"repository1/tree/commit1\",\n+          \"commit\": \"commit1\"\n+        }\n+      },\n+      \"latestVersions\": {\n+        \"platform\": {\n+          \"platform\": \"7.164.0\",\n+          \"at\": \"(ignore)\",\n+          \"upgrade\": false,\n+          \"blockers\": []\n+        },\n+        \"application\": {\n+          \"application\": {\n+            \"build\": 4,\n+            \"compileVersion\": \"6.1.0\",\n+            \"sourceUrl\": \"repository1/tree/commit1\",\n+            \"commit\": \"commit1\"\n+          },\n+          \"at\": 1000,\n+          \"upgrade\": false,", "originalCommit": "c35cf98f6e308c178bd5755667854142fa62aeaf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjIzOTEyMw==", "url": "https://github.com/vespa-engine/vespa/pull/12094#discussion_r376239123", "bodyText": "Whether to show the \u201cupgrade now\u201d button - hide it when no prod deployments in the instance are on a lower version than this version.", "author": "jonmv", "createdAt": "2020-02-07T06:58:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTg1OTg4NA=="}], "type": "inlineReview"}, {"oid": "2adf9bd2916bbe00ea33ba9751eb825261c8085b", "url": "https://github.com/vespa-engine/vespa/commit/2adf9bd2916bbe00ea33ba9751eb825261c8085b", "message": "Add blockers to unit test response", "committedDate": "2020-02-07T07:50:34Z", "type": "commit"}]}