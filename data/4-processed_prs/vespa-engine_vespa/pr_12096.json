{"pr_number": 12096, "pr_title": "Simplify regexes generated from document selection glob patterns", "pr_createdAt": "2020-02-06T14:06:03Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/12096", "timeline": [{"oid": "7c610e122b374bbde0b847f6eab01494c8253b27", "url": "https://github.com/vespa-engine/vespa/commit/7c610e122b374bbde0b847f6eab01494c8253b27", "message": "Simplify regexes generated from document selection glob patterns\n\nAttempts to simplify the resulting regex as much as possible to help\nminimize the number of possible catastrophic backtracking cases that\ncan be triggered by wildcard regexes.\n\nThe following simplifications are currently performed:\n* ''      -> /^$/   (empty string match)\n* '*'     -> //     (any string match)\n* '*foo*' -> /foo/  (substring match)\n* '*foo'  -> /foo$/ (suffix match)\n* 'foo*'  -> /^foo/ (prefix match)\n* collapsing runs of consecutive `*` wildcards into a single\n  wildcard. `***` is identical to `**` which is identical to `*` etc,\n  as all these match 0-n characters each. This also works with\n  simplification, i.e. `***foo***` -> /foo/ and `***` -> //\n\nThis relates to issue #12068", "committedDate": "2020-02-06T13:33:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI1OTExNw==", "url": "https://github.com/vespa-engine/vespa/pull/12096#discussion_r376259117", "bodyText": "operators3 -> operators_3 for consistency?", "author": "geirst", "createdAt": "2020-02-07T08:08:56Z", "path": "document/src/tests/documentselectparsertest.cpp", "diffHunk": "@@ -637,7 +632,7 @@ void DocumentSelectParserTest::testOperators2()\n     PARSEI(\"id.group == \\\"xyzzy\\\"\", *_doc[10], True);\n }\n \n-void DocumentSelectParserTest::testOperators3()\n+TEST_F(DocumentSelectParserTest, operators3)", "originalCommit": "7c610e122b374bbde0b847f6eab01494c8253b27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM2NTc5Mg==", "url": "https://github.com/vespa-engine/vespa/pull/12096#discussion_r376365792", "bodyText": "Done", "author": "vekterli", "createdAt": "2020-02-07T12:28:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI1OTExNw=="}], "type": "inlineReview"}, {"oid": "a4b3b17d971f7c528f1820f441c4c7e1031b0ceb", "url": "https://github.com/vespa-engine/vespa/commit/a4b3b17d971f7c528f1820f441c4c7e1031b0ceb", "message": "Consistent test naming", "committedDate": "2020-02-07T12:27:51Z", "type": "commit"}]}