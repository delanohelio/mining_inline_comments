{"pr_number": 13058, "pr_title": "Ignore hnsw index attribute save file if major parameters are changed.", "pr_createdAt": "2020-04-24T13:41:42Z", "pr_url": "https://github.com/vespa-engine/vespa/pull/13058", "timeline": [{"oid": "c09675a41768642d37390c00cb05ecfc533ca5d1", "url": "https://github.com/vespa-engine/vespa/commit/c09675a41768642d37390c00cb05ecfc533ca5d1", "message": "Ignore hnsw index attribute save file if major parameters are changed.", "committedDate": "2020-04-24T13:37:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNTU1NTY3Ng==", "url": "https://github.com/vespa-engine/vespa/pull/13058#discussion_r415555676", "bodyText": "neightbor -> neighbor", "author": "geirst", "createdAt": "2020-04-27T06:53:00Z", "path": "searchlib/src/tests/attribute/tensorattribute/tensorattribute_test.cpp", "diffHunk": "@@ -689,5 +730,36 @@ TEST_F(\"onLoad() reconstructs nearest neighbor index if save file does not exist\n     index.expect_adds({{1, {3, 5}}, {2, {7, 9}}});\n }\n \n+TEST_F(\"onLoads() ignores saved nearest neighbor index if not enabled in config\", DenseTensorAttributeMockIndex)\n+{\n+    f.save_example_tensors_with_mock_index();\n+    f.disable_hnsw_index();\n+    f.load();\n+    f.assert_example_tensors();\n+    EXPECT_EQUAL(f.as_dense_tensor().nearest_neighbor_index(), nullptr);\n+}\n+\n+TEST_F(\"onLoad() ignores saved nearest neightbor index if major index parameters are changed\", DenseTensorAttributeMockIndex)", "originalCommit": "c09675a41768642d37390c00cb05ecfc533ca5d1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc92064fec43ee5e60df086061c49149a398383c", "url": "https://github.com/vespa-engine/vespa/commit/dc92064fec43ee5e60df086061c49149a398383c", "message": "Fix typos in test descriptions.", "committedDate": "2020-04-27T07:50:36Z", "type": "commit"}]}