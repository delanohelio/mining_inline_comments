{"pr_number": 1568, "pr_title": "[#1566] set encoding to StringInputStream", "pr_createdAt": "2020-10-23T10:48:48Z", "pr_url": "https://github.com/eclipse/xtext-eclipse/pull/1568", "timeline": [{"oid": "99b1ee897df16697f29b1f1074907453864b5ac3", "url": "https://github.com/eclipse/xtext-eclipse/commit/99b1ee897df16697f29b1f1074907453864b5ac3", "message": "[#1566] set encoding to StringInputStream\n\nSigned-off-by: Hannes Niederhausen <hniederhausen@itemis.de>", "committedDate": "2020-10-23T11:23:22Z", "type": "commit"}, {"oid": "99b1ee897df16697f29b1f1074907453864b5ac3", "url": "https://github.com/eclipse/xtext-eclipse/commit/99b1ee897df16697f29b1f1074907453864b5ac3", "message": "[#1566] set encoding to StringInputStream\n\nSigned-off-by: Hannes Niederhausen <hniederhausen@itemis.de>", "committedDate": "2020-10-23T11:23:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511733433", "bodyText": "as the api is still beta, should we change it to throws Exception @ArneDeutsch ?\nthen we would not need these", "author": "cdietrich", "createdAt": "2020-10-26T06:00:08Z", "path": "org.eclipse.xtext.ui/src/org/eclipse/xtext/ui/wizard/template/WorkspaceFileGenerator.java", "diffHunk": "@@ -49,12 +54,15 @@ protected void execute(IProgressMonitor monitor) throws CoreException, Invocatio\n \t\t\tIWorkspace workspace = ResourcesPlugin.getWorkspace();\n \t\t\tfor (Map.Entry<String, CharSequence> fileEntry : files.entrySet()) {\n \t\t\t\tIFile file = workspace.getRoot().getFile(new Path(fileEntry.getKey()));\n-\t\t\t\tfile.create(new StringInputStream(fileEntry.getValue().toString()), true, subMonitor);\n+\t\t\t\tfile.create(new StringInputStream(fileEntry.getValue().toString(), file.getCharset()), true, subMonitor);\n \t\t\t\tif (firstFile == null) {\n \t\t\t\t\tfirstFile = file;\n \t\t\t\t}\n \t\t\t\tsubMonitor.worked(1);\n \t\t\t}\n+\t\t} catch (UnsupportedEncodingException e) {", "originalCommit": "99b1ee897df16697f29b1f1074907453864b5ac3", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczNTUzMg==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511735532", "bodyText": "I wouldn't do that. As a user I can't set the encoding so what should I do if the encoding is not supported. Throwing a Core exception should be enough.", "author": "hannesN", "createdAt": "2020-10-26T06:09:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczNjA4NA==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511736084", "bodyText": "well. this is about geneneral exception handling.\nthrows CoreException, InvocationTargetException, InterruptedException {\n=> replace this with \"throws Exception\" as we dont care about the other exceptons neither", "author": "cdietrich", "createdAt": "2020-10-26T06:11:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc0NDE4OQ==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511744189", "bodyText": "No because then please only throw RuntimeExceptions :-)\nSeriously, I would encapsulate the incovationTargetException and InterruptedException as well in an core Exception and only throw this, because this is handled by the eclipse frame work (with an error dialog if I remember correctly).\nEnforcing a lot of catches just blows the code using the method and I mostly just throw a runtimeException in this cases.", "author": "hannesN", "createdAt": "2020-10-26T06:40:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc0OTE4OQ==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511749189", "bodyText": "Another thought: Why would I need 3 different exception, which tell me: \"the generation failed!\" I have to deal with that, I don't want to catch different types of reasons. If I relly need to know them, e.getReason() is the method to go. But usually I need to do some clean-up or other stuff.\nMore important than different exception is a good javadoc, which is still missing here.", "author": "hannesN", "createdAt": "2020-10-26T06:57:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc0OTkwNQ==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511749905", "bodyText": "in this case we have explicit handing for some at caller place", "author": "cdietrich", "createdAt": "2020-10-26T06:59:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTc3MzgzNw==", "url": "https://github.com/eclipse/xtext-eclipse/pull/1568#discussion_r511773837", "bodyText": "The #execute method is inherited from WorkspaceModifyOperation - we cannot add a checked exception to the signature.\nI think wrapping it in a CoreException is the right move + some JavaDoc on the failure scenarios.", "author": "szarnekow", "createdAt": "2020-10-26T08:02:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTczMzQzMw=="}], "type": "inlineReview"}]}