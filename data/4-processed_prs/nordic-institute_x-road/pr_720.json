{"pr_number": 720, "pr_title": "XRDDEV-1272-and-665 OpenAPI Documentation", "pr_createdAt": "2020-09-21T14:03:05Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/720", "timeline": [{"oid": "850e0aaa73548e9fa838ec44a8da96030874fe42", "url": "https://github.com/nordic-institute/X-Road/commit/850e0aaa73548e9fa838ec44a8da96030874fe42", "message": "XRDDEV-1272 Document all warnings in the API definition\n\n* also fix one list init in ServiceDescriptionService", "committedDate": "2020-09-16T10:23:32Z", "type": "commit"}, {"oid": "a4938b797b575916733c103c47c96bcf3d747acc", "url": "https://github.com/nordic-institute/X-Road/commit/a4938b797b575916733c103c47c96bcf3d747acc", "message": "XRDDEV-1272 Better CSR examples", "committedDate": "2020-09-16T13:00:50Z", "type": "commit"}, {"oid": "faad1003fdd9ad4512e7621183aa0cb4260d6b2d", "url": "https://github.com/nordic-institute/X-Road/commit/faad1003fdd9ad4512e7621183aa0cb4260d6b2d", "message": "XRDDEV-1272 Better id array examples\n\n* also remove unused schema GlobalConfiguration", "committedDate": "2020-09-17T05:49:32Z", "type": "commit"}, {"oid": "94238865ed86950a796752b917d2faf9b5270e68", "url": "https://github.com/nordic-institute/X-Road/commit/94238865ed86950a796752b917d2faf9b5270e68", "message": "Merge branch 'develop' into XRDDEV-1272-improve-openapi-docs", "committedDate": "2020-09-17T05:50:18Z", "type": "commit"}, {"oid": "db730a042e04e8421de850e5007f8fa5f05140dc", "url": "https://github.com/nordic-institute/X-Road/commit/db730a042e04e8421de850e5007f8fa5f05140dc", "message": "XRDDEV-665 Fix error responses to objects instead of arrays", "committedDate": "2020-09-17T10:34:43Z", "type": "commit"}, {"oid": "1f26dcd7fb1157112aa407c9a99b2d9f14450dcc", "url": "https://github.com/nordic-institute/X-Road/commit/1f26dcd7fb1157112aa407c9a99b2d9f14450dcc", "message": "XRDDEV-665 Add error, error metadata, warnings and validation error examples where needed", "committedDate": "2020-09-18T13:11:38Z", "type": "commit"}, {"oid": "9b333d4e2b46880e39a2e30b050586f0ef6aa516", "url": "https://github.com/nordic-institute/X-Road/commit/9b333d4e2b46880e39a2e30b050586f0ef6aa516", "message": "XRDDEV-665 Add error, error metadata, warnings and validation error examples where needed part 2", "committedDate": "2020-09-21T12:58:29Z", "type": "commit"}, {"oid": "ea8cdc0281eef78b98fb935ba1c1961e60473571", "url": "https://github.com/nordic-institute/X-Road/commit/ea8cdc0281eef78b98fb935ba1c1961e60473571", "message": "XRDDEV-665 Add validation error example in github docs", "committedDate": "2020-09-21T13:26:01Z", "type": "commit"}, {"oid": "37a293b135b23c81ec4a7444c0536cf9b9420fc9", "url": "https://github.com/nordic-institute/X-Road/commit/37a293b135b23c81ec4a7444c0536cf9b9420fc9", "message": "Merge branch 'develop' into XRDDEV-665-metadata-documentation", "committedDate": "2020-09-21T13:26:54Z", "type": "commit"}, {"oid": "067685e5f67ae1cbd60c6095601895431ed63b64", "url": "https://github.com/nordic-institute/X-Road/commit/067685e5f67ae1cbd60c6095601895431ed63b64", "message": "XRDDEV-665 Add possible error metadata mentions in endpoint descriptions", "committedDate": "2020-09-21T14:02:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NDI1MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495854251", "bodyText": "I think instead of a generic WarningsExample, we should have context-specific examples. Such as\n    AddUnregisterClientWarningExample:\n      summary: response from calling addClient with unregistered client and ignore_warnings = false\n\n{\n    \"status\": 400,\n    \"error\": {\n        \"code\": \"warnings_detected\"\n    },\n    \"warnings\": [\n        {\n            \"code\": \"unregistered_member\",\n            \"metadata\": [\n                \"LXD/ipsu/dese\"\n            ]\n        }\n    ]\n}\n\nEndpoint description \"Adds new client to the system....Attempt to add unregistered member with ignore_warnings....\" explains this but is pretty complicated and average API user will benefit from an example that shows this is practise.", "author": "jansu76", "createdAt": "2020-09-28T10:56:20Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -738,10 +835,14 @@ paths:\n           content:\n             application/json:\n               schema:\n-                type: array\n-                uniqueItems: true\n-                items:\n-                  $ref: '#/components/schemas/ErrorInfo'\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzNjQ2OA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504036468", "bodyText": "Added context specific warning examples", "author": "carohauta", "createdAt": "2020-10-13T15:15:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1NDI1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1ODk4Ng==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495858986", "bodyText": "I think general explanation about the warnings-mechanism should probably be described here, in the SS user guide?\nOpenAPI definition explains how warnings work on the specific endpoints, but the general concept and the rationale behind it would probably be better explained here.\nWithout it, end user might not fully understand why ignore_warnings handling exists, and what it tries to accomplish (offer a possibility to first attempt an update without ignore, then make a decision about possibly ignoring the warning, and proceeding). Without an explanation of the mechanism, end user may just view ignore_warnings as some random frustrating weirdness in the API. And e.g. just always by default set ignore_warnings = true since it seems to make life easier and errors go away.\nThere is some text in https://confluence.niis.org/pages/viewpage.action?pageId=8520435#APIGuidelines&Examples-Warnings that might be usable.", "author": "jansu76", "createdAt": "2020-09-28T11:06:12Z", "path": "doc/Manuals/ug-ss_x-road_6_security_server_user_guide.md", "diffHunk": "@@ -2143,7 +2144,39 @@ For example, these log messages are related to an API call with correlation ID `\n \n ### 19.4 Validation errors", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzNjkzMg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504036932", "bodyText": "Added a sub chapter about the warnings", "author": "carohauta", "createdAt": "2020-10-13T15:16:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg1ODk4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4MDYwMA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495880600", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.", "author": "jansu76", "createdAt": "2020-09-28T11:50:56Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -150,6 +164,15 @@ paths:\n           description: item accepted\n         '400':\n           description: request was invalid\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzNzAyNQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504037025", "bodyText": "Added context specific warning examples", "author": "carohauta", "createdAt": "2020-10-13T15:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4MDYwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4MjAwMg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495882002", "bodyText": "Add period to improve readability, especially in swaggerhub?\nI wonder if there's any formatting options, like newlines, to make the description more readable, in swaggerhub it is all joined together and not so easy to read when there is a long explanation about how warnings work.\nActually I see now that addClientServiceDescription seems to highlight ignore_warnings as code, that might be good for readability elsewhere too?", "author": "jansu76", "createdAt": "2020-09-28T11:53:45Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -123,7 +133,11 @@ paths:\n         - backups\n       summary: upload new backup for the security server\n       operationId: uploadBackup\n-      description: Uploads new security server backup to the system\n+      description: >\n+        Uploads new security server backup to the system", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzNzY3Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504037673", "bodyText": "Updated all endpoint description with proper html formatting", "author": "carohauta", "createdAt": "2020-10-13T15:17:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4MjAwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU5OTk4Ng==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505599986", "bodyText": "Looks great at least on swaggerhub, nice!", "author": "jansu76", "createdAt": "2020-10-15T14:42:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4MjAwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4OTkxMA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495889910", "bodyText": "This does not include all warning types. Adding or removing services causes warnings too, at least for WSDL service descriptions.\nI guess same wording could be used for both service description types: (WSDL/OpenAPI3 document) has non-fatal errors that are returned as warnings (or maybe \"has non-fatal errors that may be ignored\"?) Now the different wording for WSDL and OpenAPI3 makes you think there's some conceptual difference, I guess there is not?\nA really good client facing documentation would also explain the difference between a fatal validation error and a non-fatal validation warning. Now it's kind of a mystery. Maybe this file is not the best place for that though. It should be somewhere...not sure...maybe it does not exist at the moment?", "author": "jansu76", "createdAt": "2020-09-28T12:09:42Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -1555,14 +1708,29 @@ paths:\n           description: resource requested does not exists\n         '406':\n           description: request specified an invalid format\n+        '409':\n+          description: an existing item already exists\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n         '500':\n           description: internal server error\n     post: # ok\n       tags:\n         - clients\n       summary: add new service description for the security server client\n       operationId: addClientServiceDescription\n-      description: Administrator adds a new service description for the client.\n+      description: >\n+        Administrator adds a new service description for the client. This endpoint can also return metadata in the error response.\n+        The metadata array can contain error messages about why adding the service description did not succeed.\n+        This endpoint can return a warnings response which can be ignored by setting `ServiceDescriptionAdd.ignore_warnings` = true.\n+        If ServiceDescriptionAdd.ignore_warnings = false, a warnings response will be returned if any one of the following conditions is true:", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzNzg3OA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504037878", "bodyText": "Simplified the description a bit", "author": "carohauta", "createdAt": "2020-10-13T15:17:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4OTkxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYwNjE3Ng==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505606176", "bodyText": "I think adding / removing services -warning should be documented somehow, now it is not, for this endpoint?\nMaybe link to UpdateServiceDescriptionWarningExample, that should be enough?", "author": "jansu76", "createdAt": "2020-10-15T14:50:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4OTkxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY3ODY4Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507678683", "bodyText": "Adding a service description responds with 409 and metadata in the case of duplicate services. The warning in adding / removing services only occurs when updating an existing service description", "author": "carohauta", "createdAt": "2020-10-19T11:40:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4OTkxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzMTIwNw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r508231207", "bodyText": "Yes, you are correct. Oops.", "author": "jansu76", "createdAt": "2020-10-20T06:07:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg4OTkxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTA0OQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495891049", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.\nThere could even be multiple examples: one for adding / removing services (which the WarningsExample really is) and one for non-fatal validation warnings.", "author": "jansu76", "createdAt": "2020-09-28T12:11:52Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -1590,10 +1758,17 @@ paths:\n           content:\n             application/json:\n               schema:\n-                type: array\n-                uniqueItems: true\n-                items:\n-                  $ref: '#/components/schemas/ErrorInfo'\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzOTAwMQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504039001", "bodyText": "Added context specific warning example that has both, adding and removing of services", "author": "carohauta", "createdAt": "2020-10-13T15:19:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYxMzQzNA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505613434", "bodyText": "Maybe link to UpdateServiceDescriptionWarningExample, too?", "author": "jansu76", "createdAt": "2020-10-15T14:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTA0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY4MTg3MA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507681870", "bodyText": "Maybe not", "author": "carohauta", "createdAt": "2020-10-19T11:46:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTA0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTU4OQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495891589", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.\nThere could even be multiple examples.", "author": "jansu76", "createdAt": "2020-09-28T12:12:54Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -1838,6 +2039,19 @@ paths:\n           description: security server initialized\n         '400':\n           description: request was invalid\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDAzOTk0Mg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504039942", "bodyText": "Added context specific warning example", "author": "carohauta", "createdAt": "2020-10-13T15:20:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTU4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYxNDI3NA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505614274", "bodyText": "Nice and extensive!", "author": "jansu76", "createdAt": "2020-10-15T15:00:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MTU4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MjUwMg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495892502", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.", "author": "jansu76", "createdAt": "2020-09-28T12:14:40Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -2166,6 +2381,17 @@ paths:\n           description: key deletion was successful\n         '400':\n           description: request was invalid\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MDQ4Nw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504040487", "bodyText": "Added context specific warning example", "author": "carohauta", "createdAt": "2020-10-13T15:20:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MjUwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MzUyMA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495893520", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.", "author": "jansu76", "createdAt": "2020-09-28T12:16:29Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -2723,6 +2966,15 @@ paths:\n                 $ref: '#/components/schemas/Service'\n         '400':\n           description: request was invalid\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MDkxOQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504040919", "bodyText": "Added context specific warning example", "author": "carohauta", "createdAt": "2020-10-13T15:21:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5MzUyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5NDE1MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495894151", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.", "author": "jansu76", "createdAt": "2020-09-28T12:17:44Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -3339,10 +3747,14 @@ paths:\n           content:\n             application/json:\n               schema:\n-                type: array\n-                uniqueItems: true\n-                items:\n-                  $ref: '#/components/schemas/ErrorInfo'\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MTI4NQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504041285", "bodyText": "Added context specific warning example", "author": "carohauta", "createdAt": "2020-10-13T15:21:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5NDE1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5NTc1OQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495895759", "bodyText": "A context-specific warnings example would be helpful. See AddClient for elaboration.", "author": "jansu76", "createdAt": "2020-09-28T12:20:45Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -3196,10 +3583,16 @@ paths:\n           content:\n             application/json:\n               schema:\n-                type: array\n-                uniqueItems: true\n-                items:\n-                  $ref: '#/components/schemas/ErrorInfo'\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_response:\n+                  $ref: '#/components/examples/ErrorExample'\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n+                warnings_response:\n+                  $ref: '#/components/examples/WarningsExample'", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MTM3OA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504041378", "bodyText": "Added context specific warning example", "author": "carohauta", "createdAt": "2020-10-13T15:22:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTg5NTc1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r495926400", "bodyText": "Should specify metadata on the detail level that enables API client to utilize the metadata, example from   https://jira.niis.org/browse/XRDDEV-665\n{\n   \"status\": 409,\n   \"error\": {\n     \"code\": \"service_already_exists\",\n     \"metadata\": [\n       \"duplicateService.v1\",\n       \"http://xroad-lxd-cs.lxd/duplicate1.wsdl\"\n     ]\n   }\n }\n\n\nwhen conflict 409 about duplicate service happens, error code service_already_exists is used and\nmetadata has a list of strings C1,U1,C2,U2....Cn,Un where\nC1 = duplicate service full code\nU1 = URL of the existing WSDL that has the duplicate\n\nSimilar documentation should be added to all error and warning metadata. It might be good to use context-specific error metadata examples (at least in more complex cases)?\nThere are some cases where metadata is used even if it is not really called for, for example metadata contains human-readable error messages. I think these should be fixed, and there is probably no point in documenting them in API definition.", "author": "jansu76", "createdAt": "2020-09-28T13:10:40Z", "path": "src/proxy-ui-api/src/main/resources/openapi-definition.yaml", "diffHunk": "@@ -1555,14 +1708,29 @@ paths:\n           description: resource requested does not exists\n         '406':\n           description: request specified an invalid format\n+        '409':\n+          description: an existing item already exists\n+          content:\n+            application/json:\n+              schema:\n+                $ref: '#/components/schemas/ErrorInfo'\n+              examples:\n+                error_metadata_response:\n+                  $ref: '#/components/examples/ErrorWithMetadataExample'\n         '500':\n           description: internal server error\n     post: # ok\n       tags:\n         - clients\n       summary: add new service description for the security server client\n       operationId: addClientServiceDescription\n-      description: Administrator adds a new service description for the client.\n+      description: >\n+        Administrator adds a new service description for the client. This endpoint can also return metadata in the error response.\n+        The metadata array can contain error messages about why adding the service description did not succeed.", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MjY3Mg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504042672", "bodyText": "The metadata for this and the Security Server initialization are now explained in the api doc.", "author": "carohauta", "createdAt": "2020-10-13T15:23:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYyNTU4Nw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505625587", "bodyText": "Metadata structure for service_already_exists and initialization errors is well explained in the openapi definition, nice!\nHowever there are some other endpoints where warning metadata structure is not explained. I think those should also be documented according to our decisions on public/private API documentation\n\nwe need to document warning and error metadata for external clients. Primary try to do this in openapi definition if feasible, if not, some other way\n\nWarning metadata structure does not seem to be explained for\n\nupload backup\nadd (unregistered) client\nadd service description warnings (validation and add/remove services)\ninitialization warnings that have metadata\ndelete key\nupdate, refresh service description (copypaste from add, probably)\n\nSome of these are pretty simple. Like delete key, additional sentence \"...returns metadata that contains key id\" should be enough probably.\nNot sure what the status is for error metadata structures? Are all relevant ones documented?\nDid we already have a blanket statement about metadata being \"subject to change\"?\n\n...but with the disclaimer that these details are subject to change at any time", "author": "jansu76", "createdAt": "2020-10-15T15:13:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2NDU0MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507764541", "bodyText": "IIRC the error codes were not originally intended to be published in the API definition but rather in a separate document?\nI think it might make sense to explain the metadata of e.g. the service description endpoints which might be a bit complex. At the moment the metadata is simply declared like this\n<p>This endpoint can also return metadata in the error response. The metadata array can contain error messages about why adding the service description did not succeed (for example invalid URL's or existing duplicate service codes).</p>\n\nThe error code itself was omitted on purpose and a more generic example was included.", "author": "carohauta", "createdAt": "2020-10-19T13:53:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzc2NzI2Nw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507767267", "bodyText": "Did we already have a blanket statement about metadata being \"subject to change\"?\n\nWe did not. Wasn't it supposed to be in a separate document with all possible error codes?\nSure we can add it e.g. to the info section of the API definition or perhaps to all endpoints separately?\nThe externalDocs field in OpenAPI feels pretty natural way to provide the error codes", "author": "carohauta", "createdAt": "2020-10-19T13:56:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgzNTc2NA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507835764", "bodyText": "Updated the descriptions in the suggested places. Review with care since it's becoming harder to keep track of all the changes.", "author": "carohauta", "createdAt": "2020-10-19T15:15:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzgzNzk2OQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507837969", "bodyText": "Should the disclaimer be added to the API document somewhere?", "author": "carohauta", "createdAt": "2020-10-19T15:18:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzNzgwNQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r508237805", "bodyText": "I think there may be a bit of misunderstanding about error / warning metadata. Metadata shouldn't really be \"error messages\" as such, it should be raw data that adds more detail to the error, when that is needed. It may be used for generating error messages, but maybe also for other purposes.\nE.g. in the case of duplicate service\n{\n   \"status\": 409,\n   \"error\": {\n     \"code\": \"service_already_exists\",\n     \"metadata\": [\n       \"duplicateService.v1\",\n       \"http://xroad-lxd-cs.lxd/duplicate1.wsdl\"\n     ]\n   }\n }\n\nmetadata contains service codes and service wsdls. Those can be used to display nice UI error messages, but they could also be used programmatically by some API client when he creates some maintenance scripts. Maybe something like\nIF (service_already_exists && !    \n  wsdls_reported.contains(extract_wsdls_from_metadata())\n    send_email_to_wsdl_admin(extract_wsdls_from_metadata()) \n\nTo be able to use the metadata properly, it's structure needs to be documented. e.g. API client script programmer needs to know if metadata contains\n     \"metadata\": [\n       \"fooService.v1\",\n       \"http://xroad-lxd-cs.lxd/foo.wsdl\",\n       \"barService.v1\",\n       \"http://xroad-lxd-cs.lxd/bar.wsdl\"\n     ]\n\nor\n     \"metadata\": [\n       \"fooService.v1\",\n       \"barService.v1\",\n       \"http://xroad-lxd-cs.lxd/foo.wsdl\",\n       \"http://xroad-lxd-cs.lxd/bar.wsdl\"\n     ]\n\nSince it is so complex, and documenting is somewhat clumsy, metadata should be used sparingly. Metadata should only be used when there is a clear need, and same information is not available to client in other ways (e.g. request parameters that client has sent)\nSo I think we have decisions https://confluence.niis.org/display/XRDDEV/Public+and+private+API+contracts%2C+API+versioning%2C+error+codes%2C+warnings+and+metadata#PublicandprivateAPIcontracts,APIversioning,errorcodes,warningsandmetadata-Conclusion/decisions\n\nerror codes - ErrorCodes.java\nerror metadata - openapi-definition.yaml\nwarning codes - no clear decision I guess, openapi-definition.yaml, openapi-definition.yaml examples, ErrorCodes.java, WarningCodes.java....?\nwarning metadata - openapi-definition.yaml", "author": "jansu76", "createdAt": "2020-10-20T06:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODIzODQzMw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r508238433", "bodyText": "Should the disclaimer be added to the API document somewhere?\n\nI think it would be good to have. You had good ideas about how to do it in an earlier comment.", "author": "jansu76", "createdAt": "2020-10-20T06:26:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODI0MTAyOQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r508241029", "bodyText": "I looked at the warning metadata listed earlier (upload backup...update, refresh service description) - documentation looks spot on \ud83d\udc4d  so I think these are taken care of:\n\nwarning codes - openapi-definition.yaml\nwarning metadata - openapi-definition.yaml", "author": "jansu76", "createdAt": "2020-10-20T06:32:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODcxNTgzMw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r508715833", "bodyText": "Updated error metadatas and added a note to the info stating that the metadatas might be changed", "author": "carohauta", "createdAt": "2020-10-20T17:37:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkyNjQwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1MjE2NA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r496052164", "bodyText": "The following lines are not part of this PR, but are related to acceptance criteria, and anyway since we're already at the topic....\n\nIn addition to the validation messages declared in Java Validation API, the following validation errors are possible\n\nHow about a table with simple one sentence explanations (maybe just the defaultMessage) about each custom validation error type? Granted most are pretty self-explanatory, but Normalized is probably not.\nAlso, is the list up to date? IdentifierValidationErrorInfo seems to think there is NoControlChars instead of Normalized?", "author": "jansu76", "createdAt": "2020-09-28T15:45:02Z", "path": "doc/Manuals/ug-ss_x-road_6_security_server_user_guide.md", "diffHunk": "@@ -2143,7 +2144,39 @@ For example, these log messages are related to an API call with correlation ID `\n \n ### 19.4 Validation errors\n \n-An error response from the REST API can include validation errors if an unsupported parameter was provided with the request. \n+An error response from the REST API can include validation errors if an unsupported parameter was provided with the request.\n+When \n+\n+Example request and response of adding a new subsystem with illegal characters:\n+```\n+POST https://ss1:4100/api/v1/clients\n+\n+Request body:\n+{\n+  \"client\": {\n+    \"member_class\": \"ORG\",\n+    \"member_code\": \"0/1234\",\n+    \"subsystem_code\": \"Subsystem%Code\"\n+  },\n+  \"ignore_warnings\": false\n+}\n+\n+Response body:\n+{\n+  \"error\": {\n+    \"code\": \"validation_failure\",\n+    \"validation_errors\": {\n+      \"clientAdd.client.memberCode\": [\n+        \"NoForwardslashes\"\n+      ],\n+      \"clientAdd.client.subsystemCode\": [\n+        \"NoPercents\"\n+      ]\n+    }\n+  },\n+  \"status\": 400\n+}\n+```", "originalCommit": "067685e5f67ae1cbd60c6095601895431ed63b64", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1NjIxMA==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r496056210", "bodyText": "It would also be good to make \"Java Validation API\" a proper external reference", "author": "jansu76", "createdAt": "2020-09-28T15:50:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1MjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDA0MzE4NQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r504043185", "bodyText": "Added a link to the constraints.", "author": "carohauta", "createdAt": "2020-10-13T15:24:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1MjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTYyMjUyMg==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505622522", "bodyText": "What do you think about adding that table, or at least explanation for what \"NoControlChars\" means specifically?\n    /**\n     * checks if the string contains ISO control characters or zero-width spaces\n     */\n    public static boolean containsControlChars(String s) {\n        return CharMatcher.javaIsoControl().matchesAnyOf(s) || s.indexOf(FORBIDDEN_BOM) >= 0\n                || s.indexOf(FORBIDDEN_ZWSP) >= 0;\n    }", "author": "jansu76", "createdAt": "2020-10-15T15:09:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1MjE2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcwNDUxNw==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507704517", "bodyText": "Good idea. Added a table where the errors are explained. Ended up explaining the obvious ones too but it's better now", "author": "carohauta", "createdAt": "2020-10-19T12:26:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjA1MjE2NA=="}], "type": "inlineReview"}, {"oid": "e0a138d8c9ea7255c3c53b68e4ad1b53acb00d6a", "url": "https://github.com/nordic-institute/X-Road/commit/e0a138d8c9ea7255c3c53b68e4ad1b53acb00d6a", "message": "XRDDEV-665 Context specific API warning examples", "committedDate": "2020-10-09T06:56:41Z", "type": "commit"}, {"oid": "20cbd05ce21a77e37417dc0b9c6d0202058cc293", "url": "https://github.com/nordic-institute/X-Road/commit/20cbd05ce21a77e37417dc0b9c6d0202058cc293", "message": "XRDDEV-665 Context specific API warning examples part 2", "committedDate": "2020-10-13T09:41:34Z", "type": "commit"}, {"oid": "6f843be849eda8c50f76f4f38edeadddd56a6b7a", "url": "https://github.com/nordic-institute/X-Road/commit/6f843be849eda8c50f76f4f38edeadddd56a6b7a", "message": "XRDDEV-665 Add warnings section to the user guide", "committedDate": "2020-10-13T11:02:31Z", "type": "commit"}, {"oid": "ca7064aa6fc3cfa58614ecd17ec1e7851ada7ea4", "url": "https://github.com/nordic-institute/X-Road/commit/ca7064aa6fc3cfa58614ecd17ec1e7851ada7ea4", "message": "XRDDEV-665 Format all endpoint descriptions properly", "committedDate": "2020-10-13T13:08:39Z", "type": "commit"}, {"oid": "b1fd2f774391c213fff7d30307d4818a8092bb7e", "url": "https://github.com/nordic-institute/X-Road/commit/b1fd2f774391c213fff7d30307d4818a8092bb7e", "message": "XRDDEV-665 Remove endpoint id from conflict exception", "committedDate": "2020-10-13T14:48:52Z", "type": "commit"}, {"oid": "e858273585e5be2d2c05234cacda614ee84f8e24", "url": "https://github.com/nordic-institute/X-Road/commit/e858273585e5be2d2c05234cacda614ee84f8e24", "message": "XRDDEV-665 Add better metadata docs", "committedDate": "2020-10-13T14:49:29Z", "type": "commit"}, {"oid": "fe5bfc1bdb14ff79066362e211f803ef2137ad0d", "url": "https://github.com/nordic-institute/X-Road/commit/fe5bfc1bdb14ff79066362e211f803ef2137ad0d", "message": "XRDDEV-665 Add better metadata docs for initialization", "committedDate": "2020-10-13T15:13:07Z", "type": "commit"}, {"oid": "a986bcf66d48a49518a7edb4b0ad2827c17ff39d", "url": "https://github.com/nordic-institute/X-Road/commit/a986bcf66d48a49518a7edb4b0ad2827c17ff39d", "message": "Merge branch 'develop' into XRDDEV-665-metadata-documentation", "committedDate": "2020-10-14T05:43:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4NTU3MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r505585571", "bodyText": "Suggestion, would slight rewording make this easier to understand?\n\n\nIf the warnings can be ignored, client resends the REST request, but with ignore_warnings parameter set to true. If the request was sent via the admin UI and a warning popup with the CONTINUE button is shown, clicking the button will ignore warnings and proceed to executing the operation\n\n\n->\n\n\nIf the warnings can be ignored, client resends the REST request, but with ignore_warnings parameter set to true. If the original request was sent via the admin UI and a warning popup with the CONTINUE button was shown, clicking the button will cause this resending to happen.\n\n\nOr, alternatively, maybe remove mentions of admin UI from steps 1-5 and explain how admin UI handles this via popup, after 1-5. At current form step 4 is maybe a bit confusing as it combines explaining \"general client\" and \"concrete admin UI\" cases, I feel.", "author": "jansu76", "createdAt": "2020-10-15T14:24:36Z", "path": "doc/Manuals/ug-ss_x-road_6_security_server_user_guide.md", "diffHunk": "@@ -2143,18 +2146,83 @@ For example, these log messages are related to an API call with correlation ID `\n \n ### 19.4 Validation errors\n \n-An error response from the REST API can include validation errors if an unsupported parameter was provided with the request. \n+An error response from the REST API can include validation errors if an unsupported parameter was provided with the request.\n+When \n \n-In addition to the validation messages declared in Java Validation API, the following validation errors are possible:\n+Example request and response of adding a new subsystem with illegal characters:\n ```\n-Normalized\n+POST https://ss1:4100/api/v1/clients\n+\n+Request body:\n+{\n+  \"client\": {\n+    \"member_class\": \"ORG\",\n+    \"member_code\": \"0/1234\",\n+    \"subsystem_code\": \"Subsystem%Code\"\n+  },\n+  \"ignore_warnings\": false\n+}\n+\n+Response body:\n+{\n+  \"error\": {\n+    \"code\": \"validation_failure\",\n+    \"validation_errors\": {\n+      \"clientAdd.client.memberCode\": [\n+        \"NoForwardslashes\"\n+      ],\n+      \"clientAdd.client.subsystemCode\": [\n+        \"NoPercents\"\n+      ]\n+    }\n+  },\n+  \"status\": 400\n+}\n+```\n+\n+In addition to the validation messages declared in [Java Validation API](https://javaee.github.io/javaee-spec/javadocs/javax/validation/constraints/package-summary.html), the following validation errors are possible:\n+```\n+NoControlChars\n NoColons\n NoSemicolons\n NoForwardslashes\n NoBackslashes\n NoPercents\n ```\n \n+### 19.5 Warning responses\n+\n+Error response from the Management API can include additional warnings that you can ignore if seen necessary. The warnings can be ignored by your decision, by executing the same operation with `ignore_warnings` boolean parameter set to `true`. *Always consider the warning before making the decision to ignore it.* \n+\n+An example case:\n+1. Client executes a REST request, without `ignore_warnings` parameter, to backend\n+2. Backend notices warnings and responds with error message that contains the warnings. Nothing is updated at this point\n+3. Client determines if warnings can be ignored. If the request was sent via the admin UI, a popup with `CONTINUE` button is shown\n+4. If the warnings can be ignored, client resends the REST request, but with `ignore_warnings` parameter set to `true`. If the request was sent via the admin UI and a warning popup with the `CONTINUE` button is shown, clicking the button will ignore warnings and proceed to executing the operation", "originalCommit": "a986bcf66d48a49518a7edb4b0ad2827c17ff39d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcyMzIyNQ==", "url": "https://github.com/nordic-institute/X-Road/pull/720#discussion_r507723225", "bodyText": "Separated the UI usage from the steps and moved it to the end of the chapter", "author": "carohauta", "createdAt": "2020-10-19T12:56:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTU4NTU3MQ=="}], "type": "inlineReview"}, {"oid": "75ac80d41a183e8218cd811d3c118565e7cdbc7f", "url": "https://github.com/nordic-institute/X-Road/commit/75ac80d41a183e8218cd811d3c118565e7cdbc7f", "message": "Merge branch 'develop' into XRDDEV-665-metadata-documentation\n\n# Conflicts:\n#\tdoc/Manuals/ug-ss_x-road_6_security_server_user_guide.md", "committedDate": "2020-10-19T11:22:20Z", "type": "commit"}, {"oid": "f707ea971c8937ae4e299c9e2a5d224a9de7db25", "url": "https://github.com/nordic-institute/X-Road/commit/f707ea971c8937ae4e299c9e2a5d224a9de7db25", "message": "XRDDEV-665 Update validation errors chapter", "committedDate": "2020-10-19T12:25:25Z", "type": "commit"}, {"oid": "f9a4946ec68f1afe56ebe99c27cf692088309a8c", "url": "https://github.com/nordic-institute/X-Road/commit/f9a4946ec68f1afe56ebe99c27cf692088309a8c", "message": "XRDDEV-665 Update validation errors chapter part 2", "committedDate": "2020-10-19T12:28:08Z", "type": "commit"}, {"oid": "c291efdecf1edd4c13a8aad068784c272c3fd1b2", "url": "https://github.com/nordic-institute/X-Road/commit/c291efdecf1edd4c13a8aad068784c272c3fd1b2", "message": "XRDDEV-665 Warning mechanism in the admin UI", "committedDate": "2020-10-19T12:52:36Z", "type": "commit"}, {"oid": "4c4dd09c98b5451e69125c888e25e49a84a8eb8e", "url": "https://github.com/nordic-institute/X-Road/commit/4c4dd09c98b5451e69125c888e25e49a84a8eb8e", "message": "XRDDEV-665 More specific warnings and error metadata descriptions\n\n* also changed OpenAPI parser warning code", "committedDate": "2020-10-19T15:14:10Z", "type": "commit"}, {"oid": "b6d111eee4f3eddaaf508791143842b62f94f588", "url": "https://github.com/nordic-institute/X-Road/commit/b6d111eee4f3eddaaf508791143842b62f94f588", "message": "XRDDEV-665 Add missing error metadata description and remove redundants", "committedDate": "2020-10-20T17:28:36Z", "type": "commit"}, {"oid": "042c67533cadebfa6ea1c6c4f3fcc0568960496c", "url": "https://github.com/nordic-institute/X-Road/commit/042c67533cadebfa6ea1c6c4f3fcc0568960496c", "message": "XRDDEV-665 Add disclaimer about metadatas", "committedDate": "2020-10-20T17:35:02Z", "type": "commit"}, {"oid": "b094977e95466c97d4e8786236379bc9cbf85f0d", "url": "https://github.com/nordic-institute/X-Road/commit/b094977e95466c97d4e8786236379bc9cbf85f0d", "message": "XRDDEV-665 Fix service description example references", "committedDate": "2020-10-21T11:20:37Z", "type": "commit"}]}