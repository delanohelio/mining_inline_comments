{"pr_number": 455, "pr_title": "XRDDEV-932: restore backup frontend implementation", "pr_createdAt": "2020-04-09T10:47:02Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/455", "timeline": [{"oid": "6323225eeab582f99f01dd7fde0d62177869a849", "url": "https://github.com/nordic-institute/X-Road/commit/6323225eeab582f99f01dd7fde0d62177869a849", "message": "XRDDEV-932: restore backup frontend implementation", "committedDate": "2020-04-09T10:46:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODUzMQ==", "url": "https://github.com/nordic-institute/X-Road/pull/455#discussion_r406368531", "bodyText": "Is async necessary here?  After all await-keyword is not used.", "author": "TJaakkola", "createdAt": "2020-04-09T17:40:11Z", "path": "src/proxy-ui-api/frontend/src/views/Settings/BackupAndRestore/RestoreBackupButton.vue", "diffHunk": "@@ -0,0 +1,77 @@\n+<template>\n+  <small-button\n+    v-if=\"canBackup\"\n+    :min_width=\"50\"\n+    class=\"xrd-table-button\"\n+    data-test=\"backup-restore\"\n+    @click=\"showConfirmation = true\"\n+    >{{ $t('action.restore') }}\n+    <confirm-dialog\n+      :dialog=\"showConfirmation\"\n+      :loading=\"restoring\"\n+      title=\"backup.action.restore.dialog.title\"\n+      text=\"backup.action.restore.dialog.confirmation\"\n+      :data=\"{ file: backup.filename }\"\n+      @cancel=\"showConfirmation = false\"\n+      @accept=\"restoreBackup\"\n+    />\n+  </small-button>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import { Prop } from 'vue/types/options';\n+import { Backup } from '@/types';\n+import * as api from '@/util/api';\n+import SmallButton from '@/components/ui/SmallButton.vue';\n+import ConfirmDialog from '@/components/ui/ConfirmDialog.vue';\n+export default Vue.extend({\n+  name: 'RestoreBackupButton',\n+  components: {\n+    SmallButton,\n+    ConfirmDialog,\n+  },\n+  props: {\n+    canBackup: {\n+      type: Boolean,\n+      default: false,\n+      required: true,\n+    },\n+    backup: {\n+      type: Object as Prop<Backup>,\n+      required: true,\n+    },\n+  },\n+  data() {\n+    return {\n+      showConfirmation: false,\n+      restoring: false,\n+    };\n+  },\n+  methods: {\n+    async restoreBackup() {", "originalCommit": "6323225eeab582f99f01dd7fde0d62177869a849", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA4MDY3Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/455#discussion_r410080673", "bodyText": "Removed async.", "author": "raits", "createdAt": "2020-04-17T08:44:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM2ODUzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3MDA4NA==", "url": "https://github.com/nordic-institute/X-Road/pull/455#discussion_r406370084", "bodyText": "Variables in data-block can be typed. At least in the case of objects it can be usefull and it works at least partially with templates and other methods. Its not that beneficial in this small component but very handy in bigger ones. In this particular simple case it would be:\nshowConfirmation: false as boolean,", "author": "TJaakkola", "createdAt": "2020-04-09T17:42:55Z", "path": "src/proxy-ui-api/frontend/src/views/Settings/BackupAndRestore/RestoreBackupButton.vue", "diffHunk": "@@ -0,0 +1,77 @@\n+<template>\n+  <small-button\n+    v-if=\"canBackup\"\n+    :min_width=\"50\"\n+    class=\"xrd-table-button\"\n+    data-test=\"backup-restore\"\n+    @click=\"showConfirmation = true\"\n+    >{{ $t('action.restore') }}\n+    <confirm-dialog\n+      :dialog=\"showConfirmation\"\n+      :loading=\"restoring\"\n+      title=\"backup.action.restore.dialog.title\"\n+      text=\"backup.action.restore.dialog.confirmation\"\n+      :data=\"{ file: backup.filename }\"\n+      @cancel=\"showConfirmation = false\"\n+      @accept=\"restoreBackup\"\n+    />\n+  </small-button>\n+</template>\n+\n+<script lang=\"ts\">\n+import Vue from 'vue';\n+import { Prop } from 'vue/types/options';\n+import { Backup } from '@/types';\n+import * as api from '@/util/api';\n+import SmallButton from '@/components/ui/SmallButton.vue';\n+import ConfirmDialog from '@/components/ui/ConfirmDialog.vue';\n+export default Vue.extend({\n+  name: 'RestoreBackupButton',\n+  components: {\n+    SmallButton,\n+    ConfirmDialog,\n+  },\n+  props: {\n+    canBackup: {\n+      type: Boolean,\n+      default: false,\n+      required: true,\n+    },\n+    backup: {\n+      type: Object as Prop<Backup>,\n+      required: true,\n+    },\n+  },\n+  data() {\n+    return {\n+      showConfirmation: false,", "originalCommit": "6323225eeab582f99f01dd7fde0d62177869a849", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDA4MDk1OQ==", "url": "https://github.com/nordic-institute/X-Road/pull/455#discussion_r410080959", "bodyText": "Added typings, good idea to always add them.", "author": "raits", "createdAt": "2020-04-17T08:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNjM3MDA4NA=="}], "type": "inlineReview"}, {"oid": "1bda4a995f24225b3641614f0f65e3b75c2a0370", "url": "https://github.com/nordic-institute/X-Road/commit/1bda4a995f24225b3641614f0f65e3b75c2a0370", "message": "XRDDEV-932: added types to data, removed unneeded async from restoreBackup()", "committedDate": "2020-04-17T08:43:58Z", "type": "commit"}]}