{"pr_number": 492, "pr_title": "XRDDEV-959: Add subjects wizard", "pr_createdAt": "2020-05-08T06:53:43Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/492", "timeline": [{"oid": "4df92ae89387382bcae58ba2be93739bce3476e2", "url": "https://github.com/nordic-institute/X-Road/commit/4df92ae89387382bcae58ba2be93739bce3476e2", "message": "XRDDEV-959: Implemented add subjects wizard", "committedDate": "2020-05-08T06:52:06Z", "type": "commit"}, {"oid": "fbe8633ffea55a961b4d78a33f6fa0143c89439e", "url": "https://github.com/nordic-institute/X-Road/commit/fbe8633ffea55a961b4d78a33f6fa0143c89439e", "message": "Merge branch 'develop' into XRDDEV-959", "committedDate": "2020-05-14T09:18:55Z", "type": "commit"}, {"oid": "938c1079bcae8acb236d91542762d84cd0af6f27", "url": "https://github.com/nordic-institute/X-Road/commit/938c1079bcae8acb236d91542762d84cd0af6f27", "message": "XRDDEV-959: Remove unused code", "committedDate": "2020-05-14T09:26:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAyNDMwMA==", "url": "https://github.com/nordic-institute/X-Road/pull/492#discussion_r425024300", "bodyText": "Can you add comments about what is happening in this chain?", "author": "Riippi", "createdAt": "2020-05-14T10:10:29Z", "path": "src/proxy-ui-api/frontend/src/views/Clients/ServiceClients/AddServiceClientAccessRightsWizard.vue", "diffHunk": "@@ -0,0 +1,140 @@\n+<template>\n+  <div class=\"xrd-tab-max-width xrd-view-common\">\n+    <subViewTitle\n+      :title=\"$t('serviceClients.addServiceClientTitle')\"\n+      :showClose=\"false\"\n+      data-test=\"add-subject-title\"\n+    />\n+\n+    <v-stepper :alt-labels=\"true\" v-model=\"step\" class=\"stepper noshadow\">\n+      <v-stepper-header class=\"noshadow stepper-header\">\n+        <v-stepper-step :complete=\"step > 1\" step=\"1\">{{$t('serviceClients.memberGroupStep')}}</v-stepper-step>\n+        <v-divider></v-divider>\n+        <v-stepper-step :complete=\"step > 2\" step=\"2\">{{$t('serviceClients.servicesStep')}}</v-stepper-step>\n+      </v-stepper-header>\n+\n+      <v-stepper-items class=\"stepper-content\">\n+        <v-stepper-content step=\"1\">\n+          <MemberOrGroupSelectionStep\n+            :id=\"this.id\"\n+            :service-clients=\"serviceClients\"\n+            v-on:candidate-selection=\"candidateSelection\"\n+            v-on:set-step=\"nextStep\"></MemberOrGroupSelectionStep>\n+        </v-stepper-content>\n+        <v-stepper-content step=\"2\">\n+          <ServiceSelectionStep\n+            v-if=\"serviceClientCandidateSelection\"\n+            :serviceCandidates=\"serviceCandidates\"\n+            :serviceClientCandidateSelection=\"serviceClientCandidateSelection\"\n+            :id=\"id\"\n+            v-on:set-step=\"previousStep\"></ServiceSelectionStep>\n+        </v-stepper-content>\n+      </v-stepper-items>\n+    </v-stepper>\n+\n+  </div>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import MemberOrGroupSelectionStep from '@/views/Clients/ServiceClients/MemberOrGroupSelectionStep.vue';\n+  import ServiceSelectionStep from '@/views/Clients/ServiceClients/ServiceSelectionStep.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import {AccessRight, Service, ServiceClient, ServiceDescription} from '@/types';\n+  import * as api from '@/util/api';\n+  import {ServiceCandidate} from '@/ui-types';\n+\n+  export default Vue.extend({\n+    props: {\n+      id: {\n+        type: String,\n+        required: true,\n+      },\n+    },\n+    components: {\n+      SubViewTitle,\n+      MemberOrGroupSelectionStep,\n+      ServiceSelectionStep,\n+      LargeButton,\n+    },\n+    data() {\n+      return {\n+        step: 1 as number,\n+        serviceClientAccessRights: [] as AccessRight[],\n+        serviceCandidates: [] as ServiceCandidate[],\n+        serviceClients: [] as ServiceClient[],\n+        serviceClientCandidateSelection: undefined as undefined | ServiceClient,\n+      };\n+    },\n+    methods: {\n+      candidateSelection(candidate: ServiceClient): void {\n+        this.serviceClientCandidateSelection = candidate;\n+      },\n+      fetchData(): void {\n+\n+        api.get(`/clients/${this.id}/service-clients`, {})\n+          .then( ( response: any ): void => this.serviceClients = response.data )\n+          .catch( (error: any) =>\n+            this.$store.dispatch('showError', error));\n+\n+        api\n+          .get(`/clients/${this.id}/service-descriptions`)\n+          .then( (response: any) => {\n+            const serviceDescriptions = response.data as ServiceDescription[];\n+            this.serviceCandidates = serviceDescriptions", "originalCommit": "938c1079bcae8acb236d91542762d84cd0af6f27", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAzMTY5MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/492#discussion_r425031691", "bodyText": "Added comments", "author": "TJaakkola", "createdAt": "2020-05-14T10:23:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAyNDMwMA=="}], "type": "inlineReview"}, {"oid": "456706e9ee31e866151462d77a453179a11d805b", "url": "https://github.com/nordic-institute/X-Road/commit/456706e9ee31e866151462d77a453179a11d805b", "message": "XRDDEV-959: Add comments", "committedDate": "2020-05-14T10:23:34Z", "type": "commit"}]}