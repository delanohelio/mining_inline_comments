{"pr_number": 612, "pr_title": "XRDDEV-1183 Client flow improvement", "pr_createdAt": "2020-07-23T14:18:06Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/612", "timeline": [{"oid": "069fa144fa5c7f999566de6d10a99ebf47059aab", "url": "https://github.com/nordic-institute/X-Road/commit/069fa144fa5c7f999566de6d10a99ebf47059aab", "message": "XRDDEV-1182 Add functions for a case when the csr exists", "committedDate": "2020-07-20T11:32:32Z", "type": "commit"}, {"oid": "de23630860f69e9c7ac97d93ebea0550cc01001b", "url": "https://github.com/nordic-institute/X-Road/commit/de23630860f69e9c7ac97d93ebea0550cc01001b", "message": "Merge branch 'XRDDEV-1182-add-member-with-csr' into XRDDEV-1183-client-flow-improvement", "committedDate": "2020-07-21T18:54:50Z", "type": "commit"}, {"oid": "29900c9d53be9394a1e0868405f17490b3e3482a", "url": "https://github.com/nordic-institute/X-Road/commit/29900c9d53be9394a1e0868405f17490b3e3482a", "message": "XRDDEV-1183 Simplify step methods in add member wizard", "committedDate": "2020-07-22T13:33:17Z", "type": "commit"}, {"oid": "53cc991db385cf6f93cf4b79cecb31a2e16862e5", "url": "https://github.com/nordic-institute/X-Road/commit/53cc991db385cf6f93cf4b79cecb31a2e16862e5", "message": "XRDDEV-1183 Fix add member dialog title", "committedDate": "2020-07-22T13:42:42Z", "type": "commit"}, {"oid": "cacfd0df2292e5f1ed3752a1e558640ce99e87ed", "url": "https://github.com/nordic-institute/X-Road/commit/cacfd0df2292e5f1ed3752a1e558640ce99e87ed", "message": "XRDDEV-1183 Update localisations", "committedDate": "2020-07-22T13:43:07Z", "type": "commit"}, {"oid": "122c061cb26747e54f2eb9c7029d44e1ebb7ac30", "url": "https://github.com/nordic-institute/X-Road/commit/122c061cb26747e54f2eb9c7029d44e1ebb7ac30", "message": "XRDDEV-1183 Cleanup", "committedDate": "2020-07-22T13:43:39Z", "type": "commit"}, {"oid": "df57c4c5780de14d0be657f9105a418d46b94c9f", "url": "https://github.com/nordic-institute/X-Road/commit/df57c4c5780de14d0be657f9105a418d46b94c9f", "message": "Merge commit '2422c189216f0518bd5b8f788015781e36684c41' into XRDDEV-1183-client-flow-improvement", "committedDate": "2020-07-23T08:31:33Z", "type": "commit"}, {"oid": "402893e2a9e9c34058ad271e39906b730a979fa4", "url": "https://github.com/nordic-institute/X-Road/commit/402893e2a9e9c34058ad271e39906b730a979fa4", "message": "XRDDEV-1183 Fix comments", "committedDate": "2020-07-23T08:43:07Z", "type": "commit"}, {"oid": "0efbe7abb78b253c843893b4445ad79606136c96", "url": "https://github.com/nordic-institute/X-Road/commit/0efbe7abb78b253c843893b4445ad79606136c96", "message": "XRDDEV-1183 Update add client flow", "committedDate": "2020-07-23T08:45:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyNjMyMw==", "url": "https://github.com/nordic-institute/X-Road/pull/612#discussion_r459926323", "bodyText": "This doesn't seem to work, API call that results from this is \"/api/v1/clients/undefined:ORG:TEST/register\" (instance is undefined), resulting in failure to register the client.\nI think this identifier should also include the subsystem that is being added.", "author": "raits", "createdAt": "2020-07-24T08:44:15Z", "path": "src/proxy-ui-api/frontend/src/views/AddClient/FinishPage.vue", "diffHunk": "@@ -115,21 +163,66 @@ export default Vue.extend({\n       this.createClient(true);\n     },\n \n-    generateCsr(): void {\n+    generateKeyAndCsr(): void {\n       const tokenId = this.$store.getters.csrTokenId;\n \n-      this.$store.dispatch('generateKeyAndCsr', tokenId).then(\n-        () => {\n+      this.$store\n+        .dispatch('generateKeyAndCsr', tokenId)\n+        .then(\n+          () => {\n+            this.$emit('done');\n+          },\n+          (error) => {\n+            this.$store.dispatch('showError', error);\n+          },\n+        )\n+        .finally(() => {\n           this.disableCancel = false;\n           this.submitLoading = false;\n-          this.$emit('done');\n-        },\n-        (error) => {\n-          this.$store.dispatch('showError', error);\n+        });\n+    },\n+\n+    generateCsr(): void {\n+      const tokenId = this.$store.getters.csrTokenId;\n+\n+      this.$store\n+        .dispatch('generateCsr', tokenId)\n+        .then(\n+          () => {\n+            this.$emit('done');\n+          },\n+          (error) => {\n+            this.$store.dispatch('showError', error);\n+          },\n+        )\n+        .finally(() => {\n           this.disableCancel = false;\n           this.submitLoading = false;\n-        },\n+        });\n+    },\n+\n+    registerClient(): void {\n+      const clientId = createClientId(\n+        this.currentSecurityServer.instanceId,", "originalCommit": "0efbe7abb78b253c843893b4445ad79606136c96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAxNjU0NA==", "url": "https://github.com/nordic-institute/X-Road/pull/612#discussion_r460016544", "bodyText": "Fixed", "author": "Riippi", "createdAt": "2020-07-24T12:17:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyNjMyMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyNzM4NQ==", "url": "https://github.com/nordic-institute/X-Road/pull/612#discussion_r459927385", "bodyText": "This doesn't seem to be used anymore, maybe it should be removed?", "author": "raits", "createdAt": "2020-07-24T08:46:45Z", "path": "src/proxy-ui-api/frontend/src/views/AddClient/ClientDetailsPage.vue", "diffHunk": "@@ -180,9 +185,9 @@ export default Vue.extend({\n   data() {\n     return {\n       disableDone: false,\n-      certificationService: undefined,\n       filteredServiceList: [],", "originalCommit": "0efbe7abb78b253c843893b4445ad79606136c96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MDAxNjg3Mg==", "url": "https://github.com/nordic-institute/X-Road/pull/612#discussion_r460016872", "bodyText": "Removed it and also another unused value", "author": "Riippi", "createdAt": "2020-07-24T12:17:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTkyNzM4NQ=="}], "type": "inlineReview"}, {"oid": "055304a5b0284f1a124014fe5cd697d8c112d857", "url": "https://github.com/nordic-institute/X-Road/commit/055304a5b0284f1a124014fe5cd697d8c112d857", "message": "XRDDEV-1183 Fixes for PR issues", "committedDate": "2020-07-24T11:18:28Z", "type": "commit"}, {"oid": "d5e9d2b2c6831ebc5f0b544e2db048e6edc79993", "url": "https://github.com/nordic-institute/X-Road/commit/d5e9d2b2c6831ebc5f0b544e2db048e6edc79993", "message": "XRDDEV-1183 Fix missing parameter", "committedDate": "2020-07-24T12:15:24Z", "type": "commit"}]}