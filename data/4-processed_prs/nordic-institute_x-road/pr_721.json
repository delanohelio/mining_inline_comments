{"pr_number": 721, "pr_title": "XRDDEV-1266 Error snackbar update", "pr_createdAt": "2020-09-21T17:03:53Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/721", "timeline": [{"oid": "c649508f7e8f90720b08d2bcc568ec28201758cb", "url": "https://github.com/nordic-institute/X-Road/commit/c649508f7e8f90720b08d2bcc568ec28201758cb", "message": "XRDDEV-1266 Update packages", "committedDate": "2020-08-26T18:32:42Z", "type": "commit"}, {"oid": "851ff51f9b3d024c6fb7e5b2567f225394c92622", "url": "https://github.com/nordic-institute/X-Road/commit/851ff51f9b3d024c6fb7e5b2567f225394c92622", "message": "XRDDEV-1266 Add counter draft", "committedDate": "2020-08-26T18:33:53Z", "type": "commit"}, {"oid": "19ff0aaf84bff58086c6ca184df5fbefa412e410", "url": "https://github.com/nordic-institute/X-Road/commit/19ff0aaf84bff58086c6ca184df5fbefa412e410", "message": "Merge commit '95cbc6fb99d3d8dfaa1643cba466e66739a9f93e' into XRDDEV-1266-error-snackbar-update", "committedDate": "2020-08-26T18:41:16Z", "type": "commit"}, {"oid": "dea2b23d25fdf4c04d71444eda165bebc62a71bd", "url": "https://github.com/nordic-institute/X-Road/commit/dea2b23d25fdf4c04d71444eda165bebc62a71bd", "message": "XRDDEV-1266 Update vuetify", "committedDate": "2020-08-27T15:36:09Z", "type": "commit"}, {"oid": "868d9adbf7ce9d8b903348f4558f99fa678ed9c5", "url": "https://github.com/nordic-institute/X-Road/commit/868d9adbf7ce9d8b903348f4558f99fa678ed9c5", "message": "XRDDEV-1266 Snackbar style fix", "committedDate": "2020-08-28T08:13:39Z", "type": "commit"}, {"oid": "10d23ddb1435e5794d35963c9ad9e6aaa0a67722", "url": "https://github.com/nordic-institute/X-Road/commit/10d23ddb1435e5794d35963c9ad9e6aaa0a67722", "message": "Merge branch 'develop' into XRDDEV-1266-error-snackbar-update\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/package-lock.json", "committedDate": "2020-09-18T07:46:50Z", "type": "commit"}, {"oid": "9d89a3f9d86d33a7e0c7b12c135121669e3432c3", "url": "https://github.com/nordic-institute/X-Road/commit/9d89a3f9d86d33a7e0c7b12c135121669e3432c3", "message": "XRDDEV-1266 Updates to error and success snackbar", "committedDate": "2020-09-21T15:28:49Z", "type": "commit"}, {"oid": "35e331a456d5df351d567870173424e9ffd2dedf", "url": "https://github.com/nordic-institute/X-Road/commit/35e331a456d5df351d567870173424e9ffd2dedf", "message": "XRDDEV-1266 Fix success snackbar", "committedDate": "2020-09-21T15:39:57Z", "type": "commit"}, {"oid": "ffcf496e4fb9b76f0cd11f0342f5da3dbd454f54", "url": "https://github.com/nordic-institute/X-Road/commit/ffcf496e4fb9b76f0cd11f0342f5da3dbd454f54", "message": "XRDDEV-1266 Fix error duplicate check", "committedDate": "2020-09-21T16:33:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI1MjkyMA==", "url": "https://github.com/nordic-institute/X-Road/pull/721#discussion_r493252920", "bodyText": "I think you could use the custom isEmpty -utility method from util/helpers.ts here.\nSo the clause could be written like this (double check!):\nif (isEmpty(notification) || isEmpty(errorNotifications)) {", "author": "TJaakkola", "createdAt": "2020-09-23T07:21:54Z", "path": "src/proxy-ui-api/frontend/src/store/modules/notifications.ts", "diffHunk": "@@ -28,41 +28,104 @@ import { RootState } from '../types';\n import { Notification } from '@/ui-types';\n \n export interface NotificationsState {\n-  successMessageCode: string;\n-  successMessageRaw: string;\n-  showSuccessCode: boolean;\n-  showSuccessRaw: boolean;\n-  notifications: Notification[];\n+  errorNotifications: Notification[];\n+  successNotifications: Notification[];\n }\n \n const getDefaultState = () => {\n   return {\n-    successMessageCode: '',\n-    successMessageRaw: '',\n-    showSuccessCode: false,\n-    showSuccessRaw: false,\n-    notifications: [],\n+    errorNotifications: [],\n+    successNotifications: [],\n   };\n };\n \n+// Finds if an array of notifications contains a similar notification.\n+function containsNotification(\n+  errorNotifications: Notification[],\n+  notification: Notification,\n+): number {\n+  if (!notification || !errorNotifications || errorNotifications.length === 0) {", "originalCommit": "ffcf496e4fb9b76f0cd11f0342f5da3dbd454f54", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzYwMTc4Ng==", "url": "https://github.com/nordic-institute/X-Road/pull/721#discussion_r493601786", "bodyText": "isEmpty accepts strings or arrays. And seems that it's currently used only for strings. I'm not sure if it would be good to expand it for Notifications or some more general things.", "author": "Riippi", "createdAt": "2020-09-23T13:41:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI1MjkyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDA2OTE5Mg==", "url": "https://github.com/nordic-institute/X-Road/pull/721#discussion_r494069192", "bodyText": "Ah yes, I've that notification is an object. But I guess it could be used for errorNotifications", "author": "TJaakkola", "createdAt": "2020-09-24T06:33:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI1MjkyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTkxNTI4OA==", "url": "https://github.com/nordic-institute/X-Road/pull/721#discussion_r495915288", "bodyText": "I suppose the line would look like this  if (!notification || isEmpty(errorNotifications as [])) {\nand import of the isEmpty would add one line. So it seems a bit boilerplated and I would rather keep it like it is now.\nRelated to the isEmpty method, I think there is a case to make it to accept string only, or somehow define the array type smarter.", "author": "Riippi", "createdAt": "2020-09-28T12:54:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzI1MjkyMA=="}], "type": "inlineReview"}, {"oid": "410255d4db513f835779ed82cdf3c83eca102562", "url": "https://github.com/nordic-institute/X-Road/commit/410255d4db513f835779ed82cdf3c83eca102562", "message": "XRDDEV-1266 Update localisation", "committedDate": "2020-09-25T10:56:46Z", "type": "commit"}]}