{"pr_number": 536, "pr_title": "XRDDEV-1046 csr dropdown fix", "pr_createdAt": "2020-06-05T12:38:14Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/536", "timeline": [{"oid": "6398264989a5326d30995c2e351ad4fe1cf59887", "url": "https://github.com/nordic-institute/X-Road/commit/6398264989a5326d30995c2e351ad4fe1cf59887", "message": "XRDDEV-1046 Add method for fetching proper member id data", "committedDate": "2020-06-02T10:58:03Z", "type": "commit"}, {"oid": "fed3ddc0716f3103d1f36637b3ab320acf8e61b4", "url": "https://github.com/nordic-institute/X-Road/commit/fed3ddc0716f3103d1f36637b3ab320acf8e61b4", "message": "XRDDEV-1046 Fix bug when saving csr file via create csr", "committedDate": "2020-06-02T10:59:06Z", "type": "commit"}, {"oid": "a14fd546a209b556da70eb9f91ccdf2f004d51a8", "url": "https://github.com/nordic-institute/X-Road/commit/a14fd546a209b556da70eb9f91ccdf2f004d51a8", "message": "XRDDEV-1046 Fix linter error", "committedDate": "2020-06-02T11:03:28Z", "type": "commit"}, {"oid": "2a524478a00fbd289c36f8966393fc86406451b5", "url": "https://github.com/nordic-institute/X-Road/commit/2a524478a00fbd289c36f8966393fc86406451b5", "message": "XRDDEV-1046 Remove useless vuex store calls", "committedDate": "2020-06-02T11:05:17Z", "type": "commit"}, {"oid": "bc6d2b02a9aaadf086cba14877fa476f1c279c1b", "url": "https://github.com/nordic-institute/X-Road/commit/bc6d2b02a9aaadf086cba14877fa476f1c279c1b", "message": "Merge branch 'develop' into XRDDEV-1046-csr-dropdown-fix", "committedDate": "2020-06-03T14:37:33Z", "type": "commit"}, {"oid": "a1966d24f71c8e3a5ad8cb17767752abb34531bd", "url": "https://github.com/nordic-institute/X-Road/commit/a1966d24f71c8e3a5ad8cb17767752abb34531bd", "message": "Merge commit 'e0409fcd7ee9ba87e6000afeb0dde52b3da977ca' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts\n#\tsrc/proxy-ui-api/frontend/src/store/modules/clients.ts", "committedDate": "2020-06-05T12:34:05Z", "type": "commit"}, {"oid": "d9437668819c911f8a31353eb6c36c3523b5d95a", "url": "https://github.com/nordic-institute/X-Road/commit/d9437668819c911f8a31353eb6c36c3523b5d95a", "message": "XRDDEV-1046 Linter fixes", "committedDate": "2020-06-05T12:35:20Z", "type": "commit"}, {"oid": "6a46d4f89ef4baf9dd89874d284ed8217fff2f86", "url": "https://github.com/nordic-institute/X-Road/commit/6a46d4f89ef4baf9dd89874d284ed8217fff2f86", "message": "XRDDEV-1046 Fix missing import", "committedDate": "2020-06-05T14:15:04Z", "type": "commit"}, {"oid": "dfbcb3b05a6b70705970044f1773d4bd87d7ee6e", "url": "https://github.com/nordic-institute/X-Road/commit/dfbcb3b05a6b70705970044f1773d4bd87d7ee6e", "message": "Merge commit '0356a46f770f20a0bb2a10259be99ef72e335365' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts", "committedDate": "2020-06-10T07:38:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA0OTc2Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/536#discussion_r438049763", "bodyText": "As we have the latest javascript & typescript language features in use here I would like to see we embrace the current way of writing idiomatic javascript. I mean that although initializing a new array with in for loop works correctly in this case I urge using arrays map-function and Set -data structure (or filter-function) to solve creating 1:1 transformations on array of objects & removing duplicates.", "author": "TJaakkola", "createdAt": "2020-06-10T11:23:53Z", "path": "src/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts", "diffHunk": "@@ -263,6 +270,27 @@ export const actions: ActionTree<CsrState, RootState> = {\n     commit('storeCsrKey', templateKey);\n     commit('storeUsage', UsageTypes.SIGNING);\n   },\n+\n+  fetchAllMemberIds({ commit, rootGetters }) {\n+    return api\n+      .get('/clients?show_members=true')\n+      .then((res) => {\n+        const idArray: string[] = [];\n+        res.data.forEach((client: Client) => {\n+          // Create id:s without possible subsystem code\n+          const partialId = `${client.instance_id}:${client.member_class}:${client.member_code}`;\n+\n+          if (!idArray.includes(partialId)) {\n+            idArray.push(partialId);\n+          }\n+        });", "originalCommit": "dfbcb3b05a6b70705970044f1773d4bd87d7ee6e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM0OTg3NA==", "url": "https://github.com/nordic-institute/X-Road/pull/536#discussion_r438349874", "bodyText": "Old habits die hard. Updated to use map + Set.", "author": "Riippi", "createdAt": "2020-06-10T19:11:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA0OTc2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODU3MzkzMg==", "url": "https://github.com/nordic-institute/X-Road/pull/536#discussion_r438573932", "bodyText": "I though mapping id-strings would have been a separate step and that's why mentioned the map-function. Adding items to set in loop makes using map futile. This is good but you could use forEach with instead of map in there.", "author": "TJaakkola", "createdAt": "2020-06-11T06:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODA0OTc2Mw=="}], "type": "inlineReview"}, {"oid": "fd45fe080c626625ec35b59120c6d28e2ba8b33d", "url": "https://github.com/nordic-institute/X-Road/commit/fd45fe080c626625ec35b59120c6d28e2ba8b33d", "message": "Merge branch 'develop' into XRDDEV-1046-csr-dropdown-fix\n\n# Conflicts:\n#\tsrc/proxy-ui-api/frontend/src/store/modules/certificateSignRequest.ts", "committedDate": "2020-06-10T13:32:38Z", "type": "commit"}, {"oid": "5a064ab10ddf2e1814317817bf76007df76f3014", "url": "https://github.com/nordic-institute/X-Road/commit/5a064ab10ddf2e1814317817bf76007df76f3014", "message": "XRDDEV-1046 Fix PR issue", "committedDate": "2020-06-10T19:03:13Z", "type": "commit"}, {"oid": "ddd308aeaeb9ccb0dd60dd0f04d166c719670b32", "url": "https://github.com/nordic-institute/X-Road/commit/ddd308aeaeb9ccb0dd60dd0f04d166c719670b32", "message": "XRDDEV-1046 Switch map to foreach", "committedDate": "2020-06-11T06:56:11Z", "type": "commit"}]}