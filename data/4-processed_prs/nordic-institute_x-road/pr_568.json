{"pr_number": 568, "pr_title": "XRDDEV-1159", "pr_createdAt": "2020-06-25T05:31:53Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/568", "timeline": [{"oid": "0d76cfe49f939354f8ead3ceb54ec042216f69c8", "url": "https://github.com/nordic-institute/X-Road/commit/0d76cfe49f939354f8ead3ceb54ec042216f69c8", "message": "XRDDEV-1159 Disable JMX in opmon default configuration", "committedDate": "2020-06-24T14:29:48Z", "type": "commit"}, {"oid": "49368e41ca740909117a337ca7120e06df953c92", "url": "https://github.com/nordic-institute/X-Road/commit/49368e41ca740909117a337ca7120e06df953c92", "message": "XRDDEV-1159 Remove JMX daemon ports from SS installation guides", "committedDate": "2020-06-24T14:33:49Z", "type": "commit"}, {"oid": "2d8f169e35bf77fbeebb1e8e9191fd29fac8c468", "url": "https://github.com/nordic-institute/X-Road/commit/2d8f169e35bf77fbeebb1e8e9191fd29fac8c468", "message": "XRDDEV-1159 Update documentation", "committedDate": "2020-06-25T05:16:25Z", "type": "commit"}, {"oid": "5b813fd96514d5618908327c5b200fb9cedc5f1c", "url": "https://github.com/nordic-institute/X-Road/commit/5b813fd96514d5618908327c5b200fb9cedc5f1c", "message": "XRDDEV-1159 Update documentation", "committedDate": "2020-06-25T05:27:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0NDk0NQ==", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445344945", "bodyText": "PROXY_PARAMS should be MONITOR_PARAMS", "author": "jhyoty", "createdAt": "2020-06-25T06:57:07Z", "path": "doc/EnvironmentalMonitoring/Monitoring-architecture.md", "diffHunk": "@@ -126,10 +128,24 @@ The following sensors produce monitoring data:\n \n Monitoring service is installed as a separate package, with name `xroad-monitor`. It runs in a separate process.\n \n-The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With default configuration, JMX access is only allowed from localhost.\n+#### 2.2.1 JMX interface\n+\n+The service also publishes the monitoring data via JMX. Local monitoring agents can use this as an alternative way to fetch monitoring data. With the default configuration, JMX is disabled.\n \n ![monitoring JMX agent](img/monitoring-jmx.png)\n \n+JMX is enabled by adding the required configuration in `/etc/xroad/services/local.conf` file. The file is opened for editing and changes are made on the `PROXY_PARAMS` variable value. After the `PROXY_PARAMS` variable value has been updated, the `xroad-monitor` service must be restarted.", "originalCommit": "5b813fd96514d5618908327c5b200fb9cedc5f1c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0Njc1NQ==", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445346755", "bodyText": "Copy/paste error...fixed.", "author": "petkivim", "createdAt": "2020-06-25T07:01:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM0NDk0NQ=="}], "type": "inlineReview"}, {"oid": "5dc529081b6b03772304c8bb5f390e4e1cb010f7", "url": "https://github.com/nordic-institute/X-Road/commit/5dc529081b6b03772304c8bb5f390e4e1cb010f7", "message": "XRDDEV-1159 Change PROXY_PARAMS to MONITOR_PARAMS", "committedDate": "2020-06-25T07:00:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM1MDU2Nw==", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445350567", "bodyText": "Should be:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            OPMON_PARAMS=\"OPMON_PARAMS \\\n          \n          \n            \n            OPMON_PARAMS=\"$OPMON_PARAMS \\", "author": "jhyoty", "createdAt": "2020-06-25T07:10:32Z", "path": "doc/OperationalMonitoring/Testing/test-opmon_x-road_operational_monitoring_testing_plan_Y-1104-2.md", "diffHunk": "@@ -166,11 +167,10 @@ Direct observation of JMX metrics in `jconsole` is described in the following se\n \n ### 6.1 Testing the JMXMP Interface Using jconsole\n \n-By default, the JMX interface of the operational monitoring daemon has been configured to listen on localhost, with authentication disabled and TLS enabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively overriding the value of the variable OPMON_PARAMS:\n+By default, the JMX interface of the operational monitoring daemon is disabled. In order to conveniently access this interface from a remote host, either directly or through an SSH tunnel, the following configuration must be used in `/etc/xroad/services/local.conf`, effectively making changes on the `OPMON_PARAMS` parameter value:\n \n ```bash\n-OPMON_PARAMS=\" -javaagent:$METRICS_BUGFIX_AGENT -Xms50m -Xmx256m -XX:MaxMetaspaceSize=70m \\\n--Dlogback.configurationFile=/etc/xroad/conf.d/op-monitor-logback.xml \\\n+OPMON_PARAMS=\"OPMON_PARAMS \\", "originalCommit": "5dc529081b6b03772304c8bb5f390e4e1cb010f7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM2NjUyMw==", "url": "https://github.com/nordic-institute/X-Road/pull/568#discussion_r445366523", "bodyText": "Fixed.", "author": "petkivim", "createdAt": "2020-06-25T07:41:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTM1MDU2Nw=="}], "type": "inlineReview"}, {"oid": "888f256c4d908bf0e7f8c06c92139cbba4b96546", "url": "https://github.com/nordic-institute/X-Road/commit/888f256c4d908bf0e7f8c06c92139cbba4b96546", "message": "XRDDEV-1159 Fix minor error in documentation", "committedDate": "2020-06-25T07:41:19Z", "type": "commit"}]}