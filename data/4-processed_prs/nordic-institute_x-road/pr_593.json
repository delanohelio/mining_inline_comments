{"pr_number": 593, "pr_title": "XRDDEV-525 XRDDEV-978 RHEL 7 and 8 packages", "pr_createdAt": "2020-07-13T15:41:46Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/593", "timeline": [{"oid": "6ea1eec9c5638459d411414bf7d1b2eb216cae98", "url": "https://github.com/nordic-institute/X-Road/commit/6ea1eec9c5638459d411414bf7d1b2eb216cae98", "message": "XRDDEV-525 add RHEL packaging", "committedDate": "2020-07-10T08:20:51Z", "type": "commit"}, {"oid": "2adce422e27b467f88a6a7b1da11629c6031bdd9", "url": "https://github.com/nordic-institute/X-Road/commit/2adce422e27b467f88a6a7b1da11629c6031bdd9", "message": "XRDDEV-525 fix bad path", "committedDate": "2020-07-10T11:16:22Z", "type": "commit"}, {"oid": "3515d6ea46056472122c04da1f61ee7b02fb046b", "url": "https://github.com/nordic-institute/X-Road/commit/3515d6ea46056472122c04da1f61ee7b02fb046b", "message": "XRDDEV-525 fix some problems in RHEL specs", "committedDate": "2020-07-13T08:35:10Z", "type": "commit"}, {"oid": "54bf0fee8782b494162bf1993f7993f8bf0b29c3", "url": "https://github.com/nordic-institute/X-Road/commit/54bf0fee8782b494162bf1993f7993f8bf0b29c3", "message": "XRDDEV-525 fix missing proxy_ui_api.p12", "committedDate": "2020-07-13T12:13:44Z", "type": "commit"}, {"oid": "f85969805a8e2a0b77167c94bcf69b5fea0b6afc", "url": "https://github.com/nordic-institute/X-Road/commit/f85969805a8e2a0b77167c94bcf69b5fea0b6afc", "message": "XRDDEV-525 fix ansble scripts", "committedDate": "2020-07-13T12:15:36Z", "type": "commit"}, {"oid": "02dc5cda91842928b735ef25ea9c0ffdabac0608", "url": "https://github.com/nordic-institute/X-Road/commit/02dc5cda91842928b735ef25ea9c0ffdabac0608", "message": "Merge branch 'develop' into XRDDEV-525-RHEL-7-packages", "committedDate": "2020-07-14T05:59:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI1MDg2MA==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454250860", "bodyText": "This is probably a regression from XRDDEV-727. It might be better to leave it as it is and handle in a separate task. Keeping the predictable repository file name is actually what we want, but it is necessary to check if similar problem exists in the Ubuntu tasks.", "author": "jhyoty", "createdAt": "2020-07-14T10:13:13Z", "path": "ansible/roles/xroad-base/tasks/rhel.yml", "diffHunk": "@@ -42,10 +42,11 @@\n     state: present\n     key: \"{{ rhel_repo_gpgkey }}\"\n \n-- name: xroad repo\n-  template:\n-    src: \"xroad.repo.j2\"\n-    dest: \"/etc/yum.repos.d/xroad.repo\"\n-    owner: root\n-    group: root\n-    mode: 0644\n+# repo already added by step Setup the correct repository for X-Road installation (RHEL)\n+#- name: xroad repo\n+#  template:\n+#    src: \"xroad.repo.j2\"\n+#    dest: \"/etc/yum.repos.d/xroad.repo\"\n+#    owner: root\n+#    group: root\n+#    mode: 0644", "originalCommit": "02dc5cda91842928b735ef25ea9c0ffdabac0608", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM4MzQ5Mg==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454383492", "bodyText": "fixed and created https://jira.niis.org/browse/XRDDEV-1200", "author": "jansu76", "createdAt": "2020-07-14T14:08:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI1MDg2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI5NTIxMw==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454295213", "bodyText": "These seem to be unnecessary (can not find any SELinux rule changes)", "author": "jhyoty", "createdAt": "2020-07-14T11:41:40Z", "path": "src/packages/src/xroad/redhat/SPECS/xroad-proxy-ui-api.spec", "diffHunk": "@@ -0,0 +1,86 @@\n+# do not repack jars\n+%define __jar_repack %{nil}\n+# produce .elX dist tag on both centos and redhat\n+%define dist %(/usr/lib/rpm/redhat/dist.sh)\n+\n+Name:               xroad-proxy-ui-api\n+Version:            %{xroad_version}\n+# release tag, e.g. 0.201508070816.el7 for snapshots and 1.el7 (for final releases)\n+Release:            %{rel}%{?snapshot}%{?dist}\n+Summary:            X-Road proxy UI REST API\n+Group:              Applications/Internet\n+License:            MIT\n+BuildRequires:      systemd\n+Requires(post):     systemd\n+Requires(post):     /usr/sbin/semanage, /usr/sbin/setsebool", "originalCommit": "02dc5cda91842928b735ef25ea9c0ffdabac0608", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM4MzU3Mw==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454383573", "bodyText": "fixed", "author": "jansu76", "createdAt": "2020-07-14T14:08:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI5NTIxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI5ODAxNg==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454298016", "bodyText": "xroad-proxy-ui-api-setup.sh needs ip and hostname (from iproute and hostname packages). net-tools should be unnecessary. Can't find any reference to tar either.", "author": "jhyoty", "createdAt": "2020-07-14T11:47:22Z", "path": "src/packages/src/xroad/redhat/SPECS/xroad-proxy-ui-api.spec", "diffHunk": "@@ -0,0 +1,86 @@\n+# do not repack jars\n+%define __jar_repack %{nil}\n+# produce .elX dist tag on both centos and redhat\n+%define dist %(/usr/lib/rpm/redhat/dist.sh)\n+\n+Name:               xroad-proxy-ui-api\n+Version:            %{xroad_version}\n+# release tag, e.g. 0.201508070816.el7 for snapshots and 1.el7 (for final releases)\n+Release:            %{rel}%{?snapshot}%{?dist}\n+Summary:            X-Road proxy UI REST API\n+Group:              Applications/Internet\n+License:            MIT\n+BuildRequires:      systemd\n+Requires(post):     systemd\n+Requires(post):     /usr/sbin/semanage, /usr/sbin/setsebool\n+Requires(preun):    systemd\n+Requires(postun):   systemd\n+Requires:           net-tools, tar", "originalCommit": "02dc5cda91842928b735ef25ea9c0ffdabac0608", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDM4MzY1MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/593#discussion_r454383651", "bodyText": "fixed", "author": "jansu76", "createdAt": "2020-07-14T14:08:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDI5ODAxNg=="}], "type": "inlineReview"}, {"oid": "3eb4f8e30565ee48d57b64eea714deb64e21f081", "url": "https://github.com/nordic-institute/X-Road/commit/3eb4f8e30565ee48d57b64eea714deb64e21f081", "message": "XRDDEV-525 updates based on PR comments", "committedDate": "2020-07-14T14:07:28Z", "type": "commit"}]}