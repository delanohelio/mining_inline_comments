{"pr_number": 401, "pr_title": "XRDDEV-835: implemented internal CSR generation view on frontend", "pr_createdAt": "2020-03-03T12:51:47Z", "pr_url": "https://github.com/nordic-institute/X-Road/pull/401", "timeline": [{"oid": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918", "url": "https://github.com/nordic-institute/X-Road/commit/da8bd39eac45a0cb5e4f61ce507983e38f9e5918", "message": "XRDDEV-835: implemented internal CSR generation view on frontend", "committedDate": "2020-03-03T12:50:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyMjY3MQ==", "url": "https://github.com/nordic-institute/X-Road/pull/401#discussion_r388322671", "bodyText": "Would it be possible to use saveResponseAsFile from helpers.ts ? Or is this a different kind of thing?", "author": "Riippi", "createdAt": "2020-03-05T14:21:17Z", "path": "src/proxy-ui-api/frontend/src/views/KeysAndCertificates/SecurityServerTlsCertificate/GenerateInternalCsr.vue", "diffHunk": "@@ -0,0 +1,124 @@\n+<template>\n+  <v-container class=\"xrd-view-common justify-center wrapper\">\n+    <SubViewTitle :title=\"$t('ssTlsCertificate.generateInternalCsr.title')\" :show-close=false></SubViewTitle>\n+    <v-row class=\"first-action\">\n+      <v-col>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.description')}}\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"3\" class=\"mt-6\">\n+        <HelpIcon :text=\"$t('ssTlsCertificate.generateInternalCsr.step1.tooltip')\"/>\n+        {{$t('ssTlsCertificate.generateInternalCsr.step1.label')}}\n+      </v-col>\n+      <v-col cols=\"8\">\n+        <v-text-field v-model=\"distinguishedName\" data-text=\"generate-internal-csr-distinguished-name-field\"\n+                      :placeholder=\"$t('ssTlsCertificate.generateInternalCsr.step1.placeholder')\"/>\n+      </v-col>\n+    </v-row>\n+    <v-row>\n+      <v-col cols=\"8\" class=\"mt-2\">\n+        {{$t('ssTlsCertificate.generateInternalCsr.step2.description')}}\n+      </v-col>\n+      <v-col cols=\"4\" class=\"text-right\">\n+        <large-button outlined data-text=\"generate-internal-csr-generate-csr-button\"\n+                      :disabled=\"distinguishedName.length === 0 || csrGenerated\" :loading=\"generatingCsr\"\n+                      @click=\"generateCsr\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.step2.generateCSR')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+    <v-row class=\"bottom-buttons-wrapper\">\n+      <v-col cols=\"6\" class=\"text-left\">\n+        <large-button @click=\"back\" :disabled=\"csrGenerated || generatingCsr\" outlined\n+                      data-test=\"generate-internal-csr-cancel-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.cancel')}}\n+        </large-button>\n+      </v-col>\n+      <v-col cols=\"6\" class=\"text-right\">\n+        <large-button @click=\"back\" :disabled=\"!csrGenerated\" data-test=\"generate-internal-csr-done-button\">\n+          {{$t('ssTlsCertificate.generateInternalCsr.done')}}\n+        </large-button>\n+      </v-col>\n+    </v-row>\n+  </v-container>\n+</template>\n+\n+<script lang=\"ts\">\n+  import Vue from 'vue';\n+  import * as api from '@/util/api';\n+  import SubViewTitle from '@/components/ui/SubViewTitle.vue';\n+  import SubViewFooter from '@/components/ui/SubViewFooter.vue';\n+  import LargeButton from '@/components/ui/LargeButton.vue';\n+  import HelpIcon from '@/components/ui/HelpIcon.vue';\n+\n+  export default Vue.extend({\n+    components: {\n+      SubViewTitle,\n+      LargeButton,\n+      SubViewFooter,\n+      HelpIcon,\n+    },\n+    data() {\n+      return {\n+        distinguishedName: '',\n+        csrGenerated: false,\n+        generatingCsr: false,\n+      };\n+    },\n+    methods: {\n+      back(): void {\n+        this.$router.go(-1);\n+      },\n+      generateCsr(): void {\n+        this.generatingCsr = true;\n+        api\n+          .post('/system/certificate/csr', { name: this.distinguishedName }, { responseType: 'blob' })\n+          .then((res) => {\n+            const tempLink = document.createElement('a');", "originalCommit": "da8bd39eac45a0cb5e4f61ce507983e38f9e5918", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODc1MTAyMg==", "url": "https://github.com/nordic-institute/X-Road/pull/401#discussion_r388751022", "bodyText": "Yes, that would be better. Didn't find it when initially looking for a preexisting solution. Also modified the helper function a bit:\n\nMade it possible to pass the default file name\nAdded data-test attribute to generated link\nRemove generated link from DOM after clicking", "author": "raits", "createdAt": "2020-03-06T07:37:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODMyMjY3MQ=="}], "type": "inlineReview"}, {"oid": "1408ecbd02046bb17806659cad6e454331a3162c", "url": "https://github.com/nordic-institute/X-Road/commit/1408ecbd02046bb17806659cad6e454331a3162c", "message": "XRDDEV-835: changed to use the preexisting helper function", "committedDate": "2020-03-06T07:35:01Z", "type": "commit"}]}