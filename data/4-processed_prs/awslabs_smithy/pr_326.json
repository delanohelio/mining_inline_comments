{"pr_number": 326, "pr_title": "Make enum trait a list of structures", "pr_createdAt": "2020-03-26T20:27:15Z", "pr_url": "https://github.com/awslabs/smithy/pull/326", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNTIzMQ==", "url": "https://github.com/awslabs/smithy/pull/326#discussion_r398915231", "bodyText": "Since we're changing this anyway, we should add @length(min: 1)", "author": "JordonPhillips", "createdAt": "2020-03-26T21:52:40Z", "path": "smithy-model/src/main/resources/software/amazon/smithy/model/loader/prelude-traits.smithy", "diffHunk": "@@ -317,21 +320,25 @@ string title\n /// of constant values.\n @trait(selector: \"string\")\n @tags([\"diff.error.add\", \"diff.error.remove\"])\n-map enum {\n-    key: String,\n-    value: EnumConstantBody\n+list enum {\n+    member: EnumDefinition\n }\n \n /// An enum definition for the enum trait.\n @private\n-structure EnumConstantBody {\n+structure EnumDefinition {\n+    /// Defines the enum value that is sent over the wire.\n+    @required\n+    value: String,", "originalCommit": "bb9ebae84bc4239a5d06b855114b22dbb9ea25be", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODk1NjEzNg==", "url": "https://github.com/awslabs/smithy/pull/326#discussion_r398956136", "bodyText": "To be clear, I meant that the value shouldn't be an empty string, though the list for sure should not be empty either", "author": "JordonPhillips", "createdAt": "2020-03-26T23:42:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODkxNTIzMQ=="}], "type": "inlineReview"}, {"oid": "d60096d1dbdd973528bc8ffd143fd712cba09153", "url": "https://github.com/awslabs/smithy/commit/d60096d1dbdd973528bc8ffd143fd712cba09153", "message": "Make enum trait a list of structures\n\nThe enum trait is currently a map of enum value to the enum definition.\nThis means that models often look like this:\n\n```\n@enum(foo: {}, bar: {})\nstring MyString\n```\n\nIdeally, a name and documentation are provided too:\n\n```\n@enum(\n    foo: {name: \"FOO\", documentation: \"foo docs...\"},\n    bar: {name: \"BAR\", documentation: \"bar docs...\"})\n```\n\nHowever, the difference between the key and \"name\" has resulted in\nconfusion as to which is which. This is caused by a couple things:\n\n1. The key doesn't tell you what it defines. You have to know that the\nthe key defines the value of the enum to make sense of the trait.\n2. The key has to be quoted if it deviates from the allows ABNF for node\nobject keys. This has also led to confusion.\n\nAlthough this is a breaking change, using a list of structures where\neverything has a name will result in models that are easier to\nunderstand, and hopefully modelers will more often include properties\nlike `name` and `documentation`.", "committedDate": "2020-03-26T22:30:22Z", "type": "forcePushed"}, {"oid": "baaed3a7c6276c55635c531c936c0b4c23105cba", "url": "https://github.com/awslabs/smithy/commit/baaed3a7c6276c55635c531c936c0b4c23105cba", "message": "Make enum trait a list of structures\n\nThe enum trait is currently a map of enum value to the enum definition.\nThis means that models often look like this:\n\n```\n@enum(foo: {}, bar: {})\nstring MyString\n```\n\nIdeally, a name and documentation are provided too:\n\n```\n@enum(\n    foo: {name: \"FOO\", documentation: \"foo docs...\"},\n    bar: {name: \"BAR\", documentation: \"bar docs...\"})\n```\n\nHowever, the difference between the key and \"name\" has resulted in\nconfusion as to which is which. This is caused by a couple things:\n\n1. The key doesn't tell you what it defines. You have to know that the\nthe key defines the value of the enum to make sense of the trait.\n2. The key has to be quoted if it deviates from the allows ABNF for node\nobject keys. This has also led to confusion.\n\nAlthough this is a breaking change, using a list of structures where\neverything has a name will result in models that are easier to\nunderstand, and hopefully modelers will more often include properties\nlike `name` and `documentation`.", "committedDate": "2020-03-26T23:58:12Z", "type": "commit"}, {"oid": "baaed3a7c6276c55635c531c936c0b4c23105cba", "url": "https://github.com/awslabs/smithy/commit/baaed3a7c6276c55635c531c936c0b4c23105cba", "message": "Make enum trait a list of structures\n\nThe enum trait is currently a map of enum value to the enum definition.\nThis means that models often look like this:\n\n```\n@enum(foo: {}, bar: {})\nstring MyString\n```\n\nIdeally, a name and documentation are provided too:\n\n```\n@enum(\n    foo: {name: \"FOO\", documentation: \"foo docs...\"},\n    bar: {name: \"BAR\", documentation: \"bar docs...\"})\n```\n\nHowever, the difference between the key and \"name\" has resulted in\nconfusion as to which is which. This is caused by a couple things:\n\n1. The key doesn't tell you what it defines. You have to know that the\nthe key defines the value of the enum to make sense of the trait.\n2. The key has to be quoted if it deviates from the allows ABNF for node\nobject keys. This has also led to confusion.\n\nAlthough this is a breaking change, using a list of structures where\neverything has a name will result in models that are easier to\nunderstand, and hopefully modelers will more often include properties\nlike `name` and `documentation`.", "committedDate": "2020-03-26T23:58:12Z", "type": "forcePushed"}]}