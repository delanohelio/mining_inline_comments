{"pr_number": 583, "pr_title": "Add additional default CORS headers with config", "pr_createdAt": "2020-09-29T16:09:19Z", "pr_url": "https://github.com/awslabs/smithy/pull/583", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMzI3MQ==", "url": "https://github.com/awslabs/smithy/pull/583#discussion_r497023271", "bodyText": "I'd call this preflight requests and not integrations. We'll use this same configuration for HTTP APIs, and they don't require a preflight integration the same was as the REST APIs do.", "author": "mtdowling", "createdAt": "2020-09-29T20:26:47Z", "path": "docs/source/1.0/guides/converting-to-openapi.rst", "diffHunk": "@@ -691,6 +691,24 @@ disableCloudFormationSubstitution (``boolean``)\n     .. seealso:: :ref:`openapi-cfn-substitutions`\n \n \n+additionalAllowedCorsHeaders (``[string]``)\n+    Sets additional allowed CORS headers on the preflight integration. If this", "originalCommit": "f3e51a704689f9f3082e47d796b6a2c9ad456f38", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzA0ODc5OA==", "url": "https://github.com/awslabs/smithy/pull/583#discussion_r497048798", "bodyText": "Updated the docs.", "author": "srchase", "createdAt": "2020-09-29T20:54:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzAyMzI3MQ=="}], "type": "inlineReview"}, {"oid": "6a014d07f96044e84a190fdffae3cfb6acbe05d6", "url": "https://github.com/awslabs/smithy/commit/6a014d07f96044e84a190fdffae3cfb6acbe05d6", "message": "Add additional default CORS headers with config", "committedDate": "2020-09-29T20:54:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzEwMDE2OQ==", "url": "https://github.com/awslabs/smithy/pull/583#discussion_r497100169", "bodyText": "nit: headerNames.addAll(additionalAllowedHeaders)", "author": "mtdowling", "createdAt": "2020-09-29T22:36:39Z", "path": "smithy-aws-apigateway-openapi/src/main/java/software/amazon/smithy/aws/apigateway/openapi/AddCorsPreflightIntegration.java", "diffHunk": "@@ -112,6 +112,14 @@ private static PathItem addPreflightIntegration(\n         // add headers during the Smithy to OpenAPI conversion process will need to update this\n         // list of headers accordingly.\n         Set<String> headerNames = new TreeSet<>(corsTrait.getAdditionalAllowedHeaders());\n+\n+        // Sets additional allowed headers from the API Gateway config.\n+        List<String> additionalAllowedHeaders = context.getConfig().getExtensions(ApiGatewayConfig.class)\n+                .getAdditionalAllowedCorsHeaders();\n+        for (String header : additionalAllowedHeaders) {", "originalCommit": "6a014d07f96044e84a190fdffae3cfb6acbe05d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d1d54c179cfc4b16d2b087bcbc5193b5850fe9f7", "url": "https://github.com/awslabs/smithy/commit/d1d54c179cfc4b16d2b087bcbc5193b5850fe9f7", "message": "Add additional default CORS headers with config", "committedDate": "2020-09-29T22:42:04Z", "type": "commit"}, {"oid": "d1d54c179cfc4b16d2b087bcbc5193b5850fe9f7", "url": "https://github.com/awslabs/smithy/commit/d1d54c179cfc4b16d2b087bcbc5193b5850fe9f7", "message": "Add additional default CORS headers with config", "committedDate": "2020-09-29T22:42:04Z", "type": "forcePushed"}]}