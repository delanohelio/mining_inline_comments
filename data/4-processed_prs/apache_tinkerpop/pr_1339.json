{"pr_number": 1339, "pr_title": "TINKERPOP-2420 Per Request Options in .NET", "pr_createdAt": "2020-10-06T10:30:07Z", "pr_url": "https://github.com/apache/tinkerpop/pull/1339", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQxMDU5Nw==", "url": "https://github.com/apache/tinkerpop/pull/1339#discussion_r502410597", "bodyText": "(nitpick) allows to definition doesn't sound right to me (?)", "author": "FlorianHockmann", "createdAt": "2020-10-09T13:01:18Z", "path": "gremlin-dotnet/src/Gremlin.Net/Driver/Tokens.cs", "diffHunk": "@@ -74,24 +79,25 @@ public class Tokens\n         public static string ProcessorSession = \"session\";\n \n         /// <summary>\n-        ///     Argument name that allows to defines the number of iterations each ResponseMessage should contain - overrides the\n-        ///     resultIterationBatchSize server setting.\n+        ///     Argument name that allows to definition of the number of iterations each ResponseMessage should", "originalCommit": "4b85179fbbbedd78260224e394ae493f9fc1bb0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQyMDQyNA==", "url": "https://github.com/apache/tinkerpop/pull/1339#discussion_r502420424", "bodyText": "(nitpick) I think it's easier to read and understand this when the two asserts are separated:\nvar responseException = Assert.Throws<ResponseException>(() =>\n    g.With(\"y\").With(\"x\", \"test\").With(Tokens.ArgsEvalTimeout, 10).Inject(1)\n        .SideEffect(Lambda.Groovy(\"Thread.sleep(10000)\")).Iterate());\nAssert.Equal(ResponseStatusCode.ServerTimeout, responseException.StatusCode);", "author": "FlorianHockmann", "createdAt": "2020-10-09T13:17:55Z", "path": "gremlin-dotnet/test/Gremlin.Net.IntegrationTest/Process/Traversal/DriverRemoteConnection/GraphTraversalTests.cs", "diffHunk": "@@ -201,22 +204,21 @@ public void ShouldUseBindingsInTraversal()\n         [Fact]\n         public void ShouldUseOptionsInTraversal()\n         {\n-            // smoke test to validate serialization of OptionsStrategy. no way to really validate this from an integration\n-            // test perspective because there's no way to access the internals of the strategy via bytecode\n             var connection = _connectionFactory.CreateRemoteConnection();\n             var options = new Dictionary<string,object>\n             {\n                 {\"x\", \"test\"},\n                 {\"y\", true}\n             };\n             var g = AnonymousTraversalSource.Traversal().WithRemote(connection);\n-\n-            var b = new Bindings();\n+            \n             var countWithStrategy = g.WithStrategies(new OptionsStrategy(options)).V().Count().Next();\n             Assert.Equal(6, countWithStrategy);\n+            \n+            Assert.Equal(ResponseStatusCode.ServerTimeout, Assert.Throws<ResponseException>(() => ", "originalCommit": "4b85179fbbbedd78260224e394ae493f9fc1bb0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQyNTYwNw==", "url": "https://github.com/apache/tinkerpop/pull/1339#discussion_r502425607", "bodyText": "the using With() step -> using the With() step", "author": "FlorianHockmann", "createdAt": "2020-10-09T13:26:19Z", "path": "docs/src/reference/gremlin-variants.asciidoc", "diffHunk": "@@ -1121,6 +1121,18 @@ the remote end.\n include::../../../gremlin-dotnet/test/Gremlin.Net.IntegrationTest/Docs/Reference/GremlinVariantsTests.cs[tags=connecting]\n ----\n \n+Some connection options can also be set on individual requests made through the using `With()` step on the", "originalCommit": "4b85179fbbbedd78260224e394ae493f9fc1bb0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQzMDMyNQ==", "url": "https://github.com/apache/tinkerpop/pull/1339#discussion_r502430325", "bodyText": "I'm not sure about this but shouldn't we use a terminal step here to actually get the count(s)? Especially new users would probably expect here to have the count stored in the variable and not a traversal object.", "author": "FlorianHockmann", "createdAt": "2020-10-09T13:33:53Z", "path": "docs/src/reference/gremlin-variants.asciidoc", "diffHunk": "@@ -1121,6 +1121,18 @@ the remote end.\n include::../../../gremlin-dotnet/test/Gremlin.Net.IntegrationTest/Docs/Reference/GremlinVariantsTests.cs[tags=connecting]\n ----\n \n+Some connection options can also be set on individual requests made through the using `With()` step on the\n+`TraversalSource`. For instance to set request timeout to 500 milliseconds:\n+\n+[source,csharp]\n+----\n+var l = g.With(Tokens.ArgsEvalTimeout, 500).V().Out(\"knows\").Count();", "originalCommit": "4b85179fbbbedd78260224e394ae493f9fc1bb0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQzMTI0Mw==", "url": "https://github.com/apache/tinkerpop/pull/1339#discussion_r502431243", "bodyText": "(nitpick) Submit (to stay with the .NET naming conventions)", "author": "FlorianHockmann", "createdAt": "2020-10-09T13:35:17Z", "path": "docs/src/reference/gremlin-variants.asciidoc", "diffHunk": "@@ -1246,6 +1258,20 @@ var gremlinServer = new GremlinServer(\"localhost\", 8182);\n var client = new GremlinClient(gremlinServer, sessionId: Guid.NewGuid().ToString()))\n ----\n \n+==== Per Request Settings\n+\n+The `GremlinClient.submit()` functions accept an option to build a raw `RequestMessage`. A good use-case for this", "originalCommit": "4b85179fbbbedd78260224e394ae493f9fc1bb0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "ec5a4206a6e336d3df1f3d48c5f1db0ee5a96ae3", "url": "https://github.com/apache/tinkerpop/commit/ec5a4206a6e336d3df1f3d48c5f1db0ee5a96ae3", "message": "TINKERPOP-2420 Added with() support for request options in C#", "committedDate": "2020-10-09T16:55:38Z", "type": "commit"}, {"oid": "28456f50555ff024ba0face688a591f4772e973b", "url": "https://github.com/apache/tinkerpop/commit/28456f50555ff024ba0face688a591f4772e973b", "message": "TINKERPOP-2420 Added docs for request options to all GLVs", "committedDate": "2020-10-09T17:50:01Z", "type": "commit"}, {"oid": "28456f50555ff024ba0face688a591f4772e973b", "url": "https://github.com/apache/tinkerpop/commit/28456f50555ff024ba0face688a591f4772e973b", "message": "TINKERPOP-2420 Added docs for request options to all GLVs", "committedDate": "2020-10-09T17:50:01Z", "type": "forcePushed"}]}