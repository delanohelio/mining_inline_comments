{"pr_number": 804, "pr_title": "Fixes #785: fixes for DedupingIterator and UniqueTransform,", "pr_createdAt": "2020-04-10T19:26:11Z", "pr_url": "https://github.com/NationalSecurityAgency/datawave/pull/804", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEwODI3Mw==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/804#discussion_r408108273", "bodyText": "I think this should default to false", "author": "apmoriarty", "createdAt": "2020-04-14T12:48:02Z", "path": "web-services/query/src/main/java/datawave/webservice/query/configuration/GenericQueryConfiguration.java", "diffHunk": "@@ -47,6 +47,8 @@\n     \n     protected boolean bypassAccumulo;\n     \n+    protected boolean iteratorDebug = true;", "originalCommit": "fa97d77926d8dd44c3ce7ca86282fb5de938c8ca", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDQ5NjcyMA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/804#discussion_r410496720", "bodyText": "I'm cool with defaulting to false, if there are no objections. But I'm curious to get your thoughts on DedupingIterator's DEBUG behavior in general.\nThe reason for defaulting to true was so that the existing behavior of DedupingIterator would be retained (assuming that's what we wanted), and to avoid the need for QLF.xml changes for defaulting to true there\nAnd this new config setting was just to have a way of disabling it...mainly to prevent the This event is 1 in 1Q! error, which is something you're likely to run into on DW clusters that allow more than 500K results to be returned for a given query\nSo, if we default to false, I guess the question is, do we want to enable by default in QLF.xml or leave it disabled? If we leave it disabled, then perhaps the better question is, should we consider just getting rid of the DEBUG path inside DedupingIterator altogether and also this new config setting? That's the strategy I took with UniqueTransform in this PR, for the simple fact that the true path was never used and there was no way to enable it.\nIf this is something that will rarely be enabled in the future, then I think I'd much prefer to remove the debug behavior, and avoid adding yet another config setting.\n(Or, maybe my assumption about UniqueTransform was bad, and I should restore debug beahvior and provide a way to configure that class as well??)\nThoughts?", "author": "keith-ratcliffe", "createdAt": "2020-04-17T22:19:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEwODI3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODEwOTM2NQ==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/804#discussion_r408109365", "bodyText": "I think this should also expect a false-by-default value.", "author": "apmoriarty", "createdAt": "2020-04-14T12:49:43Z", "path": "web-services/query/src/test/java/datawave/webservice/query/configuration/TestBaseQueryLogic.java", "diffHunk": "@@ -54,6 +54,7 @@ public void testConstructor_Copy() throws Exception {\n         expect(this.copy.getRoleManager()).andReturn(roleManager);\n         expect(this.copy.getSelectorExtractor()).andReturn(null);\n         expect(this.copy.getBypassAccumulo()).andReturn(false);\n+        expect(this.copy.getIteratorDebug()).andReturn(true);", "originalCommit": "fa97d77926d8dd44c3ce7ca86282fb5de938c8ca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c6d738cbc2955c0f627c286ee9d2bba5292ab538", "url": "https://github.com/NationalSecurityAgency/datawave/commit/c6d738cbc2955c0f627c286ee9d2bba5292ab538", "message": "Fixes #785: Code cleaned up and Junit added for DedupingIterator", "committedDate": "2020-04-21T14:39:48Z", "type": "commit"}, {"oid": "c6d738cbc2955c0f627c286ee9d2bba5292ab538", "url": "https://github.com/NationalSecurityAgency/datawave/commit/c6d738cbc2955c0f627c286ee9d2bba5292ab538", "message": "Fixes #785: Code cleaned up and Junit added for DedupingIterator", "committedDate": "2020-04-21T14:39:48Z", "type": "forcePushed"}, {"oid": "c6d738cbc2955c0f627c286ee9d2bba5292ab538", "url": "https://github.com/NationalSecurityAgency/datawave/commit/c6d738cbc2955c0f627c286ee9d2bba5292ab538", "message": "Fixes #785: Code cleaned up and Junit added for DedupingIterator", "committedDate": "2020-04-21T14:39:48Z", "type": "forcePushed"}, {"oid": "81cb5e5e004c7c9936bafcf2ba1ff6fcc44c7895", "url": "https://github.com/NationalSecurityAgency/datawave/commit/81cb5e5e004c7c9936bafcf2ba1ff6fcc44c7895", "message": "Merge branch 'release/version2.8' into bugfix/issue-785", "committedDate": "2020-04-22T20:38:47Z", "type": "commit"}, {"oid": "21696b634be49c23832b8eb89d873f1921c206aa", "url": "https://github.com/NationalSecurityAgency/datawave/commit/21696b634be49c23832b8eb89d873f1921c206aa", "message": "Merge branch 'release/version2.8' into bugfix/issue-785", "committedDate": "2020-05-29T12:56:05Z", "type": "commit"}, {"oid": "81badf82634e89e4ca5dae86c70e2cdb2151e37d", "url": "https://github.com/NationalSecurityAgency/datawave/commit/81badf82634e89e4ca5dae86c70e2cdb2151e37d", "message": "Merge branch 'release/version2.8' into bugfix/issue-785", "committedDate": "2020-07-29T18:44:34Z", "type": "commit"}]}