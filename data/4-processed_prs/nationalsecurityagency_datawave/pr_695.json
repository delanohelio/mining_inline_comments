{"pr_number": 695, "pr_title": "Accumulo 2 API Updates", "pr_createdAt": "2020-01-02T20:01:21Z", "pr_url": "https://github.com/NationalSecurityAgency/datawave/pull/695", "timeline": [{"oid": "1f3ffa79bc37085e50faa56dcbe39999923fea1e", "url": "https://github.com/NationalSecurityAgency/datawave/commit/1f3ffa79bc37085e50faa56dcbe39999923fea1e", "message": "Remove refs to accumulo Connector.", "committedDate": "2020-01-02T19:41:33Z", "type": "commit"}, {"oid": "044a388c53c1a6706f35a9a5b0cbda3c44e57522", "url": "https://github.com/NationalSecurityAgency/datawave/commit/044a388c53c1a6706f35a9a5b0cbda3c44e57522", "message": "Fix more Connector uses, and switch to new AccumuloInputFormat.", "committedDate": "2020-01-02T19:42:39Z", "type": "commit"}, {"oid": "3892a37280d98f3ee1aa7186805b5cb1c443321b", "url": "https://github.com/NationalSecurityAgency/datawave/commit/3892a37280d98f3ee1aa7186805b5cb1c443321b", "message": "Replace trace/span with htrace.", "committedDate": "2020-01-02T19:42:39Z", "type": "commit"}, {"oid": "4c59bd91a9f3eb73074e7f096918ba517189b67b", "url": "https://github.com/NationalSecurityAgency/datawave/commit/4c59bd91a9f3eb73074e7f096918ba517189b67b", "message": "Put back config that was incorrectly commented out.", "committedDate": "2020-01-02T20:52:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYxODE2Ng==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362618166", "bodyText": "Lets get @keith-ratcliffe to look at this one", "author": "ivakegg", "createdAt": "2020-01-02T20:28:12Z", "path": "warehouse/ingest-core/src/test/resources/datawave/ingest/mapreduce/job/IngestJob-test-type.xml", "diffHunk": "@@ -19,7 +19,7 @@\n   <value>ingest-test</value>\n   <description>This is the type of data being ingested.</description>\n </property>\n-\n+<!--", "originalCommit": "3892a37280d98f3ee1aa7186805b5cb1c443321b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYyNzU3Nw==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362627577", "bodyText": "Turns out this was un-necessary. Must have been something else broken while I was in the middle of making changes. I've removed this change.", "author": "brianloss", "createdAt": "2020-01-02T20:59:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYxODE2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYxOTUwMQ==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362619501", "bodyText": "lets move this version at least into the dependency configuration at the top level", "author": "ivakegg", "createdAt": "2020-01-02T20:32:45Z", "path": "warehouse/ops-tools/config-compare/pom.xml", "diffHunk": "@@ -12,6 +12,12 @@\n             <groupId>com.google.guava</groupId>\n             <artifactId>guava</artifactId>\n         </dependency>\n+        <!-- This is normally included via hadoop-common, but we have everything excluded in the warehouse parent. -->\n+        <dependency>\n+            <groupId>commons-collections</groupId>\n+            <artifactId>commons-collections</artifactId>\n+            <version>3.2.2</version>", "originalCommit": "3892a37280d98f3ee1aa7186805b5cb1c443321b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYyODUxNA==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362628514", "bodyText": "Fixed in latest commit.", "author": "brianloss", "createdAt": "2020-01-02T21:02:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYxOTUwMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYyMTUyNg==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362621526", "bodyText": "connection", "author": "ivakegg", "createdAt": "2020-01-02T20:39:23Z", "path": "warehouse/query-core/src/main/java/datawave/query/util/DateIndexHelper.java", "diffHunk": "@@ -131,44 +129,31 @@ public static DateIndexHelper getInstance() {\n         return new DateIndexHelper();\n     }\n     \n-    /**\n-     * Create and instance of a date index helper\n-     * \n-     * @param connector\n-     * @param dateIndexTableName\n-     * @param auths\n-     * @return the date index helper\n-     */\n-    public DateIndexHelper initialize(Connector connector, String dateIndexTableName, Set<Authorizations> auths, int numQueryThreads,\n-                    float collapseDatePercentThreshold) {\n-        if (dateIndexTableName != null && !dateIndexTableName.isEmpty()) {\n-            return initialize(connector, connector.getInstance(), dateIndexTableName, auths, numQueryThreads, collapseDatePercentThreshold);\n-        }\n-        log.warn(\"Attempting to create a date index helper however the date index table name is empty\");\n-        return null;\n-    }\n-    \n     /**\n      * Initializes the instance with a provided update interval.\n      * \n-     * @param connector\n-     *            A Connector to Accumulo\n+     * @param client\n+     *            A client connectoin to Accumulo", "originalCommit": "3892a37280d98f3ee1aa7186805b5cb1c443321b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYyODU0NQ==", "url": "https://github.com/NationalSecurityAgency/datawave/pull/695#discussion_r362628545", "bodyText": "Fixed in latest commit.", "author": "brianloss", "createdAt": "2020-01-02T21:02:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjYyMTUyNg=="}], "type": "inlineReview"}, {"oid": "1b4d1aee4708e099e4558493efaa3627bbfd9e8a", "url": "https://github.com/NationalSecurityAgency/datawave/commit/1b4d1aee4708e099e4558493efaa3627bbfd9e8a", "message": "PR feedback", "committedDate": "2020-01-02T21:01:55Z", "type": "commit"}]}