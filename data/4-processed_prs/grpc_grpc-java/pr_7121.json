{"pr_number": 7121, "pr_title": "xds: fix build.gradle for shadowing googleapis", "pr_createdAt": "2020-06-12T01:08:36Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7121", "timeline": [{"oid": "f1e09d6e04b204ac05bebc564c6265b4fc859bed", "url": "https://github.com/grpc/grpc-java/commit/f1e09d6e04b204ac05bebc564c6265b4fc859bed", "message": "Added RBAC envoy dependencies", "committedDate": "2020-06-09T23:02:05Z", "type": "commit"}, {"oid": "fa73eae32e31a74859a1cdb1b0d4114c348f7a74", "url": "https://github.com/grpc/grpc-java/commit/fa73eae32e31a74859a1cdb1b0d4114c348f7a74", "message": "Added GoogleAPIs dependencies", "committedDate": "2020-06-10T00:11:58Z", "type": "commit"}, {"oid": "66f38b555fd2f2900a8b13768ffd322c754a13fb", "url": "https://github.com/grpc/grpc-java/commit/66f38b555fd2f2900a8b13768ffd322c754a13fb", "message": "Added GoogleAPIs VERSION number", "committedDate": "2020-06-10T01:00:27Z", "type": "commit"}, {"oid": "1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "url": "https://github.com/grpc/grpc-java/commit/1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "message": "Review comments #1", "committedDate": "2020-06-11T00:43:07Z", "type": "commit"}, {"oid": "3a0ee7be93ca66bb2b6763905e0a6586b448432d", "url": "https://github.com/grpc/grpc-java/commit/3a0ee7be93ca66bb2b6763905e0a6586b448432d", "message": "Added shade googleapis", "committedDate": "2020-06-11T01:09:05Z", "type": "commit"}, {"oid": "5d8a57d72685b984be659b311226fc08979b845c", "url": "https://github.com/grpc/grpc-java/commit/5d8a57d72685b984be659b311226fc08979b845c", "message": "Merge branch 'master' into Cindy/RBACImport", "committedDate": "2020-06-11T01:15:18Z", "type": "commit"}, {"oid": "f7d191b9ea470562b4240f1548bfdf7c7e96648d", "url": "https://github.com/grpc/grpc-java/commit/f7d191b9ea470562b4240f1548bfdf7c7e96648d", "message": "Removed submodule", "committedDate": "2020-06-11T18:28:52Z", "type": "commit"}, {"oid": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "url": "https://github.com/grpc/grpc-java/commit/7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "message": "Merge branch 'Cindy/RBACImport' of https://github.com/cindyxue/grpc-java into Cindy/RBACImport", "committedDate": "2020-06-11T18:33:44Z", "type": "commit"}, {"oid": "985934a9197d3379b888013702b6942e2dc618ac", "url": "https://github.com/grpc/grpc-java/commit/985934a9197d3379b888013702b6942e2dc618ac", "message": "Review comments #2", "committedDate": "2020-06-11T20:59:17Z", "type": "commit"}, {"oid": "c4c9c2a6ce96b5ab6ba68eef979733fc75b9b90d", "url": "https://github.com/grpc/grpc-java/commit/c4c9c2a6ce96b5ab6ba68eef979733fc75b9b90d", "message": "Review comments #3", "committedDate": "2020-06-11T21:29:28Z", "type": "commit"}, {"oid": "36791e2b4ff1ad7a89fe6c2a1dc102eaa9e5483c", "url": "https://github.com/grpc/grpc-java/commit/36791e2b4ff1ad7a89fe6c2a1dc102eaa9e5483c", "message": "Fixed googleapis shadow", "committedDate": "2020-06-12T01:05:39Z", "type": "commit"}, {"oid": "5df991dc2af97e6f704c15b632786483d3263faf", "url": "https://github.com/grpc/grpc-java/commit/5df991dc2af97e6f704c15b632786483d3263faf", "message": "Merge branch 'master' into Cindy/RBACImport", "committedDate": "2020-06-12T01:09:15Z", "type": "commit"}, {"oid": "345737f730b0bde7e669b5c9b2f3249b355dd850", "url": "https://github.com/grpc/grpc-java/commit/345737f730b0bde7e669b5c9b2f3249b355dd850", "message": "Exclude googleapis in the test coverage report", "committedDate": "2020-06-12T16:12:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyOTEyNg==", "url": "https://github.com/grpc/grpc-java/pull/7121#discussion_r439529126", "bodyText": "Can not relocate com.google.api. There are some generated code like CdsProto.java referencing com.google.api.AnnotationsProto.", "author": "dapengzhang0", "createdAt": "2020-06-12T16:42:20Z", "path": "xds/build.gradle", "diffHunk": "@@ -89,7 +89,7 @@ shadowJar {\n     dependencies {\n         include(project(':grpc-xds'))\n     }\n-    relocate 'com.github.googleapis', 'io.grpc.xds.shaded.com.github.googleapis'\n+    relocate 'com.google.api', 'io.grpc.xds.shaded.com.google.api'", "originalCommit": "345737f730b0bde7e669b5c9b2f3249b355dd850", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0NzQ4MQ==", "url": "https://github.com/grpc/grpc-java/pull/7121#discussion_r439547481", "bodyText": "I did shadow wrong for com.google.api previously, because I wasn't able to import classes from googleapis.\nIt should be relocate 'com.google.api', 'io.grpc.xds.shaded.com.google.api' instead of relocate 'com.github.googleapis', 'io.grpc.xds.shaded.com.github.googleapis'\nI have verified that importing from googleapis works now.", "author": "cindyxue", "createdAt": "2020-06-12T17:19:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyOTEyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1NjMxOA==", "url": "https://github.com/grpc/grpc-java/pull/7121#discussion_r439556318", "bodyText": "You might have to relocate com.google.api.expr rather than com.google.api.", "author": "dapengzhang0", "createdAt": "2020-06-12T17:38:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyOTEyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU1NjgxOQ==", "url": "https://github.com/grpc/grpc-java/pull/7121#discussion_r439556819", "bodyText": "Ok, I'll do that. Thanks for the clarification!", "author": "cindyxue", "createdAt": "2020-06-12T17:39:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTUyOTEyNg=="}], "type": "inlineReview"}, {"oid": "d0f10ac42ca7209e9b6aff2a8554fc097937a41f", "url": "https://github.com/grpc/grpc-java/commit/d0f10ac42ca7209e9b6aff2a8554fc097937a41f", "message": "Relocated com.google.api.expr", "committedDate": "2020-06-12T17:41:47Z", "type": "commit"}]}