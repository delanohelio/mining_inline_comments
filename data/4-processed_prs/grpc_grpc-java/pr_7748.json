{"pr_number": 7748, "pr_title": "all: ChannelCredentials.withoutBearerTokens() and LoadBalancer.Helper API change", "pr_createdAt": "2020-12-22T18:57:55Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7748", "timeline": [{"oid": "72e6c3623042327df0a0366d713c3c200b07daf9", "url": "https://github.com/grpc/grpc-java/commit/72e6c3623042327df0a0366d713c3c200b07daf9", "message": "all: ChannelCredentials.withoutBearerTokens() and LoadBalancer.Helper.createResolvingOobChannelBuilder()", "committedDate": "2020-12-22T18:56:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1MDQ2Ng==", "url": "https://github.com/grpc/grpc-java/pull/7748#discussion_r547450466", "bodyText": "Should we just return channelCredentials  here?", "author": "dapengzhang0", "createdAt": "2020-12-22T18:58:54Z", "path": "api/src/main/java/io/grpc/CompositeChannelCredentials.java", "diffHunk": "@@ -46,4 +46,9 @@ public ChannelCredentials getChannelCredentials() {\n   public CallCredentials getCallCredentials() {\n     return callCredentials;\n   }\n+\n+  @Override\n+  public ChannelCredentials withoutBearerTokens() {\n+    return channelCredentials.withoutBearerTokens();", "originalCommit": "72e6c3623042327df0a0366d713c3c200b07daf9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1NDA1MQ==", "url": "https://github.com/grpc/grpc-java/pull/7748#discussion_r547454051", "bodyText": "CallCredentials will need to be removed recursively so this is correct. Note the channelCredentials here itself could be CompositeChannelCredentials.", "author": "sanjaypujare", "createdAt": "2020-12-22T19:07:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzQ1MDQ2Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1MTIxOA==", "url": "https://github.com/grpc/grpc-java/pull/7748#discussion_r547551218", "bodyText": "s/off/of/", "author": "ejona86", "createdAt": "2020-12-22T23:13:22Z", "path": "api/src/main/java/io/grpc/ChannelCredentials.java", "diffHunk": "@@ -35,4 +35,14 @@\n  * {@code ChoiceChannelCredentials}!).\n  */\n @ExperimentalApi(\"https://github.com/grpc/grpc-java/issues/7479\")\n-public abstract class ChannelCredentials {}\n+public abstract class ChannelCredentials {\n+  /**\n+   * Returns the ChannelCredentials stripped off its CallCredentials. In the future,", "originalCommit": "72e6c3623042327df0a0366d713c3c200b07daf9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzU1MjQ5MQ==", "url": "https://github.com/grpc/grpc-java/pull/7748#discussion_r547552491", "bodyText": "Feel free to implement this now via getUnsafeChannelCredentials().withoutBearerTokens()", "author": "ejona86", "createdAt": "2020-12-22T23:16:54Z", "path": "api/src/main/java/io/grpc/LoadBalancer.java", "diffHunk": "@@ -1157,6 +1175,26 @@ public ScheduledExecutorService getScheduledExecutorService() {\n      */\n     public abstract String getAuthority();\n \n+    /**\n+     * Returns the ChannelCredentials used to construct the channel, without bearer tokens.\n+     *\n+     * @since 1.35.0\n+     */\n+    public ChannelCredentials getChannelCredentials() {\n+      throw new UnsupportedOperationException();", "originalCommit": "72e6c3623042327df0a0366d713c3c200b07daf9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f1255fc6b1172c6f7a5990875e26f17678c5d253", "url": "https://github.com/grpc/grpc-java/commit/f1255fc6b1172c6f7a5990875e26f17678c5d253", "message": "fix typo", "committedDate": "2020-12-23T02:20:19Z", "type": "commit"}, {"oid": "65d2ff5ef3c42d7a37283de362fd6141f76a9006", "url": "https://github.com/grpc/grpc-java/commit/65d2ff5ef3c42d7a37283de362fd6141f76a9006", "message": "default Helper.getChannelCredentials() implementation", "committedDate": "2020-12-23T02:21:29Z", "type": "commit"}]}