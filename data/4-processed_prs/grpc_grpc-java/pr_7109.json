{"pr_number": 7109, "pr_title": "xds: import rbac.proto from Envoy's repository", "pr_createdAt": "2020-06-10T00:39:30Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7109", "timeline": [{"oid": "f1e09d6e04b204ac05bebc564c6265b4fc859bed", "url": "https://github.com/grpc/grpc-java/commit/f1e09d6e04b204ac05bebc564c6265b4fc859bed", "message": "Added RBAC envoy dependencies", "committedDate": "2020-06-09T23:02:05Z", "type": "commit"}, {"oid": "fa73eae32e31a74859a1cdb1b0d4114c348f7a74", "url": "https://github.com/grpc/grpc-java/commit/fa73eae32e31a74859a1cdb1b0d4114c348f7a74", "message": "Added GoogleAPIs dependencies", "committedDate": "2020-06-10T00:11:58Z", "type": "commit"}, {"oid": "66f38b555fd2f2900a8b13768ffd322c754a13fb", "url": "https://github.com/grpc/grpc-java/commit/66f38b555fd2f2900a8b13768ffd322c754a13fb", "message": "Added GoogleAPIs VERSION number", "committedDate": "2020-06-10T01:00:27Z", "type": "commit"}, {"oid": "1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "url": "https://github.com/grpc/grpc-java/commit/1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "message": "Review comments #1", "committedDate": "2020-06-11T00:43:07Z", "type": "commit"}, {"oid": "1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "url": "https://github.com/grpc/grpc-java/commit/1f9d05ca1c2a436e3cc9ee7517cd8e6d2877eb2e", "message": "Review comments #1", "committedDate": "2020-06-11T00:43:07Z", "type": "forcePushed"}, {"oid": "3a0ee7be93ca66bb2b6763905e0a6586b448432d", "url": "https://github.com/grpc/grpc-java/commit/3a0ee7be93ca66bb2b6763905e0a6586b448432d", "message": "Added shade googleapis", "committedDate": "2020-06-11T01:09:05Z", "type": "commit"}, {"oid": "5d8a57d72685b984be659b311226fc08979b845c", "url": "https://github.com/grpc/grpc-java/commit/5d8a57d72685b984be659b311226fc08979b845c", "message": "Merge branch 'master' into Cindy/RBACImport", "committedDate": "2020-06-11T01:15:18Z", "type": "commit"}, {"oid": "f7d191b9ea470562b4240f1548bfdf7c7e96648d", "url": "https://github.com/grpc/grpc-java/commit/f7d191b9ea470562b4240f1548bfdf7c7e96648d", "message": "Removed submodule", "committedDate": "2020-06-11T18:28:52Z", "type": "commit"}, {"oid": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "url": "https://github.com/grpc/grpc-java/commit/7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "message": "Merge branch 'Cindy/RBACImport' of https://github.com/cindyxue/grpc-java into Cindy/RBACImport", "committedDate": "2020-06-11T18:33:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTI0OA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439011248", "bodyText": "Did you deleted the newline at the end of the file?", "author": "voidzcy", "createdAt": "2020-06-11T19:12:23Z", "path": "xds/third_party/envoy/import.sh", "diffHunk": "@@ -135,4 +140,4 @@ do\n done\n popd\n \n-popd\n+popd", "originalCommit": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA0Njk0MA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439046940", "bodyText": "Oops, my bad. I'll change it back!", "author": "cindyxue", "createdAt": "2020-06-11T20:18:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTI0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTQ1NQ==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439011455", "bodyText": "New line at the end of the file.", "author": "voidzcy", "createdAt": "2020-06-11T19:12:47Z", "path": "xds/third_party/googleapis/import.sh", "diffHunk": "@@ -0,0 +1,56 @@\n+#!/bin/bash\n+# Copyright 2018 The gRPC Authors\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Update VERSION then in this directory run ./import.sh\n+\n+set -e\n+BRANCH=master\n+VERSION=ca1372c6d7bcb199638ebfdb40d2b2660bab7b88\n+GIT_REPO=\"https://github.com/googleapis/googleapis.git\"\n+GIT_BASE_DIR=googleapis\n+SOURCE_PROTO_BASE_DIR=googleapis\n+TARGET_PROTO_BASE_DIR=src/main/proto\n+FILES=(\n+google/api/expr/v1alpha1/syntax.proto\n+)\n+\n+pushd `git rev-parse --show-toplevel`/xds/third_party/googleapis\n+\n+# clone the envoy github repo in a tmp directory\n+tmpdir=\"$(mktemp -d)\"\n+trap \"rm -rf ${tmpdir}\" EXIT\n+\n+pushd \"${tmpdir}\"\n+git clone -b $BRANCH $GIT_REPO\n+trap \"rm -rf $GIT_BASE_DIR\" EXIT\n+cd \"$GIT_BASE_DIR\"\n+git checkout $VERSION\n+popd\n+\n+cp -p \"${tmpdir}/${GIT_BASE_DIR}/LICENSE\" LICENSE\n+\n+rm -rf \"${TARGET_PROTO_BASE_DIR}\"\n+mkdir -p \"${TARGET_PROTO_BASE_DIR}\"\n+pushd \"${TARGET_PROTO_BASE_DIR}\"\n+\n+# copy proto files to project directory\n+for file in \"${FILES[@]}\"\n+do\n+  mkdir -p \"$(dirname \"${file}\")\"\n+  cp -p \"${tmpdir}/${SOURCE_PROTO_BASE_DIR}/${file}\" \"${file}\"\n+done\n+popd\n+\n+popd", "originalCommit": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA0NzA2Nw==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439047067", "bodyText": "Ok!", "author": "cindyxue", "createdAt": "2020-06-11T20:18:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTQ1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTY2MQ==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439011661", "bodyText": "2020", "author": "voidzcy", "createdAt": "2020-06-11T19:13:12Z", "path": "xds/third_party/googleapis/import.sh", "diffHunk": "@@ -0,0 +1,56 @@\n+#!/bin/bash\n+# Copyright 2018 The gRPC Authors", "originalCommit": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA0NzE1Nw==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439047157", "bodyText": "Thanks for the catch!", "author": "cindyxue", "createdAt": "2020-06-11T20:18:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAxMTY2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyNDIwNw==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439024207", "bodyText": "@voidzcy Shall we keep the alphabetical order of this?", "author": "ZhenLian", "createdAt": "2020-06-11T19:37:41Z", "path": "xds/build.gradle", "diffHunk": "@@ -66,6 +66,7 @@ sourceSets {\n             srcDir 'third_party/envoy/src/main/proto'\n             srcDir 'third_party/protoc-gen-validate/src/main/proto'\n             srcDir 'third_party/udpa/src/main/proto'\n+            srcDir 'third_party/googleapis/src/main/proto'", "originalCommit": "7fc8ff5b31815332cf6879ddb916d7096b97dbeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAzNjk4OA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439036988", "bodyText": "Doesn't matter, whatever..", "author": "voidzcy", "createdAt": "2020-06-11T20:04:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyNDIwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA2ODE3Nw==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439068177", "bodyText": "OK, SG!", "author": "ZhenLian", "createdAt": "2020-06-11T21:00:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTAyNDIwNw=="}], "type": "inlineReview"}, {"oid": "985934a9197d3379b888013702b6942e2dc618ac", "url": "https://github.com/grpc/grpc-java/commit/985934a9197d3379b888013702b6942e2dc618ac", "message": "Review comments #2", "committedDate": "2020-06-11T20:59:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3Mzc4OA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439073788", "bodyText": "nit: s/envoy/googleapis", "author": "ZhenLian", "createdAt": "2020-06-11T21:13:27Z", "path": "xds/third_party/googleapis/import.sh", "diffHunk": "@@ -0,0 +1,56 @@\n+#!/bin/bash\n+# Copyright 2020 The gRPC Authors\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+#     http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+\n+# Update VERSION then in this directory run ./import.sh\n+\n+set -e\n+BRANCH=master\n+VERSION=ca1372c6d7bcb199638ebfdb40d2b2660bab7b88\n+GIT_REPO=\"https://github.com/googleapis/googleapis.git\"\n+GIT_BASE_DIR=googleapis\n+SOURCE_PROTO_BASE_DIR=googleapis\n+TARGET_PROTO_BASE_DIR=src/main/proto\n+FILES=(\n+google/api/expr/v1alpha1/syntax.proto\n+)\n+\n+pushd `git rev-parse --show-toplevel`/xds/third_party/googleapis\n+\n+# clone the envoy github repo in a tmp directory", "originalCommit": "985934a9197d3379b888013702b6942e2dc618ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3NzQwMA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439077400", "bodyText": "Do you mean I need to change # clone the envoy github repo in a tmp directory to # clone the s/envoy/googleapis github repo in a tmp directory here?", "author": "cindyxue", "createdAt": "2020-06-11T21:22:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3Mzc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3OTM5Nw==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439079397", "bodyText": "I meant to replace \"envoy\" with \"googleapis\" since this is cloning the googleapis repo.\n# clone the googleapis github repo in a tmp directory should be fine.", "author": "ZhenLian", "createdAt": "2020-06-11T21:26:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3Mzc4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA4MDAzMA==", "url": "https://github.com/grpc/grpc-java/pull/7109#discussion_r439080030", "bodyText": "Got it! Thanks for the clarification :)", "author": "cindyxue", "createdAt": "2020-06-11T21:28:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3Mzc4OA=="}], "type": "inlineReview"}, {"oid": "c4c9c2a6ce96b5ab6ba68eef979733fc75b9b90d", "url": "https://github.com/grpc/grpc-java/commit/c4c9c2a6ce96b5ab6ba68eef979733fc75b9b90d", "message": "Review comments #3", "committedDate": "2020-06-11T21:29:28Z", "type": "commit"}]}