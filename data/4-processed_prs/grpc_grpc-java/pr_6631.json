{"pr_number": 6631, "pr_title": "examples: Add XDS client example", "pr_createdAt": "2020-01-22T22:20:03Z", "pr_url": "https://github.com/grpc/grpc-java/pull/6631", "timeline": [{"oid": "f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "url": "https://github.com/grpc/grpc-java/commit/f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "message": "examples: Add XDS client example", "committedDate": "2020-01-23T21:14:58Z", "type": "commit"}, {"oid": "f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "url": "https://github.com/grpc/grpc-java/commit/f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "message": "examples: Add XDS client example", "committedDate": "2020-01-23T21:14:58Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQwOTAwNA==", "url": "https://github.com/grpc/grpc-java/pull/6631#discussion_r370409004", "bodyText": "Release tag may not work until grpc-xds is published to maven.", "author": "dapengzhang0", "createdAt": "2020-01-23T23:29:18Z", "path": "examples/example-xds/README.md", "diffHunk": "@@ -0,0 +1,53 @@\n+gRPC XDS Example\n+================\n+\n+The XDS example is a Hello World client capable of being configured with the\n+XDS management protocol. Out-of-the-box it behaves the same as hello world\n+client.\n+\n+__XDS support is incomplete and experimental, with limited compatibility. It\n+will be very hard to produce a working enviornment just by this example. Please\n+refer to documentation specific for your XDS management server and\n+environment.__\n+\n+The example requires grpc-java to already be built. You are strongly encouraged\n+to check out a git release tag, since there will already be a build of grpc", "originalCommit": "f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQxMjcxOA==", "url": "https://github.com/grpc/grpc-java/pull/6631#discussion_r370412718", "bodyText": "There is no example of bootstrap. How about referencing grpc/proposal#170 and in particular https://github.com/grpc/proposal/pull/170/files#diff-05ea4a5894abbc0261b006741220598cR100 when it's merged?", "author": "dapengzhang0", "createdAt": "2020-01-23T23:42:40Z", "path": "examples/example-xds/README.md", "diffHunk": "@@ -0,0 +1,53 @@\n+gRPC XDS Example\n+================\n+\n+The XDS example is a Hello World client capable of being configured with the\n+XDS management protocol. Out-of-the-box it behaves the same as hello world\n+client.\n+\n+__XDS support is incomplete and experimental, with limited compatibility. It\n+will be very hard to produce a working enviornment just by this example. Please\n+refer to documentation specific for your XDS management server and\n+environment.__\n+\n+The example requires grpc-java to already be built. You are strongly encouraged\n+to check out a git release tag, since there will already be a build of grpc\n+available. Otherwise you must follow [COMPILING](../../COMPILING.md).\n+\n+### Build the example\n+\n+1. Build the hello-world example server or the hostname example server. See\n+   [the examples README](../README.md) or the\n+   [hostname example README](../example-hostname/README.md).\n+\n+2. Build this client. From the `grpc-java/examples/examples-xds` directory:\n+```\n+$ ../gradlew installDist\n+```\n+\n+This creates the script `build/install/example-xds/bin/xds-hello-world-client`\n+that runs the example.\n+\n+To start the server, run:\n+\n+```\n+$ ../build/install/hostname/bin/hello-world-server\n+$ # or\n+$ ../example-hostname/build/install/hostname/bin/hostname-server\n+```\n+\n+And in a different terminal window run this client:\n+\n+```\n+$ ./build/install/example-xds/bin/xds-hello-world-client\n+```\n+\n+However, that didn't use XDS! To use XDS we assume you have deployed the server\n+in your deployment environment and know its name. You need to set the\n+`GRPC_XDS_BOOTSTRAP` environment variable to point to a gRPC XDS bootstrap", "originalCommit": "f19538136b47e53b99c0c26ef4369b66c5dbd9eb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "42b84c8156f25071116508c251a4447614dcdf2c", "url": "https://github.com/grpc/grpc-java/commit/42b84c8156f25071116508c251a4447614dcdf2c", "message": "Rework readme to explain how to build xds from source", "committedDate": "2020-01-29T19:52:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjYwOTg0MA==", "url": "https://github.com/grpc/grpc-java/pull/6631#discussion_r372609840", "bodyText": "This number and below will be changed after every release. Add a line of instruction at https://github.com/grpc/grpc-java/pull/6631/files#diff-60cd2f42437b5cb3c2c09391a6f4c54aR125 ?", "author": "dapengzhang0", "createdAt": "2020-01-29T20:20:23Z", "path": "examples/example-xds/README.md", "diffHunk": "@@ -10,19 +10,43 @@ will be very hard to produce a working enviornment just by this example. Please\n refer to documentation specific for your XDS management server and\n environment.__\n \n-The example requires grpc-java to already be built. You are strongly encouraged\n-to check out a git release tag, since there will already be a build of grpc\n-available. Otherwise you must follow [COMPILING](../../COMPILING.md).\n+The example requires grpc-xds, but grpc-xds is not currently being published.\n+You will thus need to build it yourself. This should guide you, but if you\n+encounter issues please consult [COMPILING.md](../../COMPILING.md).\n \n ### Build the example\n \n-1. Build the hello-world example server or the hostname example server. See\n+1. The server does not use XDS, so recent releases work fine. Building using\n+recent releases is much easier, so check out the most recent release tag:\n+```\n+$ git checkout v1.27.0", "originalCommit": "42b84c8156f25071116508c251a4447614dcdf2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzE1NjM4NA==", "url": "https://github.com/grpc/grpc-java/pull/6631#discussion_r373156384", "bodyText": "If you look at the history of https://github.com/grpc/grpc-java/commits/master/documentation/android-channel-builder.md, we miss a commit \"Update README etc to reference 1.27.0\", but RELEASING.md doesn't document to add this commit in the master branch, while similar commits were added for the past releases. I'm confused.", "author": "dapengzhang0", "createdAt": "2020-01-30T19:44:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjYwOTg0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzU5NTE4Ng==", "url": "https://github.com/grpc/grpc-java/pull/6631#discussion_r373595186", "bodyText": "As far as I'm concerned, I'm okay if we don't update this. Two reasons: 1) it'll work fine, no big deal. 2) grpc-xds should be published the next release or the release after, so it will only be \"wrong\" for a maximum of one release. Once grpc-xds is published this will be rewritten to look like the other examples and just say \"use the latest tag\"", "author": "ejona86", "createdAt": "2020-01-31T17:27:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjYwOTg0MA=="}], "type": "inlineReview"}]}