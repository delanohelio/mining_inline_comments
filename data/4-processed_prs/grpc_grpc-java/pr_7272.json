{"pr_number": 7272, "pr_title": "Gradle 6-driven updates", "pr_createdAt": "2020-07-30T22:47:27Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7272", "timeline": [{"oid": "303fadd87f4261ff4c9a3acffec0fa1d0feef023", "url": "https://github.com/grpc/grpc-java/commit/303fadd87f4261ff4c9a3acffec0fa1d0feef023", "message": "gradle: Use built-in javadoc and sources jars", "committedDate": "2020-07-30T20:59:34Z", "type": "commit"}, {"oid": "29f8268e29a4a5f5b9215c53e1a16498dd8d2b58", "url": "https://github.com/grpc/grpc-java/commit/29f8268e29a4a5f5b9215c53e1a16498dd8d2b58", "message": "buildscripts: Avoid signing sha256 and sha512 checksums\n\nStarting in Gradle 6.0 maven-publish began including sha256 and sha512\nchecksums, in addition to the previous md5 and sha1 checksums. We don't want\n.sha256.asc and .sha512.asc files, as they serve no purpose.", "committedDate": "2020-07-30T21:03:51Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMDA2MQ==", "url": "https://github.com/grpc/grpc-java/pull/7272#discussion_r463330061", "bodyText": "The built-in will also pick source from the main source set only?", "author": "dapengzhang0", "createdAt": "2020-07-30T23:42:31Z", "path": "build.gradle", "diffHunk": "@@ -492,14 +492,9 @@ subprojects {\n         }\n \n         plugins.withId(\"java\") {\n-            task javadocJar(type: Jar) {\n-                classifier = 'javadoc'\n-                from javadoc\n-            }\n-\n-            task sourcesJar(type: Jar) {\n-                classifier = 'sources'\n-                from sourceSets.main.allSource", "originalCommit": "303fadd87f4261ff4c9a3acffec0fa1d0feef023", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMjQ4Nw==", "url": "https://github.com/grpc/grpc-java/pull/7272#discussion_r463332487", "bodyText": "I mean the proto codegen will not be picked.", "author": "dapengzhang0", "createdAt": "2020-07-30T23:50:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMDA2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzODQyMQ==", "url": "https://github.com/grpc/grpc-java/pull/7272#discussion_r463338421", "bodyText": "Yes, it produces the same results. Honestly, it would be better to include the generated code in my mind, but it's not that big of a deal.", "author": "ejona86", "createdAt": "2020-07-31T00:12:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMDA2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMTQxNQ==", "url": "https://github.com/grpc/grpc-java/pull/7272#discussion_r463331415", "bodyText": "Why is this removed. Does it work for all JDK versions?", "author": "dapengzhang0", "createdAt": "2020-07-30T23:47:09Z", "path": "testing-proto/build.gradle", "diffHunk": "@@ -12,7 +12,6 @@ dependencies {\n             project(':grpc-stub')\n     compileOnly libraries.javax_annotation\n     testImplementation libraries.truth\n-    testRuntime libraries.javax_annotation", "originalCommit": "46a4b1e597ac6c21fd6d03f8754f7717a9b23a78", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzM1NDk5Mw==", "url": "https://github.com/grpc/grpc-java/pull/7272#discussion_r463354993", "bodyText": "testRuntime is the old-style. It seemed weird to be runtime-only. It seemed like it should be testImplementation. So I looked at the code and couldn't find a reference to it, so I deleted it. The Java 11 build did fail, so I put it back, but as testRuntimeOnly.", "author": "ejona86", "createdAt": "2020-07-31T01:15:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzMzMTQxNQ=="}], "type": "inlineReview"}, {"oid": "406a0fd600aaf4029ce520c647d72be817406239", "url": "https://github.com/grpc/grpc-java/commit/406a0fd600aaf4029ce520c647d72be817406239", "message": "gradle: Fix Gradle 6 warnings\n\nMost of these are easy \"replace X with Y.\"\n\nThe CreateStartScripts changes were because the scripts were being included in\nthe output zip/tar multiple times. The was because they were all using the same\noutput directory, and the entire output directory was being included for each.\nThe output directory tmp/ was particularly poor because other tasks were\ndumping things into it, so our zip/tar was including those junk files as well.", "committedDate": "2020-07-31T01:13:46Z", "type": "forcePushed"}, {"oid": "6d5578c4f2b508138f4d9ce792ad3b1cdd575118", "url": "https://github.com/grpc/grpc-java/commit/6d5578c4f2b508138f4d9ce792ad3b1cdd575118", "message": "gradle: Fix Gradle 6 warnings\n\nMost of these are easy \"replace X with Y.\"\n\nThe CreateStartScripts changes were because the scripts were being included in\nthe output zip/tar multiple times. The was because they were all using the same\noutput directory, and the entire output directory was being included for each.\nThe output directory tmp/ was particularly poor because other tasks were\ndumping things into it, so our zip/tar was including those junk files as well.", "committedDate": "2020-07-31T13:55:52Z", "type": "commit"}, {"oid": "6d5578c4f2b508138f4d9ce792ad3b1cdd575118", "url": "https://github.com/grpc/grpc-java/commit/6d5578c4f2b508138f4d9ce792ad3b1cdd575118", "message": "gradle: Fix Gradle 6 warnings\n\nMost of these are easy \"replace X with Y.\"\n\nThe CreateStartScripts changes were because the scripts were being included in\nthe output zip/tar multiple times. The was because they were all using the same\noutput directory, and the entire output directory was being included for each.\nThe output directory tmp/ was particularly poor because other tasks were\ndumping things into it, so our zip/tar was including those junk files as well.", "committedDate": "2020-07-31T13:55:52Z", "type": "forcePushed"}]}