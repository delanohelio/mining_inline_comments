{"pr_number": 7755, "pr_title": "xds: don't add ServerTlsHandler if current handler is removed - also fix logging.", "pr_createdAt": "2020-12-23T19:13:45Z", "pr_url": "https://github.com/grpc/grpc-java/pull/7755", "timeline": [{"oid": "237e6c210eb76cb8f86bc728c154b9cdb7339bb0", "url": "https://github.com/grpc/grpc-java/commit/237e6c210eb76cb8f86bc728c154b9cdb7339bb0", "message": "xds: do not add the ServerTlsHandler if the current handler has been removed - also fix logging.", "committedDate": "2020-12-23T19:10:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE2MzY1OA==", "url": "https://github.com/grpc/grpc-java/pull/7755#discussion_r548163658", "bodyText": "ctx.isRemoved()", "author": "ejona86", "createdAt": "2020-12-23T19:26:50Z", "path": "xds/src/main/java/io/grpc/xds/internal/sds/SdsProtocolNegotiators.java", "diffHunk": "@@ -436,9 +442,11 @@ public void updateSecret(SslContext sslContext) {\n                   InternalProtocolNegotiators.serverTls(sslContext).newHandler(grpcHandler);\n \n               // Delegate rest of handshake to TLS handler\n-              ctx.pipeline().addAfter(ctx.name(), null, handler);\n-              fireProtocolNegotiationEvent(ctx);\n-              ctx.pipeline().remove(bufferReads);\n+              if (!handlerRemoved) {", "originalCommit": "237e6c210eb76cb8f86bc728c154b9cdb7339bb0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE5MDIwNg==", "url": "https://github.com/grpc/grpc-java/pull/7755#discussion_r548190206", "bodyText": "Hmmm, much simpler. Thanks I'll make this change", "author": "sanjaypujare", "createdAt": "2020-12-23T20:01:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODE2MzY1OA=="}], "type": "inlineReview"}, {"oid": "6ce6973b68b97667bbbec1a1d4d28632482c3ab9", "url": "https://github.com/grpc/grpc-java/commit/6ce6973b68b97667bbbec1a1d4d28632482c3ab9", "message": "use ctx.isRemoved() as per review suggestion", "committedDate": "2020-12-23T20:34:08Z", "type": "commit"}]}