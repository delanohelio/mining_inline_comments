{"pr_number": 4555, "pr_title": "Task nxp 27712 rest api test status check", "pr_createdAt": "2020-12-23T21:55:03Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4555", "timeline": [{"oid": "78a5908136549e0f8bf979e4a0dc46b28d9b1347", "url": "https://github.com/nuxeo/nuxeo/commit/78a5908136549e0f8bf979e4a0dc46b28d9b1347", "message": "NXP-27712: Trigger REST API tests to have a status on PRs", "committedDate": "2020-12-23T21:27:22Z", "type": "commit"}, {"oid": "1c775cc23174e26c881bb83088bb33e665bbb7ba", "url": "https://github.com/nuxeo/nuxeo/commit/1c775cc23174e26c881bb83088bb33e665bbb7ba", "message": "tmp: run fast", "committedDate": "2020-12-23T21:56:23Z", "type": "forcePushed"}, {"oid": "05308bbc05019f09a8c749f07554bf557afd7ef4", "url": "https://github.com/nuxeo/nuxeo/commit/05308bbc05019f09a8c749f07554bf557afd7ef4", "message": "tmp: rest api test PR", "committedDate": "2020-12-23T21:56:23Z", "type": "forcePushed"}, {"oid": "78a5908136549e0f8bf979e4a0dc46b28d9b1347", "url": "https://github.com/nuxeo/nuxeo/commit/78a5908136549e0f8bf979e4a0dc46b28d9b1347", "message": "NXP-27712: Trigger REST API tests to have a status on PRs", "committedDate": "2020-12-23T21:27:22Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzMTk2Mw==", "url": "https://github.com/nuxeo/nuxeo/pull/4555#discussion_r548531963", "bodyText": "Shouldn't we put every time the NUXEO_VERSION? This will avoid potential issues regarding the alias and imagePullPolicy.", "author": "kevinleturc", "createdAt": "2020-12-24T13:33:56Z", "path": "ci/Jenkinsfiles/build.groovy", "diffHunk": "@@ -760,6 +760,30 @@ pipeline {\n       }\n     }\n \n+    stage('Trigger REST API tests') {\n+      steps {\n+        echo \"\"\"\n+        ----------------------------------------\n+        Trigger REST API tests\n+        ----------------------------------------\n+        \"\"\"\n+        script {\n+          def parameters = [\n+            string(name: 'NUXEO_REPOSITORY', value: \"${repositoryUrl}\"),\n+            string(name: 'NUXEO_SHA', value: \"${GIT_COMMIT}\"),\n+          ]\n+          if (isPullRequest()) {\n+            parameters.add(string(name: 'NUXEO_VERSION', value: \"${VERSION}\"))\n+          }", "originalCommit": "78a5908136549e0f8bf979e4a0dc46b28d9b1347", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODU0MjY3Nw==", "url": "https://github.com/nuxeo/nuxeo/pull/4555#discussion_r548542677", "bodyText": "Actually, I'm relying on the fact of passing this parameter or not to detect if the upstream (nuxeo/nuxeo) is a PR or master. Could parse the upstream job full name but I thought the current approach was simpler.\nIn any case, you're right about the imagePullPolicy needing to be Always in the nuxeo chart used by the REST API tests pipeline, since the default image is 11.x which is a rolling tag.", "author": "ataillefer", "createdAt": "2020-12-24T14:19:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0ODUzMTk2Mw=="}], "type": "inlineReview"}]}