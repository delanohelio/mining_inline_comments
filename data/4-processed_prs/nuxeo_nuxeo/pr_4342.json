{"pr_number": 4342, "pr_title": "task NXP 29684 single nuxeo docker image", "pr_createdAt": "2020-09-28T13:24:44Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4342", "timeline": [{"oid": "39761c516f1c27cf9f2478dd3a591853c0c671d8", "url": "https://github.com/nuxeo/nuxeo/commit/39761c516f1c27cf9f2478dd3a591853c0c671d8", "message": "NXP-29684: Cleanup", "committedDate": "2020-09-28T13:00:17Z", "type": "commit"}, {"oid": "143f6e4e5e2ac4560f1d9d9c22f44d86bc8d7f17", "url": "https://github.com/nuxeo/nuxeo/commit/143f6e4e5e2ac4560f1d9d9c22f44d86bc8d7f17", "message": "NXP-29684: Build a single nuxeo/nuxeo Docker image", "committedDate": "2020-09-28T13:23:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk0NDg0Ng==", "url": "https://github.com/nuxeo/nuxeo/pull/4342#discussion_r495944846", "bodyText": "Why replacing 2 images by one introduces this plugin?", "author": "bdelbosc", "createdAt": "2020-09-28T13:37:06Z", "path": "docker/pom.xml", "diffHunk": "@@ -10,30 +10,60 @@\n   </parent>\n \n   <groupId>org.nuxeo.docker</groupId>\n-  <artifactId>nuxeo-docker-images</artifactId>\n-  <name>Nuxeo Docker Images</name>\n+  <artifactId>nuxeo-docker-image</artifactId>\n+  <name>Nuxeo Docker Image</name>\n   <packaging>pom</packaging>\n \n-  <modules>\n-    <module>nuxeo</module>\n-    <module>slim</module>\n-  </modules>\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.nuxeo.ecm.distribution</groupId>\n+      <artifactId>nuxeo-server-tomcat</artifactId>\n+      <type>zip</type>\n+    </dependency>\n+  </dependencies>\n \n-  <dependencyManagement>\n-    <dependencies>\n-      <dependency>\n-        <groupId>org.nuxeo.docker</groupId>\n-        <artifactId>nuxeo-docker-image</artifactId>\n-        <type>pom</type>\n-        <version>${nuxeo.platform.version}</version>\n-      </dependency>\n-      <dependency>\n-        <groupId>org.nuxeo.docker</groupId>\n-        <artifactId>nuxeo-slim-docker-image</artifactId>\n-        <type>pom</type>\n-        <version>${nuxeo.platform.version}</version>\n-      </dependency>\n-    </dependencies>\n-  </dependencyManagement>\n+  <build>\n+    <plugins>\n+      <plugin>\n+        <groupId>org.apache.maven.plugins</groupId>\n+        <artifactId>maven-dependency-plugin</artifactId>\n+        <executions>\n+          <execution>\n+            <id>copy-distrib</id>\n+            <goals>\n+              <goal>copy-dependencies</goal>\n+            </goals>\n+            <configuration>\n+              <includeArtifactIds>nuxeo-server-tomcat</includeArtifactIds>\n+              <outputDirectory>${project.build.directory}/distrib</outputDirectory>\n+              <overWriteIfNewer>true</overWriteIfNewer>\n+            </configuration>\n+          </execution>\n+        </executions>\n+      </plugin>\n+      <plugin>\n+        <groupId>com.spotify</groupId>", "originalCommit": "143f6e4e5e2ac4560f1d9d9c22f44d86bc8d7f17", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjAyMzYzMA==", "url": "https://github.com/nuxeo/nuxeo/pull/4342#discussion_r496023630", "bodyText": "It was already used by the 2 images: slim and nuxeo.\nIt allows to build the Docker image with Maven.", "author": "ataillefer", "createdAt": "2020-09-28T15:11:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk0NDg0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjQ0Njg0MA==", "url": "https://github.com/nuxeo/nuxeo/pull/4342#discussion_r496446840", "bodyText": "ok so it was a missing dependency", "author": "bdelbosc", "createdAt": "2020-09-29T06:29:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk0NDg0Ng=="}], "type": "inlineReview"}]}