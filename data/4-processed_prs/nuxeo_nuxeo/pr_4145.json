{"pr_number": 4145, "pr_title": "fix-NXP-29051-ConcurrentUpdateException-postgresql-delete-from-fulltext", "pr_createdAt": "2020-06-12T15:07:11Z", "pr_url": "https://github.com/nuxeo/nuxeo/pull/4145", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMTQ2NQ==", "url": "https://github.com/nuxeo/nuxeo/pull/4145#discussion_r440211465", "bodyText": "wouldn't you want to swap those two lines ? So the comment is right above the session.removeDocument() ?", "author": "NourNuxeo", "createdAt": "2020-06-15T14:21:16Z", "path": "modules/platform/nuxeo-platform-userworkspace/nuxeo-platform-userworkspace-core/src/test/java/org/nuxeo/ecm/platform/userworkspace/core/tests/TestUserWorkspace.java", "diffHunk": "@@ -146,8 +147,8 @@ public void testMultiDomains() {\n         assertTrue(uw.getPathAsString(), uw.getPathAsString().startsWith(\"/default-domain\"));\n \n         // now delete the default-domain\n+        txFeature.nextTransaction();", "originalCommit": "cf409194c56c7bfa2506cf896082981c2712764f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDMxMTk2Ng==", "url": "https://github.com/nuxeo/nuxeo/pull/4145#discussion_r440311966", "bodyText": "Yes you're right, and I'll add a comment explaining why we're calling nextTransaction().", "author": "ataillefer", "createdAt": "2020-06-15T16:49:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIxMTQ2NQ=="}], "type": "inlineReview"}, {"oid": "1d31f4beed999003537c06ac10eb9cfe513905bc", "url": "https://github.com/nuxeo/nuxeo/commit/1d31f4beed999003537c06ac10eb9cfe513905bc", "message": "NXP-29051: Activate testCollectionsAreInUserWorkspace, see NXP-25543", "committedDate": "2020-06-15T16:53:07Z", "type": "forcePushed"}, {"oid": "ee07d8af0542d3facf8a42a099d2c5daa07e9caa", "url": "https://github.com/nuxeo/nuxeo/commit/ee07d8af0542d3facf8a42a099d2c5daa07e9caa", "message": "NXP-29051: Fix TestUserWorkspace#testMultiDomains random ConcurrentUpdateException vs PostgreSQL", "committedDate": "2020-06-15T17:36:02Z", "type": "commit"}, {"oid": "2e6153cfc5cad4bfa3b85a148493d5bcdb1a2865", "url": "https://github.com/nuxeo/nuxeo/commit/2e6153cfc5cad4bfa3b85a148493d5bcdb1a2865", "message": "NXP-29004: Fix TestCommentsMigrator#testProbeWithInConsistentComments random ConcurrentUpdateException vs PostgreSQL", "committedDate": "2020-06-15T17:36:02Z", "type": "commit"}, {"oid": "ddbd2af7432346ed4f47dbb90829a4ae476c12e5", "url": "https://github.com/nuxeo/nuxeo/commit/ddbd2af7432346ed4f47dbb90829a4ae476c12e5", "message": "NXP-29051: Activate testCollectionsAreInUserWorkspace, see NXP-25543", "committedDate": "2020-06-15T17:36:02Z", "type": "commit"}, {"oid": "ddbd2af7432346ed4f47dbb90829a4ae476c12e5", "url": "https://github.com/nuxeo/nuxeo/commit/ddbd2af7432346ed4f47dbb90829a4ae476c12e5", "message": "NXP-29051: Activate testCollectionsAreInUserWorkspace, see NXP-25543", "committedDate": "2020-06-15T17:36:02Z", "type": "forcePushed"}]}