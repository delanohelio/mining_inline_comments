{"pr_number": 1522, "pr_title": "Jobs, that were stopped by a \"Timeout\", shall move the interim data into the \"output\" storage", "pr_createdAt": "2020-10-28T14:28:25Z", "pr_url": "https://github.com/epam/cloud-pipeline/pull/1522", "timeline": [{"oid": "5910a671d4de34ab07543886a3ac907be4c87cf1", "url": "https://github.com/epam/cloud-pipeline/commit/5910a671d4de34ab07543886a3ac907be4c87cf1", "message": "Issue #1520: Jobs, that were stopped by a \"Timeout\", shall move the interim data into the \"output\" storage", "committedDate": "2020-10-28T13:58:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUwMzAzNg==", "url": "https://github.com/epam/cloud-pipeline/pull/1522#discussion_r513503036", "bodyText": "Could you also add CP_EXEC_TIMEOUT to deploy/contents/install/preferences/launch.system.parameters.json?", "author": "mzueva", "createdAt": "2020-10-28T14:45:29Z", "path": "api/src/main/java/com/epam/pipeline/manager/execution/SystemParams.java", "diffHunk": "@@ -69,7 +69,8 @@\n     CONTAINER_CPU_RESOURCE(\"container-cpu-resource\", \"CP_CONTAINER_CPU_RESOURCE\", false, true),\n     CONTAINER_MEMORY_RESOURCE_POLICY(\"container-memory-resource-policy\",\n             \"CP_CONTAINER_MEMORY_RESOURCE_POLICY\", false, true),\n-    CP_SENSITIVE_RUN(\"cp-sensitive-run\", \"CP_SENSITIVE_RUN\", false, false);\n+    CP_SENSITIVE_RUN(\"cp-sensitive-run\", \"CP_SENSITIVE_RUN\", false, false),\n+    CP_EXEC_TIMEOUT(\"cp-exec-timeout\", \"CP_EXEC_TIMEOUT\");", "originalCommit": "5910a671d4de34ab07543886a3ac907be4c87cf1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzUwNDg5OA==", "url": "https://github.com/epam/cloud-pipeline/pull/1522#discussion_r513504898", "bodyText": "I think that we need to check whether timeout was actually exceeded (possibly using exit code). Also keep in memory that we need to save CP_EXEC_RESULT to exit process with correct exit code.", "author": "mzueva", "createdAt": "2020-10-28T14:47:42Z", "path": "scripts/pipeline-launch/launch.sh", "diffHunk": "@@ -1678,7 +1678,15 @@ pipe_log SUCCESS \"Environment initialization finished\" \"InitializeEnvironment\"\n \n echo \"Command text:\"\n echo \"${SCRIPT}\"\n-bash -c \"${SCRIPT}\"\n+\n+if [ ! -z \"${CP_EXEC_TIMEOUT}\" ] && [ \"${CP_EXEC_TIMEOUT}\" -gt 0 ];\n+then\n+  timeout ${CP_EXEC_TIMEOUT}m bash -c \"${SCRIPT}\"\n+  echo \"Timeout was elapsed\"", "originalCommit": "5910a671d4de34ab07543886a3ac907be4c87cf1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bbd18d497faa0a64b571afa478569e145d649e66", "url": "https://github.com/epam/cloud-pipeline/commit/bbd18d497faa0a64b571afa478569e145d649e66", "message": "Issue #1520: Jobs, that were stopped by a \"Timeout\", shall move the interim data into the \"output\" storage", "committedDate": "2020-10-28T15:20:26Z", "type": "commit"}]}