{"pr_number": 190, "pr_title": "Remove copybook name from the variable list if copybook is missing GH-186", "pr_createdAt": "2020-02-06T17:02:37Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/190", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NzIyMg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/190#discussion_r376277222", "bodyText": "Please add a brief description about this test", "author": "zacanbrcom", "createdAt": "2020-02-07T08:55:51Z", "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/test/java/com/ca/lsp/core/cobol/semantics/CobolVariableContextTest.java", "diffHunk": "@@ -142,6 +142,21 @@ public void getVariableByNameBadTest() {\n     assertNull(get(\"NEW-VARIABLE-NOT-CREATED\"));\n   }\n \n+  @Test", "originalCommit": "943cf0c22913f4a7d2803f8523c4f47506ec5185", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NzY5NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/190#discussion_r376277694", "bodyText": "Pls few lines of description about the test", "author": "zacanbrcom", "createdAt": "2020-02-07T08:56:49Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/usecases/TestMissingCopybookNotInVariableList.java", "diffHunk": "@@ -0,0 +1,59 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.ca.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cdi.LangServerCtx;\n+import com.ca.lsp.cobol.ConfigurableTest;\n+import com.ca.lsp.cobol.service.delegates.validations.AnalysisResult;\n+import com.ca.lsp.cobol.service.mocks.MockWorkspaceService;\n+import org.eclipse.lsp4j.Location;\n+import org.junit.Test;\n+\n+import java.util.Collections;\n+import java.util.List;\n+import java.util.Map;\n+\n+import static com.ca.lsp.cobol.service.delegates.validations.UseCaseUtils.analyze;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertTrue;\n+\n+/** This test covers case when copybook that was not found appears as a variable. */\n+public class TestMissingCopybookNotInVariableList extends ConfigurableTest {\n+  private static final String TEXT =\n+      \"       IDENTIFICATION DIVISION.\\n\"\n+          + \"       PROGRAM-ID. TEST1.\\n\"\n+          + \"       DATA DIVISION.\\n\"\n+          + \"       WORKING-STORAGE SECTION.\\n\"\n+          + \"       01 PARENT. COPY CPYNAME.\\n\"\n+          + \"       PROCEDURE DIVISION.\\n\"\n+          + \"       MOVE 00 TO CHILD1 OF PARENT.\";\n+\n+  public TestMissingCopybookNotInVariableList() {\n+\n+    MockWorkspaceService workspaceService =\n+        LangServerCtx.getInjector().getInstance(MockWorkspaceService.class);\n+    workspaceService.setCopybooks(Collections::emptyList);\n+  }\n+\n+  @Test\n+  public void test() {", "originalCommit": "943cf0c22913f4a7d2803f8523c4f47506ec5185", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI4MTM2MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/190#discussion_r376281360", "bodyText": "There is a description in the file header", "author": "temanbrcom", "createdAt": "2020-02-07T09:05:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjI3NzY5NA=="}], "type": "inlineReview"}, {"oid": "f99ffcdba216fc050bf19bbf5bacc5d01d979e0d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f99ffcdba216fc050bf19bbf5bacc5d01d979e0d", "message": "Remove copybook name from the variable list if copybook is missing GH-186\nIn the current solution, there are copybook marks that are used to build the variable structure using copybooks. The scenario when the copybook is missing and the structure cannot be built was not covered and the mark was not removed.\nNow variable semantic context has the capability to remove these marks on demand.", "committedDate": "2020-02-07T09:22:45Z", "type": "commit"}, {"oid": "f99ffcdba216fc050bf19bbf5bacc5d01d979e0d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/f99ffcdba216fc050bf19bbf5bacc5d01d979e0d", "message": "Remove copybook name from the variable list if copybook is missing GH-186\nIn the current solution, there are copybook marks that are used to build the variable structure using copybooks. The scenario when the copybook is missing and the structure cannot be built was not covered and the mark was not removed.\nNow variable semantic context has the capability to remove these marks on demand.", "committedDate": "2020-02-07T09:22:45Z", "type": "forcePushed"}]}