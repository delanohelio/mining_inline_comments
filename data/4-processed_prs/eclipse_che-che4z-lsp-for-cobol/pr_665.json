{"pr_number": 665, "pr_title": "fix : Support variable Usages Separated by Commas without Whitespaces\u2026", "pr_createdAt": "2020-11-20T13:14:57Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/665", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcyMDkwMw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/665#discussion_r527720903", "bodyText": "The change will fix the error, but this grammar matches a lot of cases:\nVAR1, VAR2\nVAR1, VAR2,\nVAR1 VAR2\n\nProbably, it is not correct.", "author": "grianbrcom", "createdAt": "2020-11-20T14:17:25Z", "path": "server/src/main/antlr4/com/broadcom/lsp/cobol/core/parser/CobolParser.g4", "diffHunk": "@@ -793,7 +793,7 @@ callUsingPhrase\n    ;\n \n callUsingParameter\n-   : callByReferencePhrase | callByValuePhrase | callByContentPhrase\n+   : (callByReferencePhrase | callByValuePhrase | callByContentPhrase) COMMACHAR?", "originalCommit": "559775089266066413f6d861f38312473625c1d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcyNzY5NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/665#discussion_r527727694", "bodyText": "I would expect it to be:\ncallUsingPhrase\n   : USING callUsingParameter (COMMACHAR? callUsingParameter)*\n   ;\n\nShould be checked that the positive tests pass and the loose comma at the end produces a syntax error", "author": "temanbrcom", "createdAt": "2020-11-20T14:27:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzcyMDkwMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzY5NzMyMA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/665#discussion_r527697320", "bodyText": "You create diagnostics here, by they are not expected in the given text.", "author": "temanbrcom", "createdAt": "2020-11-20T13:41:40Z", "path": "server/src/test/java/com/broadcom/lsp/cobol/usecases/TestVariableUsageSeparatedByComma.java", "diffHunk": "@@ -0,0 +1,55 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *    Broadcom, Inc. - initial API and implementation\n+ *\n+ */\n+\n+package com.broadcom.lsp.cobol.usecases;\n+\n+import com.broadcom.lsp.cobol.usecases.engine.UseCaseEngine;\n+import org.eclipse.lsp4j.Diagnostic;\n+import org.eclipse.lsp4j.Position;\n+import org.eclipse.lsp4j.Range;\n+import org.junit.jupiter.api.Test;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+/** Test variable usage separated by Commas without Whitespaces */\n+class TestVariableUsageSeparatedByComma {\n+\n+  private static final String TEXT =\n+      \"       IDENTIFICATION DIVISION.\\n\"\n+          + \"       PROGRAM-ID. programID.\\n\"\n+          + \"        DATA DIVISION.\\n\"\n+          + \"        WORKING-STORAGE SECTION.\\n\"\n+          + \"        01 {$*VAR-TEST1}.\\n\"\n+          + \"        01 {$*VAR-TEST2}.\\n\"\n+          + \"        01 {$*VAR-TEST3}.\\n\"\n+          + \"        01 {$*VAR-TEST4}.\\n\"\n+          + \"       PROCEDURE DIVISION.\\n\"\n+          + \"           CALL 'smth' USING {$VAR-TEST1},{$VAR-TEST2} BY VALUE {$VAR-TEST3}, \\n\"\n+          + \"           BY CONTENT {$VAR-TEST4} BY CONTENT ADDRESS OF TRUE.\\n\"\n+          + \"       END PROGRAM programID.\\n\";\n+\n+  @Test\n+  void test() {\n+    Map<String, Diagnostic> expected = new HashMap<>();\n+    for (int i = 4; i > 0; i--) {\n+      Range range = new Range(new Position(i + 3, 11), new Position(i + 3, 20));\n+      expected.put(\"VAR-TEST\" + i, new Diagnostic(range, null));\n+    }", "originalCommit": "559775089266066413f6d861f38312473625c1d6", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16bc0a3fe9e03c47f6e1d85e21b113a5e71e632a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/16bc0a3fe9e03c47f6e1d85e21b113a5e71e632a", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-20T16:02:12Z", "type": "forcePushed"}, {"oid": "d132919b6ff6747ba99a59d7263ecef36048aec9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d132919b6ff6747ba99a59d7263ecef36048aec9", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-23T08:42:56Z", "type": "forcePushed"}, {"oid": "a642dbed2e649682043bd565579f0346606e098c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/a642dbed2e649682043bd565579f0346606e098c", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-23T09:54:09Z", "type": "forcePushed"}, {"oid": "5e06ef4a2020b813ae06978051ba881d08758188", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5e06ef4a2020b813ae06978051ba881d08758188", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-23T12:10:13Z", "type": "forcePushed"}, {"oid": "7bb8abfb750265b394f7793fb2c397855c3702fe", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7bb8abfb750265b394f7793fb2c397855c3702fe", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-23T12:43:21Z", "type": "commit"}, {"oid": "7bb8abfb750265b394f7793fb2c397855c3702fe", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7bb8abfb750265b394f7793fb2c397855c3702fe", "message": "fix : Support variable Usages Separated by Commas without Whitespaces #598\n\nSigned-off-by: ap891843 <aman.prashant@broadcom.com>", "committedDate": "2020-11-23T12:43:21Z", "type": "forcePushed"}]}