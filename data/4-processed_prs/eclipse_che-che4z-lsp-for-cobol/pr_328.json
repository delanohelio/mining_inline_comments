{"pr_number": 328, "pr_title": "fix: POC - Resolve local URI", "pr_createdAt": "2020-05-04T11:57:25Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328", "timeline": [{"oid": "681cb50681ff03b860271ba4a5b1ff0027256163", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/681cb50681ff03b860271ba4a5b1ff0027256163", "message": "Add test to parse json like settings", "committedDate": "2020-04-16T11:09:56Z", "type": "commit"}, {"oid": "6eeed9f91c19a641aa5a7a205a0009fa0f3af9a8", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/6eeed9f91c19a641aa5a7a205a0009fa0f3af9a8", "message": "Add test related to path validation", "committedDate": "2020-04-20T11:15:33Z", "type": "commit"}, {"oid": "7206ef3c6ecf1a70c7458486e90120e4056cc774", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7206ef3c6ecf1a70c7458486e90120e4056cc774", "message": "Refactor function to parse paths and exclude not valid URIs", "committedDate": "2020-04-20T12:10:31Z", "type": "commit"}, {"oid": "068c2c9a785c1bae55f26a66f7d54f01d4d10b9e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/068c2c9a785c1bae55f26a66f7d54f01d4d10b9e", "message": "Introduce URI validation in the Local Copybook Resolver", "committedDate": "2020-04-21T08:02:35Z", "type": "commit"}, {"oid": "4688e53c164c91308bc29ec131cca37ab004797d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/4688e53c164c91308bc29ec131cca37ab004797d", "message": "Apply better name for class and test", "committedDate": "2020-04-21T08:28:32Z", "type": "commit"}, {"oid": "7ee56be9ef044e78f42e2c80198b03a7af9fa270", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7ee56be9ef044e78f42e2c80198b03a7af9fa270", "message": "Add unit test to avoid duplicates in URI list", "committedDate": "2020-04-21T08:59:54Z", "type": "commit"}, {"oid": "c2a1ce36adf28b25a40ad2f2dc8553cbabe3fd3a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c2a1ce36adf28b25a40ad2f2dc8553cbabe3fd3a", "message": "Polish test suite and minor changes", "committedDate": "2020-04-21T09:21:16Z", "type": "commit"}, {"oid": "5b46aa04acefd5dd2aa9dc83e7aeac2942e10d00", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5b46aa04acefd5dd2aa9dc83e7aeac2942e10d00", "message": "Minor changes on API naming and documentation", "committedDate": "2020-04-24T08:02:44Z", "type": "commit"}, {"oid": "a1e5c3b92494e4fd03523fd72df69f16d7f838e2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/a1e5c3b92494e4fd03523fd72df69f16d7f838e2", "message": "Minor changes on API", "committedDate": "2020-04-27T07:14:29Z", "type": "commit"}, {"oid": "10088e5f4922c92c3d4bfa34f62da68451931f7e", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/10088e5f4922c92c3d4bfa34f62da68451931f7e", "message": "Fix setting key property", "committedDate": "2020-04-27T07:46:10Z", "type": "commit"}, {"oid": "99749de70dcdc75e16bb60885d11a4b7c607e3e3", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/99749de70dcdc75e16bb60885d11a4b7c607e3e3", "message": "Merge remote-tracking branch 'remotes/origin/development' into POC_LocalURISetting\n\n# Conflicts:\n#\tclients/cobol-lsp-vscode-extension/src/extension.ts", "committedDate": "2020-04-27T07:48:16Z", "type": "commit"}, {"oid": "6c126fedc8f9d6548aa4f168c27ef2d08d5afc39", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/6c126fedc8f9d6548aa4f168c27ef2d08d5afc39", "message": "Address merge conflicts with development", "committedDate": "2020-04-27T07:50:40Z", "type": "commit"}, {"oid": "91b5b992d46dd2a599c4ffd0e8950d3aeef2f547", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/91b5b992d46dd2a599c4ffd0e8950d3aeef2f547", "message": "Address conflict with existent path key in json definition", "committedDate": "2020-04-27T09:04:08Z", "type": "commit"}, {"oid": "44157accf09b13c1ffa51c6862a89fed99894141", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/44157accf09b13c1ffa51c6862a89fed99894141", "message": "Add URI normalize to avoid unexpected result - as double slashes", "committedDate": "2020-04-27T13:51:58Z", "type": "commit"}, {"oid": "769570a795afea9bbae133deb465f213493cc702", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/769570a795afea9bbae133deb465f213493cc702", "message": "Fix key in order to support zowe and local scenario under common key paths", "committedDate": "2020-04-27T16:45:36Z", "type": "commit"}, {"oid": "c8e167868e19de3e83b50fea77dd4b062b719eb1", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c8e167868e19de3e83b50fea77dd4b062b719eb1", "message": "Fix workspace path", "committedDate": "2020-04-28T15:44:47Z", "type": "commit"}, {"oid": "04eb8d951a26e03aae0bd0c252594408f122da6a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/04eb8d951a26e03aae0bd0c252594408f122da6a", "message": "Update API to return URI in the result array", "committedDate": "2020-04-30T10:26:14Z", "type": "commit"}, {"oid": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b4bd6d42185aa995d91e1f1ee5de71203f358557", "message": "Apply minor enhancement", "committedDate": "2020-05-04T11:37:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0MDM2MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420640361", "bodyText": "local is very common scope, how do you feel about to rename it to folders or local-folders or folders-uris?", "author": "ishche", "createdAt": "2020-05-06T08:56:55Z", "path": "clients/cobol-lsp-vscode-extension/package.json", "diffHunk": "@@ -71,13 +75,21 @@\n                     \"type\": \"string\",\n                     \"description\": \"Current default profile for copybook downloader\"\n                 },\n-                \"broadcom-cobol-lsp.cpy-manager.paths\": {\n+                \"broadcom-cobol-lsp.cpy-manager.paths.dsn\": {\n                     \"type\": \"array\",\n                     \"items\": {\n                         \"type\": \"string\"\n                     },\n                     \"description\": \"Default list of datasets to search for copybooks\",\n                     \"uniqueItems\": true\n+                },\n+                \"broadcom-cobol-lsp.cpy-manager.paths.local\": {", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwMDUwMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420700501", "bodyText": "The name was discussed in an old meeting we had together and follow the wiki page I wrote, could be changed if necessary", "author": "zacanbrcom", "createdAt": "2020-05-06T10:50:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0MDM2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0MjYyNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420742624", "bodyText": "Sure, it's up to you.", "author": "ishche", "createdAt": "2020-05-06T12:14:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0MDM2MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0Mjg1OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420642859", "bodyText": "What is the value of this interface? can it be removed to reduce complexity?", "author": "ishche", "createdAt": "2020-05-06T09:01:14Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/CopybookResolver.ts", "diffHunk": "@@ -0,0 +1,20 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+/**\n+ * This interface represent the base class that define the API to resolve a JSON segment or a list of paths\n+ * defined by the user in the settings configuration in a list of URI Paths available on the filesystem.\n+ */\n+export interface CopybookResolver {", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwMTY0NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420701644", "bodyText": "My idea is to define the resolutions of a copybook as different strategy and the interface is a good design pattern to made available to the client rather than the concrete class", "author": "zacanbrcom", "createdAt": "2020-05-06T10:52:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0Mjg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0MzcxMw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420743713", "bodyText": "Make sense. Maybe it's too early to apply a strategy pattern because we don't have that much logic for now. But it's already here, then ok )", "author": "ishche", "createdAt": "2020-05-06T12:16:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0Mjg1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc1MDU4Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420750582", "bodyText": "yeye agree, but as u said I just prepared the field ^__^", "author": "zacanbrcom", "createdAt": "2020-05-06T12:28:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0Mjg1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDIxOQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420654219", "bodyText": "I think you can remove this await", "author": "ishche", "createdAt": "2020-05-06T09:21:57Z", "path": "clients/cobol-lsp-vscode-extension/src/commands/ResolveLocalCopybooks.ts", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+\n+import * as vscode from \"vscode\";\n+import {PATHS_LOCAL_KEY, SETTINGS_SECTION} from \"../constants\";\n+import {CopybookResolver} from \"../services/settings/CopybookResolver\";\n+\n+export async function resolveLocalCopybooks(copybookResolver: CopybookResolver) {\n+    if (!vscode.workspace.getConfiguration(SETTINGS_SECTION).has(PATHS_LOCAL_KEY)) {\n+        await vscode.window.showErrorMessage(\"Please, specify LOCAL paths for copybooks in settings.\");", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwMTczMA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420701730", "bodyText": "OK", "author": "zacanbrcom", "createdAt": "2020-05-06T10:52:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDIxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDU2Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420654567", "bodyText": "It's still here, did you test it on che?", "author": "ishche", "createdAt": "2020-05-06T09:22:35Z", "path": "clients/cobol-lsp-vscode-extension/src/commands/ResolveLocalCopybooks.ts", "diffHunk": "@@ -0,0 +1,34 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+\n+import * as vscode from \"vscode\";\n+import {PATHS_LOCAL_KEY, SETTINGS_SECTION} from \"../constants\";\n+import {CopybookResolver} from \"../services/settings/CopybookResolver\";\n+\n+export async function resolveLocalCopybooks(copybookResolver: CopybookResolver) {\n+    if (!vscode.workspace.getConfiguration(SETTINGS_SECTION).has(PATHS_LOCAL_KEY)) {\n+        await vscode.window.showErrorMessage(\"Please, specify LOCAL paths for copybooks in settings.\");\n+        return [];\n+    }\n+\n+    const result: string[] = copybookResolver.resolve(vscode.workspace.getConfiguration(SETTINGS_SECTION).get(PATHS_LOCAL_KEY));\n+    //TODO: Will be removed after test on CHE", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwNDA1OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420704058", "bodyText": "Yes I did, and the note in the description of this PR show my remarks about che environment.\nForgot to remove this TODO + notification msg, thanks!", "author": "zacanbrcom", "createdAt": "2020-05-06T10:57:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NDU2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NTk5NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420655994", "bodyText": "This await shouldn't be here, pls remove it. I know that it's not your change, sorry.", "author": "ishche", "createdAt": "2020-05-06T09:25:03Z", "path": "clients/cobol-lsp-vscode-extension/src/services/CopybooksPathGenerator.ts", "diffHunk": "@@ -33,11 +33,11 @@ export class CopybooksPathGenerator {\n     }\n \n     async listDatasets(): Promise<string[]> {\n-        if (!vscode.workspace.getConfiguration(SETTINGS_SECTION).has(\"paths\")) {\n+        if (!vscode.workspace.getConfiguration(SETTINGS_SECTION).has(PATHS_ZOWE)) {\n             await vscode.window.showErrorMessage(\"Please, specify DATASET paths for copybooks in settings.\");", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwNDQyNg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420704426", "bodyText": "dw! ;) I still have some weakness with typescript await/async \ud83d\ude06", "author": "zacanbrcom", "createdAt": "2020-05-06T10:58:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY1NTk5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NDYyMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420694621", "bodyText": "What is \"*\" for?", "author": "ishche", "createdAt": "2020-05-06T10:38:44Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/LocalCopybookResolver.ts", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import {URL} from \"url\";\n+import {CopybookResolver} from \"./CopybookResolver\";\n+import {SettingsUtils} from \"./util/SettingsUtils\";\n+\n+/**\n+ * This function construct an URI from a valid resource provided from the setting configuration\n+ * @param resource represent the file to search within the workspace folder list\n+ * @return an URI representation of the file or undefined if not found\n+ */\n+function getURIFromResource(resource: string): URL {\n+    for (const workspaceFolder of SettingsUtils.getWorkspacesURI()) {\n+        const uri: URL = new URL(path.join(workspaceFolder, resource));\n+        if (fs.existsSync(uri)) {\n+            return uri;\n+        }\n+    }\n+}\n+\n+function resolveURIList(list: string[]): string[] {\n+    const result: Set<string> = new Set<string>();\n+    list.filter(resource => resource !== \"*\").forEach(resource => {", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwNTYxNg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420705616", "bodyText": "Represent \"all content\" and since we discussed and decide to not support at moment this scenario I made an unit test to be sure that user didn't put the star in the path", "author": "zacanbrcom", "createdAt": "2020-05-06T11:00:31Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NDYyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0NDE4MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420744181", "bodyText": "and content is only paths, right?", "author": "ishche", "createdAt": "2020-05-06T12:16:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NDYyMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0OTg5Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420749896", "bodyText": "Let's say you have a folder called TEST that have two file ABC and DEF.\nIf the user is tempted to say, I want all the copybooks under test could try to do {\"local\": [\"TEST/*\"]} but we decided to not support this case at moment, btw it will be pretty straightforward to modify if we'd like to introduce this support", "author": "zacanbrcom", "createdAt": "2020-05-06T12:26:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NDYyMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NTI1Mw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420695253", "bodyText": "You can have resolveURIList as member of LocalCopybookResolver", "author": "ishche", "createdAt": "2020-05-06T10:39:54Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/LocalCopybookResolver.ts", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import {URL} from \"url\";\n+import {CopybookResolver} from \"./CopybookResolver\";\n+import {SettingsUtils} from \"./util/SettingsUtils\";\n+\n+/**\n+ * This function construct an URI from a valid resource provided from the setting configuration\n+ * @param resource represent the file to search within the workspace folder list\n+ * @return an URI representation of the file or undefined if not found\n+ */\n+function getURIFromResource(resource: string): URL {\n+    for (const workspaceFolder of SettingsUtils.getWorkspacesURI()) {\n+        const uri: URL = new URL(path.join(workspaceFolder, resource));\n+        if (fs.existsSync(uri)) {\n+            return uri;\n+        }\n+    }\n+}\n+\n+function resolveURIList(list: string[]): string[] {\n+    const result: Set<string> = new Set<string>();\n+    list.filter(resource => resource !== \"*\").forEach(resource => {\n+        const URI: URL = getURIFromResource(resource);\n+        if (URI !== undefined) {\n+            result.add(URI.href);\n+        }\n+    });\n+    return [...result];\n+}\n+\n+/**\n+ * This class implement the resolution of paths defined into the configuration file in a list\n+ * of URIs that are present on the filesystem\n+ */\n+export class LocalCopybookResolver implements CopybookResolver {\n+    private static parse(list: string[]): string[] {\n+        if (list === undefined) {\n+            return [];\n+        }\n+        return resolveURIList(list).filter(uri => uri !== \"\");", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0MzcxOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420743718", "bodyText": "Not sure that I get it correctly.. I will have a look to the tsc doc \ud83d\udc7c", "author": "zacanbrcom", "createdAt": "2020-05-06T12:16:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NTI1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NTg4OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420695888", "bodyText": "Inline?", "author": "ishche", "createdAt": "2020-05-06T10:41:07Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/LocalCopybookResolver.ts", "diffHunk": "@@ -0,0 +1,65 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import {URL} from \"url\";\n+import {CopybookResolver} from \"./CopybookResolver\";\n+import {SettingsUtils} from \"./util/SettingsUtils\";\n+\n+/**\n+ * This function construct an URI from a valid resource provided from the setting configuration\n+ * @param resource represent the file to search within the workspace folder list\n+ * @return an URI representation of the file or undefined if not found\n+ */\n+function getURIFromResource(resource: string): URL {\n+    for (const workspaceFolder of SettingsUtils.getWorkspacesURI()) {\n+        const uri: URL = new URL(path.join(workspaceFolder, resource));\n+        if (fs.existsSync(uri)) {\n+            return uri;\n+        }\n+    }\n+}\n+\n+function resolveURIList(list: string[]): string[] {\n+    const result: Set<string> = new Set<string>();\n+    list.filter(resource => resource !== \"*\").forEach(resource => {\n+        const URI: URL = getURIFromResource(resource);\n+        if (URI !== undefined) {\n+            result.add(URI.href);\n+        }\n+    });\n+    return [...result];\n+}\n+\n+/**\n+ * This class implement the resolution of paths defined into the configuration file in a list\n+ * of URIs that are present on the filesystem\n+ */\n+export class LocalCopybookResolver implements CopybookResolver {\n+    private static parse(list: string[]): string[] {\n+        if (list === undefined) {\n+            return [];\n+        }\n+        return resolveURIList(list).filter(uri => uri !== \"\");\n+    }\n+\n+    /**\n+     * @param list the provided list of physical path defined by the user\n+     * @return a list of resolved URIs, empty array if the input list doesn't contains any valid/found URIs\n+     */\n+    public resolve(list: string[]): string[] {\n+        return LocalCopybookResolver.parse(list);", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDc0Mzg1MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420743850", "bodyText": ".. as above \ud83d\udc7c", "author": "zacanbrcom", "createdAt": "2020-05-06T12:16:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5NTg4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5Nzc5OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420697798", "bodyText": "It's better to check it by parsing https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse", "author": "ishche", "createdAt": "2020-05-06T10:44:44Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/util/SettingsUtils.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+import * as vscode from \"vscode\";\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+export class SettingsUtils {\n+    public static isValidJSON(json: string): boolean {\n+        return (json !== undefined && json.trim().length > 0);", "originalCommit": "b4bd6d42185aa995d91e1f1ee5de71203f358557", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDcwNjYyNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r420706624", "bodyText": "makes sense \ud83d\udc4d", "author": "zacanbrcom", "createdAt": "2020-05-06T11:02:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY5Nzc5OA=="}], "type": "inlineReview"}, {"oid": "74390a5cc0f728ed5e767877e6d0f92daa83b590", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/74390a5cc0f728ed5e767877e6d0f92daa83b590", "message": "Address request change", "committedDate": "2020-05-06T15:38:21Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQzNDM5OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r421434398", "bodyText": "Base on the definition list is always defined.", "author": "ishche", "createdAt": "2020-05-07T11:31:13Z", "path": "clients/cobol-lsp-vscode-extension/src/services/settings/LocalCopybookResolver.ts", "diffHunk": "@@ -0,0 +1,61 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import {URL} from \"url\";\n+import {CopybookResolver} from \"./CopybookResolver\";\n+import {SettingsUtils} from \"./util/SettingsUtils\";\n+\n+/**\n+ * This class implement the resolution of paths defined into the configuration file in a list\n+ * of URIs that are present on the filesystem\n+ */\n+export class LocalCopybookResolver implements CopybookResolver {\n+\n+    /**\n+     * This function construct an URI from a valid resource provided from the setting configuration\n+     * @param resource represent the file to search within the workspace folder list\n+     * @return an URI representation of the file or undefined if not found\n+     */\n+    private static getURIFromResource(resource: string): URL {\n+        for (const workspaceFolder of SettingsUtils.getWorkspacesURI()) {\n+            const uri: URL = new URL(path.join(workspaceFolder, resource));\n+            if (fs.existsSync(uri)) {\n+                return uri;\n+            }\n+        }\n+    }\n+\n+    /**\n+     * @param list the provided list of physical path defined by the user\n+     * @return a list of resolved URIs, empty array if the input list doesn't contains any valid/found URIs\n+     */\n+    public resolve(list: string[]): string[] {\n+        if (list === undefined) {", "originalCommit": "74390a5cc0f728ed5e767877e6d0f92daa83b590", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQzNjYwOQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/328#discussion_r421436609", "bodyText": "well.. the list passed to the method is coming from vsc API vscode.workspace.getConfiguration(SETTINGS_SECTION).get(PATHS_LOCAL_KEY) and I'd like avoid any trouble if we get undefined, I can remove it if you think is not necessary!", "author": "zacanbrcom", "createdAt": "2020-05-07T11:35:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQzNDM5OA=="}], "type": "inlineReview"}, {"oid": "7872930fe087faa1939f1885d322acddf2f19672", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7872930fe087faa1939f1885d322acddf2f19672", "message": "Address request change to readability improvements", "committedDate": "2020-05-07T12:42:24Z", "type": "commit"}]}