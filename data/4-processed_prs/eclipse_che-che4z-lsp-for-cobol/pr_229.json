{"pr_number": 229, "pr_title": "Ext refactoring", "pr_createdAt": "2020-03-09T08:48:31Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229", "timeline": [{"oid": "2b3e108a5c2ead9b138842c940fb2b23345c3124", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2b3e108a5c2ead9b138842c940fb2b23345c3124", "message": "Get 100% on download queue", "committedDate": "2020-03-04T10:22:15Z", "type": "commit"}, {"oid": "0f20abce2830e2a8508a250da1df86fbf31ec433", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0f20abce2830e2a8508a250da1df86fbf31ec433", "message": "Refactor JavaCheck service", "committedDate": "2020-03-04T10:33:02Z", "type": "commit"}, {"oid": "30fe1cc8bcbf1d61ce0cf3d0aaee15d065ced3b4", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/30fe1cc8bcbf1d61ce0cf3d0aaee15d065ced3b4", "message": "PathUtils tests", "committedDate": "2020-03-04T16:29:47Z", "type": "commit"}, {"oid": "0420bfef143edc9ccc63358aafd7bd0a475c04c2", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0420bfef143edc9ccc63358aafd7bd0a475c04c2", "message": "Small refactoring and tests for Profile service.", "committedDate": "2020-03-05T11:13:49Z", "type": "commit"}, {"oid": "fbde7a7a5c34d802d32eefcc89f17ba5258a4453", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/fbde7a7a5c34d802d32eefcc89f17ba5258a4453", "message": "Merge branch 'development' into client-unittests", "committedDate": "2020-03-05T11:16:59Z", "type": "commit"}, {"oid": "793062bfcecff938f1bca9435ec5b8d7b0c26c81", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/793062bfcecff938f1bca9435ec5b8d7b0c26c81", "message": "Fix profile service", "committedDate": "2020-03-05T15:27:58Z", "type": "commit"}, {"oid": "b3c97a4bccb55d49ed3bb18f9982261542994347", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/b3c97a4bccb55d49ed3bb18f9982261542994347", "message": "Extract Language Client logic to service", "committedDate": "2020-03-06T11:12:52Z", "type": "commit"}, {"oid": "ea97a21d5b3111a9cd7da993befcdb0ecb4f8b61", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ea97a21d5b3111a9cd7da993befcdb0ecb4f8b61", "message": "Extrack error handling to CopybookResolver", "committedDate": "2020-03-09T08:13:54Z", "type": "commit"}, {"oid": "86421bc6bdcf6e843e243e7edd6592691123070c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/86421bc6bdcf6e843e243e7edd6592691123070c", "message": "Merge branch 'development' into client-unittests", "committedDate": "2020-03-09T08:15:28Z", "type": "commit"}, {"oid": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1fb79a4a7334b0def7db4a804e21792e346fb12a", "message": "Add quickfix for missing copybook on client site.", "committedDate": "2020-03-09T08:42:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyODEwNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389528107", "bodyText": "What means that? Can we remove it?", "author": "zacanbrcom", "createdAt": "2020-03-09T08:56:02Z", "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -14,81 +14,64 @@\n \n import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n-import { SETTINGS_SECTION } from \"./constants\";\n-import { CopybookProfile, DownloadQueue } from \"./DownloadQueue\";\n-import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./PathUtils\";\n+import { DEPENDENCIES_FOLDER, SETTINGS_SECTION } from \"./constants\";\n import { ProfileService } from \"./ProfileService\";\n+import { DependenciesDesc, loadDepFile } from \"./services/DependencyService\";\n+import { CopybookProfile, DownloadQueue } from \"./services/DownloadQueue\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./services/PathUtils\";\n import { ZoweApi } from \"./ZoweApi\";\n+import { CopybookResolver } from \"./services/CopybookResolver\";\n \n export class CopybooksDownloader implements vscode.Disposable {\n     private queue: DownloadQueue = new DownloadQueue();\n \n     public constructor(\n+        private resolver: CopybookResolver,\n         private zoweApi: ZoweApi,\n         private profileService: ProfileService) { }\n \n     public async redownloadDependencies(message: string = \"Redownload dependencies requested.\") {\n-        (await vscode.workspace.findFiles(\".cobdeps/**/*.dep\")).forEach(dep => {\n-            const errFile = dep.fsPath.substr(0, dep.fsPath.length - 4) + \".err\";\n-            if (fs.existsSync(errFile)) {\n-                try {\n-                    fs.unlinkSync(errFile);\n-                } catch (error) {\n-                    vscode.window.showErrorMessage(error.toString());\n-                }\n-            }\n+        (await vscode.workspace.findFiles(DEPENDENCIES_FOLDER + \"/**/*.dep\")).forEach(dep => {\n             this.downloadDependencies(dep, message);\n         });\n     }\n     /**\n      * @param copybooks array of copybooks names to download\n      */\n-    public async downloadDependencies(uri: vscode.Uri, message: string = \"\"): Promise<void> {\n+    async downloadCopybooks(copybooks: string[], programName: string): Promise<void> {\n+        // TODO do it right", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0OTY4NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389549684", "bodyText": "Not yet. As I mentioned in the description, work is in progress, and this class will be also refactored.", "author": "ishche", "createdAt": "2020-03-09T09:40:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyODEwNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1MzY4OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389553688", "bodyText": "\ud83d\udc4d", "author": "zacanbrcom", "createdAt": "2020-03-09T09:47:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyODEwNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzI2NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389537264", "bodyText": "Can we regroup those three assignment in a BeforeEach?\n    beforeEach(() => {\n        vscode.workspace.workspaceFolders = [{uri: {fsPath}} as any];\n      });", "author": "zacanbrcom", "createdAt": "2020-03-09T09:15:47Z", "path": "clients/cobol-lsp-vscode-extension/src/__tests__/PathUtilsTest.ts", "diffHunk": "@@ -0,0 +1,37 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as vscode from \"vscode\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"../services/PathUtils\";\n+\n+describe(\"PathUtils tests\", () => {\n+    const fsPath = \"/projects\";\n+    const profile = \"profile\";\n+    const dataset = \"dataset\";\n+\n+    it(\"creates copybook path\", () => {\n+        vscode.workspace.workspaceFolders = [{uri: {fsPath}} as any];", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0MDEzNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389540137", "bodyText": "test failing because of the wrong path expected due to the OS", "author": "sergiuilie", "createdAt": "2020-03-09T09:21:37Z", "path": "clients/cobol-lsp-vscode-extension/src/__tests__/PathUtilsTest.ts", "diffHunk": "@@ -0,0 +1,37 @@\n+/*", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1OTg2NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389559864", "bodyText": "updated", "author": "ishche", "createdAt": "2020-03-09T09:59:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0MDEzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389545906", "bodyText": "Ideally we should take care of the cognitive complexity.\nIf there is no space at moment to fix that please file an issue on GH to tackle it later on with a specific fix.", "author": "zacanbrcom", "createdAt": "2020-03-09T09:32:34Z", "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -14,81 +14,64 @@\n \n import * as fs from \"fs\";\n import * as vscode from \"vscode\";\n-import { SETTINGS_SECTION } from \"./constants\";\n-import { CopybookProfile, DownloadQueue } from \"./DownloadQueue\";\n-import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./PathUtils\";\n+import { DEPENDENCIES_FOLDER, SETTINGS_SECTION } from \"./constants\";\n import { ProfileService } from \"./ProfileService\";\n+import { DependenciesDesc, loadDepFile } from \"./services/DependencyService\";\n+import { CopybookProfile, DownloadQueue } from \"./services/DownloadQueue\";\n+import { checkWorkspace, createCopybookPath, createDatasetPath } from \"./services/PathUtils\";\n import { ZoweApi } from \"./ZoweApi\";\n+import { CopybookResolver } from \"./services/CopybookResolver\";\n \n export class CopybooksDownloader implements vscode.Disposable {\n     private queue: DownloadQueue = new DownloadQueue();\n \n     public constructor(\n+        private resolver: CopybookResolver,\n         private zoweApi: ZoweApi,\n         private profileService: ProfileService) { }\n \n     public async redownloadDependencies(message: string = \"Redownload dependencies requested.\") {\n-        (await vscode.workspace.findFiles(\".cobdeps/**/*.dep\")).forEach(dep => {\n-            const errFile = dep.fsPath.substr(0, dep.fsPath.length - 4) + \".err\";\n-            if (fs.existsSync(errFile)) {\n-                try {\n-                    fs.unlinkSync(errFile);\n-                } catch (error) {\n-                    vscode.window.showErrorMessage(error.toString());\n-                }\n-            }\n+        (await vscode.workspace.findFiles(DEPENDENCIES_FOLDER + \"/**/*.dep\")).forEach(dep => {\n             this.downloadDependencies(dep, message);\n         });\n     }\n     /**\n      * @param copybooks array of copybooks names to download\n      */\n-    public async downloadDependencies(uri: vscode.Uri, message: string = \"\"): Promise<void> {\n+    async downloadCopybooks(copybooks: string[], programName: string): Promise<void> {\n+        // TODO do it right\n+        const profile: string = await this.profileService.getProfile(programName);\n+        if (!profile) {\n+            return;\n+        }\n+        copybooks.forEach(copybook => this.queue.push(copybook, profile));\n+    }\n+\n+    public async downloadDependencies(depFileUri: vscode.Uri, message: string = \"\"): Promise<void> {\n         if (!checkWorkspace()) {\n             return;\n         }\n-        const profile: string = await this.profileService.getProfile(uri);\n+        const depDesc: DependenciesDesc = loadDepFile(depFileUri);\n+        const profile: string = await this.profileService.getProfile(depDesc.programName);\n         if (!profile) {\n             return;\n         }\n \n-        const missingCopybooks: string[] = await this.listMissingCopybooks(uri, profile);\n+        const missingCopybooks: string[] = await this.listMissingCopybooks(depDesc.copybooks, profile);\n \n         if (!message.length) {\n             missingCopybooks.forEach(copybook => this.queue.push(copybook, profile));\n         } else if (missingCopybooks.length > 0) {\n-            // TODO: refactor: move to external class\n-            const downloadCopybookAction = \"Download Copybooks\";\n-            const actionDatasets = \"Edit Datasets\";\n-            const actionProfile = \"Change zowe profile\";\n-            const actions = [];\n-            if ((await this.listPathDatasets()).length > 0) {\n-                actions.push(downloadCopybookAction);\n-            }\n-            if (message !== \"Configuration was updated\") {\n-                actions.push(actionDatasets);\n-                actions.push(actionProfile);\n-            }\n-            const action: string = await vscode.window.showInformationMessage(\n-                message,\n-                ...actions);\n-            if (action === downloadCopybookAction) {\n-                missingCopybooks.forEach(copybook => this.queue.push(copybook, profile));\n-            }\n-            if (action === actionDatasets) {\n-                vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                    \"broadcom-cobol-lsp.cpy-manager.paths\");\n-            }\n-            if (action === actionProfile) {\n-                vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                    \"broadcom-cobol-lsp.cpy-manager.profiles\");\n-            }\n+            this.resolver.fixMissingDownloads(message, missingCopybooks, profile, {\n+                hasPaths: (await this.listPathDatasets()).length > 0,\n+            });\n         }\n \n     }\n \n     // tslint:disable-next-line: cognitive-complexity\n     public async start() {", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1MzUyNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389553527", "bodyText": "It turns out it's not so complex after all )", "author": "ishche", "createdAt": "2020-03-09T09:47:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU2OTYxMg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389569612", "bodyText": "Well.. when I removed the tslint I got the warning about complexity 28 lines instead of 15.\nBut I'm fine with that.", "author": "zacanbrcom", "createdAt": "2020-03-09T10:18:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU3ODA2MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389578060", "bodyText": "Hm.. didn't get this warning on my site. Sorry, I'll double-check.", "author": "ishche", "createdAt": "2020-03-09T10:34:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5MDE4Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389590182", "bodyText": "", "author": "zacanbrcom", "createdAt": "2020-03-09T10:59:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU5MDM2Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389590366", "bodyText": "Btw I think we can plan a small refactor later on", "author": "zacanbrcom", "createdAt": "2020-03-09T11:00:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NTkwNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NjQ0OQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389546449", "bodyText": "pls remove this extra line :D", "author": "zacanbrcom", "createdAt": "2020-03-09T09:33:40Z", "path": "clients/cobol-lsp-vscode-extension/src/CopybooksDownloader.ts", "diffHunk": "@@ -135,27 +118,14 @@ export class CopybooksDownloader implements vscode.Disposable {\n     public dispose() {\n         this.queue.stop();\n     }\n-    public async processDownloadError(title: string) {\n-        const actionDatasets = \"Edit Datasets\";\n-        const actionProfile = \"Change zowe profile\";\n-        const action = await vscode.window.showErrorMessage(title,\n-            actionDatasets, actionProfile);\n-        if (action === actionDatasets) {\n-            vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                \"broadcom-cobol-lsp.cpy-manager.paths\");\n-        }\n-        if (action === actionProfile) {\n-            vscode.commands.executeCommand(\"workbench.action.openSettings\",\n-                \"broadcom-cobol-lsp.cpy-manager.profiles\");\n-        }\n-    }\n+", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389537551", "bodyText": "In fact, we support also .cob and .cobol case insensitively as valid file extensions for COBOL files.", "author": "temanbrcom", "createdAt": "2020-03-09T09:16:20Z", "path": "clients/cobol-lsp-vscode-extension/src/ProfileService.ts", "diffHunk": "@@ -63,27 +66,23 @@ export class ProfileService {\n         return undefined;\n     }\n \n-    private async findProfileByDependenciesFile(depFile: vscode.Uri): Promise<string | undefined> {\n-        const depName = path.basename(depFile.fsPath, \".dep\");\n+    private async findProfileByDependenciesFile(programName: string): Promise<string | undefined> {\n         for (const doc of vscode.workspace.textDocuments) {\n             const docPath = doc.fileName;\n             if (!docPath.toLowerCase().endsWith(\".cbl\")) {", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU1ODE2Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389558166", "bodyText": "Is it \".cob\" (as it now in package.json) or \".cobol\"?", "author": "ishche", "createdAt": "2020-03-09T09:56:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU4OTY5Ng==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389589696", "bodyText": "I think both", "author": "zacanbrcom", "createdAt": "2020-03-09T10:58:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQwMjA0Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r390402047", "bodyText": "Are you going to do something with it in this PR or later on?", "author": "temanbrcom", "createdAt": "2020-03-10T15:29:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQzNzEwMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r390437101", "bodyText": "It's there already", "author": "ishche", "createdAt": "2020-03-10T16:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNzU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0NzIzMw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389547233", "bodyText": "Maybe it would be better to move \".dep\" to constants?", "author": "temanbrcom", "createdAt": "2020-03-09T09:35:16Z", "path": "clients/cobol-lsp-vscode-extension/src/services/DependencyService.ts", "diffHunk": "@@ -0,0 +1,30 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+\n+import * as fs from \"fs\";\n+import * as path from \"path\";\n+import * as vscode from \"vscode\";\n+\n+export interface DependenciesDesc {\n+    programName: string;\n+    copybooks: string[];\n+}\n+\n+export function loadDepFile(depFileUri: vscode.Uri): DependenciesDesc {\n+    const copybooks: string[] = fs.readFileSync(depFileUri.fsPath).toString().split(\"\\n\")\n+        .filter(e => e.trim().length > 0)\n+        .map(e => e.trim());\n+    const programName: string = path.basename(depFileUri.fsPath, \".dep\");", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0ODA4MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389548081", "bodyText": "The new Java to be released next week, we should if this regex is actual later on", "author": "temanbrcom", "createdAt": "2020-03-09T09:36:51Z", "path": "clients/cobol-lsp-vscode-extension/src/services/JavaCheck.ts", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as cp from \"child_process\";\n+\n+export class JavaCheck {\n+    public static isJavaVersionSupported(versionString: string) {\n+        // tslint:disable-next-line: max-line-length\n+        const versionPattern = new RegExp('(java|openjdk) (version)? ?\"?((9|[0-9][0-9])|(1|9|[0-9][0-9])\\.(1|8|[0-9][0-9]).*).*');", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTU0OTM3NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/229#discussion_r389549374", "bodyText": "Is better extract the pattern as constant and get rid of the tslint max length", "author": "zacanbrcom", "createdAt": "2020-03-09T09:39:24Z", "path": "clients/cobol-lsp-vscode-extension/src/services/JavaCheck.ts", "diffHunk": "@@ -0,0 +1,44 @@\n+/*\n+ * Copyright (c) 2020 Broadcom.\n+ * The term \"Broadcom\" refers to Broadcom Inc. and/or its subsidiaries.\n+ *\n+ * This program and the accompanying materials are made\n+ * available under the terms of the Eclipse Public License 2.0\n+ * which is available at https://www.eclipse.org/legal/epl-2.0/\n+ *\n+ * SPDX-License-Identifier: EPL-2.0\n+ *\n+ * Contributors:\n+ *   Broadcom, Inc. - initial API and implementation\n+ */\n+import * as cp from \"child_process\";\n+\n+export class JavaCheck {\n+    public static isJavaVersionSupported(versionString: string) {\n+        // tslint:disable-next-line: max-line-length", "originalCommit": "1fb79a4a7334b0def7db4a804e21792e346fb12a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7af570153e034d0d100fe5ee5a3bb097a901cc9c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7af570153e034d0d100fe5ee5a3bb097a901cc9c", "message": "Fix tests and some PR remarks.", "committedDate": "2020-03-09T09:58:16Z", "type": "commit"}, {"oid": "c1f4198e54536d197e8c322ab71a8a029a4f0723", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/c1f4198e54536d197e8c322ab71a8a029a4f0723", "message": "Small cleanups", "committedDate": "2020-03-10T11:28:51Z", "type": "commit"}, {"oid": "ab458f7511b36c07dbb951c8f85c83b1d2639e42", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ab458f7511b36c07dbb951c8f85c83b1d2639e42", "message": "Merge branch 'development' into ext-refactoring", "committedDate": "2020-03-10T11:29:33Z", "type": "commit"}, {"oid": "5ddce0461f8c5a76733c4ad6e1075dd8e5b6e690", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/5ddce0461f8c5a76733c4ad6e1075dd8e5b6e690", "message": "Fix quickfix scope", "committedDate": "2020-03-10T13:08:24Z", "type": "commit"}, {"oid": "79b8cf02615e9530976c7149cd367e8fa0a81dc9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/79b8cf02615e9530976c7149cd367e8fa0a81dc9", "message": "Profile selection command", "committedDate": "2020-03-10T14:30:31Z", "type": "commit"}, {"oid": "623d9e50909c6551aa30d650a58699fa0bfd20d9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/623d9e50909c6551aa30d650a58699fa0bfd20d9", "message": "Update Chengelog", "committedDate": "2020-03-11T08:49:00Z", "type": "commit"}, {"oid": "683a6202805e26b9838376c944f1348afd489663", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/683a6202805e26b9838376c944f1348afd489663", "message": "Merge branch 'development' into ext-refactoring", "committedDate": "2020-03-11T08:51:13Z", "type": "commit"}, {"oid": "462e9fb2d3784468ed3409b2ef29aaa803b28521", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/462e9fb2d3784468ed3409b2ef29aaa803b28521", "message": "Merge branch 'development' into ext-refactoring", "committedDate": "2020-03-11T09:46:26Z", "type": "commit"}]}