{"pr_number": 267, "pr_title": "Calculate and return a full URI containing Zowe profile", "pr_createdAt": "2020-04-06T14:14:34Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267", "timeline": [{"oid": "d06fb887d47674bf8d72baee0f677712a29afce9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/d06fb887d47674bf8d72baee0f677712a29afce9", "message": "Dummy inplementation of ConfigurationMiddleware for #247", "committedDate": "2020-03-16T12:57:14Z", "type": "commit"}, {"oid": "1dd4876377ac7d2611c00f38bf5b32b8f676e699", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1dd4876377ac7d2611c00f38bf5b32b8f676e699", "message": "Fix tests", "committedDate": "2020-03-20T08:45:04Z", "type": "commit"}, {"oid": "ecce541fea7cd59adb1e83ec547872a02d2493ac", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/ecce541fea7cd59adb1e83ec547872a02d2493ac", "message": "Generate path list on request", "committedDate": "2020-03-20T09:40:47Z", "type": "commit"}, {"oid": "0f0aceb13d9dfd3ce37c7528f8af7bb17ffc7439", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/0f0aceb13d9dfd3ce37c7528f8af7bb17ffc7439", "message": "Fix compilation error", "committedDate": "2020-03-23T13:25:43Z", "type": "commit"}, {"oid": "2b05d829e1a25b14c72e12d8a5e34d65c88b3905", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/2b05d829e1a25b14c72e12d8a5e34d65c88b3905", "message": "Retrieve and use calculated path", "committedDate": "2020-04-03T10:47:34Z", "type": "commit"}, {"oid": "1f18ad5791eb4e0649cc4a289501cd627cdbd150", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/1f18ad5791eb4e0649cc4a289501cd627cdbd150", "message": "fix client test for all OS", "committedDate": "2020-04-06T10:51:17Z", "type": "commit"}, {"oid": "fcec785e2ab7709adbc2bf6dd1a5f0ee8ccecd2d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/fcec785e2ab7709adbc2bf6dd1a5f0ee8ccecd2d", "message": "Merge remote-tracking branch 'origin/development' into provide-paths\n\n# Conflicts:\n#\tclients/cobol-lsp-vscode-extension/src/extension.ts\n#\tclients/cobol-lsp-vscode-extension/src/services/CopybooksDownloader.ts\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/CopybookServiceImpl.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/utils/FileSystemUtils.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/FileSystemConfiguration.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/CopybookServiceE2ETest.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/CopybookServiceTest.java\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/mocks/MockFileSystemService.java", "committedDate": "2020-04-06T12:57:46Z", "type": "commit"}, {"oid": "7a9f4a22a492c196af5a6bf6bf1b545d3990a61d", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/7a9f4a22a492c196af5a6bf6bf1b545d3990a61d", "message": "fix conflicts and update methods for the new implementation", "committedDate": "2020-04-06T13:52:12Z", "type": "commit"}, {"oid": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/117b58a40f4c64da7cb726a8c439f7999b193ffd", "message": "update CHANGELOG.md", "committedDate": "2020-04-06T14:02:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1NDk0NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404654944", "bodyText": "Can we remove this extra space?", "author": "zacanbrcom", "createdAt": "2020-04-07T09:07:54Z", "path": "clients/cobol-lsp-vscode-extension/src/__mocks__/vscode.ts", "diffHunk": "@@ -11,14 +11,27 @@\n  * Contributors:\n  *   Broadcom, Inc. - initial API and implementation\n  */\n+import * as url from \"url\";\n \n // tslint:disable: no-namespace no-empty\n export namespace workspace {\n     export const workspaceFolders: [] = [];\n-    export function getConfiguration() {}\n+    export function getConfiguration() { }", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404671154", "bodyText": "This method is unused", "author": "zacanbrcom", "createdAt": "2020-04-07T09:33:32Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/model/ConfigurationSettingsStorable.java", "diffHunk": "@@ -25,10 +25,13 @@\n  */\n @Value\n public class ConfigurationSettingsStorable {\n-  private Object profiles;\n   private List<String> paths;\n \n+  public ConfigurationSettingsStorable(List<String> paths) {\n+    this.paths = paths;\n+  }\n+\n   public static ConfigurationSettingsStorable emptyConfigurationSettingsStorable() {", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3NTQ4OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404675488", "bodyText": "It was intended to be used when we cannot parse the settings. Did the idea change?", "author": "temanbrcom", "createdAt": "2020-04-07T09:40:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg0NTEyNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404845127", "bodyText": "@temanbrcom is right, it is for testing purpose or for the moment we will retrieve a wider configuration section", "author": "sergiuilie", "createdAt": "2020-04-07T14:17:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg3Njc3MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404876771", "bodyText": "I still see that is not used, is planned to be reused later?", "author": "zacanbrcom", "createdAt": "2020-04-07T14:57:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg4MzQyNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404883427", "bodyText": "yes, if needed", "author": "sergiuilie", "createdAt": "2020-04-07T15:06:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg5NDM5OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404894398", "bodyText": "Ok so If I understood correctly at moment we don't need it and we can remove it - we can restore it back from the version control if needed, agree?", "author": "zacanbrcom", "createdAt": "2020-04-07T15:20:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDg5NjE1Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404896152", "bodyText": "sure, done", "author": "sergiuilie", "createdAt": "2020-04-07T15:22:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3MTE1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1NjY5MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404656690", "bodyText": "Extracting from the javadoc of this method :\nIn the case of the default provider, this method returns the same separator as {@link java.io.File#separator}.\nSo, you may use just File.separator here", "author": "temanbrcom", "createdAt": "2020-04-07T09:10:45Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/utils/FileSystemUtils.java", "diffHunk": "@@ -46,6 +46,13 @@\n @UtilityClass\n public class FileSystemUtils {\n   private final List<String> ALLOWED_EXTENSIONS = Arrays.asList(\"cpy\", \"cbl\", \"cobol\", \"cob\");\n+  private final String COPYBOOKS_FOLDER = \".copybooks\";\n+\n+  /** @return the representation os based of the FS separator */\n+  public static String filesystemSeparator() {\n+    return FileSystems.getDefault().getSeparator();", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY4NTMxNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404685314", "bodyText": "When I introduced the filesystemSeparator()I decided to use the NIO version instead of the Java.IO FileSystems.getDefault().getSeparator();", "author": "zacanbrcom", "createdAt": "2020-04-07T09:56:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1NjY5MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1OTU4NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404659585", "bodyText": "I'm not sure that this name is more descriptive, but it meets the naming convention at least \ud83e\udd14", "author": "temanbrcom", "createdAt": "2020-04-07T09:15:14Z", "path": "clients/cobol-lsp-vscode-extension/src/services/CopybookFix.ts", "diffHunk": "@@ -15,7 +15,7 @@\n import * as vscode from \"vscode\";\n import { DownloadQueue } from \"./DownloadQueue\";\n \n-export class CopybookResolver {\n+export class CopybookFix {", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY4NTYwOA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404685608", "bodyText": "well..the naming convention should be QuickFix right?", "author": "zacanbrcom", "createdAt": "2020-04-07T09:57:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1OTU4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDcwNzg1MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404707851", "bodyText": "I meant that \"fix\" is ambiguous here. Only after your explanation, I understood the real purpose of the class.", "author": "temanbrcom", "createdAt": "2020-04-07T10:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1OTU4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDcxNTI0Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404715242", "bodyText": "Well, it's not QuickFix only there. Actually, there is no QuickFix there.", "author": "ishche", "createdAt": "2020-04-07T10:49:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1OTU4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDc3NzE1Nw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404777157", "bodyText": "I think I need an on-demand explanation like Andrei.. so please use a better name or a comment  that clarify the intent", "author": "zacanbrcom", "createdAt": "2020-04-07T12:42:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY1OTU4NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY2NjAzNA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404666034", "bodyText": "I would prefer to have it wrapped with Collections#unmodifiableList() to ensure immutability.", "author": "temanbrcom", "createdAt": "2020-04-07T09:25:37Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/model/ConfigurationSettingsStorable.java", "diffHunk": "@@ -25,10 +25,13 @@\n  */\n @Value\n public class ConfigurationSettingsStorable {\n-  private Object profiles;\n   private List<String> paths;\n \n+  public ConfigurationSettingsStorable(List<String> paths) {\n+    this.paths = paths;", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3Mzc1MQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404673751", "bodyText": "These fields should be also static", "author": "temanbrcom", "createdAt": "2020-04-07T09:37:49Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/utils/FileSystemUtils.java", "diffHunk": "@@ -46,6 +46,13 @@\n @UtilityClass\n public class FileSystemUtils {\n   private final List<String> ALLOWED_EXTENSIONS = Arrays.asList(\"cpy\", \"cbl\", \"cobol\", \"cob\");\n+  private final String COPYBOOKS_FOLDER = \".copybooks\";", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3NjY1Mg==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404676652", "bodyText": "Why this init for nested copybooks was removed?", "author": "zacanbrcom", "createdAt": "2020-04-07T09:42:29Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/FileSystemConfiguration.java", "diffHunk": "@@ -93,14 +95,14 @@\n    */\n   @Before\n   public void buildTempFilesystem() {\n-    intializeSettingsWithSomeContent();\n+    intializeSettings();\n \n     createWorkspaceFolderStructure();\n     createCopybookFolders();\n     createDependencyFolder();\n \n+    // populate copybook folder and dependency file with some content\n     createCopybookFiles();\n-    createNestedCopybooks();", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDcwOTEwNw==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404709107", "bodyText": "Ok I got it - cause when I tested the nested copybooks I simulate that the cobol file have a reference to another copybook without psychically stor e in the file. So, is fair that you removed it from the initial activities but please remove also the method definition at line 179", "author": "zacanbrcom", "createdAt": "2020-04-07T10:38:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3NjY1Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3NzkxOQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404677919", "bodyText": "There is an extra space in the constructor", "author": "zacanbrcom", "createdAt": "2020-04-07T09:44:28Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/CopybookSearchWithoutConfigTest.java", "diffHunk": "@@ -129,7 +129,7 @@ public void findCopybookWithOnlyProfileDefined() {\n     // simulate that user have not provided settings for profile and datasetlist but the\n     // preprocessor found a copybook.\n     when(settingsProvider.get())\n-        .thenReturn(new ConfigurationSettingsStorable(\"myProfile\", Collections.emptyList()));\n+        .thenReturn(new ConfigurationSettingsStorable( Collections.emptyList()));", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY3OTg3OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404679878", "bodyText": "Since we remove the profile concept cause is built into the path I prefer remove it as well from tests", "author": "zacanbrcom", "createdAt": "2020-04-07T09:47:49Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/CopybookServiceTest.java", "diffHunk": "@@ -151,9 +141,8 @@ public void findCopybookWithDatasetFilteringNegativeTest() {\n   public void findCopybookWithWrongFolderStructure() {\n     assertNull(\n         copybookService.findCopybook(\n-            CPY_NAME_WITHOUT_EXT,\n-            (String) configurationSettingsStorable.getProfiles(),\n-            Collections.singletonList(\"HLQLF02.DSNAME1\")));\n+                CPY_NAME_WITHOUT_EXT,\n+            Collections.singletonList(PROFILE_NAME + filesystemSeparator() + \"HLQLF02.DSNAME1\")));", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNDY4MDI2MA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/267#discussion_r404680260", "bodyText": "Extra space in the constructor", "author": "zacanbrcom", "createdAt": "2020-04-07T09:48:28Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/InitializeConfigurationTest.java", "diffHunk": "@@ -57,8 +57,7 @@ public void testInitializeConfiguration() {\n \n     when(settingsProvider.get())\n         .thenReturn(\n-            new ConfigurationSettingsStorable(\n-                PROFILE_NAME, unmodifiableList(Arrays.asList(DSNAME_1, DSNAME_2))));\n+            new ConfigurationSettingsStorable( unmodifiableList(Arrays.asList(DSNAME_1, DSNAME_2))));", "originalCommit": "117b58a40f4c64da7cb726a8c439f7999b193ffd", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "749f843f5410474be038c95dc3c46b57d165cb6c", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/749f843f5410474be038c95dc3c46b57d165cb6c", "message": "address required changes and fix merge conflicts", "committedDate": "2020-04-07T14:50:24Z", "type": "commit"}, {"oid": "e296577528263d01c93c0f947f3d0578d6c9f786", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/e296577528263d01c93c0f947f3d0578d6c9f786", "message": "Merge remote-tracking branch 'origin/development' into provide-paths\n\n# Conflicts:\n#\tclients/cobol-lsp-vscode-extension/src/services/CopybooksDownloader.ts\n#\tcom.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/delegates/dependency/CopybookDependencyServiceImpl.java", "committedDate": "2020-04-07T15:02:32Z", "type": "commit"}, {"oid": "3d0f044aff227e63893c78747d34f85156b617db", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/3d0f044aff227e63893c78747d34f85156b617db", "message": "address required changes", "committedDate": "2020-04-07T15:22:10Z", "type": "commit"}, {"oid": "31d1dc17e4dffd2054a198cfe2b72d30a6908aa9", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/31d1dc17e4dffd2054a198cfe2b72d30a6908aa9", "message": "add missing CHANGELOG.md", "committedDate": "2020-04-08T09:14:42Z", "type": "commit"}]}