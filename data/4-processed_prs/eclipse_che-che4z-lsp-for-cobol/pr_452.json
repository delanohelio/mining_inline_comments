{"pr_number": 452, "pr_title": "fix: disable copybook analysis only on extended document", "pr_createdAt": "2020-08-12T13:34:24Z", "pr_url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452", "timeline": [{"oid": "062073f31b1961a02a1ce2e75ad0785cfeab0999", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/062073f31b1961a02a1ce2e75ad0785cfeab0999", "message": "fix: disable copybook analysis only on extended document", "committedDate": "2020-08-12T13:21:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTI4MDkxNQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452#discussion_r469280915", "bodyText": "!\"SKIP\".equals(copybookProcessingMode)", "author": "asatklichov", "createdAt": "2020-08-12T13:59:35Z", "path": "com.ca.lsp.cobol/lsp-core-cobol-parser/src/main/java/com/ca/lsp/core/cobol/preprocessor/sub/document/impl/CobolSemanticParserListenerImpl.java", "diffHunk": "@@ -138,7 +138,7 @@ public void exitCopyStatement(@Nonnull CopyStatementContext ctx) {\n      * define the copy book\n      */\n \n-    if (copybookProcessingMode.equals(\"ENABLED\")) {\n+    if (!copybookProcessingMode.equals(\"SKIP\")) {", "originalCommit": "062073f31b1961a02a1ce2e75ad0785cfeab0999", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "dc52f01d40f277932f12d33d8de7b8c35f05a2d3", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/dc52f01d40f277932f12d33d8de7b8c35f05a2d3", "message": "refactor: simplify logic getting rid of text document sync type", "committedDate": "2020-08-13T07:05:56Z", "type": "commit"}, {"oid": "803579668d2cef7a1ee25002a6e1040273dd7084", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/803579668d2cef7a1ee25002a6e1040273dd7084", "message": "Merge remote-tracking branch 'remotes/origin/development' into hotfix_did_change_cpy", "committedDate": "2020-08-13T07:06:22Z", "type": "commit"}, {"oid": "90b21dd31c12b0d58f628a8fb2555b9dc60774d7", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/90b21dd31c12b0d58f628a8fb2555b9dc60774d7", "message": "fix: avoid partially copybook names to be in queue for download", "committedDate": "2020-08-13T08:45:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwNDc4OA==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452#discussion_r469804788", "bodyText": "Shouldn't the modes here be the same?", "author": "temanbrcom", "createdAt": "2020-08-13T09:01:49Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/test/java/com/ca/lsp/cobol/service/DocumentExtensionTests.java", "diffHunk": "@@ -82,11 +82,11 @@ private void checkExtensionMatches(String extension) {\n     fireDidOpen(extension, uri);\n     verify(engine, timeout(10000).times(1)).analyze(uri, TEXT, CopybookProcessingMode.ENABLED);\n \n-    when(engine.analyze(uri, TEXT, CopybookProcessingMode.DISABLED))\n+    when(engine.analyze(uri, TEXT, CopybookProcessingMode.ENABLED))\n         .thenReturn(AnalysisResult.empty());\n     fireDidChange(uri);\n     verify(engine, timeout(10000))\n-        .analyze(uri, INCORRECT_TEXT_EXAMPLE, CopybookProcessingMode.DISABLED);\n+        .analyze(uri, INCORRECT_TEXT_EXAMPLE, CopybookProcessingMode.SKIP);", "originalCommit": "90b21dd31c12b0d58f628a8fb2555b9dc60774d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgxMDc4NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452#discussion_r469810785", "bodyText": "got it - ok, I was focused on the verify, fixed", "author": "zacanbrcom", "createdAt": "2020-08-13T09:11:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwNDc4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwNjA2NQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452#discussion_r469806065", "bodyText": "In fact, you may pass sync type as an enum value, not as a string, and just compare them by link equity", "author": "temanbrcom", "createdAt": "2020-08-13T09:04:08Z", "path": "com.ca.lsp.cobol/lsp-service-cobol/src/main/java/com/ca/lsp/cobol/service/CopybookProcessingMode.java", "diffHunk": "@@ -14,32 +14,40 @@\n  */\n package com.ca.lsp.cobol.service;\n \n+import javax.annotation.Nonnull;\n+\n import static com.ca.lsp.cobol.service.utils.WorkspaceFileService.isFileUnderExtendedSourceFolder;\n \n-/** This enum class used to track text synchronization type for the processed document. */\n+/** This enum class used to allow or not the copybook analysis for the processed document. */\n public enum CopybookProcessingMode {\n   ENABLED,\n-  DISABLED;\n+  DISABLED,\n+  SKIP;\n \n   /**\n-   * This method verify if enable or disable copybook management based on two factors: 1) the file\n-   * is an extended source file, 2) the file is open in DID_OPEN|DID_CHANGE\n+   * This method allow to enable or disable copybook management based on two factors: 1) the file is\n+   * an extended source file, 2) the file is open in DID_OPEN|DID_CHANGE\n    *\n    * @param uri of the document opened in the editor by the client\n-   * @param textDocSyncType define the document sync mode that could be [{@link\n-   *     TextDocumentSyncType#DID_OPEN}|{@link TextDocumentSyncType#DID_CHANGE}]\n+   * @param textDocumentSyncType the sync type of the document [{@link\n+   *     TextDocumentSyncType#DID_OPEN} or {@link TextDocumentSyncType#DID_CHANGE}]\n    * @return A value of that could be [{@link CopybookProcessingMode#ENABLED}|{@link\n-   *     CopybookProcessingMode#DISABLED}]\n+   *     CopybookProcessingMode#DISABLED}] if the document is an extended document.\n    */\n   public static CopybookProcessingMode getCopybookProcessingMode(", "originalCommit": "90b21dd31c12b0d58f628a8fb2555b9dc60774d7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwOTIzMQ==", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/pull/452#discussion_r469809231", "bodyText": "right \ud83d\udc4d", "author": "zacanbrcom", "createdAt": "2020-08-13T09:09:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTgwNjA2NQ=="}], "type": "inlineReview"}, {"oid": "28c4c6331ef41601af9d9130f949c2825b4c3498", "url": "https://github.com/eclipse/che-che4z-lsp-for-cobol/commit/28c4c6331ef41601af9d9130f949c2825b4c3498", "message": "fix: use enum instead of string and update test", "committedDate": "2020-08-13T09:16:16Z", "type": "commit"}]}