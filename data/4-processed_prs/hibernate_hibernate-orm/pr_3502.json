{"pr_number": 3502, "pr_title": "HHH-14152 reserve end-of-line chars in MultiLineImportExtractor", "pr_createdAt": "2020-08-18T15:45:37Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3502", "timeline": [{"oid": "ec47ad30abae0b591f469926dda34e839774beb5", "url": "https://github.com/hibernate/hibernate-orm/commit/ec47ad30abae0b591f469926dda34e839774beb5", "message": "HHH-14153 reserve end-of-line chars in MultiLineImportExtractor", "committedDate": "2020-08-18T15:26:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjI5ODIxNQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3502#discussion_r472298215", "bodyText": "The above three lines are actually mixture of all kinds of white spaces, including ' ', '\\t' and \\n.", "author": "NathanQingyangXu", "createdAt": "2020-08-18T15:47:14Z", "path": "hibernate-core/src/test/resources/org/hibernate/test/fileimport/multi-line-statements.sql", "diffHunk": "@@ -23,12 +23,14 @@ INSERT INTO test_data VALUES (2, 'Multi-line comment line 1\n -- INSERT INTO test_data VALUES (1, NULL);\n \n INSERT INTO test_data VALUES (3 /* 'third record' */, NULL /* value */); -- with NULL value\n-INSERT INTO test_data (id, text)\n-     VALUES\n-          (\n-            4 -- another record\n-          , NULL\n-          );\n-\n+INSERT INTO test_data\n+VALUES\n+\t(\n+    \t4 -- another record\n+     \t, NULL\n+    );\n -- comment;\n -- comment;\n+\n+\n+", "originalCommit": "ec47ad30abae0b591f469926dda34e839774beb5", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMyMzQwNA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3502#discussion_r472323404", "bodyText": "What is the reason for parsing trailing whitespace chars?", "author": "beikov", "createdAt": "2020-08-18T16:25:21Z", "path": "hibernate-core/src/main/antlr/sql-script.g", "diffHunk": "@@ -56,7 +56,7 @@ script\n     ;\n \n statement\n-\t: { statementStarted(); } (statementPart)*  DELIMITER { statementEnded(); }\n+\t: { statementStarted(); } (statementPart)* DELIMITER (WS_CHAR)* { statementEnded(); }", "originalCommit": "ec47ad30abae0b591f469926dda34e839774beb5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjM1Mjg4Mg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3502#discussion_r472352882", "bodyText": "It seems intuitive to me, though not 100% necessary for this PR. After reserving end-of-line chars, we have to remember to remove the end-of-line after last ; (which would have been skipped previously), which seems too demanding to me. It seems natural to expand \\n to other white spaces.", "author": "NathanQingyangXu", "createdAt": "2020-08-18T17:10:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMyMzQwNA=="}], "type": "inlineReview"}]}