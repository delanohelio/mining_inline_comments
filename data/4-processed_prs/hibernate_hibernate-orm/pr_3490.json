{"pr_number": 3490, "pr_title": "HHH-14129 Bidirectional relationship with @NotNull fails to save", "pr_createdAt": "2020-08-03T09:43:50Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3490", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM5MDQ2NA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3490#discussion_r464390464", "bodyText": "the method name is a little bit confusing for the real issue is null parent", "author": "NathanQingyangXu", "createdAt": "2020-08-03T12:47:24Z", "path": "hibernate-core/src/test/java/org/hibernate/test/annotations/manytoone/NotNullManyToOneTest.java", "diffHunk": "@@ -0,0 +1,93 @@\n+package org.hibernate.test.annotations.manytoone;\n+\n+import javax.persistence.CascadeType;\n+import javax.persistence.Entity;\n+import javax.persistence.GeneratedValue;\n+import javax.persistence.GenerationType;\n+import javax.persistence.Id;\n+import javax.persistence.ManyToOne;\n+import javax.validation.constraints.NotNull;\n+\n+import org.hibernate.cfg.AvailableSettings;\n+import org.hibernate.cfg.Configuration;\n+import org.hibernate.cfg.beanvalidation.ValidationMode;\n+\n+import org.hibernate.testing.TestForIssue;\n+import org.hibernate.testing.junit4.BaseCoreFunctionalTestCase;\n+import org.junit.Test;\n+\n+/**\n+ * @author Andrea Boriero\n+ */\n+@TestForIssue(jiraKey = \"HHH-13959\")\n+public class NotNullManyToOneTest extends BaseCoreFunctionalTestCase {\n+\n+\t@Override\n+\tprotected void configure(Configuration configuration) {\n+\t\tconfiguration.setProperty( AvailableSettings.JPA_VALIDATION_MODE, ValidationMode.AUTO.name() );\n+\t}\n+\n+\t@Override\n+\tprotected Class<?>[] getAnnotatedClasses() {\n+\t\treturn new Class[] {\n+\t\t\t\tParent.class,\n+\t\t\t\tChild.class\n+\t\t};\n+\t}\n+\n+\t@Test\n+\tpublic void testSave() {\n+\t\tinTransaction(\n+\t\t\t\tsession -> {\n+\t\t\t\t\tParent parent = new Parent( new Child() );\n+\t\t\t\t\tsession.save( parent );\n+\t\t\t\t}\n+\t\t);\n+\t}\n+\n+\t@Test(expected = javax.validation.ConstraintViolationException.class)\n+\tpublic void testSaveWithNullChild() {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM5NDUzNg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3490#discussion_r464394536", "bodyText": "fixed it, Thanks", "author": "dreab8", "createdAt": "2020-08-03T12:55:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDM5MDQ2NA=="}], "type": "inlineReview"}, {"oid": "db4402a11332669563faf81829a1b459f16de6b4", "url": "https://github.com/hibernate/hibernate-orm/commit/db4402a11332669563faf81829a1b459f16de6b4", "message": "HHH-14129 Add test for issue", "committedDate": "2020-08-03T12:54:24Z", "type": "commit"}, {"oid": "710658de4ef142090b42b0004ad928dbc1fa71ed", "url": "https://github.com/hibernate/hibernate-orm/commit/710658de4ef142090b42b0004ad928dbc1fa71ed", "message": "HHH-14129 Bidirectional relationship with @NotNull fails to save", "committedDate": "2020-08-03T12:54:24Z", "type": "commit"}, {"oid": "710658de4ef142090b42b0004ad928dbc1fa71ed", "url": "https://github.com/hibernate/hibernate-orm/commit/710658de4ef142090b42b0004ad928dbc1fa71ed", "message": "HHH-14129 Bidirectional relationship with @NotNull fails to save", "committedDate": "2020-08-03T12:54:24Z", "type": "forcePushed"}]}