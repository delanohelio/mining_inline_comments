{"pr_number": 3539, "pr_title": "HHH-14201 Fix EntityJoinFromElement JOIN order issue", "pr_createdAt": "2020-09-03T11:28:18Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3539", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUwNjAwNQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3539#discussion_r484506005", "bodyText": "The above changes include:\n\nadd ENTITY_JOIN to tableJoin so it can show up anywhere and SQL generated won't ignore it;\nchange the variable name to better reflect that ENTITY_JOIN is not special (original naming implies that it is only at the top level).", "author": "NathanQingyangXu", "createdAt": "2020-09-07T16:01:11Z", "path": "hibernate-core/src/main/antlr/sql-gen.g", "diffHunk": "@@ -309,12 +309,13 @@ fromTable\n \t// Write the table node (from fragment) and all the join fragments associated with it.\n \t: #( a:FROM_FRAGMENT  { out(a); } (tableJoin [ a ])* { fromFragmentSeparator(a); } )\n \t| #( b:JOIN_FRAGMENT  { out(b); } (tableJoin [ b ])* { fromFragmentSeparator(b); } )\n-\t| #( e:ENTITY_JOIN    { out(e); } (tableJoin [ e ])* { fromFragmentSeparator(e); } )\n+\t| #( c:ENTITY_JOIN    { out(c); } (tableJoin [ c ])* { fromFragmentSeparator(c); } )\n \t;\n \n tableJoin [ AST parent ]\n-\t: #( c:JOIN_FRAGMENT { out(\" \"); out(c); } (tableJoin [ c ] )* )\n-\t| #( d:FROM_FRAGMENT { nestedFromFragment(d,parent); } (tableJoin [ d ] )* )\n+\t: #( d:JOIN_FRAGMENT { out(\" \"); out(d); } (tableJoin [ d ] )* )\n+\t| #( e:FROM_FRAGMENT { nestedFromFragment(e,parent); } (tableJoin [ e ] )* )\n+\t| #( f:ENTITY_JOIN   { out(\" \"); out(f); } (tableJoin [ f ] )* )\n \t;", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDUwNjc4Mg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3539#discussion_r484506782", "bodyText": "Now the above field has been redundant for it is included in fromElements which reserves join order via LinkedHashSet.", "author": "NathanQingyangXu", "createdAt": "2020-09-07T16:03:38Z", "path": "hibernate-core/src/main/java/org/hibernate/hql/internal/ast/tree/FromClause.java", "diffHunk": "@@ -61,8 +61,6 @@\n \t */\n \tprivate List impliedElements = new LinkedList();\n \n-\tprivate List<EntityJoinFromElement> entityJoinFromElements;", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "2187869d8a827d666b5435889cd2614999fb9ee8", "url": "https://github.com/hibernate/hibernate-orm/commit/2187869d8a827d666b5435889cd2614999fb9ee8", "message": "HHH-14201 fix HQL JOIN order issue", "committedDate": "2020-09-08T01:36:04Z", "type": "commit"}, {"oid": "2187869d8a827d666b5435889cd2614999fb9ee8", "url": "https://github.com/hibernate/hibernate-orm/commit/2187869d8a827d666b5435889cd2614999fb9ee8", "message": "HHH-14201 fix HQL JOIN order issue", "committedDate": "2020-09-08T01:36:04Z", "type": "forcePushed"}]}