{"pr_number": 3625, "pr_title": "HHH-14316 HHH-14317 Avoid accessing potentially null variables", "pr_createdAt": "2020-11-09T14:29:02Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3625", "timeline": [{"oid": "ff3e3cd71189bab877065f3dba68b3f4fc053f00", "url": "https://github.com/hibernate/hibernate-orm/commit/ff3e3cd71189bab877065f3dba68b3f4fc053f00", "message": "HHH-14316 Avoid accessing state in DriverManagerConnectionProviderImpl if null", "committedDate": "2020-11-09T14:15:57Z", "type": "commit"}, {"oid": "5446a1ac7b84b93cfbead9429774218e86e7191d", "url": "https://github.com/hibernate/hibernate-orm/commit/5446a1ac7b84b93cfbead9429774218e86e7191d", "message": "HHH-14317 Avoid closing datasource in AgroalConnectionProvider if datasource is not initialized", "committedDate": "2020-11-09T14:16:03Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg1NTA5OQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3625#discussion_r519855099", "bodyText": "I wasn't sure about this one. The Agroal implementation returns a null connection but that really doesn't sound like a good idea.\nI'll let you judge of that, I can adjust (or even drop these 2 checks if you think they are useless).", "author": "gsmet", "createdAt": "2020-11-09T14:29:54Z", "path": "hibernate-core/src/main/java/org/hibernate/engine/jdbc/connections/internal/DriverManagerConnectionProviderImpl.java", "diffHunk": "@@ -168,11 +168,17 @@ private static Driver loadDriverIfPossible(String driverClassName, ServiceRegist\n \n \t@Override\n \tpublic Connection getConnection() throws SQLException {\n+\t\tif ( state == null ) {", "originalCommit": "5446a1ac7b84b93cfbead9429774218e86e7191d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg1ODE5Mg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3625#discussion_r519858192", "bodyText": "This seems sensible, thanks.", "author": "Sanne", "createdAt": "2020-11-09T14:34:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTg1NTA5OQ=="}], "type": "inlineReview"}]}