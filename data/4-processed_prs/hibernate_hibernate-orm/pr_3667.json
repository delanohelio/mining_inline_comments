{"pr_number": 3667, "pr_title": "Various fixes for 6.0", "pr_createdAt": "2020-11-26T16:56:04Z", "pr_url": "https://github.com/hibernate/hibernate-orm/pull/3667", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE2MTgzNw==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531161837", "bodyText": "Whoah, there's gotta be a better way to handle this! We really shouldn't need an expression rule this messy.\nSo I speculate that perhaps you're trying to really strictly enforce the grammar of the language in the parser, which sounds like a good thing but, suprisingly, it's actually a really bad idea, since generated parsers generally produce very bad error messages. Further, it means that tools like IDE editors fail at parsing the code even for very minor syntax errors.\nIt's much better to be permissive in the parser, and then enforce restrictions in the code which interprets the AST.", "author": "gavinking", "createdAt": "2020-11-26T17:28:15Z", "path": "hibernate-core/src/main/antlr/org/hibernate/grammars/hql/HqlParser.g4", "diffHunk": "@@ -404,23 +396,23 @@ likeEscape\n \n expression\n \t//highest to lowest precedence\n-\t: LEFT_PAREN expression RIGHT_PAREN\t\t\t\t# GroupedExpression\n-\t| LEFT_PAREN subQuery RIGHT_PAREN\t\t\t\t# SubQueryExpression\n-\t| caseList\t\t\t\t\t\t\t\t\t\t# CaseExpression\n-\t| literal\t\t\t\t\t\t\t\t\t\t# LiteralExpression\n-\t| parameter\t\t\t\t\t\t\t\t\t\t# ParameterExpression\n-\t| entityTypeReference\t\t\t\t\t\t\t# EntityTypeExpression\n-\t| entityIdReference\t\t\t\t\t\t\t\t# EntityIdExpression\n-\t| entityVersionReference\t\t\t\t\t\t# EntityVersionExpression\n-\t| entityNaturalIdReference\t\t\t\t\t\t# EntityNaturalIdExpression\n-\t| path\t\t\t\t\t\t\t\t\t\t\t# PathExpression\n-\t| function\t\t\t\t\t\t\t\t\t\t# FunctionExpression\n-\t| signOperator expression\t\t\t\t\t\t# UnaryExpression\n-\t| expression datetimeField  \t\t\t\t\t# ToDurationExpression\n-\t| expression BY datetimeField\t\t\t\t\t# FromDurationExpression\n-\t| expression multiplicativeOperator expression\t# MultiplicationExpression\n-\t| expression additiveOperator expression\t\t# AdditionExpression\n-\t| expression DOUBLE_PIPE expression\t\t\t\t# ConcatenationExpression\n+\t: LEFT_PAREN expression RIGHT_PAREN\t\t\t\t\t# GroupedExpression\n+\t| LEFT_PAREN subQuery RIGHT_PAREN\t\t\t\t\t# SubQueryExpression\n+\t| caseList collationSpecification?\t\t\t\t\t# CaseExpression\n+\t| literal collationSpecification?\t\t\t\t\t# LiteralExpression\n+\t| parameter collationSpecification?\t\t\t\t\t# ParameterExpression\n+\t| entityTypeReference\t\t\t\t\t\t\t\t# EntityTypeExpression\n+\t| entityIdReference collationSpecification?\t\t\t# EntityIdExpression\n+\t| entityVersionReference collationSpecification?\t# EntityVersionExpression\n+\t| entityNaturalIdReference collationSpecification?\t# EntityNaturalIdExpression\n+\t| path collationSpecification?\t\t\t\t\t\t# PathExpression\n+\t| function collationSpecification?\t\t\t\t\t# FunctionExpression\n+\t| signOperator expression\t\t\t\t\t\t\t# UnaryExpression\n+\t| expression datetimeField  \t\t\t\t\t\t# ToDurationExpression\n+\t| expression BY datetimeField\t\t\t\t\t\t# FromDurationExpression\n+\t| expression multiplicativeOperator expression\t\t# MultiplicationExpression\n+\t| expression additiveOperator expression\t\t\t# AdditionExpression\n+\t| expression DOUBLE_PIPE expression\t\t\t\t\t# ConcatenationExpression", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MTA2Ng==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531181066", "bodyText": "@beikov\nWhat I mean is, I would much rather see the error\nsigned expression may not have a collation\n\nThan\nunexpected token: identifier", "author": "gavinking", "createdAt": "2020-11-26T18:24:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE2MTgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE5MTEwNQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531191105", "bodyText": "Gotcha, I'll improve that.", "author": "beikov", "createdAt": "2020-11-26T18:58:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE2MTgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI0NzI2MA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531247260", "bodyText": "thanks", "author": "gavinking", "createdAt": "2020-11-26T22:57:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE2MTgzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcwNTEyMQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531705121", "bodyText": "Should be fixed now", "author": "beikov", "createdAt": "2020-11-27T17:14:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE2MTgzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MTcyMA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531181720", "bodyText": "Why precisely was this needed?", "author": "gavinking", "createdAt": "2020-11-26T18:26:33Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/DB2Dialect.java", "diffHunk": "@@ -572,6 +572,8 @@ protected SqlTypeDescriptor getSqlTypeDescriptorOverride(int sqlCode) {\n \t\t\t// Therefore here we overwrite the sql type descriptors to\n \t\t\t// use the non-N variants which are supported.\n \t\t\tswitch ( sqlCode ) {\n+\t\t\t\tcase Types.BOOLEAN:\n+\t\t\t\t\treturn SmallIntTypeDescriptor.INSTANCE;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE5MTY3NQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531191675", "bodyText": "DB2 has no booleans. I adapted this from https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/DB2Dialect.java#L502 as I thought this was missed.", "author": "beikov", "createdAt": "2020-11-26T19:00:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MTcyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI0OTUyMg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531249522", "bodyText": "DB2 has no booleans.\n\nI'm pretty sure that can't be right, since I know for sure I extensively tested the new DB2Dialect, and I'm using boolean as the mapping for both BIT and BOOLEAN.", "author": "gavinking", "createdAt": "2020-11-26T23:11:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MTcyMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI1MDM0MA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531250340", "bodyText": "Apparently the answer is that BOOLEAN was introduced in DB2 11. So it looks like we need to make that type mapping conditional on the database version.", "author": "gavinking", "createdAt": "2020-11-26T23:15:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MTcyMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjE0MA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531182140", "bodyText": "This should not be necessary, and is probably wrong.", "author": "gavinking", "createdAt": "2020-11-26T18:27:59Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/DerbyDialect.java", "diffHunk": "@@ -87,11 +91,14 @@ public DerbyDialect(int version) {\n \t\tregisterColumnType( Types.BIT, 1, \"boolean\" ); //no bit\n \t\tregisterColumnType( Types.BIT, \"smallint\" ); //no bit\n \t\tregisterColumnType( Types.TINYINT, \"smallint\" ); //no tinyint\n+\t\tregisterColumnType( Types.CHAR, \"char(1)\" );", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE5MTkyOA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531191928", "bodyText": "Adapted from https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/dialect/DB2Dialect.java#L95 which was the super type of the derby dialect", "author": "beikov", "createdAt": "2020-11-26T19:01:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI0NzAxNA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531247014", "bodyText": "Yeah but if you look in Dialect, we now have registerColumnType( Types.CHAR, \"char($l)\" );, and you're overriding that here with \"char(1)\" which wrongly treats the SQL char() type as a single character instead of a string.", "author": "gavinking", "createdAt": "2020-11-26T22:55:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjE0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjgwNQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531182805", "bodyText": "No, we're not using this mapping anymore in Hibernate 6, that was what we used to using in Hibernate 5 and it was wrong and I changed it across all the Dialects.\nI'm pretty sure you shouldn't need to be changing type mappings for Derby because I tested the shit out of all this on Derby when I cleaned up the dialects.", "author": "gavinking", "createdAt": "2020-11-26T18:30:10Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/DerbyDialect.java", "diffHunk": "@@ -87,11 +91,14 @@ public DerbyDialect(int version) {\n \t\tregisterColumnType( Types.BIT, 1, \"boolean\" ); //no bit\n \t\tregisterColumnType( Types.BIT, \"smallint\" ); //no bit\n \t\tregisterColumnType( Types.TINYINT, \"smallint\" ); //no tinyint\n+\t\tregisterColumnType( Types.CHAR, \"char(1)\" );\n \n \t\t//HHH-12827: map them both to the same type to\n \t\t//           avoid problems with schema update\n //\t\tregisterColumnType( Types.DECIMAL, \"decimal($p,$s)\" );\n \t\tregisterColumnType( Types.NUMERIC, \"decimal($p,$s)\" );\n+\t\tregisterColumnType( Types.FLOAT, \"float\" );\n+\t\tregisterColumnType( Types.DOUBLE, \"double\" );", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4NDYwMg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531184602", "bodyText": "See\n\nhttps://db.apache.org/derby/docs/10.8/ref/rrefsqlj27281.html\nhttps://db.apache.org/derby/docs/10.8/ref/rrefsqljdoubleprecision.html\n\nThe default type mappings in Dialect should be perfect for Derby.\nIf you map Types.FLOAT to float, then Java floats and doubles will both be mapped to the precision-less SQL type float`.", "author": "gavinking", "createdAt": "2020-11-26T18:36:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjgwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE5MjM1NQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531192355", "bodyText": "Ok, I just tried to copy over parts from 5 that seemed to be missing, but if you did this on purpose, I'll remove the double and float registrations.", "author": "beikov", "createdAt": "2020-11-26T19:03:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjgwNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI0NzE5NA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531247194", "bodyText": "No no, please don't do that. Nothing is missing, it's all defined in the superclass now. If you just copy stuff over from Hibernate 5, it will be wrong, and you'll be hammering work I did that took me literally weeks to get right.", "author": "gavinking", "createdAt": "2020-11-26T22:56:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4MjgwNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4NDk1NQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531184955", "bodyText": "Same as above: why was this necessary?", "author": "gavinking", "createdAt": "2020-11-26T18:37:37Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/DerbyDialect.java", "diffHunk": "@@ -440,9 +453,16 @@ public boolean supportsTupleDistinctCounts() {\n \t}\n \n \tprotected SqlTypeDescriptor getSqlTypeDescriptorOverride(int sqlCode) {\n-\t\treturn sqlCode == Types.NUMERIC\n-\t\t\t\t? DecimalTypeDescriptor.INSTANCE\n-\t\t\t\t: super.getSqlTypeDescriptorOverride(sqlCode);\n+\t\tswitch ( sqlCode ) {\n+\t\t\tcase Types.BOOLEAN:\n+\t\t\t\treturn SmallIntTypeDescriptor.INSTANCE;", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE5MjQ4Nw==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531192487", "bodyText": "Same rationale as for DB2 from above: #3667 (comment)\nDerby has no booleans", "author": "beikov", "createdAt": "2020-11-26T19:03:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4NDk1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTI0ODI1MQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531248251", "bodyText": "Are you certain? https://db.apache.org/derby/docs/10.8/ref/rrefsqljBoolean.html", "author": "gavinking", "createdAt": "2020-11-26T23:03:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTE4NDk1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531724926", "bodyText": "38?\nIs there something magical about this number?", "author": "gavinking", "createdAt": "2020-11-27T18:22:56Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/DerbyDialect.java", "diffHunk": "@@ -252,6 +262,12 @@ public String castPattern(CastType from, CastType to) {\n \t\t\t\t\treturn \"case ?1 when false then 0 when true then 1 end\";\n \t\t\t\t}\n \t\t\t\tbreak;\n+\t\t\tcase STRING:\n+\t\t\t\t// See https://issues.apache.org/jira/browse/DERBY-2072\n+\t\t\t\tif ( from.getKind() == CastTypeKind.NUMERIC ) {\n+\t\t\t\t\treturn \"cast(cast(?1 as char(38)) as ?2)\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNTA5MQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531725091", "bodyText": "Oh, right, I guess it's the maximum number of digits in a 32 bit integer....", "author": "gavinking", "createdAt": "2020-11-27T18:23:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNTg2MA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531725860", "bodyText": "Rmm, nope, it's not even the max number of digits in a long.", "author": "gavinking", "createdAt": "2020-11-27T18:26:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNzMzMw==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531727333", "bodyText": "Curious to know where 38 came from.", "author": "gavinking", "createdAt": "2020-11-27T18:32:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ0NDAwOQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532444009", "bodyText": "This was the suggested workaround in the comment https://issues.apache.org/jira/browse/DERBY-2072?focusedCommentId=17154473&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-17154473\nI don't know what the maximum decimal precision is, so we might just as well use 254(char max capacity) to be safe, but 32 and 64 bit values should definitely fit into that data type. I'll just use the maximum capacity then and document this.", "author": "beikov", "createdAt": "2020-11-30T09:13:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwNDk2NQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532504965", "bodyText": "I don't know what the maximum decimal precision is\n\nI think it's 31, but I might be wrong.", "author": "gavinking", "createdAt": "2020-11-30T10:48:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyNDkyNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyODQwNA==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r531728404", "bodyText": "IIRC, Postgres doesn't need this, so if you're going to add this here, please also override it on PostgresDialect to return \"\".\nRight now I don't recall if there were other databases which also don't require that.", "author": "gavinking", "createdAt": "2020-11-27T18:36:45Z", "path": "hibernate-core/src/main/java/org/hibernate/dialect/Dialect.java", "diffHunk": "@@ -1257,7 +1258,8 @@ public String getSelectGUIDString() {\n \t * @return the SQL equivalent to Oracle's {@code from dual}.\n \t */\n \tpublic String getFromDual() {\n-\t\treturn \"\";\n+\t\t// The standard SQL solution to get a dual table is to use the VALUES clause\n+\t\treturn \"from (values (0)) as dual\";", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjQ0NTk3Nw==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532445977", "bodyText": "If a query uses other clauses like where, group by etc. it needs a from clause. I can add another method supportsSelectQueryWithoutFromClause to handle these cases if you like.", "author": "beikov", "createdAt": "2020-11-30T09:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyODQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjUwNjI3OQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532506279", "bodyText": "If a query uses other clauses like where, group by etc. it needs a from clause.\n\nAh, OK, right. But does it make sense to have these clauses if there is no from clause? I don't see how they could possibly be useful.\n\nI can add another method supportsSelectQueryWithoutFromClause to handle these cases if you like.\n\nI would prefer that because from (values (0)) as dual is really pretty ugly and noisy.", "author": "gavinking", "createdAt": "2020-11-30T10:50:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyODQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjU4MDM3Mg==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532580372", "bodyText": "For the record, I needed this in the emulation for tuple comparison like (a, b) in ((1, 2), (2, 3)) for DBMS that only support tuples for IN predicates with subqueries like e.g. Oracle. I'll add an additional method to handle omitting the from clause altogether though.", "author": "beikov", "createdAt": "2020-11-30T13:02:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyODQwNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjYyMjczOQ==", "url": "https://github.com/hibernate/hibernate-orm/pull/3667#discussion_r532622739", "bodyText": "OK, that makes sense. \ud83d\udc4d", "author": "gavinking", "createdAt": "2020-11-30T14:09:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTcyODQwNA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "4b1aeea05e0a270420b8f6931b6818a5982d4ac2", "url": "https://github.com/hibernate/hibernate-orm/commit/4b1aeea05e0a270420b8f6931b6818a5982d4ac2", "message": "Fix a few test issues, implement tuple emulation, group by support and support configuring criteria value handling mode", "committedDate": "2020-12-01T17:17:22Z", "type": "commit"}, {"oid": "2144c99c376aaedf679671fe8b6b01fc788a91cb", "url": "https://github.com/hibernate/hibernate-orm/commit/2144c99c376aaedf679671fe8b6b01fc788a91cb", "message": "Fix a few more tests, simplify collation handling, HQL parsing support for tuples, revert wrong dialect changes, alias support for group by and order by, implement index optimized tuple comparison emulation", "committedDate": "2020-12-01T17:17:26Z", "type": "commit"}, {"oid": "7be98459d518de82be4ac79d158f633d88dbbbc5", "url": "https://github.com/hibernate/hibernate-orm/commit/7be98459d518de82be4ac79d158f633d88dbbbc5", "message": "Fixes according to review comments", "committedDate": "2020-12-01T17:17:26Z", "type": "commit"}, {"oid": "a226a174fae53629987740f28cfa5ab2163fe02b", "url": "https://github.com/hibernate/hibernate-orm/commit/a226a174fae53629987740f28cfa5ab2163fe02b", "message": "Use WrapperOptions for JdbcLiteralFormatter instead of SessionImplementor", "committedDate": "2020-12-01T17:17:26Z", "type": "commit"}, {"oid": "ce096f16878d1adb0f6608303b9e68e337cf70fa", "url": "https://github.com/hibernate/hibernate-orm/commit/ce096f16878d1adb0f6608303b9e68e337cf70fa", "message": "Move out the temporary session cleanup into a dedicated method called after translation", "committedDate": "2020-12-01T17:17:26Z", "type": "commit"}, {"oid": "899406522188f91f9ab237edd648ee6e9852cdf0", "url": "https://github.com/hibernate/hibernate-orm/commit/899406522188f91f9ab237edd648ee6e9852cdf0", "message": "Fix some more tests and fix auto flushing for select queries", "committedDate": "2020-12-01T17:17:26Z", "type": "commit"}, {"oid": "edd6994c4f6f485fe00d574000b35275a1608d2b", "url": "https://github.com/hibernate/hibernate-orm/commit/edd6994c4f6f485fe00d574000b35275a1608d2b", "message": "Move persistence context access in EntitySelectFetchInitializer to fix PostgreSQL issues", "committedDate": "2020-12-01T17:32:26Z", "type": "commit"}, {"oid": "edd6994c4f6f485fe00d574000b35275a1608d2b", "url": "https://github.com/hibernate/hibernate-orm/commit/edd6994c4f6f485fe00d574000b35275a1608d2b", "message": "Move persistence context access in EntitySelectFetchInitializer to fix PostgreSQL issues", "committedDate": "2020-12-01T17:32:26Z", "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "3c98a51fc9a22af939bee1922329eadc79f2daa7", "url": "https://github.com/hibernate/hibernate-orm/commit/3c98a51fc9a22af939bee1922329eadc79f2daa7", "message": "Use processing stack during parsing to access query spec, fix lots of db2 issues", "committedDate": "2020-12-04T20:33:58Z", "type": "commit"}, {"oid": "3c98a51fc9a22af939bee1922329eadc79f2daa7", "url": "https://github.com/hibernate/hibernate-orm/commit/3c98a51fc9a22af939bee1922329eadc79f2daa7", "message": "Use processing stack during parsing to access query spec, fix lots of db2 issues", "committedDate": "2020-12-04T20:33:58Z", "type": "forcePushed"}, {"oid": "dc47112af98c2efc875d10be65719a36e20100e0", "url": "https://github.com/hibernate/hibernate-orm/commit/dc47112af98c2efc875d10be65719a36e20100e0", "message": "Fix a few more test issues and handle group by summarization rendering strategies as well as group by literal rendering strategies", "committedDate": "2020-12-08T10:25:07Z", "type": "commit"}]}