{"pr_number": 212, "pr_title": "Implement Item Events", "pr_createdAt": "2020-12-19T06:54:21Z", "pr_url": "https://github.com/PatchworkMC/patchwork-api/pull/212", "timeline": [{"oid": "12cc06be00bc542727c33055de0dddfdbf6fb966", "url": "https://github.com/PatchworkMC/patchwork-api/commit/12cc06be00bc542727c33055de0dddfdbf6fb966", "message": "Implement ItemEvent events", "committedDate": "2020-11-29T20:47:30Z", "type": "commit"}, {"oid": "6e7a8766253f0b55a9667763e53bd2ba7a9a21bf", "url": "https://github.com/PatchworkMC/patchwork-api/commit/6e7a8766253f0b55a9667763e53bd2ba7a9a21bf", "message": "Use alternative call-points for ItemTossEvent and ItemExpireEvent", "committedDate": "2020-12-19T06:35:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI4OTYyOA==", "url": "https://github.com/PatchworkMC/patchwork-api/pull/212#discussion_r546289628", "bodyText": "I'll take your word for it", "author": "TheGlitch76", "createdAt": "2020-12-19T22:13:49Z", "path": "patchwork-events-entity/src/main/java/net/patchworkmc/mixin/event/entity/MixinPlayerEntity.java", "diffHunk": "@@ -154,4 +157,16 @@ private int onAddExperienceLevels(int levels) {\n \t\t// There are no effects from passing in zero levels, so do that if we've been canceled\n \t\treturn event.isCanceled() ? 0 : event.getLevels();\n \t}\n+\n+\t@Inject(method = \"dropItem(Lnet/minecraft/item/ItemStack;ZZ)Lnet/minecraft/entity/ItemEntity;\",\n+\t\t\tat = @At(value = \"RETURN\", ordinal = 1), locals = LocalCapture.CAPTURE_FAILHARD, cancellable = true)\n+\tprivate void onDropItem(ItemStack itemStack, boolean bl, boolean bl2, CallbackInfoReturnable<ItemEntity> ci, double y, ItemEntity itemEntity) {\n+\t\t// Note: This is implemented slightly differently from forge, since forge only calls this event on\n+\t\t// dropSelectedItem(boolean) and dropItem(ItemStack, boolean), but this way makes it much nicer to implement\n+\t\t// and should produce the same behavior for modders", "originalCommit": "6e7a8766253f0b55a9667763e53bd2ba7a9a21bf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}