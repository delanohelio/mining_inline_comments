{"pr_number": 6358, "pr_title": "[TE]frontend - Add a lightweight PubSub system", "pr_createdAt": "2020-12-16T00:00:35Z", "pr_url": "https://github.com/apache/pinot/pull/6358", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc4NDY0Ng==", "url": "https://github.com/apache/pinot/pull/6358#discussion_r543784646", "bodyText": "why you need a singleton to create an observer and subscriber here not an ember service and computed property to execute it?", "author": "zhangloo333", "createdAt": "2020-12-16T00:22:56Z", "path": "thirdeye/thirdeye-frontend/app/utils/pub-sub.js", "diffHunk": "@@ -0,0 +1,72 @@\n+/** A very lightweight pub-sub implementation to communicate between ember-model-table\n+ *  and the hosting component\n+ *\n+ *  Usage:\n+ *  import pubSub from 'app/utils/pub-sub';\n+ *\n+ *  For publishing\n+ *  pubSub.publish('testEvent', data);\n+ *\n+ *  For subscribing\n+ *  const subscription = pubSub.subscribe('testEvent', (data) => {\n+ *  });\n+ *\n+ *  For unsubscribing\n+ *  subscription.unSubscribe();\n+ */\n+class PubSub {", "originalCommit": "ff94c572bf55e1a09fdb71eb1888310a83a77d23", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDUzNTM2MA==", "url": "https://github.com/apache/pinot/pull/6358#discussion_r544535360", "bodyText": "I had considered but did not do it because of 2 reasons:-\n\nBecause it is a temporary implementation until we have API ready to be able to do deep-linking. It is expected to go away.\nBecause if it turns out to be an implementation which lingers for a for longer due to unavailability of API in 1. above for a longer duration for any reason, then we don't want to do any additional initial refactoring as we transition to ember-octane. The more the services and computed properties, more tedious the refactoring effort.\n\nEssentially, my idea is we want to keep new code lightweight and use as much vanilla javascript as we could to make our life easier as we transition towards ember octane. That means temporarily less reliance on native ember routines, services, computed properties and such.", "author": "tejasajmera", "createdAt": "2020-12-16T18:41:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc4NDY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU0NDg0Ng==", "url": "https://github.com/apache/pinot/pull/6358#discussion_r544544846", "bodyText": "LGTM, but I am not sure this singleton pattern work, you could check whether every import shares the same instance.", "author": "zhangloo333", "createdAt": "2020-12-16T18:56:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc4NDY0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDY0MTc5Mw==", "url": "https://github.com/apache/pinot/pull/6358#discussion_r544641793", "bodyText": "@zhangloo333 Every import shares the same instance. I have further validated it with a dry run.", "author": "tejasajmera", "createdAt": "2020-12-16T21:39:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Mzc4NDY0Ng=="}], "type": "inlineReview"}, {"oid": "84445a8246781f16f861f823a95bc911ac1e46f0", "url": "https://github.com/apache/pinot/commit/84445a8246781f16f861f823a95bc911ac1e46f0", "message": "[TE]frontend - Add a lightweight PubSub system", "committedDate": "2020-12-16T21:41:55Z", "type": "commit"}, {"oid": "84445a8246781f16f861f823a95bc911ac1e46f0", "url": "https://github.com/apache/pinot/commit/84445a8246781f16f861f823a95bc911ac1e46f0", "message": "[TE]frontend - Add a lightweight PubSub system", "committedDate": "2020-12-16T21:41:55Z", "type": "forcePushed"}]}