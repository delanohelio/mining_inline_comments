{"pr_number": 5443, "pr_title": "Add broker request info to the error msg in combine operator.", "pr_createdAt": "2020-05-26T00:54:27Z", "pr_url": "https://github.com/apache/pinot/pull/5443", "timeline": [{"oid": "3ca8a7037e32300ef1eea66dbf9b8600debe796e", "url": "https://github.com/apache/pinot/commit/3ca8a7037e32300ef1eea66dbf9b8600debe796e", "message": "Add broker request info to the error msg in combine operator.\n\nCurrent log indicates exception/timeout in combine operator but\nthis does not give much information for debugging. Adding broker\nrequest to the log will help for debugging.", "committedDate": "2020-05-26T00:52:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNDgxNg==", "url": "https://github.com/apache/pinot/pull/5443#discussion_r430114816", "bodyText": "Do we need brokerRequest, or just requestId should be fine?", "author": "mayankshriv", "createdAt": "2020-05-26T01:31:02Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/operator/CombineOperator.java", "diffHunk": "@@ -168,13 +168,13 @@ public IntermediateResultsBlock callJob()\n     try {\n       mergedBlock = mergedBlockFuture.get(endTimeMs - System.currentTimeMillis(), TimeUnit.MILLISECONDS);\n     } catch (InterruptedException e) {\n-      LOGGER.error(\"Caught InterruptedException.\", e);\n+      LOGGER.error(\"Caught InterruptedException. (brokerRequest = {})\", _brokerRequest, e);", "originalCommit": "3ca8a7037e32300ef1eea66dbf9b8600debe796e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNTQwNQ==", "url": "https://github.com/apache/pinot/pull/5443#discussion_r430115405", "bodyText": "I prefer brokerRequest. Otherwise, we need one more look up from the broker side, which will increase the time for debugging. Also, it's possible that broker side use the log sampling feature.\nHow do you think?", "author": "snleee", "createdAt": "2020-05-26T01:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNDgxNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDU4MDE2Nw==", "url": "https://github.com/apache/pinot/pull/5443#discussion_r430580167", "bodyText": "Also, I checked the code and brokerRequest doesn't have the requestId. instanceRequest has the requestId. So, printing brokerRequest here looks like a better option to us.", "author": "snleee", "createdAt": "2020-05-26T17:21:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDExNDgxNg=="}], "type": "inlineReview"}, {"oid": "692468321a282bb5a693bb8e190d3e3cd2f1b9f4", "url": "https://github.com/apache/pinot/commit/692468321a282bb5a693bb8e190d3e3cd2f1b9f4", "message": "Add broker requests to the error log in other combine operators", "committedDate": "2020-05-26T19:04:56Z", "type": "commit"}]}