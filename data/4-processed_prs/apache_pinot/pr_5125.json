{"pr_number": 5125, "pr_title": "pinot-quickstart companion container for thirdeye", "pr_createdAt": "2020-03-07T00:12:18Z", "pr_url": "https://github.com/apache/pinot/pull/5125", "timeline": [{"oid": "71f9a79e17ccfdf309a2ad6783b74f814a900133", "url": "https://github.com/apache/pinot/commit/71f9a79e17ccfdf309a2ad6783b74f814a900133", "message": "Thirdeye docker image", "committedDate": "2020-03-06T22:47:25Z", "type": "commit"}, {"oid": "3fbcddb1bb4ef382a2d7247c19286eb0b7d88823", "url": "https://github.com/apache/pinot/commit/3fbcddb1bb4ef382a2d7247c19286eb0b7d88823", "message": "combo draft", "committedDate": "2020-03-06T22:47:25Z", "type": "commit"}, {"oid": "f8acb4c88c01df08dbb9232424ff06f620262f1f", "url": "https://github.com/apache/pinot/commit/f8acb4c88c01df08dbb9232424ff06f620262f1f", "message": "clean image with ephemeral thirdeye mock data", "committedDate": "2020-03-06T22:47:25Z", "type": "commit"}, {"oid": "e06129d4708e795df6784ddec74a46e4f97d0212", "url": "https://github.com/apache/pinot/commit/e06129d4708e795df6784ddec74a46e4f97d0212", "message": "full front and backend support with dedicated db server", "committedDate": "2020-03-06T22:47:25Z", "type": "commit"}, {"oid": "9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac", "url": "https://github.com/apache/pinot/commit/9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac", "message": "database bootstrap with test application", "committedDate": "2020-03-06T23:49:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTk0Nw==", "url": "https://github.com/apache/pinot/pull/5125#discussion_r389201947", "bodyText": "Update this ?", "author": "xiangfu0", "createdAt": "2020-03-07T00:15:12Z", "path": "docker/images/pinot-thirdeye/README.md", "diffHunk": "@@ -0,0 +1,114 @@\n+<!--\n+\n+    Licensed to the Apache Software Foundation (ASF) under one\n+    or more contributor license agreements.  See the NOTICE file\n+    distributed with this work for additional information\n+    regarding copyright ownership.  The ASF licenses this file\n+    to you under the Apache License, Version 2.0 (the\n+    \"License\"); you may not use this file except in compliance\n+    with the License.  You may obtain a copy of the License at\n+\n+      http://www.apache.org/licenses/LICENSE-2.0\n+\n+    Unless required by applicable law or agreed to in writing,\n+    software distributed under the License is distributed on an\n+    \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+    KIND, either express or implied.  See the License for the\n+    specific language governing permissions and limitations\n+    under the License.\n+\n+-->\n+\n+# docker-pinot\n+This is a docker image of [Apache Thirdeye](https://github.com/apache/incubator-pinot/tree/master/thirdeye).\n+\n+## How to build a docker image\n+\n+There is a docker build script which will build a given Git repo/branch and tag the image.\n+\n+Usage:\n+\n+```SHELL\n+./docker-build.sh [Docker Tag] [Git Branch] [Pinot Git URL]\n+```\n+\n+This script will check out Pinot Repo `[Pinot Git URL]` on branch `[Git Branch]` and build the docker image for that.\n+\n+The docker image is tagged as `[Docker Tag]`.\n+\n+`Docker Tag`: Name and tag your docker image. Default is `thirdeye:latest`.\n+\n+`Git Branch`: The Pinot branch to build. Default is `master`.\n+\n+`Pinot Git URL`: The Pinot Git Repo to build, users can set it to their own fork. Please note that, the URL is `https://` based, not `git://`. Default is the Apache Repo: `https://github.com/apache/incubator-pinot.git`.\n+\n+* Example of building and tagging a snapshot on your own fork:\n+```SHELL\n+./docker-build.sh thirdeye:latest master https://github.com/apache/incubator-pinot.git\n+```\n+\n+## How to publish a docker image\n+\n+Script `docker-push.sh` publishes a given docker image to your docker registry.\n+\n+In order to push to your own repo, the image needs to be explicitly tagged with the repo name.\n+\n+* Example of publishing a image to [apachepinot/thirdeye](https://cloud.docker.com/u/apachepinot/repository/docker/apachepinot/thirdeye) dockerHub repo.\n+\n+```SHELL\n+docker tag thirdeye:latest apachepinot/thirdeye:latest\n+./docker-push.sh apachepinot/thirdeye:latest\n+```\n+\n+Script `docker-build-and-push.sh` builds and publishes this docker image to your docker registry after build.\n+\n+* Example of building and publishing a image to [apachepinot/thirdeye](https://cloud.docker.com/u/apachepinot/repository/docker/apachepinot/thirdeye) dockerHub repo.\n+\n+```SHELL\n+./docker-build-and-push.sh apachepinot/thirdeye:latest master https://github.com/apache/incubator-pinot.git\n+```\n+\n+## How to Run it\n+\n+The entry point of docker image is `start-thirdeye.sh` script.\n+\n+* Create an isolated bridge network in docker.\n+\n+```SHELL\n+docker network create -d bridge pinot-demo\n+```\n+\n+* Start Pinot Hybrid Quickstart\n+\n+```SHELL\n+docker run \\\n+    --network=pinot-demo \\\n+    --name pinot-quickstart \\\n+    -p 9000:9000 \\\n+    -d apachepinot/pinot:latest QuickStart \\\n+    -type hybrid\n+```\n+\n+* Start ThirdEye backend", "originalCommit": "9200d0b2d4f8fd2e112dbb38203db01a5a7ab7ac", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIxMzc4NA==", "url": "https://github.com/apache/pinot/pull/5125#discussion_r389213784", "bodyText": "good catch. updated.", "author": "apucher", "createdAt": "2020-03-07T01:31:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTIwMTk0Nw=="}], "type": "inlineReview"}, {"oid": "a48149d209a708c3ad8e56a7fd113128b40c8e8e", "url": "https://github.com/apache/pinot/commit/a48149d209a708c3ad8e56a7fd113128b40c8e8e", "message": "review fixes", "committedDate": "2020-03-07T01:30:33Z", "type": "commit"}]}