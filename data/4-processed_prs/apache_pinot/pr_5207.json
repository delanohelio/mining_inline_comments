{"pr_number": 5207, "pr_title": "[TE] Retain the original last success task execution time if we can't\u2026", "pr_createdAt": "2020-04-02T17:39:13Z", "pr_url": "https://github.com/apache/pinot/pull/5207", "timeline": [{"oid": "a58cfdfe85f51a8f4fb90a0fd383d83bf6e14a6f", "url": "https://github.com/apache/pinot/commit/a58cfdfe85f51a8f4fb90a0fd383d83bf6e14a6f", "message": "[TE] Retain the original last success task execution time if we can't find success tasks", "committedDate": "2020-04-02T16:26:46Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNjI0OQ==", "url": "https://github.com/apache/pinot/pull/5207#discussion_r402536249", "bodyText": "We may need to keep the name, otherwise, the existing JSON blobs in the DB won't be able to deserialize back to the object.", "author": "jihaozh", "createdAt": "2020-04-02T18:48:39Z", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/detection/health/DetectionTaskStatus.java", "diffHunk": "@@ -46,10 +46,14 @@\n \n   // the time stamp of last successfully finishing task\n   @JsonProperty\n-  private final Long lastTaskExecutionTime;\n+  private Long lastSuccessTaskExecutionTime;", "originalCommit": "a58cfdfe85f51a8f4fb90a0fd383d83bf6e14a6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY0Mjg3MQ==", "url": "https://github.com/apache/pinot/pull/5207#discussion_r403642871", "bodyText": "Reverted.", "author": "xiaohui-sun", "createdAt": "2020-04-05T03:20:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzNjI0OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzOTExNA==", "url": "https://github.com/apache/pinot/pull/5207#discussion_r402539114", "bodyText": "Shall we put this logic in MonitorTaskRunner where the detection health is updated?", "author": "jihaozh", "createdAt": "2020-04-02T18:53:18Z", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/datalayer/pojo/DetectionConfigBean.java", "diffHunk": "@@ -162,6 +162,12 @@ public DetectionHealth getHealth() {\n   }\n \n   public void setHealth(DetectionHealth health) {\n+    // If there is no success execution in the current window then the last success task execution time would be -1L.\n+    // We should keep the original last success task execution time if we have.\n+    long lastSuccessTaskExecutionTime = this.health.getDetectionTaskStatus().getLastSuccessTaskExecutionTime();", "originalCommit": "a58cfdfe85f51a8f4fb90a0fd383d83bf6e14a6f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMzY0Mjg4Mg==", "url": "https://github.com/apache/pinot/pull/5207#discussion_r403642882", "bodyText": "Makes sense! I changed that. Can you review again? @jihaozh", "author": "xiaohui-sun", "createdAt": "2020-04-05T03:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMjUzOTExNA=="}], "type": "inlineReview"}, {"oid": "305a2bfc5c572c695746160b8d7b8204686c911a", "url": "https://github.com/apache/pinot/commit/305a2bfc5c572c695746160b8d7b8204686c911a", "message": "Revert \"[TE] Retain the original last success task execution time if we can't find success tasks\"\n\nThis reverts commit a58cfdfe85f51a8f4fb90a0fd383d83bf6e14a6f.", "committedDate": "2020-04-04T21:02:59Z", "type": "commit"}, {"oid": "4466c6c3f338326e248c408338b699cde212d210", "url": "https://github.com/apache/pinot/commit/4466c6c3f338326e248c408338b699cde212d210", "message": "[TE] keep the last task exeuction time if there is no success task", "committedDate": "2020-04-04T21:13:39Z", "type": "commit"}]}