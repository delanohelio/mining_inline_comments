{"pr_number": 5568, "pr_title": "[QueryContext] Refactor PlanMaker to use QueryContext", "pr_createdAt": "2020-06-15T22:58:53Z", "pr_url": "https://github.com/apache/pinot/pull/5568", "timeline": [{"oid": "ed2c4fa43e4070d7a431747cf7742d71347bca36", "url": "https://github.com/apache/pinot/commit/ed2c4fa43e4070d7a431747cf7742d71347bca36", "message": "[QueryContext] Refactor PlanMaker to use QueryContext\n\nAlso addressed the TODO to directly use List<IndexSegment> instead of List<SegmentDataManager> for the instance level Plan\nModified and simplied tests to apply the interface change", "committedDate": "2020-06-15T23:30:02Z", "type": "forcePushed"}, {"oid": "e1f8807b2cfb92133ee32884836d1594164e182c", "url": "https://github.com/apache/pinot/commit/e1f8807b2cfb92133ee32884836d1594164e182c", "message": "[QueryContext] Refactor PlanMaker to use QueryContext\n\nAlso addressed the TODO to directly use List<IndexSegment> instead of List<SegmentDataManager> for the instance level Plan\nModified and simplied tests to apply the interface change", "committedDate": "2020-06-15T23:36:07Z", "type": "forcePushed"}, {"oid": "a45c9ea12d4b66a74a13096cc4e43f104b19ecf8", "url": "https://github.com/apache/pinot/commit/a45c9ea12d4b66a74a13096cc4e43f104b19ecf8", "message": "[QueryContext] Refactor PlanMaker to use QueryContext\n\nAlso addressed the TODO to directly use List<IndexSegment> instead of List<SegmentDataManager> for the instance level Plan\nModified and simplied tests to apply the interface change", "committedDate": "2020-06-15T23:50:53Z", "type": "commit"}, {"oid": "a45c9ea12d4b66a74a13096cc4e43f104b19ecf8", "url": "https://github.com/apache/pinot/commit/a45c9ea12d4b66a74a13096cc4e43f104b19ecf8", "message": "[QueryContext] Refactor PlanMaker to use QueryContext\n\nAlso addressed the TODO to directly use List<IndexSegment> instead of List<SegmentDataManager> for the instance level Plan\nModified and simplied tests to apply the interface change", "committedDate": "2020-06-15T23:50:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTg3MDQ1Mw==", "url": "https://github.com/apache/pinot/pull/5568#discussion_r441870453", "bodyText": "This seems like refactoring to me which is not really needed to move to QueryContext? We can keep the interfaces same right?", "author": "siddharthteotia", "createdAt": "2020-06-17T22:34:13Z", "path": "pinot-core/src/main/java/org/apache/pinot/core/plan/maker/PlanMaker.java", "diffHunk": "@@ -20,36 +20,27 @@\n \n import java.util.List;\n import java.util.concurrent.ExecutorService;\n-import org.apache.pinot.common.request.BrokerRequest;\n-import org.apache.pinot.core.data.manager.SegmentDataManager;\n import org.apache.pinot.core.indexsegment.IndexSegment;\n import org.apache.pinot.core.plan.Plan;\n import org.apache.pinot.core.plan.PlanNode;\n+import org.apache.pinot.core.query.request.context.QueryContext;\n+import org.apache.pinot.spi.annotations.InterfaceAudience;\n \n \n /**\n- * The <code>PlanMaker</code> provides interfaces to make segment level and instance level execution plan.\n+ * The {@code PlanMaker} makes logical execution plan for the queries.\n  */\n+@InterfaceAudience.Private\n public interface PlanMaker {\n \n   /**\n-   * Make segment level {@link PlanNode} which contains execution plan on only one segment.\n-   *\n-   * @param indexSegment index segment.\n-   * @param brokerRequest broker request.\n-   * @return segment level plan node.\n+   * Returns an instance level {@link Plan} which contains the logical execution plan for multiple segments.\n    */\n-  PlanNode makeInnerSegmentPlan(IndexSegment indexSegment, BrokerRequest brokerRequest);", "originalCommit": "a45c9ea12d4b66a74a13096cc4e43f104b19ecf8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}