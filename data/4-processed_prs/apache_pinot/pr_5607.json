{"pr_number": 5607, "pr_title": "[TE] frontend - harleyjj/alert-details - Align time picker on Alert O\u2026", "pr_createdAt": "2020-06-23T05:40:49Z", "pr_url": "https://github.com/apache/pinot/pull/5607", "timeline": [{"oid": "ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "url": "https://github.com/apache/pinot/commit/ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "message": "[TE] frontend - harleyjj/alert-details - Align time picker on Alert Overview and Preview with RCA", "committedDate": "2020-06-24T21:32:31Z", "type": "commit"}, {"oid": "ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "url": "https://github.com/apache/pinot/commit/ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "message": "[TE] frontend - harleyjj/alert-details - Align time picker on Alert Overview and Preview with RCA", "committedDate": "2020-06-24T21:32:31Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5NDY5Mw==", "url": "https://github.com/apache/pinot/pull/5607#discussion_r445194693", "bodyText": "Are there any functional changes as part of this UI change? Will the default display time window be the same as before (based on granularity)?", "author": "akshayrai", "createdAt": "2020-06-24T21:56:51Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/alert-details/component.js", "diffHunk": "@@ -30,17 +30,14 @@ import { getValueFromYaml } from 'thirdeye-frontend/utils/yaml-tools';\n import { inject as service } from '@ember/service';\n import { task } from 'ember-concurrency';\n import floatToPercent from 'thirdeye-frontend/utils/float-to-percent';\n-import { setUpTimeRangeOptions } from 'thirdeye-frontend/utils/manage-alert-utils';\n import moment from 'moment';\n import _ from 'lodash';\n import config from 'thirdeye-frontend/config/environment';\n \n const TABLE_DATE_FORMAT = 'MMM DD, hh:mm A'; // format for anomaly table\n const TIME_PICKER_INCREMENT = 5; // tells date picker hours field how granularly to display time\n-const DEFAULT_ACTIVE_DURATION = '1m'; // setting this date range selection as default (Last 24 Hours)", "originalCommit": "ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMxNTc5OQ==", "url": "https://github.com/apache/pinot/pull/5607#discussion_r445315799", "bodyText": "The default display window is determined using the response received from the backend.  The way the new time picker displays, we don't need to have a duration anymore.", "author": "harleyjj", "createdAt": "2020-06-25T05:31:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5NDY5Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5OTgxNQ==", "url": "https://github.com/apache/pinot/pull/5607#discussion_r445199815", "bodyText": "is this no longer required?", "author": "akshayrai", "createdAt": "2020-06-24T22:10:09Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/alert-details/component.js", "diffHunk": "@@ -1449,32 +1449,13 @@ export default Component.extend({\n      * @method onRangeSelection\n      * @param {Object} rangeOption - the user-selected time range to load\n      */\n-    onRangeSelection(timeRangeOptions) {\n-      const {\n-        start,\n-        end,\n-        value: duration\n-      } = timeRangeOptions;\n-\n+    onRangeSelection(start, end) {\n       const startDate = moment(start).valueOf();\n       const endDate = moment(end).valueOf();\n+\n       //Update the time range option selected\n       set(this, 'analysisRange', [startDate, endDate]);\n       set(this, 'displayRange', [startDate, endDate]);\n-      set(this, 'duration', duration);\n-      // This makes sure we don't fetch if the preview is collapsed\n-      if(get(this, 'showDetails') && get(this, 'dataIsCurrent')){\n-        // With a new date range, we should reset the state of time series and anomalies for comparison\n-        if (get(this, 'isPreviewMode')) {\n-          this.setProperties({\n-            anomaliesOld: [],\n-            anomaliesOldSet: false,\n-            anomaliesCurrent: [],\n-            anomaliesCurrentSet: false\n-          });\n-        }\n-        this._fetchAnomalies();\n-      }", "originalCommit": "ea8b2eb5bb07013ff4fb03b24a33d64fbc644acf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTMxNzAxNg==", "url": "https://github.com/apache/pinot/pull/5607#discussion_r445317016", "bodyText": "Here, I removed duration since it's no longer needed.  Old lines 1468-1475 were duplicate logic, so I condensed it to one check (new lines 1460-1467).  The fetchAnomalies check is now on lines 1468-1471  (new lines).", "author": "harleyjj", "createdAt": "2020-06-25T05:36:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5OTgxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODUxNDcxNQ==", "url": "https://github.com/apache/pinot/pull/5607#discussion_r448514715", "bodyText": "Thanks", "author": "akshayrai", "createdAt": "2020-07-01T17:32:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTE5OTgxNQ=="}], "type": "inlineReview"}]}