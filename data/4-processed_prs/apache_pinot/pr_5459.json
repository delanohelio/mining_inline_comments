{"pr_number": 5459, "pr_title": "[Cleanup] Merge RealtimeSegmentOnlineOfflineStateModel and SegmentOnlineOfflineStateModel in CommonConstants", "pr_createdAt": "2020-05-28T00:37:05Z", "pr_url": "https://github.com/apache/pinot/pull/5459", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg==", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432180426", "bodyText": "can we just call it SegmentStateModel?", "author": "mcvsubbu", "createdAt": "2020-05-28T23:35:45Z", "path": "pinot-broker/src/main/java/org/apache/pinot/broker/routing/RoutingManager.java", "diffHunk": "@@ -51,7 +51,7 @@\n import org.apache.pinot.common.metrics.BrokerMetrics;\n import org.apache.pinot.common.request.BrokerRequest;\n import org.apache.pinot.common.utils.CommonConstants;\n-import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.RealtimeSegmentOnlineOfflineStateModel;\n+import org.apache.pinot.common.utils.CommonConstants.Helix.StateModel.SegmentOnlineOfflineStateModel;", "originalCommit": "a7de58014ba0a0c68412cdc9a0f4c8b2f678ad0f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIwNzAwNg==", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432207006", "bodyText": "@mcvsubbu If we want to further clean it up, we can merge the BrokerStateModel and SegmentStateModel and put all instance states (ONLINE, CONSUMING, OFFLINE, ERROR) under CommonConstants.Helix.InstanceState. Thoughts?", "author": "Jackie-Jiang", "createdAt": "2020-05-29T01:19:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjIxMzI0Mg==", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432213242", "bodyText": "I dont think merging BrokerStateModel and SegmentStateModel is a good idea.  Broker does not have CONSUMING state.\nI think the reason these are coded separately (for realtime and offline) is because we did not have CONSUMING state before. By now, the state model in helix should have consuming for all pinot use cases. So, merging these is fine.", "author": "mcvsubbu", "createdAt": "2020-05-29T01:46:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjI0NjczMw==", "url": "https://github.com/apache/pinot/pull/5459#discussion_r432246733", "bodyText": "@mcvsubbu Changed them to SegmentStateModel and BrokerResourceStateModel.\nAlso, can you please give me a ship it if it looks good?", "author": "Jackie-Jiang", "createdAt": "2020-05-29T04:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjE4MDQyNg=="}], "type": "inlineReview"}, {"oid": "3305c406054652db26ae77b63033258cdab30f43", "url": "https://github.com/apache/pinot/commit/3305c406054652db26ae77b63033258cdab30f43", "message": "[Cleanup] Merge RealtimeSegmentOnlineOfflineStateModel and SegmentOnlineOfflineStateModel in CommonConstants\n\nWe only have one SegmentOnlineOfflineStateModel, so there is no value keeping both of them", "committedDate": "2020-05-29T04:13:46Z", "type": "commit"}, {"oid": "3305c406054652db26ae77b63033258cdab30f43", "url": "https://github.com/apache/pinot/commit/3305c406054652db26ae77b63033258cdab30f43", "message": "[Cleanup] Merge RealtimeSegmentOnlineOfflineStateModel and SegmentOnlineOfflineStateModel in CommonConstants\n\nWe only have one SegmentOnlineOfflineStateModel, so there is no value keeping both of them", "committedDate": "2020-05-29T04:13:46Z", "type": "forcePushed"}]}