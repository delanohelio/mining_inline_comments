{"pr_number": 6127, "pr_title": "Rewrite possible array aggregation functions to one level", "pr_createdAt": "2020-10-09T21:12:01Z", "pr_url": "https://github.com/apache/pinot/pull/6127", "timeline": [{"oid": "2f93b8b03e6001989b405264e272605b262d3f2e", "url": "https://github.com/apache/pinot/commit/2f93b8b03e6001989b405264e272605b262d3f2e", "message": "format", "committedDate": "2020-10-09T22:11:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDgzMDQ3OQ==", "url": "https://github.com/apache/pinot/pull/6127#discussion_r504830479", "bodyText": "We found that the query compilation time for SQL has gone up to 5ms in certain cases (as compared to micro-seconds for PQL). One suspect here is the additional processing like these.\nTagging @siddharthteotia to share the findings.", "author": "mayankshriv", "createdAt": "2020-10-14T16:55:14Z", "path": "pinot-common/src/main/java/org/apache/pinot/sql/parsers/CalciteSqlParser.java", "diffHunk": "@@ -343,6 +346,9 @@ private static void queryRewrite(PinotQuery pinotQuery) {\n     // Invoke compilation time functions\n     invokeCompileTimeFunctions(pinotQuery);\n \n+    // Rewrite Selection list\n+    rewriteSelections(pinotQuery.getSelectList());", "originalCommit": "2f93b8b03e6001989b405264e272605b262d3f2e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2721caef36a50914657ee0c9b5da456c17e0660a", "url": "https://github.com/apache/pinot/commit/2721caef36a50914657ee0c9b5da456c17e0660a", "message": "Rewrite possible array aggregation functions to one level", "committedDate": "2020-10-23T19:31:25Z", "type": "commit"}, {"oid": "08ee98fc7a017aaae975e8def777706dee92dd51", "url": "https://github.com/apache/pinot/commit/08ee98fc7a017aaae975e8def777706dee92dd51", "message": "format", "committedDate": "2020-10-23T19:31:29Z", "type": "commit"}, {"oid": "08ee98fc7a017aaae975e8def777706dee92dd51", "url": "https://github.com/apache/pinot/commit/08ee98fc7a017aaae975e8def777706dee92dd51", "message": "format", "committedDate": "2020-10-23T19:31:29Z", "type": "forcePushed"}]}