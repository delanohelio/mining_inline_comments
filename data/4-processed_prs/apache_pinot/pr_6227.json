{"pr_number": 6227, "pr_title": "[TE]frontend - Refactor detection-health and stats component", "pr_createdAt": "2020-11-03T20:18:14Z", "pr_url": "https://github.com/apache/pinot/pull/6227", "timeline": [{"oid": "50650da50ffa5778ec875c581fcbd64dbcc81d69", "url": "https://github.com/apache/pinot/commit/50650da50ffa5778ec875c581fcbd64dbcc81d69", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-03T20:27:51Z", "type": "forcePushed"}, {"oid": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "url": "https://github.com/apache/pinot/commit/78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-03T20:33:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODE0NA==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516968144", "bodyText": "It's better to use semantic tag here, such as section", "author": "zhangloo333", "createdAt": "2020-11-03T21:33:27Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">", "originalCommit": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDI2Mg==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516990262", "bodyText": "Sure.", "author": "tejasajmera", "createdAt": "2020-11-03T22:22:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODE0NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODc2Mg==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516968762", "bodyText": "I curious why we need a . here.", "author": "zhangloo333", "createdAt": "2020-11-03T21:34:47Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n+        {{overall.status}}\n+      </li>\n+      <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">", "originalCommit": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDkzOA==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516990938", "bodyText": "Good point. I have just moved around things. I realized this is not needed. Removed it.", "author": "tejasajmera", "createdAt": "2020-11-03T22:24:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2ODc2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2OTU4MQ==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516969581", "bodyText": "do you need a hyphen here to meet the BEM requirement?", "author": "zhangloo333", "createdAt": "2020-11-03T21:36:38Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">", "originalCommit": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MDY5NQ==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516990695", "bodyText": "No, the overall.label points to the modifier like --good, --poor which is defined in js.", "author": "tejasajmera", "createdAt": "2020-11-03T22:23:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk2OTU4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk3MjQ5Ng==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516972496", "bodyText": "Some indent issue. it would be better to fix it.", "author": "zhangloo333", "createdAt": "2020-11-03T21:43:12Z", "path": "thirdeye/thirdeye-frontend/app/pods/components/detection-health/template.hbs", "diffHunk": "@@ -1,84 +1,103 @@\n-<ul class=\"te-horizontal-cards__single-card\">\n-  <li class=\"te-horizontal-cards__card-title\">\n-    <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n-      30-day status\n+<div class=\"te-horizontal-cards te-content-block__detection-health\">\n+  <h4 class=\"te-self-serve__block-title\">\n+    <label for=\"select-dimension\" class=\"control-label te-label\">\n+      Detection health\n       <span>\n         <i class=\"glyphicon glyphicon-question-sign\"></i>\n-        {{#tooltip-on-element class=\"te-tooltip\"}}\n-          The overall health status of your detection configuration is based on\n-          the most recent 30 days.\n-        {{/tooltip-on-element}}\n+          {{#tooltip-on-element class=\"te-tooltip\"}}\n+            See how your detection configuration is performing in detail\n+            by clicking 'view details' below{{#if showRules}},\n+            and select different rules above the graph\n+            to see their respective regression errors{{/if}}.\n+          {{/tooltip-on-element}}\n       </span>\n     </label>\n-  </li>\n-  <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n-    {{overall.status}}\n-  </li>\n-  <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n-    view details\n-    {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n-      <p>Overall health of the metrics that monitor detection performance.</p>\n+  </h4>\n+  <div class=\"te-horizontal-cards__container\">\n+    <ul class=\"te-horizontal-cards__single-card\">\n+      <li class=\"te-horizontal-cards__card-title\">\n+        <label for=\"select-dimension\" class=\"control-label te-label--no-bottom\">\n+          30-day status\n+          <span>\n+            <i class=\"glyphicon glyphicon-question-sign\"></i>\n+            {{#tooltip-on-element class=\"te-tooltip\"}}\n+              The overall health status of your detection configuration is based on\n+              the most recent 30 days.\n+            {{/tooltip-on-element}}\n+          </span>\n+        </label>\n+      </li>\n+      <li class=\"te-horizontal-cards__card-number{{overall.label}}\">\n+        {{overall.status}}\n+      </li>\n+      <a role=\"button\" tabindex=\"0\" class=\".te-button--link\">\n+        view details\n+        {{#bs-popover placement=\"bottom\" title=\"Detection health\"}}\n+          <p>Overall health of the metrics that monitor detection performance.</p>\n \n-      <label class=\"control-label te-label\">\n-        Detection task status\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Detection task status\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number\">{{executionTime}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Last success detection task finish time</li>\n-        </ul>\n-      </div>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number\">{{executionTime}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Last success detection task finish time</li>\n+            </ul>\n+          </div>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{detection.label}}\">{{detection.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{detection.label}}\">{{detection.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>\n+            </ul>\n \n-        {{#each tasks as |task|}}\n-          <ul class=\"te-horizontal-metrics__metric\">\n-            <li class=\"te-horizontal-metrics__number{{task.label}}\">{{task.number}}</li>\n-            <li class=\"te-horizontal-metrics__title\">{{task.title}}</li>\n-          </ul>\n-        {{/each}}\n-      </div>\n+            {{#each tasks as |task|}}\n+              <ul class=\"te-horizontal-metrics__metric\">\n+                <li class=\"te-horizontal-metrics__number{{task.label}}\">{{task.number}}</li>\n+                <li class=\"te-horizontal-metrics__title\">{{task.title}}</li>\n+              </ul>\n+            {{/each}}\n+          </div>\n \n-      <label class=\"control-label te-label\">\n-        Anomaly coverage ratio\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Anomaly coverage ratio\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{anomalyCoverage.label}}\">{{anomalyCoverage.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{anomalyCoverage.label}}\">{{anomalyCoverage.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>\n+            </ul>\n \n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number\">{{anomalyCoverage.ratio}}%</li>\n-          <li class=\"te-horizontal-metrics__title\">The percentage of anomalous duration over the past 30 days</li>\n-        </ul>\n-      </div>\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number\">{{anomalyCoverage.ratio}}%</li>\n+              <li class=\"te-horizontal-metrics__title\">The percentage of anomalous duration over the past 30 days</li>\n+            </ul>\n+          </div>\n \n-      <p>To improve this, adjust alert sensitivity using preview.</p>\n+          <p>To improve this, adjust alert sensitivity using preview.</p>\n \n-      <label class=\"control-label te-label\">\n-        Regression error{{#if regressionInfo.rule}} for {{regressionInfo.rule}}{{/if}}\n-      </label>\n+          <label class=\"control-label te-label\">\n+            Regression error{{#if regressionInfo.rule}} for {{regressionInfo.rule}}{{/if}}\n+          </label>\n \n-      <div class=\"te-horizontal-metrics__container\">\n-        <ul class=\"te-horizontal-metrics__metric\">\n-          <li class=\"te-horizontal-metrics__number{{regressionInfo.label}}\">{{regressionInfo.status}}</li>\n-          <li class=\"te-horizontal-metrics__title\">Status</li>\n-        </ul>\n+          <div class=\"te-horizontal-metrics__container\">\n+            <ul class=\"te-horizontal-metrics__metric\">\n+              <li class=\"te-horizontal-metrics__number{{regressionInfo.label}}\">{{regressionInfo.status}}</li>\n+              <li class=\"te-horizontal-metrics__title\">Status</li>", "originalCommit": "78aec9cd22853b6bd4411f2ec19dfca4b5b2084c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk5MjQyMg==", "url": "https://github.com/apache/pinot/pull/6227#discussion_r516992422", "bodyText": "I am not sure that there is an issue. I have used spaces everywhere, don't see indentation issue in the editor. I think it is just showing highlighting in the diff the indentation has moved by 2 spaces so reviewers know what has changed, but that is expected as I have added a parent tag so the indentation change is expected.", "author": "tejasajmera", "createdAt": "2020-11-03T22:27:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjk3MjQ5Ng=="}], "type": "inlineReview"}, {"oid": "55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "url": "https://github.com/apache/pinot/commit/55f0560df49a2ee400aa0bdc14baeeca6b4faaae", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-03T22:22:11Z", "type": "forcePushed"}, {"oid": "a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "url": "https://github.com/apache/pinot/commit/a1ff905552b0f2b837349a2c3eb0ed3f06c74d85", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-04T02:35:33Z", "type": "forcePushed"}, {"oid": "360c2c9340f7869252f82585f41771248b155501", "url": "https://github.com/apache/pinot/commit/360c2c9340f7869252f82585f41771248b155501", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-06T20:17:08Z", "type": "forcePushed"}, {"oid": "4b78391e917ae5180cc408deef42b2eca3ce9553", "url": "https://github.com/apache/pinot/commit/4b78391e917ae5180cc408deef42b2eca3ce9553", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-06T22:18:48Z", "type": "commit"}, {"oid": "4b78391e917ae5180cc408deef42b2eca3ce9553", "url": "https://github.com/apache/pinot/commit/4b78391e917ae5180cc408deef42b2eca3ce9553", "message": "[TE]frontend - Refactor detection-health and stats component", "committedDate": "2020-11-06T22:18:48Z", "type": "forcePushed"}]}