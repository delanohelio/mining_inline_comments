{"pr_number": 5146, "pr_title": "Update pinot assembly scripts for release 0.3.0", "pr_createdAt": "2020-03-12T08:09:31Z", "pr_url": "https://github.com/apache/pinot/pull/5146", "timeline": [{"oid": "7ed5ce305898ab02981e1aba4ae9fa09628ace2c", "url": "https://github.com/apache/pinot/commit/7ed5ce305898ab02981e1aba4ae9fa09628ace2c", "message": "update pinot assembly scripts", "committedDate": "2020-03-12T08:07:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg0OTQ5Mg==", "url": "https://github.com/apache/pinot/pull/5146#discussion_r391849492", "bodyText": "After I run mvn install, I see pinot-plugins/target/plugins has all shaded plugins copied. Is it possible to copy this directory at once instead of listing all files?\n~/workspace/pinot/pinot-plugins/target/plugins\n\u276f pwd\n/Users/snlee/workspace/pinot/pinot-plugins/target/plugins\n\n~/workspace/pinot/pinot-plugins/target/plugins\n\u276f ll\ntotal 0\ndrwxr-xr-x  11 snlee  LINKEDIN\\eng   352B Mar 10 21:33 pinot-batch-ingestion\ndrwxr-xr-x   6 snlee  LINKEDIN\\eng   192B Mar 10 21:30 pinot-file-system\ndrwxr-xr-x   9 snlee  LINKEDIN\\eng   288B Mar 10 21:30 pinot-input-format\ndrwxr-xr-x   2 snlee  LINKEDIN\\eng    64B Mar 10 21:29 pinot-plugins\ndrwxr-xr-x   6 snlee  LINKEDIN\\eng   192B Mar 10 21:33 pinot-stream-ingestion", "author": "snleee", "createdAt": "2020-03-12T19:40:34Z", "path": "pinot-distribution/pinot-assembly.xml", "diffHunk": "@@ -43,10 +43,74 @@\n     <file>\n       <source>${pinot.root}/DISCLAIMER</source>\n     </file>\n+    <!-- Include Pinot All-in-one jar -->\n     <file>\n       <source>${pinot.root}/pinot-distribution/target/pinot-distribution-${project.version}-shaded.jar</source>\n       <destName>lib/pinot-all-${project.version}-jar-with-dependencies.jar</destName>\n     </file>\n+    <!-- Start Include Pinot Plugins-->\n+    <!-- Start Include Pinot Stream Ingestion Plugins-->\n+    <!-- Only Include Specified Kafka Version Plugin-->\n+    <file>\n+      <source>${pinot.root}/pinot-plugins/pinot-stream-ingestion/pinot-kafka-${kafka.version}/target/pinot-kafka-${kafka.version}-${project.version}-shaded.jar</source>", "originalCommit": "7ed5ce305898ab02981e1aba4ae9fa09628ace2c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg1NDkxOA==", "url": "https://github.com/apache/pinot/pull/5146#discussion_r391854918", "bodyText": "That is how we did it previously by gathering all the jars together then copy directory, see line <outputDirectory>${pinot.root}/pinot-plugins/target/plugins/${plugin.type}/${project.artifactId}</outputDirectory> in pinot-plugins/pom.xml.\nHowever mvn release doesn't honor this, and cannot find the built jars if we relocated them, that's why we need to hand-pick all those jars again here.", "author": "xiangfu0", "createdAt": "2020-03-12T19:51:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTg0OTQ5Mg=="}], "type": "inlineReview"}]}