{"pr_number": 6085, "pr_title": "[TE] Refactor. ThirdEyePrincipal should be immutable", "pr_createdAt": "2020-10-01T00:20:21Z", "pr_url": "https://github.com/apache/pinot/pull/6085", "timeline": [{"oid": "a345801916e2f1ef22ccd1bd11a3a8ae185c04e2", "url": "https://github.com/apache/pinot/commit/a345801916e2f1ef22ccd1bd11a3a8ae185c04e2", "message": "[TE] Refactor. ThirdEye Principal should be immutable.\n\nThirdEyePrincipal is used in authentication and should be an immutable object.\nThis change refactors the usages to ensure that the principal isn't modified.\nAlso, the ThirdEyePrincipal object had groups which are never used. Plus the members\nare non private. All these issues have been addressed.", "committedDate": "2020-10-01T00:17:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ0MzYwOQ==", "url": "https://github.com/apache/pinot/pull/6085#discussion_r498443609", "bodyText": "Optional<ThirdEyePrincipal> ?", "author": "apucher", "createdAt": "2020-10-01T18:38:58Z", "path": "thirdeye/thirdeye-pinot/src/main/java/org/apache/pinot/thirdeye/auth/ThirdEyeAuthFilter.java", "diffHunk": "@@ -109,7 +108,7 @@ public void filter(ContainerRequestContext requestContext) {\n     }\n   }\n \n-  private boolean isAuthenticated(ContainerRequestContext containerRequestContext, ThirdEyePrincipal principal) {\n+  private ThirdEyePrincipal getPrincipal(ContainerRequestContext containerRequestContext) {", "originalCommit": "a345801916e2f1ef22ccd1bd11a3a8ae185c04e2", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1MDQ1NQ==", "url": "https://github.com/apache/pinot/pull/6085#discussion_r498450455", "bodyText": "I know. I tried that initially. However, the way things are written, I would have had to do a bunch of optional.get() which defeats the purpose. The other option is to rewrite the logic to make it more optional friendly, but didn't want to do that in this PR.", "author": "suvodeep-pyne", "createdAt": "2020-10-01T18:52:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ0MzYwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU3NTM4Nw==", "url": "https://github.com/apache/pinot/pull/6085#discussion_r498575387", "bodyText": "understood.", "author": "apucher", "createdAt": "2020-10-02T00:40:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ0MzYwOQ=="}], "type": "inlineReview"}]}