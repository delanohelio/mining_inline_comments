{"pr_number": 673, "pr_title": "Add Helix Distributed lock module", "pr_createdAt": "2020-01-06T20:46:22Z", "pr_url": "https://github.com/apache/helix/pull/673", "timeline": [{"oid": "78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "url": "https://github.com/apache/helix/commit/78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "message": "add Helix Distributed lock based on zookeeper", "committedDate": "2020-01-06T22:12:50Z", "type": "commit"}, {"oid": "78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "url": "https://github.com/apache/helix/commit/78da6cfa55b8bd9abbc23a5d4565968b1fa1082a", "message": "add Helix Distributed lock based on zookeeper", "committedDate": "2020-01-06T22:12:50Z", "type": "forcePushed"}, {"oid": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "url": "https://github.com/apache/helix/commit/4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "message": "remove detail implementation", "committedDate": "2020-01-06T23:37:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzY0Ng==", "url": "https://github.com/apache/helix/pull/673#discussion_r363903646", "bodyText": "Do you need all these?", "author": "junkaixue", "createdAt": "2020-01-07T19:09:13Z", "path": "helix-lock/helix-lock-0.9.2-SNAPSHOT.ivy", "diffHunk": "@@ -0,0 +1,54 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<ivy-module version=\"1.0\">\n+\t<info organisation=\"org.apache.helix\"\n+\t\tmodule=\"helix-lock\"\n+\t\trevision=\"0.9.2-SNAPSHOT\"\n+\t\tstatus=\"integration\"\n+\t\tpublication=\"20170128141623\"\n+\t/>\n+\t<configurations>\n+\t\t<conf name=\"default\" visibility=\"public\" description=\"runtime dependencies and master artifact can be used with this conf\" extends=\"runtime,master\"/>\n+\t\t<conf name=\"master\" visibility=\"public\" description=\"contains only the artifact published by this module itself, with no transitive dependencies\"/>\n+\t\t<conf name=\"compile\" visibility=\"public\" description=\"this is the default scope, used if none is specified. Compile dependencies are available in all classpaths.\"/>\n+\t\t<conf name=\"provided\" visibility=\"public\" description=\"this is much like compile, but indicates you expect the JDK or a container to provide it. It is only available on the compilation classpath, and is not transitive.\"/>\n+\t\t<conf name=\"runtime\" visibility=\"public\" description=\"this scope indicates that the dependency is not required for compilation, but is for execution. It is in the runtime and test classpaths, but not the compile classpath.\" extends=\"compile\"/>\n+\t\t<conf name=\"test\" visibility=\"private\" description=\"this scope indicates that the dependency is not required for normal use of the application, and is only available for the test compilation and execution phases.\"/>\n+\t\t<conf name=\"system\" visibility=\"public\" description=\"this scope is similar to provided except that you have to provide the JAR which contains it explicitly. The artifact is always available and is not looked up in a repository.\"/>\n+\t</configurations>\n+\t<publications>\n+\t\t<artifact name=\"helix-lock\" type=\"jar\" ext=\"jar\" conf=\"master\"/>\n+\t</publications>\n+\t<dependencies>\n+\t  <dependency org=\"org.slf4j\" name=\"slf4j-api\" rev=\"1.7.25\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n+        <artifact name=\"slf4j-api\" ext=\"jar\"/>\n+    </dependency>\n+    <dependency org=\"org.slf4j\" name=\"slf4j-log4j12\" rev=\"1.7.14\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\">\n+        <artifact name=\"slf4j-log4j12\" ext=\"jar\"/>\n+    </dependency>\n+    <dependency org=\"org.yaml\" name=\"snakeyaml\" rev=\"1.17\">\n+        <artifact name=\"snakeyaml\" m:classifier=\"sources\" ext=\"jar\"/>\n+    </dependency>\n+\t\t<dependency org=\"org.apache.helix\" name=\"helix-core\" rev=\"0.9.2-SNAPSHOT\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-core-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"org.codehaus.jackson\" name=\"jackson-mapper-asl\" rev=\"1.8.5\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>\n+\t\t<dependency org=\"commons-cli\" name=\"commons-cli\" rev=\"1.2\" force=\"true\" conf=\"compile->compile(*),master(*);runtime->runtime(*)\"/>", "originalCommit": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3MjYwMg==", "url": "https://github.com/apache/helix/pull/673#discussion_r363972602", "bodyText": "I removed some that won't be needed for sure.", "author": "zhangmeng916", "createdAt": "2020-01-07T22:01:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzY0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzk0Ng==", "url": "https://github.com/apache/helix/pull/673#discussion_r363903946", "bodyText": "Same for this file. Remove all the components, which are unnecessary. Otherwise, the file is too large and imports are not required.", "author": "junkaixue", "createdAt": "2020-01-07T19:09:55Z", "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,189 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "originalCommit": "4d59d2f980dcb308b9cc4cbf478691cab1bad7e5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk3MjgxNQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r363972815", "bodyText": "I removed some that won't be needed for sure.", "author": "zhangmeng916", "createdAt": "2020-01-07T22:01:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzkwMzk0Ng=="}], "type": "inlineReview"}, {"oid": "a6f53fd721f9729cccd0c530220a6544726e50aa", "url": "https://github.com/apache/helix/commit/a6f53fd721f9729cccd0c530220a6544726e50aa", "message": "remove unecessary dependencies", "committedDate": "2020-01-07T21:54:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk4NjI5MQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r363986291", "bodyText": "These dependencies are the same in the parent pom. I think it would be more clear and easier to maintain if you remove these dependencies in this child pom, because this child pom file will inherit all properties and dependencies from parent POM. Unless you want to use a different version/additional dependency.\nSame with following duplicate dependencies.", "author": "huizhilu", "createdAt": "2020-01-07T22:38:13Z", "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,162 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>org.apache.helix</groupId>\n+    <artifactId>helix</artifactId>\n+    <version>0.9.2-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>helix-lock</artifactId>\n+  <packaging>bundle</packaging>\n+  <name>Apache Helix :: Distributed Lock</name>\n+\n+  <properties>\n+    <osgi.import>\n+      org.apache.helix*,\n+      org.slf4j*;version=\"[1.6,2)\",\n+      *\n+    </osgi.import>\n+    <osgi.export>org.apache.helix.lock*;version=\"${project.version};-noimport:=true</osgi.export>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.yaml</groupId>\n+      <artifactId>snakeyaml</artifactId>\n+      <version>1.17</version>\n+    </dependency>\n+    <dependency>", "originalCommit": "a6f53fd721f9729cccd0c530220a6544726e50aa", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAxODkxNw==", "url": "https://github.com/apache/helix/pull/673#discussion_r364018917", "bodyText": "I actually don't find this one in parent pom. Do you have another example that is in the parent?", "author": "zhangmeng916", "createdAt": "2020-01-08T00:40:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk4NjI5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAyMzMxNQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r364023315", "bodyText": "Oh, it is not snakeyaml. I actually selected a block but github doesn't show it. I meant this part as an example: \n  \n    \n      helix/pom.xml\n    \n    \n        Lines 404 to 413\n      in\n      d6ba1f3\n    \n    \n    \n    \n\n        \n          \n           <dependency> \n        \n\n        \n          \n             <groupId>org.slf4j</groupId> \n        \n\n        \n          \n             <artifactId>slf4j-api</artifactId> \n        \n\n        \n          \n             <version>1.7.25</version> \n        \n\n        \n          \n           </dependency> \n        \n\n        \n          \n           <dependency> \n        \n\n        \n          \n             <groupId>org.slf4j</groupId> \n        \n\n        \n          \n             <artifactId>slf4j-log4j12</artifactId> \n        \n\n        \n          \n             <version>1.7.14</version> \n        \n\n        \n          \n           </dependency> \n        \n    \n  \n\n\nDo you think the dependencies could be removed?", "author": "huizhilu", "createdAt": "2020-01-08T00:59:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk4NjI5MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDAyNTE2NQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r364025165", "bodyText": "yeah, removed.", "author": "zhangmeng916", "createdAt": "2020-01-08T01:08:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mzk4NjI5MQ=="}], "type": "inlineReview"}, {"oid": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "url": "https://github.com/apache/helix/commit/8d902fe3e18078eb67c0409ee10dceb308b9b924", "message": "remove non necessary dependencies in pom", "committedDate": "2020-01-08T01:05:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MDU4OQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r364060589", "bodyText": "I see that the parent pom also has jetty-server dependency:\n      <dependency>\n        <groupId>org.eclipse.jetty</groupId>\n        <artifactId>jetty-server</artifactId>\n        <version>8.1.8.v20121106</version>\n      </dependency>\n\nIs there any reason you want to use this specific version(9.1.0.RC0)? To me, 8.1.8.v20121106 is pretty old. Not sure if it is time to upgrade this dependency in the parent pom, too.", "author": "huizhilu", "createdAt": "2020-01-08T04:34:36Z", "path": "helix-lock/pom.xml", "diffHunk": "@@ -0,0 +1,152 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\n+  <parent>\n+    <groupId>org.apache.helix</groupId>\n+    <artifactId>helix</artifactId>\n+    <version>0.9.2-SNAPSHOT</version>\n+  </parent>\n+  <modelVersion>4.0.0</modelVersion>\n+\n+  <artifactId>helix-lock</artifactId>\n+  <packaging>bundle</packaging>\n+  <name>Apache Helix :: Distributed Lock</name>\n+\n+  <properties>\n+    <osgi.import>\n+      org.apache.helix*,\n+      org.slf4j*;version=\"[1.6,2)\",\n+      *\n+    </osgi.import>\n+    <osgi.export>org.apache.helix.lock*;version=\"${project.version};-noimport:=true</osgi.export>\n+  </properties>\n+\n+  <dependencies>\n+    <dependency>\n+      <groupId>org.yaml</groupId>\n+      <artifactId>snakeyaml</artifactId>\n+      <version>1.17</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.helix</groupId>\n+      <artifactId>helix-core</artifactId>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.commons</groupId>\n+      <artifactId>commons-lang3</artifactId>\n+      <version>3.8.1</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.apache.httpcomponents</groupId>\n+      <artifactId>httpclient</artifactId>\n+      <version>4.5.8</version>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.eclipse.jetty</groupId>\n+      <artifactId>jetty-server</artifactId>\n+      <version>9.1.0.RC0</version>", "originalCommit": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDU3NjAxMg==", "url": "https://github.com/apache/helix/pull/673#discussion_r364576012", "bodyText": "I think it's safer to keep parent pom the same as before. Not quite sure about its impact.", "author": "zhangmeng916", "createdAt": "2020-01-09T06:27:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MDU4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MDM2Nw==", "url": "https://github.com/apache/helix/pull/673#discussion_r365350367", "bodyText": "My point is, you are using an RC version 9.1.0.RC0 here for jetty-server. RC version is a release candidate. If you have any specific reason to use another version than 8.1.8.v20121106 in parent, you may want to choose a release version. What do you think?", "author": "huizhilu", "createdAt": "2020-01-10T17:39:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NDA2MDU4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0NzQ3Mw==", "url": "https://github.com/apache/helix/pull/673#discussion_r365347473", "bodyText": "Nit, I understand the other modules' names are also hardcoded. I would just make a variable module_name=\"helix-lock\" (Or better, can read from pom file) and reuse the module. I've seen duplicated code in this script, which a for loop could handle. Maybe we can have another PR to clean this script.", "author": "huizhilu", "createdAt": "2020-01-10T17:31:34Z", "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"", "originalCommit": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1NjYzNw==", "url": "https://github.com/apache/helix/pull/673#discussion_r365356637", "bodyText": "Yep, agree. Let's do a cleanup in a separate PR.", "author": "zhangmeng916", "createdAt": "2020-01-10T17:55:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0NzQ3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM0ODY4Mw==", "url": "https://github.com/apache/helix/pull/673#discussion_r365348683", "bodyText": "Nit, DEBUG and WARN? What level is expected?", "author": "huizhilu", "createdAt": "2020-01-10T17:34:45Z", "path": "helix-lock/src/main/config/log4j.properties", "diffHunk": "@@ -0,0 +1,32 @@\n+#\n+# Licensed to the Apache Software Foundation (ASF) under one\n+# or more contributor license agreements.  See the NOTICE file\n+# distributed with this work for additional information\n+# regarding copyright ownership.  The ASF licenses this file\n+# to you under the Apache License, Version 2.0 (the\n+# \"License\"); you may not use this file except in compliance\n+# with the License.  You may obtain a copy of the License at\n+#\n+#   http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing,\n+# software distributed under the License is distributed on an\n+# \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+# KIND, either express or implied.  See the License for the\n+# specific language governing permissions and limitations\n+# under the License.\n+#\n+\n+# Set root logger level to DEBUG and its only appender to A1.\n+log4j.rootLogger=WARN,A1", "originalCommit": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MDU1OA==", "url": "https://github.com/apache/helix/pull/673#discussion_r365350558", "bodyText": "Question: My understanding is that this distributed lock is supposed to be a general module that does not assume the use of Helix. Should we call this something like zk-distributed-lock?", "author": "narendly", "createdAt": "2020-01-10T17:39:41Z", "path": "pom.xml", "diffHunk": "@@ -243,6 +243,7 @@ under the License.\n     <module>helix-core</module>\n     <module>helix-admin-webapp</module>\n     <module>helix-rest</module>\n+    <module>helix-lock</module>", "originalCommit": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM3MjkwMQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r365372901", "bodyText": "I'm actually thinking that it is a Helix lock, and with different kinds of implementations. For example, we implement a lock based on zookeeper now, and we may implement a different version based on etcd later.", "author": "zhangmeng916", "createdAt": "2020-01-10T18:36:50Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MDU1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MTA2NQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r365351065", "bodyText": "Are we planning on adding ivy files? Otherwise, this won't do anything...", "author": "narendly", "createdAt": "2020-01-10T17:41:03Z", "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"\n+new_ivy_file=\"helix-lock-\"$new_version\".ivy\"\n+# echo \"$ivy_file\"\n+if [ -f helix-rest/$ivy_file ]; then\n+  echo \"bump up helix-lock/$ivy_file\"\n+  git mv \"helix-lock/$ivy_file\" \"helix-lock/$new_ivy_file\"\n+  sed -i \"s/${version}/${new_version}/g\" \"helix-lock/$new_ivy_file\"\n+  grep -C 1 \"$new_version\" \"helix-lock/$new_ivy_file\"\n+else\n+  echo \"helix-lock/$ivy_file not exist\"\n+fi", "originalCommit": "8d902fe3e18078eb67c0409ee10dceb308b9b924", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTQyMTk0OQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r365421949", "bodyText": "yeah, ivy files are necessary when we build release internally. Otherwise it won't work.", "author": "zhangmeng916", "createdAt": "2020-01-10T20:41:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTM1MTA2NQ=="}], "type": "inlineReview"}, {"oid": "ea16aaa6f726495af4074639dd33c4817f7b763a", "url": "https://github.com/apache/helix/commit/ea16aaa6f726495af4074639dd33c4817f7b763a", "message": "minor change", "committedDate": "2020-01-10T22:31:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjU0MTMyMQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r366541321", "bodyText": "helix-rest -> helix-lock", "author": "jiajunwang", "createdAt": "2020-01-14T19:53:40Z", "path": "bump-up.command", "diffHunk": "@@ -92,6 +92,23 @@ else\n   echo \"helix-rest/$ivy_file not exist\"\n fi\n \n+echo \"bump up helix-lock/pom.xml\"\n+sed -i \"s/${version}/${new_version}/g\" helix-lock/pom.xml\n+grep -C 1 \"$new_version\" helix-lock/pom.xml\n+# git diff helix-lock/pom.xml\n+\n+ivy_file=\"helix-lock-\"$version\".ivy\"\n+new_ivy_file=\"helix-lock-\"$new_version\".ivy\"\n+# echo \"$ivy_file\"\n+if [ -f helix-rest/$ivy_file ]; then", "originalCommit": "ea16aaa6f726495af4074639dd33c4817f7b763a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjU0MjA0MQ==", "url": "https://github.com/apache/helix/pull/673#discussion_r366542041", "bodyText": "Nit, This timestamp should be newer, I guess.", "author": "jiajunwang", "createdAt": "2020-01-14T19:55:09Z", "path": "helix-lock/helix-lock-0.9.2-SNAPSHOT.ivy", "diffHunk": "@@ -0,0 +1,51 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n+<!--\n+Licensed to the Apache Software Foundation (ASF) under one\n+or more contributor license agreements.  See the NOTICE file\n+distributed with this work for additional information\n+regarding copyright ownership.  The ASF licenses this file\n+to you under the Apache License, Version 2.0 (the\n+\"License\"); you may not use this file except in compliance\n+with the License.  You may obtain a copy of the License at\n+\n+  http://www.apache.org/licenses/LICENSE-2.0\n+\n+Unless required by applicable law or agreed to in writing,\n+software distributed under the License is distributed on an\n+\"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+KIND, either express or implied.  See the License for the\n+specific language governing permissions and limitations\n+under the License.\n+-->\n+<ivy-module version=\"1.0\">\n+\t<info organisation=\"org.apache.helix\"\n+\t\tmodule=\"helix-lock\"\n+\t\trevision=\"0.9.2-SNAPSHOT\"\n+\t\tstatus=\"integration\"\n+\t\tpublication=\"20170128141623\"", "originalCommit": "ea16aaa6f726495af4074639dd33c4817f7b763a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "89d6618436b74d48bb00f58087c71965752207d3", "url": "https://github.com/apache/helix/commit/89d6618436b74d48bb00f58087c71965752207d3", "message": "fix", "committedDate": "2020-01-14T20:01:15Z", "type": "commit"}]}