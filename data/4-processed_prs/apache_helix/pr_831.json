{"pr_number": 831, "pr_title": "Generate cancellation message for currentState=null desiredState=DROPPED", "pr_createdAt": "2020-02-27T22:29:07Z", "pr_url": "https://github.com/apache/helix/pull/831", "timeline": [{"oid": "46738b016083f9dd2dd877eba9998eb8b62f4da6", "url": "https://github.com/apache/helix/commit/46738b016083f9dd2dd877eba9998eb8b62f4da6", "message": "Generate cancellation message for currentState=null desiredState=DROPPED", "committedDate": "2020-02-28T21:36:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTgyMw==", "url": "https://github.com/apache/helix/pull/831#discussion_r388121823", "bodyText": "Can we just add this test method to some existing test classes? And the name is too long.", "author": "jiajunwang", "createdAt": "2020-03-05T07:41:54Z", "path": "helix-core/src/test/java/org/apache/helix/controller/stages/TestSendCancellationMessageFromOFFLINEToDROPPED.java", "diffHunk": "@@ -0,0 +1,97 @@\n+package org.apache.helix.controller.stages;\n+\n+import java.lang.reflect.Array;\n+import java.util.Arrays;\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.apache.helix.HelixDefinedState;\n+import org.apache.helix.HelixManager;\n+import org.apache.helix.controller.common.PartitionStateMap;\n+import org.apache.helix.controller.common.ResourcesStateMap;\n+import org.apache.helix.controller.dataproviders.BaseControllerDataProvider;\n+import org.apache.helix.model.ClusterConfig;\n+import org.apache.helix.model.LiveInstance;\n+import org.apache.helix.model.Message;\n+import org.apache.helix.model.Partition;\n+import org.apache.helix.model.Resource;\n+import org.apache.helix.model.StateModelDefinition;\n+import org.apache.helix.task.TaskConstants;\n+import org.apache.helix.tools.StateModelConfigGenerator;\n+import org.testng.Assert;\n+import org.testng.annotations.Test;\n+\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+\n+\n+/**\n+ * This test checks the cancellation message generation when currentState=null and desiredState=DROPPED\n+ */\n+public class TestSendCancellationMessageFromOFFLINEToDROPPED extends MessageGenerationPhase {", "originalCommit": "566725513d77301b155b89440e97ca61a0df6a00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ5ODgyNA==", "url": "https://github.com/apache/helix/pull/831#discussion_r388498824", "bodyText": "I'll change it to a shorter name. It has to be a separate class because it needs to extend MessageGenerationPhase so I can run this class alone. Since it is a very specific case, it's better we can run this stage alone so we can control the input to this message generation phase.", "author": "mgao0", "createdAt": "2020-03-05T19:03:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTgyMw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODUwMTUwNg==", "url": "https://github.com/apache/helix/pull/831#discussion_r388501506", "bodyText": "Sure, sounds good.", "author": "jiajunwang", "createdAt": "2020-03-05T19:08:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTgyMw=="}], "type": "inlineReview"}, {"oid": "3d5f218bec6b3d380f351e472a409e79cb6119ad", "url": "https://github.com/apache/helix/commit/3d5f218bec6b3d380f351e472a409e79cb6119ad", "message": "Changed test name", "committedDate": "2020-03-05T23:51:19Z", "type": "forcePushed"}, {"oid": "7cffa380dbddb00b3315eb74c733a30b5244e3da", "url": "https://github.com/apache/helix/commit/7cffa380dbddb00b3315eb74c733a30b5244e3da", "message": "Changed test name", "committedDate": "2020-03-06T22:49:20Z", "type": "forcePushed"}, {"oid": "f13f03d0dcfc1ccabb74caa3e381107617ccb20f", "url": "https://github.com/apache/helix/commit/f13f03d0dcfc1ccabb74caa3e381107617ccb20f", "message": "Generate cancellation message for currentState=null desiredState=DROPPED", "committedDate": "2020-03-06T23:38:06Z", "type": "commit"}, {"oid": "bd6c56fddd527bd74d97653d1884722d8c760c00", "url": "https://github.com/apache/helix/commit/bd6c56fddd527bd74d97653d1884722d8c760c00", "message": "Added test", "committedDate": "2020-03-06T23:38:58Z", "type": "commit"}, {"oid": "5175293a6567f0091737a7117e3b7422062bc5ef", "url": "https://github.com/apache/helix/commit/5175293a6567f0091737a7117e3b7422062bc5ef", "message": "Changed test name", "committedDate": "2020-03-06T23:40:08Z", "type": "forcePushed"}, {"oid": "0477dad11ce89b62026833cc42a01f839e9bd075", "url": "https://github.com/apache/helix/commit/0477dad11ce89b62026833cc42a01f839e9bd075", "message": "Clean up", "committedDate": "2020-03-07T01:33:35Z", "type": "commit"}, {"oid": "e5c32d0caba5f6d24862e075f2e85c1920915327", "url": "https://github.com/apache/helix/commit/e5c32d0caba5f6d24862e075f2e85c1920915327", "message": "Changed test name", "committedDate": "2020-03-07T01:33:53Z", "type": "commit"}, {"oid": "e5c32d0caba5f6d24862e075f2e85c1920915327", "url": "https://github.com/apache/helix/commit/e5c32d0caba5f6d24862e075f2e85c1920915327", "message": "Changed test name", "committedDate": "2020-03-07T01:33:53Z", "type": "forcePushed"}]}