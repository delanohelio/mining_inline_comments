{"pr_number": 1096, "pr_title": "Stabilize TestWorkflowTermination", "pr_createdAt": "2020-06-15T23:44:55Z", "pr_url": "https://github.com/apache/helix/pull/1096", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NDIwNA==", "url": "https://github.com/apache/helix/pull/1096#discussion_r441744204", "bodyText": "Why we want to limit this?", "author": "junkaixue", "createdAt": "2020-06-17T18:27:27Z", "path": "helix-core/src/test/java/org/apache/helix/integration/task/TestWorkflowTermination.java", "diffHunk": "@@ -62,7 +62,7 @@ public void beforeClass() throws Exception {\n     String taskState = shouldJobFail ? TaskState.FAILED.name() : TaskState.COMPLETED.name();\n     return new JobConfig.Builder().setTargetResource(WorkflowGenerator.DEFAULT_TGT_DB)\n         .setTargetPartitionStates(Sets.newHashSet(MasterSlaveSMD.States.MASTER.name()))\n-        .setWorkflow(workflow).setCommand(MockTask.TASK_COMMAND)\n+        .setWorkflow(workflow).setCommand(MockTask.TASK_COMMAND).setMaxAttemptsPerTask(5)", "originalCommit": "d277a78c321171cafeeaa58552404ac9a12fb814", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzAyNQ==", "url": "https://github.com/apache/helix/pull/1096#discussion_r441747025", "bodyText": "testWorkflowJobFail is polling for the Failed state for 10 seconds. However, I noticed the tasks in job3 of this workflow need to be retried for 10 times and then this job will go to Failed state. However, 10 seconds is little bit short for this case (for other jobs 1 and 2 and possibly 4 to run and job 3 to be retried 10 times and then failed). I noticed that the job fails right after 10 seconds. Hence, in this PR the maxNumberOfAttempts has reduced set to 5 for the tasks.", "author": "alirezazamani", "createdAt": "2020-06-17T18:32:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NDIwNA=="}], "type": "inlineReview"}, {"oid": "5038f090b020743424293e7d76fe65d71bf9e790", "url": "https://github.com/apache/helix/commit/5038f090b020743424293e7d76fe65d71bf9e790", "message": "Stabilize TestWorkflowTermination\n\nIn this commit, TestWorkflowTermination has been stabilized and\nThread.sleeps have been replaced with verify methods.", "committedDate": "2020-06-18T21:38:19Z", "type": "commit"}, {"oid": "6dae22df535bb888f335f9d7f9ffae05feb0b779", "url": "https://github.com/apache/helix/commit/6dae22df535bb888f335f9d7f9ffae05feb0b779", "message": "Fixed statel model test", "committedDate": "2020-06-18T23:17:44Z", "type": "commit"}, {"oid": "6dae22df535bb888f335f9d7f9ffae05feb0b779", "url": "https://github.com/apache/helix/commit/6dae22df535bb888f335f9d7f9ffae05feb0b779", "message": "Fixed statel model test", "committedDate": "2020-06-18T23:17:44Z", "type": "forcePushed"}]}