{"pr_number": 3578, "pr_title": "Treat Name as interned when type-checking the Checker Framework", "pr_createdAt": "2020-08-08T00:57:31Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3578", "timeline": [{"oid": "527943b32195aeed3d3a6ad4f882787c2ec71a08", "url": "https://github.com/typetools/checker-framework/commit/527943b32195aeed3d3a6ad4f882787c2ec71a08", "message": "Treat Name as interned\n\nSome changes are for debugging and need to be reverted", "committedDate": "2020-07-24T17:57:06Z", "type": "commit"}, {"oid": "d6f0bcd9ec2ded1e48c6dc27e7b444c54e33cc2a", "url": "https://github.com/typetools/checker-framework/commit/d6f0bcd9ec2ded1e48c6dc27e7b444c54e33cc2a", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-07-24T17:58:36Z", "type": "commit"}, {"oid": "96019b03b533d079a624c5bf3456f96cb1e3ca1f", "url": "https://github.com/typetools/checker-framework/commit/96019b03b533d079a624c5bf3456f96cb1e3ca1f", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-07-27T14:42:15Z", "type": "commit"}, {"oid": "dc48ebcd57f2cbde013e27ab229fe792b59433da", "url": "https://github.com/typetools/checker-framework/commit/dc48ebcd57f2cbde013e27ab229fe792b59433da", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-07-27T18:01:46Z", "type": "commit"}, {"oid": "6cd6ea4d7fed2124f6693285fae9619277c1df96", "url": "https://github.com/typetools/checker-framework/commit/6cd6ea4d7fed2124f6693285fae9619277c1df96", "message": "How to distribute stub files", "committedDate": "2020-07-27T18:17:46Z", "type": "commit"}, {"oid": "f875f65c0bd3e5597a2c2f24041b273ff8d71ba4", "url": "https://github.com/typetools/checker-framework/commit/f875f65c0bd3e5597a2c2f24041b273ff8d71ba4", "message": "Improve interning", "committedDate": "2020-07-27T18:34:03Z", "type": "commit"}, {"oid": "e5f802d53025e9b5a0e6d12aa301ebb42bc29553", "url": "https://github.com/typetools/checker-framework/commit/e5f802d53025e9b5a0e6d12aa301ebb42bc29553", "message": "Undo unrelated change", "committedDate": "2020-07-27T18:34:39Z", "type": "commit"}, {"oid": "2cda52e0445321efd6be670e6fa8a82e951ca80a", "url": "https://github.com/typetools/checker-framework/commit/2cda52e0445321efd6be670e6fa8a82e951ca80a", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-08-08T00:28:36Z", "type": "commit"}, {"oid": "93885da368bbe63f11ed8d520d532126579c260d", "url": "https://github.com/typetools/checker-framework/commit/93885da368bbe63f11ed8d520d532126579c260d", "message": "Fix build problems", "committedDate": "2020-08-08T00:54:23Z", "type": "commit"}, {"oid": "99c39caa2659e72d237c1d68388832cdde9d234a", "url": "https://github.com/typetools/checker-framework/commit/99c39caa2659e72d237c1d68388832cdde9d234a", "message": "Undo a change", "committedDate": "2020-08-08T03:55:35Z", "type": "commit"}, {"oid": "0efa4c477cfa6fb8a24a1956e24404ceb2ec75b1", "url": "https://github.com/typetools/checker-framework/commit/0efa4c477cfa6fb8a24a1956e24404ceb2ec75b1", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-08-08T03:56:16Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzg3ODYwMw==", "url": "https://github.com/typetools/checker-framework/pull/3578#discussion_r467878603", "bodyText": "This should be passed when creating the checkIntering class:\ncreateCheckTypeTask(project.name, 'org.checkerframework.checker.interning.InterningChecker', 'Interning', ['-Astubs=javax-lang-model-element-name.astub'])", "author": "smillst", "createdAt": "2020-08-10T12:47:31Z", "path": "build.gradle", "diffHunk": "@@ -307,7 +307,12 @@ def createCheckTypeTask(projectName, checker, shortName, args = []) {\n                 '-Xmaxerrs', '10000',\n                 '-Xmaxwarns', '10000',\n                 '-ArequirePrefixInWarningSuppressions',\n-                ]\n+        ]\n+        if (shortName.equals(\"Interning\")) {", "originalCommit": "0efa4c477cfa6fb8a24a1956e24404ceb2ec75b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2Nzg4MzQzNg==", "url": "https://github.com/typetools/checker-framework/pull/3578#discussion_r467883436", "bodyText": "The errors in this method are because com.sun.tools.javac.util.Name is used. com.sun.tools.javac.util.Name implements  javax.lang.model.element.Name, so I think we can also annotate it as @Interned.", "author": "smillst", "createdAt": "2020-08-10T12:56:28Z", "path": "framework/src/main/java/org/checkerframework/common/reflection/DefaultReflectionResolver.java", "diffHunk": "@@ -506,7 +506,6 @@ private boolean isUnknownMethod(MethodInvocationTree tree) {\n      * @param env the environment\n      * @return the (potentially empty) set of corresponding method Symbol(s)\n      */\n-    @SuppressWarnings(\"interning:not.interned\") // bug?", "originalCommit": "0efa4c477cfa6fb8a24a1956e24404ceb2ec75b1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1022696d1f975bd71018dedcfdfc40a4d2e52c14", "url": "https://github.com/typetools/checker-framework/commit/1022696d1f975bd71018dedcfdfc40a4d2e52c14", "message": "Merge ../checker-framework-branch-master into name-interned", "committedDate": "2020-08-11T21:03:24Z", "type": "commit"}, {"oid": "7c08e4f8171ed16855070acc1467b73639179f47", "url": "https://github.com/typetools/checker-framework/commit/7c08e4f8171ed16855070acc1467b73639179f47", "message": "Changes from code review", "committedDate": "2020-08-11T21:24:06Z", "type": "commit"}, {"oid": "3fea3f263a98cde0955e381732b568a028c479af", "url": "https://github.com/typetools/checker-framework/commit/3fea3f263a98cde0955e381732b568a028c479af", "message": "Fix package name", "committedDate": "2020-08-11T22:12:19Z", "type": "commit"}]}