{"pr_number": 3824, "pr_title": "New scripts for WPI that use dljc and -Ainfer=stubs", "pr_createdAt": "2020-10-23T01:17:48Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3824", "timeline": [{"oid": "05c31ad7d13f462a872f0c7bbf1dcc92b92eb6c6", "url": "https://github.com/typetools/checker-framework/commit/05c31ad7d13f462a872f0c7bbf1dcc92b92eb6c6", "message": "Complete handling of trusted annotations", "committedDate": "2020-11-27T04:46:14Z", "type": "commit"}, {"oid": "824c515ce480cc27f8fca8bc12eb7ea8e5c59dd2", "url": "https://github.com/typetools/checker-framework/commit/824c515ce480cc27f8fca8bc12eb7ea8e5c59dd2", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-27T05:14:41Z", "type": "commit"}, {"oid": "71eb27ae63ddb3b86475b39036f8f0c62fc7b670", "url": "https://github.com/typetools/checker-framework/commit/71eb27ae63ddb3b86475b39036f8f0c62fc7b670", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-29T11:30:09Z", "type": "commit"}, {"oid": "c950021a1fbefc36acf64d194923be1b92055f47", "url": "https://github.com/typetools/checker-framework/commit/c950021a1fbefc36acf64d194923be1b92055f47", "message": "Set path at right location in file", "committedDate": "2020-11-30T04:08:21Z", "type": "commit"}, {"oid": "03d103dfeecede413e3f21f3640b4b07fca95d85", "url": "https://github.com/typetools/checker-framework/commit/03d103dfeecede413e3f21f3640b4b07fca95d85", "message": "Add diagnostics", "committedDate": "2020-11-30T04:10:17Z", "type": "commit"}, {"oid": "b07ee7691f8bb34804f26056b10ccbf2efa6dded", "url": "https://github.com/typetools/checker-framework/commit/b07ee7691f8bb34804f26056b10ccbf2efa6dded", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-30T19:12:11Z", "type": "commit"}, {"oid": "8f82203ea3669d013e6cbfda2138c3eebbf9cbb6", "url": "https://github.com/typetools/checker-framework/commit/8f82203ea3669d013e6cbfda2138c3eebbf9cbb6", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-01T00:54:02Z", "type": "commit"}, {"oid": "80c0fc4c213a3cee77684ec785d32601692ab030", "url": "https://github.com/typetools/checker-framework/commit/80c0fc4c213a3cee77684ec785d32601692ab030", "message": "Remove irrelevant information from bin/README", "committedDate": "2020-12-01T01:07:43Z", "type": "commit"}, {"oid": "4f68bdb21b7518597cd16ecb53dcb85cac5039e2", "url": "https://github.com/typetools/checker-framework/commit/4f68bdb21b7518597cd16ecb53dcb85cac5039e2", "message": "Merge ../checker-framework-fork-mernst-branch-bin-readme into wpi-many", "committedDate": "2020-12-01T01:08:53Z", "type": "commit"}, {"oid": "2143677b9f6492deffdca1b729ec8e26edec6dcf", "url": "https://github.com/typetools/checker-framework/commit/2143677b9f6492deffdca1b729ec8e26edec6dcf", "message": "Further concision", "committedDate": "2020-12-01T01:09:43Z", "type": "commit"}, {"oid": "ac9805c31427d5e2d2015b822685c3f4e3164f33", "url": "https://github.com/typetools/checker-framework/commit/ac9805c31427d5e2d2015b822685c3f4e3164f33", "message": "Merge ../checker-framework-fork-mernst-branch-bin-readme into wpi-many", "committedDate": "2020-12-01T01:10:08Z", "type": "commit"}, {"oid": "c356460110951b390b852bc760d7d934f2f0e924", "url": "https://github.com/typetools/checker-framework/commit/c356460110951b390b852bc760d7d934f2f0e924", "message": "Describe new files in README", "committedDate": "2020-12-01T01:11:33Z", "type": "commit"}, {"oid": "4d2972a05d7ce33f3b7ba410e49b887c769b1f89", "url": "https://github.com/typetools/checker-framework/commit/4d2972a05d7ce33f3b7ba410e49b887c769b1f89", "message": "Move examples to the docs/examples/ directory", "committedDate": "2020-12-01T01:13:08Z", "type": "commit"}, {"oid": "63bc552b2be57ad29d5f4f7567812a48748f7e28", "url": "https://github.com/typetools/checker-framework/commit/63bc552b2be57ad29d5f4f7567812a48748f7e28", "message": "Undo paragraph filling, to reduce size of diffs", "committedDate": "2020-12-01T01:13:23Z", "type": "commit"}, {"oid": "5fd317e8d78ed1438a4927b9e0fd6884a4ae91b0", "url": "https://github.com/typetools/checker-framework/commit/5fd317e8d78ed1438a4927b9e0fd6884a4ae91b0", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-01T01:48:52Z", "type": "commit"}, {"oid": "edb9b3a75575ff2fe9982191331dedefcfc30e9f", "url": "https://github.com/typetools/checker-framework/commit/edb9b3a75575ff2fe9982191331dedefcfc30e9f", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-01T05:17:40Z", "type": "commit"}, {"oid": "48d61bf5a9a3819a79bf6556b6dbf853cdbca057", "url": "https://github.com/typetools/checker-framework/commit/48d61bf5a9a3819a79bf6556b6dbf853cdbca057", "message": "Exempt securerandom examples from whitespace style check", "committedDate": "2020-12-01T17:14:14Z", "type": "commit"}, {"oid": "0cefe436f5e5ff3f482011c3090f80a3e6d565d0", "url": "https://github.com/typetools/checker-framework/commit/0cefe436f5e5ff3f482011c3090f80a3e6d565d0", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-01T17:15:55Z", "type": "commit"}, {"oid": "c8b78dd4544b142045b9a5d8d8d254787099e17f", "url": "https://github.com/typetools/checker-framework/commit/c8b78dd4544b142045b9a5d8d8d254787099e17f", "message": "Adjust changelog", "committedDate": "2020-12-01T17:34:34Z", "type": "commit"}, {"oid": "2d2e674771f236b25c02de7dd6a18406160c1611", "url": "https://github.com/typetools/checker-framework/commit/2d2e674771f236b25c02de7dd6a18406160c1611", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-03T19:37:08Z", "type": "commit"}, {"oid": "1c883a347c5c5a72bb34a23981fb0b20be9dd014", "url": "https://github.com/typetools/checker-framework/commit/1c883a347c5c5a72bb34a23981fb0b20be9dd014", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-03T23:08:01Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcyNDkwMg==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r535724902", "bodyText": "What is the Makefile make?  Could you add a summary comment?", "author": "smillst", "createdAt": "2020-12-03T23:35:18Z", "path": "checker/bin-devel/Makefile", "diffHunk": "@@ -0,0 +1,18 @@\n+remove-annotations.sh:", "originalCommit": "1c883a347c5c5a72bb34a23981fb0b20be9dd014", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDQxOTU5OQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r540419599", "bodyText": "A Makefile target (unless it is marked as PHONY) is a file that the rule creates.  So, this rule creates the file remove-annotations-sh.", "author": "mernst", "createdAt": "2020-12-10T18:58:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcyNDkwMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcyNTQ0Mg==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r535725442", "bodyText": "How is \"trusted\" defined? Should new annotations be added to this list by hand or was it generated?", "author": "smillst", "createdAt": "2020-12-03T23:36:34Z", "path": "checker/bin-devel/remove-annotations.sh", "diffHunk": "@@ -0,0 +1,311 @@\n+#!/bin/sh\n+# Remove Checker Framework annotations (except trusted ones) from all files under the current directory.", "originalCommit": "1c883a347c5c5a72bb34a23981fb0b20be9dd014", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTcyNjQwNA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r535726404", "bodyText": "Does it matter that this is missing a new line?", "author": "smillst", "createdAt": "2020-12-03T23:39:05Z", "path": "docs/examples/wpi-many/securerandom.query", "diffHunk": "@@ -0,0 +1 @@\n+\"import java.security.SecureRandom;\" -filename:*Test.java language:Java -user:kelloggm -user:AndroidSDKSources", "originalCommit": "1c883a347c5c5a72bb34a23981fb0b20be9dd014", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e7c67e2bef78db1166f2ec045b5331fc01fd6c3f", "url": "https://github.com/typetools/checker-framework/commit/e7c67e2bef78db1166f2ec045b5331fc01fd6c3f", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-09T19:41:49Z", "type": "commit"}, {"oid": "d4ff3cbef6df4d5bf8fa49e540c7d0a188d5a3fa", "url": "https://github.com/typetools/checker-framework/commit/d4ff3cbef6df4d5bf8fa49e540c7d0a188d5a3fa", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-09T20:57:21Z", "type": "commit"}, {"oid": "608f006b9dd8c682279d19ec005fffd926d8a45b", "url": "https://github.com/typetools/checker-framework/commit/608f006b9dd8c682279d19ec005fffd926d8a45b", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-09T22:57:49Z", "type": "commit"}, {"oid": "b0730d27be83458c0f129db0e8f6f044424d43d1", "url": "https://github.com/typetools/checker-framework/commit/b0730d27be83458c0f129db0e8f6f044424d43d1", "message": "Explain \"trusted annotations\"", "committedDate": "2020-12-10T19:01:16Z", "type": "commit"}, {"oid": "bce94dc65443d9a8c6f3f3a3959b888d9d4054cf", "url": "https://github.com/typetools/checker-framework/commit/bce94dc65443d9a8c6f3f3a3959b888d9d4054cf", "message": "Cross-reference to the manual", "committedDate": "2020-12-10T19:04:14Z", "type": "commit"}, {"oid": "193cd82b44742640b519b2e3f9529263a2beb78b", "url": "https://github.com/typetools/checker-framework/commit/193cd82b44742640b519b2e3f9529263a2beb78b", "message": "Merge branch 'master' of github.com:typetools/checker-framework into wpi-many", "committedDate": "2020-12-10T22:12:48Z", "type": "commit"}, {"oid": "dd686484d1122e779ff36385505540f73bde2147", "url": "https://github.com/typetools/checker-framework/commit/dd686484d1122e779ff36385505540f73bde2147", "message": "one automated test", "committedDate": "2020-12-12T01:37:13Z", "type": "commit"}, {"oid": "9e6e8a79117947d263f517e130625cef1387ca52", "url": "https://github.com/typetools/checker-framework/commit/9e6e8a79117947d263f517e130625cef1387ca52", "message": "actually run the tests in CI. I think this should fail CI?", "committedDate": "2020-12-14T19:36:56Z", "type": "commit"}, {"oid": "56c521775bd8f45178f08e516c596853d3ad28e4", "url": "https://github.com/typetools/checker-framework/commit/56c521775bd8f45178f08e516c596853d3ad28e4", "message": "permit Java 8 or Java 11", "committedDate": "2020-12-14T22:14:12Z", "type": "commit"}, {"oid": "5d899f99511da2392cf0b21fbdab396fd8b832ce", "url": "https://github.com/typetools/checker-framework/commit/5d899f99511da2392cf0b21fbdab396fd8b832ce", "message": "Merge branch 'master' of github.com:typetools/checker-framework into wpi-many", "committedDate": "2020-12-14T22:14:20Z", "type": "commit"}, {"oid": "af143e9d98de9f6ced0ea6f7992bdf489b2dcdae", "url": "https://github.com/typetools/checker-framework/commit/af143e9d98de9f6ced0ea6f7992bdf489b2dcdae", "message": "move wpi script testing into the non-junit tests", "committedDate": "2020-12-14T23:26:55Z", "type": "commit"}, {"oid": "059a993fd9000dce0f73fc4b4e2a8db25abb9076", "url": "https://github.com/typetools/checker-framework/commit/059a993fd9000dce0f73fc4b4e2a8db25abb9076", "message": "Merge branch 'master' of github.com:typetools/checker-framework into wpi-many", "committedDate": "2020-12-15T00:46:50Z", "type": "commit"}, {"oid": "25fae9cf3f3b4528284d259402e274414dc73b94", "url": "https://github.com/typetools/checker-framework/commit/25fae9cf3f3b4528284d259402e274414dc73b94", "message": "add bibtex-clean", "committedDate": "2020-12-15T01:35:15Z", "type": "commit"}, {"oid": "9400c2c838660c50257a53054dbcc2f3fb445786", "url": "https://github.com/typetools/checker-framework/commit/9400c2c838660c50257a53054dbcc2f3fb445786", "message": "add html-pretty-print:", "committedDate": "2020-12-15T01:39:48Z", "type": "commit"}, {"oid": "70020de4303e1ae8f501b6bc44191e2db18f3299", "url": "https://github.com/typetools/checker-framework/commit/70020de4303e1ae8f501b6bc44191e2db18f3299", "message": "hopefully this will help me debug CI failures", "committedDate": "2020-12-15T19:53:11Z", "type": "commit"}, {"oid": "d4f1b1ea8abacec00b1a9e7255e6d4fb24d918fc", "url": "https://github.com/typetools/checker-framework/commit/d4f1b1ea8abacec00b1a9e7255e6d4fb24d918fc", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-15T20:35:11Z", "type": "commit"}, {"oid": "121f3c1e5d1487dcbeec1e496e3051221933f842", "url": "https://github.com/typetools/checker-framework/commit/121f3c1e5d1487dcbeec1e496e3051221933f842", "message": "logging for internal script, for CI", "committedDate": "2020-12-15T20:42:02Z", "type": "commit"}, {"oid": "daee01b9115301cf9f9e9b98736f8b240367c64a", "url": "https://github.com/typetools/checker-framework/commit/daee01b9115301cf9f9e9b98736f8b240367c64a", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-12-15T20:42:19Z", "type": "commit"}, {"oid": "76b7a5d92a284901bbd3296aaa67f641e1637447", "url": "https://github.com/typetools/checker-framework/commit/76b7a5d92a284901bbd3296aaa67f641e1637447", "message": "fix a minor bug that might maybe be the cause of these failures?", "committedDate": "2020-12-15T22:05:52Z", "type": "commit"}, {"oid": "3489926245f8cfc0a96acb6adbbf6422b6794548", "url": "https://github.com/typetools/checker-framework/commit/3489926245f8cfc0a96acb6adbbf6422b6794548", "message": "more aggressive logging to try to figure out what's going wrong on the CI machine", "committedDate": "2020-12-16T00:16:03Z", "type": "commit"}, {"oid": "adae96172595526842956bf13fd41bd5a7832902", "url": "https://github.com/typetools/checker-framework/commit/adae96172595526842956bf13fd41bd5a7832902", "message": "add more debug logging", "committedDate": "2020-12-16T00:58:21Z", "type": "commit"}, {"oid": "e697c77e91fd8e12350fdbaedf97eb37fe8aef83", "url": "https://github.com/typetools/checker-framework/commit/e697c77e91fd8e12350fdbaedf97eb37fe8aef83", "message": "try something else to narrow down this problem", "committedDate": "2020-12-16T01:25:56Z", "type": "commit"}, {"oid": "876022cbc6310a755ecef872b48696d1517e4672", "url": "https://github.com/typetools/checker-framework/commit/876022cbc6310a755ecef872b48696d1517e4672", "message": "clean up output", "committedDate": "2020-12-16T03:18:02Z", "type": "commit"}, {"oid": "916032ea86912e7b748d3b971eb1edc07a348f68", "url": "https://github.com/typetools/checker-framework/commit/916032ea86912e7b748d3b971eb1edc07a348f68", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-16T05:54:40Z", "type": "commit"}, {"oid": "3a3e124b25be0aec4f0c72c0fb5603c75e68085a", "url": "https://github.com/typetools/checker-framework/commit/3a3e124b25be0aec4f0c72c0fb5603c75e68085a", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-16T15:32:51Z", "type": "commit"}, {"oid": "cec421b65c3209d64864ac573554b5575be391ee", "url": "https://github.com/typetools/checker-framework/commit/cec421b65c3209d64864ac573554b5575be391ee", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-12-16T17:16:37Z", "type": "commit"}, {"oid": "a461500211dae3917999dacf246eeda49a4575cf", "url": "https://github.com/typetools/checker-framework/commit/a461500211dae3917999dacf246eeda49a4575cf", "message": "wpi-many scripts and documentation", "committedDate": "2020-10-23T01:14:44Z", "type": "commit"}, {"oid": "6cd9a8122db6ca44103967dd5d054a52734f2cb5", "url": "https://github.com/typetools/checker-framework/commit/6cd9a8122db6ca44103967dd5d054a52734f2cb5", "message": "tabs to spaces", "committedDate": "2020-10-23T01:34:22Z", "type": "commit"}, {"oid": "35ddecad9dfa4083f8c717431c150d420f964819", "url": "https://github.com/typetools/checker-framework/commit/35ddecad9dfa4083f8c717431c150d420f964819", "message": "Exceptions to formatting rules", "committedDate": "2020-10-24T14:15:38Z", "type": "commit"}, {"oid": "da50538fb35c996f134dba1fe489e823df531d53", "url": "https://github.com/typetools/checker-framework/commit/da50538fb35c996f134dba1fe489e823df531d53", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-10-24T14:16:00Z", "type": "commit"}, {"oid": "569838f6396f7dcb87616d02fbcddafc1858c6d5", "url": "https://github.com/typetools/checker-framework/commit/569838f6396f7dcb87616d02fbcddafc1858c6d5", "message": "Revamp documentation", "committedDate": "2020-10-24T16:23:34Z", "type": "commit"}, {"oid": "4dc868592de4060ed3aa927930d68869cff72feb", "url": "https://github.com/typetools/checker-framework/commit/4dc868592de4060ed3aa927930d68869cff72feb", "message": "Paste in output of onerous commands", "committedDate": "2020-10-24T16:28:56Z", "type": "commit"}, {"oid": "85fd788700b28972e9792c7d5bfced2e7932c039", "url": "https://github.com/typetools/checker-framework/commit/85fd788700b28972e9792c7d5bfced2e7932c039", "message": "Cleanups", "committedDate": "2020-10-24T16:50:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTQ4OTY0MQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r511489641", "bodyText": "The dljc usage string does not include --checker as a permitted command-line option.", "author": "mernst", "createdAt": "2020-10-24T16:30:08Z", "path": "docs/manual/inference.tex", "diffHunk": "@@ -140,46 +142,86 @@\n least upper bound of the types of all the expressions that are assigned\n into the field.\n \n-\\begin{sloppypar}\n-To use whole-program inference, make sure that\n-\\<insert-annotations-to-source>, from the Annotation File Utilities project,\n-is on your path (for example, its directory is in the \\<\\$PATH> environment variable).\n-Then, run the script \\<checker-framework/checker/bin/infer-and-annotate.sh>.\n-Its command-line arguments are:\n-\\end{sloppypar}\n+To run whole-program inference on a single project, use the \\<wpi.sh>\n+script (Section~\\ref{wpi-one}).  To run it on many projects (say, when\n+running it on projects from GitHub), use the \\<wpi-many.sh> script\n+(Section~\\ref{wpi-one}).  All WPI-related scripts appear in the\n+\\<checker/bin/> directory.\n \n-\\begin{enumerate}\n-\\item Optional: Command-line arguments to\n-  \\href{https://checkerframework.org/annotation-file-utilities/#insert-annotations-to-source}{\\<insert-annotations-to-source>}.\n-\\item Processor's name.\n-\\item Target program's classpath.  This argument is required; pass \"\" if it\n-  is empty.\n-\\item Optional: Extra processor arguments which will be passed to the checker, if any.\n-  You may supply any number of such arguments, or none.  Each such argument\n-  must start with a hyphen.\n-\\item Optional: Paths to \\<.jaif> files used as input in the inference\n-    process.\n-\\item Paths to \\<.java> files in the program.\n-\\end{enumerate}\n+Here are requirements to run the scripts:\n+\n+\\begin{itemize}\n+\\item The project on which inference is run must contain an Ant, Gradle,\n+  or Maven buildfile that compiles the project.\n+\\item \\verb|JAVA8_HOME| environment variable must point to a Java 8 JDK.\n+\\item \\verb|JAVA11_HOME| environment variable must point to a Java 11 JDK.\n+\\item \\<CHECKERFRAMEWORK> environment variable must point to a built copy of the Checker Framework.\n+\\item Other dependencies:\n+  ant,\n+  awk,\n+  curl,\n+  git,\n+  gradle,\n+  mvn,\n+  python2.7 (for dljc),\n+  wget.\n+\n+  Python2.7 modules:\n+  subprocess32.\n+\\end{itemize}\n+\n+\n+\\subsectionAndLabel{Running whole-program inference on a single project}{wpi-one}\n+\n+A typical invocation of whole-program inference is\n+\n+\\begin{Verbatim}\n+  wpi.sh -d . -- --checker nullness\n+\\end{Verbatim}\n+\n+TODO: What is the result?  A log file?  Placed where?\n+\n+The full syntax for invoking \\<wpi.sh> is\n \n-% TODO: Change the example project that is being annotated, since plume-lib is now deprecated.\n-For example, to add annotations to the \\<plume-lib> project:\n \\begin{Verbatim}\n-git clone https://github.com/mernst/plume-lib.git\n-cd plume-lib\n-make jar\n-$CHECKERFRAMEWORK/checker/bin/infer-and-annotate.sh \\\n-    \"LockChecker,NullnessChecker\" java/plume.jar:java/lib/junit-4.12.jar:$JAVA_HOME/lib/tools.jar \\\n-    `find java/src/plume/ -name \"*.java\"`\n-# View the results\n-git diff\n+  wpi.sh -d PROJECTDIR [-t TIMEOUT] -- [DLJC-ARGS]\n+\\end{Verbatim}\n+\n+Arguments in square brackets are optional.\n+Here is an explanation of the arguments:\n+\n+\\begin{description}\n+\\item[-d PROJECTDIR]\n+  The top-level directory of the project.  It must contain an Ant, Gradle,\n+  or Maven buildfile.\n+\n+\\item[-t TIMEOUT]\n+  The timeout for running the checker, in seconds\n+\n+\\item[DLJC-ARGS]\n+  Arguments that are passed directly to\n+  \\ahref{https://github.com/kelloggm/do-like-javac}{do-like-javac}'s\n+  \\<dljc> program without\n+  modification.  One argument is required: \\<--checker>, which indicates", "originalCommit": "4dc868592de4060ed3aa927930d68869cff72feb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTQ4OTY5Nw==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r511489697", "bodyText": "Is the -d command-line argument to wpi.sh needed?\nHere are two ideas, either of which may simplify invocation of the script:\n\nMake it optional, using the current directory if not supplied.\nRemove it, and take the directory as the first non-command-line argument.  Then there is no need for the -- on the wpi.sh command line, either.", "author": "mernst", "createdAt": "2020-10-24T16:30:57Z", "path": "checker/bin/wpi.sh", "diffHunk": "@@ -0,0 +1,170 @@\n+#!/bin/bash\n+\n+# This script performs whole-program inference on a project directory.\n+\n+# For usage and requirements, see the \"Whole-program inference\"\n+# section of the Checker Framework manual:\n+# https://checkerframework.org/manual/#whole-program-inference\n+\n+\n+while getopts \"d:u:t:\" opt; do\n+  case $opt in\n+    d) DIR=\"$OPTARG\"", "originalCommit": "4dc868592de4060ed3aa927930d68869cff72feb", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTQ5MTUwMQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r511491501", "bodyText": "Running wpi.sh creates a new directory checker/do-like-javac/.\n\nPlease put it under checker/bin/.\nStart the name with a period, as is done for the clone of plume-scripts and run-google-java-format in checker/bin-devel.\nPut it in the .gitignore", "author": "mernst", "createdAt": "2020-10-24T16:51:18Z", "path": "checker/bin/wpi.sh", "diffHunk": "@@ -0,0 +1,170 @@\n+#!/bin/bash\n+\n+# This script performs whole-program inference on a project directory.\n+\n+# For usage and requirements, see the \"Whole-program inference\"\n+# section of the Checker Framework manual:\n+# https://checkerframework.org/manual/#whole-program-inference\n+\n+\n+while getopts \"d:t:\" opt; do\n+  case $opt in\n+    d) DIR=\"$OPTARG\"\n+       ;;\n+    t) TIMEOUT=\"$OPTARG\"\n+       ;;\n+    \\?) # echo \"Invalid option -$OPTARG\" >&2\n+       ;;\n+  esac\n+done\n+\n+# Make $@ be the arguments that should be passed to dljc.\n+shift $(( OPTIND - 1 ))\n+\n+# check required arguments and environment variables:\n+\n+# Testing for JAVA8_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA8_HOME}\" = \"x\" ]; then\n+    echo \"JAVA8_HOME must be set to a Java 8 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA8_HOME}\" ]; then\n+    echo \"JAVA8_HOME is set to a non-existent directory ${JAVA8_HOME}\"\n+    exit 1\n+fi\n+\n+# Testing for JAVA11_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA11_HOME}\" = \"x\" ]; then\n+    echo \"JAVA11_HOME must be set to a Java 11 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA11_HOME}\" ]; then\n+    echo \"JAVA11_HOME is set to a non-existent directory ${JAVA11_HOME}\"\n+    exit 1\n+fi\n+\n+JAVA_HOME=\"${JAVA11_HOME}\"\n+\n+if [ \"x${CHECKERFRAMEWORK}\" = \"x\" ]; then\n+    echo \"CHECKERFRAMEWORK is not set; it must be set to a locally-built Checker Framework. Please clone and build github.com/typetools/checker-framework\"\n+    exit 2\n+fi\n+\n+if [ ! -d \"${CHECKERFRAMEWORK}\" ]; then\n+    echo \"CHECKERFRAMEWORK is set to a non-existent directory ${CHECKERFRAMEWORK}\"\n+    exit 2\n+fi\n+\n+if [ \"x${DIR}\" = \"x\" ]; then\n+    echo \"wpi.sh was called without a -d argument. The -d argument must be the absolute path to the directory containing the project on which to run WPI.\"\n+    exit 4\n+fi\n+\n+if [ ! -d \"${DIR}\" ]; then\n+    echo \"wpi.sh's -d argument was not a directory: ${DIR}\"\n+    exit 4\n+fi\n+\n+function configure_and_exec_dljc {\n+\n+  if [ -f build.gradle ]; then\n+      if [ -f gradlew ]; then\n+    chmod +x gradlew\n+    GRADLE_EXEC=\"./gradlew\"\n+      else\n+    GRADLE_EXEC=\"gradle\"\n+      fi\n+      CLEAN_CMD=\"${GRADLE_EXEC} clean -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+      BUILD_CMD=\"${GRADLE_EXEC} clean compileJava -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+  elif [ -f pom.xml ]; then\n+      if [ -f mvnw ]; then\n+    chmod +x mvnw\n+    MVN_EXEC=\"./mvnw\"\n+      else\n+    MVN_EXEC=\"mvn\"\n+      fi\n+      # if running on java 8, need /jre at the end of this Maven command\n+      if [ \"${JAVA_HOME}\" = \"${JAVA8_HOME}\" ]; then\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}/jre\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}/jre\"\n+      else\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}\"\n+      fi\n+  else\n+      echo \"no build file found for ${REPO_NAME}; not calling DLJC\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  DLJC_CMD=\"${DLJC} -t wpi $* -- ${BUILD_CMD}\"\n+\n+  if [ ! \"x${TIMEOUT}\" = \"x\" ]; then\n+      TMP=\"${DLJC_CMD}\"\n+      DLJC_CMD=\"timeout ${TIMEOUT} ${TMP}\"\n+  fi\n+\n+  # Remove old DLJC output.\n+  rm -rf dljc-out\n+\n+  # ensure the project is clean before invoking DLJC\n+  eval \"${CLEAN_CMD}\" < /dev/null\n+\n+  echo \"${DLJC_CMD}\"\n+\n+  # This command also includes \"clean\"; I'm not sure why it is necessary.\n+  eval \"${DLJC_CMD}\" < /dev/null\n+\n+  if [[ $? -eq 124 ]]; then\n+      echo \"dljc timed out for ${DIR}\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  if [ -f dljc-out/wpi.log ]; then\n+      WPI_RESULTS_AVAILABLE=\"yes\"\n+  else\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+  fi\n+}\n+\n+#### Check and setup dependencies\n+\n+SCRIPTDIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null 2>&1 && pwd )\"\n+\n+# clone or update DLJC\n+if [ ! -d \"${SCRIPTDIR}/../do-like-javac\" ]; then", "originalCommit": "85fd788700b28972e9792c7d5bfced2e7932c039", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "eed3d96ddb6153fc8dac2d8bdf95b5361d3b287c", "url": "https://github.com/typetools/checker-framework/commit/eed3d96ddb6153fc8dac2d8bdf95b5361d3b287c", "message": "Remove '$'", "committedDate": "2020-10-24T17:16:51Z", "type": "commit"}, {"oid": "c492cdf140143697d16179af5533340b365b0886", "url": "https://github.com/typetools/checker-framework/commit/c492cdf140143697d16179af5533340b365b0886", "message": "Fix LaTeX errorrs", "committedDate": "2020-10-24T17:19:36Z", "type": "commit"}, {"oid": "1df8e89e8a4f3abe4f574d52d08aedbfac5cd9d4", "url": "https://github.com/typetools/checker-framework/commit/1df8e89e8a4f3abe4f574d52d08aedbfac5cd9d4", "message": "Merge branch 'master' of github.com:typetools/checker-framework into wpi-many", "committedDate": "2020-10-27T17:09:03Z", "type": "commit"}, {"oid": "5c359d857b8c3b39007e6385af2e9bc79e0a82c8", "url": "https://github.com/typetools/checker-framework/commit/5c359d857b8c3b39007e6385af2e9bc79e0a82c8", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-10-27T17:24:33Z", "type": "commit"}, {"oid": "bf5e527e1dd42026f34ed1e6f33fa1a7acc180ca", "url": "https://github.com/typetools/checker-framework/commit/bf5e527e1dd42026f34ed1e6f33fa1a7acc180ca", "message": "fix latex typo", "committedDate": "2020-10-27T18:22:15Z", "type": "commit"}, {"oid": "a0dc8c66837cda8b7b76dd28896c66f4ee076f62", "url": "https://github.com/typetools/checker-framework/commit/a0dc8c66837cda8b7b76dd28896c66f4ee076f62", "message": "Fix LaTeX error", "committedDate": "2020-10-27T22:26:15Z", "type": "commit"}, {"oid": "6b739a9aa9c73f9d2f5a423eaf6e624360bb3b98", "url": "https://github.com/typetools/checker-framework/commit/6b739a9aa9c73f9d2f5a423eaf6e624360bb3b98", "message": "rewrite inference.tex, and other changes from code review", "committedDate": "2020-10-28T00:31:09Z", "type": "commit"}, {"oid": "7068748f9d5727aa17a58ea21816222ac4fb8ed6", "url": "https://github.com/typetools/checker-framework/commit/7068748f9d5727aa17a58ea21816222ac4fb8ed6", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-10-28T00:31:14Z", "type": "commit"}, {"oid": "f3cc2369ec9e4c359aabc77b43e6e026fdcb60e6", "url": "https://github.com/typetools/checker-framework/commit/f3cc2369ec9e4c359aabc77b43e6e026fdcb60e6", "message": "Update changelog.txt", "committedDate": "2020-10-28T00:37:36Z", "type": "commit"}, {"oid": "534747c54a3128e0ba19e5a59c7f580c8bae6f2e", "url": "https://github.com/typetools/checker-framework/commit/534747c54a3128e0ba19e5a59c7f580c8bae6f2e", "message": "Document why nested class is not static", "committedDate": "2020-10-29T21:30:59Z", "type": "commit"}, {"oid": "3abd7a965756e3433a432e6f3791a8b00158b528", "url": "https://github.com/typetools/checker-framework/commit/3abd7a965756e3433a432e6f3791a8b00158b528", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-10-29T22:58:55Z", "type": "commit"}, {"oid": "321d8d36080d5f8ce268ee4182949061510bb701", "url": "https://github.com/typetools/checker-framework/commit/321d8d36080d5f8ce268ee4182949061510bb701", "message": "Merge branch 'master' of github.com:typetools/checker-framework", "committedDate": "2020-10-30T03:14:14Z", "type": "commit"}, {"oid": "12c74c8aee6e53843872c8ee5c4e50bfeb54883b", "url": "https://github.com/typetools/checker-framework/commit/12c74c8aee6e53843872c8ee5c4e50bfeb54883b", "message": "Move local type inference out of type inference chapter", "committedDate": "2020-10-30T05:02:01Z", "type": "commit"}, {"oid": "2ba103323b7a97dab70e5bd166d1befc53a2ac4e", "url": "https://github.com/typetools/checker-framework/commit/2ba103323b7a97dab70e5bd166d1befc53a2ac4e", "message": "Edits to type inference section of manual", "committedDate": "2020-10-30T15:50:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIxMzk3OQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515213979", "bodyText": "Can you further explain \"each candidate set of annotations\"?  Is that from each iteration of type-checking?  Users only want to see the results of the final iteration.  Say how to see that.", "author": "mernst", "createdAt": "2020-10-30T16:13:48Z", "path": "docs/manual/inference.tex", "diffHunk": "@@ -126,22 +92,209 @@\n Cascade applies it.  Cascade works with any checker built on the Checker\n Framework.\n You can find installation instructions and a video tutorial at \\url{https://github.com/reprogrammer/cascade}.\n+% See last commit at https://github.com/reprogrammer/cascade/commits/master .\n+Cascade was last updated in November 2014, so it might or might not work for you.\n+\n+\\end{description}\n+\n+Except for one of the nullness inference tools, all these\n+type inference tools are static analyses.  They analyze your program's\n+source code, but they do not run your program.\n \n \n \\sectionAndLabel{Whole-program inference}{whole-program-inference}\n \n-Whole-program inference is an interprocedural inference that\n+Whole-program inference\n infers types for fields, method parameters, and method return types that do not\n have a user-written qualifier (for the given type system).\n-The inferred type qualifiers are inserted into\n-your program.\n+The inferred type qualifiers are output into annotation files.\n The inferred type is the most specific type that is compatible with all the\n uses in the program.  For example, the inferred type for a field is the\n least upper bound of the types of all the expressions that are assigned\n into the field.\n \n+There are three scripts that you can use to run whole-program inference.\n+Each has advantages and disadvantages, discussed below:\n+\n+\\begin{itemize}\n+    \\item\n+    To run whole-program inference on a single project without modifying its source code,\n+    use the \\<wpi.sh> script (Section~\\ref{wpi-one}). This script can automatically understand\n+    many Ant, Maven, and Gradle build files, so it requires little manual configuration.\n+\n+    \\item\n+    To run whole-program inference on many projects without modifying their source code\n+    (say, when running it on projects from GitHub), use the \\<wpi-many.sh> script (Section~\\ref{wpi-many}).\n+    This script can understand the same build files as \\<wpi.sh>.\n+\n+    \\item\n+    If you want to insert the inferred annotations directly into a single\n+    project's source code, use the \\<infer-and-annotate.sh> script (Section~\\ref{wpi-insert}).\n+\\end{itemize}\n+\n+These type inference scripts appear in the \\<checker/bin/> directory.\n+The remainder of this chapter describes them\n+(Sections~\\ref{wpi-one}--\\ref{wpi-insert}), then concludes with discussion\n+that applies to all of them.x\n+\n+\n+\\sectionAndLabel{Running whole-program inference on a single project}{wpi-one}\n+\n+A typical invocation of \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh -- --checker nullness\n+\\end{Verbatim}\n+\n+The result is a set of log files placed in the \\<dljc-out> folder of the\n+target project. The results of type-checking with each candidate set of", "originalCommit": "2ba103323b7a97dab70e5bd166d1befc53a2ac4e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIxNDk0NA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515214944", "bodyText": "This text belongs in the \"single project\" section, I think.  This text also differs slightly from what is already there.  Please move the text and reconcile the versions.", "author": "mernst", "createdAt": "2020-10-30T16:15:19Z", "path": "docs/manual/inference.tex", "diffHunk": "@@ -126,22 +92,209 @@\n Cascade applies it.  Cascade works with any checker built on the Checker\n Framework.\n You can find installation instructions and a video tutorial at \\url{https://github.com/reprogrammer/cascade}.\n+% See last commit at https://github.com/reprogrammer/cascade/commits/master .\n+Cascade was last updated in November 2014, so it might or might not work for you.\n+\n+\\end{description}\n+\n+Except for one of the nullness inference tools, all these\n+type inference tools are static analyses.  They analyze your program's\n+source code, but they do not run your program.\n \n \n \\sectionAndLabel{Whole-program inference}{whole-program-inference}\n \n-Whole-program inference is an interprocedural inference that\n+Whole-program inference\n infers types for fields, method parameters, and method return types that do not\n have a user-written qualifier (for the given type system).\n-The inferred type qualifiers are inserted into\n-your program.\n+The inferred type qualifiers are output into annotation files.\n The inferred type is the most specific type that is compatible with all the\n uses in the program.  For example, the inferred type for a field is the\n least upper bound of the types of all the expressions that are assigned\n into the field.\n \n+There are three scripts that you can use to run whole-program inference.\n+Each has advantages and disadvantages, discussed below:\n+\n+\\begin{itemize}\n+    \\item\n+    To run whole-program inference on a single project without modifying its source code,\n+    use the \\<wpi.sh> script (Section~\\ref{wpi-one}). This script can automatically understand\n+    many Ant, Maven, and Gradle build files, so it requires little manual configuration.\n+\n+    \\item\n+    To run whole-program inference on many projects without modifying their source code\n+    (say, when running it on projects from GitHub), use the \\<wpi-many.sh> script (Section~\\ref{wpi-many}).\n+    This script can understand the same build files as \\<wpi.sh>.\n+\n+    \\item\n+    If you want to insert the inferred annotations directly into a single\n+    project's source code, use the \\<infer-and-annotate.sh> script (Section~\\ref{wpi-insert}).\n+\\end{itemize}\n+\n+These type inference scripts appear in the \\<checker/bin/> directory.\n+The remainder of this chapter describes them\n+(Sections~\\ref{wpi-one}--\\ref{wpi-insert}), then concludes with discussion\n+that applies to all of them.x\n+\n+\n+\\sectionAndLabel{Running whole-program inference on a single project}{wpi-one}\n+\n+A typical invocation of \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh -- --checker nullness\n+\\end{Verbatim}\n+\n+The result is a set of log files placed in the \\<dljc-out> folder of the\n+target project. The results of type-checking with each candidate set of\n+annotations will be concatenated into the file \\<dljc-out/wpi.log>.\n+\n+The full syntax for invoking \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh [-d PROJECTDIR] [-t TIMEOUT] -- [DLJC-ARGS]\n+\\end{Verbatim}\n+\n+Arguments in square brackets are optional.\n+Here is an explanation of the arguments:\n+\n+\\begin{description}\n+\\item[-d PROJECTDIR]\n+  The top-level directory of the project.  It must contain an Ant, Gradle,\n+  or Maven buildfile. The default is the current working directory.\n+\n+\\item[-t TIMEOUT]\n+  The timeout for running the checker, in seconds\n+\n+\\item[DLJC-ARGS]\n+  Arguments that are passed directly to\n+  \\ahref{https://github.com/kelloggm/do-like-javac}{do-like-javac}'s\n+  \\<dljc> program without\n+  modification.  One argument is required: \\<-\\relax-checker>, which indicates\n+  what type-checker to run (use the fully-qualified name of the checker).\n+  The \\ahrefforurl{https://github.com/kelloggm/do-like-javac}{documentation of do-like-javac}\n+  describes the other commands that its WPI tool supports.\n+\\end{description}\n+\n+You may need to wait a few minutes for the command to complete.\n+\n+\n+\\sectionAndLabel{Requirements for whole-program inference scripts}{wpi-shared-requirements}\n+\n+The requirements to run \\<wpi.sh> and \\<wpi-many.sh> are the same:\n+\n+\\begin{itemize}\n+\\item The project on which inference is run must contain an Ant, Gradle,\n+  or Maven buildfile that compiles the project.\n+\\item \\verb|JAVA8_HOME| environment variable must point to a Java 8 JDK.\n+\\item \\verb|JAVA11_HOME| environment variable must point to a Java 11 JDK.\n+\\item \\<CHECKERFRAMEWORK> environment variable must point to a built copy of the Checker Framework.\n+\\item Other dependencies:\n+  ant,\n+  awk,\n+  curl,\n+  git,\n+  gradle,\n+  mvn,\n+  python2.7 (for dljc),\n+  wget.\n+\n+  Python2.7 modules:\n+  subprocess32.\n+\\end{itemize}\n+\n+\n+\n+\\sectionAndLabel{Running whole-program inference on many projects}{wpi-many}\n+\n+The requirements to run \\<wpi.sh> and \\<wpi-many.sh> are the same. See Section~\\ref{wpi-shared-requirements}\n+for the list of requirements.\n+\n+To run an experiment on many projects:\n+\\begin{enumerate}\n+\\item Use \\<query-github.sh> to search GitHub for candidate repositories.\n+File \\<securerandom.query> is an example query, and file\n+\\<securerandom.list>\n+was created by running \\<query-github.sh securerandom.query 100>. If you do\n+not want to use GitHub, construct a file yourself that matches the format of\n+the file \\<securerandom.list>.\n+\n+\\item Use \\<wpi-many.sh> to run whole-program inference on every\n+Ant, Gradle, or Maven project in a list of (GitHub repository URL, git hash)\n+pairs.\n+\\begin{itemize}\n+\\item If you are using a checker that is distributed with the Checker\n+Framework, use \\<wpi-many.sh> directly.\n+\\item If you are using a checker that is not distributed with the Checker\n+Framework (also known as a \"custom checker\"), file\n+\\<custom-checker-example.sh> is a no-arguments\n+script that serves as an example of how to use \\<wpi-many.sh>.\n+\\end{itemize}\n+\n+Log files are copied into a results directory.\n+For a failed run, the log file indicates the reason that WPI could not", "originalCommit": "2ba103323b7a97dab70e5bd166d1befc53a2ac4e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTMyNTMxMw==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515325313", "bodyText": "It does not. wpi-many.sh processes the log files produced by wpi-one.sh and filters out those for which no actual results are available (and putting a log file with the reason a project was removed in the results directory). It also copies the dlcj-out/wpi.log file for projects for which results actually were available. This pre-processing makes it easier for users running large experiments to go through all the results quickly, by placing the top-level result for each project in a single directory.", "author": "kelloggm", "createdAt": "2020-10-30T19:22:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTIxNDk0NA=="}], "type": "inlineReview"}, {"oid": "14fd50be9f6d5be5ed42c47eef6b69a591f68e28", "url": "https://github.com/typetools/checker-framework/commit/14fd50be9f6d5be5ed42c47eef6b69a591f68e28", "message": "Fix typo", "committedDate": "2020-10-30T16:17:01Z", "type": "commit"}, {"oid": "3a61f2e9ea11b0dd12ff7aa9aba060f344a62411", "url": "https://github.com/typetools/checker-framework/commit/3a61f2e9ea11b0dd12ff7aa9aba060f344a62411", "message": "Remove redundancy", "committedDate": "2020-10-30T16:33:02Z", "type": "commit"}, {"oid": "09cbc746e18c34604edda96678e84467dd420936", "url": "https://github.com/typetools/checker-framework/commit/09cbc746e18c34604edda96678e84467dd420936", "message": "Restructure discussion of how inference results depend on the analyzed code", "committedDate": "2020-10-30T17:11:30Z", "type": "commit"}, {"oid": "8f8f036565a62c85d4125d257377726186640348", "url": "https://github.com/typetools/checker-framework/commit/8f8f036565a62c85d4125d257377726186640348", "message": "Prefer \"type refinement\" over \"local type inference\"", "committedDate": "2020-10-30T17:11:59Z", "type": "commit"}, {"oid": "b64891835a4902b3facddadd2cab36d418a340a4", "url": "https://github.com/typetools/checker-framework/commit/b64891835a4902b3facddadd2cab36d418a340a4", "message": "Remove more redundant discussion", "committedDate": "2020-10-30T17:19:52Z", "type": "commit"}, {"oid": "0d263bd76fcb420bc89b7360e23c8baceb8208db", "url": "https://github.com/typetools/checker-framework/commit/0d263bd76fcb420bc89b7360e23c8baceb8208db", "message": "Remove an implementation detail", "committedDate": "2020-10-30T17:26:59Z", "type": "commit"}, {"oid": "50dbf2030991cca6741348e841f0e4775ed0e0ae", "url": "https://github.com/typetools/checker-framework/commit/50dbf2030991cca6741348e841f0e4775ed0e0ae", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-10-30T17:27:45Z", "type": "commit"}, {"oid": "179c19122c3bb099954c0c053c76ff49877f9d10", "url": "https://github.com/typetools/checker-framework/commit/179c19122c3bb099954c0c053c76ff49877f9d10", "message": "Tweaks to URLs", "committedDate": "2020-10-30T17:33:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1MTQ2NA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515351464", "bodyText": "The -g .gradle command causes gradle to core dump, when the .gradle directory does not exist.  Is it needed?  Or, can it be supplied only if a .gradle/ directory exists?", "author": "mernst", "createdAt": "2020-10-30T20:08:34Z", "path": "checker/bin/wpi.sh", "diffHunk": "@@ -0,0 +1,175 @@\n+#!/bin/bash\n+\n+# This script performs whole-program inference on a project directory.\n+\n+# For usage and requirements, see the \"Whole-program inference\"\n+# section of the Checker Framework manual:\n+# https://checkerframework.org/manual/#whole-program-inference\n+\n+\n+while getopts \"d:t:\" opt; do\n+  case $opt in\n+    d) DIR=\"$OPTARG\"\n+       ;;\n+    t) TIMEOUT=\"$OPTARG\"\n+       ;;\n+    \\?) # echo \"Invalid option -$OPTARG\" >&2\n+       ;;\n+  esac\n+done\n+\n+# Make $@ be the arguments that should be passed to dljc.\n+shift $(( OPTIND - 1 ))\n+\n+# check required arguments and environment variables:\n+\n+# Testing for JAVA8_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA8_HOME}\" = \"x\" ]; then\n+    echo \"JAVA8_HOME must be set to a Java 8 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA8_HOME}\" ]; then\n+    echo \"JAVA8_HOME is set to a non-existent directory ${JAVA8_HOME}\"\n+    exit 1\n+fi\n+\n+# Testing for JAVA11_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA11_HOME}\" = \"x\" ]; then\n+    echo \"JAVA11_HOME must be set to a Java 11 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA11_HOME}\" ]; then\n+    echo \"JAVA11_HOME is set to a non-existent directory ${JAVA11_HOME}\"\n+    exit 1\n+fi\n+\n+JAVA_HOME=\"${JAVA11_HOME}\"\n+\n+if [ \"x${CHECKERFRAMEWORK}\" = \"x\" ]; then\n+    echo \"CHECKERFRAMEWORK is not set; it must be set to a locally-built Checker Framework. Please clone and build github.com/typetools/checker-framework\"\n+    exit 2\n+fi\n+\n+if [ ! -d \"${CHECKERFRAMEWORK}\" ]; then\n+    echo \"CHECKERFRAMEWORK is set to a non-existent directory ${CHECKERFRAMEWORK}\"\n+    exit 2\n+fi\n+\n+if [ \"x${DIR}\" = \"x\" ]; then\n+    echo \"wpi.sh was called without a -d argument. Running on the current directory instead.\"\n+    DIR=$(pwd)\n+fi\n+\n+if [ ! -d \"${DIR}\" ]; then\n+    echo \"wpi.sh's -d argument was not a directory: ${DIR}\"\n+    exit 4\n+fi\n+\n+function configure_and_exec_dljc {\n+\n+  if [ -f build.gradle ]; then\n+      if [ -f gradlew ]; then\n+    chmod +x gradlew\n+    GRADLE_EXEC=\"./gradlew\"\n+      else\n+    GRADLE_EXEC=\"gradle\"\n+      fi\n+      CLEAN_CMD=\"${GRADLE_EXEC} clean -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"", "originalCommit": "179c19122c3bb099954c0c053c76ff49877f9d10", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjMyNjg2NA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r516326864", "bodyText": "As we discussed on our call, I intended to just guard this behind a flag. But I did some digging and now I remember why this is here. There is a relevant Gradle issue (gradle/gradle#1319), which I'll link from a TODO comment in the script. The gist is that Gradle doesn't play nicely with distributed file systems (like those used on the cycle servers) because it tries to put its caches in the user's home directory by default (which can cause either contention if you're using multiple servers or use too much space. And in the cycle servers case, it's also slow! The -g option controls where those caches go, in addition to controlling where to look first for user configuration etc. So this is here to force gradle to cache everything in the .gradle directory relative to the project, which means each project gets its own cache.\nI've implemented a check for whether .gradle exists that creates the directory if it doesn't exist. This leaves the gradle command line invocation unchanged. This should fix your immediate problem, but it leaves the larger problem of not sharing caches; I'm not sure if we want to fix that or not.", "author": "kelloggm", "createdAt": "2020-11-02T23:22:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1MTQ2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjgzMDgxOQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r516830819", "bodyText": "If it is convenient to do, I would prefer to use a location in /scratch/$USER/ or /tmp/$USER/.  This would permit sharing the cache and would reduce repeated downloads.  This isn't critical but would be nice to do.", "author": "mernst", "createdAt": "2020-11-03T17:17:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1MTQ2NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzAyMjE4MQ==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r517022181", "bodyText": "That would work on the CSE cycle servers, but these scripts should be portable and we can't know a priori what's part of a shared file system and what is not. For that reason, I think it's better to default this to a directory that's exclusive to the project, even if it makes these scripts less efficient.\nYou're right that on a system like the CSE file servers it would be nice to have an option that will change where this default is. I've added one: -g. Hopefully that will address your concerns.", "author": "kelloggm", "createdAt": "2020-11-03T23:51:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1MTQ2NA=="}], "type": "inlineReview"}, {"oid": "89fd6f47c71bc13754ad6da2b35aeca84a75a050", "url": "https://github.com/typetools/checker-framework/commit/89fd6f47c71bc13754ad6da2b35aeca84a75a050", "message": "Fix directories", "committedDate": "2020-10-30T20:09:01Z", "type": "commit"}, {"oid": "cae815c2952ac49ff277d15868493f9208647ace", "url": "https://github.com/typetools/checker-framework/commit/cae815c2952ac49ff277d15868493f9208647ace", "message": "Add `remove-annotations.sh` script that removes all Checker Framework annotations", "committedDate": "2020-10-30T20:11:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NDg2MA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515354860", "bodyText": "https://github.com/kelloggm/do-like-javac says:\n\nThe --checker option is required. Its argument is the fully-qualified name of the checker you want to run.\n\nCan --checker be supplied multiple times?  Or can I supply multiple checkers in comma-separated form, as in javac's -processor argument (https://checkerframework.org/manual/#shorthand-for-checkers)?\n(Please fix that in do-like-javac rather than here, though this text might need to be tweaked slightly.)", "author": "mernst", "createdAt": "2020-10-30T20:16:44Z", "path": "docs/manual/inference.tex", "diffHunk": "@@ -126,22 +84,209 @@\n Cascade applies it.  Cascade works with any checker built on the Checker\n Framework.\n You can find installation instructions and a video tutorial at \\url{https://github.com/reprogrammer/cascade}.\n+% See last commit at https://github.com/reprogrammer/cascade/commits/master .\n+Cascade was last updated in November 2014, so it might or might not work for you.\n+\n+\\end{description}\n+\n+Except for one of the nullness inference tools, all these\n+type inference tools are static analyses.  They analyze your program's\n+source code, but they do not run your program.\n \n \n \\sectionAndLabel{Whole-program inference}{whole-program-inference}\n \n-Whole-program inference is an interprocedural inference that\n+Whole-program inference\n infers types for fields, method parameters, and method return types that do not\n have a user-written qualifier (for the given type system).\n-The inferred type qualifiers are inserted into\n-your program.\n+The inferred type qualifiers are output into annotation files.\n The inferred type is the most specific type that is compatible with all the\n uses in the program.  For example, the inferred type for a field is the\n least upper bound of the types of all the expressions that are assigned\n into the field.\n \n+There are three scripts that you can use to run whole-program inference.\n+Each has advantages and disadvantages, discussed below:\n+\n+\\begin{itemize}\n+    \\item\n+    To run whole-program inference on a single project without modifying its source code,\n+    use the \\<wpi.sh> script (Section~\\ref{wpi-one}). This script can automatically understand\n+    many Ant, Maven, and Gradle build files, so it requires little manual configuration.\n+\n+    \\item\n+    To run whole-program inference on many projects without modifying their source code\n+    (say, when running it on projects from GitHub), use the \\<wpi-many.sh> script (Section~\\ref{wpi-many}).\n+    This script can understand the same build files as \\<wpi.sh>.\n+\n+    \\item\n+    If you want to insert the inferred annotations directly into a single\n+    project's source code, use the \\<infer-and-annotate.sh> script (Section~\\ref{wpi-insert}).\n+\\end{itemize}\n+\n+These type inference scripts appear in the \\<checker/bin/> directory.\n+The remainder of this chapter describes them\n+(Sections~\\ref{wpi-one}--\\ref{wpi-insert}), then concludes with discussion\n+that applies to all of them.x\n+\n+\n+\\sectionAndLabel{Running whole-program inference on a single project}{wpi-one}\n+\n+A typical invocation of \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh -- --checker nullness\n+\\end{Verbatim}\n+\n+The result is a set of log files placed in the \\<dljc-out> folder of the\n+target project. The results of type-checking with each candidate set of\n+annotations will be concatenated into the file \\<dljc-out/wpi.log>.\n+\n+The full syntax for invoking \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh [-d PROJECTDIR] [-t TIMEOUT] -- [DLJC-ARGS]\n+\\end{Verbatim}\n+\n+Arguments in square brackets are optional.\n+Here is an explanation of the arguments:\n+\n+\\begin{description}\n+\\item[-d PROJECTDIR]\n+  The top-level directory of the project.  It must contain an Ant, Gradle,\n+  or Maven buildfile. The default is the current working directory.\n+\n+\\item[-t TIMEOUT]\n+  The timeout for running the checker, in seconds\n+\n+\\item[DLJC-ARGS]\n+  Arguments that are passed directly to\n+  \\ahref{https://github.com/kelloggm/do-like-javac}{do-like-javac}'s\n+  \\<dljc> program without\n+  modification.  One argument is required: \\<-\\relax-checker>, which indicates", "originalCommit": "cae815c2952ac49ff277d15868493f9208647ace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTA1MA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515355050", "bodyText": "It seems to work to use shorthands as described in https://checkerframework.org/manual/#shorthand-for-checkers .", "author": "mernst", "createdAt": "2020-10-30T20:17:13Z", "path": "docs/manual/inference.tex", "diffHunk": "@@ -126,22 +84,209 @@\n Cascade applies it.  Cascade works with any checker built on the Checker\n Framework.\n You can find installation instructions and a video tutorial at \\url{https://github.com/reprogrammer/cascade}.\n+% See last commit at https://github.com/reprogrammer/cascade/commits/master .\n+Cascade was last updated in November 2014, so it might or might not work for you.\n+\n+\\end{description}\n+\n+Except for one of the nullness inference tools, all these\n+type inference tools are static analyses.  They analyze your program's\n+source code, but they do not run your program.\n \n \n \\sectionAndLabel{Whole-program inference}{whole-program-inference}\n \n-Whole-program inference is an interprocedural inference that\n+Whole-program inference\n infers types for fields, method parameters, and method return types that do not\n have a user-written qualifier (for the given type system).\n-The inferred type qualifiers are inserted into\n-your program.\n+The inferred type qualifiers are output into annotation files.\n The inferred type is the most specific type that is compatible with all the\n uses in the program.  For example, the inferred type for a field is the\n least upper bound of the types of all the expressions that are assigned\n into the field.\n \n+There are three scripts that you can use to run whole-program inference.\n+Each has advantages and disadvantages, discussed below:\n+\n+\\begin{itemize}\n+    \\item\n+    To run whole-program inference on a single project without modifying its source code,\n+    use the \\<wpi.sh> script (Section~\\ref{wpi-one}). This script can automatically understand\n+    many Ant, Maven, and Gradle build files, so it requires little manual configuration.\n+\n+    \\item\n+    To run whole-program inference on many projects without modifying their source code\n+    (say, when running it on projects from GitHub), use the \\<wpi-many.sh> script (Section~\\ref{wpi-many}).\n+    This script can understand the same build files as \\<wpi.sh>.\n+\n+    \\item\n+    If you want to insert the inferred annotations directly into a single\n+    project's source code, use the \\<infer-and-annotate.sh> script (Section~\\ref{wpi-insert}).\n+\\end{itemize}\n+\n+These type inference scripts appear in the \\<checker/bin/> directory.\n+The remainder of this chapter describes them\n+(Sections~\\ref{wpi-one}--\\ref{wpi-insert}), then concludes with discussion\n+that applies to all of them.x\n+\n+\n+\\sectionAndLabel{Running whole-program inference on a single project}{wpi-one}\n+\n+A typical invocation of \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh -- --checker nullness\n+\\end{Verbatim}\n+\n+The result is a set of log files placed in the \\<dljc-out> folder of the\n+target project. The results of type-checking with each candidate set of\n+annotations will be concatenated into the file \\<dljc-out/wpi.log>.\n+\n+The full syntax for invoking \\<wpi.sh> is\n+\n+\\begin{Verbatim}\n+  wpi.sh [-d PROJECTDIR] [-t TIMEOUT] -- [DLJC-ARGS]\n+\\end{Verbatim}\n+\n+Arguments in square brackets are optional.\n+Here is an explanation of the arguments:\n+\n+\\begin{description}\n+\\item[-d PROJECTDIR]\n+  The top-level directory of the project.  It must contain an Ant, Gradle,\n+  or Maven buildfile. The default is the current working directory.\n+\n+\\item[-t TIMEOUT]\n+  The timeout for running the checker, in seconds\n+\n+\\item[DLJC-ARGS]\n+  Arguments that are passed directly to\n+  \\ahref{https://github.com/kelloggm/do-like-javac}{do-like-javac}'s\n+  \\<dljc> program without\n+  modification.  One argument is required: \\<-\\relax-checker>, which indicates\n+  what type-checker to run (use the fully-qualified name of the checker).", "originalCommit": "cae815c2952ac49ff277d15868493f9208647ace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTc2OA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515355768", "bodyText": "It is distracting and confusing that the pushd and popd commands produce user-visible output.", "author": "mernst", "createdAt": "2020-10-30T20:19:05Z", "path": "checker/bin/wpi.sh", "diffHunk": "@@ -0,0 +1,174 @@\n+#!/bin/bash\n+\n+# This script performs whole-program inference on a project directory.\n+\n+# For usage and requirements, see the \"Whole-program inference\"\n+# section of the Checker Framework manual:\n+# https://checkerframework.org/manual/#whole-program-inference\n+\n+\n+while getopts \"d:t:\" opt; do\n+  case $opt in\n+    d) DIR=\"$OPTARG\"\n+       ;;\n+    t) TIMEOUT=\"$OPTARG\"\n+       ;;\n+    \\?) # echo \"Invalid option -$OPTARG\" >&2\n+       ;;\n+  esac\n+done\n+\n+# Make $@ be the arguments that should be passed to dljc.\n+shift $(( OPTIND - 1 ))\n+\n+# check required arguments and environment variables:\n+\n+# Testing for JAVA8_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA8_HOME}\" = \"x\" ]; then\n+    echo \"JAVA8_HOME must be set to a Java 8 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA8_HOME}\" ]; then\n+    echo \"JAVA8_HOME is set to a non-existent directory ${JAVA8_HOME}\"\n+    exit 1\n+fi\n+\n+# Testing for JAVA11_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA11_HOME}\" = \"x\" ]; then\n+    echo \"JAVA11_HOME must be set to a Java 11 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA11_HOME}\" ]; then\n+    echo \"JAVA11_HOME is set to a non-existent directory ${JAVA11_HOME}\"\n+    exit 1\n+fi\n+\n+JAVA_HOME=\"${JAVA11_HOME}\"\n+\n+if [ \"x${CHECKERFRAMEWORK}\" = \"x\" ]; then\n+    echo \"CHECKERFRAMEWORK is not set; it must be set to a locally-built Checker Framework. Please clone and build github.com/typetools/checker-framework\"\n+    exit 2\n+fi\n+\n+if [ ! -d \"${CHECKERFRAMEWORK}\" ]; then\n+    echo \"CHECKERFRAMEWORK is set to a non-existent directory ${CHECKERFRAMEWORK}\"\n+    exit 2\n+fi\n+\n+if [ \"x${DIR}\" = \"x\" ]; then\n+    echo \"wpi.sh: no -d argument supplied, using the current directory.\"\n+    DIR=$(pwd)\n+fi\n+\n+if [ ! -d \"${DIR}\" ]; then\n+    echo \"wpi.sh's -d argument was not a directory: ${DIR}\"\n+    exit 4\n+fi\n+\n+function configure_and_exec_dljc {\n+\n+  if [ -f build.gradle ]; then\n+      if [ -f gradlew ]; then\n+    chmod +x gradlew\n+    GRADLE_EXEC=\"./gradlew\"\n+      else\n+    GRADLE_EXEC=\"gradle\"\n+      fi\n+      CLEAN_CMD=\"${GRADLE_EXEC} clean -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+      BUILD_CMD=\"${GRADLE_EXEC} clean compileJava -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+  elif [ -f pom.xml ]; then\n+      if [ -f mvnw ]; then\n+    chmod +x mvnw\n+    MVN_EXEC=\"./mvnw\"\n+      else\n+    MVN_EXEC=\"mvn\"\n+      fi\n+      # if running on java 8, need /jre at the end of this Maven command\n+      if [ \"${JAVA_HOME}\" = \"${JAVA8_HOME}\" ]; then\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}/jre\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}/jre\"\n+      else\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}\"\n+      fi\n+  elif [ -f build.xml ]; then\n+    # TODO: test these more thoroughly\n+    CLEAN_CMD=\"ant clean\"\n+    BUILD_CMD=\"ant clean compile\"\n+  else\n+      echo \"no build file found for ${REPO_NAME}; not calling DLJC\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  DLJC_CMD=\"${DLJC} -t wpi $* -- ${BUILD_CMD}\"\n+\n+  if [ ! \"x${TIMEOUT}\" = \"x\" ]; then\n+      TMP=\"${DLJC_CMD}\"\n+      DLJC_CMD=\"timeout ${TIMEOUT} ${TMP}\"\n+  fi\n+\n+  # Remove old DLJC output.\n+  rm -rf dljc-out\n+\n+  # ensure the project is clean before invoking DLJC\n+  eval \"${CLEAN_CMD}\" < /dev/null\n+\n+  echo \"${DLJC_CMD}\"\n+\n+  # This command also includes \"clean\"; I'm not sure why it is necessary.\n+  eval \"${DLJC_CMD}\" < /dev/null\n+\n+  if [[ $? -eq 124 ]]; then\n+      echo \"dljc timed out for ${DIR}\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  if [ -f dljc-out/wpi.log ]; then\n+      WPI_RESULTS_AVAILABLE=\"yes\"\n+  else\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+  fi\n+}\n+\n+#### Check and setup dependencies\n+\n+SCRIPTDIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null 2>&1 && pwd )\"\n+\n+# clone or update DLJC\n+if [ -d \"${SCRIPTDIR}/.do-like-javac\" ]; then\n+    git -C \"${SCRIPTDIR}/.do-like-javac\" pull\n+else\n+    git -C \"${SCRIPTDIR}\" clone https://github.com/kelloggm/do-like-javac --depth 1 .do-like-javac || (echo \"Cannot clone do-like-javac\" && exit 1)\n+fi\n+\n+DLJC=\"${SCRIPTDIR}/.do-like-javac/dljc\"\n+\n+#### Main script\n+\n+pushd \"${DIR}\" || exit 1\n+\n+configure_and_exec_dljc \"$@\"\n+\n+if [ \"${WPI_RESULTS_AVAILABLE}\" = \"no\" ]; then\n+      # if running under Java 11 fails, try to run\n+      # under Java 8 instead\n+    export JAVA_HOME=\"${JAVA8_HOME}\"\n+    echo \"couldn't build using Java 11; trying Java 8\"\n+    configure_and_exec_dljc \"$@\"\n+    export JAVA_HOME=\"${JAVA11_HOME}\"\n+fi\n+\n+# support wpi-many.sh's ability to delete projects without usable results\n+# automatically\n+if [ \"${WPI_RESULTS_AVAILABLE}\" = \"no\" ]; then\n+    echo \"dljc could not run the build successfully\"\n+    touch .cannot-run-wpi\n+fi\n+\n+popd || exit 1", "originalCommit": "cae815c2952ac49ff277d15868493f9208647ace", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM5MTg3MA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515391870", "bodyText": "That's what the pushd and popd commands do, and I'm under the impression that they're still the preferred way to switch directories (vs cd). Personally, I don't find it distracting - especially because the user isn't meant to look at the output of wpi.sh or wpi-many.sh unless something goes wrong. The user should look at the produced log files instead.\nDo you have a specific suggestion for how to avoid the output, such as a different set of commands to use? One option, suggested by this stack overflow post is to redefine the commands to pipe their output to /dev/null, but redefining commands always makes me nervous, and reduces the readability of the scripts.", "author": "kelloggm", "createdAt": "2020-10-30T21:31:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTc2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM5NzQxNw==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515397417", "bodyText": "Personally, I don't find it distracting\n\nMaybe because that's because you know the implementation.  I had to read the script to determine that this was normal output and not part of an error message.\n\nThe user should look at the produced log files instead.\n\nThat's reasonable.  Maybe the script should produce:\n\nno output when it succeeds.\na single line saying to look at the log file when it fails.\n\n\nDo you have a specific suggestion for how to avoid the output, such as a different set of commands to use?\n\nI don't have a specific suggestion for you.  When the directories are known (as in this case), I use cd, because I don't see that pushd and popd provide any benefit.  (Am I missing some benefit?)", "author": "mernst", "createdAt": "2020-10-30T21:47:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTc2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM5OTg3NA==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515399874", "bodyText": "I don't have a specific suggestion for you. When the directories are known (as in this case), I use cd, because I don't see that pushd and popd provide any benefit. (Am I missing some benefit?)\n\nUsing pushd/popd is safer, because it stores the history of the directories that have been the current working directory. cd only stores the most recent directory (-). If the script encounters a problem we didn't anticipate that causes the directory structure to be messed up, then the pushd/popd approach is more likely to recover, in my experience. That's the only benefit I know of.\n\nThat's reasonable. Maybe the script should produce:\n\nno output when it succeeds.\na single line saying to look at the log file when it fails.\n\n\nEven when the script succeeds, the user should look at the log file. The documentation indicates this:\n\nThe result is a set of log files placed in the <dljc-out> folder of the\ntarget project. The results of type-checking with each candidate set of\nannotations will be concatenated into the file <dljc-out/wpi.log>; the final\nresults (i.e. those obtained using the most precise, consistent set of annotations)\nwill appear at the end of this file.\n\nA simpler option than changing the scripts would be to modify the documentation to note that any output from the script itself is merely informational. Would that alleviate your concern?", "author": "kelloggm", "createdAt": "2020-10-30T21:55:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTc2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTQxMTU1Mw==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515411553", "bodyText": "I didn't see any error-handling code that uses the pushd/popd stack, but maybe I missed it.\nMaybe the script should prefix and suffix its output with a remark to look elsewhere.  (Because users might not remember all details of the documentation.)  Even if so, it's friendly to users to remove output that isn't useful.", "author": "mernst", "createdAt": "2020-10-30T22:38:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NTc2OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNTM1NjQ2Ng==", "url": "https://github.com/typetools/checker-framework/pull/3824#discussion_r515356466", "bodyText": "Please add output telling the user where to look for diagnostic output.\nI think the answer is \"in the dljc-out directory\".", "author": "mernst", "createdAt": "2020-10-30T20:20:44Z", "path": "checker/bin/wpi.sh", "diffHunk": "@@ -0,0 +1,174 @@\n+#!/bin/bash\n+\n+# This script performs whole-program inference on a project directory.\n+\n+# For usage and requirements, see the \"Whole-program inference\"\n+# section of the Checker Framework manual:\n+# https://checkerframework.org/manual/#whole-program-inference\n+\n+\n+while getopts \"d:t:\" opt; do\n+  case $opt in\n+    d) DIR=\"$OPTARG\"\n+       ;;\n+    t) TIMEOUT=\"$OPTARG\"\n+       ;;\n+    \\?) # echo \"Invalid option -$OPTARG\" >&2\n+       ;;\n+  esac\n+done\n+\n+# Make $@ be the arguments that should be passed to dljc.\n+shift $(( OPTIND - 1 ))\n+\n+# check required arguments and environment variables:\n+\n+# Testing for JAVA8_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA8_HOME}\" = \"x\" ]; then\n+    echo \"JAVA8_HOME must be set to a Java 8 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA8_HOME}\" ]; then\n+    echo \"JAVA8_HOME is set to a non-existent directory ${JAVA8_HOME}\"\n+    exit 1\n+fi\n+\n+# Testing for JAVA11_HOME, not a misspelling of JAVA_HOME.\n+# shellcheck disable=SC2153\n+if [ \"x${JAVA11_HOME}\" = \"x\" ]; then\n+    echo \"JAVA11_HOME must be set to a Java 11 JDK\"\n+    exit 1\n+fi\n+\n+if [ ! -d \"${JAVA11_HOME}\" ]; then\n+    echo \"JAVA11_HOME is set to a non-existent directory ${JAVA11_HOME}\"\n+    exit 1\n+fi\n+\n+JAVA_HOME=\"${JAVA11_HOME}\"\n+\n+if [ \"x${CHECKERFRAMEWORK}\" = \"x\" ]; then\n+    echo \"CHECKERFRAMEWORK is not set; it must be set to a locally-built Checker Framework. Please clone and build github.com/typetools/checker-framework\"\n+    exit 2\n+fi\n+\n+if [ ! -d \"${CHECKERFRAMEWORK}\" ]; then\n+    echo \"CHECKERFRAMEWORK is set to a non-existent directory ${CHECKERFRAMEWORK}\"\n+    exit 2\n+fi\n+\n+if [ \"x${DIR}\" = \"x\" ]; then\n+    echo \"wpi.sh: no -d argument supplied, using the current directory.\"\n+    DIR=$(pwd)\n+fi\n+\n+if [ ! -d \"${DIR}\" ]; then\n+    echo \"wpi.sh's -d argument was not a directory: ${DIR}\"\n+    exit 4\n+fi\n+\n+function configure_and_exec_dljc {\n+\n+  if [ -f build.gradle ]; then\n+      if [ -f gradlew ]; then\n+    chmod +x gradlew\n+    GRADLE_EXEC=\"./gradlew\"\n+      else\n+    GRADLE_EXEC=\"gradle\"\n+      fi\n+      CLEAN_CMD=\"${GRADLE_EXEC} clean -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+      BUILD_CMD=\"${GRADLE_EXEC} clean compileJava -g .gradle -Dorg.gradle.java.home=${JAVA_HOME}\"\n+  elif [ -f pom.xml ]; then\n+      if [ -f mvnw ]; then\n+    chmod +x mvnw\n+    MVN_EXEC=\"./mvnw\"\n+      else\n+    MVN_EXEC=\"mvn\"\n+      fi\n+      # if running on java 8, need /jre at the end of this Maven command\n+      if [ \"${JAVA_HOME}\" = \"${JAVA8_HOME}\" ]; then\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}/jre\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}/jre\"\n+      else\n+          CLEAN_CMD=\"${MVN_EXEC} clean -Djava.home=${JAVA_HOME}\"\n+          BUILD_CMD=\"${MVN_EXEC} clean compile -Djava.home=${JAVA_HOME}\"\n+      fi\n+  elif [ -f build.xml ]; then\n+    # TODO: test these more thoroughly\n+    CLEAN_CMD=\"ant clean\"\n+    BUILD_CMD=\"ant clean compile\"\n+  else\n+      echo \"no build file found for ${REPO_NAME}; not calling DLJC\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  DLJC_CMD=\"${DLJC} -t wpi $* -- ${BUILD_CMD}\"\n+\n+  if [ ! \"x${TIMEOUT}\" = \"x\" ]; then\n+      TMP=\"${DLJC_CMD}\"\n+      DLJC_CMD=\"timeout ${TIMEOUT} ${TMP}\"\n+  fi\n+\n+  # Remove old DLJC output.\n+  rm -rf dljc-out\n+\n+  # ensure the project is clean before invoking DLJC\n+  eval \"${CLEAN_CMD}\" < /dev/null\n+\n+  echo \"${DLJC_CMD}\"\n+\n+  # This command also includes \"clean\"; I'm not sure why it is necessary.\n+  eval \"${DLJC_CMD}\" < /dev/null\n+\n+  if [[ $? -eq 124 ]]; then\n+      echo \"dljc timed out for ${DIR}\"\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+      return\n+  fi\n+\n+  if [ -f dljc-out/wpi.log ]; then\n+      WPI_RESULTS_AVAILABLE=\"yes\"\n+  else\n+      WPI_RESULTS_AVAILABLE=\"no\"\n+  fi\n+}\n+\n+#### Check and setup dependencies\n+\n+SCRIPTDIR=\"$( cd \"$( dirname \"${BASH_SOURCE[0]}\" )\" >/dev/null 2>&1 && pwd )\"\n+\n+# clone or update DLJC\n+if [ -d \"${SCRIPTDIR}/.do-like-javac\" ]; then\n+    git -C \"${SCRIPTDIR}/.do-like-javac\" pull\n+else\n+    git -C \"${SCRIPTDIR}\" clone https://github.com/kelloggm/do-like-javac --depth 1 .do-like-javac || (echo \"Cannot clone do-like-javac\" && exit 1)\n+fi\n+\n+DLJC=\"${SCRIPTDIR}/.do-like-javac/dljc\"\n+\n+#### Main script\n+\n+pushd \"${DIR}\" || exit 1\n+\n+configure_and_exec_dljc \"$@\"\n+\n+if [ \"${WPI_RESULTS_AVAILABLE}\" = \"no\" ]; then\n+      # if running under Java 11 fails, try to run\n+      # under Java 8 instead\n+    export JAVA_HOME=\"${JAVA8_HOME}\"\n+    echo \"couldn't build using Java 11; trying Java 8\"\n+    configure_and_exec_dljc \"$@\"\n+    export JAVA_HOME=\"${JAVA11_HOME}\"\n+fi\n+\n+# support wpi-many.sh's ability to delete projects without usable results\n+# automatically\n+if [ \"${WPI_RESULTS_AVAILABLE}\" = \"no\" ]; then\n+    echo \"dljc could not run the build successfully\"", "originalCommit": "cae815c2952ac49ff277d15868493f9208647ace", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8dfd0d3af4bec6230630d3548c778ff4125ae99c", "url": "https://github.com/typetools/checker-framework/commit/8dfd0d3af4bec6230630d3548c778ff4125ae99c", "message": "address PR feedback", "committedDate": "2020-10-30T21:33:13Z", "type": "commit"}, {"oid": "a3fd1b19230b8680779cdc21af898b98787314b7", "url": "https://github.com/typetools/checker-framework/commit/a3fd1b19230b8680779cdc21af898b98787314b7", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-10-30T21:33:26Z", "type": "commit"}, {"oid": "48ac6e218a9bf2f74d15bbc1918b6061459113a5", "url": "https://github.com/typetools/checker-framework/commit/48ac6e218a9bf2f74d15bbc1918b6061459113a5", "message": "Remove unneeded receiver formal parameters", "committedDate": "2020-10-30T21:39:19Z", "type": "commit"}, {"oid": "32c4ccfd831b1ab3984e0a7f5b66c0a7a189c272", "url": "https://github.com/typetools/checker-framework/commit/32c4ccfd831b1ab3984e0a7f5b66c0a7a189c272", "message": "try to avoid crash mike encountered related to gradle home dir", "committedDate": "2020-11-02T23:22:43Z", "type": "commit"}, {"oid": "0b60d62d5a7b796ab51ce4f2bfb352b650e4c78d", "url": "https://github.com/typetools/checker-framework/commit/0b60d62d5a7b796ab51ce4f2bfb352b650e4c78d", "message": "I'm an idiot", "committedDate": "2020-11-02T23:23:35Z", "type": "commit"}, {"oid": "5606e4b726083a925ce8b79e686ae99be06b176a", "url": "https://github.com/typetools/checker-framework/commit/5606e4b726083a925ce8b79e686ae99be06b176a", "message": "remove blank line", "committedDate": "2020-11-02T23:55:07Z", "type": "commit"}, {"oid": "894fb2778721a473be7defd9ba08f6f862e6464b", "url": "https://github.com/typetools/checker-framework/commit/894fb2778721a473be7defd9ba08f6f862e6464b", "message": "add hook for extra arguments to the build script", "committedDate": "2020-11-03T18:31:36Z", "type": "commit"}, {"oid": "6f59c01554a1bf4624e97d5679a203213c89d6a3", "url": "https://github.com/typetools/checker-framework/commit/6f59c01554a1bf4624e97d5679a203213c89d6a3", "message": "Parse the -b command-line argument", "committedDate": "2020-11-03T19:27:36Z", "type": "commit"}, {"oid": "4ced992a799fac2b8128cab2255034222ff2434c", "url": "https://github.com/typetools/checker-framework/commit/4ced992a799fac2b8128cab2255034222ff2434c", "message": "fix latex error", "committedDate": "2020-11-03T19:34:24Z", "type": "commit"}, {"oid": "930936189754095bc93e90ce84db440614dfa3de", "url": "https://github.com/typetools/checker-framework/commit/930936189754095bc93e90ce84db440614dfa3de", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-11-03T19:35:38Z", "type": "commit"}, {"oid": "41bf65ef6fdd578e5be3d28324909e2cc659b119", "url": "https://github.com/typetools/checker-framework/commit/41bf65ef6fdd578e5be3d28324909e2cc659b119", "message": "Fix regex", "committedDate": "2020-11-03T22:03:54Z", "type": "commit"}, {"oid": "f16827c1b93563349c45bc54404ac9f013568dde", "url": "https://github.com/typetools/checker-framework/commit/f16827c1b93563349c45bc54404ac9f013568dde", "message": "Move remove-annotations.sh script from bin/ to bin-devel/", "committedDate": "2020-11-03T22:05:17Z", "type": "commit"}, {"oid": "d0b9e5e5e003237ef232e19550a7ad0f200da570", "url": "https://github.com/typetools/checker-framework/commit/d0b9e5e5e003237ef232e19550a7ad0f200da570", "message": "remove .cannot-run-wpi file before starting", "committedDate": "2020-11-03T22:12:50Z", "type": "commit"}, {"oid": "cb9ece3c07c3324915db27b33114bf4b6df29432", "url": "https://github.com/typetools/checker-framework/commit/cb9ece3c07c3324915db27b33114bf4b6df29432", "message": "Where to find the stub files", "committedDate": "2020-11-03T22:13:33Z", "type": "commit"}, {"oid": "a3a57ead92318a4194813fd1daa308e90244ce33", "url": "https://github.com/typetools/checker-framework/commit/a3a57ead92318a4194813fd1daa308e90244ce33", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-11-03T22:13:54Z", "type": "commit"}, {"oid": "e30ba6dafd5b6bbb84c8fbe9be2a21b035d46aec", "url": "https://github.com/typetools/checker-framework/commit/e30ba6dafd5b6bbb84c8fbe9be2a21b035d46aec", "message": "give option for users to specify alternate gradle cache directory", "committedDate": "2020-11-03T23:49:18Z", "type": "commit"}, {"oid": "593044ff006bad8555316ee21ad91e74c2e5b1c9", "url": "https://github.com/typetools/checker-framework/commit/593044ff006bad8555316ee21ad91e74c2e5b1c9", "message": "wpi-many.sh also needs the -g option", "committedDate": "2020-11-03T23:51:30Z", "type": "commit"}, {"oid": "7f365296bf7f5da7ef040a836a85a81ceaeeb79e", "url": "https://github.com/typetools/checker-framework/commit/7f365296bf7f5da7ef040a836a85a81ceaeeb79e", "message": "Fix Nullness GLB", "committedDate": "2020-11-04T03:41:26Z", "type": "commit"}, {"oid": "94960ebce50bde8271722d4953c310cd02305ef8", "url": "https://github.com/typetools/checker-framework/commit/94960ebce50bde8271722d4953c310cd02305ef8", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-04T03:41:52Z", "type": "commit"}, {"oid": "e159c2879f210047a98aca2fe2677e4d4f02ef6c", "url": "https://github.com/typetools/checker-framework/commit/e159c2879f210047a98aca2fe2677e4d4f02ef6c", "message": "Fix cut-and-paste typo", "committedDate": "2020-11-04T04:05:08Z", "type": "commit"}, {"oid": "3aa591e8b12a84cbf779feda01cd9294f48ca983", "url": "https://github.com/typetools/checker-framework/commit/3aa591e8b12a84cbf779feda01cd9294f48ca983", "message": "Fix section cross-reference", "committedDate": "2020-11-04T04:40:34Z", "type": "commit"}, {"oid": "f442c788145414a1cc808bcb37990d7f45af2559", "url": "https://github.com/typetools/checker-framework/commit/f442c788145414a1cc808bcb37990d7f45af2559", "message": "Clarify a comment", "committedDate": "2020-11-04T16:01:32Z", "type": "commit"}, {"oid": "786fe6659aa7beb4031d30d4536473d970005e8b", "url": "https://github.com/typetools/checker-framework/commit/786fe6659aa7beb4031d30d4536473d970005e8b", "message": "Add Stub Parser debugging output", "committedDate": "2020-11-04T16:01:43Z", "type": "commit"}, {"oid": "6f2edb9af810c0f2ec77e090b564f1b86b643ce7", "url": "https://github.com/typetools/checker-framework/commit/6f2edb9af810c0f2ec77e090b564f1b86b643ce7", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-04T21:57:31Z", "type": "commit"}, {"oid": "a14731de6364d806dc646e33adfead6ffc2b90aa", "url": "https://github.com/typetools/checker-framework/commit/a14731de6364d806dc646e33adfead6ffc2b90aa", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-11-05T00:54:38Z", "type": "commit"}, {"oid": "be165067b29788cbd277b2e6f8a5b393d917246e", "url": "https://github.com/typetools/checker-framework/commit/be165067b29788cbd277b2e6f8a5b393d917246e", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-05T02:51:18Z", "type": "commit"}, {"oid": "99f2f89c8a10bbad7033afd6ff1df60258e04493", "url": "https://github.com/typetools/checker-framework/commit/99f2f89c8a10bbad7033afd6ff1df60258e04493", "message": "Move changelog text to correct release", "committedDate": "2020-11-05T15:29:19Z", "type": "commit"}, {"oid": "6c6a6634f0427aeb6dceb7703b5a9524b66cf513", "url": "https://github.com/typetools/checker-framework/commit/6c6a6634f0427aeb6dceb7703b5a9524b66cf513", "message": "add a note at the beginning and end of each script with information about where to find the output", "committedDate": "2020-11-05T18:55:38Z", "type": "commit"}, {"oid": "aa83bbacbdd1b42f673b428dcac32e5e915f56f6", "url": "https://github.com/typetools/checker-framework/commit/aa83bbacbdd1b42f673b428dcac32e5e915f56f6", "message": "Merge branch 'wpi-many' of github.com:kelloggm/checker-framework into wpi-many", "committedDate": "2020-11-05T18:55:47Z", "type": "commit"}, {"oid": "466b0c48a10c3ab0476a9e4023e217ccaf1248dd", "url": "https://github.com/typetools/checker-framework/commit/466b0c48a10c3ab0476a9e4023e217ccaf1248dd", "message": "Remove unneeded text", "committedDate": "2020-11-05T19:08:24Z", "type": "commit"}, {"oid": "b7969df80ceb29aa967c4858869352444c3af524", "url": "https://github.com/typetools/checker-framework/commit/b7969df80ceb29aa967c4858869352444c3af524", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-05T19:16:03Z", "type": "commit"}, {"oid": "5d0cb847f313f6e204807698d2db7491096a27ed", "url": "https://github.com/typetools/checker-framework/commit/5d0cb847f313f6e204807698d2db7491096a27ed", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-06T17:51:17Z", "type": "commit"}, {"oid": "3272ea773d8187a59fe3ecde7e2e2159bedc74b9", "url": "https://github.com/typetools/checker-framework/commit/3272ea773d8187a59fe3ecde7e2e2159bedc74b9", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-06T17:52:50Z", "type": "commit"}, {"oid": "797e15de1f757276929aae3c899e20795bfb20c2", "url": "https://github.com/typetools/checker-framework/commit/797e15de1f757276929aae3c899e20795bfb20c2", "message": "Tweak remove-annotations.sh script", "committedDate": "2020-11-06T17:58:14Z", "type": "commit"}, {"oid": "8d736879d6bf4fe993a9082519759a2f3d69e90f", "url": "https://github.com/typetools/checker-framework/commit/8d736879d6bf4fe993a9082519759a2f3d69e90f", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-09T19:16:26Z", "type": "commit"}, {"oid": "d15ae24105938a62faa01549672b85536cf77c2b", "url": "https://github.com/typetools/checker-framework/commit/d15ae24105938a62faa01549672b85536cf77c2b", "message": "Punctuation", "committedDate": "2020-11-09T19:19:04Z", "type": "commit"}, {"oid": "8c3b1e4c9669f85c42268478a0a5789415adb374", "url": "https://github.com/typetools/checker-framework/commit/8c3b1e4c9669f85c42268478a0a5789415adb374", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-13T16:33:28Z", "type": "commit"}, {"oid": "c664a896e6fd73bb3ec9d93b6b8c33ed1a460e06", "url": "https://github.com/typetools/checker-framework/commit/c664a896e6fd73bb3ec9d93b6b8c33ed1a460e06", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-13T22:51:36Z", "type": "commit"}, {"oid": "0aefa13fb250823c0383408237e9e8e1d7f77f38", "url": "https://github.com/typetools/checker-framework/commit/0aefa13fb250823c0383408237e9e8e1d7f77f38", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-16T17:29:01Z", "type": "commit"}, {"oid": "ac524025e51f175616d7a6b14ce23d3904ef27ed", "url": "https://github.com/typetools/checker-framework/commit/ac524025e51f175616d7a6b14ce23d3904ef27ed", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-16T18:02:41Z", "type": "commit"}, {"oid": "d6f9ddbec331f688bc7756399854d01a5cab5b3c", "url": "https://github.com/typetools/checker-framework/commit/d6f9ddbec331f688bc7756399854d01a5cab5b3c", "message": "Tweak documentation", "committedDate": "2020-11-16T18:34:24Z", "type": "commit"}, {"oid": "5fd3212beede96bffaba196fe262ef919dc0dd9e", "url": "https://github.com/typetools/checker-framework/commit/5fd3212beede96bffaba196fe262ef919dc0dd9e", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-16T22:37:38Z", "type": "commit"}, {"oid": "defec0778fc52f94711601cb24d43ba77968fcbe", "url": "https://github.com/typetools/checker-framework/commit/defec0778fc52f94711601cb24d43ba77968fcbe", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-17T06:06:23Z", "type": "commit"}, {"oid": "369567c7ab99b7f4a15a3f99b81f66106b2d09d4", "url": "https://github.com/typetools/checker-framework/commit/369567c7ab99b7f4a15a3f99b81f66106b2d09d4", "message": "Use fully-qualified pathname to preplace script", "committedDate": "2020-11-18T14:43:30Z", "type": "commit"}, {"oid": "073406350b6f492751a91924c12a6c5ed878919c", "url": "https://github.com/typetools/checker-framework/commit/073406350b6f492751a91924c12a6c5ed878919c", "message": "make the informational output messages more sensicle", "committedDate": "2020-11-18T23:03:42Z", "type": "commit"}, {"oid": "0044d4173d457bd09d96af5ed599f3f38d920be3", "url": "https://github.com/typetools/checker-framework/commit/0044d4173d457bd09d96af5ed599f3f38d920be3", "message": "preserve the value of JAVA_HOME", "committedDate": "2020-11-18T23:18:35Z", "type": "commit"}, {"oid": "9adcd9f3a00abb1e93a1d6d838ae983ce9aa248f", "url": "https://github.com/typetools/checker-framework/commit/9adcd9f3a00abb1e93a1d6d838ae983ce9aa248f", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-19T01:07:53Z", "type": "commit"}, {"oid": "2f40cc17b40c345a15eee1437b95f33b9d08ae52", "url": "https://github.com/typetools/checker-framework/commit/2f40cc17b40c345a15eee1437b95f33b9d08ae52", "message": "Put stdout of dljc in a file rather than misleadingly outputting it", "committedDate": "2020-11-19T13:57:50Z", "type": "commit"}, {"oid": "541b1fb09f6c876d01643e11740f642994160d43", "url": "https://github.com/typetools/checker-framework/commit/541b1fb09f6c876d01643e11740f642994160d43", "message": "Don't use pushd and popd in scripts", "committedDate": "2020-11-19T14:06:34Z", "type": "commit"}, {"oid": "f731b339065b2250cb383525e4100924aa9fcd13", "url": "https://github.com/typetools/checker-framework/commit/f731b339065b2250cb383525e4100924aa9fcd13", "message": "Remove more confusing output", "committedDate": "2020-11-19T14:07:58Z", "type": "commit"}, {"oid": "941a119208c1ae3e5bb640f4d25707b77ddb9b43", "url": "https://github.com/typetools/checker-framework/commit/941a119208c1ae3e5bb640f4d25707b77ddb9b43", "message": "Put stdout with other files", "committedDate": "2020-11-19T15:19:10Z", "type": "commit"}, {"oid": "459f7ff4fbffa3b72b28b1cfdb0c841e18f8cc1b", "url": "https://github.com/typetools/checker-framework/commit/459f7ff4fbffa3b72b28b1cfdb0c841e18f8cc1b", "message": "Fix directory name", "committedDate": "2020-11-19T15:22:39Z", "type": "commit"}, {"oid": "cad918656cd7e84d886d48189214aaf5637395ee", "url": "https://github.com/typetools/checker-framework/commit/cad918656cd7e84d886d48189214aaf5637395ee", "message": "Create directory", "committedDate": "2020-11-19T15:26:26Z", "type": "commit"}, {"oid": "07161569b8263af181f3ce323bc99d2345cbc113", "url": "https://github.com/typetools/checker-framework/commit/07161569b8263af181f3ce323bc99d2345cbc113", "message": "Rename file", "committedDate": "2020-11-19T15:32:21Z", "type": "commit"}, {"oid": "64a22d39111092d84a1beba3536c880204fac86a", "url": "https://github.com/typetools/checker-framework/commit/64a22d39111092d84a1beba3536c880204fac86a", "message": "Further reduce output", "committedDate": "2020-11-19T15:43:41Z", "type": "commit"}, {"oid": "5542d16ce47711c7b024fd23a753ca1996d3ec75", "url": "https://github.com/typetools/checker-framework/commit/5542d16ce47711c7b024fd23a753ca1996d3ec75", "message": "okay, really preserve the value of JAVA_HOME", "committedDate": "2020-11-19T20:15:41Z", "type": "commit"}, {"oid": "64e4fa30c9238af3e3082be0b0519acad324fb51", "url": "https://github.com/typetools/checker-framework/commit/64e4fa30c9238af3e3082be0b0519acad324fb51", "message": "modify and restore path before invoking dljc", "committedDate": "2020-11-19T20:37:35Z", "type": "commit"}, {"oid": "d39dda50afa69b0f4c48172c2f95dccfdf151647", "url": "https://github.com/typetools/checker-framework/commit/d39dda50afa69b0f4c48172c2f95dccfdf151647", "message": "attempt to fix merge conflicts", "committedDate": "2020-11-19T20:41:49Z", "type": "commit"}, {"oid": "39df54795fa74dfcd99acdcb6776c236fd8130c9", "url": "https://github.com/typetools/checker-framework/commit/39df54795fa74dfcd99acdcb6776c236fd8130c9", "message": "fix problems introd by merge", "committedDate": "2020-11-19T21:30:52Z", "type": "commit"}, {"oid": "f38dc4000fa9dba9a718d965d9a45a6003715549", "url": "https://github.com/typetools/checker-framework/commit/f38dc4000fa9dba9a718d965d9a45a6003715549", "message": "Merge ../checker-framework-branch-master into wpi-many", "committedDate": "2020-11-23T18:57:45Z", "type": "commit"}, {"oid": "3419a4766c0b930522a97865996a3a1f365e059a", "url": "https://github.com/typetools/checker-framework/commit/3419a4766c0b930522a97865996a3a1f365e059a", "message": "Merge branch 'master' of github.com:typetools/checker-framework into wpi-many", "committedDate": "2020-11-25T20:19:02Z", "type": "commit"}, {"oid": "22ec7acbf96b8a4d7ef7d5d0299b9d6566195ce9", "url": "https://github.com/typetools/checker-framework/commit/22ec7acbf96b8a4d7ef7d5d0299b9d6566195ce9", "message": "Fix mktemp call", "committedDate": "2020-11-27T04:45:12Z", "type": "commit"}]}