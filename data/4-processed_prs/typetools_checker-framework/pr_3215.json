{"pr_number": 3215, "pr_title": "Update Maven example to use local repo. (Fixes #3050)", "pr_createdAt": "2020-03-31T18:05:48Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3215", "timeline": [{"oid": "7b48482b5e04d94e7758d4811a4a5590fc105381", "url": "https://github.com/typetools/checker-framework/commit/7b48482b5e04d94e7758d4811a4a5590fc105381", "message": "Cleaner way to use a locally built version of the Checker Framework with Maven", "committedDate": "2020-01-15T20:17:21Z", "type": "commit"}, {"oid": "50b05bf2cb825b6c4bc757c370d08d3a58267bb3", "url": "https://github.com/typetools/checker-framework/commit/50b05bf2cb825b6c4bc757c370d08d3a58267bb3", "message": "Merge ../checker-framework-branch-master into maven-local-repo", "committedDate": "2020-01-29T19:45:33Z", "type": "commit"}, {"oid": "65aebf72d8b5ef0e4746588e727e17c1a1cd2275", "url": "https://github.com/typetools/checker-framework/commit/65aebf72d8b5ef0e4746588e727e17c1a1cd2275", "message": "Merge remote-tracking branch 'mernst/maven-local-repo' into maven", "committedDate": "2020-03-31T17:59:06Z", "type": "commit"}, {"oid": "b8c8eb5c4113c0e45df43c83c5dbfe91b7a8ea82", "url": "https://github.com/typetools/checker-framework/commit/b8c8eb5c4113c0e45df43c83c5dbfe91b7a8ea82", "message": "Update text.", "committedDate": "2020-03-31T18:04:26Z", "type": "commit"}, {"oid": "1ce674e637b11c45e44947e58c20d4ec27b69196", "url": "https://github.com/typetools/checker-framework/commit/1ce674e637b11c45e44947e58c20d4ec27b69196", "message": "Brevity", "committedDate": "2020-03-31T19:36:36Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2NzA0OQ==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401167049", "bodyText": "This seems like the wrong place for these instructions.  This text appears in point 1 in a numbered list, but point 3 in the list is the first one that mentions the checker artifact.  I think it should appear in point 3, or more likely in a new subsection that appears at the end of the Maven section.", "author": "mernst", "createdAt": "2020-03-31T19:39:48Z", "path": "docs/manual/external-tools.tex", "diffHunk": "@@ -906,44 +906,32 @@\n \\end{Verbatim}\n \n \\item\n-  To use a local version of the Checker Framework that\n-  you have built from source (Section~\\ref{build-source}):\n+  To use a locally-modifed version of the Checker Framework, first run:\n \n \\begin{alltt}\n-  <dependencies>\n-    ... existing <dependency> items ...\n+./gradlew deployArtifactsToLocalRepo\n+\\end{alltt}\n \n-    <!-- Annotations from the Checker Framework: nullness, interning, locking, ... -->\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>checker-qual</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/checker-qual.jar</systemPath>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>checker</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/checker.jar</systemPath>\n-    </dependency>\n-    <!-- The annotated JDK to use. -->\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>jdk8</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/jdk8.jar</systemPath>\n-    </dependency>\n-    <dependency>\n-    <groupId>com.google.errorprone</groupId>\n-      <artifactId>javac</artifactId>\n-      <version>9+181-r4173-1</version>\n-    </dependency>\n-  </dependencies>\n+\\noindent\n+Then, in the project you want to type-check, use\n+\\<\\ReleaseVersion{}-SNAPSHOT> as the version number:\n+\n+\\begin{alltt}\n+   <artifactId>maven-compiler-plugin</artifactId>", "originalCommit": "1ce674e637b11c45e44947e58c20d4ec27b69196", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2ODI2MQ==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401168261", "bodyText": "It may be least error-prone just to say \"use \\ReleaseVersion{}-SNAPSHOT everywhere that the above instructions say \\ReleaseVersion\".  That is less ambiguous, less error-prone, and requires less thought from the reader.", "author": "mernst", "createdAt": "2020-03-31T19:42:00Z", "path": "docs/manual/external-tools.tex", "diffHunk": "@@ -906,44 +906,32 @@\n \\end{Verbatim}\n \n \\item\n-  To use a local version of the Checker Framework that\n-  you have built from source (Section~\\ref{build-source}):\n+  To use a locally-modifed version of the Checker Framework, first run:\n \n \\begin{alltt}\n-  <dependencies>\n-    ... existing <dependency> items ...\n+./gradlew deployArtifactsToLocalRepo\n+\\end{alltt}\n \n-    <!-- Annotations from the Checker Framework: nullness, interning, locking, ... -->\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>checker-qual</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/checker-qual.jar</systemPath>\n-    </dependency>\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>checker</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/checker.jar</systemPath>\n-    </dependency>\n-    <!-- The annotated JDK to use. -->\n-    <dependency>\n-      <groupId>org.checkerframework</groupId>\n-      <artifactId>jdk8</artifactId>\n-      <version>\\ReleaseVersion{}</version>\n-      <scope>system</scope>\n-      <systemPath>\\$\\{env.CHECKERFRAMEWORK\\}/checker/dist/jdk8.jar</systemPath>\n-    </dependency>\n-    <dependency>\n-    <groupId>com.google.errorprone</groupId>\n-      <artifactId>javac</artifactId>\n-      <version>9+181-r4173-1</version>\n-    </dependency>\n-  </dependencies>\n+\\noindent\n+Then, in the project you want to type-check, use\n+\\<\\ReleaseVersion{}-SNAPSHOT> as the version number:\n+\n+\\begin{alltt}\n+   <artifactId>maven-compiler-plugin</artifactId>\n+      ...\n+      <configuration>\n+        ...\n+        <annotationProcessorPaths>\n+          <path>\n+            <groupId>org.checkerframework</groupId>\n+            <artifactId>checker</artifactId>\n+            <version>\\ReleaseVersion{}-SNAPSHOT</version>\n+          </path>\n \\end{alltt}\n \n+You can make similar changes if you have changed other artifacts besides", "originalCommit": "1ce674e637b11c45e44947e58c20d4ec27b69196", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY3NzEwNw==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401677107", "bodyText": "\\ReleaseVersion{}-SNAPSHOT is the snapshot before the release, so it's not the correct version to use.  ./gradlew version outputs the version of the artifacts that ./gradlew deployArtifactsToLocalRepo uses.", "author": "smillst", "createdAt": "2020-04-01T14:52:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2ODI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY4NTY1MA==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401685650", "bodyText": "Good point about the version number.  Can the text restructuring be done, with a correct version number?", "author": "mernst", "createdAt": "2020-04-01T15:03:07Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2ODI2MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTY5MDAzMw==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401690033", "bodyText": "(That is, is the text restructuring a good idea?)", "author": "mernst", "createdAt": "2020-04-01T15:08:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTE2ODI2MQ=="}], "type": "inlineReview"}, {"oid": "3b940f7257c09b53d75d44bbb602a43e9b15294e", "url": "https://github.com/typetools/checker-framework/commit/3b940f7257c09b53d75d44bbb602a43e9b15294e", "message": "Merge branch 'master' into maven", "committedDate": "2020-04-01T15:10:37Z", "type": "commit"}, {"oid": "23e8e3cf02a29313054242959ac757a019c9cd7f", "url": "https://github.com/typetools/checker-framework/commit/23e8e3cf02a29313054242959ac757a019c9cd7f", "message": "Tweak.", "committedDate": "2020-04-01T15:15:53Z", "type": "commit"}, {"oid": "da8b415bff3e33d8d1c237779fe99b8c49c974ea", "url": "https://github.com/typetools/checker-framework/commit/da8b415bff3e33d8d1c237779fe99b8c49c974ea", "message": "Fix enumerate.", "committedDate": "2020-04-01T15:18:42Z", "type": "commit"}, {"oid": "c0eef0603694b432ab394f7a908aef20ebe4b836", "url": "https://github.com/typetools/checker-framework/commit/c0eef0603694b432ab394f7a908aef20ebe4b836", "message": "Tweak manual", "committedDate": "2020-04-01T15:48:47Z", "type": "commit"}, {"oid": "0a3d1d098796d0b31b5b3ef8ac6cb78d207ec713", "url": "https://github.com/typetools/checker-framework/commit/0a3d1d098796d0b31b5b3ef8ac6cb78d207ec713", "message": "Merge ../checker-framework-branch-master into maven", "committedDate": "2020-04-01T15:50:06Z", "type": "commit"}, {"oid": "7783103bd3340ee4c505267228a8ed23d0a9052f", "url": "https://github.com/typetools/checker-framework/commit/7783103bd3340ee4c505267228a8ed23d0a9052f", "message": "Fix structure: item 4 did not belong with items 1-3", "committedDate": "2020-04-01T15:55:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcxODc0MQ==", "url": "https://github.com/typetools/checker-framework/pull/3215#discussion_r401718741", "bodyText": "Why does this line appear twice?", "author": "mernst", "createdAt": "2020-04-01T15:47:19Z", "path": "docs/manual/external-tools.tex", "diffHunk": "@@ -968,6 +928,7 @@\n   <plugin>\n     <!-- This plugin will set properties values using dependency information -->\n     <groupId>org.apache.maven.plugins</groupId>\n+    <groupId>org.apache.maven.plugins</groupId>", "originalCommit": "da8b415bff3e33d8d1c237779fe99b8c49c974ea", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c77b51478f536d31c283423a63837e0b8e180f3e", "url": "https://github.com/typetools/checker-framework/commit/c77b51478f536d31c283423a63837e0b8e180f3e", "message": "Fix.", "committedDate": "2020-04-01T16:11:47Z", "type": "commit"}, {"oid": "f1119384d4fa55a171aa545f0389ea1285241805", "url": "https://github.com/typetools/checker-framework/commit/f1119384d4fa55a171aa545f0389ea1285241805", "message": "Merge branch 'maven' of github.com:smillst/checker-framework into maven", "committedDate": "2020-04-01T16:11:56Z", "type": "commit"}]}