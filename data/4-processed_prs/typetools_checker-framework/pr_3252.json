{"pr_number": 3252, "pr_title": "Fixes #3217: Lambdas: use erased type.", "pr_createdAt": "2020-04-12T23:13:20Z", "pr_url": "https://github.com/typetools/checker-framework/pull/3252", "timeline": [{"oid": "75d8165eee10bf82f19e12142ab4bacb79ddea53", "url": "https://github.com/typetools/checker-framework/commit/75d8165eee10bf82f19e12142ab4bacb79ddea53", "message": "Use erased type.", "committedDate": "2020-04-12T23:12:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDk2NDEyNA==", "url": "https://github.com/typetools/checker-framework/pull/3252#discussion_r410964124", "bodyText": "Could you update the comment to explain why the erased type is enough?\nCould you add a test case that uses generic types and make sure that this doesn't introduce false negatives? E.g. have a method that accepts a List<String> and pass something that is a List<@Nullable String>. If this only compares the List part, it will ignore the mismatch in the type arguments.\nIf this isn't a concern, please document why.", "author": "wmdietl", "createdAt": "2020-04-19T18:35:51Z", "path": "framework/src/main/java/org/checkerframework/framework/type/TypeFromMemberVisitor.java", "diffHunk": "@@ -100,7 +101,8 @@ private static AnnotatedTypeMirror inferLambdaParamAnnotations(\n             AnnotatedExecutableType functionType = f.getFunctionTypeFromTree(lambdaDecl);\n             AnnotatedTypeMirror funcTypeParam = functionType.getParameterTypes().get(index);\n             if (TreeUtils.isImplicitlyTypedLambda(declaredInTree)) {\n-                if (f.types.isSubtype(funcTypeParam.actualType, lambdaParam.actualType)) {\n+                if (TypesUtils.isErasedSubtype(\n+                        funcTypeParam.actualType, lambdaParam.actualType, f.types)) {\n                     // The Java types should be exactly the same, but because invocation type", "originalCommit": "75d8165eee10bf82f19e12142ab4bacb79ddea53", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f2074ffc97cffe072314573ba6ca29b94f6e45b5", "url": "https://github.com/typetools/checker-framework/commit/f2074ffc97cffe072314573ba6ca29b94f6e45b5", "message": "Merge branch 'master' into issue3217", "committedDate": "2020-04-29T20:01:19Z", "type": "commit"}, {"oid": "e69ae8dccf2c78f6fc1453f868f82372846d544b", "url": "https://github.com/typetools/checker-framework/commit/e69ae8dccf2c78f6fc1453f868f82372846d544b", "message": "Update comment.", "committedDate": "2020-04-29T20:04:54Z", "type": "commit"}]}