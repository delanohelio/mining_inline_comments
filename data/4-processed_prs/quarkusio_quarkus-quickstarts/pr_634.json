{"pr_number": 634, "pr_title": "Replace kscript with jbang for cron job", "pr_createdAt": "2020-08-03T08:46:03Z", "pr_url": "https://github.com/quarkusio/quarkus-quickstarts/pull/634", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3NjI5NQ==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/634#discussion_r464276295", "bodyText": "This was copied from the script we have in Quarkus proper", "author": "geoand", "createdAt": "2020-08-03T08:46:26Z", "path": ".github/NativeBuildReport.java", "diffHunk": "@@ -0,0 +1,95 @@\n+//usr/bin/env jbang \"$0\" \"$@\" ; exit $?", "originalCommit": "5a81a225c4ac89177b625321d942b9ad52701fee", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ4NjM0OA==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/634#discussion_r464486348", "bodyText": "We should move this class to https://github.com/quarkusio/jbang-catalog at some point", "author": "gastaldi", "createdAt": "2020-08-03T15:25:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3NjI5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjU4MzM2NA==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/634#discussion_r466583364", "bodyText": "A central shortcut catalog is not suitable for hosting scripts to do releases. You want the release scripts tag/versioned together with your artifacts.\nYou can add a catalog file to this Repo if you want to simplify its usage but I would highly recommend to not move these scripts to central catalog.", "author": "maxandersen", "createdAt": "2020-08-06T17:47:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDI3NjI5NQ=="}], "type": "inlineReview"}, {"oid": "f3142b201e00cdd72ee5d1fd4aff32f53d4a6324", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/f3142b201e00cdd72ee5d1fd4aff32f53d4a6324", "message": "Replace kscript with jbang for cron job\n\nThis is needed because kscript doesn't work well with Java 11", "committedDate": "2020-08-03T09:04:29Z", "type": "commit"}, {"oid": "f3142b201e00cdd72ee5d1fd4aff32f53d4a6324", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/f3142b201e00cdd72ee5d1fd4aff32f53d4a6324", "message": "Replace kscript with jbang for cron job\n\nThis is needed because kscript doesn't work well with Java 11", "committedDate": "2020-08-03T09:04:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDQ4NzQ3MA==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/634#discussion_r464487470", "bodyText": "There is a jbangdev/jbang-action@v0.36.1 Github action which could be used here instead\neg.\n      - name: Index Catalog\n        uses: jbangdev/jbang-action@v0.36.1\n        with:\n          script: indexcatalog@quarkusio\n          args: . ./app/registry.json\n          trust: https://github.com/quarkusio/jbang-catalog", "author": "gastaldi", "createdAt": "2020-08-03T15:27:16Z", "path": ".github/workflows/native-build-development.yml", "diffHunk": "@@ -86,13 +86,12 @@ jobs:\n           GITHUB_TOKEN: ${{ secrets.GITHUB_API_TOKEN }}\n           STATUS: ${{ job.status }}\n         run: |\n+          echo \"The report step got status: ${STATUS}\"\n           sudo apt-get update -o Dir::Etc::sourcelist=\"sources.list\" \\\n             -o Dir::Etc::sourceparts=\"-\" -o APT::Get::List-Cleanup=\"0\"\n           sudo apt-get install -y gnupg2 gnupg-agent\n           echo Installing SDKMAN\n           curl -s \"https://get.sdkman.io\" | bash\n           source ~/.sdkman/bin/sdkman-init.sh && \\\n-          sdk install kotlin 1.3.61 && \\\n-          sdk install kscript 2.9.0\n-          echo \"The report step got status: ${STATUS}\"\n-          kscript .github/NativeBuildReport.kts ${GITHUB_TOKEN} ${STATUS}\n+          sdk install jbang 0.36.1", "originalCommit": "f3142b201e00cdd72ee5d1fd4aff32f53d4a6324", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}