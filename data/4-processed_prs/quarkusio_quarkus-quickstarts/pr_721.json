{"pr_number": 721, "pr_title": "reactive-messaging-http quickstart", "pr_createdAt": "2020-11-30T21:52:12Z", "pr_url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721", "timeline": [{"oid": "05c888c1f0887a7fb286f0f75c1c16e1a26b3d02", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/05c888c1f0887a7fb286f0f75c1c16e1a26b3d02", "message": "reactive-messaging-http quickstart", "committedDate": "2021-01-20T21:16:53Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYzMDkxMw==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721#discussion_r561630913", "bodyText": "Concurrency issue - sum can be accessed concurrently.", "author": "cescoffier", "createdAt": "2021-01-21T06:29:49Z", "path": "reactive-messaging-http-quickstart/src/main/java/org/acme/reactivehttp/CostCollector.java", "diffHunk": "@@ -0,0 +1,24 @@\n+package org.acme.reactivehttp;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import javax.ws.rs.GET;\n+import javax.ws.rs.POST;\n+import javax.ws.rs.Path;\n+\n+@Path(\"/cost-collector\")\n+@ApplicationScoped\n+public class CostCollector {\n+\n+    private double sum = 0;\n+\n+    @POST\n+    public void consumeCost(String valueAsString) {\n+        sum += Double.parseDouble(valueAsString);", "originalCommit": "05c888c1f0887a7fb286f0f75c1c16e1a26b3d02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgwNTI0Mg==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721#discussion_r561805242", "bodyText": "good point, I'll synchronize the stuff, this class does not illustrate the core of the quickstart and synchronization is more readable than while loop for updating an atomic reference", "author": "michalszynkiewicz", "createdAt": "2021-01-21T11:33:38Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYzMDkxMw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYzMTI1Ng==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721#discussion_r561631256", "bodyText": "It might be just me, but I'm not a big fan of the 1. notation. I found 1.0 clearly, but again, that might be me, so feel free to ignore it.", "author": "cescoffier", "createdAt": "2021-01-21T06:30:42Z", "path": "reactive-messaging-http-quickstart/src/main/java/org/acme/reactivehttp/CostConverter.java", "diffHunk": "@@ -0,0 +1,34 @@\n+package org.acme.reactivehttp;\n+\n+import org.eclipse.microprofile.reactive.messaging.Incoming;\n+import org.eclipse.microprofile.reactive.messaging.Outgoing;\n+\n+import javax.enterprise.context.ApplicationScoped;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * A bean consuming costs in multiple currencies and producing prices in EUR from them\n+ */\n+@ApplicationScoped\n+public class CostConverter {\n+\n+    private static final Map<String, Double> conversionRatios = new HashMap<>();\n+\n+    static {\n+        conversionRatios.put(\"CHF\", 0.93);\n+        conversionRatios.put(\"USD\", 0.84);\n+        conversionRatios.put(\"PLN\", 0.22);\n+        conversionRatios.put(\"EUR\", 1.);", "originalCommit": "05c888c1f0887a7fb286f0f75c1c16e1a26b3d02", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTgxMTE0Nw==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721#discussion_r561811147", "bodyText": "I like 1. more but I changed it for you :D", "author": "michalszynkiewicz", "createdAt": "2021-01-21T11:39:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYzMTI1Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTg0NjQwOQ==", "url": "https://github.com/quarkusio/quarkus-quickstarts/pull/721#discussion_r561846409", "bodyText": ":-D", "author": "cescoffier", "createdAt": "2021-01-21T12:36:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MTYzMTI1Ng=="}], "type": "inlineReview"}, {"oid": "e32e5caec88e641196447a2d79b06ff38b6951ed", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/e32e5caec88e641196447a2d79b06ff38b6951ed", "message": "reactive-messaging-http quickstart", "committedDate": "2021-01-21T11:37:28Z", "type": "forcePushed"}, {"oid": "1560a2475fe5c0a00d897680dfdc9dbe96de925a", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/1560a2475fe5c0a00d897680dfdc9dbe96de925a", "message": "reactive-messaging-http quickstart", "committedDate": "2021-01-21T17:09:12Z", "type": "commit"}, {"oid": "1560a2475fe5c0a00d897680dfdc9dbe96de925a", "url": "https://github.com/quarkusio/quarkus-quickstarts/commit/1560a2475fe5c0a00d897680dfdc9dbe96de925a", "message": "reactive-messaging-http quickstart", "committedDate": "2021-01-21T17:09:12Z", "type": "forcePushed"}]}