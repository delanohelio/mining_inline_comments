{"pr_number": 793, "pr_title": "Wait for publish queue to clear before shutting down", "pr_createdAt": "2020-12-14T00:14:41Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/793", "timeline": [{"oid": "7b4f64442f617af251252c28212a966a43111975", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/7b4f64442f617af251252c28212a966a43111975", "message": "Wait for publish queue to clear before shutting down", "committedDate": "2020-12-14T00:13:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjA4Mg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/793#discussion_r542042082", "bodyText": "wonder if we can use the timeout on this call.", "author": "abanthiy", "createdAt": "2020-12-14T00:29:05Z", "path": "src/main/java/com/aws/greengrass/lifecyclemanager/KernelLifecycle.java", "diffHunk": "@@ -271,6 +271,7 @@ public void stopAllServices(int timeoutSeconds) {\n      */\n     public void softShutdown(int timeoutSeconds) {\n         logger.atDebug(\"system-shutdown\").log(\"Start soft shutdown\");\n+        kernel.getContext().waitForPublishQueueToClear();", "originalCommit": "7b4f64442f617af251252c28212a966a43111975", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjMwMA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/793#discussion_r542042300", "bodyText": "I don't think that we want to do that, we want to be in a fully consistent state, even if that takes time.", "author": "MikeDombo", "createdAt": "2020-12-14T00:30:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjA0MjA4Mg=="}], "type": "inlineReview"}]}