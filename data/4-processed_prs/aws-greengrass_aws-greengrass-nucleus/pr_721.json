{"pr_number": 721, "pr_title": "Remove taking configuration snapshot after deployment is finished", "pr_createdAt": "2020-11-24T03:04:00Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/721", "timeline": [{"oid": "751a26b6288b3195866c92db83704fccb09c8c05", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/751a26b6288b3195866c92db83704fccb09c8c05", "message": "Taking configuration snapshot after deployment is finished", "committedDate": "2020-11-24T03:08:59Z", "type": "commit"}, {"oid": "751a26b6288b3195866c92db83704fccb09c8c05", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/751a26b6288b3195866c92db83704fccb09c8c05", "message": "Taking configuration snapshot after deployment is finished", "committedDate": "2020-11-24T03:08:59Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTc5OTU5OQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/721#discussion_r529799599", "bodyText": "I'm not sure how this file is supposed to be used. Is it read somewhere?\nAnd it will be hard to debug issues since the state of rollback snapshot is overwritten anyway.", "author": "hui-yang", "createdAt": "2020-11-24T18:42:52Z", "path": "src/main/java/com/aws/greengrass/deployment/DeploymentService.java", "diffHunk": "@@ -289,6 +290,12 @@ private void finishCurrentDeployment() throws InterruptedException {\n                             .persistAndPublishDeploymentStatus(currentDeploymentTaskMetadata.getDeploymentId(),\n                                                                currentDeploymentTaskMetadata.getDeploymentType(),\n                                                                JobStatus.SUCCEEDED.toString(), statusDetails);\n+                    try {\n+                        deploymentDirectoryManager.takeConfigSnapshot(deploymentDirectoryManager.getSnapshotFilePath());", "originalCommit": "751a26b6288b3195866c92db83704fccb09c8c05", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f7becb54961f6b74ca8dbc769536c485869de27e", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f7becb54961f6b74ca8dbc769536c485869de27e", "message": "Merge branch 'master' into fixingSnapshot", "committedDate": "2020-11-25T17:21:26Z", "type": "commit"}, {"oid": "545e3542572fa509f2fc3c77711f60cb3c91f268", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/545e3542572fa509f2fc3c77711f60cb3c91f268", "message": "Revert changing snapshot", "committedDate": "2020-11-25T17:22:20Z", "type": "commit"}, {"oid": "a769e73717fa0b738d54f62edf328c2410e8cfeb", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/a769e73717fa0b738d54f62edf328c2410e8cfeb", "message": "Merge branch 'master' into fixingSnapshot", "committedDate": "2020-11-25T22:43:06Z", "type": "commit"}, {"oid": "b260878ebf41314e7ff04b09ce1507a1dd1d3080", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b260878ebf41314e7ff04b09ce1507a1dd1d3080", "message": "Merge branch 'master' into fixingSnapshot", "committedDate": "2020-11-26T00:32:56Z", "type": "commit"}]}