{"pr_number": 757, "pr_title": "throw error for invalid request params", "pr_createdAt": "2020-12-05T02:15:17Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757", "timeline": [{"oid": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d9d9a578b6bf2e80acd3c850a2f76869aa86ed90", "message": "throw error for invalid qos", "committedDate": "2020-12-05T02:12:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r536491355", "bodyText": "Can this happen today with java SDK? If yes, this is backward incompatible for beta customers.", "author": "prateek-y", "createdAt": "2020-12-05T03:06:35Z", "path": "src/main/java/com/aws/greengrass/builtin/services/mqttproxy/MqttProxyIPCAgent.java", "diffHunk": "@@ -200,7 +202,9 @@ private QualityOfService getQualityOfServiceFromQOS(QOS qos) {\n         } else if (qos == QOS.AT_MOST_ONCE) {\n             return QualityOfService.AT_MOST_ONCE;\n         }\n-        return QualityOfService.AT_LEAST_ONCE; //default value", "originalCommit": "d9d9a578b6bf2e80acd3c850a2f76869aa86ed90", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5NjM0Mw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r536496343", "bodyText": "Yes I checked this can happen with java SDK. And this is backwards incompatible", "author": "popanmol", "createdAt": "2020-12-05T03:39:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzE5ODI1OA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r537198258", "bodyText": "My only concern would be if QoS was optional. It's not.\nhttps://code.amazon.com/packages/AwsIotGreengrassV2CoreIPCServiceModel/blobs/8ef0e9fc96f08712495c67aadb823ca4f936fc57/--/model/main.smithy#L471-L472\nThat said, it probably should be... do the SDKs enforce it? As a customer, I'd expect that it's optional and defaults to QoS 0.", "author": "jbutler", "createdAt": "2020-12-07T03:00:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzcxMTc0Mw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/757#discussion_r537711743", "bodyText": "The SDKs don't enforce it in the sense that it's possible to send a request without setting the QoS and then the server would have to handle it. If we want to make it optional, we could distinguish between \"bad value\" and null - throw error for bad value and use QoS=0 in case of null. That sounds right?", "author": "popanmol", "createdAt": "2020-12-07T17:59:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjQ5MTM1NQ=="}], "type": "inlineReview"}, {"oid": "bff3021e386fa248e29a60f9b7ae468094c8640a", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bff3021e386fa248e29a60f9b7ae468094c8640a", "message": "unit test", "committedDate": "2020-12-05T03:30:38Z", "type": "commit"}, {"oid": "d063cdc43c023677baa0580dca5aa2b22541f5c1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d063cdc43c023677baa0580dca5aa2b22541f5c1", "message": "update error message", "committedDate": "2020-12-05T17:58:32Z", "type": "commit"}, {"oid": "d08244bf8ca25668683d26ec552b5c3738291829", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/d08244bf8ca25668683d26ec552b5c3738291829", "message": "Merge branch 'master' into validate-qos", "committedDate": "2020-12-07T17:25:23Z", "type": "commit"}, {"oid": "f0e6865430d613503eefe6fc0ea85af255b347a7", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/f0e6865430d613503eefe6fc0ea85af255b347a7", "message": "throw error for invalid request params", "committedDate": "2020-12-07T22:09:38Z", "type": "commit"}]}