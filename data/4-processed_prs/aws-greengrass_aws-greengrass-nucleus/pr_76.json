{"pr_number": 76, "pr_title": "Flatten recipe structure, add support for package parameters", "pr_createdAt": "2020-02-26T04:39:39Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76", "timeline": [{"oid": "038d9699cbe39441ae6c22f420fc3d4c99b5e1b9", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/038d9699cbe39441ae6c22f420fc3d4c99b5e1b9", "message": "Flatten recipe structure, add support for package parameters", "committedDate": "2020-02-26T04:37:22Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MTk0Mw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76#discussion_r384271943", "bodyText": "How does requires differ from the dependencies?", "author": "MikeDombo", "createdAt": "2020-02-26T04:42:38Z", "path": "src/main/java/com/aws/iot/evergreen/packagemanager/models/Package.java", "diffHunk": "@@ -33,17 +34,17 @@\n \n     private final String publisher;\n \n-    // TODO: May be more maintainable as a custom deserializer?? This was way faster to get started with\n-    @JsonTypeInfo(\n-            use = JsonTypeInfo.Id.NAME,\n-            include = JsonTypeInfo.As.EXTERNAL_PROPERTY,\n-            property = \"RecipeTemplateVersion\",\n-            visible = true)\n-    @JsonSubTypes({\n-            @JsonSubTypes.Type(value = ConfigFormat25Jan2020.class, name = \"2020-01-25\")\n-    })\n-    @JsonProperty(\"Config\")\n-    private final PackageConfigFormat config;\n+    private final Set<PackageParameter> packageParameters;\n+\n+    private final Map<String, Object> lifecycle;\n+\n+    // TODO: Migrate to artifact objects, this is only a list of URLs at the moment\n+    private final List<String> artifacts;\n+\n+    private final Map<String, String> dependencies;\n+\n+    // TODO: Needs discussion, this should probably be removed after integration demo", "originalCommit": "038d9699cbe39441ae6c22f420fc3d4c99b5e1b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3NDgxMA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76#discussion_r384274810", "bodyText": "This should reference to the dependency packages. Discussed offline, we will make further refactoring in the next pull request.", "author": "wikimonkey", "createdAt": "2020-02-26T04:57:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MTk0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MjQyOQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76#discussion_r384272429", "bodyText": "I believe that you can make this whole thing use json subtypes so that we can still deserialize multiple versions easily.", "author": "MikeDombo", "createdAt": "2020-02-26T04:45:23Z", "path": "src/main/java/com/aws/iot/evergreen/packagemanager/models/Package.java", "diffHunk": "@@ -21,6 +21,7 @@\n @EqualsAndHashCode(onlyExplicitlyIncluded = true)\n public class Package {", "originalCommit": "038d9699cbe39441ae6c22f420fc3d4c99b5e1b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3OTk4Mw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76#discussion_r384279983", "bodyText": "yup, it'll just have to be individual subtypes per key I think. We'll cross that bridge later.", "author": "chaurah", "createdAt": "2020-02-26T05:22:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MjQyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI4MDU0NQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/76#discussion_r384280545", "bodyText": "I could be wrong of course but you don't need to do it at the field level, you can put it on a class and it will choose subtypes from classes with extend the parent.", "author": "MikeDombo", "createdAt": "2020-02-26T05:24:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDI3MjQyOQ=="}], "type": "inlineReview"}]}