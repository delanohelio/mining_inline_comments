{"pr_number": 735, "pr_title": "Fix nucleus component change name", "pr_createdAt": "2020-11-30T19:50:50Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/735", "timeline": [{"oid": "b33dee31c4b8c188c367cf66053a2067938ceba6", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b33dee31c4b8c188c367cf66053a2067938ceba6", "message": "Fix nucleus component change name", "committedDate": "2020-11-30T19:52:13Z", "type": "forcePushed"}, {"oid": "95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "message": "Fix nucleus component change name", "committedDate": "2020-11-30T19:54:12Z", "type": "commit"}, {"oid": "95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "message": "Fix nucleus component change name", "committedDate": "2020-11-30T19:54:12Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2ODU4MQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/735#discussion_r532868581", "bodyText": "synchronized?", "author": "hui-yang", "createdAt": "2020-11-30T20:01:10Z", "path": "src/main/java/com/aws/greengrass/deployment/DeviceConfiguration.java", "diffHunk": "@@ -156,6 +153,20 @@ public DeviceConfiguration(Kernel kernel, String thingName, String iotDataEndpoi\n         validate();\n     }\n \n+    /**\n+     * Get the Nucleus component's name.\n+     *\n+     * @return Nucleus component name\n+     */\n+    public String getNucleusComponentName() {", "originalCommit": "95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg3MTc0OQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/735#discussion_r532871749", "bodyText": "Just to clarify, here onAnyChange doesn't need to be set up again by callers, because nucleusComponentName change can only happen in a nucleus update deployment, and when the config merges, all application should have been stopped", "author": "hui-yang", "createdAt": "2020-11-30T20:07:02Z", "path": "src/main/java/com/aws/greengrass/deployment/DeviceConfiguration.java", "diffHunk": "@@ -400,7 +411,7 @@ public Topic getDeploymentPollingFrequencySeconds() {\n      * @param cc Subscribe handler\n      */\n     public void onAnyChange(ChildChanged cc) {\n-        kernel.getConfig().lookupTopics(SERVICES_NAMESPACE_TOPIC, nucleusComponentName, CONFIGURATION_CONFIG_KEY)\n+        kernel.getConfig().lookupTopics(SERVICES_NAMESPACE_TOPIC, getNucleusComponentName(), CONFIGURATION_CONFIG_KEY)\n                 .subscribe(cc);\n         kernel.getConfig().lookupTopics(SYSTEM_NAMESPACE_KEY).subscribe(cc);\n     }", "originalCommit": "95a93a8ab4d4d753c685911bf8d943f00f2f4ad2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "000871665a62618e26300a0312ad560a1e971fc5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/000871665a62618e26300a0312ad560a1e971fc5", "message": "Synchronize", "committedDate": "2020-11-30T20:28:59Z", "type": "commit"}, {"oid": "000871665a62618e26300a0312ad560a1e971fc5", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/000871665a62618e26300a0312ad560a1e971fc5", "message": "Synchronize", "committedDate": "2020-11-30T20:28:59Z", "type": "forcePushed"}]}