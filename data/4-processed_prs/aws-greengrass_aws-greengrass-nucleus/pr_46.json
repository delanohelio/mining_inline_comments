{"pr_number": 46, "pr_title": "Enable checkstyle", "pr_createdAt": "2020-01-30T17:55:52Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46", "timeline": [{"oid": "8c1205ea9e76dfb5d1136b24a8b04eede75b5fda", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/8c1205ea9e76dfb5d1136b24a8b04eede75b5fda", "message": "Enable checkstyle and use google style as baseline\n\nCopy the google_checks.xml from checkstyle github repo as the baseline", "committedDate": "2020-01-30T01:15:41Z", "type": "commit"}, {"oid": "600e6c63b3b33003b6e9ed6f5a15819283c6a171", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/600e6c63b3b33003b6e9ed6f5a15819283c6a171", "message": "Reformat the codebase with the checkstyle rule\n\na number of the rules are enabled with warning severity for now to limit\nthe scope of the change.", "committedDate": "2020-01-30T17:46:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwMzUxOQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373103519", "bodyText": "Can we enable chaining like this on multiple lines?", "author": "MikeDombo", "createdAt": "2020-01-30T17:58:56Z", "path": "src/main/java/com/aws/iot/evergreen/builtin/services/servicediscovery/ServiceDiscoveryAgent.java", "diffHunk": "@@ -88,10 +120,8 @@ public ServiceDiscoveryAgent() {\n                 return response;\n             }\n \n-            SDAResource sdaResource = SDAResource.builder()", "originalCommit": "600e6c63b3b33003b6e9ed6f5a15819283c6a171", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzExMzk2MA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373113960", "bodyText": "I'm not sure if we want to enforce \"wrap always\" on \"Chained method calls\". It can break a short line to multiple lines. For example:\nresource.getResource().setUri(request.getResource().getUri());\nis broke to:\n            resource.getResource()\n                    .setTxtRecords(request.getResource()\n                            .getTxtRecords());", "author": "fengwang666", "createdAt": "2020-01-30T18:21:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwMzUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzExNTg2Mg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373115862", "bodyText": "Can we just disable that rule then and let the humans do the formatting?", "author": "MikeDombo", "createdAt": "2020-01-30T18:24:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwMzUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMTA5MA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373121090", "bodyText": "Unfortunately I don't think there is a way to remove the \"Chained method calls\" rule. If we use the auto format tool of Intellij, we have to choose one of rules.", "author": "fengwang666", "createdAt": "2020-01-30T18:35:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwMzUxOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMzgzNA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373123834", "bodyText": "Personal preference, but I prefer the multi-line chained calls.", "author": "MikeDombo", "createdAt": "2020-01-30T18:40:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEwMzUxOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyMTg2NA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373121864", "bodyText": "Lol.", "author": "leaf94", "createdAt": "2020-01-30T18:37:02Z", "path": "pom.xml", "diffHunk": "@@ -109,6 +109,34 @@\n                 <artifactId>maven-failsafe-plugin</artifactId>\n                 <version>2.22.2</version>\n             </plugin>\n+            <plugin>\n+                <artifactId>maven-checkstyle-plugin</artifactId>\n+                <version>3.1.0</version>\n+                <dependencies>\n+                    <dependency>\n+                        <groupId>com.puppycrawl.tools</groupId>\n+                        <artifactId>checkstyle</artifactId>\n+                        <version>8.29</version>\n+                    </dependency>\n+                </dependencies>\n+                <configuration>\n+                    <logViolationsToConsole>true</logViolationsToConsole>\n+                    <configLocation>checkstyle.xml</configLocation>\n+                    <violationSeverity>warning</violationSeverity>\n+                    <!-- 394 is the total number of warning at this moment. Set it as the max allowed so that\n+                    we don't introduce more violations in new code. -->\n+                    <maxAllowedViolations>394</maxAllowedViolations>", "originalCommit": "600e6c63b3b33003b6e9ed6f5a15819283c6a171", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzEyNDI3Ng==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/46#discussion_r373124276", "bodyText": "This is a great start! Thanks Feng!", "author": "leaf94", "createdAt": "2020-01-30T18:41:44Z", "path": "checkstyle.xml", "diffHunk": "@@ -0,0 +1,336 @@\n+<?xml version=\"1.0\"?>\n+<!DOCTYPE module PUBLIC\n+        \"-//Checkstyle//DTD Checkstyle Configuration 1.3//EN\"\n+        \"https://checkstyle.org/dtds/configuration_1_3.dtd\">\n+\n+<!--\n+    Checkstyle configuration that checks the Google coding conventions from Google Java Style\n+    that can be found at https://google.github.io/styleguide/javaguide.html\n+    Checkstyle is very configurable. Be sure to read the documentation at\n+    http://checkstyle.org (or in your downloaded distribution).\n+    To completely disable a check, just comment it out or delete it from the file.\n+    To suppress certain violations please review suppression filters.\n+    Authors: Max Vetrenko, Ruslan Diachenko, Roman Ivanov.\n+ -->\n+\n+<module name = \"Checker\">", "originalCommit": "600e6c63b3b33003b6e9ed6f5a15819283c6a171", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}