{"pr_number": 436, "pr_title": "Fix kernel update workflow", "pr_createdAt": "2020-09-14T23:28:32Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/436", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MzcyMQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/436#discussion_r488293721", "bodyText": "why? We shouldn't be using this as unzip isn't available by default on most systems", "author": "MikeDombo", "createdAt": "2020-09-14T23:30:14Z", "path": "GreengrassCore-2.0.0.yaml", "diffHunk": "@@ -13,39 +13,39 @@ Manifests:\n         value: -Xms512m -Xmx512m\n         type: STRING\n     Artifacts:\n-      # TODO: set correct URI\n+      # TODO: set correct URI. Use builtin unpack functionality with permission preserved\n       - URI: S3:GreengrassCore-2.0.0.zip\n-        Unarchive: zip\n     Lifecycle:\n       bootstrap:\n           script: |-\n             set -eu\n             KERNEL_ROOT=\"{{kernel:rootPath}}\"\n-            UNPACK_DIR=\"{{artifacts:decompressedPath}}\"\n+            UNPACK_DIR=\"{{artifacts:decompressedPath}}/GreengrassCore-2.0.0\"\n+            unzip \"{{artifacts:path}}/custom.zip\" -d \"$UNPACK_DIR\"", "originalCommit": "9a374abd3f9bf712f53ec6e5b0887b2bb11f1c96", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODI5MzkwOQ==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/436#discussion_r488293909", "bodyText": "what permission?", "author": "MikeDombo", "createdAt": "2020-09-14T23:30:51Z", "path": "GreengrassCore-2.0.0.yaml", "diffHunk": "@@ -13,39 +13,39 @@ Manifests:\n         value: -Xms512m -Xmx512m\n         type: STRING\n     Artifacts:\n-      # TODO: set correct URI\n+      # TODO: set correct URI. Use builtin unpack functionality with permission preserved\n       - URI: S3:GreengrassCore-2.0.0.zip\n-        Unarchive: zip\n     Lifecycle:\n       bootstrap:\n           script: |-\n             set -eu\n             KERNEL_ROOT=\"{{kernel:rootPath}}\"\n-            UNPACK_DIR=\"{{artifacts:decompressedPath}}\"\n+            UNPACK_DIR=\"{{artifacts:decompressedPath}}/GreengrassCore-2.0.0\"\n+            unzip \"{{artifacts:path}}/custom.zip\" -d \"$UNPACK_DIR\"\n \n-            rm -r \"$KERNEL_ROOT/alts/current/*\"\n+            rm -r \"$KERNEL_ROOT\"/alts/current/*\n \n             echo \"{{params:jvmOptions.value}}\" > \"$KERNEL_ROOT/alts/current/launch.params\"\n             ln -sf \"$UNPACK_DIR\" \"$KERNEL_ROOT/alts/current/distro\"\n             exit 100\n \n   - Platform:\n-      os: unbuntu\n+      os: ubuntu\n     Parameters:\n       - name: jvmOptions\n         # TODO: consider change to nested structure\n         value: -Xms512m -Xmx512m\n         type: STRING\n     Artifacts:\n-      # TODO: set correct URI\n+      # TODO: set correct URI. Use builtin unpack functionality with permission preserved", "originalCommit": "9a374abd3f9bf712f53ec6e5b0887b2bb11f1c96", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5a87f108262667e309a1f872b79ceef6cea5e73c", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5a87f108262667e309a1f872b79ceef6cea5e73c", "message": "Fix kernel update workflow", "committedDate": "2020-09-14T23:43:02Z", "type": "commit"}, {"oid": "5a87f108262667e309a1f872b79ceef6cea5e73c", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/5a87f108262667e309a1f872b79ceef6cea5e73c", "message": "Fix kernel update workflow", "committedDate": "2020-09-14T23:43:02Z", "type": "forcePushed"}, {"oid": "9b13786f66b452f8493f5b3c01db80eee2f100a8", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/9b13786f66b452f8493f5b3c01db80eee2f100a8", "message": "Increase assertion timeout", "committedDate": "2020-09-15T00:34:58Z", "type": "commit"}, {"oid": "26875c1312fd71c302ff9410c901e84e142e0cf1", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/26875c1312fd71c302ff9410c901e84e142e0cf1", "message": "Merge branch 'master' into ku-fix", "committedDate": "2020-09-15T01:20:30Z", "type": "commit"}, {"oid": "36e0ee1cb7ad94427cfe635fe77c58674048747c", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/36e0ee1cb7ad94427cfe635fe77c58674048747c", "message": "Merge branch 'master' into ku-fix", "committedDate": "2020-09-15T20:18:50Z", "type": "commit"}]}