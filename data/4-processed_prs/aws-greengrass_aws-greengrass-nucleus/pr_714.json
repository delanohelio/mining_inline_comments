{"pr_number": 714, "pr_title": "Restrict platform resolver detecting arch detail", "pr_createdAt": "2020-11-21T01:11:16Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714", "timeline": [{"oid": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "message": "Restrict platform resolver detecting arch detail", "committedDate": "2020-11-21T01:08:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NjIyNg==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#discussion_r528046226", "bodyText": "how about the other arms though? 7 and 8 at least", "author": "MikeDombo", "createdAt": "2020-11-21T01:14:27Z", "path": "src/main/java/com/aws/greengrass/config/PlatformResolver.java", "diffHunk": "@@ -136,7 +136,14 @@ private static String getArchDetailInfo() {\n             return null;\n         }\n         try {\n-            return Exec.sh(\"uname -m\").toLowerCase();\n+            String archDetail = Exec.sh(\"uname -m\").toLowerCase();\n+            // TODO: \"uname -m\" is not sufficient to capture arch details on all platforms.\n+            // Currently only return if detected armv6l, as required by lambda launcher.\n+            if (\"armv6l\".equals(archDetail)) {", "originalCommit": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NjMxMw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/714#discussion_r528046313", "bodyText": "else isn't needed. It can just fall through", "author": "MikeDombo", "createdAt": "2020-11-21T01:14:53Z", "path": "src/main/java/com/aws/greengrass/config/PlatformResolver.java", "diffHunk": "@@ -136,7 +136,14 @@ private static String getArchDetailInfo() {\n             return null;\n         }\n         try {\n-            return Exec.sh(\"uname -m\").toLowerCase();\n+            String archDetail = Exec.sh(\"uname -m\").toLowerCase();\n+            // TODO: \"uname -m\" is not sufficient to capture arch details on all platforms.\n+            // Currently only return if detected armv6l, as required by lambda launcher.\n+            if (\"armv6l\".equals(archDetail)) {\n+                return archDetail;\n+            } else {\n+                return null;\n+            }", "originalCommit": "fe9ff75dfac594145fdc17d9fc720d5c9ee892e0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "16712f7de92a416c5ff1c2a73ba84d0516a61816", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/16712f7de92a416c5ff1c2a73ba84d0516a61816", "message": "Merge branch 'master' into armv6l", "committedDate": "2020-11-23T17:09:34Z", "type": "commit"}, {"oid": "b28bc7ab0ace7b874c7cb73cba7c09c9732e5791", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/b28bc7ab0ace7b874c7cb73cba7c09c9732e5791", "message": "Merge branch 'master' into armv6l", "committedDate": "2020-11-23T20:53:18Z", "type": "commit"}, {"oid": "3f29c61ce56e10030e8e173f0b1d70bad197a989", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/3f29c61ce56e10030e8e173f0b1d70bad197a989", "message": "Merge branch 'master' into armv6l", "committedDate": "2020-11-23T21:48:03Z", "type": "commit"}]}