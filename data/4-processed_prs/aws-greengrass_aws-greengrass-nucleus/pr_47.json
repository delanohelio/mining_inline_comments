{"pr_number": 47, "pr_title": "Add FindBugs and make fixes to make it happy", "pr_createdAt": "2020-01-30T22:35:56Z", "pr_url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47", "timeline": [{"oid": "bdcda82bbc8bbedfa118802c9e0330bfc3a2e118", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/bdcda82bbc8bbedfa118802c9e0330bfc3a2e118", "message": "Add findbugs and make fixes to make it happy. Removed unused classes which had lots of errors", "committedDate": "2020-01-30T22:34:38Z", "type": "commit"}, {"oid": "77c25ce9a76eb88174a01481c767469dae129724", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/commit/77c25ce9a76eb88174a01481c767469dae129724", "message": "Merge branch 'master' into findbugs", "committedDate": "2020-01-30T22:36:07Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0Njc4OA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47#discussion_r373246788", "bodyText": "[Optional] As we are adding more config files for findbug, checkstyle, IDEs, we could start considering putting these files to a config directory, to keep our top level directory light.", "author": "leaf94", "createdAt": "2020-01-30T23:21:56Z", "path": "findbugs-exclude.xml", "diffHunk": "@@ -0,0 +1,9 @@\n+<?xml version=\"1.0\" encoding=\"UTF-8\"?>", "originalCommit": "77c25ce9a76eb88174a01481c767469dae129724", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0NzE0NA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47#discussion_r373247144", "bodyText": "Nice!", "author": "leaf94", "createdAt": "2020-01-30T23:23:14Z", "path": "src/main/java/com/aws/iot/evergreen/util/Log.java", "diffHunk": "@@ -172,7 +173,7 @@ public void logTo(String dest) {\n             logTo(System.err);\n         } else {\n             try {\n-                logTo(new FileWriter(dest), true);\n+                logTo(new OutputStreamWriter(new FileOutputStream(dest, true), StandardCharsets.UTF_8), true);", "originalCommit": "77c25ce9a76eb88174a01481c767469dae129724", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0ODE3Ng==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47#discussion_r373248176", "bodyText": "Was this added because of some findbug failure?", "author": "leaf94", "createdAt": "2020-01-30T23:26:40Z", "path": "src/main/java/com/aws/iot/evergreen/dependency/EZPlugins.java", "diffHunk": "@@ -87,9 +88,12 @@ public EZPlugins loadCache() throws IOException {\n         });\n         loadPlugins(true, this.getClass().getClassLoader());\n         if (!trustedFiles.isEmpty()) {\n-            URLClassLoader trusted = new URLClassLoader(trustedFiles.toArray(new URL[trustedFiles.size()]), root);\n-            root = trusted;\n-            loadPlugins(true, trusted);\n+            AccessController.doPrivileged((PrivilegedAction<Object>) () -> {", "originalCommit": "77c25ce9a76eb88174a01481c767469dae129724", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0OTUyNA==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47#discussion_r373249524", "bodyText": "Yes, FindBugs checks that any class loader occur within a privileged context.", "author": "MikeDombo", "createdAt": "2020-01-30T23:31:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0ODE3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0OTkzMw==", "url": "https://github.com/aws-greengrass/aws-greengrass-nucleus/pull/47#discussion_r373249933", "bodyText": "I see. Thanks!", "author": "leaf94", "createdAt": "2020-01-30T23:32:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzI0ODE3Ng=="}], "type": "inlineReview"}]}