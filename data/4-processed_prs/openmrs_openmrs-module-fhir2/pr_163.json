{"pr_number": 163, "pr_title": "FM2-157: Update PersonDAO and Service", "pr_createdAt": "2020-05-07T21:28:26Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxMDQ2Nw==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r422810467", "bodyText": "There's a duplication of the license header. Also, this file shouldn't be in this PR.", "author": "corneliouzbett", "createdAt": "2020-05-11T06:31:23Z", "path": "omod/src/test/java/org/openmrs/module/fhir2/providers/ObservationFhirResourceProviderTest.java", "diffHunk": "@@ -1,3 +1,12 @@\n+/*\n+ * This Source Code Form is subject to the terms of the Mozilla Public License,\n+ * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n+ * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n+ * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n+ *\n+ * Copyright (C) OpenMRS Inc. OpenMRS is a registered trademark and the OpenMRS\n+ * graphic logo is a trademark of OpenMRS Inc.\n+ */", "originalCommit": "a0ecf9cb92bdfb1dbcc7051e137025f2c45c6884", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjg0ODgwMg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r422848802", "bodyText": "Finished thanks", "author": "sherrif10", "createdAt": "2020-05-11T07:50:19Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMjgxMDQ2Nw=="}], "type": "inlineReview"}, {"oid": "b4a84e2c87bfa9d266dd2b514c53b8463f4422c2", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/b4a84e2c87bfa9d266dd2b514c53b8463f4422c2", "message": "ForwardingFilter now allows the slash to be omitted", "committedDate": "2020-05-12T15:02:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzEzOQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957139", "bodyText": "This should be dao.", "author": "ibacher", "createdAt": "2020-05-12T18:48:23Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImpl.java", "diffHunk": "@@ -17,38 +17,42 @@\n import ca.uhn.fhir.rest.param.StringOrListParam;\n import ca.uhn.fhir.rest.param.TokenOrListParam;\n import lombok.AccessLevel;\n+import lombok.Getter;\n import lombok.Setter;\n import org.hl7.fhir.r4.model.Person;\n import org.openmrs.module.fhir2.api.FhirPersonService;\n+import org.openmrs.module.fhir2.api.dao.FhirDao;\n import org.openmrs.module.fhir2.api.dao.FhirPersonDao;\n+import org.openmrs.module.fhir2.api.translators.OpenmrsFhirTranslator;\n import org.openmrs.module.fhir2.api.translators.PersonTranslator;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n import org.springframework.transaction.annotation.Transactional;\n \n @Component\n @Transactional\n+@Getter(AccessLevel.PROTECTED)\n @Setter(AccessLevel.PACKAGE)\n-public class FhirPersonServiceImpl implements FhirPersonService {\n+public class FhirPersonServiceImpl extends BaseFhirService<Person, org.openmrs.Person> implements FhirPersonService {\n \t\n \t@Autowired\n-\tprivate FhirPersonDao fhirPersonDao;\n+\tprivate FhirPersonDao Dao;", "originalCommit": "4c40f622b04e8185b78d02b710eca86e2f3c7981", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAxNzAwOA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r424017008", "bodyText": "Finished", "author": "sherrif10", "createdAt": "2020-05-12T20:35:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzEzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzM5NA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957394", "bodyText": "You should be able to remove this function altogether", "author": "ibacher", "createdAt": "2020-05-12T18:48:50Z", "path": "api/src/main/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImpl.java", "diffHunk": "@@ -17,38 +17,42 @@\n import ca.uhn.fhir.rest.param.StringOrListParam;\n import ca.uhn.fhir.rest.param.TokenOrListParam;\n import lombok.AccessLevel;\n+import lombok.Getter;\n import lombok.Setter;\n import org.hl7.fhir.r4.model.Person;\n import org.openmrs.module.fhir2.api.FhirPersonService;\n+import org.openmrs.module.fhir2.api.dao.FhirDao;\n import org.openmrs.module.fhir2.api.dao.FhirPersonDao;\n+import org.openmrs.module.fhir2.api.translators.OpenmrsFhirTranslator;\n import org.openmrs.module.fhir2.api.translators.PersonTranslator;\n import org.springframework.beans.factory.annotation.Autowired;\n import org.springframework.stereotype.Component;\n import org.springframework.transaction.annotation.Transactional;\n \n @Component\n @Transactional\n+@Getter(AccessLevel.PROTECTED)\n @Setter(AccessLevel.PACKAGE)\n-public class FhirPersonServiceImpl implements FhirPersonService {\n+public class FhirPersonServiceImpl extends BaseFhirService<Person, org.openmrs.Person> implements FhirPersonService {\n \t\n \t@Autowired\n-\tprivate FhirPersonDao fhirPersonDao;\n+\tprivate FhirPersonDao Dao;\n \t\n \t@Autowired\n-\tprivate PersonTranslator personTranslator;\n+\tprivate PersonTranslator translator;\n \t\n \t@Override\n \t@Transactional(readOnly = true)\n-\tpublic Person getPersonByUuid(String uuid) {\n-\t\treturn personTranslator.toFhirResource(fhirPersonDao.getPersonByUuid(uuid));\n+\tpublic Person get(String uuid) {\n+\t\treturn translator.toFhirResource(Dao.get(uuid));\n \t}", "originalCommit": "4c40f622b04e8185b78d02b710eca86e2f3c7981", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAxNjc1OQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r424016759", "bodyText": "Finished", "author": "sherrif10", "createdAt": "2020-05-12T20:34:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzM5NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzcxMg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957712", "bodyText": "Why did you rename this?", "author": "ibacher", "createdAt": "2020-05-12T18:49:20Z", "path": "api/src/test/java/org/openmrs/module/fhir2/api/impl/FhirPersonServiceImplTest.java", "diffHunk": "@@ -79,7 +79,7 @@\n \tprivate org.openmrs.Person person;\n \t\n \t@Mock\n-\tprivate FhirPersonDao dao;\n+\tprivate FhirPersonDao fhirPersonDao;", "originalCommit": "4c40f622b04e8185b78d02b710eca86e2f3c7981", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk4MTI0Mg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423981242", "bodyText": "This is a vairable except if am to change it where it was used. but by default it was like that", "author": "sherrif10", "createdAt": "2020-05-12T19:30:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzcxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDQzMTk4Ng==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r424431986", "bodyText": "I'd just leave this as dao.", "author": "ibacher", "createdAt": "2020-05-13T13:21:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzcxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzkyOQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r423957929", "bodyText": "Please remove this from this PR.", "author": "ibacher", "createdAt": "2020-05-12T18:49:43Z", "path": "omod/src/test/java/org/openmrs/module/fhir2/providers/ObservationFhirResourceProviderTest.java", "diffHunk": "@@ -3,7 +3,6 @@\n  * v. 2.0. If a copy of the MPL was not distributed with this file, You can\n  * obtain one at http://mozilla.org/MPL/2.0/. OpenMRS is also distributed under\n  * the terms of the Healthcare Disclaimer located at http://openmrs.org/license.\n- *", "originalCommit": "4c40f622b04e8185b78d02b710eca86e2f3c7981", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAxNjUwOQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r424016509", "bodyText": "Finished", "author": "sherrif10", "createdAt": "2020-05-12T20:34:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzkyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM4MzMxMg==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/163#discussion_r424383312", "bodyText": "Anything missing @ibacher @corneliouzbett", "author": "sherrif10", "createdAt": "2020-05-13T12:04:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzk1NzkyOQ=="}], "type": "inlineReview"}, {"oid": "978f12ee02a231193c1b6d70594cd179954d2948", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/978f12ee02a231193c1b6d70594cd179954d2948", "message": "FM2-157 Update: PersonDAO and Service\n\nhttps://issues.openmrs.org/browse/FM2-157", "committedDate": "2020-05-12T20:16:51Z", "type": "commit"}, {"oid": "d06a0d7b34b235e8e055b5350d057c6f124b435c", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/d06a0d7b34b235e8e055b5350d057c6f124b435c", "message": "Merge branch 'master' into FM2-157", "committedDate": "2020-05-12T20:18:25Z", "type": "commit"}, {"oid": "8faca5b3575f22689b5fdc37e1b81b42d32d0dff", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/8faca5b3575f22689b5fdc37e1b81b42d32d0dff", "message": "Revert ObservationFhirResourceProviderTest.java", "committedDate": "2020-05-13T13:22:32Z", "type": "commit"}, {"oid": "ff987063de2c23975ce394e95f2105b7a1e304b0", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/ff987063de2c23975ce394e95f2105b7a1e304b0", "message": "Revert config.xml", "committedDate": "2020-05-13T13:22:41Z", "type": "commit"}, {"oid": "0803d022cc7995037428457691af6d40d10efe3b", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/0803d022cc7995037428457691af6d40d10efe3b", "message": "Merge branch 'master' into FM2-157", "committedDate": "2020-05-13T13:23:00Z", "type": "commit"}]}