{"pr_number": 288, "pr_title": "FM2-295: Narrative generation failing for MedicationRequest resource", "pr_createdAt": "2020-08-15T17:33:19Z", "pr_url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4NjU4Nw==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r471286587", "bodyText": "thanks @ShivanshRakesh how does the entire pr look to you @ibacher", "author": "HerbertYiga", "createdAt": "2020-08-17T07:17:47Z", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/MedicationRequest.html", "diffHunk": "@@ -242,8 +244,14 @@\n                     <tr>\n                         <td>*</td>\n                         <td>\n-                            <th:block th:if=\"${resource.substitution.allowed}\"\n-                                      th:narrative=\"${resource.substitution.allowed}\"></th:block>\n+                            <th:block th:if=\"${fhirVersion} eq 'R4'\">", "originalCommit": "e878224c82cb250b2c4faecbf92d894d2ed3ac92", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474184899", "bodyText": "Are you sure about the logic here? R4 definitely has clinicalStatus and verificationStatus for AllergyIntolerance.", "author": "ibacher", "createdAt": "2020-08-20T18:23:32Z", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -40,22 +40,22 @@\n         <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "originalCommit": "e878224c82cb250b2c4faecbf92d894d2ed3ac92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MDM1Mw==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474190353", "bodyText": "@ibacher Yeah, but the type has been changed from code in R3 to CodableConcept in R4. Since code needs th:text, I had to separate out R3 and R4 here.\nThe part for R4 is there above in line 30.", "author": "ShivanshRakesh", "createdAt": "2020-08-20T18:33:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MTU3Ng==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474191576", "bodyText": "Ok... but I actually prefer for these kinds of things that we'd do \"${fhirVersion} eq 'DSTU3'\" rather than this as future versions of FHIR are going to be based on R4. In other words, this is treating R4 as the exceptional case where as it's DSTU3 support that's the exceptional case.", "author": "ibacher", "createdAt": "2020-08-20T18:35:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MzMwNQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474193305", "bodyText": "Okay, so I guess changing all R3->R4 diffs to \"${fhirVersion} eq 'DSTU3'\" would do right?", "author": "ShivanshRakesh", "createdAt": "2020-08-20T18:38:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDIwNDUyNA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474204524", "bodyText": "Yes", "author": "ibacher", "createdAt": "2020-08-20T18:59:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NDg5OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NTY3NQ==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474185675", "bodyText": "assertedDate is only available in R3. R5 and beyond presumably use the R4 property names by default.", "author": "ibacher", "createdAt": "2020-08-20T18:24:58Z", "path": "omod/src/main/resources/org/openmrs/module/fhir2/narratives/AllergyIntolerance.html", "diffHunk": "@@ -81,13 +81,13 @@\n             <td>Onset:</td>\n             <td th:narrative=\"${resource.onset}\"></td>\n         </tr>\n-        <th:block th:if=\"${fhirVersion} eq 'DSTU3'\">\n+        <th:block th:unless=\"${fhirVersion} eq 'R4'\">", "originalCommit": "e878224c82cb250b2c4faecbf92d894d2ed3ac92", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE5MTc4OA==", "url": "https://github.com/openmrs/openmrs-module-fhir2/pull/288#discussion_r474191788", "bodyText": "Okay so I will change it back to th:if=\"${fhirVersion} eq 'DSTU3'\".", "author": "ShivanshRakesh", "createdAt": "2020-08-20T18:35:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NDE4NTY3NQ=="}], "type": "inlineReview"}, {"oid": "cd7bff765dc3114f580881910f724167afc321c9", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/cd7bff765dc3114f580881910f724167afc321c9", "message": "FM2-295: Narrative generation failing for MedicationRequest resource", "committedDate": "2020-08-20T18:55:30Z", "type": "commit"}, {"oid": "cd7bff765dc3114f580881910f724167afc321c9", "url": "https://github.com/openmrs/openmrs-module-fhir2/commit/cd7bff765dc3114f580881910f724167afc321c9", "message": "FM2-295: Narrative generation failing for MedicationRequest resource", "committedDate": "2020-08-20T18:55:30Z", "type": "forcePushed"}]}