{"pr_number": 358, "pr_title": "[Design] Southbound Programming Workflow", "pr_createdAt": "2020-08-17T22:15:51Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/358", "timeline": [{"oid": "85372018f4c5a515b5aae51a1547a1253b4a2935", "url": "https://github.com/futurewei-cloud/alcor/commit/85372018f4c5a515b5aae51a1547a1253b4a2935", "message": "Update integration docs", "committedDate": "2020-06-10T04:43:28Z", "type": "commit"}, {"oid": "5fdee1faf0160d8989fe513ab08063bb8009568e", "url": "https://github.com/futurewei-cloud/alcor/commit/5fdee1faf0160d8989fe513ab08063bb8009568e", "message": "Merge branch 'upstream_master' into docs/workflow", "committedDate": "2020-06-17T18:17:25Z", "type": "commit"}, {"oid": "1a5ab01e1749310066adfd2dcd74ee56e08ce8fb", "url": "https://github.com/futurewei-cloud/alcor/commit/1a5ab01e1749310066adfd2dcd74ee56e08ce8fb", "message": "Add sb_prog workflow", "committedDate": "2020-06-17T20:31:17Z", "type": "commit"}, {"oid": "e13065153763a1fe6144167f61a78998efafb1e1", "url": "https://github.com/futurewei-cloud/alcor/commit/e13065153763a1fe6144167f61a78998efafb1e1", "message": "Merge branch 'upstream_master' into docs/workflow", "committedDate": "2020-06-24T14:31:53Z", "type": "commit"}, {"oid": "730dc81066fd7670cdf1352ec613e6ca57e8c5e2", "url": "https://github.com/futurewei-cloud/alcor/commit/730dc81066fd7670cdf1352ec613e6ca57e8c5e2", "message": "Update SB programming workflows", "committedDate": "2020-06-24T19:21:08Z", "type": "commit"}, {"oid": "d98672d7120f71ed16e33207abe732e7e5b90367", "url": "https://github.com/futurewei-cloud/alcor/commit/d98672d7120f71ed16e33207abe732e7e5b90367", "message": "Add a new sb workflow doc", "committedDate": "2020-06-24T19:28:37Z", "type": "commit"}, {"oid": "6c317eb3de6110cd9a7e29210cb731e97733849e", "url": "https://github.com/futurewei-cloud/alcor/commit/6c317eb3de6110cd9a7e29210cb731e97733849e", "message": "Add Scenario E to v1 workflow and Scenario A to v2 workflow", "committedDate": "2020-06-26T06:54:35Z", "type": "commit"}, {"oid": "738fa6b8936d25143729745fcc5835cc0e9f943e", "url": "https://github.com/futurewei-cloud/alcor/commit/738fa6b8936d25143729745fcc5835cc0e9f943e", "message": "Add Scenario B to v2", "committedDate": "2020-06-26T16:04:34Z", "type": "commit"}, {"oid": "447457f27ea7f76922d975dc3886cab0e1c0c85e", "url": "https://github.com/futurewei-cloud/alcor/commit/447457f27ea7f76922d975dc3886cab0e1c0c85e", "message": "Remove MQ from v1 diagram", "committedDate": "2020-06-26T16:09:33Z", "type": "commit"}, {"oid": "936f6e3ee948b624a1e62f12aa739a3eb9a38b0a", "url": "https://github.com/futurewei-cloud/alcor/commit/936f6e3ee948b624a1e62f12aa739a3eb9a38b0a", "message": "Merge from upstream master", "committedDate": "2020-08-17T21:52:06Z", "type": "commit"}, {"oid": "8398d71eac9cf405ac4c20820683e15aebda90ee", "url": "https://github.com/futurewei-cloud/alcor/commit/8398d71eac9cf405ac4c20820683e15aebda90ee", "message": "Add author info to Nova integration doc", "committedDate": "2020-08-17T22:09:43Z", "type": "commit"}, {"oid": "1ba1357405e43883ea9ff2e7c6207b53856b1039", "url": "https://github.com/futurewei-cloud/alcor/commit/1ba1357405e43883ea9ff2e7c6207b53856b1039", "message": "Rename normal path to scaling path", "committedDate": "2020-08-17T22:42:03Z", "type": "commit"}, {"oid": "1c7d231578c72010dc383adde13d592eea6acd91", "url": "https://github.com/futurewei-cloud/alcor/commit/1c7d231578c72010dc383adde13d592eea6acd91", "message": "Rename normal path to scaling path", "committedDate": "2020-08-17T22:43:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzNzQ3Mg==", "url": "https://github.com/futurewei-cloud/alcor/pull/358#discussion_r471837472", "bodyText": "Let's plan to change NEIGHBOR_CREATE_UPDATE to our new Neighbor state format: NEIGHBOR,CREATE(operation_type),L2(neighbor_type)", "author": "er1cthe0ne", "createdAt": "2020-08-17T23:58:11Z", "path": "docs/modules/ROOT/workflows/southbound_prog_workflow_v1.puml", "diffHunk": "@@ -0,0 +1,175 @@\n+' Copyright 2019 The Alcor Authors.\n+\n+' Licensed under the Apache License, Version 2.0 (the \"License\");\n+'        you may not use this file except in compliance with the License.\n+'        You may obtain a copy of the License at\n+\n+'        http://www.apache.org/licenses/LICENSE-2.0\n+\n+'        Unless required by applicable law or agreed to in writing, software\n+'        distributed under the License is distributed on an \"AS IS\" BASIS,\n+'        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+'        See the License for the specific language governing permissions and\n+'        limitations under the License.\n+\n+@startuml\n+\n+title Southbound Workflow of Port Provisioning - v1\n+\n+skinparam monochrome true\n+collections \"Port Manager\" as pm\n+collections \"Data Plane Manager\" as dpm\n+'collections \"Message Queue\" as mq\n+participant \"ACA@Host 1\" as host1\n+participant \"ACA@Host 2\" as host2\n+participant \"ACA@Host 3\" as host3\n+\n+==Scenario A: Create the first Port P1 at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+dpm -> host1: Send a GoalState message {[(P1,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 programming status\n+deactivate host1\n+dpm -> pm: Reply an InternalProgrammingStatus message on P1 programming status\n+deactivate dpm\n+\n+==Create the second Port P2 at Host 1==\n+autonumber 5 \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P2 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+dpm -> host1: Send a GoalState message \\n{[(P2,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P2 programming status\n+deactivate host1\n+\n+dpm -> pm: Once receiving response from Host1, reply an InternalProgrammingStatus\\nmessage on P2 programming status\n+deactivate dpm\n+==================================================\n+\n+==Scenario B: Create Ports (P1, P2) at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1,P2 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+autonumber 2 \"<b>[0]\"\n+dpm -> host1: Send a GoalState message \\n{[(P1,CREATE),(P2,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 and P2 programming status\n+deactivate host1\n+\n+autonumber 4 \"<b>[0]\"\n+dpm -> pm: After receiving response from Host1 and Host2, reply an InternalProgrammingStatus\\nmessage on P2 programming status\n+deactivate dpm\n+\n+\n+==Scenario C: Create the first Port P1 at Host 1==\n+autonumber \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P1 w/ neighbor_info=NULL],[Subnet],[VPC],[SG]}\n+activate dpm\n+dpm -> host1: Send a GoalState message {[(P1,CREATE)],[(Subnet,INFO)]} via gPRC\n+activate host1\n+host1 -> dpm: Reply a GoalStateOperationReply message on P1 programming status\n+deactivate host1\n+dpm -> pm: Reply an InternalProgrammingStatus message on P1 programming status\n+deactivate dpm\n+\n+==Create the second Port P2 at Host 2==\n+autonumber 5 \"<b>[0]\"\n+pm -> dpm: POST /port async with RequestBody NetworkConfiguration={\\n\\t[P2 w/ neighbor_info=[P1]],[Subnet],[VPC],[SG]}\n+activate dpm\n+\n+autonumber 6 \"<b>[0.a]\"\n+dpm -> host2: Send a GoalState message \\n{[(P2,CREATE),(P1,NEIGHBOR_CREATE_UPDATE)],[(Subnet,INFO)]} via gPRC", "originalCommit": "1c7d231578c72010dc383adde13d592eea6acd91", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg0NjIyOQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/358#discussion_r471846229", "bodyText": "Acked. Add @haboy52581 to update the workflow based on the latest schema.", "author": "xieus", "createdAt": "2020-08-18T00:30:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTgzNzQ3Mg=="}], "type": "inlineReview"}]}