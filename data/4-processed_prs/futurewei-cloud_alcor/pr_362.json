{"pr_number": 362, "pr_title": "[DPM/ACA Schema] Add message_type and Update Router & SG Configuration", "pr_createdAt": "2020-08-25T20:50:56Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/362", "timeline": [{"oid": "da2021a443444046a122f6b06c3efaad70087f2e", "url": "https://github.com/futurewei-cloud/alcor/commit/da2021a443444046a122f6b06c3efaad70087f2e", "message": "added message_type and updated route state", "committedDate": "2020-08-25T20:41:16Z", "type": "commit"}, {"oid": "314cb7f963e26b50cb97349eb7574124b53bf2cd", "url": "https://github.com/futurewei-cloud/alcor/commit/314cb7f963e26b50cb97349eb7574124b53bf2cd", "message": "adding PushNetworkResourceStatesStream in GoalStateProvisioner", "committedDate": "2020-08-25T20:53:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476755895", "bodyText": "Do we differentiate message_type for DHCP, or everything is FULL for DHCP?", "author": "xieus", "createdAt": "2020-08-25T21:32:40Z", "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -28,11 +28,12 @@ message DHCPConfiguration {\n     uint32 revision_number = 2;\n \n     string request_id = 3;\n-    string subnet_id = 4;\n-    string mac_address = 5;\n-    string ipv4_address = 6;\n-    string ipv6_address = 7;\n-    string port_host_name = 8; // for local DNS response\n+    MessageType message_type = 4; // DELTA (default) or FULL", "originalCommit": "314cb7f963e26b50cb97349eb7574124b53bf2cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc3NzczMw==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476777733", "bodyText": "I see two possible usage of message_type for DHCP:\n\nTo update the repeated extra_dhcp_options or dns_entry_list in the future\nWhen the DHCP resource is out of order/error, it will look for a FULL message_type to reset\n\nWe may go with everything FULL approach for DHCP, but it will have less flexability and not consistant with other resource types.", "author": "er1cthe0ne", "createdAt": "2020-08-25T21:58:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgxMDE5NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476810195", "bodyText": "Good thought and thank you.", "author": "xieus", "createdAt": "2020-08-25T22:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc3MTA0Nw==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r478771047", "bodyText": "we need PM to provide the api then", "author": "haboy52581", "createdAt": "2020-08-28T00:49:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODc3OTEwMQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r478779101", "bodyText": "DHCP configuration is generated by DPM, if additional information is needed PM should provide it based on the contract between DPM<-> PM.", "author": "er1cthe0ne", "createdAt": "2020-08-28T01:20:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MTA3NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r484641075", "bodyText": "@chenpiaoping what do you think about \"PM should provide it based on the contract between DPM<-> PM\"", "author": "haboy52581", "createdAt": "2020-09-08T04:18:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1NTg5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476758355", "bodyText": "Is VpcConfiguration in any case used for info purpose?", "author": "xieus", "createdAt": "2020-08-25T21:35:28Z", "path": "schema/proto3/vpc.proto", "diffHunk": "@@ -23,16 +23,17 @@ option java_outer_classname = \"Vpc\";\n \n import \"common.proto\";\n \n-message VpcConfiguration {\n+message VpcConfiguration {  // are we ready to remove VpcState based on the current router discussion?", "originalCommit": "314cb7f963e26b50cb97349eb7574124b53bf2cd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc3NDMwMA==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476774300", "bodyText": "not during our discussion so far including current router design", "author": "er1cthe0ne", "createdAt": "2020-08-25T21:54:29Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc3OTIxMA==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476779210", "bodyText": "Okay, I could bear with it for some more time unless we complete the design for all major features. It is up to you though :-)", "author": "xieus", "createdAt": "2020-08-25T22:00:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc4NTgyNg==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r476785826", "bodyText": "I will change the comment to below so that we can bear with it for now :)\n// Not used based on the current design including router E2E\n// To be removed once we complete the design for all major features\nmessage VpcConfiguration {", "author": "er1cthe0ne", "createdAt": "2020-08-25T22:09:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY0MTI1OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r484641258", "bodyText": "when would you remove it @er1cthe0ne", "author": "haboy52581", "createdAt": "2020-09-08T04:19:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDY1NjQ1OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/362#discussion_r484656459", "bodyText": "To be removed once we complete the design for all major features, on top of my head, that would include SG, EIP, SNAT.", "author": "er1cthe0ne", "createdAt": "2020-09-08T05:23:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3Njc1ODM1NQ=="}], "type": "inlineReview"}, {"oid": "13a416402d46371ad089cdd101d99459621c5cf0", "url": "https://github.com/futurewei-cloud/alcor/commit/13a416402d46371ad089cdd101d99459621c5cf0", "message": "update comment for VpcConfiguration", "committedDate": "2020-08-25T22:09:58Z", "type": "commit"}, {"oid": "6521f94d7fee18a1386214ef015556d43f785f23", "url": "https://github.com/futurewei-cloud/alcor/commit/6521f94d7fee18a1386214ef015556d43f785f23", "message": "adding router_e2e_workflow.puml", "committedDate": "2020-08-28T19:30:35Z", "type": "commit"}, {"oid": "ecd7d57fb50fb364b614c7dcd2f43beb86506317", "url": "https://github.com/futurewei-cloud/alcor/commit/ecd7d57fb50fb364b614c7dcd2f43beb86506317", "message": "complete routing scenario A", "committedDate": "2020-08-28T21:03:42Z", "type": "commit"}, {"oid": "f2162aed3663574844ab0598b8050f1265728f1f", "url": "https://github.com/futurewei-cloud/alcor/commit/f2162aed3663574844ab0598b8050f1265728f1f", "message": "moved neighborType inside FixedIp list", "committedDate": "2020-08-29T00:37:42Z", "type": "commit"}, {"oid": "0da46ceadcfe52a16cc938688e9c8ad66a028859", "url": "https://github.com/futurewei-cloud/alcor/commit/0da46ceadcfe52a16cc938688e9c8ad66a028859", "message": "add pm->dpm data exchange format", "committedDate": "2020-08-31T17:28:50Z", "type": "commit"}, {"oid": "6dd55b976b0e98af1ac902b0f0a4df50c2808654", "url": "https://github.com/futurewei-cloud/alcor/commit/6dd55b976b0e98af1ac902b0f0a4df50c2808654", "message": "added scenario B for router creation after port", "committedDate": "2020-09-01T01:43:23Z", "type": "commit"}, {"oid": "5bdaac99d42487af0c2d7d381c33146e0371b7fb", "url": "https://github.com/futurewei-cloud/alcor/commit/5bdaac99d42487af0c2d7d381c33146e0371b7fb", "message": "Upload a router e2e workflow", "committedDate": "2020-09-01T04:11:03Z", "type": "commit"}, {"oid": "cee2d5775f97b337c8e26552449c551b33ff9e83", "url": "https://github.com/futurewei-cloud/alcor/commit/cee2d5775f97b337c8e26552449c551b33ff9e83", "message": "added routing rule proposed workflow", "committedDate": "2020-09-02T22:11:55Z", "type": "commit"}, {"oid": "8b0940065f48711c2ca9042e0a21176d89c8d969", "url": "https://github.com/futurewei-cloud/alcor/commit/8b0940065f48711c2ca9042e0a21176d89c8d969", "message": "update routing rule workflow based on discussion", "committedDate": "2020-09-03T00:34:15Z", "type": "commit"}]}