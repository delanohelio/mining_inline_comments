{"pr_number": 88, "pr_title": "Deploy controller with K8s", "pr_createdAt": "2020-01-12T01:59:08Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/88", "timeline": [{"oid": "7764ca50dfda8510c76b3ee1618bd3a3344dc873", "url": "https://github.com/futurewei-cloud/alcor/commit/7764ca50dfda8510c76b3ee1618bd3a3344dc873", "message": "Add a k8s yaml", "committedDate": "2020-01-10T21:39:42Z", "type": "commit"}, {"oid": "d5f00dcf03f029ad6eca79a8a7bec98db48a730a", "url": "https://github.com/futurewei-cloud/alcor/commit/d5f00dcf03f029ad6eca79a8a7bec98db48a730a", "message": "Update type to ClusterIp", "committedDate": "2020-01-10T21:50:32Z", "type": "commit"}, {"oid": "382c0ce76cee52dcb4bbc376f5f268cf8ec45faf", "url": "https://github.com/futurewei-cloud/alcor/commit/382c0ce76cee52dcb4bbc376f5f268cf8ec45faf", "message": "Update service yaml and add deployment yaml", "committedDate": "2020-01-10T22:41:37Z", "type": "commit"}, {"oid": "65f42d9232d1fcecbc776e9ed01c9c94788da641", "url": "https://github.com/futurewei-cloud/alcor/commit/65f42d9232d1fcecbc776e9ed01c9c94788da641", "message": "Add back service yaml", "committedDate": "2020-01-10T22:43:52Z", "type": "commit"}, {"oid": "80b35a8b5f8a24521979b0fa17b5fbf6a5d6ad5e", "url": "https://github.com/futurewei-cloud/alcor/commit/80b35a8b5f8a24521979b0fa17b5fbf6a5d6ad5e", "message": "Remove unused refs", "committedDate": "2020-01-10T23:26:04Z", "type": "commit"}, {"oid": "a3514c5dbbfb993762a11eb12a07721a3720afa1", "url": "https://github.com/futurewei-cloud/alcor/commit/a3514c5dbbfb993762a11eb12a07721a3720afa1", "message": "Update the alcor controller package name", "committedDate": "2020-01-10T23:30:41Z", "type": "commit"}, {"oid": "ecffc7ad947bace546e922c1854347d18a972db5", "url": "https://github.com/futurewei-cloud/alcor/commit/ecffc7ad947bace546e922c1854347d18a972db5", "message": "Add redis deployment yaml", "committedDate": "2020-01-11T01:00:48Z", "type": "commit"}, {"oid": "eafc9f36a45905d8a3ab5eb6a0176d42278170c2", "url": "https://github.com/futurewei-cloud/alcor/commit/eafc9f36a45905d8a3ab5eb6a0176d42278170c2", "message": "Add redis deployment/service yaml", "committedDate": "2020-01-11T02:21:52Z", "type": "commit"}, {"oid": "9a227e5f1dd7d8a620e92fc62efa305711efd98d", "url": "https://github.com/futurewei-cloud/alcor/commit/9a227e5f1dd7d8a620e92fc62efa305711efd98d", "message": "Add deployment util script and k8s config file", "committedDate": "2020-01-12T01:50:48Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MjU2OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r365552568", "bodyText": "do we need to push the new image up everytime we call this script, note that the caller will require the user account password for fwnetworking for this to succeed.", "author": "er1cthe0ne", "createdAt": "2020-01-12T02:03:22Z", "path": "scripts/deployK8sClusterService.sh", "diffHunk": "@@ -0,0 +1,17 @@\n+#!/bin/bash\n+\n+if $1; then\n+\tdocker build -t fwnetworking/controller .\n+\tdocker push fwnetworking/controller:latest", "originalCommit": "9a227e5f1dd7d8a620e92fc62efa305711efd98d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1NzE4NA==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r365557184", "bodyText": "Correct. We have an input parameter to determine whether to use this block or not.", "author": "xieus", "createdAt": "2020-01-12T04:35:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MjU2OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MDk2OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367690968", "bodyText": "+1. suggest to have the versioning config asap, to avoid using latest.", "author": "yb01", "createdAt": "2020-01-16T22:51:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTU1MjU2OA=="}], "type": "inlineReview"}, {"oid": "e76569ee939f88dbdabdf53c8e0a5c769be11599", "url": "https://github.com/futurewei-cloud/alcor/commit/e76569ee939f88dbdabdf53c8e0a5c769be11599", "message": "Use a template for k8s config", "committedDate": "2020-01-14T02:10:03Z", "type": "commit"}, {"oid": "7210f011ab1df4e7a8fa0a32f097a5a8bbfb96a6", "url": "https://github.com/futurewei-cloud/alcor/commit/7210f011ab1df4e7a8fa0a32f097a5a8bbfb96a6", "message": "Make a template docker file", "committedDate": "2020-01-14T06:20:47Z", "type": "commit"}, {"oid": "139319221899f81a90bb1dbdde5829b420158904", "url": "https://github.com/futurewei-cloud/alcor/commit/139319221899f81a90bb1dbdde5829b420158904", "message": "Update Controller service/deployment yaml", "committedDate": "2020-01-16T22:30:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MDI3NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367690275", "bodyText": "Better to have version tag here to avoid using latest.", "author": "yb01", "createdAt": "2020-01-16T22:49:13Z", "path": "kubernetes/app/controller-deployment.yaml", "diffHunk": "@@ -0,0 +1,23 @@\n+apiVersion: apps/v1\n+kind: Deployment\n+metadata:\n+  name: alcor\n+  labels:\n+    app: alcor\n+spec:\n+  replicas: 3\n+  selector:\n+    matchLabels:\n+      app: alcor\n+  template:\n+    metadata:\n+      labels:\n+        app: alcor\n+    spec:\n+      containers:\n+        - name: alcor\n+          image: fwnetworking/controller", "originalCommit": "139319221899f81a90bb1dbdde5829b420158904", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzczOTQ3MQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367739471", "bodyText": "Thank you for the comment. A new version tag is added.", "author": "xieus", "createdAt": "2020-01-17T02:07:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MDI3NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzczOTU1Mg==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367739552", "bodyText": "Thank you for the comment. A version tag is added.", "author": "xieus", "createdAt": "2020-01-17T02:07:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MDI3NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MTQ1Mg==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367691452", "bodyText": "here you assumed docker login is already run ?", "author": "yb01", "createdAt": "2020-01-16T22:53:04Z", "path": "scripts/deployK8sClusterService.sh", "diffHunk": "@@ -0,0 +1,17 @@\n+#!/bin/bash\n+\n+if $1; then\n+\tdocker build -t fwnetworking/controller .\n+\tdocker push fwnetworking/controller:latest", "originalCommit": "139319221899f81a90bb1dbdde5829b420158904", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzczOTc2NA==", "url": "https://github.com/futurewei-cloud/alcor/pull/88#discussion_r367739764", "bodyText": "This block is removed.\nWe move a new instruction to https://github.com/futurewei-cloud/mizar-mp/wiki/K8s-Cluster-Setup-with-Mizar-MP-Control-Plane-and-Mizar-Data-Plane", "author": "xieus", "createdAt": "2020-01-17T02:09:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NzY5MTQ1Mg=="}], "type": "inlineReview"}, {"oid": "996a12c82fce793e215b5e519b965d2d37976c4f", "url": "https://github.com/futurewei-cloud/alcor/commit/996a12c82fce793e215b5e519b965d2d37976c4f", "message": "Add version tag to the deployment yaml", "committedDate": "2020-01-17T01:18:34Z", "type": "commit"}]}