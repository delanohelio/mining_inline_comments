{"pr_number": 339, "pr_title": "Alcor DVR Host Design and Protobuf Schema Change", "pr_createdAt": "2020-08-02T00:04:46Z", "pr_url": "https://github.com/futurewei-cloud/alcor/pull/339", "timeline": [{"oid": "6068e725723d46f5e09d9afcb739f0d1a9232d6f", "url": "https://github.com/futurewei-cloud/alcor/commit/6068e725723d46f5e09d9afcb739f0d1a9232d6f", "message": "added skeleton routing design", "committedDate": "2020-06-02T22:33:15Z", "type": "commit"}, {"oid": "680ee351287f2650fa02473c306f47067bb38e1a", "url": "https://github.com/futurewei-cloud/alcor/commit/680ee351287f2650fa02473c306f47067bb38e1a", "message": "update per team discussions", "committedDate": "2020-06-03T00:39:21Z", "type": "commit"}, {"oid": "25637f459ca428923986c1d36fb09325d07fc42a", "url": "https://github.com/futurewei-cloud/alcor/commit/25637f459ca428923986c1d36fb09325d07fc42a", "message": "added packek flow info without DVR", "committedDate": "2020-06-10T00:04:54Z", "type": "commit"}, {"oid": "9b842f7e432655cdba79afd31b48cb7df9d9a204", "url": "https://github.com/futurewei-cloud/alcor/commit/9b842f7e432655cdba79afd31b48cb7df9d9a204", "message": "added DVR packet flows", "committedDate": "2020-06-11T21:48:28Z", "type": "commit"}, {"oid": "a01f85dd41e153bc63c76905a771731398a3c646", "url": "https://github.com/futurewei-cloud/alcor/commit/a01f85dd41e153bc63c76905a771731398a3c646", "message": "updated DVR case 1 with openflow", "committedDate": "2020-06-13T00:38:27Z", "type": "commit"}, {"oid": "30f2de06dcc9d64e73122f3e70e1cc0f394784e2", "url": "https://github.com/futurewei-cloud/alcor/commit/30f2de06dcc9d64e73122f3e70e1cc0f394784e2", "message": "added more text on requirements, DVR details", "committedDate": "2020-06-14T05:10:32Z", "type": "commit"}, {"oid": "7c3c538f7516b5a79f5085db84da7104020fd367", "url": "https://github.com/futurewei-cloud/alcor/commit/7c3c538f7516b5a79f5085db84da7104020fd367", "message": "update based on feedback", "committedDate": "2020-06-14T16:29:36Z", "type": "commit"}, {"oid": "53f52c15757f51ea8a0cfddd4cc9a2dd735902eb", "url": "https://github.com/futurewei-cloud/alcor/commit/53f52c15757f51ea8a0cfddd4cc9a2dd735902eb", "message": "added virtual router session", "committedDate": "2020-06-16T00:36:24Z", "type": "commit"}, {"oid": "b0710ae7320254f68b40fbbfa544fd5dd8ccecf4", "url": "https://github.com/futurewei-cloud/alcor/commit/b0710ae7320254f68b40fbbfa544fd5dd8ccecf4", "message": "add figures", "committedDate": "2020-06-16T06:51:37Z", "type": "commit"}, {"oid": "f3682aa5b2424bb9e6f86c2003b0365d5bbf3c0e", "url": "https://github.com/futurewei-cloud/alcor/commit/f3682aa5b2424bb9e6f86c2003b0365d5bbf3c0e", "message": "Merge branch 'design/routing' of https://github.com/er1cthe0ne/alcor into design/routing", "committedDate": "2020-06-16T06:51:57Z", "type": "commit"}, {"oid": "6f0a0d1239a629c7fc25ae534abb4c3f5b5a86b7", "url": "https://github.com/futurewei-cloud/alcor/commit/6f0a0d1239a629c7fc25ae534abb4c3f5b5a86b7", "message": "commit", "committedDate": "2020-06-16T16:36:44Z", "type": "commit"}, {"oid": "2e0384fea77af28f86b88b3815d852bb17827473", "url": "https://github.com/futurewei-cloud/alcor/commit/2e0384fea77af28f86b88b3815d852bb17827473", "message": "added cross subnet DVR flow", "committedDate": "2020-06-16T16:53:30Z", "type": "commit"}, {"oid": "ecae2d5533bd4f4cf368ee34bcecd3bf68270b25", "url": "https://github.com/futurewei-cloud/alcor/commit/ecae2d5533bd4f4cf368ee34bcecd3bf68270b25", "message": "change example-configuration.jpg", "committedDate": "2020-06-16T18:51:52Z", "type": "commit"}, {"oid": "d9a83431d0ae389e5b43919d9adf1c0038a1eb2e", "url": "https://github.com/futurewei-cloud/alcor/commit/d9a83431d0ae389e5b43919d9adf1c0038a1eb2e", "message": "Merge branch 'design/routing' of https://github.com/er1cthe0ne/alcor into design/routing", "committedDate": "2020-06-16T18:51:57Z", "type": "commit"}, {"oid": "b8cb2a9a9b5d2b11ad2348ed5bf439be03631d16", "url": "https://github.com/futurewei-cloud/alcor/commit/b8cb2a9a9b5d2b11ad2348ed5bf439be03631d16", "message": "modify example-configuration", "committedDate": "2020-06-16T18:59:15Z", "type": "commit"}, {"oid": "f7665f3d21d50ce38316256f88ebc43dfa6350d6", "url": "https://github.com/futurewei-cloud/alcor/commit/f7665f3d21d50ce38316256f88ebc43dfa6350d6", "message": "updated cross subnet DVR flow", "committedDate": "2020-06-17T00:06:22Z", "type": "commit"}, {"oid": "60d4517554191f3834541c754b11810ac4f3e747", "url": "https://github.com/futurewei-cloud/alcor/commit/60d4517554191f3834541c754b11810ac4f3e747", "message": "modify example configuration figure", "committedDate": "2020-06-17T00:08:39Z", "type": "commit"}, {"oid": "8107089277f08e9a8751a816b763670ee32d6b8f", "url": "https://github.com/futurewei-cloud/alcor/commit/8107089277f08e9a8751a816b763670ee32d6b8f", "message": "add Alcor DVR design text", "committedDate": "2020-06-17T05:55:09Z", "type": "commit"}, {"oid": "bfb6b600d4c1cac85f9d3164f7c8d11671d495ed", "url": "https://github.com/futurewei-cloud/alcor/commit/bfb6b600d4c1cac85f9d3164f7c8d11671d495ed", "message": "Merge branch 'design/routing' of https://github.com/er1cthe0ne/alcor into design/routing", "committedDate": "2020-06-17T06:01:43Z", "type": "commit"}, {"oid": "defbdb557133c4ed58a9a33cf8354fc002658515", "url": "https://github.com/futurewei-cloud/alcor/commit/defbdb557133c4ed58a9a33cf8354fc002658515", "message": "modify example architecture", "committedDate": "2020-06-17T20:55:15Z", "type": "commit"}, {"oid": "58d9b32e1b70f885b0336c9cea56db5da996674d", "url": "https://github.com/futurewei-cloud/alcor/commit/58d9b32e1b70f885b0336c9cea56db5da996674d", "message": "added prototype openflow rules", "committedDate": "2020-06-18T05:22:08Z", "type": "commit"}, {"oid": "747149439bee4dbacf79acc66a9e826580eaca9a", "url": "https://github.com/futurewei-cloud/alcor/commit/747149439bee4dbacf79acc66a9e826580eaca9a", "message": "added the generated cross subnet DVR flow", "committedDate": "2020-06-19T21:09:40Z", "type": "commit"}, {"oid": "7a9e8942061b6488fbe64232324a223951824462", "url": "https://github.com/futurewei-cloud/alcor/commit/7a9e8942061b6488fbe64232324a223951824462", "message": "clean up OVS image", "committedDate": "2020-06-19T22:11:59Z", "type": "commit"}, {"oid": "94469717f661abb3ca249aede77fafb947a73cdc", "url": "https://github.com/futurewei-cloud/alcor/commit/94469717f661abb3ca249aede77fafb947a73cdc", "message": "added MAC_HOST1_DVR info", "committedDate": "2020-06-23T00:31:05Z", "type": "commit"}, {"oid": "e1f5fb602a6bf7b7286395200d0358eeb249b2c5", "url": "https://github.com/futurewei-cloud/alcor/commit/e1f5fb602a6bf7b7286395200d0358eeb249b2c5", "message": "update schema to support L3 routing", "committedDate": "2020-07-08T17:00:34Z", "type": "commit"}, {"oid": "99ab18afd47b83b219b2e43b0b026e888bc89994", "url": "https://github.com/futurewei-cloud/alcor/commit/99ab18afd47b83b219b2e43b0b026e888bc89994", "message": "remove the breaking change for tunnel_id", "committedDate": "2020-07-08T18:42:01Z", "type": "commit"}, {"oid": "6019493a3c79e4881e8958993f5424aecdcaf37c", "url": "https://github.com/futurewei-cloud/alcor/commit/6019493a3c79e4881e8958993f5424aecdcaf37c", "message": "added router flow", "committedDate": "2020-07-09T22:20:47Z", "type": "commit"}, {"oid": "ee228a7c3877f3e74dcb562cdd777f5912e1bfdf", "url": "https://github.com/futurewei-cloud/alcor/commit/ee228a7c3877f3e74dcb562cdd777f5912e1bfdf", "message": "fix neighbor.proto build error", "committedDate": "2020-07-09T22:57:51Z", "type": "commit"}, {"oid": "3a41c6be74266739d32dea3518aacc50f8769228", "url": "https://github.com/futurewei-cloud/alcor/commit/3a41c6be74266739d32dea3518aacc50f8769228", "message": "update schema and add router_workflow.png", "committedDate": "2020-07-10T19:02:09Z", "type": "commit"}, {"oid": "a1dbb822e8d285ff18a454d5771ca9a4b6b29b33", "url": "https://github.com/futurewei-cloud/alcor/commit/a1dbb822e8d285ff18a454d5771ca9a4b6b29b33", "message": "update based on PR feedback", "committedDate": "2020-07-11T00:33:47Z", "type": "commit"}, {"oid": "03bcc84fe89343b1af4aec1799200891f9038918", "url": "https://github.com/futurewei-cloud/alcor/commit/03bcc84fe89343b1af4aec1799200891f9038918", "message": "revert the breaking change to DPM on port config", "committedDate": "2020-07-11T01:14:09Z", "type": "commit"}, {"oid": "167f6657dd7470919af8ad9791e7c0e50f7b9b80", "url": "https://github.com/futurewei-cloud/alcor/commit/167f6657dd7470919af8ad9791e7c0e50f7b9b80", "message": "added skeleton routing design", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "18ddbd4d08e08e63f77c80ac003c42ae7116c3c5", "url": "https://github.com/futurewei-cloud/alcor/commit/18ddbd4d08e08e63f77c80ac003c42ae7116c3c5", "message": "update per team discussions", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "9d4ab344bbaadaea5e5644f77a97e7dd74e2f0a6", "url": "https://github.com/futurewei-cloud/alcor/commit/9d4ab344bbaadaea5e5644f77a97e7dd74e2f0a6", "message": "added packek flow info without DVR", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "d3ab2b4b11a6495f7a60feb820b588f9ee9f2bc8", "url": "https://github.com/futurewei-cloud/alcor/commit/d3ab2b4b11a6495f7a60feb820b588f9ee9f2bc8", "message": "added DVR packet flows", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "46abf4d819e4f68374a6301576444ce1ad6e6c72", "url": "https://github.com/futurewei-cloud/alcor/commit/46abf4d819e4f68374a6301576444ce1ad6e6c72", "message": "updated DVR case 1 with openflow", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "6aeebdd5ccf045ca6e53ba82e955711133f4f89c", "url": "https://github.com/futurewei-cloud/alcor/commit/6aeebdd5ccf045ca6e53ba82e955711133f4f89c", "message": "added more text on requirements, DVR details", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "f28a3dbd5603941242d4a418dc51f449f24d5620", "url": "https://github.com/futurewei-cloud/alcor/commit/f28a3dbd5603941242d4a418dc51f449f24d5620", "message": "update based on feedback", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "071cf181b145d0f90d6a7138750c9e45946db1c1", "url": "https://github.com/futurewei-cloud/alcor/commit/071cf181b145d0f90d6a7138750c9e45946db1c1", "message": "add figures", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "9cbf04c4aa20de1107d2854bf36e621d24ba3fb4", "url": "https://github.com/futurewei-cloud/alcor/commit/9cbf04c4aa20de1107d2854bf36e621d24ba3fb4", "message": "added virtual router session", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "26b0733d9ccd18cefac61523310e6852371bc9a0", "url": "https://github.com/futurewei-cloud/alcor/commit/26b0733d9ccd18cefac61523310e6852371bc9a0", "message": "commit", "committedDate": "2020-07-11T05:23:33Z", "type": "commit"}, {"oid": "fa5d9dfbd557d73a24972792f81cd6d38f7a11db", "url": "https://github.com/futurewei-cloud/alcor/commit/fa5d9dfbd557d73a24972792f81cd6d38f7a11db", "message": "change example-configuration.jpg", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "e8f8663a3e5b31c3e133bec4ecc76ffd375f9678", "url": "https://github.com/futurewei-cloud/alcor/commit/e8f8663a3e5b31c3e133bec4ecc76ffd375f9678", "message": "added cross subnet DVR flow", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "9fdb67b5a863919c95db4f5ae1023c6e343cf1e2", "url": "https://github.com/futurewei-cloud/alcor/commit/9fdb67b5a863919c95db4f5ae1023c6e343cf1e2", "message": "modify example-configuration", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "b66b3c30c96effb662dfb028df10e1f921c6d4ad", "url": "https://github.com/futurewei-cloud/alcor/commit/b66b3c30c96effb662dfb028df10e1f921c6d4ad", "message": "updated cross subnet DVR flow", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "ac8389d90a1e8c0612138d95aa345e99e7b72816", "url": "https://github.com/futurewei-cloud/alcor/commit/ac8389d90a1e8c0612138d95aa345e99e7b72816", "message": "add Alcor DVR design text", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "f8e1d0536839f0972831755c2eb3aaaf96218deb", "url": "https://github.com/futurewei-cloud/alcor/commit/f8e1d0536839f0972831755c2eb3aaaf96218deb", "message": "modify example configuration figure", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "2dcfc2ee334da4349f781dd34d2aa295326fe163", "url": "https://github.com/futurewei-cloud/alcor/commit/2dcfc2ee334da4349f781dd34d2aa295326fe163", "message": "modify example architecture", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "ac8efbe16e389f420e492090361ec3a7e1cb5ce2", "url": "https://github.com/futurewei-cloud/alcor/commit/ac8efbe16e389f420e492090361ec3a7e1cb5ce2", "message": "added prototype openflow rules", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "966d334129246312ec835e5edf3b27d10edf9e83", "url": "https://github.com/futurewei-cloud/alcor/commit/966d334129246312ec835e5edf3b27d10edf9e83", "message": "added the generated cross subnet DVR flow", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "08dc10ee48a8f61aada3dcf3254ce4a5ccda939e", "url": "https://github.com/futurewei-cloud/alcor/commit/08dc10ee48a8f61aada3dcf3254ce4a5ccda939e", "message": "clean up OVS image", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "1cfdd3d8bd63f37923abec5ca37a61cf2510984e", "url": "https://github.com/futurewei-cloud/alcor/commit/1cfdd3d8bd63f37923abec5ca37a61cf2510984e", "message": "added MAC_HOST1_DVR info", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "fb728744d8b7feea9f209efc6ebd0a0f6a0f7085", "url": "https://github.com/futurewei-cloud/alcor/commit/fb728744d8b7feea9f209efc6ebd0a0f6a0f7085", "message": "update schema to support L3 routing", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "10eca45cef4613d06615fad4082d5b3cc4a7b631", "url": "https://github.com/futurewei-cloud/alcor/commit/10eca45cef4613d06615fad4082d5b3cc4a7b631", "message": "remove the breaking change for tunnel_id", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "a352267f872a0a2327517beec9c57ca3c02769ab", "url": "https://github.com/futurewei-cloud/alcor/commit/a352267f872a0a2327517beec9c57ca3c02769ab", "message": "added router flow", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "0fee74f6d0b0fa901f803e088f39d0c6fc9bf254", "url": "https://github.com/futurewei-cloud/alcor/commit/0fee74f6d0b0fa901f803e088f39d0c6fc9bf254", "message": "fix neighbor.proto build error", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "eee8abe2efd647133505ba63ec0a4361fb1990a1", "url": "https://github.com/futurewei-cloud/alcor/commit/eee8abe2efd647133505ba63ec0a4361fb1990a1", "message": "update schema and add router_workflow.png", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "790606e3974d5256fd630a7d0cc571e2997e6245", "url": "https://github.com/futurewei-cloud/alcor/commit/790606e3974d5256fd630a7d0cc571e2997e6245", "message": "update based on PR feedback", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "3dd7068e63fe09d956226ae2989420419ab72379", "url": "https://github.com/futurewei-cloud/alcor/commit/3dd7068e63fe09d956226ae2989420419ab72379", "message": "revert the breaking change to DPM on port config", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "2e209ece24440bf9caed3e05d847486e8365ddb1", "url": "https://github.com/futurewei-cloud/alcor/commit/2e209ece24440bf9caed3e05d847486e8365ddb1", "message": "added comment", "committedDate": "2020-07-11T05:23:34Z", "type": "commit"}, {"oid": "65f6810417be207be6003b87a4d40bdb6ca5dcc1", "url": "https://github.com/futurewei-cloud/alcor/commit/65f6810417be207be6003b87a4d40bdb6ca5dcc1", "message": "Merge branch 'design/routing' of https://github.com/er1cthe0ne/alcor into design/routing", "committedDate": "2020-07-11T05:24:40Z", "type": "commit"}, {"oid": "661b70ca0a3d53e9b80bf5851d482f43800a1f6f", "url": "https://github.com/futurewei-cloud/alcor/commit/661b70ca0a3d53e9b80bf5851d482f43800a1f6f", "message": "Merge pull request #1 from er1cthe0ne/design/routing\n\nmoving from er1cthe0ne branch design/routing to er1cthe0ne master", "committedDate": "2020-07-11T17:31:56Z", "type": "commit"}, {"oid": "b538cd7be03c69b9737fd8cdf4afbdfae4a3f480", "url": "https://github.com/futurewei-cloud/alcor/commit/b538cd7be03c69b9737fd8cdf4afbdfae4a3f480", "message": "adding new NEIGHBOR and PORT resource type", "committedDate": "2020-07-14T22:12:47Z", "type": "commit"}, {"oid": "a053168610b7d0e048452257dd2dc10e59dc9cc6", "url": "https://github.com/futurewei-cloud/alcor/commit/a053168610b7d0e048452257dd2dc10e59dc9cc6", "message": "host_DVR_mac_address -> host_dvr_mac_address", "committedDate": "2020-07-15T18:28:37Z", "type": "commit"}, {"oid": "8a2613fb2de17c03829cd3897536df1bac63a544", "url": "https://github.com/futurewei-cloud/alcor/commit/8a2613fb2de17c03829cd3897536df1bac63a544", "message": "added neighbor_host_dvr_mac to neighbor.proto", "committedDate": "2020-07-17T18:11:10Z", "type": "commit"}, {"oid": "c0069f1e095a1774bfc2ca838d86d5db756b687a", "url": "https://github.com/futurewei-cloud/alcor/commit/c0069f1e095a1774bfc2ca838d86d5db756b687a", "message": "simplying the schema", "committedDate": "2020-07-20T21:21:10Z", "type": "commit"}, {"oid": "80783b0eb3f874784095408ee75c9b54c2a4f057", "url": "https://github.com/futurewei-cloud/alcor/commit/80783b0eb3f874784095408ee75c9b54c2a4f057", "message": "added request id field", "committedDate": "2020-08-01T23:51:31Z", "type": "commit"}, {"oid": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "url": "https://github.com/futurewei-cloud/alcor/commit/d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "message": "Merge branch 'master' of https://github.com/futurewei-cloud/alcor", "committedDate": "2020-08-01T23:53:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTEyMg==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059122", "bodyText": "Resource type is a type for customer-defined resources. Could you elaborate why neighbor is a type?", "author": "xieus", "createdAt": "2020-08-02T10:14:20Z", "path": "schema/proto3/common.proto", "diffHunk": "@@ -25,8 +25,10 @@ enum ResourceType {\n     VPC = 0;\n     SUBNET = 1;\n     PORT = 2;\n-    SECURITYGROUP = 3;\n-    DHCP = 4;\n+    NEIGHBOR = 3;", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzI0OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133248", "bodyText": "GoalStateOperationStatus includes ResourceType for GoalStateOperationReply. Since we introduced NeighborState in the schema, we need to add NEIGHBOR as ResourceType for our GoalStateOperationReply.", "author": "er1cthe0ne", "createdAt": "2020-08-02T22:56:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTEyMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTM1Mw==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059353", "bodyText": "If we need to merge the dhcp change earlier, we could create a separate PR for that.", "author": "xieus", "createdAt": "2020-08-02T10:16:53Z", "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -27,10 +27,12 @@ message DHCPConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string mac_address = 3;\n-    string ipv4_address = 4;\n-    string ipv6_address = 5;\n-    string port_host_name = 6; // for local DNS response\n+    string request_id = 3;\n+    string subnet_id = 4;", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzMyNg==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133326", "bodyText": "ok, I don't think dhcp progress is blocked because they will be using a random/fixed server address for DHCP server for now.", "author": "er1cthe0ne", "createdAt": "2020-08-02T22:57:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTM1Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059551", "bodyText": "Will replacing security_group_states with neighbor_states become a breaking change for protobuf message? I am a bit surprised that this change doesn't break our CI :-)", "author": "xieus", "createdAt": "2020-08-02T10:19:23Z", "path": "schema/proto3/goalstate.proto", "diffHunk": "@@ -23,15 +23,19 @@ option java_package = \"com.futurewei.alcor.schema\";\n import \"vpc.proto\";\n import \"subnet.proto\";\n import \"port.proto\";\n+import \"neighbor.proto\";\n import \"securitygroup.proto\";\n import \"dhcp.proto\";\n+import \"router.proto\";\n \n message GoalState {\n     uint32 format_version = 1;\n \n     repeated VpcState vpc_states = 2;\n     repeated SubnetState subnet_states = 3;\n     repeated PortState port_states = 4;\n-    repeated SecurityGroupState security_group_states = 5;\n-    repeated DHCPState dhcp_states = 6;\n+    repeated NeighborState neighbor_states = 5;", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzMzU4NA==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464133584", "bodyText": "I think it didn't break because we always set and get the protobuf fields by name, e.g:\nPortConfiguration_builder->set_id(port_id_4);\nPortConfiguration_builder->set_vpc_id(vpc_id_2);\nPortConfiguration_builder->set_name(port_name_4);\nPortConfiguration_builder->set_mac_address(vmac_address_4);\nTherefore, it is okay even when the order of the fields changed.", "author": "er1cthe0ne", "createdAt": "2020-08-02T23:00:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0ODIwNg==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464148206", "bodyText": "Okay, that is to say, if we merge this PR to Alcor/Master, DPM starts sending the protobuf message with updated version, existing ACA should be fine?", "author": "xieus", "createdAt": "2020-08-03T01:04:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTU1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA1OTc0OQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464059749", "bodyText": "\ud83d\udc4d", "author": "xieus", "createdAt": "2020-08-02T10:21:26Z", "path": ".gitignore", "diffHunk": "@@ -79,3 +79,6 @@ lib/target/\n \n # Ignite\n ignite/\n+\n+# mac system file\n+.DS_Store", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464060251", "bodyText": "Should we move network_type from port directly to network, instead of subnet? Do you plan to support two subnets in the same network with different values of network_type?", "author": "xieus", "createdAt": "2020-08-02T10:27:21Z", "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzNDY1Mw==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464134653", "bodyText": "putting it in subnet level will allow us to support:\n\ntwo subnets in the same network with different network_type\neach network with n subnet will support one network_type only\n\n@cj-chung can you help to find out what openstack neutron supports?\nNote that we have the notion to look up subnet info, but we don't have the notion to look up vpc info (yet).", "author": "er1cthe0ne", "createdAt": "2020-08-02T23:12:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0ODgyOQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464148829", "bodyText": "Neutron by default supports one network, one network type, and one segmentation id.\nRef: https://docs.openstack.org/api-ref/network/v2/?expanded=create-network-detail#create-network\nRegarding two subnets with different network_type, DP will be pretty challenging.", "author": "xieus", "createdAt": "2020-08-03T01:08:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDE0OTUwNQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464149505", "bodyText": "Also, it supports one network with multiple segments, each with different network type and segmentation id.\n    \"network\": {\n        \"segments\": [\n            {\n                \"provider:segmentation_id\": 2,\n                \"provider:physical_network\": \"public\",\n                \"provider:network_type\": \"vlan\"\n            },\n            {\n                \"provider:physical_network\": \"default\",\n                \"provider:network_type\": \"flat\"\n            }\n        ],\n        \"name\": \"net1\",\n        \"admin_state_up\": true,\n        \"qos_policy_id\": \"6a8454ade84346f59e8d40665f878b2e\"\n    }\n}", "author": "xieus", "createdAt": "2020-08-03T01:13:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MDI1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MTI0NQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464061245", "bodyText": "Move neighbor_host_dvr_mac field to right after host_ip_address.", "author": "xieus", "createdAt": "2020-08-02T10:38:54Z", "path": "schema/proto3/neighbor.proto", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";\n+\n+package alcor.schema;\n+\n+option java_package = \"com.futurewei.alcor.schema\";\n+option java_outer_classname = \"Neighbor\";\n+\n+import \"common.proto\";\n+\n+enum NeighborType { \n+    L2 = 0; // the default type\n+    L3 = 1;\n+}\n+\n+message NeighborConfiguration {\n+    uint32 format_version = 1;\n+    uint32 revision_number = 2;\n+\n+    string request_id = 3;\n+    string id = 4;\n+    NeighborType neighbor_type = 5; // L2 (default) or L3\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string mac_address = 9;\n+    string host_ip_address = 10;\n+\n+    message FixedIp {\n+        string subnet_id = 1;\n+        string ip_address = 2;\n+    }\n+\n+    message AllowAddressPair {\n+        string ip_address = 1;\n+        string mac_address = 2;\n+    }\n+\n+    string neighbor_host_dvr_mac = 11;", "originalCommit": "d91286f76e60c55157ee848ab0a5ff0ffb8f80a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDEzNDc2Ng==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r464134766", "bodyText": "fixed.", "author": "er1cthe0ne", "createdAt": "2020-08-02T23:13:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA2MTI0NQ=="}], "type": "inlineReview"}, {"oid": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "url": "https://github.com/futurewei-cloud/alcor/commit/ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "message": "move neighbor_host_dvr_mac up per feedback", "committedDate": "2020-08-03T21:19:40Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NDY3MQ==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r465474671", "bodyText": "I did not find Gateway definition in subnet proto", "author": "haboy52581", "createdAt": "2020-08-05T05:04:29Z", "path": "schema/proto3/subnet.proto", "diffHunk": "@@ -27,36 +27,27 @@ message SubnetConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string id = 3;\n-    string project_id = 4;\n-    string vpc_id = 5;\n-    string name = 6;\n-    string cidr = 7;\n-    int64 tunnel_id = 8;\n+    string request_id = 3;\n+    string id = 4;\n+    NetworkType network_type = 5;\n+    string project_id = 6;\n+    string vpc_id = 7;\n+    string name = 8;\n+    string cidr = 9;\n+\n+    // TODO: change to uint32 but that would require change in DPM\n+    uint64 tunnel_id = 10;\n \n     message Gateway {", "originalCommit": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NTI5OA==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r465475298", "bodyText": "Also I have updated DPM's input about subnet Internal Entity part here, let me know if you have any questions:\nhttps://github.com/haboy52581/alcor/blob/master/docs/modules/ROOT/pages/infra_services/data_plane_manager.adoc#api-specification", "author": "haboy52581", "createdAt": "2020-08-05T05:06:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NTQ3NDY3MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MDAxNw==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466060017", "bodyText": "should we put the neighbor to port as one field which is more naturally?", "author": "haboy52581", "createdAt": "2020-08-05T23:30:45Z", "path": "schema/proto3/neighbor.proto", "diffHunk": "@@ -0,0 +1,62 @@\n+/*\n+Copyright 2019 The Alcor Authors.\n+\n+Licensed under the Apache License, Version 2.0 (the \"License\");\n+        you may not use this file except in compliance with the License.\n+        You may obtain a copy of the License at\n+\n+        http://www.apache.org/licenses/LICENSE-2.0\n+\n+        Unless required by applicable law or agreed to in writing, software\n+        distributed under the License is distributed on an \"AS IS\" BASIS,\n+        WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+        See the License for the specific language governing permissions and\n+        limitations under the License.\n+*/\n+\n+syntax = \"proto3\";", "originalCommit": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MjA0Mg==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466062042", "bodyText": "do we need one called Id?", "author": "haboy52581", "createdAt": "2020-08-05T23:37:35Z", "path": "schema/proto3/dhcp.proto", "diffHunk": "@@ -27,10 +27,12 @@ message DHCPConfiguration {\n     uint32 format_version = 1;\n     uint32 revision_number = 2;\n \n-    string mac_address = 3;\n-    string ipv4_address = 4;\n-    string ipv6_address = 5;\n-    string port_host_name = 6; // for local DNS response\n+    string request_id = 3;", "originalCommit": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjA2MjI5Mw==", "url": "https://github.com/futurewei-cloud/alcor/pull/339#discussion_r466062293", "bodyText": "if we put neighbor into port as field, then we do NOT need NEIGHBORXXX type and logic to handle that", "author": "haboy52581", "createdAt": "2020-08-05T23:38:22Z", "path": "schema/proto3/common.proto", "diffHunk": "@@ -35,14 +37,9 @@ enum OperationType {\n     GET = 2;\n     DELETE = 3;\n     INFO = 4;\n-    NEIGHBOR_CREATE_UPDATE = 5;\n-    NEIGHBOR_GET = 6;\n-    NEIGHBOR_DELETE = 7;\n-    CREATE_UPDATE_GATEWAY = 8;\n-\n-    FINALIZE = 9;              // For Mizar only\n-    CREATE_UPDATE_SWITCH = 10; // For Mizar only\n-    CREATE_UPDATE_ROUTER = 11; // For Mizar only\n+    NEIGHBOR_CREATE_UPDATE = 5; // To be removed after using NeighborState", "originalCommit": "ce29a09a93f1bf2f411224c09b2faa7b56dc8241", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}