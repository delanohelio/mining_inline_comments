{"pr_number": 1298, "pr_title": "DBZ-1840 Re-instantiating pausing between readPending() calls without event", "pr_createdAt": "2020-03-02T16:44:12Z", "pr_url": "https://github.com/debezium/debezium/pull/1298", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyNzE0NA==", "url": "https://github.com/debezium/debezium/pull/1298#discussion_r386827144", "bodyText": "@gunnarmorling Lookign at the code I'd propose a small change in formatting.\nLet's extract stream.readPending to set a local variable messageProcessed and then chane the if statement to logic\nif (messageProcessed) {\n// add comment\n}\nelse {\n}\n\nI think it would improve reasoning about the code, WDYT?\nFunctionally I am fine with the change", "author": "jpechane", "createdAt": "2020-03-03T06:52:00Z", "path": "debezium-connector-postgres/src/main/java/io/debezium/connector/postgresql/PostgresStreamingChangeEventSource.java", "diffHunk": "@@ -119,21 +119,19 @@ public void execute(ChangeEventSourceContext context) throws InterruptedExceptio\n                 int noMessageIterations = 0;\n                 if (!stream.readPending(message -> {", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg1Nzg3NA==", "url": "https://github.com/debezium/debezium/pull/1298#discussion_r386857874", "bodyText": "Yes, absolutely. I had been contemplating the same, but refrained from doing so in order to keep the diff small. Will push another commit for this.", "author": "gunnarmorling", "createdAt": "2020-03-03T08:20:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyNzE0NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njg2MjcxOQ==", "url": "https://github.com/debezium/debezium/pull/1298#discussion_r386862719", "bodyText": "Done.", "author": "gunnarmorling", "createdAt": "2020-03-03T08:31:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjgyNzE0NA=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "35299d58d98edf648e9f26a683d588a64181d6dd", "url": "https://github.com/debezium/debezium/commit/35299d58d98edf648e9f26a683d588a64181d6dd", "message": "DBZ-1840 Not passing null to replication message processor;\n\nNote this means to that WAL offsets cannot be acknowledged in cases\nwhere a null message is received from the server (e.g. wal2json for\nDDL events). But as we cannot tell apart null events from the server\nfrom readPending() simply having no events to read, the current\nlogic renders the pausing between two read calls without events\nobsolete, so that's the lesser evil", "committedDate": "2020-03-03T10:45:11Z", "type": "commit"}, {"oid": "35299d58d98edf648e9f26a683d588a64181d6dd", "url": "https://github.com/debezium/debezium/commit/35299d58d98edf648e9f26a683d588a64181d6dd", "message": "DBZ-1840 Not passing null to replication message processor;\n\nNote this means to that WAL offsets cannot be acknowledged in cases\nwhere a null message is received from the server (e.g. wal2json for\nDDL events). But as we cannot tell apart null events from the server\nfrom readPending() simply having no events to read, the current\nlogic renders the pausing between two read calls without events\nobsolete, so that's the lesser evil", "committedDate": "2020-03-03T10:45:11Z", "type": "forcePushed"}]}