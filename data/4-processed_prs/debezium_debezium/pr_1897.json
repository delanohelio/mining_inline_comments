{"pr_number": 1897, "pr_title": "DBZ-2628 Add missing privileges for Oracle LogMiner setup", "pr_createdAt": "2020-10-19T20:24:41Z", "pr_url": "https://github.com/debezium/debezium/pull/1897", "timeline": [{"oid": "cc36e11faffa876f0515e3d66cdce94341b51b12", "url": "https://github.com/debezium/debezium/commit/cc36e11faffa876f0515e3d66cdce94341b51b12", "message": "DBZ-2628 Add missing privileges for Oracle LogMiner setup", "committedDate": "2020-10-19T20:24:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMzM5NA==", "url": "https://github.com/debezium/debezium/pull/1897#discussion_r508313394", "bodyText": "Why does it need CREATE TABLE?", "author": "gunnarmorling", "createdAt": "2020-10-20T08:35:46Z", "path": "documentation/modules/ROOT/pages/connectors/oracle.adoc", "diffHunk": "@@ -219,6 +219,8 @@ GRANT SELECT ON V_$DATABASE to c##logminer CONTAINER=ALL;\n GRANT FLASHBACK ANY TABLE TO c##logminer CONTAINER=ALL;\n GRANT LOGMINING TO c##logminer CONTAINER=ALL;\n GRANT LOCK ANY TABLE TO c##logminer CONTAINER=ALL;\n+GRANT CREATE TABLE TO c##logminer CONTAINER=ALL;", "originalCommit": "cc36e11faffa876f0515e3d66cdce94341b51b12", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU1NTQzMQ==", "url": "https://github.com/debezium/debezium/pull/1897#discussion_r508555431", "bodyText": "The LogMiner implementation creates table LOG_MINING_AUDIT if it doesn't exist.  See SqlUtils.java.\nIf I interpret the comments from LogMinerHelper#getEndScn where that table is updated, it seems the connector uses this to flush the redo log writer.   I assume we'd prefer not to have this?  If so, I'll can open an issue and review what the impacts are if we remove this from the implementation.", "author": "Naros", "createdAt": "2020-10-20T14:26:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMzM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODU3NjM4Mg==", "url": "https://github.com/debezium/debezium/pull/1897#discussion_r508576382", "bodyText": "Yeah, so let's discuss with @AndreyIg about this, and if it's truly needed, this should be mentioned in the docs very clearly. So far, no connectors write back to the database (apart from Postgres heartbeat action queries), so this needs clear documentation.", "author": "gunnarmorling", "createdAt": "2020-10-20T14:50:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMzM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMzU1NDAyMA==", "url": "https://github.com/debezium/debezium/pull/1897#discussion_r513554020", "bodyText": "So after discussing with @AndreyIg, my intepretation of the comments were correct.  Essentially this mechanism is used to trigger Oracle to flush the redo write buffer to disk so that during the next log mining session, we get a full picture of what has happened.  I'll update the documentation in this PR so this is clearer if it isn't already.", "author": "Naros", "createdAt": "2020-10-28T15:47:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMzM5NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDk5NTQ0MQ==", "url": "https://github.com/debezium/debezium/pull/1897#discussion_r514995441", "bodyText": "Ok, thanks, makes sense. Feel free to merge it yourself then.", "author": "gunnarmorling", "createdAt": "2020-10-30T10:18:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODMxMzM5NA=="}], "type": "inlineReview"}]}