{"pr_number": 1788, "pr_title": "DBZ-2480 Initial commit of outbox event router SMT doc updated for 1.2", "pr_createdAt": "2020-09-05T14:10:28Z", "pr_url": "https://github.com/debezium/debezium/pull/1788", "timeline": [{"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQxMzY2MA==", "url": "https://github.com/debezium/debezium/pull/1788#discussion_r485413660", "bodyText": "The outbox pattern is a way for exchanging data between multiple (micro) services in a safe and reliable way, avoiding any inconsistencies between a services own internal state (as typically persisted in its database) and events sent to consuming services.", "author": "gunnarmorling", "createdAt": "2020-09-09T07:58:16Z", "path": "documentation/modules/ROOT/pages/configuration/outbox-event-router.adoc", "diffHunk": "@@ -9,26 +13,56 @@\n \n toc::[]\n \n+The outbox pattern is a way to ensure that related services that need the same data updates get those updates in a consistent manner. To implement the outbox pattern in a {prodname} application, configure a {prodname} connector to: ", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5MzQxMQ==", "url": "https://github.com/debezium/debezium/pull/1788#discussion_r485593411", "bodyText": "@gunnarmorling Is this correct:\nThe outbox pattern is a way to safely and reliably exchange data between multiple (micro) services. An outbox pattern implementation avoids inconsistencies between a service's internal state (as typically persisted in its database) and state in events consumed by services that need the same data.", "author": "TovaCohen", "createdAt": "2020-09-09T13:03:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQxMzY2MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYwMDI4Mg==", "url": "https://github.com/debezium/debezium/pull/1788#discussion_r485600282", "bodyText": "I updated the doc with my suggested paragraph. It is in the commit I just added to this PR. Let me know if that needs to change.", "author": "TovaCohen", "createdAt": "2020-09-09T13:13:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQxMzY2MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQyNTc2Mg==", "url": "https://github.com/debezium/debezium/pull/1788#discussion_r485425762", "bodyText": "Let's remove the reference to the Jira issue, it's not really needed in the docs.", "author": "gunnarmorling", "createdAt": "2020-09-09T08:18:58Z", "path": "documentation/modules/ROOT/pages/configuration/outbox-event-router.adoc", "diffHunk": "@@ -9,26 +13,56 @@\n \n toc::[]\n \n+The outbox pattern is a way to ensure that related services that need the same data updates get those updates in a consistent manner. To implement the outbox pattern in a {prodname} application, configure a {prodname} connector to: \n+\n+* Capture changes in an outbox table\n+* Apply the {prodname} `outbox.EventRouter` single message transformation (SMT)\n+\n+A {prodname} connector that is configured to apply the outbox SMT should capture changes in only an outbox table. A connector can capture changes in more than one outbox table only if each outbox table has the same structure.  \n+\n+ifdef::community[]\n [NOTE]\n ====\n-This single message transformation (SMT) is under active development right now, so the emitted message structure or other details may still change as development progresses.\n+The `outbox.EventRouter` SMT is under active development. The structure of the emitted message or other details might change as development progresses.\n ====\n+endif::community[]\n \n-[NOTE]\n+ifdef::product[]\n+[IMPORTANT]\n ====\n-This SMT does *not* support the MongoDB connector.\n+The {prodname} outbox event router SMT is a Technology Preview feature. Technology Preview features are not supported with Red Hat production service-level agreements (SLAs) and might not be functionally complete; therefore, Red Hat does not recommend implementing any Technology Preview features in production environments. This Technology Preview feature provides early access to upcoming product innovations, enabling you to test functionality and provide feedback during the development process. For more information about support scope, see link:https://access.redhat.com/support/offerings/techpreview/[Technology Preview Features Support Scope].\n ====\n+endif::product[]\n+\n+See link:https://debezium.io/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/[Reliable Microservices Data Exchange With the Outbox Pattern] to learn about why the outbox pattern is useful and how it works. \n \n-The Outbox Event Router SMT has the intent to provide out-of-the-box support for the Outbox Pattern.\n-For more information on why and how the Outbox Pattern is used please refer our blog post link:/blog/2019/02/19/reliable-microservices-data-exchange-with-the-outbox-pattern/[Reliable Microservices Data Exchange With the Outbox Pattern].\n+ifdef::community[]\n+For details about how {prodname} implements the outbox pattern, see {jira-url}/browse/DBZ-1169[Outbox SMT Design]. For an example that you can run, see the  link:https://github.com/debezium/debezium-examples/tree/master/outbox[outbox pattern demo], which is in the {prodname} examples repository. It includes an example of how to configure a {prodname} connector to run the `outbox.EventRouter` SMT. ", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5NjkyNA==", "url": "https://github.com/debezium/debezium/pull/1788#discussion_r485596924", "bodyText": "Done in the next commit.", "author": "TovaCohen", "createdAt": "2020-09-09T13:08:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTQyNTc2Mg=="}], "type": "inlineReview"}, {"oid": "f357332946efd9452d57c8a7e1c14776539675b9", "url": "https://github.com/debezium/debezium/commit/f357332946efd9452d57c8a7e1c14776539675b9", "message": "DBZ-2480 Initial commit of outbox event router SMT doc updated for 1.2", "committedDate": "2020-09-09T12:56:09Z", "type": "commit"}, {"oid": "e46e01c162517de91902b371a96734d59c783ccc", "url": "https://github.com/debezium/debezium/commit/e46e01c162517de91902b371a96734d59c783ccc", "message": "DBZ-2480 Added that outbox tables must have some structure", "committedDate": "2020-09-09T12:56:09Z", "type": "commit"}, {"oid": "1e3da219795e65a246acd34d39850a5d2d74db66", "url": "https://github.com/debezium/debezium/commit/1e3da219795e65a246acd34d39850a5d2d74db66", "message": "DBZ-2480 update intro sentence and remove Jira reference", "committedDate": "2020-09-09T13:12:21Z", "type": "commit"}, {"oid": "1e3da219795e65a246acd34d39850a5d2d74db66", "url": "https://github.com/debezium/debezium/commit/1e3da219795e65a246acd34d39850a5d2d74db66", "message": "DBZ-2480 update intro sentence and remove Jira reference", "committedDate": "2020-09-09T13:12:21Z", "type": "forcePushed"}, {"oid": "bf80b882b1159da7a2fe23c079059d1daa25dbce", "url": "https://github.com/debezium/debezium/commit/bf80b882b1159da7a2fe23c079059d1daa25dbce", "message": "DBZ-2480 Replace `outbox.EventRouter` with plain text: outbox event router", "committedDate": "2020-09-09T13:22:02Z", "type": "commit"}]}