{"pr_number": 1687, "pr_title": "DBZ-2083 fix docs for Apicurio Avro converter", "pr_createdAt": "2020-07-09T12:07:26Z", "pr_url": "https://github.com/debezium/debezium/pull/1687", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4MjgzOQ==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452182839", "bodyText": "Worth adding a sentence that this is not needed when using the Debezium container image for Kafka Connect?", "author": "gunnarmorling", "createdAt": "2020-07-09T12:33:22Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -92,7 +92,7 @@ ifdef::product[]\n endif::product[]\n \n ifdef::community[]\n-. Install the Avro converter from link:https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/{apicurio-version}/apicurio-registry-distro-connect-converter-{apicurio-version}-converter.tar.gz[the installation package] into Kafka Connect's _libs_ directory or directly into a plug-in directory.\n+. Install the Avro converter from link:https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/{apicurio-version}/apicurio-registry-distro-connect-converter-{apicurio-version}-converter.tar.gz[the installation package] into into a plug-in directory.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5NTk2OQ==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452195969", "bodyText": "yep. and into into", "author": "rk3rn3r", "createdAt": "2020-07-09T12:55:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4MjgzOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4NDA0Ng==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452184046", "bodyText": "This seems not right to remove. Note the Debezium container image is only used for community, this is not used by the downstream product. Instead, the AMQ Streams image for Kafka Connect is used there, and procedure for that one still is the same as before at this point.", "author": "gunnarmorling", "createdAt": "2020-07-09T12:35:30Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -190,55 +169,9 @@ ifdef::product[]\n * Setting up AMQ Streams storage\n * Installing {registry}\n \n-. Extract the {prodname} connector archive(s) to create a directory structure for the connector plug-in(s). If you downloaded and extracted the archive for each {prodname} connector, the structure looks like this: ", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNDk3Mw==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452214973", "bodyText": "That's not so nice for the downstream users. That means a longer way for downstream product users then. I hope we can push the change downstream soon then. \ud83e\udd1e\nI reverted the whole product docs section now.", "author": "rk3rn3r", "createdAt": "2020-07-09T13:25:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4NDA0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjkwMTc1Ng==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452901756", "bodyText": "Yes, we hope to improve this, but it entails some subtle complexities. Remind me, and I'll explain it in the next call.", "author": "gunnarmorling", "createdAt": "2020-07-10T15:05:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4NDA0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4NDM1OQ==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452184359", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . Run {prodname} image, configuring it to provide the Avro converter by enabling Apicurio via `ENABLE_APICURIO_CONVERTERS=true` environment variable:\n          \n          \n            \n            . Run the {prodname} container image for Kafka Connect, configuring it to provide the Avro converter by enabling Apicurio via `ENABLE_APICURIO_CONVERTERS=true` environment variable:", "author": "gunnarmorling", "createdAt": "2020-07-09T12:36:01Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -137,29 +137,7 @@ docker run -it --rm --name apicurio \\\n     -p 8080:8080 apicurio/apicurio-registry-mem:{apicurio-version}\n ----\n \n-. Build a {prodname} container image that contains the Avro converter:\n-+\n-.. Copy link:https://github.com/debezium/debezium-examples/blob/master/tutorial/debezium-with-apicurio/Dockerfile[`Dockerfile`] to a convenient location. This file has the following content: \n-+\n-[listing,subs=\"attributes+\",options=\"nowrap\"]\n-----\n-ARG DEBEZIUM_VERSION\n-FROM debezium/connect:$DEBEZIUM_VERSION\n-ENV KAFKA_CONNECT_DEBEZIUM_DIR=$KAFKA_CONNECT_PLUGINS_DIR/debezium-connector-mysql\n-ENV APICURIO_VERSION={apicurio-version}\n-\n-RUN cd $KAFKA_CONNECT_DEBEZIUM_DIR &&\\\n-    curl https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/$APICURIO_VERSION/apicurio-registry-distro-connect-converter-$APICURIO_VERSION-converter.tar.gz | tar xzv\n-----\n-\n-.. Run the following command: \n-+\n-[source,subs=\"attributes+\"]\n-----\n-docker build --build-arg DEBEZIUM_VERSION={debezium-docker-label} -t debezium/connect-apicurio:{debezium-docker-label} .\n-----\n-\n-. Run the newly built Kafka Connect image, configuring it so it uses the Avro converter:\n+. Run {prodname} image, configuring it to provide the Avro converter by enabling Apicurio via `ENABLE_APICURIO_CONVERTERS=true` environment variable:", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4OTg3Ng==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452189876", "bodyText": "Whoops, good catch. There's also a \"serializaion\" typo a few lines before you could fix.", "author": "gunnarmorling", "createdAt": "2020-07-09T12:45:24Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -121,7 +121,7 @@ In your environment, you might want to use a provided {prodname} container to de\n \n .Prerequisites\n \n-* You have the cluster administrator access to an OpenShift cluster.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxNzUwNQ==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452217505", "bodyText": "Done", "author": "rk3rn3r", "createdAt": "2020-07-09T13:29:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE4OTg3Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5MDQ5Mg==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452190492", "bodyText": "So that's the case already for the upstream image. Also the sentence \"In this procedure, you build a custom Kafka Connect container image for Debezium\" before doesn't make sense any longer.", "author": "gunnarmorling", "createdAt": "2020-07-09T12:46:30Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -121,7 +121,7 @@ In your environment, you might want to use a provided {prodname} container to de\n \n .Prerequisites\n \n-* You have the cluster administrator access to an OpenShift cluster.\n+* You have Docker installed and rights to create and manage containers.\n * You downloaded the {prodname} connector plug-in(s) that you want to deploy with Avro serialization.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjIxODU3OA==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452218578", "bodyText": "The sentence applies for the product, but not the community version, right?", "author": "rk3rn3r", "createdAt": "2020-07-09T13:30:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE5MDQ5Mg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg5OTcyNw==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r452899727", "bodyText": "s/Docker image/container image/", "author": "gunnarmorling", "createdAt": "2020-07-10T15:01:56Z", "path": "documentation/modules/ROOT/pages/configuration/avro.adoc", "diffHunk": "@@ -92,7 +92,7 @@ ifdef::product[]\n endif::product[]\n \n ifdef::community[]\n-. Install the Avro converter from link:https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/{apicurio-version}/apicurio-registry-distro-connect-converter-{apicurio-version}-converter.tar.gz[the installation package] into Kafka Connect's _libs_ directory or directly into a plug-in directory.\n+. Install the Avro converter from link:https://repo1.maven.org/maven2/io/apicurio/apicurio-registry-distro-connect-converter/{apicurio-version}/apicurio-registry-distro-connect-converter-{apicurio-version}-converter.tar.gz[the installation package] into a plug-in directory. This is not needed when using the link:https://hub.docker.com/r/debezium/connect[Debezium Connect Docker image], see details in <<deploying-with-debezium-containers>>.", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzU3NTgyMQ==", "url": "https://github.com/debezium/debezium/pull/1687#discussion_r453575821", "bodyText": "\u2714\ufe0f", "author": "rk3rn3r", "createdAt": "2020-07-13T11:13:49Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg5OTcyNw=="}], "type": "inlineReview"}, {"oid": "098010be0392505a08a6d2328bf4e368df7271cd", "url": "https://github.com/debezium/debezium/commit/098010be0392505a08a6d2328bf4e368df7271cd", "message": "DBZ-2083 fix docs for Apicurio Avro converter\n* apply PR comment, co-authored-by: Gunnar Morling\n* apply PR comments and cleanup", "committedDate": "2020-07-13T11:13:05Z", "type": "commit"}, {"oid": "098010be0392505a08a6d2328bf4e368df7271cd", "url": "https://github.com/debezium/debezium/commit/098010be0392505a08a6d2328bf4e368df7271cd", "message": "DBZ-2083 fix docs for Apicurio Avro converter\n* apply PR comment, co-authored-by: Gunnar Morling\n* apply PR comments and cleanup", "committedDate": "2020-07-13T11:13:05Z", "type": "forcePushed"}]}