{"pr_number": 1726, "pr_title": "DBZ-2394 Added Azure PostgreSQL guidance", "pr_createdAt": "2020-07-31T06:49:45Z", "pr_url": "https://github.com/debezium/debezium/pull/1726", "timeline": [{"oid": "3d07ee0a816521c9b0341c5047a9d610406d1075", "url": "https://github.com/debezium/debezium/commit/3d07ee0a816521c9b0341c5047a9d610406d1075", "message": "DBZ-2394 Added Azure PostgreSQL guidance", "committedDate": "2020-07-31T06:47:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NzU1NA==", "url": "https://github.com/debezium/debezium/pull/1726#discussion_r463447554", "bodyText": "Debezium does not support the test_decoding plug-in. And let's remove the referrer query param (here and  below) :)", "author": "gunnarmorling", "createdAt": "2020-07-31T07:23:10Z", "path": "documentation/modules/ROOT/pages/connectors/postgresql.adoc", "diffHunk": "@@ -145,6 +145,27 @@ As of January 2019, the following Postgres versions on RDS come with an up-to-da\n * Postgres 11: any version\n ====\n \n+[[postgresql-on-azure]]\n+=== PostgreSQL on Azure\n+\n+It is possible to use Debezium with\u202f(https://docs.microsoft.com/azure/postgresql/?WT.mc_id=debezium-docs-abhishgu)[Azure Database for PostgreSQL]\u202fthat\u202fsupports `wal2json`,\u202f`pgoutput`\u202fand\u202f`test_decoding` output plugins.", "originalCommit": "3d07ee0a816521c9b0341c5047a9d610406d1075", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU0MzI0NQ==", "url": "https://github.com/debezium/debezium/pull/1726#discussion_r463543245", "bodyText": "updated the doc, removed referrer params", "author": "abhirockzz", "createdAt": "2020-07-31T10:52:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0NzU1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0OTU4OQ==", "url": "https://github.com/debezium/debezium/pull/1726#discussion_r463449589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If you're using the `pgoutput` plugin with `all_tables` value for the (https://debezium.io/documentation/reference/1.2/connectors/postgresql.html#postgresql-publication-autocreate-mode)[`publication.autocreate.mode`], please ensure that you create the publication up-front for the *specific* table(s) that you want to configure for change data capture. If the publication is not found, the connector will try to create one using\u202f`CREATE PUBLICATION <publication_name> FOR ALL TABLES;`\u202fwhich will fail due to lack of permissions. \n          \n          \n            \n            If you're using the `pgoutput` plugin with `all_tables` value for the (link:/#postgresql-publication-autocreate-mode)[`publication.autocreate.mode`], please ensure that you create the publication up-front for the *specific* table(s) that you want to configure for change data capture. If the publication is not found, the connector will try to create one using\u202f`CREATE PUBLICATION <publication_name> FOR ALL TABLES;`\u202fwhich will fail due to lack of permissions. \n          \n      \n    \n    \n  \n\nI'd say let's suggest to use \"filtered\" preferably, and that otherwise the publication must be created upfront, i.e. \"all_tables\" won't be able to create the ALL TABLES publication.", "author": "gunnarmorling", "createdAt": "2020-07-31T07:27:58Z", "path": "documentation/modules/ROOT/pages/connectors/postgresql.adoc", "diffHunk": "@@ -145,6 +145,27 @@ As of January 2019, the following Postgres versions on RDS come with an up-to-da\n * Postgres 11: any version\n ====\n \n+[[postgresql-on-azure]]\n+=== PostgreSQL on Azure\n+\n+It is possible to use Debezium with\u202f(https://docs.microsoft.com/azure/postgresql/?WT.mc_id=debezium-docs-abhishgu)[Azure Database for PostgreSQL]\u202fthat\u202fsupports `wal2json`,\u202f`pgoutput`\u202fand\u202f`test_decoding` output plugins.\n+\n+You need to ensure that Azure replication support is set to\u202f`logical`. You can use the (https://docs.microsoft.com/azure/postgresql/concepts-logical?WT.mc_id=debezium-docs-abhishgu#using-azure-cli)[Azure CLI] or the (https://docs.microsoft.com/azure/postgresql/concepts-logical?WT.mc_id=debezium-docs-abhishgu#using-azure-portal)[Azure Portal] to configure this.\n+\n+For example, if you were to choose the Azure CLI, here are the (https://docs.microsoft.com/cli/azure/postgres/server?view=azure-cli-latest&WT.mc_id=debezium-docs-abhishgu)[`az postgres server`] commands which you will need to execute:\n+\n+```\n+az postgres server configuration set --resource-group mygroup --server-name myserver --name azure.replication_support --value logical\n+\n+az postgres server restart --resource-group mygroup --name myserver\n+```\n+\n+[IMPORTANT]\n+====\n+If you're using the `pgoutput` plugin with `all_tables` value for the (https://debezium.io/documentation/reference/1.2/connectors/postgresql.html#postgresql-publication-autocreate-mode)[`publication.autocreate.mode`], please ensure that you create the publication up-front for the *specific* table(s) that you want to configure for change data capture. If the publication is not found, the connector will try to create one using\u202f`CREATE PUBLICATION <publication_name> FOR ALL TABLES;`\u202fwhich will fail due to lack of permissions. ", "originalCommit": "3d07ee0a816521c9b0341c5047a9d610406d1075", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzU0MzMxMw==", "url": "https://github.com/debezium/debezium/pull/1726#discussion_r463543313", "bodyText": "updated doc", "author": "abhirockzz", "createdAt": "2020-07-31T10:53:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ0OTU4OQ=="}], "type": "inlineReview"}, {"oid": "f768c7a235837fe6aba568ff17b66bf4e18ecf2c", "url": "https://github.com/debezium/debezium/commit/f768c7a235837fe6aba568ff17b66bf4e18ecf2c", "message": "DBZ-2394 updated as per feedback", "committedDate": "2020-07-31T10:51:08Z", "type": "commit"}]}