{"pr_number": 1582, "pr_title": "DBZ-2176 Open transaction tests are more reliable", "pr_createdAt": "2020-06-09T20:06:19Z", "pr_url": "https://github.com/debezium/debezium/pull/1582", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzY5NDY5Ng==", "url": "https://github.com/debezium/debezium/pull/1582#discussion_r437694696", "bodyText": "Very nice to unify the two usages \ud83d\udc4d", "author": "gunnarmorling", "createdAt": "2020-06-09T20:21:13Z", "path": "debezium-connector-postgres/src/test/java/io/debezium/connector/postgresql/TestHelper.java", "diffHunk": "@@ -317,16 +321,33 @@ protected static void waitForDefaultReplicationSlotBeActive() {\n         }\n     }\n \n-    protected static void noTransactionActive() throws SQLException {\n+    protected static void assertNoOpenTransactions() throws SQLException {", "originalCommit": null, "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "961a754549e7dae9ce018d5aa894e9f079bcd7f3", "url": "https://github.com/debezium/debezium/commit/961a754549e7dae9ce018d5aa894e9f079bcd7f3", "message": "DBZ-2176 Open transaction test are more reliable\n\nChecking pg_stat_activity for transactions with a state of \"idle in transaction\"\nshould be more reliable to find open abandoned transaction than looking for\na non-null backend_xmin. For example, an autovaccum process will have a\nbackend_xmin but will not have a stat of \"idle in transaction\"", "committedDate": "2020-06-11T12:33:52Z", "type": "commit"}, {"oid": "961a754549e7dae9ce018d5aa894e9f079bcd7f3", "url": "https://github.com/debezium/debezium/commit/961a754549e7dae9ce018d5aa894e9f079bcd7f3", "message": "DBZ-2176 Open transaction test are more reliable\n\nChecking pg_stat_activity for transactions with a state of \"idle in transaction\"\nshould be more reliable to find open abandoned transaction than looking for\na non-null backend_xmin. For example, an autovaccum process will have a\nbackend_xmin but will not have a stat of \"idle in transaction\"", "committedDate": "2020-06-11T12:33:52Z", "type": "forcePushed"}]}