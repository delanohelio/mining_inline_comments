{"pr_number": 1580, "pr_title": "DBZ-2152 Fix test failure", "pr_createdAt": "2020-06-09T14:55:24Z", "pr_url": "https://github.com/debezium/debezium/pull/1580", "timeline": [{"oid": "53c6141ea4df67db47dd0b333c61282135853e20", "url": "https://github.com/debezium/debezium/commit/53c6141ea4df67db47dd0b333c61282135853e20", "message": "DBZ-2152 Fix test failure", "committedDate": "2020-06-09T14:54:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxMzMyOQ==", "url": "https://github.com/debezium/debezium/pull/1580#discussion_r437513329", "bodyText": "Do we have anything to add to the change notes here? Changed assertions always raise an alert for me \ud83d\udea8 ;) That said, why was is a struct before?", "author": "gunnarmorling", "createdAt": "2020-06-09T15:20:12Z", "path": "debezium-core/src/test/java/io/debezium/transforms/outbox/EventRouterTest.java", "diffHunk": "@@ -799,9 +799,8 @@ public void canPassBinaryMessage() {\n         assertThat(eventRouted).isNotNull();\n         assertThat(eventRouted.keySchema().type()).isEqualTo(Schema.Type.STRING);\n         assertThat(eventRouted.key()).isEqualTo(key);\n-        assertThat(eventRouted.valueSchema().type()).isEqualTo(Schema.Type.STRUCT);\n-        Struct valuePassed = (Struct) eventRouted.value();\n-        assertThat(valuePassed.get(\"payload\")).isEqualTo(value);\n+        assertThat(eventRouted.valueSchema().type()).isEqualTo(Schema.Type.BYTES);", "originalCommit": "53c6141ea4df67db47dd0b333c61282135853e20", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxNTU5Ng==", "url": "https://github.com/debezium/debezium/pull/1580#discussion_r437515596", "bodyText": "@gunnarmorling I am sorry but I took a liberty and merged. The changes are in the test code introduced in DBZ-2152 and was obviously copy and past of the original one", "author": "jpechane", "createdAt": "2020-06-09T15:21:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxMzMyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxNzI3OQ==", "url": "https://github.com/debezium/debezium/pull/1580#discussion_r437517279", "bodyText": "Ah, ok, so it was no existing assert. Yeah, all cool then. Thx!", "author": "gunnarmorling", "createdAt": "2020-06-09T15:23:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxMzMyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MjA4OQ==", "url": "https://github.com/debezium/debezium/pull/1580#discussion_r437552089", "bodyText": "What I find odd here is that the original PR with this test code passed Travis, so I didn't bother to run it locally (shame on me) to verify before rebasing & merging.  I understand why the test fails on master after the merging but why not prior during the PR phase is still weird.", "author": "Naros", "createdAt": "2020-06-09T16:11:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUxMzMyOQ=="}], "type": "inlineReview"}]}