{"pr_number": 1690, "pr_title": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent", "pr_createdAt": "2020-07-09T21:04:26Z", "pr_url": "https://github.com/debezium/debezium/pull/1690", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxMDU4Mg==", "url": "https://github.com/debezium/debezium/pull/1690#discussion_r452610582", "bodyText": "Please replace System.out calls", "author": "jpechane", "createdAt": "2020-07-10T04:03:01Z", "path": "debezium-connector-sqlserver/src/test/java/io/debezium/connector/sqlserver/SqlServerConnectorIT.java", "diffHunk": "@@ -228,16 +231,23 @@ public void readOnlyApplicationIntent() throws Exception {\n         // Verify that multiple subsequent transactions are used in streaming phase with read-only intent\n         try (final SqlServerConnection admin = TestHelper.adminConnection()) {\n             final Set<Long> txIds = new HashSet<>();\n-            Awaitility.await().atMost(TestHelper.waitTimeForRecords() * 5, TimeUnit.SECONDS).pollInterval(100, TimeUnit.MILLISECONDS).until(() -> {\n-                admin.query(\n-                        \"SELECT (SELECT transaction_id FROM sys.dm_tran_session_transactions AS t WHERE s.session_id=t.session_id) FROM sys.dm_exec_sessions AS s WHERE program_name='\"\n-                                + appId + \"'\",\n-                        rs -> {\n-                            rs.next();\n-                            txIds.add(rs.getLong(1));\n-                        });\n-                return txIds.size() > 2;\n-            });\n+            try {\n+                Awaitility.await().atMost(TestHelper.waitTimeForRecords() * 5, TimeUnit.SECONDS).pollInterval(100, TimeUnit.MILLISECONDS).until(() -> {\n+                    admin.query(\n+                            \"SELECT (SELECT transaction_id FROM sys.dm_tran_session_transactions AS t WHERE s.session_id=t.session_id) FROM sys.dm_exec_sessions AS s WHERE program_name='\"\n+                                    + appId + \"'\",\n+                            rs -> {\n+                                rs.next();\n+                                txIds.add(rs.getLong(1));\n+                            });\n+                    return txIds.size() > 2;\n+                });\n+            }\n+            catch (ConditionTimeoutException e) {\n+                System.out.println(\"Transaction Ids: \" + txIds);", "originalCommit": null, "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjg1NzE5Nw==", "url": "https://github.com/debezium/debezium/pull/1690#discussion_r452857197", "bodyText": "My apologies, was too quick to push.  Fixed & only the applicable changes are now in the test case.", "author": "Naros", "createdAt": "2020-07-10T13:52:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjYxMDU4Mg=="}], "type": "inlineReview"}, {"oid": null, "url": null, "message": null, "committedDate": null, "type": "forcePushed"}, {"oid": "9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "url": "https://github.com/debezium/debezium/commit/9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "message": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent", "committedDate": "2020-07-10T13:51:35Z", "type": "commit"}, {"oid": "9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "url": "https://github.com/debezium/debezium/commit/9a296eeaeb04b8118ef2bab2004b7434ae6f1ba6", "message": "DBZ-2325 Fix test failure - SqlServerConnectorIT#readOnlyApplicationIntent", "committedDate": "2020-07-10T13:51:35Z", "type": "forcePushed"}]}