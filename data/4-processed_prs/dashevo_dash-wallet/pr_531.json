{"pr_number": 531, "pr_title": "NMA-420 | Profile Picture | Image Cropper", "pr_createdAt": "2020-10-21T23:49:30Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/531", "timeline": [{"oid": "17ae8048707e20a8e07667c8c2e5918fb256645d", "url": "https://github.com/dashevo/dash-wallet/commit/17ae8048707e20a8e07667c8c2e5918fb256645d", "message": "Add picture selection and save the path", "committedDate": "2020-10-13T02:11:30Z", "type": "commit"}, {"oid": "1dfcb0ff7df947c473ce427fa90384cc2f7c203f", "url": "https://github.com/dashevo/dash-wallet/commit/1dfcb0ff7df947c473ce427fa90384cc2f7c203f", "message": "close the choose dialog after clicking, save the taken picture", "committedDate": "2020-10-13T21:19:53Z", "type": "commit"}, {"oid": "649f0091a5dc9d8caaf4046096c9d15993998ff3", "url": "https://github.com/dashevo/dash-wallet/commit/649f0091a5dc9d8caaf4046096c9d15993998ff3", "message": "Configuration: add .apply()", "committedDate": "2020-10-14T01:55:06Z", "type": "commit"}, {"oid": "533ae5cdc9a49614dc377f59e2e4e342def31cbe", "url": "https://github.com/dashevo/dash-wallet/commit/533ae5cdc9a49614dc377f59e2e4e342def31cbe", "message": "Fixed the crash when taking picture on KitKat. (#529)\n\nImprove the way of storing profile picture in the app", "committedDate": "2020-10-15T23:14:03Z", "type": "commit"}, {"oid": "4de474d38ec3508ca8d75c8c837cbe0a6c6a6189", "url": "https://github.com/dashevo/dash-wallet/commit/4de474d38ec3508ca8d75c8c837cbe0a6c6a6189", "message": "Fix permissions bug with taking a picture", "committedDate": "2020-10-15T23:15:18Z", "type": "commit"}, {"oid": "d006090e401bdbba812adc882667cd4352a2bbae", "url": "https://github.com/dashevo/dash-wallet/commit/d006090e401bdbba812adc882667cd4352a2bbae", "message": "remove unused code", "committedDate": "2020-10-15T23:20:57Z", "type": "commit"}, {"oid": "9e77c31f5a7ea1432d9c51977401e5dbdee9e8c9", "url": "https://github.com/dashevo/dash-wallet/commit/9e77c31f5a7ea1432d9c51977401e5dbdee9e8c9", "message": "PlatformRepo: Only update the local copy of a Profile if it was updated on Platform", "committedDate": "2020-10-19T15:15:13Z", "type": "commit"}, {"oid": "206c8d1fd6aee934a93541071dbfbd893a4c6004", "url": "https://github.com/dashevo/dash-wallet/commit/206c8d1fd6aee934a93541071dbfbd893a4c6004", "message": "rename gerFileUri to getFileUri", "committedDate": "2020-10-21T13:41:25Z", "type": "commit"}, {"oid": "e061038cde8c5f979e6e5d87d2307b2088bd543e", "url": "https://github.com/dashevo/dash-wallet/commit/e061038cde8c5f979e6e5d87d2307b2088bd543e", "message": "Added TouchImageView lib.", "committedDate": "2020-10-21T18:34:24Z", "type": "commit"}, {"oid": "826373c603b5fae63b7d3a30b19fe5ce84995592", "url": "https://github.com/dashevo/dash-wallet/commit/826373c603b5fae63b7d3a30b19fe5ce84995592", "message": "Showing obtained image", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "717400f3f76b1e6d2d4352744983ae1567287c3c", "url": "https://github.com/dashevo/dash-wallet/commit/717400f3f76b1e6d2d4352744983ae1567287c3c", "message": "Inital Cropping with blurred background", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "bd4309e4ae228b7bcf69dfa9e4805913d7ab4645", "url": "https://github.com/dashevo/dash-wallet/commit/bd4309e4ae228b7bcf69dfa9e4805913d7ab4645", "message": "Adjustments to zoom and positioning", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "3411c83aa30eca64bf53cecd9c6a0c2683fbea3d", "url": "https://github.com/dashevo/dash-wallet/commit/3411c83aa30eca64bf53cecd9c6a0c2683fbea3d", "message": "Code cleanup", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "a9f0ff845e7df2ecbe0def6d41866cab46676ece", "url": "https://github.com/dashevo/dash-wallet/commit/a9f0ff845e7df2ecbe0def6d41866cab46676ece", "message": "using fitCenter as scale type", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "da72d2ed558bff668674b3f03d4567e9c68f4984", "url": "https://github.com/dashevo/dash-wallet/commit/da72d2ed558bff668674b3f03d4567e9c68f4984", "message": "Crop center background", "committedDate": "2020-10-21T19:01:39Z", "type": "commit"}, {"oid": "92a6c5ffe706c0798c94759a2575d56036fe0257", "url": "https://github.com/dashevo/dash-wallet/commit/92a6c5ffe706c0798c94759a2575d56036fe0257", "message": "Setting initial zoom", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "8ce92b38b2cc80fcb6a72e8d95edfbfd30dd3825", "url": "https://github.com/dashevo/dash-wallet/commit/8ce92b38b2cc80fcb6a72e8d95edfbfd30dd3825", "message": "Separated imageviews with different concerns", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "ab0f3dea149906fdb6f53e5a6b83640388c2831e", "url": "https://github.com/dashevo/dash-wallet/commit/ab0f3dea149906fdb6f53e5a6b83640388c2831e", "message": "Temp margin", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "5d3bf69430e12550280899eef15d3ff20e797afd", "url": "https://github.com/dashevo/dash-wallet/commit/5d3bf69430e12550280899eef15d3ff20e797afd", "message": "Code for center cropping is not needed anymore", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "df14726ddabc36db510d60b8534b8d7bd7ee9de7", "url": "https://github.com/dashevo/dash-wallet/commit/df14726ddabc36db510d60b8534b8d7bd7ee9de7", "message": "Code cleanup", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "9abb4dbecbd623c565fb041578946b3a9ef26591", "url": "https://github.com/dashevo/dash-wallet/commit/9abb4dbecbd623c565fb041578946b3a9ef26591", "message": "Center Crop in Blurred background", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "672ea14343fe47246cdcc9c4ab2ef285088cd849", "url": "https://github.com/dashevo/dash-wallet/commit/672ea14343fe47246cdcc9c4ab2ef285088cd849", "message": "Completing layout", "committedDate": "2020-10-21T19:01:40Z", "type": "commit"}, {"oid": "b0b9ce7d637081a44061c07d0e9fa568126b9b5d", "url": "https://github.com/dashevo/dash-wallet/commit/b0b9ce7d637081a44061c07d0e9fa568126b9b5d", "message": "Pulling changes from choose image branch", "committedDate": "2020-10-21T19:03:46Z", "type": "commit"}, {"oid": "3c6885142785a17ac108d5e8009e4f27863f8973", "url": "https://github.com/dashevo/dash-wallet/commit/3c6885142785a17ac108d5e8009e4f27863f8973", "message": "Saving cropped image.", "committedDate": "2020-10-21T19:05:52Z", "type": "commit"}, {"oid": "aea03b3f570ced3c20f433ba96e243a14318095c", "url": "https://github.com/dashevo/dash-wallet/commit/aea03b3f570ced3c20f433ba96e243a14318095c", "message": "Saving image to profile pictrue path.", "committedDate": "2020-10-21T19:06:26Z", "type": "commit"}, {"oid": "fcc27d87d4b379be49437cdee0c40b6f2031863b", "url": "https://github.com/dashevo/dash-wallet/commit/fcc27d87d4b379be49437cdee0c40b6f2031863b", "message": "fixing conflict", "committedDate": "2020-10-21T19:11:57Z", "type": "commit"}, {"oid": "27fed4249cc442e73c3e077753628446c064fb5a", "url": "https://github.com/dashevo/dash-wallet/commit/27fed4249cc442e73c3e077753628446c064fb5a", "message": "Added error mesage", "committedDate": "2020-10-21T22:48:19Z", "type": "commit"}, {"oid": "e8449bd5b156173aea51e24f971de5dedd8c4b79", "url": "https://github.com/dashevo/dash-wallet/commit/e8449bd5b156173aea51e24f971de5dedd8c4b79", "message": "Reverting gradle.properties settings", "committedDate": "2020-10-21T22:51:34Z", "type": "commit"}, {"oid": "588b93cf35de0b463b0cc9b3d5b8cfdd210d75a3", "url": "https://github.com/dashevo/dash-wallet/commit/588b93cf35de0b463b0cc9b3d5b8cfdd210d75a3", "message": "Fixed bug when pressing cancel", "committedDate": "2020-10-21T23:44:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTk1ODczMg==", "url": "https://github.com/dashevo/dash-wallet/pull/531#discussion_r509958732", "bodyText": "@sambarboza it isn't a good idea to use serializable extras to share files between Activities. First because the Intent extras size is limited (https://www.neotechsoftware.com/blog/android-intent-size-limit) and second because it is slow.\nCouldn't we pass only the files URIs?", "author": "tomasz-ludek", "createdAt": "2020-10-22T08:03:19Z", "path": "wallet/src/de/schildbach/wallet/ui/dashpay/CropImageActivity.kt", "diffHunk": "@@ -0,0 +1,78 @@\n+package de.schildbach.wallet.ui.dashpay\n+\n+import android.app.Activity\n+import android.content.Context\n+import android.content.Intent\n+import android.graphics.drawable.Drawable\n+import android.os.Bundle\n+import android.widget.Toast\n+import androidx.appcompat.widget.AppCompatImageView\n+import com.bumptech.glide.Glide\n+import com.bumptech.glide.load.DataSource\n+import com.bumptech.glide.load.engine.GlideException\n+import com.bumptech.glide.request.RequestListener\n+import com.bumptech.glide.request.target.Target\n+import de.schildbach.wallet_test.R\n+import kotlinx.android.synthetic.main.activity_crop_image.*\n+import kotlinx.coroutines.CoroutineScope\n+import kotlinx.coroutines.Dispatchers\n+import kotlinx.coroutines.launch\n+import kotlinx.coroutines.withContext\n+import org.dash.wallet.common.InteractionAwareActivity\n+import java.io.File\n+\n+class CropImageActivity : InteractionAwareActivity() {\n+\n+    companion object {\n+        private const val TEMP_FILE = \"temp_file\"\n+        private const val DESTINATION_FILE = \"destination_file\"\n+\n+        fun createIntent(context: Context, tempFile: File, destinationFile: File): Intent {\n+            val intent = Intent(context, CropImageActivity::class.java)\n+            intent.putExtra(TEMP_FILE, tempFile)\n+            intent.putExtra(DESTINATION_FILE, destinationFile)", "originalCommit": "588b93cf35de0b463b0cc9b3d5b8cfdd210d75a3", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f50c365eaa189d6342ca9743fecd3253fc167309", "url": "https://github.com/dashevo/dash-wallet/commit/f50c365eaa189d6342ca9743fecd3253fc167309", "message": "Passing Uri to the crop activity", "committedDate": "2020-10-22T23:44:57Z", "type": "commit"}, {"oid": "07d1523b4b52d60c4e4d86009195cd524cfce2c9", "url": "https://github.com/dashevo/dash-wallet/commit/07d1523b4b52d60c4e4d86009195cd524cfce2c9", "message": "Merge with evonet-develop", "committedDate": "2020-10-23T20:38:30Z", "type": "commit"}, {"oid": "ec96a8a6c2c55264bbe3cec0005d43ffd5c131b0", "url": "https://github.com/dashevo/dash-wallet/commit/ec96a8a6c2c55264bbe3cec0005d43ffd5c131b0", "message": "Merge branch 'evonet-develop' into dashpay-image-cropper-rebased", "committedDate": "2020-10-23T21:08:12Z", "type": "commit"}, {"oid": "c4e15931e223591b2dd737755570f55b0315dcfc", "url": "https://github.com/dashevo/dash-wallet/commit/c4e15931e223591b2dd737755570f55b0315dcfc", "message": "remove duplicate string from merging", "committedDate": "2020-10-23T21:34:00Z", "type": "commit"}]}