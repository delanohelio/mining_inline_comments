{"pr_number": 379, "pr_title": "NMA-303  Fund New Account | Confirm Transaction (UI)", "pr_createdAt": "2020-04-17T14:04:45Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/379", "timeline": [{"oid": "2dbbf1aee4ef8e5b7de6a15a836df1d06e3ad84e", "url": "https://github.com/dashevo/dash-wallet/commit/2dbbf1aee4ef8e5b7de6a15a836df1d06e3ad84e", "message": "Applied new designs", "committedDate": "2020-04-17T13:33:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM0MzU4MA==", "url": "https://github.com/dashevo/dash-wallet/pull/379#discussion_r413343580", "bodyText": "We can use a single string resource for this.", "author": "sambarboza", "createdAt": "2020-04-22T21:24:39Z", "path": "wallet/src/de/schildbach/wallet/ui/dashpay/NewAccountConfirmDialog.kt", "diffHunk": "@@ -58,27 +71,48 @@ class NewAccountConfirmDialog : BaseBottomSheetDialogFragment() {\n             dismiss()\n             sharedViewModel.clickConfirmButtonEvent.call(true)\n         }\n+    }\n+\n+    override fun onActivityCreated(savedInstanceState: Bundle?) {\n+        super.onActivityCreated(savedInstanceState)\n+        sharedViewModel = activity?.run {\n+            ViewModelProviders.of(this)[SingleActionSharedViewModel::class.java]\n+        } ?: throw IllegalStateException(\"Invalid Activity\")\n+        viewModel = ViewModelProviders.of(this).get(NewAccountConfirmDialogViewModel::class.java)\n+        viewModel.exchangeRateData.observe(viewLifecycleOwner, Observer {\n+            updateView()\n+        })\n+        updateView()\n+    }\n+\n+    private fun updateView() {\n+        val upgradeFee = Coin.valueOf(arguments!!.getLong(ARG_UPGRADE_FEE))\n+\n+        val upgradeFeeStr = MonetaryFormat.BTC.noCode().format(upgradeFee).toString()\n+        val fiatUpgradeFee = viewModel.exchangeRate?.coinToFiat(upgradeFee)\n+        // if the exchange rate is not available, then show \"Not Available\"\n+        val upgradeFeeFiatStr = if (fiatUpgradeFee != null) Constants.LOCAL_FORMAT.format(fiatUpgradeFee).toString() else getString(R.string.transaction_row_rate_not_available)\n+        val fiatSymbol = if (fiatUpgradeFee != null) GenericUtils.currencySymbol(fiatUpgradeFee.currencyCode) else \"\"\n \n-        val creatingCost = SpannableStringBuilder(\"0.01\").run {\n+        input_value.text = upgradeFeeStr\n+        fiat_symbol.text = upgradeFeeFiatStr\n+        fiat_value.text = fiatSymbol\n+\n+        val username = \"\u201c${arguments!!.getString(ARG_USERNAME)}\u201d\"\n+\n+        val usernameSpan = SpannableStringBuilder(username).run {\n             setSpan(StyleSpan(Typeface.BOLD), 0, length, 0)\n //            setSpan(RelativeSizeSpan(1.1f), 0, length, 0)\n             this\n         }\n-        val costWithDashSymbol = GenericUtils.insertDashSymbol(context, creatingCost, 0, true, true, 1.1f)\n         val builder = SpannableStringBuilder().run {", "originalCommit": "2dbbf1aee4ef8e5b7de6a15a836df1d06e3ad84e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzU3NTkyMg==", "url": "https://github.com/dashevo/dash-wallet/pull/379#discussion_r413575922", "bodyText": "Yea, I know. I split it to avoid issues in translations.\nI will reconsider this, maybe it isn't an issue.", "author": "tomasz-ludek", "createdAt": "2020-04-23T07:27:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzM0MzU4MA=="}], "type": "inlineReview"}, {"oid": "495d2096d0ba362e4350322c2e875842627e3e11", "url": "https://github.com/dashevo/dash-wallet/commit/495d2096d0ba362e4350322c2e875842627e3e11", "message": "Changed the way of resource string formatting", "committedDate": "2020-04-23T20:08:00Z", "type": "commit"}]}