{"pr_number": 523, "pr_title": "DashPay: Fix bug preventing viewing contacts", "pr_createdAt": "2020-10-06T23:44:47Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/523", "timeline": [{"oid": "25226b17b6fd735d88253e5863eb6b15bd90976a", "url": "https://github.com/dashevo/dash-wallet/commit/25226b17b6fd735d88253e5863eb6b15bd90976a", "message": "Fix bug preventing viewing contacts", "committedDate": "2020-10-06T23:41:28Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzE0Mw==", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500657143", "bodyText": "not sure why we need !! here, but the compiler complains about it.", "author": "HashEngineering", "createdAt": "2020-10-06T23:46:33Z", "path": "wallet/src/de/schildbach/wallet/ui/MainActivityViewModel.kt", "diffHunk": "@@ -40,7 +40,7 @@ class MainActivityViewModel(application: Application) : AndroidViewModel(applica\n     val canAffordIdentityCreationLiveData = CanAffordIdentityCreationLiveData(walletApplication)\n \n     val hasIdentity: Boolean\n-        get() = blockchainIdentity?.creationState == BlockchainIdentityData.CreationState.DONE\n+        get() = blockchainIdentity?.creationComplete!!", "originalCommit": "25226b17b6fd735d88253e5863eb6b15bd90976a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NDkxNQ==", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500854915", "bodyText": "This i due to the safe call operator ?. after blockchainIdentity. It would return null if blockchainIdentity is null. Your fix should be interpreted as (blockchainIdentity?.creationComplete)!! so that the not-null assertion operator !! refers to the whole result, not only to the creationComplete part.\nSafer solution, that will not cause NPE when getting the hasIdentity field for blockchainIdentity being null would be:\nval hasIdentity: Boolean\n    get() = blockchainIdentity?.creationComplete ?: false\n\nJava is more readable but less condensed:\nif (blockchainIdentity != null)\n    return blockchainIdentity.creationComplete\nelse\n    return false", "author": "tomasz-ludek", "createdAt": "2020-10-07T09:06:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzE0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTA5MTExOA==", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r501091118", "bodyText": "Thanks for the explanation.", "author": "HashEngineering", "createdAt": "2020-10-07T15:09:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzE0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzUyMw==", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500657523", "bodyText": "This getter could be used in other places instead of comparing to the value of DONE.", "author": "HashEngineering", "createdAt": "2020-10-06T23:47:39Z", "path": "wallet/src/de/schildbach/wallet/data/BlockchainIdentityBaseData.kt", "diffHunk": "@@ -30,4 +30,7 @@ data class BlockchainIdentityBaseData(val id: Int,\n         get() = creationState > BlockchainIdentityData.CreationState.NONE &&\n                 creationState < BlockchainIdentityData.CreationState.DONE &&\n                 creationStateErrorMessage == null\n+\n+    val creationComplete: Boolean\n+        get() = creationState >= BlockchainIdentityData.CreationState.DONE", "originalCommit": "25226b17b6fd735d88253e5863eb6b15bd90976a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDg1NTEyNg==", "url": "https://github.com/dashevo/dash-wallet/pull/523#discussion_r500855126", "bodyText": "Good idea!", "author": "tomasz-ludek", "createdAt": "2020-10-07T09:06:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMDY1NzUyMw=="}], "type": "inlineReview"}, {"oid": "e48dc19c02271bdfd8686b85cd4dd87737b42d65", "url": "https://github.com/dashevo/dash-wallet/commit/e48dc19c02271bdfd8686b85cd4dd87737b42d65", "message": "Avoid crash when getting the hasIdentity field for blockchainIdentity being null", "committedDate": "2020-10-07T10:37:08Z", "type": "commit"}]}