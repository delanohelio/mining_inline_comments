{"pr_number": 434, "pr_title": "Evonet search by username without profiles", "pr_createdAt": "2020-06-04T00:15:00Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/434", "timeline": [{"oid": "e569f1cf3670dbc6494d37642824f451d90ce8dc", "url": "https://github.com/dashevo/dash-wallet/commit/e569f1cf3670dbc6494d37642824f451d90ce8dc", "message": "User search layout", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "60eb3c26424413cf81583c2b77d0d983afbae636", "url": "https://github.com/dashevo/dash-wallet/commit/60eb3c26424413cf81583c2b77d0d983afbae636", "message": "Basic search working with layout animation", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "88fb867a7a809e76bb579729d014963c812cffc6", "url": "https://github.com/dashevo/dash-wallet/commit/88fb867a7a809e76bb579729d014963c812cffc6", "message": "UI Transitions and DashPayProfile inital layout", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "78d644644c2e99d0f224d89c66adf897f1db1c0b", "url": "https://github.com/dashevo/dash-wallet/commit/78d644644c2e99d0f224d89c66adf897f1db1c0b", "message": "Layout adjustments", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "4e535c4b66bc420b302be0a4770c52d79c71c79b", "url": "https://github.com/dashevo/dash-wallet/commit/4e535c4b66bc420b302be0a4770c52d79c71c79b", "message": "Added loading animation", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "a0ddf6705b7a554d9e93ab30f4d8d98f9957fc32", "url": "https://github.com/dashevo/dash-wallet/commit/a0ddf6705b7a554d9e93ab30f4d8d98f9957fc32", "message": "Fixed loading animation behavior", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "870c4509509091e352e66bd9aed919b4148c540b", "url": "https://github.com/dashevo/dash-wallet/commit/870c4509509091e352e66bd9aed919b4148c540b", "message": "Loading and No results icons centered", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "effb2ba83b0f78af6d45b7ec0060e5e31cce9118", "url": "https://github.com/dashevo/dash-wallet/commit/effb2ba83b0f78af6d45b7ec0060e5e31cce9118", "message": "Search behavior improvements", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "b6867cea8a7f2d6c6757cc938de317c372c60fec", "url": "https://github.com/dashevo/dash-wallet/commit/b6867cea8a7f2d6c6757cc938de317c372c60fec", "message": "Code cleanup.", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "14e6bcd23a6b8fb1cc3b78c67dc8686645ffe1d0", "url": "https://github.com/dashevo/dash-wallet/commit/14e6bcd23a6b8fb1cc3b78c67dc8686645ffe1d0", "message": "Adding dashPay profile data into current user search method", "committedDate": "2020-06-04T00:10:17Z", "type": "commit"}, {"oid": "6ce4e981e106464ce813f3ac9ebd33960f8cbdeb", "url": "https://github.com/dashevo/dash-wallet/commit/6ce4e981e106464ce813f3ac9ebd33960f8cbdeb", "message": "Removing profile filtering, using userId from db.", "committedDate": "2020-06-04T00:11:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2Mjc4NA==", "url": "https://github.com/dashevo/dash-wallet/pull/434#discussion_r434962784", "bodyText": "I agree with this change, since I don't think we need a userId argument since it will always be  the current userId of the user's blockchainIdentity.", "author": "HashEngineering", "createdAt": "2020-06-04T02:51:19Z", "path": "wallet/src/de/schildbach/wallet/ui/dashpay/PlatformRepo.kt", "diffHunk": "@@ -86,19 +85,23 @@ class PlatformRepo(val walletApplication: WalletApplication) {\n      * gets all the name documents for usernames starting with text\n      *\n      * @param text The beginning of a username to search for\n-     * @param userId The current userId for which to search contacts\n      * @return\n      */\n-    fun searchUsernames(text: String, userId: String): Resource<List<UsernameSearchResult>> {\n+    suspend fun searchUsernames(text: String): Resource<List<UsernameSearchResult>> {\n         return try {\n+            val blockchainIdentity = blockchainIdentityDataDaoAsync.load()\n+            //We don't check for nullity here because if it's null, it'll be thrown, caputred below\n+            //and sent as a Resource.error\n+            val userId = blockchainIdentity!!.creditFundingTxId!!.toStringBase58()", "originalCommit": "6ce4e981e106464ce813f3ac9ebd33960f8cbdeb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTUyNjQ4MA==", "url": "https://github.com/dashevo/dash-wallet/pull/434#discussion_r435526480", "bodyText": "creditFundingTxId should be creditBurnIdentityIdentifier", "author": "HashEngineering", "createdAt": "2020-06-04T20:21:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDk2Mjc4NA=="}], "type": "inlineReview"}, {"oid": "5a320f1b508fb6b5217b1d957be37d46eb4c5fdf", "url": "https://github.com/dashevo/dash-wallet/commit/5a320f1b508fb6b5217b1d957be37d46eb4c5fdf", "message": "Removing own user from search", "committedDate": "2020-06-04T21:00:59Z", "type": "commit"}]}