{"pr_number": 491, "pr_title": "Fix LockScreen Keyboard Placement", "pr_createdAt": "2020-08-26T18:58:14Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/491", "timeline": [{"oid": "5be8b405c65e173160bd64a48f84af1c222081ce", "url": "https://github.com/dashevo/dash-wallet/commit/5be8b405c65e173160bd64a48f84af1c222081ce", "message": "Added additional checks to the LockScreenActivity.hasNavBar() method in order to avoid NavBar overlapping the keyboard on emulator and some devices.\nBased on https://stackoverflow.com/questions/16092431/check-for-navigation-bar/23181183", "committedDate": "2020-08-26T16:53:39Z", "type": "commit"}, {"oid": "260956a8ef5a009053f784c3dc362c7dca3ddc00", "url": "https://github.com/dashevo/dash-wallet/commit/260956a8ef5a009053f784c3dc362c7dca3ddc00", "message": "Added additional checks to the LockScreenActivity.hasNavBar() method in order to avoid NavBar overlapping the keyboard on emulator and some devices.", "committedDate": "2020-08-26T16:54:04Z", "type": "commit"}, {"oid": "22533129eff3624f458c8d0f378462e67ae68415", "url": "https://github.com/dashevo/dash-wallet/commit/22533129eff3624f458c8d0f378462e67ae68415", "message": "Handle Krip Devices with hardware buttons", "committedDate": "2020-08-26T18:55:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ==", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r477520085", "bodyText": "These models were chosen based on device images from Google Play that seem to clearly show that these devices have hardware buttons for back, etc.\nOnly the K5 was tested.", "author": "HashEngineering", "createdAt": "2020-08-26T19:00:15Z", "path": "wallet/src/de/schildbach/wallet/ui/LockScreenActivity.kt", "diffHunk": "@@ -120,8 +124,26 @@ class LockScreenActivity : SendCoinsQrActivity() {\n     }\n \n     private fun hasNavBar(): Boolean {\n+        val tm: TelephonyManager = getSystemService(Context.TELEPHONY_SERVICE) as TelephonyManager\n+        // emulator\n+        if (\"Android\" == tm.networkOperatorName || Build.FINGERPRINT.startsWith(\"generic\")) {\n+            return true\n+        }\n         val id: Int = resources.getIdentifier(\"config_showNavigationBar\", \"bool\", \"android\")\n-        return id > 0 && resources.getBoolean(id)\n+\n+        // Krip devices seem to incorrectly report config_showNavigationBar\n+        val isKripDeviceWithoutNavBar = Build.BRAND == \"KRIP\" && when (Build.MODEL) {\n+            \"K5\", \"K5c\", \"K5b\", \"K4m\", \"KRIP_K4\", \"K6\" -> true\n+            else -> false\n+        }", "originalCommit": "22533129eff3624f458c8d0f378462e67ae68415", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE2NTU5OA==", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r480165598", "bodyText": "@HashEngineering,\nthis change broke it on my K600A device (it doesn't have the physical buttons):", "author": "tomasz-ludek", "createdAt": "2020-08-31T14:23:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDE3MDQ0MA==", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r480170440", "bodyText": "oh cool, glad you have the device to check it!", "author": "HashEngineering", "createdAt": "2020-08-31T14:31:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MDMyODg3Ng==", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r480328876", "bodyText": "Fixed here: 8c81b4b", "author": "HashEngineering", "createdAt": "2020-08-31T19:03:41Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTA1OTA4NA==", "url": "https://github.com/dashevo/dash-wallet/pull/491#discussion_r481059084", "bodyText": "it works \ud83d\udc4d", "author": "tomasz-ludek", "createdAt": "2020-09-01T11:11:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzUyMDA4NQ=="}], "type": "inlineReview"}, {"oid": "8c81b4b4cf65ee4c226e06e6355d9d8e52f4077a", "url": "https://github.com/dashevo/dash-wallet/commit/8c81b4b4cf65ee4c226e06e6355d9d8e52f4077a", "message": "Remove K6 from the list of Krip devices without on screen navbars", "committedDate": "2020-08-31T19:02:50Z", "type": "commit"}]}