{"pr_number": 524, "pr_title": "Update to SDK 29", "pr_createdAt": "2020-10-07T20:01:23Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/524", "timeline": [{"oid": "c20e5e45ad6ae8d495efb35af2f36342d56381d7", "url": "https://github.com/dashevo/dash-wallet/commit/c20e5e45ad6ae8d495efb35af2f36342d56381d7", "message": "Upgrade target and compile sdk versions to 29", "committedDate": "2020-10-07T19:52:15Z", "type": "commit"}, {"oid": "48614b6b17a3ad0e046884ca432658d5e7178231", "url": "https://github.com/dashevo/dash-wallet/commit/48614b6b17a3ad0e046884ca432658d5e7178231", "message": "Travis: Update to SDK 29 (including build tools)", "committedDate": "2020-10-07T19:54:04Z", "type": "commit"}, {"oid": "01573202b6992f168ec7272b528f3365d623d3c8", "url": "https://github.com/dashevo/dash-wallet/commit/01573202b6992f168ec7272b528f3365d623d3c8", "message": "ReceiveInfoView: use setPrimaryClip", "committedDate": "2020-10-07T19:54:31Z", "type": "commit"}, {"oid": "fa187202277949006611727b415112672f62cb1e", "url": "https://github.com/dashevo/dash-wallet/commit/fa187202277949006611727b415112672f62cb1e", "message": "Fix kotlin code in two places", "committedDate": "2020-10-07T19:55:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4MTM1OA==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r501281358", "bodyText": "not sure why this became necessary to add !!.  Is there a better way?\nperhaps getStringArray was changed to be able to return null.", "author": "HashEngineering", "createdAt": "2020-10-07T20:12:54Z", "path": "wallet/src/de/schildbach/wallet/ui/VerifySeedConfirmFragment.kt", "diffHunk": "@@ -61,7 +61,7 @@ class VerifySeedConfirmFragment : VerifySeedBaseFragment() {\n         view.findViewById<Toolbar>(R.id.toolbar).title = getString(R.string.verify)\n \n         if (arguments?.containsKey(\"seed\")!!) {\n-            words.addAll(arguments!!.getStringArray(\"seed\"))\n+            words.addAll(arguments!!.getStringArray(\"seed\")!!)", "originalCommit": "fa187202277949006611727b415112672f62cb1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU0NjU0MA==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r501546540", "bodyText": "They most likely added @Nullable annotation to the declaration of getStringArray(...) method.\nThe multiple not-null assertion operator !! looks a bit odd, however there is other thing which could be improved by a tiny refactoring and which be more meaningful.\nThe following approach:\narguments?.getStringArray(\"seed\")?.let {\n    words.addAll(it)\n} ?: throw IllegalStateException(\"This fragment needs to receive a String[] containing the recovery seed\")\n\nwill avoid throwing NPE instead of IllegalStateException whenever something is null.\nThe readability of this code is questionable but this is one of the downsides of using Kotlin...", "author": "tomasz-ludek", "createdAt": "2020-10-08T08:40:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4MTM1OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4MTcxNA==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r501281714", "bodyText": "Did something change with setPrimaryClip such that it cannot be implicitly called with primaryClip = x", "author": "HashEngineering", "createdAt": "2020-10-07T20:13:33Z", "path": "wallet/src/de/schildbach/wallet/ui/widget/ReceiveInfoView.kt", "diffHunk": "@@ -122,9 +122,9 @@ class ReceiveInfoView(context: Context, attrs: AttributeSet?) : ConstraintLayout\n         try {\n             val clipboardManager = context.getSystemService(Context.CLIPBOARD_SERVICE) as ClipboardManager\n             if (amount != null) {\n-                clipboardManager.primaryClip = ClipData.newPlainText(\"Dash payment request\", paymentRequestUri)\n+                clipboardManager.setPrimaryClip(ClipData.newPlainText(\"Dash payment request\", paymentRequestUri))\n             } else {\n-                clipboardManager.primaryClip = ClipData.newPlainText(\"Dash address\", address.toBase58())\n+                clipboardManager.setPrimaryClip(ClipData.newPlainText(\"Dash address\", address.toBase58()))", "originalCommit": "fa187202277949006611727b415112672f62cb1e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzkxMjgxMQ==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r503912811", "bodyText": "They added the @NonNull annotation to the ClipData parameter in ClipboardManager.setPrimaryClip(ClipData) method, whereas getPrimaryClip() is annotated as @Nullable and it cause Kotlin to fail with the use of property access syntax.\nHere is the full answer: https://stackoverflow.com/a/57128936/795721", "author": "tomasz-ludek", "createdAt": "2020-10-13T12:34:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTI4MTcxNA=="}], "type": "inlineReview"}, {"oid": "563af3808ba0c2ac992dae872885dffe6919feb9", "url": "https://github.com/dashevo/dash-wallet/commit/563af3808ba0c2ac992dae872885dffe6919feb9", "message": "Updating libraries to get the app working with API 19 after switching target SDK to 29", "committedDate": "2020-10-08T10:32:55Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTU1NTk1MA==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r501555950", "bodyText": "This could be replaced by:\narguments?.getStringArray(\"seed\")?.let { seed ->\n    val sb = StringBuilder(12)\n    seed.forEach {\n        sb.append(\"$it  \")\n    }\n    recoverySeedTextView.text = sb.toString().trim()            \n}", "author": "tomasz-ludek", "createdAt": "2020-10-08T08:55:25Z", "path": "wallet/src/de/schildbach/wallet/ui/VerifySeedWriteDownFragment.kt", "diffHunk": "@@ -52,7 +52,7 @@ class VerifySeedWriteDownFragment private constructor() : VerifySeedBaseFragment\n         view.findViewById<Toolbar>(R.id.toolbar).title = getString(R.string.verify_backup_wallet)\n \n         if (arguments?.containsKey(\"seed\")!!) {\n-            val seed = arguments!!.getStringArray(\"seed\")\n+            val seed = arguments!!.getStringArray(\"seed\")!!", "originalCommit": "fa187202277949006611727b415112672f62cb1e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTYyMTEyOA==", "url": "https://github.com/dashevo/dash-wallet/pull/524#discussion_r501621128", "bodyText": "This was required to build the app with gradle 6.1.1", "author": "tomasz-ludek", "createdAt": "2020-10-08T10:40:44Z", "path": "wallet/build.gradle", "diffHunk": "@@ -37,7 +37,6 @@ dependencies {\n     implementation 'androidx.preference:preference:1.1.0'\n     implementation 'androidx.constraintlayout:constraintlayout:2.0.0-beta4'\n     implementation \"org.dashj:dashj-core:$dashjVersion\"\n-    implementation 'com.google.protobuf:protobuf-java:3.4.0'", "originalCommit": "563af3808ba0c2ac992dae872885dffe6919feb9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "bae25525019b517092913fc7057af9eb895de170", "url": "https://github.com/dashevo/dash-wallet/commit/bae25525019b517092913fc7057af9eb895de170", "message": "Update libraries (#525)\n\n* Update of libraries reported by Android Studio as outdated excluding few causing problems on Android 4.4\r\n\r\n* Updated okhttp to the last version supporting Android 4.4", "committedDate": "2020-10-10T00:51:11Z", "type": "commit"}, {"oid": "4ea2e6c1e55df373df928b578aa481a394c36f2a", "url": "https://github.com/dashevo/dash-wallet/commit/4ea2e6c1e55df373df928b578aa481a394c36f2a", "message": "Use dashj 0.17.5-SNAPSHOT", "committedDate": "2020-10-10T03:42:06Z", "type": "commit"}, {"oid": "328b0953d39f5bdc9e3dbb4b56d50697322b939f", "url": "https://github.com/dashevo/dash-wallet/commit/328b0953d39f5bdc9e3dbb4b56d50697322b939f", "message": "Fix kotlin code in two places to make it nicer", "committedDate": "2020-10-10T03:42:45Z", "type": "commit"}, {"oid": "c6a2a2fa4dbabc3d36fe599f71cef3a9db8cdfec", "url": "https://github.com/dashevo/dash-wallet/commit/c6a2a2fa4dbabc3d36fe599f71cef3a9db8cdfec", "message": "Removed commented code and minor refactoring", "committedDate": "2020-10-13T12:36:51Z", "type": "commit"}]}