{"pr_number": 509, "pr_title": "Simplified tracking of the progress of send contact request operation", "pr_createdAt": "2020-09-14T10:53:08Z", "pr_url": "https://github.com/dashevo/dash-wallet/pull/509", "timeline": [{"oid": "4666c629b93d4d682a1384848c89e1df0eaf90b5", "url": "https://github.com/dashevo/dash-wallet/commit/4666c629b93d4d682a1384848c89e1df0eaf90b5", "message": "Simplified tracking of the progress of send contact request operation\nRemoved some debug code", "committedDate": "2020-09-14T10:51:49Z", "type": "commit"}, {"oid": "7551aafe14aa52f7f5c702da438cb108ce58d95a", "url": "https://github.com/dashevo/dash-wallet/commit/7551aafe14aa52f7f5c702da438cb108ce58d95a", "message": "No need to derive encryption key one more time", "committedDate": "2020-09-14T13:24:32Z", "type": "commit"}, {"oid": "2ab76bab14bc37888d68e7d17d189cca00229204", "url": "https://github.com/dashevo/dash-wallet/commit/2ab76bab14bc37888d68e7d17d189cca00229204", "message": "Improved exception handling", "committedDate": "2020-09-14T14:09:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM0MzEyOQ==", "url": "https://github.com/dashevo/dash-wallet/pull/509#discussion_r488343129", "bodyText": "good catch here!  I think I did a copy paste without realizing there was double work done on the encryptionKey.", "author": "HashEngineering", "createdAt": "2020-09-15T02:22:46Z", "path": "wallet/src/de/schildbach/wallet/ui/dashpay/PlatformRepo.kt", "diffHunk": "@@ -423,15 +423,10 @@ class PlatformRepo private constructor(val walletApplication: WalletApplication)\n \n             // add our receiving from this contact keychain if it doesn't exist\n             val contact = EvolutionContact(blockchainIdentity.uniqueIdString, toUserId)\n-            var encryptionKey: KeyParameter? = null\n \n             if (!walletApplication.wallet.hasReceivingKeyChain(contact)) {\n                 val contactIdentity = platform.identities.get(toUserId)\n-                if (walletApplication.wallet.isEncrypted) {\n-                    val password = securityGuard.retrievePassword()\n-                    encryptionKey = walletApplication.wallet!!.keyCrypter!!.deriveKey(password)\n-                }\n-                blockchainIdentity.addPaymentKeyChainFromContact(contactIdentity!!, cr!!, encryptionKey!!)\n+                blockchainIdentity.addPaymentKeyChainFromContact(contactIdentity!!, cr!!, encryptionKey)", "originalCommit": "7551aafe14aa52f7f5c702da438cb108ce58d95a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}