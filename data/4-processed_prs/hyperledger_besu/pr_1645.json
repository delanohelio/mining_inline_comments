{"pr_number": 1645, "pr_title": "EIP-2718 Typed Transaction Envelopes", "pr_createdAt": "2020-12-01T21:49:03Z", "pr_url": "https://github.com/hyperledger/besu/pull/1645", "timeline": [{"oid": "3a9190e38413d7a0781fef5c60a623327fbaf526", "url": "https://github.com/hyperledger/besu/commit/3a9190e38413d7a0781fef5c60a623327fbaf526", "message": "some encoder stuff\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-11-30T21:53:29Z", "type": "commit"}, {"oid": "dd01ffbe26e3d8da67f1e1b0d35c40c3be07fbd1", "url": "https://github.com/hyperledger/besu/commit/dd01ffbe26e3d8da67f1e1b0d35c40c3be07fbd1", "message": "streamline\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-11-30T21:56:59Z", "type": "commit"}, {"oid": "2d927d6a8f7d429de69779fc3e77a48e83ed19b2", "url": "https://github.com/hyperledger/besu/commit/2d927d6a8f7d429de69779fc3e77a48e83ed19b2", "message": "use block bodies with transactions\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T00:45:52Z", "type": "commit"}, {"oid": "020b961ac7d2679d07467f0b3fdb3dde5b6f04e9", "url": "https://github.com/hyperledger/besu/commit/020b961ac7d2679d07467f0b3fdb3dde5b6f04e9", "message": "Merge branch 'block-bodies-with-transactions' into eip-2718-easy-mode", "committedDate": "2020-12-01T00:54:40Z", "type": "commit"}, {"oid": "02cb926cfadc07c92f2c13a70e84fe3366c1580e", "url": "https://github.com/hyperledger/besu/commit/02cb926cfadc07c92f2c13a70e84fe3366c1580e", "message": "switching on first byte for decode transaction\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T13:52:46Z", "type": "commit"}, {"oid": "a1c72484d37d5c163948251d8f4e8e166bdd3a2f", "url": "https://github.com/hyperledger/besu/commit/a1c72484d37d5c163948251d8f4e8e166bdd3a2f", "message": "round trip block bodies message\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T15:21:24Z", "type": "commit"}, {"oid": "cd468aab825a9b5c18e8ec2ec0ea69b30f22795b", "url": "https://github.com/hyperledger/besu/commit/cd468aab825a9b5c18e8ec2ec0ea69b30f22795b", "message": "change writing to use raw bytes as well\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T15:33:08Z", "type": "commit"}, {"oid": "02e2e27715eb466ffc76016108d6119345ad7cc0", "url": "https://github.com/hyperledger/besu/commit/02e2e27715eb466ffc76016108d6119345ad7cc0", "message": "plugin hash\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T15:59:51Z", "type": "commit"}, {"oid": "fad7ccb125d4e50898dca083ed07fe71dec6da15", "url": "https://github.com/hyperledger/besu/commit/fad7ccb125d4e50898dca083ed07fe71dec6da15", "message": "spotless\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T16:05:47Z", "type": "commit"}, {"oid": "e937b2e8e66c5d838e2352b8f6a104b003862ce6", "url": "https://github.com/hyperledger/besu/commit/e937b2e8e66c5d838e2352b8f6a104b003862ce6", "message": "add type byte to 1559 transaction and fix deserialization\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T16:40:37Z", "type": "commit"}, {"oid": "d951d621491cfd7c732d971e9cf1d1e8b08aabf2", "url": "https://github.com/hyperledger/besu/commit/d951d621491cfd7c732d971e9cf1d1e8b08aabf2", "message": "more decoding fixes\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T16:55:14Z", "type": "commit"}, {"oid": "09e827b92b1c88a0b24ceadd3fd2bc6b62642ce5", "url": "https://github.com/hyperledger/besu/commit/09e827b92b1c88a0b24ceadd3fd2bc6b62642ce5", "message": "fix roundtrip issues in TransactionRLPEncoderTest and standardize encoder/decoder classes\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T17:10:05Z", "type": "commit"}, {"oid": "6e20ee05acfa00b521d03d9cc623db76967a7f45", "url": "https://github.com/hyperledger/besu/commit/6e20ee05acfa00b521d03d9cc623db76967a7f45", "message": "receipts\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:03:10Z", "type": "commit"}, {"oid": "e6964e7b4d31499c746cfc583f8235d287c8ab55", "url": "https://github.com/hyperledger/besu/commit/e6964e7b4d31499c746cfc583f8235d287c8ab55", "message": "undo readAsRLP(boolean lenient)\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:03:10Z", "type": "commit"}, {"oid": "7f3c59761e3e37ddedd25a45687169eba8bc24a4", "url": "https://github.com/hyperledger/besu/commit/7f3c59761e3e37ddedd25a45687169eba8bc24a4", "message": "standardize encoders and decoders\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:32:01Z", "type": "commit"}, {"oid": "6dbc810ee7f7737a6658d18390f46feb5323e914", "url": "https://github.com/hyperledger/besu/commit/6dbc810ee7f7737a6658d18390f46feb5323e914", "message": "streamline assertion\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:35:25Z", "type": "commit"}, {"oid": "9db200ede5d3be5a2d2e58b2e5c505ca6a47a7d9", "url": "https://github.com/hyperledger/besu/commit/9db200ede5d3be5a2d2e58b2e5c505ca6a47a7d9", "message": "placeholder comment\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:36:40Z", "type": "commit"}, {"oid": "950965333577ffe3cbca5bedd8de9d5838efe61e", "url": "https://github.com/hyperledger/besu/commit/950965333577ffe3cbca5bedd8de9d5838efe61e", "message": "fix test breakage from tx receipt factory interface signature change\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:42:25Z", "type": "commit"}, {"oid": "1357ddc21d8341e657f246d9d291ffd38c8beb18", "url": "https://github.com/hyperledger/besu/commit/1357ddc21d8341e657f246d9d291ffd38c8beb18", "message": "reinline\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T21:53:22Z", "type": "commit"}, {"oid": "2757b692dffedf132839bed10d3ddc6909b4ce90", "url": "https://github.com/hyperledger/besu/commit/2757b692dffedf132839bed10d3ddc6909b4ce90", "message": "Merge branch 'master' of github.com:hyperledger/besu into eip-2718-easy-mode", "committedDate": "2020-12-01T21:54:43Z", "type": "commit"}, {"oid": "c99fc3e9cb67ba7342c4dd2cdb08361545adbb67", "url": "https://github.com/hyperledger/besu/commit/c99fc3e9cb67ba7342c4dd2cdb08361545adbb67", "message": "expand legacy range\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-01T22:35:07Z", "type": "commit"}, {"oid": "7a6a109f0a03cd5f9a323a6aee377759af223eb9", "url": "https://github.com/hyperledger/besu/commit/7a6a109f0a03cd5f9a323a6aee377759af223eb9", "message": "Merge branch 'master' of github.com:hyperledger/besu into eip-2718-easy-mode", "committedDate": "2020-12-01T22:40:19Z", "type": "commit"}, {"oid": "27dd3c4ea6e4b25d59f64eb422892137fcefc0a3", "url": "https://github.com/hyperledger/besu/commit/27dd3c4ea6e4b25d59f64eb422892137fcefc0a3", "message": "Merge branch 'master' of github.com:hyperledger/besu into eip-2718-easy-mode", "committedDate": "2020-12-02T13:38:27Z", "type": "commit"}, {"oid": "3370fbc5a7a04e6830412d1398afb800c1338d82", "url": "https://github.com/hyperledger/besu/commit/3370fbc5a7a04e6830412d1398afb800c1338d82", "message": "move interfaces\n\nSigned-off-by: Ratan Rai Sur <ratan.r.sur@gmail.com>", "committedDate": "2020-12-02T13:41:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk2NjQ4Mw==", "url": "https://github.com/hyperledger/besu/pull/1645#discussion_r535966483", "bodyText": "Isn't there a better way to check the error type like a getCode() ? Because a simple modification of the message can lead to a change in behavior", "author": "matkt", "createdAt": "2020-12-04T09:41:58Z", "path": "ethereum/core/src/main/java/org/hyperledger/besu/ethereum/core/TransactionReceipt.java", "diffHunk": "@@ -179,7 +212,18 @@ public static TransactionReceipt readFrom(final RLPInput input) {\n    */\n   public static TransactionReceipt readFrom(\n       final RLPInput input, final boolean revertReasonAllowed) {\n-    input.enterList();\n+    TransactionType transactionType = TransactionType.FRONTIER;\n+    try {\n+      input.enterList();\n+    } catch (RLPException rlpe) {\n+      if (rlpe.getMessage().contains(\"Expected current item to be a list\")) {", "originalCommit": "3370fbc5a7a04e6830412d1398afb800c1338d82", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjA4NDg1NA==", "url": "https://github.com/hyperledger/besu/pull/1645#discussion_r536084854", "bodyText": "You're right, it's brittle as is. I'll change it.", "author": "RatanRSur", "createdAt": "2020-12-04T13:04:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTk2NjQ4Mw=="}], "type": "inlineReview"}]}