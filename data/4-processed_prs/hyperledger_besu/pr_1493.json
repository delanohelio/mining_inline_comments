{"pr_number": 1493, "pr_title": "Upgrade to Apache Tuweni 1.2.0", "pr_createdAt": "2020-10-24T23:35:02Z", "pr_url": "https://github.com/hyperledger/besu/pull/1493", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3Mzc3NA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512173774", "bodyText": "These changes are unrelated to tuweni, move them to a separate PR please.", "author": "shemnon", "createdAt": "2020-10-26T18:18:54Z", "path": "enclave/src/main/java/org/hyperledger/besu/enclave/EnclaveFactory.java", "diffHunk": "@@ -20,10 +20,12 @@\n import java.net.URI;\n import java.nio.charset.StandardCharsets;\n import java.nio.file.AccessDeniedException;\n+import java.nio.file.Files;", "originalCommit": "a84bbd44edf72036114d313b098dda6b5f8e450b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5MTA4MA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512191080", "bodyText": "It seems this upgrade of Tuweni changes dependencies, especially removing Guava. So we have to add Guava to the dependencies, or have to use the native Files class. I chose to go down that way as it was the only reference to Guava in that particular subproject. Would you rather I change to add Guava explicitly in dependencies?", "author": "atoulme", "createdAt": "2020-10-26T18:46:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3Mzc3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIwNzg4Mg==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512207882", "bodyText": "I would rather the dependency be changed.", "author": "shemnon", "createdAt": "2020-10-26T19:16:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3Mzc3NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcwNzQ0MA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r517707440", "bodyText": "OK fixed.", "author": "atoulme", "createdAt": "2020-11-05T00:17:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3Mzc3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDExMg==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512174112", "bodyText": "There is no need to update the reference tests as part of tuweni.  Please remove changes to this file and the submodule update form the PR.", "author": "shemnon", "createdAt": "2020-10-26T18:19:32Z", "path": "ethereum/referencetests/build.gradle", "diffHunk": "@@ -32,14 +32,17 @@ dependencies {\n   implementation project(':services:kvstore')\n \n   implementation 'com.fasterxml.jackson.core:jackson-databind'\n+  implementation 'com.google.code.findbugs:jsr305'\n+  implementation 'com.google.guava:guava'\n+\n \n   testOutput sourceSets.test.output\n }\n \n task ('validateReferenceTestSubmodule') {\n   description = \"Checks that the reference tests submodule is not accidentially changed\"\n   doLast {\n-    def expectedHash = 'b8abaebf5949877ead03e8f74ac03c0ede41d5f7'", "originalCommit": "a84bbd44edf72036114d313b098dda6b5f8e450b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5MTkzNA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512191934", "bodyText": "That must be me making a mess again. I'll fix that.", "author": "atoulme", "createdAt": "2020-10-26T18:48:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDExMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDUzNw==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512174537", "bodyText": "Is this a requirement for Tuweni?  If not please remove.", "author": "shemnon", "createdAt": "2020-10-26T18:20:12Z", "path": "gradle/versions.gradle", "diffHunk": "@@ -31,6 +31,8 @@ dependencyManagement {\n     dependency 'com.google.errorprone:error_prone_core:2.4.0'\n     dependency 'com.google.errorprone:error_prone_test_helpers:2.4.0'\n \n+    dependency 'com.google.code.findbugs:jsr305:3.0.2'", "originalCommit": "a84bbd44edf72036114d313b098dda6b5f8e450b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE5MTUzNA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512191534", "bodyText": "It is a requirement for Besu. It looks like those transitive dependencies are no longer there, and therefore it is required for Besu to explicitly state that dependency.", "author": "atoulme", "createdAt": "2020-10-26T18:47:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDUzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjIwODU5MA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r512208590", "bodyText": "It looks like it was added to the referencetests changes you are rolling back.  See if it works not adding this particular dependency once the reference tests are reset.", "author": "shemnon", "createdAt": "2020-10-26T19:17:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDUzNw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzcwNzU0OQ==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r517707549", "bodyText": "It doesn't :(", "author": "atoulme", "createdAt": "2020-11-05T00:17:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjE3NDUzNw=="}], "type": "inlineReview"}, {"oid": "9a3cd1257418f9fb48243a622f5be409bf4099ad", "url": "https://github.com/hyperledger/besu/commit/9a3cd1257418f9fb48243a622f5be409bf4099ad", "message": "Upgrade to Apache Tuweni 1.2.0\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>", "committedDate": "2020-11-05T00:10:55Z", "type": "forcePushed"}, {"oid": "02d05de7bc0c91f93af5db98304f7144ae80ffe5", "url": "https://github.com/hyperledger/besu/commit/02d05de7bc0c91f93af5db98304f7144ae80ffe5", "message": "Upgrade to Apache Tuweni 1.2.0\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>", "committedDate": "2020-11-05T00:18:37Z", "type": "forcePushed"}, {"oid": "a2b731dbc1c704282e7df01f92e9438165933124", "url": "https://github.com/hyperledger/besu/commit/a2b731dbc1c704282e7df01f92e9438165933124", "message": "Upgrade to Apache Tuweni 1.2.0\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>", "committedDate": "2020-11-05T00:30:40Z", "type": "commit"}, {"oid": "a2b731dbc1c704282e7df01f92e9438165933124", "url": "https://github.com/hyperledger/besu/commit/a2b731dbc1c704282e7df01f92e9438165933124", "message": "Upgrade to Apache Tuweni 1.2.0\n\nSigned-off-by: Antoine Toulme <antoine@lunar-ocean.com>", "committedDate": "2020-11-05T00:30:40Z", "type": "forcePushed"}, {"oid": "6792340c4dead63a45edd86aa93af325f265417c", "url": "https://github.com/hyperledger/besu/commit/6792340c4dead63a45edd86aa93af325f265417c", "message": "Merge branch 'master' into upgrade_tuweni_1.2.0", "committedDate": "2020-11-05T02:01:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM0ODkwMg==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r518348902", "bodyText": "Looks like you can get rid of JSR305, here as well as in versions.gradle.\nhttps://app.circleci.com/pipelines/github/hyperledger/besu/5943/workflows/f4e50074-c111-46e0-ac0c-97fdfb3036bd/jobs/28696", "author": "shemnon", "createdAt": "2020-11-05T20:36:21Z", "path": "ethereum/referencetests/build.gradle", "diffHunk": "@@ -32,6 +32,9 @@ dependencies {\n   implementation project(':services:kvstore')\n \n   implementation 'com.fasterxml.jackson.core:jackson-databind'\n+  implementation 'com.google.code.findbugs:jsr305'", "originalCommit": "6792340c4dead63a45edd86aa93af325f265417c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM0OTI4MA==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r518349280", "bodyText": "This can be dropped, if you also drop the dependency in ethereum/referencetests/build.gradle", "author": "shemnon", "createdAt": "2020-11-05T20:37:02Z", "path": "gradle/versions.gradle", "diffHunk": "@@ -31,6 +31,8 @@ dependencyManagement {\n     dependency 'com.google.errorprone:error_prone_core:2.4.0'\n     dependency 'com.google.errorprone:error_prone_test_helpers:2.4.0'\n \n+    dependency 'com.google.code.findbugs:jsr305:3.0.2'", "originalCommit": "6792340c4dead63a45edd86aa93af325f265417c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM3NjgyMw==", "url": "https://github.com/hyperledger/besu/pull/1493#discussion_r518376823", "bodyText": "alright, done.", "author": "atoulme", "createdAt": "2020-11-05T21:23:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODM0OTI4MA=="}], "type": "inlineReview"}, {"oid": "875dbb6ea6f4f2e2a7898115840a062f31311441", "url": "https://github.com/hyperledger/besu/commit/875dbb6ea6f4f2e2a7898115840a062f31311441", "message": "no jsr305\n\nSigned-off-by: Danno Ferrin <danno.ferrin@gmail.com>", "committedDate": "2020-11-05T21:22:56Z", "type": "commit"}, {"oid": "549fcd0ba8cf3ce9cd5320b54c3f76d3d3f13727", "url": "https://github.com/hyperledger/besu/commit/549fcd0ba8cf3ce9cd5320b54c3f76d3d3f13727", "message": "Merge branch 'master' into upgrade_tuweni_1.2.0", "committedDate": "2020-11-05T21:23:24Z", "type": "commit"}, {"oid": "61a9d0a08d2057288dd6ffca91a4f7701536e14f", "url": "https://github.com/hyperledger/besu/commit/61a9d0a08d2057288dd6ffca91a4f7701536e14f", "message": "Merge branch 'master' into upgrade_tuweni_1.2.0", "committedDate": "2020-11-05T22:21:25Z", "type": "commit"}]}