{"pr_number": 1708, "pr_title": "Move bft block header creation/validation to common", "pr_createdAt": "2020-12-14T22:32:37Z", "pr_url": "https://github.com/hyperledger/besu/pull/1708", "timeline": [{"oid": "f58dcce789431eb796495aad0e31b3b4a87eafc3", "url": "https://github.com/hyperledger/besu/commit/f58dcce789431eb796495aad0e31b3b4a87eafc3", "message": "Move bft block header creation/validation to common\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-14T22:29:10Z", "type": "commit"}, {"oid": "87f4021c95a0a8d5776d85cd059b3d0b4e59ec85", "url": "https://github.com/hyperledger/besu/commit/87f4021c95a0a8d5776d85cd059b3d0b4e59ec85", "message": "Merge remote-tracking branch 'upstream/master' into bft_blocks\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-14T22:32:49Z", "type": "commit"}, {"oid": "80208dacc30d57756da3eb909dc6f6b7179d2012", "url": "https://github.com/hyperledger/besu/commit/80208dacc30d57756da3eb909dc6f6b7179d2012", "message": "Merge remote-tracking branch 'upstream/master' into bft_blocks\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-14T23:03:09Z", "type": "commit"}, {"oid": "737022eba0d76abda09c077d17c32f647acc2e2c", "url": "https://github.com/hyperledger/besu/commit/737022eba0d76abda09c077d17c32f647acc2e2c", "message": "working on master\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-14T23:22:01Z", "type": "commit"}, {"oid": "a42aba427ee2cdc8e793640f4472092b57c93884", "url": "https://github.com/hyperledger/besu/commit/a42aba427ee2cdc8e793640f4472092b57c93884", "message": "finally working\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-15T02:19:25Z", "type": "commit"}, {"oid": "afad9d556a089e692572b80848748fce382d4934", "url": "https://github.com/hyperledger/besu/commit/afad9d556a089e692572b80848748fce382d4934", "message": "passing\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-15T03:41:44Z", "type": "commit"}, {"oid": "85bd514ec792ea993bc7f49423166c704a4bfc7c", "url": "https://github.com/hyperledger/besu/commit/85bd514ec792ea993bc7f49423166c704a4bfc7c", "message": "repair gradle\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-15T05:50:42Z", "type": "commit"}, {"oid": "e1bb58ab4e51c1bb702eaffba2c3d5f3bcbafdda", "url": "https://github.com/hyperledger/besu/commit/e1bb58ab4e51c1bb702eaffba2c3d5f3bcbafdda", "message": "update settings\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-15T06:32:25Z", "type": "commit"}, {"oid": "c26df42e3440e24ceea652f5dc9e45f937ecac01", "url": "https://github.com/hyperledger/besu/commit/c26df42e3440e24ceea652f5dc9e45f937ecac01", "message": "pick up missed file\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2020-12-15T06:34:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY2MTA1OQ==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551661059", "bodyText": "nit: doco reference need to be updated.", "author": "usmansaleem", "createdAt": "2021-01-05T01:13:25Z", "path": "consensus/ibft/src/integration-test/java/org/hyperledger/besu/consensus/ibft/support/TestContextBuilder.java", "diffHunk": "@@ -273,28 +273,28 @@ private static ControllerAndState createControllerAndFinalState(\n     final StubGenesisConfigOptions genesisConfigOptions = new StubGenesisConfigOptions();\n     genesisConfigOptions.byzantiumBlock(0);\n \n-    final ProtocolSchedule protocolSchedule = IbftProtocolSchedule.create(genesisConfigOptions);\n+    final ProtocolSchedule protocolSchedule = BftProtocolSchedule.create(genesisConfigOptions);\n \n     /////////////////////////////////////////////////////////////////////////////////////\n     // From here down is BASICALLY taken from IbftBesuController", "originalCommit": "c26df42e3440e24ceea652f5dc9e45f937ecac01", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY4NDQyMw==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551684423", "bodyText": "this is still valid - this class represents the IBFT-BesuController - i.e. this class is still specific to the consensus mechanism.", "author": "rain-on", "createdAt": "2021-01-05T02:37:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTY2MTA1OQ=="}], "type": "inlineReview"}, {"oid": "fe3381e99be25be46764fa2b315d21c1fab0b5b0", "url": "https://github.com/hyperledger/besu/commit/fe3381e99be25be46764fa2b315d21c1fab0b5b0", "message": "Merge remote-tracking branch 'upstream/master' into bft_blocks\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2021-01-05T02:08:04Z", "type": "commit"}, {"oid": "8e70f704465ccf4bbd2cafb7854118c22e6e3136", "url": "https://github.com/hyperledger/besu/commit/8e70f704465ccf4bbd2cafb7854118c22e6e3136", "message": "fix compilation error\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2021-01-05T02:23:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwMDU1NA==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551700554", "bodyText": "rename to BftConfigOptions", "author": "jframe", "createdAt": "2021-01-05T03:43:13Z", "path": "consensus/common/src/main/java/org/hyperledger/besu/consensus/common/bft/BftProtocolSchedule.java", "diffHunk": "@@ -59,33 +59,33 @@ public static ProtocolSchedule create(final GenesisConfigOptions config) {\n     return create(config, PrivacyParameters.DEFAULT, false);\n   }\n \n-  private static ProtocolSpecBuilder applyIbftChanges(\n-      final IbftConfigOptions ibftConfig, final ProtocolSpecBuilder builder) {\n+  private static ProtocolSpecBuilder applyBftChanges(\n+      final IbftConfigOptions configOptions, final ProtocolSpecBuilder builder) {", "originalCommit": "8e70f704465ccf4bbd2cafb7854118c22e6e3136", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwNTExOQ==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551705119", "bodyText": "done", "author": "rain-on", "createdAt": "2021-01-05T04:04:10Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwMDU1NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwMDkwOA==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551700908", "bodyText": "Would expect this this to be different between IBFT and QBFT", "author": "jframe", "createdAt": "2021-01-05T03:44:57Z", "path": "consensus/common/src/main/java/org/hyperledger/besu/consensus/common/bft/BftHelpers.java", "diffHunk": "@@ -25,9 +22,8 @@\n import org.hyperledger.besu.ethereum.core.Util;\n \n import java.util.Collection;\n-import java.util.Optional;\n \n-public class IbftHelpers {\n+public class BftHelpers {\n \n   public static final Hash EXPECTED_MIX_HASH =", "originalCommit": "8e70f704465ccf4bbd2cafb7854118c22e6e3136", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwNTI1MA==", "url": "https://github.com/hyperledger/besu/pull/1708#discussion_r551705250", "bodyText": "I suspect they will be different - but happy to deal with that in a different PR as its quite a challenging problem", "author": "rain-on", "createdAt": "2021-01-05T04:04:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTcwMDkwOA=="}], "type": "inlineReview"}, {"oid": "25af5dd4ce5461b1a11515bde6eaf0b307843b38", "url": "https://github.com/hyperledger/besu/commit/25af5dd4ce5461b1a11515bde6eaf0b307843b38", "message": "Change config to be BftConfig\n\nSigned-off-by: Trent Mohay <trent.mohay@consensys.net>", "committedDate": "2021-01-05T04:08:05Z", "type": "commit"}, {"oid": "d667b940a401f4213a5a71370a78dce8dcac085e", "url": "https://github.com/hyperledger/besu/commit/d667b940a401f4213a5a71370a78dce8dcac085e", "message": "Merge branch 'master' into bft_blocks", "committedDate": "2021-01-05T04:14:33Z", "type": "commit"}]}