{"pr_number": 1200, "pr_title": "filters: dispatch on-error invocations from PlatformBridgeFilter", "pr_createdAt": "2020-12-07T19:10:24Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/1200", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg4MDM4MQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1200#discussion_r537880381", "bodyText": "Are we able to have a test case for verifying this behavior?", "author": "buildbreaker", "createdAt": "2020-12-07T22:26:40Z", "path": "library/common/extensions/filters/http/platform_bridge/filter.cc", "diffHunk": "@@ -321,6 +322,36 @@ Http::FilterHeadersStatus PlatformBridgeFilter::encodeHeaders(Http::ResponseHead\n                                                               bool end_stream) {\n   ENVOY_LOG(trace, \"PlatformBridgeFilter({})::encodeHeaders\", filter_name_);\n \n+  // Presence of internal error header indicates an error that should be surfaced as an\n+  // error callback (rather than an HTTP response).\n+  const auto error_code_header = headers.get(Http::InternalHeaders::get().ErrorCode);", "originalCommit": "fbf3bed4367b390edc23a26ef0dd7e09b7a445f5", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NDU0OTcwMw==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1200#discussion_r544549703", "bodyText": "Added passing test.", "author": "goaway", "createdAt": "2020-12-16T19:04:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzg4MDM4MQ=="}], "type": "inlineReview"}, {"oid": "34394d1285e08f77556bfc9819e96ba07fa6d613", "url": "https://github.com/envoyproxy/envoy-mobile/commit/34394d1285e08f77556bfc9819e96ba07fa6d613", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-12-16T18:26:25Z", "type": "forcePushed"}, {"oid": "7f8194e0529bdb65a1c7cfebab261e504b8719d4", "url": "https://github.com/envoyproxy/envoy-mobile/commit/7f8194e0529bdb65a1c7cfebab261e504b8719d4", "message": "filters: dispatch on-error invocations from PlatformBridgeFilter\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-12-17T07:59:47Z", "type": "commit"}, {"oid": "e3082cc3c6c54a5b3ffba637fc7bbdc016ef31f7", "url": "https://github.com/envoyproxy/envoy-mobile/commit/e3082cc3c6c54a5b3ffba637fc7bbdc016ef31f7", "message": "format\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-12-17T07:59:47Z", "type": "commit"}, {"oid": "9c9f95061ddba91588bf6456f52c6e957f9fc73b", "url": "https://github.com/envoyproxy/envoy-mobile/commit/9c9f95061ddba91588bf6456f52c6e957f9fc73b", "message": "add passing integration test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-12-17T07:59:47Z", "type": "commit"}, {"oid": "9c9f95061ddba91588bf6456f52c6e957f9fc73b", "url": "https://github.com/envoyproxy/envoy-mobile/commit/9c9f95061ddba91588bf6456f52c6e957f9fc73b", "message": "add passing integration test\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-12-17T07:59:47Z", "type": "forcePushed"}]}