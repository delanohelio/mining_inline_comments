{"pr_number": 774, "pr_title": "retries: enable retry budget for concurrent retries", "pr_createdAt": "2020-03-30T22:34:49Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/774", "timeline": [{"oid": "fb7dc0ad16729312f908a9a26c7ffe6817dec1e4", "url": "https://github.com/envoyproxy/envoy-mobile/commit/fb7dc0ad16729312f908a9a26c7ffe6817dec1e4", "message": "retries: enable retry budget for concurrent retries\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-03-30T22:31:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUzNzIxNw==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/774#discussion_r400537217", "bodyText": "Curious, why not set this to 100? Also looks like this defaults to 20%, how does that work with the 3 mentioned in the description? https://www.envoyproxy.io/docs/envoy/latest/api-v2/api/v2/cluster/circuit_breaker.proto", "author": "rebello95", "createdAt": "2020-03-30T22:39:53Z", "path": "library/common/config_template.cc", "diffHunk": "@@ -70,6 +70,12 @@ const char* config_template = R\"(\n         keepalive_interval: 10\n         keepalive_probes: 1\n         keepalive_time: 5\n+    circuit_breakers: &circuit_breakers_settings\n+      thresholds:\n+        - priority: DEFAULT\n+          retry_budget:\n+            budget_percent:\n+              value: 50", "originalCommit": "fb7dc0ad16729312f908a9a26c7ffe6817dec1e4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "86d44592b305cb906f48d25eb427d1df0ce015c3", "url": "https://github.com/envoyproxy/envoy-mobile/commit/86d44592b305cb906f48d25eb427d1df0ce015c3", "message": "update\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-03-30T23:00:40Z", "type": "commit"}, {"oid": "a2e41f175fc2534d0d428c3508e43ed8022c71a9", "url": "https://github.com/envoyproxy/envoy-mobile/commit/a2e41f175fc2534d0d428c3508e43ed8022c71a9", "message": "a word\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-03-30T23:01:24Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDU0NTY3Nw==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/774#discussion_r400545677", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                      # retries, e.g when the phone goes offline. Therefore, Envoy Mobile allows all concurrent\n          \n          \n            \n                      # retries (e.g., when the phone goes offline). Therefore, Envoy Mobile allows all concurrent", "author": "rebello95", "createdAt": "2020-03-30T23:01:50Z", "path": "library/common/config_template.cc", "diffHunk": "@@ -70,6 +70,18 @@ const char* config_template = R\"(\n         keepalive_interval: 10\n         keepalive_probes: 1\n         keepalive_time: 5\n+    circuit_breakers: &circuit_breakers_settings\n+      thresholds:\n+        - priority: DEFAULT\n+          # n.b: with mobile clients there are scenarios where all concurrent requests might be\n+          # retries, e.g when the phone goes offline. Therefore, Envoy Mobile allows all concurrent", "originalCommit": "a2e41f175fc2534d0d428c3508e43ed8022c71a9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "b701f00e20f0bdf8ed0dafc9d0f444a8a238b659", "url": "https://github.com/envoyproxy/envoy-mobile/commit/b701f00e20f0bdf8ed0dafc9d0f444a8a238b659", "message": "a word\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-03-30T23:03:15Z", "type": "commit"}, {"oid": "8702ac1212f34b27c66529c2c710f5e40edd5b6e", "url": "https://github.com/envoyproxy/envoy-mobile/commit/8702ac1212f34b27c66529c2c710f5e40edd5b6e", "message": "Merge branch 'master' into concurrent-retries\n\nSigned-off-by: Jose Nino <jnino@lyft.com>", "committedDate": "2020-03-31T01:26:08Z", "type": "commit"}]}