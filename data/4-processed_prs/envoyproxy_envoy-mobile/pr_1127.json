{"pr_number": 1127, "pr_title": "filters: fix out of bound access to result status", "pr_createdAt": "2020-10-01T22:05:50Z", "pr_url": "https://github.com/envoyproxy/envoy-mobile/pull/1127", "timeline": [{"oid": "ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "url": "https://github.com/envoyproxy/envoy-mobile/commit/ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "message": "filters: fix out of bound access to result status\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-10-01T22:01:07Z", "type": "commit"}, {"oid": "ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "url": "https://github.com/envoyproxy/envoy-mobile/commit/ed5f892dc6fa7fd53a2fe3d720ac9d9b6001cc25", "message": "filters: fix out of bound access to result status\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-10-01T22:01:07Z", "type": "forcePushed"}, {"oid": "bfca243f895fb5c888cd0f3b2a8652339007c0a0", "url": "https://github.com/envoyproxy/envoy-mobile/commit/bfca243f895fb5c888cd0f3b2a8652339007c0a0", "message": "missing brace\n\nSigned-off-by: Mike Schore <mike.schore@gmail.com>", "committedDate": "2020-10-01T22:14:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQxNQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498539415", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);\n          \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : NULL);", "author": "rebello95", "createdAt": "2020-10-01T22:16:37Z", "path": "library/objective-c/EnvoyEngineImpl.m", "diffHunk": "@@ -83,9 +86,12 @@ static envoy_filter_data_status ios_http_filter_on_response_data(envoy_data data\n \n   NSData *platformData = to_ios_data(data);\n   NSArray *result = filter.onResponseData(platformData, end_stream);\n+  // Result is typically a pair of status and entity, but uniquely in the case of\n+  // ResumeIteration it will (optionally) contain additional pending elements.\n+  envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);", "originalCommit": "bfca243f895fb5c888cd0f3b2a8652339007c0a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU4ODE0Ng==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498588146", "bodyText": "This one should be nil - it's being passed as a missing objc object, not as a raw pointer.", "author": "goaway", "createdAt": "2020-10-02T01:50:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQ3NA==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498539474", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);\n          \n          \n            \n              envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : NULL);", "author": "rebello95", "createdAt": "2020-10-01T22:16:48Z", "path": "library/objective-c/EnvoyEngineImpl.m", "diffHunk": "@@ -67,9 +67,12 @@ static envoy_filter_data_status ios_http_filter_on_request_data(envoy_data data,\n \n   NSData *platformData = to_ios_data(data);\n   NSArray *result = filter.onRequestData(platformData, end_stream);\n+  // Result is typically a pair of status and entity, but uniquely in the case of\n+  // ResumeIteration it will (optionally) contain additional pending elements.\n+  envoy_headers *pending_headers = toNativeHeadersPtr(result.count == 3 ? result[2] : nil);", "originalCommit": "bfca243f895fb5c888cd0f3b2a8652339007c0a0", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU4ODA5MQ==", "url": "https://github.com/envoyproxy/envoy-mobile/pull/1127#discussion_r498588091", "bodyText": "This one should be nil - it's being passed as a missing objc object, not as a raw pointer.", "author": "goaway", "createdAt": "2020-10-02T01:50:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUzOTQ3NA=="}], "type": "inlineReview"}]}