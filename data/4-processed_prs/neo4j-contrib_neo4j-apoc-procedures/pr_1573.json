{"pr_number": 1573, "pr_title": "fixes #1547: Add a new after-async or async phase to triggers", "pr_createdAt": "2020-06-29T12:17:47Z", "pr_url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573", "timeline": [{"oid": "2a7c14658dafa9f7f9736bddee2a766b46257271", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/2a7c14658dafa9f7f9736bddee2a766b46257271", "message": "fixes #1547: Add a new after-async or async phase to triggers", "committedDate": "2020-06-29T12:12:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODY2Ng==", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#discussion_r454208666", "bodyText": "also in a new thread!?", "author": "jexp", "createdAt": "2020-07-14T08:58:28Z", "path": "docs/asciidoc/job-management/trigger.adoc", "diffHunk": "@@ -202,3 +204,16 @@ CALL apoc.trigger.add('lowercase-by-label','UNWIND apoc.trigger.nodesByLabel({as\n ----\n \n // end::trigger[]\n+\n+.Trigger Phase Table\n+.Helper Functions\n+[cols=\"1m,5\"]\n+|===\n+| Phase | Description\n+| before | The trigger will be activate right `before` the commit. If no phase is specified, it's the default.\n+| rollback | The trigger will be activate right after the  `rollback`\n+| after | The trigger will be activate right `after` the commit\n+| afterAsync | The trigger will be activate right `after` the commit and inside a new transaction that will not", "originalCommit": "2a7c14658dafa9f7f9736bddee2a766b46257271", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDIwODc5MA==", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/pull/1573#discussion_r454208790", "bodyText": "change syntax to $createdNodes etc.", "author": "jexp", "createdAt": "2020-07-14T08:58:40Z", "path": "docs/asciidoc/job-management/trigger.adoc", "diffHunk": "@@ -15,7 +15,9 @@ Enable `apoc.trigger.enabled=true` in `$NEO4J_HOME/conf/apoc.conf` first.\n \n [cols=\"1m,5\"]\n |===\n-| CALL apoc.trigger.add(name, statement, selector) yield name, statement, installed | add a trigger statement under a name, in the statement you can use {createdNodes}, {deletedNodes} etc., the selector is {phase:'before/after/rollback'} returns previous and new trigger information\n+| CALL apoc.trigger.add(name, statement, selector) yield name, statement, installed | add a trigger statement under a name,\n+in the statement you can use {createdNodes}, {deletedNodes} etc., the selector is {phase:'before/after/rollback/afterAsync'}", "originalCommit": "2a7c14658dafa9f7f9736bddee2a766b46257271", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2cd99c724ec5432edf5e40210fff6155c4fad1cb", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/2cd99c724ec5432edf5e40210fff6155c4fad1cb", "message": "Changed parameters to new syntax", "committedDate": "2020-07-14T09:05:46Z", "type": "commit"}, {"oid": "40e96c230cbe8be31441a6796032322451f07996", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/40e96c230cbe8be31441a6796032322451f07996", "message": "Added \"and thread\" in afterAsync description", "committedDate": "2020-07-14T09:07:05Z", "type": "commit"}, {"oid": "b79ce779ca08e299129cde92ba7ec1ad56bf0c91", "url": "https://github.com/neo4j-contrib/neo4j-apoc-procedures/commit/b79ce779ca08e299129cde92ba7ec1ad56bf0c91", "message": "Merge branch '4.0' into issue_1547", "committedDate": "2020-07-20T13:50:25Z", "type": "commit"}]}