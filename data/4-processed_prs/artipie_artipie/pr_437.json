{"pr_number": 437, "pr_title": "Benchmarks publication process changes", "pr_createdAt": "2020-08-12T12:10:48Z", "pr_url": "https://github.com/artipie/artipie/pull/437", "timeline": [{"oid": "8ccaf17061805409a8eb47626eb1d293b5b45aca", "url": "https://github.com/artipie/artipie/commit/8ccaf17061805409a8eb47626eb1d293b5b45aca", "message": "#432 - fix benchmarks publication process", "committedDate": "2020-08-12T12:09:00Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTMxMjM2Nw==", "url": "https://github.com/artipie/artipie/pull/437#discussion_r469312367", "bodyText": "@Sammers21 please add $VERSION name to commit message, e.g. Add benchmark results for $VERSION", "author": "g4s8", "createdAt": "2020-08-12T14:43:06Z", "path": ".github/workflows/release.yml", "diffHunk": "@@ -35,17 +35,23 @@ jobs:\n       - name: Set env\n         run: echo ::set-env name=RELEASE_VERSION::${GITHUB_REF:10}\n       - name: Run benchmarks\n+        id: run_benchmarks\n         uses: artipie/benchmarks@master\n         with:\n           aws-access-key: '${{ secrets.PERF_AWS_ACCESS_KEY }}'\n           aws-secret-key: '${{ secrets.PERF_AWS_SECRET_KEY }}'\n-          adapter: 'files'\n-          scenario: 'upload-files.jmx'\n           version: '${{ env.RELEASE_VERSION }}'\n-      - name: Publish reports\n-        uses: JamesIves/github-pages-deploy-action@releases/v3\n+      - name: Commit benchmark results\n+        run: |\n+          export REPORT=${{ steps.run_benchmarks.outputs.report }}\n+          export VERSION=${{ env.RELEASE_VERSION }}\n+          git checkout gh-pages\n+          mkdir -p benchmarks/$VERSION\n+          mv $REPORT benchmarks/$VERSION/$REPORT\n+          git add benchmarks/$VERSION/$REPORT\n+          git commit -m \"Add benchmark results\"", "originalCommit": "8ccaf17061805409a8eb47626eb1d293b5b45aca", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "f785b2b2cecf062e6eb303ae281a7d797833f290", "url": "https://github.com/artipie/artipie/commit/f785b2b2cecf062e6eb303ae281a7d797833f290", "message": "Merge branch 'master' into push_benchmark_results", "committedDate": "2020-08-13T11:16:24Z", "type": "commit"}, {"oid": "a4bb9edab6cd2754f9a62d2a143e15b685b29774", "url": "https://github.com/artipie/artipie/commit/a4bb9edab6cd2754f9a62d2a143e15b685b29774", "message": "#431 - review fixes", "committedDate": "2020-08-13T11:18:14Z", "type": "commit"}]}