{"pr_number": 117, "pr_title": "Return 404 if repo config doesnt exist", "pr_createdAt": "2020-05-07T09:59:38Z", "pr_url": "https://github.com/artipie/artipie/pull/117", "timeline": [{"oid": "c9690ac32ab9dd2c71f07f6c721b94d6d7911d41", "url": "https://github.com/artipie/artipie/commit/c9690ac32ab9dd2c71f07f6c721b94d6d7911d41", "message": "#74 - return 404 if repo canfig doesnt exist", "committedDate": "2020-05-07T09:53:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTc0NDc1NQ==", "url": "https://github.com/artipie/artipie/pull/117#discussion_r421744755", "bodyText": "@g4s8 can we test this scenario?", "author": "Vatavuk", "createdAt": "2020-05-07T19:34:18Z", "path": "src/main/java/com/artipie/Pie.java", "diffHunk": "@@ -83,15 +87,38 @@ public Response response(final String line, final Iterable<Map.Entry<String, Str\n         }\n         final String repo = parts[0];\n         Logger.debug(this, \"Slice repo=%s\", repo);\n+        final Key.From key = new Key.From(String.format(\"%s.yaml\", repo));\n         return new AsyncSlice(\n             CompletableFuture.supplyAsync(\n                 () -> new Unchecked<>(this.settings::storage).value()\n-            )\n-                .thenComposeAsync(\n-                    storage -> storage.value(new Key.From(String.format(\"%s.yaml\", repo)))\n+            ).thenCompose(\n+                storage -> storage.exists(key).thenApply(\n+                    exist -> {\n+                        final Slice slice;\n+                        if (exist) {\n+                            slice = new AsyncSlice(\n+                                storage.value(key).thenApply(\n+                                    content -> new SliceFromConfig(\n+                                        new RepoConfig(this.vertx, content),\n+                                        this.vertx.fileSystem()\n+                                    )\n+                                )\n+                            );\n+                        } else {\n+                            slice = new SliceSimple(", "originalCommit": "c9690ac32ab9dd2c71f07f6c721b94d6d7911d41", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0866563c4b6a786303859c61693fc4e305a1f4eb", "url": "https://github.com/artipie/artipie/commit/0866563c4b6a786303859c61693fc4e305a1f4eb", "message": "#74 - (cr) todo for test", "committedDate": "2020-05-08T07:24:18Z", "type": "commit"}, {"oid": "e74bdae795c8a1b757d01ff85a18c1dd51f91c83", "url": "https://github.com/artipie/artipie/commit/e74bdae795c8a1b757d01ff85a18c1dd51f91c83", "message": "Merge branch 'master' into 74", "committedDate": "2020-05-08T07:24:35Z", "type": "commit"}]}