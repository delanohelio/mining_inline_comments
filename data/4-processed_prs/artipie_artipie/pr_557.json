{"pr_number": 557, "pr_title": "#555 - document Artifactory API", "pr_createdAt": "2020-09-09T12:15:13Z", "pr_url": "https://github.com/artipie/artipie/pull/557", "timeline": [{"oid": "b911dcde37b1e2ceb8be902d2730a3e546b231d4", "url": "https://github.com/artipie/artipie/commit/b911dcde37b1e2ceb8be902d2730a3e546b231d4", "message": "#555 - created readme for Artifactory API description", "committedDate": "2020-09-09T12:07:44Z", "type": "commit"}, {"oid": "631b267e41e26676e64e7f1e0d3d602a07ce3c55", "url": "https://github.com/artipie/artipie/commit/631b267e41e26676e64e7f1e0d3d602a07ce3c55", "message": "#555 - point added at the end of the sentence", "committedDate": "2020-09-09T12:11:33Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5MzgyMA==", "url": "https://github.com/artipie/artipie/pull/557#discussion_r485593820", "bodyText": "@olenagerasimova typo in REQUIEST", "author": "olegmoz", "createdAt": "2020-09-09T13:04:03Z", "path": "ARTIFACTORY_API_SUPPORT.md", "diffHunk": "@@ -0,0 +1,64 @@\n+# Artifactory API support\n+\n+Artipie supports artifactory API to manage repositories, users and repository permissions.\n+\n+## Create Repository\n+\n+Creates new docker repository with `default` storage alias and provided name.\n+\n+> **PUT** /api/repositories/{repoKey}\n+\n+Consumes json with the following fields (any other fields are ignored): \n+\n+Field name | Type | Meaning | Required\n+------------ | ------------- | ------------ | ---------\n+key | string | New repository name | Y\n+rclass | string | Repository class, only `local` type is supported | Y\n+packageType | string | Artifact type, only `docker` type is supported | Y\n+dockerApiVersion | string | Docker API version, we only support `V2` | Y\n+\n+Possible responses:\n+- `200 OK` when new repository was successfully created\n+- `400 BAD REQUIEST` in the cases when repository with such name already exists or invalid json was sent", "originalCommit": "631b267e41e26676e64e7f1e0d3d602a07ce3c55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5NTQ4MA==", "url": "https://github.com/artipie/artipie/pull/557#discussion_r485595480", "bodyText": "@olenagerasimova title should be capitalized to be in line with other titles in the file and general formatting rules for English texts", "author": "olegmoz", "createdAt": "2020-09-09T13:06:20Z", "path": "ARTIFACTORY_API_SUPPORT.md", "diffHunk": "@@ -0,0 +1,64 @@\n+# Artifactory API support\n+\n+Artipie supports artifactory API to manage repositories, users and repository permissions.\n+\n+## Create Repository\n+\n+Creates new docker repository with `default` storage alias and provided name.\n+\n+> **PUT** /api/repositories/{repoKey}\n+\n+Consumes json with the following fields (any other fields are ignored): \n+\n+Field name | Type | Meaning | Required\n+------------ | ------------- | ------------ | ---------\n+key | string | New repository name | Y\n+rclass | string | Repository class, only `local` type is supported | Y\n+packageType | string | Artifact type, only `docker` type is supported | Y\n+dockerApiVersion | string | Docker API version, we only support `V2` | Y\n+\n+Possible responses:\n+- `200 OK` when new repository was successfully created\n+- `400 BAD REQUIEST` in the cases when repository with such name already exists or invalid json was sent\n+- `500 INTERNAL ERROR` in the case of unexpected server error\n+\n+## Users\n+\n+### Get the users list", "originalCommit": "631b267e41e26676e64e7f1e0d3d602a07ce3c55", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5ODE3Nw==", "url": "https://github.com/artipie/artipie/pull/557#discussion_r485598177", "bodyText": "@olenagerasimova we have got Internal and internal values in the docs. Is it a typo or these values are actually different?", "author": "olegmoz", "createdAt": "2020-09-09T13:10:15Z", "path": "ARTIFACTORY_API_SUPPORT.md", "diffHunk": "@@ -0,0 +1,64 @@\n+# Artifactory API support\n+\n+Artipie supports artifactory API to manage repositories, users and repository permissions.\n+\n+## Create Repository\n+\n+Creates new docker repository with `default` storage alias and provided name.\n+\n+> **PUT** /api/repositories/{repoKey}\n+\n+Consumes json with the following fields (any other fields are ignored): \n+\n+Field name | Type | Meaning | Required\n+------------ | ------------- | ------------ | ---------\n+key | string | New repository name | Y\n+rclass | string | Repository class, only `local` type is supported | Y\n+packageType | string | Artifact type, only `docker` type is supported | Y\n+dockerApiVersion | string | Docker API version, we only support `V2` | Y\n+\n+Possible responses:\n+- `200 OK` when new repository was successfully created\n+- `400 BAD REQUIEST` in the cases when repository with such name already exists or invalid json was sent\n+- `500 INTERNAL ERROR` in the case of unexpected server error\n+\n+## Users\n+\n+### Get the users list\n+\n+Endpoint to obtain list of the existing users.\n+\n+> **GET** /api/security/users\n+\n+Returns json array of the following form:\n+```json\n+[\n+  {\n+    \"name\": \"davids\",\n+    \"uri\" : \"http://localhost:8081/artifactory/api/security/users/davids\",\n+    \"realm\" : \"internal\"\n+  }, {\n+    \"name\": \"danl\",\n+    \"uri\" : \"http://localhost:8081/artifactory/api/security/users/danl\",\n+    \"realm\" : \"internal\"\n+  }\n+]\n+```\n+Where `name` field contains user name, `uri` - URI to obtain user details, user `realm` is always `internal`.\n+\n+### Get User Details\n+\n+Endpoint to obtain user details.\n+\n+> **GET** /api/security/users/{userName}\n+\n+Returns json with the following fields:\n+\n+Field name | Type | Meaning | Required\n+------ | ------ | ------ | ------\n+name | string | User name | Y\n+email | string | User email, always constructed as {userName}@artipie.com | Y\n+lastLoggedIn | string | Default `2020-01-01T01:01:01.000+01:00` | Y\n+realm | string | User realm, value `Internal` is always returned | Y\n+\n+If user is not found `404 NOT FOUND` status is returned.", "originalCommit": "631b267e41e26676e64e7f1e0d3d602a07ce3c55", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTYyMTAzNw==", "url": "https://github.com/artipie/artipie/pull/557#discussion_r485621037", "bodyText": "@olegmoz hm, good question. I've copied this example from artifactory, there they use internal, but this example have Internal.\nIn artipie we actually always use Internal with the capital I.", "author": "olenagerasimova", "createdAt": "2020-09-09T13:42:23Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTU5ODE3Nw=="}], "type": "inlineReview"}, {"oid": "70a8e8a4c3a1336f1c7f0077e78e250e4cf1c34f", "url": "https://github.com/artipie/artipie/commit/70a8e8a4c3a1336f1c7f0077e78e250e4cf1c34f", "message": "#555 - CR", "committedDate": "2020-09-09T13:47:14Z", "type": "commit"}, {"oid": "75f835031fc2ddb0208bdd7df2e726e9f9e7c351", "url": "https://github.com/artipie/artipie/commit/75f835031fc2ddb0208bdd7df2e726e9f9e7c351", "message": "Merge branch 'master' into 555-setup", "committedDate": "2020-09-09T14:16:39Z", "type": "commit"}]}