{"pr_number": 161, "pr_title": "Document yaml auth for #146", "pr_createdAt": "2020-05-20T15:44:52Z", "pr_url": "https://github.com/artipie/artipie/pull/161", "timeline": [{"oid": "70efe9d9bb33da26ff414b5cc4b9925eccd9a4d6", "url": "https://github.com/artipie/artipie/commit/70efe9d9bb33da26ff414b5cc4b9925eccd9a4d6", "message": "Document yaml auth for #146", "committedDate": "2020-05-20T15:43:25Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428189101", "bodyText": "@olenagerasimova why not use directly:\ncredentials:\n  joe@mail.com:\n    pass: \"sha256:xxxxxxxxxxxxxxxxxxxxxx\"\nLike that there are zero ambiguity, with the current proposal there are two problems:\n\nthe joe key is useless\nyou can have two users with same login even using two different key.", "author": "victornoel", "createdAt": "2020-05-20T17:34:44Z", "path": "README.md", "diffHunk": "@@ -388,6 +389,25 @@ docker run -d -v /var/artipie:/var/artipie` -p 80:80 \\\n   artipie/artipie:latest\n ```\n \n+### Credentials settings\n+\n+Authentication cal also be configured with yaml credentials file:\n+\n+```yaml\n+credentials: \n+  jane: \n+    pass: \"plain:qwerty\"\n+  joe: \n+    login: joe@mail.com", "originalCommit": "70efe9d9bb33da26ff414b5cc4b9925eccd9a4d6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ0NTY3Mg==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428445672", "bodyText": "@victornoel hm, in my understanding joe is not useless, because:\n\nI will have to return it as user from YamlAuth implementation of Authentication, check #157\njoe (not the alternative login) can be used in repository permissions settings as described in #69 and #71\n\nYour second is absolutely fair, I think we should ask @g4s8 about this situation.", "author": "olenagerasimova", "createdAt": "2020-05-21T05:01:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ2NjY4NA==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428466684", "bodyText": "@victornoel @olenagerasimova yes, joe is like a user id, but joe@mail.com is a part of login credentials. I think it's ok that user may have multiple credentials, since it's possible that different repository authentications will require different credentials format. E.g. Maven requires HTTP basic, so we can use joe and password to authenticate it, but another repository may required different authentication method (e.g. using token), but we still want to authenticate joe user by token too and configure authorization permissions using his user id. Is it clearer now?", "author": "g4s8", "createdAt": "2020-05-21T06:19:52Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQ5ODk1Mw==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428498953", "bodyText": "@g4s8 my point was that multiple users would have the same login:\njoe:\n  login: joejane@gmail.com\njane:\n  login: joejane@gmail.com\nwhat happens there? Is that valid?", "author": "victornoel", "createdAt": "2020-05-21T07:47:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYyODc5OA==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428628798", "bodyText": "@g4s8 ping", "author": "olenagerasimova", "createdAt": "2020-05-21T12:45:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNTE4Ng==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428635186", "bodyText": "@victornoel @olenagerasimova no, it's not valid, we have to validate it somehow. Or decide it later and implement only simple login for now where user id is equal to login user name.", "author": "g4s8", "createdAt": "2020-05-21T12:58:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODYzNjU0Nw==", "url": "https://github.com/artipie/artipie/pull/161#discussion_r428636547", "bodyText": "@olenagerasimova @g4s8 IMHO it is simpler to reify username and login for now so that there are no validation to do since it will be correct by definition because of the yaml syntax rules. And later we can decide if there is an actual need for a secondary login.", "author": "victornoel", "createdAt": "2020-05-21T13:01:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODE4OTEwMQ=="}], "type": "inlineReview"}, {"oid": "5d4d86c2e7a76c1cb3efb9e41590b990b957ba16", "url": "https://github.com/artipie/artipie/commit/5d4d86c2e7a76c1cb3efb9e41590b990b957ba16", "message": "Merge branch 'master' of https://github.com/artipie/artipie into 146-readme", "committedDate": "2020-05-21T13:11:39Z", "type": "commit"}, {"oid": "21f88b4be33c0126aea5e959318c531ad84aa169", "url": "https://github.com/artipie/artipie/commit/21f88b4be33c0126aea5e959318c531ad84aa169", "message": "CR readme for #146", "committedDate": "2020-05-21T13:17:14Z", "type": "commit"}]}