{"pr_number": 386, "pr_title": "fix: sets the project for the integration tests", "pr_createdAt": "2020-08-17T06:27:37Z", "pr_url": "https://github.com/googleapis/java-spanner/pull/386", "timeline": [{"oid": "7c6d9f1fb150a0d4389583971034d0d3f3120a6d", "url": "https://github.com/googleapis/java-spanner/commit/7c6d9f1fb150a0d4389583971034d0d3f3120a6d", "message": "fix: sets the project for the integration tests\n\nThe emulator uses the project set in order to list the instance\nconfigurations. If the none is set, it gets that information through the\ngcloud project set, which might mismatch the project being used to\ncreate the databases in the integration tests.", "committedDate": "2020-08-17T06:25:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4Njk3OQ==", "url": "https://github.com/googleapis/java-spanner/pull/386#discussion_r471286979", "bodyText": "Won't this break running the integration tests locally if you don't have permission to access the gcloud-devel project, unless you specify a different value for this system property in your maven command? Currently the integration tests use the Google Cloud project that is specified in your environment in combination with the credentials that have also been configured in your environment.", "author": "olavloite", "createdAt": "2020-08-17T07:18:31Z", "path": "google-cloud-spanner/pom.xml", "diffHunk": "@@ -69,6 +69,7 @@\n           <systemPropertyVariables>\n             <spanner.testenv.config.class>com.google.cloud.spanner.GceTestEnvConfig</spanner.testenv.config.class>\n             <spanner.testenv.instance>projects/gcloud-devel/instances/spanner-testing</spanner.testenv.instance>\n+            <spanner.gce.config.project_id>gcloud-devel</spanner.gce.config.project_id>", "originalCommit": "7c6d9f1fb150a0d4389583971034d0d3f3120a6d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI5MTM5NQ==", "url": "https://github.com/googleapis/java-spanner/pull/386#discussion_r471291395", "bodyText": "I thought so, but the test instance is already hardcoded to projects/gcloud-devel/instances/spanner-testing (see property spanner.testenv.instance). I think that the only way you can run the IT tests currently is by overriding the two properties. Maybe we should update the CONTRIBUTING.md file here as well.", "author": "thiagotnunes", "createdAt": "2020-08-17T07:27:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4Njk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMxMzIzMQ==", "url": "https://github.com/googleapis/java-spanner/pull/386#discussion_r471313231", "bodyText": "Yep, you're right. My local config overrides the spanner.testenv.instance property. This change would mean that I would also need to override the spanner.gce.config.project_id property, but that is not really a big ask when the first one needs to be overridden anyways. As you noted, this might be worth noting in the CONTRIBUTING.md.", "author": "olavloite", "createdAt": "2020-08-17T08:11:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4Njk3OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTMzMTQxNw==", "url": "https://github.com/googleapis/java-spanner/pull/386#discussion_r471331417", "bodyText": "Thanks, updated the CONTRIBUTING.md with the new integration tests instructions.", "author": "thiagotnunes", "createdAt": "2020-08-17T08:45:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTI4Njk3OQ=="}], "type": "inlineReview"}, {"oid": "ba177b7589a82ee70c91a865683ae4d4f9a65a31", "url": "https://github.com/googleapis/java-spanner/commit/ba177b7589a82ee70c91a865683ae4d4f9a65a31", "message": "fix: updates instructions for it tests\n\nUpdates the instructions to run the integration tests in the\ncontributing file. With the update, users will know how to properly set\nthe instance and project to run the integration tests.", "committedDate": "2020-08-17T08:43:00Z", "type": "commit"}]}