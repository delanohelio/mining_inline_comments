{"pr_number": 232, "pr_title": "fix: PDML retry settings were not applied for aborted tx", "pr_createdAt": "2020-05-20T16:51:20Z", "pr_url": "https://github.com/googleapis/java-spanner/pull/232", "timeline": [{"oid": "3bfbf5c6f53a76f78341ae933ebaa7f68aa4e9c1", "url": "https://github.com/googleapis/java-spanner/commit/3bfbf5c6f53a76f78341ae933ebaa7f68aa4e9c1", "message": "fix: PDML retry settings were not applied for aborted tx\n\nThe PartitionedDML retry settings were only applied for the RPC, and not\nfor the generic retryer that would retry the PDML transaction if it was\naborted by Spanner. This could cause long-running PDML transactions to\nfail with an Aborted exception.\n\nFixes #199", "committedDate": "2020-05-20T16:49:15Z", "type": "commit"}, {"oid": "1db2ad84343595574dd2f8a47075ff5ea0ccda66", "url": "https://github.com/googleapis/java-spanner/commit/1db2ad84343595574dd2f8a47075ff5ea0ccda66", "message": "fix: add ignored diff to clirr", "committedDate": "2020-05-20T17:30:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM2MTE0Ng==", "url": "https://github.com/googleapis/java-spanner/pull/232#discussion_r452361146", "bodyText": "Did you really intend to set the keepalive time to be over a day? This is a value of 120,000 seconds.", "author": "ejona86", "createdAt": "2020-07-09T16:59:40Z", "path": "google-cloud-spanner/src/main/java/com/google/cloud/spanner/spi/v1/GapicSpannerRpc.java", "diffHunk": "@@ -300,7 +302,7 @@ public GapicSpannerRpc(final SpannerOptions options) {\n \n                 // Set a keepalive time of 120 seconds to help long running\n                 // commit GRPC calls succeed\n-                .setKeepAliveTime(Duration.ofSeconds(GRPC_KEEPALIVE_SECONDS))\n+                .setKeepAliveTime(Duration.ofSeconds(GRPC_KEEPALIVE_SECONDS * 1000))", "originalCommit": "1db2ad84343595574dd2f8a47075ff5ea0ccda66", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1NDEyMg==", "url": "https://github.com/googleapis/java-spanner/pull/232#discussion_r452954122", "bodyText": "Oops. Thanks for noticing. Nope, that's a typical seconds/milliseconds mistake.", "author": "olavloite", "createdAt": "2020-07-10T16:41:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM2MTE0Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk1NzI3MA==", "url": "https://github.com/googleapis/java-spanner/pull/232#discussion_r452957270", "bodyText": "#339", "author": "olavloite", "createdAt": "2020-07-10T16:47:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjM2MTE0Ng=="}], "type": "inlineReview"}]}