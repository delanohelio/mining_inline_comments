{"pr_number": 1503, "pr_title": "fix java_args not being set during the startup of gateway batch script", "pr_createdAt": "2020-11-27T10:12:56Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1503", "timeline": [{"oid": "1ff1f069d283e5fdefc1e4d32d4232e183248bd4", "url": "https://github.com/wso2/product-microgateway/commit/1ff1f069d283e5fdefc1e4d32d4232e183248bd4", "message": "fix java_args not being set during the startup of gateway batch script", "committedDate": "2020-11-27T09:54:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUwNzQwNg==", "url": "https://github.com/wso2/product-microgateway/pull/1503#discussion_r531507406", "bodyText": "This will use heap dump path with single quotes. @praminda hope that would be okay?", "author": "VirajSalaka", "createdAt": "2020-11-27T10:17:23Z", "path": "distribution/resources/bin/gateway.bat", "diffHunk": "@@ -132,14 +132,10 @@ REM Start the gateway using internal ballerina distribution as the runtime\n     IF %ERRORLEVEL% NEQ 0 (\n         ECHO WARN: Can't find powershell in the system!\n         ECHO WARN: STDERR and STDOUT will be piped to %GW_HOME%\\logs\\microgateway.log\n-        SET JAVA_ARGS=-Xms%JAVA_XMS_VALUE% -Xmx%JAVA_XMX_VALUE% -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=\"%GW_HOME%\\heap-dump.hprof\"", "originalCommit": "1ff1f069d283e5fdefc1e4d32d4232e183248bd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUwNzM2Nw==", "url": "https://github.com/wso2/product-microgateway/pull/1503#discussion_r531507367", "bodyText": "How about renaming this as setupAndRun because this label setup the java args and start the gateway\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                CALL :setJavaArgs %*\n          \n          \n            \n                CALL :setupAndRun %*", "author": "praminda", "createdAt": "2020-11-27T10:17:20Z", "path": "distribution/resources/bin/gateway.bat", "diffHunk": "@@ -112,7 +112,7 @@ IF EXIST %CONF_OUT_FILE% DEL /Q /F %CONF_OUT_FILE%\n     SET usage_path=%GW_HOME%\\api-usage-data\n     CALL SET USAGE_DATA_PATH=%%usage_path:\\=%separator%%%\n \n-    CALL :startGateway %*\n+    CALL :setJavaArgs %*", "originalCommit": "1ff1f069d283e5fdefc1e4d32d4232e183248bd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMTUwODIwNw==", "url": "https://github.com/wso2/product-microgateway/pull/1503#discussion_r531508207", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            :setJavaArgs\n          \n          \n            \n            :setupAndRun", "author": "praminda", "createdAt": "2020-11-27T10:18:53Z", "path": "distribution/resources/bin/gateway.bat", "diffHunk": "@@ -232,14 +228,15 @@ REM We need to issolate the jar file path and wrap it with quotes\n     GOTO :buildBalArgs\n \n REM add the system variable containing log4j properties file\n-:setLog4jProperties\n-    SET LOG4J_CONFIGURATION_FILE=%GW_HOME%\\conf\\log4j2.properties\n-    IF EXIST %LOG4J_CONFIGURATION_FILE% (\n-        SET JAVA_ARGS=%JAVA_ARGS% -Dlog4j.configurationFile=%LOG4J_CONFIGURATION_FILE%\n+:setJavaArgs", "originalCommit": "1ff1f069d283e5fdefc1e4d32d4232e183248bd4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "5b28daeffb4ba98b9ea305ab657b47059979ad40", "url": "https://github.com/wso2/product-microgateway/commit/5b28daeffb4ba98b9ea305ab657b47059979ad40", "message": "fix log4j2 configuration file system variable", "committedDate": "2020-11-27T16:23:47Z", "type": "commit"}, {"oid": "9b00f6d26f01b025d8e7db8e17286b423f663059", "url": "https://github.com/wso2/product-microgateway/commit/9b00f6d26f01b025d8e7db8e17286b423f663059", "message": "Update distribution/resources/bin/gateway.bat\n\nCo-authored-by: Praminda <pramindabj@gmail.com>", "committedDate": "2020-11-27T16:24:45Z", "type": "commit"}, {"oid": "346033260a66770694bfc46aadbc06f4ace88290", "url": "https://github.com/wso2/product-microgateway/commit/346033260a66770694bfc46aadbc06f4ace88290", "message": "Update distribution/resources/bin/gateway.bat\n\nCo-authored-by: Praminda <pramindabj@gmail.com>", "committedDate": "2020-11-27T16:24:53Z", "type": "commit"}]}