{"pr_number": 1331, "pr_title": "Remove unnecessary subscription allowed check.", "pr_createdAt": "2020-07-16T06:31:30Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1331", "timeline": [{"oid": "bdfb2f51d7efc30a1e3ec484a03d1225ccdb2476", "url": "https://github.com/wso2/product-microgateway/commit/bdfb2f51d7efc30a1e3ec484a03d1225ccdb2476", "message": "Remove unnecessary subscription allowed check.", "committedDate": "2020-07-16T06:30:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU3MDA3Nw==", "url": "https://github.com/wso2/product-microgateway/pull/1331#discussion_r455570077", "bodyText": "When subscription validation is enabled and the client id is missing, we need to handle that error scenario as well.", "author": "Rajith90", "createdAt": "2020-07-16T07:34:53Z", "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/handlers/token_introspection_handler.bal", "diffHunk": "@@ -91,7 +91,7 @@ public type KeyValidationHandler object {\n                 any clientId = claims[CLIENT_ID];\n                 boolean isAllowed = false;\n                 // If validateSubscription is true and clientID is present, do the subscription validation.\n-                if (clientId != () && clientId is string && self.validateSubscriptions) {\n+                if (clientId != () && clientId is string) {", "originalCommit": "bdfb2f51d7efc30a1e3ec484a03d1225ccdb2476", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTYwNDYzMg==", "url": "https://github.com/wso2/product-microgateway/pull/1331#discussion_r455604632", "bodyText": "94b2854", "author": "menakaj", "createdAt": "2020-07-16T08:14:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTU3MDA3Nw=="}], "type": "inlineReview"}, {"oid": "94b285498042de08d4df06fe949a5b1e18af1c78", "url": "https://github.com/wso2/product-microgateway/commit/94b285498042de08d4df06fe949a5b1e18af1c78", "message": "Fix review comments.\n\n* Handle scenarios where client id is empty and validate subscription is enabled.", "committedDate": "2020-07-16T08:13:08Z", "type": "commit"}, {"oid": "2be3d215c45c563a471bbceb988c508b00fa970b", "url": "https://github.com/wso2/product-microgateway/commit/2be3d215c45c563a471bbceb988c508b00fa970b", "message": "Add test cases for empty client id scenario.", "committedDate": "2020-07-16T09:16:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTY0NzY5MA==", "url": "https://github.com/wso2/product-microgateway/pull/1331#discussion_r455647690", "bodyText": "Is this print statement intentional?", "author": "AmaliMatharaarachchi", "createdAt": "2020-07-16T09:21:48Z", "path": "components/micro-gateway-core/src/main/ballerina/src/gateway/handlers/token_introspection_handler.bal", "diffHunk": "@@ -90,8 +90,16 @@ public type KeyValidationHandler object {\n                 map<any>? claims = principal?.claims;\n                 any clientId = claims[CLIENT_ID];\n                 boolean isAllowed = false;\n-                // If validateSubscription is true and clientID is present, do the subscription validation.\n-                if (clientId != () && clientId is string && self.validateSubscriptions) {\n+                io:println(\"Client Id ------>>>>>> \", (clientId is () || (clientId is string && clientId == \"\")));", "originalCommit": "2be3d215c45c563a471bbceb988c508b00fa970b", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "796a939d190c2fbc8d52304eb185513fd7b924fd", "url": "https://github.com/wso2/product-microgateway/commit/796a939d190c2fbc8d52304eb185513fd7b924fd", "message": "Removed the print stmt.", "committedDate": "2020-07-16T09:23:10Z", "type": "commit"}]}