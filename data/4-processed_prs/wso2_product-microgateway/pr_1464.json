{"pr_number": 1464, "pr_title": "Control Plane Basic Implementation", "pr_createdAt": "2020-11-03T06:44:46Z", "pr_url": "https://github.com/wso2/product-microgateway/pull/1464", "timeline": [{"oid": "bc0d70e6c337860abcd4ab2d8d980625c330ffcc", "url": "https://github.com/wso2/product-microgateway/commit/bc0d70e6c337860abcd4ab2d8d980625c330ffcc", "message": "implement control plane", "committedDate": "2020-11-02T05:33:29Z", "type": "commit"}, {"oid": "c8d2097c6b8cb0e0683f61c1bbe5e1bae6d86669", "url": "https://github.com/wso2/product-microgateway/commit/c8d2097c6b8cb0e0683f61c1bbe5e1bae6d86669", "message": "Refactor the folder structure", "committedDate": "2020-11-02T05:33:43Z", "type": "commit"}, {"oid": "f5f869227c787f9b1dc55b1c65b8fc92abe39972", "url": "https://github.com/wso2/product-microgateway/commit/f5f869227c787f9b1dc55b1c65b8fc92abe39972", "message": "docker-maven plugin with maven project for go control plane", "committedDate": "2020-11-02T05:33:43Z", "type": "commit"}, {"oid": "1300b7db0dfe887113a5771f337a4c215eaf1042", "url": "https://github.com/wso2/product-microgateway/commit/1300b7db0dfe887113a5771f337a4c215eaf1042", "message": "Java-filter-chain image creation using docker maven plugin", "committedDate": "2020-11-02T05:33:43Z", "type": "commit"}, {"oid": "da86519e546fbcd772950c65571d91f44d8130d1", "url": "https://github.com/wso2/product-microgateway/commit/da86519e546fbcd772950c65571d91f44d8130d1", "message": "complete distribution generation", "committedDate": "2020-11-02T05:33:44Z", "type": "commit"}, {"oid": "bff3f4ec3129d2db5b27f2bbd07540f5b2e6e3be", "url": "https://github.com/wso2/product-microgateway/commit/bff3f4ec3129d2db5b27f2bbd07540f5b2e6e3be", "message": "Restructure code", "committedDate": "2020-11-02T05:33:45Z", "type": "commit"}, {"oid": "8388d1712fe03acff1a18921a9e1059a33b315e7", "url": "https://github.com/wso2/product-microgateway/commit/8388d1712fe03acff1a18921a9e1059a33b315e7", "message": "refactor code", "committedDate": "2020-11-02T06:01:59Z", "type": "commit"}, {"oid": "1ddff9026752e1a9a2aeb22f344aba0ba6e260dd", "url": "https://github.com/wso2/product-microgateway/commit/1ddff9026752e1a9a2aeb22f344aba0ba6e260dd", "message": "Merge branch 'envoy-gw' into envoy-xds-6", "committedDate": "2020-11-02T18:14:47Z", "type": "commit"}, {"oid": "02fee8aa52a8c57e9e7c879e3b27f2ee95e033f4", "url": "https://github.com/wso2/product-microgateway/commit/02fee8aa52a8c57e9e7c879e3b27f2ee95e033f4", "message": "refactor code", "committedDate": "2020-11-03T05:21:18Z", "type": "commit"}, {"oid": "fa82def32116e1ef0a73c739e4951119588cd887", "url": "https://github.com/wso2/product-microgateway/commit/fa82def32116e1ef0a73c739e4951119588cd887", "message": "refactor code", "committedDate": "2020-11-03T05:31:15Z", "type": "commit"}, {"oid": "f1139886c35ca2a90f7d992cdabca6a646d109db", "url": "https://github.com/wso2/product-microgateway/commit/f1139886c35ca2a90f7d992cdabca6a646d109db", "message": "refactor code", "committedDate": "2020-11-03T07:13:33Z", "type": "commit"}, {"oid": "f1139886c35ca2a90f7d992cdabca6a646d109db", "url": "https://github.com/wso2/product-microgateway/commit/f1139886c35ca2a90f7d992cdabca6a646d109db", "message": "refactor code", "committedDate": "2020-11-03T07:13:33Z", "type": "forcePushed"}, {"oid": "08b43866fd7e480a6d21f3eaf603e1d712d976bb", "url": "https://github.com/wso2/product-microgateway/commit/08b43866fd7e480a6d21f3eaf603e1d712d976bb", "message": "provide org name for the docker repository", "committedDate": "2020-11-03T08:27:12Z", "type": "commit"}, {"oid": "26fddf6aa522e4fb0be1051572986087bc046463", "url": "https://github.com/wso2/product-microgateway/commit/26fddf6aa522e4fb0be1051572986087bc046463", "message": "bug fix", "committedDate": "2020-11-03T15:57:33Z", "type": "commit"}, {"oid": "32e1e2983d2e731b385a8b8feb7d45379c776a7d", "url": "https://github.com/wso2/product-microgateway/commit/32e1e2983d2e731b385a8b8feb7d45379c776a7d", "message": "Introduce env variable for mgwHome property, run unit tests prior to the build and  fix the unit test failures", "committedDate": "2020-11-04T10:03:08Z", "type": "commit"}, {"oid": "760d8d54823b3424bc33338c01eeee13782e9fed", "url": "https://github.com/wso2/product-microgateway/commit/760d8d54823b3424bc33338c01eeee13782e9fed", "message": "Change the execution order such that tests run before the build", "committedDate": "2020-11-04T10:11:59Z", "type": "commit"}, {"oid": "ac99a72956551a5757e46254f721bbeff215b9cf", "url": "https://github.com/wso2/product-microgateway/commit/ac99a72956551a5757e46254f721bbeff215b9cf", "message": "change default configuration", "committedDate": "2020-11-05T07:47:48Z", "type": "commit"}, {"oid": "6340b7030f24cb2cd192391c7a0cc3de4fd77ee9", "url": "https://github.com/wso2/product-microgateway/commit/6340b7030f24cb2cd192391c7a0cc3de4fd77ee9", "message": "Merge branch 'envoy-gw' into envoy-xds-6", "committedDate": "2020-11-06T04:12:20Z", "type": "commit"}, {"oid": "fbc4dfba659410a0710035893774d3578f4e2e9e", "url": "https://github.com/wso2/product-microgateway/commit/fbc4dfba659410a0710035893774d3578f4e2e9e", "message": "fix the filter-core issues related with merge operation", "committedDate": "2020-11-06T18:47:20Z", "type": "commit"}, {"oid": "fd881f4f9c08264718f9b0ff19482ec9b76cb70c", "url": "https://github.com/wso2/product-microgateway/commit/fd881f4f9c08264718f9b0ff19482ec9b76cb70c", "message": "Merge branch 'envoy-gw' into envoy-xds-6", "committedDate": "2020-11-09T05:41:31Z", "type": "commit"}, {"oid": "a5aabc10f3ccab3358ba116d85ef49ed2d010c51", "url": "https://github.com/wso2/product-microgateway/commit/a5aabc10f3ccab3358ba116d85ef49ed2d010c51", "message": "add simple script to remove the containers", "committedDate": "2020-11-09T05:41:54Z", "type": "commit"}, {"oid": "38faa931722480b288458f666dc1944e61fd0570", "url": "https://github.com/wso2/product-microgateway/commit/38faa931722480b288458f666dc1944e61fd0570", "message": "refactor code", "committedDate": "2020-11-09T05:44:59Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU2NjY5OA==", "url": "https://github.com/wso2/product-microgateway/pull/1464#discussion_r519566698", "bodyText": "Don't say latest GA release here. we have same issue in our 3xx mgw docker files too", "author": "praminda", "createdAt": "2020-11-09T05:53:27Z", "path": "filter-core/src/main/resources/Dockerfile", "diffHunk": "@@ -0,0 +1,53 @@\n+# --------------------------------------------------------------------\n+# Copyright (c) 2020, WSO2 Inc. (http://wso2.com) All Rights Reserved.\n+#\n+# Licensed under the Apache License, Version 2.0 (the \"License\");\n+# you may not use this file except in compliance with the License.\n+# You may obtain a copy of the License at\n+#\n+# http://www.apache.org/licenses/LICENSE-2.0\n+#\n+# Unless required by applicable law or agreed to in writing, software\n+# distributed under the License is distributed on an \"AS IS\" BASIS,\n+# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+# See the License for the specific language governing permissions and\n+# limitations under the License.\n+# -----------------------------------------------------------------------\n+\n+# TODO: (VirajSalaka) finalize jdk 11 image\n+FROM adoptopenjdk:11.0.8_10-jre-hotspot-bionic\n+LABEL maintainer=\"WSO2 Docker Maintainers <dev@wso2.org>\" \n+\n+ENV LANG=C.UTF-8\n+\n+ARG MG_USER=wso2\n+ARG MG_USER_ID=802\n+ARG MG_USER_GROUP=wso2\n+ARG MG_USER_GROUP_ID=802\n+ARG MG_USER_HOME=/home/${MGW_USER}\n+\n+ARG MG_VERSION=1.0-SNAPSHOT\n+ENV VERSION=${MG_VERSION}\n+\n+ARG MOTD=\"\\n\\\n+ Welcome to WSO2 Docker Resources \\n\\\n+ --------------------------------- \\n\\\n+ This Docker container comprises of a WSO2 product, running with its latest GA release \\n\\", "originalCommit": "38faa931722480b288458f666dc1944e61fd0570", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU2NzMyNw==", "url": "https://github.com/wso2/product-microgateway/pull/1464#discussion_r519567327", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            \n          \n          \n            \n            //package envoy_config_generator", "author": "praminda", "createdAt": "2020-11-09T05:55:44Z", "path": "pilot/pkg/oasparser/configGenerator.go", "diffHunk": "@@ -0,0 +1,87 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package oasparser\n+\n+//package envoy_config_generator", "originalCommit": "38faa931722480b288458f666dc1944e61fd0570", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU2NzQ0NQ==", "url": "https://github.com/wso2/product-microgateway/pull/1464#discussion_r519567445", "bodyText": "Suggested change", "author": "praminda", "createdAt": "2020-11-09T05:56:07Z", "path": "pilot/pkg/oasparser/envoyCodegen/envoyCodegen_internal_test.go", "diffHunk": "@@ -0,0 +1,112 @@\n+/*\n+ *  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+ *\n+ *  Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *  you may not use this file except in compliance with the License.\n+ *  You may obtain a copy of the License at\n+ *\n+ *  http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *  Unless required by applicable law or agreed to in writing, software\n+ *  distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *  See the License for the specific language governing permissions and\n+ *  limitations under the License.\n+ *\n+ */\n+\n+package envoyCodegen\n+\n+import (\n+\t\"strings\"\n+\t\"testing\"\n+\n+\troutev3 \"github.com/envoyproxy/go-control-plane/envoy/config/route/v3\"\n+\tenvoy_type_matcherv3 \"github.com/envoyproxy/go-control-plane/envoy/type/matcher/v3\"\n+\t\"github.com/stretchr/testify/assert\"\n+\t\"github.com/wso2/micro-gw/pkg/oasparser/models/apiDefinition\"\n+)\n+\n+func TestGenerateRoutePaths(t *testing.T) {\n+", "originalCommit": "38faa931722480b288458f666dc1944e61fd0570", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTU2ODU3MA==", "url": "https://github.com/wso2/product-microgateway/pull/1464#discussion_r519568570", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            DNS.1 = localhost\n          \n          \n            \n            DNS.1 = localhost", "author": "praminda", "createdAt": "2020-11-09T06:00:04Z", "path": "resources/certs/req.conf", "diffHunk": "@@ -0,0 +1,17 @@\n+[req]\n+distinguished_name = req_distinguished_name\n+x509_extensions = v3_req\n+prompt = no\n+[req_distinguished_name]\n+C = US\n+ST = VA\n+L = SomeCity\n+O = MyCompany\n+OU = MyDivision\n+CN = www.company.com\n+[v3_req]\n+keyUsage = keyEncipherment, dataEncipherment\n+extendedKeyUsage = serverAuth\n+subjectAltName = @alt_names\n+[alt_names]\n+DNS.1 = localhost", "originalCommit": "38faa931722480b288458f666dc1944e61fd0570", "replyToReviewId": null, "replies": null, "type": "inlineReview"}]}