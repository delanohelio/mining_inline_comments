{"pr_number": 3634, "pr_title": "Fixed missing arguments for bitstamp, kraken and coinmate exchanges in tradehistory api", "pr_createdAt": "2020-08-01T04:49:45Z", "pr_url": "https://github.com/knowm/XChange/pull/3634", "timeline": [{"oid": "7e93b5254dc8944d6834a1dd384faa7a8c8f8df7", "url": "https://github.com/knowm/XChange/commit/7e93b5254dc8944d6834a1dd384faa7a8c8f8df7", "message": "Kraken trade history can be now searched by id span.", "committedDate": "2020-07-15T13:45:15Z", "type": "commit"}, {"oid": "2a75b5f366e9b11d9a77637c6fcbc3b1663f54a6", "url": "https://github.com/knowm/XChange/commit/2a75b5f366e9b11d9a77637c6fcbc3b1663f54a6", "message": "Added jitpack files", "committedDate": "2020-07-15T14:01:33Z", "type": "commit"}, {"oid": "50cb2b16e591ce8c43fb6e0e49c96c10dfea8a3b", "url": "https://github.com/knowm/XChange/commit/50cb2b16e591ce8c43fb6e0e49c96c10dfea8a3b", "message": "Extended trade history with sinceId param.", "committedDate": "2020-07-29T13:56:18Z", "type": "commit"}, {"oid": "85b50864833c99308167313a77c238b9f158f748", "url": "https://github.com/knowm/XChange/commit/85b50864833c99308167313a77c238b9f158f748", "message": "Extended trade history with sinceId param.", "committedDate": "2020-07-29T14:51:16Z", "type": "commit"}, {"oid": "9207b16aa4a7570c5b62fc976dd8a20dceee8483", "url": "https://github.com/knowm/XChange/commit/9207b16aa4a7570c5b62fc976dd8a20dceee8483", "message": "Extended Conmate trade history with transaction start id.", "committedDate": "2020-07-31T09:29:43Z", "type": "commit"}, {"oid": "5d1ea5716a7da1a7364fd33c7369bbde77ccf1ee", "url": "https://github.com/knowm/XChange/commit/5d1ea5716a7da1a7364fd33c7369bbde77ccf1ee", "message": "Added allowed null startId value.", "committedDate": "2020-07-31T10:06:22Z", "type": "commit"}, {"oid": "154846bb04bbf5aa1f7e5d524ce70d227bca6659", "url": "https://github.com/knowm/XChange/commit/154846bb04bbf5aa1f7e5d524ce70d227bca6659", "message": "Changed lastId param to string.", "committedDate": "2020-07-31T10:26:00Z", "type": "commit"}, {"oid": "0f636cbfff10de85d8c111e19e8e3d142b728951", "url": "https://github.com/knowm/XChange/commit/0f636cbfff10de85d8c111e19e8e3d142b728951", "message": "Merge pull request #1 from charvam/develop\n\nBitstamp API sinceId extension", "committedDate": "2020-08-01T04:47:39Z", "type": "commit"}, {"oid": "1e42c7a60a8fd6a3df2a4fc9ee620f71e7e38045", "url": "https://github.com/knowm/XChange/commit/1e42c7a60a8fd6a3df2a4fc9ee620f71e7e38045", "message": "Delete jitpack.yml\n\nNot needed any more.", "committedDate": "2020-09-15T08:11:47Z", "type": "commit"}, {"oid": "c72c27bf5e415b829dff676754773f59b28575c3", "url": "https://github.com/knowm/XChange/commit/c72c27bf5e415b829dff676754773f59b28575c3", "message": "Merge branch 'develop' into develop", "committedDate": "2020-09-15T08:15:42Z", "type": "commit"}, {"oid": "c7f7e1051e4d438e48a359c94cb61ba8345db922", "url": "https://github.com/knowm/XChange/commit/c7f7e1051e4d438e48a359c94cb61ba8345db922", "message": "Kraken trade history can be now searched by id span.", "committedDate": "2020-09-15T08:34:40Z", "type": "commit"}, {"oid": "2cc778682a2eb168edca33424e1f045a7bed712d", "url": "https://github.com/knowm/XChange/commit/2cc778682a2eb168edca33424e1f045a7bed712d", "message": "Added jitpack files", "committedDate": "2020-09-15T08:34:40Z", "type": "commit"}, {"oid": "4a34b5ee97aa9c56d5ae79c67cffaf4c654b1f8b", "url": "https://github.com/knowm/XChange/commit/4a34b5ee97aa9c56d5ae79c67cffaf4c654b1f8b", "message": "Extended trade history with sinceId param.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "db47bd818f8c6415a5b3d41fb559fe498f963c50", "url": "https://github.com/knowm/XChange/commit/db47bd818f8c6415a5b3d41fb559fe498f963c50", "message": "Extended trade history with sinceId param.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "f6e173a566d404aa0bff66d456c26bfd6073f6c5", "url": "https://github.com/knowm/XChange/commit/f6e173a566d404aa0bff66d456c26bfd6073f6c5", "message": "Extended Conmate trade history with transaction start id.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "9d96c6ad374f4503abf8adc6e2de6c91095adb31", "url": "https://github.com/knowm/XChange/commit/9d96c6ad374f4503abf8adc6e2de6c91095adb31", "message": "Added allowed null startId value.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "d09009e7be08393b1b3e5f55bdfb24cfad7a44ea", "url": "https://github.com/knowm/XChange/commit/d09009e7be08393b1b3e5f55bdfb24cfad7a44ea", "message": "Changed lastId param to string.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "79e76208c6954eca75c34ab56bbb71810cc1e12a", "url": "https://github.com/knowm/XChange/commit/79e76208c6954eca75c34ab56bbb71810cc1e12a", "message": "Delete jitpack.yml\n\nNot needed any more.", "committedDate": "2020-09-15T14:22:12Z", "type": "commit"}, {"oid": "6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "url": "https://github.com/knowm/XChange/commit/6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "message": "Merge branch 'develop' of github.com:GENERALBYTESCOM/XChange into develop", "committedDate": "2020-09-15T14:25:43Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczMzgxNg==", "url": "https://github.com/knowm/XChange/pull/3634#discussion_r491733816", "bodyText": "using ExchangeRestProxyBuilder is the new preferred approach\nwhy are you downgrading this to RestProxyFactory?", "author": "walec51", "createdAt": "2020-09-20T20:59:24Z", "path": "xchange-bitstamp/src/main/java/org/knowm/xchange/bitstamp/service/BitstampAccountServiceRaw.java", "diffHunk": "@@ -47,13 +47,15 @@ protected BitstampAccountServiceRaw(Exchange exchange) {\n     super(exchange);\n \n     this.bitstampAuthenticated =\n-        ExchangeRestProxyBuilder.forInterface(\n-                BitstampAuthenticated.class, exchange.getExchangeSpecification())\n-            .build();\n+        RestProxyFactory.createProxy(\n+            BitstampAuthenticated.class,\n+            exchange.getExchangeSpecification().getSslUri(),\n+            getClientConfig());", "originalCommit": "6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNDIxNg==", "url": "https://github.com/knowm/XChange/pull/3634#discussion_r491734216", "bodyText": "+ \"\" i unnecesary\ngetKrakenTradeHistory should support null values", "author": "walec51", "createdAt": "2020-09-20T21:03:37Z", "path": "xchange-kraken/src/main/java/org/knowm/xchange/kraken/service/KrakenTradeService.java", "diffHunk": "@@ -68,32 +68,44 @@ public boolean cancelOrder(CancelOrderParams orderParams) throws IOException {\n \n   /**\n    * @param params Can optionally implement {@link TradeHistoryParamOffset} and {@link\n-   *     TradeHistoryParamsTimeSpan}. All other TradeHistoryParams types will be ignored.\n+   *     TradeHistoryParamsTimeSpan} and {@link TradeHistoryParamsIdSpan} All other\n+   *     TradeHistoryParams types will be ignored.\n    */\n   @Override\n   public UserTrades getTradeHistory(TradeHistoryParams params)\n       throws ExchangeException, IOException {\n \n-    final Long startTime;\n-    final Long endTime;\n-    if (params instanceof TradeHistoryParamsTimeSpan) {\n-      TradeHistoryParamsTimeSpan timeSpan = (TradeHistoryParamsTimeSpan) params;\n-      startTime = DateUtils.toUnixTimeNullSafe(timeSpan.getStartTime());\n-      endTime = DateUtils.toUnixTimeNullSafe(timeSpan.getEndTime());\n-    } else {\n-      startTime = null;\n-      endTime = null;\n-    }\n+    String start = null;\n+    String end = null;\n+\n+    Long offset = null;\n \n-    final Long offset;\n     if (params instanceof TradeHistoryParamOffset) {\n       offset = ((TradeHistoryParamOffset) params).getOffset();\n-    } else {\n-      offset = null;\n+    }\n+\n+    if (params instanceof TradeHistoryParamsIdSpan) {\n+      TradeHistoryParamsIdSpan idSpan = (TradeHistoryParamsIdSpan) params;\n+      if (idSpan.getStartId() != null) {\n+        start = idSpan.getStartId();\n+      }\n+      if (idSpan.getEndId() != null) {\n+        end = idSpan.getEndId();\n+      }\n+    }\n+\n+    if (params instanceof TradeHistoryParamsTimeSpan) {\n+      TradeHistoryParamsTimeSpan timeSpan = (TradeHistoryParamsTimeSpan) params;\n+      if (timeSpan.getStartTime() != null) {\n+        start = DateUtils.toUnixTimeNullSafe(timeSpan.getStartTime()) + \"\";", "originalCommit": "6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNDM4MQ==", "url": "https://github.com/knowm/XChange/pull/3634#discussion_r491734381", "bodyText": "why is this not final any more?", "author": "walec51", "createdAt": "2020-09-20T21:05:18Z", "path": "xchange-bitstamp/src/main/java/org/knowm/xchange/bitstamp/service/BitstampTradeServiceRaw.java", "diffHunk": "@@ -20,20 +21,22 @@\n   private final BitstampAuthenticated bitstampAuthenticated;\n   private final BitstampAuthenticatedV2 bitstampAuthenticatedV2;\n   private final BitstampDigest signatureCreator;\n-  private final String apiKey;\n-  private final SynchronizedValueFactory<Long> nonceFactory;\n+  private String apiKey;\n+  private SynchronizedValueFactory<Long> nonceFactory;", "originalCommit": "6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTczNDYyMQ==", "url": "https://github.com/knowm/XChange/pull/3634#discussion_r491734621", "bodyText": "these ifs are unnecessary\njust doing start = idSpan.getStartId(); for a null idSpan.getStartId() will have the same result in start as it is initialized to null", "author": "walec51", "createdAt": "2020-09-20T21:07:17Z", "path": "xchange-kraken/src/main/java/org/knowm/xchange/kraken/service/KrakenTradeService.java", "diffHunk": "@@ -68,32 +68,44 @@ public boolean cancelOrder(CancelOrderParams orderParams) throws IOException {\n \n   /**\n    * @param params Can optionally implement {@link TradeHistoryParamOffset} and {@link\n-   *     TradeHistoryParamsTimeSpan}. All other TradeHistoryParams types will be ignored.\n+   *     TradeHistoryParamsTimeSpan} and {@link TradeHistoryParamsIdSpan} All other\n+   *     TradeHistoryParams types will be ignored.\n    */\n   @Override\n   public UserTrades getTradeHistory(TradeHistoryParams params)\n       throws ExchangeException, IOException {\n \n-    final Long startTime;\n-    final Long endTime;\n-    if (params instanceof TradeHistoryParamsTimeSpan) {\n-      TradeHistoryParamsTimeSpan timeSpan = (TradeHistoryParamsTimeSpan) params;\n-      startTime = DateUtils.toUnixTimeNullSafe(timeSpan.getStartTime());\n-      endTime = DateUtils.toUnixTimeNullSafe(timeSpan.getEndTime());\n-    } else {\n-      startTime = null;\n-      endTime = null;\n-    }\n+    String start = null;\n+    String end = null;\n+\n+    Long offset = null;\n \n-    final Long offset;\n     if (params instanceof TradeHistoryParamOffset) {\n       offset = ((TradeHistoryParamOffset) params).getOffset();\n-    } else {\n-      offset = null;\n+    }\n+\n+    if (params instanceof TradeHistoryParamsIdSpan) {\n+      TradeHistoryParamsIdSpan idSpan = (TradeHistoryParamsIdSpan) params;\n+      if (idSpan.getStartId() != null) {", "originalCommit": "6fe57c36119cda6baba99905dd4f3bba2a30bb1a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "85f1755fe1bd03ff07cbf62d6feabcee79552755", "url": "https://github.com/knowm/XChange/commit/85f1755fe1bd03ff07cbf62d6feabcee79552755", "message": "fix code review suggestions", "committedDate": "2020-10-09T16:51:12Z", "type": "commit"}, {"oid": "b88e82fab665ad27c9214289a15553bd3cd92ce1", "url": "https://github.com/knowm/XChange/commit/b88e82fab665ad27c9214289a15553bd3cd92ce1", "message": "Merge remote-tracking branch 'upstream/develop' into develop", "committedDate": "2020-10-12T12:55:08Z", "type": "commit"}]}