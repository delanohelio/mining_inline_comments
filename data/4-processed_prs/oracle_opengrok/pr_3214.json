{"pr_number": 3214, "pr_title": "Detect if add() is called while complete() is running", "pr_createdAt": "2020-09-05T01:09:19Z", "pr_url": "https://github.com/oracle/opengrok/pull/3214", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r483921710", "bodyText": "use some more descriptive name ?", "author": "vladak", "createdAt": "2020-09-05T07:17:21Z", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/index/PendingFileCompleter.java", "diffHunk": "@@ -171,6 +185,15 @@ public boolean add(PendingFileRenaming e) {\n      * @throws java.io.IOException if an I/O error occurs\n      */\n     public int complete() throws IOException {\n+        completing = true;\n+        try {\n+            return complete2();\n+        } finally {\n+            completing = false;\n+        }\n+    }\n+\n+    private int complete2() throws IOException {", "originalCommit": "e4a38d327b6810baca52c5a0b56069634c64466f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mzk2NTYwOA==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r483965608", "bodyText": "I used to name these like completeInner() or completeWork() but I now like to keep the name even closer to the public method, and the single 2 character is the smallest difference, yet still communicates sequence. Thoughts?", "author": "idodeclare", "createdAt": "2020-09-05T16:25:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI2MjcyMQ==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r484262721", "bodyText": "perhaps call the outer method completeWrapper() ?", "author": "vladak", "createdAt": "2020-09-07T08:08:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI2MzE5Ng==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r484263196", "bodyText": "actually, complete() and completeInner() would be fine to me as well.", "author": "vladak", "createdAt": "2020-09-07T08:09:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDI2Njg3OA==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r484266878", "bodyText": "Also, I saw somewhere naming scheme such as complete() and doComplete().", "author": "vladak", "createdAt": "2020-09-07T08:16:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjY4OTQyOQ==", "url": "https://github.com/oracle/opengrok/pull/3214#discussion_r486689429", "bodyText": "done as completeInner()", "author": "idodeclare", "createdAt": "2020-09-10T23:33:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzkyMTcxMA=="}], "type": "inlineReview"}, {"oid": "41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "url": "https://github.com/oracle/opengrok/commit/41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "message": "Detect if add() is called while complete() is running", "committedDate": "2020-09-10T23:32:43Z", "type": "commit"}, {"oid": "41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "url": "https://github.com/oracle/opengrok/commit/41202e26ee5216d426e0c6d5b6128dbcdf8d6e3e", "message": "Detect if add() is called while complete() is running", "committedDate": "2020-09-10T23:32:43Z", "type": "forcePushed"}]}