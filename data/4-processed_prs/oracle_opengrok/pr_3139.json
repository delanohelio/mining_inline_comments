{"pr_number": 3139, "pr_title": "Fix #3078 : record user intent for projects", "pr_createdAt": "2020-05-06T02:06:08Z", "pr_url": "https://github.com/oracle/opengrok/pull/3139", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420689751", "bodyText": "I saw the original author using\n$.isFunction(this.config.events.onChange)\nis it worth to keep it consistent?", "author": "tulinkry", "createdAt": "2020-05-06T10:29:12Z", "path": "opengrok-web/src/main/webapp/js/searchable-option-list-2.0.13.js", "diffHunk": "@@ -1093,9 +1097,14 @@\n                         /*\n                          * Modified for OpenGrok in 2017.\n                          */\n-                        if (isOnSearchPage()) {\n-                            $('#xrd').val(\"1\"); // no redirect\n-                            $('#sbox').submit();\n+                        if (self.config.quickDeleteForm) {\n+                            if (self.config.quickDeletePermit) {", "originalCommit": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3MTMyNQ==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420971325", "bodyText": "I'm a JS noob. Can you clarify?", "author": "idodeclare", "createdAt": "2020-05-06T17:38:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDU2MQ==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420974561", "bodyText": "I mean that lower below this code the original author wrote a check for function existence like\n                if ($.isFunction(this.config.events.onChange)) {\n                    this.config.events.onChange.call(this, this, $changedInputs);\n                }\n\nso perhaps we want to use it as well like\nif ($.isFunction(self.config.quickDeletePermit))\n\nto be consistent with the author's style", "author": "tulinkry", "createdAt": "2020-05-06T17:42:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NjE1NA==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420976154", "bodyText": "however, looking at the doc https://api.jquery.com/jQuery.isFunction/ the function is deprecated, so keep it as you have it", "author": "tulinkry", "createdAt": "2020-05-06T17:45:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAxODkyMw==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r421018923", "bodyText": "OK thank you", "author": "idodeclare", "createdAt": "2020-05-06T18:54:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4OTc1MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDkzNg==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r420974936", "bodyText": "why is this no longer needed?", "author": "tulinkry", "createdAt": "2020-05-06T17:43:33Z", "path": "opengrok-indexer/src/main/java/org/opengrok/indexer/web/PageConfig.java", "diffHunk": "@@ -923,10 +923,6 @@ private static void splitByComma(String value, List<String> result) {\n         TreeSet<String> projectNames = new TreeSet<>();\n         List<Project> projects = getEnv().getProjectList();\n \n-        if (projects == null) {\n-            return projectNames;\n-        }\n-", "originalCommit": "6cc55e3b857cb42ed0ddcecd2576f9e4dbf09828", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTAxOTQ3OA==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r421019478", "bodyText": "projects is always defined because RuntimeEnvironment does a new ArrayList.", "author": "idodeclare", "createdAt": "2020-05-06T18:55:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDkzNg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTYwMzIwMw==", "url": "https://github.com/oracle/opengrok/pull/3139#discussion_r421603203", "bodyText": "ok, nice", "author": "tulinkry", "createdAt": "2020-05-07T15:40:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk3NDkzNg=="}], "type": "inlineReview"}, {"oid": "72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "url": "https://github.com/oracle/opengrok/commit/72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "message": "Fix #3078 : record user intent for projects\n\nAvoids the issue of a user interacting in the\nbrowser to ultimately select zero projects but\nthen reviving the project list from cookies.\n\nAlso add options to SOL instead of hard-coding\nOpenGrok-specific elements.", "committedDate": "2020-05-06T18:54:01Z", "type": "commit"}, {"oid": "72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "url": "https://github.com/oracle/opengrok/commit/72b8f04341673cb8dfecb6729b5a5fe7f3b8849f", "message": "Fix #3078 : record user intent for projects\n\nAvoids the issue of a user interacting in the\nbrowser to ultimately select zero projects but\nthen reviving the project list from cookies.\n\nAlso add options to SOL instead of hard-coding\nOpenGrok-specific elements.", "committedDate": "2020-05-06T18:54:01Z", "type": "forcePushed"}]}