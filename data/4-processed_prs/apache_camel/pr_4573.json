{"pr_number": 4573, "pr_title": "CAMEL-15822: [camel-file] fileExist=Move doesn't use FileMoveExisting\u2026", "pr_createdAt": "2020-11-06T03:01:16Z", "pr_url": "https://github.com/apache/camel/pull/4573", "timeline": [{"oid": "e174c23dbdb57809c1fd00aa7fcc1fa226dc1209", "url": "https://github.com/apache/camel/commit/e174c23dbdb57809c1fd00aa7fcc1fa226dc1209", "message": "fix cs", "committedDate": "2020-11-06T03:27:32Z", "type": "forcePushed"}, {"oid": "89c3a8adbec330e3aa7c1dcb3e7f9c87a78468d6", "url": "https://github.com/apache/camel/commit/89c3a8adbec330e3aa7c1dcb3e7f9c87a78468d6", "message": "fix cs", "committedDate": "2020-11-06T04:10:58Z", "type": "forcePushed"}, {"oid": "f1a93eaf9432f328edceeb4e3940d8b09dcce90c", "url": "https://github.com/apache/camel/commit/f1a93eaf9432f328edceeb4e3940d8b09dcce90c", "message": "fix cs", "committedDate": "2020-11-06T05:35:04Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYwODM4MA==", "url": "https://github.com/apache/camel/pull/4573#discussion_r518608380", "bodyText": "I see some of this logic to check the name being repeated across the three strategies, can we somehow unify this logic into a common function to ease maintainability?", "author": "omarsmak", "createdAt": "2020-11-06T08:57:40Z", "path": "components/camel-file/src/main/java/org/apache/camel/component/file/GenericFileDefaultMoveExistingFileStrategy.java", "diffHunk": "@@ -49,14 +49,24 @@ public boolean moveExistingFile(GenericFileEndpoint endpoint, GenericFileOperati\n         dummy.getIn().setHeader(Exchange.FILE_PARENT, parent);\n \n         String to = endpoint.getMoveExisting().evaluate(dummy, String.class);\n-        // we must normalize it (to avoid having both \\ and / in the name which\n-        // confuses java.io.File)\n-        to = FileUtil.normalizePath(to);\n+\n         if (ObjectHelper.isEmpty(to)) {\n             throw new GenericFileOperationFailedException(\n                     \"moveExisting evaluated as empty String, cannot move existing file: \" + fileName);\n         }\n \n+        if (to.length() > 1 && to.endsWith(\"/\")) {", "originalCommit": "f1a93eaf9432f328edceeb4e3940d8b09dcce90c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgxNjI5Mw==", "url": "https://github.com/apache/camel/pull/4573#discussion_r518816293", "bodyText": "the problem is where to put the common logic, FileUtils doesn't seem a good fit.", "author": "luigidemasi", "createdAt": "2020-11-06T15:15:27Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYwODM4MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODgyNjY0MQ==", "url": "https://github.com/apache/camel/pull/4573#discussion_r518826641", "bodyText": "By creating a singleton utility class in the component perhaps?", "author": "omarsmak", "createdAt": "2020-11-06T15:30:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxODYwODM4MA=="}], "type": "inlineReview"}, {"oid": "18e26a212ec3b9e0d8e9b92c974288dfd5206c37", "url": "https://github.com/apache/camel/commit/18e26a212ec3b9e0d8e9b92c974288dfd5206c37", "message": "CAMEL-15822: [camel-file] fileExist=Move doesn't use FileMoveExistingStrategy when tempFile is also configured\n\nfix cs", "committedDate": "2020-11-10T15:07:30Z", "type": "forcePushed"}, {"oid": "fb17fec3aba4cc6e0f2ced08f15579c64c7e3c2a", "url": "https://github.com/apache/camel/commit/fb17fec3aba4cc6e0f2ced08f15579c64c7e3c2a", "message": "CAMEL-15822: [camel-file] fileExist=Move doesn't use FileMoveExistingStrategy when tempFile is also configured\n\nfix cs", "committedDate": "2020-11-10T17:06:20Z", "type": "forcePushed"}, {"oid": "85e8da6ff34fcbeaeefa0ea28b378dc29a6c4d3a", "url": "https://github.com/apache/camel/commit/85e8da6ff34fcbeaeefa0ea28b378dc29a6c4d3a", "message": "CAMEL-15822: [camel-file] fileExist=Move doesn't use FileMoveExistingStrategy when tempFile is also configured", "committedDate": "2020-11-10T17:06:55Z", "type": "commit"}, {"oid": "85e8da6ff34fcbeaeefa0ea28b378dc29a6c4d3a", "url": "https://github.com/apache/camel/commit/85e8da6ff34fcbeaeefa0ea28b378dc29a6c4d3a", "message": "CAMEL-15822: [camel-file] fileExist=Move doesn't use FileMoveExistingStrategy when tempFile is also configured", "committedDate": "2020-11-10T17:06:55Z", "type": "forcePushed"}]}