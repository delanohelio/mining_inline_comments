{"pr_number": 3523, "pr_title": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events", "pr_createdAt": "2020-01-27T18:56:08Z", "pr_url": "https://github.com/apache/camel/pull/3523", "timeline": [{"oid": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "url": "https://github.com/apache/camel/commit/ba0a15bbb1e968367bbcdeb592145bf687644b00", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events", "committedDate": "2020-01-27T18:56:15Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTA4Ng==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425086", "bodyText": "Move to camel-api and add javdoc to class level", "author": "davsclaus", "createdAt": "2020-01-27T19:05:14Z", "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilderLifecycleStrategy.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.builder;\n+\n+public interface RouteBuilderLifecycleStrategy {", "originalCommit": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY1NDU1Mg==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371654552", "bodyText": "even if it is RouteBuilder specific ?", "author": "lburgazzoli", "createdAt": "2020-01-28T08:09:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTA4Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3ODUzOA==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371678538", "bodyText": "Ah sorry yeah thats not doable, so it should be here. Its just that its an api that is now a bit hidden inside core-engine.", "author": "davsclaus", "createdAt": "2020-01-28T09:07:39Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTA4Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE0MQ==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425141", "bodyText": "Fix CS", "author": "davsclaus", "createdAt": "2020-01-27T19:05:22Z", "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -478,12 +493,21 @@ protected void checkInitialized() throws Exception {\n             if (camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory() instanceof ErrorHandlerBuilder) {\n                 setErrorHandlerBuilder((ErrorHandlerBuilder)camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory());\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {", "originalCommit": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MTE4MA==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371691180", "bodyText": "done", "author": "lburgazzoli", "createdAt": "2020-01-28T09:32:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE5NQ==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425195", "bodyText": "Fix CS", "author": "davsclaus", "createdAt": "2020-01-27T19:05:29Z", "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -478,12 +493,21 @@ protected void checkInitialized() throws Exception {\n             if (camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory() instanceof ErrorHandlerBuilder) {\n                 setErrorHandlerBuilder((ErrorHandlerBuilder)camelContext.adapt(ExtendedCamelContext.class).getErrorHandlerFactory());\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {\n+                interceptor.beforeConfigure(this);\n+            }\n+\n             configure();\n             // mark all route definitions as custom prepared because\n             // a route builder prepares the route definitions correctly already\n             for (RouteDefinition route : getRouteCollection().getRoutes()) {\n                 route.markPrepared();\n             }\n+\n+            for (RouteBuilderLifecycleStrategy interceptor: lifecycleInterceptors) {", "originalCommit": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MTIwNw==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371691207", "bodyText": "done", "author": "lburgazzoli", "createdAt": "2020-01-28T09:32:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTE5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTMyNw==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425327", "bodyText": "Make final", "author": "davsclaus", "createdAt": "2020-01-27T19:05:47Z", "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilder.java", "diffHunk": "@@ -71,6 +71,7 @@\n     private List<TransformerBuilder> transformerBuilders = new ArrayList<>();\n     private List<ValidatorBuilder> validatorBuilders = new ArrayList<>();\n     private RoutesDefinition routeCollection = new RoutesDefinition();\n+    private List<RouteBuilderLifecycleStrategy> lifecycleInterceptors = new ArrayList<>();", "originalCommit": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MTIyNw==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371691227", "bodyText": "done", "author": "lburgazzoli", "createdAt": "2020-01-28T09:33:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTMyNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTcwOQ==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371425709", "bodyText": "Fix spacing in javadoc, also for the other method", "author": "davsclaus", "createdAt": "2020-01-27T19:06:40Z", "path": "core/camel-core-engine/src/main/java/org/apache/camel/builder/RouteBuilderLifecycleStrategy.java", "diffHunk": "@@ -0,0 +1,31 @@\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one or more\n+ * contributor license agreements.  See the NOTICE file distributed with\n+ * this work for additional information regarding copyright ownership.\n+ * The ASF licenses this file to You under the Apache License, Version 2.0\n+ * (the \"License\"); you may not use this file except in compliance with\n+ * the License.  You may obtain a copy of the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.camel.builder;\n+\n+public interface RouteBuilderLifecycleStrategy {\n+    /**\n+     * This method is invoked before the {@link RouteBuilder#configure()}method is invoked.", "originalCommit": "ba0a15bbb1e968367bbcdeb592145bf687644b00", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MTI2MQ==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371691261", "bodyText": "done", "author": "lburgazzoli", "createdAt": "2020-01-28T09:33:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTcwOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY5MTMwNg==", "url": "https://github.com/apache/camel/pull/3523#discussion_r371691306", "bodyText": "done", "author": "lburgazzoli", "createdAt": "2020-01-28T09:33:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTQyNTcwOQ=="}], "type": "inlineReview"}, {"oid": "6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "url": "https://github.com/apache/camel/commit/6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events", "committedDate": "2020-01-28T09:32:47Z", "type": "commit"}, {"oid": "6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "url": "https://github.com/apache/camel/commit/6e6f9bbd8c4bf9dfbb3512f9e8fb7f3aa716fa6a", "message": "Add a RouteBuilderLifecycleStrategy to intercept RouteBuilder related events", "committedDate": "2020-01-28T09:32:47Z", "type": "forcePushed"}]}