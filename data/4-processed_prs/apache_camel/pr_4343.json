{"pr_number": 4343, "pr_title": "CAMEL-15617: Fix filter Google PubSub reserved attributes", "pr_createdAt": "2020-10-01T20:49:12Z", "pr_url": "https://github.com/apache/camel/pull/4343", "timeline": [{"oid": "6f5a32357acffb17dcc6213e3b687aeb4265561a", "url": "https://github.com/apache/camel/commit/6f5a32357acffb17dcc6213e3b687aeb4265561a", "message": "CAMEL-15617: Upgrade Google PubSub client", "committedDate": "2020-10-01T20:27:03Z", "type": "commit"}, {"oid": "be0691b1a90bcc53fa9e78d95d901eefadfc24a7", "url": "https://github.com/apache/camel/commit/be0691b1a90bcc53fa9e78d95d901eefadfc24a7", "message": "CAMEL-15617: Refactored creating test topics and subscriptions to be more extensible", "committedDate": "2020-10-01T20:27:17Z", "type": "commit"}, {"oid": "c36a2e39b63313f9a9d6f925e2a096a012e65506", "url": "https://github.com/apache/camel/commit/c36a2e39b63313f9a9d6f925e2a096a012e65506", "message": "CAMEL-15617: Split creating topic and subscription in tests", "committedDate": "2020-10-01T20:27:27Z", "type": "commit"}, {"oid": "f21cdb2aa34e5ebc29b28001378bd23ae11e3584", "url": "https://github.com/apache/camel/commit/f21cdb2aa34e5ebc29b28001378bd23ae11e3584", "message": "CAMEL-15617: Add test to recreate the issue of sending reserved attributes", "committedDate": "2020-10-01T20:28:42Z", "type": "commit"}, {"oid": "202087eb81f07623eb0c27a3967a5f71c6ab582e", "url": "https://github.com/apache/camel/commit/202087eb81f07623eb0c27a3967a5f71c6ab582e", "message": "CAMEL-15617: Remove reserved attributes before sending", "committedDate": "2020-10-01T20:28:48Z", "type": "commit"}, {"oid": "4be87dabab918fd34c7d17670507659aedf5a0bd", "url": "https://github.com/apache/camel/commit/4be87dabab918fd34c7d17670507659aedf5a0bd", "message": "CAMEL-15617: Formatting", "committedDate": "2020-10-01T20:48:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498509315", "bodyText": "Are you sure about removing the exclusions?", "author": "oscerd", "createdAt": "2020-10-01T20:57:46Z", "path": "components/camel-google-pubsub/pom.xml", "diffHunk": "@@ -47,83 +47,7 @@\n             <groupId>com.google.cloud</groupId>\n             <artifactId>google-cloud-pubsub</artifactId>\n             <version>${google-cloud-pubsub-version}</version>\n-            <exclusions>", "originalCommit": "4be87dabab918fd34c7d17670507659aedf5a0bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxNTMxNw==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498515317", "bodyText": "PubSub 1.108.1 has a dependency on GRPC 1.30.2 and it doesn't work with the GRPC 1.28.0 as defined in the parent.\nShould I increase the version in the parent, add a pubsub specific version in the parent of leave it like so?", "author": "alvinkwekel", "createdAt": "2020-10-01T21:11:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxODAwNA==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498518004", "bodyText": "Do you mean 1.27.1? I think it makes sense to add a property placeholder only for pubsub and use it in this component only. We can do the same for the karaf feature. Camel-grpc is based on 1.28.0 so we cannot generally downgrade", "author": "oscerd", "createdAt": "2020-10-01T21:17:22Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU0MTkzMw==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498541933", "bodyText": "Sorry, GRPC 1.30.2. So that would mean a general upgrade. Would that be possible?", "author": "alvinkwekel", "createdAt": "2020-10-01T22:24:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODU0NTk3Mg==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498545972", "bodyText": "I don't think camel-grpc is ready for this. So I believe it would be better to use a specific version only in this component", "author": "oscerd", "createdAt": "2020-10-01T22:38:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODY1NDI3MQ==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498654271", "bodyText": "I've created an explicit dependency on GRPC 1.30.2 now.", "author": "alvinkwekel", "createdAt": "2020-10-02T07:23:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTMxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTY2Mg==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498509662", "bodyText": "I think this require a check on the karaf feature if needed", "author": "oscerd", "createdAt": "2020-10-01T20:58:25Z", "path": "parent/pom.xml", "diffHunk": "@@ -205,7 +205,7 @@\n         <geronimo-ws-metadata-spec-version>1.1.3</geronimo-ws-metadata-spec-version>\n         <gmetric4j-version>1.0.10</gmetric4j-version>\n         <google-guava-version>19.0</google-guava-version>\n-        <google-pubsub-guava-version>28.2-jre</google-pubsub-guava-version>\n+        <google-pubsub-guava-version>29.0-jre</google-pubsub-guava-version>", "originalCommit": "4be87dabab918fd34c7d17670507659aedf5a0bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxODk1Ng==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498518956", "bodyText": "You mean in the camel-dependencies project right? I've updated it there now.", "author": "alvinkwekel", "createdAt": "2020-10-01T21:19:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTY2Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUyMzI4MA==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498523280", "bodyText": "We need to check the camel-googke-pubsub karaf feature in the camel-karaf repo, but we can do that later", "author": "oscerd", "createdAt": "2020-10-01T21:31:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTY2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTg0Ng==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498509846", "bodyText": "I think that's the reason for removing the exclusions, but we need to double check", "author": "oscerd", "createdAt": "2020-10-01T20:58:52Z", "path": "parent/pom.xml", "diffHunk": "@@ -215,7 +215,7 @@\n         <google-api-services-mail-version>v1-rev81-1.22.0</google-api-services-mail-version>\n         <google-api-services-bigquery-version>v2-rev352-1.22.0</google-api-services-bigquery-version>\n         <google-api-services-pubsub-version>v1-rev12-1.22.0</google-api-services-pubsub-version>\n-        <google-cloud-pubsub-version>1.102.0</google-cloud-pubsub-version>\n+        <google-cloud-pubsub-version>1.108.1</google-cloud-pubsub-version>", "originalCommit": "4be87dabab918fd34c7d17670507659aedf5a0bd", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxOTE3OA==", "url": "https://github.com/apache/camel/pull/4343#discussion_r498519178", "bodyText": "Yes that is correct, see my comment above.", "author": "alvinkwekel", "createdAt": "2020-10-01T21:20:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUwOTg0Ng=="}], "type": "inlineReview"}, {"oid": "1eb97eb102a1c9f69965ba960d27c818fc8ebf90", "url": "https://github.com/apache/camel/commit/1eb97eb102a1c9f69965ba960d27c818fc8ebf90", "message": "CAMEL-15617: Update Camel dependencies", "committedDate": "2020-10-01T21:19:09Z", "type": "commit"}, {"oid": "e2e8776075e95a779644c4f67c291dab7832e89e", "url": "https://github.com/apache/camel/commit/e2e8776075e95a779644c4f67c291dab7832e89e", "message": "CAMEL-15617: Explicit GRPC dependencies", "committedDate": "2020-10-02T07:20:05Z", "type": "commit"}, {"oid": "c16450dc800f11c5e594c732570b5bf649f99282", "url": "https://github.com/apache/camel/commit/c16450dc800f11c5e594c732570b5bf649f99282", "message": "CAMEL-15617: Downgrade PubSub to have GRPC version match the Camel GRPC component\n\nRemove obsolete version properties for PubSub\nRemove dependency exclusions", "committedDate": "2020-10-03T11:23:07Z", "type": "commit"}, {"oid": "628b5e85c0e261d4869baf69ec9c71acd2ce0ee2", "url": "https://github.com/apache/camel/commit/628b5e85c0e261d4869baf69ec9c71acd2ce0ee2", "message": "CAMEL-15617: Update Camel dependencies module", "committedDate": "2020-10-05T18:18:51Z", "type": "commit"}, {"oid": "628b5e85c0e261d4869baf69ec9c71acd2ce0ee2", "url": "https://github.com/apache/camel/commit/628b5e85c0e261d4869baf69ec9c71acd2ce0ee2", "message": "CAMEL-15617: Update Camel dependencies module", "committedDate": "2020-10-05T18:18:51Z", "type": "forcePushed"}, {"oid": "3aafad93ffe7b80cb6ce7aa7ec5c864b3789fdd4", "url": "https://github.com/apache/camel/commit/3aafad93ffe7b80cb6ce7aa7ec5c864b3789fdd4", "message": "CAMEL-15617: Update Camel dependencies module - forgot grpc", "committedDate": "2020-10-05T21:12:43Z", "type": "commit"}, {"oid": "c8a494ebd7f0659e0e73c427594eca6e48ba69eb", "url": "https://github.com/apache/camel/commit/c8a494ebd7f0659e0e73c427594eca6e48ba69eb", "message": "CAMEL-15617: Shutdown cached producers on component shutdown", "committedDate": "2020-10-06T19:27:55Z", "type": "commit"}]}