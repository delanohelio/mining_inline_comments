{"pr_number": 3613, "pr_title": "CAMEL-14646: [camel-azure] Add the possibility to set credentials as \u2026", "pr_createdAt": "2020-03-06T17:50:22Z", "pr_url": "https://github.com/apache/camel/pull/3613", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4MTU1NQ==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389081555", "bodyText": "can we introduce another check if either credentialsAccountKey or credentialsAccountName is null and perhaps throw an error if creds and one of the credentialsAccountKey or credentialsAccountName are null?", "author": "omarsmak", "createdAt": "2020-03-06T18:53:57Z", "path": "components/camel-azure/src/main/java/org/apache/camel/component/azure/common/AbstractConfiguration.java", "diffHunk": "@@ -48,4 +55,38 @@ public StorageCredentials getCredentials() {\n     public void setCredentials(StorageCredentials credentials) {\n         this.credentials = credentials;\n     }\n+\n+    public String getCredentialsAccountKey() {\n+        return credentialsAccountKey;\n+    }\n+\n+    /**\n+     * Set the storage account key used during authentication phase\n+     */\n+    public void setCredentialsAccountKey(String credentialsAccountKey) {\n+        this.credentialsAccountKey = credentialsAccountKey;\n+    }\n+\n+    public String getCredentialsAccountName() {\n+        return credentialsAccountName;\n+    }\n+\n+    /**\n+     * Set the storage account name used during authentication phase\n+     */\n+    public void setCredentialsAccountName(String credentialsAccountName) {\n+        this.credentialsAccountName = credentialsAccountName;\n+    }\n+\n+    public  StorageCredentials getAccountCredentials() {\n+        StorageCredentials creds = credentials;\n+        //if  credentials is null, fallback to credentialsAccountKey and credentialsAccountName\n+        if (creds == null) {\n+            if (credentialsAccountKey != null && credentialsAccountName != null) {", "originalCommit": "34f28fb60a80950b25498b89b0fecae8665e403f", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI1OTA2Mw==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389259063", "bodyText": "@omarsmak those checks are covered by BlobServiceComponent.checkCredentials and QueueServiceComponent.checkCredentials. Added unit tests to check those scenarios.", "author": "luigidemasi", "createdAt": "2020-03-07T14:39:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4MTU1NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI1OTY5Mw==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389259693", "bodyText": "Perfect! Thanks a lot", "author": "omarsmak", "createdAt": "2020-03-07T14:50:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA4MTU1NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5ODc0Nw==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389098747", "bodyText": "@UriParam(label = \"security\", secret = true)", "author": "davsclaus", "createdAt": "2020-03-06T19:30:42Z", "path": "components/camel-azure/src/main/java/org/apache/camel/component/azure/common/AbstractConfiguration.java", "diffHunk": "@@ -17,12 +17,19 @@\n package org.apache.camel.component.azure.common;\n \n import com.microsoft.azure.storage.StorageCredentials;\n+import com.microsoft.azure.storage.StorageCredentialsAccountAndKey;\n import org.apache.camel.spi.UriParam;\n \n public abstract class AbstractConfiguration implements Cloneable {\n \n     @UriParam\n     private StorageCredentials credentials;\n+\n+    @UriParam", "originalCommit": "34f28fb60a80950b25498b89b0fecae8665e403f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTA5ODg4NA==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389098884", "bodyText": "@UriParam(label = \"security\", secret = true)", "author": "davsclaus", "createdAt": "2020-03-06T19:30:58Z", "path": "components/camel-azure/src/main/java/org/apache/camel/component/azure/common/AbstractConfiguration.java", "diffHunk": "@@ -17,12 +17,19 @@\n package org.apache.camel.component.azure.common;\n \n import com.microsoft.azure.storage.StorageCredentials;\n+import com.microsoft.azure.storage.StorageCredentialsAccountAndKey;\n import org.apache.camel.spi.UriParam;\n \n public abstract class AbstractConfiguration implements Cloneable {\n \n     @UriParam\n     private StorageCredentials credentials;\n+\n+    @UriParam\n+    private String credentialsAccountKey;\n+\n+    @UriParam", "originalCommit": "34f28fb60a80950b25498b89b0fecae8665e403f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e12909bc8b3dbb9472e64c5778ea42aa72b719d1", "url": "https://github.com/apache/camel/commit/e12909bc8b3dbb9472e64c5778ea42aa72b719d1", "message": "CAMEL-14646: [camel-azure] Add the possibility to set credentials as query parameters", "committedDate": "2020-03-07T14:33:29Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI1OTY3MA==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389259670", "bodyText": "Maybe it would be better to remove these messages to the component class or util class and keep configuration class for configuration related stuff?", "author": "omarsmak", "createdAt": "2020-03-07T14:50:13Z", "path": "components/camel-azure/src/main/java/org/apache/camel/component/azure/common/AbstractConfiguration.java", "diffHunk": "@@ -17,12 +17,25 @@\n package org.apache.camel.component.azure.common;\n \n import com.microsoft.azure.storage.StorageCredentials;\n+import com.microsoft.azure.storage.StorageCredentialsAccountAndKey;\n import org.apache.camel.spi.UriParam;\n \n public abstract class AbstractConfiguration implements Cloneable {\n \n+    public static final String MISSING_BLOB_CREDNTIALS_EXCEPTION_MESSAGE =", "originalCommit": "e12909bc8b3dbb9472e64c5778ea42aa72b719d1", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI2MDYwNg==", "url": "https://github.com/apache/camel/pull/3613#discussion_r389260606", "bodyText": "Yes, you're right. Moved to components", "author": "luigidemasi", "createdAt": "2020-03-07T15:06:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTI1OTY3MA=="}], "type": "inlineReview"}, {"oid": "a2c860592c8d85217b500d631356e2921f2c35ea", "url": "https://github.com/apache/camel/commit/a2c860592c8d85217b500d631356e2921f2c35ea", "message": "CAMEL-14646: [camel-azure] Add the possibility to set credentials as query parameters", "committedDate": "2020-03-07T14:57:56Z", "type": "forcePushed"}, {"oid": "4e7f155cc0c6db6801ed107ec4f8f1e227fb9410", "url": "https://github.com/apache/camel/commit/4e7f155cc0c6db6801ed107ec4f8f1e227fb9410", "message": "CAMEL-14646: [camel-azure] Add the possibility to set credentials as query parameters", "committedDate": "2020-03-07T15:06:21Z", "type": "commit"}, {"oid": "4e7f155cc0c6db6801ed107ec4f8f1e227fb9410", "url": "https://github.com/apache/camel/commit/4e7f155cc0c6db6801ed107ec4f8f1e227fb9410", "message": "CAMEL-14646: [camel-azure] Add the possibility to set credentials as query parameters", "committedDate": "2020-03-07T15:06:21Z", "type": "forcePushed"}]}