{"pr_number": 673, "pr_title": "Java11", "pr_createdAt": "2020-11-11T12:36:51Z", "pr_url": "https://github.com/RIPE-NCC/whois/pull/673", "timeline": [{"oid": "3f52cca5ecfc7a52b41b5132c25d9acc6ce85406", "url": "https://github.com/RIPE-NCC/whois/commit/3f52cca5ecfc7a52b41b5132c25d9acc6ce85406", "message": "Specify Java 9", "committedDate": "2017-06-15T07:06:10Z", "type": "commit"}, {"oid": "5cafc46adde6a1a6ee9db019978fc1c25a55f171", "url": "https://github.com/RIPE-NCC/whois/commit/5cafc46adde6a1a6ee9db019978fc1c25a55f171", "message": "Use latest AspectJ plugin version", "committedDate": "2017-06-15T07:06:28Z", "type": "commit"}, {"oid": "29f9009935a3814a08c328c038f89aab170e46bc", "url": "https://github.com/RIPE-NCC/whois/commit/29f9009935a3814a08c328c038f89aab170e46bc", "message": "Update AspectJ to latest beta", "committedDate": "2017-06-15T07:32:36Z", "type": "commit"}, {"oid": "28e34ff38060d26c9f8aa967a492fa8aadd3c125", "url": "https://github.com/RIPE-NCC/whois/commit/28e34ff38060d26c9f8aa967a492fa8aadd3c125", "message": "Merge branch 'master' into java9", "committedDate": "2018-09-07T09:51:41Z", "type": "commit"}, {"oid": "71c679207422393672a8c97498db523c58957387", "url": "https://github.com/RIPE-NCC/whois/commit/71c679207422393672a8c97498db523c58957387", "message": "Updated pom.xml for Java 11", "committedDate": "2018-09-07T10:16:30Z", "type": "commit"}, {"oid": "83034cbc6732144b5aa5a2a54a8f28df4114c11f", "url": "https://github.com/RIPE-NCC/whois/commit/83034cbc6732144b5aa5a2a54a8f28df4114c11f", "message": "Updated pom.xml for Java 11", "committedDate": "2018-09-07T10:25:39Z", "type": "commit"}, {"oid": "dc0ff06699d2b59fefaf947266ffdcfd5e96288f", "url": "https://github.com/RIPE-NCC/whois/commit/dc0ff06699d2b59fefaf947266ffdcfd5e96288f", "message": "added TODO", "committedDate": "2018-09-07T13:22:10Z", "type": "commit"}, {"oid": "ed4432d2261e3a9398987a92545299e33e70d902", "url": "https://github.com/RIPE-NCC/whois/commit/ed4432d2261e3a9398987a92545299e33e70d902", "message": "Merge branch 'master' into java11", "committedDate": "2018-09-17T12:16:12Z", "type": "commit"}, {"oid": "60bb8f5631c6b16768a18038e74e1baae75d43d3", "url": "https://github.com/RIPE-NCC/whois/commit/60bb8f5631c6b16768a18038e74e1baae75d43d3", "message": "switch to aspect-maven-plugin fork with Java 11 support.", "committedDate": "2019-07-12T14:00:48Z", "type": "commit"}, {"oid": "60ed7cec2dafcb40ac8ef27daffbd8a62a25a220", "url": "https://github.com/RIPE-NCC/whois/commit/60ed7cec2dafcb40ac8ef27daffbd8a62a25a220", "message": "Updated aspectj to latest", "committedDate": "2019-07-12T14:01:05Z", "type": "commit"}, {"oid": "646e75eba18873ca539f2b85f20c9d65d0eb8c78", "url": "https://github.com/RIPE-NCC/whois/commit/646e75eba18873ca539f2b85f20c9d65d0eb8c78", "message": "Merge branch 'master' into java11", "committedDate": "2019-07-12T14:08:06Z", "type": "commit"}, {"oid": "56a47d59d0929fe2c7aa659834b533d4979695b0", "url": "https://github.com/RIPE-NCC/whois/commit/56a47d59d0929fe2c7aa659834b533d4979695b0", "message": "Merge branch 'master' into java11", "committedDate": "2020-01-06T15:24:28Z", "type": "commit"}, {"oid": "1eb40b403971c90839fae179557637a51a2eae4e", "url": "https://github.com/RIPE-NCC/whois/commit/1eb40b403971c90839fae179557637a51a2eae4e", "message": "Switched to io.starter fork of the aspectj-maven-plugin.", "committedDate": "2020-01-06T15:39:57Z", "type": "commit"}, {"oid": "39b8775e617b171847913297cd2ed0f192200dd1", "url": "https://github.com/RIPE-NCC/whois/commit/39b8775e617b171847913297cd2ed0f192200dd1", "message": "aspectj compile fails on root module as there's no sources, ignore this error (for now)", "committedDate": "2020-01-07T11:06:31Z", "type": "commit"}, {"oid": "ad11c3b2734ef4980ba4ade21658f925075884f0", "url": "https://github.com/RIPE-NCC/whois/commit/ad11c3b2734ef4980ba4ade21658f925075884f0", "message": "Updated JAXB dependency (com.sun.xml.bind package was removed in Java 11).", "committedDate": "2020-01-07T11:32:02Z", "type": "commit"}, {"oid": "26ffbdc0baaad621f83b7b6c8644202e6f0b43c5", "url": "https://github.com/RIPE-NCC/whois/commit/26ffbdc0baaad621f83b7b6c8644202e6f0b43c5", "message": "Updated aspectj-maven-plugin dependency in module poms.", "committedDate": "2020-01-07T11:32:32Z", "type": "commit"}, {"oid": "e2d6b40f686c67995c0d552360ce5ad2087ef4b0", "url": "https://github.com/RIPE-NCC/whois/commit/e2d6b40f686c67995c0d552360ce5ad2087ef4b0", "message": "Fixed incorrect import.", "committedDate": "2020-01-07T11:34:27Z", "type": "commit"}, {"oid": "bf54d71e49e707d839370226003f7d0816388b10", "url": "https://github.com/RIPE-NCC/whois/commit/bf54d71e49e707d839370226003f7d0816388b10", "message": "Fixed: Execution default of goal org.apache.maven.plugins:maven-failsafe-plugin:2.18.1:integration-test failed: java.lang.NoClassDefFoundError: javax/sql/DataSource: javax.sql.DataSource\nAdded --add-module argument.", "committedDate": "2020-01-07T12:05:21Z", "type": "commit"}, {"oid": "db9bc4790d364601dbd04df885eed381f7d2ad47", "url": "https://github.com/RIPE-NCC/whois/commit/db9bc4790d364601dbd04df885eed381f7d2ad47", "message": "Fixed: @CallerSensitive annotation removed.\nReplaced with StackWalker (ref. https://bugs.openjdk.java.net/browse/JDK-8154203)\nTODO: need to test the correct parent class is returned.", "committedDate": "2020-01-07T12:22:33Z", "type": "commit"}, {"oid": "526960cb0d1aff4b80e698715d6ecfc0cc7f9717", "url": "https://github.com/RIPE-NCC/whois/commit/526960cb0d1aff4b80e698715d6ecfc0cc7f9717", "message": "Downgrade mockito (broke lots of tests)", "committedDate": "2020-01-07T12:39:20Z", "type": "commit"}, {"oid": "28f73e4eb7ef4f0a42066457f3347c320929a65e", "url": "https://github.com/RIPE-NCC/whois/commit/28f73e4eb7ef4f0a42066457f3347c320929a65e", "message": "Fixed tests (JAXB formatting changed, elements on new lines)", "committedDate": "2020-01-07T16:30:45Z", "type": "commit"}, {"oid": "406ce5e853fbee6ddd29eac44746d6c27693a043", "url": "https://github.com/RIPE-NCC/whois/commit/406ce5e853fbee6ddd29eac44746d6c27693a043", "message": "Added missing java.xml module", "committedDate": "2020-01-07T23:59:03Z", "type": "commit"}, {"oid": "7da248a2de4e24e08fbce74d542fc3c95c7c2f57", "url": "https://github.com/RIPE-NCC/whois/commit/7da248a2de4e24e08fbce74d542fc3c95c7c2f57", "message": "Merge branch 'master' into java11\n\n# Conflicts:\n#\tpom.xml\n#\twhois-api/pom.xml", "committedDate": "2020-11-05T13:57:03Z", "type": "commit"}, {"oid": "46a2e6c45d611fc05752aa8df6ccac3b35dcb587", "url": "https://github.com/RIPE-NCC/whois/commit/46a2e6c45d611fc05752aa8df6ccac3b35dcb587", "message": "--add-modules is incompatible with java8, but needed when we start building java11 binaries", "committedDate": "2020-11-05T14:03:26Z", "type": "commit"}, {"oid": "4b6fcffe151c6f8c5248495adac790d50c68a775", "url": "https://github.com/RIPE-NCC/whois/commit/4b6fcffe151c6f8c5248495adac790d50c68a775", "message": "Replaced reflection/stackwalker magic with explicit passing of AuthenticationStrategy.", "committedDate": "2020-11-10T13:06:14Z", "type": "commit"}, {"oid": "667126fd74a8976ff99426781ede1f3b5f0462d0", "url": "https://github.com/RIPE-NCC/whois/commit/667126fd74a8976ff99426781ede1f3b5f0462d0", "message": "Fix tests (JAXB formatting has changed).", "committedDate": "2020-11-10T18:15:16Z", "type": "commit"}, {"oid": "675adb11bb1c8921928a68710fb2f38e9c98d619", "url": "https://github.com/RIPE-NCC/whois/commit/675adb11bb1c8921928a68710fb2f38e9c98d619", "message": "Emit Java8 binaries (for now).", "committedDate": "2020-11-11T12:36:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNjEzNQ==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521336135", "bodyText": "FYI there is a mockito2 branch (in progress) for this", "author": "eshryane", "createdAt": "2020-11-11T12:50:54Z", "path": "pom.xml", "diffHunk": "@@ -75,6 +76,8 @@\n \n         <mail.version>1.6.2</mail.version>\n         <mariadb-java-client.version>2.5.1</mariadb-java-client.version>\n+\n+        <!-- TODO: [ES] update mockito to 2.21.0 (need to fix mocks in tests) -->", "originalCommit": "675adb11bb1c8921928a68710fb2f38e9c98d619", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521337863", "bodyText": "Why no fork?", "author": "eshryane", "createdAt": "2020-11-11T12:54:02Z", "path": "pom.xml", "diffHunk": "@@ -818,6 +827,7 @@\n                     </excludes>\n                     <runOrder>random</runOrder>\n                     <threadCount>1</threadCount>\n+                    <forkCount>0</forkCount>", "originalCommit": "675adb11bb1c8921928a68710fb2f38e9c98d619", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM0MzMyOQ==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521343329", "bodyText": "Idk, didn't touch this part of the code/build..", "author": "sbusk", "createdAt": "2020-11-11T13:03:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM0MzQxMg==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521343412", "bodyText": "Merge error maybe?", "author": "sbusk", "createdAt": "2020-11-11T13:03:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTkxODQxOQ==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521918419", "bodyText": "Hmm I can't remember what I did there, can you use the config from master and see if that's working?", "author": "eshryane", "createdAt": "2020-11-12T08:23:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTkyNzkxMg==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521927912", "bodyText": "I made the change in bf54d71", "author": "eshryane", "createdAt": "2020-11-12T08:37:53Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAwNzE2NA==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r526007164", "bodyText": "The forkCount does not exist on master..", "author": "sbusk", "createdAt": "2020-11-18T11:16:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAwOTYyMQ==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r526009621", "bodyText": "Good point! Better to leave it out, than disable it using zero.", "author": "eshryane", "createdAt": "2020-11-18T11:20:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzNzg2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzODMzMg==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521338332", "bodyText": "These arguments are commented out in the build step above (--add-modules java.sql,java.xml ), are they needed here?", "author": "eshryane", "createdAt": "2020-11-11T12:54:52Z", "path": "pom.xml", "diffHunk": "@@ -828,14 +838,21 @@\n                         <hazelcast.phone.home.enabled>false</hazelcast.phone.home.enabled>\n                     </systemPropertyVariables>\n                 </configuration>\n+                <dependencies>\n+                    <dependency>\n+                    <groupId>org.ow2.asm</groupId>\n+                        <artifactId>asm</artifactId>\n+                        <version>${asm.version}</version>\n+                    </dependency>\n+                </dependencies>\n             </plugin>\n             <plugin>\n                 <groupId>org.apache.maven.plugins</groupId>\n                 <artifactId>maven-failsafe-plugin</artifactId>\n                 <version>2.22.2</version>\n                 <configuration>\n                     <redirectTestOutputToFile>${test.redirectOutput}</redirectTestOutputToFile>\n-                    <argLine>-Xmx1024m -DjvmId=${surefire.forkNumber} ${failsafe.jacoco.args}</argLine>\n+                    <argLine>-Xmx1024m -DjvmId=${surefire.forkNumber} --add-modules java.sql,java.xml ${failsafe.jacoco.args}</argLine>", "originalCommit": "675adb11bb1c8921928a68710fb2f38e9c98d619", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTM0MzA2OA==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r521343068", "bodyText": "They will be when we start compiling for Java11.", "author": "sbusk", "createdAt": "2020-11-11T13:03:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTMzODMzMg=="}], "type": "inlineReview"}, {"oid": "6651b5652fb993d16348383a8f7ff18eb3088365", "url": "https://github.com/RIPE-NCC/whois/commit/6651b5652fb993d16348383a8f7ff18eb3088365", "message": "Output Java11 binaries.", "committedDate": "2020-11-12T10:44:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE5Njg1NA==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r522196854", "bodyText": "Latest AspectJ is now 1.9.6 (according to dependabot #676 )", "author": "eshryane", "createdAt": "2020-11-12T15:33:15Z", "path": "pom.xml", "diffHunk": "@@ -25,11 +25,12 @@\n         <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n \n         <!-- JAVA version -->\n-        <java.version>1.8</java.version>\n+        <java.version>11</java.version>\n \n         <!-- dependencies -->\n \n-        <aspectj.version>1.8.8</aspectj.version>\n+        <aspectj.version>1.9.4</aspectj.version>", "originalCommit": "6651b5652fb993d16348383a8f7ff18eb3088365", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAwNzYwMQ==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r526007601", "bodyText": "Bumped, thanks", "author": "sbusk", "createdAt": "2020-11-18T11:17:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE5Njg1NA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNjAwOTIxNA==", "url": "https://github.com/RIPE-NCC/whois/pull/673#discussion_r526009214", "bodyText": "I merged #676 the latest is 1.9.6.", "author": "eshryane", "createdAt": "2020-11-18T11:20:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMjE5Njg1NA=="}], "type": "inlineReview"}, {"oid": "e7165dfdd12d5669b94963384aecb7433858d687", "url": "https://github.com/RIPE-NCC/whois/commit/e7165dfdd12d5669b94963384aecb7433858d687", "message": "Jersey 2 32 (#691)\n\n* Update Jersey to 2.32.\r\n\r\n* Line up test assertions.\r\n\r\n* Explicitly register jaxb handler with Jersey client (it's not autodiscovered like its server counterpart).", "committedDate": "2020-11-18T11:13:09Z", "type": "commit"}, {"oid": "bfbc7215d79f7077ad51d5e292ca9fa41a145522", "url": "https://github.com/RIPE-NCC/whois/commit/bfbc7215d79f7077ad51d5e292ca9fa41a145522", "message": "* bump aspectj to 1.9.6\n* skip aspectj generated field in thread safety check", "committedDate": "2020-11-18T12:27:14Z", "type": "commit"}, {"oid": "7d008007a0f241f148903ab4978c12133d1b5b29", "url": "https://github.com/RIPE-NCC/whois/commit/7d008007a0f241f148903ab4978c12133d1b5b29", "message": "Removed forkCount.", "committedDate": "2020-11-19T03:15:21Z", "type": "commit"}, {"oid": "bb1e289ea95d74b6ae079f6a7a64d3f25b22ab99", "url": "https://github.com/RIPE-NCC/whois/commit/bb1e289ea95d74b6ae079f6a7a64d3f25b22ab99", "message": "Merged master.", "committedDate": "2020-11-19T04:18:11Z", "type": "commit"}, {"oid": "dd889af36169681f03045fad177ddb27d5355eb2", "url": "https://github.com/RIPE-NCC/whois/commit/dd889af36169681f03045fad177ddb27d5355eb2", "message": "Merged from master.", "committedDate": "2020-12-03T10:32:12Z", "type": "commit"}, {"oid": "989ccc95456bc6e8c5f9618fca65855eaeef6d0d", "url": "https://github.com/RIPE-NCC/whois/commit/989ccc95456bc6e8c5f9618fca65855eaeef6d0d", "message": "Use latest Java11 whois-build image.", "committedDate": "2020-12-03T10:57:04Z", "type": "commit"}]}