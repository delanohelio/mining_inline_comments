{"pr_number": 889, "pr_title": "Reject app-site requests after fpd data merged", "pr_createdAt": "2020-09-02T13:03:29Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/889", "timeline": [{"oid": "2c5e12230d12e295d2523e10e7eb31cf3788f61c", "url": "https://github.com/prebid/prebid-server-java/commit/2c5e12230d12e295d2523e10e7eb31cf3788f61c", "message": "Reject app-site requests after fpd data merged", "committedDate": "2020-09-02T13:03:02Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA1MzI2MQ==", "url": "https://github.com/prebid/prebid-server-java/pull/889#discussion_r483053261", "bodyText": "Pls change to info log level since it is kind of user input.", "author": "rpanchyk", "createdAt": "2020-09-03T15:10:16Z", "path": "src/main/java/org/prebid/server/auction/ExchangeService.java", "diffHunk": "@@ -637,13 +637,24 @@ private BidderRequest createBidderRequest(BidderPrivacyResult bidderPrivacyResul\n         final ExtBidderConfigFpd fpdConfig = ObjectUtils.firstNonNull(biddersToConfigs.get(bidder),\n                 biddersToConfigs.get(ALL_BIDDERS_CONFIG));\n \n+        final Site bidRequestSite = bidRequest.getSite();\n+        final App bidRequestApp = bidRequest.getApp();\n+        final ObjectNode fpdSite = fpdConfig != null ? fpdConfig.getSite() : null;\n+        final ObjectNode fpdApp = fpdConfig != null ? fpdConfig.getApp() : null;\n+\n+        if (bidRequestSite != null && fpdApp != null || bidRequestApp != null && fpdSite != null) {\n+            logger.error(\"Request to bidder {0} rejected as both bidRequest.site and bidRequest.app are present\"", "originalCommit": "2c5e12230d12e295d2523e10e7eb31cf3788f61c", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "1ddd88cd37d96fc3ea91bfc234ecb2ae05963325", "url": "https://github.com/prebid/prebid-server-java/commit/1ddd88cd37d96fc3ea91bfc234ecb2ae05963325", "message": "Change log level from error to info", "committedDate": "2020-09-04T09:06:07Z", "type": "commit"}]}