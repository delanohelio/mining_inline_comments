{"pr_number": 615, "pr_title": "Add Influxdb tags configuration", "pr_createdAt": "2020-02-07T12:45:57Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/615", "timeline": [{"oid": "efdc604693b7de04d2f6b3c10b896f99aa8854c0", "url": "https://github.com/prebid/prebid-server-java/commit/efdc604693b7de04d2f6b3c10b896f99aa8854c0", "message": "Add influxDb tags", "committedDate": "2020-02-07T11:02:17Z", "type": "commit"}, {"oid": "f3aeb6f28f7fdb42c47e4f7677adbac1e78d08c6", "url": "https://github.com/prebid/prebid-server-java/commit/f3aeb6f28f7fdb42c47e4f7677adbac1e78d08c6", "message": "Additional checks", "committedDate": "2020-02-07T12:22:58Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM4NTY0OQ==", "url": "https://github.com/prebid/prebid-server-java/pull/615#discussion_r376385649", "bodyText": "Hi, Michael!\nThank you for contribution in Prebid Server Java!\ni've a couple of thoughts:\n\nPlease make cfgTags and tags variables to be final.\nUse Collections.emptyMap() instead of new LinkedHashMap<String, String>().\n\nbtw, you can use ObjectUtils.defaultIfNull(...) to get rid off ternary operator.", "author": "rpanchyk", "createdAt": "2020-02-07T13:21:18Z", "path": "src/main/java/org/prebid/server/spring/config/MetricsConfiguration.java", "diffHunk": "@@ -81,7 +83,16 @@ ScheduledReporter influxdbReporter(InfluxdbProperties influxdbProperties, Metric\n                 influxdbProperties.getConnectTimeout(),\n                 influxdbProperties.getReadTimeout(),\n                 influxdbProperties.getPrefix());\n-        final ScheduledReporter reporter = InfluxDbReporter.forRegistry(metricRegistry).build(influxDbSender);\n+        Map<String, String> cfgTags = influxdbProperties.getTags();", "originalCommit": "f3aeb6f28f7fdb42c47e4f7677adbac1e78d08c6", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM5NzQ5NA==", "url": "https://github.com/prebid/prebid-server-java/pull/615#discussion_r376397494", "bodyText": "Thank you!\nBTW, it can be optimized as a one-line one variable:\nfinal Map<String, String> tags = ObjectUtils.defaultIfNull( \n    influxdbProperties.getTags(), \n    Collections.emptyMap()\n);\nIs it a good idea?", "author": "michae1", "createdAt": "2020-02-07T13:47:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM4NTY0OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQwMjQ5Nw==", "url": "https://github.com/prebid/prebid-server-java/pull/615#discussion_r376402497", "bodyText": "Yes, great! Thanks -)", "author": "rpanchyk", "createdAt": "2020-02-07T13:57:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjM4NTY0OQ=="}], "type": "inlineReview"}, {"oid": "9d3f9d5d208aee1fe863782f5fdd87c29295e08d", "url": "https://github.com/prebid/prebid-server-java/commit/9d3f9d5d208aee1fe863782f5fdd87c29295e08d", "message": "Code improvements", "committedDate": "2020-02-07T13:44:23Z", "type": "commit"}, {"oid": "63842739656853a9b3d8969eaea45e949b1bf299", "url": "https://github.com/prebid/prebid-server-java/commit/63842739656853a9b3d8969eaea45e949b1bf299", "message": "Code improvements", "committedDate": "2020-02-07T14:03:42Z", "type": "commit"}]}