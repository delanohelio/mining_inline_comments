{"pr_number": 880, "pr_title": "consumable: Correct width and height reported in response.", "pr_createdAt": "2020-08-26T21:33:32Z", "pr_url": "https://github.com/prebid/prebid-server-java/pull/880", "timeline": [{"oid": "1e7ca8dca60d4860cb6b24928efc54f5bf406067", "url": "https://github.com/prebid/prebid-server-java/commit/1e7ca8dca60d4860cb6b24928efc54f5bf406067", "message": "consumable: Correct width and height reported in response.\n\nPrebid Server now responds with the width and height specified in\nthe Bid Response from Consumable. Previously it would reuse the width\nand height specified in the Bid Request. That older behaviour was\nported from an older version of the prebid.js adapter but is no longer\nvalid.", "committedDate": "2020-08-26T21:30:11Z", "type": "commit"}, {"oid": "27e17d0ddd72eaf83cab03fd33971822570e6690", "url": "https://github.com/prebid/prebid-server-java/commit/27e17d0ddd72eaf83cab03fd33971822570e6690", "message": "consumable: Fix line exceeding maximum line length.", "committedDate": "2020-08-26T21:40:24Z", "type": "commit"}, {"oid": "9dd2508f65a062d4ee291d8ba91f811de69724b4", "url": "https://github.com/prebid/prebid-server-java/commit/9dd2508f65a062d4ee291d8ba91f811de69724b4", "message": "consumable: Delete obsolete test.", "committedDate": "2020-08-26T21:51:16Z", "type": "commit"}, {"oid": "098e1c1714e7cfa6b8585ffdd05624740e23ab0f", "url": "https://github.com/prebid/prebid-server-java/commit/098e1c1714e7cfa6b8585ffdd05624740e23ab0f", "message": "consumable: Update test to include width and height in bid response.", "committedDate": "2020-08-26T22:05:04Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM2NzEzMg==", "url": "https://github.com/prebid/prebid-server-java/pull/880#discussion_r478367132", "bodyText": "redundant. Pls remove", "author": "DGarbar", "createdAt": "2020-08-27T12:06:19Z", "path": "src/main/java/org/prebid/server/bidder/consumable/model/ConsumableDecision.java", "diffHunk": "@@ -25,4 +25,10 @@\n \n     @JsonProperty(\"impressionUrl\")\n     String impressionUrl;\n+\n+    @JsonProperty(\"width\")", "originalCommit": "098e1c1714e7cfa6b8585ffdd05624740e23ab0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM2NzQ4Nw==", "url": "https://github.com/prebid/prebid-server-java/pull/880#discussion_r478367487", "bodyText": "redundant. Pls remove", "author": "DGarbar", "createdAt": "2020-08-27T12:06:53Z", "path": "src/main/java/org/prebid/server/bidder/consumable/model/ConsumableDecision.java", "diffHunk": "@@ -25,4 +25,10 @@\n \n     @JsonProperty(\"impressionUrl\")\n     String impressionUrl;\n+\n+    @JsonProperty(\"width\")\n+    Integer width;\n+\n+    @JsonProperty(\"height\")", "originalCommit": "098e1c1714e7cfa6b8585ffdd05624740e23ab0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3ODM4MzkwNQ==", "url": "https://github.com/prebid/prebid-server-java/pull/880#discussion_r478383905", "bodyText": "You used same values, which we used in Banner.format[0] so for better understanding, lets use diffrent one.\n(Also correct line 306)", "author": "DGarbar", "createdAt": "2020-08-27T12:34:33Z", "path": "src/test/java/org/prebid/server/bidder/consumable/ConsumableBidderTest.java", "diffHunk": "@@ -287,31 +285,12 @@ public void makeBidsShouldSkipDecisionsWithNullClearPrice() throws JsonProcessin\n         assertThat(result.getErrors()).isEmpty();\n     }\n \n-    @Test\n-    public void makeBidsShouldSkipDecisionsWithAbsentImpIdAndAddError() throws JsonProcessingException {\n-        // given\n-        final Map<String, ConsumableDecision> decisionMap = new HashMap<>();\n-        decisionMap.put(\"firstImp\", ConsumableDecision.builder().pricing(ConsumablePricing.of(10.5)).build());\n-        decisionMap.put(\"missing_Imp\", ConsumableDecision.builder().pricing(ConsumablePricing.of(1.1)).build());\n-\n-        final HttpCall<ConsumableBidRequest> httpCall = givenHttpCall(() -> ConsumableBidResponse.of(decisionMap));\n-\n-        // when\n-        final Result<List<BidderBid>> result = consumableBidder.makeBids(httpCall,\n-                givenBidRequestWithTwoImpsAndTwoFormats());\n-\n-        // then\n-        assertThat(result.getErrors()).hasSize(1)\n-                .containsOnly(BidderError.badServerResponse(\"ignoring bid id=request_id, request doesn't contain any \"\n-                        + \"impression with id=missing_Imp\"));\n-        assertThat(result.getValue()).hasSize(1);\n-    }\n-\n     @Test\n     public void makeBidsShouldReturnBannerBidWithExpectedFields() throws JsonProcessingException {\n         // given\n         final HttpCall<ConsumableBidRequest> httpCall = givenHttpCall(identity(),\n                 decision -> decision.pricing(ConsumablePricing.of(11.1)).adId(123L)\n+                        .width(120).height(90)", "originalCommit": "098e1c1714e7cfa6b8585ffdd05624740e23ab0f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "24490ab8303c3679e2316de8acaeb534e067e5c0", "url": "https://github.com/prebid/prebid-server-java/commit/24490ab8303c3679e2316de8acaeb534e067e5c0", "message": "consumable: Remove redundant annotations.", "committedDate": "2020-08-29T02:58:04Z", "type": "commit"}, {"oid": "f383591e25141ee1f6d7a42faaf8696d54049186", "url": "https://github.com/prebid/prebid-server-java/commit/f383591e25141ee1f6d7a42faaf8696d54049186", "message": "consumable: Use different width and height in test.", "committedDate": "2020-08-29T02:58:09Z", "type": "commit"}]}