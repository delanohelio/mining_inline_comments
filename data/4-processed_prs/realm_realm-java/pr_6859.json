{"pr_number": 6859, "pr_title": "Migrate and reenable SyncedRealmTests", "pr_createdAt": "2020-05-15T16:13:17Z", "pr_url": "https://github.com/realm/realm-java/pull/6859", "timeline": [{"oid": "7280895cdf3a295c7ad089f0127a6f29bee1f1d8", "url": "https://github.com/realm/realm-java/commit/7280895cdf3a295c7ad089f0127a6f29bee1f1d8", "message": "Migrate and reenable SyncedRealmTests", "committedDate": "2020-05-15T16:09:17Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQxNjUzNw==", "url": "https://github.com/realm/realm-java/pull/6859#discussion_r426416537", "bodyText": "There was a FIXME in KotlinSyncedRealmTeststo merge it into this one once we migrated to Kotlin. Might as well be part of this PR.", "author": "cmelchior", "createdAt": "2020-05-18T07:22:49Z", "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/SyncedRealmTests.kt", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright 2020 Realm Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.realm\n+\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.platform.app.InstrumentationRegistry\n+import io.realm.SyncTestUtils.Companion.createTestUser\n+import io.realm.entities.AllJavaTypes\n+import io.realm.entities.AllTypes\n+import org.junit.*\n+import org.junit.Assert.*\n+import org.junit.runner.RunWith\n+import java.io.File\n+import java.io.IOException\n+\n+/**\n+ * Testing sync specific methods on [Realm].\n+ */\n+@RunWith(AndroidJUnit4::class)\n+class SyncedRealmTests {", "originalCommit": "7280895cdf3a295c7ad089f0127a6f29bee1f1d8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTkyNzcwNg==", "url": "https://github.com/realm/realm-java/pull/6859#discussion_r429927706", "bodyText": "Done.", "author": "rorbech", "createdAt": "2020-05-25T13:12:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQxNjUzNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjQxNjY2OQ==", "url": "https://github.com/realm/realm-java/pull/6859#discussion_r426416669", "bodyText": "Just delete this test", "author": "cmelchior", "createdAt": "2020-05-18T07:23:04Z", "path": "realm/realm-library/src/androidTestObjectServer/kotlin/io/realm/SyncedRealmTests.kt", "diffHunk": "@@ -0,0 +1,123 @@\n+/*\n+ * Copyright 2020 Realm Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package io.realm\n+\n+import androidx.test.ext.junit.runners.AndroidJUnit4\n+import androidx.test.platform.app.InstrumentationRegistry\n+import io.realm.SyncTestUtils.Companion.createTestUser\n+import io.realm.entities.AllJavaTypes\n+import io.realm.entities.AllTypes\n+import org.junit.*\n+import org.junit.Assert.*\n+import org.junit.runner.RunWith\n+import java.io.File\n+import java.io.IOException\n+\n+/**\n+ * Testing sync specific methods on [Realm].\n+ */\n+@RunWith(AndroidJUnit4::class)\n+class SyncedRealmTests {\n+    @get:Rule\n+    val configFactory = TestSyncConfigurationFactory()\n+\n+    private lateinit var app: RealmApp\n+\n+    @Before\n+    fun setUp() {\n+        app = TestRealmApp()\n+    }\n+\n+    @After\n+    fun tearDown() {\n+        if (this::app.isInitialized) {\n+            app.close()\n+        }\n+    }\n+\n+    // Test for https://github.com/realm/realm-java/issues/6619\n+    @Test\n+    @Ignore(\"Only relates to query based sync, will be going to be removed anyway\")\n+    @Throws(IOException::class)\n+    fun testUpgradingOptionalSubscriptionFields() {", "originalCommit": "7280895cdf3a295c7ad089f0127a6f29bee1f1d8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e5a0c51af784d2e43db67bd8a8529dfcebf70c42", "url": "https://github.com/realm/realm-java/commit/e5a0c51af784d2e43db67bd8a8529dfcebf70c42", "message": "Merge branch 'v10' into cr/sync-test-migration-syncedrealm", "committedDate": "2020-05-25T12:01:35Z", "type": "commit"}, {"oid": "13592751829f7cfbffd023592856fcdaf146399f", "url": "https://github.com/realm/realm-java/commit/13592751829f7cfbffd023592856fcdaf146399f", "message": "Remove query based sync test case", "committedDate": "2020-05-25T12:03:23Z", "type": "commit"}, {"oid": "976b210cd674e9204976fff13c234cbd227ecb47", "url": "https://github.com/realm/realm-java/commit/976b210cd674e9204976fff13c234cbd227ecb47", "message": "Merged all Kotlin sync realm tests to same class", "committedDate": "2020-05-25T12:25:32Z", "type": "commit"}, {"oid": "565ce63530f725b2b093b04d31140246e1875f06", "url": "https://github.com/realm/realm-java/commit/565ce63530f725b2b093b04d31140246e1875f06", "message": "Updated SyncedRealmTests to `use`-pattern", "committedDate": "2020-05-25T13:07:27Z", "type": "commit"}, {"oid": "746b41dbad4c096dc71daec96e2b37c948079e01", "url": "https://github.com/realm/realm-java/commit/746b41dbad4c096dc71daec96e2b37c948079e01", "message": "Fix ignored test no longer crashing server", "committedDate": "2020-05-25T13:10:01Z", "type": "commit"}, {"oid": "6696e6d51648afcb98e97eaabc9f01eb65b82033", "url": "https://github.com/realm/realm-java/commit/6696e6d51648afcb98e97eaabc9f01eb65b82033", "message": "Merge branch 'v10' into cr/sync-test-migration-syncedrealm", "committedDate": "2020-05-26T08:05:49Z", "type": "commit"}, {"oid": "d090b99a465e35daedfb8fba9caff9ab85623dc5", "url": "https://github.com/realm/realm-java/commit/d090b99a465e35daedfb8fba9caff9ab85623dc5", "message": "Fix test using fake user", "committedDate": "2020-05-26T09:43:03Z", "type": "commit"}, {"oid": "161d7967444b20b620145529fad7745acbbc2afd", "url": "https://github.com/realm/realm-java/commit/161d7967444b20b620145529fad7745acbbc2afd", "message": "Add FIXME to ignored flaky test", "committedDate": "2020-05-26T10:36:42Z", "type": "commit"}]}