{"pr_number": 7089, "pr_title": "Automate 10.x releases", "pr_createdAt": "2020-09-09T13:45:44Z", "pr_url": "https://github.com/realm/realm-java/pull/7089", "timeline": [{"oid": "ec742a00d90ea238e17d0750c18cd5d65ca6441c", "url": "https://github.com/realm/realm-java/commit/ec742a00d90ea238e17d0750c18cd5d65ca6441c", "message": "Add support for automating releases using Git tags", "committedDate": "2020-09-09T11:13:13Z", "type": "commit"}, {"oid": "15c13f0f8919eccee6e3114c3e0bc48cf23e1bdf", "url": "https://github.com/realm/realm-java/commit/15c13f0f8919eccee6e3114c3e0bc48cf23e1bdf", "message": "Add support for passing in credentials", "committedDate": "2020-09-09T13:40:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5MDA4MQ==", "url": "https://github.com/realm/realm-java/pull/7089#discussion_r487690081", "bodyText": "I think it would be more readable if adding all credentials in one go, like: https://stackoverflow.com/a/47476880", "author": "rorbech", "createdAt": "2020-09-14T06:58:14Z", "path": "Jenkinsfile", "diffHunk": "@@ -270,6 +297,28 @@ def runBuild(abiFilter, instrumentationTestTarget) {\n   }\n }\n \n+def runRelease() {\n+  stage('Publish Release') {\n+    withCredentials([[ $class: 'StringBinding', credentialsId: 'slack-webhook-java-ci-channel', variable: 'SLACK_URL_CI']]) {", "originalCommit": "15c13f0f8919eccee6e3114c3e0bc48cf23e1bdf", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzcwMzI3OQ==", "url": "https://github.com/realm/realm-java/pull/7089#discussion_r487703279", "bodyText": "Ah, didn't know that was possible. Yes, that would be much more readable \ud83d\udc4d", "author": "cmelchior", "createdAt": "2020-09-14T07:25:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5MDA4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NzY5MDQ1MQ==", "url": "https://github.com/realm/realm-java/pull/7089#discussion_r487690451", "bodyText": "Missing new line at end of file.", "author": "rorbech", "createdAt": "2020-09-14T06:59:08Z", "path": "Jenkinsfile", "diffHunk": "@@ -386,3 +435,12 @@ def gradle(String commands) {\n def gradle(String relativePath, String commands) {\n   sh \"cd ${relativePath} && chmod +x gradlew && ./gradlew ${commands} --stacktrace\"\n }\n+\n+def readGitTag() {\n+  def command = 'git describe --exact-match --tags HEAD'\n+  def returnStatus = sh(returnStatus: true, script: command)\n+  if (returnStatus != 0) {\n+    return null\n+  }\n+  return sh(returnStdout: true, script: command).trim()\n+}", "originalCommit": "15c13f0f8919eccee6e3114c3e0bc48cf23e1bdf", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d310fb516d0aa811bfe72d8ffd0eff2877f7b66f", "url": "https://github.com/realm/realm-java/commit/d310fb516d0aa811bfe72d8ffd0eff2877f7b66f", "message": "Simply nesting of credentials", "committedDate": "2020-09-16T08:32:04Z", "type": "commit"}, {"oid": "e8f9ad9588ec5e160cd7f44e7a21494782720321", "url": "https://github.com/realm/realm-java/commit/e8f9ad9588ec5e160cd7f44e7a21494782720321", "message": "Lazy evaluate arguments from the commandline", "committedDate": "2020-09-16T09:00:07Z", "type": "commit"}, {"oid": "ade3369a17f09f449e3a6144baecfcca434ae48e", "url": "https://github.com/realm/realm-java/commit/ade3369a17f09f449e3a6144baecfcca434ae48e", "message": "Lazy evaluate string correctly", "committedDate": "2020-09-16T10:34:35Z", "type": "commit"}]}