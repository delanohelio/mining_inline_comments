{"pr_number": 1572, "pr_title": "Upgrade to v0.11.1 spec", "pr_createdAt": "2020-04-10T05:05:45Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1572", "timeline": [{"oid": "105b34ea8fada11f41f586e9452ddc47961edbfd", "url": "https://github.com/ConsenSys/teku/commit/105b34ea8fada11f41f586e9452ddc47961edbfd", "message": "Apply changes from beacon-chain.md (and knock on effects).", "committedDate": "2020-04-10T05:04:52Z", "type": "commit"}, {"oid": "9ab74e9b0c21d94ceb10cafdde7e6b290ac995d8", "url": "https://github.com/ConsenSys/teku/commit/9ab74e9b0c21d94ceb10cafdde7e6b290ac995d8", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into v0.11.1", "committedDate": "2020-04-10T05:06:16Z", "type": "commit"}, {"oid": "af5acaa887cef53621f624b48915e95f7b0224bf", "url": "https://github.com/ConsenSys/teku/commit/af5acaa887cef53621f624b48915e95f7b0224bf", "message": "Fix Eth1DataManagerTest.", "committedDate": "2020-04-10T06:38:34Z", "type": "commit"}, {"oid": "e53201f1e22b36ad59cc9abbdb6fe4a49a8e1f3a", "url": "https://github.com/ConsenSys/teku/commit/e53201f1e22b36ad59cc9abbdb6fe4a49a8e1f3a", "message": "Fix genesis generator.", "committedDate": "2020-04-10T06:46:38Z", "type": "commit"}, {"oid": "eb8d006a2fff15213212295cdd892c6c36af4128", "url": "https://github.com/ConsenSys/teku/commit/eb8d006a2fff15213212295cdd892c6c36af4128", "message": "Remove ResponseRpcDecoderTestWithSaphireTestnetData.java as we're deliberately not compatible with that 0.9.1 data.", "committedDate": "2020-04-10T07:12:37Z", "type": "commit"}, {"oid": "13aebbfcf38a0b2e2f6992bd0a9a3e99e38843d8", "url": "https://github.com/ConsenSys/teku/commit/13aebbfcf38a0b2e2f6992bd0a9a3e99e38843d8", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into v0.11.1", "committedDate": "2020-04-13T23:23:26Z", "type": "commit"}, {"oid": "9415489e731c9aee6f26c74aa53fee8f645e1b17", "url": "https://github.com/ConsenSys/teku/commit/9415489e731c9aee6f26c74aa53fee8f645e1b17", "message": "Update expected signing roots for SignerTest.", "committedDate": "2020-04-13T23:38:38Z", "type": "commit"}, {"oid": "a0952985688c00a90ba5ff52a060671ae3460d57", "url": "https://github.com/ConsenSys/teku/commit/a0952985688c00a90ba5ff52a060671ae3460d57", "message": "Handle tests adding blocks more than one epoch in the future.", "committedDate": "2020-04-13T23:48:22Z", "type": "commit"}, {"oid": "b9ebc86216f96a71ad91deb88695bbddcef2bbe5", "url": "https://github.com/ConsenSys/teku/commit/b9ebc86216f96a71ad91deb88695bbddcef2bbe5", "message": "Implement equals and hashCode.", "committedDate": "2020-04-13T23:58:58Z", "type": "commit"}, {"oid": "4cbfc62956e7b805975a3ff0df9a55fb047b6cdb", "url": "https://github.com/ConsenSys/teku/commit/4cbfc62956e7b805975a3ff0df9a55fb047b6cdb", "message": "Spotless.", "committedDate": "2020-04-14T00:02:25Z", "type": "commit"}, {"oid": "19d4aaac46f75c2ca7a2473561b1cbf8b77ad1ad", "url": "https://github.com/ConsenSys/teku/commit/19d4aaac46f75c2ca7a2473561b1cbf8b77ad1ad", "message": "Implement get_forkchoice_store.", "committedDate": "2020-04-14T01:50:36Z", "type": "commit"}, {"oid": "6d44a7329be080fb7cf5d9b1740344521d52dc64", "url": "https://github.com/ConsenSys/teku/commit/6d44a7329be080fb7cf5d9b1740344521d52dc64", "message": "Split out helper methods from on_attestation.", "committedDate": "2020-04-14T02:16:37Z", "type": "commit"}, {"oid": "d8bda78487c0597eac6dffb8afe8702864eeb4bb", "url": "https://github.com/ConsenSys/teku/commit/d8bda78487c0597eac6dffb8afe8702864eeb4bb", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into v0.11.1", "committedDate": "2020-04-14T02:50:09Z", "type": "commit"}, {"oid": "f8df60ccc68dafee0ade113e11e5545876f34fb8", "url": "https://github.com/ConsenSys/teku/commit/f8df60ccc68dafee0ade113e11e5545876f34fb8", "message": "Merge branch 'master' into v0.11.1", "committedDate": "2020-04-14T17:26:29Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NDUyOQ==", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408354529", "bodyText": "Seems like these 3 variables could go into the Constants file", "author": "cemozerr", "createdAt": "2020-04-14T18:40:38Z", "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/EpochProcessorUtil.java", "diffHunk": "@@ -612,22 +610,22 @@ public static void process_final_updates(MutableBeaconState state) {\n     for (int index = 0; index < validators.size(); index++) {\n       Validator validator = validators.get(index);\n       UnsignedLong balance = balances.get(index);\n-      long HALF_INCREMENT = Constants.EFFECTIVE_BALANCE_INCREMENT / 2;\n-      if (balance.compareTo(validator.getEffective_balance()) < 0\n-          || validator\n-                  .getEffective_balance()\n-                  .plus(UnsignedLong.valueOf(3 * HALF_INCREMENT))\n-                  .compareTo(balance)\n-              < 0) {\n \n+      final UnsignedLong hysteresis_increment =\n+          EFFECTIVE_BALANCE_INCREMENT.dividedBy(HYSTERESIS_QUOTIENT);", "originalCommit": "f8df60ccc68dafee0ade113e11e5545876f34fb8", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODUwNDM3Nw==", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408504377", "bodyText": "If the constants were actually constants yes, but we'd need to be able to reset them after loading from the constants yaml file.", "author": "ajsutton", "createdAt": "2020-04-15T00:02:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NDUyOQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM1NTQxMw==", "url": "https://github.com/ConsenSys/teku/pull/1572#discussion_r408355413", "bodyText": "nit:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        forkIfno.getFork(),\n          \n          \n            \n                        forkInfo.getFork(),", "author": "cemozerr", "createdAt": "2020-04-14T18:42:12Z", "path": "ethereum/core/src/main/java/tech/pegasys/artemis/core/Signer.java", "diffHunk": "@@ -35,29 +36,49 @@ public Signer(final MessageSignerService signerService) {\n     this.signerService = signerService;\n   }\n \n-  public SafeFuture<BLSSignature> createRandaoReveal(final UnsignedLong epoch, final Fork fork) {\n-    Bytes domain = get_domain(Constants.DOMAIN_RANDAO, epoch, fork);\n+  public SafeFuture<BLSSignature> createRandaoReveal(\n+      final UnsignedLong epoch, final ForkInfo forkIfno) {\n+    Bytes domain =\n+        get_domain(\n+            Constants.DOMAIN_RANDAO,\n+            epoch,\n+            forkIfno.getFork(),", "originalCommit": "f8df60ccc68dafee0ade113e11e5545876f34fb8", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0d0714139f31d4c2ab67bef4910da950f2ec5c06", "url": "https://github.com/ConsenSys/teku/commit/0d0714139f31d4c2ab67bef4910da950f2ec5c06", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into v0.11.1", "committedDate": "2020-04-14T21:01:14Z", "type": "commit"}, {"oid": "23bc3836396a57489da3ac18e797741367cfffda", "url": "https://github.com/ConsenSys/teku/commit/23bc3836396a57489da3ac18e797741367cfffda", "message": "Update schema.", "committedDate": "2020-04-14T21:04:19Z", "type": "commit"}, {"oid": "d144c9282d92d437b6883f276f010f1f5e541908", "url": "https://github.com/ConsenSys/teku/commit/d144c9282d92d437b6883f276f010f1f5e541908", "message": "Spotless.", "committedDate": "2020-04-14T21:09:12Z", "type": "commit"}, {"oid": "47ef6d5d959df983348ac8523ac879c8fa2c19c1", "url": "https://github.com/ConsenSys/teku/commit/47ef6d5d959df983348ac8523ac879c8fa2c19c1", "message": "Fix typo", "committedDate": "2020-04-15T00:02:45Z", "type": "commit"}, {"oid": "5bb823fb88a589a351b731b7583fd2ebae11ca90", "url": "https://github.com/ConsenSys/teku/commit/5bb823fb88a589a351b731b7583fd2ebae11ca90", "message": "Merge branch 'master' into v0.11.1", "committedDate": "2020-04-15T01:00:50Z", "type": "commit"}]}