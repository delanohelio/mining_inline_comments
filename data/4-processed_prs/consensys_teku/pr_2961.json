{"pr_number": 2961, "pr_title": "Move BlockManager class into ethereum:statetransition package", "pr_createdAt": "2020-10-13T19:16:11Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2961", "timeline": [{"oid": "0237bb5e0feb089a18100d19723d9fa82ee822c5", "url": "https://github.com/ConsenSys/teku/commit/0237bb5e0feb089a18100d19723d9fa82ee822c5", "message": "Remove eventBus when propagating blocks from network to block manager", "committedDate": "2020-10-13T19:11:51Z", "type": "commit"}, {"oid": "4b3a43d1cf449d9c76cd85b67cfbeb1ea3dabc6c", "url": "https://github.com/ConsenSys/teku/commit/4b3a43d1cf449d9c76cd85b67cfbeb1ea3dabc6c", "message": "Run spotless", "committedDate": "2020-10-13T19:15:07Z", "type": "commit"}, {"oid": "7646ad0478ba7cc704dc7498b2b0c985213df359", "url": "https://github.com/ConsenSys/teku/commit/7646ad0478ba7cc704dc7498b2b0c985213df359", "message": "Remove onGossipedBlock method from BlockManager", "committedDate": "2020-10-13T19:38:00Z", "type": "commit"}, {"oid": "13bc1c7be21ee022b2f55f2711227d81d3d24bb3", "url": "https://github.com/ConsenSys/teku/commit/13bc1c7be21ee022b2f55f2711227d81d3d24bb3", "message": "Run spotless", "committedDate": "2020-10-13T19:38:27Z", "type": "commit"}, {"oid": "4f8c0bd109b478916bd8e7114316e9f392415497", "url": "https://github.com/ConsenSys/teku/commit/4f8c0bd109b478916bd8e7114316e9f392415497", "message": "Move BlockManager from sync to ethereum:statetransition", "committedDate": "2020-10-13T20:11:20Z", "type": "commit"}, {"oid": "6aa25828df58a807064b05b8314027eb727ab16f", "url": "https://github.com/ConsenSys/teku/commit/6aa25828df58a807064b05b8314027eb727ab16f", "message": "Run spotless", "committedDate": "2020-10-13T20:11:32Z", "type": "commit"}, {"oid": "b6191855a493e4d971121138380a039981df6c2c", "url": "https://github.com/ConsenSys/teku/commit/b6191855a493e4d971121138380a039981df6c2c", "message": "Fix testFixture error", "committedDate": "2020-10-13T20:17:48Z", "type": "commit"}, {"oid": "446d194073be21405ca75ee1d206030467483482", "url": "https://github.com/ConsenSys/teku/commit/446d194073be21405ca75ee1d206030467483482", "message": "Run spotless", "committedDate": "2020-10-13T20:28:16Z", "type": "commit"}, {"oid": "4dde201c03096cf46032ae2c87f69c268b1aac7a", "url": "https://github.com/ConsenSys/teku/commit/4dde201c03096cf46032ae2c87f69c268b1aac7a", "message": "Fix gossip message handler test", "committedDate": "2020-10-14T17:17:20Z", "type": "commit"}, {"oid": "7b3afa4f268e569226a3de4cb43b4a1405d442cc", "url": "https://github.com/ConsenSys/teku/commit/7b3afa4f268e569226a3de4cb43b4a1405d442cc", "message": "Fix block propagation integration test", "committedDate": "2020-10-14T18:03:14Z", "type": "commit"}, {"oid": "661c1e87cafb4fc1863c50003021a44abc963ddd", "url": "https://github.com/ConsenSys/teku/commit/661c1e87cafb4fc1863c50003021a44abc963ddd", "message": "Run spotless", "committedDate": "2020-10-14T18:03:24Z", "type": "commit"}, {"oid": "3d037d8699fd9be71852eed810e0bedd383fb04d", "url": "https://github.com/ConsenSys/teku/commit/3d037d8699fd9be71852eed810e0bedd383fb04d", "message": "Merge remote-tracking branch 'remotes/origin/master' into removeEventBusInBlockTopicHandler", "committedDate": "2020-10-14T19:41:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0NzA2Nw==", "url": "https://github.com/ConsenSys/teku/pull/2961#discussion_r504947067", "bodyText": "I don't think I'd expose this - just have callers use importBlock and then the caller should decide how they want to handle the result. I know it will mean a bunch of extra .reportExceptions() calls in places that otherwise could use a method reference, but I'm always very nervous about methods that automatically ignore results.", "author": "ajsutton", "createdAt": "2020-10-14T20:17:35Z", "path": "ethereum/statetransition/src/main/java/tech/pegasys/teku/statetransition/block/BlockManager.java", "diffHunk": "@@ -121,12 +118,12 @@ void onBlockImported(ImportedBlockEvent blockImportedEvent) {\n     children.forEach(this::importBlockIgnoringResult);\n   }\n \n-  private void importBlockIgnoringResult(final SignedBeaconBlock block) {\n+  public void importBlockIgnoringResult(final SignedBeaconBlock block) {", "originalCommit": "3d037d8699fd9be71852eed810e0bedd383fb04d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk3MzY3Mg==", "url": "https://github.com/ConsenSys/teku/pull/2961#discussion_r504973672", "bodyText": "Sounds good.", "author": "cemozerr", "createdAt": "2020-10-14T21:09:32Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk0NzA2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1MjUyNw==", "url": "https://github.com/ConsenSys/teku/pull/2961#discussion_r504952527", "bodyText": "Stray println.", "author": "ajsutton", "createdAt": "2020-10-14T20:27:56Z", "path": "sync/src/integration-test/java/tech/pegasys/teku/sync/BlockPropagationIntegrationTest.java", "diffHunk": "@@ -103,19 +103,20 @@ public void shouldFetchUnknownAncestorsOfPropagatedBlock(\n \n     // Propagate new block\n     final SignedBeaconBlock newBlock = node1.chainUtil().createBlockAtSlot(currentSlot);\n+    System.out.println(newBlock.getSlot());", "originalCommit": "3d037d8699fd9be71852eed810e0bedd383fb04d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk4NDIzMQ==", "url": "https://github.com/ConsenSys/teku/pull/2961#discussion_r504984231", "bodyText": "Removed.", "author": "cemozerr", "createdAt": "2020-10-14T21:31:55Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDk1MjUyNw=="}], "type": "inlineReview"}, {"oid": "9b43658d31391334bd6fd2cef7ac9be444078272", "url": "https://github.com/ConsenSys/teku/commit/9b43658d31391334bd6fd2cef7ac9be444078272", "message": "Explicitly handle the result when block import fails", "committedDate": "2020-10-14T21:26:05Z", "type": "commit"}, {"oid": "b4dbce653b494c98a1f4e65d80ad971136d06418", "url": "https://github.com/ConsenSys/teku/commit/b4dbce653b494c98a1f4e65d80ad971136d06418", "message": "Remove stray println and run spotless", "committedDate": "2020-10-14T21:26:36Z", "type": "commit"}, {"oid": "0a729262ed268085bc04505c6114ebcd9284f21e", "url": "https://github.com/ConsenSys/teku/commit/0a729262ed268085bc04505c6114ebcd9284f21e", "message": "Fix integration test", "committedDate": "2020-10-14T21:32:16Z", "type": "commit"}, {"oid": "9020083309d8d2a2e48fb753447ad50d13e71274", "url": "https://github.com/ConsenSys/teku/commit/9020083309d8d2a2e48fb753447ad50d13e71274", "message": "Run spotless", "committedDate": "2020-10-14T21:33:58Z", "type": "commit"}, {"oid": "258a4c1c8b812cf05b44fe7e89ae53f94a418667", "url": "https://github.com/ConsenSys/teku/commit/258a4c1c8b812cf05b44fe7e89ae53f94a418667", "message": "Fix integration test issue", "committedDate": "2020-10-15T14:48:40Z", "type": "commit"}, {"oid": "07e27ea0bfd72549e76a24bba0d3af671324c7e4", "url": "https://github.com/ConsenSys/teku/commit/07e27ea0bfd72549e76a24bba0d3af671324c7e4", "message": "Fix naming", "committedDate": "2020-10-15T14:56:17Z", "type": "commit"}, {"oid": "ddf278a4cd79e594610b2dd4b0f0301c27041775", "url": "https://github.com/ConsenSys/teku/commit/ddf278a4cd79e594610b2dd4b0f0301c27041775", "message": "Fix future return value ignored warning", "committedDate": "2020-10-15T15:05:23Z", "type": "commit"}, {"oid": "ab0d75ca5b54900494912f5123cc9319488ef91e", "url": "https://github.com/ConsenSys/teku/commit/ab0d75ca5b54900494912f5123cc9319488ef91e", "message": "Merge branch 'master' into removeEventBusInBlockTopicHandler", "committedDate": "2020-10-15T15:24:52Z", "type": "commit"}, {"oid": "33563b76dd642d1a817cdd29b24499ba88c54b22", "url": "https://github.com/ConsenSys/teku/commit/33563b76dd642d1a817cdd29b24499ba88c54b22", "message": "Fix stuck text", "committedDate": "2020-10-15T17:35:52Z", "type": "commit"}]}