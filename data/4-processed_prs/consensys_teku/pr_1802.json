{"pr_number": 1802, "pr_title": "Should consider peer suitable if head block more than one epoch ahead", "pr_createdAt": "2020-05-18T07:01:06Z", "pr_url": "https://github.com/ConsenSys/teku/pull/1802", "timeline": [{"oid": "e6d8fe4f48456a8e300e7961f33cc45111de0aef", "url": "https://github.com/ConsenSys/teku/commit/e6d8fe4f48456a8e300e7961f33cc45111de0aef", "message": "Should consider peer suitable if head block more than one epoch ahead of ours.", "committedDate": "2020-05-18T06:58:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjc4NTc1NA==", "url": "https://github.com/ConsenSys/teku/pull/1802#discussion_r426785754", "bodyText": "nit: to be more clear\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              private boolean isMoreThanAnEpochAhead(final Eth2Peer peer) {\n          \n          \n            \n              private boolean isHeadMoreThanAnEpochAhead(final Eth2Peer peer) {", "author": "cemozerr", "createdAt": "2020-05-18T17:29:42Z", "path": "sync/src/main/java/tech/pegasys/teku/sync/SyncManager.java", "diffHunk": "@@ -227,6 +231,13 @@ private boolean isPeerSyncSuitable(Eth2Peer peer) {\n         network.getPeerCount(),\n         ourFinalizedEpoch.toString(10));\n     return !peersWithSyncErrors.contains(peer.getId())\n-        && peer.getStatus().getFinalizedEpoch().compareTo(ourFinalizedEpoch) > 0;\n+        && (peer.getStatus().getFinalizedEpoch().compareTo(ourFinalizedEpoch) > 0\n+            || isMoreThanAnEpochAhead(peer));\n+  }\n+\n+  private boolean isMoreThanAnEpochAhead(final Eth2Peer peer) {", "originalCommit": "e6d8fe4f48456a8e300e7961f33cc45111de0aef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "76b90ec582328aadbfe12e511ca4429a2115bb36", "url": "https://github.com/ConsenSys/teku/commit/76b90ec582328aadbfe12e511ca4429a2115bb36", "message": "Merge branch 'master' into sync-non-finalized", "committedDate": "2020-05-18T17:31:03Z", "type": "commit"}, {"oid": "c1b05120f6472ce02827d5657ed12f690081868a", "url": "https://github.com/ConsenSys/teku/commit/c1b05120f6472ce02827d5657ed12f690081868a", "message": "Rename method for clarity.", "committedDate": "2020-05-18T23:21:52Z", "type": "commit"}, {"oid": "32be46a07c105e8bb702b07673cd01c20dd1815b", "url": "https://github.com/ConsenSys/teku/commit/32be46a07c105e8bb702b07673cd01c20dd1815b", "message": "Merge branch 'master' of github.com:PegaSysEng/teku into sync-non-finalized", "committedDate": "2020-05-18T23:22:00Z", "type": "commit"}, {"oid": "9e0940d2b02dc9fe1d1a5a5a25b93b3942b673f4", "url": "https://github.com/ConsenSys/teku/commit/9e0940d2b02dc9fe1d1a5a5a25b93b3942b673f4", "message": "Merge branch 'sync-non-finalized' of github.com:ajsutton/teku into sync-non-finalized", "committedDate": "2020-05-18T23:23:35Z", "type": "commit"}]}