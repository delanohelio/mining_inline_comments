{"pr_number": 2254, "pr_title": "Fix empty RPC request handling", "pr_createdAt": "2020-06-29T17:50:57Z", "pr_url": "https://github.com/ConsenSys/teku/pull/2254", "timeline": [{"oid": "f8af42b5eb961b7edbdf7237509630aa14b2a9f1", "url": "https://github.com/ConsenSys/teku/commit/f8af42b5eb961b7edbdf7237509630aa14b2a9f1", "message": "Handle the case when RPC request is empty and the complete() method might be called without any prior processData() invocation.", "committedDate": "2020-06-29T17:43:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzIzMjAyNg==", "url": "https://github.com/ConsenSys/teku/pull/2254#discussion_r447232026", "bodyText": "nit: Stray semicolon.", "author": "ajsutton", "createdAt": "2020-06-29T20:24:50Z", "path": "networking/eth2/src/main/java/tech/pegasys/teku/networking/eth2/rpc/core/Eth2IncomingRequestHandler.java", "diffHunk": "@@ -81,7 +81,13 @@ public void processData(final NodeId nodeId, final RpcStream rpcStream, final By\n   @Override\n   public void complete(NodeId nodeId, RpcStream rpcStream) {\n     try {\n-      requestDecoder.complete();\n+      Optional<Eth2Peer> peer = peerLookup.getConnectedPeer(nodeId);\n+      requestDecoder\n+          .complete()\n+          .ifPresent(\n+              request ->\n+                  handleRequest(peer, request, new RpcResponseCallback<>(rpcStream, rpcEncoder)));\n+      ;", "originalCommit": "f8af42b5eb961b7edbdf7237509630aa14b2a9f1", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "454977346bdbbcc5bf1175a9356b7b5d9846099a", "url": "https://github.com/ConsenSys/teku/commit/454977346bdbbcc5bf1175a9356b7b5d9846099a", "message": "Merge branch 'master' into fix-empty-request-handling", "committedDate": "2020-06-29T21:03:42Z", "type": "commit"}]}