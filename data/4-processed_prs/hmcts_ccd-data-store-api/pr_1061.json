{"pr_number": 1061, "pr_title": "RDM-9250: Identify and remove PII (Personally Identifiable Information) from CCD logs", "pr_createdAt": "2020-08-18T09:28:56Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/1061", "timeline": [{"oid": "1c32fc42da65d22b6efcb5597117f8015f6a3187", "url": "https://github.com/hmcts/ccd-data-store-api/commit/1c32fc42da65d22b6efcb5597117f8015f6a3187", "message": "RDM-9250: PII information removed from logs", "committedDate": "2020-08-18T09:25:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA2NTkwNg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r472065906", "bodyText": "Thanks for not removing this totally.", "author": "rafalkalita", "createdAt": "2020-08-18T10:06:53Z", "path": "src/main/java/uk/gov/hmcts/ccd/data/user/DefaultUserRepository.java", "diffHunk": "@@ -109,8 +109,8 @@ public IdamUser getUser() {\n             .map(GrantedAuthority::getAuthority)\n             .collect(Collectors.toSet());\n \n-        String email = getUser().getEmail();\n-        LOG.info(\"Retrieved roles for user={} roles={}\", email, userRoles);\n+        String userId = getUser().getId();\n+        LOG.info(\"Retrieved roles for userId={} roles={}\", userId, userRoles);", "originalCommit": "1c32fc42da65d22b6efcb5597117f8015f6a3187", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTczNA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r476405734", "bodyText": "maybe let's have our BA Jamal first check with the team who is processing the Audit logs whether this change is ok for them", "author": "mario-paniccia", "createdAt": "2020-08-25T12:22:13Z", "path": "src/main/java/uk/gov/hmcts/ccd/auditlog/AuditService.java", "diffHunk": "@@ -40,7 +40,7 @@ public void audit(AuditContext auditContext) {\n         entry.setHttpMethod(auditContext.getHttpMethod());\n         entry.setPath(auditContext.getRequestPath());\n         entry.setRequestId(auditContext.getRequestId());\n-        entry.setIdamId(userRepository.getUser().getEmail());", "originalCommit": "1c32fc42da65d22b6efcb5597117f8015f6a3187", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDk4NTEwMw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1061#discussion_r494985103", "bodyText": "confirmed that this change is ok", "author": "mario-paniccia", "createdAt": "2020-09-25T13:25:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjQwNTczNA=="}], "type": "inlineReview"}]}