{"pr_number": 993, "pr_title": "RDM-8806 FTA for 'Add Case-Assigned User and Role'", "pr_createdAt": "2020-06-25T15:07:01Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/993", "timeline": [{"oid": "01b1a890b2737528fb10563daf7af1bd8a88ccf0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/01b1a890b2737528fb10563daf7af1bd8a88ccf0", "message": "RDM-8806 FTA for 'Add Case-Assigned User and Role'\n\n   [RDM-8606](https://tools.hmcts.net/jira/browse/RDM-8606)\n   [RDM-8806](https://tools.hmcts.net/jira/browse/RDM-8806)\n\nFTA for 'Add Case-Assigned User and Role' (Dev ticket is RDM-8606).", "committedDate": "2020-06-25T14:56:55Z", "type": "commit"}, {"oid": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "url": "https://github.com/hmcts/ccd-data-store-api/commit/effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "message": "Merge branch 'RDM-8606' into RDM-8806-from-8606\n\nConflicts:\n\tbuild.gradle", "committedDate": "2020-06-25T16:08:09Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzMxNQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r445673315", "bodyText": "This will create a token before all scenarios - even before those that don't need a case to have been created.", "author": "MSancaktutar", "createdAt": "2020-06-25T16:09:50Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE3ODQ2OA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446178468", "bodyText": "Have moved it to each of the relevant scenarios.", "author": "mattnayler", "createdAt": "2020-06-26T13:19:16Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTY3MzMxNQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1MzQxNg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446053416", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:48:18Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE3OTc4Nw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446179787", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:21:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1MzQxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1Mzc0MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446053741", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:48:56Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MDIyMg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446180222", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:22:28Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1Mzc0MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1Mzk2OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446053969", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:49:22Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDA4MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446054081", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:49:35Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-5\n+  @S-105.5\n+  Scenario: Must return an error response for a malformed User ID Provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry and a malformed User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.5_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MDgwOA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446180808", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:23:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDA4MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDYxNg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446054616", "bodyText": "a call [to verify that Dil hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:50:39Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-5\n+  @S-105.5\n+  Scenario: Must return an error response for a malformed User ID Provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry and a malformed User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.5_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-6\n+  @S-105.6\n+  Scenario: Must return an error response when the request is made from an un-authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    And a user [Dil - with an active profile],\n+    And a user [Olawale - who is not a privileged user and is calling from an un-authorised application],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Olawale with the Case ID of C1 & Dil's User ID and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MTI1Mw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446181253", "bodyText": "I have added it along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:24:12Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDYxNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDk0Ng==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446054946", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:51:15Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-5\n+  @S-105.5\n+  Scenario: Must return an error response for a malformed User ID Provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry and a malformed User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.5_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-6\n+  @S-105.6\n+  Scenario: Must return an error response when the request is made from an un-authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    And a user [Dil - with an active profile],\n+    And a user [Olawale - who is not a privileged user and is calling from an un-authorised application],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Olawale with the Case ID of C1 & Dil's User ID and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+\n+  # RDM-8606/8806 AC-7\n+  @S-105.7\n+  Scenario: Must return an error response for a malformed Case Role provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, for 2 assignments each containing the Case ID of C1 and User ID of Olawale],\n+    And the request [contains a proper Case Role CR-1 in one entry and an improper Case Role in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.7_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MTkyMA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446181920", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:25:18Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NDk0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NTA5MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446055091", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:51:33Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-5\n+  @S-105.5\n+  Scenario: Must return an error response for a malformed User ID Provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry and a malformed User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.5_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-6\n+  @S-105.6\n+  Scenario: Must return an error response when the request is made from an un-authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    And a user [Dil - with an active profile],\n+    And a user [Olawale - who is not a privileged user and is calling from an un-authorised application],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Olawale with the Case ID of C1 & Dil's User ID and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+\n+  # RDM-8606/8806 AC-7\n+  @S-105.7\n+  Scenario: Must return an error response for a malformed Case Role provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, for 2 assignments each containing the Case ID of C1 and User ID of Olawale],\n+    And the request [contains a proper Case Role CR-1 in one entry and an improper Case Role in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.7_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-8\n+  @S-105.8\n+  Scenario: Must return an error response for a missing Case Role\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, for 2 assignments each containing the Case ID of C1 and User ID of Olawale],\n+    And the request [contains a proper Case Role CR-1 in one entry and no Case Role in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.8_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MjM3NQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446182375", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:26:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NTA5MQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NTU0OA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446055548", "bodyText": "a call [to verify that Olawale hasn't received the role CR-1 over the case C1] ...", "author": "MSancaktutar", "createdAt": "2020-06-26T08:52:29Z", "path": "src/aat/resources/features/F-105/F-105.feature", "diffHunk": "@@ -0,0 +1,201 @@\n+@F-105\n+Feature: F-105: Add Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+\n+  # RDM-8606/8806 AC-1\n+  @S-105.1\n+  Scenario: Must successfully assign a user and case role for a specific case by a user calling through/from an authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application, by Dil, with the Case ID of C1, User ID of Olawale and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned User and Role] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response has all the details as expected,\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.1_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-2\n+  @S-105.2\n+  Scenario: Must return an error response for a missing Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry but no case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.2_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-3\n+  @S-105.3\n+  Scenario: Must return an error response for a malformed Case ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a malformed case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.3_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-4\n+  @S-105.4\n+  Scenario: Must return an error response for a missing User ID\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry but no User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.4_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-5\n+  @S-105.5\n+  Scenario: Must return an error response for a malformed User ID Provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing the Case ID of C1 and a proper Case Role CR-1]\n+    And the request [contains the User ID of Olawale in one entry and a malformed User ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.5_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-6\n+  @S-105.6\n+  Scenario: Must return an error response when the request is made from an un-authorised application\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    And a user [Dil - with an active profile],\n+    And a user [Olawale - who is not a privileged user and is calling from an un-authorised application],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Olawale with the Case ID of C1 & Dil's User ID and a proper Case Role CR-1],\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+\n+  # RDM-8606/8806 AC-7\n+  @S-105.7\n+  Scenario: Must return an error response for a malformed Case Role provided\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, for 2 assignments each containing the Case ID of C1 and User ID of Olawale],\n+    And the request [contains a proper Case Role CR-1 in one entry and an improper Case Role in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.7_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606/8806 AC-8\n+  @S-105.8\n+  Scenario: Must return an error response for a missing Case Role\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, for 2 assignments each containing the Case ID of C1 and User ID of Olawale],\n+    And the request [contains a proper Case Role CR-1 in one entry and no Case Role in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.8_Get_Case_Roles_for_Case_C1].\n+\n+  # RDM-8606 no list\n+  @S-105.9\n+  Scenario: Must return an error response for missing case_users list\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, with no case_users supplied]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+\n+  # RDM-8606 empty list\n+  @S-105.10\n+  Scenario: Must return an error response for empty case_users list\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    When a request is prepared with appropriate values,\n+    And the request [is made from an authorised application by Dil, with an empty list of case_users supplied]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+\n+  # RDM-8606 case not found\n+  @S-105.11\n+  Scenario: Must return an error response when the case does not exist\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a user [Dil - who is to add some case role assignment for a case],\n+    And a user [Olawale - with an active solicitor profile and valid User ID],\n+    And a successful call [by Richard to create a case - C1] as in [F-105_Prerequisite_Case_Creation_Call_for_Case_Assignment],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil for 2 assignments each containing Olawale's User ID and a proper Case Role CR-1]\n+    And the request [contains the Case ID of C1 in one entry and a well formed but non-existant case ID in the other]\n+    And it is submitted to call the [Add Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a negative response is received,\n+    And the response has all the details as expected.\n+    And a call [to verify Olawale's reception of the role CR-1 over the case C1] will get the expected response as in [S-105.11_Get_Case_Roles_for_Case_C1].", "originalCommit": "effda29ab197cbca7c68d51fd0c5e757ac2e2dc4", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjE4MjQ1MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/993#discussion_r446182451", "bodyText": "I have updated along with corresponding verify JSON.", "author": "mattnayler", "createdAt": "2020-06-26T13:26:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjA1NTU0OA=="}], "type": "inlineReview"}, {"oid": "a5289bb64f5d6594c5ac6850abeaa331b1f37365", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a5289bb64f5d6594c5ac6850abeaa331b1f37365", "message": "use empty string notation with fw prerelease", "committedDate": "2020-06-26T11:31:11Z", "type": "commit"}, {"oid": "5a43bbfc964e90cf7981b9130db78e531b9a2da1", "url": "https://github.com/hmcts/ccd-data-store-api/commit/5a43bbfc964e90cf7981b9130db78e531b9a2da1", "message": "correct empty string notations", "committedDate": "2020-06-26T12:06:21Z", "type": "commit"}, {"oid": "1308199e6370b8a6ee687a6515c30bedeb585731", "url": "https://github.com/hmcts/ccd-data-store-api/commit/1308199e6370b8a6ee687a6515c30bedeb585731", "message": "correct use of empty string notations", "committedDate": "2020-06-26T12:12:32Z", "type": "commit"}, {"oid": "3123bc24294f5b9fb947f95fd7a7a48af9c7c02a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/3123bc24294f5b9fb947f95fd7a7a48af9c7c02a", "message": "use corrected prerelease", "committedDate": "2020-06-26T12:41:26Z", "type": "commit"}, {"oid": "9ec153f01e0dc15d93f5bb52b79bccf24721dff3", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9ec153f01e0dc15d93f5bb52b79bccf24721dff3", "message": "cleanup", "committedDate": "2020-06-26T12:41:37Z", "type": "commit"}, {"oid": "c804a760482139be8a2e7085d8f982db2cc563b7", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c804a760482139be8a2e7085d8f982db2cc563b7", "message": "fix copy paste mistake", "committedDate": "2020-06-26T13:05:28Z", "type": "commit"}, {"oid": "e7b426ffafddbf0de0289a4e5f0c1f5ba56f8828", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e7b426ffafddbf0de0289a4e5f0c1f5ba56f8828", "message": "use latest stable fw release", "committedDate": "2020-06-26T13:08:34Z", "type": "commit"}, {"oid": "2d216909ac6ee3857bd77d9a6d4f4b92cfbd368a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2d216909ac6ee3857bd77d9a6d4f4b92cfbd368a", "message": "RDM-8806 dev review changes\n\n   [RDM-8806](https://tools.hmcts.net/jira/browse/RDM-8806)", "committedDate": "2020-06-26T13:57:05Z", "type": "commit"}, {"oid": "b44ad73c64cde802e81e934e5720bdd809d72fe5", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b44ad73c64cde802e81e934e5720bdd809d72fe5", "message": "improve data reuse from base objects", "committedDate": "2020-06-26T14:33:10Z", "type": "commit"}, {"oid": "9f2798d93dd30d70a03c0edf6019a0ed411b80af", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9f2798d93dd30d70a03c0edf6019a0ed411b80af", "message": "polish format", "committedDate": "2020-06-26T14:46:15Z", "type": "commit"}, {"oid": "f83138999395c3d21ee554dfc9d8fb965f5edc7d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f83138999395c3d21ee554dfc9d8fb965f5edc7d", "message": "correct the field name", "committedDate": "2020-06-26T14:59:09Z", "type": "commit"}, {"oid": "1a8d0db53ef5d068b766e84ef74e7cbf95ffc5a2", "url": "https://github.com/hmcts/ccd-data-store-api/commit/1a8d0db53ef5d068b766e84ef74e7cbf95ffc5a2", "message": "RDM-8606 Minor updates for Swagger\n\n   [RDM-8606](https://tools.hmcts.net/jira/browse/RDM-8606)\n\nRemove default 200 repsonse status from add case-user-roles swagger.", "committedDate": "2020-06-26T15:12:57Z", "type": "commit"}, {"oid": "00355aab639f70af21345e401c487509c1ceb63c", "url": "https://github.com/hmcts/ccd-data-store-api/commit/00355aab639f70af21345e401c487509c1ceb63c", "message": "correct product name", "committedDate": "2020-06-26T15:20:20Z", "type": "commit"}, {"oid": "a126034e307b12e089e4151827c65a00c488e4d6", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a126034e307b12e089e4151827c65a00c488e4d6", "message": "Merge branch 'RDM-8806-from-8606' of git@github.com:hmcts/ccd-data-store-api.git into RDM-8806-from-8606", "committedDate": "2020-06-26T15:21:08Z", "type": "commit"}, {"oid": "01aea69cc74db7c18732fdd09fb8391233b2cca3", "url": "https://github.com/hmcts/ccd-data-store-api/commit/01aea69cc74db7c18732fdd09fb8391233b2cca3", "message": "fix oper name", "committedDate": "2020-06-26T15:40:40Z", "type": "commit"}]}