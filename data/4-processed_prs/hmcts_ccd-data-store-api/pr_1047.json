{"pr_number": 1047, "pr_title": "RDM-9206: Supplementary Data ES Functional Tests", "pr_createdAt": "2020-08-07T16:45:41Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/1047", "timeline": [{"oid": "5464b86437964e72668684355784bd66e96f0477", "url": "https://github.com/hmcts/ccd-data-store-api/commit/5464b86437964e72668684355784bd66e96f0477", "message": "RDM-9206: functionl test cases added to test Elastic search functionality after the supplementary data update", "committedDate": "2020-08-07T16:44:00Z", "type": "commit"}, {"oid": "244a71a898a89f1e6d2df9cd90ffa5e3f027cce9", "url": "https://github.com/hmcts/ccd-data-store-api/commit/244a71a898a89f1e6d2df9cd90ffa5e3f027cce9", "message": "RDM-9206: duplicate guid removed", "committedDate": "2020-08-07T17:57:05Z", "type": "commit"}, {"oid": "7167f3439b0c5eebc6e481e3415f64b9f20fed03", "url": "https://github.com/hmcts/ccd-data-store-api/commit/7167f3439b0c5eebc6e481e3415f64b9f20fed03", "message": "RDM-9206: test data and spec sync", "committedDate": "2020-08-07T19:42:20Z", "type": "commit"}, {"oid": "f8893028af59714d6fb489035e14c5a2bd47da13", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f8893028af59714d6fb489035e14c5a2bd47da13", "message": "RDM-9206: test elastic searchCases", "committedDate": "2020-08-08T07:58:31Z", "type": "commit"}, {"oid": "bb088bdd8254ba1f4d3aefa00a65a4afb279ba59", "url": "https://github.com/hmcts/ccd-data-store-api/commit/bb088bdd8254ba1f4d3aefa00a65a4afb279ba59", "message": "RDM-9206: test elastic searchCases: fixed test cases", "committedDate": "2020-08-10T23:39:35Z", "type": "commit"}, {"oid": "427ee0618aa2866c744587e74ad29c962d234f60", "url": "https://github.com/hmcts/ccd-data-store-api/commit/427ee0618aa2866c744587e74ad29c962d234f60", "message": "Merge remote-tracking branch 'origin/post-19.1-cleanup' into RDM-9206", "committedDate": "2020-08-12T09:21:52Z", "type": "commit"}, {"oid": "15aa36eb75dd172918a80fdecf225dc5a97db016", "url": "https://github.com/hmcts/ccd-data-store-api/commit/15aa36eb75dd172918a80fdecf225dc5a97db016", "message": "Merge remote-tracking branch 'origin/develop' into RDM-9206", "committedDate": "2020-08-13T10:33:23Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQ4ODA4Nw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#discussion_r475488087", "bodyText": "Might suggest a small tweak to the bdd here the request [is configured to search for the previously created case by the updated supplementary data value]", "author": "noronhaa", "createdAt": "2020-08-24T10:04:27Z", "path": "src/aat/resources/features/F-106/F-106.feature", "diffHunk": "@@ -37,3 +37,28 @@ Feature: F-106: Update Supplementary Data\n     And it is submitted to call the [Update Supplementary Data] operation of [CCD Data Store api],\n     Then a positive response is received,\n     And the response has all the details as expected.\n+\n+  @S-608 @elasticsearch @Ignore\n+  Scenario: Must return the updated supplementary data values from Data store and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],", "originalCommit": "15aa36eb75dd172918a80fdecf225dc5a97db016", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTQ4ODIzNw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/1047#discussion_r475488237", "bodyText": "same as previous comment", "author": "noronhaa", "createdAt": "2020-08-24T10:04:43Z", "path": "src/aat/resources/features/F-106/F-106.feature", "diffHunk": "@@ -37,3 +37,28 @@ Feature: F-106: Update Supplementary Data\n     And it is submitted to call the [Update Supplementary Data] operation of [CCD Data Store api],\n     Then a positive response is received,\n     And the response has all the details as expected.\n+\n+  @S-608 @elasticsearch @Ignore\n+  Scenario: Must return the updated supplementary data values from Data store and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],\n+    And a request is prepared with appropriate values,\n+    When it is submitted to call the [external search query] operation of [CCD Data Store Elastic Search API],\n+    Then the response [contains the previoulsy created case],\n+    And the response has all other details as expected.\n+\n+  @S-609 @elasticsearch @Ignore\n+  Scenario: Need to be able to decrement an existing property and search through elastic search\n+    Given a case [C1, which has just been] created as in [F106_Case_Data_Create_C1],\n+    And a successful call [by Dil to update supplementary_data] as in [F-106_Set_Supplementary_Data_C1],\n+    And a successful call [by Dil to decrement supplementary_data] as in [F-106_Decrement_Supplementary_Data_C1],\n+    And a wait time of [5] seconds [to allow for Logstash to index the case just created],\n+    And a user with [a valid profile],\n+    And the request [is configured to search for supplementary data from previously updated case],", "originalCommit": "15aa36eb75dd172918a80fdecf225dc5a97db016", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "7958d31abe9df14adef085f6bf93c9aa8f74f98c", "url": "https://github.com/hmcts/ccd-data-store-api/commit/7958d31abe9df14adef085f6bf93c9aa8f74f98c", "message": "RDM-9206: changed the spec based on code review comments", "committedDate": "2020-08-25T08:09:57Z", "type": "commit"}]}