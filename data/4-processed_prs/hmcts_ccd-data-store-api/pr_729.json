{"pr_number": 729, "pr_title": "RDM-7070 Functional test for get printable documents (AM operation)", "pr_createdAt": "2020-01-07T16:06:36Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/729", "timeline": [{"oid": "c6bab0f7f53b5e6ad28bd83a7f18e4d085d8ff7d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c6bab0f7f53b5e6ad28bd83a7f18e4d085d8ff7d", "message": "added scenario for am", "committedDate": "2020-01-07T16:02:33Z", "type": "commit"}, {"oid": "77bffb1abb34194a5d6c63e964bea02158e72e1f", "url": "https://github.com/hmcts/ccd-data-store-api/commit/77bffb1abb34194a5d6c63e964bea02158e72e1f", "message": "validation test", "committedDate": "2020-01-08T09:54:14Z", "type": "commit"}, {"oid": "0c0cd01985d409a8a934b618a0b5d0bd521fa28d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/0c0cd01985d409a8a934b618a0b5d0bd521fa28d", "message": "temp test change", "committedDate": "2020-01-08T11:28:47Z", "type": "commit"}, {"oid": "bc889c1f7141047f40f52460c07c5751b9cf875a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/bc889c1f7141047f40f52460c07c5751b9cf875a", "message": "update doc store domain for validation", "committedDate": "2020-01-08T12:06:22Z", "type": "commit"}, {"oid": "a3b29d55613d2ba928f0b21117824976e396a3fa", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a3b29d55613d2ba928f0b21117824976e396a3fa", "message": "correct document url for validation", "committedDate": "2020-01-08T13:45:04Z", "type": "commit"}, {"oid": "9531aa97b1654336b118aa70077ed43899af7992", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9531aa97b1654336b118aa70077ed43899af7992", "message": "Merge branch 'RDM-6329_Automate_Newly_Identified_Test_Scenarios' of https://github.com/hmcts/ccd-data-store-api into RDM-7070_AM_Operation_For_Get_Printable_Documents_FTA", "committedDate": "2020-01-08T14:06:54Z", "type": "commit"}, {"oid": "37e8b24dbdde0354521781397a11dca1cfed2156", "url": "https://github.com/hmcts/ccd-data-store-api/commit/37e8b24dbdde0354521781397a11dca1cfed2156", "message": "document url in existing tests and added documents", "committedDate": "2020-01-08T16:01:33Z", "type": "commit"}, {"oid": "1c0170b2ca3008098fc6f6d2b2bb2776695aed49", "url": "https://github.com/hmcts/ccd-data-store-api/commit/1c0170b2ca3008098fc6f6d2b2bb2776695aed49", "message": "Merge branch 'RDM-6329_Automate_Newly_Identified_Test_Scenarios' of https://github.com/hmcts/ccd-data-store-api into RDM-7070_AM_Operation_For_Get_Printable_Documents_FTA", "committedDate": "2020-01-09T15:03:46Z", "type": "commit"}, {"oid": "8a9ae61e28263c38a612e029519866dc8eecf096", "url": "https://github.com/hmcts/ccd-data-store-api/commit/8a9ae61e28263c38a612e029519866dc8eecf096", "message": "Merge branch 'RDM-6329_Automate_Newly_Identified_Test_Scenarios' of https://github.com/hmcts/ccd-data-store-api into RDM-7070_AM_Operation_For_Get_Printable_Documents_FTA", "committedDate": "2020-01-10T14:19:36Z", "type": "commit"}, {"oid": "2e5dc43308cbd2f2d3a4559eff3a8bd0b011c2bd", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2e5dc43308cbd2f2d3a4559eff3a8bd0b011c2bd", "message": "spec mismatch fix", "committedDate": "2020-01-10T15:30:40Z", "type": "commit"}, {"oid": "70fc062596e3df0ff6b7b2e2bb0398959c82e921", "url": "https://github.com/hmcts/ccd-data-store-api/commit/70fc062596e3df0ff6b7b2e2bb0398959c82e921", "message": "operation name mismatch fix", "committedDate": "2020-01-10T15:54:44Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg0MDI5MA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/729#discussion_r365840290", "bodyText": "get printable documents operation for existing end point (/jurisdictions/{jid}/case-types/{ctid}/documents ) returning one document while expectation is 7 documents. Scenario is failing due to this.\nIt might be possibility that you are not hitting the right endpoint.Please check correct endpoint again.", "author": "dharmendra8186", "createdAt": "2020-01-13T14:42:35Z", "path": "src/aat/resources/features/F-032/F-032.feature", "diffHunk": "@@ -55,3 +55,19 @@ Feature: F-032: Get printable documents\n     Then a negative response is received\n     And the response [contains a HTTP 404 Not Found]\n     And the response has all other details as expected\n+\n+  @S-123\n+  Scenario: must return successfully all and only the respective documents with read access for solicitors\n+    Given a user with [an active solicitor 1 profile in CCD with read permissions on limited documents for a given case type]\n+    And a user with [another active solicitor 2 profile in CCD with all permissions on all documents for a given case type]\n+    And a user with [another active solicitor 3 profile in CCD with read permissions on different limited documents for a given case type]\n+    And a successful call [to create a token for case creation] as in [Befta_Jurisdiction2_Default_Token_Creation_Data_For_Case_Creation]\n+    And another successful call [by a privileged user with full ACL to create a case of this case type] as in [Befta_Jurisdiction2_Default_Full_Case_Creation_Data]\n+    When a request is prepared with appropriate values\n+    And the request [is made by solicitor 2 who just created the case]\n+    And it is submitted to call the [get printable documents] operation of [CCD Data Store]", "originalCommit": "70fc062596e3df0ff6b7b2e2bb0398959c82e921", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg1ODA5NA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/729#discussion_r365858094", "bodyText": "There is only one endpoint we are testing in this feature file and it is hitting that one. The test is failing because of issues with the implementation of the endpoint, but fixing that is out of scope for this PR", "author": "bmcts", "createdAt": "2020-01-13T15:15:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg0MDI5MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg4NjMyMQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/729#discussion_r365886321", "bodyText": "After further investigation, the single document URL returned by the endpoint is correct and the test data has been updated to reflect this", "author": "bmcts", "createdAt": "2020-01-13T16:05:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg0MDI5MA=="}], "type": "inlineReview"}, {"oid": "d4c72e8f3cc1a1c3add8fe9d450bfc0b4c43beb4", "url": "https://github.com/hmcts/ccd-data-store-api/commit/d4c72e8f3cc1a1c3add8fe9d450bfc0b4c43beb4", "message": "one expected response per call", "committedDate": "2020-01-13T15:46:44Z", "type": "commit"}, {"oid": "f4e818818f6db3c6c3a31c87fa8db361f6b63c69", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f4e818818f6db3c6c3a31c87fa8db361f6b63c69", "message": "update dynamic value", "committedDate": "2020-01-14T14:18:26Z", "type": "commit"}, {"oid": "227146197ab71ec9a5d9a79a95432ed640e1e7d0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/227146197ab71ec9a5d9a79a95432ed640e1e7d0", "message": "fixed user inheritance", "committedDate": "2020-01-14T14:26:55Z", "type": "commit"}, {"oid": "c05931f8f344679c0ff3c2e4fe6f7a206108d49b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c05931f8f344679c0ff3c2e4fe6f7a206108d49b", "message": "RDM-7070: Added S-123_Test_Data_Base.td.json", "committedDate": "2020-01-15T15:12:31Z", "type": "commit"}, {"oid": "f7f924132a289071ba031d8699339fe46772bd35", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f7f924132a289071ba031d8699339fe46772bd35", "message": "RDM-7070: extends S-123_Test_Data_Base.", "committedDate": "2020-01-15T15:14:19Z", "type": "commit"}, {"oid": "06bd2e8197399c3fa45c81763861b56b3bc8cac0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/06bd2e8197399c3fa45c81763861b56b3bc8cac0", "message": "bump jackson databind version", "committedDate": "2020-01-20T10:30:42Z", "type": "commit"}, {"oid": "110f800423870184855028443c18e5645503772a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/110f800423870184855028443c18e5645503772a", "message": "RDM-7070: Dummy checking to trigger the build.", "committedDate": "2020-01-21T09:24:04Z", "type": "commit"}, {"oid": "a4c1e458b0c0f49ba23cd603412d12916142ea15", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a4c1e458b0c0f49ba23cd603412d12916142ea15", "message": "Merge branches 'RDM-6155_Functional_TA_Umbrella_Epic' and 'RDM-7070_AM_Operation_For_Get_Printable_Documents_FTA' of https://github.com/hmcts/ccd-data-store-api into RDM-7070_AM_Operation_For_Get_Printable_Documents_FTA", "committedDate": "2020-01-21T09:33:33Z", "type": "commit"}, {"oid": "2c103d9453e36eb9711da61903cff977f9bc623f", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2c103d9453e36eb9711da61903cff977f9bc623f", "message": "RDM-7070: Removed transfer encoding.", "committedDate": "2020-01-21T10:42:34Z", "type": "commit"}]}