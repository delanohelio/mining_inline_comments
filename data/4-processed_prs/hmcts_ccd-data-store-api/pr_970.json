{"pr_number": 970, "pr_title": "RDM-8675: Implement BEFTA Functional Tests for 'Get Case-Assigned Users and Roles'", "pr_createdAt": "2020-06-09T14:40:26Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/970", "timeline": [{"oid": "e50db8823b371cbce3d78a263e559cf71581a0ba", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e50db8823b371cbce3d78a263e559cf71581a0ba", "message": "RDM-8675: Functional tests added to address Get Case-Assigned Users and Roles", "committedDate": "2020-06-09T14:02:52Z", "type": "commit"}, {"oid": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e8e96142eeee058b76d2e91d926bacd1dac3f124", "message": "RDM-8675: Functional tests added to address Get Case-Assigned Users and Roles", "committedDate": "2020-06-09T14:40:31Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ4OTM3Mw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437489373", "bodyText": "pls remove token creation lines", "author": "MSancaktutar", "createdAt": "2020-06-09T14:56:51Z", "path": "src/aat/resources/features/F-103/F-103.feature", "diffHunk": "@@ -0,0 +1,129 @@\n+@F-103\n+Feature: F-103: Get Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+\n+  @S-597\n+  Scenario: when a specific User ID is supplied for a specific case ID, then the case roles relating only to the User ID for that specific Case ID must be returned\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [to create a token for case creation] as in [F103_GetToken]", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU0OTQzNg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437549436", "bodyText": "removed!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T16:07:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ4OTM3Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MDY5Nw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437490697", "bodyText": "each account has it's respective password env var. please always use respective env vars.", "author": "MSancaktutar", "createdAt": "2020-06-09T14:58:38Z", "path": "src/aat/resources/features/F-103/F-103_Test_Case_Access_Base_Dil_C2.td.json", "diffHunk": "@@ -0,0 +1,30 @@\n+{\n+\t\"_guid_\": \"F-103_Test_Case_Access_Base_Dil_C2\",\n+\t\"method\": \"PUT\",\n+\t\"uri\": \"/cases/{cid}/users/{uid}\",\n+\t\"users\": {\n+    \"invokingUser\": {\n+      \"username\": \"befta.caseworker.caa.1@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userRichard\": {\n+      \"username\": \"befta.caseworker.2.solicitor.2@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userDil\": {\n+      \"username\": \"befta.caseworker.2.solicitor.3@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MDkzMQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437490931", "bodyText": "in general...", "author": "MSancaktutar", "createdAt": "2020-06-09T14:58:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MDY5Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyOTg0NA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437529844", "bodyText": "Used user specific pwd, and added new entry for befta.caseworker.caa@gmail.com", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T15:40:09Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MDY5Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MTU0Mw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437491543", "bodyText": "This lines seem to be unnecessarily repeated. Am I missing a detail?", "author": "MSancaktutar", "createdAt": "2020-06-09T14:59:43Z", "path": "src/aat/resources/features/F-103/F-103_Test_Case_Access_Base_Dil_C3.td.json", "diffHunk": "@@ -0,0 +1,30 @@\n+{\n+\t\"_guid_\": \"F-103_Test_Case_Access_Base_Dil_C3\",\n+\t\"method\": \"PUT\",\n+\t\"uri\": \"/cases/{cid}/users/{uid}\",\n+\t\"users\": {\n+    \"invokingUser\": {\n+      \"username\": \"befta.caseworker.caa.1@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userRichard\": {\n+      \"username\": \"befta.caseworker.2.solicitor.2@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userDil\": {\n+      \"username\": \"befta.caseworker.2.solicitor.3@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userSteve\": {\n+      \"username\": \"befta.caseworker.2.solicitor.4@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    }", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MjIwMA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437492200", "bodyText": "JSON-based inheritance mechanism would already bring the same lines from a parent, base object.", "author": "MSancaktutar", "createdAt": "2020-06-09T15:00:34Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MTU0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyOTU0OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437529549", "bodyText": "Done, used extends!!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T15:39:42Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5MTU0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5Mjg5NQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437492895", "bodyText": "there should be an extends line here to reuse content of the common, base test data object.", "author": "MSancaktutar", "createdAt": "2020-06-09T15:01:24Z", "path": "src/aat/resources/features/F-103/F-103_Test_Case_Access_Base_Steve.td.json", "diffHunk": "@@ -0,0 +1,30 @@\n+{\n+\t\"_guid_\": \"F-103_Test_Case_Access_Base_Steve\",\n+\t\"method\": \"PUT\",\n+\t\"uri\": \"/cases/{cid}/users/{uid}\",", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyOTM2Nw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437529367", "bodyText": "Done", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T15:39:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5Mjg5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5NDg1OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437494859", "bodyText": "in general, most of these repeated lines could be avoided by inheriting them from appropriate base objects. pls could you revise all test data files from this perspective, to maximise re-use and minimise repeated test data lines?", "author": "MSancaktutar", "createdAt": "2020-06-09T15:04:07Z", "path": "src/aat/resources/features/F-103/F-103_Test_Case_Access_Base_Steve_C3.td.json", "diffHunk": "@@ -0,0 +1,30 @@\n+{\n+\t\"_guid_\": \"F-103_Test_Case_Access_Base_Steve_C3\",\n+\t\"method\": \"PUT\",\n+\t\"uri\": \"/cases/{cid}/users/{uid}\",\n+\t\"users\": {\n+    \"invokingUser\": {\n+      \"username\": \"befta.caseworker.caa.1@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userRichard\": {\n+      \"username\": \"befta.caseworker.2.solicitor.2@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userDil\": {\n+      \"username\": \"befta.caseworker.2.solicitor.3@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    },\n+    \"userSteve\": {\n+      \"username\": \"befta.caseworker.2.solicitor.4@gmail.com\",\n+      \"password\": \"[[$CCD_CASEWORKER_AUTOTEST_PASSWORD]]\"\n+    }", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MDA2NA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437550064", "bodyText": "done!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T16:08:20Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5NDg1OQ=="}], "type": "inlineReview"}, {"oid": "f14648571e6d3313a4eb512b4accb269d449b0a0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f14648571e6d3313a4eb512b4accb269d449b0a0", "message": "RDM-8675: befta.caseworker.caa@gmail.com added", "committedDate": "2020-06-09T15:06:20Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5ODA4OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437498089", "bodyText": "guid repeated in multiple files. that will mess things.", "author": "MSancaktutar", "createdAt": "2020-06-09T15:08:10Z", "path": "src/aat/resources/features/F-103/S-603.td.json", "diffHunk": "@@ -0,0 +1,36 @@\n+{\n+  \"title\": \"must return 400 error response for mal-formatted user id list\",\n+  \"_guid_\": \"S-603\",", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyMTc3OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437521779", "bodyText": "fixed this!!!! Copy paste error!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T15:28:47Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5ODA4OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MDkyMA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437550920", "bodyText": "Fixed it!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T16:09:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5ODA4OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5OTI2Mw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437499263", "bodyText": "are you sure you will have all these specs here? they look like specs to go to the respective api call test data.", "author": "MSancaktutar", "createdAt": "2020-06-09T15:09:20Z", "path": "src/aat/resources/features/F-103/S-600.td.json", "diffHunk": "@@ -0,0 +1,34 @@\n+{\n+  \"title\": \"must return 400 error response for mal-formatted user id list\",\n+  \"_guid_\": \"S-603\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get Case-Assigned Users and Roles\",\n+  \"_extends_\": \"F-103_Test_Data_Base\",\n+\n+\"specs\": [\n+    \"Richard - who can create a case\",\n+    \"Dil - with an active profile\",\n+    \"Steve - with an active profile\",\n+    \"Jamal -  who is a privileged user with permissions to access the case assignments of other users\",\n+    \"by Jamal to assign Dil a few case roles to access C1\",\n+    \"by Jamal to assign Dil a few case roles to access C2\",\n+    \"by Jamal to assign Dil a few case roles to access C3\",\n+    \"by Jamal to assign Steve a few case roles to access C1\",\n+    \"by Jamal to assign Steve a few case roles to access C2\",\n+    \"by Jamal to assign Steve a few case roles to access C3\",\n+    \"is made by Jamal with Case IDs of C1, C2 & C3 & no User ID\"", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUwMDM3OA==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437500378", "bodyText": "Please check other test data files to confirm you have all and only the necessary specs - no more, no less. Less than enough fails test, more than enough makes the maintenance quite confusing later.", "author": "MSancaktutar", "createdAt": "2020-06-09T15:10:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5OTI2Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzU1MDI1Mg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437550252", "bodyText": "removed these from main spec", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T16:08:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzQ5OTI2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUwMjQ0OQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437502449", "bodyText": "when you have a section of the test data inheriting from Common_XYZ_Response, you won't need to repeat many lines like these, as they will already be inherited from the base object", "author": "MSancaktutar", "createdAt": "2020-06-09T15:12:03Z", "path": "src/aat/resources/features/F-103/S-603.td.json", "diffHunk": "@@ -0,0 +1,36 @@\n+{\n+  \"title\": \"must return 400 error response for mal-formatted user id list\",\n+  \"_guid_\": \"S-603\",\n+  \"productName\": \"CCD Data Store\",\n+  \"operationName\": \"Get Case-Assigned Users and Roles\",\n+  \"_extends_\": \"F-103_Test_Data_Base\",\n+\n+\n+\"specs\": [\n+    \"Richard - who can create a case\",\n+    \"Jamal -  who is a privileged user with permissions to access the case assignments of other users\",\n+    \"is made by Jamal with the Case ID of C1 & a malformed User ID list\",\n+    \"has the 400 return code\"\n+  ],\n+  \"request\": {\n+    \"pathVariables\": {\n+      \"user_ids\": \"${[scenarioContext][testData][users][userDil][id]},,${[scenarioContext][testData][users][userRichard][id]}\"\n+    }\n+  },\n+  \"expectedResponse\": {\n+    \"_extends_\": \"Common_400_Response\",\n+    \"headers\": {\n+      \"Content-Encoding\": \"gzip\",\n+      \"Content-Length\": \"[[ANYTHING_PRESENT]]\"\n+    },\n+    \"body\": {\n+      \"exception\": \"uk.gov.hmcts.ccd.endpoint.exceptions.BadRequestException\",\n+      \"timestamp\": \"[[ANYTHING_PRESENT]]\",\n+      \"message\": \"User ID is not valid\",\n+      \"path\": \"[[ANYTHING_PRESENT]]\",\n+      \"details\": null,\n+      \"callbackErrors\": null,\n+      \"callbackWarnings\": null\n+    }", "originalCommit": "e8e96142eeee058b76d2e91d926bacd1dac3f124", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUyNzAwNQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r437527005", "bodyText": "Changed this, Pleaser review!!!", "author": "kiran-yenigala-hmcts", "createdAt": "2020-06-09T15:36:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzUwMjQ0OQ=="}], "type": "inlineReview"}, {"oid": "c6120876b0dee0ac5e85ec70d3cb1a520ac62a62", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c6120876b0dee0ac5e85ec70d3cb1a520ac62a62", "message": "RDM-8675: fixed review comments", "committedDate": "2020-06-09T15:45:29Z", "type": "commit"}, {"oid": "ca965f4ab8bcb7fdebb512390a86617818a2cc5f", "url": "https://github.com/hmcts/ccd-data-store-api/commit/ca965f4ab8bcb7fdebb512390a86617818a2cc5f", "message": "RDM-8675: fixed review comments", "committedDate": "2020-06-09T16:12:08Z", "type": "commit"}, {"oid": "b768440710d705583fb0e5121df50e6521f077df", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b768440710d705583fb0e5121df50e6521f077df", "message": "RDM-8675: fixed issue on the extends", "committedDate": "2020-06-09T16:15:28Z", "type": "commit"}, {"oid": "6bc01cf1ce047085fe9acdad564810ad321673ca", "url": "https://github.com/hmcts/ccd-data-store-api/commit/6bc01cf1ce047085fe9acdad564810ad321673ca", "message": "Fixed Failure text cases", "committedDate": "2020-06-09T17:51:12Z", "type": "commit"}, {"oid": "31766b5df98a4b7441d757ce7777748d4791374f", "url": "https://github.com/hmcts/ccd-data-store-api/commit/31766b5df98a4b7441d757ce7777748d4791374f", "message": "RDM-8675: Added response body", "committedDate": "2020-06-10T09:17:12Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODcxMDI5Mg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/970#discussion_r438710292", "bodyText": "Could we discuss these specs and test data id's?", "author": "MSancaktutar", "createdAt": "2020-06-11T11:11:34Z", "path": "src/aat/resources/features/F-103/F-103.feature", "diffHunk": "@@ -0,0 +1,124 @@\n+@F-103\n+Feature: F-103: Get Case-Assigned Users and Roles\n+\n+  Background: Load test data for the scenario\n+    Given an appropriate test context as detailed in the test data source\n+\n+  @S-597\n+  Scenario: when a specific User ID is supplied for a specific case ID, then the case roles relating only to the User ID for that specific Case ID must be returned\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [to create a full case C1 for solicitor] as in [F103_Case_Data_Create]\n+    And a user [Dil - with an active profile],\n+    And a user [Jamal -  who is a privileged user with permissions to access the case assignments of other users],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Dil],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Jamal with the Case ID of C1 & Dil's User ID]\n+    And it is submitted to call the [Get Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response [contains the list of case roles just granted to Dil, as per above],\n+    And the response has all the details as expected.\n+\n+  @S-598\n+  Scenario: when the invoking user is not a privileged user but the request includes his/her own User ID, then the invoker's case roles for the case should be returned\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [to create a full case C1 for solicitor] as in [F103_Case_Data_Create]\n+    And a user [Dil - with an active profile],\n+    And a user [Jamal -  who is a privileged user with permissions to access the case assignments of other users],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Dil],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Dil with the Case ID of C1 & Dil's own User ID]\n+    And it is submitted to call the [Get Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response [contains the list of case roles just granted to Dil, as per above],\n+    And the response has all the details as expected.\n+\n+  @S-599\n+  Scenario: when no User ID is supplied for a specific case ID, then the case roles relating to all  users with access to that case must be returned\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [to create a full case C1 for solicitor] as in [F103_Case_Data_Create]\n+    And a user [Dil - with an active profile],\n+    And a user [Steve - with an active profile],\n+    And a user [Jamal -  who is a privileged user with permissions to access the case assignments of other users],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Dil],\n+    And a successful call [by Jamal to assign Steve a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Steve],\n+    When a request is prepared with appropriate values,\n+    And the request [is made by Jamal with the Case ID of C1 & no User ID]\n+    And it is submitted to call the [Get Case-Assigned Users and Roles] operation of [CCD Data Store api],\n+    Then a positive response is received,\n+    And the response [contains the list of case roles just granted to Dil & Steve, as per above],\n+    And the response has all the details as expected.\n+\n+  @S-600\n+  Scenario: when no User ID is supplied for a list of Case IDs, then the case roles relating to all users with access to all listed cases must be returned\n+    Given an appropriate test context as detailed in the test data source,\n+    And a user [Richard - who can create a case],\n+    And a successful call [by Richard to create a case - C1] as in [F103_Case_Data_Create],\n+    And a successful call [by Richard to create a case - C2] as in [F103_Case_Data_Create_C2],\n+    And a successful call [by Richard to create a case - C3] as in [F103_Case_Data_Create_C3],\n+    And a user [Dil - with an active profile],\n+    And a user [Steve - with an active profile],\n+    And a user [Jamal -  who is a privileged user with permissions to access the case assignments of other users],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Dil],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C2] as in [F-103_Test_Case_Access_Base_Dil_C2],\n+    And a successful call [by Jamal to assign Dil a few case roles to access C3] as in [F-103_Test_Case_Access_Base_Dil_C3],\n+    And a successful call [by Jamal to assign Steve a few case roles to access C1] as in [F-103_Test_Case_Access_Base_Steve],\n+    And a successful call [by Jamal to assign Steve a few case roles to access C2] as in [F-103_Test_Case_Access_Base_Steve_C2],\n+    And a successful call [by Jamal to assign Steve a few case roles to access C3] as in [F-103_Test_Case_Access_Base_Steve_C3],", "originalCommit": "31766b5df98a4b7441d757ce7777748d4791374f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "843bff32ebfd71139ddda0443e730ed3578461b3", "url": "https://github.com/hmcts/ccd-data-store-api/commit/843bff32ebfd71139ddda0443e730ed3578461b3", "message": "bump up to latest fw version", "committedDate": "2020-06-11T11:42:25Z", "type": "commit"}, {"oid": "0317c703bc17674521803ff0d13be5e137a5ea98", "url": "https://github.com/hmcts/ccd-data-store-api/commit/0317c703bc17674521803ff0d13be5e137a5ea98", "message": "Temporarily suppress to unblock development", "committedDate": "2020-06-11T12:06:54Z", "type": "commit"}, {"oid": "bf8d5a6e94d18db6df6a33828ded5000f64cf95c", "url": "https://github.com/hmcts/ccd-data-store-api/commit/bf8d5a6e94d18db6df6a33828ded5000f64cf95c", "message": "Update dependency-check-suppressions.xml", "committedDate": "2020-06-11T12:07:18Z", "type": "commit"}, {"oid": "d63dfc427637ab331fee0f601bf7b5852c7bc8f6", "url": "https://github.com/hmcts/ccd-data-store-api/commit/d63dfc427637ab331fee0f601bf7b5852c7bc8f6", "message": "RDM-8675: fixed review comments on specs", "committedDate": "2020-06-11T14:22:47Z", "type": "commit"}, {"oid": "b5cd845d3c45aa086a2ba4a07e0f76664a2e1c3a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b5cd845d3c45aa086a2ba4a07e0f76664a2e1c3a", "message": "RDM-8675: fixed review comments on product name", "committedDate": "2020-06-11T14:57:50Z", "type": "commit"}, {"oid": "72c6b72d2b1c11e37199a6ab2be281cb442c92b0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/72c6b72d2b1c11e37199a6ab2be281cb442c92b0", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-11T15:21:38Z", "type": "commit"}, {"oid": "169738f5c13ba5401e0fa6cb7a0acb3e8b3b336d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/169738f5c13ba5401e0fa6cb7a0acb3e8b3b336d", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-11T16:39:48Z", "type": "commit"}, {"oid": "a5771bd0153dd7812fed481a8e0a3cb1319c00a7", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a5771bd0153dd7812fed481a8e0a3cb1319c00a7", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-11T19:24:54Z", "type": "commit"}, {"oid": "0a39e9fee8e770080d33244e90085539a1113b54", "url": "https://github.com/hmcts/ccd-data-store-api/commit/0a39e9fee8e770080d33244e90085539a1113b54", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-12T09:39:50Z", "type": "commit"}, {"oid": "3ab0a5a8fe2a9e99a03d0554e0d92b062534e311", "url": "https://github.com/hmcts/ccd-data-store-api/commit/3ab0a5a8fe2a9e99a03d0554e0d92b062534e311", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-12T09:53:04Z", "type": "commit"}, {"oid": "bfdb2e8e6a41809589867c4346f45e02ccac2abf", "url": "https://github.com/hmcts/ccd-data-store-api/commit/bfdb2e8e6a41809589867c4346f45e02ccac2abf", "message": "RDM-8675: fixed event token creation issue", "committedDate": "2020-06-12T10:35:48Z", "type": "commit"}, {"oid": "b656edf1a9a2ade57fcf5a4f79327a091a417af6", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b656edf1a9a2ade57fcf5a4f79327a091a417af6", "message": "RDM-8675: fixed json issue", "committedDate": "2020-06-12T10:59:23Z", "type": "commit"}, {"oid": "dec1a81c8c68c4b11f68b22f74a6a725aa19ff0a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/dec1a81c8c68c4b11f68b22f74a6a725aa19ff0a", "message": "RDM-8675: fixed operation name and product name", "committedDate": "2020-06-12T14:37:57Z", "type": "commit"}, {"oid": "b04defed5aa40acf7bd0ab21b7a4c1634d7dc737", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b04defed5aa40acf7bd0ab21b7a4c1634d7dc737", "message": "Merge branch 'RDM-8344' into RDM-8675", "committedDate": "2020-06-12T14:53:36Z", "type": "commit"}, {"oid": "9372d0623c37bb2c558abc88267599a607214f5e", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9372d0623c37bb2c558abc88267599a607214f5e", "message": "RDM-8675: fix CVE-2020-13692", "committedDate": "2020-06-12T14:56:32Z", "type": "commit"}, {"oid": "cb41e4da7be05e04b29ac40533cf3760b87c1fba", "url": "https://github.com/hmcts/ccd-data-store-api/commit/cb41e4da7be05e04b29ac40533cf3760b87c1fba", "message": "RDM-8344: fix CVE-2017-18365", "committedDate": "2020-06-12T15:11:31Z", "type": "commit"}, {"oid": "e8cf12c7d0776bece2324b4f29ecc0d2f1060978", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e8cf12c7d0776bece2324b4f29ecc0d2f1060978", "message": "RDM-8675: fix CVE-2017-18365", "committedDate": "2020-06-12T15:16:20Z", "type": "commit"}, {"oid": "2e03615a651aba63af5d9e411fe3618baf6ba516", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2e03615a651aba63af5d9e411fe3618baf6ba516", "message": "Supress CVE-2017-18365", "committedDate": "2020-06-12T15:19:01Z", "type": "commit"}, {"oid": "337cefaef7fd56f0dbff0549ba504cb23d461a10", "url": "https://github.com/hmcts/ccd-data-store-api/commit/337cefaef7fd56f0dbff0549ba504cb23d461a10", "message": "Supress CVE-2017-18365", "committedDate": "2020-06-12T15:19:51Z", "type": "commit"}, {"oid": "c7e46c48f952182f3b6403940355e9e1dad04f5a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c7e46c48f952182f3b6403940355e9e1dad04f5a", "message": "Merge branch 'RDM-8344' into RDM-8675", "committedDate": "2020-06-12T15:33:35Z", "type": "commit"}, {"oid": "80f7ce57d69e3fccd0ba02d597b3bb51d9d2963a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/80f7ce57d69e3fccd0ba02d597b3bb51d9d2963a", "message": "Merge branch 'RDM-8344' into RDM-8675", "committedDate": "2020-06-12T15:57:49Z", "type": "commit"}, {"oid": "b389da7b6051e16c33d96c48a216f469433a9240", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b389da7b6051e16c33d96c48a216f469433a9240", "message": "RDM-8675: expected response added", "committedDate": "2020-06-12T16:23:51Z", "type": "commit"}, {"oid": "2eb1fc064bf74953204b22845aedc226cb913dfd", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2eb1fc064bf74953204b22845aedc226cb913dfd", "message": "User siblingContexts instead of childContexts", "committedDate": "2020-06-12T16:47:55Z", "type": "commit"}, {"oid": "5be45120373b05dc347b47255e52d990e92b59f5", "url": "https://github.com/hmcts/ccd-data-store-api/commit/5be45120373b05dc347b47255e52d990e92b59f5", "message": "RDM-8675: fix queryParams issue", "committedDate": "2020-06-12T17:10:31Z", "type": "commit"}, {"oid": "b29d83698a11a2be171bb404c88b50366e77327b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b29d83698a11a2be171bb404c88b50366e77327b", "message": "RDM-8675: fix failure FTA tests", "committedDate": "2020-06-12T17:37:28Z", "type": "commit"}, {"oid": "e32c556f6a1576b01e78078271b2f1e348812b23", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e32c556f6a1576b01e78078271b2f1e348812b23", "message": "RDM-8675: fix failure FTA tests", "committedDate": "2020-06-12T18:10:47Z", "type": "commit"}, {"oid": "b4c7399056566e131a4d320bd271167888ef969a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b4c7399056566e131a4d320bd271167888ef969a", "message": "RDM-8675: fix issue with childContexts", "committedDate": "2020-06-12T18:36:51Z", "type": "commit"}, {"oid": "fbd3da620a0c3292f5cd68fe2cab9caf4486db40", "url": "https://github.com/hmcts/ccd-data-store-api/commit/fbd3da620a0c3292f5cd68fe2cab9caf4486db40", "message": "RDM-8675: fix issue with parent and child contexts", "committedDate": "2020-06-12T19:52:29Z", "type": "commit"}, {"oid": "2f71df912d53f21907acc7fca3d11ee543b61529", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2f71df912d53f21907acc7fca3d11ee543b61529", "message": "RDM-8675: fix test case failures", "committedDate": "2020-06-12T20:57:24Z", "type": "commit"}, {"oid": "59981d8254f51cf33dbc4f1d20932533c35db33a", "url": "https://github.com/hmcts/ccd-data-store-api/commit/59981d8254f51cf33dbc4f1d20932533c35db33a", "message": "RDM-8675: fix test case failures (exception expected)", "committedDate": "2020-06-12T23:04:43Z", "type": "commit"}, {"oid": "fd64e49933bb6b635216f975aef18100b166dda4", "url": "https://github.com/hmcts/ccd-data-store-api/commit/fd64e49933bb6b635216f975aef18100b166dda4", "message": "use prerelease for isolated use of test data", "committedDate": "2020-06-14T20:27:26Z", "type": "commit"}, {"oid": "f5b1f5265bd1b280fa09789cdd41529c007bd885", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f5b1f5265bd1b280fa09789cdd41529c007bd885", "message": "correct attribute key", "committedDate": "2020-06-14T20:39:22Z", "type": "commit"}, {"oid": "a24d1b20d72d3cdda9812ff61826ef6974ad2420", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a24d1b20d72d3cdda9812ff61826ef6974ad2420", "message": "remove compiler warnings", "committedDate": "2020-06-14T20:41:06Z", "type": "commit"}, {"oid": "9016349cb01bb0d52ae6f8946fbf9fb4fe9a0528", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9016349cb01bb0d52ae6f8946fbf9fb4fe9a0528", "message": "put back mistakenly removed lines", "committedDate": "2020-06-14T20:54:56Z", "type": "commit"}, {"oid": "138e855197f1abda2169ccc00f687ffdb9e5b1cd", "url": "https://github.com/hmcts/ccd-data-store-api/commit/138e855197f1abda2169ccc00f687ffdb9e5b1cd", "message": "use later prerelease", "committedDate": "2020-06-14T20:58:10Z", "type": "commit"}, {"oid": "9282d2fb0138b6d7b9aa5cf9280a9729a2c0b3db", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9282d2fb0138b6d7b9aa5cf9280a9729a2c0b3db", "message": "bump up prerelease", "committedDate": "2020-06-14T21:34:25Z", "type": "commit"}, {"oid": "696e0faacd1fde70faf55e3d95ec9d6b520bd13d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/696e0faacd1fde70faf55e3d95ec9d6b520bd13d", "message": "correct def store used for fta", "committedDate": "2020-06-14T22:02:38Z", "type": "commit"}, {"oid": "98541e2b8bb53a90b96fe6756b9f64a7167eab49", "url": "https://github.com/hmcts/ccd-data-store-api/commit/98541e2b8bb53a90b96fe6756b9f64a7167eab49", "message": "bump up prerelease", "committedDate": "2020-06-14T23:20:43Z", "type": "commit"}, {"oid": "310d6ab766ec7168cbffbef103aef7afa21e70a7", "url": "https://github.com/hmcts/ccd-data-store-api/commit/310d6ab766ec7168cbffbef103aef7afa21e70a7", "message": "use new dsl element", "committedDate": "2020-06-14T23:23:52Z", "type": "commit"}, {"oid": "48ad6b5a23e4d8b258788e6b1655231ea25384ee", "url": "https://github.com/hmcts/ccd-data-store-api/commit/48ad6b5a23e4d8b258788e6b1655231ea25384ee", "message": "align test data", "committedDate": "2020-06-14T23:41:34Z", "type": "commit"}, {"oid": "78a5f580015fc08f97fdf5ec42ae94e6ac7b7057", "url": "https://github.com/hmcts/ccd-data-store-api/commit/78a5f580015fc08f97fdf5ec42ae94e6ac7b7057", "message": "format json files", "committedDate": "2020-06-14T23:53:16Z", "type": "commit"}, {"oid": "b53aca71afe7015386916b2f9a3b34890e0ad850", "url": "https://github.com/hmcts/ccd-data-store-api/commit/b53aca71afe7015386916b2f9a3b34890e0ad850", "message": "correct context reference", "committedDate": "2020-06-15T00:01:46Z", "type": "commit"}, {"oid": "8ca49d2eae8365c24b1706b9274047f74a5bae8b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/8ca49d2eae8365c24b1706b9274047f74a5bae8b", "message": "align test data to previous call data", "committedDate": "2020-06-15T00:07:09Z", "type": "commit"}, {"oid": "f1d2bce1aeb35911d37448a8e96a2d4e733dd84d", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f1d2bce1aeb35911d37448a8e96a2d4e733dd84d", "message": "correct body block", "committedDate": "2020-06-15T00:17:35Z", "type": "commit"}, {"oid": "29c2acd1425154285767d30028a223a690d2b164", "url": "https://github.com/hmcts/ccd-data-store-api/commit/29c2acd1425154285767d30028a223a690d2b164", "message": "fix syntax", "committedDate": "2020-06-15T00:34:48Z", "type": "commit"}, {"oid": "f1aa30ceddf284bb0b229ee10046096e51ad1a78", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f1aa30ceddf284bb0b229ee10046096e51ad1a78", "message": "correct auto-format broken data", "committedDate": "2020-06-15T00:40:29Z", "type": "commit"}, {"oid": "c1f3fe6393f6307c653d46b34a6a06d1b160eb05", "url": "https://github.com/hmcts/ccd-data-store-api/commit/c1f3fe6393f6307c653d46b34a6a06d1b160eb05", "message": "use new dsl element at all places", "committedDate": "2020-06-15T01:37:31Z", "type": "commit"}, {"oid": "60729fd0e427b3fcaf339925a2a9ee51c48328ad", "url": "https://github.com/hmcts/ccd-data-store-api/commit/60729fd0e427b3fcaf339925a2a9ee51c48328ad", "message": "bump up fixed version", "committedDate": "2020-06-15T03:27:10Z", "type": "commit"}, {"oid": "57aa1c4b59dd8a2fdad343d885e6b7777db49aac", "url": "https://github.com/hmcts/ccd-data-store-api/commit/57aa1c4b59dd8a2fdad343d885e6b7777db49aac", "message": "add new global case role", "committedDate": "2020-06-15T03:52:27Z", "type": "commit"}, {"oid": "5fa17ce23212e54070729fe788e3ba3dc8a954c1", "url": "https://github.com/hmcts/ccd-data-store-api/commit/5fa17ce23212e54070729fe788e3ba3dc8a954c1", "message": "correct invalid case roles", "committedDate": "2020-06-15T03:58:16Z", "type": "commit"}, {"oid": "cf801ae2c4ac59db6d5741746b304a7cec689500", "url": "https://github.com/hmcts/ccd-data-store-api/commit/cf801ae2c4ac59db6d5741746b304a7cec689500", "message": "remove repeating array def against unwanted overlay", "committedDate": "2020-06-15T04:13:33Z", "type": "commit"}, {"oid": "65e0dcdc6979085cd423bcb4521c443f6ae38182", "url": "https://github.com/hmcts/ccd-data-store-api/commit/65e0dcdc6979085cd423bcb4521c443f6ae38182", "message": "correct expected response", "committedDate": "2020-06-15T04:19:51Z", "type": "commit"}, {"oid": "3af61f8b08d78382817ecfa7049ed051ee9b04b6", "url": "https://github.com/hmcts/ccd-data-store-api/commit/3af61f8b08d78382817ecfa7049ed051ee9b04b6", "message": "correct broken test data", "committedDate": "2020-06-15T04:25:31Z", "type": "commit"}, {"oid": "0104ed1f85ee14557bd898388b639128abace65b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/0104ed1f85ee14557bd898388b639128abace65b", "message": "correct and improve expected responses", "committedDate": "2020-06-15T04:38:04Z", "type": "commit"}, {"oid": "2b75037d7c51b51b5903e63bdae2f2276d45e4b6", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2b75037d7c51b51b5903e63bdae2f2276d45e4b6", "message": "correct expected order", "committedDate": "2020-06-15T04:55:52Z", "type": "commit"}, {"oid": "d89b504869804d37fee8630500e2ac33d56dd78f", "url": "https://github.com/hmcts/ccd-data-store-api/commit/d89b504869804d37fee8630500e2ac33d56dd78f", "message": "correct expected order", "committedDate": "2020-06-15T04:57:33Z", "type": "commit"}, {"oid": "f11c64d26541be6d48bc8cafa21bc24aca86f826", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f11c64d26541be6d48bc8cafa21bc24aca86f826", "message": "fix syntax", "committedDate": "2020-06-15T05:01:06Z", "type": "commit"}, {"oid": "10881db8bb52ace164c46f5b8dce9406f3a90456", "url": "https://github.com/hmcts/ccd-data-store-api/commit/10881db8bb52ace164c46f5b8dce9406f3a90456", "message": "replace array content when needed", "committedDate": "2020-06-15T05:31:54Z", "type": "commit"}, {"oid": "f335558684e9b302d6ade1bba7f9cca17ab858ef", "url": "https://github.com/hmcts/ccd-data-store-api/commit/f335558684e9b302d6ade1bba7f9cca17ab858ef", "message": "correct order of repsonse objects", "committedDate": "2020-06-15T05:42:18Z", "type": "commit"}, {"oid": "a912afc4000c5c742fee1978c10456f195d5b509", "url": "https://github.com/hmcts/ccd-data-store-api/commit/a912afc4000c5c742fee1978c10456f195d5b509", "message": "replace array fields in request", "committedDate": "2020-06-15T08:01:00Z", "type": "commit"}, {"oid": "80c61de492d46cc33b8e0004beabf1b5f829704b", "url": "https://github.com/hmcts/ccd-data-store-api/commit/80c61de492d46cc33b8e0004beabf1b5f829704b", "message": "use latest prerelease", "committedDate": "2020-06-15T08:47:37Z", "type": "commit"}, {"oid": "97e9e8ca15379cc53d2b2b9463685969d821fede", "url": "https://github.com/hmcts/ccd-data-store-api/commit/97e9e8ca15379cc53d2b2b9463685969d821fede", "message": "use latest stable release", "committedDate": "2020-06-15T09:09:15Z", "type": "commit"}, {"oid": "e97f069e1e6ee2149a0e5b30bc9a7048220409a8", "url": "https://github.com/hmcts/ccd-data-store-api/commit/e97f069e1e6ee2149a0e5b30bc9a7048220409a8", "message": "use prerelease for final fix attempt", "committedDate": "2020-06-15T09:37:31Z", "type": "commit"}, {"oid": "9dee7d2efc418a1f4c3b63093351cf36d9eb0c27", "url": "https://github.com/hmcts/ccd-data-store-api/commit/9dee7d2efc418a1f4c3b63093351cf36d9eb0c27", "message": "use latest stable release", "committedDate": "2020-06-15T09:50:33Z", "type": "commit"}, {"oid": "dafe93529ed16ea785a2bc85c48a823f8c6540dd", "url": "https://github.com/hmcts/ccd-data-store-api/commit/dafe93529ed16ea785a2bc85c48a823f8c6540dd", "message": "And the response has all other details as expected", "committedDate": "2020-06-15T12:37:05Z", "type": "commit"}]}