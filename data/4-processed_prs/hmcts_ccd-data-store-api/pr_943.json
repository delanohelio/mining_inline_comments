{"pr_number": 943, "pr_title": "Added db ChnageLog for new indexes created as part of RDM-8485", "pr_createdAt": "2020-05-15T12:48:08Z", "pr_url": "https://github.com/hmcts/ccd-data-store-api/pull/943", "timeline": [{"oid": "2c687f5e79d3ac1040b014419b8e3761770bb193", "url": "https://github.com/hmcts/ccd-data-store-api/commit/2c687f5e79d3ac1040b014419b8e3761770bb193", "message": "Added db ChnageLog for new indexes created as part of RDM-8485", "committedDate": "2020-05-13T15:19:30Z", "type": "commit"}, {"oid": "fce76157e005d352da59f34661d9f45283606be0", "url": "https://github.com/hmcts/ccd-data-store-api/commit/fce76157e005d352da59f34661d9f45283606be0", "message": "RDM-8485: formatting issues", "committedDate": "2020-05-14T16:13:04Z", "type": "commit"}, {"oid": "6de85e63e32a38cf10fcfdeda00ff67adad9a410", "url": "https://github.com/hmcts/ccd-data-store-api/commit/6de85e63e32a38cf10fcfdeda00ff67adad9a410", "message": "Corrected the Email address", "committedDate": "2020-05-15T10:23:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NDgxMg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/943#discussion_r425784812", "bodyText": "idx_case_data_appeal_appellant_identity_nino is missing", "author": "smathangi", "createdAt": "2020-05-15T13:00:45Z", "path": "src/main/resources/db/changelog/db.changelog-RDM-8485.xml", "diffHunk": "@@ -0,0 +1,16 @@\n+<databaseChangeLog xmlns=\"http://www.liquibase.org/xml/ns/dbchangelog\"\n+                   xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n+                   xsi:schemaLocation=\"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd\">\n+\n+\n+<changeSet id=\"rdm-8485\" author=\"suman.sreenivasan@hmcts.net\">\n+    <sql dbms=\"postgresql\"\n+         endDelimiter=\"\\nGO\"\n+         splitStatements=\"true\"\n+         stripComments=\"true\">\n+        CREATE INDEX IF NOT EXISTS idx_case_data_deceaseddateofbirth ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{deceasedDateOfBirth}'))));\n+        CREATE INDEX IF NOT EXISTS idx_case_data_createdingapsfrom_dwpstate ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{createdingapsfrom,dwpstate}'))));\n+        CREATE INDEX IF NOT EXISTS idx_case_data_d8petitionerlastname ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{D8PetitionerLastName}'))));\n+    </sql>\n+</changeSet>", "originalCommit": "6de85e63e32a38cf10fcfdeda00ff67adad9a410", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NzQ1Mw==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/943#discussion_r425787453", "bodyText": "Please ask Alliu to provide above 4 index sql statements if he has. I guess, {createdingapsfrom,dwpstate} required proper syntax to pick up correctly.", "author": "smathangi", "createdAt": "2020-05-15T13:05:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NDgxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc5MjA0Mg==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/943#discussion_r425792042", "bodyText": "From Alliu,\nCREATE` INDEX idx_case_data_d8petitionerlastname ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{D8PetitionerLastName}'))));\nCREATE INDEX idx_case_data_createdingapsfrom_dwpstate ON public.case_data USING BTREE ((trim(upper((data #>> '{createdInGapsFrom}')))),(trim(upper((data #>> '{dwpState}')))));\nCREATE INDEX idx_case_data_deceaseddateofbirth ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{deceasedDateOfBirth}'))));\nCREATE INDEX idx_case_data_appeal_appellant_identity_nino ON public.case_data USING BTREE ((TRIM(UPPER(data#>>'{appeal,appellant,identity,nino}'))));", "author": "smathangi", "createdAt": "2020-05-15T13:13:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NDgxMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTgxNDk2MQ==", "url": "https://github.com/hmcts/ccd-data-store-api/pull/943#discussion_r425814961", "bodyText": "Will added these changes.", "author": "sumansreenivasan", "createdAt": "2020-05-15T13:49:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTc4NDgxMg=="}], "type": "inlineReview"}, {"oid": "67eb4cd7e72849aedd677faa684ae185e7aed975", "url": "https://github.com/hmcts/ccd-data-store-api/commit/67eb4cd7e72849aedd677faa684ae185e7aed975", "message": "Added the changes as suggested by Sateesh", "committedDate": "2020-05-15T13:48:58Z", "type": "commit"}]}