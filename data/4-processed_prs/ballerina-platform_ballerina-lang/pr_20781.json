{"pr_number": 20781, "pr_title": "Migrate to BString for ErrorValue", "pr_createdAt": "2020-01-29T08:20:05Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/20781", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyMzU0NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20781#discussion_r372323545", "bodyText": "The method should accept BString interface, not StringValue.", "author": "vinok88", "createdAt": "2020-01-29T11:15:18Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/BallerinaErrors.java", "diffHunk": "@@ -60,10 +61,16 @@\n     public static final String GENERATE_PKG_STOP = \"___stop_\";\n     public static final String GENERATE_OBJECT_CLASS_PREFIX = \".$value$\";\n \n+    @Deprecated\n     public static ErrorValue createError(String reason) {\n         return new ErrorValue(reason, new MapValueImpl<>(BTypes.typeErrorDetail));\n     }\n \n+    public static ErrorValue createError(StringValue reason) {", "originalCommit": "9dc22653d71387f0789a532f748ebbc3245a000f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyNDA1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20781#discussion_r372324058", "bodyText": "Same as above. All public APIs should accept BXxxx ballerina values.", "author": "vinok88", "createdAt": "2020-01-29T11:16:30Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/BallerinaErrors.java", "diffHunk": "@@ -72,6 +79,15 @@ public static ErrorValue createError(String reason, String detail) {\n         return new ErrorValue(reason, detailMap);\n     }\n \n+    public static ErrorValue createError(StringValue reason, String detail) {", "originalCommit": "9dc22653d71387f0789a532f748ebbc3245a000f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyNjI2MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20781#discussion_r372326261", "bodyText": "Return BString", "author": "vinok88", "createdAt": "2020-01-29T11:21:44Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java", "diffHunk": "@@ -115,14 +134,26 @@ public String toString() {\n \n     /**\n      * Returns error reason.\n+     *\n      * @return reason string\n      */\n+    @Deprecated\n     public String getReason() {\n         return reason;\n     }\n \n+    /**\n+     * Returns error reason.\n+     *\n+     * @return reason string\n+     */\n+    public StringValue getErrorReason() {", "originalCommit": "9dc22653d71387f0789a532f748ebbc3245a000f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjMyOTQyNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/20781#discussion_r372329425", "bodyText": "Shall we deprecate these old methods, so that we can remove them later.", "author": "vinok88", "createdAt": "2020-01-29T11:29:32Z", "path": "langlib/lang.error/src/main/java/org/ballerinalang/langlib/error/Reason.java", "diffHunk": "@@ -39,4 +40,8 @@\n     public static String reason(Strand strand, ErrorValue value) {", "originalCommit": "9dc22653d71387f0789a532f748ebbc3245a000f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "9c92967e6554e03cf3b0ccdc0db5c91d29cfdb59", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9c92967e6554e03cf3b0ccdc0db5c91d29cfdb59", "message": "Migrate to BString for ErrorValue\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20762", "committedDate": "2020-01-29T14:27:28Z", "type": "commit"}, {"oid": "9c92967e6554e03cf3b0ccdc0db5c91d29cfdb59", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9c92967e6554e03cf3b0ccdc0db5c91d29cfdb59", "message": "Migrate to BString for ErrorValue\n\nResolve https://github.com/ballerina-platform/ballerina-lang/issues/20762", "committedDate": "2020-01-29T14:27:28Z", "type": "forcePushed"}]}