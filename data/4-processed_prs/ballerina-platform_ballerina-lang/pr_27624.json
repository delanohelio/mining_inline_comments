{"pr_number": 27624, "pr_title": "Add Array value and Required support for toml validator", "pr_createdAt": "2020-12-23T03:27:15Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/27624", "timeline": [{"oid": "ce6f87e8e466083c7caf4c4adbaf394d36c9db55", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce6f87e8e466083c7caf4c4adbaf394d36c9db55", "message": "Add Array value support for toml validator", "committedDate": "2021-01-12T03:52:48Z", "type": "commit"}, {"oid": "22f3078ef8568265435b82f00ad0b6bd2c09a6ce", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/22f3078ef8568265435b82f00ad0b6bd2c09a6ce", "message": "Add Required field support", "committedDate": "2021-01-12T03:52:48Z", "type": "forcePushed"}, {"oid": "66c3502648341f070e9a2593a4c5321e1d6dc2c0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/66c3502648341f070e9a2593a4c5321e1d6dc2c0", "message": "Add Required field support", "committedDate": "2021-01-12T04:20:27Z", "type": "commit"}, {"oid": "66c3502648341f070e9a2593a4c5321e1d6dc2c0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/66c3502648341f070e9a2593a4c5321e1d6dc2c0", "message": "Add Required field support", "committedDate": "2021-01-12T04:20:27Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1NjI4NTg5Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/27624#discussion_r556285896", "bodyText": "Shall we rename this to Missing required field?", "author": "anuruddhal", "createdAt": "2021-01-13T06:18:07Z", "path": "misc/toml-parser/src/main/java/io/ballerina/toml/validator/SchemaValidator.java", "diffHunk": "@@ -72,23 +73,32 @@ public void visit(TomlTableNode tomlTableNode) {\n         }\n         ObjectSchema objectSchema = (ObjectSchema) schema;\n         Map<String, AbstractSchema> properties = objectSchema.properties();\n+        List<String> requiredFields = getRequiredFields(objectSchema);\n         Map<String, TopLevelNode> tableEntries = tomlTableNode.entries();\n         for (Map.Entry<String, TopLevelNode> tableEntry : tableEntries.entrySet()) {\n             String key = tableEntry.getKey();\n+            requiredFields.remove(key);\n             TopLevelNode value = tableEntry.getValue();\n             AbstractSchema schema = properties.get(key);\n             if (schema != null) {\n                 visitNode(value, schema, key);\n                 continue;\n             }\n             if (!objectSchema.hasAdditionalProperties()) {\n-                DiagnosticInfo diagnosticInfo = new DiagnosticInfo(\"TVE0001\", \"warn.unexpected.property\",\n-                        DiagnosticSeverity.WARNING);\n+                DiagnosticInfo diagnosticInfo = new DiagnosticInfo(\"TVE0001\", \"error.unexpected.property\",\n+                        DiagnosticSeverity.ERROR);\n                 TomlDiagnostic diagnostic = new TomlDiagnostic(value.location(), diagnosticInfo,\n                         \"Unexpected Property \\\"\" + key + \"\\\"\");\n                 tomlTableNode.addDiagnostic(diagnostic);\n             }\n         }\n+        for (String field : requiredFields) {\n+            DiagnosticInfo diagnosticInfo = new DiagnosticInfo(\"TVE0006\", \"error.required.field.missing\",\n+                    DiagnosticSeverity.ERROR);\n+            TomlDiagnostic diagnostic = new TomlDiagnostic(tomlTableNode.location(), diagnosticInfo,\n+                    \"Required Field Missing \\\"\" + field + \"\\\"\");", "originalCommit": "66c3502648341f070e9a2593a4c5321e1d6dc2c0", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "0fbd77d3373e0f51dba005027337785014463ba4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0fbd77d3373e0f51dba005027337785014463ba4", "message": "Rename error message", "committedDate": "2021-01-13T06:23:08Z", "type": "commit"}]}