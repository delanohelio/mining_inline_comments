{"pr_number": 21555, "pr_title": "[NATS] Improve how connection urls are specified", "pr_createdAt": "2020-03-10T06:57:24Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21555", "timeline": [{"oid": "fa7848532d16f570005d62e3572e57aee02a9652", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fa7848532d16f570005d62e3572e57aee02a9652", "message": "Improve how connection urls are specified\n\nFixes https://github.com/ballerina-platform/ballerina-lang/issues/19744", "committedDate": "2020-03-10T06:55:28Z", "type": "commit"}, {"oid": "5c5ab184e91fb9ff5e4f205f46f98155588a5749", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5c5ab184e91fb9ff5e4f205f46f98155588a5749", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into fix-issues", "committedDate": "2020-03-10T07:06:49Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjYyMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21555#discussion_r390206623", "bodyText": "Can we use a fine-grained method to construct a comma-separated URL from the connection object as this has similar occurrences?\n    private static String getCommaSeparatedUrl(ObjectValue connectionObject) {\n        return String.join(\",\", connectionObject.getArrayValue(Constants.URL).getStringArray());\n    }", "author": "chamil321", "createdAt": "2020-03-10T10:04:08Z", "path": "stdlib/messaging/nats/src/main/java/org/ballerinalang/nats/basic/producer/CloseConnection.java", "diffHunk": "@@ -41,7 +41,8 @@ public static void closeConnection(ObjectValue producerObject) {\n         if (TypeChecker.getType(connection).getTag() == TypeTags.OBJECT_TYPE_TAG) {\n             ObjectValue connectionObject = (ObjectValue) connection;\n             ((AtomicInteger) connectionObject.getNativeData(Constants.CONNECTED_CLIENTS)).decrementAndGet();\n-            NatsMetricsUtil.reportProducerClose(connectionObject.getStringValue(Constants.URL));\n+            String[] urls = connectionObject.getArrayValue(Constants.URL).getStringArray();\n+            NatsMetricsUtil.reportProducerClose(String.join(\",\", urls));", "originalCommit": "5c5ab184e91fb9ff5e4f205f46f98155588a5749", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0NzAyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21555#discussion_r390247028", "bodyText": "Fixed.", "author": "aashikam", "createdAt": "2020-03-10T11:22:04Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDIwNjYyMw=="}], "type": "inlineReview"}, {"oid": "623bea841a398107340f4f86e954c9354fb9e49e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/623bea841a398107340f4f86e954c9354fb9e49e", "message": "Add changes from review", "committedDate": "2020-03-10T11:33:10Z", "type": "commit"}]}