{"pr_number": 24060, "pr_title": "Performance Improvements for Observability Instrumentation", "pr_createdAt": "2020-06-13T09:59:34Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/24060", "timeline": [{"oid": "e426bc3b7ef771c6c7ddabcb70bd27b8d43c2c36", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e426bc3b7ef771c6c7ddabcb70bd27b8d43c2c36", "message": "Fix Scheduler.getStrand() call order to avoid unwanted contention\n\n# When observability is switched off even (in the previous code) the strand was accessed for no reason. This was changed so that the call can be completely avoided.", "committedDate": "2020-06-12T17:33:45Z", "type": "commit"}, {"oid": "87398d38aac59abe919f1dff5d7ae95c759c0036", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/87398d38aac59abe919f1dff5d7ae95c759c0036", "message": "Move all constant loading to module init function", "committedDate": "2020-06-14T07:15:55Z", "type": "commit"}, {"oid": "307eed5ad12ec2854a7581244f60ffff306a868e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/307eed5ad12ec2854a7581244f60ffff306a868e", "message": "Add check to avoid ballerina level observability logic when observability is disabled", "committedDate": "2020-06-14T08:10:47Z", "type": "commit"}, {"oid": "872aaa45ce8d123dec764c4ad87eeb38a86cff96", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/872aaa45ce8d123dec764c4ad87eeb38a86cff96", "message": "Revert moving async function wrapper to package level", "committedDate": "2020-06-14T11:02:42Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgyMDcyNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24060#discussion_r439820724", "bodyText": "Can we move this initialization to constructor? Is this method called only once?", "author": "Kishanthan", "createdAt": "2020-06-14T11:40:51Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmObservabilityGen.java", "diffHunk": "@@ -118,9 +126,10 @@ public JvmObservabilityGen(JvmPackageGen pkgGen) {\n      * @param pkg The package to instrument\n      */\n     public void rewriteObservableFunctions(BIRPackage pkg) {\n+        compileTimeConstants = new HashMap<>();", "originalCommit": "872aaa45ce8d123dec764c4ad87eeb38a86cff96", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgyMjIzMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/24060#discussion_r439822232", "bodyText": "Fixed in 759b37d", "author": "nadundesilva", "createdAt": "2020-06-14T11:57:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTgyMDcyNA=="}], "type": "inlineReview"}, {"oid": "759b37d86d154a908b2e88763e2e94f663b42156", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/759b37d86d154a908b2e88763e2e94f663b42156", "message": "Fix code review suggestions", "committedDate": "2020-06-14T11:50:09Z", "type": "commit"}]}