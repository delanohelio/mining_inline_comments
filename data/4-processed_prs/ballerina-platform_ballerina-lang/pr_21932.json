{"pr_number": 21932, "pr_title": "Fix stringValue for errors when details is an empty map", "pr_createdAt": "2020-03-18T09:39:53Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932", "timeline": [{"oid": "b31dc60f9e765b0cba75989fa695bda7994db833", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b31dc60f9e765b0cba75989fa695bda7994db833", "message": "Check ErrorValue:details if empty for stringValue\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>", "committedDate": "2020-03-18T09:41:08Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4MzE0MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932#discussion_r394283140", "bodyText": "Not changed by this PR but details is either a map or a record right?\n@SupunS, @warunalakshitha, can't details be a MapValue instead of Object?", "author": "MaryamZi", "createdAt": "2020-03-18T11:38:58Z", "path": "bvm/ballerina-runtime/src/main/java/org/ballerinalang/jvm/values/ErrorValue.java", "diffHunk": "@@ -254,6 +254,16 @@ private String getErrorMessage() {\n         return errorMsg;\n     }\n \n+    private boolean isEmptyDetail() {\n+        if (details == null) {\n+            return true;\n+        }\n+        if ((details instanceof MapValue) && ((MapValue) details).isEmpty()) {", "originalCommit": "e66ae0068af2b1d648c4f9ce3716177d6e202035", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4NTE0NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932#discussion_r394285144", "bodyText": "Yes, some generic empty check is needed.", "author": "KRVPerera", "createdAt": "2020-03-18T11:42:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4MzE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI5NzU5OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932#discussion_r394297599", "bodyText": "Yes, it should be a MapValue. This constructor as well as the API in BValueCreator are wrong i think.", "author": "SupunS", "createdAt": "2020-03-18T12:07:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4MzE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDMyODU2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932#discussion_r394328562", "bodyText": "Yeah.\n@KRVPerera, shall we create an issue to track fixing the type of details in ErrorValue?\nWe can remove this instanceof check when details is defined as a MapValue (I guess we can do that now also, but maybe we should keep it just to be on the safer side).", "author": "MaryamZi", "createdAt": "2020-03-18T13:02:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4MzE0MA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDQyMjk1Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21932#discussion_r394422953", "bodyText": "Create an issue : #21957", "author": "KRVPerera", "createdAt": "2020-03-18T15:13:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDI4MzE0MA=="}], "type": "inlineReview"}, {"oid": "242909a04c706f39678352909b4677719268aeaf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/242909a04c706f39678352909b4677719268aeaf", "message": "Check ErrorValue:details if empty for stringValue\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>", "committedDate": "2020-03-18T15:03:51Z", "type": "commit"}, {"oid": "ff43ad79c46dcee204fcef006670d87d58791f9d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ff43ad79c46dcee204fcef006670d87d58791f9d", "message": "Fix test cases for stringValue change of ErrorValue\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>", "committedDate": "2020-03-18T15:03:51Z", "type": "commit"}, {"oid": "ce6b9e2b88d1db6e84833bcb00a9a6adafe59c15", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce6b9e2b88d1db6e84833bcb00a9a6adafe59c15", "message": "Fix integration test for error value print\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>", "committedDate": "2020-03-18T15:03:51Z", "type": "commit"}, {"oid": "ce6b9e2b88d1db6e84833bcb00a9a6adafe59c15", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ce6b9e2b88d1db6e84833bcb00a9a6adafe59c15", "message": "Fix integration test for error value print\n\nSigned-off-by: KRVPerera <rukshan.viduranga@gmail.com>", "committedDate": "2020-03-18T15:03:51Z", "type": "forcePushed"}]}