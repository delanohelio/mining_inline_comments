{"pr_number": 26475, "pr_title": "Fix NPE for filePath in Syntax Tree", "pr_createdAt": "2020-10-21T11:52:56Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/26475", "timeline": [{"oid": "2cffd1eecf28690ee787add31d64228d38fcddd7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2cffd1eecf28690ee787add31d64228d38fcddd7", "message": "Fix NPE for filePath in Syntax Tree", "committedDate": "2020-10-21T12:46:51Z", "type": "commit"}, {"oid": "c21c8878c27892e6f33104ce4a2442a1005e16cb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c21c8878c27892e6f33104ce4a2442a1005e16cb", "message": "Fix spotbug errors", "committedDate": "2020-10-21T14:39:11Z", "type": "commit"}, {"oid": "c21c8878c27892e6f33104ce4a2442a1005e16cb", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c21c8878c27892e6f33104ce4a2442a1005e16cb", "message": "Fix spotbug errors", "committedDate": "2020-10-21T14:39:11Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM4MTAxMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26475#discussion_r509381013", "bodyText": "This code seems to be duplicate. Extract this to a separate method, and use in all places.\nLets fix that in a separate pr.", "author": "SupunS", "createdAt": "2020-10-21T15:22:01Z", "path": "language-server/modules/langserver-compiler/src/main/java/org/ballerinalang/langserver/compiler/workspace/WorkspaceDocument.java", "diffHunk": "@@ -72,14 +78,24 @@ public String getContent() {\n \n     public void setContent(String content) {\n         this.content = content;\n+        Path namePart = this.path.getFileName();\n         // TODO: Fix this, each time creates a new tree\n-        setTree(SyntaxTree.from(TextDocuments.from(this.content)));\n+        if (namePart != null) {\n+            setTree(SyntaxTree.from(TextDocuments.from(this.content), namePart.toString()));\n+        } else {\n+            setTree(SyntaxTree.from(TextDocuments.from(this.content)));\n+        }\n     }\n \n     public void setIncrementContent(String content) {\n         this.content = content;\n         // TODO: Fix this, each time creates a new tree\n-        setTree(SyntaxTree.from(TextDocuments.from(this.content)));\n+        Path namePath = this.path.getFileName();\n+        if (namePath != null) {\n+            setTree(SyntaxTree.from(TextDocuments.from(this.content), namePath.toString()));\n+        } else {\n+            setTree(SyntaxTree.from(TextDocuments.from(this.content)));\n+        }", "originalCommit": "c21c8878c27892e6f33104ce4a2442a1005e16cb", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM4MTU3NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/26475#discussion_r509381575", "bodyText": "Cool", "author": "dulajdilshan", "createdAt": "2020-10-21T15:22:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTM4MTAxMw=="}], "type": "inlineReview"}]}