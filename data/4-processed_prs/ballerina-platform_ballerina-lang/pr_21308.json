{"pr_number": 21308, "pr_title": "Implement Ballerina Cache API (v2.0.0) [master]", "pr_createdAt": "2020-02-27T05:47:48Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308", "timeline": [{"oid": "9a98cd63143db527cf9f1c950232523aa15dec2b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9a98cd63143db527cf9f1c950232523aa15dec2b", "message": "Implement linked list data structure", "committedDate": "2020-02-25T05:59:15Z", "type": "commit"}, {"oid": "639ae76c7fdb18a363aea23460b75a6ff3fd4991", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/639ae76c7fdb18a363aea23460b75a6ff3fd4991", "message": "Update unit tests", "committedDate": "2020-03-01T03:30:25Z", "type": "forcePushed"}, {"oid": "0915eecd728269c24aa4f4695325602557e74b97", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0915eecd728269c24aa4f4695325602557e74b97", "message": "Implement ballerina cache v2\n\nImplement ballerina cache v2\n\nRemove linked list print function\n\nFix a bug in max-age time\n\nRefactor cache api\n\nImplement task scheduler for cache cleanup\n\nRefactor code\n\nAdd ballerina documentations\n\nAdd developer comments\n\nRefactor code\n\nFix bugs\n\nImplement FIFO eviction policy\n\nUpdate documentations\n\nAdd default max-age property\n\nAdd ballerina docs for abstract object\n\nUpdate cache version", "committedDate": "2020-03-01T03:33:22Z", "type": "commit"}, {"oid": "eb188894414745c701b2f9b16d2b0f186c5a9b54", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/eb188894414745c701b2f9b16d2b0f186c5a9b54", "message": "Remove cache v1", "committedDate": "2020-03-01T03:33:27Z", "type": "commit"}, {"oid": "35a4b8b587b5b466722e0b9bf98330f064f619e5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/35a4b8b587b5b466722e0b9bf98330f064f619e5", "message": "Update unit tests", "committedDate": "2020-03-01T03:33:28Z", "type": "forcePushed"}, {"oid": "4ddb1e046bd176ecfd504b67b6eb7f84e66ac338", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4ddb1e046bd176ecfd504b67b6eb7f84e66ac338", "message": "Update unit tests", "committedDate": "2020-03-01T03:36:36Z", "type": "forcePushed"}, {"oid": "77c6e35bb919344a044890ce51922445cdd445a5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/77c6e35bb919344a044890ce51922445cdd445a5", "message": "Update unit tests", "committedDate": "2020-03-01T03:56:38Z", "type": "commit"}, {"oid": "dd8ee0248c87b22cd85472122629ccbd78a46bd3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/dd8ee0248c87b22cd85472122629ccbd78a46bd3", "message": "Update cache module usages", "committedDate": "2020-03-01T07:17:53Z", "type": "forcePushed"}, {"oid": "185eec37922b6990d19b754c37fa9749a67f7b8e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/185eec37922b6990d19b754c37fa9749a67f7b8e", "message": "Fix a concurrency issue", "committedDate": "2020-03-01T16:18:17Z", "type": "forcePushed"}, {"oid": "a004d0e7a87edbbbe76f58cb9b5191d93dd12bf8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/a004d0e7a87edbbbe76f58cb9b5191d93dd12bf8", "message": "Fix a concurrency issue", "committedDate": "2020-03-01T16:32:07Z", "type": "forcePushed"}, {"oid": "f4e5274977b2ba3db402cd10a2941021d36d9c04", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f4e5274977b2ba3db402cd10a2941021d36d9c04", "message": "Update cache module usages", "committedDate": "2020-03-01T17:42:26Z", "type": "commit"}, {"oid": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "message": "Fix a concurrency issue", "committedDate": "2020-03-01T17:42:39Z", "type": "commit"}, {"oid": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "message": "Fix a concurrency issue", "committedDate": "2020-03-01T17:42:39Z", "type": "forcePushed"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4OTMxMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386189311", "bodyText": "Can we make maxAgeInSeconds an optional param with -1 as default value?\nIMO maxAgeInSeconds value will not be changed specifically for the 80% of the case.", "author": "chamil321", "createdAt": "2020-03-02T04:05:30Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations. Any custom cache implementation should be\n+# object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Adds the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds);", "originalCommit": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIxOTg0OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386219848", "bodyText": "Yes. Fixed with 0cce9e3", "author": "ldclakmal", "createdAt": "2020-03-02T06:47:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4OTMxMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4ODY0MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386188640", "bodyText": "What if someone for some reason wants to add errors to the cache? Shouldn't we allow\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                public function put(string key, any value, int maxAgeInSeconds);\n          \n          \n            \n                public function put(string key, any|error value, int maxAgeInSeconds);", "author": "MaryamZi", "createdAt": "2020-03-02T04:01:00Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations. Any custom cache implementation should be\n+# object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Adds the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds);", "originalCommit": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMzMzEwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386333109", "bodyText": "As discussed offline, we will implement this based on the requirements in future. Thanks for the suggestion.", "author": "ldclakmal", "createdAt": "2020-03-02T11:15:17Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4ODY0MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4OTI3OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386189278", "bodyText": "any contains () so any? is redundant.\nSince a cache can be hold basically any value, this return type could cause the issue of not being able to identify if () is returned because the cache does not contain an entry by the particular key vs the cache holding () as the value for the particular key.\nA similar situation is avoided in the iterator design by having the next method return record {| T value; |}?, where returning a record always represents the presence of a value. See https://ballerina.io/spec/lang/2019R3/#section_5.5.1", "author": "MaryamZi", "createdAt": "2020-03-02T04:05:23Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations. Any custom cache implementation should be\n+# object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Adds the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds);\n+\n+    # Returns the cached value associated with the given key. If the provided cache key is not found,\n+    # () will be returned.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key\n+    public function get(string key) returns any?;", "originalCommit": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc2OTIzMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386769233", "bodyText": "As discussed offline the API is fixed with 931cf10. Thanks for the suggestion.", "author": "ldclakmal", "createdAt": "2020-03-03T02:38:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE4OTI3OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MjI5NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386192295", "bodyText": "What happens if there is no entry with the particular key? Shouldn't we include those details in the documentation?", "author": "MaryamZi", "createdAt": "2020-03-02T04:25:02Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations. Any custom cache implementation should be\n+# object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Adds the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds);\n+\n+    # Returns the cached value associated with the given key. If the provided cache key is not found,\n+    # () will be returned.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key\n+    public function get(string key) returns any?;\n+\n+    # Removes a cached value from the cache.", "originalCommit": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc2OTI5NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386769295", "bodyText": "The documentation is fixed with 931cf10. Thanks for the suggestion.", "author": "ldclakmal", "createdAt": "2020-03-03T02:39:08Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MjI5NQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MzQ5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386193492", "bodyText": "Here we need to remove the old node from the cache and add the new node. seems like we are adding the same old node into the cache. Please check", "author": "daneshk", "createdAt": "2020-03-02T04:32:29Z", "path": "stdlib/cache/src/main/ballerina/src/cache/cache.bal", "diffHunk": "@@ -14,336 +14,302 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-import ballerina/system;\n import ballerina/task;\n import ballerina/time;\n \n-# Cache cleanup task invoking interval in ms.\n-const int CACHE_CLEANUP_INTERVAL = 5000;\n+# The `LRU` eviction algorithm.\n+public const LRU = \"Least Recently Used\";\n+# The `FIFO` eviction algorithm.\n+public const FIFO = \"First In First Out\";\n \n-# Map which stores all of the caches.\n-map<Cache> cacheMap = {};\n+# The collection of eviction algorithms.\n+public type EvictionPolicy LRU|FIFO;\n \n-task:TimerConfiguration cacheCleanupTimerConfiguration = {\n-    intervalInMillis: CACHE_CLEANUP_INTERVAL,\n-    initialDelayInMillis: CACHE_CLEANUP_INTERVAL\n-};\n-\n-task:Scheduler cacheCleanupTimer = new(cacheCleanupTimerConfiguration);\n-\n-boolean timerStarted = false;\n-\n-# Represents a cache entry.\n+# Represents cache configuration.\n #\n-# + value - cache value\n-# + lastAccessedTime - last accessed time in ms of this value which is used to remove LRU cached values\n+# + capacity - Maximum number of entries allowed\n+# + evictionPolicy - The policy which defines the cache eviction algorithm\n+# + evictionFactor - The factor which the entries will be evicted once the cache full\n+# + defaultMaxAgeInSeconds - The default value in seconds which all the cache entries are valid.\n+#                            '-1' means, the entries are valid forever.\n+#                            This will be overwritten by the the `maxAge` property set when inserting item to cache\n+# + timerIntervalInSeconds - Interval of the timer task which clean up the cache\n+public type CacheConfig record {|\n+    int capacity;\n+    EvictionPolicy evictionPolicy;\n+    float evictionFactor;\n+    int defaultMaxAgeInSeconds = -1;\n+    int timerIntervalInSeconds?;\n+|};\n+\n type CacheEntry record {|\n-    any value;\n-    int lastAccessedTime;\n+    string key;\n+    any data;\n+    int expTime;       // exp time since epoch. calculated based on the `maxAge` parameter when inserting to map\n+|};\n+\n+// TODO: Remove by fixing https://github.com/ballerina-platform/ballerina-lang/issues/21268\n+type MapAndList record {|\n+    map<Node> entries;\n+    LinkedList list;\n |};\n \n-# Represents a Ballerina `Cache` which can hold multiple entries and remove entries based on time and size.\n+// Cleanup service which cleans the cache entries periodically.\n+service cleanupService = service {\n+    resource function onTrigger(MapAndList mapAndList) {\n+        lock {\n+            cleanup(mapAndList);\n+        }\n+    }\n+};\n+\n+# Represents Ballerina `Cache` object and cache related operations.\n public type Cache object {\n \n+    *AbstractCache;\n+\n     private int capacity;\n-    map<CacheEntry> entries = {};\n-    int expiryTimeInMillis;\n+    private EvictionPolicy evictionPolicy;\n     private float evictionFactor;\n-    private string uuid;\n+    private int defaultMaxAgeInSeconds;\n+    private map<Node> entries = {};\n+    private LinkedList list;\n \n-    # Creates a new `Cache`.\n+    # Creates a new `Cache` object.\n     #\n-    # + expiryTimeInMillis - Time since its last access in which the cache will be expired.\n-    # + capacity - Maximum number of entries allowed.\n-    # + evictionFactor - The factor which the entries will be evicted once the cache full.\n-    public function __init(public int expiryTimeInMillis = 900000, public int capacity = 100, public float evictionFactor = 0.25) {\n-\n-        // Cache expiry time must be a positive value.\n-        if (expiryTimeInMillis <= 0) {\n-            Error e = error(CACHE_ERROR, message = \"Expiry time must be greater than 0.\");\n-            panic e;\n-        }\n+    # + cacheConfig - Cache configurations\n+    public function __init(CacheConfig cacheConfig) {\n+        self.capacity = cacheConfig.capacity;\n+        self.evictionPolicy = cacheConfig.evictionPolicy;\n+        self.evictionFactor = cacheConfig.evictionFactor;\n+        self.defaultMaxAgeInSeconds = cacheConfig.defaultMaxAgeInSeconds;\n+\n         // Cache capacity must be a positive value.\n-        if (capacity <= 0) {\n-            Error e = error(CACHE_ERROR, message = \"Capacity must be greater than 0.\");\n-            panic e;\n+        if (self.capacity <= 0) {\n+            panic error(CACHE_ERROR, message = \"Capacity must be greater than 0.\");\n         }\n         // Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\n-        if (evictionFactor <= 0 || evictionFactor > 1) {\n-            Error e = error(CACHE_ERROR, message = \"Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\");\n-            panic e;\n+        if (self.evictionFactor <= 0 || self.evictionFactor > 1) {\n+            panic error(CACHE_ERROR, message = \"Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\");\n         }\n-        // We remove empty caches to prevent OOM issues. So in such scenarios, the cache will not be in the `cacheMap`\n-        // when we are trying to add a new cache entry to that cache. So we need to create a new cache. For that, keep\n-        // track of the UUID.\n-        self.uuid = system:uuid();\n-        cacheMap[self.uuid] = self;\n-        self.expiryTimeInMillis = expiryTimeInMillis;\n-        self.capacity = capacity;\n-        self.evictionFactor = evictionFactor;\n-\n-        var attachCacheCleanerResult = cacheCleanupTimer.attach(cacheCleanupService);\n-        if (attachCacheCleanerResult is error) {\n-            record {| string message?; anydata|error...; |} detail = attachCacheCleanerResult.detail();\n-            Error e = error(CACHE_ERROR, message = \"Failed to create the cache cleanup task: \" +  <string> detail[\"message\"]);\n-            panic e;\n+\n+        // Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\n+        if (self.defaultMaxAgeInSeconds != -1 && self.defaultMaxAgeInSeconds <= 0) {\n+            panic error(CACHE_ERROR, message = \"Default max age should be greater than 0 or -1 for indicate forever valid.\");\n         }\n \n-        if (!timerStarted && !cacheCleanupTimer.isStarted()) {\n-            lock {\n-                if(!cacheCleanupTimer.isStarted()) {\n-                    var timerStartResult = cacheCleanupTimer.start();\n-                    if (timerStartResult is error) {\n-                        record {| string message?; anydata|error...; |} detail = timerStartResult.detail();\n-                        Error e = error(CACHE_ERROR, message = \"Failed to start the cache cleanup task: \" +  <string> detail[\"message\"]);\n-                        panic e;\n-                    }\n-                    timerStarted = true;\n-                }\n+        self.list = {\n+            head: (),\n+            tail: ()\n+        };\n+        int? timerIntervalInSeconds = cacheConfig?.timerIntervalInSeconds;\n+        if (timerIntervalInSeconds is int) {\n+            task:TimerConfiguration timerConfiguration = {\n+                intervalInMillis: timerIntervalInSeconds,\n+                initialDelayInMillis: timerIntervalInSeconds\n+            };\n+            task:Scheduler cleanupScheduler = new(timerConfiguration);\n+            MapAndList mapAndList = {\n+                entries: self.entries,\n+                list: self.list\n+            };\n+            task:SchedulerError? result = cleanupScheduler.attach(cleanupService, attachment = mapAndList);\n+            if (result is task:SchedulerError) {\n+                record {| string message?; anydata|error...; |} detail = result.detail();\n+                panic error(CACHE_ERROR, message = \"Failed to create the cache cleanup task: \" + <string>detail[\"message\"]);\n+            }\n+            result = cleanupScheduler.start();\n+            if (result is task:SchedulerError) {\n+                record {| string message?; anydata|error...; |} detail = result.detail();\n+                panic error(CACHE_ERROR, message = \"Failed to start the cache cleanup task: \" + <string>detail[\"message\"]);\n             }\n         }\n     }\n \n-    # Checks whether the given key has an associated cache value.\n-    #\n-    # + key - The key to be checked.\n-    # + return - `true` if the given key has an associated value, `false` otherwise.\n-    public function hasKey(string key) returns boolean {\n-        return self.entries.hasKey(key);\n-    }\n-\n-    # Returns the size of the cache.\n-    #\n-    # + return - The size of the cache.\n-    public function size() returns int {\n-        return self.entries.length();\n-    }\n-\n-    # Adds the given key, value pair to the provided cache.\n+    # Adds the given key, value pair to the cache.\n     #\n-    # + key - Value which should be used as the key.\n-    # + value - Value to be cached.\n-    public function put(string key, any value) {\n-        // We need to synchronize this process otherwise concurrency might cause issues.\n-         lock {\n-            int cacheCapacity = self.capacity;\n-            int cacheSize = self.entries.length();\n-\n-            // If the current cache is full, evict cache.\n-            if (cacheCapacity <= cacheSize) {\n-                self.evict();\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) {\n+        lock {\n+            // If the current cache is full (i.e. size = capacity), evict cache.\n+            if (self.size() == self.capacity) {\n+                evict(self.entries, self.list, self.evictionPolicy, self.capacity, self.evictionFactor);\n             }\n-            // Add the new cache entry.\n-            int time = time:currentTime().time;\n-            CacheEntry entry = { value: value, lastAccessedTime: time };\n-            self.entries[key] = entry;\n-\n-            // If the UUID is not found, that means that cache was removed after being empty. So we need to create a\n-            // new cache with the current cache object.\n-            if (!cacheMap.hasKey(self.uuid)) {\n-                cacheMap[self.uuid] = self;\n+\n+            // Calculate the `expTime` of the cache entry based on the `maxAgeInSeconds` property and\n+            // `defaultMaxAgeInSeconds` property.\n+            int calculatedExpTime = -1;\n+            if (maxAgeInSeconds != -1 && maxAgeInSeconds > 0) {\n+                calculatedExpTime = time:nanoTime() + (maxAgeInSeconds * 1000 * 1000 * 1000);\n+            } else {\n+                if (self.defaultMaxAgeInSeconds != -1) {\n+                    calculatedExpTime = time:nanoTime() + (self.defaultMaxAgeInSeconds * 1000 * 1000 * 1000);\n+                }\n             }\n-         }\n-    }\n \n-    # Evicts the cache when the cache is full.\n-    function evict() {\n-        int maxCapacity = self.capacity;\n-        float ef = self.evictionFactor;\n-        int numberOfKeysToEvict = <int>(maxCapacity * ef);\n-        // Get the above number of least recently used cache entry keys from the cache\n-        string[] cacheKeys = self.getLRUCacheKeys(numberOfKeysToEvict);\n-        // Iterate through the map and remove entries.\n-        foreach var c in cacheKeys {\n-            // These cache values are ignored. So it is not needed to check the return value for the remove function.\n-            var tempVar = self.entries.remove(c);\n+            CacheEntry entry = {\n+                key: key,\n+                data: value,\n+                expTime: calculatedExpTime\n+            };\n+\n+            if (self.hasKey(key)) {\n+                Node node = self.entries.get(key);\n+                putOnEvictionPolicy(self.evictionPolicy, self.list, node, true);", "originalCommit": "bed6b44fa3c7fcf7488a9e8e7775da050bf1fc3b", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjIwNzA5Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386207097", "bodyText": "Yes. Fixed it with 4cf23f8", "author": "ldclakmal", "createdAt": "2020-03-02T05:49:30Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjE5MzQ5Mg=="}], "type": "inlineReview"}, {"oid": "9e1b8ca61189c7901adaa7d15d3e7eae1280607d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9e1b8ca61189c7901adaa7d15d3e7eae1280607d", "message": "Improve cleanup concurrency", "committedDate": "2020-03-02T05:46:36Z", "type": "commit"}, {"oid": "4cf23f89727e3e6593d6375baa00cf0e9b75329b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4cf23f89727e3e6593d6375baa00cf0e9b75329b", "message": "Fix a bug in cache put for existing entry", "committedDate": "2020-03-02T05:47:30Z", "type": "commit"}, {"oid": "0cce9e3259d7d174a4cb0e0549dbed102a919d4a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0cce9e3259d7d174a4cb0e0549dbed102a919d4a", "message": "Fix abstract cache object with default value", "committedDate": "2020-03-02T05:51:07Z", "type": "commit"}, {"oid": "145934bcacb39ca755165fe42a1429a6018ba6a7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/145934bcacb39ca755165fe42a1429a6018ba6a7", "message": "Add cache init default values and update usages", "committedDate": "2020-03-02T06:46:45Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI2ODEyOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386268129", "bodyText": "Shall we rename this to something which conveys what this time interval is about?", "author": "pubudu91", "createdAt": "2020-03-02T09:07:38Z", "path": "stdlib/cache/src/main/ballerina/src/cache/cache.bal", "diffHunk": "@@ -14,336 +14,308 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-import ballerina/system;\n import ballerina/task;\n import ballerina/time;\n \n-# Cache cleanup task invoking interval in ms.\n-const int CACHE_CLEANUP_INTERVAL = 5000;\n+# The `LRU` eviction algorithm.\n+public const LRU = \"Least Recently Used\";\n+# The `FIFO` eviction algorithm.\n+public const FIFO = \"First In First Out\";\n \n-# Map which stores all of the caches.\n-map<Cache> cacheMap = {};\n+# The collection of eviction algorithms.\n+public type EvictionPolicy LRU|FIFO;\n \n-task:TimerConfiguration cacheCleanupTimerConfiguration = {\n-    intervalInMillis: CACHE_CLEANUP_INTERVAL,\n-    initialDelayInMillis: CACHE_CLEANUP_INTERVAL\n-};\n-\n-task:Scheduler cacheCleanupTimer = new(cacheCleanupTimerConfiguration);\n-\n-boolean timerStarted = false;\n-\n-# Represents a cache entry.\n+# Represents cache configuration.\n #\n-# + value - cache value\n-# + lastAccessedTime - last accessed time in ms of this value which is used to remove LRU cached values\n+# + capacity - Maximum number of entries allowed\n+# + evictionPolicy - The policy which defines the cache eviction algorithm\n+# + evictionFactor - The factor which the entries will be evicted once the cache full\n+# + defaultMaxAgeInSeconds - The default value in seconds which all the cache entries are valid.\n+#                            '-1' means, the entries are valid forever.\n+#                            This will be overwritten by the the `maxAge` property set when inserting item to cache\n+# + timerIntervalInSeconds - Interval of the timer task which clean up the cache\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    EvictionPolicy evictionPolicy = LRU;\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int timerIntervalInSeconds?;", "originalCommit": "145934bcacb39ca755165fe42a1429a6018ba6a7", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjMzNDU2MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386334560", "bodyText": "@pubudu91 How about cleanUpTimerIntervalInSeconds? Then the length of the variable name becomes larger. Any suggestions?", "author": "ldclakmal", "createdAt": "2020-03-02T11:18:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI2ODEyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjM2MTgxOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386361818", "bodyText": "How about just cleanupIntervalInSeconds?", "author": "pubudu91", "createdAt": "2020-03-02T12:23:54Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI2ODEyOQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4Njc3NjI2OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r386776269", "bodyText": "That's better. Fixed with cb6373b. Thanks for the suggestion.", "author": "ldclakmal", "createdAt": "2020-03-03T03:07:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NjI2ODEyOQ=="}], "type": "inlineReview"}, {"oid": "26a8a6ee5be15b01996a7ef85476230868369e20", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/26a8a6ee5be15b01996a7ef85476230868369e20", "message": "Update cache API with return of the error", "committedDate": "2020-03-03T02:32:58Z", "type": "forcePushed"}, {"oid": "290a0bd771eedf5baece05c6fb03cfa962c807d4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/290a0bd771eedf5baece05c6fb03cfa962c807d4", "message": "Update cache API with return of the error", "committedDate": "2020-03-03T02:52:14Z", "type": "forcePushed"}, {"oid": "931cf109b04ef2771e5c1e216c8cc557a8aee1c4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/931cf109b04ef2771e5c1e216c8cc557a8aee1c4", "message": "Update cache API with return of the error", "committedDate": "2020-03-03T02:59:38Z", "type": "commit"}, {"oid": "92b72b9ec2145e398314a930ade03641bfd59c9a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/92b72b9ec2145e398314a930ade03641bfd59c9a", "message": "Update cache API usages", "committedDate": "2020-03-03T03:00:22Z", "type": "forcePushed"}, {"oid": "685430939861f69e7f62cf0112dfefa1616d5094", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/685430939861f69e7f62cf0112dfefa1616d5094", "message": "Update cache API usages", "committedDate": "2020-03-03T05:46:40Z", "type": "commit"}, {"oid": "cb6373bbeb884c5cbfbf8ba4323642b0e5006917", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cb6373bbeb884c5cbfbf8ba4323642b0e5006917", "message": "Address review suggestions", "committedDate": "2020-03-03T05:46:50Z", "type": "commit"}, {"oid": "cb6373bbeb884c5cbfbf8ba4323642b0e5006917", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/cb6373bbeb884c5cbfbf8ba4323642b0e5006917", "message": "Address review suggestions", "committedDate": "2020-03-03T05:46:50Z", "type": "forcePushed"}, {"oid": "9ef7f23d765d278b98b1cf0fe2908b6d8027c758", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9ef7f23d765d278b98b1cf0fe2908b6d8027c758", "message": "Abstract out the eviction policy", "committedDate": "2020-03-03T11:10:32Z", "type": "commit"}, {"oid": "0dda4fd8a26cd7e360614907d159013dabfc7f90", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0dda4fd8a26cd7e360614907d159013dabfc7f90", "message": "Update cache API usages", "committedDate": "2020-03-03T12:04:24Z", "type": "commit"}, {"oid": "180d04351e166fb69554d0f2c3a93ed2a3de8a99", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/180d04351e166fb69554d0f2c3a93ed2a3de8a99", "message": "Improve cache API usages with cache v2", "committedDate": "2020-03-04T06:07:09Z", "type": "commit"}, {"oid": "0bbfa326d2f453292479c0dd4e4cab8ba34190e7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0bbfa326d2f453292479c0dd4e4cab8ba34190e7", "message": "Add ballerina documentations", "committedDate": "2020-03-04T06:47:32Z", "type": "commit"}, {"oid": "81367dee28020b3d8cb208ada554d55d0d1283bc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/81367dee28020b3d8cb208ada554d55d0d1283bc", "message": "Fix lang-server test cases", "committedDate": "2020-03-05T06:08:40Z", "type": "commit"}, {"oid": "39689d358347e856d69892ab93d3992612f3c715", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/39689d358347e856d69892ab93d3992612f3c715", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into refactor-cache\n\n# Conflicts:\n#\tlanguage-server/modules/langserver-core/src/test/resources/completion/object/objectTest13.json\n#\tlanguage-server/modules/langserver-core/src/test/resources/completion/toplevel/globalVarDefPackageContent.json\n#\tlanguage-server/modules/langserver-core/src/test/resources/completion/toplevel/statementWithMissingSemiColon3.json", "committedDate": "2020-03-05T06:18:56Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExNzYyNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388117626", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Add the given key, value pair to the cache.\n          \n          \n            \n                # Add the given key value pair to the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:29:21Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExNzY4Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388117687", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n          \n          \n            \n                # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.", "author": "praneesha", "createdAt": "2020-03-05T07:29:33Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExNzc1Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388117752", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + key - Key which is used to retrieve the cached value\n          \n          \n            \n                # + key - Key, which is used to retrieve the cached value", "author": "praneesha", "createdAt": "2020-03-05T07:29:45Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODAxOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118018", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n          \n          \n            \n                # `Error` if any error occurred while retrieving from the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:30:35Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIwMzQ3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388203479", "bodyText": "@praneesha I missed the 'available' word in my doc. Check whether following is okay.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n          \n          \n            \n                # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.", "author": "ldclakmal", "createdAt": "2020-03-05T10:26:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODAxOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODEzMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118131", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Invalidate a cached value from the cache.\n          \n          \n            \n                # Validate a cached value from the cache.\n          \n      \n    \n    \n  \n\nThere is no word as \"invalidating\". You validate and the value becomes valid or invalid.", "author": "praneesha", "createdAt": "2020-03-05T07:30:52Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI0MTAxOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388241019", "bodyText": "I changed those with the word \"discard\" since it makes more sense in technical perspective and \"validate\" word change the technical meaning.", "author": "ldclakmal", "createdAt": "2020-03-05T11:41:05Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODEzMQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODI0Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118242", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + key - Key of the cache entry which needs to be invalidate\n          \n          \n            \n                # + key - Key of the cache entry, which needs to be validated", "author": "praneesha", "createdAt": "2020-03-05T07:31:12Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODM1Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118357", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - `()` if successfully invalidated or\n          \n          \n            \n                # + return - `()` if successfully validated or", "author": "praneesha", "createdAt": "2020-03-05T07:31:36Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODQ0Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118446", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n          \n          \n            \n                # `Error` if any error occurred while validating from the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:31:53Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or\n+    # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODIwMzk2Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388203967", "bodyText": "@praneesha I missed the 'available' word in my doc. Check whether following is okay.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n          \n          \n            \n                # `Error` if the provided cache key is not available or if any error occurred while invalidating from the cache.", "author": "ldclakmal", "createdAt": "2020-03-05T10:27:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODQ0Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODQ5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118492", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Invalidate all the cached values from the cache.\n          \n          \n            \n                # Validate all the cached values from the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:32:03Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or\n+    # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n+    public function invalidate(string key) returns Error?;\n+\n+    # Invalidate all the cached values from the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODU2Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118567", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - `()` if successfully invalidated all or\n          \n          \n            \n                # + return - `()` if all are successfully validated", "author": "praneesha", "createdAt": "2020-03-05T07:32:19Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or\n+    # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n+    public function invalidate(string key) returns Error?;\n+\n+    # Invalidate all the cached values from the cache.\n+    #\n+    # + return - `()` if successfully invalidated all or", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExODYzNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388118637", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if any error occurred while invalidating all from the cache.\n          \n          \n            \n                # `Error` if any error occurred while validating all from the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:32:32Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or\n+    # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n+    public function invalidate(string key) returns Error?;\n+\n+    # Invalidate all the cached values from the cache.\n+    #\n+    # + return - `()` if successfully invalidated all or\n+    # `Error` if any error occurred while invalidating all from the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTAwMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119002", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - Whether the an associated cache value is available in the cache or not\n          \n          \n            \n                # + return - Whether an associated cache value is available in the cache or not", "author": "praneesha", "createdAt": "2020-03-05T07:33:30Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key, value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Invalidate a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be invalidate\n+    # + return - `()` if successfully invalidated or\n+    # `Error` if the provided cache key is not or if any error occurred while invalidating from the cache.\n+    public function invalidate(string key) returns Error?;\n+\n+    # Invalidate all the cached values from the cache.\n+    #\n+    # + return - `()` if successfully invalidated all or\n+    # `Error` if any error occurred while invalidating all from the cache.\n+    public function invalidateAll() returns Error?;\n+\n+    # Checks whether the given key has an associated cache value.\n+    #\n+    # + key - The key to be checked\n+    # + return - Whether the an associated cache value is available in the cache or not", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTE1Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119157", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents Ballerina `AbstractCache` object and cache related operations.\n          \n          \n            \n            # Represents the Ballerina `AbstractCache` object and cache-related operations.", "author": "praneesha", "createdAt": "2020-03-05T07:33:59Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractCache` object and cache related operations.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTIxOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119218", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n          \n          \n            \n            # Represents the Ballerina `AbstractEvictionPolicy` object and cache eviction related operations", "author": "praneesha", "createdAt": "2020-03-05T07:34:14Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTQyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119421", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on get operation.\n          \n          \n            \n                # Update the linked list based on the get operation.", "author": "praneesha", "createdAt": "2020-03-05T07:34:50Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTQ2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119462", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # based on linked list data structure.\n          \n          \n            \n            # based on a linked list data structure.", "author": "praneesha", "createdAt": "2020-03-05T07:34:58Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTUxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119514", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is retrieved\n          \n          \n            \n                # + node - Node of the linked list, which is retrieved", "author": "praneesha", "createdAt": "2020-03-05T07:35:08Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTU4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119589", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on put operation.\n          \n          \n            \n                # Update the linked list based on the put operation.", "author": "praneesha", "createdAt": "2020-03-05T07:35:18Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTY2NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119664", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is newly added\n          \n          \n            \n                # + node - Node of the linked list, which is added newly", "author": "praneesha", "createdAt": "2020-03-05T07:35:34Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTczMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119733", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on remove operation.\n          \n          \n            \n                # Update the linked list based on the remove operation.", "author": "praneesha", "createdAt": "2020-03-05T07:35:47Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTc5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119792", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is deleted\n          \n          \n            \n                # + node - Node of the linked list, which is deleted", "author": "praneesha", "createdAt": "2020-03-05T07:35:54Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTg0Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119847", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on replace operation.\n          \n          \n            \n                # Update the linked list based on the replace operation.", "author": "praneesha", "createdAt": "2020-03-05T07:36:03Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODExOTk2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388119962", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + newNode - Node of the linked list which is replaced by\n          \n          \n            \n                # + newNode - Node of the linked list, which is used for replacing", "author": "praneesha", "createdAt": "2020-03-05T07:36:24Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMDM4NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388120385", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + oldNode - Node of the linked list which is to be replaced\n          \n          \n            \n                # + oldNode - Node of the linked list, which will be replaced", "author": "praneesha", "createdAt": "2020-03-05T07:37:44Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMDQzOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388120438", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on clear operation.\n          \n          \n            \n                # Update the linked list based on the clear operation.", "author": "praneesha", "createdAt": "2020-03-05T07:37:52Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+\n+    # Update linked list based on clear operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMDQ4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388120489", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on evict operation.\n          \n          \n            \n                # Update the linked list based on the evict operation.", "author": "praneesha", "createdAt": "2020-03-05T07:38:03Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+\n+    # Update linked list based on clear operation.\n+    #\n+    # + list - Linked list data structure\n+    public function clear(LinkedList list);\n+\n+    # Update linked list based on evict operation.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMDU1OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388120559", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - The Ndde which should evict from the linked list or `()` if nothing to be evicted\n          \n          \n            \n                # + return - The Node, which should evict from the linked list or `()` if nothing to be evicted", "author": "praneesha", "createdAt": "2020-03-05T07:38:16Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,58 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents Ballerina `AbstractEvictionPolicy` object and cache eviction related operations\n+# based on linked list data structure.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractEvictionPolicy abstract object {\n+\n+    # Update linked list based on get operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node);\n+\n+    # Update linked list based on put operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node);\n+\n+    # Update linked list based on remove operation.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node);\n+\n+    # Update linked list based on replace operation.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+\n+    # Update linked list based on clear operation.\n+    #\n+    # + list - Linked list data structure\n+    public function clear(LinkedList list);\n+\n+    # Update linked list based on evict operation.\n+    #\n+    # + list - Linked list data structure\n+    # + return - The Ndde which should evict from the linked list or `()` if nothing to be evicted", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMDkyMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388120923", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Log and prepare `error` as a `Error`.\n          \n          \n            \n            # Log and prepare the `error` as an `Error`.", "author": "praneesha", "createdAt": "2020-03-05T07:39:19Z", "path": "stdlib/cache/src/main/ballerina/src/cache/cache_errors.bal", "diffHunk": "@@ -25,3 +27,19 @@ public type Detail record {\n \n public const CACHE_ERROR = \"{ballerina/cache}Error\";\n public type Error error<CACHE_ERROR, Detail>;\n+\n+# Log and prepare `error` as a `Error`.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTA0NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121045", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // This is a linked list data structure implementation which is used for the eviction algorithm of the cache.\n          \n          \n            \n            // This is a linked list data structure implementation, which is used for the eviction algorithm of the cache.", "author": "praneesha", "createdAt": "2020-03-05T07:39:40Z", "path": "stdlib/cache/src/main/ballerina/src/cache/linked_list.bal", "diffHunk": "@@ -0,0 +1,90 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+// This is a linked list data structure implementation which is used for the eviction algorithm of the cache.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTE3MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121171", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n          \n          \n            \n            # Represents the `LruEvictionPolicy` object, which has LRU eviction algorithm related operations", "author": "praneesha", "createdAt": "2020-03-05T07:40:05Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTI1Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121252", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # based on linked list data structure.\n          \n          \n            \n            # based on a linked list data structure.", "author": "praneesha", "createdAt": "2020-03-05T07:40:18Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTM0MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121340", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on get operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the get operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:40:33Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTM5MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121391", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is retrieved\n          \n          \n            \n                # + node - Node of the linked list, which is retrieved", "author": "praneesha", "createdAt": "2020-03-05T07:40:42Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTQ5Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121492", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on put operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the put operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:40:57Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTYwMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121603", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is newly added\n          \n          \n            \n                # + node - Node of the linked list, which is added newly", "author": "praneesha", "createdAt": "2020-03-05T07:41:17Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTY2Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121666", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on remove operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the remove operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:41:30Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTcyMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121720", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + node - Node of the linked list which is deleted\n          \n          \n            \n                # + node - Node of the linked list, which is deleted", "author": "praneesha", "createdAt": "2020-03-05T07:41:38Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTc5Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121797", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on replace operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the replace operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:41:49Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTg2NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121865", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + newNode - Node of the linked list which is replaced by\n          \n          \n            \n                # + newNode - Node of the linked list, which is used for replacing", "author": "praneesha", "createdAt": "2020-03-05T07:42:02Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMTkyMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388121920", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + oldNode - Node of the linked list which is to be replaced\n          \n          \n            \n                # + oldNode - Node of the linked list, which will be replaced", "author": "praneesha", "createdAt": "2020-03-05T07:42:12Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMjAwMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388122001", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on clear operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the clear operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:42:27Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode) {\n+        remove(list, oldNode);\n+        addFirst(list, newNode);\n+    }\n+\n+    # Update linked list based on clear operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMjA4Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388122082", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Update linked list based on evict operation related to LRU eviction algorithm.\n          \n          \n            \n                # Update the linked list based on the evict operation related to the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-05T07:42:39Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode) {\n+        remove(list, oldNode);\n+        addFirst(list, newNode);\n+    }\n+\n+    # Update linked list based on clear operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    public function clear(LinkedList list) {\n+        clear(list);\n+    }\n+\n+    # Update linked list based on evict operation related to LRU eviction algorithm.", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMjE2OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388122168", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - The Ndde which should evict from the linked list or `()` if nothing to be evicted\n          \n          \n            \n                # + return - The Node, which should evict from the linked list or `()` if nothing to be evicted", "author": "praneesha", "createdAt": "2020-03-05T07:42:53Z", "path": "stdlib/cache/src/main/ballerina/src/cache/lru_eviction_policy.bal", "diffHunk": "@@ -0,0 +1,73 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents `LruEvictionPolicy` object which has LRU eviction algorithm related operations\n+# based on linked list data structure.\n+public type LruEvictionPolicy object {\n+\n+    *AbstractEvictionPolicy;\n+\n+    # Update linked list based on get operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is retrieved\n+    public function get(LinkedList list, Node node) {\n+        remove(list, node);\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on put operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is newly added\n+    public function put(LinkedList list, Node node) {\n+        addFirst(list, node);\n+    }\n+\n+    # Update linked list based on remove operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + node - Node of the linked list which is deleted\n+    public function remove(LinkedList list, Node node) {\n+        remove(list, node);\n+    }\n+\n+    # Update linked list based on replace operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + newNode - Node of the linked list which is replaced by\n+    # + oldNode - Node of the linked list which is to be replaced\n+    public function replace(LinkedList list, Node newNode, Node oldNode) {\n+        remove(list, oldNode);\n+        addFirst(list, newNode);\n+    }\n+\n+    # Update linked list based on clear operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    public function clear(LinkedList list) {\n+        clear(list);\n+    }\n+\n+    # Update linked list based on evict operation related to LRU eviction algorithm.\n+    #\n+    # + list - Linked list data structure\n+    # + return - The Ndde which should evict from the linked list or `()` if nothing to be evicted", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMjUwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388122509", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + oauth2Cache - Cache used to store OAuth2 token and information\n          \n          \n            \n            # + oauth2Cache - Cache used to store the OAuth2 token and other related information", "author": "praneesha", "createdAt": "2020-03-05T07:43:50Z", "path": "stdlib/oauth2/src/main/ballerina/src/oauth2/inbound_oauth2_provider.bal", "diffHunk": "@@ -157,35 +148,22 @@ public function getScopes(string scopes) returns string[] {\n #\n # + url - URL of the introspection server\n # + tokenTypeHint - A hint about the type of the token submitted for introspection\n-# + oauth2CacheConfig - Configurations for the OAuth2 cache\n+# + oauth2Cache - Cache used to store OAuth2 token and information", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODEyMjU3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388122579", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # + defaultTokenExpTimeInSeconds - Expiration time of the tokens if introspection response does not contain `exp` field\n          \n          \n            \n            # + defaultTokenExpTimeInSeconds - Expiration time of the tokens if introspection response does not contain an `exp` field", "author": "praneesha", "createdAt": "2020-03-05T07:44:02Z", "path": "stdlib/oauth2/src/main/ballerina/src/oauth2/inbound_oauth2_provider.bal", "diffHunk": "@@ -157,35 +148,22 @@ public function getScopes(string scopes) returns string[] {\n #\n # + url - URL of the introspection server\n # + tokenTypeHint - A hint about the type of the token submitted for introspection\n-# + oauth2CacheConfig - Configurations for the OAuth2 cache\n+# + oauth2Cache - Cache used to store OAuth2 token and information\n+# + defaultTokenExpTimeInSeconds - Expiration time of the tokens if introspection response does not contain `exp` field", "originalCommit": "39689d358347e856d69892ab93d3992612f3c715", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "8fc4f8d8e13d101acc1b92d04ba3fddc3df1cd77", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8fc4f8d8e13d101acc1b92d04ba3fddc3df1cd77", "message": "Apply suggestions from code review\n\nCo-Authored-By: praneesha <praneesha@wso2.com>", "committedDate": "2020-03-05T11:31:38Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODY5NTEyMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r388695120", "bodyText": "Do we need to throw an error if entry not found during the invalidation? What if we return a boolean instead?", "author": "wggihan", "createdAt": "2020-03-06T03:21:21Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,69 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    public function put(string key, any value, int maxAgeInSeconds = -1);\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Discard a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be discarded\n+    # + return - `()` if successfully discarded or\n+    # `Error` if the provided cache key is not available or if any error occurred while discarding from the cache.", "originalCommit": "6ba74184c4825f0b2184bc30867cc4234522de17", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "27e76cb0ff8fd55778970f17e0eea27b4e14ffa2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/27e76cb0ff8fd55778970f17e0eea27b4e14ffa2", "message": "Update API docs", "committedDate": "2020-03-06T04:44:18Z", "type": "commit"}, {"oid": "ba7b2331dc8504ae7aac0646ef83cabd7f7ad4fd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ba7b2331dc8504ae7aac0646ef83cabd7f7ad4fd", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into refactor-cache", "committedDate": "2020-03-06T04:44:36Z", "type": "commit"}, {"oid": "2e69b4db1c1b0b75e295ff5efa1848f86647a1a9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2e69b4db1c1b0b75e295ff5efa1848f86647a1a9", "message": "Fix multiple attachment usage", "committedDate": "2020-03-06T05:25:39Z", "type": "forcePushed"}, {"oid": "b0d5b1f49f4709735e213a1a64570eeea65ebe2b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b0d5b1f49f4709735e213a1a64570eeea65ebe2b", "message": "Fix multiple attachment usage", "committedDate": "2020-03-06T08:01:50Z", "type": "commit"}, {"oid": "b0d5b1f49f4709735e213a1a64570eeea65ebe2b", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b0d5b1f49f4709735e213a1a64570eeea65ebe2b", "message": "Fix multiple attachment usage", "committedDate": "2020-03-06T08:01:50Z", "type": "forcePushed"}, {"oid": "5a0751c6de1541d0801d891823784cff6a3654b1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5a0751c6de1541d0801d891823784cff6a3654b1", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into refactor-cache", "committedDate": "2020-03-06T13:47:04Z", "type": "commit"}, {"oid": "65c1555af131c0fe187dac19c12e41c82c78228a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/65c1555af131c0fe187dac19c12e41c82c78228a", "message": "Update cache API of put operation", "committedDate": "2020-03-06T16:23:50Z", "type": "commit"}, {"oid": "fd2423c402c654c911a6d5871bee22a21e396794", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fd2423c402c654c911a6d5871bee22a21e396794", "message": "Update cache API usages", "committedDate": "2020-03-06T16:24:07Z", "type": "forcePushed"}, {"oid": "b553565b0c83f5126efb5e0a34fc2a2f8475c342", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b553565b0c83f5126efb5e0a34fc2a2f8475c342", "message": "Update cache API usages", "committedDate": "2020-03-09T02:20:56Z", "type": "forcePushed"}, {"oid": "63d00cf5f656bcc010807eb3582bbb10eb21d8bf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63d00cf5f656bcc010807eb3582bbb10eb21d8bf", "message": "Update cache API usages", "committedDate": "2020-03-09T02:23:37Z", "type": "commit"}, {"oid": "63d00cf5f656bcc010807eb3582bbb10eb21d8bf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/63d00cf5f656bcc010807eb3582bbb10eb21d8bf", "message": "Update cache API usages", "committedDate": "2020-03-09T02:23:37Z", "type": "forcePushed"}, {"oid": "431b2c67c1519df02f92ccf1e8a0e658afd5e870", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/431b2c67c1519df02f92ccf1e8a0e658afd5e870", "message": "Update module.md", "committedDate": "2020-03-09T04:00:15Z", "type": "commit"}, {"oid": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7ffc61bfe381eb5a03befddc31222f9eace1c97f", "message": "Update cache BBE", "committedDate": "2020-03-09T04:18:54Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjM4Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086382", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n          \n          \n            \n                # Add the given key value pair to the cache. If the cache previously contained a value associated with the key, the", "author": "praneesha", "createdAt": "2020-03-10T04:12:43Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjQxNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086416", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # old value is replaced by value.\n          \n          \n            \n                # old value is replaced by the new value.", "author": "praneesha", "createdAt": "2020-03-10T04:12:51Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjUxNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086517", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n          \n          \n            \n                # + maxAgeInSeconds - The time in seconds during which the cache entry is valid. '-1' means, the entry is valid forever.", "author": "praneesha", "createdAt": "2020-03-10T04:13:20Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjYwOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086609", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if any error occurred while inserting entry to the cache.\n          \n          \n            \n                # `Error` if any error occurred while inserting the entry to the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:13:36Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjY4NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086685", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - The cached value associated with the given key or\n          \n          \n            \n                # + return - The cached value associated with the given key,", "author": "praneesha", "createdAt": "2020-03-10T04:13:56Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error?;\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjcwMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086703", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.\n          \n          \n            \n                # `Error` if the provided cache key is not available, or if any error occurred while retrieving from the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:14:05Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error?;\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4Njc4OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086789", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + key - Key of the cache entry which needs to be discarded\n          \n          \n            \n                # + key - Key of the cache entry, which needs to be discarded", "author": "praneesha", "createdAt": "2020-03-10T04:14:29Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error?;\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Discard a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be discarded", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjgxMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086812", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # + return - `()` if successfully discarded or\n          \n          \n            \n                # + return - `()` if successfully discarded,", "author": "praneesha", "createdAt": "2020-03-10T04:14:38Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error?;\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Discard a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be discarded\n+    # + return - `()` if successfully discarded or", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NjgzMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390086833", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # `Error` if the provided cache key is not available or if any error occurred while discarding from the cache.\n          \n          \n            \n                # `Error` if the provided cache key is not available, or if any error occurred while discarding from the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:14:46Z", "path": "stdlib/cache/src/main/ballerina/src/cache/abstract_cache.bal", "diffHunk": "@@ -0,0 +1,72 @@\n+// Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n+//\n+// WSO2 Inc. licenses this file to you under the Apache License,\n+// Version 2.0 (the \"License\"); you may not use this file except\n+// in compliance with the License.\n+// You may obtain a copy of the License at\n+//\n+// http://www.apache.org/licenses/LICENSE-2.0\n+//\n+// Unless required by applicable law or agreed to in writing,\n+// software distributed under the License is distributed on an\n+// \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+// KIND, either express or implied.  See the License for the\n+// specific language governing permissions and limitations\n+// under the License.\n+\n+# Represents the Ballerina `AbstractCache` object and cache-related operations.\n+# Any custom cache implementation should be object-wise similar.\n+public type AbstractCache abstract object {\n+\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n+    #\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error?;\n+\n+    # Return the cached value associated with the given key.\n+    #\n+    # + key - Key, which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not available or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error;\n+\n+    # Discard a cached value from the cache.\n+    #\n+    # + key - Key of the cache entry which needs to be discarded\n+    # + return - `()` if successfully discarded or\n+    # `Error` if the provided cache key is not available or if any error occurred while discarding from the cache.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzI1Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087253", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n          \n          \n            \n            The `AbstractCache` object has the common APIs as follows. Also, there can be \"custom implementations\" with a different data storage like file, database, etc. with structural equivalency to the abstract object.", "author": "praneesha", "createdAt": "2020-03-10T04:16:41Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzQzMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087431", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n          \n          \n            \n            The `AbstractEvictionPolicy` object has the common APIs as follows. Also, there can be \"custom implementations\" with different eviction algorithms with structural equivalency to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-10T04:17:37Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzUzNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087534", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n          \n          \n            \n            The Ballerina Cache module provides a `Cache` object, which is a map data structure based implementation of the `AbstractCache` object. Also, it provides the `LruEvictionPolicy` object, which is based on the LRU eviction algorithm.", "author": "praneesha", "createdAt": "2020-03-10T04:18:09Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzYxOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087618", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n          \n          \n            \n            While initializing the `Cache`, the developer has to pass the following parameters as the cache configurations.", "author": "praneesha", "createdAt": "2020-03-10T04:18:26Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzY3OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087678", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - `evictionPolicy` - The policy which defines the cache eviction algorithm\n          \n          \n            \n            - `evictionPolicy` - The policy, which defines the cache eviction algorithm", "author": "praneesha", "createdAt": "2020-03-10T04:18:36Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4Nzc2MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087761", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - `evictionFactor` - The factor which the entries will be evicted once the cache full\n          \n          \n            \n            - `evictionFactor` - The factor of which the entries will be evicted once the cache is full", "author": "praneesha", "createdAt": "2020-03-10T04:18:54Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4NzgzOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087839", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n          \n          \n            \n            - `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property when inserting an entry to the cache. '-1' means, the entries are valid forever.", "author": "praneesha", "createdAt": "2020-03-10T04:19:12Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4Nzg3Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087872", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            - `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n          \n          \n            \n            - `cleanupIntervalInSeconds` - The interval time of the timer task, which cleans the cache entries. This is an optional parameter.", "author": "praneesha", "createdAt": "2020-03-10T04:19:21Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4Nzk0Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390087946", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            For the better user experience the above config is initialized with default values as follows:\n          \n          \n            \n            For a better user experience, the above config is initialized with default values as follows:", "author": "praneesha", "createdAt": "2020-03-10T04:19:41Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4ODEwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390088104", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n          \n          \n            \n            There are 2 mandatory scenarios and 1 optional scenario, in which a cache entry gets removed from the cache and maintains the freshness of the cache entries. The 2 independent factors (i.e., eviction policy and freshness time of the cache entry) governs the 3 scenarios.", "author": "praneesha", "createdAt": "2020-03-10T04:20:32Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4ODIzNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390088237", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            1. When using the `get` API, if the return cache entry has expired, it get removed.\n          \n          \n            \n            1. When using the `get` API, if the return cache entry has expired, it gets removed.", "author": "praneesha", "createdAt": "2020-03-10T04:21:07Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4ODgwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390088804", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n          \n          \n            \n            2. When using the `put` API, if the cache size has reached its capacity, the number of entries get removed based on the 'eviction policy' and 'eviction factor'.", "author": "praneesha", "createdAt": "2020-03-10T04:23:46Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4ODkwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390088904", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n          \n          \n            \n            The main benefit of using the `cleanupIntervalInSeconds` (optional) property is that the developer can optimize the memory usage while adding some additional CPU costs and vice versa. The default behaviour is the CPU-optimized method.", "author": "praneesha", "createdAt": "2020-03-10T04:24:24Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4ODk5NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390088995", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n          \n          \n            \n            While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. The `Node` record will be inserted into the map data structure against the provided string key.", "author": "praneesha", "createdAt": "2020-03-10T04:24:56Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTA0MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089041", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n          \n          \n            \n            The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently without iterating the complete map data structure.", "author": "praneesha", "createdAt": "2020-03-10T04:25:14Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTEzOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089139", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n          \n          \n            \n            Further, developers can implement custom caching implementations based on different cache storage mechanisms (file, database. etc.) and different eviction policies (MRU, FIFO, etc.). Ballerina provides a \"map-based cache\" as the default cache implementation.", "author": "praneesha", "createdAt": "2020-03-10T04:25:47Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTMxOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089319", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n          \n          \n            \n            The following is a basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor as 0.25:", "author": "praneesha", "createdAt": "2020-03-10T04:26:40Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTY0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089649", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:\n          \n          \n            \n            The following is a basic sample with a cache capacity of 1000, the eviction factor as 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with a 5 seconds interval:", "author": "praneesha", "createdAt": "2020-03-10T04:28:23Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n+```ballerina\n+cache:Cache cache = new;\n+```\n+\n+A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTc2OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089769", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            An advanced sample cache which uses a custom eviction policy along with the default capacity, eviction factor, max age and cleanup interval is as follows:\n          \n          \n            \n            The following is an advanced sample cache, which uses a custom eviction policy along with the default capacity, eviction factor, max age, and cleanup interval:", "author": "praneesha", "createdAt": "2020-03-10T04:28:51Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n+```ballerina\n+cache:Cache cache = new;\n+```\n+\n+A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:\n+```ballerina\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionFactor: 0.2,\n+    defaultMaxAgeInSeconds: 3600\n+    cleanupIntervalInSeconds: 5\n+});\n+```\n+\n+An advanced sample cache which uses a custom eviction policy along with the default capacity, eviction factor, max age and cleanup interval is as follows:", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTgyNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089824", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The simple way of using the initialized cache without handling errors is as follows:\n          \n          \n            \n            The simplest way of using the initialized cache without handling errors is as follows:", "author": "praneesha", "createdAt": "2020-03-10T04:29:07Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n+```ballerina\n+cache:Cache cache = new;\n+```\n+\n+A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:\n+```ballerina\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionFactor: 0.2,\n+    defaultMaxAgeInSeconds: 3600\n+    cleanupIntervalInSeconds: 5\n+});\n+```\n+\n+An advanced sample cache which uses a custom eviction policy along with the default capacity, eviction factor, max age and cleanup interval is as follows:\n+```ballerina\n+public type CustomEvictionPolicy object {\n+    *cache:AbstractEvictionPolicy;\n+    public function get(LinkedList list, Node node) { // custom implementation }\n+    public function put(LinkedList list, Node node) { // custom implementation }\n+    public function remove(LinkedList list, Node node) { // custom implementation }\n+    public function replace(LinkedList list, Node newNode, Node oldNode) { // custom implementation }\n+    public function clear(LinkedList list) { // custom implementation }\n+    public function evict(LinkedList list) returns Node? { // custom implementation }\n+}\n+\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionPolicy: new CustomEvictionPolicy()\n+});\n+```\n+\n+#### Cache Usage\n+\n+The simple way of using the initialized cache without handling errors is as follows:", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA4OTkyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390089921", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // implement what to do, if any error happen when inserting item to cache\n          \n          \n            \n                // Implement what to do if any error happens when inserting an item to the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:29:34Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n+```ballerina\n+cache:Cache cache = new;\n+```\n+\n+A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:\n+```ballerina\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionFactor: 0.2,\n+    defaultMaxAgeInSeconds: 3600\n+    cleanupIntervalInSeconds: 5\n+});\n+```\n+\n+An advanced sample cache which uses a custom eviction policy along with the default capacity, eviction factor, max age and cleanup interval is as follows:\n+```ballerina\n+public type CustomEvictionPolicy object {\n+    *cache:AbstractEvictionPolicy;\n+    public function get(LinkedList list, Node node) { // custom implementation }\n+    public function put(LinkedList list, Node node) { // custom implementation }\n+    public function remove(LinkedList list, Node node) { // custom implementation }\n+    public function replace(LinkedList list, Node newNode, Node oldNode) { // custom implementation }\n+    public function clear(LinkedList list) { // custom implementation }\n+    public function evict(LinkedList list) returns Node? { // custom implementation }\n+}\n+\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionPolicy: new CustomEvictionPolicy()\n+});\n+```\n+\n+#### Cache Usage\n+\n+The simple way of using the initialized cache without handling errors is as follows:\n+```ballerina\n+_ = check cache.put(\"key1\", \"value1\");\n+string value = <string> check cache.get(\"key1\");\n+_ = check cache.invalidate(\"key1\");\n+_ = check cache.invalidateAll();\n+boolean hasKey = cache.hasKey(\"key1\");\n+string[] keys = cache.keys();\n+int size = cache.size();\n+int capacity = cache.capacity();\n+```\n+\n+The advanced way of using the initialized cache with error handling is as follows:\n+```ballerina\n+cache:Error? result = cache.put(\"key1\", \"value1\");\n+if (result is cache:Error) {\n+    // implement what to do, if any error happen when inserting item to cache", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDAyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090021", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // implement what to do, if any error happen when retrieving item from the cache\n          \n          \n            \n                // Implement what to do if any error happens when retrieving an item from the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:29:58Z", "path": "stdlib/cache/src/main/ballerina/src/cache/Module.md", "diffHunk": "@@ -1,25 +1,167 @@\n ## Module Overview\n \n-This module offers a cache that supports time-based eviction, and size-based eviction.\n+The `AbstractCache` object which has the common APIs as follows and there can be \"custom implementations\" with different data storage like file, database etc. with structural equivalent to the abstract object.\n \n-This means that entries are removed from the cache once the expiry time has elapsed (i.e., time-based eviction), or when the cache runs out of \n-space (i.e., size-based eviction). Caching is useful when a value takes significant cost or time to compute and \n-retrieve, and it is therefore useful to cache it for future use.\n+```ballerina\n+public type AbstractCache abstract object {\n+    public function put(string key, any value, int maxAgeInSeconds) returns Error?;\n+    public function get(string key) returns any|Error;\n+    public function invalidate(string key) returns Error?;\n+    public function invalidateAll() returns Error?;\n+    public function hasKey(string key) returns boolean;\n+    public function keys() returns string[];\n+    public function size() returns int;\n+    public function capacity() returns int;\n+};\n+```\n \n-The following code snippet creates a cache that can hold a maximum of 10 entries. An entry of this cache expires \n-one minute after its last access. When the cache is full, 20% of the entries (i.e., 2 entries) will be evicted to make \n-space for new entries.\n+The `AbstractEvictionPolicy` object which has the common APIs as follows and there can be \"custom implementations\" with different eviction algorithms with structural equivalent to the abstract object. That custom implementation has to maintain the `LinkedList` data structure according to the eviction algorithm.\n \n ```ballerina\n-// The `evictionFactor` specifies the percentage of items\n-// that will be evicted when the cache is full.\n-cache:Cache cache = new(expiryTimeInMillis = 60000, capacity = 10, evictionFactor = 0.2);\n+public type AbstractEvictionPolicy abstract object {\n+    public function get(LinkedList list, Node node);\n+    public function put(LinkedList list, Node node);\n+    public function remove(LinkedList list, Node node);\n+    public function replace(LinkedList list, Node newNode, Node oldNode);\n+    public function clear(LinkedList list);\n+    public function evict(LinkedList list) returns Node?;\n+};\n+```\n \n-// Enter a value, and a key to reference that value.\n-// This will be a new entry in the cache.\n-cache.put(\"key-a\", \"value-a\");\n+Ballerina Cache module provides a `Cache` object which is a map data structure based implementation of `AbstractCache` object. Also, it provides `LruEvictionPolicy` object which is based on LRU eviction algorithm.\n \n-// Use the same key to retrieve the value.\n-string returnValue = <string>cache.get(\"key-a\");\n+While initializing the `Cache`, the developer have to pass the following parameters as the cache configurations.\n+- `capacity` - Max number of entries allowed for the cache\n+- `evictionPolicy` - The policy which defines the cache eviction algorithm\n+- `evictionFactor` - The factor which the entries will be evicted once the cache full\n+- `defaultMaxAgeInSeconds` - Freshness time of all the cache entries in seconds. This value can be overwritten by the `maxAgeInSeconds` property, when inserting entry to cache. '-1' means, the entries are valid forever.\n+- `cleanupIntervalInSeconds` - The interval time of the timer task which cleans the cache entries. This is an optional parameter.\n+\n+For the better user experience the above config is initialized with default values as follows:\n+\n+```ballerina\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n ```\n \n+There are 2 mandatory scenarios + 1 optional scenario where a cache entry get removed from the cache and maintain the freshness of the cache entries. The 2 independent factors which are eviction policy & freshness time of the cache  entry governs the 3 scenarios.\n+\n+1. When using the `get` API, if the return cache entry has expired, it get removed.\n+2. When using the `put` API, if the cache size has reached its capacity, number of entries get removed based on the 'eviction policy' and 'eviction factor'.\n+3. If `cleanupIntervalInSeconds` (optional property) is configured, the timer task will remove the expired cache entries based on the configured interval.\n+\n+The main benefit of using the `cleanupIntervalInSeconds` optional property is that the developer can optimize memory usage while adding some additional CPU costs and vice versa. The default behavior is the CPU optimized method.\n+\n+The concept of the default `Cache` object is purely based on the Ballerina map data structure and a linked list data structure. The key of the map entry would be a string and the value of the map entry would be a node of the linked list.\n+\n+```ballerina\n+public type Node record {|\n+    any value;\n+    Node? prev = ();\n+    Node? next = ();\n+|};\n+```\n+\n+While using the cache, a `CacheEntry` record will be created and added as the value of the `Node` record. `Node` record will be inserted into the map data structure against the provided string key.\n+\n+```ballerina\n+type CacheEntry record {|\n+    string key;\n+    any data;\n+    int expTime;\n+|};\n+```\n+\n+The linked list data structure is purely used for the eviction of the cache. According to the user configured eviction policy, when inserting / updating / retrieving cache entries, the linked list data structure should get updated. Therefore, when eviction happens, cache entries can be removed efficiently, without iterating the complete map data structure.\n+\n+**Example:** If the eviction policy is LRU, always the MRU item will be the head of the linked list. When eviction happens, nodes from the tail will be deleted without iterating the map.\n+\n+Further, developers can implement a custom caching implementations based on different cache storage mechanisms (file, database etc.) and different eviction policies (MRU, FIFO etc.) as they wish. Ballerina provides a \"map-based cache\" as the default cache implementation.\n+\n+### Samples\n+\n+#### Cache Initialization\n+\n+A basic sample cache of 100 capacity, which uses LRU as the eviction policy and eviction factor is 0.25 is as follows:\n+```ballerina\n+cache:Cache cache = new;\n+```\n+\n+A basic sample cache of 1000 capacity, the eviction factor is 0.2, cache entry default freshness time as 1 hour, and clean up timer configured with 5 seconds interval  is as follows:\n+```ballerina\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionFactor: 0.2,\n+    defaultMaxAgeInSeconds: 3600\n+    cleanupIntervalInSeconds: 5\n+});\n+```\n+\n+An advanced sample cache which uses a custom eviction policy along with the default capacity, eviction factor, max age and cleanup interval is as follows:\n+```ballerina\n+public type CustomEvictionPolicy object {\n+    *cache:AbstractEvictionPolicy;\n+    public function get(LinkedList list, Node node) { // custom implementation }\n+    public function put(LinkedList list, Node node) { // custom implementation }\n+    public function remove(LinkedList list, Node node) { // custom implementation }\n+    public function replace(LinkedList list, Node newNode, Node oldNode) { // custom implementation }\n+    public function clear(LinkedList list) { // custom implementation }\n+    public function evict(LinkedList list) returns Node? { // custom implementation }\n+}\n+\n+cache:Cache cache = new({\n+    capacity: 1000,\n+    evictionPolicy: new CustomEvictionPolicy()\n+});\n+```\n+\n+#### Cache Usage\n+\n+The simple way of using the initialized cache without handling errors is as follows:\n+```ballerina\n+_ = check cache.put(\"key1\", \"value1\");\n+string value = <string> check cache.get(\"key1\");\n+_ = check cache.invalidate(\"key1\");\n+_ = check cache.invalidateAll();\n+boolean hasKey = cache.hasKey(\"key1\");\n+string[] keys = cache.keys();\n+int size = cache.size();\n+int capacity = cache.capacity();\n+```\n+\n+The advanced way of using the initialized cache with error handling is as follows:\n+```ballerina\n+cache:Error? result = cache.put(\"key1\", \"value1\");\n+if (result is cache:Error) {\n+    // implement what to do, if any error happen when inserting item to cache\n+}\n+\n+any|cache:Error result = cache.get(\"key1\");\n+if (result is cache:Error) {\n+    // implement what to do, if any error happen when retrieving item from the cache", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDI1NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090255", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // The default max age of cache entry is set to 2 seconds. The cache\n          \n          \n            \n                // The default max age of the cache entry is set to 2 seconds. The cache", "author": "praneesha", "createdAt": "2020-03-10T04:31:10Z", "path": "examples/cache/cache.bal", "diffHunk": "@@ -2,34 +2,52 @@ import ballerina/cache;\n import ballerina/io;\n import ballerina/runtime;\n \n-public function main() {\n-    // This creates a new cache. The cache cleanup task runs every 5 seconds\n-    // and clears all the expired caches. In this example, the cache expiry time\n-    // is set to four seconds in order to demonstrate how cache cleaning is\n-    // carried out.\n-    cache:Cache cache = new (4000);\n+public function main() returns error? {\n+    // This creates a new cache of size 10. The eviction factor is set to 0.2,\n+    // which means at the time of eviction 10*0.2=2 entries get removed from\n+    // the cache.\n+    // The default max age of cache entry is set to 2 seconds. The cache", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDMwMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090301", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Checked for the cached key availability.\n          \n          \n            \n                // Checks for the cached key availability.", "author": "praneesha", "createdAt": "2020-03-10T04:31:25Z", "path": "examples/cache/cache.bal", "diffHunk": "@@ -2,34 +2,52 @@ import ballerina/cache;\n import ballerina/io;\n import ballerina/runtime;\n \n-public function main() {\n-    // This creates a new cache. The cache cleanup task runs every 5 seconds\n-    // and clears all the expired caches. In this example, the cache expiry time\n-    // is set to four seconds in order to demonstrate how cache cleaning is\n-    // carried out.\n-    cache:Cache cache = new (4000);\n+public function main() returns error? {\n+    // This creates a new cache of size 10. The eviction factor is set to 0.2,\n+    // which means at the time of eviction 10*0.2=2 entries get removed from\n+    // the cache.\n+    // The default max age of cache entry is set to 2 seconds. The cache\n+    // cleanup task runs every 3 seconds and clears all the expired entries.\n+    cache:Cache cache = new({\n+        capacity: 10,\n+        evictionFactor: 0.2,\n+        defaultMaxAgeInSeconds: 2,\n+        cleanupIntervalInSeconds: 3\n+    });\n \n     // Adds a new entry to the cache.\n-    cache.put(\"Name\", \"Ballerina\");\n+    _ = check cache.put(\"key1\", \"value1\");\n+    // Adds a new entry to the cache by overriding the default max age.\n+    _ = check cache.put(\"key2\", \"value2\", 3600);\n \n-    // Fetches the cached value.\n-    string name = \"\";\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n+    // Checked for the cached key availability.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDM2NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090364", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // During this period cache entry with the key 'key1' should be removed\n          \n          \n            \n                // During this period, the cache entry with the key 'key1' should be removed", "author": "praneesha", "createdAt": "2020-03-10T04:31:40Z", "path": "examples/cache/cache.bal", "diffHunk": "@@ -2,34 +2,52 @@ import ballerina/cache;\n import ballerina/io;\n import ballerina/runtime;\n \n-public function main() {\n-    // This creates a new cache. The cache cleanup task runs every 5 seconds\n-    // and clears all the expired caches. In this example, the cache expiry time\n-    // is set to four seconds in order to demonstrate how cache cleaning is\n-    // carried out.\n-    cache:Cache cache = new (4000);\n+public function main() returns error? {\n+    // This creates a new cache of size 10. The eviction factor is set to 0.2,\n+    // which means at the time of eviction 10*0.2=2 entries get removed from\n+    // the cache.\n+    // The default max age of cache entry is set to 2 seconds. The cache\n+    // cleanup task runs every 3 seconds and clears all the expired entries.\n+    cache:Cache cache = new({\n+        capacity: 10,\n+        evictionFactor: 0.2,\n+        defaultMaxAgeInSeconds: 2,\n+        cleanupIntervalInSeconds: 3\n+    });\n \n     // Adds a new entry to the cache.\n-    cache.put(\"Name\", \"Ballerina\");\n+    _ = check cache.put(\"key1\", \"value1\");\n+    // Adds a new entry to the cache by overriding the default max age.\n+    _ = check cache.put(\"key2\", \"value2\", 3600);\n \n-    // Fetches the cached value.\n-    string name = \"\";\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n+    // Checked for the cached key availability.\n+    if (cache.hasKey(\"key1\")) {\n+        // Fetches the cached value.\n+        string value = <string> check cache.get(\"key1\");\n+        io:println(\"key1: \" + value);\n     }\n-    io:println(\"Name: \" + name);\n \n-    // This sends the current worker to the sleep mode for six seconds.\n+    // This sends the current worker to the sleep mode for 4 seconds.\n     // No execution takes place during this period.\n-    runtime:sleep(6000);\n-\n-    // The cache expires after 4 seconds. The cache cleanup task runs during the\n-    // fifth second and cleans the cache while this thread is in the sleep mode.\n-    // As a result, the value in the cache becomes null.\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n-    } else {\n-        name = \"\";\n-    }\n-    io:println(\"Name: \" + name);\n+    runtime:sleep(4000);\n+\n+    // During this period cache entry with the key 'key1' should be removed", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDQwMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090403", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // since the max of it is set to 2 seconds by default. But the cache\n          \n          \n            \n                // since the max of it is set to 2 seconds by default. However, the cache", "author": "praneesha", "createdAt": "2020-03-10T04:31:52Z", "path": "examples/cache/cache.bal", "diffHunk": "@@ -2,34 +2,52 @@ import ballerina/cache;\n import ballerina/io;\n import ballerina/runtime;\n \n-public function main() {\n-    // This creates a new cache. The cache cleanup task runs every 5 seconds\n-    // and clears all the expired caches. In this example, the cache expiry time\n-    // is set to four seconds in order to demonstrate how cache cleaning is\n-    // carried out.\n-    cache:Cache cache = new (4000);\n+public function main() returns error? {\n+    // This creates a new cache of size 10. The eviction factor is set to 0.2,\n+    // which means at the time of eviction 10*0.2=2 entries get removed from\n+    // the cache.\n+    // The default max age of cache entry is set to 2 seconds. The cache\n+    // cleanup task runs every 3 seconds and clears all the expired entries.\n+    cache:Cache cache = new({\n+        capacity: 10,\n+        evictionFactor: 0.2,\n+        defaultMaxAgeInSeconds: 2,\n+        cleanupIntervalInSeconds: 3\n+    });\n \n     // Adds a new entry to the cache.\n-    cache.put(\"Name\", \"Ballerina\");\n+    _ = check cache.put(\"key1\", \"value1\");\n+    // Adds a new entry to the cache by overriding the default max age.\n+    _ = check cache.put(\"key2\", \"value2\", 3600);\n \n-    // Fetches the cached value.\n-    string name = \"\";\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n+    // Checked for the cached key availability.\n+    if (cache.hasKey(\"key1\")) {\n+        // Fetches the cached value.\n+        string value = <string> check cache.get(\"key1\");\n+        io:println(\"key1: \" + value);\n     }\n-    io:println(\"Name: \" + name);\n \n-    // This sends the current worker to the sleep mode for six seconds.\n+    // This sends the current worker to the sleep mode for 4 seconds.\n     // No execution takes place during this period.\n-    runtime:sleep(6000);\n-\n-    // The cache expires after 4 seconds. The cache cleanup task runs during the\n-    // fifth second and cleans the cache while this thread is in the sleep mode.\n-    // As a result, the value in the cache becomes null.\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n-    } else {\n-        name = \"\";\n-    }\n-    io:println(\"Name: \" + name);\n+    runtime:sleep(4000);\n+\n+    // During this period cache entry with the key 'key1' should be removed\n+    // since the max of it is set to 2 seconds by default. But the cache", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5MDQzMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390090433", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // entry with the key 'key2' should be exist in the cache.\n          \n          \n            \n                // entry with the key 'key2' should exist in the cache.", "author": "praneesha", "createdAt": "2020-03-10T04:31:59Z", "path": "examples/cache/cache.bal", "diffHunk": "@@ -2,34 +2,52 @@ import ballerina/cache;\n import ballerina/io;\n import ballerina/runtime;\n \n-public function main() {\n-    // This creates a new cache. The cache cleanup task runs every 5 seconds\n-    // and clears all the expired caches. In this example, the cache expiry time\n-    // is set to four seconds in order to demonstrate how cache cleaning is\n-    // carried out.\n-    cache:Cache cache = new (4000);\n+public function main() returns error? {\n+    // This creates a new cache of size 10. The eviction factor is set to 0.2,\n+    // which means at the time of eviction 10*0.2=2 entries get removed from\n+    // the cache.\n+    // The default max age of cache entry is set to 2 seconds. The cache\n+    // cleanup task runs every 3 seconds and clears all the expired entries.\n+    cache:Cache cache = new({\n+        capacity: 10,\n+        evictionFactor: 0.2,\n+        defaultMaxAgeInSeconds: 2,\n+        cleanupIntervalInSeconds: 3\n+    });\n \n     // Adds a new entry to the cache.\n-    cache.put(\"Name\", \"Ballerina\");\n+    _ = check cache.put(\"key1\", \"value1\");\n+    // Adds a new entry to the cache by overriding the default max age.\n+    _ = check cache.put(\"key2\", \"value2\", 3600);\n \n-    // Fetches the cached value.\n-    string name = \"\";\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n+    // Checked for the cached key availability.\n+    if (cache.hasKey(\"key1\")) {\n+        // Fetches the cached value.\n+        string value = <string> check cache.get(\"key1\");\n+        io:println(\"key1: \" + value);\n     }\n-    io:println(\"Name: \" + name);\n \n-    // This sends the current worker to the sleep mode for six seconds.\n+    // This sends the current worker to the sleep mode for 4 seconds.\n     // No execution takes place during this period.\n-    runtime:sleep(6000);\n-\n-    // The cache expires after 4 seconds. The cache cleanup task runs during the\n-    // fifth second and cleans the cache while this thread is in the sleep mode.\n-    // As a result, the value in the cache becomes null.\n-    if (cache.hasKey(\"Name\")) {\n-        name = <string>cache.get(\"Name\");\n-    } else {\n-        name = \"\";\n-    }\n-    io:println(\"Name: \" + name);\n+    runtime:sleep(4000);\n+\n+    // During this period cache entry with the key 'key1' should be removed\n+    // since the max of it is set to 2 seconds by default. But the cache\n+    // entry with the key 'key2' should be exist in the cache.", "originalCommit": "7ffc61bfe381eb5a03befddc31222f9eace1c97f", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2a14614a888b66b308ca808b28dea8eda7e03af2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2a14614a888b66b308ca808b28dea8eda7e03af2", "message": "Apply suggestions from code review\n\nCo-Authored-By: praneesha <praneesha@wso2.com>", "committedDate": "2020-03-10T04:38:25Z", "type": "commit"}, {"oid": "31df05e0da5cdd4a8c86da90881e36856c4fe4ef", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/31df05e0da5cdd4a8c86da90881e36856c4fe4ef", "message": "Add ballerina docs for cache error", "committedDate": "2020-03-10T08:39:26Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDE2MDU0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390160549", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Represents the Cache error reason.\n          \n          \n            \n            # Represents the reason for the Cache error.", "author": "praneesha", "createdAt": "2020-03-10T08:40:38Z", "path": "stdlib/cache/src/main/ballerina/src/cache/cache_errors.bal", "diffHunk": "@@ -25,7 +25,11 @@ public type Detail record {\n     error cause?;\n };\n \n+# Represents the Cache error reason.", "originalCommit": "31df05e0da5cdd4a8c86da90881e36856c4fe4ef", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2ce20a8d6a06dbf78a64e6431d8c28fc541e41f9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2ce20a8d6a06dbf78a64e6431d8c28fc541e41f9", "message": "Apply suggestions from code review\n\nCo-Authored-By: praneesha <praneesha@wso2.com>", "committedDate": "2020-03-10T08:42:06Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDMwODA0NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21308#discussion_r390308045", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            }\n          \n          \n            \n            }", "author": "daneshk", "createdAt": "2020-03-10T13:23:08Z", "path": "stdlib/cache/src/main/ballerina/src/cache/cache.bal", "diffHunk": "@@ -14,336 +14,277 @@\n // specific language governing permissions and limitations\n // under the License.\n \n-import ballerina/system;\n import ballerina/task;\n import ballerina/time;\n \n-# Cache cleanup task invoking interval in ms.\n-const int CACHE_CLEANUP_INTERVAL = 5000;\n-\n-# Map which stores all of the caches.\n-map<Cache> cacheMap = {};\n-\n-task:TimerConfiguration cacheCleanupTimerConfiguration = {\n-    intervalInMillis: CACHE_CLEANUP_INTERVAL,\n-    initialDelayInMillis: CACHE_CLEANUP_INTERVAL\n-};\n-\n-task:Scheduler cacheCleanupTimer = new(cacheCleanupTimerConfiguration);\n-\n-boolean timerStarted = false;\n-\n-# Represents a cache entry.\n+# Represents cache configuration.\n #\n-# + value - cache value\n-# + lastAccessedTime - last accessed time in ms of this value which is used to remove LRU cached values\n+# + capacity - Maximum number of entries allowed\n+# + evictionPolicy - The policy which defines the cache eviction algorithm\n+# + evictionFactor - The factor which the entries will be evicted once the cache full\n+# + defaultMaxAgeInSeconds - The default value in seconds which all the cache entries are valid.\n+#                            '-1' means, the entries are valid forever. This will be overwritten by the the\n+#                            `maxAgeInSeconds` property set when inserting item to the cache\n+# + cleanupIntervalInSeconds - Interval of the timer task which clean up the cache\n+public type CacheConfig record {|\n+    int capacity = 100;\n+    AbstractEvictionPolicy evictionPolicy = new LruEvictionPolicy();\n+    float evictionFactor = 0.25;\n+    int defaultMaxAgeInSeconds = -1;\n+    int cleanupIntervalInSeconds?;\n+|};\n+\n type CacheEntry record {|\n-    any value;\n-    int lastAccessedTime;\n+    string key;\n+    any data;\n+    int expTime;       // exp time since epoch. calculated based on the `maxAge` parameter when inserting to map\n |};\n \n-# Represents a Ballerina `Cache` which can hold multiple entries and remove entries based on time and size.\n+// Cleanup service which cleans the cache entries periodically.\n+boolean cleanupInProgress = false;\n+\n+// Cleanup service which cleans the cache entries periodically.\n+service cleanupService = service {\n+    resource function onTrigger(map<Node> entries, LinkedList list, AbstractEvictionPolicy evictionPolicy) {\n+        // This check will skip the processes triggered while the clean up in progress.\n+        if (!cleanupInProgress) {\n+            lock {\n+                cleanupInProgress = true;\n+                cleanup(entries, list, evictionPolicy);\n+                cleanupInProgress = false;\n+            }\n+        }\n+    }\n+};\n+\n+# Represents Ballerina `Cache` object and cache related operations.\n public type Cache object {\n \n+    *AbstractCache;\n+\n     private int capacity;\n-    map<CacheEntry> entries = {};\n-    int expiryTimeInMillis;\n+    private AbstractEvictionPolicy evictionPolicy;\n     private float evictionFactor;\n-    private string uuid;\n+    private int defaultMaxAgeInSeconds;\n+    private map<Node> entries = {};\n+    private LinkedList list;\n \n-    # Creates a new `Cache`.\n+    # Creates a new `Cache` object.\n     #\n-    # + expiryTimeInMillis - Time since its last access in which the cache will be expired.\n-    # + capacity - Maximum number of entries allowed.\n-    # + evictionFactor - The factor which the entries will be evicted once the cache full.\n-    public function __init(public int expiryTimeInMillis = 900000, public int capacity = 100, public float evictionFactor = 0.25) {\n+    # + cacheConfig - Cache configurations\n+    public function __init(CacheConfig cacheConfig = {}) {\n+        self.capacity = cacheConfig.capacity;\n+        self.evictionPolicy = cacheConfig.evictionPolicy;\n+        self.evictionFactor = cacheConfig.evictionFactor;\n+        self.defaultMaxAgeInSeconds = cacheConfig.defaultMaxAgeInSeconds;\n \n-        // Cache expiry time must be a positive value.\n-        if (expiryTimeInMillis <= 0) {\n-            Error e = error(CACHE_ERROR, message = \"Expiry time must be greater than 0.\");\n-            panic e;\n-        }\n         // Cache capacity must be a positive value.\n-        if (capacity <= 0) {\n-            Error e = error(CACHE_ERROR, message = \"Capacity must be greater than 0.\");\n-            panic e;\n+        if (self.capacity <= 0) {\n+            panic prepareError(\"Capacity must be greater than 0.\");\n         }\n         // Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\n-        if (evictionFactor <= 0 || evictionFactor > 1) {\n-            Error e = error(CACHE_ERROR, message = \"Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\");\n-            panic e;\n+        if (self.evictionFactor <= 0 || self.evictionFactor > 1) {\n+            panic prepareError(\"Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\");\n         }\n-        // We remove empty caches to prevent OOM issues. So in such scenarios, the cache will not be in the `cacheMap`\n-        // when we are trying to add a new cache entry to that cache. So we need to create a new cache. For that, keep\n-        // track of the UUID.\n-        self.uuid = system:uuid();\n-        cacheMap[self.uuid] = self;\n-        self.expiryTimeInMillis = expiryTimeInMillis;\n-        self.capacity = capacity;\n-        self.evictionFactor = evictionFactor;\n \n-        var attachCacheCleanerResult = cacheCleanupTimer.attach(cacheCleanupService);\n-        if (attachCacheCleanerResult is error) {\n-            record {| string message?; anydata|error...; |} detail = attachCacheCleanerResult.detail();\n-            Error e = error(CACHE_ERROR, message = \"Failed to create the cache cleanup task: \" +  <string> detail[\"message\"]);\n-            panic e;\n+        // Cache eviction factor must be between 0.0 (exclusive) and 1.0 (inclusive).\n+        if (self.defaultMaxAgeInSeconds != -1 && self.defaultMaxAgeInSeconds <= 0) {\n+            panic prepareError(\"Default max age should be greater than 0 or -1 for indicate forever valid.\");\n         }\n \n-        if (!timerStarted && !cacheCleanupTimer.isStarted()) {\n-            lock {\n-                if(!cacheCleanupTimer.isStarted()) {\n-                    var timerStartResult = cacheCleanupTimer.start();\n-                    if (timerStartResult is error) {\n-                        record {| string message?; anydata|error...; |} detail = timerStartResult.detail();\n-                        Error e = error(CACHE_ERROR, message = \"Failed to start the cache cleanup task: \" +  <string> detail[\"message\"]);\n-                        panic e;\n-                    }\n-                    timerStarted = true;\n-                }\n+        self.list = {\n+            head: (),\n+            tail: ()\n+        };\n+        int? cleanupIntervalInSeconds = cacheConfig?.cleanupIntervalInSeconds;\n+        if (cleanupIntervalInSeconds is int) {\n+            task:TimerConfiguration timerConfiguration = {\n+                intervalInMillis: cleanupIntervalInSeconds,\n+                initialDelayInMillis: cleanupIntervalInSeconds\n+            };\n+            task:Scheduler cleanupScheduler = new(timerConfiguration);\n+            task:SchedulerError? result = cleanupScheduler.attach(cleanupService, self.entries, self.list,\n+                                                                  self.evictionPolicy);\n+            if (result is task:SchedulerError) {\n+                panic prepareError(\"Failed to create the cache cleanup task.\", result);\n+            }\n+            result = cleanupScheduler.start();\n+            if (result is task:SchedulerError) {\n+                panic prepareError(\"Failed to start the cache cleanup task.\", result);\n             }\n         }\n     }\n \n-    # Checks whether the given key has an associated cache value.\n+    # Add the given key value pair to the cache. If the cache previously contained a value associated with key, the\n+    # old value is replaced by value.\n     #\n-    # + key - The key to be checked.\n-    # + return - `true` if the given key has an associated value, `false` otherwise.\n-    public function hasKey(string key) returns boolean {\n-        return self.entries.hasKey(key);\n-    }\n+    # + key - Key of the cached value\n+    # + value - Value to be cached\n+    # + maxAgeInSeconds - The value in seconds, which the cache entry is valid. '-1' means, the entry is valid forever.\n+    # + return - `()` if successfully added to the cache or\n+    # `Error` if any error occurred while inserting entry to the cache.\n+    public function put(string key, any value, int maxAgeInSeconds = -1) returns Error? {\n+        lock {\n+            // If the current cache is full (i.e. size = capacity), evict cache.\n+            if (self.size() == self.capacity) {\n+                evict(self.entries, self.list, self.evictionPolicy, self.capacity, self.evictionFactor);\n+            }\n \n-    # Returns the size of the cache.\n-    #\n-    # + return - The size of the cache.\n-    public function size() returns int {\n-        return self.entries.length();\n+            // Calculate the `expTime` of the cache entry based on the `maxAgeInSeconds` property and\n+            // `defaultMaxAgeInSeconds` property.\n+            int calculatedExpTime = -1;\n+            if (maxAgeInSeconds != -1 && maxAgeInSeconds > 0) {\n+                calculatedExpTime = time:nanoTime() + (maxAgeInSeconds * 1000 * 1000 * 1000);\n+            } else {\n+                if (self.defaultMaxAgeInSeconds != -1) {\n+                    calculatedExpTime = time:nanoTime() + (self.defaultMaxAgeInSeconds * 1000 * 1000 * 1000);\n+                }\n+            }\n+\n+            CacheEntry entry = {\n+                key: key,\n+                data: value,\n+                expTime: calculatedExpTime\n+            };\n+            Node newNode = { value: entry };\n+\n+            if (self.hasKey(key)) {\n+                Node oldNode = self.entries.get(key);\n+                self.evictionPolicy.replace(self.list, newNode, oldNode);\n+            } else {\n+                self.evictionPolicy.put(self.list, newNode);\n+            }\n+            self.entries[key] = newNode;\n+        }\n     }\n \n-    # Adds the given key, value pair to the provided cache.\n+    # Return the cached value associated with the given key.\n     #\n-    # + key - Value which should be used as the key.\n-    # + value - Value to be cached.\n-    public function put(string key, any value) {\n-        // We need to synchronize this process otherwise concurrency might cause issues.\n-         lock {\n-            int cacheCapacity = self.capacity;\n-            int cacheSize = self.entries.length();\n-\n-            // If the current cache is full, evict cache.\n-            if (cacheCapacity <= cacheSize) {\n-                self.evict();\n+    # + key - Key which is used to retrieve the cached value\n+    # + return - The cached value associated with the given key or\n+    # `Error` if the provided cache key is not or if any error occurred while retrieving from the cache.\n+    public function get(string key) returns any|Error {\n+        lock {\n+            if (!self.hasKey(key)) {\n+                return prepareError(\"Cache entry from the given key: \" + key + \", is not available.\");\n             }\n-            // Add the new cache entry.\n-            int time = time:currentTime().time;\n-            CacheEntry entry = { value: value, lastAccessedTime: time };\n-            self.entries[key] = entry;\n \n-            // If the UUID is not found, that means that cache was removed after being empty. So we need to create a\n-            // new cache with the current cache object.\n-            if (!cacheMap.hasKey(self.uuid)) {\n-                cacheMap[self.uuid] = self;\n+            Node node = self.entries.get(key);\n+            CacheEntry entry = <CacheEntry>node.value;\n+\n+            // Check whether the cache entry is already expired. Even though the cache cleaning task is configured\n+            // and runs in predefined intervals, sometimes the cache entry might not have been removed at this point\n+            // even though it is expired. So this check guarantees that the expired cache entries will not be returned.\n+            if (entry.expTime != -1 && entry.expTime < time:nanoTime()) {\n+                self.evictionPolicy.remove(self.list, node);\n+                return removeEntry(self.entries, key);\n             }\n-         }\n-    }\n \n-    # Evicts the cache when the cache is full.\n-    function evict() {\n-        int maxCapacity = self.capacity;\n-        float ef = self.evictionFactor;\n-        int numberOfKeysToEvict = <int>(maxCapacity * ef);\n-        // Get the above number of least recently used cache entry keys from the cache\n-        string[] cacheKeys = self.getLRUCacheKeys(numberOfKeysToEvict);\n-        // Iterate through the map and remove entries.\n-        foreach var c in cacheKeys {\n-            // These cache values are ignored. So it is not needed to check the return value for the remove function.\n-            var tempVar = self.entries.remove(c);\n+            self.evictionPolicy.get(self.list, node);\n+            return entry.data;\n         }\n     }\n \n-    # Returns the cached value associated with the given key. If the provided cache key is not found,\n-    # () will be returned.\n+    # Discard a cached value from the cache.\n     #\n-    # + key - Key which is used to retrieve the cached value.\n-    # + return - The cached value associated with the given key.\n-    public function get(string key) returns any? {\n-        // Check whether the requested cache is available.\n-        if (!self.hasKey(key)) {\n-            return ();\n-        }\n-        // Get the requested cache entry from the map.\n-        CacheEntry? cacheEntry = self.entries[key];\n-\n-        if (cacheEntry is CacheEntry) {\n-            // Check whether the cache entry is already expired. Since the cache cleaning task runs in predefined intervals,\n-            // sometimes the cache entry might not have been removed at this point even though it is expired. So this check\n-            // guarantees that the expired cache entries will not be returned.\n-            int currentSystemTime = time:currentTime().time;\n-            if (currentSystemTime >= cacheEntry.lastAccessedTime + self.expiryTimeInMillis) {\n-                // If it is expired, remove the cache and return nil.\n-                self.remove(key);\n-                return ();\n+    # + key - Key of the cache entry which needs to be discarded\n+    # + return - `()` if successfully discarded or\n+    # `Error` if the provided cache key is not or if any error occurred while discarding from the cache.\n+    public function invalidate(string key) returns Error? {\n+        lock {\n+            if (!self.hasKey(key)) {\n+                return prepareError(\"Cache entry from the given key: \" + key + \", is not available.\");\n             }\n-            // Modify the last accessed time and return the cache if it is not expired.\n-            cacheEntry.lastAccessedTime = time:currentTime().time;\n-            return cacheEntry.value;\n-        } else {\n-            return ();\n+\n+            Node node = self.entries.get(key);\n+            self.evictionPolicy.remove(self.list, node);\n+            return removeEntry(self.entries, key);\n         }\n     }\n \n-    # Removes a cached value from a cache.\n+    # Discard all the cached values from the cache.\n     #\n-    # + key - Key of the cache entry which needs to be removed.\n-    public function remove(string key) {\n-        // Cache might already be removed by the cache clearing task. So no need to check the return value.\n-        if (self.entries.hasKey(key)) {\n-            var tempVar = self.entries.remove(key);\n+    # + return - `()` if successfully discarded all or\n+    # `Error` if any error occurred while discarding all from the cache.\n+    public function invalidateAll() returns Error? {\n+        lock {\n+            self.evictionPolicy.clear(self.list);\n+            return removeAllEntries(self.entries);\n         }\n     }\n \n-    # Returns all keys from current cache.\n+    # Checks whether the given key has an associated cache value.\n+    #\n+    # + key - The key to be checked\n+    # + return - Whether the an associated cache value is available in the cache or not\n+    public function hasKey(string key) returns boolean {\n+        return self.entries.hasKey(key);\n+    }\n+\n+    # Returns all keys from the cache.\n     #\n-    # + return - Array of all keys from the current cache.\n+    # + return - Array of all keys from the cache\n     public function keys() returns string[] {\n         return self.entries.keys();\n     }\n \n-    # Returns the key of the least recently used cache entry.\n-    # This is used to remove entries if the cache is full.\n+    # Returns the size of the cache.\n+    #\n+    # + return - The size of the cache\n+    public function size() returns int {\n+        return self.entries.length();\n+    }\n+\n+    # Returns the capacity of the cache.\n     #\n-    # + numberOfKeysToEvict - The number of keys which should be evicted.\n-    # + return - Number of keys to be evicted.\n-    function getLRUCacheKeys(int numberOfKeysToEvict) returns string[] {\n-        // Create new arrays to hold keys to be removed and hold the corresponding timestamps.\n-        string[] cacheKeysToBeRemoved = [];\n-        int[] timestamps = [];\n-        string[] keys = self.entries.keys();\n-        // Iterate through the keys.\n-        foreach var key in keys {\n-            CacheEntry? cacheEntry = self.entries[key];\n-            if (cacheEntry is CacheEntry) {\n-                // Check and add the key to the cacheKeysToBeRemoved if it matches the conditions.\n-                checkAndAdd(numberOfKeysToEvict, cacheKeysToBeRemoved, timestamps, key, cacheEntry.lastAccessedTime);\n-            }\n-            // If the key is not found in the map, that means that the corresponding cache is already removed\n-            // (possibly by a another worker).\n-        }\n-        // Return the array.\n-        return cacheKeysToBeRemoved;\n+    # + return - The capacity of the cache\n+    public function capacity() returns int {\n+        return self.capacity;\n     }\n };\n \n-# Removes expired cache entries from all caches.\n-function runCacheExpiry() {\n-\n-    // We need to keep track of empty caches. We remove these to prevent OOM issues.\n-    int emptyCacheCount = 0;\n-    string[] emptyCacheKeys = [];\n-\n-    // Iterate through all caches.\n-    int keyIndex = 0;\n-    string[] currentCacheKeys = cacheMap.keys();\n-    int cacheKeysLength = currentCacheKeys.length();\n-    while (keyIndex < cacheKeysLength) {\n-\n-        string currentCacheKey = currentCacheKeys[keyIndex];\n-        keyIndex += 1;\n-        Cache? currentCache = cacheMap[currentCacheKey];\n-        if (currentCache is ()) {\n-            continue;\n+function evict(map<Node> entries, LinkedList list, AbstractEvictionPolicy evictionPolicy, int capacity,\n+               float evictionFactor) {\n+    int evictionKeysCount = <int>(capacity * evictionFactor);\n+    foreach int i in 1...evictionKeysCount {\n+        Node? node = evictionPolicy.evict(list);\n+        if (node is Node) {\n+            CacheEntry entry = <CacheEntry>node.value;\n+            Error? result = removeEntry(entries, entry.key);\n+            // The return result (error which occurred due to unavailability of the key or nil) is ignored\n+            // since no purpose of handling it.\n         } else {\n-            // Get the expiry time of the current cache\n-            int currentCacheExpiryTime = currentCache.expiryTimeInMillis;\n-\n-            // Create a new array to store keys of cache entries which needs to be removed.\n-            string[] cachesToBeRemoved = [];\n-\n-            int cachesToBeRemovedIndex = 0;\n-            // Iterate through all keys.\n-            int entrykeyIndex = 0;\n-            string[] entryKeys = currentCache.entries.keys();\n-            int entryKeysLength = entryKeys.length();\n-            while (entrykeyIndex < entryKeysLength) {\n-\n-                var key = entryKeys[entrykeyIndex];\n-                entrykeyIndex += 1;\n-                CacheEntry? entry = currentCache.entries[key];\n-                if (entry is ()) {\n-                    continue;\n-                } else {\n-                    // Get the current system time.\n-                    int currentSystemTime = time:currentTime().time;\n-\n-                    // Check whether the cache entry needs to be removed.\n-                    if (currentSystemTime >= entry.lastAccessedTime + currentCacheExpiryTime) {\n-                        cachesToBeRemoved[cachesToBeRemovedIndex] = key;\n-                        cachesToBeRemovedIndex += 1;\n-                    }\n-                }\n-            }\n-\n-            // Iterate through the key list which needs to be removed.\n-            int currentKeyIndex = 0;\n-            while(currentKeyIndex < cachesToBeRemovedIndex) {\n-                string key = cachesToBeRemoved[currentKeyIndex];\n-                // Remove the cache entry.\n-                var tempVar = currentCache.entries.remove(key);\n-                currentKeyIndex += 1;\n-            }\n-\n-            // If there are no entries, we add that cache key to the `emptyCacheKeys`.\n-            int size = currentCache.entries.length();\n-            if (size == 0) {\n-                emptyCacheKeys[emptyCacheCount] = currentCacheKey;\n-                emptyCacheCount += 1;\n-            }\n+            break;\n         }\n     }\n+}\n \n-    // We iterate though all empty cache keys and remove them from the `cacheMap`.\n-    foreach var emptyCacheKey in emptyCacheKeys {\n-        if (cacheMap.hasKey(emptyCacheKey)) {\n-            var tempVar = cacheMap.remove(emptyCacheKey);\n+function cleanup(map<Node> entries, LinkedList list, AbstractEvictionPolicy evictionPolicy) {\n+    if (entries.length() == 0) {\n+        return;\n+    }\n+    foreach Node node in entries {\n+        CacheEntry entry = <CacheEntry>node.value;\n+        if (entry.expTime != -1 && entry.expTime < time:nanoTime()) {\n+            evictionPolicy.remove(list, node);\n+            Error? result = removeEntry(entries, entry.key);\n+            // The return result (error which occurred due to unavailability of the key or nil) is ignored\n+            // since no purpose of handling it.\n+            return;\n         }\n     }\n-    return ();\n }\n \n-# Utility function to identify which cache entries should be evicted.\n-function checkAndAdd(int numberOfKeysToEvict, string[] cacheKeys, int[] timestamps, string key, int lastAccessTime) {\n-    string myKey = key;\n-    int myLastAccessTime = lastAccessTime;\n-\n-    // Iterate while we count all values from 0 to numberOfKeysToEvict exclusive of numberOfKeysToEvict since the\n-    // array size should be numberOfKeysToEvict.\n-    foreach var index in 0..<numberOfKeysToEvict {\n-        // If we have encountered the end of the array, that means we can add the new values to the end of the\n-        // array since we haven\u2019t reached the numberOfKeysToEvict limit.\n-        if (cacheKeys.length() == index) {\n-            cacheKeys[index] = myKey;\n-            timestamps[index] = myLastAccessTime;\n-            // Break the loop since we don't have any more elements to compare since we are at the end\n-            break;\n-        } else {\n-            // If the timestamps[index] > lastAccessTime, that means the cache which corresponds to the 'key' is\n-            // older than the current entry at the array which we are checking.\n-            if (timestamps[index] > myLastAccessTime) {\n-                // Swap the values. We use the swapped value to continue to check whether we can find any place to\n-                // add it in the array.\n-                string tempKey = cacheKeys[index];\n-                int tempTimeStamp = timestamps[index];\n-                cacheKeys[index] = myKey;\n-                timestamps[index] = myLastAccessTime;\n-                myKey = tempKey;\n-                myLastAccessTime = tempTimeStamp;\n-            }\n-        }\n+function removeEntry(map<Node> entries, string key) returns Error? {\n+    var result = trap entries.remove(key);\n+    if (result is error) {\n+        return prepareError(\"Error while removing the entry (key: \" + key + \") from the map. \", result);\n     }\n }\n \n-# Cleanup service which cleans the cache periodically.\n-service cacheCleanupService = service {\n-    resource function onTrigger() {\n-        runCacheExpiry();\n+function removeAllEntries(map<Node> entries) returns Error? {\n+    var result = trap entries.removeAll();\n+    if (result is error) {\n+        return prepareError(\"Error while removing all the entries from the map.\", result);\n     }\n-};\n+}", "originalCommit": "2ce20a8d6a06dbf78a64e6431d8c28fc541e41f9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "c68f0ea4e71a461fea0f42a6d0fdb9218457b018", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c68f0ea4e71a461fea0f42a6d0fdb9218457b018", "message": "Apply suggestions from code review\n\nCo-Authored-By: Danesh Kuruppu <daneshk@users.noreply.github.com>", "committedDate": "2020-03-10T14:13:56Z", "type": "commit"}, {"oid": "f24f950fa5034582ca215de4bbc84741c97b3ae1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f24f950fa5034582ca215de4bbc84741c97b3ae1", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into refactor-cache\n\n# Conflicts:\n#\tstdlib/auth/src/main/ballerina/src/auth/utils.bal\n#\tstdlib/jwt/src/main/ballerina/src/jwt/inbound_jwt_auth_provider.bal\n#\tstdlib/oauth2/src/main/ballerina/src/oauth2/inbound_oauth2_provider.bal", "committedDate": "2020-03-11T04:42:52Z", "type": "commit"}, {"oid": "f24f950fa5034582ca215de4bbc84741c97b3ae1", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/f24f950fa5034582ca215de4bbc84741c97b3ae1", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into refactor-cache\n\n# Conflicts:\n#\tstdlib/auth/src/main/ballerina/src/auth/utils.bal\n#\tstdlib/jwt/src/main/ballerina/src/jwt/inbound_jwt_auth_provider.bal\n#\tstdlib/oauth2/src/main/ballerina/src/oauth2/inbound_oauth2_provider.bal", "committedDate": "2020-03-11T04:42:52Z", "type": "forcePushed"}, {"oid": "5e1de98cd48bd67ddae0316920fc8fa3695dd9ee", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5e1de98cd48bd67ddae0316920fc8fa3695dd9ee", "message": "Prevent nil value insertion to cache", "committedDate": "2020-03-11T05:03:18Z", "type": "commit"}]}