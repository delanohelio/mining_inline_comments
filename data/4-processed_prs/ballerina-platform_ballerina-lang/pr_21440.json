{"pr_number": 21440, "pr_title": "Add Let Expression BBE", "pr_createdAt": "2020-03-03T11:35:09Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440", "timeline": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2Mjk0NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r387462945", "bodyText": "Extra new line?", "author": "anupama-pathirage", "createdAt": "2020-03-04T06:00:18Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,15 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    int a = let b = 1 in b*2;\n+    io:println(\"a: \", a);\n+\n+    string greeting = string hello = \"hello \", string ballerina = \"ballerina\" in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    [int, int] v1 = [10, 20];\n+    int binding = let [int, int] [d1, d2] = v1, int d3 = d1 + d2 in  d3 * 2;\n+    io:println(\"binding: \", binding);\n+    ", "originalCommit": "1f660378a682f3205731244778ded84d0b2da46e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MzE5NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r387463194", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                int a = let b = 1 in b<span class=\"x x-first x-last\">*</span>2;\n          \n          \n            \n                int a = let b = 1 in b<span class=\"x x-first x-last\"> * </span>2;", "author": "anupama-pathirage", "createdAt": "2020-03-04T06:01:09Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,15 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    int a = let b = 1 in b*2;", "originalCommit": "1f660378a682f3205731244778ded84d0b2da46e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MzI5MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r387463290", "bodyText": "Missing new line?", "author": "anupama-pathirage", "createdAt": "2020-03-04T06:01:31Z", "path": "examples/let-expression/let_expression.description", "diffHunk": "@@ -0,0 +1 @@\n+A let-expr binds variables and then evaluates an expression with those variables in scope.", "originalCommit": "1f660378a682f3205731244778ded84d0b2da46e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MzQ1MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r387463450", "bodyText": "Why don't we have any comment for the example? That won't look good when rendering the BBE in b.io", "author": "anupama-pathirage", "createdAt": "2020-03-04T06:02:10Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,15 @@\n+import ballerina/io;", "originalCommit": "1f660378a682f3205731244778ded84d0b2da46e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2NzQ3Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r387467473", "bodyText": "This is just a draft PR, to get some ideas on what to include in the BBE (using let expressions in different scenarios)\nI will make sure to follow the guidelines and practices we follow on b.io once this PR is ready to be merged.", "author": "irshadnilam", "createdAt": "2020-03-04T06:17:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NzQ2MzQ1MA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2MzQ3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388263479", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // <span class=\"x x-first x-last\">Following</span> is a simple let expression which involves only a single\n          \n          \n            \n                // <span class=\"x x-first x-last\">This</span> is a simple let expression which involves only a single\n          \n      \n    \n    \n  \n\nSince the comments are rendered on the side atm.", "author": "MaryamZi", "createdAt": "2020-03-05T12:31:00Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjY4Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712683", "bodyText": "+1, changed.", "author": "irshadnilam", "createdAt": "2020-03-06T04:54:25Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2MzQ3OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NDI0OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388264248", "bodyText": "Shall we indent this line for it to be aligned with the let var declaration in the previous line?", "author": "MaryamZi", "createdAt": "2020-03-05T12:32:30Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjcxNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712715", "bodyText": "Fixed.", "author": "irshadnilam", "createdAt": "2020-03-06T04:54:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NDI0OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NTQ3Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388265477", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                <span class=\"x x-first x-last\">// Use let expression with tuple binding pattern.</span>\n          \n          \n            \n                <span class=\"x x-first x-last\">[int, int] v1 = [10, 20];</span>\n          \n          \n            \n                <span class=\"x x-first x-last\">[int, int] v1 = [10, 20];</span>\n          \n          \n            \n                <span class=\"x x-first x-last\">// Let variable declarations can include binding patterns.</span>", "author": "MaryamZi", "createdAt": "2020-03-05T12:35:13Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjc1NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712755", "bodyText": "Changed", "author": "irshadnilam", "createdAt": "2020-03-06T04:54:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NTQ3Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NTcxMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388265712", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                int tupleBindingResult = let [int, int] [d1, d2] = v1,\n          \n          \n            \n                                         int d3 = d1 + d2 in  d3 * 2;\n          \n          \n            \n                int tupleBindingResult = let [int, int] [d1, d2] = v1,\n          \n          \n            \n                                             int d3 = d1 + d2 \n          \n          \n            \n                                         in d3 * 2;", "author": "MaryamZi", "createdAt": "2020-03-05T12:35:44Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                             int d3 = d1 + d2 in  d3 * 2;", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjc5MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712790", "bodyText": "fixed.", "author": "irshadnilam", "createdAt": "2020-03-06T04:55:03Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NTcxMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2NjI2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388266262", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                io:println(\"<span class=\"x x-first x-last\">tupleBindingResult</span>: \", tupleBindingResult);\n          \n          \n            \n                io:println(\"<span class=\"x x-first x-last\">tuple binding result</span>: \", tupleBindingResult);", "author": "MaryamZi", "createdAt": "2020-03-05T12:36:56Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                             int d3 = d1 + d2 in  d3 * 2;\n+    io:println(\"tupleBindingResult: \", tupleBindingResult);", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2ODUzNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388268536", "bodyText": "Not sure if we need another comment if we change the above to remove tuple.\nSpecifically saying tuple and record and then ignoring error kinda seems incomplete.", "author": "MaryamZi", "createdAt": "2020-03-05T12:41:39Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                             int d3 = d1 + d2 in  d3 * 2;\n+    io:println(\"tupleBindingResult: \", tupleBindingResult);\n+\n+    // Use let expression with record binding pattern.", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjg2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712862", "bodyText": "Remove the record binding pattern comment and added error binding pattern example.", "author": "irshadnilam", "createdAt": "2020-03-06T04:55:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2ODUzNg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2OTcxMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388269710", "bodyText": "Shall we reformat this too?", "author": "MaryamZi", "createdAt": "2020-03-05T12:44:23Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                             int d3 = d1 + d2 in  d3 * 2;\n+    io:println(\"tupleBindingResult: \", tupleBindingResult);\n+\n+    // Use let expression with record binding pattern.\n+    int age = let Person { name: firstName, age: personAge,\n+     ...otherDetails } = getPerson() in personAge;", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMjkwNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388712905", "bodyText": "+1", "author": "irshadnilam", "createdAt": "2020-03-06T04:55:44Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI2OTcxMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI3MDA2Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388270062", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                Person person = { name: \"John\", age: 31, country: \"USA\",\n          \n          \n            \n                                  \"occupation\": \"Lawyer\" };\n          \n          \n            \n                return person;\n          \n          \n            \n                return { \n          \n          \n            \n                   name: \"John\", \n          \n          \n            \n                   age: 31, \n          \n          \n            \n                   country: \"USA\",\n          \n          \n            \n                   \"occupation\": \"Lawyer\"\n          \n          \n            \n                };", "author": "MaryamZi", "createdAt": "2020-03-05T12:45:05Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,47 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // Following is a simple let expression which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                      string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Use let expression with tuple binding pattern.\n+    [int, int] v1 = [10, 20];\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                             int d3 = d1 + d2 in  d3 * 2;\n+    io:println(\"tupleBindingResult: \", tupleBindingResult);\n+\n+    // Use let expression with record binding pattern.\n+    int age = let Person { name: firstName, age: personAge,\n+     ...otherDetails } = getPerson() in personAge;\n+    io:println(\"age: \", age);\n+}\n+\n+public function getInt() returns int {\n+    return 1;\n+}\n+\n+type Person record {\n+    string name;\n+    int age;\n+    string country;\n+};\n+\n+function getPerson() returns Person {\n+    Person person = { name: \"John\", age: 31, country: \"USA\",\n+                      \"occupation\": \"Lawyer\" };\n+    return person;", "originalCommit": "a02ef33f3c18f7ca0234f4e99803414f91bf0d37", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODcxMzU2MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r388713560", "bodyText": "Fixed.", "author": "irshadnilam", "createdAt": "2020-03-06T04:58:59Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODI3MDA2Mg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjM1OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r389346359", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // This is a simple let expression which involves only a single\n          \n          \n            \n                // This is a simple let expression<span class=\"x x-first x-last\">,</span> which involves only a single", "author": "praneesha", "createdAt": "2020-03-08T08:14:44Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression which involves only a single", "originalCommit": "6794b2110efbe8691c0288e670f8a04dc673db0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5NjYyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390096628", "bodyText": "Fixed.", "author": "irshadnilam", "createdAt": "2020-03-10T05:03:26Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjM1OQ=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjM4OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r389346388", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A let expression binds variables and then evaluates an expression with those variables in scope.\n          \n          \n            \n            A let expression binds variables and then evaluates an expression with those variables in the scope.", "author": "praneesha", "createdAt": "2020-03-08T08:15:18Z", "path": "examples/let-expression/let_expression.description", "diffHunk": "@@ -0,0 +1 @@\n+A let expression binds variables and then evaluates an expression with those variables in scope.", "originalCommit": "6794b2110efbe8691c0288e670f8a04dc673db0c", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDA5NjY3Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390096676", "bodyText": "Fixed.", "author": "irshadnilam", "createdAt": "2020-03-10T05:03:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjM4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1MzM3Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392553377", "bodyText": "I don't think we need the \"the\" here. @pubudu91 thoughts?\nPlease check \"in scope\" in https://en.wikipedia.org/wiki/Scope_(computer_science)", "author": "MaryamZi", "createdAt": "2020-03-14T03:42:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTM0NjM4OA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0ODQyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390248428", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Declare variables using the keyword <span class=\"x x-first x-last\">'</span>var` in a let expression.\n          \n          \n            \n                // Declare variables using the keyword <span class=\"x x-first x-last\">`</span>var` in a let expression.", "author": "MaryamZi", "createdAt": "2020-03-10T11:25:14Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword 'var` in a let expression.", "originalCommit": "dafad70b2b7f9ab6681ce494f683ae6fc7e6497e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyODQzMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392028432", "bodyText": "Fixed.", "author": "irshadnilam", "createdAt": "2020-03-13T04:46:35Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0ODQyOA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI0ODg5MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390248890", "bodyText": "Extra line.", "author": "MaryamZi", "createdAt": "2020-03-10T11:26:09Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword 'var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+", "originalCommit": "dafad70b2b7f9ab6681ce494f683ae6fc7e6497e", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1MTczMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390251732", "bodyText": "Can we fix formatting, something like\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                int age = let Person { name: firstName, age: personAge,\n          \n          \n            \n                              ...otherDetails } = getPerson()\n          \n          \n            \n                          in personAge;\n          \n          \n            \n                int age = let Person {\n          \n          \n            \n                                name: firstName, \n          \n          \n            \n                                age: personAge, \n          \n          \n            \n                                ...otherDetails \n          \n          \n            \n                              } = getPerson()\n          \n          \n            \n                          in personAge;", "author": "MaryamZi", "createdAt": "2020-03-10T11:32:28Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword 'var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+\n+    int age = let Person { name: firstName, age: personAge,\n+                  ...otherDetails } = getPerson()\n+              in personAge;", "originalCommit": "dafad70b2b7f9ab6681ce494f683ae6fc7e6497e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyODQ1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392028458", "bodyText": "+1", "author": "irshadnilam", "createdAt": "2020-03-13T04:46:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1MTczMg=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1NzEwMA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r390257100", "bodyText": "Wondering if we should use expression bodied functions here (and for getSampleError).\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            function getPerson() returns Person {\n          \n          \n            \n                return {\n          \n          \n            \n                   name: \"John\",\n          \n          \n            \n                   age: 31,\n          \n          \n            \n                   country: \"USA\",\n          \n          \n            \n                   \"occupation\": \"Lawyer\"\n          \n          \n            \n                };\n          \n          \n            \n            }\n          \n          \n            \n            function getPerson() returns Person => {\n          \n          \n            \n                name: \"John\",\n          \n          \n            \n                age: 31,\n          \n          \n            \n                country: \"USA\",\n          \n          \n            \n                \"occupation\": \"Lawyer\"\n          \n          \n            \n            };", "author": "MaryamZi", "createdAt": "2020-03-10T11:43:46Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword 'var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+\n+    int age = let Person { name: firstName, age: personAge,\n+                  ...otherDetails } = getPerson()\n+              in personAge;\n+    io:println(\"age: \", age);\n+\n+    boolean fatal = let var error(reason, ...params) = getSampleError()\n+                    in params[\"fatal\"];\n+    io:println(\"fatal: \", fatal);\n+}\n+\n+public function getInt() returns int {\n+    return 1;\n+}\n+\n+type Person record {\n+    string name;\n+    int age;\n+    string country;\n+};\n+\n+function getPerson() returns Person {\n+    return {\n+       name: \"John\",\n+       age: 31,\n+       country: \"USA\",\n+       \"occupation\": \"Lawyer\"\n+    };\n+}", "originalCommit": "dafad70b2b7f9ab6681ce494f683ae6fc7e6497e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAyODUxMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392028511", "bodyText": "Changed.", "author": "irshadnilam", "createdAt": "2020-03-13T04:47:02Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDI1NzEwMA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjA4NjM4NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392086384", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // <span class=\"x x-first x-last\">just after the</span> declaration to the end of the let expression.\n          \n          \n            \n                // <span class=\"x x-first x-last\">the point of</span> declaration to the end of the let expression.", "author": "pubudu91", "createdAt": "2020-03-13T08:24:43Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.", "originalCommit": "9570a6a3fdfb969a4e01aee25b4c5d44d4ed43d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1MzcxNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392553715", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            public function getInt() returns int {\n          \n          \n            \n                return 1;\n          \n          \n            \n            }\n          \n          \n            \n            public function getInt() returns int => 1;", "author": "MaryamZi", "createdAt": "2020-03-14T03:49:38Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword `var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+    int age = let Person {\n+                        name: firstName,\n+                        age: personAge,\n+                        ...otherDetails\n+                      } = getPerson()\n+                  in personAge;\n+    io:println(\"age: \", age);\n+\n+    boolean fatal = let var error(reason, ...params) = getSampleError()\n+                    in params[\"fatal\"];\n+    io:println(\"fatal: \", fatal);\n+}\n+\n+public function getInt() returns int {\n+    return 1;\n+}", "originalCommit": "9570a6a3fdfb969a4e01aee25b4c5d44d4ed43d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1Mzc3NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392553774", "bodyText": "Formatting still seems off.", "author": "MaryamZi", "createdAt": "2020-03-14T03:50:50Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword `var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+    int age = let Person {\n+                        name: firstName,\n+                        age: personAge,\n+                        ...otherDetails\n+                      } = getPerson()\n+                  in personAge;", "originalCommit": "9570a6a3fdfb969a4e01aee25b4c5d44d4ed43d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1Mzc5Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392553796", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                return error(\"<span class=\"x x-first x-last\">Sample Error</span>\", <span class=\"x x-first x-last\">info</span> = \"Detail <span class=\"x x-first x-last\">Msg</span>\", fatal = true);\n          \n          \n            \n                return error(\"<span class=\"x x-first x-last\">SampleError</span>\", <span class=\"x x-first x-last\">message</span> = \"Detail <span class=\"x x-first x-last\">message</span>\", fatal = true);", "author": "MaryamZi", "createdAt": "2020-03-14T03:51:05Z", "path": "examples/let-expression/let_expression.bal", "diffHunk": "@@ -0,0 +1,64 @@\n+import ballerina/io;\n+\n+public function main() {\n+\n+    // This is a simple let expression, which involves only a single\n+    // variable declaration.\n+    int a = let int b = 1 in b * 2;\n+    io:println(\"a: \", a);\n+\n+    // Declare multiple variables in a let expression.\n+    string greeting = let string hello = \"Hello \",\n+                          string ballerina = \"Ballerina!\"\n+                      in hello + ballerina;\n+    io:println(\"greeting: \", greeting);\n+\n+    // The scope of a variable declared in a let expression is from\n+    // just after the declaration to the end of the let expression.\n+    int three = let int one = getInt(), int two = one + one in one + two;\n+    io:println(\"three: \", three);\n+\n+    // Declare variables using the keyword `var` in a let expression.\n+    int length = let var num = 10, var txt = \"four\" in num + txt.length();\n+    io:println(\"length: \", length);\n+\n+    [int, int] v1 = [10, 20];\n+    // Let variable declarations can include binding patterns.\n+    int tupleBindingResult = let [int, int] [d1, d2] = v1,\n+                                 int d3 = d1 + d2\n+                             in  d3 * 2;\n+    io:println(\"tuple binding result: \", tupleBindingResult);\n+\n+    int age = let Person {\n+                        name: firstName,\n+                        age: personAge,\n+                        ...otherDetails\n+                      } = getPerson()\n+                  in personAge;\n+    io:println(\"age: \", age);\n+\n+    boolean fatal = let var error(reason, ...params) = getSampleError()\n+                    in params[\"fatal\"];\n+    io:println(\"fatal: \", fatal);\n+}\n+\n+public function getInt() returns int {\n+    return 1;\n+}\n+\n+type Person record {\n+    string name;\n+    int age;\n+    string country;\n+};\n+\n+function getPerson() returns Person => {\n+    name: \"John\",\n+    age: 31,\n+    country: \"USA\",\n+    \"occupation\": \"Lawyer\"\n+};\n+\n+function getSampleError() returns error {\n+    return error(\"Sample Error\", info = \"Detail Msg\", fatal = true);", "originalCommit": "9570a6a3fdfb969a4e01aee25b4c5d44d4ed43d9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA0MTQ0Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r393041443", "bodyText": "@irshadnilam, can't seem to see these changes? Shall we update?", "author": "MaryamZi", "createdAt": "2020-03-16T13:59:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjU1Mzc5Ng=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjY4MDEzNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r392680135", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A let expression binds variables and then evaluates an expression with those variables in the scope.\n          \n          \n            \n            A let expression binds variables and then evaluates an expression with those variables in scope.", "author": "pubudu91", "createdAt": "2020-03-15T14:40:44Z", "path": "examples/let-expression/let_expression.description", "diffHunk": "@@ -0,0 +1 @@\n+A let expression binds variables and then evaluates an expression with those variables in the scope.", "originalCommit": "9570a6a3fdfb969a4e01aee25b4c5d44d4ed43d9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzA0NDcxMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21440#discussion_r393044713", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            A let expression binds variables and then evaluates an expression with those variables in scope.\n          \n          \n            \n            // A let expression binds variables and then evaluates an expression with those variables in scope.", "author": "MaryamZi", "createdAt": "2020-03-16T14:03:46Z", "path": "examples/let-expression/let_expression.description", "diffHunk": "@@ -0,0 +1 @@\n+A let expression binds variables and then evaluates an expression with those variables in scope.", "originalCommit": "6c7913111006ff115b3c141f72376dcdf4417c90", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "4a53bd83fcba7629de1495f7b4499d051bb6f179", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4a53bd83fcba7629de1495f7b4499d051bb6f179", "message": "Add let expression BBE", "committedDate": "2020-03-16T14:06:32Z", "type": "commit"}]}