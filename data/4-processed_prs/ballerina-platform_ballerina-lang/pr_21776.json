{"pr_number": 21776, "pr_title": "Update examples for mapping constructor changes", "pr_createdAt": "2020-03-16T04:04:08Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776", "timeline": [{"oid": "4b6d6399613ad8b400a0ef83a8c5bc184b63bd1a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4b6d6399613ad8b400a0ef83a8c5bc184b63bd1a", "message": "Add var ref field examples", "committedDate": "2020-03-15T17:54:43Z", "type": "commit"}, {"oid": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "message": "Add spread field examples", "committedDate": "2020-03-16T03:52:30Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NTc3OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392775779", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // The value in a key-value pair can be any expression that evaluates\n          \n          \n            \n                    // The value in a key-value pair can be any expression, which evaluates", "author": "praneesha", "createdAt": "2020-03-16T04:19:15Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjE5NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776195", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // The type of a member access expression for a map is thus the union of\n          \n          \n            \n                // Thus, the type of a member access expression for a map is the union of\n          \n      \n    \n    \n  \n\nhaving \"thus\" in the middle of the sentence disturbs the flow of it. Better to have it at the beginning.", "author": "praneesha", "createdAt": "2020-03-16T04:21:17Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.\n+    // The type of a member access expression for a map is thus the union of", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjUxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776514", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // specified key, or `()` if a field does not exist with the specified key.\n          \n          \n            \n                // specified key. Else, it returns `()` if a field does not exist with the specified key.\n          \n      \n    \n    \n  \n\nBreaking the text into smaller sentences to increase understandability.", "author": "praneesha", "createdAt": "2020-03-16T04:23:23Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjU1NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776555", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // If the map has a field with the specified key, `.get()` returns the value,\n          \n          \n            \n                // If the map has a field with the specified key, `.get()` returns the value.", "author": "praneesha", "createdAt": "2020-03-16T04:23:35Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.\n+    // The type of a member access expression for a map is thus the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value,", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjYwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776604", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // or panics if the map does not have a field with the specified key.\n          \n          \n            \n                // Else, it panics if the map does not have a field with the specified key.", "author": "praneesha", "createdAt": "2020-03-16T04:23:49Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.\n+    // The type of a member access expression for a map is thus the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value,\n+    // or panics if the map does not have a field with the specified key.", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjY0Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776643", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Member access lvalue expressions can be used to add fields to a map\n          \n          \n            \n                // Member access value expressions can be used to add fields to a map", "author": "praneesha", "createdAt": "2020-03-16T04:24:07Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.\n+    // The type of a member access expression for a map is thus the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value,\n+    // or panics if the map does not have a field with the specified key.\n+    // Thus, the type for `.get()` on a map is the map's constraint type.\n+    string line2Value = addrMap.get(\"line2\");\n+    io:println(line2Value);\n \n-    // The `.hasKey()` function checks if a map contains a specified key.\n+    // The `.hasKey()` function checks if a map contains the specified key.\n     boolean hasPostalCode = addrMap.hasKey(\"postalCode\");\n     io:println(hasPostalCode);\n \n-    // Adds or updates the value of a key.\n+    // Member access lvalue expressions can be used to add fields to a map", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NzkwNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392777905", "bodyText": "This is a term used in the spec. Added it to distinguish left hand side member access expressions vs right hand side.", "author": "MaryamZi", "createdAt": "2020-03-16T04:31:21Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0Mzg1NQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392843855", "bodyText": "If we are using the term, we'll need to tell what an lvalue is too right? Should we have a separate BBE for that?", "author": "pubudu91", "createdAt": "2020-03-16T08:11:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjY0Mw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4NDkyMw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392884923", "bodyText": "I'm not quite sure, seems a bit advanced for a BBE. Let me rephrase this anyway.", "author": "MaryamZi", "createdAt": "2020-03-16T09:33:11Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjY0Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjY1Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776657", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // or update an already existing field in the map.\n          \n          \n            \n                // or update an already-existing field in the map.", "author": "praneesha", "createdAt": "2020-03-16T04:24:16Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression that evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key, or `()` if a field does not exist with the specified key.\n+    // The type of a member access expression for a map is thus the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value,\n+    // or panics if the map does not have a field with the specified key.\n+    // Thus, the type for `.get()` on a map is the map's constraint type.\n+    string line2Value = addrMap.get(\"line2\");\n+    io:println(line2Value);\n \n-    // The `.hasKey()` function checks if a map contains a specified key.\n+    // The `.hasKey()` function checks if a map contains the specified key.\n     boolean hasPostalCode = addrMap.hasKey(\"postalCode\");\n     io:println(hasPostalCode);\n \n-    // Adds or updates the value of a key.\n+    // Member access lvalue expressions can be used to add fields to a map\n+    // or update an already existing field in the map.", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjcyNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776727", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // A mapping constructor expression can also include a spread field,\n          \n          \n            \n                // A mapping constructor expression can also include a spread field\n          \n      \n    \n    \n  \n\nWe do not need a comma here.", "author": "praneesha", "createdAt": "2020-03-16T04:24:47Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -56,15 +87,13 @@ public function main() {\n         }\n     );\n     io:println(modifiedMarks);\n-    \n-    // Maps can only contain values of the type specified by the constraint type descriptor.\n-    map<string> stringMap = {};\n-    stringMap[\"index\"] = \"100892N\";\n \n-    // The return type of member access will be `T?` where `T` is the constraint type of the map.\n-    // If the key does not exist, nil (`()`) is returned.\n-    // The Elvis operator `?:` is a conditional operator that handles `()`.\n-    // If the given expression evaluates to nil, the second expression is evaluated and its value is returned.\n-    string index2 = stringMap[\"index\"] ?: \"\";\n-    io:println(index2);\n+    // A mapping constructor expression can also include a spread field,", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NjkyOA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776928", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // The name of the variable will be used as the key, while\n          \n          \n            \n                    // The name of the variable will be used as the key while\n          \n      \n    \n    \n  \n\nWe do not need a comma before the \"while\" conjunction.", "author": "praneesha", "createdAt": "2020-03-16T04:25:51Z", "path": "examples/records/records.bal", "diffHunk": "@@ -28,12 +28,21 @@ type Grades record {|\n \n \n public function main() {\n+\n+    int age = 17;\n+\n     // This creates a `Student` record. Since all the fields are required and none of the fields\n     // have explicit default values assigned to them, values must be specified for all the fields\n     // when creating the record.\n     Student john = {\n+        // A field can be specified as a key-value pair.\n         name: \"John Doe\",\n-        age: 17,\n+        // A variable reference can also be used to define a field.\n+        // The name of the variable will be used as the key, while", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3Njk2Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392776967", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // can also include a spread field, referring to another mapping value.\n          \n          \n            \n                // can also include a spread field referring to another mapping value.", "author": "praneesha", "createdAt": "2020-03-16T04:26:08Z", "path": "examples/records/records.bal", "diffHunk": "@@ -89,4 +99,33 @@ public function main() {\n     // record, else `()` is returned.\n     int? english = grades[\"english\"];\n     io:println(english);\n+\n+    // A mapping constructor expression used when creating a record value\n+    // can also include a spread field, referring to another mapping value.", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NzAxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392777014", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Using a mapping constructor expression with `var` (i.e., no contextually expected\n          \n          \n            \n                // Using a mapping constructor expression with `var` (i.e., no contextually-expected", "author": "praneesha", "createdAt": "2020-03-16T04:26:27Z", "path": "examples/records/records.bal", "diffHunk": "@@ -89,4 +99,33 @@ public function main() {\n     // record, else `()` is returned.\n     int? english = grades[\"english\"];\n     io:println(english);\n+\n+    // A mapping constructor expression used when creating a record value\n+    // can also include a spread field, referring to another mapping value.\n+    // When a spread field is specified, all the fields of the relevant\n+    // mapping value are added to the new record value being created.\n+    // A spread field is used with `address` to include the individual address\n+    // entries in `address` when creating `anne`.\n+    Student anne = {\n+        name: \"Anne\",\n+        age: 18,\n+        grades: {\n+            maths: 70,\n+            physics: 80,\n+            chemistry: 55\n+        },\n+        ...address\n+    };\n+    io:println(anne);\n+\n+    // Using a mapping constructor expression with `var` (i.e., no contextually expected", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NzIzNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392777236", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // type) results in a mapping value where the inferred type is a record type based\n          \n          \n            \n                // type) results in a mapping value, where the inferred type is a record type based\n          \n      \n    \n    \n  \n\nWe can have a comma before the \"where\" conjunction here to increase clarity and understandability since the sentence is long.", "author": "praneesha", "createdAt": "2020-03-16T04:28:00Z", "path": "examples/records/records.bal", "diffHunk": "@@ -89,4 +99,33 @@ public function main() {\n     // record, else `()` is returned.\n     int? english = grades[\"english\"];\n     io:println(english);\n+\n+    // A mapping constructor expression used when creating a record value\n+    // can also include a spread field, referring to another mapping value.\n+    // When a spread field is specified, all the fields of the relevant\n+    // mapping value are added to the new record value being created.\n+    // A spread field is used with `address` to include the individual address\n+    // entries in `address` when creating `anne`.\n+    Student anne = {\n+        name: \"Anne\",\n+        age: 18,\n+        grades: {\n+            maths: 70,\n+            physics: 80,\n+            chemistry: 55\n+        },\n+        ...address\n+    };\n+    io:println(anne);\n+\n+    // Using a mapping constructor expression with `var` (i.e., no contextually expected\n+    // type) results in a mapping value where the inferred type is a record type based", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjc3NzMwNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392777305", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // `record {| string name; int age; string city; string country; |}`\n          \n          \n            \n                // `record {| string name; int age; string city; string country; |}`.", "author": "praneesha", "createdAt": "2020-03-16T04:28:15Z", "path": "examples/records/records.bal", "diffHunk": "@@ -89,4 +99,33 @@ public function main() {\n     // record, else `()` is returned.\n     int? english = grades[\"english\"];\n     io:println(english);\n+\n+    // A mapping constructor expression used when creating a record value\n+    // can also include a spread field, referring to another mapping value.\n+    // When a spread field is specified, all the fields of the relevant\n+    // mapping value are added to the new record value being created.\n+    // A spread field is used with `address` to include the individual address\n+    // entries in `address` when creating `anne`.\n+    Student anne = {\n+        name: \"Anne\",\n+        age: 18,\n+        grades: {\n+            maths: 70,\n+            physics: 80,\n+            chemistry: 55\n+        },\n+        ...address\n+    };\n+    io:println(anne);\n+\n+    // Using a mapping constructor expression with `var` (i.e., no contextually expected\n+    // type) results in a mapping value where the inferred type is a record type based\n+    // on the fields specified in the mapping constructor expression.\n+    var rec = {name: \"Amy\", age: 18, ...address};\n+    io:println(rec);\n+\n+    // The record type inferred for `rec` is\n+    // `record {| string name; int age; string city; string country; |}`", "originalCommit": "fc87c8f461f60732f21f253f0ea9cfb5b38fc686", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "188126e2d903a577a58bea2a38905d05df5fa358", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/188126e2d903a577a58bea2a38905d05df5fa358", "message": "Apply suggestions from code review\n\nCo-Authored-By: praneesha <praneesha@wso2.com>", "committedDate": "2020-03-16T04:32:47Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0MTg1Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392841853", "bodyText": "This first sentence sounds like a heading. Shall we rephrase this or remove it altogether?", "author": "pubudu91", "createdAt": "2020-03-16T08:06:55Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression, which evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.", "originalCommit": "188126e2d903a577a58bea2a38905d05df5fa358", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0NDgzNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392844836", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // Thus, the type for `.get()` on a map is the map's constraint type.\n          \n          \n            \n                // Thus, the return type of `get()` when invoked on a map is the map's constraint type.", "author": "pubudu91", "createdAt": "2020-03-16T08:14:03Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression, which evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key. Else, it returns `()` if a field does not exist with the specified key.\n+    // Thus, the type of a member access expression for a map is the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value.\n+    // Else, it panics if the map does not have a field with the specified key.\n+    // Thus, the type for `.get()` on a map is the map's constraint type.", "originalCommit": "188126e2d903a577a58bea2a38905d05df5fa358", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0Njc2Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392846767", "bodyText": "Lang lib functions are referred to as functions right? Not methods? Also, when referring to functions we haven't used periods in other places IIRC", "author": "pubudu91", "createdAt": "2020-03-16T08:18:41Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -1,43 +1,73 @@\n import ballerina/io;\n \n public function main() {\n-    // Declares a `map` constrained by the type `string`.\n+    // Declare a `map` constrained by the type `string`.\n     map<string> m;\n \n-    // You can also declare and initialize a `map` with a map literal.\n+    string city = \"Colombo\";\n+    string country = \"Sri Lanka\";\n+    string codeLiteral = \"code\";\n+\n+    // You can also declare and initialize a `map` with a mapping constructor\n+    // expression.\n     map<string> addrMap = {\n+        // A field can be specified as a key-value pair.\n         line1: \"No. 20\",\n         line2: \"Palm Grove\",\n+        // The value in a key-value pair can be any expression, which evaluates\n+        // to a value of a type that belongs to the constraint type of the map.\n         city: \"Colombo 03\",\n-        country: \"Sri Lanka\"\n+        // A field can also be just a variable reference, which would result\n+        // in the variable name being the field name and the variable itself\n+        // being the value expression.\n+        // This is equivalent to saying `country: country`.\n+        country,\n+        // The key in a key-value pair can also be a computed key.\n+        // A computed key is defined by specifying the key expression within\n+        // brackets. The key expression must belong to type `string`.\n+        // For a computed key, the key expression is evaluated at runtime and\n+        // the resulting value is used as the key.\n+        [codeLiteral]: \"00300\"\n     };\n     io:println(addrMap);\n \n-    // Retrieves a value using member access.\n-    string country = <string>addrMap[\"country\"];\n-    io:println(country);\n+    // Retrieve a value using member access.\n+    // Member access returns the value if a field exists in the map with the\n+    // specified key. Else, it returns `()` if a field does not exist with the specified key.\n+    // Thus, the type of a member access expression for a map is the union of\n+    // the constraint type and the nil type.\n+    string? countryValue = addrMap[\"country\"];\n+\n+    if (countryValue is string) {\n+        io:println(countryValue);\n+    } else {\n+        io:println(\"key 'country' not found\");\n+    }\n \n-    // Retrieves a value using the `.get()` method.\n-    // Panics if the map does not have a member with the specified key.\n-    string line2 = addrMap.get(\"line2\");\n-    io:println(line2);\n+    // Retrieve a value using the `.get()` method.\n+    // If the map has a field with the specified key, `.get()` returns the value.\n+    // Else, it panics if the map does not have a field with the specified key.\n+    // Thus, the type for `.get()` on a map is the map's constraint type.\n+    string line2Value = addrMap.get(\"line2\");\n+    io:println(line2Value);\n \n-    // The `.hasKey()` function checks if a map contains a specified key.\n+    // The `.hasKey()` function checks if a map contains the specified key.\n     boolean hasPostalCode = addrMap.hasKey(\"postalCode\");\n     io:println(hasPostalCode);\n \n-    // Adds or updates the value of a key.\n+    // Member access lvalue expressions can be used to add fields to a map\n+    // or update an already-existing field in the map.\n     addrMap[\"postalCode\"] = \"00300\";\n     io:println(addrMap);\n \n-    // The `keys()` method returns the keys of the map as an array.\n+    // The `.keys()` method returns the keys of the map as an array.", "originalCommit": "188126e2d903a577a58bea2a38905d05df5fa358", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg4NzY1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392887658", "bodyText": "I think I've seen it used both ways. Shouldn't we stick to method when we are invoking it on something?\nRegarding the periods, again, we seem to have used it both ways. For example, every other comment in this example has a period. I guess we'll have to revisit all of it.\nI personally prefer including the period since it indicates we're calling it on something, and it cannot be called on it's own.", "author": "MaryamZi", "createdAt": "2020-03-16T09:37:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0Njc2Nw=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MzAzNDE4MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r393034180", "bodyText": "Yeah, that thought occurred to me as well. But there isn't a particular term used to refer to lang lib functions in the spec, and then again uses methods to refer to object methods and resource methods", "author": "pubudu91", "createdAt": "2020-03-16T13:48:14Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg0Njc2Nw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5Mjg1MDA4MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21776#discussion_r392850080", "bodyText": "\"will return the key-value pairs as an array of tuples\"", "author": "pubudu91", "createdAt": "2020-03-16T08:25:47Z", "path": "examples/maps/maps.bal", "diffHunk": "@@ -46,8 +76,9 @@ public function main() {\n     });\n \n     map<int> marks = {sam: 50, jon: 60};\n+\n     // Calling the `.entries()` method on a map will return the key (`string`)\n-    // and the value as a tuple variable.\n+    // and the value pairs as tuples.", "originalCommit": "188126e2d903a577a58bea2a38905d05df5fa358", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "d7b7ac5ad94b30f756a452e4d7d4e51db62d6bdc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d7b7ac5ad94b30f756a452e4d7d4e51db62d6bdc", "message": "Address review suggestions", "committedDate": "2020-03-16T09:40:41Z", "type": "commit"}]}