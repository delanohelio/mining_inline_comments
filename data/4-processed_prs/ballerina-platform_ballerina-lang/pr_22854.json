{"pr_number": 22854, "pr_title": "Add try-catch statement to the body of generated main method", "pr_createdAt": "2020-04-23T08:24:28Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854", "timeline": [{"oid": "3445138fd94908812f35c03441a3f8d95fb9753e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3445138fd94908812f35c03441a3f8d95fb9753e", "message": "Add try-catch statment to the body generated main method\n\nThis PR adds a common try-catch to generated java main method.\nThis will now handle any runtime exceptions or errors thrown from\nprogram initialization and shutdown (for example: launch listener)\nand will handle them in a gracefull manner so that user sees\nproper ballerina related errors on the console.", "committedDate": "2020-04-23T08:11:34Z", "type": "commit"}, {"oid": "078d55416c34b5ffb3620b5259cb56fdcdc2795f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/078d55416c34b5ffb3620b5259cb56fdcdc2795f", "message": "Add test launch listener modules", "committedDate": "2020-04-23T08:16:45Z", "type": "commit"}, {"oid": "32832e97d0bde96f7854a5d35aeaf8ee3bf59f46", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/32832e97d0bde96f7854a5d35aeaf8ee3bf59f46", "message": "Include test launch listener modules in gradle parent", "committedDate": "2020-04-23T08:17:48Z", "type": "commit"}, {"oid": "ecdf4000414b001f96701306f6eef5672f3c2e03", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ecdf4000414b001f96701306f6eef5672f3c2e03", "message": "Add test cases to verify launch-listener init & shutdown failures", "committedDate": "2020-04-23T08:18:39Z", "type": "commit"}, {"oid": "205f84511f29c08039ccb69e29bb130ed572184a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/205f84511f29c08039ccb69e29bb130ed572184a", "message": "Merge branch 'master' into fix-21575", "committedDate": "2020-04-23T08:19:41Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2MDU2Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413660563", "bodyText": "Do we need this empty spotbugs-exclude files", "author": "warunalakshitha", "createdAt": "2020-04-23T09:28:47Z", "path": "tests/launch-listener-test-util-libs/test-launch-listener-03/spotbugs-exclude.xml", "diffHunk": "@@ -0,0 +1,21 @@\n+<!--\n+  ~  Copyright (c) 2020, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "205f84511f29c08039ccb69e29bb130ed572184a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY3NjMxMg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413676312", "bodyText": "no need. removed.", "author": "Kishanthan", "createdAt": "2020-04-23T09:51:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2MDU2Mw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY1ODY2OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413658669", "bodyText": "can we remove the original handleErrorFromFutureValue method?", "author": "manuranga", "createdAt": "2020-04-23T09:26:04Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "diffHunk": "@@ -1722,7 +1727,7 @@ static void generateMainMethod(@Nilable BIRFunction userMainFunc, ClassWriter cw\n             mv.visitIntInsn(BIPUSH, 100);\n             mv.visitTypeInsn(ANEWARRAY, OBJECT);\n             mv.visitFieldInsn(PUTFIELD, STRAND, \"frames\", String.format(\"[L%s;\", OBJECT));\n-            errorGen.printStackTraceFromFutureValue(mv, indexMap);\n+            handleErrorFromFutureValue(mv);", "originalCommit": "205f84511f29c08039ccb69e29bb130ed572184a", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2NzY5Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413667693", "bodyText": "can remove the original method ?", "author": "manuranga", "createdAt": "2020-04-23T09:39:12Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/bir/codegen/JvmMethodGen.java", "diffHunk": "@@ -1685,7 +1690,7 @@ static void generateMainMethod(@Nilable BIRFunction userMainFunc, ClassWriter cw\n             mv.visitIntInsn(BIPUSH, 100);\n             mv.visitTypeInsn(ANEWARRAY, OBJECT);\n             mv.visitFieldInsn(PUTFIELD, STRAND, \"frames\", String.format(\"[L%s;\", OBJECT));\n-            errorGen.printStackTraceFromFutureValue(mv, indexMap);", "originalCommit": "205f84511f29c08039ccb69e29bb130ed572184a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY3NTg5NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22854#discussion_r413675894", "bodyText": "yes, done", "author": "Kishanthan", "createdAt": "2020-04-23T09:51:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzY2NzY5Mw=="}], "type": "inlineReview"}, {"oid": "1e8a330cf58c2455e8e3c0042df702e76bf4785d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1e8a330cf58c2455e8e3c0042df702e76bf4785d", "message": "Remove unused method for JvmErrorGen", "committedDate": "2020-04-23T09:49:41Z", "type": "commit"}, {"oid": "d55bb3f963c83d11460d37799b5ca233157c312e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d55bb3f963c83d11460d37799b5ca233157c312e", "message": "Remove unwanted spotbugs exclude files", "committedDate": "2020-04-23T09:50:12Z", "type": "commit"}, {"oid": "724714be97b3b98ab76ff44466d867702e4c4c3a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/724714be97b3b98ab76ff44466d867702e4c4c3a", "message": "Use correct archive file name", "committedDate": "2020-04-23T14:49:32Z", "type": "commit"}]}