{"pr_number": 22907, "pr_title": "Add support for Enums", "pr_createdAt": "2020-04-27T05:37:20Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907", "timeline": [{"oid": "896183b27de061892d15baae27f7e9ddc0e33a57", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/896183b27de061892d15baae27f7e9ddc0e33a57", "message": "Modify grammar to support enum syntax", "committedDate": "2020-04-27T05:21:37Z", "type": "commit"}, {"oid": "95fd60f2226913a4e634a5292f86812b665c8413", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/95fd60f2226913a4e634a5292f86812b665c8413", "message": "Construct enums as constants and typedef", "committedDate": "2020-04-27T05:23:49Z", "type": "commit"}, {"oid": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "message": "Add enum tests", "committedDate": "2020-04-27T05:30:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxODIxNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424818214", "bodyText": "The grammar for module-enum-decl in the spec is\nmodule-enum-decl :=\n   metadata\n   [public] enum identifier { enum-member (, enum-member)* }\n\nAt least one enum-member is required.\nSo shouldn't this be\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        (enumMember (COMMA enumMember)*)? RIGHT_BRACE\n          \n          \n            \n                        enumMember (COMMA enumMember)* RIGHT_BRACE", "author": "MaryamZi", "createdAt": "2020-05-14T01:18:58Z", "path": "compiler/ballerina-lang/src/main/resources/grammar/BallerinaParser.g4", "diffHunk": "@@ -156,6 +157,15 @@ constantDefinition\n     :   PUBLIC? CONST typeName? Identifier ASSIGN constantExpression SEMICOLON\n     ;\n \n+enumDefinition\n+    :   documentationString? annotationAttachment* PUBLIC? ENUM Identifier LEFT_BRACE\n+            (enumMember (COMMA enumMember)*)? RIGHT_BRACE", "originalCommit": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgyNDIwNA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424824204", "bodyText": "The following results in a bad, sad error atm.\npublic enum Color {\n\n}", "author": "MaryamZi", "createdAt": "2020-05-14T01:42:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxODIxNA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE1MzM1Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r426153353", "bodyText": "#23308 tracks fixing this,", "author": "MaryamZi", "createdAt": "2020-05-16T13:23:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgxODIxNA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgyNjA0Mg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r424826042", "bodyText": "The spec says the attachment point for module-enum-decl is type.\nBut this seems to be matching for consts now.\npublic annotation X on type;\npublic const annotation Y on source const;\n\n@X // should work, doesn't\n@Y // should fail, doesn't\npublic enum Color {\n    RED,\n    BLUE\n}", "author": "MaryamZi", "createdAt": "2020-05-14T01:49:55Z", "path": "compiler/ballerina-lang/src/main/resources/grammar/BallerinaParser.g4", "diffHunk": "@@ -156,6 +157,15 @@ constantDefinition\n     :   PUBLIC? CONST typeName? Identifier ASSIGN constantExpression SEMICOLON\n     ;\n \n+enumDefinition\n+    :   documentationString? annotationAttachment* PUBLIC? ENUM Identifier LEFT_BRACE", "originalCommit": "463ffa23d7f5e5ce9512b5b40d58d95ef8884759", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjE1MzM0OQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/22907#discussion_r426153349", "bodyText": "#23308 tracks fixing this,", "author": "MaryamZi", "createdAt": "2020-05-16T13:23:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDgyNjA0Mg=="}], "type": "inlineReview"}]}