{"pr_number": 21490, "pr_title": "Add retry functionality to gRPC unary blocking client", "pr_createdAt": "2020-03-05T08:10:32Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/21490", "timeline": [{"oid": "1c73e7b33d0cf5d34a9c410be2c75ed36403f041", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1c73e7b33d0cf5d34a9c410be2c75ed36403f041", "message": "Add retry configurations", "committedDate": "2020-02-27T04:53:19Z", "type": "commit"}, {"oid": "000808806317ccbe62337a3596c49eefd57ec232", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/000808806317ccbe62337a3596c49eefd57ec232", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into grpc-resiliency", "committedDate": "2020-02-27T04:53:34Z", "type": "commit"}, {"oid": "7b8728a0979d76daf3ea501d1a62babf88797341", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7b8728a0979d76daf3ea501d1a62babf88797341", "message": "Implement gRPC unary retry functionality", "committedDate": "2020-03-03T11:54:12Z", "type": "commit"}, {"oid": "6bf98629914c07946cee7d55dd67c0949ac901c8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6bf98629914c07946cee7d55dd67c0949ac901c8", "message": "Fix missing last retry attempt", "committedDate": "2020-03-04T16:00:13Z", "type": "commit"}, {"oid": "ea23393fc51c2adc8be27b3b5e283c98a68000fd", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea23393fc51c2adc8be27b3b5e283c98a68000fd", "message": "Add grpc retry integration tests", "committedDate": "2020-03-05T07:54:10Z", "type": "commit"}, {"oid": "ea35a3857cf531bf0dca6317185aa517e51acbd9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea35a3857cf531bf0dca6317185aa517e51acbd9", "message": "Merge branch 'master' into grpc-resiliency", "committedDate": "2020-03-05T08:11:47Z", "type": "commit"}, {"oid": "343a1ca338f6b8d1712b7bfa6c1801ad32bc4ef2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/343a1ca338f6b8d1712b7bfa6c1801ad32bc4ef2", "message": "Fix conflicts with master branch", "committedDate": "2020-03-05T11:21:15Z", "type": "commit"}, {"oid": "d42cd43fdbe02db94ddf651cff5eed398150b20a", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d42cd43fdbe02db94ddf651cff5eed398150b20a", "message": "Fix ordering issues in testng file", "committedDate": "2020-03-05T12:12:37Z", "type": "commit"}, {"oid": "b8357e4762997ae003c054070961c6400a896c27", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/b8357e4762997ae003c054070961c6400a896c27", "message": "Fix grpc retry test", "committedDate": "2020-03-06T06:28:57Z", "type": "commit"}, {"oid": "1b9d4eb84812873d4f4f39b851743aada40f8eec", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1b9d4eb84812873d4f4f39b851743aada40f8eec", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into grpc-resiliency", "committedDate": "2020-03-06T07:45:58Z", "type": "commit"}, {"oid": "43da231fd783e254e04c34bc5cecb4f1566b82b2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/43da231fd783e254e04c34bc5cecb4f1566b82b2", "message": "Fix travis failure", "committedDate": "2020-03-06T07:57:53Z", "type": "commit"}, {"oid": "423b6e743e447c8d48c56c1adb87546dc846070e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/423b6e743e447c8d48c56c1adb87546dc846070e", "message": "revert travis fix", "committedDate": "2020-03-06T08:50:30Z", "type": "commit"}, {"oid": "5ecf34d35aaabb3a0f09e798fa17c581b5dacb52", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/5ecf34d35aaabb3a0f09e798fa17c581b5dacb52", "message": "fix travix issue", "committedDate": "2020-03-06T09:20:37Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyNDI1OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21490#discussion_r389524258", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            function retryBlockingAction(Client grpcClient, handle methodIdHandle, anydata payload, Headers? headers,\n          \n          \n            \n            function retryBlockingExecute(Client grpcClient, handle methodIdHandle, anydata payload, Headers? headers,", "author": "daneshk", "createdAt": "2020-03-09T08:47:28Z", "path": "stdlib/grpc/src/main/ballerina/src/grpc/client_endpoint.bal", "diffHunk": "@@ -82,6 +88,35 @@ public type Client client object {\n     }\n };\n \n+function retryBlockingAction(Client grpcClient, handle methodIdHandle, anydata payload, Headers? headers,", "originalCommit": "5ecf34d35aaabb3a0f09e798fa17c581b5dacb52", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUyOTExNg==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21490#discussion_r389529116", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // Copyright (c) 2018 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.\n          \n          \n            \n            // Copyright (c) 2020 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "author": "daneshk", "createdAt": "2020-03-09T08:58:12Z", "path": "stdlib/grpc/src/main/ballerina/src/grpc/utils.bal", "diffHunk": "@@ -0,0 +1,25 @@\n+// Copyright (c) 2018 WSO2 Inc. (http://www.wso2.org) All Rights Reserved.", "originalCommit": "5ecf34d35aaabb3a0f09e798fa17c581b5dacb52", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTUzNDcxOQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/21490#discussion_r389534719", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return retryBlockingAction(self, methodIdHandle, payload, headers, retryConfig);\n          \n          \n            \n                        return retryBlockingExecute(self, methodIdHandle, payload, headers, retryConfig);", "author": "daneshk", "createdAt": "2020-03-09T09:10:42Z", "path": "stdlib/grpc/src/main/ballerina/src/grpc/client_endpoint.bal", "diffHunk": "@@ -56,7 +57,12 @@ public type Client client object {\n     # + headers - Optional headers parameter. Passes header value if needed. Default sets to nil.\n     # + return - Returns response message and headers if executes successfully, error otherwise.\n     public remote function blockingExecute(string methodID, anydata payload, Headers? headers = ()) returns ([anydata, Headers]|Error) {\n-        return externBlockingExecute(self, java:fromString(methodID), payload, headers);\n+        var retryConfig = self.config.retryConfiguration;\n+        handle methodIdHandle = java:fromString(methodID);\n+        if (retryConfig is RetryConfiguration) {\n+            return retryBlockingAction(self, methodIdHandle, payload, headers, retryConfig);", "originalCommit": "5ecf34d35aaabb3a0f09e798fa17c581b5dacb52", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "3699695ae2672b19adde35931aa5ce7246a5e2f7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/3699695ae2672b19adde35931aa5ce7246a5e2f7", "message": "Apply suggestions from code review\n\nCo-Authored-By: Danesh Kuruppu <daneshk@users.noreply.github.com>", "committedDate": "2020-03-10T04:01:31Z", "type": "commit"}, {"oid": "8f3e5303178037c2055729c584e4997e81d9a092", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8f3e5303178037c2055729c584e4997e81d9a092", "message": "remove travis fix", "committedDate": "2020-03-10T04:03:21Z", "type": "commit"}]}