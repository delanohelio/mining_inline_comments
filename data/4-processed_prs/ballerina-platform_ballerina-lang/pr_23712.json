{"pr_number": 23712, "pr_title": "Update webSub module error", "pr_createdAt": "2020-06-04T05:18:51Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712", "timeline": [{"oid": "74e6c46c2b729057dcbd431c702392868749e796", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/74e6c46c2b729057dcbd431c702392868749e796", "message": "Fix webSub error", "committedDate": "2020-06-04T05:13:45Z", "type": "commit"}, {"oid": "e38f0a17b3ac9681bb1b6c31ae40cb558b2a1776", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e38f0a17b3ac9681bb1b6c31ae40cb558b2a1776", "message": "Merge branch '23283-add-distinct-type' of https://github.com/ballerina-platform/ballerina-lang into websub_error", "committedDate": "2020-06-04T05:14:22Z", "type": "commit"}, {"oid": "9305a5cdee6ea85c2d6a726bb57b87f043effd08", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/9305a5cdee6ea85c2d6a726bb57b87f043effd08", "message": "Merge branch '23283-add-distinct-type' of https://github.com/ballerina-platform/ballerina-lang into websub_error", "committedDate": "2020-06-04T12:50:15Z", "type": "commit"}, {"oid": "7d6caf4ddb7045e27e81009a3d48b8f0b455b1dc", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/7d6caf4ddb7045e27e81009a3d48b8f0b455b1dc", "message": "Add the new WebSub error", "committedDate": "2020-06-04T14:30:21Z", "type": "commit"}, {"oid": "80a7340ed096f37decf99c79f020055aa8fa6f9f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/80a7340ed096f37decf99c79f020055aa8fa6f9f", "message": "Merge branch 'websub_error' of https://github.com/kalaiyarasiganeshalingam/ballerina-lang into websub_error", "committedDate": "2020-06-05T09:58:14Z", "type": "commit"}, {"oid": "ea8478214f04181886ec9ba304f5d676788d6ddf", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ea8478214f04181886ec9ba304f5d676788d6ddf", "message": "Handle the error message", "committedDate": "2020-06-05T10:51:06Z", "type": "commit"}, {"oid": "1535ffbff875a14ecdb19796a7cafd485711b7b9", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/1535ffbff875a14ecdb19796a7cafd485711b7b9", "message": "Remove unwanted things", "committedDate": "2020-06-05T11:02:39Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0MzY5OA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436243698", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return error(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());\n          \n          \n            \n                    return WebSubError(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());", "author": "chamil321", "createdAt": "2020-06-06T06:29:54Z", "path": "stdlib/websub/src/main/ballerina/src/websub/subscriber_client.bal", "diffHunk": "@@ -123,10 +123,7 @@ function processHubResponse(@untainted string hub, @untainted string mode,\n \n     string topic = subscriptionChangeRequest.topic;\n     if (response is error) {\n-        string errCause = <string> response.detail()?.message;\n-        error webSubError = error(WEBSUB_ERROR_CODE, message = \"Error occurred for request: Mode[\" + mode\n-                                        + \"] at Hub[\" + hub + \"] - \" + errCause );\n-        return webSubError;\n+        return error(\"Error occurred for request: Mode[\" + mode+ \"] at Hub[\" + hub + \"] - \" + response.message());", "originalCommit": "1535ffbff875a14ecdb19796a7cafd485711b7b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0MzcyNQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436243725", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        return error(\"Redirection response received for subscription change request made with followRedirects \" +\n          \n          \n            \n                        return WebSubError(\"Redirection response received for subscription change request made with followRedirects \" +", "author": "chamil321", "createdAt": "2020-06-06T06:30:09Z", "path": "stdlib/websub/src/main/ballerina/src/websub/subscriber_client.bal", "diffHunk": "@@ -136,22 +133,18 @@ function processHubResponse(@untainted string hub, @untainted string mode,\n                 return invokeClientConnectorOnRedirection(redirected_hub, mode, subscriptionChangeRequest,\n                                                             httpClient.config.auth, remainingRedirects - 1);\n             }\n-            error subscriptionError = error(WEBSUB_ERROR_CODE, message = \"Redirection response received for \"\n-                    + \"subscription change request made with followRedirects disabled or after maxCount exceeded: Hub [\"\n-                    + hub + \"], Topic [\" + subscriptionChangeRequest.topic + \"]\");\n-            return subscriptionError;\n+            return error(\"Redirection response received for subscription change request made with followRedirects \" +", "originalCommit": "1535ffbff875a14ecdb19796a7cafd485711b7b9", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0NDE2NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436244164", "bodyText": "now can't we pass an array of causes like before?", "author": "chamil321", "createdAt": "2020-06-06T06:38:29Z", "path": "stdlib/websub/src/main/ballerina/src/websub/commons.bal", "diffHunk": "@@ -623,12 +604,11 @@ public type Hub object {\n \n         if (stopResult is error) {\n             if (stopHubServiceResult is error) {\n-                error[] causes = [stopResult, stopHubServiceResult];\n-                return error(WEBSUB_ERROR_CODE, causes = causes);\n+                return WebSubError(\"Couldn't stop the started up Ballerina WebSub Hub\", stopHubServiceResult);", "originalCommit": "1535ffbff875a14ecdb19796a7cafd485711b7b9", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI1MDIwNw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23712#discussion_r436250207", "bodyText": "Yes, we can't pass an array of causes now.", "author": "kalaiyarasiganeshalingam", "createdAt": "2020-06-06T08:19:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI0NDE2NA=="}], "type": "inlineReview"}, {"oid": "0cc4cd671aec9c7550c49c2f84a671631f5b5eb8", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/0cc4cd671aec9c7550c49c2f84a671631f5b5eb8", "message": "Fix suggested comments", "committedDate": "2020-06-06T08:17:33Z", "type": "commit"}]}