{"pr_number": 23765, "pr_title": "Update file module to new error syntax", "pr_createdAt": "2020-06-07T04:47:46Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765", "timeline": [{"oid": "4ec83fe29a5f85fcb8e341c64b8f76a14a728996", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4ec83fe29a5f85fcb8e341c64b8f76a14a728996", "message": "Update file module to new error syntax", "committedDate": "2020-06-07T04:44:47Z", "type": "commit"}, {"oid": "57017e3bfe5bb98cf4e29c31fb6da8ae3ba0b2c6", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/57017e3bfe5bb98cf4e29c31fb6da8ae3ba0b2c6", "message": "Merge branch '23283-add-distinct-type' of https://github.com/ballerina-lang/ballerina into file-distinct", "committedDate": "2020-06-08T01:50:18Z", "type": "commit"}, {"oid": "457118c9c94bbd5221b21244e0ea6232e79c895d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/457118c9c94bbd5221b21244e0ea6232e79c895d", "message": "Migrate ldap to new error syntax", "committedDate": "2020-06-08T02:13:13Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0ODI5MA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r436448290", "bodyText": "Do we need this record?", "author": "chamil321", "createdAt": "2020-06-08T04:09:39Z", "path": "stdlib/file/src/main/ballerina/src/file/file_errors.bal", "diffHunk": "@@ -23,26 +23,17 @@ public type Detail record {\n     error cause?;", "originalCommit": "457118c9c94bbd5221b21244e0ea6232e79c895d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0OTc3NA==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r436449774", "bodyText": "I think we can get rid of populateSystemErrorRecord() method as well. We only need to pass a record to createDistinctError method only if the detail record has are fields other than message and cause. So since we pass the message field to the populateSystemErrorRecord(), we can simply pass only the message.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return BallerinaErrors.createDistinctError(error, FILE_PACKAGE_ID, error, populateSystemErrorRecord(details));\n          \n          \n            \n                    return BallerinaErrors.createDistinctError(error, FILE_PACKAGE_ID, details != null ? details : UNKNOWN_MESSAGE);", "author": "chamil321", "createdAt": "2020-06-08T04:17:32Z", "path": "stdlib/file/src/main/java/org/ballerinalang/stdlib/file/utils/FileUtils.java", "diffHunk": "@@ -71,7 +71,7 @@ public static ErrorValue getBallerinaError(String error, Throwable ex) {\n      * @return Ballerina error object.\n      */\n     public static ErrorValue getBallerinaError(String error, String details) {\n-        return BallerinaErrors.createError(error, populateSystemErrorRecord(details));\n+        return BallerinaErrors.createDistinctError(error, FILE_PACKAGE_ID, error, populateSystemErrorRecord(details));", "originalCommit": "457118c9c94bbd5221b21244e0ea6232e79c895d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ1MDE5MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r436450191", "bodyText": "Also, shall we change the param name from details to message. And the docs as well", "author": "chamil321", "createdAt": "2020-06-08T04:20:13Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ0OTc3NA=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ1MDc1Nw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r436450757", "bodyText": "Ideally FileConstants.INVALID_OPERATION_ERROR should not be retrieved as the error message. The message should be File already exists in the new path", "author": "chamil321", "createdAt": "2020-06-08T04:23:31Z", "path": "stdlib/file/src/test/java/org/ballerinalang/stdlib/file/FileTest.java", "diffHunk": "@@ -121,7 +121,7 @@ public void testFileRenameWithInvalidPath() throws IOException {\n             BValue[] returns = BRunUtil.invoke(compileResult, \"testRename\", args);\n             assertTrue(returns[0] instanceof BError);\n             BError error = (BError) returns[0];\n-            assertEquals(error.getReason(), FileConstants.INVALID_OPERATION_ERROR);\n+            assertEquals(error.getMessage(), FileConstants.INVALID_OPERATION_ERROR);", "originalCommit": "457118c9c94bbd5221b21244e0ea6232e79c895d", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ3MjE5Mw==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r436472193", "bodyText": "Can we remove the static import?", "author": "kalaiyarasiganeshalingam", "createdAt": "2020-06-08T06:02:06Z", "path": "stdlib/ldap/src/main/java/org/ballerinalang/stdlib/ldap/util/LdapUtils.java", "diffHunk": "@@ -36,6 +36,8 @@\n import javax.naming.directory.SearchControls;\n import javax.naming.directory.SearchResult;\n \n+import static org.ballerinalang.stdlib.ldap.LdapConstants.LDAP_PACKAGE_ID;", "originalCommit": "457118c9c94bbd5221b21244e0ea6232e79c895d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEwODg0Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23765#discussion_r437108846", "bodyText": "These static imports do not damage the code and it improves the readability. Hence resolving", "author": "chamil321", "createdAt": "2020-06-09T02:52:40Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQ3MjE5Mw=="}], "type": "inlineReview"}, {"oid": "df7be2805decbd7456e9e07167e48ec58e9f5523", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/df7be2805decbd7456e9e07167e48ec58e9f5523", "message": "Address review suggestions", "committedDate": "2020-06-08T10:10:20Z", "type": "commit"}]}