{"pr_number": 25203, "pr_title": "[Testerina] Improvements to assertion equality", "pr_createdAt": "2020-08-11T08:06:57Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203", "timeline": [{"oid": "4e71ad20c68010d2af4655efd4be16783d20cef0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/4e71ad20c68010d2af4655efd4be16783d20cef0", "message": "Add assertExactEquals function", "committedDate": "2020-08-10T06:37:58Z", "type": "commit"}, {"oid": "8e29f8fa307f01beb84d51489d992fb20f1780b2", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e29f8fa307f01beb84d51489d992fb20f1780b2", "message": "Add assertion tests for different types", "committedDate": "2020-08-11T08:04:11Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQxNTEyMQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r468415121", "bodyText": "Is the assignment required? The very next line is isEqual = (actual == expected).\nIm assuming changing it to boolean isEqual = (actual == expected) should work.\nSame for line 87", "author": "Ibaqu", "createdAt": "2020-08-11T08:31:44Z", "path": "misc/testerina/modules/testerina-core/src/main/ballerina/src/test/assert.bal", "diffHunk": "@@ -67,14 +67,9 @@ public function assertFalse(boolean condition, public string msg = \"Assertion Fa\n # + actual - Actual value\n # + expected - Expected value\n # + msg - Assertion error message\n-public function assertEquals(any|error actual, any|error expected, public string msg = \"Assertion Failed!\") {\n+public function assertEquals(anydata|error actual, anydata|error expected, public string msg = \"Assertion Failed!\") {\n     boolean isEqual = false;", "originalCommit": "8e29f8fa307f01beb84d51489d992fb20f1780b2", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "2d6ba64f8d454dcb68cc47340fac49a44582a0a5", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2d6ba64f8d454dcb68cc47340fac49a44582a0a5", "message": "Fix unnecessary assignments", "committedDate": "2020-08-11T10:20:10Z", "type": "commit"}, {"oid": "94c5ddcad24dcb06c42a725e9da1c50c9710661e", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/94c5ddcad24dcb06c42a725e9da1c50c9710661e", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-22048-master", "committedDate": "2020-08-11T10:20:42Z", "type": "commit"}, {"oid": "6afbf9e334992c6ba8187444511f51be4d4215b0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6afbf9e334992c6ba8187444511f51be4d4215b0", "message": "Change assertion equality for function mocking", "committedDate": "2020-08-11T11:34:54Z", "type": "commit"}, {"oid": "6afbf9e334992c6ba8187444511f51be4d4215b0", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/6afbf9e334992c6ba8187444511f51be4d4215b0", "message": "Change assertion equality for function mocking", "committedDate": "2020-08-11T11:34:54Z", "type": "forcePushed"}, {"oid": "2e7747ade60bf853a4f69df8a28825ad179b94b7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/2e7747ade60bf853a4f69df8a28825ad179b94b7", "message": "Merge branch 'master' of https://github.com/ballerina-platform/ballerina-lang into issue-22048-master", "committedDate": "2020-08-11T13:22:32Z", "type": "commit"}, {"oid": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/ec63e0fe8025c8ebb1628765d6212a7d20dae01d", "message": "Change assertion equality for function mocking", "committedDate": "2020-08-11T13:28:19Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1NDg3Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r469054876", "bodyText": "Should we ask the user to handle this? Is there a possibility to hide this detail from the user and handle it internally maybe within the assertEquals function?", "author": "azinneera", "createdAt": "2020-08-12T07:18:50Z", "path": "tests/jballerina-debugger-integration-test/src/test/resources/project-based-tests/basic-project/src/hello-world/tests/hello_world_test.bal", "diffHunk": "@@ -33,5 +33,9 @@ public function mockPrint((any|error)... s) {\n function testFunc() {\n     // Invoking the main function\n     main();\n-    test:assertEquals(outputs[0], \"Hello, World!\");\n+    if (outputs[0] is anydata) {", "originalCommit": "ec63e0fe8025c8ebb1628765d6212a7d20dae01d", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2Mzc1Ng==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r469063756", "bodyText": "That is like going back to the previous implementation right?", "author": "Dilhasha", "createdAt": "2020-08-12T07:35:51Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1NDg3Ng=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA2Njg5MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/25203#discussion_r469066891", "bodyText": "Did you mean to allow user to pass \"any\" type into the function and check it if it qualifies as \"anydata\" and do a value check?\nThe problem is, this check happens at runtime. If user passes a value not qualifying as \"anydata\", still the function would allow it and user would expect value equality. But, he would get notified about the failure only at runtime.", "author": "Dilhasha", "createdAt": "2020-08-12T07:41:46Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTA1NDg3Ng=="}], "type": "inlineReview"}]}