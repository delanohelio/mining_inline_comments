{"pr_number": 23058, "pr_title": "Member type infer support and related type checker improvements", "pr_createdAt": "2020-05-04T06:41:44Z", "pr_url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058", "timeline": [{"oid": "8e12e83465035b7599658b9f6be8098ee1948312", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/8e12e83465035b7599658b9f6be8098ee1948312", "message": "Add improvements to infer table type from record list", "committedDate": "2020-04-30T15:08:03Z", "type": "commit"}, {"oid": "d8afabba3f259590c0b5c1ac05a9c6ea77bb8986", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/d8afabba3f259590c0b5c1ac05a9c6ea77bb8986", "message": "Remove redundant test file", "committedDate": "2020-05-02T08:21:32Z", "type": "commit"}, {"oid": "98d24f05533d16d620b72c4fd355c58cb98e46f3", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/98d24f05533d16d620b72c4fd355c58cb98e46f3", "message": "Add map constrained table test cases", "committedDate": "2020-05-02T13:13:52Z", "type": "commit"}, {"oid": "10811c777ee3b10bec790b60dd5891fad90a9d4f", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/10811c777ee3b10bec790b60dd5891fad90a9d4f", "message": "Add type checker validation for table with map constraint", "committedDate": "2020-05-04T05:38:09Z", "type": "commit"}, {"oid": "c4b848129cfec82bd8fd1d6c3d7b48483b8f854c", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/c4b848129cfec82bd8fd1d6c3d7b48483b8f854c", "message": "Add negative testcases for member type infer usecase", "committedDate": "2020-05-04T06:28:23Z", "type": "commit"}, {"oid": "393e5cf231671816a878a53f0f4b3b1e26e0faa4", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/393e5cf231671816a878a53f0f4b3b1e26e0faa4", "message": "Add minor code refactoring changes", "committedDate": "2020-05-04T06:38:53Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTI3MjI0MQ==", "url": "https://github.com/ballerina-platform/ballerina-lang/pull/23058#discussion_r419272241", "bodyText": "I have these types defined\ntype Person record {\n    readonly string name;\n    readonly int age;\n};\n\ntype Customer record {\n    readonly int id;\n    readonly string name;\n    string lname;\n};\n\nAnd I have this table.\nvar tab = table key(name) [\n    { name: \"AAA\", age: 31 },\n    { name: \"BBB\", age: 34 },\n    { id: 13 , name: \"Foo\", lname: \"QWER\" }\n    ];\nAccording to the PR table constraint will be one record type with required fields and some optional fields.\nBut shouldnt it be table<Person|Customer> ?", "author": "gimantha", "createdAt": "2020-05-04T08:08:28Z", "path": "compiler/ballerina-lang/src/main/java/org/wso2/ballerinalang/compiler/semantics/analyzer/TypeChecker.java", "diffHunk": "@@ -758,8 +774,59 @@ public void visit(BLangTableConstructorExpr tableConstructorExpr) {\n         }\n     }\n \n-    private boolean validateTableType(BTableType tableType, DiagnosticPos pos,\n-                                      List<BLangRecordLiteral> recordLiterals) {\n+    private BType inferTableMemberType(List<BType> memTypes, BLangTableConstructorExpr tableConstructorExpr) {", "originalCommit": "393e5cf231671816a878a53f0f4b3b1e26e0faa4", "replyToReviewId": null, "replies": null, "type": "inlineReview"}, {"oid": "e2541488e22e498f18cc55a9012d35d6e42b51b7", "url": "https://github.com/ballerina-platform/ballerina-lang/commit/e2541488e22e498f18cc55a9012d35d6e42b51b7", "message": "Enable Anydata testcases with table", "committedDate": "2020-05-04T12:19:24Z", "type": "commit"}]}