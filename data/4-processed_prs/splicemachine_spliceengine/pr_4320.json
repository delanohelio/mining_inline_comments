{"pr_number": 4320, "pr_title": "DB-10526: fix CachedOperation initialization", "pr_createdAt": "2020-10-19T18:41:59Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4320", "timeline": [{"oid": "8b6dff9ebfae16a5aeafa027a3f01d3b56ddb809", "url": "https://github.com/splicemachine/spliceengine/commit/8b6dff9ebfae16a5aeafa027a3f01d3b56ddb809", "message": "DB-10526: fix CachedOperation initialization", "committedDate": "2020-10-19T18:38:08Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA2MjgwMg==", "url": "https://github.com/splicemachine/spliceengine/pull/4320#discussion_r508062802", "bodyText": "@jyuanca shouldn't we have called source.init() during the initialization of the CachedOperation? Why do we still need to init the source again? Thanks!", "author": "yxia92", "createdAt": "2020-10-19T21:07:24Z", "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/execute/operations/CachedOperation.java", "diffHunk": "@@ -110,6 +110,11 @@ public String prettyPrint(int indentLevel) {\n         if (!isOpen)\n             throw new IllegalStateException(\"Operation is not open\");\n         populateCache();\n+        try {\n+            source.init(SpliceOperationContext.newContext(activation));", "originalCommit": "8b6dff9ebfae16a5aeafa027a3f01d3b56ddb809", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA3MTMxMg==", "url": "https://github.com/splicemachine/spliceengine/pull/4320#discussion_r508071312", "bodyText": "populateCache() closes source, so it needs to be re-initalized before open again.", "author": "jyuanca", "createdAt": "2020-10-19T21:24:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA2MjgwMg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA3NTc1Mg==", "url": "https://github.com/splicemachine/spliceengine/pull/4320#discussion_r508075752", "bodyText": "Thanks @jyuanca !", "author": "yxia92", "createdAt": "2020-10-19T21:33:43Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwODA2MjgwMg=="}], "type": "inlineReview"}]}