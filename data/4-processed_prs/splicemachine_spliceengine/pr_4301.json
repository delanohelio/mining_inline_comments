{"pr_number": 4301, "pr_title": "DB-10493 fix NPE when insert with 1 column into 2 column", "pr_createdAt": "2020-10-15T11:06:13Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4301", "timeline": [{"oid": "cd3f306c29c34f2a21efc2af87354b3fcf67ea78", "url": "https://github.com/splicemachine/spliceengine/commit/cd3f306c29c34f2a21efc2af87354b3fcf67ea78", "message": "DB-10493 fix NPE when insert with 1 column into 2 column", "committedDate": "2020-10-15T11:01:36Z", "type": "commit"}, {"oid": "93ad34d394df102455f8a830db86990a182c8915", "url": "https://github.com/splicemachine/spliceengine/commit/93ad34d394df102455f8a830db86990a182c8915", "message": "DB-10493 fix SpotBugs", "committedDate": "2020-10-15T11:02:10Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY5MDY1Ng==", "url": "https://github.com/splicemachine/spliceengine/pull/4301#discussion_r505690656", "bodyText": "this ps and below rs should probably be closed, or surrounded by a try-with-resources, but it's unrelated to your commit", "author": "arnaud-splice", "createdAt": "2020-10-15T16:46:34Z", "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/InsertOperationIT.java", "diffHunk": "@@ -466,13 +470,15 @@ public void testInsertFromSubOperation() throws Exception {\n         Assert.assertEquals(\"Incorrect number of groups returned!\", nameCountMap.size(), groupCount);\n     }\n \n+    @SuppressFBWarnings(\"RV_RETURN_VALUE_IGNORED_BAD_PRACTICE\") // delete/createNewFile\n     @Test\n     public void testInsertBlob() throws Exception {\n-        InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\");\n-        PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");\n-        ps.setString(1, \"csv_file\");\n-        ps.setBinaryStream(2, fin);\n-        ps.execute();\n+        try(InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\")) {\n+            PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");", "originalCommit": "93ad34d394df102455f8a830db86990a182c8915", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkwMDAwMw==", "url": "https://github.com/splicemachine/spliceengine/pull/4301#discussion_r505900003", "bodyText": "methodWatcher.prepareStatement is keeping a list of statements and will close them automatically. Same btw for methodWatcher.execute and methodWatcher.executeQuery, making it much easier to make it SpotBugs-compliant.", "author": "martinrupp", "createdAt": "2020-10-15T22:28:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY5MDY1Ng=="}], "type": "inlineReview"}]}