{"pr_number": 4436, "pr_title": "DB-10597 Support DB2 style varchar comparison.", "pr_createdAt": "2020-11-03T06:00:35Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4436", "timeline": [{"oid": "bf4a8f05232415c2fa015edb2b81e4d48f507e98", "url": "https://github.com/splicemachine/spliceengine/commit/bf4a8f05232415c2fa015edb2b81e4d48f507e98", "message": "DB-10597 Support DB2 style varchar comparison.", "committedDate": "2020-11-03T05:52:35Z", "type": "commit"}, {"oid": "6b8842e7c0e699959cdcf256917bb106448ddca1", "url": "https://github.com/splicemachine/spliceengine/commit/6b8842e7c0e699959cdcf256917bb106448ddca1", "message": "DB-10597 Fix spotbugs.", "committedDate": "2020-11-03T06:28:51Z", "type": "commit"}, {"oid": "f30997001c76377493d14a71d0f88624649a5ecc", "url": "https://github.com/splicemachine/spliceengine/commit/f30997001c76377493d14a71d0f88624649a5ecc", "message": "DB-10597 Fix spotbugs, part 2.", "committedDate": "2020-11-03T07:01:24Z", "type": "commit"}, {"oid": "d7bcb383ed0d844097a134a77f48275d34a333e6", "url": "https://github.com/splicemachine/spliceengine/commit/d7bcb383ed0d844097a134a77f48275d34a333e6", "message": "DB-10597 Mark DB2VarcharCompatibilityIT as a SerialTest.", "committedDate": "2020-11-03T18:24:36Z", "type": "commit"}, {"oid": "f686ff17abadc2f6b0274b692ae65b70ae487139", "url": "https://github.com/splicemachine/spliceengine/commit/f686ff17abadc2f6b0274b692ae65b70ae487139", "message": "DB-10597 Fix Spark serialization of SQLVarcharDB2Compatible.", "committedDate": "2020-11-04T03:06:32Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzEwOTk3Mg==", "url": "https://github.com/splicemachine/spliceengine/pull/4436#discussion_r517109972", "bodyText": "Do we need to add case StoredFormatIds.SQL_VARCHAR_DB2_COMPATIBLE_ID for getNullDVD() also?", "author": "yxia92", "createdAt": "2020-11-04T05:48:37Z", "path": "db-engine/src/main/java/com/splicemachine/db/iapi/types/DataValueFactoryImpl.java", "diffHunk": "@@ -1290,6 +1290,7 @@ public static DataValueDescriptor getNullDVDWithUCS_BASICcollation(\n             case StoredFormatIds.SQL_TIMESTAMP_ID: return new SQLTimestamp();\n             case StoredFormatIds.SQL_TINYINT_ID: return new SQLTinyint();\n             case StoredFormatIds.SQL_VARCHAR_ID: return new SQLVarchar();\n+            case StoredFormatIds.SQL_VARCHAR_DB2_COMPATIBLE_ID: return new SQLVarcharDB2Compatible();", "originalCommit": "f686ff17abadc2f6b0274b692ae65b70ae487139", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzQ2ODIwMA==", "url": "https://github.com/splicemachine/spliceengine/pull/4436#discussion_r517468200", "bodyText": "I don't think so.  The only place EngineUtils.getFormatIds is called is in SparkValueRowSerializer.write, and the only place this is consumed is in SparkValueRowSerializer.read:\n\n            formatIds[i] = input.readInt(true);\n            rowTemplate[i] = getDVD(formatIds[i]);\n\n\nAlso, getNullDVD deals with different typeFormatIds (the ones that don't start with \"SQL_\").", "author": "msirek", "createdAt": "2020-11-04T16:24:15Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzEwOTk3Mg=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzU2ODI4OQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4436#discussion_r517568289", "bodyText": "I see, thanks Mark!", "author": "yxia92", "createdAt": "2020-11-04T19:05:33Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzEwOTk3Mg=="}], "type": "inlineReview"}]}