{"pr_number": 4065, "pr_title": "DB-10125: Installation notes for DB-9578 for CDH put changes into wrong site.xml file", "pr_createdAt": "2020-09-01T10:27:47Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4065", "timeline": [{"oid": "098ab166e2d2221073ac457d63a7adc954a5e44e", "url": "https://github.com/splicemachine/spliceengine/commit/098ab166e2d2221073ac457d63a7adc954a5e44e", "message": "DB-10125: Installation notes for DB-9578 for CDH fixed", "committedDate": "2020-09-01T10:22:50Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4MjI5NQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4065#discussion_r481882295", "bodyText": "This last property has to go into the hdfs-site.xml for the service section. As discussed in https://splicemachine.atlassian.net/browse/DB-10125 it seems that the remaining properties have to go in hbase-site.xml as they were already.", "author": "dgomezferro", "createdAt": "2020-09-02T08:27:29Z", "path": "platforms/cdh6.3.0/docs/CDH-installation.md", "diffHunk": "@@ -171,7 +171,15 @@ use your data disks.\n     </tbody>\n    </table>\n \n-3. Click the `Save Changes` button.\n+3. Set the value of `HDFS Client Advanced Configuration Snippet (Safety Valve) for hdfs-site.xml`:\n+   ````\n+   <property><name>dfs.client.block.write.retries</name><value>6</value></property>\n+   <property><name>dfs.client.block.write.locateFollowingBlock.retries</name><value>10</value></property>\n+   <property><name>dfs.client.block.write.replace-datanode-on-failure.policy</name><value>ALWAYS</value></property>\n+   <property><name>dfs.namenode.replication.min</name><value>2</value></property>", "originalCommit": "098ab166e2d2221073ac457d63a7adc954a5e44e", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjIxNTAwNA==", "url": "https://github.com/splicemachine/spliceengine/pull/4065#discussion_r482215004", "bodyText": "I moved this property \"dfs.namenode.replication.min\" to the part \"2. Change the values of these settings:\"\n\nMinimal Block Replication\n2\n\nis it right place? Checked in Cloudera 6.3.0 HDFS Configuration for the name.", "author": "ipraznik-splice", "createdAt": "2020-09-02T16:47:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4MjI5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzYyODI4Nw==", "url": "https://github.com/splicemachine/spliceengine/pull/4065#discussion_r483628287", "bodyText": "dfs.namenode.replication.min go into\nConfigure HDFS\n2. Change the values of these settings:\n\nMinimal Block Replication\n2\n\ndfs.client.* are moved back into hbase-site.xml", "author": "ipraznik-splice", "createdAt": "2020-09-04T13:50:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4MjI5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NTgxODU5OQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4065#discussion_r485818599", "bodyText": "@ipraznik-splice it appears HBase always overrides dfs.namenode.replication.min, so if we want it to apply it needs to be set in hbase-site.xml.\nBut we should hold off on that until @OlegMazurov completes some latency tests to check whether this change has a big impact in performance.", "author": "dgomezferro", "createdAt": "2020-09-09T18:12:01Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4MjI5NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTgzMDYyOA==", "url": "https://github.com/splicemachine/spliceengine/pull/4065#discussion_r509830628", "bodyText": "Oleg has completed performance tests which did not show a significant performance degradation.", "author": "carolp-503", "createdAt": "2020-10-22T01:44:36Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTg4MjI5NQ=="}], "type": "inlineReview"}, {"oid": "bd1b96136f49c340e6b7294d09f4f4760e664dc7", "url": "https://github.com/splicemachine/spliceengine/commit/bd1b96136f49c340e6b7294d09f4f4760e664dc7", "message": "DB-10125 Value areas are fixed", "committedDate": "2020-09-02T14:50:22Z", "type": "commit"}, {"oid": "ae7278181e8aad62b3ca0a0b81874a2570bca608", "url": "https://github.com/splicemachine/spliceengine/commit/ae7278181e8aad62b3ca0a0b81874a2570bca608", "message": "DB-10125 'HDFS Client' is set back", "committedDate": "2020-09-02T14:54:56Z", "type": "commit"}, {"oid": "f90dc8baf4aeec2fb80193f0dd5cc33441cd2db7", "url": "https://github.com/splicemachine/spliceengine/commit/f90dc8baf4aeec2fb80193f0dd5cc33441cd2db7", "message": "DB-10125 PR: dfs.client.* go into hdfs-site.xml, dfs.namenode.replication.min into hdfs-site.xml", "committedDate": "2020-09-04T13:48:16Z", "type": "commit"}, {"oid": "5d1368434e98c40d58d365020292ab653e1961c6", "url": "https://github.com/splicemachine/spliceengine/commit/5d1368434e98c40d58d365020292ab653e1961c6", "message": "DB-10125 dfs.namenode.replication.min is set in hbase-site.xml as well", "committedDate": "2020-10-05T08:57:08Z", "type": "commit"}, {"oid": "852961c8e2718e955f32156e752702791f68a19f", "url": "https://github.com/splicemachine/spliceengine/commit/852961c8e2718e955f32156e752702791f68a19f", "message": "DB-10125 dfs. parameters added again", "committedDate": "2020-10-30T09:50:36Z", "type": "commit"}]}