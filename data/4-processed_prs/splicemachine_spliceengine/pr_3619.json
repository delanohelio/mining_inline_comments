{"pr_number": 3619, "pr_title": "DB-9613 DefaultSourceIT Insertion with Sampling Fix", "pr_createdAt": "2020-05-28T17:36:35Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3619", "timeline": [{"oid": "702bc36843465091193180108c5578009915fe90", "url": "https://github.com/splicemachine/spliceengine/commit/702bc36843465091193180108c5578009915fe90", "message": "DB-9613 In DefaultSourceIT insertion with sampling test, decreased number of rows from 8,388,608 to 262,144.", "committedDate": "2020-05-28T17:18:27Z", "type": "commit"}, {"oid": "e07ff1b4188abf87f7849b331216165423f5966e", "url": "https://github.com/splicemachine/spliceengine/commit/e07ff1b4188abf87f7849b331216165423f5966e", "message": "DB-9613 In DefaultSourceIT insertion with sampling test, restored number of rows to 8,388,608, and using jdbc internal connection for test setup and verification.", "committedDate": "2020-05-29T00:22:49Z", "type": "commit"}, {"oid": "5db0f4ca83d2b82f31efc5af5827d05d8ceb3660", "url": "https://github.com/splicemachine/spliceengine/commit/5db0f4ca83d2b82f31efc5af5827d05d8ceb3660", "message": "DB-9613 In DefaultSourceIT insertion with sampling test, added hbase.rootdir as a system prop and removed use of jdbc internal connection.", "committedDate": "2020-06-03T00:35:19Z", "type": "commit"}, {"oid": "fb2bfa78b48ac92d76c129353f5e5cb9ef20e166", "url": "https://github.com/splicemachine/spliceengine/commit/fb2bfa78b48ac92d76c129353f5e5cb9ef20e166", "message": "DB-9613 In DefaultSourceIT insertion with sampling test, increased hbase.rpc.timeout", "committedDate": "2020-06-03T21:44:52Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA2MTUyNQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3619#discussion_r435061525", "bodyText": "Would it be possible to make hbase-site.xml be part of the classpath of the ITs? I'm worried about other tests failing in the same way\nWe write hbase-site.xml to platform_it/target when standing up standalone, I think it would be a matter of adding that file to the ITs classpath", "author": "dgomezferro", "createdAt": "2020-06-04T07:54:41Z", "path": "splice_spark/src/test/scala/com/splicemachine/spark/splicemachine/DefaultSourceIT.scala", "diffHunk": "@@ -117,9 +117,14 @@ class DefaultSourceIT extends FunSuite with TestContext with BeforeAndAfter with\n     assert(newDF.count == 20)\n   }\n \n-  test(\"insertion with sampling\") {  // DB-9395\n+  test(\"insertion with sampling\") {\n     val userDir: String = System.getProperty(\"user.dir\")\n-    val dataDir = userDir+\"/src/test/data/lineitem.csv\";\n+    val hbaseDir = new File(userDir).getParent + \"/platform_it/target/hbase\"", "originalCommit": "fb2bfa78b48ac92d76c129353f5e5cb9ef20e166", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjU3Mzc5Mg==", "url": "https://github.com/splicemachine/spliceengine/pull/3619#discussion_r446573792", "bodyText": "Done in commit 9fb55e9", "author": "jpanko1", "createdAt": "2020-06-27T22:24:48Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTA2MTUyNQ=="}], "type": "inlineReview"}, {"oid": "ee792542207900abb0bf287398b0c9c1246c0798", "url": "https://github.com/splicemachine/spliceengine/commit/ee792542207900abb0bf287398b0c9c1246c0798", "message": "Merge branch 'master' into DB-9613", "committedDate": "2020-06-27T21:20:31Z", "type": "commit"}, {"oid": "b2b5164b423898a54cde93d82af5b3fbcee96522", "url": "https://github.com/splicemachine/spliceengine/commit/b2b5164b423898a54cde93d82af5b3fbcee96522", "message": "DB-9613 Removing unused import.", "committedDate": "2020-06-27T21:51:40Z", "type": "commit"}, {"oid": "9fb55e9202962c914d4ab8aca4884771f49ae943", "url": "https://github.com/splicemachine/spliceengine/commit/9fb55e9202962c914d4ab8aca4884771f49ae943", "message": "DB-9613 Added hbase-site.xml to IT classpath.", "committedDate": "2020-06-27T21:53:06Z", "type": "commit"}]}