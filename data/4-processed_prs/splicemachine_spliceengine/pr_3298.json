{"pr_number": 3298, "pr_title": "DB-9028 Fix ClassCastException when query contains round()", "pr_createdAt": "2020-03-05T15:47:42Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/3298", "timeline": [{"oid": "60649716aae8411929752013ad69d0d670ca2dad", "url": "https://github.com/splicemachine/spliceengine/commit/60649716aae8411929752013ad69d0d670ca2dad", "message": "DB-9028 Fix ClassCastException when query contains round()", "committedDate": "2020-03-05T15:34:56Z", "type": "commit"}, {"oid": "a7ead3a462c57ba80e1d665f5d0f50d9ec5fa058", "url": "https://github.com/splicemachine/spliceengine/commit/a7ead3a462c57ba80e1d665f5d0f50d9ec5fa058", "message": "Merge branch 'master' into DB-9028", "committedDate": "2020-03-06T04:02:14Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODQ2NQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3298#discussion_r391528465", "bodyText": "Shouldn't that apply to every other item in this list?", "author": "arnaud-splice", "createdAt": "2020-03-12T10:30:18Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/OperatorToString.java", "diffHunk": "@@ -968,7 +968,7 @@ else if (operand instanceof ConditionalNode) {\n                             methodName.equals(\"ADD_MONTHS\")    ||\n                             methodName.equals(\"ADD_YEARS\")     ||\n                             methodName.equals(\"ADD_DAYS\")      ||\n-                            methodName.equals(\"ROUND\"))\n+                            methodName.equalsIgnoreCase(\"ROUND\"))", "originalCommit": "a7ead3a462c57ba80e1d665f5d0f50d9ec5fa058", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTU0ODAzMQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3298#discussion_r391548031", "bodyText": "Won't need to do that. Other functions were \"made in splice\" and their method names were uppercase. The round function came from Splice package (uppercase) and java.lang.StrictMath (lowercase), we need to handle this one especially.", "author": "changli6", "createdAt": "2020-03-12T11:06:56Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYzNzYyOQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3298#discussion_r391637629", "bodyText": "All right! Could you add a comment in the code to explain that?", "author": "arnaud-splice", "createdAt": "2020-03-12T13:56:57Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODQ2NQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjAxMjMwOQ==", "url": "https://github.com/splicemachine/spliceengine/pull/3298#discussion_r392012309", "bodyText": "Done", "author": "changli6", "createdAt": "2020-03-13T03:21:24Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTUyODQ2NQ=="}], "type": "inlineReview"}, {"oid": "2727c970bdd9a57c38cef19cab513e9c62fe65b8", "url": "https://github.com/splicemachine/spliceengine/commit/2727c970bdd9a57c38cef19cab513e9c62fe65b8", "message": "Comment reason of handling ROUND function especially", "committedDate": "2020-03-13T03:17:53Z", "type": "commit"}]}