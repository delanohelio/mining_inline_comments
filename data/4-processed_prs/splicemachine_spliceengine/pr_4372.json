{"pr_number": 4372, "pr_title": "DB-10480 Support new syntax for EXPORT to specify different quote modes ", "pr_createdAt": "2020-10-23T15:36:19Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4372", "timeline": [{"oid": "199b0fb4e18793eebddc84335e8648b786c03a36", "url": "https://github.com/splicemachine/spliceengine/commit/199b0fb4e18793eebddc84335e8648b786c03a36", "message": "DB-10420 Support new syntax for Export to specify different quote modes", "committedDate": "2020-10-23T15:53:22Z", "type": "forcePushed"}, {"oid": "bd808b581bb174afc04d27abd25a1982e8bf0be6", "url": "https://github.com/splicemachine/spliceengine/commit/bd808b581bb174afc04d27abd25a1982e8bf0be6", "message": "DB-10420 Support new syntax for Export to specify different quote modes", "committedDate": "2020-10-23T15:53:52Z", "type": "forcePushed"}, {"oid": "009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "url": "https://github.com/splicemachine/spliceengine/commit/009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "message": "DB-10480 Support new syntax for Export to specify different quote modes", "committedDate": "2020-10-23T16:05:20Z", "type": "commit"}, {"oid": "009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "url": "https://github.com/splicemachine/spliceengine/commit/009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "message": "DB-10480 Support new syntax for Export to specify different quote modes", "committedDate": "2020-10-23T16:05:20Z", "type": "forcePushed"}, {"oid": "5c68ba5cec59a4f3489001a93c2f11a85a635f91", "url": "https://github.com/splicemachine/spliceengine/commit/5c68ba5cec59a4f3489001a93c2f11a85a635f91", "message": "DB-10480 Support binary export with new export syntax", "committedDate": "2020-10-24T21:10:16Z", "type": "commit"}, {"oid": "51a3c5df0d8de082bae452c16ad31c56e5b0f035", "url": "https://github.com/splicemachine/spliceengine/commit/51a3c5df0d8de082bae452c16ad31c56e5b0f035", "message": "DB-10480 Add new tokens to non reserved list", "committedDate": "2020-10-24T21:17:05Z", "type": "commit"}, {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408", "url": "https://github.com/splicemachine/spliceengine/commit/38340e9da98b513fa53bb2e746358fb2f2190408", "message": "DB-10480 Fix spotbugs", "committedDate": "2020-10-24T22:56:18Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxMjcxNw==", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512512717", "bodyText": "I think you can get rid of this, since <EXPORT> has two non-ambiguous branches:\n\n<EXPORT> <TO>: the new syntax.\n<EXPORT> methodCallParameterList which, by looking at methodCallParameterList boils down to: <EXPORT> <LEFT_PAREN> ....\n\nSo it is possible to restructure it a bit differently, e.g. something like:\n<EXPORT> handleExport\n...\nValueNode handleExport() throws StandardException:\n{}\n{\n  <TO> // new syntax\n  |\n  methodCallParameterList // old syntax.\n}\n\n(I think you're a fan of this syntax ;) )", "author": "hatyo", "createdAt": "2020-10-27T08:54:24Z", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/sqlgrammar.jj", "diffHunk": "@@ -4194,10 +4200,61 @@ exportStatement() throws StandardException :\n {\n     StatementNode   statementNode;\n     Vector parameterList = new Vector();\n-}\n-{\n+    ValueNode exportPath;\n+    ValueNode compression = null;\n+    ValueNode replicationCount = null;\n+    ValueNode encoding = null;\n+    ValueNode fieldSeparator = null;\n+    ValueNode quoteCharacter = null;\n+    ValueNode quoteMode = null;\n+    ValueNode fileType = null;\n+}\n+{\n+    LOOKAHEAD ( {getToken(1).kind == EXPORT && getToken(2).kind == TO} )", "originalCommit": "38340e9da98b513fa53bb2e746358fb2f2190408", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4Mzc2MQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512583761", "bodyText": "done :)", "author": "arnaud-splice", "createdAt": "2020-10-27T10:44:00Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxMjcxNw=="}], "type": "inlineReview"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxNDE4OA==", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512514188", "bodyText": "I wouldn't change white spaces if possible to keep Git history clean, maybe dedicate a JIRA for that effort instead.", "author": "hatyo", "createdAt": "2020-10-27T08:56:38Z", "path": "db-tools-i18n/src/main/resources/com/splicemachine/db/loc/messages.xml", "diffHunk": "@@ -290,12 +290,12 @@ Guide.\n                 <text>A connection could not be established because the password has a length of zero or is larger than the maximum allowed by the network protocol.</text>\n             </msg>\n \n-\t\t\t<msg>\n+            <msg>", "originalCommit": "38340e9da98b513fa53bb2e746358fb2f2190408", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjU4NTAxNg==", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512585016", "bodyText": "fyi, you can filter whitespace changes when displaying git history.", "author": "arnaud-splice", "createdAt": "2020-10-27T10:45:58Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxNDE4OA=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjgwMzI0Mg==", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512803242", "bodyText": "Sure, but I am not sure you can do that in git blame or git log for example.", "author": "hatyo", "createdAt": "2020-10-27T15:41:45Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxNDE4OA=="}], "type": "inlineReview"}, {"oid": "dc5f591c6a4cc4110ad32dee23232850ea5c9696", "url": "https://github.com/splicemachine/spliceengine/commit/dc5f591c6a4cc4110ad32dee23232850ea5c9696", "message": "DB-10480 Address review comment", "committedDate": "2020-10-27T10:43:39Z", "type": "commit"}, {"oid": "7939b37b6c5498241788632ff965c8eb9486ebf4", "url": "https://github.com/splicemachine/spliceengine/commit/7939b37b6c5498241788632ff965c8eb9486ebf4", "message": "Merge remote-tracking branch 'origin/master' into DB-10480", "committedDate": "2020-10-27T14:20:03Z", "type": "commit"}, {"oid": "4d8922e0a8dffe9f227110ff24871ee492adab9d", "url": "https://github.com/splicemachine/spliceengine/commit/4d8922e0a8dffe9f227110ff24871ee492adab9d", "message": "Merge remote-tracking branch 'origin/master' into DB-10480", "committedDate": "2020-10-28T16:17:43Z", "type": "commit"}, {"oid": "796d42b21ffd07c7af6abef740a9da901c4b2aec", "url": "https://github.com/splicemachine/spliceengine/commit/796d42b21ffd07c7af6abef740a9da901c4b2aec", "message": "DB-10480 Fix typo", "committedDate": "2020-10-28T17:58:26Z", "type": "commit"}]}