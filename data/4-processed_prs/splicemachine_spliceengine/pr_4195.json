{"pr_number": 4195, "pr_title": "DB-10259: fix import for varchar bit column", "pr_createdAt": "2020-09-25T19:24:33Z", "pr_url": "https://github.com/splicemachine/spliceengine/pull/4195", "timeline": [{"oid": "a1d07e688a1ed164d52208219b717596ddef9c1a", "url": "https://github.com/splicemachine/spliceengine/commit/a1d07e688a1ed164d52208219b717596ddef9c1a", "message": "DB-10259: fix import for varchar bit column", "committedDate": "2020-09-25T19:23:05Z", "type": "commit"}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEwMzk1OQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4195#discussion_r496103959", "bodyText": "It seems that the only difference between the toString() function in SQLBit and that in SQLBinary is the call to String.format(), why don't we move this implementation up to SQLBinary instead? It seems to make sense to apply String.format() there too.", "author": "yxia92", "createdAt": "2020-09-28T17:04:34Z", "path": "db-engine/src/main/java/com/splicemachine/db/iapi/types/SQLBit.java", "diffHunk": "@@ -229,6 +230,30 @@ else if (sourceWidth > desiredWidth)\n \t\t}\n \t}\n \n+\t@Override\n+\tpublic final String toString() {\n+\t\tif (dataValue == null)\n+\t\t{\n+\t\t\tif ((stream == null) && (_blobValue == null) )\n+\t\t\t{\n+\t\t\t\treturn \"NULL\";\n+\t\t\t}\n+\t\t\telse\n+\t\t\t{\n+\t\t\t\tif (SanityManager.DEBUG)\n+\t\t\t\t\tSanityManager.THROWASSERT(\n+\t\t\t\t\t\t\t\"value is null, stream or blob is not null\");\n+\t\t\t\treturn \"\";\n+\t\t\t}\n+\t\t}\n+\t\telse\n+\t\t{\n+\t\t\tString hex = com.splicemachine.db.iapi.util.StringUtil.toHexString(dataValue, 0, dataValue.length);\n+\t\t\treturn String.format(\"X'%s'\",hex);", "originalCommit": "a1d07e688a1ed164d52208219b717596ddef9c1a", "replyToReviewId": null, "replies": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5Njg1MjE0NQ==", "url": "https://github.com/splicemachine/spliceengine/pull/4195#discussion_r496852145", "bodyText": "This impacts all SQLBinary's subclasses, include SQLBlob. X'whatever' works for char/varchar/ long char bit data, not for Blob", "author": "jyuanca", "createdAt": "2020-09-29T16:03:37Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEwMzk1OQ=="}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzU5NzYxNA==", "url": "https://github.com/splicemachine/spliceengine/pull/4195#discussion_r497597614", "bodyText": "Ok, thanks for the explanation!", "author": "yxia92", "createdAt": "2020-09-30T15:22:06Z", "replyToReviewId": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NjEwMzk1OQ=="}], "type": "inlineReview"}]}