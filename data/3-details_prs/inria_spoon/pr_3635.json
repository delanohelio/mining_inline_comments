{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk4MTUzODA5", "number": 3635, "title": "test: add test case for checking if all private methods are used.", "bodyText": "Low hanging fruit related to #3631. Lets first finish the related issue and then review this.\nNext low hanging fruit after this is reduce the needed model builds to 1.", "createdAt": "2020-10-05T22:30:04Z", "url": "https://github.com/INRIA/spoon/pull/3635", "merged": true, "mergeCommit": {"oid": "8f4218b5d4b43fb1aa7ec186184225682565a50e"}, "closed": true, "closedAt": "2020-10-08T06:04:51Z", "author": {"login": "MartinWitt"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdPrhWvgH2gAyNDk4MTUzODA5OjkzYzhkMTBmMWYzNmY3Mzg1MDZmY2Q1OGVkN2UyYTkxZjIzYWFlNjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQPFV1AH2gAyNDk4MTUzODA5OmNmMWFlMzc0ZTY2MGQ3ZmExMTM3ZTA4ZjQ0MmVmMGYyMjZhZjU2MjM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "committedDate": "2020-10-05T22:28:27Z", "message": "add test case for checking if all private methods are used."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f31003b09f8249f156bea43b5a779d91438adb0", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/4f31003b09f8249f156bea43b5a779d91438adb0", "committedDate": "2020-10-06T16:09:10Z", "message": "merge"}, "afterCommit": {"oid": "93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "committedDate": "2020-10-05T22:28:27Z", "message": "add test case for checking if all private methods are used."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df54c61f91aef6bcfcae470b2095de398f61ff92", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/df54c61f91aef6bcfcae470b2095de398f61ff92", "committedDate": "2020-10-06T16:14:48Z", "message": "merge master"}, "afterCommit": {"oid": "93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/93c8d10f1f36f738506fcd58ed7e2a91f23aae68", "committedDate": "2020-10-05T22:28:27Z", "message": "add test case for checking if all private methods are used."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "83d9fb4ce13244ff7197431def5fd196d586eeac", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/83d9fb4ce13244ff7197431def5fd196d586eeac", "committedDate": "2020-10-06T16:21:05Z", "message": "fix license header"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "830cb3edb0e0a8d5080749cac52b5d4f99740742", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/830cb3edb0e0a8d5080749cac52b5d4f99740742", "committedDate": "2020-10-06T16:23:59Z", "message": "Merge branch 'master' into arch/unusedMethods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4ceae8ba29ce194290ad7b6a34541e12cfeebe56", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/4ceae8ba29ce194290ad7b6a34541e12cfeebe56", "committedDate": "2020-10-07T12:21:26Z", "message": "remove unused method"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA0MDAzODg0", "url": "https://github.com/INRIA/spoon/pull/3635#pullrequestreview-504003884", "createdAt": "2020-10-07T15:27:24Z", "commit": {"oid": "4ceae8ba29ce194290ad7b6a34541e12cfeebe56"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNToyNzoyNFrOHd5CBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wN1QxNToyNzoyNFrOHd5CBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMTEwNTE1OA==", "bodyText": "getTypeName to be removed", "url": "https://github.com/INRIA/spoon/pull/3635#discussion_r501105158", "createdAt": "2020-10-07T15:27:24Z", "author": {"login": "monperrus"}, "path": "src/test/java/spoon/test/architecture/SpoonArchitectureEnforcerTest.java", "diffHunk": "@@ -465,6 +472,39 @@ private static String computeDifference(Set<?> set1, Set<?> set2) {\n \t\t}\n \t\treturn StringUtils.join(results, \"\\n\");\n \t}\n+\n+\n+\tprivate void checkPrivateMethodInvocations(CtModel model) {\n+\t\tList<CtMethod<?>> methods = model.getElements(new TypeFilter<>(CtMethod.class));\n+\t\t// only look at private methods\n+\t\tmethods.removeIf(v -> !v.isPrivate());\n+\t\t// remove methods for serialization gods\n+\t\tmethods.removeIf(v -> v.getSimpleName().matches(\"(readObject)|(readResolve)|(getTypeName)\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ceae8ba29ce194290ad7b6a34541e12cfeebe56"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf1ae374e660d7fa1137e08f442ef0f226af5623", "author": {"user": {"login": "MartinWitt", "name": null}}, "url": "https://github.com/INRIA/spoon/commit/cf1ae374e660d7fa1137e08f442ef0f226af5623", "committedDate": "2020-10-07T15:54:26Z", "message": "remove gettypeName from allowed unused methods"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1312, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}