{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyNjE0NzY1", "number": 238, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMToyMToxOFrOEziqXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMjoyNzo0OVrOEzkqqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNDgwNzMyOnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMToyMToxOFrOHq0fRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMTozMDoxMVrOHq00ag==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY2MjIxMg==", "bodyText": "It looks like this wouldn't allow binary headers. Should we just change options.headers type to io.grpc.Metadata?", "url": "https://github.com/temporalio/sdk-java/pull/238#discussion_r514662212", "createdAt": "2020-10-30T01:21:18Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -138,7 +140,7 @@ public WorkflowServiceStubsImpl(\n         new GrpcMetricsInterceptor(options.getMetricsScope());\n     ClientInterceptor deadlineInterceptor = new GrpcDeadlineInterceptor(options);\n     GrpcTracingInterceptor tracingInterceptor = new GrpcTracingInterceptor();\n-    Metadata headers = new Metadata();\n+    Metadata headers = headersFrom(options.getHeaders());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c8ed19d3554a1c099bf5a44c55997aee1db0c43"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY2NzYyNg==", "bodyText": "Good call, let me do that, it would give more flexibility on the client side. Also factory options are tied to grpc anyways so exposing some grpc objects externally wouldn't be too bad. My only concern would be that it's not backwards compatible change, but then again this feature didn't work before so nobody should be relying on it now anyways.", "url": "https://github.com/temporalio/sdk-java/pull/238#discussion_r514667626", "createdAt": "2020-10-30T01:30:11Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -138,7 +140,7 @@ public WorkflowServiceStubsImpl(\n         new GrpcMetricsInterceptor(options.getMetricsScope());\n     ClientInterceptor deadlineInterceptor = new GrpcDeadlineInterceptor(options);\n     GrpcTracingInterceptor tracingInterceptor = new GrpcTracingInterceptor();\n-    Metadata headers = new Metadata();\n+    Metadata headers = headersFrom(options.getHeaders());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDY2MjIxMg=="}, "originalCommit": {"oid": "3c8ed19d3554a1c099bf5a44c55997aee1db0c43"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIyNTEzNTc3OnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMjoyNzo0OVrOHq4Gkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0zMFQwMjo0OTozOVrOHq5Zlg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDcyMTQyNg==", "bodyText": "I would merge options headers here. Mutating ones from the options is not clean.", "url": "https://github.com/temporalio/sdk-java/pull/238#discussion_r514721426", "createdAt": "2020-10-30T02:27:49Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -138,7 +140,7 @@ public WorkflowServiceStubsImpl(\n         new GrpcMetricsInterceptor(options.getMetricsScope());\n     ClientInterceptor deadlineInterceptor = new GrpcDeadlineInterceptor(options);\n     GrpcTracingInterceptor tracingInterceptor = new GrpcTracingInterceptor();\n-    Metadata headers = new Metadata();\n+    Metadata headers = options.getHeaders();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c0b6eb2cea049c1b044563105fa9fe54a22a0b35"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDc0MjY3OA==", "bodyText": "Done.", "url": "https://github.com/temporalio/sdk-java/pull/238#discussion_r514742678", "createdAt": "2020-10-30T02:49:39Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -138,7 +140,7 @@ public WorkflowServiceStubsImpl(\n         new GrpcMetricsInterceptor(options.getMetricsScope());\n     ClientInterceptor deadlineInterceptor = new GrpcDeadlineInterceptor(options);\n     GrpcTracingInterceptor tracingInterceptor = new GrpcTracingInterceptor();\n-    Metadata headers = new Metadata();\n+    Metadata headers = options.getHeaders();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDcyMTQyNg=="}, "originalCommit": {"oid": "c0b6eb2cea049c1b044563105fa9fe54a22a0b35"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1670, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}