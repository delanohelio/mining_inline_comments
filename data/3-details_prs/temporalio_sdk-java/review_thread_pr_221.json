{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkyNzcxOTgx", "number": 221, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMToxMzowMFrOEnRZSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowMTowOVrOEnSguA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjE0OTIyOnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMToxMzowMFrOHXxplw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMjo0NDozNlrOHXzDTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5Mjc1OQ==", "bodyText": "Add that it can return null if reset is off", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494692759", "createdAt": "2020-09-25T01:13:00Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -174,6 +181,11 @@ public Duration getRpcQueryTimeout() {\n     return rpcQueryTimeout;\n   }\n \n+  /** @return frequency at which connection backoff should be reset. */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxNTcyNg==", "bodyText": "Done", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494715726", "createdAt": "2020-09-25T02:44:36Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -174,6 +181,11 @@ public Duration getRpcQueryTimeout() {\n     return rpcQueryTimeout;\n   }\n \n+  /** @return frequency at which connection backoff should be reset. */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5Mjc1OQ=="}, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjE1MTcxOnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMToxNDozOVrOHXxrEw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMjo0NDoyM1rOHXzDFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5MzEzOQ==", "bodyText": "forgot setter for this property", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494693139", "createdAt": "2020-09-25T01:14:39Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -211,6 +223,7 @@ public Scope getMetricsScope() {\n     private Duration rpcTimeout = DEFAULT_RPC_TIMEOUT;\n     private Duration rpcLongPollTimeout = DEFAULT_POLL_RPC_TIMEOUT;\n     private Duration rpcQueryTimeout = DEFAULT_QUERY_RPC_TIMEOUT;\n+    private Duration connectionBackoffResetFrequency = DEFAULT_CONNECTION_BACKOFF_RESET_FREQUENCY;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 51}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxNTY2OA==", "bodyText": "Done", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494715668", "createdAt": "2020-09-25T02:44:23Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -211,6 +223,7 @@ public Scope getMetricsScope() {\n     private Duration rpcTimeout = DEFAULT_RPC_TIMEOUT;\n     private Duration rpcLongPollTimeout = DEFAULT_POLL_RPC_TIMEOUT;\n     private Duration rpcQueryTimeout = DEFAULT_QUERY_RPC_TIMEOUT;\n+    private Duration connectionBackoffResetFrequency = DEFAULT_CONNECTION_BACKOFF_RESET_FREQUENCY;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5MzEzOQ=="}, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 51}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjE1NTc5OnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMToxNzowOFrOHXxtgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMjo0NDoxNlrOHXzC_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5Mzc2MA==", "bodyText": "Change parameter type to Duration and use milliseconds when initializing executor.", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494693760", "createdAt": "2020-09-25T01:17:08Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -151,6 +164,23 @@ public WorkflowServiceStubsImpl(\n     log.info(String.format(\"Created GRPC client for channel: %s\", channel));\n   }\n \n+  private ScheduledExecutorService startConnectionBackoffResetter(long backoffResetFrequency) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxNTY0NA==", "bodyText": "Done", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494715644", "createdAt": "2020-09-25T02:44:16Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -151,6 +164,23 @@ public WorkflowServiceStubsImpl(\n     log.info(String.format(\"Created GRPC client for channel: %s\", channel));\n   }\n \n+  private ScheduledExecutorService startConnectionBackoffResetter(long backoffResetFrequency) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDY5Mzc2MA=="}, "originalCommit": {"oid": "a2ac4b4c0c7bd6400989674eb490b92e79021704"}, "originalPosition": 38}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjMxMTA0OnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMjo0OToyNlrOHXzIXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzoxNjozOFrOHXzi7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxNzAyMw==", "bodyText": "Document default and explain that setting it to null disables the reset.", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494717023", "createdAt": "2020-09-25T02:49:26Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -290,6 +307,16 @@ public Builder setRpcLongPollTimeout(Duration timeout) {\n       return this;\n     }\n \n+    /**\n+     * Sets frequency at which gRPC connection backoff should be reset practically defining an upper\n+     * limit for the maximum backoff duration.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 72}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMzgyMg==", "bodyText": "Updated", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494723822", "createdAt": "2020-09-25T03:16:38Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsOptions.java", "diffHunk": "@@ -290,6 +307,16 @@ public Builder setRpcLongPollTimeout(Duration timeout) {\n       return this;\n     }\n \n+    /**\n+     * Sets frequency at which gRPC connection backoff should be reset practically defining an upper\n+     * limit for the maximum backoff duration.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxNzAyMw=="}, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 72}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjMzMDI2OnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowMDoxOFrOHXzThA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzoxNzowMFrOHXzjcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxOTg3Ng==", "bodyText": "nit:\nreturn Executors.new....", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494719876", "createdAt": "2020-09-25T03:00:18Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -151,6 +164,23 @@ public WorkflowServiceStubsImpl(\n     log.info(String.format(\"Created GRPC client for channel: %s\", channel));\n   }\n \n+  private ScheduledExecutorService startConnectionBackoffResetter(Duration backoffResetFrequency) {\n+    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMzk1Mw==", "bodyText": "We submit a task below, so this will not be possible...", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494723953", "createdAt": "2020-09-25T03:17:00Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -151,6 +164,23 @@ public WorkflowServiceStubsImpl(\n     log.info(String.format(\"Created GRPC client for channel: %s\", channel));\n   }\n \n+  private ScheduledExecutorService startConnectionBackoffResetter(Duration backoffResetFrequency) {\n+    ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcxOTg3Ng=="}, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA5NjMzMjA4OnYy", "diffSide": "RIGHT", "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzowMTowOVrOHXzUlA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yNVQwMzoxNzowN1rOHXzjiQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMDE0OA==", "bodyText": "private final", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494720148", "createdAt": "2020-09-25T03:01:09Z", "author": {"login": "mfateev"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -65,6 +68,7 @@\n   private final WorkflowServiceGrpc.WorkflowServiceBlockingStub blockingStub;\n   private final WorkflowServiceGrpc.WorkflowServiceFutureStub futureStub;\n   private final Server inProcessServer;\n+  private ScheduledExecutorService scheduledBackoffResetter;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMzk3Nw==", "bodyText": "Done", "url": "https://github.com/temporalio/sdk-java/pull/221#discussion_r494723977", "createdAt": "2020-09-25T03:17:07Z", "author": {"login": "vitarb"}, "path": "temporal-serviceclient/src/main/java/io/temporal/serviceclient/WorkflowServiceStubsImpl.java", "diffHunk": "@@ -65,6 +68,7 @@\n   private final WorkflowServiceGrpc.WorkflowServiceBlockingStub blockingStub;\n   private final WorkflowServiceGrpc.WorkflowServiceFutureStub futureStub;\n   private final Server inProcessServer;\n+  private ScheduledExecutorService scheduledBackoffResetter;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NDcyMDE0OA=="}, "originalCommit": {"oid": "05b7944f29a5153e529cbee370ad771a3dc7803a"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1737, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}