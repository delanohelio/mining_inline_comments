{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE3MDU5NDM0", "number": 246, "title": "Added dump of all workflow thread to the deadlock detector", "bodyText": "", "createdAt": "2020-11-07T02:28:40Z", "url": "https://github.com/temporalio/sdk-java/pull/246", "merged": true, "mergeCommit": {"oid": "d1ea450c38d6554c301bba79dddeccf9793f0b24"}, "closed": true, "closedAt": "2020-11-07T03:07:41Z", "author": {"login": "mfateev"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdaCIDEAH2gAyNTE3MDU5NDM0OjRhNjkxMWNhMmUwMjA2Y2M1ZTdlMjQ0NzQzMTdiNjdiN2ZlMmY4ZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdaCYAjAH2gAyNTE3MDU5NDM0OjFkMDc0MjhhNzA4NzNmMGMxYjY0ZTVhOTNmNDQ2YmY4NmYwMTc5YWU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee", "author": {"user": {"login": "mfateev", "name": "Maxim Fateev"}}, "url": "https://github.com/temporalio/sdk-java/commit/4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee", "committedDate": "2020-11-07T02:27:52Z", "message": "Added dump of all workflow thread to the deadlock detector"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTg0ODU1", "url": "https://github.com/temporalio/sdk-java/pull/246#pullrequestreview-525584855", "createdAt": "2020-11-07T02:33:43Z", "commit": {"oid": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMjozMzo0M1rOHvCZIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wN1QwMjozMzo0M1rOHvCZIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxOTA4NDMyMA==", "bodyText": "Should we add thread names too?", "url": "https://github.com/temporalio/sdk-java/pull/246#discussion_r519084320", "createdAt": "2020-11-07T02:33:43Z", "author": {"login": "vitarb"}, "path": "temporal-sdk/src/main/java/io/temporal/internal/sync/DeterministicRunnerImpl.java", "diffHunk": "@@ -297,6 +297,18 @@ public void runUntilAllBlocked(long deadlockDetectionTimeout) {\n           threads.add(c);\n         }\n       } while (progress && !threads.isEmpty());\n+    } catch (PotentialDeadlockException e) {\n+      StringBuilder dump = new StringBuilder();\n+      for (WorkflowThread t : threads) {\n+        if (t.getWorkflowThreadContext() != e.getWorkflowThreadContext()) {\n+          if (dump.length() > 0) {\n+            dump.append(\"\\n\");\n+          }\n+          dump.append(t.getStackTrace());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI1NTg0OTY3", "url": "https://github.com/temporalio/sdk-java/pull/246#pullrequestreview-525584967", "createdAt": "2020-11-07T02:35:03Z", "commit": {"oid": "4a6911ca2e0206cc5e7e24474317b67b7fe2f8ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fccc01bb575e955fcb9c8f1f1b967a8b634476e", "author": {"user": {"login": "mfateev", "name": "Maxim Fateev"}}, "url": "https://github.com/temporalio/sdk-java/commit/5fccc01bb575e955fcb9c8f1f1b967a8b634476e", "committedDate": "2020-11-07T02:43:24Z", "message": "Added thread names to the deadlock detector dump"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d07428a70873f0c1b64e5a93f446bf86f0179ae", "author": {"user": {"login": "mfateev", "name": "Maxim Fateev"}}, "url": "https://github.com/temporalio/sdk-java/commit/1d07428a70873f0c1b64e5a93f446bf86f0179ae", "committedDate": "2020-11-07T02:45:18Z", "message": "Merge branch 'master' of github.com:temporalio/temporal-java-sdk into deadlock-thread-dump"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3479, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}