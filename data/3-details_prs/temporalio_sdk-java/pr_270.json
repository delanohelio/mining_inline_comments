{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0OTMyMDMy", "number": 270, "title": "Adding binary checksum to WorkflowClientOptions", "bodyText": "Simply set binary checksum in WorkflowClientOptions\nWorkflowClient client =\n        WorkflowClient.newInstance(\n            service, WorkflowClientOptions.newBuilder().setBinaryChecksum(\"12345\").build());", "createdAt": "2020-12-09T06:11:16Z", "url": "https://github.com/temporalio/sdk-java/pull/270", "merged": true, "mergeCommit": {"oid": "5e4ecb3914ceb73d95524a470381f757111048b6"}, "closed": true, "closedAt": "2020-12-10T23:08:26Z", "author": {"login": "vitarb"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkYmh_gBqjQwODgyNTY5Mjk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk5TJugH2gAyNTM0OTMyMDMyOmE5YjZmMjc4YTEyZTg3OGMyYmFjYzlhMDE2ZDkxMzgyMzk5MmJkZDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b36f66681fa171260c12a6f77042d6201e2f530f", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/b36f66681fa171260c12a6f77042d6201e2f530f", "committedDate": "2020-12-09T06:09:10Z", "message": "Add binary checksum to respond task completed and state machines also\nadding default value"}, "afterCommit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/ddfc8104db01fed416b2162f2013ed7163eabdc0", "committedDate": "2020-12-09T06:18:01Z", "message": "* Adding binary checksum to workflow client options\n\n* Add binary checksum to respond task completed and state machines also\nadding default value"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MjMzOTAw", "url": "https://github.com/temporalio/sdk-java/pull/270#pullrequestreview-548233900", "createdAt": "2020-12-09T14:24:54Z", "commit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNDoyNDo1NFrOICXN_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNDoyNzo0NlrOICXXHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTM0ODQ3OQ==", "bodyText": "Why not an empty string as it is now?", "url": "https://github.com/temporalio/sdk-java/pull/270#discussion_r539348479", "createdAt": "2020-12-09T14:24:54Z", "author": {"login": "mfateev"}, "path": "temporal-sdk/src/main/java/io/temporal/client/WorkflowClientOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n \n   private static final WorkflowClientOptions DEFAULT_INSTANCE;\n   private static final String DEFAULT_NAMESPACE = \"default\";\n+  private static final String DEFAULT_BINARY_CHECKSUM = \"none\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTM0OTM1MQ==", "bodyText": "I would make the default null and not call this method if it is not set.", "url": "https://github.com/temporalio/sdk-java/pull/270#discussion_r539349351", "createdAt": "2020-12-09T14:26:00Z", "author": {"login": "mfateev"}, "path": "temporal-sdk/src/main/java/io/temporal/internal/replay/ReplayWorkflowTaskHandler.java", "diffHunk": "@@ -127,6 +128,7 @@ private Result failureToResult(PollWorkflowTaskQueueResponse workflowTask, Throw\n           RespondWorkflowTaskCompletedRequest.newBuilder()\n               .setTaskToken(workflowTask.getTaskToken())\n               .setIdentity(options.getIdentity())\n+              .setBinaryChecksum(options.getBinaryChecksum())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTM1MDgxMg==", "bodyText": "Does test verify that it was indeed added to the history?", "url": "https://github.com/temporalio/sdk-java/pull/270#discussion_r539350812", "createdAt": "2020-12-09T14:27:46Z", "author": {"login": "mfateev"}, "path": "temporal-sdk/src/test/java/io/temporal/worker/StickyWorkerTest.java", "diffHunk": "@@ -489,13 +490,18 @@ public void workflowsCanBeQueriedAfterEviction() throws Exception {\n     private TestWorkflowEnvironment testEnv;\n     private WorkerFactory factory;\n     private final String identity = UUID.randomUUID().toString();\n+    private final String binaryChecksum = UUID.randomUUID().toString();\n \n     public TestEnvironmentWrapper(WorkerFactoryOptions options) {\n       if (options == null) {\n         options = WorkerFactoryOptions.newBuilder().build();\n       }\n       WorkflowClientOptions clientOptions =\n-          WorkflowClientOptions.newBuilder().setNamespace(NAMESPACE).setIdentity(identity).build();\n+          WorkflowClientOptions.newBuilder()\n+              .setNamespace(NAMESPACE)\n+              .setIdentity(identity)\n+              .setBinaryChecksum(binaryChecksum)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0"}, "originalPosition": 65}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7e1611581382629e9a09e44d46ba5a3ffdfd791e", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/7e1611581382629e9a09e44d46ba5a3ffdfd791e", "committedDate": "2020-12-10T04:57:22Z", "message": "* Adding binary checksum to workflow client options\n\n* Add binary checksum to respond task completed and state machines also\nadding default value"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f4ef3d92106616ca033f88737425e57654a62f2", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/2f4ef3d92106616ca033f88737425e57654a62f2", "committedDate": "2020-12-10T05:26:38Z", "message": "Add a test for binary checksum and default to empty string"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ddfc8104db01fed416b2162f2013ed7163eabdc0", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/ddfc8104db01fed416b2162f2013ed7163eabdc0", "committedDate": "2020-12-09T06:18:01Z", "message": "* Adding binary checksum to workflow client options\n\n* Add binary checksum to respond task completed and state machines also\nadding default value"}, "afterCommit": {"oid": "2f4ef3d92106616ca033f88737425e57654a62f2", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/2f4ef3d92106616ca033f88737425e57654a62f2", "committedDate": "2020-12-10T05:26:38Z", "message": "Add a test for binary checksum and default to empty string"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NDI2NTU2", "url": "https://github.com/temporalio/sdk-java/pull/270#pullrequestreview-549426556", "createdAt": "2020-12-10T17:18:26Z", "commit": {"oid": "2f4ef3d92106616ca033f88737425e57654a62f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5NTA2NTI4", "url": "https://github.com/temporalio/sdk-java/pull/270#pullrequestreview-549506528", "createdAt": "2020-12-10T18:55:09Z", "commit": {"oid": "2f4ef3d92106616ca033f88737425e57654a62f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5be11bca1fc99905e0ed86fafff8ff7ff0cdece5", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/5be11bca1fc99905e0ed86fafff8ff7ff0cdece5", "committedDate": "2020-12-10T19:32:45Z", "message": "Merge branch 'master' into binary-checksum"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9b6f278a12e878c2bacc9a016d913823992bdd1", "author": {"user": {"login": "vitarb", "name": "Vitaly"}}, "url": "https://github.com/temporalio/sdk-java/commit/a9b6f278a12e878c2bacc9a016d913823992bdd1", "committedDate": "2020-12-10T20:24:01Z", "message": "Merge branch 'master' into binary-checksum"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3484, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}