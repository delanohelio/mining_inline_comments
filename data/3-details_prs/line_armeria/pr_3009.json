{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwNjUyMTMx", "number": 3009, "title": "Add Thrift example", "bodyText": "Motivation:\nA Thrift example with armeria-thrift* is not offered officially.\nModifications:\n\nAdd Thrift example\n\nResult:\nClose #2978", "createdAt": "2020-08-20T04:44:07Z", "url": "https://github.com/line/armeria/pull/3009", "merged": true, "mergeCommit": {"oid": "c9084c61bdb4a60baa2bb4c2c8b483e323003a60"}, "closed": true, "closedAt": "2020-08-21T04:12:25Z", "author": {"login": "ikhoon"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAotwcgH2gAyNDcwNjUyMTMxOjNhNDllNGY4ZGY5ZTE4ZTRhYWVjODlmOGRkYWVlM2RjOTRhZDYwMDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdA7s77gFqTQ3MjExMDE5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3a49e4f8df9e18e4aaec89f8ddaee3dc94ad6001", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/3a49e4f8df9e18e4aaec89f8ddaee3dc94ad6001", "committedDate": "2020-08-20T04:43:25Z", "message": "Add Thrift example\n\nMotivation:\n\nA Thrift example with `armeria-thrift*` is not offered officially.\n\nModifications:\n\n- Add Thrift example\n\nResult:\n\nClose #2978"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMjU2MjU2", "url": "https://github.com/line/armeria/pull/3009#pullrequestreview-471256256", "createdAt": "2020-08-20T05:26:44Z", "commit": {"oid": "3a49e4f8df9e18e4aaec89f8ddaee3dc94ad6001"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNToyNjo0NFrOHDqkGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNToyNjo0NFrOHDqkGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzYwNTE0NA==", "bodyText": "Can't we just use :examples:thrift and :examples:grpc for :examples:grpc-example?\n(for dropwizard as well)", "url": "https://github.com/line/armeria/pull/3009#discussion_r473605144", "createdAt": "2020-08-20T05:26:44Z", "author": {"login": "minwoox"}, "path": "settings.gradle", "diffHunk": "@@ -88,3 +88,5 @@ includeWithFlags ':examples:spring-boot-minimal-kotlin',          'java'\n includeWithFlags ':examples:spring-boot-tomcat',                  'java'\n includeWithFlags ':examples:spring-boot-webflux',                 'java'\n includeWithFlags ':examples:static-files',                        'java'\n+includeWithFlags ':examples:thrift-example',                      'java'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3a49e4f8df9e18e4aaec89f8ddaee3dc94ad6001"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9", "committedDate": "2020-08-20T06:28:11Z", "message": "Rename thrift-example to thrift"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d89324c306ed1b5bab08763c071a45e4fe09f49a", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/d89324c306ed1b5bab08763c071a45e4fe09f49a", "committedDate": "2020-08-20T06:03:13Z", "message": "Address comments by @minwoox"}, "afterCommit": {"oid": "8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9", "committedDate": "2020-08-20T06:28:11Z", "message": "Rename thrift-example to thrift"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzM3OTA1", "url": "https://github.com/line/armeria/pull/3009#pullrequestreview-471337905", "createdAt": "2020-08-20T07:35:15Z", "commit": {"oid": "8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzozNToxNVrOHDwWEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yMFQwNzozNToxNVrOHDwWEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzY5OTg1Ng==", "bodyText": "You don't need to specify class and method name for Thrift examples. Can use ..._args.", "url": "https://github.com/line/armeria/pull/3009#discussion_r473699856", "createdAt": "2020-08-20T07:35:15Z", "author": {"login": "trustin"}, "path": "examples/thrift/src/main/java/example/armeria/thrift/Main.java", "diffHunk": "@@ -0,0 +1,52 @@\n+package example.armeria.thrift;\n+\n+import org.slf4j.Logger;\n+import org.slf4j.LoggerFactory;\n+\n+import com.linecorp.armeria.server.Server;\n+import com.linecorp.armeria.server.docs.DocService;\n+import com.linecorp.armeria.server.thrift.THttpService;\n+\n+public final class Main {\n+\n+    private static final Logger logger = LoggerFactory.getLogger(Main.class);\n+\n+    public static void main(String[] args) throws Exception {\n+        final Server server = newServer(8080, 8443);\n+\n+        Runtime.getRuntime().addShutdownHook(new Thread(() -> {\n+            server.stop().join();\n+            logger.info(\"Server has been stopped.\");\n+        }));\n+\n+        server.start().join();\n+\n+        logger.info(\"Server has been started. Serving DocService at http://127.0.0.1:{}/docs\",\n+                    server.activeLocalPort());\n+    }\n+\n+    static Server newServer(int httpPort, int httpsPort) throws Exception {\n+        final HelloRequest exampleRequest = new HelloRequest(\"Armeria\");\n+        final THttpService thriftService =\n+                THttpService.builder()\n+                            .addService(new HelloServiceImpl())\n+                            .build();\n+        return Server.builder()\n+                     .http(httpPort)\n+                     .https(httpsPort)\n+                     .tlsSelfSigned()\n+                     .service(\"/\", thriftService)\n+                     // You can access the documentation service at http://127.0.0.1:8080/docs.\n+                     // See https://armeria.dev/docs/server-docservice for more information.\n+                     .serviceUnder(\"/docs\",\n+                                   DocService.builder()\n+                                             .exampleRequests(HelloService.class, \"hello\", exampleRequest)\n+                                             .exampleRequests(HelloService.class, \"lazyHello\", exampleRequest)\n+                                             .exampleRequests(HelloService.class, \"blockingHello\",\n+                                                              exampleRequest)\n+                                             .build())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9"}, "originalPosition": 47}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMzM4Mjc1", "url": "https://github.com/line/armeria/pull/3009#pullrequestreview-471338275", "createdAt": "2020-08-20T07:35:53Z", "commit": {"oid": "8f7adb202dbdbbc9f658bb31f06cb6499af8ffa9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9678cd883cc75828c998cb8346e9225e72cc4425", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/9678cd883cc75828c998cb8346e9225e72cc4425", "committedDate": "2020-08-21T02:25:19Z", "message": "Address comments by @minwoox and @trustin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMTEwMTkz", "url": "https://github.com/line/armeria/pull/3009#pullrequestreview-472110193", "createdAt": "2020-08-21T02:50:43Z", "commit": {"oid": "9678cd883cc75828c998cb8346e9225e72cc4425"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 105, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}