{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ0Njg2OTM3", "number": 2875, "reviewThreads": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjowNzozMVrOEL5qkg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MTo1N1rOEMT36Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTE0NTc4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/client/ConnectionPoolListener.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjowNzozMVrOGtsuXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjowNzozMVrOGtsuXw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU3MTg3MQ==", "bodyText": "logging()?", "url": "https://github.com/line/armeria/pull/2875#discussion_r450571871", "createdAt": "2020-07-07T02:07:31Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/client/ConnectionPoolListener.java", "diffHunk": "@@ -33,6 +35,21 @@ static ConnectionPoolListener noop() {\n         return ConnectionPoolListenerAdapter.NOOP;\n     }\n \n+    /**\n+     * Returns a {@link ConnectionPoolListener} that logs the connection pool events.\n+     */\n+    static ConnectionPoolListener loggingListener() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTE4ODM5OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/common/util/CompositeException.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozMjo1NFrOGttIDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozMjo1NFrOGttIDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU3ODQ0NA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/line/armeria/pull/2875#discussion_r450578444", "createdAt": "2020-07-07T02:32:54Z", "author": {"login": "minwoox"}, "path": "core/src/main/java/com/linecorp/armeria/common/util/CompositeException.java", "diffHunk": "@@ -75,7 +75,7 @@\n      * list of suppressed exceptions.\n      * @param exceptions the Throwables to have as initially suppressed exceptions\n      *\n-     * @throws IllegalArgumentException if <code>exceptions</code> is empty.\n+     * @throws IllegalArgumentException if {@code exceptions} is empty.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTE4ODUyOnYy", "diffSide": "LEFT", "path": "core/src/main/java/com/linecorp/armeria/common/stream/StreamMessageDrainer.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozMzowM1rOGttIIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozMzowM1rOGttIIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU3ODQ2Ng==", "bodyText": "Thanks!", "url": "https://github.com/line/armeria/pull/2875#discussion_r450578466", "createdAt": "2020-07-07T02:33:03Z", "author": {"login": "minwoox"}, "path": "core/src/main/java/com/linecorp/armeria/common/stream/StreamMessageDrainer.java", "diffHunk": "@@ -1,81 +0,0 @@\n-/*\n- * Copyright 2019 LINE Corporation\n- *\n- * LINE Corporation licenses this file to you under the Apache License,\n- * version 2.0 (the \"License\"); you may not use this file except in compliance\n- * with the License. You may obtain a copy of the License at:\n- *\n- *   https://www.apache.org/licenses/LICENSE-2.0\n- *\n- * Unless required by applicable law or agreed to in writing, software\n- * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n- * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n- * License for the specific language governing permissions and limitations\n- * under the License.\n- */\n-\n-package com.linecorp.armeria.common.stream;\n-\n-import java.util.List;\n-import java.util.concurrent.CompletableFuture;\n-\n-import javax.annotation.Nullable;\n-\n-import org.reactivestreams.Subscriber;\n-import org.reactivestreams.Subscription;\n-\n-import com.google.common.collect.ImmutableList;\n-import com.google.common.collect.ImmutableList.Builder;\n-\n-import com.linecorp.armeria.common.util.EventLoopCheckingFuture;\n-\n-import io.netty.util.ReferenceCountUtil;\n-\n-final class StreamMessageDrainer<T> implements Subscriber<T> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTE5ODYyOnYy", "diffSide": "RIGHT", "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozOTo1M1rOGttORg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjozOTo1M1rOGttORg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4MDAzOA==", "bodyText": "It seems like we have one more constructor to deprecate at line 85.", "url": "https://github.com/line/armeria/pull/2875#discussion_r450580038", "createdAt": "2020-07-07T02:39:53Z", "author": {"login": "minwoox"}, "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "diffHunk": "@@ -58,7 +65,11 @@ public ArmeriaClientHttpConnector() {\n      * {@link ArmeriaClientConfigurator} and the default {@link DataBufferFactoryWrapper}.\n      *\n      * @param configurator the configurator to be used to build an {@link WebClient}\n+     *\n+     * @deprecated Use\n+     *             {@link ArmeriaClientAutoConfiguration#clientHttpConnector(List, DataBufferFactoryWrapper)}.\n      */\n+    @Deprecated\n     public ArmeriaClientHttpConnector(ArmeriaClientConfigurator configurator) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 32}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgwOTIwMTEyOnYy", "diffSide": "RIGHT", "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMjo0MToxNFrOGttPqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wN1QwMzoyMToxNFrOGtt0fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4MDM5NQ==", "bodyText": "Should we add a static method to ArmeriaClientAutoConfiguration that takes no parameters?", "url": "https://github.com/line/armeria/pull/2875#discussion_r450580395", "createdAt": "2020-07-07T02:41:14Z", "author": {"login": "minwoox"}, "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "diffHunk": "@@ -48,7 +51,11 @@\n     /**\n      * Creates an {@link ArmeriaClientHttpConnector} with the default {@link ArmeriaClientConfigurator} and\n      * {@link DataBufferFactoryWrapper}.\n+     *\n+     * @deprecated Use\n+     *             {@link ArmeriaClientAutoConfiguration#clientHttpConnector(List, DataBufferFactoryWrapper)}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4OTExMw==", "bodyText": "ArmeriaClientAutoConfiguration is a configuration bean. I don't think we need to offer another bean for ClientHttpConnector with @Qualifier. \ud83e\udd14", "url": "https://github.com/line/armeria/pull/2875#discussion_r450589113", "createdAt": "2020-07-07T03:17:42Z", "author": {"login": "ikhoon"}, "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "diffHunk": "@@ -48,7 +51,11 @@\n     /**\n      * Creates an {@link ArmeriaClientHttpConnector} with the default {@link ArmeriaClientConfigurator} and\n      * {@link DataBufferFactoryWrapper}.\n+     *\n+     * @deprecated Use\n+     *             {@link ArmeriaClientAutoConfiguration#clientHttpConnector(List, DataBufferFactoryWrapper)}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4MDM5NQ=="}, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4OTgyMA==", "bodyText": "Ah, we don't. \ud83d\ude04", "url": "https://github.com/line/armeria/pull/2875#discussion_r450589820", "createdAt": "2020-07-07T03:21:14Z", "author": {"login": "minwoox"}, "path": "spring/boot2-webflux-autoconfigure/src/main/java/com/linecorp/armeria/spring/web/reactive/ArmeriaClientHttpConnector.java", "diffHunk": "@@ -48,7 +51,11 @@\n     /**\n      * Creates an {@link ArmeriaClientHttpConnector} with the default {@link ArmeriaClientConfigurator} and\n      * {@link DataBufferFactoryWrapper}.\n+     *\n+     * @deprecated Use\n+     *             {@link ArmeriaClientAutoConfiguration#clientHttpConnector(List, DataBufferFactoryWrapper)}.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MDU4MDM5NQ=="}, "originalCommit": {"oid": "50f68506c09f0c9f4cbf546da2381bf0a4b20046"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzQzNTQ3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/common/HttpRequestDuplicator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo0OTo1MVrOGuWNaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo0OTo1MVrOGuWNaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MTU2MQ==", "bodyText": "Would you mind reverting this so that #2882 has no conflict?", "url": "https://github.com/line/armeria/pull/2875#discussion_r451251561", "createdAt": "2020-07-08T02:49:51Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/common/HttpRequestDuplicator.java", "diffHunk": "@@ -43,9 +43,9 @@\n  * after all subscriptions are done. If you want to stop publishing and clean up the resources immediately,\n  * call {@link #abort()}. If you do none of these, memory leak might happen.</p>\n  *\n- * <p>If you subscribe to the {@linkplain #duplicate() duplicated http request} with the\n- * {@link SubscriptionOption#WITH_POOLED_OBJECTS}, the published elements can be shared across\n- * {@link Subscriber}s. So do not manipulate the data unless you copy them.\n+ * <p>If you subscribe to the {@linkplain #duplicate() duplicated http request} using the\n+ * {@link PooledStreamMessage#subscribeWithPooledObjects(Subscriber)} or its variants, the published elements\n+ * can be shared across {@link Subscriber}s. So do not manipulate the data unless you copy them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzQzNTg1OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/common/HttpResponseDuplicator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MDowM1rOGuWNpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MDowM1rOGuWNpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MTYyMw==", "bodyText": "Ditto", "url": "https://github.com/line/armeria/pull/2875#discussion_r451251623", "createdAt": "2020-07-08T02:50:03Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/common/HttpResponseDuplicator.java", "diffHunk": "@@ -43,9 +43,9 @@\n  * after all subscriptions are done. If you want to stop publishing and clean up the resources immediately,\n  * call {@link #abort()}. If you do none of these, memory leak might happen.</p>\n  *\n- * <p>If you subscribe to the {@linkplain #duplicate() duplicated http response} with the\n- * {@link SubscriptionOption#WITH_POOLED_OBJECTS}, the published elements can be shared across\n- * {@link Subscriber}s. So do not manipulate the data unless you copy them.\n+ * <p>If you subscribe to the {@linkplain #duplicate() duplicated http response} using the\n+ * {@link PooledStreamMessage#subscribeWithPooledObjects(Subscriber)} or its variants, the published elements\n+ * can be shared across {@link Subscriber}s. So do not manipulate the data unless you copy them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzQzNjM4OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/common/stream/StreamMessageDuplicator.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MDoyMlrOGuWOAw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MDoyMlrOGuWOAw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MTcxNQ==", "bodyText": "Ditto", "url": "https://github.com/line/armeria/pull/2875#discussion_r451251715", "createdAt": "2020-07-08T02:50:22Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/common/stream/StreamMessageDuplicator.java", "diffHunk": "@@ -45,9 +46,9 @@\n  * after all subscriptions are done. If you want to stop publishing and clean up the resources immediately,\n  * call {@link #abort()}. If you do none of these, memory leak might happen.</p>\n  *\n- * <p>If you subscribe to the {@linkplain #duplicate() duplicated stream message} with the\n- * {@link SubscriptionOption#WITH_POOLED_OBJECTS}, the published elements can be shared across\n- * {@link Subscriber}s. So do not manipulate the data unless you copy them.\n+ * <p>If you subscribe to the {@linkplain #duplicate() duplicated stream message} using the\n+ * {@link PooledStreamMessage#subscribeWithPooledObjects(Subscriber)} or its variants, the published elements\n+ * can be shared across {@link Subscriber}s. So do not manipulate the data unless you copy them.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 17}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzQzNzgwOnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/internal/client/SessionProtocolNegotiationCache.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MToxNlrOGuWO2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1NToxMFrOGuWTKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MTkzMQ==", "bodyText": "This class is actually meant for use by users as well. e.g. A user might want to check if a certain host has no support for H2.", "url": "https://github.com/line/armeria/pull/2875#discussion_r451251931", "createdAt": "2020-07-08T02:51:16Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/internal/client/SessionProtocolNegotiationCache.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * under the License.\n  */\n \n-package com.linecorp.armeria.client;\n+package com.linecorp.armeria.internal.client;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MzAzMw==", "bodyText": "Ah I see, Let me revert this.", "url": "https://github.com/line/armeria/pull/2875#discussion_r451253033", "createdAt": "2020-07-08T02:55:10Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/internal/client/SessionProtocolNegotiationCache.java", "diffHunk": "@@ -14,7 +14,7 @@\n  * under the License.\n  */\n \n-package com.linecorp.armeria.client;\n+package com.linecorp.armeria.internal.client;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MTkzMQ=="}, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjgxMzQzOTc3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/server/file/HttpFileAttributes.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MTo1N1rOGuWP5Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwMjo1MTo1N1rOGuWP5Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI1MjE5Nw==", "bodyText": "\ud83d\ude47", "url": "https://github.com/line/armeria/pull/2875#discussion_r451252197", "createdAt": "2020-07-08T02:51:57Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/server/file/HttpFileAttributes.java", "diffHunk": "@@ -28,7 +29,7 @@\n /**\n  * The attributes of an {@link HttpFile}.\n  *\n- * @see HttpFile#readAttributes()\n+ * @see HttpFile#readAttributes(Executor)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6eda002560625f2b2745d81f30aabab384751b52"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2483, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}