{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAyMTE3ODI3", "number": 3108, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwOToxNDowMFrOEs8ZgQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjo1MjowNFrOEtd-4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE1NTYyMzY5OnYy", "diffSide": "RIGHT", "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwOToxNDowMFrOHgdKVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QwOTo0NTozMVrOHgedQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc5NDI2Mg==", "bodyText": "nit:\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS} is used by default and it's not recommended to modify\n          \n          \n            \n                 * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS} milliseconds is used by default and it's not recommended to modify", "url": "https://github.com/line/armeria/pull/3108#discussion_r503794262", "createdAt": "2020-10-13T09:14:00Z", "author": {"login": "ikhoon"}, "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "diffHunk": "@@ -183,29 +184,46 @@ public EurekaEndpointGroupBuilder secureVipAddress(String secureVipAddress) {\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS}\n-     * is used by default and it's not recommended to modify this value. See\n+     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS}\n+     * milliseconds is used by default and it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n      */\n     public EurekaEndpointGroupBuilder registryFetchInterval(Duration registryFetchInterval) {\n         requireNonNull(registryFetchInterval, \"registryFetchInterval\");\n-        final long seconds = registryFetchInterval.getSeconds();\n-        checkArgument(seconds > 0, \"registryFetchInterval.getSeconds(): %s (expected: > 0)\", seconds);\n-        return registryFetchIntervalSeconds(seconds);\n+        checkArgument(!registryFetchInterval.isZero() &&\n+                      !registryFetchInterval.isNegative(),\n+                      \"registryFetchInterval: %s (expected: > 0)\",\n+                      registryFetchInterval);\n+        return registryFetchIntervalMillis(registryFetchInterval.toMillis());\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests in seconds.\n-     * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS} is used by default and it's not recommended to modify\n-     * this value. See\n+     * Sets the interval between fetching registry requests in seconds. {@code 30} is used by default and\n+     * it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n+     *\n+     * @deprecated Use {@link #registryFetchIntervalMillis(long)}.\n      */\n+    @Deprecated\n     public EurekaEndpointGroupBuilder registryFetchIntervalSeconds(long registryFetchIntervalSeconds) {\n         checkArgument(registryFetchIntervalSeconds > 0, \"registryFetchIntervalSeconds: %s (expected: > 0)\",\n                       registryFetchIntervalSeconds);\n-        this.registryFetchIntervalSeconds = registryFetchIntervalSeconds;\n+        return registryFetchIntervalMillis(TimeUnit.SECONDS.toMillis(registryFetchIntervalSeconds));\n+    }\n+\n+    /**\n+     * Sets the interval between fetching registry requests in milliseconds.\n+     * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS} is used by default and it's not recommended to modify", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f8036b9f88f06bbe04fed5334cca27224d304154"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzgxNTQ5MQ==", "bodyText": "I intentionally omitted it because I mentioned the value is in millis in the first sentence. Would it be better repeating it?", "url": "https://github.com/line/armeria/pull/3108#discussion_r503815491", "createdAt": "2020-10-13T09:45:31Z", "author": {"login": "trustin"}, "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "diffHunk": "@@ -183,29 +184,46 @@ public EurekaEndpointGroupBuilder secureVipAddress(String secureVipAddress) {\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS}\n-     * is used by default and it's not recommended to modify this value. See\n+     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS}\n+     * milliseconds is used by default and it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n      */\n     public EurekaEndpointGroupBuilder registryFetchInterval(Duration registryFetchInterval) {\n         requireNonNull(registryFetchInterval, \"registryFetchInterval\");\n-        final long seconds = registryFetchInterval.getSeconds();\n-        checkArgument(seconds > 0, \"registryFetchInterval.getSeconds(): %s (expected: > 0)\", seconds);\n-        return registryFetchIntervalSeconds(seconds);\n+        checkArgument(!registryFetchInterval.isZero() &&\n+                      !registryFetchInterval.isNegative(),\n+                      \"registryFetchInterval: %s (expected: > 0)\",\n+                      registryFetchInterval);\n+        return registryFetchIntervalMillis(registryFetchInterval.toMillis());\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests in seconds.\n-     * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS} is used by default and it's not recommended to modify\n-     * this value. See\n+     * Sets the interval between fetching registry requests in seconds. {@code 30} is used by default and\n+     * it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n+     *\n+     * @deprecated Use {@link #registryFetchIntervalMillis(long)}.\n      */\n+    @Deprecated\n     public EurekaEndpointGroupBuilder registryFetchIntervalSeconds(long registryFetchIntervalSeconds) {\n         checkArgument(registryFetchIntervalSeconds > 0, \"registryFetchIntervalSeconds: %s (expected: > 0)\",\n                       registryFetchIntervalSeconds);\n-        this.registryFetchIntervalSeconds = registryFetchIntervalSeconds;\n+        return registryFetchIntervalMillis(TimeUnit.SECONDS.toMillis(registryFetchIntervalSeconds));\n+    }\n+\n+    /**\n+     * Sets the interval between fetching registry requests in milliseconds.\n+     * {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS} is used by default and it's not recommended to modify", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzc5NDI2Mg=="}, "originalCommit": {"oid": "f8036b9f88f06bbe04fed5334cca27224d304154"}, "originalPosition": 70}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MTEyNjA4OnYy", "diffSide": "RIGHT", "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjo1MjowNFrOHhRb-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxMjo1Mzo1MlrOHhRgWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1MDc0Ng==", "bodyText": "How about rounding up this value as well?", "url": "https://github.com/line/armeria/pull/3108#discussion_r504650746", "createdAt": "2020-10-14T12:52:04Z", "author": {"login": "minwoox"}, "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "diffHunk": "@@ -183,29 +184,46 @@ public EurekaEndpointGroupBuilder secureVipAddress(String secureVipAddress) {\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS}\n-     * is used by default and it's not recommended to modify this value. See\n+     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS}\n+     * milliseconds is used by default and it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n      */\n     public EurekaEndpointGroupBuilder registryFetchInterval(Duration registryFetchInterval) {\n         requireNonNull(registryFetchInterval, \"registryFetchInterval\");\n-        final long seconds = registryFetchInterval.getSeconds();\n-        checkArgument(seconds > 0, \"registryFetchInterval.getSeconds(): %s (expected: > 0)\", seconds);\n-        return registryFetchIntervalSeconds(seconds);\n+        checkArgument(!registryFetchInterval.isZero() &&\n+                      !registryFetchInterval.isNegative(),\n+                      \"registryFetchInterval: %s (expected: > 0)\",\n+                      registryFetchInterval);\n+        return registryFetchIntervalMillis(registryFetchInterval.toMillis());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ba1e7c380712f31d4290ca792b42f406dda894db"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1MTg2NQ==", "bodyText": "Forget about this comment. \ud83d\ude05", "url": "https://github.com/line/armeria/pull/3108#discussion_r504651865", "createdAt": "2020-10-14T12:53:52Z", "author": {"login": "minwoox"}, "path": "eureka/src/main/java/com/linecorp/armeria/client/eureka/EurekaEndpointGroupBuilder.java", "diffHunk": "@@ -183,29 +184,46 @@ public EurekaEndpointGroupBuilder secureVipAddress(String secureVipAddress) {\n     }\n \n     /**\n-     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_SECONDS}\n-     * is used by default and it's not recommended to modify this value. See\n+     * Sets the interval between fetching registry requests. {@value #DEFAULT_REGISTRY_FETCH_INTERVAL_MILLIS}\n+     * milliseconds is used by default and it's not recommended to modify this value. See\n      * <a href=\"https://github.com/Netflix/eureka/wiki/Understanding-eureka-client-server-communication#fetch-registry\">\n      * fetch-registry</a>.\n      */\n     public EurekaEndpointGroupBuilder registryFetchInterval(Duration registryFetchInterval) {\n         requireNonNull(registryFetchInterval, \"registryFetchInterval\");\n-        final long seconds = registryFetchInterval.getSeconds();\n-        checkArgument(seconds > 0, \"registryFetchInterval.getSeconds(): %s (expected: > 0)\", seconds);\n-        return registryFetchIntervalSeconds(seconds);\n+        checkArgument(!registryFetchInterval.isZero() &&\n+                      !registryFetchInterval.isNegative(),\n+                      \"registryFetchInterval: %s (expected: > 0)\",\n+                      registryFetchInterval);\n+        return registryFetchIntervalMillis(registryFetchInterval.toMillis());", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDY1MDc0Ng=="}, "originalCommit": {"oid": "ba1e7c380712f31d4290ca792b42f406dda894db"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1942, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}