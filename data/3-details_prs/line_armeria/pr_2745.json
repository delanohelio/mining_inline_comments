{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIyOTczODc4", "number": 2745, "title": "Add the release notes for 0.99.6", "bodyText": "", "createdAt": "2020-05-26T04:01:44Z", "url": "https://github.com/line/armeria/pull/2745", "merged": true, "mergeCommit": {"oid": "e49b53bb0060566af3758af614ffb644b405f647"}, "closed": true, "closedAt": "2020-05-26T04:46:38Z", "author": {"login": "minwoox"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABck8kQuAH2gAyNDIyOTczODc4Ojg4MjQ2NzA1MTZmMzQxMmNmMDlkODgxMmJjZGI1Yjk4MTQyMmVlNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABck86cpAFqTQxNzk2MTgwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/8824670516f3412cf09d8812bcdb5b981422ee54", "committedDate": "2020-05-26T04:01:16Z", "message": "Add the release notes for 0.99.6"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c81723d1d2d91ba524377d850142a6e83829619c", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/c81723d1d2d91ba524377d850142a6e83829619c", "committedDate": "2020-05-26T04:10:57Z", "message": "Update example"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTU3MzI4", "url": "https://github.com/line/armeria/pull/2745#pullrequestreview-417957328", "createdAt": "2020-05-26T04:07:03Z", "commit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "state": "COMMENTED", "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNDowNzowM1rOGaN-sg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNDoxMzo1M1rOGaOEDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NTIwMg==", "bodyText": "lets -> let", "url": "https://github.com/line/armeria/pull/2745#discussion_r430145202", "createdAt": "2020-05-26T04:07:03Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NTYyNw==", "bodyText": "Move the comment up so that the line is not too long? That being said, please check the release note page code snippets do not overflow horizontally.", "url": "https://github.com/line/armeria/pull/2745#discussion_r430145627", "createdAt": "2020-05-26T04:09:18Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NTcyMA==", "bodyText": "type://DocService", "url": "https://github.com/line/armeria/pull/2745#discussion_r430145720", "createdAt": "2020-05-26T04:09:49Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NjA1MA==", "bodyText": "recommend -> recommended\nIt is recommended to use ..., though.", "url": "https://github.com/line/armeria/pull/2745#discussion_r430146050", "createdAt": "2020-05-26T04:11:31Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697\n+- You can now easily sanitize headers and content using <type://RegexBasedSanitizer>. #1810 #2721\n+\n+## \ud83d\udcc8 Improvements\n+\n+- You can now easily call `ownAttr()` from <type://RequestContext>. #2727\n+  - You don't have to check if the context is <type://ClientRequestContext> or not anymore.\n+  - `root()` and `ownAttrs()` are pulled up as well.\n+\n+## \ud83d\udee0\ufe0f Bug fixes\n+\n+- You can now use Armeria 0.99.6 with Micrometer 1.3.9 (Using Micrometer 1.5.1 is recommend though). #2742", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 66}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NjE3OA==", "bodyText": "type://DocService", "url": "https://github.com/line/armeria/pull/2745#discussion_r430146178", "createdAt": "2020-05-26T04:12:16Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697\n+- You can now easily sanitize headers and content using <type://RegexBasedSanitizer>. #1810 #2721\n+\n+## \ud83d\udcc8 Improvements\n+\n+- You can now easily call `ownAttr()` from <type://RequestContext>. #2727\n+  - You don't have to check if the context is <type://ClientRequestContext> or not anymore.\n+  - `root()` and `ownAttrs()` are pulled up as well.\n+\n+## \ud83d\udee0\ufe0f Bug fixes\n+\n+- You can now use Armeria 0.99.6 with Micrometer 1.3.9 (Using Micrometer 1.5.1 is recommend though). #2742\n+- You can now retry even when the current <type://EndpointGroup> is empty. #2736\n+- You can send a request by setting the authority and scheme header to <type://RequestHeaders>. #2730 #2734\n+- You no longer see `&lt;zero-length response&gt;` in doc service anymore. #2732", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NjQwOQ==", "bodyText": "while building ... -> when Armeria is shaded.", "url": "https://github.com/line/armeria/pull/2745#discussion_r430146409", "createdAt": "2020-05-26T04:13:01Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697\n+- You can now easily sanitize headers and content using <type://RegexBasedSanitizer>. #1810 #2721\n+\n+## \ud83d\udcc8 Improvements\n+\n+- You can now easily call `ownAttr()` from <type://RequestContext>. #2727\n+  - You don't have to check if the context is <type://ClientRequestContext> or not anymore.\n+  - `root()` and `ownAttrs()` are pulled up as well.\n+\n+## \ud83d\udee0\ufe0f Bug fixes\n+\n+- You can now use Armeria 0.99.6 with Micrometer 1.3.9 (Using Micrometer 1.5.1 is recommend though). #2742\n+- You can now retry even when the current <type://EndpointGroup> is empty. #2736\n+- You can send a request by setting the authority and scheme header to <type://RequestHeaders>. #2730 #2734\n+- You no longer see `&lt;zero-length response&gt;` in doc service anymore. #2732\n+- A `NullPointerException` is not raised anymore due to the dependency order while building with Armeria.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 70}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NjU3Mw==", "bodyText": "Unicode arrows?", "url": "https://github.com/line/armeria/pull/2745#discussion_r430146573", "createdAt": "2020-05-26T04:13:53Z", "author": {"login": "trustin"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697\n+- You can now easily sanitize headers and content using <type://RegexBasedSanitizer>. #1810 #2721\n+\n+## \ud83d\udcc8 Improvements\n+\n+- You can now easily call `ownAttr()` from <type://RequestContext>. #2727\n+  - You don't have to check if the context is <type://ClientRequestContext> or not anymore.\n+  - `root()` and `ownAttrs()` are pulled up as well.\n+\n+## \ud83d\udee0\ufe0f Bug fixes\n+\n+- You can now use Armeria 0.99.6 with Micrometer 1.3.9 (Using Micrometer 1.5.1 is recommend though). #2742\n+- You can now retry even when the current <type://EndpointGroup> is empty. #2736\n+- You can send a request by setting the authority and scheme header to <type://RequestHeaders>. #2730 #2734\n+- You no longer see `&lt;zero-length response&gt;` in doc service anymore. #2732\n+- A `NullPointerException` is not raised anymore due to the dependency order while building with Armeria.\n+  #2731 #2735\n+\n+## \u2622\ufe0f Breaking changes\n+\n+- `RetryStrategy` and `RetryStrategyWithContent` are gone in favor of\n+  <type://RetryRule> and <type://RetryRuleWithContent>. #2726\n+- `CircuitBreakerStrategy` and `CircuitBreakerStrategyWithContent` are gone in favor of\n+  <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent>. #2726\n+- `EndpointSelector.select()` (and thus EndpointGroup.select() as well) now returns `null`\n+  instead of throwing an <type://EmptyEndpointGroupException>. #2736\n+- The method signature of `ClientFactory.acquireEventLoop()` and `EventLoopScheduler.acquire()`\n+  have been changed. #2736\n+\n+## \u26d3 Dependencies\n+\n+- Brave 5.11.2 -> 5.12.3", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b3d5e7290cabb3e0cda1ee25c7090ae4acbbdf13", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/b3d5e7290cabb3e0cda1ee25c7090ae4acbbdf13", "committedDate": "2020-05-26T04:14:08Z", "message": "fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3d6bbaa22587c13420f6e8a95cd8c6d3b2144366", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/3d6bbaa22587c13420f6e8a95cd8c6d3b2144366", "committedDate": "2020-05-26T04:19:23Z", "message": "Address comments by @trustin"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTYwMzY4", "url": "https://github.com/line/armeria/pull/2745#pullrequestreview-417960368", "createdAt": "2020-05-26T04:19:47Z", "commit": {"oid": "b3d5e7290cabb3e0cda1ee25c7090ae4acbbdf13"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNDoxOTo0N1rOGaOIkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNDoxOTo0N1rOGaOIkA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NzcyOA==", "bodyText": "Oops, didn't notice that. \ud83d\ude05", "url": "https://github.com/line/armeria/pull/2745#discussion_r430147728", "createdAt": "2020-05-26T04:19:47Z", "author": {"login": "minwoox"}, "path": "site/src/pages/release-notes/0.99.6.mdx", "diffHunk": "@@ -0,0 +1,117 @@\n+## \ud83c\udf1f New features\n+\n+- New <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent> API lets you define a complex\n+  circuit breaking policy conveniently. #2726\n+  ```java\n+  CircuitBreakerRule myRule =\n+      CircuitBreakerRule.of(\n+          // A failure if an Exception is raised.\n+          CircuitBreakerRule.onException(),\n+          // Neither a success nor a failure because the request has not been handled by the server.\n+          CircuitBreakerRule.builder()\n+                            .onUnprocessed()\n+                            .thenIgnore(),\n+          // A failure if the response is 5xx.\n+          CircuitBreakerRule.onServerErrorStatus(),\n+          // A success if the response is 2xx.\n+          CircuitBreakerRule.builder()\n+                            .onStatusClass(HttpStatusClass.SUCCESS)\n+                            .thenSuccess(),\n+          // Neither a success nor a failure. Do not take this response into account.\n+          CircuitBreakerRule.builder().thenIgnore());\n+  ```\n+- You can now easily bind an MDC property to a <type://RequestContext> and log it using a logging framework.\n+  #2634 #2724 #2729\n+  ```java\n+  ServiceRequestContext sctx = ...;\n+  try (SafeCloseable ignored = sctx.push()) {\n+      RequestScopedMdc.put(sctx, \"transactionId\", \"1234\");\n+\n+      ClientRequestContext cctx = ...;\n+      try (SafeCloseable ignored2 = cctx.push()) {\n+          assert MDC.get(\"transactionId\").equals(\"1234\");\n+      }\n+  }\n+  ```\n+- You can now install a custom hook to <type://RequestContextStorage> in runtime, usually at startup time. #2723\n+  ```java\n+  RequestContextStorage.hook(delegate -> new RequestContextStorageWrapper(delegate) {\n+      @Nullable\n+      @Override\n+      public <T extends RequestContext> T push(RequestContext toPush) {\n+          MDC.put(\"foo\", toPush.attr(FOO)); // Usually, you can just use RequestScopedMdc for this purpose.\n+          return super.push(toPush);\n+      }\n+\n+      @Override\n+      public void pop(RequestContext current, @Nullable RequestContext toRestore) {\n+          MDC.remove(\"foo\");\n+          super.pop(current, toRestore);\n+      }\n+\n+      ...\n+  }\n+  ```\n+- You can now set method and parameter descriptions for annotated services in doc service using Javadoc. #2697\n+- You can now easily sanitize headers and content using <type://RegexBasedSanitizer>. #1810 #2721\n+\n+## \ud83d\udcc8 Improvements\n+\n+- You can now easily call `ownAttr()` from <type://RequestContext>. #2727\n+  - You don't have to check if the context is <type://ClientRequestContext> or not anymore.\n+  - `root()` and `ownAttrs()` are pulled up as well.\n+\n+## \ud83d\udee0\ufe0f Bug fixes\n+\n+- You can now use Armeria 0.99.6 with Micrometer 1.3.9 (Using Micrometer 1.5.1 is recommend though). #2742\n+- You can now retry even when the current <type://EndpointGroup> is empty. #2736\n+- You can send a request by setting the authority and scheme header to <type://RequestHeaders>. #2730 #2734\n+- You no longer see `&lt;zero-length response&gt;` in doc service anymore. #2732\n+- A `NullPointerException` is not raised anymore due to the dependency order while building with Armeria.\n+  #2731 #2735\n+\n+## \u2622\ufe0f Breaking changes\n+\n+- `RetryStrategy` and `RetryStrategyWithContent` are gone in favor of\n+  <type://RetryRule> and <type://RetryRuleWithContent>. #2726\n+- `CircuitBreakerStrategy` and `CircuitBreakerStrategyWithContent` are gone in favor of\n+  <type://CircuitBreakerRule> and <type://CircuitBreakerRuleWithContent>. #2726\n+- `EndpointSelector.select()` (and thus EndpointGroup.select() as well) now returns `null`\n+  instead of throwing an <type://EmptyEndpointGroupException>. #2736\n+- The method signature of `ClientFactory.acquireEventLoop()` and `EventLoopScheduler.acquire()`\n+  have been changed. #2736\n+\n+## \u26d3 Dependencies\n+\n+- Brave 5.11.2 -> 5.12.3", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE0NjU3Mw=="}, "originalCommit": {"oid": "8824670516f3412cf09d8812bcdb5b981422ee54"}, "originalPosition": 86}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e3a3ade50e1e4637adf76914d532ba19e35ce58d", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/e3a3ade50e1e4637adf76914d532ba19e35ce58d", "committedDate": "2020-05-26T04:23:32Z", "message": "Address comments by @ikhoon"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTYxNTE5", "url": "https://github.com/line/armeria/pull/2745#pullrequestreview-417961519", "createdAt": "2020-05-26T04:24:24Z", "commit": {"oid": "e3a3ade50e1e4637adf76914d532ba19e35ce58d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a4e00a28b338e1fcab95d499c1af4f5cf2a7f3a", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/6a4e00a28b338e1fcab95d499c1af4f5cf2a7f3a", "committedDate": "2020-05-26T04:24:52Z", "message": "Revert \"Address comments by @ikhoon\"\n\nThis reverts commit e3a3ade50e1e4637adf76914d532ba19e35ce58d."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3OTYxODA0", "url": "https://github.com/line/armeria/pull/2745#pullrequestreview-417961804", "createdAt": "2020-05-26T04:25:30Z", "commit": {"oid": "6a4e00a28b338e1fcab95d499c1af4f5cf2a7f3a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 562, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}