{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU5MDAxMjEy", "number": 2367, "title": "Follow Micrometer's naming convention", "bodyText": "Co-authored-by: Per Lundberg perlun@gmail.com\nMotivation:\nThe Micrometer naming conventions (http://micrometer.io/docs/concepts#_naming_meters)\nsuggest that dotted notation (foo.bar.baz) should be used when naming\nmeters and tags. This has the advantage of letting different Micrometer\nmonitoring implementations be able to convert it to the naming\nconvention which is native for it (e.g. JMX, Prometheus etc).\nModifications:\n\nSwitch to Micrometer's naming convention everywhere.\nAdd a new flag com.linecorp.armeria.useLegacyMeterNames which\nswitches back to the old meter names.\nDeprecate MoreNamingConventions\n\nThe NamingConventions returned by MoreNamingConventions now return\nMicrometer's default NamingConvention for corresponding backend.\nMoreNamingConventions.configure() is now no-op.\n\n\nMiscellaneous:\n\n{Dropwizard,Prometheus}MeterRegistries.configureRegistry() does\nnot override the pause detector anymore because Micrometer now uses\nNoPauseDetector by default.\n\n\n\nResult:\n\nArmeria is now a good citizen of Micrometer ecosystem.\nUsers have time to migrate to the new naming thanks to the new flag.", "createdAt": "2020-01-03T14:11:04Z", "url": "https://github.com/line/armeria/pull/2367", "merged": true, "mergeCommit": {"oid": "8e487fb366b9066772bacc92c1d344284e9a3f0d"}, "closed": true, "closedAt": "2020-01-06T10:38:32Z", "author": {"login": "trustin"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2u1yCgH2gAyMzU5MDAxMjEyOjU2NWE4ODcxNTk1ZjA0YTAwNDNlZTViZmEyMDU4YTkwZjUyMWIxNmQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb3ppZIgFqTMzODU3MTMyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "565a8871595f04a0043ee5bfa2058a90f521b16d", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/565a8871595f04a0043ee5bfa2058a90f521b16d", "committedDate": "2020-01-03T14:01:13Z", "message": "Follow Micrometer's naming convention\n\nCo-authored-by: Per Lundberg <perlun@gmail.com>\n\nMotivation:\n\nThe Micrometer naming conventions (http://micrometer.io/docs/concepts#_naming_meters)\nsuggest that dotted notation (`foo.bar.baz`) should be used when naming\nmeters and tags. This has the advantage of letting different Micrometer\nmonitoring implementations be able to convert it to the naming\nconvention which is native for it (e.g. JMX, Prometheus etc).\n\nModifications:\n\n- Switch to Micrometer's naming convention everywhere.\n- Add a new flag `com.linecorp.armeria.useLegacyMeterNames` which\n  switches back to the old meter names.\n- Deprecate `MoreNamingConventions`\n  - The `NamingConvention`s returned by `MoreNamingConventions` now return\n    Micrometer's default `NamingConvention` for corresponding backend.\n  - `MoreNamingConventions.configure()` is now no-op.\n- Miscellaneous:\n  - `{Dropwizard,Prometheus}MeterRegistries.configureRegistry()` does\n    not override the pause detector anymore because Micrometer now uses\n    `NoPauseDetector` by default.\n\nResult:\n\n- Armeria is now a good citizen of Micrometer ecosystem.\n- Users have time to migrate to the new naming thanks to the new flag."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e988e45ba45bd79bc8517b68d12e8d83cbe1b364", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/e988e45ba45bd79bc8517b68d12e8d83cbe1b364", "committedDate": "2020-01-03T14:15:37Z", "message": "Fix Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d5fb7cfb82da03d2f29a887ddeae59ce59a7260a", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/d5fb7cfb82da03d2f29a887ddeae59ce59a7260a", "committedDate": "2020-01-03T14:39:54Z", "message": "Fix test failures"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/2fa1fe589279da344f087741301f9ee6b25f2a4f", "committedDate": "2020-01-03T14:46:14Z", "message": "More fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MTQ0NzA1", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338144705", "createdAt": "2020-01-03T15:54:29Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4Mzc5MTgw", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338379180", "createdAt": "2020-01-05T03:19:42Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MzgwOTQ2", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338380946", "createdAt": "2020-01-05T04:59:07Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NTM2NzAy", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338536702", "createdAt": "2020-01-06T09:19:21Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NTY2NzM2", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338566736", "createdAt": "2020-01-06T10:22:29Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMDoyMjoyOVrOFaaIIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wNlQxMDoyMjoyOVrOFaaIIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MzIzNTM2MA==", "bodyText": "\ud83d\udc4d/cc @minwoox FYI micrometer-metrics/micrometer-docs@53698ab", "url": "https://github.com/line/armeria/pull/2367#discussion_r363235360", "createdAt": "2020-01-06T10:22:29Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/common/metric/DropwizardMeterRegistries.java", "diffHunk": "@@ -159,8 +158,8 @@ public MeterFilterReply accept(Meter.Id id) {\n                 return MeterFilterReply.NEUTRAL;\n             }\n         });\n+\n         meterRegistry.config().namingConvention(MoreNamingConventions.dropwizard());\n-        meterRegistry.config().pauseDetector(new NoPauseDetector());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4NTcxMzIx", "url": "https://github.com/line/armeria/pull/2367#pullrequestreview-338571321", "createdAt": "2020-01-06T10:32:05Z", "commit": {"oid": "2fa1fe589279da344f087741301f9ee6b25f2a4f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 784, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}