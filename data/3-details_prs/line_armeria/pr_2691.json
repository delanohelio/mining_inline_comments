{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE0MTAyNDg4", "number": 2691, "title": "Fix for issue #2688 (armeria-jetty: ArmeriaConnector - NPE when DEBUG logging enabled)", "bodyText": "Prevented NPE in ArmeriaConnector during Jetty server startup with DEBUG logging enabled. Added a check for \"armeriaServer\" instance being NULL and return some mockup values.", "createdAt": "2020-05-06T13:38:13Z", "url": "https://github.com/line/armeria/pull/2691", "merged": true, "mergeCommit": {"oid": "29bb9bb359b8da4d9c5de58015a2b5e886dccc6d"}, "closed": true, "closedAt": "2020-05-12T06:19:01Z", "author": {"login": "max904-github"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceox0tAH2gAyNDE0MTAyNDg4OmMzZGQ2YTQ5OWM5YzM0YjBlNjkxYzg1Y2JkNmVhNWViZmI5Y2RkMDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgeEefAFqTQwOTcyNTUxNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c3dd6a499c9c34b0e691c85cbd6ea5ebfb9cdd03", "author": {"user": {"login": "max904-github", "name": null}}, "url": "https://github.com/line/armeria/commit/c3dd6a499c9c34b0e691c85cbd6ea5ebfb9cdd03", "committedDate": "2020-05-06T13:34:26Z", "message": "Fix for issue #2688: Prevented NPE in ArmeriaConnector during Jetty server startup with DEBUG logging enabled. Added a check for \"armeriaServer\" instance being NULL and return some mockup values."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MjIxMDAy", "url": "https://github.com/line/armeria/pull/2691#pullrequestreview-407221002", "createdAt": "2020-05-07T07:40:14Z", "commit": {"oid": "c3dd6a499c9c34b0e691c85cbd6ea5ebfb9cdd03"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwNzo0MDoxNFrOGRyNQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwNzo0MDozNVrOGRyN_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTMwMTU3MA==", "bodyText": "You can return SystemInfo.hostname().", "url": "https://github.com/line/armeria/pull/2691#discussion_r421301570", "createdAt": "2020-05-07T07:40:14Z", "author": {"login": "trustin"}, "path": "jetty/src/main/java/com/linecorp/armeria/server/jetty/ArmeriaConnector.java", "diffHunk": "@@ -61,6 +63,17 @@ public Object getTransport() {\n \n     @Override\n     public String getHost() {\n+        //noinspection ConstantConditions\n+        if (armeriaServer == null) {\n+            // This method could be called during ServerConnector construction (for diagnostic purposes)\n+            // BEFORE {@code armeriaServer} gets assigned. In such case case,\n+            // return some reasonable mockup value in order to prevent NPE.\n+            try {\n+                return InetAddress.getLocalHost().getHostName();\n+            } catch (UnknownHostException e) {\n+                return \"\";\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3dd6a499c9c34b0e691c85cbd6ea5ebfb9cdd03"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTMwMTc1OA==", "bodyText": "2020 \ud83d\ude09", "url": "https://github.com/line/armeria/pull/2691#discussion_r421301758", "createdAt": "2020-05-07T07:40:35Z", "author": {"login": "trustin"}, "path": "jetty/src/test/java/com/linecorp/armeria/server/jetty/JettyServiceStartupTest.java", "diffHunk": "@@ -0,0 +1,138 @@\n+/*\n+ * Copyright 2016 LINE Corporation", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3dd6a499c9c34b0e691c85cbd6ea5ebfb9cdd03"}, "originalPosition": 2}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc95ae76af07ccacfe420509928e4d1764b535b8", "author": {"user": {"login": "max904-github", "name": null}}, "url": "https://github.com/line/armeria/commit/dc95ae76af07ccacfe420509928e4d1764b535b8", "committedDate": "2020-05-11T13:28:13Z", "message": "- review comments by @trustin (InetAddress.getLocalHost().getHostName() -> SystemInfo.hostname())\n- fixed JUnit failures at JettyServiceStartupTest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjU5NjM1", "url": "https://github.com/line/armeria/pull/2691#pullrequestreview-409659635", "createdAt": "2020-05-12T02:39:04Z", "commit": {"oid": "dc95ae76af07ccacfe420509928e4d1764b535b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzE1NTk2", "url": "https://github.com/line/armeria/pull/2691#pullrequestreview-409715596", "createdAt": "2020-05-12T05:49:48Z", "commit": {"oid": "dc95ae76af07ccacfe420509928e4d1764b535b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NzI1NTE2", "url": "https://github.com/line/armeria/pull/2691#pullrequestreview-409725516", "createdAt": "2020-05-12T06:13:42Z", "commit": {"oid": "dc95ae76af07ccacfe420509928e4d1764b535b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 450, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}