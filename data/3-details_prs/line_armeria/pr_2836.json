{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5OTEzOTAx", "number": 2836, "title": "Wrap `DnsTimeoutException` with `UnprocessedRequestException`", "bodyText": "Motivation:\nWe can wrap DnsTimeoutException with UnprocessedRequestException because the request is unprocessed.\nModifications:\n\nWrap DnsTimeoutException with UnprocessedRequestException.\nWrap other exceptions in HttpClientDelegate with UnprocessedRequestException.\n(Breaking) UnprocessedRequestException(String, Throwable) constructor is gone.\nUnprocessedRequestException(Throwable) constructor is deprecated.\n\nUse UnprocessedRequestException.of(Throwable).\n\n\n\nResult:\n\nYou can retry when DnsTimeoutException is raised using RetryRule.onUnprocessed().\n(Breaking) UnprocessedRequestException(String, Throwable) constructor is gone.\n(Deprecated) UnprocessedRequestException(Throwable) constructor is deprecated.\n\nUse UnprocessedRequestException.of(Throwable).", "createdAt": "2020-06-25T09:58:32Z", "url": "https://github.com/line/armeria/pull/2836", "merged": true, "mergeCommit": {"oid": "e5cea5e9ba7afc6a3b2c38d0663b8b1e3334ad37"}, "closed": true, "closedAt": "2020-06-26T10:10:35Z", "author": {"login": "minwoox"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcurpZcAH2gAyNDM5OTEzOTAxOjI4ODhlNTVlNmFhOGRjYWNmMTVmMTg5MmRkYjQ0MjQ2M2NkMWUyNjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcu_13NgBqjM0ODU4NTM3OTE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2888e55e6aa8dcacf15f1892ddb442463cd1e262", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/2888e55e6aa8dcacf15f1892ddb442463cd1e262", "committedDate": "2020-06-25T09:57:44Z", "message": "Wrap `DnsTimeoutException` with `UnprocessedRequestException`\nMotivation:\nWe can wrap `DnsTimeoutException` with `UnprocessedRequestException` because the request is unprocessed.\n\nModifications:\n- Wrap `DnsTimeoutException` with `UnprocessedRequestException`.\n- Wrap other exceptions in `HttpClientDelegate` with `UnprocessedRequestException`.\n- (Breaking) `UnprocessedRequestException(String, Throwable)` constructor is gone.\n- `UnprocessedRequestException(Throwable)` constructor is deprecated.\n  - Use `UnprocessedRequestException.wrap(Throwable)`.\n\nResult:\n- You can retry when `DnsTimeoutException` is raised using `RetryRule.onUnprocessed()`.\n- (Breaking) `UnprocessedRequestException(String, Throwable)` constructor is gone.\n- (Deprecated) `UnprocessedRequestException(Throwable)` constructor is deprecated.\n  - Use `UnprocessedRequestException.wrap(Throwable)`."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM3OTkzMTk4", "url": "https://github.com/line/armeria/pull/2836#pullrequestreview-437993198", "createdAt": "2020-06-26T03:37:04Z", "commit": {"oid": "2888e55e6aa8dcacf15f1892ddb442463cd1e262"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwMzozNzowNFrOGpSqKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwMzozNzowNFrOGpSqKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTk1MDUwNA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/line/armeria/pull/2836#discussion_r445950504", "createdAt": "2020-06-26T03:37:04Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/client/HttpRequestSubscriber.java", "diffHunk": "@@ -131,12 +131,7 @@ public void operationComplete(ChannelFuture future) throws Exception {\n             }\n \n             if (!loggedRequestFirstBytesTransferred) {\n-                final Throwable cause = future.cause();\n-                if (cause instanceof UnprocessedRequestException) {\n-                    fail(cause);\n-                } else {\n-                    fail(new UnprocessedRequestException(cause));\n-                }\n+                fail(UnprocessedRequestException.wrap(future.cause()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2888e55e6aa8dcacf15f1892ddb442463cd1e262"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9688bb45d457cb6b68674ee758cf9779b7ba89b", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/a9688bb45d457cb6b68674ee758cf9779b7ba89b", "committedDate": "2020-06-26T08:52:15Z", "message": "Use of"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MTQwNzY2", "url": "https://github.com/line/armeria/pull/2836#pullrequestreview-438140766", "createdAt": "2020-06-26T09:14:40Z", "commit": {"oid": "a9688bb45d457cb6b68674ee758cf9779b7ba89b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029cecaf98f4b6935fd223219190d712179a895c", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/029cecaf98f4b6935fd223219190d712179a895c", "committedDate": "2020-06-26T09:29:17Z", "message": "Merge branch 'master' into wrap_Unprocessed"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9df9494b650781e654957b9668f073572015a4cf", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/9df9494b650781e654957b9668f073572015a4cf", "committedDate": "2020-06-26T09:16:23Z", "message": "Checkstyle"}, "afterCommit": {"oid": "029cecaf98f4b6935fd223219190d712179a895c", "author": {"user": {"login": "minwoox", "name": "minux"}}, "url": "https://github.com/line/armeria/commit/029cecaf98f4b6935fd223219190d712179a895c", "committedDate": "2020-06-26T09:29:17Z", "message": "Merge branch 'master' into wrap_Unprocessed"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 277, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}