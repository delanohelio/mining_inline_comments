{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNjc2ODU5", "number": 3233, "title": "Add `Http2Exception: Stream x does not exist` as an expected exception", "bodyText": "Motivation:\nIf a client sends data after a GOAWAY frame is sent by a remote peer,\nNetty disgards the received data and raises Http2Exception: Stream x does not exist.\nIt is an expected behavior and does not leave a warn message to notify users.\nModifications:\n\nAdd  Http2Exception: Stream x does not exist to expected exceptions\n\nResult:\n\nYou no longer see Http2Exception: Stream x does not exist error message anymore.\nFixes #3208", "createdAt": "2020-12-17T07:51:20Z", "url": "https://github.com/line/armeria/pull/3233", "merged": true, "mergeCommit": {"oid": "3f412ffa6fefdddfe96e5b294a223a8a4e511c8a"}, "closed": true, "closedAt": "2020-12-24T04:39:08Z", "author": {"login": "ikhoon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm-jxwgH2gAyNTQxNjc2ODU5OjFkN2E0MTkzNzA0YjVmYzk2NDdhMGQ3YmI1MTQ4NDM0YWJhYmVjYTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpMKcgAFqTU1ODMzMjAzMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1d7a4193704b5fc9647a0d7bb5148434ababeca2", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/1d7a4193704b5fc9647a0d7bb5148434ababeca2", "committedDate": "2020-12-17T07:39:33Z", "message": "Add `Http2Exception: Stream x does not exist` as an expected exception\n\nMotivation:\n\nIf a client sends data after a GOAWAY frame is sent by a remote peer,\nNetty disgards the received data and raises `Http2Exception: Stream x does not exist`.\nIt is an expected behavior and does not leave a warn message to nofity users.\n\nModifications:\n\n- Add  `Http2Exception: Stream x does not exist` to expected exceptions\n\nResult:\n\n- You no longer see `Http2Exception: Stream x does not exist` error message anymore.\n- Fixes #3208"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1MzI3NjYz", "url": "https://github.com/line/armeria/pull/3233#pullrequestreview-555327663", "createdAt": "2020-12-18T09:27:10Z", "commit": {"oid": "1d7a4193704b5fc9647a0d7bb5148434ababeca2"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOToyNzoxMFrOIIbN-Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQwOToyNzoxMFrOIIbN-Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTcwNTQ2NQ==", "bodyText": "Question: Do we need to check if the error is PROTOCOL_ERROR?\nCan we combine two patterns?", "url": "https://github.com/line/armeria/pull/3233#discussion_r545705465", "createdAt": "2020-12-18T09:27:10Z", "author": {"login": "minwoox"}, "path": "core/src/main/java/com/linecorp/armeria/common/util/Exceptions.java", "diffHunk": "@@ -167,9 +171,17 @@ public static boolean isExpected(Throwable cause) {\n                 return true;\n             }\n \n-            if (cause instanceof Http2Exception && IGNORABLE_HTTP2_ERROR_MESSAGE.matcher(msg).find()) {\n-                // Can happen when disconnected prematurely.\n-                return true;\n+            if (cause instanceof Http2Exception) {\n+                if (IGNORABLE_HTTP2_ERROR_MESSAGE_STREAM_CLOSED.matcher(msg).find()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d7a4193704b5fc9647a0d7bb5148434ababeca2"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9b9d132eb42b5a7549ed1f87e984db49b0b89fd7", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/9b9d132eb42b5a7549ed1f87e984db49b0b89fd7", "committedDate": "2020-12-23T04:01:46Z", "message": "Address comments by @trustin"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e7a97a782c01f4bbcfea46e2fc61f9c211ce755", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/6e7a97a782c01f4bbcfea46e2fc61f9c211ce755", "committedDate": "2020-12-23T04:05:15Z", "message": "Revert ExceptionsTest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f84cd746ddfe757b3623fd5a80c358ac0571308", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/8f84cd746ddfe757b3623fd5a80c358ac0571308", "committedDate": "2020-12-23T07:44:47Z", "message": "Checkstyle"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "09ec0b2debbac214388f8d46d4087a6795a383f3", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/09ec0b2debbac214388f8d46d4087a6795a383f3", "committedDate": "2020-12-23T06:04:09Z", "message": "Checkstyle"}, "afterCommit": {"oid": "8f84cd746ddfe757b3623fd5a80c358ac0571308", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/8f84cd746ddfe757b3623fd5a80c358ac0571308", "committedDate": "2020-12-23T07:44:47Z", "message": "Checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4MzMyMDMx", "url": "https://github.com/line/armeria/pull/3233#pullrequestreview-558332031", "createdAt": "2020-12-24T04:38:24Z", "commit": {"oid": "8f84cd746ddfe757b3623fd5a80c358ac0571308"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4551, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}