{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgxMzA5MzU1", "number": 2543, "title": "Remove, hide or unstablize deprecated API", "bodyText": "Removed all deprecated API if possible.\nHid all deprecated API if possible.\nSome notable changes worth mentioning:\n\nDefaultHttp{Request,Response} has been moved to internal.common.\nRenamed DefaultRpcResponse to CompletableRpcResponse and left only\nthe default constructor.\nRemoved http from RequestContextExporter and its related classes,\ne.g. httpRequestHeaders -> requestHeaders\nFixed bugs where RequestContextAware{Future,Promise,ProgressivePromise}\ndoes not return itself but its delegate.\n\nremoveListener(s) now throws UnsupportedOperationException,\nbecause there's no way to remove the wrapped listener by reference.\n\n\nMoved RequestContext.makeContextAware(GenericFutureListener) to\nRequestContextAwareFutureListener and RequestContextAwareProgressiveFutureListener.\nFixed a bug where RequestContextExporter.attributes() throws an exception or a map with incorrect aliases.", "createdAt": "2020-02-28T10:14:42Z", "url": "https://github.com/line/armeria/pull/2543", "merged": true, "mergeCommit": {"oid": "6f21290a3e6e3bb2af22d8a9061d472dcabda545"}, "closed": true, "closedAt": "2020-03-02T06:19:21Z", "author": {"login": "trustin"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcItKHNgH2gAyMzgxMzA5MzU1Ojk1ZDg1NDMwNWFmODczZDBjNzAxNGYwZDY5MmE3OTgzOTRjMTAzZDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJnki-gFqTM2Njk2OTExOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95d854305af873d0c7014f0d692a798394c103d8", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/95d854305af873d0c7014f0d692a798394c103d8", "committedDate": "2020-02-28T10:14:15Z", "message": "Remove, hide or unstablize deprecated API\n\n- Removed all deprecated API if possible.\n- Hid all deprecated API if possible.\n- Made some previously deprecated API unstable:\n  - `DefaultHttpRequest` and `DefaultHttpResponse`\n    - Cannot be instantiated directly now. Only useful for subclasses.\n- Renamed `DefaultRpcResponse` to `CompletableRpcResponse` and left only\n  the default constructor.\n- Removed `http` from `RequestContextExporter` and its related classes,\n  e.g. `httpRequestHeaders` -> `requestHeaders`\n- Fixed bugs where `RequestContextAware{Future,Promise,ProgressivePromise}`\n  does not return itself but its delegate.\n  - `removeListener(s)` now throws `UnsupportedOperationException`,\n    because there's no way to remove the wrapped listener by reference.\n- Moved `RequestContext.makeContextAware(GenericFutureListener)` to\n  `RequestContextAwareFutureListener` and `RequestContextAwareProgressiveFutureListener`."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "12d6466d066157b16ab522388760156ed0f4fc55", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/12d6466d066157b16ab522388760156ed0f4fc55", "committedDate": "2020-02-28T10:28:36Z", "message": "Move `DefaultHttp{Request,Response}` to `internal.common`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc09bc128f7f5b728dbfd6b18e36e0f88b43a101", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/cc09bc128f7f5b728dbfd6b18e36e0f88b43a101", "committedDate": "2020-02-28T10:39:08Z", "message": "Fix Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "44e24ad48085654bbdac9a974ffe9e7b6d5191da", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/44e24ad48085654bbdac9a974ffe9e7b6d5191da", "committedDate": "2020-02-28T10:48:38Z", "message": "Add `UnstableApi` annotation to inner classes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzUyNTI5", "url": "https://github.com/line/armeria/pull/2543#pullrequestreview-366352529", "createdAt": "2020-02-28T12:08:51Z", "commit": {"oid": "44e24ad48085654bbdac9a974ffe9e7b6d5191da"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2MzUyNTk1", "url": "https://github.com/line/armeria/pull/2543#pullrequestreview-366352595", "createdAt": "2020-02-28T12:08:59Z", "commit": {"oid": "44e24ad48085654bbdac9a974ffe9e7b6d5191da"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "65316abac0860a5a7d887e95da35df639641a0d8", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/65316abac0860a5a7d887e95da35df639641a0d8", "committedDate": "2020-02-28T12:09:37Z", "message": "Merge branch 'master' into zap_deprecated_methods"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86c732f3e84f4eb930fcefdc1d2830a6b6822de4", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/86c732f3e84f4eb930fcefdc1d2830a6b6822de4", "committedDate": "2020-02-28T12:27:42Z", "message": "Fix assertion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1d089bf0dd6a7da6994a94c316a67a6f81f2375", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/f1d089bf0dd6a7da6994a94c316a67a6f81f2375", "committedDate": "2020-02-28T12:39:58Z", "message": "Remove `http` from `RequestContextExporter` et al"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e84431a7f4b3ad97d835f93804e69bb395765f42", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/e84431a7f4b3ad97d835f93804e69bb395765f42", "committedDate": "2020-02-28T12:50:16Z", "message": "Fix a bug where `RequestContextExporter.attributes()` throws an exception."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4d5ddfbc981e48a86602f1a120f33e46ceb643c", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/c4d5ddfbc981e48a86602f1a120f33e46ceb643c", "committedDate": "2020-02-28T12:53:41Z", "message": "Checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2Mzc2NTcz", "url": "https://github.com/line/armeria/pull/2543#pullrequestreview-366376573", "createdAt": "2020-02-28T12:55:25Z", "commit": {"oid": "c4d5ddfbc981e48a86602f1a120f33e46ceb643c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjo1NToyNlrOFv0Cxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yOFQxMjo1NToyNlrOFv0Cxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NTY4MDA3MQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/line/armeria/pull/2543#discussion_r385680071", "createdAt": "2020-02-28T12:55:26Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/common/logging/RequestContextExporterBuilder.java", "diffHunk": "@@ -316,7 +221,7 @@ public RequestContextExporterBuilder addKeyPattern(String keyPattern) {\n         }\n \n         if (exportKey == null) {\n-            exportKey = components[0].substring(PREFIX_ATTRS.length());\n+            exportKey = components[0];", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4d5ddfbc981e48a86602f1a120f33e46ceb643c"}, "originalPosition": 231}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fa5217ea6bd5a7c0ec1947e2bf81bd4cbf58db9", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/5fa5217ea6bd5a7c0ec1947e2bf81bd4cbf58db9", "committedDate": "2020-02-28T12:55:52Z", "message": "Checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY2OTY5MTE4", "url": "https://github.com/line/armeria/pull/2543#pullrequestreview-366969118", "createdAt": "2020-03-02T06:17:37Z", "commit": {"oid": "5fa5217ea6bd5a7c0ec1947e2bf81bd4cbf58db9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 629, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}