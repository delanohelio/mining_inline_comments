{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM2OTI2Mjg1", "number": 2817, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzowMDoyNVrOEHAygQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzozMToxNVrOEHBTAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Nzg4NDE3OnYy", "diffSide": "RIGHT", "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzowMDoyNVrOGmKNAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzowMDoyNVrOGmKNAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY2NjI0MA==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/line/armeria/pull/2817#discussion_r442666240", "createdAt": "2020-06-19T07:00:25Z", "author": {"login": "ikhoon"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -61,6 +63,7 @@\n         \"com.linecorp.armeria.server.annotation.Options\",\n         \"com.linecorp.armeria.server.annotation.Patch\",\n })\n+@SupportedSourceVersion(SourceVersion.RELEASE_8)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Nzg5MzExOnYy", "diffSide": "RIGHT", "path": "brave/src/test/java/com/linecorp/armeria/client/brave/BraveClientTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzowNDoxMlrOGmKSpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzowNDoxMlrOGmKSpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY2NzY4Nw==", "bodyText": "Could remove lower-cased?", "url": "https://github.com/line/armeria/pull/2817#discussion_r442667687", "createdAt": "2020-06-19T07:04:12Z", "author": {"login": "ikhoon"}, "path": "brave/src/test/java/com/linecorp/armeria/client/brave/BraveClientTest.java", "diffHunk": "@@ -147,12 +147,12 @@ void shouldSubmitSpanWithCustomRemoteName() throws Exception {\n         assertThat(span.localServiceName()).isEqualTo(TEST_SERVICE);\n \n         // check remote service name, lower-cased", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 84}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzkyMjY4OnYy", "diffSide": "RIGHT", "path": "brave/src/test/java/com/linecorp/armeria/it/brave/BraveIntegrationTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoxNTo1OVrOGmKk-g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoxNTo1OVrOGmKk-g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3MjM3OA==", "bodyText": "nit: Rename to SpanHandlerImpl?", "url": "https://github.com/line/armeria/pull/2817#discussion_r442672378", "createdAt": "2020-06-19T07:15:59Z", "author": {"login": "ikhoon"}, "path": "brave/src/test/java/com/linecorp/armeria/it/brave/BraveIntegrationTest.java", "diffHunk": "@@ -548,23 +551,23 @@ public void onError(Exception exception) {\n         }\n     }\n \n-    private static class ReporterImpl implements Reporter<Span> {\n-        private final BlockingQueue<Span> spans = new LinkedBlockingQueue<>();\n+    private static class ReporterImpl extends SpanHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 272}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzkyNjY2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/client/Client.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoxNzoyMVrOGmKnSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoxNzoyMVrOGmKnSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3Mjk2OA==", "bodyText": "Oops... \ud83d\ude05", "url": "https://github.com/line/armeria/pull/2817#discussion_r442672968", "createdAt": "2020-06-19T07:17:21Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/client/Client.java", "diffHunk": "@@ -76,4 +76,13 @@\n         requireNonNull(type, \"type\");\n         return Unwrappable.super.as(type);\n     }\n+\n+    /**\n+     * Unwraps this {@link Client} and returns the object being decorated.\n+     * If this {@link Client} is the innermost object, this method returns itself.\n+     */\n+    @Override\n+    default Client<? extends Request, ? extends Response> unwrap() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzkzNzk0OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/client/retry/AttemptLimitingBackoff.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoyMToxOFrOGmKuDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwOTo1MTowOVrOGmO85A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDcwMA==", "bodyText": "unwrap?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                      .add(\"delegate\", unwrap())\n          \n          \n            \n                                      .add(\"unwrap\", unwrap())", "url": "https://github.com/line/armeria/pull/2817#discussion_r442674700", "createdAt": "2020-06-19T07:21:18Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/client/retry/AttemptLimitingBackoff.java", "diffHunk": "@@ -41,7 +41,7 @@ public long nextDelayMillis(int numAttemptsSoFar) {\n     @Override\n     public String toString() {\n         return MoreObjects.toStringHelper(this)\n-                          .add(\"delegate\", delegate())\n+                          .add(\"delegate\", unwrap())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Mjc0NDAzNg==", "bodyText": "I think delegate is better here because unwrap is a verb.", "url": "https://github.com/line/armeria/pull/2817#discussion_r442744036", "createdAt": "2020-06-19T09:51:09Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/client/retry/AttemptLimitingBackoff.java", "diffHunk": "@@ -41,7 +41,7 @@ public long nextDelayMillis(int numAttemptsSoFar) {\n     @Override\n     public String toString() {\n         return MoreObjects.toStringHelper(this)\n-                          .add(\"delegate\", delegate())\n+                          .add(\"delegate\", unwrap())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDcwMA=="}, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1NzkzOTU2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/client/retry/JitterAddingBackoff.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoyMTo1N1rOGmKvIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzoyMTo1N1rOGmKvIA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3NDk3Ng==", "bodyText": "Ditto\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                      .add(\"delegate\", unwrap())\n          \n          \n            \n                                      .add(\"unwrap\", unwrap())", "url": "https://github.com/line/armeria/pull/2817#discussion_r442674976", "createdAt": "2020-06-19T07:21:57Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/client/retry/JitterAddingBackoff.java", "diffHunk": "@@ -65,7 +65,7 @@ public long nextDelayMillis(int numAttemptsSoFar) {\n     @Override\n     public String toString() {\n         return MoreObjects.toStringHelper(this)\n-                          .add(\"delegate\", delegate())\n+                          .add(\"delegate\", unwrap())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 14}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1Nzk2NzM3OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/server/RouteDecoratingService.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzozMToxNVrOGmK_5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOVQwNzozMToxNVrOGmK_5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjY3OTI3MQ==", "bodyText": "unwrap?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                          .add(\"delegate\", unwrap()).toString();\n          \n          \n            \n                                          .add(\"unwrap\", unwrap()).toString();", "url": "https://github.com/line/armeria/pull/2817#discussion_r442679271", "createdAt": "2020-06-19T07:31:15Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/server/RouteDecoratingService.java", "diffHunk": "@@ -139,7 +139,7 @@ public HttpResponse serve(ServiceRequestContext ctx, HttpRequest req) throws Exc\n         public String toString() {\n             return MoreObjects.toStringHelper(this)\n                               .add(\"router\", router)\n-                              .add(\"delegate\", delegate()).toString();\n+                              .add(\"delegate\", unwrap()).toString();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67078fe420166cd2ec1679d7be284aa7df284d42"}, "originalPosition": 17}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2371, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}