{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY0OTQ1MDUx", "number": 2979, "title": "Add `defaultServiceName()` and `defaultLogName()` to service binding builders", "bodyText": "Motivation\nWhen migrating from AnnotatedServiceRegistrationBean to ArmeriaServerConfigurator, users have no option to set the service name like it could be done with .serviceName().\nModifications\n\nAdd defaultServiceName() and defaultLogName() to the ServiceConfigSetters interface and service binding implementations\n\nResult\nUsers can now specify the default service and log names when registering annotated services using ArmeriaServerConfigurator.", "createdAt": "2020-08-08T03:38:05Z", "url": "https://github.com/line/armeria/pull/2979", "merged": true, "mergeCommit": {"oid": "0cbc9078c31e5f99971449b6b669e0f00c8dcc06"}, "closed": true, "closedAt": "2020-08-13T03:19:37Z", "author": {"login": "KarboniteKream"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc8whwRgH2gAyNDY0OTQ1MDUxOjE2NDNmMDI0Nzc0NDdjNmI3OGUxNGEzZWU4YmZhZjFiZWMxZmY4ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-XA1hgFqTQ2NjQxMTkyOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1643f02477447c6b78e14a3ee8bfaf1bec1ff8fa", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/1643f02477447c6b78e14a3ee8bfaf1bec1ff8fa", "committedDate": "2020-08-08T03:33:51Z", "message": "Add defaultServiceName() to service binding builders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f0f7e6c5d40e3be107a04cf7d25c6cd56eaeac54", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/f0f7e6c5d40e3be107a04cf7d25c6cd56eaeac54", "committedDate": "2020-08-08T05:50:12Z", "message": "Correctly set serviceName in AnnotatedService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3288337ba7d59ccabcaac6a26b43bc6d0c4db503", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/3288337ba7d59ccabcaac6a26b43bc6d0c4db503", "committedDate": "2020-08-11T07:37:51Z", "message": "Quick prototype"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4deafae4b6e38755a7b61968085cd5cc5df8cc37", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/4deafae4b6e38755a7b61968085cd5cc5df8cc37", "committedDate": "2020-08-11T07:53:19Z", "message": "Correct priority"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fbf3765549dd812e20d2be268552b838169f2749", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/fbf3765549dd812e20d2be268552b838169f2749", "committedDate": "2020-08-11T08:39:25Z", "message": "Add defaultLogName() to service binding builders"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8f26ac554dc5c89f099dfab80891f8b717f407d9", "author": {"user": {"login": "KarboniteKream", "name": "Klemen Ko\u0161ir"}}, "url": "https://github.com/line/armeria/commit/8f26ac554dc5c89f099dfab80891f8b717f407d9", "committedDate": "2020-08-11T09:13:15Z", "message": "Update tests and documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY0OTIzMzgy", "url": "https://github.com/line/armeria/pull/2979#pullrequestreview-464923382", "createdAt": "2020-08-11T10:02:12Z", "commit": {"oid": "8f26ac554dc5c89f099dfab80891f8b717f407d9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxMDowMjoxMlrOG-w_UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQxMDowMjoxMlrOG-w_UQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODQ2NzUzNw==", "bodyText": "\ud83d\ude4f", "url": "https://github.com/line/armeria/pull/2979#discussion_r468467537", "createdAt": "2020-08-11T10:02:12Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/server/annotation/ServiceName.java", "diffHunk": "@@ -30,8 +30,9 @@\n  * >     @Get(\"/\")\n  * >     public String get(ServiceRequestContext ctx) {\n  * >         // The default service name\n- * >         assert ctx.log().ensureAvailable(RequestLogProperty.NAME)\n- * >                   .serviceName().equals(MyService.class.getName());\n+ * >         ctx.log().whenAvailable(RequestLogProperty.NAME).thenAccept(log -> {\n+ * >             assert log.serviceName().equals(MyService.class.getName());\n+ * >         });", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8f26ac554dc5c89f099dfab80891f8b717f407d9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY1NTc3MDE5", "url": "https://github.com/line/armeria/pull/2979#pullrequestreview-465577019", "createdAt": "2020-08-12T04:06:54Z", "commit": {"oid": "8f26ac554dc5c89f099dfab80891f8b717f407d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NDExOTI5", "url": "https://github.com/line/armeria/pull/2979#pullrequestreview-466411929", "createdAt": "2020-08-13T02:58:07Z", "commit": {"oid": "8f26ac554dc5c89f099dfab80891f8b717f407d9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 21, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}