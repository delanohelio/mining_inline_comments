{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg4NjIxMzAw", "number": 3066, "title": "Fix bug where TimeoutScheduler is intialized more than once", "bodyText": "Motivation:\nA TimeoutScheduler could be intialized various points such as:\n\nHttpResponseSubscriber.operationComplete()\nHttp1ResposneDecoder.channelRead() with NEED_HEADERS status\n\nWe need a guard to make sure that a TimeoutScheduler is initialized once.\nModifications:\n\nCheck state before initializing TimeoutScheduler.\n\nResult:\nA TimeoutScheduler is initialized exactly once even if it is called multiple times", "createdAt": "2020-09-17T12:07:25Z", "url": "https://github.com/line/armeria/pull/3066", "merged": true, "mergeCommit": {"oid": "3b6a4eff47cb011c1d73878bd986f89a90b04285"}, "closed": true, "closedAt": "2020-09-22T01:53:42Z", "author": {"login": "ikhoon"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdJvroegH2gAyNDg4NjIxMzAwOjg1NWQ4OGUyYmI2NzdiOGQxYTczZTlmYTMzMTY3YTI0ODcyYWJjOTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdK9ENUgH2gAyNDg4NjIxMzAwOjg0ZDg4Yzk2YWMyNDNkYTViNjI1YWQ3OGIwZWY5NzZiMjU5YzNiYTk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "855d88e2bb677b8d1a73e9fa33167a24872abc94", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/855d88e2bb677b8d1a73e9fa33167a24872abc94", "committedDate": "2020-09-17T11:55:45Z", "message": "Fix bug where TimeoutScheduler is intialized more than once\n\nMotivation:\n\nA `TimeoutScheduler` could be intialized various points such as:\n- HttpResponseSubscriber.operationComplete()\n- Http1ResposneDecoder.channelRead() with `NEED_HEADERS` status\n\nWe need a guard to make sure that a TimeoutScheduler is initialized once.\n\nModifications:\n\n- Check state before initializing TimeoutScheduler.\n\nResult:\n\nA TimeoutScheduler is initialized exactly once event if it is called muliple times"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkwNTMxMTA3", "url": "https://github.com/line/armeria/pull/3066#pullrequestreview-490531107", "createdAt": "2020-09-17T12:17:10Z", "commit": {"oid": "855d88e2bb677b8d1a73e9fa33167a24872abc94"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkyMTk3NDQ0", "url": "https://github.com/line/armeria/pull/3066#pullrequestreview-492197444", "createdAt": "2020-09-20T14:09:28Z", "commit": {"oid": "855d88e2bb677b8d1a73e9fa33167a24872abc94"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNDowOToyOFrOHU6sLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMFQxNDowOToyOFrOHU6sLQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MTY5NTE0OQ==", "bodyText": "initializeOnlyOnce()?", "url": "https://github.com/line/armeria/pull/3066#discussion_r491695149", "createdAt": "2020-09-20T14:09:28Z", "author": {"login": "trustin"}, "path": "core/src/test/java/com/linecorp/armeria/internal/common/TimeoutSchedulerTest.java", "diffHunk": "@@ -340,6 +341,22 @@ void evaluatePendingTimeout() {\n         await().untilTrue(completed);\n     }\n \n+    @Test\n+    void initializeOnce() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "855d88e2bb677b8d1a73e9fa33167a24872abc94"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6d230721e033c01246d5e089c5735518f5b01284", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/6d230721e033c01246d5e089c5735518f5b01284", "committedDate": "2020-09-20T14:10:14Z", "message": "Update TimeoutSchedulerTest.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf34c7be84832afc29500864520bf038e4b05b3f", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/cf34c7be84832afc29500864520bf038e4b05b3f", "committedDate": "2020-09-20T17:01:08Z", "message": "Fix ClientFatory leak in test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84d88c96ac243da5b625ad78b0ef976b259c3ba9", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/84d88c96ac243da5b625ad78b0ef976b259c3ba9", "committedDate": "2020-09-21T06:05:17Z", "message": "Address comments by @minwoox"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4666, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}