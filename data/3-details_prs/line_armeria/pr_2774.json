{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI3NzMwMTQ3", "number": 2774, "title": "Validate a boolean parameter strictly in annotated services", "bodyText": "Motivation:\nGiven the following annotated service:\npublic class MyService {\n    @Get(\"/get\")\n    public String get(@Param boolean value) {\n        return String.valueOf(value);\n    }\n}\n\nGET /get?value= or GET /get?value=badvalue injects false into\nthe parameter value, which is unclear to many users.\nModifications:\n\nUse a custom function for parsing a boolean parameter instead of\nBoolean.valueOf().\n\nResult:\n\nLess surprising behavior\n\ntrue, false, 0 and 1 are supported.\n\n\nFixes #2767", "createdAt": "2020-06-04T10:10:01Z", "url": "https://github.com/line/armeria/pull/2774", "merged": true, "mergeCommit": {"oid": "b792aecdc642b9fa6b0a54b25befb9c911b587c7"}, "closed": true, "closedAt": "2020-06-05T14:08:11Z", "author": {"login": "trustin"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcn7MVaAH2gAyNDI3NzMwMTQ3OjJlY2UzZDA4NGU3Njc4YTJhZjIxYWE2ZTQ2MjYyZmJhMDI0M2Y2MGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcoSfzggH2gAyNDI3NzMwMTQ3OjRjNmQxM2Q4NzA4NTBkZWVmOGM3ZDE0ODc3NzkxZWZmYzNkMDgyZGM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2ece3d084e7678a2af21aa6e46262fba0243f60e", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/2ece3d084e7678a2af21aa6e46262fba0243f60e", "committedDate": "2020-06-04T10:07:00Z", "message": "Validate a boolean parameter strictly in annotated services\n\nMotivation:\n\nGiven the following annotated service:\n\n    public class MyService {\n        @Get(\"/get\")\n        public String get(@Param boolean value) {\n            return String.valueOf(value);\n        }\n    }\n\n`GET /get?value=` or `GET /get?value=badvalue` injects `false` into\nthe parameter `value`, which is unclear to many users.\n\nModifications:\n\n- Use a custom function for parsing a boolean parameter instead of\n  `Boolean.valueOf()`.\n\nResult:\n\n- Less surprising behavior\n- Fixes #2767"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDMwMTQ1", "url": "https://github.com/line/armeria/pull/2774#pullrequestreview-425030145", "createdAt": "2020-06-05T06:36:16Z", "commit": {"oid": "2ece3d084e7678a2af21aa6e46262fba0243f60e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MDM2MjUz", "url": "https://github.com/line/armeria/pull/2774#pullrequestreview-425036253", "createdAt": "2020-06-05T06:49:14Z", "commit": {"oid": "2ece3d084e7678a2af21aa6e46262fba0243f60e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNjo0OToxNFrOGfiWbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNVQwNjo0OToxNFrOGfiWbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNTcyMTgzOQ==", "bodyText": "Couldn't we take other common boolean expressions such as:\n\n1 and 0\nyes and no\nhttps://github.com/spring-projects/spring-framework/blob/master/spring-core/src/main/java/org/springframework/core/convert/support/StringToBooleanConverter.java#L38-L46", "url": "https://github.com/line/armeria/pull/2774#discussion_r435721839", "createdAt": "2020-06-05T06:49:14Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceTypeUtil.java", "diffHunk": "@@ -115,5 +116,16 @@\n                 \"Can't convert '\" + str + \"' to type '\" + clazz.getSimpleName() + \"'.\");\n     }\n \n+    private static Boolean parseBoolean(String s) {\n+        switch (Ascii.toLowerCase(s)) {\n+            case \"true\":\n+                return true;\n+            case \"false\":\n+                return false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2ece3d084e7678a2af21aa6e46262fba0243f60e"}, "originalPosition": 28}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48ebd656885b156e4bd5c8b5c094fa60dd297fb9", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/48ebd656885b156e4bd5c8b5c094fa60dd297fb9", "committedDate": "2020-06-05T11:22:15Z", "message": "Merge branch 'master' into fix_boolean_parse"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0c7b06ea3e10d23e0d30f26a5ff80d9fdc5c1c6d", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/0c7b06ea3e10d23e0d30f26a5ff80d9fdc5c1c6d", "committedDate": "2020-06-05T11:38:37Z", "message": "Relax a little bit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad0bddc24f1a8bf92a82d83aa2cbcc9864ab6032", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/ad0bddc24f1a8bf92a82d83aa2cbcc9864ab6032", "committedDate": "2020-06-05T11:52:56Z", "message": "Merge branch 'master' into fix_boolean_parse"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1MjQwMDAx", "url": "https://github.com/line/armeria/pull/2774#pullrequestreview-425240001", "createdAt": "2020-06-05T12:07:05Z", "commit": {"oid": "ad0bddc24f1a8bf92a82d83aa2cbcc9864ab6032"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c6d13d870850deef8c7d14877791effc3d082dc", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/4c6d13d870850deef8c7d14877791effc3d082dc", "committedDate": "2020-06-05T13:16:05Z", "message": "Tad bit more strict"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 163, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}