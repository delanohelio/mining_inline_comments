{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxMjczMTMy", "number": 2454, "title": "Do not use type parameter for builder self type in public API", "bodyText": "Motivation:\nBuilder self type parameter is very useful when writing builders with\ntype hierarchy, but it often results in bad-looking Javadoc, because the\nreturn type is not shown as the actual return type but just as a type\nparameter name, such as B or SELF.\nModifications:\n\nRemove self type parameters from all public builder types and\nexplicitly override the return types.\n\nResult:\n\nMore intuitive Javadoc\nDevs need to be cautious when adding a new method to builders.", "createdAt": "2020-02-05T09:42:28Z", "url": "https://github.com/line/armeria/pull/2454", "merged": true, "mergeCommit": {"oid": "6178d35f4b26ae8fce31ede5d1b848aa3e2a80a6"}, "closed": true, "closedAt": "2020-02-06T08:51:31Z", "author": {"login": "trustin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBS6ADgH2gAyMzcxMjczMTMyOjdlNWJjM2RmOTZlMjZhZTg5ZTI0ZDkyYTE0MWUxM2YyMWE0M2Q3MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcBmdhtgH2gAyMzcxMjczMTMyOjJkOTE1ZjQyNzc5ZTNiZjRlNjFmYmVlNjU2MjJiNTgxOTMxNThmOTQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7e5bc3df96e26ae89e24d92a141e13f21a43d706", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/7e5bc3df96e26ae89e24d92a141e13f21a43d706", "committedDate": "2020-02-05T09:41:39Z", "message": "Do not use type parameter for builder self type in public API\n\nMotivation:\n\nBuilder self type parameter is very useful when writing builders with\ntype hierarchy, but it often results in bad-looking Javadoc, because the\nreturn type is not shown as the actual return type but just as a type\nparameter name, such as `B` or `SELF`.\n\nModifications:\n\n- Remove self type parameters from all public builder types and\n  explicitly override the return types.\n- Miscellaneous:\n  - Add `ServerBuilder.gracefulShutdownTimeoutMillis(long, long)` and\n    deprecate `gracefulShutdownTimeout(long, long)`.\n\nResult:\n\n- More intuitive Javadoc\n- Devs need to be cautious when adding a new method to builders."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccb30a811f0d2d7e36053bc1f71129d36ab5ae08", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/ccb30a811f0d2d7e36053bc1f71129d36ab5ae08", "committedDate": "2020-02-05T09:56:11Z", "message": "Checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MTY1Njg0", "url": "https://github.com/line/armeria/pull/2454#pullrequestreview-354165684", "createdAt": "2020-02-06T02:19:52Z", "commit": {"oid": "ccb30a811f0d2d7e36053bc1f71129d36ab5ae08"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjoxOTo1MlrOFmNdBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwMjoxOTo1MlrOFmNdBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTYxMDYzMQ==", "bodyText": "nit: I think we need to change this as well because it's duration.", "url": "https://github.com/line/armeria/pull/2454#discussion_r375610631", "createdAt": "2020-02-06T02:19:52Z", "author": {"login": "minwoox"}, "path": "core/src/main/java/com/linecorp/armeria/server/ServerBuilder.java", "diffHunk": "@@ -588,29 +588,48 @@ public ServerBuilder http1MaxChunkSize(int http1MaxChunkSize) {\n      * requests to go away before actually shutting down.\n      *\n      * @param quietPeriodMillis the number of milliseconds to wait for active\n-     *     requests to go end before shutting down. 0 means the server will\n-     *     stop right away without waiting.\n+     *                          requests to go end before shutting down. 0 means the server will\n+     *                          stop right away without waiting.\n      * @param timeoutMillis the number of milliseconds to wait before shutting\n-     *     down the server regardless of active requests. This should be set to\n-     *     a time greater than {@code quietPeriodMillis} to ensure the server\n-     *     shuts down even if there is a stuck request.\n+     *                      down the server regardless of active requests. This should be set to\n+     *                      a time greater than {@code quietPeriodMillis} to ensure the server\n+     *                      shuts down even if there is a stuck request.\n      */\n-    public ServerBuilder gracefulShutdownTimeout(long quietPeriodMillis, long timeoutMillis) {\n+    public ServerBuilder gracefulShutdownTimeoutMillis(long quietPeriodMillis, long timeoutMillis) {\n         return gracefulShutdownTimeout(\n                 Duration.ofMillis(quietPeriodMillis), Duration.ofMillis(timeoutMillis));\n     }\n \n+    /**\n+     * Sets the amount of time to wait after calling {@link Server#stop()} for\n+     * requests to go away before actually shutting down.\n+     *\n+     * @param quietPeriodMillis the number of milliseconds to wait for active\n+     *                          requests to go end before shutting down. 0 means the server will\n+     *                          stop right away without waiting.\n+     * @param timeoutMillis the number of milliseconds to wait before shutting\n+     *                      down the server regardless of active requests. This should be set to\n+     *                      a time greater than {@code quietPeriodMillis} to ensure the server\n+     *                      shuts down even if there is a stuck request.\n+     *\n+     * @deprecated Use {@link #gracefulShutdownTimeoutMillis(long, long)}.\n+     */\n+    @Deprecated\n+    public ServerBuilder gracefulShutdownTimeout(long quietPeriodMillis, long timeoutMillis) {\n+        return gracefulShutdownTimeoutMillis(quietPeriodMillis, timeoutMillis);\n+    }\n+\n     /**\n      * Sets the amount of time to wait after calling {@link Server#stop()} for\n      * requests to go away before actually shutting down.\n      *\n      * @param quietPeriod the number of milliseconds to wait for active\n-     *     requests to go end before shutting down. {@link Duration#ZERO} means\n-     *     the server will stop right away without waiting.\n+     *                    requests to go end before shutting down. {@link Duration#ZERO} means\n+     *                    the server will stop right away without waiting.\n      * @param timeout the number of milliseconds to wait before shutting", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ccb30a811f0d2d7e36053bc1f71129d36ab5ae08"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ef9a2125f19097bd8a7cbdef6ec54ea4507534c", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/2ef9a2125f19097bd8a7cbdef6ec54ea4507534c", "committedDate": "2020-02-06T08:24:36Z", "message": "Merge branch 'master' into client_builder_return_type"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MjY4Nzg5", "url": "https://github.com/line/armeria/pull/2454#pullrequestreview-354268789", "createdAt": "2020-02-06T08:28:34Z", "commit": {"oid": "2ef9a2125f19097bd8a7cbdef6ec54ea4507534c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d915f42779e3bf4e61fbee65622b58193158f94", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/2d915f42779e3bf4e61fbee65622b58193158f94", "committedDate": "2020-02-06T08:28:39Z", "message": "Address the comment from @minwoox"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 963, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}