{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU1NjE0Mzg4", "number": 2933, "title": "Add human-readable route string for Route", "bodyText": "Motivation:\nRoute.meterTag() is not suitable for span name or url pattern.\nBecause it contains extra information such as exact: or prefix:.\nSee #2932 for the detailed information.\nRoute.loggerName() and Route.meterTag() are not used internally anymore.\nI think users could easily replace them with newly introduced methods like RequestLog.name(),\nRequestLog.serviceName() or Route.pathString().\nModifications:\n\nAdd pathString() method to Route, PathMapping and their subclasses.\nThe pathString() will return a route string according to the Route.pathType()\n\nRoutePathType.EXACT - \"/foo\" or \"/foo/bar\"\nRoutePathType.PREFIX - \"/foo/*\"\nRoutePathType.PARAMETERIZED - \"/foo/:bar\" or \"/foo/:bar/:qux\"\nRoutePathType.REGEX - \"/**/foo\"\nRoutePathType.REGEX_WITH_PREFIX - \"/foo/**/bar\"\n\n\nDeprecate meterTag() and loggerName() in Route and PathMapping\n\nResult:\n\nYou can now get a human-readable route string using Route.pathString()\nFixes #2932", "createdAt": "2020-07-23T10:23:43Z", "url": "https://github.com/line/armeria/pull/2933", "merged": true, "mergeCommit": {"oid": "12d9ff04c9469ce30d7ec7201764848f4007e0dd"}, "closed": true, "closedAt": "2020-07-27T03:06:44Z", "author": {"login": "ikhoon"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc3sxzIAH2gAyNDU1NjE0Mzg4OmM5OTkxOThkM2EwMzhiNGE4MzUwYTY0NTUwMDI2MTY0MTcyNWQ3ZTA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc447B2AFqTQ1NTQ0NTkyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c999198d3a038b4a8350a645500261641725d7e0", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/c999198d3a038b4a8350a645500261641725d7e0", "committedDate": "2020-07-23T10:22:08Z", "message": "Add human-readable route string for Route\n\nMotivation:\n\n`Route.meterTag()` is not suitable for span name or url pattern.\nBecause it contains extra information such as `exact:` or `prefix:`.\nSee #2932 for the detail information.\n\n`Route.loggerName()` and `Route.meterTag()` are not used internally anymore.\nI think users could replace them with new methods like `RequestLog.name()`,\n`RequestLog.serviceName()` or `Route.pathPattern()`.\n\nModifications:\n\n- Add `pathPattern()` method to `Route`, `PathMapping` and their subclasses.\n  The `pathPattern()` will return a route string according to the `Route.pathType()`\n  - `RoutePathType.EXACT` - \"/foo\" or \"/foo/bar\"\n  - `RoutePathType.PREFIX` - \"/foo/*\"\n  - `RoutePathType.PARAMETERIZED` - \"/foo/:bar\" or \"/foo/:bar/:qux\n  - `RoutePathType.REGEX` - \"/**/foo\"\n  - `RoutePathType.REGEX_WITH_PREFIX` - \"/foo/**/bar\"\n- Deprecate `meterTag()` and `loggerName()` in `Route` and `PathMapping`\n\nResult:\n\n- You can now get a human-readable route string using `Route.pathPattern()`\n- Fixes #2932"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c21b4436a27482133e345dd573fabf407521484", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/7c21b4436a27482133e345dd573fabf407521484", "committedDate": "2020-07-23T10:26:45Z", "message": "Fix Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea559c7d91a2808aeec795fec8944b6edf1a5672", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/ea559c7d91a2808aeec795fec8944b6edf1a5672", "committedDate": "2020-07-23T10:43:30Z", "message": "Migrate ServiceRequestContextAdapter.route()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0MDg1OTU0", "url": "https://github.com/line/armeria/pull/2933#pullrequestreview-454085954", "createdAt": "2020-07-23T12:37:29Z", "commit": {"oid": "ea559c7d91a2808aeec795fec8944b6edf1a5672"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU0NTk1NTIw", "url": "https://github.com/line/armeria/pull/2933#pullrequestreview-454595520", "createdAt": "2020-07-24T01:41:46Z", "commit": {"oid": "ea559c7d91a2808aeec795fec8944b6edf1a5672"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMTo0MTo0NlrOG2g5Fg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yNFQwMTo0Mjo1NlrOG2g56w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxNTE5MA==", "bodyText": "How is regex translated into **?", "url": "https://github.com/line/armeria/pull/2933#discussion_r459815190", "createdAt": "2020-07-24T01:41:46Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/server/PathMapping.java", "diffHunk": "@@ -48,14 +50,36 @@\n      * Returns the logger name.\n      *\n      * @return the logger name whose components are separated by a dot (.)\n+     *\n+     * @deprecated Use {@link RequestLog#name()}, {@link RequestLog#serviceName()} or\n+     *             {@link Route#pathPattern()}.\n      */\n+    @Deprecated\n     String loggerName();\n \n     /**\n      * Returns the value of the {@link Tag} in a {@link Meter} of this {@link PathMapping}.\n+     *\n+     * @deprecated Use {@link RequestLog#name()}, {@link RequestLog#serviceName()} or\n+     *             {@link Route#pathPattern()}.\n      */\n+    @Deprecated\n     String meterTag();\n \n+    /**\n+     * Returns the path pattern of this {@link PathMapping}. The returned path pattern is different according to\n+     * the value of {@link #pathType()}.\n+     *\n+     * <ul>\n+     *   <li>{@linkplain RoutePathType#EXACT EXACT}: {@code \"/foo\" or \"/foo/bar\"}</li>\n+     *   <li>{@linkplain RoutePathType#PREFIX PREFIX}: {@code \"/foo/*\"}</li>\n+     *   <li>{@linkplain RoutePathType#PARAMETERIZED PARAMETERIZED}: {@code \"/foo/:bar\" or \"/foo/:bar/:qux}</li>\n+     *   <li>{@linkplain RoutePathType#REGEX REGEX}: {@code \"/*&#42;/foo\" }</li>\n+     *   <li>{@linkplain RoutePathType#REGEX_WITH_PREFIX REGEX_WITH_PREFIX}: {@code \"/foo/*&#42;/bar\" }</li>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea559c7d91a2808aeec795fec8944b6edf1a5672"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1OTgxNTQwMw==", "bodyText": "How about renaming this? We currently use the term pathPattern for the path patterns a user specify when binding a service and it has different format from this.", "url": "https://github.com/line/armeria/pull/2933#discussion_r459815403", "createdAt": "2020-07-24T01:42:56Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/server/PathMapping.java", "diffHunk": "@@ -48,14 +50,36 @@\n      * Returns the logger name.\n      *\n      * @return the logger name whose components are separated by a dot (.)\n+     *\n+     * @deprecated Use {@link RequestLog#name()}, {@link RequestLog#serviceName()} or\n+     *             {@link Route#pathPattern()}.\n      */\n+    @Deprecated\n     String loggerName();\n \n     /**\n      * Returns the value of the {@link Tag} in a {@link Meter} of this {@link PathMapping}.\n+     *\n+     * @deprecated Use {@link RequestLog#name()}, {@link RequestLog#serviceName()} or\n+     *             {@link Route#pathPattern()}.\n      */\n+    @Deprecated\n     String meterTag();\n \n+    /**\n+     * Returns the path pattern of this {@link PathMapping}. The returned path pattern is different according to\n+     * the value of {@link #pathType()}.\n+     *\n+     * <ul>\n+     *   <li>{@linkplain RoutePathType#EXACT EXACT}: {@code \"/foo\" or \"/foo/bar\"}</li>\n+     *   <li>{@linkplain RoutePathType#PREFIX PREFIX}: {@code \"/foo/*\"}</li>\n+     *   <li>{@linkplain RoutePathType#PARAMETERIZED PARAMETERIZED}: {@code \"/foo/:bar\" or \"/foo/:bar/:qux}</li>\n+     *   <li>{@linkplain RoutePathType#REGEX REGEX}: {@code \"/*&#42;/foo\" }</li>\n+     *   <li>{@linkplain RoutePathType#REGEX_WITH_PREFIX REGEX_WITH_PREFIX}: {@code \"/foo/*&#42;/bar\" }</li>\n+     * </ul>\n+     */\n+    String pathPattern();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ea559c7d91a2808aeec795fec8944b6edf1a5672"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a2124a7b4f54f622cbe1deaae4f565ff343e0a4", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/7a2124a7b4f54f622cbe1deaae4f565ff343e0a4", "committedDate": "2020-07-24T04:07:54Z", "message": "Update Javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f47751f4ef9bfce492317478f78c56725c88074f", "author": {"user": {"login": "ikhoon", "name": "Ikhun Um"}}, "url": "https://github.com/line/armeria/commit/f47751f4ef9bfce492317478f78c56725c88074f", "committedDate": "2020-07-24T05:49:36Z", "message": "Rename pathPattern to patternString"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDI4Njc5", "url": "https://github.com/line/armeria/pull/2933#pullrequestreview-455428679", "createdAt": "2020-07-27T02:09:39Z", "commit": {"oid": "f47751f4ef9bfce492317478f78c56725c88074f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1NDQ1OTI4", "url": "https://github.com/line/armeria/pull/2933#pullrequestreview-455445928", "createdAt": "2020-07-27T03:05:00Z", "commit": {"oid": "f47751f4ef9bfce492317478f78c56725c88074f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4939, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}