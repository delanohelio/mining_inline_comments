{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5MjkxNTc3", "number": 2783, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjoyOToyMFrOEDLS3A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjozOTo0M1rOEDLVKA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzY2MjM2OnYy", "diffSide": "RIGHT", "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceTypeUtil.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjoyOToyMFrOGgEg7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjo0NDo0N1rOGgElWg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MTU4Mg==", "bodyText": "Could you update the documentation?\n\n  \n    \n      armeria/site/src/pages/docs/server-annotated-service.mdx\n    \n    \n        Lines 177 to 186\n      in\n      2f27081\n    \n    \n    \n    \n\n        \n          \n           - `boolean` or `Boolean` \n        \n\n        \n          \n           - `byte` or `Byte` \n        \n\n        \n          \n           - `short` or `Short` \n        \n\n        \n          \n           - `integer` or `Integer` \n        \n\n        \n          \n           - `long` or `Long` \n        \n\n        \n          \n           - `float` or `Float` \n        \n\n        \n          \n           - `double` or `Double` \n        \n\n        \n          \n           - `String` \n        \n\n        \n          \n           - `Enum` \n        \n\n        \n          \n           - `UUID`", "url": "https://github.com/line/armeria/pull/2783#discussion_r436281582", "createdAt": "2020-06-06T16:29:20Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceTypeUtil.java", "diffHunk": "@@ -50,6 +51,7 @@\n                     .put(Double.class, Double::valueOf)\n                     .put(String.class, Function.identity())\n                     .put(UUID.class, UUID::fromString)\n+                    .put(Period.class, Period::parse)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjcxNA==", "bodyText": "OMG, thanks!", "url": "https://github.com/line/armeria/pull/2783#discussion_r436282714", "createdAt": "2020-06-06T16:44:47Z", "author": {"login": "ghkim3221"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceTypeUtil.java", "diffHunk": "@@ -50,6 +51,7 @@\n                     .put(Double.class, Double::valueOf)\n                     .put(String.class, Function.identity())\n                     .put(UUID.class, UUID::fromString)\n+                    .put(Period.class, Period::parse)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MTU4Mg=="}, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcxNzY2ODI0OnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjozOTo0M1rOGgEj4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQxMzowODoyN1rOGgc-jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ==", "bodyText": "Do we need to add a DocService test?\nI think we can test the Period converter by registering an annotated service that takes a Period as a @Param and calling it by a WebClient.\nFor example:\n\n  \n    \n      armeria/core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceRequestConverterTest.java\n    \n    \n        Lines 917 to 923\n      in\n      52fd361\n    \n    \n    \n    \n\n        \n          \n           @Test \n        \n\n        \n          \n           void testDefaultRequestConverter_uuid() { \n        \n\n        \n          \n               final WebClient client = WebClient.of(server.httpUri()); \n        \n\n        \n          \n               final UUID uuid = UUID.randomUUID(); \n        \n\n        \n          \n               final AggregatedHttpResponse response = client.get(\"/2/default/uuid/\" + uuid).aggregate().join(); \n        \n\n        \n          \n               assertThat(response.contentUtf8()).isEqualTo(uuid.toString()); \n        \n\n        \n          \n           }", "url": "https://github.com/line/armeria/pull/2783#discussion_r436282339", "createdAt": "2020-06-06T16:39:43Z", "author": {"login": "ikhoon"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4Mzk1NA==", "bodyText": "I added DocService test because @minwoox's suggestion. (Did I understand wrong?)\nAnd I add test case for converting. Thank you for kind instructions.", "url": "https://github.com/line/armeria/pull/2783#discussion_r436283954", "createdAt": "2020-06-06T17:01:23Z", "author": {"login": "ghkim3221"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ=="}, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQyOTc5OQ==", "bodyText": "I see. I missed the comment.", "url": "https://github.com/line/armeria/pull/2783#discussion_r436429799", "createdAt": "2020-06-08T02:16:40Z", "author": {"login": "ikhoon"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ=="}, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjQzMzQ5NA==", "bodyText": "What I meant was that we need to check whether the type is rendered well or not on the DocService page.\nI have checked it and it seems OK. Thanks!", "url": "https://github.com/line/armeria/pull/2783#discussion_r436433494", "createdAt": "2020-06-08T02:40:23Z", "author": {"login": "minwoox"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ=="}, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjY4MjM4MQ==", "bodyText": "I see. Thanks!", "url": "https://github.com/line/armeria/pull/2783#discussion_r436682381", "createdAt": "2020-06-08T13:08:27Z", "author": {"login": "ghkim3221"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ=="}, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2334, "cost": 1, "resetAt": "2021-11-12T20:44:06Z"}}}