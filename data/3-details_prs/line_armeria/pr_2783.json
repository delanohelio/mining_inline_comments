{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI5MjkxNTc3", "number": 2783, "title": "Support java.time.Period type for `@Param` annotation", "bodyText": "Motivation\n#2760\nModification\n\nAdd java.time.Period type to AnnotatedServiceTypeUtil's supported element types.\nThe AnnotatedDocServiceTest's unit tests are passed when I added java.time.Period to service.", "createdAt": "2020-06-06T16:16:17Z", "url": "https://github.com/line/armeria/pull/2783", "merged": true, "mergeCommit": {"oid": "418a9a2c031eecc6d698105e0de5cfab970a7030"}, "closed": true, "closedAt": "2020-06-08T06:29:40Z", "author": {"login": "ghkim3221"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcon45lAH2gAyNDI5MjkxNTc3OmEzODQ3MzZhMDUwMGQ0Y2ZhZDE3NjAyN2E0ZDg2MjBkMTI2M2IzZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpKeSzgFqTQyNTk0MzY5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a384736a0500d4cfad176027a4d8620d1263b3d6", "author": {"user": {"login": "ghkim3221", "name": "Gihwan Kim"}}, "url": "https://github.com/line/armeria/commit/a384736a0500d4cfad176027a4d8620d1263b3d6", "committedDate": "2020-06-06T14:11:30Z", "message": "Add Period to supported element types"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a49b87dd72871b32bfeb4183916d3bedf5f4a06", "author": {"user": {"login": "ghkim3221", "name": "Gihwan Kim"}}, "url": "https://github.com/line/armeria/commit/8a49b87dd72871b32bfeb4183916d3bedf5f4a06", "committedDate": "2020-06-06T14:11:30Z", "message": "Add Period to annotated value resolver tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f", "author": {"user": {"login": "ghkim3221", "name": "Gihwan Kim"}}, "url": "https://github.com/line/armeria/commit/dc9b08a8f910f17aa9cfd688b868c3781941753f", "committedDate": "2020-06-06T14:11:30Z", "message": "Add Period to annotated DocService tests"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzUyMDA5", "url": "https://github.com/line/armeria/pull/2783#pullrequestreview-425752009", "createdAt": "2020-06-06T16:29:19Z", "commit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjoyOToyMFrOGgEg7g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjoyOToyMFrOGgEg7g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MTU4Mg==", "bodyText": "Could you update the documentation?\n\n  \n    \n      armeria/site/src/pages/docs/server-annotated-service.mdx\n    \n    \n        Lines 177 to 186\n      in\n      2f27081\n    \n    \n    \n    \n\n        \n          \n           - `boolean` or `Boolean` \n        \n\n        \n          \n           - `byte` or `Byte` \n        \n\n        \n          \n           - `short` or `Short` \n        \n\n        \n          \n           - `integer` or `Integer` \n        \n\n        \n          \n           - `long` or `Long` \n        \n\n        \n          \n           - `float` or `Float` \n        \n\n        \n          \n           - `double` or `Double` \n        \n\n        \n          \n           - `String` \n        \n\n        \n          \n           - `Enum` \n        \n\n        \n          \n           - `UUID`", "url": "https://github.com/line/armeria/pull/2783#discussion_r436281582", "createdAt": "2020-06-06T16:29:20Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceTypeUtil.java", "diffHunk": "@@ -50,6 +51,7 @@\n                     .put(Double.class, Double::valueOf)\n                     .put(String.class, Function.identity())\n                     .put(UUID.class, UUID::fromString)\n+                    .put(Period.class, Period::parse)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1NzUyNjY4", "url": "https://github.com/line/armeria/pull/2783#pullrequestreview-425752668", "createdAt": "2020-06-06T16:39:42Z", "commit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjozOTo0M1rOGgEj4w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wNlQxNjozOTo0M1rOGgEj4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNjI4MjMzOQ==", "bodyText": "Do we need to add a DocService test?\nI think we can test the Period converter by registering an annotated service that takes a Period as a @Param and calling it by a WebClient.\nFor example:\n\n  \n    \n      armeria/core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceRequestConverterTest.java\n    \n    \n        Lines 917 to 923\n      in\n      52fd361\n    \n    \n    \n    \n\n        \n          \n           @Test \n        \n\n        \n          \n           void testDefaultRequestConverter_uuid() { \n        \n\n        \n          \n               final WebClient client = WebClient.of(server.httpUri()); \n        \n\n        \n          \n               final UUID uuid = UUID.randomUUID(); \n        \n\n        \n          \n               final AggregatedHttpResponse response = client.get(\"/2/default/uuid/\" + uuid).aggregate().join(); \n        \n\n        \n          \n               assertThat(response.contentUtf8()).isEqualTo(uuid.toString()); \n        \n\n        \n          \n           }", "url": "https://github.com/line/armeria/pull/2783#discussion_r436282339", "createdAt": "2020-06-06T16:39:43Z", "author": {"login": "ikhoon"}, "path": "core/src/test/java/com/linecorp/armeria/internal/server/annotation/AnnotatedDocServiceTest.java", "diffHunk": "@@ -307,6 +309,19 @@ private static void addJsonMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos\n         methods.add(methodInfo2);\n     }\n \n+    private static void addPeriodMethodInfo(Map<Class<?>, Set<MethodInfo>> methodInfos) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc9b08a8f910f17aa9cfd688b868c3781941753f"}, "originalPosition": 20}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d6d50e45d2bfa3b014f26ecb4c083c493baba52", "author": {"user": {"login": "ghkim3221", "name": "Gihwan Kim"}}, "url": "https://github.com/line/armeria/commit/9d6d50e45d2bfa3b014f26ecb4c083c493baba52", "committedDate": "2020-06-06T16:44:37Z", "message": "Update document"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ff70e8fdae6a9828b5c9121a126549c2c555c3f4", "author": {"user": {"login": "ghkim3221", "name": "Gihwan Kim"}}, "url": "https://github.com/line/armeria/commit/ff70e8fdae6a9828b5c9121a126549c2c555c3f4", "committedDate": "2020-06-06T16:58:36Z", "message": "Add test case for converting Period in annotated service"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODg4NDg2", "url": "https://github.com/line/armeria/pull/2783#pullrequestreview-425888486", "createdAt": "2020-06-08T02:47:17Z", "commit": {"oid": "ff70e8fdae6a9828b5c9121a126549c2c555c3f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1ODk5NDcx", "url": "https://github.com/line/armeria/pull/2783#pullrequestreview-425899471", "createdAt": "2020-06-08T03:43:14Z", "commit": {"oid": "ff70e8fdae6a9828b5c9121a126549c2c555c3f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI1OTQzNjk5", "url": "https://github.com/line/armeria/pull/2783#pullrequestreview-425943699", "createdAt": "2020-06-08T06:29:07Z", "commit": {"oid": "ff70e8fdae6a9828b5c9121a126549c2c555c3f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 190, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}