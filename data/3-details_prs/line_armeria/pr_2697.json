{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE1OTAzMTc1", "number": 2697, "title": "Enable using generated documentation properties files in DocService", "bodyText": "Enables usage of generated properties files from #2640 in DocService. It is only used when no @Description annotation is present.", "createdAt": "2020-05-11T06:47:37Z", "url": "https://github.com/line/armeria/pull/2697", "merged": true, "mergeCommit": {"oid": "be4334d6d7c7c19524ae08e26d8ffb08cda03228"}, "closed": true, "closedAt": "2020-05-21T02:47:12Z", "author": {"login": "hueneburg"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchHsVygFqTQxMTUwMzg0NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjUQvUgFqTQxNTgzODcxMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNTAzODQ0", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-411503844", "createdAt": "2020-05-14T06:40:20Z", "commit": {"oid": "1a46309f63f97756b42014b961baa9bc0fc7a2f8"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNjo0MDoyMFrOGVOAoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwNjo0MzoxN1rOGVOF7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkwMjgxNg==", "bodyText": "How about logging the exception at WARN level?", "url": "https://github.com/line/armeria/pull/2697#discussion_r424902816", "createdAt": "2020-05-14T06:40:20Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceFactory.java", "diffHunk": "@@ -737,6 +743,26 @@ static String findDescription(AnnotatedElement annotatedElement) {\n                 checkArgument(!value.isEmpty(), \"value is empty\");\n                 return value;\n             }\n+        } else if (annotatedElement instanceof Parameter) {\n+            // JavaDoc/KDoc descriptions only exist for method parameters\n+            final Parameter parameter = (Parameter) annotatedElement;\n+            final Executable executable = parameter.getDeclaringExecutable();\n+            final Class<?> clazz = executable.getDeclaringClass();\n+            final String fileName = getFileName(clazz.getCanonicalName());\n+            final String propertyName = executable.getName() + '.' + parameter.getName();\n+            try (InputStream stream = AnnotatedServiceFactory.class.getClassLoader()\n+                                                                   .getResourceAsStream(fileName)) {\n+                if (stream == null) {\n+                    return null;\n+                }\n+                final Properties properties = new Properties();\n+                properties.load(stream);\n+                if (properties.containsKey(propertyName)) {\n+                    return properties.getProperty(propertyName);\n+                }\n+            } catch (IOException exception) {\n+                exception.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a46309f63f97756b42014b961baa9bc0fc7a2f8"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkwMzIxNA==", "bodyText": "Could be moved to com.linecorp.armeria.internal.server.annotation ?", "url": "https://github.com/line/armeria/pull/2697#discussion_r424903214", "createdAt": "2020-05-14T06:41:03Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/server/annotation/helper/ProcessedDocumentationHelper.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.server.annotation.helper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a46309f63f97756b42014b961baa9bc0fc7a2f8"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkwMzUxMw==", "bodyText": "I'm curious if we still need this even after we fixed the directory structure.", "url": "https://github.com/line/armeria/pull/2697#discussion_r424903513", "createdAt": "2020-05-14T06:41:51Z", "author": {"login": "trustin"}, "path": "examples/spring-boot-minimal-kotlin/build.gradle.kts", "diffHunk": "@@ -43,6 +43,10 @@ dependencies {\n     configurations[\"kapt\"].dependencies.add(project(\":annotation-processor\"))\n }\n \n+kapt {\n+    annotationProcessor(\"com.linecorp.armeria.server.annotation.processor.DocumentationProcessor\")\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a46309f63f97756b42014b961baa9bc0fc7a2f8"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDkwNDE3NQ==", "bodyText": "Could we cache this so it's not loaded as many times as the number of service methods?", "url": "https://github.com/line/armeria/pull/2697#discussion_r424904175", "createdAt": "2020-05-14T06:43:17Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceFactory.java", "diffHunk": "@@ -737,6 +743,26 @@ static String findDescription(AnnotatedElement annotatedElement) {\n                 checkArgument(!value.isEmpty(), \"value is empty\");\n                 return value;\n             }\n+        } else if (annotatedElement instanceof Parameter) {\n+            // JavaDoc/KDoc descriptions only exist for method parameters\n+            final Parameter parameter = (Parameter) annotatedElement;\n+            final Executable executable = parameter.getDeclaringExecutable();\n+            final Class<?> clazz = executable.getDeclaringClass();\n+            final String fileName = getFileName(clazz.getCanonicalName());\n+            final String propertyName = executable.getName() + '.' + parameter.getName();\n+            try (InputStream stream = AnnotatedServiceFactory.class.getClassLoader()\n+                                                                   .getResourceAsStream(fileName)) {\n+                if (stream == null) {\n+                    return null;\n+                }\n+                final Properties properties = new Properties();\n+                properties.load(stream);\n+                if (properties.containsKey(propertyName)) {\n+                    return properties.getProperty(propertyName);\n+                }\n+            } catch (IOException exception) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a46309f63f97756b42014b961baa9bc0fc7a2f8"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyMzM1OTA4", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-412335908", "createdAt": "2020-05-15T04:15:08Z", "commit": {"oid": "1ef013ce0900f45aa73975bf317686cc4b02aea2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNDoxNTowOFrOGV16sA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNDoxNTowOFrOGV16sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTU1NjY1Ng==", "bodyText": "from FS. File could be removed for brevity:\n\n\nMissing an\n\n\nNeed to use {} instead of concatenation\n\"Failed to load an API description file: {}\", fileName, exception", "url": "https://github.com/line/armeria/pull/2697#discussion_r425556656", "createdAt": "2020-05-15T04:15:08Z", "author": {"login": "trustin"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/AnnotatedServiceFactory.java", "diffHunk": "@@ -750,18 +759,21 @@ static String findDescription(AnnotatedElement annotatedElement) {\n             final Class<?> clazz = executable.getDeclaringClass();\n             final String fileName = getFileName(clazz.getCanonicalName());\n             final String propertyName = executable.getName() + '.' + parameter.getName();\n+            final Properties cachedProperties = DOCUMENTATION_PROPERTIES_CACHE.getIfPresent(fileName);\n+            if (cachedProperties != null) {\n+                return cachedProperties.getProperty(propertyName);\n+            }\n             try (InputStream stream = AnnotatedServiceFactory.class.getClassLoader()\n                                                                    .getResourceAsStream(fileName)) {\n                 if (stream == null) {\n                     return null;\n                 }\n                 final Properties properties = new Properties();\n                 properties.load(stream);\n-                if (properties.containsKey(propertyName)) {\n-                    return properties.getProperty(propertyName);\n-                }\n+                DOCUMENTATION_PROPERTIES_CACHE.put(fileName, properties);\n+                return properties.getProperty(propertyName);\n             } catch (IOException exception) {\n-                exception.printStackTrace();\n+                logger.warn(\"Error loading API description file from FS. File: \" + fileName, exception);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef013ce0900f45aa73975bf317686cc4b02aea2"}, "originalPosition": 61}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEyNDAzMDg2", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-412403086", "createdAt": "2020-05-15T07:18:41Z", "commit": {"oid": "68a648596b941a77d521db28503e09d3a7693ecc"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwNzoxODo0MlrOGV5Stg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNVQwODo1NDozNlrOGV8Rmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTYxMTk1OA==", "bodyText": "Could you append the stack trace to the warning message so that builder tools such as Maven and Gradle filter the output message with their logging option?\nStringWriter stackTraceWriter = new StringWriter();\ne.printStackTrace(new PrintWriter(stackTraceWriter));\nfullMessage += \"\\n\" + stackTraceWriter.toString();", "url": "https://github.com/line/armeria/pull/2697#discussion_r425611958", "createdAt": "2020-05-15T07:18:42Z", "author": {"login": "ikhoon"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -73,6 +75,9 @@ public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment\n             try {\n                 writeProperties(className, properties);\n             } catch (IOException e) {\n+                processingEnv.getMessager().printMessage(Kind.WARNING,\n+                                                         String.format(\"Could not write properties for `%s`\",\n+                                                                       className));\n                 e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68a648596b941a77d521db28503e09d3a7693ecc"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTYxMjkzNQ==", "bodyText": "Ditto.", "url": "https://github.com/line/armeria/pull/2697#discussion_r425612935", "createdAt": "2020-05-15T07:20:45Z", "author": {"login": "ikhoon"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -122,6 +127,9 @@ private void processAnnotation(TypeElement annotationElement, RoundEnvironment r\n                     try {\n                         processMethod((ExecutableElement) element);\n                     } catch (IOException e) {\n+                        processingEnv.getMessager().printMessage(Kind.ERROR,\n+                                                                 \"Could not process all elements\",\n+                                                                 element);\n                         e.printStackTrace();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68a648596b941a77d521db28503e09d3a7693ecc"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTY2MDgyNw==", "bodyText": "As you know, @param documentation will have a lower priority than a @Description annotation. Could you make a test for it? \ud83d\ude09", "url": "https://github.com/line/armeria/pull/2697#discussion_r425660827", "createdAt": "2020-05-15T08:54:36Z", "author": {"login": "ikhoon"}, "path": "examples/spring-boot-minimal/src/main/java/example/springframework/boot/minimal/HelloAnnotatedService.java", "diffHunk": "@@ -27,6 +27,7 @@ public String defaultHello() {\n \n     /**\n      * An example in order to show how to use validation framework in an annotated HTTP service.\n+     * @param name The name that should be greeted.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "68a648596b941a77d521db28503e09d3a7693ecc"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjMyMTc4", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-413232178", "createdAt": "2020-05-18T02:03:13Z", "commit": {"oid": "2d312e12429080cd315dafcf30ca3c25aae6c4e1"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjowMzoxNFrOGWljtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjowMzoxN1rOGWljwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjMzNzIwNw==", "bodyText": "Should this be WARNING or ERROR?", "url": "https://github.com/line/armeria/pull/2697#discussion_r426337207", "createdAt": "2020-05-18T02:03:14Z", "author": {"login": "trustin"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -73,7 +77,12 @@ public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment\n             try {\n                 writeProperties(className, properties);\n             } catch (IOException e) {\n-                e.printStackTrace();\n+                final StringWriter writer = new StringWriter();\n+                e.printStackTrace(new PrintWriter(writer));\n+                processingEnv.getMessager().printMessage(\n+                        Kind.WARNING,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d312e12429080cd315dafcf30ca3c25aae6c4e1"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjMzNzIxOA==", "bodyText": "Should this be WARNING or ERROR?", "url": "https://github.com/line/armeria/pull/2697#discussion_r426337218", "createdAt": "2020-05-18T02:03:17Z", "author": {"login": "trustin"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -122,7 +131,12 @@ private void processAnnotation(TypeElement annotationElement, RoundEnvironment r\n                     try {\n                         processMethod((ExecutableElement) element);\n                     } catch (IOException e) {\n-                        e.printStackTrace();\n+                        final StringWriter writer = new StringWriter();\n+                        e.printStackTrace(new PrintWriter(writer));\n+                        processingEnv.getMessager().printMessage(\n+                                Kind.ERROR,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d312e12429080cd315dafcf30ca3c25aae6c4e1"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b58f6728717ff496c826664d4d5e78af87e3d65", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/0b58f6728717ff496c826664d4d5e78af87e3d65", "committedDate": "2020-05-18T02:11:38Z", "message": "Enable using generated documentation properties files in DocService"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d0d825a4bd09482d681569b119f7109017ff7da2", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/d0d825a4bd09482d681569b119f7109017ff7da2", "committedDate": "2020-05-18T02:11:38Z", "message": "Fix annotation processor"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5bde7c1f2e5eafc58ef24a661da78d918761b8cd", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/5bde7c1f2e5eafc58ef24a661da78d918761b8cd", "committedDate": "2020-05-18T02:11:38Z", "message": "Apply review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c4b1fe479ca74ce5840199cc2a2fb54d8509f59a", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/c4b1fe479ca74ce5840199cc2a2fb54d8509f59a", "committedDate": "2020-05-18T02:11:38Z", "message": "Apply review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d2e12b0572cfeb61193f828d0937c1897947b22", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/8d2e12b0572cfeb61193f828d0937c1897947b22", "committedDate": "2020-05-18T02:11:38Z", "message": "Add tests and handle stacktrace better"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c3b4dec33d97d116a1ca67f1782d97ca70ebf00", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/4c3b4dec33d97d116a1ca67f1782d97ca70ebf00", "committedDate": "2020-05-18T02:11:38Z", "message": "Fix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b72c0e79aae7b0ff6768819b552cbf81b0f816c", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/2b72c0e79aae7b0ff6768819b552cbf81b0f816c", "committedDate": "2020-05-18T02:11:38Z", "message": "Update DocumentationProcessor.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "92279402d576d45ceedd3d6bdc1c63fb860dbba2", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/92279402d576d45ceedd3d6bdc1c63fb860dbba2", "committedDate": "2020-05-18T02:11:38Z", "message": "Update AnnotatedServiceFactory.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "74de2986f4f532a5a42d4b1c033e3b12df1f8797", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/74de2986f4f532a5a42d4b1c033e3b12df1f8797", "committedDate": "2020-05-18T02:11:44Z", "message": "Add documentation"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c602055561653ed7a8aa8af3a238b4c329c37393", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/c602055561653ed7a8aa8af3a238b4c329c37393", "committedDate": "2020-05-18T02:05:14Z", "message": "Update AnnotatedServiceFactory.java"}, "afterCommit": {"oid": "74de2986f4f532a5a42d4b1c033e3b12df1f8797", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/74de2986f4f532a5a42d4b1c033e3b12df1f8797", "committedDate": "2020-05-18T02:11:44Z", "message": "Add documentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjMzODc2", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-413233876", "createdAt": "2020-05-18T02:11:44Z", "commit": {"oid": "c602055561653ed7a8aa8af3a238b4c329c37393"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjoxMTo0NFrOGWlo9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjoyMTozMVrOGWlvWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjMzODU0OQ==", "bodyText": "writer.toString() -> writer", "url": "https://github.com/line/armeria/pull/2697#discussion_r426338549", "createdAt": "2020-05-18T02:11:44Z", "author": {"login": "minwoox"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -122,7 +131,12 @@ private void processAnnotation(TypeElement annotationElement, RoundEnvironment r\n                     try {\n                         processMethod((ExecutableElement) element);\n                     } catch (IOException e) {\n-                        e.printStackTrace();\n+                        final StringWriter writer = new StringWriter();\n+                        e.printStackTrace(new PrintWriter(writer));\n+                        processingEnv.getMessager().printMessage(\n+                                Kind.ERROR,\n+                                \"Could not process all elements\\n\" + writer.toString(),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c602055561653ed7a8aa8af3a238b4c329c37393"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM0MDEwNQ==", "bodyText": "Let's rephrase a little bit for consistency:\nFailed to write properties for: ...\nAlso, how about using System.lineSeparator()?", "url": "https://github.com/line/armeria/pull/2697#discussion_r426340105", "createdAt": "2020-05-18T02:21:04Z", "author": {"login": "minwoox"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -73,7 +77,12 @@ public boolean process(Set<? extends TypeElement> annotations, RoundEnvironment\n             try {\n                 writeProperties(className, properties);\n             } catch (IOException e) {\n-                e.printStackTrace();\n+                final StringWriter writer = new StringWriter();\n+                e.printStackTrace(new PrintWriter(writer));\n+                processingEnv.getMessager().printMessage(\n+                        Kind.WARNING,\n+                        String.format(\"Could not write properties for: %s\\n%s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "74de2986f4f532a5a42d4b1c033e3b12df1f8797"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM0MDE4Nw==", "bodyText": "ditto", "url": "https://github.com/line/armeria/pull/2697#discussion_r426340187", "createdAt": "2020-05-18T02:21:31Z", "author": {"login": "minwoox"}, "path": "annotation-processor/src/main/java/com/linecorp/armeria/server/annotation/processor/DocumentationProcessor.java", "diffHunk": "@@ -122,7 +131,12 @@ private void processAnnotation(TypeElement annotationElement, RoundEnvironment r\n                     try {\n                         processMethod((ExecutableElement) element);\n                     } catch (IOException e) {\n-                        e.printStackTrace();\n+                        final StringWriter writer = new StringWriter();\n+                        e.printStackTrace(new PrintWriter(writer));\n+                        processingEnv.getMessager().printMessage(\n+                                Kind.ERROR,\n+                                \"Could not process all elements\\n\" + writer.toString(),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjMzODU0OQ=="}, "originalCommit": {"oid": "c602055561653ed7a8aa8af3a238b4c329c37393"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8d3eccfd8658700c21cda52f178d184abf9ec148", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/8d3eccfd8658700c21cda52f178d184abf9ec148", "committedDate": "2020-05-18T02:42:11Z", "message": "Apply review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjQzODAx", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-413243801", "createdAt": "2020-05-18T02:55:35Z", "commit": {"oid": "8d3eccfd8658700c21cda52f178d184abf9ec148"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjo1NTozNVrOGWmIDw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwMjo1NTozNVrOGWmIDw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM0NjUxMQ==", "bodyText": "nit: Could you move this constructor below the static method?\nhttps://line.github.io/armeria/community/developer-guide#organize", "url": "https://github.com/line/armeria/pull/2697#discussion_r426346511", "createdAt": "2020-05-18T02:55:35Z", "author": {"login": "ikhoon"}, "path": "core/src/main/java/com/linecorp/armeria/internal/server/annotation/ProcessedDocumentationHelper.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Copyright 2020 LINE Corporation\n+ *\n+ * LINE Corporation licenses this file to you under the Apache License,\n+ * version 2.0 (the \"License\"); you may not use this file except in compliance\n+ * with the License. You may obtain a copy of the License at:\n+ *\n+ *   https://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package com.linecorp.armeria.internal.server.annotation;\n+\n+/**\n+ * Helper class for Documentation processing.\n+ */\n+public final class ProcessedDocumentationHelper {\n+    private ProcessedDocumentationHelper() {}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8d3eccfd8658700c21cda52f178d184abf9ec148"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24e1492942d4fd3380d1ff80a342b92863f1c24f", "author": {"user": {"login": "hueneburg", "name": "Armin H\u00fcneburg"}}, "url": "https://github.com/line/armeria/commit/24e1492942d4fd3380d1ff80a342b92863f1c24f", "committedDate": "2020-05-21T01:08:59Z", "message": "Apply reviews"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODM1Njg4", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-415835688", "createdAt": "2020-05-21T02:19:15Z", "commit": {"oid": "24e1492942d4fd3380d1ff80a342b92863f1c24f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMjoxOToxNVrOGYkAxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMVQwMjoxOToxNVrOGYkAxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyODQwOTAzMQ==", "bodyText": "Gradle", "url": "https://github.com/line/armeria/pull/2697#discussion_r428409031", "createdAt": "2020-05-21T02:19:15Z", "author": {"login": "trustin"}, "path": "site/src/pages/docs/server-docservice.mdx", "diffHunk": "@@ -218,3 +220,33 @@ For gRPC:\n       ...\n   }\n   ```\n+\n+  Using JavaDoc:\n+\n+  This only works with method parameters.\n+  To enable it, you have to add the armeria annotation processor to your project:\n+\n+  Groovy configuration:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "24e1492942d4fd3380d1ff80a342b92863f1c24f"}, "originalPosition": 35}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cadfc8ee2fb2078ee4e200098d1c2f7696109416", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/cadfc8ee2fb2078ee4e200098d1c2f7696109416", "committedDate": "2020-05-21T02:20:05Z", "message": "Update server-docservice.mdx"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODM2MDAz", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-415836003", "createdAt": "2020-05-21T02:20:14Z", "commit": {"oid": "cadfc8ee2fb2078ee4e200098d1c2f7696109416"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1ODM4NzEz", "url": "https://github.com/line/armeria/pull/2697#pullrequestreview-415838713", "createdAt": "2020-05-21T02:29:49Z", "commit": {"oid": "cadfc8ee2fb2078ee4e200098d1c2f7696109416"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 459, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}