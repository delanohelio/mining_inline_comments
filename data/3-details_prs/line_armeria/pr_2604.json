{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwMjkxMTUy", "number": 2604, "title": "Switch from TSLint to ESLint", "bodyText": "Related issues: #2054\nMotivation:\nTSLint is officially announced to be deprecated in 2019.\nModifications:\n\nReplace TSLint with ESLint\nPlace eslintrc.js in settings/eslint so that other frontend\nmodules (e.g. Gatsby) can use it as well.\n\nResult:\n\nNew and shiny linting", "createdAt": "2020-03-18T08:28:34Z", "url": "https://github.com/line/armeria/pull/2604", "merged": true, "mergeCommit": {"oid": "7f89c81dab44931764bf943910190cd1cf72f643"}, "closed": true, "closedAt": "2020-03-19T15:51:23Z", "author": {"login": "trustin"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOzFoiAFqTM3NjY1MTUzOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPLz1RgFqTM3NzcxMDIyNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NjUxNTM4", "url": "https://github.com/line/armeria/pull/2604#pullrequestreview-376651538", "createdAt": "2020-03-18T08:32:20Z", "commit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODozMjoyMFrOF36qqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODozMjoyMFrOF36qqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3NzE5Mg==", "bodyText": "This is the only customization I did except applying the recommended presets below.", "url": "https://github.com/line/armeria/pull/2604#discussion_r394177192", "createdAt": "2020-03-18T08:32:20Z", "author": {"login": "trustin"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,66 @@\n+const commonParserOptions = {\n+  ecmaFeatures: {\n+    jsx: true,\n+  },\n+  ecmaVersion: '2020',\n+  sourceType: 'module',\n+};\n+\n+const commonRules = {\n+  'prettier/prettier': [\n+    'error',\n+    {\n+      singleQuote: true,\n+      jsxSingleQuote: true,\n+      trailingComma: 'all',\n+    },\n+  ],", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 17}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc2NjUwNDgz", "url": "https://github.com/line/armeria/pull/2604#pullrequestreview-376650483", "createdAt": "2020-03-18T08:30:36Z", "commit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODozMDozNlrOF36nMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOFQwODozODozMFrOF362og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3NjMwNw==", "bodyText": "We could also just move everything into dependencies. For apps not published to NPM it's one reasonable convention, which is followed by create-react-app", "url": "https://github.com/line/armeria/pull/2604#discussion_r394176307", "createdAt": "2020-03-18T08:30:36Z", "author": {"login": "anuraaga"}, "path": "docs-client/.eslintrc.js", "diffHunk": "@@ -0,0 +1,8 @@\n+const defaultConfig = require('../settings/eslint/eslintrc');\n+\n+// Ignore 'webpack.config.ts' so that it doesn't complain that\n+// some dependencies must be moved from devDependencies to dependencies.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3Njc5MA==", "bodyText": "Let's put these in .prettierrc.js since it will have better support with IDEs", "url": "https://github.com/line/armeria/pull/2604#discussion_r394176790", "createdAt": "2020-03-18T08:31:33Z", "author": {"login": "anuraaga"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,66 @@\n+const commonParserOptions = {\n+  ecmaFeatures: {\n+    jsx: true,\n+  },\n+  ecmaVersion: '2020',\n+  sourceType: 'module',\n+};\n+\n+const commonRules = {\n+  'prettier/prettier': [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3Nzc2MQ==", "bodyText": "Are these options needed? I've never seen them defined without losing any linting", "url": "https://github.com/line/armeria/pull/2604#discussion_r394177761", "createdAt": "2020-03-18T08:33:23Z", "author": {"login": "anuraaga"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,66 @@\n+const commonParserOptions = {\n+  ecmaFeatures: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3ODg2Mw==", "bodyText": "Maybe better to leave this as default", "url": "https://github.com/line/armeria/pull/2604#discussion_r394178863", "createdAt": "2020-03-18T08:35:37Z", "author": {"login": "anuraaga"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,66 @@\n+const commonParserOptions = {\n+  ecmaFeatures: {\n+    jsx: true,\n+  },\n+  ecmaVersion: '2020',\n+  sourceType: 'module',\n+};\n+\n+const commonRules = {\n+  'prettier/prettier': [\n+    'error',\n+    {\n+      singleQuote: true,\n+      jsxSingleQuote: true,\n+      trailingComma: 'all',\n+    },\n+  ],\n+};\n+\n+module.exports = {\n+  globals: {\n+    Atomics: 'readonly',\n+    SharedArrayBuffer: 'readonly',\n+  },\n+  ignorePatterns: ['node_modules/', 'public/', 'build/', '!.*.js', '!.*.json'],\n+  // Settings for .js, .jsx and .json\n+  parser: 'babel-eslint',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3OTMwNA==", "bodyText": "Instead of globals, does this work?\nenv: {\n  browser: true, // Since we run in browser\n  jest: true, // Since we wish we had unit tests\n}", "url": "https://github.com/line/armeria/pull/2604#discussion_r394179304", "createdAt": "2020-03-18T08:36:34Z", "author": {"login": "anuraaga"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,66 @@\n+const commonParserOptions = {\n+  ecmaFeatures: {\n+    jsx: true,\n+  },\n+  ecmaVersion: '2020',\n+  sourceType: 'module',\n+};\n+\n+const commonRules = {\n+  'prettier/prettier': [\n+    'error',\n+    {\n+      singleQuote: true,\n+      jsxSingleQuote: true,\n+      trailingComma: 'all',\n+    },\n+  ],\n+};\n+\n+module.exports = {\n+  globals: {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE4MDI1OA==", "bodyText": "I think instead of javascript, it could be better to just use eslint's default functionality with extends", "url": "https://github.com/line/armeria/pull/2604#discussion_r394180258", "createdAt": "2020-03-18T08:38:30Z", "author": {"login": "anuraaga"}, "path": "docs-client/.eslintrc.js", "diffHunk": "@@ -0,0 +1,8 @@\n+const defaultConfig = require('../settings/eslint/eslintrc');", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 1}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDEyOTYw", "url": "https://github.com/line/armeria/pull/2604#pullrequestreview-377412960", "createdAt": "2020-03-19T04:14:36Z", "commit": {"oid": "e93516d1d76888a182cbbc3bbcd07124e0546377"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDoxNDozNlrOF4fj4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQwNDoxNzo0MVrOF4fmJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4MTY2Ng==", "bodyText": "Technically everything is only when building since we build a bundle rather than publishing anything - I think that's why create-react-app follows that convention. But it's ok if it's easy to ignore files too", "url": "https://github.com/line/armeria/pull/2604#discussion_r394781666", "createdAt": "2020-03-19T04:14:36Z", "author": {"login": "anuraaga"}, "path": "docs-client/.eslintrc.js", "diffHunk": "@@ -0,0 +1,8 @@\n+const defaultConfig = require('../settings/eslint/eslintrc');\n+\n+// Ignore 'webpack.config.ts' so that it doesn't complain that\n+// some dependencies must be moved from devDependencies to dependencies.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDE3NjMwNw=="}, "originalCommit": {"oid": "13712e6c2a817466a2a6a1c4b0b0bf31a145c3f3"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4MTk4NA==", "bodyText": "Ah yeah it's true probably need the react version as well when disabling this.", "url": "https://github.com/line/armeria/pull/2604#discussion_r394781984", "createdAt": "2020-03-19T04:16:17Z", "author": {"login": "anuraaga"}, "path": "settings/eslint/eslintrc.js", "diffHunk": "@@ -0,0 +1,82 @@\n+const commonParserOptions = {\n+  ecmaVersion: '2020',\n+  sourceType: 'module',\n+};\n+\n+const commonRules = {\n+  'class-methods-use-this': 'off',\n+  'eslint-comments/no-unused-disable': 'error',\n+  'import/export': 'off',\n+  'import/no-cycle': 'off',\n+  'import/no-named-as-default': 'off',\n+  'import/no-useless-path-segments': 'off',\n+  'import/prefer-default-export': 'off',\n+  'prefer-destructuring': 'off',", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e93516d1d76888a182cbbc3bbcd07124e0546377"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NDc4MjI0NA==", "bodyText": "Ah just noticed this - I think this is a pretty rare configuration since JSX is basically XML. Up to you but I think most projects use double quote in JSX.", "url": "https://github.com/line/armeria/pull/2604#discussion_r394782244", "createdAt": "2020-03-19T04:17:41Z", "author": {"login": "anuraaga"}, "path": "settings/prettier/prettierrc.js", "diffHunk": "@@ -0,0 +1,5 @@\n+module.exports = {\n+  singleQuote: true,\n+  jsxSingleQuote: true,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e93516d1d76888a182cbbc3bbcd07124e0546377"}, "originalPosition": 3}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e93516d1d76888a182cbbc3bbcd07124e0546377", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/e93516d1d76888a182cbbc3bbcd07124e0546377", "committedDate": "2020-03-18T10:35:14Z", "message": "Auto-fix many things / Playing with eslint-plugin-eslint-comments"}, "afterCommit": {"oid": "a9ca3c303fb3d6aab100655f2c045865c6e0126e", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/a9ca3c303fb3d6aab100655f2c045865c6e0126e", "committedDate": "2020-03-19T05:27:49Z", "message": "Turn off `jsxSingleQuote` and `react/destructuring-assignment`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ded5b2bf52057b02fd6219ccd05d01789fe2f13", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/8ded5b2bf52057b02fd6219ccd05d01789fe2f13", "committedDate": "2020-03-19T06:35:28Z", "message": "Switch from TSLint to ESLint\n\nRelated issues: #2054\n\nMotivation:\n\nTSLint is officially announced to be deprecated in 2019.\n\nModifications:\n\n- Replace TSLint with ESLint\n- Fix some linting errors\n- Place `eslintrc.js` and `prettierrc.js` under `settings/` so that\n  other frontend modules (e.g. Gatsby) can use it as well.\n\nResult:\n\n- New and shiny linting"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04299f47b252532f5a6e21cb4584caf13afc2eac", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/04299f47b252532f5a6e21cb4584caf13afc2eac", "committedDate": "2020-03-19T06:27:36Z", "message": "Fix all linting errors"}, "afterCommit": {"oid": "8ded5b2bf52057b02fd6219ccd05d01789fe2f13", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/8ded5b2bf52057b02fd6219ccd05d01789fe2f13", "committedDate": "2020-03-19T06:35:28Z", "message": "Switch from TSLint to ESLint\n\nRelated issues: #2054\n\nMotivation:\n\nTSLint is officially announced to be deprecated in 2019.\n\nModifications:\n\n- Replace TSLint with ESLint\n- Fix some linting errors\n- Place `eslintrc.js` and `prettierrc.js` under `settings/` so that\n  other frontend modules (e.g. Gatsby) can use it as well.\n\nResult:\n\n- New and shiny linting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "79013424b9452c22afb3f9941ecec07223e149a1", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/79013424b9452c22afb3f9941ecec07223e149a1", "committedDate": "2020-03-19T06:43:28Z", "message": "Move build-time dependencies to `devDependencies`"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NDgzMjUz", "url": "https://github.com/line/armeria/pull/2604#pullrequestreview-377483253", "createdAt": "2020-03-19T07:45:30Z", "commit": {"oid": "79013424b9452c22afb3f9941ecec07223e149a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cda15485464f5257e2b0828132eadb7b1c66297b", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/cda15485464f5257e2b0828132eadb7b1c66297b", "committedDate": "2020-03-19T09:01:54Z", "message": "Remove `@ts-ignore`"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86046fc1c98151ddc03bfbd6812eec0d723dd7be", "author": {"user": {"login": "trustin", "name": "Trustin Lee"}}, "url": "https://github.com/line/armeria/commit/86046fc1c98151ddc03bfbd6812eec0d723dd7be", "committedDate": "2020-03-19T09:22:06Z", "message": "Revert \"Remove `@ts-ignore`\"\n\nThis reverts commit cda15485464f5257e2b0828132eadb7b1c66297b."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc3NzEwMjI0", "url": "https://github.com/line/armeria/pull/2604#pullrequestreview-377710224", "createdAt": "2020-03-19T13:20:31Z", "commit": {"oid": "86046fc1c98151ddc03bfbd6812eec0d723dd7be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 706, "cost": 1, "resetAt": "2021-10-28T18:54:27Z"}}}