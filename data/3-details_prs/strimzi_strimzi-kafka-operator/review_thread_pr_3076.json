{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIxNzg0NTM1", "number": 3076, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNDozMDoyOFrOD--JhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNDozMDoyOFrOD--JhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3MzU2NTQ5OnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/operator/resource/StatefulSetDiff.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNDozMDoyOFrOGZZROg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNDozMDoyOFrOGZZROg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI4MTU5NA==", "bodyText": "I think you should try to optimize the code a bit. You should probably first check the path whether it matches the VOLUME_SIZE path. Only then you should do the lookups.\nIf you keep using separate method for it, it migth also make more sense to have a method isVolumeSizeChanged instead of using ``isvolumeSizeEqual`. It will make the code more readable.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3076#discussion_r429281594", "createdAt": "2020-05-22T14:30:28Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/operator/resource/StatefulSetDiff.java", "diffHunk": "@@ -107,7 +108,7 @@ public StatefulSetDiff(StatefulSet current, StatefulSet desired) {\n             // Any volume claim template changes apart from size change should trigger rolling update\n             // Size changes should not trigger rolling update. Therefore we need to separate these two in the diff.\n             changesVolumeClaimTemplate |= equalsOrPrefix(\"/spec/volumeClaimTemplates\", pathValue) && !VOLUME_SIZE.matcher(pathValue).matches();\n-            changesVolumeSize |= VOLUME_SIZE.matcher(pathValue).matches();\n+            changesVolumeSize |= !isVolumeSizeEqual(pathValue, lookupPath(source, pathValue), lookupPath(target, pathValue));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c80c1973754686281ed9e9e041f67a60d83224f3"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 102, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}