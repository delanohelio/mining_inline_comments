{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA2MjU3Mjg2", "number": 2865, "title": "[systemtest] Fix of two failing tests", "bodyText": "Signed-off-by: Lukas Kral lkral@redhat.com\nType of change\n\nBugfix\n\nDescription\nThis PR gonna fix two of our failing tests:\ntestClusterCaRemovedTriggersRollingUpdate - here was problem with rolling update - in original test there is only wait for Kafka rolling update, but Zookeeper is rolled before Kafka -> I added wait for Zookeeper rolling update and now should be problem fixed - the timeout here was too short.\ntestKafkaConnectWithFileSinkPlugin - here was problem sending messages - network policies block communication, so we are using KafkaClients pod with network policies set and option to send messages.\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-04-20T19:30:43Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865", "merged": true, "mergeCommit": {"oid": "182121a9bd2d8f5f5b540ea18679bdd530212c57"}, "closed": true, "closedAt": "2020-04-21T10:25:28Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcZkLfFgH2gAyNDA2MjU3Mjg2OjQ1YjBlYTdkMGFlNmM1NWQ5MWJkYjBkNDNmYzE4YzA5ZWYwMjZjYzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZvzoFgFqTM5NzEyNjE0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0", "committedDate": "2020-04-20T19:23:19Z", "message": "fixes of two failing tests\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2ODE1OTM1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865#pullrequestreview-396815935", "createdAt": "2020-04-20T21:11:29Z", "commit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDIyMzE5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865#pullrequestreview-397022319", "createdAt": "2020-04-21T06:29:45Z", "commit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjoyOTo0NVrOGI0vhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMVQwNjoyOTo0NVrOGI0vhw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMTkwNTkyNw==", "bodyText": "Just a philosophical question. Is not waiting for rolling of Kafka sufficient? Kafka starts rolling only if the ZK finishes RU, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865#discussion_r411905927", "createdAt": "2020-04-21T06:29:45Z", "author": {"login": "sknot-rh"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/RollingUpdateST.java", "diffHunk": "@@ -867,6 +867,7 @@ void testClusterCaRemovedTriggersRollingUpdate() {\n \n         // some kind of accident happened and the CA secret has been deleted\n         kubeClient().deleteSecret(KafkaResources.clusterCaKeySecretName(CLUSTER_NAME));\n+        StatefulSetUtils.waitTillSsHasRolled(KafkaResources.zookeeperStatefulSetName(CLUSTER_NAME), 3, zkPods);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MDM2MjI2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865#pullrequestreview-397036226", "createdAt": "2020-04-21T06:54:53Z", "commit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MTI2MTQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2865#pullrequestreview-397126147", "createdAt": "2020-04-21T08:56:07Z", "commit": {"oid": "45b0ea7d0ae6c55d91bdb0d43fc18c09ef026cc0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1914, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}