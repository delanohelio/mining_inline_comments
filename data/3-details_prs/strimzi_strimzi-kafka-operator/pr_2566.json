{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MTY2ODA4", "number": 2566, "title": "[systemtest] Add test for KafkaStatus certificate", "bodyText": "Type of change\n\nBugfix\nEnhancement / new feature\n\nDescription\nAdd new asserts that checks if certs from KafkaStatus and secret certs are matching (both external and internal TLS).\nAlso add test that checks if certs are present in KafkaStatus and if they are matching with secret certs.\nShould fix tests from ListenersST (failed in nightly jobs)\nTesting: https://issues.redhat.com/browse/ENTMQST-1103\nChecklist\n\n Write tests\n Make sure all tests pass", "createdAt": "2020-02-17T14:29:09Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566", "merged": true, "mergeCommit": {"oid": "61902d35984efe7a31e91090341af9273383d9f4"}, "closed": true, "closedAt": "2020-02-18T17:01:12Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFO0vhgBqjMwNDQwOTYwMDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFhwx1gFqTM2MDMyNjgyMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "415f66ed5e031cdfb1aca20a05fa87d6b9611dbd", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/415f66ed5e031cdfb1aca20a05fa87d6b9611dbd", "committedDate": "2020-02-17T14:20:25Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}, "afterCommit": {"oid": "04dde468ec1e0d1311fc99f3c5ef21e7cac6e86d", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/04dde468ec1e0d1311fc99f3c5ef21e7cac6e86d", "committedDate": "2020-02-17T15:11:24Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c5e29edc8202fc1f3f9ef3d5c05b2fd8522aed96", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c5e29edc8202fc1f3f9ef3d5c05b2fd8522aed96", "committedDate": "2020-02-17T15:30:45Z", "message": "Add new asserts for check if certs are matching in KafkaStatus\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c545059fc3e9277d1bfe493b92197856d16b9f2", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7c545059fc3e9277d1bfe493b92197856d16b9f2", "committedDate": "2020-02-17T15:30:45Z", "message": "Change method for deploying verticle\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "776602469bdb3876a99c606693b07033a4dad978", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/776602469bdb3876a99c606693b07033a4dad978", "committedDate": "2020-02-17T15:30:45Z", "message": "Add test for checking certs from KafkaStatus\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "14e9a7afaef5b73f50ed4a21bf851c2f4582421b", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/14e9a7afaef5b73f50ed4a21bf851c2f4582421b", "committedDate": "2020-02-17T15:30:45Z", "message": "Add functions for obtaining certs from KafkaStatus and secret certs\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "04dde468ec1e0d1311fc99f3c5ef21e7cac6e86d", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/04dde468ec1e0d1311fc99f3c5ef21e7cac6e86d", "committedDate": "2020-02-17T15:11:24Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}, "afterCommit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6a1d990346fe2d957c4c416033aa70012af2359c", "committedDate": "2020-02-17T15:35:14Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjYwMDIz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#pullrequestreview-360260023", "createdAt": "2020-02-18T11:22:05Z", "commit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjYxNDc4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#pullrequestreview-360261478", "createdAt": "2020-02-18T11:24:30Z", "commit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMjcyNjk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#pullrequestreview-360272694", "createdAt": "2020-02-18T11:44:24Z", "commit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTo0NDoyNFrOFq_TlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOFQxMTo0NDoyNFrOFq_TlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MDYyMTcxNw==", "bodyText": "why reading the CA cert twice?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#discussion_r380621717", "createdAt": "2020-02-18T11:44:24Z", "author": {"login": "ppatierno"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/kafka/ListenersST.java", "diffHunk": "@@ -372,6 +374,17 @@ void testCustomCertNodePortAndTlsRollingUpdate() throws Exception {\n \n         KafkaUser aliceUser = KafkaUserResource.tlsUser(CLUSTER_NAME, userName).done();\n \n+        String externalCerts = getKafkaStatusCertificates(\"external\", NAMESPACE, CLUSTER_NAME);\n+        String externalSecretCerts = getKafkaSecretCertificates(CLUSTER_NAME + \"-cluster-ca-cert\", \"ca.crt\");\n+\n+        String internalCerts = getKafkaStatusCertificates(\"tls\", NAMESPACE, CLUSTER_NAME);\n+        String internalSecretCerts = getKafkaSecretCertificates(CLUSTER_NAME + \"-cluster-ca-cert\", \"ca.crt\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f59bd43f36316a1709312f115077c3f587ea4e4", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5f59bd43f36316a1709312f115077c3f587ea4e4", "committedDate": "2020-02-18T11:52:57Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a1d990346fe2d957c4c416033aa70012af2359c", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6a1d990346fe2d957c4c416033aa70012af2359c", "committedDate": "2020-02-17T15:35:14Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}, "afterCommit": {"oid": "5f59bd43f36316a1709312f115077c3f587ea4e4", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5f59bd43f36316a1709312f115077c3f587ea4e4", "committedDate": "2020-02-18T11:52:57Z", "message": "Add and change functions for creating consumer and producer - used to send/consume TLS messages\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzA4MjQ1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#pullrequestreview-360308245", "createdAt": "2020-02-18T12:46:21Z", "commit": {"oid": "5f59bd43f36316a1709312f115077c3f587ea4e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzI2ODIy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2566#pullrequestreview-360326822", "createdAt": "2020-02-18T13:15:51Z", "commit": {"oid": "5f59bd43f36316a1709312f115077c3f587ea4e4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1726, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}