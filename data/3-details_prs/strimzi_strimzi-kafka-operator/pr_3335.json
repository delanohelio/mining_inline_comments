{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMDgzMTMz", "number": 3335, "title": "Add bridge alert examples", "bodyText": "Signed-off-by: Stanislav Knot sknot@redhat.com\nType of change\n\nEnhancement / new feature\n\nDescription\nAdd bridge alert examples described in #3327\nFixes #3327\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-07-17T12:15:14Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3335", "merged": true, "mergeCommit": {"oid": "4e51fec25b4e7197bb85a72e6d62c27b751ed7ec"}, "closed": true, "closedAt": "2020-09-02T18:25:55Z", "author": {"login": "sknot-rh"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1y2i7ABqjM1NTc4ODAyNjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEunSugFqTQ4MDE0Mjg2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4f1853845f11a94d57b4ab8ccfe886068bc7ebd1", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4f1853845f11a94d57b4ab8ccfe886068bc7ebd1", "committedDate": "2020-07-17T12:14:13Z", "message": "Add bridge alert examples\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "5a081ec44f577d45048f9fb0e15c542b8ea09fb5", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a081ec44f577d45048f9fb0e15c542b8ea09fb5", "committedDate": "2020-07-17T12:18:39Z", "message": "Add bridge alert examples\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUwOTcyMzg4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3335#pullrequestreview-450972388", "createdAt": "2020-07-17T21:44:21Z", "commit": {"oid": "5a081ec44f577d45048f9fb0e15c542b8ea09fb5"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo0NDoyMVrOGzh-Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xN1QyMTo0NDoyMVrOGzh-Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NjY4NzE1OQ==", "bodyText": "Out of curiosity, how did you come up with the value of 10 (ms I guess?)?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3335#discussion_r456687159", "createdAt": "2020-07-17T21:44:21Z", "author": {"login": "scholzj"}, "path": "examples/metrics/prometheus-install/prometheus-rules.yaml", "diffHunk": "@@ -185,6 +185,46 @@ spec:\n       annotations:\n         summary: 'All Kafka Bridge containers down or in CrashLookBackOff status'\n         description: 'All Kafka Bridge containers have been down or in CrashLookBackOff status for 3 minutes'\n+    - alert: AvgProducerLatency\n+      expr: strimzi_bridge_kafka_producer_request_latency_avg > 10\n+      for: 10s\n+      labels:\n+        severity: warning\n+      annotations:\n+        summary: 'Kafka Bridge average consumer fetch latency'\n+        description: 'The average fetch latency is {{ $value }} on {{ $labels.clientId }}'\n+    - alert: AvgConsumerFetchLatency\n+      expr: strimzi_bridge_kafka_consumer_fetch_latency_avg > 10\n+      for: 10s\n+      labels:\n+        severity: warning\n+      annotations:\n+        summary: 'Kafka Bridge consumer average fetch latency'\n+        description: 'The average consumer commit latency is {{ $value }} on {{ $labels.clientId }}'\n+    - alert: AvgConsumerCommitLatency\n+      expr: strimzi_bridge_kafka_consumer_commit_latency_avg > 10\n+      for: 10s\n+      labels:\n+        severity: warning\n+      annotations:\n+        summary: 'Kafka Bridge consumer average commit latency'\n+        description: 'The average consumer commit latency is {{ $value }} on {{ $labels.clientId }}'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5a081ec44f577d45048f9fb0e15c542b8ea09fb5"}, "originalPosition": 27}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "253dc3bfa62aa08ee134df80d7e35cabbfab1381", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/253dc3bfa62aa08ee134df80d7e35cabbfab1381", "committedDate": "2020-08-17T08:00:37Z", "message": "Add bridge alert examples\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00396c3d324f428d1cd0c5049a1464815f0b69be", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/00396c3d324f428d1cd0c5049a1464815f0b69be", "committedDate": "2020-08-17T08:44:21Z", "message": "adjust values after test\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5a081ec44f577d45048f9fb0e15c542b8ea09fb5", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a081ec44f577d45048f9fb0e15c542b8ea09fb5", "committedDate": "2020-07-17T12:18:39Z", "message": "Add bridge alert examples\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "00396c3d324f428d1cd0c5049a1464815f0b69be", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/00396c3d324f428d1cd0c5049a1464815f0b69be", "committedDate": "2020-08-17T08:44:21Z", "message": "adjust values after test\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NTI0NzQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3335#pullrequestreview-479524747", "createdAt": "2020-09-01T08:43:36Z", "commit": {"oid": "00396c3d324f428d1cd0c5049a1464815f0b69be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwMTQyODYy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3335#pullrequestreview-480142862", "createdAt": "2020-09-01T21:51:29Z", "commit": {"oid": "00396c3d324f428d1cd0c5049a1464815f0b69be"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1323, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}