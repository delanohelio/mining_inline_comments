{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczMjk3OTE2", "number": 2530, "title": "ST: Add test which check kubectl get strimzi", "bodyText": "Signed-off-by: Jakub Stejskal xstejs24@gmail.com\nType of change\n\nEnhancement / new feature\n\nDescription\nAdd systemtest coverage for #2434.\nIn general, test only check that kubectl get strimzi list all resources which should be here and it don't return any error status. The reason why I pick LogSettingST is, that class contains most of the resources available after BeforeAll phase.\nChecklist\n\n Write tests\n Make sure all tests pass", "createdAt": "2020-02-10T18:57:50Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530", "merged": true, "mergeCommit": {"oid": "6f074ba22d12c382ad96d15f792470c3302308fe"}, "closed": true, "closedAt": "2020-02-13T09:42:54Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDBlxYgH2gAyMzczMjk3OTE2OjEzYzVkOGQ0NTdmMTY0OGUyODIzNWIxNjZhNmRmMmViZjU2OTg4MTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcD2iC_gH2gAyMzczMjk3OTE2OmNhZmJhZDIwZGQ2MmI0ZWRkYzk2YTZhNTlmOGJkZDE1Y2QxOWQ3ODM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/13c5d8d457f1648e28235b166a6df2ebf5698817", "committedDate": "2020-02-10T18:39:01Z", "message": "Add test which check kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDQ4Mzcz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356448373", "createdAt": "2020-02-11T07:16:21Z", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDc5MjY4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356479268", "createdAt": "2020-02-11T08:36:36Z", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDg0MTEy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356484112", "createdAt": "2020-02-11T08:46:06Z", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwODo0NjowN1rOFoAy6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQwODo0NjowN1rOFoAy6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzUwMDM5Mw==", "bodyText": "is there a plan for some other test to check that even Kafka Bridge, Mirror Maker, Mirror Maker 2 and Connect are there as well?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377500393", "createdAt": "2020-02-11T08:46:07Z", "author": {"login": "ppatierno"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/LogSettingST.java", "diffHunk": "@@ -245,6 +249,23 @@ void testGcLoggingSetDisabled() {\n         assertThat(\"Mirror-maker GC logging is disabled\", checkGcLoggingDeployments(KafkaMirrorMakerResources.deploymentName(CLUSTER_NAME)), is(false));\n     }\n \n+    @Test\n+    @Order(11)\n+    void testKubectlGetStrimzi() {\n+        String userName = \"test-user\";\n+        String topicName = \"test-topic\";\n+\n+        KafkaTopicResource.topic(CLUSTER_NAME, topicName).done();\n+        KafkaUserResource.tlsUser(CLUSTER_NAME, userName).done();\n+\n+        String strimziCRs = cmdKubeClient().execInCurrentNamespace(\"get\", \"strimzi\").out();\n+\n+        assertThat(strimziCRs, containsString(CLUSTER_NAME));\n+        assertThat(strimziCRs, containsString(GC_LOGGING_SET_NAME));\n+        assertThat(strimziCRs, containsString(userName));\n+        assertThat(strimziCRs, containsString(topicName));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDg3MDA4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356487008", "createdAt": "2020-02-11T08:51:45Z", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NDg5MDA2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356489006", "createdAt": "2020-02-11T08:55:20Z", "commit": {"oid": "13c5d8d457f1648e28235b166a6df2ebf5698817"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4192a1f8e8c49637d84ac9abce3ff643ce5a8acb", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4192a1f8e8c49637d84ac9abce3ff643ce5a8acb", "committedDate": "2020-02-11T12:29:13Z", "message": "Fix mm2 visibility by kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjIyMzQ0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356622344", "createdAt": "2020-02-11T12:38:03Z", "commit": {"oid": "4192a1f8e8c49637d84ac9abce3ff643ce5a8acb"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjozODowNFrOFoHYyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMVQxMjozODowNFrOFoHYyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzYwODM5NA==", "bodyText": "You have to build api module and do make crd_install to propagate this change into CRD files.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#discussion_r377608394", "createdAt": "2020-02-11T12:38:04Z", "author": {"login": "sknot-rh"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaMirrorMaker2.java", "diffHunk": "@@ -36,7 +37,8 @@\n                 names = @Crd.Spec.Names(\n                         kind = KafkaMirrorMaker2.RESOURCE_KIND,\n                         plural = KafkaMirrorMaker2.RESOURCE_PLURAL,\n-                        shortNames = {KafkaMirrorMaker2.SHORT_NAME}\n+                        shortNames = {KafkaMirrorMaker2.SHORT_NAME},\n+                        categories = {STRIMZI_CATEGORY}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4192a1f8e8c49637d84ac9abce3ff643ce5a8acb"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53c8f829551b3dece20e3cc8f6d3f423f2af01ee", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/53c8f829551b3dece20e3cc8f6d3f423f2af01ee", "committedDate": "2020-02-11T12:59:08Z", "message": "fixup! Fix mm2 visibility by kubectl get strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NjQxNzIy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2530#pullrequestreview-356641722", "createdAt": "2020-02-11T13:10:08Z", "commit": {"oid": "53c8f829551b3dece20e3cc8f6d3f423f2af01ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3b851f9c43e70904b1adacc6435f718a48a38b0", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a3b851f9c43e70904b1adacc6435f718a48a38b0", "committedDate": "2020-02-11T16:42:34Z", "message": "Fix mm2 deployment\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2ace91598ea1c12b0c9df7e1305c16932bd1e3a2", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2ace91598ea1c12b0c9df7e1305c16932bd1e3a2", "committedDate": "2020-02-12T14:35:37Z", "message": "Remove mm2, caus eit's not working properly\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "114a80499cacc97762a2d35e4e2242f6b5907205", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/114a80499cacc97762a2d35e4e2242f6b5907205", "committedDate": "2020-02-13T07:35:16Z", "message": "Revert \"Remove mm2, caus eit's not working properly\"\n\nThis reverts commit 2ace91598ea1c12b0c9df7e1305c16932bd1e3a2.\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cafbad20dd62b4eddc96a6a59f8bdd15cd19d783", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cafbad20dd62b4eddc96a6a59f8bdd15cd19d783", "committedDate": "2020-02-13T08:19:55Z", "message": "Disable testGcLoggingSetDisabled cause issue in kafka rolling update\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1701, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}