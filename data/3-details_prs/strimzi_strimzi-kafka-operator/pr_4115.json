{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQwODAzMjY2", "number": 4115, "title": "Add support for Kafka 2.7.0", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis is a draft PR for Kafka 2.7.0 support. It is currently based on the RC5 release.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-12-16T00:15:35Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115", "merged": true, "mergeCommit": {"oid": "9044ef9a023743c335ab8e574b276543a69cb60e"}, "closed": true, "closedAt": "2020-12-21T14:36:37Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdoD2i9AH2gAyNTQwODAzMjY2OjE0MjI1NjY4OTdhMDFjYzliOTRiNjljMThhZDcwOTE3OTY4OTJhODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoVVMtAFqTU1NjM1MzAyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "1422566897a01cc9b94b69c18ad7091796892a86", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1422566897a01cc9b94b69c18ad7091796892a86", "committedDate": "2020-12-20T16:23:30Z", "message": "Add support for Kafka 2.7.0-RC5\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee80317b5a5954d562cbc07bdb86b50a9ca8cd42", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ee80317b5a5954d562cbc07bdb86b50a9ca8cd42", "committedDate": "2020-12-20T16:23:30Z", "message": "Fix failing STs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45891a2bf7c6165fdb48801ecfe9613a188cbed8", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/45891a2bf7c6165fdb48801ecfe9613a188cbed8", "committedDate": "2020-12-20T16:23:30Z", "message": "Fix ZookeeperUpgrade tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c40885f02d87080b634b143e4a39966a3c83e016", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c40885f02d87080b634b143e4a39966a3c83e016", "committedDate": "2020-12-20T16:23:31Z", "message": "Fix imports\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69e8a4a101570d533844b5f513fc5372e7e6a785", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/69e8a4a101570d533844b5f513fc5372e7e6a785", "committedDate": "2020-12-20T16:23:31Z", "message": "Fix some more STs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a786be077569a61358f2e725a5c8800b14cc027", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a786be077569a61358f2e725a5c8800b14cc027", "committedDate": "2020-12-20T16:23:31Z", "message": "Move to final version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/25f8fc5c126d95559b98b139e0f528755bd92e8d", "committedDate": "2020-12-20T16:46:03Z", "message": "Use the right Scala version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "790337d2fcd78b6446e9d547b1d7fdd22fed401e", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/790337d2fcd78b6446e9d547b1d7fdd22fed401e", "committedDate": "2020-12-17T17:28:23Z", "message": "Fix some more STs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}, "afterCommit": {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/25f8fc5c126d95559b98b139e0f528755bd92e8d", "committedDate": "2020-12-20T16:46:03Z", "message": "Use the right Scala version\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzEyOTIx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#pullrequestreview-556312921", "createdAt": "2020-12-21T11:29:04Z", "commit": {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMToyOTowNFrOIJVKnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQxMToyOTowNFrOIJVKnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjY1NDg3OQ==", "bodyText": "shouldn't we delete above 2.5.x? The same applies to the other env vars.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#discussion_r546654879", "createdAt": "2020-12-21T11:29:04Z", "author": {"login": "ppatierno"}, "path": "helm-charts/helm2/strimzi-kafka-operator/templates/_kafka_image_map.tpl", "diffHunk": "@@ -6,36 +6,41 @@\n {{/* Generate the kafka image map */}}\n {{- define \"strimzi.kafka.image.map\" }}\n             - name: STRIMZI_DEFAULT_TLS_SIDECAR_ENTITY_OPERATOR_IMAGE\n-              value: {{ default .Values.tlsSidecarEntityOperator.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarEntityOperator.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarEntityOperator.image.name }}:{{ default .Values.tlsSidecarEntityOperator.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.tlsSidecarEntityOperator.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarEntityOperator.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarEntityOperator.image.name }}:{{ default .Values.tlsSidecarEntityOperator.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_KAFKA_EXPORTER_IMAGE\n-              value: {{ default .Values.kafkaExporter.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafkaExporter.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafkaExporter.image.name }}:{{ default .Values.kafkaExporter.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.kafkaExporter.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafkaExporter.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafkaExporter.image.name }}:{{ default .Values.kafkaExporter.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_CRUISE_CONTROL_IMAGE\n-              value: {{ default .Values.cruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.cruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.cruiseControl.image.name }}:{{ default .Values.cruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.cruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.cruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.cruiseControl.image.name }}:{{ default .Values.cruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_DEFAULT_TLS_SIDECAR_CRUISE_CONTROL_IMAGE\n-              value: {{ default .Values.tlsSidecarCruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarCruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarCruiseControl.image.name }}:{{ default .Values.tlsSidecarCruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+              value: {{ default .Values.tlsSidecarCruiseControl.image.registry .Values.imageRegistryOverride }}/{{ default .Values.tlsSidecarCruiseControl.image.repository .Values.imageRepositoryOverride }}/{{ .Values.tlsSidecarCruiseControl.image.name }}:{{ default .Values.tlsSidecarCruiseControl.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0\n             - name: STRIMZI_KAFKA_IMAGES\n               value: |                 \n                 2.5.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.5.0\n                 2.5.1={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.5.1\n                 2.6.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.6.0\n+                2.7.0={{ default .Values.kafka.image.registry .Values.imageRegistryOverride }}/{{ default .Values.kafka.image.repository .Values.imageRepositoryOverride }}/{{ .Values.kafka.image.name }}:{{ default .Values.kafka.image.tagPrefix .Values.imageTagOverride }}-kafka-2.7.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzUzMDIz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4115#pullrequestreview-556353023", "createdAt": "2020-12-21T12:45:22Z", "commit": {"oid": "25f8fc5c126d95559b98b139e0f528755bd92e8d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 754, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}