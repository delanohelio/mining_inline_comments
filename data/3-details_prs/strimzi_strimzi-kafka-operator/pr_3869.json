{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5MTY0NTUz", "number": 3869, "title": "Implement custom Matcher for AssemblyOperator states", "bodyText": "Signed-off-by: klalafaryan lalafaryan@gmail.com\nType of change\n\nEnhancement / new feature\n\nDescription\nImplement custom Matcher for AssemblyOperator states.  Issue #3018\nChecklist\n\n Write tests\n Make sure all tests pass\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-10-23T19:08:48Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869", "merged": true, "mergeCommit": {"oid": "fb329afdc3d9bc048da69324572be6a74d6f372e"}, "closed": true, "closedAt": "2020-10-26T15:54:26Z", "author": {"login": "klalafaryan"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVbaM3AH2gAyNTA5MTY0NTUzOjRlNjk2ZTdkMzE2NTRmNDk1Nzc3ZjRiZjI1ODRjMmRhMDc2ZDhlYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdWWd-IgFqTUxNjkyNDA5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4e696e7d31654f495777f4bf2584c2da076d8ec3", "author": {"user": {"login": "klalafaryan", "name": "Konstantin Lalafaryan"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4e696e7d31654f495777f4bf2584c2da076d8ec3", "committedDate": "2020-10-23T19:05:42Z", "message": "Implement custom Matcher for AssemblyOperator states\n\nSigned-off-by: klalafaryan <lalafaryan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2MjY4Njg3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#pullrequestreview-516268687", "createdAt": "2020-10-24T10:55:07Z", "commit": {"oid": "4e696e7d31654f495777f4bf2584c2da076d8ec3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4", "author": {"user": {"login": "klalafaryan", "name": "Konstantin Lalafaryan"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4", "committedDate": "2020-10-25T20:53:27Z", "message": "Remove unused imports\n\nSigned-off-by: klalafaryan <lalafaryan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2NTg2MjQy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#pullrequestreview-516586242", "createdAt": "2020-10-26T09:15:43Z", "commit": {"oid": "4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwOToxNTo0M1rOHoGn0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQwOToxNjoxNlrOHoGpVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgxMzU4Nw==", "bodyText": "I don't think we want to add Guava as dependency. Can you solve this with regular Java lists/arrays? From the code it is not clear why is it really needed. This is also what is breaking the CI builds.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#discussion_r511813587", "createdAt": "2020-10-26T09:15:43Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/operator/assembly/KafkaRebalanceAssemblyOperatorTest.java", "diffHunk": "@@ -4,6 +4,7 @@\n  */\n package io.strimzi.operator.cluster.operator.assembly;\n \n+import com.google.common.collect.Lists;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgxMzg4Mg==", "bodyText": "Do we need so many empty lines?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#discussion_r511813882", "createdAt": "2020-10-26T09:16:08Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/operator/assembly/AbstractResourceStateMatchers.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.operator.cluster.operator.assembly;\n+\n+import io.strimzi.api.kafka.model.KafkaRebalance;\n+import io.strimzi.api.kafka.model.balancing.KafkaRebalanceState;\n+import io.strimzi.api.kafka.model.status.Condition;\n+import org.hamcrest.Description;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.TypeSafeDiagnosingMatcher;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static org.hamcrest.Matchers.containsString;\n+import static org.hamcrest.Matchers.is;\n+\n+public class AbstractResourceStateMatchers {\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMTgxMzk3Mw==", "bodyText": "Do we need so many empty lines?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#discussion_r511813973", "createdAt": "2020-10-26T09:16:16Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/operator/assembly/AbstractResourceStateMatchers.java", "diffHunk": "@@ -0,0 +1,137 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.operator.cluster.operator.assembly;\n+\n+import io.strimzi.api.kafka.model.KafkaRebalance;\n+import io.strimzi.api.kafka.model.balancing.KafkaRebalanceState;\n+import io.strimzi.api.kafka.model.status.Condition;\n+import org.hamcrest.Description;\n+import org.hamcrest.Matcher;\n+import org.hamcrest.TypeSafeDiagnosingMatcher;\n+\n+import java.util.ArrayList;\n+import java.util.List;\n+\n+import static org.hamcrest.Matchers.containsString;\n+import static org.hamcrest.Matchers.is;\n+\n+public class AbstractResourceStateMatchers {\n+\n+\n+    public static Matcher<KafkaRebalance> hasState() {\n+        return new TypeSafeDiagnosingMatcher<>() {\n+\n+            @Override\n+            protected boolean matchesSafely(KafkaRebalance kafkaRebalance, Description mismatchDescription) {\n+                mismatchDescription.appendText(\"was \").appendValue(kafkaRebalance);\n+\n+                if (kafkaRebalance == null) {\n+                    mismatchDescription.appendText(\"\\n KafkaRebalance is null\");\n+                    return false;\n+                }\n+\n+                if (kafkaRebalance.getStatus() == null) {\n+                    mismatchDescription.appendText(\"\\n KafkaRebalance status is null\");\n+                    return false;\n+                }\n+\n+                if (kafkaRebalance.getStatus().getConditions() == null) {\n+                    mismatchDescription.appendText(\"\\n KafkaRebalance status conditions is null\");\n+                    return false;\n+                }\n+\n+                return true;\n+            }\n+\n+            @Override\n+            public void describeTo(final Description description) {\n+                //\n+            }\n+        };\n+\n+    }\n+\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4762a64c4e7e5fbabc6d9f9770fcab1016ddb7b4"}, "originalPosition": 56}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "679fc3fe08891f3925a8e53c06c512240285de0a", "author": {"user": {"login": "klalafaryan", "name": "Konstantin Lalafaryan"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/679fc3fe08891f3925a8e53c06c512240285de0a", "committedDate": "2020-10-26T12:40:41Z", "message": "Use Java collections instead of guava\n\nSigned-off-by: klalafaryan <lalafaryan@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTI0MDk2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3869#pullrequestreview-516924096", "createdAt": "2020-10-26T15:54:13Z", "commit": {"oid": "679fc3fe08891f3925a8e53c06c512240285de0a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 855, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}