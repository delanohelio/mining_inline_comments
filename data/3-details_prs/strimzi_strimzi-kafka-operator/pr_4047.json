{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMTExMDMx", "number": 4047, "title": "Fix never ending rolling update of STS when initialDelay is set to 0", "bodyText": "Type of change\n\nBugfix\n\nDescription\nIn health check probes, when the initialDelaySeconds is set to 0, Kubernetes actually set it to null. This is causing never ending loop of rolling updates as described in #4041. This PR handles that in the ProbeGenerator and keeps it as null when set to 0. It also updates the defaults and minimal values for the other options in the health check probes to make the CRD validation work properly etc.\nChecklist\n\n Write tests\n Make sure all tests pass\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-12-03T20:54:38Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4047", "merged": true, "mergeCommit": {"oid": "b43b68897c9e0b6f583888452c42641d7c7f3b9b"}, "closed": true, "closedAt": "2020-12-04T20:52:03Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdipf48AH2gAyNTMyMTExMDMxOjUyNjJlMmEwZThmZTQ3N2Q0YzM3ZTVmMTI5OTNiODgyMDk1NjI2YmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdi8gRkgH2gAyNTMyMTExMDMxOjM4OGViYjVjZTcyNjQ3NWM4NGU3NjY4ZTQ1YmQ0MzE2YmFjZGQyNmI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5262e2a0e8fe477d4c37e5f12993b882095626bc", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5262e2a0e8fe477d4c37e5f12993b882095626bc", "committedDate": "2020-12-03T20:51:36Z", "message": "Fix never ending rolling update of STS when initialDelay is set to 0 - Closes #4041\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1MjA1MDI3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4047#pullrequestreview-545205027", "createdAt": "2020-12-04T18:37:08Z", "commit": {"oid": "5262e2a0e8fe477d4c37e5f12993b882095626bc"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxODozNzowOFrOH_dJFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxODozNzowOFrOH_dJFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjI5OTc5Nw==", "bodyText": "it's wrong the default or the comment here? 5 != 10", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4047#discussion_r536299797", "createdAt": "2020-12-04T18:37:08Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/Probe.java", "diffHunk": "@@ -54,8 +54,8 @@ public void setInitialDelaySeconds(int initialDelaySeconds) {\n         this.initialDelaySeconds = initialDelaySeconds;\n     }\n \n-    @Description(\"The timeout for each attempted health check.\")\n-    @Minimum(0)\n+    @Description(\"The timeout for each attempted health check. Default to 10 seconds. Minimum value is 1.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5262e2a0e8fe477d4c37e5f12993b882095626bc"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "388ebb5ce726475c84e7668e45bd4316bacdd26b", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/388ebb5ce726475c84e7668e45bd4316bacdd26b", "committedDate": "2020-12-04T19:00:13Z", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 703, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}