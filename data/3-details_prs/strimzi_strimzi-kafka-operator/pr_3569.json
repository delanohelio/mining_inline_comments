{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc2MjY4ODA0", "number": 3569, "title": "Option to reduce sensitive information output by report.sh", "bodyText": "Signed-off-by: Stanislav Knot sknot@redhat.com\nType of change\n\nEnhancement / new feature\n\nDescription\nThere was a request to add an option to set up verbosity level when reporting Secrets resources in the cluster.\nImplementation:\n\nfetch secret data oc get secret <secretname> -o=jsonpath='{.data}'\nparse keys (each line is key: value)\nreplace key: value by key: ***\n\nChecklist\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-08-31T12:33:15Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569", "merged": true, "mergeCommit": {"oid": "266e0cbe64497f8d11ea71b8c5ecfdfe018184eb"}, "closed": true, "closedAt": "2020-09-23T21:26:24Z", "author": {"login": "sknot-rh"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdESnukgFqTQ3ODYwMzMwOA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdLsR4CgFqTQ5NDYzNzM0NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4NjAzMzA4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#pullrequestreview-478603308", "createdAt": "2020-08-31T13:14:37Z", "commit": {"oid": "e57d6828de5c6d29b7be5eee79bac1d39ebc5026"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2", "committedDate": "2020-08-31T13:23:01Z", "message": "Option to reduce sensitive information output by report.sh\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e57d6828de5c6d29b7be5eee79bac1d39ebc5026", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e57d6828de5c6d29b7be5eee79bac1d39ebc5026", "committedDate": "2020-08-31T12:28:32Z", "message": "Option to reduce sensitive information output by report.sh\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2", "committedDate": "2020-08-31T13:23:01Z", "message": "Option to reduce sensitive information output by report.sh\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgzMzEyMjkw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#pullrequestreview-483312290", "createdAt": "2020-09-07T07:36:58Z", "commit": {"oid": "32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozNjo1OFrOHNzg8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wN1QwNzozNjo1OFrOHNzg8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NDIzNzU1Mw==", "bodyText": "Probably should mention what the default is. And does it really need to be all? It seems like hidden might be better since most problems wouldn't require anyone to know the secrets.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#discussion_r484237553", "createdAt": "2020-09-07T07:36:58Z", "author": {"login": "tombentley"}, "path": "tools/report.sh", "diffHunk": "@@ -25,7 +26,7 @@ fi\n \n \n usage() {\n-\techo \"Usage: $0 --namespace=<string> --cluster=<string>\" 1>&2;\n+\techo \"Usage: $0 --namespace=<string> --cluster=<string> --secrets=(off|hidden|all)\" 1>&2;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "32c4b39e7ca8c1cfd9ea762ea7100874919e6ab2"}, "originalPosition": 13}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d81245efb9a91e8df8d6911e70dd813fec9b5465", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d81245efb9a91e8df8d6911e70dd813fec9b5465", "committedDate": "2020-09-23T11:34:06Z", "message": "hidden as default value\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5b6ec202abe7630ec0cc29e394c25351cebae1f0", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5b6ec202abe7630ec0cc29e394c25351cebae1f0", "committedDate": "2020-09-23T11:33:32Z", "message": "hidden as default value\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "d81245efb9a91e8df8d6911e70dd813fec9b5465", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d81245efb9a91e8df8d6911e70dd813fec9b5465", "committedDate": "2020-09-23T11:34:06Z", "message": "hidden as default value\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NjI0NTMw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#pullrequestreview-494624530", "createdAt": "2020-09-23T12:51:25Z", "commit": {"oid": "d81245efb9a91e8df8d6911e70dd813fec9b5465"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMjo1MToyNVrOHWr_Wg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yM1QxMjo1MToyNVrOHWr_Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MzU1MTQ1MA==", "bodyText": "You're only telling the user what the default is if they use the option incorrectly. I think it should be part of the usage output.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#discussion_r493551450", "createdAt": "2020-09-23T12:51:25Z", "author": {"login": "tombentley"}, "path": "tools/report.sh", "diffHunk": "@@ -53,6 +57,19 @@ if [ -z $cluster ] && [ -z $namespace ]; then\n    usage\n fi\n \n+if [ -z $secrets ]; then\n+  secrets=\"hidden\"\n+fi\n+\n+if [ \"$secrets\" != \"all\" ] && [ \"$secrets\" != \"off\" ] && [ \"$secrets\" != \"hidden\" ]; then\n+  echo \"Unknown secrets verbosity level. Use one of 'off', 'hidden' or 'all'.\"\n+  echo \" 'all' - secret keys and data values are reported\"\n+  echo \" 'hidden' - secrets with only data keys are reported\"\n+  echo \" 'off' - secrets are not reported at all\"\n+  echo \"Default value is 'hidden'\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d81245efb9a91e8df8d6911e70dd813fec9b5465"}, "originalPosition": 40}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "daf63d4d9e8628df3fa05ebe53785d77e6a934c1", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/daf63d4d9e8628df3fa05ebe53785d77e6a934c1", "committedDate": "2020-09-23T12:56:04Z", "message": "hidden as default value2\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk0NjM3MzQ1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3569#pullrequestreview-494637345", "createdAt": "2020-09-23T13:05:45Z", "commit": {"oid": "daf63d4d9e8628df3fa05ebe53785d77e6a934c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 912, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}