{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwOTc5OTUx", "number": 2717, "title": "[MO] - [refactor] -> 2nd part of removing dependecy ", "bodyText": "Type of change\n\nRefactoring\n\nDescription\nThis PR adding removing another dependency on logs related to StUtils.waitForReconciliation(testClass, testName, NAMESPACE); method\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-03-19T12:40:07Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717", "merged": true, "mergeCommit": {"oid": "0ea1fcdf65e647541f3197590216640d32fde9cd"}, "closed": true, "closedAt": "2020-03-24T13:37:10Z", "author": {"login": "see-quick"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPSF2xAFqTM3ODA3NjU0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQxZNKgBqjMxNTkyNzI3NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDc2NTQw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#pullrequestreview-378076540", "createdAt": "2020-03-19T20:39:38Z", "commit": {"oid": "4dcaea845e6e422841e0c630e3be290f70934f79"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MjY0OTAw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#pullrequestreview-378264900", "createdAt": "2020-03-20T07:09:28Z", "commit": {"oid": "4dcaea845e6e422841e0c630e3be290f70934f79"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzowOToyOFrOF5JSlQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQwNzowOToyOFrOF5JSlQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTQ2NTM2NQ==", "bodyText": "It's not \"always\" internal client right? It depends on the specific IKafkaClient instance.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#discussion_r395465365", "createdAt": "2020-03-20T07:09:28Z", "author": {"login": "ppatierno"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/ClientUtils.java", "diffHunk": "@@ -0,0 +1,48 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.utils;\n+\n+import io.strimzi.systemtest.Constants;\n+import io.strimzi.systemtest.kafkaclients.IKafkaClient;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+import java.io.IOException;\n+import java.util.Random;\n+\n+/**\n+ * ClientUtils class, which provides static methods for the all type clients\n+ * @see io.strimzi.systemtest.kafkaclients.externalClients.OauthKafkaClient\n+ * @see io.strimzi.systemtest.kafkaclients.externalClients.TracingKafkaClient\n+ * @see io.strimzi.systemtest.kafkaclients.externalClients.KafkaClient\n+ * @see io.strimzi.systemtest.kafkaclients.internalClients.InternalKafkaClient\n+ */\n+public class ClientUtils {\n+\n+    private static final Logger LOGGER = LogManager.getLogger(ClientUtils.class);\n+\n+    // ensuring that object can not be created outside of class\n+    private ClientUtils() {}\n+\n+    // TODO: all topicName, namespace, clusterName, userName should be removed after -> https://github.com/strimzi/strimzi-kafka-operator/pull/2520\n+    public static void waitUntilClientReceivedMessagesTls(IKafkaClient<Integer> kafkaClient, String topicName, String namespace,\n+                                                       String clusterName, String userName, int exceptedMessages) {\n+        TestUtils.waitFor(\"Internal kafka client received messages\", Constants.GLOBAL_CLIENTS_POLL, Constants.GLOBAL_TIMEOUT,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4dcaea845e6e422841e0c630e3be290f70934f79"}, "originalPosition": 33}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4dcaea845e6e422841e0c630e3be290f70934f79", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4dcaea845e6e422841e0c630e3be290f70934f79", "committedDate": "2020-03-19T15:25:39Z", "message": "[MO] - [refactor] -> finalf\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}, "afterCommit": {"oid": "d746d17518e02ad1a3fb2663200c6479781a9116", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d746d17518e02ad1a3fb2663200c6479781a9116", "committedDate": "2020-03-20T08:39:25Z", "message": "[MO] - [refactor] -> finalf\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MzI4NTc3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#pullrequestreview-378328577", "createdAt": "2020-03-20T09:23:08Z", "commit": {"oid": "b860c2e77dcb22710fd19d0105c2167c37c41b43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MzkwMzE3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#pullrequestreview-378390317", "createdAt": "2020-03-20T11:02:14Z", "commit": {"oid": "b860c2e77dcb22710fd19d0105c2167c37c41b43"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NzMzNzA0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#pullrequestreview-378733704", "createdAt": "2020-03-20T18:49:01Z", "commit": {"oid": "7dd497a48b83c1bee1b75ec8ab4ece038b68d037"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0OTowMlrOF5fhdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yMFQxODo0OTowMlrOF5fhdw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTgyOTYyMw==", "bodyText": "Just thinking...shouldn't be this in PodUtils ?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2717#discussion_r395829623", "createdAt": "2020-03-20T18:49:02Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/StUtils.java", "diffHunk": "@@ -48,14 +48,35 @@\n \n     private StUtils() { }\n \n-    public static void waitForReconciliation(String testClass, String testName, String namespace) {\n-        LOGGER.info(\"Waiting for reconciliation\");\n-        String reconciliation = timeMeasuringSystem.startOperation(Operation.NEXT_RECONCILIATION);\n-        TestUtils.waitFor(\"Wait till another rolling update starts\", Constants.CO_OPERATION_TIMEOUT_POLL, Constants.RECONCILIATION_INTERVAL + 30000,\n-            () -> !cmdKubeClient().searchInLog(\"deploy\", \"strimzi-cluster-operator\",\n-                timeMeasuringSystem.getCurrentDuration(testClass, testName, reconciliation),\n-                \"'Triggering periodic reconciliation for namespace \" + namespace + \"'\").isEmpty());\n-        timeMeasuringSystem.stopOperation(reconciliation);\n+    /**\n+     * Method waitForPodsStability ensuring for every pod listed for kafka or zookeeper statefulSet will be controlling\n+     * their status in Running phase. If the pod will be running for selected time #Constants.GLOBAL_RECONCILIATION_COUNT\n+     * pod is considered as a stable. Otherwise this procedure will be repeat.\n+     * @param pods all pods that will be verified\n+     */\n+    public static void waitUntilPodsStability(List<Pod> pods) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7dd497a48b83c1bee1b75ec8ab4ece038b68d037"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7bb7cecbbf4c40513145d0e26529bac45c3db42c", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7bb7cecbbf4c40513145d0e26529bac45c3db42c", "committedDate": "2020-03-24T11:36:52Z", "message": "[MO] - [refactor] -> 2st part of removing dependency of logs\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "43e9396b3c2fedc4af5b50d8333226d4fed9ca89", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/43e9396b3c2fedc4af5b50d8333226d4fed9ca89", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> finished removal\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3fd13e1a584920dd18ffb4d076c128c821b03cfa", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3fd13e1a584920dd18ffb4d076c128c821b03cfa", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> update\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8bb0dfb8195e7768a92789282ed40ccf30bf04f", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b8bb0dfb8195e7768a92789282ed40ccf30bf04f", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> final\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c68098d49f34d6752dc5b44190132ebee5db898", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2c68098d49f34d6752dc5b44190132ebee5db898", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> finalf\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e821acb5409ab60c041830b606f7d8d03d4ccc3e", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e821acb5409ab60c041830b606f7d8d03d4ccc3e", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [rebase] -> conflicts\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdc7627471b57549ac67068fab5fabb07b53dd54", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bdc7627471b57549ac67068fab5fabb07b53dd54", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> commends\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6ef08b2656090e47d95eec52d9097772f6f2a01", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f6ef08b2656090e47d95eec52d9097772f6f2a01", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [refactor] -> update\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af6d2589cd39545e5c8c64241c3d447c7e737f04", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/af6d2589cd39545e5c8c64241c3d447c7e737f04", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [update] -> fix\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a9d1be9acd40f844a36b66c3ebe5725aa612905", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a9d1be9acd40f844a36b66c3ebe5725aa612905", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [update] -> race condition\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "911acbbe9248f09fb02804edd86bf620a51ca484", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/911acbbe9248f09fb02804edd86bf620a51ca484", "committedDate": "2020-03-24T11:37:50Z", "message": "[MO] - [commend] -> solve;\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27358870e7e9c0c4edbab9ce27b67f4ab03638c4", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/27358870e7e9c0c4edbab9ce27b67f4ab03638c4", "committedDate": "2020-03-24T11:41:28Z", "message": "[MO] - [rebase] -> done\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "378c99980e17e61d24182c917ed1a6f670ec52a9", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/378c99980e17e61d24182c917ed1a6f670ec52a9", "committedDate": "2020-03-24T11:31:24Z", "message": "[MO] - [commend] -> solve;\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}, "afterCommit": {"oid": "27358870e7e9c0c4edbab9ce27b67f4ab03638c4", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/27358870e7e9c0c4edbab9ce27b67f4ab03638c4", "committedDate": "2020-03-24T11:41:28Z", "message": "[MO] - [rebase] -> done\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2082, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}