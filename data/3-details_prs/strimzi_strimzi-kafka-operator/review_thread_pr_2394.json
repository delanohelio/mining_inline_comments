{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNTI1NDQz", "number": 2394, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMjoxM1rODXx2TA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMzo0M1rODXx3_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjYwNTU2OnYy", "diffSide": "RIGHT", "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMjoxM1rOFdQtfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOTo0MDowNVrOFdRPoQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNjgxNA==", "bodyText": "I did the test with a TLS user but in case for scram-sha why here it's not KafkaUserModel.getScramUserName(user)?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366226814", "createdAt": "2020-01-14T09:22:13Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIzNDI2MA==", "bodyText": "According to \n  \n    \n      strimzi-kafka-operator/user-operator/src/main/java/io/strimzi/operator/user/model/KafkaUserModel.java\n    \n    \n         Line 343\n      in\n      a11e4b3\n    \n    \n    \n    \n\n        \n          \n           public static String getScramUserName(String username)    { \n        \n    \n  \n\n\nit should be ok, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366234260", "createdAt": "2020-01-14T09:37:44Z", "author": {"login": "sknot-rh"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNjgxNA=="}, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIzNTU1Mw==", "bodyText": "that's true but not using the method makes the code less clear, as it's used above for deleting the ACLs", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366235553", "createdAt": "2020-01-14T09:40:05Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNjgxNA=="}, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI2MjYwOTg4OnYy", "diffSide": "RIGHT", "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMzo0M1rOFdQwMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQxMToyMjozMVrOFdUOJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNzUwNQ==", "bodyText": "Is deleting both just about being extra sure that there's nothing left? Because surely you know the type of user name in use, so you ought to be able to delete it using a single delete.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366227505", "createdAt": "2020-01-14T09:23:43Z", "author": {"login": "tombentley"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIzNjUwMQ==", "bodyText": "Yeah, it is just about being sure. Should I leave there just the second option (kafkaUserQuotasOperator.reconcile(user, null))?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366236501", "createdAt": "2020-01-14T09:41:55Z", "author": {"login": "sknot-rh"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNzUwNQ=="}, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjI0MjQxOA==", "bodyText": "but in case of TLS user we have \"CN=\" as prefix, it's not just user, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366242418", "createdAt": "2020-01-14T09:53:33Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNzUwNQ=="}, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjI4NDMyNw==", "bodyText": "Mm, yes you are right.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366284327", "createdAt": "2020-01-14T11:22:31Z", "author": {"login": "sknot-rh"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNzUwNQ=="}, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 593, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}