{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ4MjcxMTc1", "number": 3312, "title": "Fixed metrics path and deprecated labels for the cadvisor job", "bodyText": "Fixed dashboards using the right label\nSigned-off-by: Paolo Patierno ppatierno@live.com\nType of change\nSelect the type of your PR\n\nBugfix\n\nDescription\nThis PR fixes #3308.\nMemory and CPU usage metrics are not working anymore on Kafka and ZooKeeper dashboards due to change on the path where cadvisor exposes the metrics and some deprecated and dropped labels on the related metrics.\nFollowing the current not working metrics for Kafka and ZooKeeper dashboards.\n\nand here the working ones using this PR.\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-07-13T13:52:14Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312", "merged": true, "mergeCommit": {"oid": "ee4e2088bf0542f35ef1929fb5b3a9ea4082bb21"}, "closed": true, "closedAt": "2020-07-14T06:44:50Z", "author": {"login": "ppatierno"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc0hwBkAH2gAyNDQ4MjcxMTc1OjI0ZDk4MmIzNGQ1MDAyNGUwNDgxNTkxODFlNzdiMTA2MDZkYjViNWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0wQM4gFqTQ0NzgyOTA1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "24d982b34d50024e048159181e77b10606db5b5a", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/24d982b34d50024e048159181e77b10606db5b5a", "committedDate": "2020-07-13T13:49:28Z", "message": "Fixed metrics path and deprecated labels for the cadvisor job\nFixed dashboards using the right label\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6443d181a4196be6edc39ee4100772e25bcd9b45", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6443d181a4196be6edc39ee4100772e25bcd9b45", "committedDate": "2020-07-13T14:40:15Z", "message": "Updated CHANGELOG with breaking changes on Kubernetes < 1.14\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MzQzOTIy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312#pullrequestreview-447343922", "createdAt": "2020-07-13T15:11:38Z", "commit": {"oid": "6443d181a4196be6edc39ee4100772e25bcd9b45"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNToxMTozOFrOGwtAIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxNToxMTozOFrOGwtAIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzcyMjE0Ng==", "bodyText": "It would be better to link directly to this PR, that way they can immediately see what got changed.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312#discussion_r453722146", "createdAt": "2020-07-13T15:11:38Z", "author": {"login": "tombentley"}, "path": "CHANGELOG.md", "diffHunk": "@@ -37,6 +37,13 @@ In Strimzi 0.12.0, the `v1alpha1` versions of the following resources have been\n In the next release, the `v1alpha1` versions of these resources will be removed. \n Please follow the guide for upgrading the resources: https://strimzi.io/docs/operators/latest/full/deploying.html#assembly-upgrade-resources-str.\n \n+#### Removal deprecated cadvisor metric labels\n+\n+The `pod_name` and `container_name` labels provided on the cadvisor metrics are now just `pod` and `container` starting from Kubernetes 1.16.\n+We removed the old ones from the Prometheus scraping configuration/alerts and on the Kafka and ZooKeeper dashboard as well.\n+It means that the charts related to memory and CPU usage are not going to work on Kuvbernetes version previous 1.14.\n+For more information see this Kubernetes PR https://github.com/kubernetes/kubernetes/pull/80376", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6443d181a4196be6edc39ee4100772e25bcd9b45"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb28899dcadbff27b540300ad8fccbe0c5f646b9", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bb28899dcadbff27b540300ad8fccbe0c5f646b9", "committedDate": "2020-07-13T15:14:29Z", "message": "Fixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3MzQ5NTQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312#pullrequestreview-447349547", "createdAt": "2020-07-13T15:17:53Z", "commit": {"oid": "bb28899dcadbff27b540300ad8fccbe0c5f646b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjcyMDg4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312#pullrequestreview-447672088", "createdAt": "2020-07-13T23:10:38Z", "commit": {"oid": "bb28899dcadbff27b540300ad8fccbe0c5f646b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODI5MDUx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3312#pullrequestreview-447829051", "createdAt": "2020-07-14T06:43:17Z", "commit": {"oid": "bb28899dcadbff27b540300ad8fccbe0c5f646b9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1309, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}