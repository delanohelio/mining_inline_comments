{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExMDA0Mjgz", "number": 2921, "title": "Ensure CC topics are configured with log.cleanup.policy=delete", "bodyText": "Signed-off-by: Kyle Liberti kliberti@redhat.com\nType of change\n\nBugfix\n\nDescription\nThere are two problems being addressed in this PR:\n\nThe strimzi.cruisecontrol.metrics topic cannot be created when automatic topic creation is disabled\nThe strimzi.cruisecontrol.metrics topic can be configured with log compaction enabled\n\nWhen automatic topic creation is disabled for Kafka, auto.create.topics.enable: false, the  strimzi.cruisecontrol.metrics topic is not created. This PR enables the cruise control metric reporter adminClient to create the strimzi.cruisecontrol.metrics topic on broker start up.\nCurrently,  the strimzi.cruisecontrol.metrics topic will inherit the  log.cleanup.policyof Kafka. This becomes a problem when log.cleanup.policy=compact as it causes the log cleaner to alter records which are needed by Cruise Control to process the logs correctly. This PR enables the Cruise Control metric reporters to configure the  strimzi.cruisecontrol.metrics topic with log.cleanup.policy=delete.\nWARNING The Cruise Control metric reporter AdminClient will timeout when being started with a new Kafka cluster. This will prevent the  strimzi.cruisecontrol.metrics topic from being created when automatic topic creation is disabled  and from being configured properly.  For this reason, this PR includes an example file for users  to create the strimzi.cruisecontrol.metrics topic manually when starting a new Kafka cluster with Cruise Control enabled.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-04-29T23:08:07Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921", "merged": true, "mergeCommit": {"oid": "2fb5357c0862b1d5b71bf0988f7329a2ece20c03"}, "closed": true, "closedAt": "2020-05-13T20:06:23Z", "author": {"login": "kyguy"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcc0BaVAFqTQwMzg5MjM5Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgz1hwgFqTQxMDY2MDgyNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAzODkyMzk3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-403892397", "createdAt": "2020-04-30T21:31:41Z", "commit": {"oid": "08187d53006b40e224fe6701a40d0b01bed19aeb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTozMTo0MVrOGO7Epg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQyMTozMTo0MVrOGO7Epg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODMwMTA5NA==", "bodyText": "I was wondering if we should not allow to do this configuration directly in the spec.kafka.config of the Kafka resource but exposing these fields in a more user friendly way in the cruiseControl field. The problem I see is that if we start in this way, then we could come up to do the same for a tons of cruise control related parameter in Kafka broker (so more related to the metrics reporter) and we fill the cruiseControl too much but maybe I am wrong.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r418301094", "createdAt": "2020-04-30T21:31:41Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaClusterSpec.java", "diffHunk": "@@ -51,7 +51,8 @@\n             + \"zookeeper.connect, zookeeper.set.acl, authorizer., super.user\"\n             + \"cruise.control.metrics.topic, cruise.control.metrics.reporter.bootstrap.servers\";\n \n-    public static final String FORBIDDEN_PREFIX_EXCEPTIONS = \"zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol, ssl.enabled.protocols\";\n+    public static final String FORBIDDEN_PREFIX_EXCEPTIONS = \"zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol, ssl.enabled.protocols, \"\n+            + \"cruise.control.metrics.topic.num.partitions, cruise.control.metrics.topic.replication.factor\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "08187d53006b40e224fe6701a40d0b01bed19aeb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NDM1NjYy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-404435662", "createdAt": "2020-05-01T22:44:20Z", "commit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMjo0NDoyMVrOGPXkgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQyMjo1MDozOVrOGPXqtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2ODAwMA==", "bodyText": "Are we sure this is the right default setting?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r418768000", "createdAt": "2020-05-01T22:44:21Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/test/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilderTest.java", "diffHunk": "@@ -79,7 +79,10 @@ public void testCruiseControl()  {\n                 \"cruise.control.metrics.reporter.ssl.keystore.password=${CERTS_STORE_PASSWORD}\\n\" +\n                 \"cruise.control.metrics.reporter.ssl.truststore.type=PKCS12\\n\" +\n                 \"cruise.control.metrics.reporter.ssl.truststore.location=/tmp/kafka/cluster.truststore.p12\\n\" +\n-                \"cruise.control.metrics.reporter.ssl.truststore.password=${CERTS_STORE_PASSWORD}\"));\n+                \"cruise.control.metrics.reporter.ssl.truststore.password=${CERTS_STORE_PASSWORD}\\n\" +\n+                \"cruise.control.metrics.topic.auto.create=true\\n\" +\n+                \"cruise.control.metrics.topic.num.partitions=1\\n\" +\n+                \"cruise.control.metrics.topic.replication.factor=1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2ODg5Ng==", "bodyText": "This is confusing. auto.create.topics.enable controls whether the broker creates a topic when a client attempts to read or write from it. So if it cannot create the topic when auto.create.topics.enable: false, it sounds like CC will not really attempt to create the topic and relies only on the auto creation. So the first sentence is wrong.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r418768896", "createdAt": "2020-05-01T22:47:57Z", "author": {"login": "scholzj"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -96,6 +96,41 @@ spec:\n .Additional resources\n For more information, refer to the xref:type-BrokerCapacity-reference[].\n \n+== Topic creation and configuration\n+\n+Cruise Control requires the following three topics to be created in order to function properly:\n+\n+* `strimzi.cruisecontrol.partitionmetricsamples`\n+* `strimzi.cruisecontrol.modeltrainingsamples`\n+* `strimzi.cruisecontrol.metrics`\n+\n+Cruise Control will attempt to create these topics automatically.\n+However, if automatic topic creation is disabled in Kafka with a configuration of `auto.create.topics.enable: false` in `spec.kafka.config`, Cruise Control will be unable to create these topics.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2OTM3OQ==", "bodyText": "What about other settings? Retention? Segment size? etc.? If we assume the user configures these topics, there are many options which migght make sense. So shouldn't the whole cruise.control.metrics.topic. segment be user-configurable?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r418769379", "createdAt": "2020-05-01T22:49:43Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaClusterSpec.java", "diffHunk": "@@ -51,7 +51,8 @@\n             + \"zookeeper.connect, zookeeper.set.acl, authorizer., super.user\"\n             + \"cruise.control.metrics.topic, cruise.control.metrics.reporter.bootstrap.servers\";\n \n-    public static final String FORBIDDEN_PREFIX_EXCEPTIONS = \"zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol, ssl.enabled.protocols\";\n+    public static final String FORBIDDEN_PREFIX_EXCEPTIONS = \"zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol, ssl.enabled.protocols, \"\n+            + \"cruise.control.metrics.topic.num.partitions, cruise.control.metrics.topic.replication.factor\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODc2OTU4OA==", "bodyText": "Stupid question - but CO already uses the AdminClient and has access to the brokers. So why not manage the topic form the operator using AdminClient our self?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r418769588", "createdAt": "2020-05-01T22:50:39Z", "author": {"login": "scholzj"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -96,6 +96,41 @@ spec:\n .Additional resources\n For more information, refer to the xref:type-BrokerCapacity-reference[].\n \n+== Topic creation and configuration\n+\n+Cruise Control requires the following three topics to be created in order to function properly:\n+\n+* `strimzi.cruisecontrol.partitionmetricsamples`\n+* `strimzi.cruisecontrol.modeltrainingsamples`\n+* `strimzi.cruisecontrol.metrics`\n+\n+Cruise Control will attempt to create these topics automatically.\n+However, if automatic topic creation is disabled in Kafka with a configuration of `auto.create.topics.enable: false` in `spec.kafka.config`, Cruise Control will be unable to create these topics.\n+In this situation, the Cruise Control topics will need to be created manually using the `example/topic/cruise-control-topics.yaml` file.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1MzQ4MDMy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405348032", "createdAt": "2020-05-04T21:07:24Z", "commit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMTowNzoyNFrOGQSO3Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQyMTowNzoyNFrOGQSO3Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTcyOTExNw==", "bodyText": "If providing the KafkaTopic resource is a workaround for the bug in the CC metrics reporter I think that only this strimzi.cruisecontrol.metrics is needed here to be created. The other ones should be created by the CC not the metrics reporter. Can you double check @kyguy?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r419729117", "createdAt": "2020-05-04T21:07:24Z", "author": {"login": "ppatierno"}, "path": "examples/topic/cruise-control-topics.yaml", "diffHunk": "@@ -0,0 +1,37 @@\n+apiVersion: kafka.strimzi.io/v1beta1\n+kind: KafkaTopic\n+metadata:\n+  name: strimzi.cruisecontrol.partitionmetricsamples\n+  labels:\n+    strimzi.io/cluster: my-cluster\n+spec:\n+  partitions: 32\n+  replicas: 2\n+  config:\n+    cleanup.policy: delete\n+    retention.ms: \"3600000\"\n+---\n+apiVersion: kafka.strimzi.io/v1beta1\n+kind: KafkaTopic\n+metadata:\n+  name: strimzi.cruisecontrol.modeltrainingsamples\n+  labels:\n+    strimzi.io/cluster: my-cluster\n+spec:\n+  partitions: 32\n+  replicas: 2\n+  config:\n+    cleanup.policy: delete\n+    retention.ms: \"12000000\"\n+---\n+apiVersion: kafka.strimzi.io/v1beta1\n+kind: KafkaTopic\n+metadata:\n+  name: strimzi.cruisecontrol.metrics\n+  labels:\n+    strimzi.io/cluster: my-cluster\n+spec:\n+  partitions: 1\n+  replicas: 1\n+  config:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec1f30583431cadceb7bea0bc20be272561fdecb"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDU2NDI1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405456425", "createdAt": "2020-05-05T02:02:47Z", "commit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMjo0N1rOGQYOZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMjo0N1rOGQYOZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyNzMwMg==", "bodyText": "Just found a typo here, I'll fix this tomorrow", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r419827302", "createdAt": "2020-05-05T02:02:47Z", "author": {"login": "kyguy"}, "path": "helm-charts/strimzi-kafka-operator/templates/040-Crd-kafka.yaml", "diffHunk": "@@ -923,10 +923,9 @@ spec:\n                     prefixes cannot be set: listeners, advertised., broker., listener.,\n                     host.name, port, inter.broker.listener.name, sasl., ssl., security.,\n                     password., principal.builder.class, log.dir, zookeeper.connect,\n-                    zookeeper.set.acl, authorizer., super.usercruise.control.metrics.topic,\n-                    cruise.control.metrics.reporter.bootstrap.servers (with the exception\n-                    of: zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol,\n-                    ssl.enabled.protocols).'\n+                    zookeeper.set.acl, authorizer., super.usercruise.control.metrics.reporter.bootstrap.servers", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NDU2NTI2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405456526", "createdAt": "2020-05-05T02:03:16Z", "commit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMzoxN1rOGQYOtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwMjowMzoxN1rOGQYOtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTgyNzM4Mw==", "bodyText": "Typo is here as well", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r419827383", "createdAt": "2020-05-05T02:03:17Z", "author": {"login": "kyguy"}, "path": "install/cluster-operator/040-Crd-kafka.yaml", "diffHunk": "@@ -918,10 +918,9 @@ spec:\n                     prefixes cannot be set: listeners, advertised., broker., listener.,\n                     host.name, port, inter.broker.listener.name, sasl., ssl., security.,\n                     password., principal.builder.class, log.dir, zookeeper.connect,\n-                    zookeeper.set.acl, authorizer., super.usercruise.control.metrics.topic,\n-                    cruise.control.metrics.reporter.bootstrap.servers (with the exception\n-                    of: zookeeper.connection.timeout.ms, ssl.cipher.suites, ssl.protocol,\n-                    ssl.enabled.protocols).'\n+                    zookeeper.set.acl, authorizer., super.usercruise.control.metrics.reporter.bootstrap.servers", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NTIxNTc5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405521579", "createdAt": "2020-05-05T06:31:57Z", "commit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwNjozMTo1OFrOGQcEnQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwNjozMTo1OFrOGQcEnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg5MDMzMw==", "bodyText": "I am a little bit confused here. We are enabling the metrics reporter topic auto-creation but we actually know that it's not going to work when Kafka broker auto topic creation is disabled.\nRegarding the num of partitions and replication factor, I see that these parameters are coming from the KafkaCluster model where the defaults are \"1\". It sounds weird because they should be some defaults for specific metrics reporter topic creation not related to Kafka itself (which has these values by default to 1 anyway when the auto topic creation is enabled).\nWe are also enabling this stuff by default, is really what we want? It means that user cannot disable metrics reporter auto topic creation, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r419890333", "createdAt": "2020-05-05T06:31:58Z", "author": {"login": "ppatierno"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "diffHunk": "@@ -84,6 +86,9 @@ public KafkaBrokerConfigurationBuilder withCruiseControl(String clusterName, Cru\n             writer.println(\"cruise.control.metrics.reporter.ssl.truststore.type=PKCS12\");\n             writer.println(\"cruise.control.metrics.reporter.ssl.truststore.location=/tmp/kafka/cluster.truststore.p12\");\n             writer.println(\"cruise.control.metrics.reporter.ssl.truststore.password=${CERTS_STORE_PASSWORD}\");\n+            writer.println(\"cruise.control.metrics.topic.auto.create=true\");\n+            writer.println(\"cruise.control.metrics.topic.num.partitions=\" + defaultNumPartitions);\n+            writer.println(\"cruise.control.metrics.topic.replication.factor=\" + defaultReplicationFactor);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NTQ0NTA0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405544504", "createdAt": "2020-05-05T07:19:46Z", "commit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1OTMzNDE0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-405933414", "createdAt": "2020-05-05T16:02:30Z", "commit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjowMjozMFrOGQwdrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxNjoxNzo1MVrOGQxHcA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIyNDQyOQ==", "bodyText": "in your Kafka cluster?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420224429", "createdAt": "2020-05-05T16:02:30Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -13,13 +13,24 @@ For an overview of the `Kafka` resource, see the xref:ref-sample-kafka-resource-\n You can configure `cruiseControl` properties as part of a deployment or redeployment of a Kafka cluster.\n Deploy one instance of Cruise Control per Kafka cluster.\n \n+In this procedure, we use the example file provided with {ProductName}:\n+\n+* `examples/topic/cruise-control-topics.yaml`\n+\n .Prerequisites\n \n * A Kubernetes cluster\n * A running Cluster Operator\n \n .Procedure\n \n+. Create Cruise Control topics in your Kubernetes cluster:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzNDkwNg==", "bodyText": "I think you need a sentence or two on the purpose of the topics file. Also, \"we use\" sounds like this method of deploying Cruise Control is optional.\nSomething like this might work:\nThis procedure uses the following example file provided with {ProductName}:\nexamples/topic/cruise-control-topics.yaml\nThis creates a  strimzi.cruisecontrol.metrics topic in your Kafka cluster, which collects information from the Cruise Control Metrics Reporter for use in generating rebalance proposals. You do not need to interact with this topic after Cruise Control is deployed.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420234906", "createdAt": "2020-05-05T16:17:32Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -13,13 +13,24 @@ For an overview of the `Kafka` resource, see the xref:ref-sample-kafka-resource-\n You can configure `cruiseControl` properties as part of a deployment or redeployment of a Kafka cluster.\n Deploy one instance of Cruise Control per Kafka cluster.\n \n+In this procedure, we use the example file provided with {ProductName}:\n+\n+* `examples/topic/cruise-control-topics.yaml`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIzNTEyMA==", "bodyText": "Is topics plural correct?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420235120", "createdAt": "2020-05-05T16:17:51Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -13,13 +13,24 @@ For an overview of the `Kafka` resource, see the xref:ref-sample-kafka-resource-\n You can configure `cruiseControl` properties as part of a deployment or redeployment of a Kafka cluster.\n Deploy one instance of Cruise Control per Kafka cluster.\n \n+In this procedure, we use the example file provided with {ProductName}:\n+\n+* `examples/topic/cruise-control-topics.yaml`\n+\n .Prerequisites\n \n * A Kubernetes cluster\n * A running Cluster Operator\n \n .Procedure\n \n+. Create Cruise Control topics in your Kubernetes cluster:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDIyNDQyOQ=="}, "originalCommit": {"oid": "1279e6cc99e348f12c0a4c1912b12e5aec47bd6e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2MjIxMjUy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-406221252", "createdAt": "2020-05-05T23:23:16Z", "commit": {"oid": "59b320e9a16481cc45ab94b7f7fe719d491c66bc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzoyMzoxNlrOGQ_KJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQyMzoyMzoxNlrOGQ_KJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDQ2NTE5MQ==", "bodyText": "This should have a metadata section or a placeholder #... ... the same for partitions and replicas.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420465191", "createdAt": "2020-05-05T23:23:16Z", "author": {"login": "scholzj"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -96,6 +96,41 @@ spec:\n .Additional resources\n For more information, refer to the xref:type-BrokerCapacity-reference[].\n \n+== Topic creation and configuration\n+\n+Cruise Control requires the following three topics to be created in order to function properly:\n+\n+* `strimzi.cruisecontrol.partitionmetricsamples`\n+* `strimzi.cruisecontrol.modeltrainingsamples`\n+* `strimzi.cruisecontrol.metrics`\n+\n+Cruise Control will create the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics after the Cruise Control metric reporters create the `strimzi.cruisecontrol.metrics` topic.\n+However, if automatic topic creation is disabled in Kafka with a configuration of `auto.create.topics.enable: false` in `spec.kafka.config` when starting a new Kafka cluster, the Cruise Control metric reporters will be unable to create the `strimzi.cruisecontrol.metrics` topic.\n+In this situation, the the strimzi.cruisecontrol.metrics` topic will need to be created manually using the `example/topic/cruise-control-topics.yaml` file.\n+\n+To manually create the `strimzi.cruisecontrol.metrics` Cruise Control topic in your Kubernetes cluster:\n+[source,shell,subs=\"attributes+\"]\n+----\n+kubectl apply -f examples/cruise-control/cruise-control-topic.yaml\n+----\n+\n+Since log compaction may remove records needed by Cruise Control, all topics created by Cruise Control must be configured with `cleanup.policy=delete` to disable log compaction.\n+Cruise Control will automatically disable log compaction for the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics.\n+The Cruise Control metric reporters will attempt to disable log compaction for the `strimzi.cruisecontrol.metrics` topic but will fail when being started with a new Kafka cluster.\n+This will only become a problem when log compaction is enabled in Kafka with the setting `log.cleanup.policy=compact` in the `spec.kafka.config`.\n+In this situation, log compaction will be enabled for `strimzi.cruisecontrol.metrics` topic and will need to be overridden with a `cleanup.policy=delete` in the `strimzi.cruisecontrol.metrics` KafkaTopic.\n+\n+Here we see an example of log compaction being disabled in a Cruise Control KafkaTopic.\n+\n+[source,yaml,subs=\"+quotes,attributes\"]\n+----\n+apiVersion: kafka.strimzi.io/v1beta1\n+kind: KafkaTopic\n+spec:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59b320e9a16481cc45ab94b7f7fe719d491c66bc"}, "originalPosition": 34}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDAxMDU1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-406401055", "createdAt": "2020-05-06T08:29:21Z", "commit": {"oid": "ec9193409904b9a965b06e8a54f0648e534e9e72"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODoyOToyMVrOGRI5mQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODoyOToyMVrOGRI5mQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYyNDc5Mw==", "bodyText": "Add backticks around the topic name.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420624793", "createdAt": "2020-05-06T08:29:21Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -13,13 +13,27 @@ For an overview of the `Kafka` resource, see the xref:ref-sample-kafka-resource-\n You can configure `cruiseControl` properties as part of a deployment or redeployment of a Kafka cluster.\n Deploy one instance of Cruise Control per Kafka cluster.\n \n+This procedure uses the following example file provided with {ProductName}:\n+\n+* `examples/cruise-control/cruise-control-topic.yaml`\n+\n+This creates a strimzi.cruisecontrol.metrics topic in your Kafka cluster, which collects information from the Cruise Control Metrics Reporter for use in generating rebalance proposals.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec9193409904b9a965b06e8a54f0648e534e9e72"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDE2ODU3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-406416857", "createdAt": "2020-05-06T08:51:13Z", "commit": {"oid": "ec9193409904b9a965b06e8a54f0648e534e9e72"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODo1MToxNFrOGRJpqw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODo1MToxNFrOGRJpqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYzNzA5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            In this situation, the the strimzi.cruisecontrol.metrics` topic will need to be created manually using the `example/topic/cruise-control-topics.yaml` file.\n          \n          \n            \n            In this situation, the `strimzi.cruisecontrol.metrics` topic will need to be created manually using the `example/topic/cruise-control-topics.yaml` file.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r420637099", "createdAt": "2020-05-06T08:51:14Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -96,6 +96,45 @@ spec:\n .Additional resources\n For more information, refer to the xref:type-BrokerCapacity-reference[].\n \n+== Topic creation and configuration\n+\n+Cruise Control requires the following three topics to be created in order to function properly:\n+\n+* `strimzi.cruisecontrol.partitionmetricsamples`\n+* `strimzi.cruisecontrol.modeltrainingsamples`\n+* `strimzi.cruisecontrol.metrics`\n+\n+Cruise Control will create the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics after the Cruise Control metric reporters create the `strimzi.cruisecontrol.metrics` topic.\n+However, if automatic topic creation is disabled in Kafka with a configuration of `auto.create.topics.enable: false` in `spec.kafka.config` when starting a new Kafka cluster, the Cruise Control metric reporters will be unable to create the `strimzi.cruisecontrol.metrics` topic.\n+In this situation, the the strimzi.cruisecontrol.metrics` topic will need to be created manually using the `example/topic/cruise-control-topics.yaml` file.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ec9193409904b9a965b06e8a54f0648e534e9e72"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2NDE3MTE3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-406417117", "createdAt": "2020-05-06T08:51:32Z", "commit": {"oid": "ec9193409904b9a965b06e8a54f0648e534e9e72"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "78d1ed054bcfb0ac69dc196740d5849140a84d73", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/78d1ed054bcfb0ac69dc196740d5849140a84d73", "committedDate": "2020-05-06T13:13:09Z", "message": "Addressing more doc comments\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}, "afterCommit": {"oid": "e186e6e5f54e38894bf0b350a5772bbc8d2e73d9", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e186e6e5f54e38894bf0b350a5772bbc8d2e73d9", "committedDate": "2020-05-06T13:28:20Z", "message": "Refactor for example file change\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a5c4b370d07eac0f4b0f1d2c2956a2c687810698", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a5c4b370d07eac0f4b0f1d2c2956a2c687810698", "committedDate": "2020-05-12T17:50:52Z", "message": "Ensure CC topics are configured with log.cleanup.policy=delete\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15185b0b9e72203504e5b8515a4822615504fa19", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/15185b0b9e72203504e5b8515a4822615504fa19", "committedDate": "2020-05-12T17:52:26Z", "message": "Adding docs and Cruise Control topic creation example\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "54d98918da780f8640f21cc2cd8f5f8dc4a61348", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/54d98918da780f8640f21cc2cd8f5f8dc4a61348", "committedDate": "2020-05-12T17:53:01Z", "message": "Add CC topic example, undo changes to CC deployment example\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "480539ee4898104482d2ddf98033d1bf51bb4952", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/480539ee4898104482d2ddf98033d1bf51bb4952", "committedDate": "2020-05-12T17:53:01Z", "message": "Addressing comments (Allow CC metric topic config + refactor template file)\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c31c7ac913fcb59261add0e8b94de3c0ab1a48f8", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c31c7ac913fcb59261add0e8b94de3c0ab1a48f8", "committedDate": "2020-05-12T17:53:01Z", "message": "Addressing more comments\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0be8c60f4d9e83231e75bcffef665d8d78ddcc78", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0be8c60f4d9e83231e75bcffef665d8d78ddcc78", "committedDate": "2020-05-12T17:53:01Z", "message": "Fixing a typo\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ad1ca91bf5e88ed508dad20da849547b9195902", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6ad1ca91bf5e88ed508dad20da849547b9195902", "committedDate": "2020-05-12T17:53:01Z", "message": "Remove added line typo in doc\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "764c2e29f6a48e9304df9fb89bead42d1b5b351e", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/764c2e29f6a48e9304df9fb89bead42d1b5b351e", "committedDate": "2020-05-12T17:53:01Z", "message": "Fix typo in helm charts\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "52732b81905774cab746b239f2ef4117ae8c9e31", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/52732b81905774cab746b239f2ef4117ae8c9e31", "committedDate": "2020-05-12T17:53:01Z", "message": "Fix examples in docs\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a441eb0d9ece5350e54c33f9a34dcb0f284fb42", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2a441eb0d9ece5350e54c33f9a34dcb0f284fb42", "committedDate": "2020-05-12T18:02:17Z", "message": "Addressing more doc comments\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e186e6e5f54e38894bf0b350a5772bbc8d2e73d9", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e186e6e5f54e38894bf0b350a5772bbc8d2e73d9", "committedDate": "2020-05-06T13:28:20Z", "message": "Refactor for example file change\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}, "afterCommit": {"oid": "2a441eb0d9ece5350e54c33f9a34dcb0f284fb42", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2a441eb0d9ece5350e54c33f9a34dcb0f284fb42", "committedDate": "2020-05-12T18:02:17Z", "message": "Addressing more doc comments\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNDEzMTk3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-410413197", "createdAt": "2020-05-12T20:52:47Z", "commit": {"oid": "2a441eb0d9ece5350e54c33f9a34dcb0f284fb42"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMDo1Mjo0N1rOGUYhJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQyMDo1NzozOFrOGUYrpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAyNjQwNw==", "bodyText": "I think the names here are confusing. If I read the code right ... the kafkaDefault* are the defaults which will be used when user doesn't specify anything specific size? And the ccDefault* are the actual value either user configured of default? In which case they should not be named default because that is confusing and when you see default you expect there to be some other non-default value. So IMHO you should rename it (including the KafkaBrokerConfiguration etc.)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r424026407", "createdAt": "2020-05-12T20:52:47Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaCluster.java", "diffHunk": "@@ -221,6 +225,10 @@\n     private KafkaAuthorization authorization;\n     private KafkaVersion kafkaVersion;\n     private CruiseControlSpec cruiseControlSpec;\n+    private String kafkaDefaultNumPartitions = \"1\";\n+    private String kafkaDefaultReplicationFactor = \"1\";\n+    private String ccDefaultNumPartitions = null;\n+    private String ccDefaultReplicationFactor = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a441eb0d9ece5350e54c33f9a34dcb0f284fb42"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDAyOTA5NA==", "bodyText": "If I read this section right, the flow is that:\n\nThe user specifies these topions in Kafka.spec.kafka.config\nYou read them from there\nYou pass them to the KafkaBrokerConfigurationBuilder which puts them into the broker configuration file\n\nBut at the same time, they will be put into the KAfka broker configuration as part of withUserConfiguration so they will be there twice, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#discussion_r424029094", "createdAt": "2020-05-12T20:57:38Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaCluster.java", "diffHunk": "@@ -457,6 +465,13 @@ public static KafkaCluster fromCrd(Kafka kafkaAssembly, KafkaVersion.Lookup vers\n         }\n \n         KafkaConfiguration configuration = new KafkaConfiguration(kafkaClusterSpec.getConfig().entrySet());\n+        // If  required Cruise Control metric reporter configurations are missing set them using Kafka defaults\n+        if (configuration.getConfigOption(CC_NUM_PARTITIONS_CONFIG_FIELD) == null) {\n+            result.ccDefaultNumPartitions = configuration.getConfigOption(KAFKA_NUM_PARTITIONS_CONFIG_FIELD, result.kafkaDefaultNumPartitions);\n+        }\n+        if (configuration.getConfigOption(CC_REPLICATION_FACTOR_CONFIG_FIELD) == null) {\n+            result.ccDefaultReplicationFactor = configuration.getConfigOption(KAFKA_REPLICATION_FACTOR_CONFIG_FIELD, result.kafkaDefaultReplicationFactor);\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a441eb0d9ece5350e54c33f9a34dcb0f284fb42"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b6d00c79863eb171da1c9907a75c8c54e8adec5", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2b6d00c79863eb171da1c9907a75c8c54e8adec5", "committedDate": "2020-05-12T23:09:10Z", "message": "Refactoring option field names\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0cb6258f367bd87840f07b8f5ebf70f37a5b5eff", "author": {"user": {"login": "kyguy", "name": "Kyle Liberti"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0cb6258f367bd87840f07b8f5ebf70f37a5b5eff", "committedDate": "2020-05-13T00:18:41Z", "message": "Moving topic example to cruise-control folder\n\nSigned-off-by: Kyle Liberti <kliberti@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjQ0NjQ0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-410644644", "createdAt": "2020-05-13T07:10:53Z", "commit": {"oid": "0cb6258f367bd87840f07b8f5ebf70f37a5b5eff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEwNjYwODI1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2921#pullrequestreview-410660825", "createdAt": "2020-05-13T07:35:17Z", "commit": {"oid": "0cb6258f367bd87840f07b8f5ebf70f37a5b5eff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1995, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}