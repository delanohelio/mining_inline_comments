{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyNDg0NTg1", "number": 3265, "title": "Add bridge metrics", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis PR fixes #3264 and #3217.\nIt's about:\n\nallowing the user to enable the HTTP bridge metrics in the KafkaBridge custom resource using the new enableMetrics field. The previous and not supported metrics field was removed; it was never used because the bridge didn't have metrics exposed (until the latest 0.17.0 release) and because we are exporting HTTP and Kafka metrics in Prometheus format without allowing the users to customize the JMX part which brings Kafka metrics.\nadding a new Grafana dashboard for the bridge metrics.\n\nThe HTTP metrics are:\n\nThe number of open HTTP connections to the bridge.\nRequests being processed.\nRequests processed/secs grouped by HTTP method.\nThe requests rate in total and even grouped by response codes (2XX, 4XX, 5XX).\nBytes received /sec and Bytes sent /sec.\n\nFurthermore, the HTTP requests/sec metrics coming from Vert.x bring labels like code (HTTP response code), local (bridge server listening), remote (client issuing the request), method, and path that can be useful for some filtering to define following metrics:\n\nSEND to /topics/<topic>\nSEND TO PARTITIONS to /topics/<topic>/partitions/<partition>\nCREATE CONSUMER to /consumers/<group>\nSUBSCRIBE to /consumers/<group>/instances/<consumer>/subscription\nDELETE CONSUMER to /consumers/<group>/instances/<consumer>\nPOLL to /consumers/<group>/instances/<consumer>/records\nCOMMIT to /consumers/<group>/instances/<consumer>/offsets\n\nThe metrics about Kafka part are the following.\n\nNumber of consumers, producers, and related opened connections\nProducer:\n\nThe average number of records sent per second (grouped by topic)\nThe number of outgoing bytes sent to all brokers per second (grouped by topic)\nThe average number of records per second that resulted in errors (grouped by topic)\n\n\nConsumer:\n\nThe average number of records consumed per second (grouped by clientId-topic)\nThe average number of bytes consumed per second (grouped by clientId-topic)\nPartitions assigned (grouped by clientId)\n\n\n\nThey all bring labels like the clientId and the topic.\nJVM related metrics.\nFollowing some screenshots of the Grafana dashboard:\n\n\n\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-07-01T06:54:18Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265", "merged": true, "mergeCommit": {"oid": "879d59326fb9bf1d4f99df1fa2a6ec5fa01d770e"}, "closed": true, "closedAt": "2020-07-05T21:23:47Z", "author": {"login": "ppatierno"}, "timelineItems": {"totalCount": 28, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwmINCAFqTQ0MDY2NDI0MQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcyBgKkABqjM1MTM1ODIxMjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNjY0MjQx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-440664241", "createdAt": "2020-07-01T08:39:48Z", "commit": {"oid": "c76b2dbfbf8dcafcfea0d92ceaa5db9339104fbc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMTIzNTE2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-441123516", "createdAt": "2020-07-01T18:59:27Z", "commit": {"oid": "ef1b1fab7033fed403f0989fc5348ff477642fcf"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxODo1OToyN1rOGrx2UQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxOTowNTowNlrOGryABQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1ODY3Mw==", "bodyText": "Should we leave this generic? There is a risk this gets outdated when you add more metrics in the bridge + I guess already now it is missing JVM metrics?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448558673", "createdAt": "2020-07-01T18:59:27Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaBridgeSpec.java", "diffHunk": "@@ -68,14 +68,13 @@ public void setReplicas(int replicas) {\n     }\n \n     @JsonInclude(JsonInclude.Include.NON_NULL)\n-    @Description(\"**Currently not supported** The Prometheus JMX Exporter configuration. \" +\n-            \"See {JMXExporter} for details of the structure of this configuration.\")\n-    public Map<String, Object> getMetrics() {\n-        return metrics;\n+    @Description(\"Enable HTTP and Kafka related metrics for the Kafka Bridge.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef1b1fab7033fed403f0989fc5348ff477642fcf"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU1OTkzMg==", "bodyText": "It is not clear from the PR what will be the context ... but the title Add Kafka Bridge sounds weird. Should it be just Kafka Bridge?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448559932", "createdAt": "2020-07-01T19:02:13Z", "author": {"login": "scholzj"}, "path": "documentation/assemblies/metrics/assembly_metrics-kafka-bridge.adoc", "diffHunk": "@@ -0,0 +1,11 @@\n+// This assembly is included in the following assemblies:\n+//\n+// metrics/assembly-metrics.adoc\n+\n+[id='assembly-kafka-bridge-{context}']\n+= Add Kafka Bridge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef1b1fab7033fed403f0989fc5348ff477642fcf"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU2MDc1OQ==", "bodyText": "Do we really need this procedure? Would it be enough to just mention somewhere that you enable metrics by setting enableMetrics: true?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448560759", "createdAt": "2020-07-01T19:04:09Z", "author": {"login": "scholzj"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-configuring.adoc", "diffHunk": "@@ -0,0 +1,53 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-configuring-{context}']\n+= Configuring Kafka Bridge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef1b1fab7033fed403f0989fc5348ff477642fcf"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODU2MTE1Nw==", "bodyText": "Similar to the above ... do we really need this procedure? Can't we just keep the list of items from the dashabord where you describe the location and remove this?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r448561157", "createdAt": "2020-07-01T19:05:06Z", "author": {"login": "scholzj"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ef1b1fab7033fed403f0989fc5348ff477642fcf"}, "originalPosition": 7}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjkwNTE4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-441690518", "createdAt": "2020-07-02T13:42:43Z", "commit": {"oid": "a4e80652a0e1879ed50b71dfa2afcac6ccf3b4ad"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzo0Mjo0M1rOGsNdAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMzo0Mjo0M1rOGsNdAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTAxMDk0NQ==", "bodyText": "Document the default", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449010945", "createdAt": "2020-07-02T13:42:43Z", "author": {"login": "tombentley"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaBridgeSpec.java", "diffHunk": "@@ -68,14 +68,13 @@ public void setReplicas(int replicas) {\n     }\n \n     @JsonInclude(JsonInclude.Include.NON_NULL)\n-    @Description(\"**Currently not supported** The Prometheus JMX Exporter configuration. \" +\n-            \"See {JMXExporter} for details of the structure of this configuration.\")\n-    public Map<String, Object> getMetrics() {\n-        return metrics;\n+    @Description(\"Enable the metrics for the Kafka Bridge.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a4e80652a0e1879ed50b71dfa2afcac6ccf3b4ad"}, "originalPosition": 26}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29fcdc61fd268540fc420bca297a175b7ef9d76e", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/29fcdc61fd268540fc420bca297a175b7ef9d76e", "committedDate": "2020-07-02T16:37:09Z", "message": "Fixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}, "afterCommit": {"oid": "d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "committedDate": "2020-07-03T05:44:10Z", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d641163eed30f8a23b9cf6f1b9cd1992ecf3cf74", "committedDate": "2020-07-03T05:44:10Z", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}, "afterCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/72d8cdef317865a5e6ac706a70529b1d433fe97f", "committedDate": "2020-07-03T05:52:51Z", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTgwMTg5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442180189", "createdAt": "2020-07-03T06:43:39Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo0MzozOVrOGslcpA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo0MzozOVrOGslcpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwNDA2OA==", "bodyText": "Maybe make the Kafka Bridge instances a link to the Kafka Bridge section and move the bullet section to the Kafka Bridge section introduction, as we're not setting up here.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449404068", "createdAt": "2020-07-03T06:43:39Z", "author": {"login": "PaulRMellor"}, "path": "documentation/assemblies/metrics/assembly_metrics-prometheus-setup.adoc", "diffHunk": "@@ -7,12 +7,18 @@\n \n This section describes how to monitor Strimzi Kafka, ZooKeeper, Kafka Connect, and Kafka MirrorMaker and MirrorMaker 2.0 clusters using Prometheus to provide monitoring data for example Grafana dashboards.\n \n-Prometheus and Grafana can also used to monitor Strimzi operators.\n+Prometheus and Grafana can also be used to monitor Strimzi operators and Kafka Bridge instances.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTg0ODM0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442184834", "createdAt": "2020-07-03T06:53:29Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1MzoyOVrOGslrNw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1MzoyOVrOGslrNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwNzc5OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This procedure shows how to enable Kafka Bridge metrics in the `KafkaBridge` resource.\n          \n          \n            \n            This procedure shows how to enable Kafka Bridge metrics in the `KafkaBridge` resource using the `enableMetrics` property.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449407799", "createdAt": "2020-07-03T06:53:29Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-configuring.adoc", "diffHunk": "@@ -0,0 +1,53 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-configuring-{context}']\n+= Configuring Kafka Bridge\n+\n+This procedure shows how to enable Kafka Bridge metrics in the `KafkaBridge` resource.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTg0OTcw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442184970", "createdAt": "2020-07-03T06:53:48Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1Mzo0OFrOGslroA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1Mzo0OFrOGslroA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwNzkwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The property relevant to the Kafka Bridge configuration is shown in this procedure.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449407904", "createdAt": "2020-07-03T06:53:48Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-configuring.adoc", "diffHunk": "@@ -0,0 +1,53 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-configuring-{context}']\n+= Configuring Kafka Bridge\n+\n+This procedure shows how to enable Kafka Bridge metrics in the `KafkaBridge` resource.\n+\n+The property relevant to the Kafka Bridge configuration is shown in this procedure.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTg1Mjg4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442185288", "createdAt": "2020-07-03T06:54:29Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1NDozMFrOGslstg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1NDozMFrOGslstg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwODE4Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The property you can configure is shown in this example configuration:\n          \n          \n            \n            For example:", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449408182", "createdAt": "2020-07-03T06:54:30Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-configuring.adoc", "diffHunk": "@@ -0,0 +1,53 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-configuring-{context}']\n+= Configuring Kafka Bridge\n+\n+This procedure shows how to enable Kafka Bridge metrics in the `KafkaBridge` resource.\n+\n+The property relevant to the Kafka Bridge configuration is shown in this procedure.\n+\n+You can configure this property as part of a deployment or redeployment of the Kafka Bridge.\n+\n+.Prerequisites\n+\n+* A Kubernetes cluster\n+* A running Cluster Operator\n+\n+.Procedure\n+\n+. Edit the `spec.enableMetrics` property for the `KafkaBridge` resource.\n++\n+The property you can configure is shown in this example configuration:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 23}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTg3MDYx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442187061", "createdAt": "2020-07-03T06:58:20Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1ODoyMFrOGslyrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1ODoyMFrOGslyrA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwOTcwOA==", "bodyText": "Step as link to https://strimzi.io/docs/operators/master/deploying.html#proc-metrics-grafana-dashboard-str", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449409708", "createdAt": "2020-07-03T06:58:20Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMTg3NDI0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442187424", "createdAt": "2020-07-03T06:59:05Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1OTowNlrOGslzwA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNjo1OTowNlrOGslzwA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQwOTk4NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n          \n          \n            \n            Select the _Kafka Bridge_ dashboard.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449409984", "createdAt": "2020-07-03T06:59:06Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjAwNDA3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442200407", "createdAt": "2020-07-03T07:24:06Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzoyNDowNlrOGsmbtg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzoyNDowNlrOGsmbtg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMDIxNA==", "bodyText": "Format should be like other dashboards:\nStrimzi Kafka:: Shows metrics for:\n+\n* Brokers online count\n* Active controllers in the cluster count", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449420214", "createdAt": "2020-07-03T07:24:06Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjAxNzUy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442201752", "createdAt": "2020-07-03T07:26:36Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjAyNzg3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442202787", "createdAt": "2020-07-03T07:28:26Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzoyODoyN1rOGsmjDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzoyODoyN1rOGsmjDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMjA5Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * The number of open HTTP connections to the bridge\n          \n          \n            \n            * HTTP connections to the Kafka Bridge count```", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449422093", "createdAt": "2020-07-03T07:28:27Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 36}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA0MTY4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442204168", "createdAt": "2020-07-03T07:30:58Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMDo1OFrOGsmnjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMDo1OFrOGsmnjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMzI0NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Requests being processed\n          \n          \n            \n            * HTTP requests being processed count", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449423244", "createdAt": "2020-07-03T07:30:58Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA0NjYx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442204661", "createdAt": "2020-07-03T07:31:50Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMTo1MFrOGsmpDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMTo1MFrOGsmpDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMzYyOA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Requests processed/secs grouped by HTTP method\n          \n          \n            \n            * Requests processed per second grouped by HTTP method", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449423628", "createdAt": "2020-07-03T07:31:50Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 38}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA1MDUw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442205050", "createdAt": "2020-07-03T07:32:35Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMjozNVrOGsmqMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMjozNVrOGsmqMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyMzkyMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)\n          \n          \n            \n            * The total request rate grouped by response codes (2XX, 4XX, 5XX)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449423923", "createdAt": "2020-07-03T07:32:35Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method\n+* The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA1MzAw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442205300", "createdAt": "2020-07-03T07:33:04Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzowNFrOGsmq5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzowNFrOGsmq5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyNDEwMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Bytes received /sec and Bytes sent /sec\n          \n          \n            \n            * Bytes received and sent per second", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449424103", "createdAt": "2020-07-03T07:33:04Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method\n+* The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)\n+* Bytes received /sec and Bytes sent /sec", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA1NDEw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442205410", "createdAt": "2020-07-03T07:33:17Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzoxN1rOGsmrMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzoxN1rOGsmrMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyNDE3OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Requests for each bridge endpoint\n          \n          \n            \n            * Requests for each Kafka Bridge endpoint", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449424178", "createdAt": "2020-07-03T07:33:17Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method\n+* The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)\n+* Bytes received /sec and Bytes sent /sec\n+* Requests for each bridge endpoint", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 41}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA1NjUx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442205651", "createdAt": "2020-07-03T07:33:44Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzo0NVrOGsmrzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozMzo0NVrOGsmrzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyNDMzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * Number of Kafka consumers, producers, and related opened connections used by the bridge itself\n          \n          \n            \n            * Number of Kafka consumers, producers, and related opened connections used by the Kafka Bridge itself", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449424335", "createdAt": "2020-07-03T07:33:45Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method\n+* The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)\n+* Bytes received /sec and Bytes sent /sec\n+* Requests for each bridge endpoint\n+* Number of Kafka consumers, producers, and related opened connections used by the bridge itself", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyMjA3MDU0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442207054", "createdAt": "2020-07-03T07:36:20Z", "commit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozNjoyMFrOGsmwNg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wM1QwNzozNjoyMFrOGsmwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0OTQyNTQ2Mg==", "bodyText": "We listed the three for the other dashboards. Maybe this is better.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#discussion_r449425462", "createdAt": "2020-07-03T07:36:20Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/kafka-bridge/proc_kafka-bridge-enabling-grafana.adoc", "diffHunk": "@@ -0,0 +1,51 @@\n+// Module included in the following assemblies:\n+//\n+// metrics/assembly_metrics-kafka-bridge.adoc\n+\n+[id='proc-kafka-bridge-enabling-{context}']\n+\n+= Enabling the Kafka Bridge Grafana dashboard\n+\n+If you deployed Kafka Bridge with your Kafka cluster, you can enable Grafana to present the metrics data it exposes.\n+\n+A Kafka Bridge dashboard is provided in the `examples/metrics` directory as a JSON file:\n+\n+* `strimzi-kafka-bridge.json`\n+\n+.Prerequisites\n+\n+* Kafka Bridge is deployed with xref:proc-kafka-bridge-configuring-{context}[Kafka Bridge metrics configuration]\n+* xref:assembly-metrics-prometheus-{context}[Prometheus and Prometheus Alertmanager are deployed to the Kafka cluster]\n+* xref:proc-metrics-deploying-grafana-{context}[Grafana is deployed to the Kafka cluster]\n+\n+This procedure assumes you already have access to the Grafana user interface and Prometheus has been added as a data source.\n+If you are accessing the user interface for the first time, see xref:assembly-metrics-grafana-{context}[Grafana].\n+\n+.Procedure\n+\n+. Access the Grafana user interface.\n+\n+. Click *Dashboards*, then *Import* to open the _Import Dashboard_ window and import the example Kafka Bridge dashboard (or paste the JSON).\n++\n+When metrics data has been collected for some time, the Kafka Bridge charts are populated.\n+\n+.Kafka Bridge Grafana charts\n+\n+From the metrics, you can create charts to display:\n+\n+* The number of open HTTP connections to the bridge\n+* Requests being processed\n+* Requests processed/secs grouped by HTTP method\n+* The requests rate in total and even grouped by response codes (2XX, 4XX, 5XX)\n+* Bytes received /sec and Bytes sent /sec\n+* Requests for each bridge endpoint\n+* Number of Kafka consumers, producers, and related opened connections used by the bridge itself\n+* Kafka producer:\n+** The average number of records sent per second (grouped by topic)\n+** The number of outgoing bytes sent to all brokers per second (grouped by topic)\n+** The average number of records per second that resulted in errors (grouped by topic)\n+* Kafka consumer:\n+** The average number of records consumed per second (grouped by clientId-topic)\n+** The average number of bytes consumed per second (grouped by clientId-topic)\n+** Partitions assigned (grouped by clientId)\n+* JVM related metrics", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72d8cdef317865a5e6ac706a70529b1d433fe97f"}, "originalPosition": 51}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDgwNjcx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442480671", "createdAt": "2020-07-03T15:32:59Z", "commit": {"oid": "99395cf52ce0b9e9d1af922ea7ac719e786281ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNDg0ODE5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442484819", "createdAt": "2020-07-03T15:42:45Z", "commit": {"oid": "99395cf52ce0b9e9d1af922ea7ac719e786281ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQyNjg2NTIx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3265#pullrequestreview-442686521", "createdAt": "2020-07-05T15:30:56Z", "commit": {"oid": "99395cf52ce0b9e9d1af922ea7ac719e786281ef"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a04fd3ecc21f844759719a4b5833aeaf0ef18657", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a04fd3ecc21f844759719a4b5833aeaf0ef18657", "committedDate": "2020-07-05T19:06:46Z", "message": "Added HTTP bridge integration in the operator\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded bridge metrics Grafana dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed checkstyle\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nUpdated CHANGELOG\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nAdded documentation section about Kafka Bridge metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comment\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed default value for bridge enable metrics\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>\n\nFixed comments about graphs and label\nAdded more metrics to the dashboard\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b0ce717ebb74ff6bf91c3e777042ffad9e6ded", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/89b0ce717ebb74ff6bf91c3e777042ffad9e6ded", "committedDate": "2020-07-05T19:06:46Z", "message": "Fixed documentation related comments\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d455d2b805ccbf043cda056cb4acf4f9c66f2570", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d455d2b805ccbf043cda056cb4acf4f9c66f2570", "committedDate": "2020-07-05T19:06:46Z", "message": "Remoed modularization for Kafka Bridge metrics section\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cdea38a79bff19be063f3154e3006e6e10b205c5", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cdea38a79bff19be063f3154e3006e6e10b205c5", "committedDate": "2020-07-05T18:58:32Z", "message": "Remoed modularization for Kafka Bridge metrics section\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}, "afterCommit": {"oid": "d455d2b805ccbf043cda056cb4acf4f9c66f2570", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d455d2b805ccbf043cda056cb4acf4f9c66f2570", "committedDate": "2020-07-05T19:06:46Z", "message": "Remoed modularization for Kafka Bridge metrics section\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1262, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}