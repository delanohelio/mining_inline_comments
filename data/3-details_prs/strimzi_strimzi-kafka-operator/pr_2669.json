{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg1ODE3NzQ4", "number": 2669, "title": "feat: Convert to context succeeding Part 3", "bodyText": "Switched to use context.succeeding(handler)\nThis means the boilerplate code of handling failures\nis no longer needed in many tests and the Future is\npassed to the handler already unwrapped\nAlso used HamCrest matchers in appropriate places to\nincrease the verbosity and usefulness of failed test results\nAlso in this PR:\nMinor test renames, variable renames and test cleanup\nType of change\nSelect the type of your PR\n\nBugfix\nEnhancement / new feature\nRefactoring\nDocumentation\n\nDescription\nPlease describe your pull request\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-03-09T21:04:02Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2669", "merged": true, "mergeCommit": {"oid": "e54647be337afebac069cb87f26f6eb2b84000fb"}, "closed": true, "closedAt": "2020-03-12T12:20:22Z", "author": {"login": "samuel-hawker"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMGS-oAH2gAyMzg1ODE3NzQ4OjQyY2ZlMDg1M2JmZjZkNTdlOGI4NjIwMjgwZGM1ZGNhYTE0NzI2MDA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcM3NaSAFqTM3MzM0NjYwMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "42cfe0853bff6d57e8b8620280dc5dcaa1472600", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/42cfe0853bff6d57e8b8620280dc5dcaa1472600", "committedDate": "2020-03-09T23:13:20Z", "message": "feat: Operator-common test context\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eae745d46bfc37a63bf976be272263eb1fc97548", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/eae745d46bfc37a63bf976be272263eb1fc97548", "committedDate": "2020-03-09T23:28:46Z", "message": "feat: More operator common tests\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cbaeec262b770c0262594add67f7069e58a8883c", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cbaeec262b770c0262594add67f7069e58a8883c", "committedDate": "2020-03-09T21:01:46Z", "message": "feat: More operator common tests\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}, "afterCommit": {"oid": "eae745d46bfc37a63bf976be272263eb1fc97548", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/eae745d46bfc37a63bf976be272263eb1fc97548", "committedDate": "2020-03-09T23:28:46Z", "message": "feat: More operator common tests\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8f3058e3b9b96102d2ee8656005b305f93ef887", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b8f3058e3b9b96102d2ee8656005b305f93ef887", "committedDate": "2020-03-10T23:45:20Z", "message": "fix: StatefulsetOperatorTest fix abstract method call\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNTM0NzA0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2669#pullrequestreview-372534704", "createdAt": "2020-03-11T07:54:26Z", "commit": {"oid": "b8f3058e3b9b96102d2ee8656005b305f93ef887"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNzo1NDoyNlrOF0sL4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQwNzo1NDoyNlrOF0sL4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDc5NDIwOA==", "bodyText": "I wonder if these timeouts had any special meanings and how / when the test timeouts without them. They seem to be in several of these tests. Have you done any tests around this?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2669#discussion_r390794208", "createdAt": "2020-03-11T07:54:26Z", "author": {"login": "scholzj"}, "path": "operator-common/src/test/java/io/strimzi/operator/common/operator/resource/KafkaConnectCrdOperatorIT.java", "diffHunk": "@@ -119,86 +120,51 @@ protected KafkaConnect getResource() {\n     }\n \n     @Test\n-    public void testUpdateStatus(VertxTestContext context) throws InterruptedException, ExecutionException, TimeoutException {\n-        log.info(\"Getting Kubernetes version\");\n-        CountDownLatch versionAsync = new CountDownLatch(1);\n-        AtomicReference<PlatformFeaturesAvailability> pfa = new AtomicReference<>();\n-        PlatformFeaturesAvailability.create(vertx, client).setHandler(pfaRes -> {\n-            if (pfaRes.succeeded())    {\n-                pfa.set(pfaRes.result());\n-                versionAsync.countDown();\n-            } else {\n-                context.failNow(pfaRes.cause());\n-            }\n-        });\n-        if (!versionAsync.await(60, TimeUnit.SECONDS)) {\n-            context.failNow(new Throwable(\"Test timeout\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8f3058e3b9b96102d2ee8656005b305f93ef887"}, "originalPosition": 56}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMDEwNjc4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2669#pullrequestreview-373010678", "createdAt": "2020-03-11T18:15:46Z", "commit": {"oid": "b8f3058e3b9b96102d2ee8656005b305f93ef887"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczMzQ2NjAz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2669#pullrequestreview-373346603", "createdAt": "2020-03-12T08:12:36Z", "commit": {"oid": "b8f3058e3b9b96102d2ee8656005b305f93ef887"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2035, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}