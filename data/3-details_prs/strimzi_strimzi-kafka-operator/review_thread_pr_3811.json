{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzODg4MjU4", "number": 3811, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0OTo1N1rOEt2M3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNToxOVrOEt5n7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NTA5NDA2OnYy", "diffSide": "LEFT", "path": "tools/report.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0OTo1N1rOHh4ZPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo0OTo1N1rOHh4ZPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI4OTAyMA==", "bodyText": "I think that we discussed this with @scholzj to keep the logs from the tls-sidecars for the previous versions of Strimzi. So I think you can keep it there, do you agree @scholzj ?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505289020", "createdAt": "2020-10-15T07:49:57Z", "author": {"login": "im-konge"}, "path": "tools/report.sh", "diffHunk": "@@ -191,18 +210,12 @@ for pod in $pods; do\n \t  $platform logs $pod -p -c topic-operator -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-topic-operator.log\n \t  $platform logs $pod -p -c user-operator -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-user-operator.log\n \telif [[ $pod =~ .*-kafka-[0-9]+ ]]; then\n-\t  $platform logs $pod -c tls-sidecar -n $namespace > $direct/reports/podLogs/\"$pod\"-tls-sidecar.log\n \t  $platform logs $pod -c kafka -n $namespace > $direct/reports/podLogs/\"$pod\"-kafka.log\n-\t  $platform logs $pod -p -c tls-sidecar -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-tls-sidecar.log\n \t  $platform logs $pod -p -c kafka -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-kafka.log\n-\n \t  $platform exec -i $pod -n $namespace -c kafka -- cat /tmp/strimzi.properties > $direct/reports/configs/\"$pod\".cfg\n \telif [[ $pod =~ .*-zookeeper-[0-9]+ ]]; then\n-\t  $platform logs $pod -c tls-sidecar -n $namespace > $direct/reports/podLogs/\"$pod\"-tls-sidecar.log\n \t  $platform logs $pod -c zookeeper -n $namespace > $direct/reports/podLogs/\"$pod\"-zookeeper.log\n-\t  $platform logs $pod -p -c tls-sidecar -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-tls-sidecar.log\n \t  $platform logs $pod -p -c zookeeper -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-zookeeper.log\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NTExMDE3OnYy", "diffSide": "RIGHT", "path": "tools/report.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo1MjoyOFrOHh4kMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwNzo1MjoyOFrOHh4kMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTI5MTgyNw==", "bodyText": "It's just a nit, but i think that ` ` is \"deprecated\" and now we should use the $()... but maybe I'm wrong and it's only suggestion...", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505291827", "createdAt": "2020-10-15T07:52:28Z", "author": {"login": "im-konge"}, "path": "tools/report.sh", "diffHunk": "@@ -81,6 +81,25 @@ if [ -z $namespace ]; then\n    usage\n fi\n \n+available_namespaces=`$platform get ns -o name`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NTY0Nzk4OnYy", "diffSide": "RIGHT", "path": "tools/report.sh", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNDowM1rOHh-Mww==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOTo0NDoxMlrOHh_j2Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM4NDEzMQ==", "bodyText": "I think you can just do kubectl get namespace <namespace> and check the return code.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505384131", "createdAt": "2020-10-15T09:14:03Z", "author": {"login": "scholzj"}, "path": "tools/report.sh", "diffHunk": "@@ -81,6 +81,25 @@ if [ -z $namespace ]; then\n    usage\n fi\n \n+available_namespaces=`$platform get ns -o name`\n+prefixed_ns=\"namespace/${namespace}\"\n+ns_avalailable=`printf '%s\\n' \"${available_namespaces[@]}\"  | grep -P \"^$prefixed_ns$\"`\n+\n+if [ -z \"${ns_avalailable}\" ]; then\n+\techo \"Namespace $namespace not found! Exiting\"\n+\texit 1\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTQwNjQyNQ==", "bodyText": "Yeah. I am sure that is way as well. Using it as it does the code cleaner.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505406425", "createdAt": "2020-10-15T09:44:12Z", "author": {"login": "sknot-rh"}, "path": "tools/report.sh", "diffHunk": "@@ -81,6 +81,25 @@ if [ -z $namespace ]; then\n    usage\n fi\n \n+available_namespaces=`$platform get ns -o name`\n+prefixed_ns=\"namespace/${namespace}\"\n+ns_avalailable=`printf '%s\\n' \"${available_namespaces[@]}\"  | grep -P \"^$prefixed_ns$\"`\n+\n+if [ -z \"${ns_avalailable}\" ]; then\n+\techo \"Namespace $namespace not found! Exiting\"\n+\texit 1\n+fi", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM4NDEzMQ=="}, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NTY1MTM2OnYy", "diffSide": "RIGHT", "path": "tools/report.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNDozOFrOHh-OvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNDozOFrOHh-OvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM4NDYzNg==", "bodyText": "Same as above ... why not try to get it and check the return code?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505384636", "createdAt": "2020-10-15T09:14:38Z", "author": {"login": "scholzj"}, "path": "tools/report.sh", "diffHunk": "@@ -81,6 +81,25 @@ if [ -z $namespace ]; then\n    usage\n fi\n \n+available_namespaces=`$platform get ns -o name`\n+prefixed_ns=\"namespace/${namespace}\"\n+ns_avalailable=`printf '%s\\n' \"${available_namespaces[@]}\"  | grep -P \"^$prefixed_ns$\"`\n+\n+if [ -z \"${ns_avalailable}\" ]; then\n+\techo \"Namespace $namespace not found! Exiting\"\n+\texit 1\n+fi\n+\n+\n+available_clusters=`$platform get kafka -o name -n $namespace`\n+prefixed_cluster=\"kafka.kafka.strimzi.io/${cluster}\"\n+cluster_avalailable=`printf '%s\\n' \"${available_clusters[@]}\"  | grep -P \"^$prefixed_cluster$\"`\n+\n+if [ -z \"${cluster_avalailable}\" ]; then\n+\techo \"Kafka cluster $cluster in $namespace not found! Exiting\"\n+\texit 1\n+fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NTY1NDg3OnYy", "diffSide": "LEFT", "path": "tools/report.sh", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNToxOVrOHh-Qxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwOToxNToxOVrOHh-Qxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTM4NTE1OQ==", "bodyText": "Please keep these for the time being since this is not versioned and might be used even with older versions of Strimzi which have the sidecars.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3811#discussion_r505385159", "createdAt": "2020-10-15T09:15:19Z", "author": {"login": "scholzj"}, "path": "tools/report.sh", "diffHunk": "@@ -191,18 +210,12 @@ for pod in $pods; do\n \t  $platform logs $pod -p -c topic-operator -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-topic-operator.log\n \t  $platform logs $pod -p -c user-operator -n $namespace 2>/dev/null > $direct/reports/podLogs/previous-\"$pod\"-user-operator.log\n \telif [[ $pod =~ .*-kafka-[0-9]+ ]]; then\n-\t  $platform logs $pod -c tls-sidecar -n $namespace > $direct/reports/podLogs/\"$pod\"-tls-sidecar.log", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "59fe56688c760da29e2c0be30bd1bebe5977c76f"}, "originalPosition": 30}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 927, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}