{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyMTU4OTA1", "number": 2933, "title": "Make determineImagePullPolicy work with the images with latest-kafka-x.x.x", "bodyText": "Type of change\n\nBugfix\nEnhancement / new feature\n\nDescription\nThe method determineImagePullPolicy is used to replicate the Kubernetes default ImagePullPolicy -> use always when the mage with tag latest is used and use IfNotPresent for any other image. However, this method currently covers only the operator image which is using the latest tag.\nThe Kafka images using the latest-kafka-x.y.z are not covered by this although these images are as latest as the operator images.\nThis PR updates the method to applied it not only on the images with the latesttag as well as with latest-kafka-x.y.z. This does not affect the images for releases or when the user configures some specific image pull policy. This should help anyone using master and latest images to have the fresher container image.", "createdAt": "2020-05-01T14:46:07Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2933", "merged": true, "mergeCommit": {"oid": "fbe39692ce4398aeb9cd9313699981fbdc12b25a"}, "closed": true, "closedAt": "2020-05-04T09:13:55Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdCB8QgH2gAyNDEyMTU4OTA1OjAyMDBjYmFiM2NiNTg4MTk4MGM3NTI4NzlmMGVjOTExMWZlNWI2NjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcd72C5gFqTQwNDgyMTcxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0200cbab3cb5881980c752879f0ec9111fe5b664", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0200cbab3cb5881980c752879f0ec9111fe5b664", "committedDate": "2020-05-01T13:51:49Z", "message": "Make determineImagePullPolicy work with the images with latest-kafka-X.X.X\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0MjMyOTI5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2933#pullrequestreview-404232929", "createdAt": "2020-05-01T15:46:14Z", "commit": {"oid": "0200cbab3cb5881980c752879f0ec9111fe5b664"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNTo0NjoxNFrOGPNVyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wMVQxNTo0NjoxNFrOGPNVyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODYwMDM5Mw==", "bodyText": "It might be worth modifying line 1051 (the doc comment)\nTo read something like\n *    :latest* results in Always, where * can be any valid tag string, example my-image:latest or my-kafka:latest-kafka-foo.bar.baz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2933#discussion_r418600393", "createdAt": "2020-05-01T15:46:14Z", "author": {"login": "samuel-hawker"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/AbstractModel.java", "diffHunk": "@@ -1061,7 +1061,7 @@ protected String determineImagePullPolicy(ImagePullPolicy requestedImagePullPoli\n             return requestedImagePullPolicy.toString();\n         }\n \n-        if (image.toLowerCase(Locale.ENGLISH).endsWith(\":latest\"))  {\n+        if (image.toLowerCase(Locale.ENGLISH).contains(\":latest\"))  {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0200cbab3cb5881980c752879f0ec9111fe5b664"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7616252dc068a13f4180813f5d809eb908e479ad", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7616252dc068a13f4180813f5d809eb908e479ad", "committedDate": "2020-05-01T19:57:46Z", "message": "Update Javadoc\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0NTk1NTEw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2933#pullrequestreview-404595510", "createdAt": "2020-05-03T08:45:32Z", "commit": {"oid": "7616252dc068a13f4180813f5d809eb908e479ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA0ODIxNzE4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2933#pullrequestreview-404821718", "createdAt": "2020-05-04T09:13:20Z", "commit": {"oid": "7616252dc068a13f4180813f5d809eb908e479ad"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2019, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}