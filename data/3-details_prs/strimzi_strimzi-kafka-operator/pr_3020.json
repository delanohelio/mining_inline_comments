{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3OTkxNTEw", "number": 3020, "title": "Disable the HTTP2 protocol as a workaround for Java 1.8.0-252 issues", "bodyText": "Type of change\n\nBugfix\n\nDescription\nThe Java 8-252 introduces some issues to the okhttp library because it backpotrs some JDK9 parts and confuses okhttp to think it is running on JDK9. This PR introduces a workaround based on fabric8io/kubernetes-client#2212 - it deisables HTTP2 support when running on Java 8.\nMy tests have confirmed this to solve the issues on environments which had issues with this in the past.\nChecklist\n\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally", "createdAt": "2020-05-14T13:18:27Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3020", "merged": true, "mergeCommit": {"oid": "a99f996e1947b78e58aedefbc0df8d32a126c8d1"}, "closed": true, "closedAt": "2020-05-14T18:18:48Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchNSbwgH2gAyNDE3OTkxNTEwOmFhOWVmYTMzYzNjMWI0ZDY4MGM2NDFjZjEwZDUxYjI4MjU0ZThkYTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABchOAupgFqTQxMTgzODY3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "aa9efa33c3c1b4d680c641cf10d51b28254e8da4", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/aa9efa33c3c1b4d680c641cf10d51b28254e8da4", "committedDate": "2020-05-14T13:14:29Z", "message": "Disable the HTTP2 protocol as a workaround for Java 1.8.0-252 issues\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODE4Njgy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3020#pullrequestreview-411818682", "createdAt": "2020-05-14T13:44:58Z", "commit": {"oid": "aa9efa33c3c1b4d680c641cf10d51b28254e8da4"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo0NDo1OFrOGVc--A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQxMzo0NDo1OFrOGVc--A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTE0ODE1Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                 * Thsi shoud be removed after migrating to Fabric8 4.10.2 or higher or after migration to Java 11.\n          \n          \n            \n                 * This should be removed after migrating to Fabric8 4.10.2 or higher or after migration to Java 11.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3020#discussion_r425148152", "createdAt": "2020-05-14T13:44:58Z", "author": {"login": "tombentley"}, "path": "operator-common/src/main/java/io/strimzi/operator/common/Util.java", "diffHunk": "@@ -251,6 +251,18 @@ public static String maskPassword(String key, String value)  {\n         } else {\n             return value;\n         }\n+    }\n \n+    /**\n+     * OkHttp wrongfully detects JDK8u251 and higher as JDK9 which enables Http2 unsupported for JDK8.\n+     * This method is used as workaround as described in https://github.com/fabric8io/kubernetes-client/issues/2212\n+     *\n+     * Thsi shoud be removed after migrating to Fabric8 4.10.2 or higher or after migration to Java 11.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa9efa33c3c1b4d680c641cf10d51b28254e8da4"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0797b2c13f60c821d086c161046075af80456ebb", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0797b2c13f60c821d086c161046075af80456ebb", "committedDate": "2020-05-14T13:58:01Z", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExODM4Njc5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3020#pullrequestreview-411838679", "createdAt": "2020-05-14T14:05:03Z", "commit": {"oid": "0797b2c13f60c821d086c161046075af80456ebb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1716, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}