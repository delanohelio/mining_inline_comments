{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQ2Njc2NjYz", "number": 4162, "title": "Make it possible to run Strimzi with read-only root filesystem", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nStrimzi currently uses the /tmp directory to write different temporary files. But we do not mount it as a volume but instead uses it directly from the container. This can be seen in some cases as less secure (users might want to run with read-only file system) and in some configurations the layering over the image can cause performance issues (although I doubt thy will be measurable since we use the /tmp really only at startup).\nThis PR instead adds additional volume and mounts it to /tmp. That way, we do not modify the container file system but our own volume when we write there. It does not enable readOnlyRootFilesystem by default, but it leaves that to the users who when they choose should have no problem running Strimzi. For the /tmp volume, it is using emptyDir with Memory as medium. This was chosen because we use it to store sensitive information such as keystores etc. Per my understanding, even the new layers we created before were counted against the container memory. So this should not change with this PR.\nThis PR also adds system test for Kafka clusters.\nThis should close #4011.\nChecklist\n\n Write tests\n Make sure all tests pass\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-12-29T23:57:29Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4162", "merged": true, "mergeCommit": {"oid": "29160435430e08df7efb9437237db723379737a0"}, "closed": true, "closedAt": "2021-01-06T15:48:46Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdrDoVagH2gAyNTQ2Njc2NjYzOjJhNjViNGUzYWYxZjg2NDI3OTM1N2ExMzc2MjUzMTQ1NDJiNDYyMWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdtefrlgFqTU2MjY2NTg4Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2a65b4e3af1f864279357a137625314542b4621d", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2a65b4e3af1f864279357a137625314542b4621d", "committedDate": "2020-12-29T23:49:45Z", "message": "Make it possible to run Strimzi with read-only root filesystem - Closes #4011\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYwODUzNjM2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4162#pullrequestreview-560853636", "createdAt": "2021-01-04T08:39:23Z", "commit": {"oid": "2a65b4e3af1f864279357a137625314542b4621d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwODozOToyM1rOINpP1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wNFQwODozOToyM1rOINpP1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MTE3ODE5OA==", "bodyText": "out of curiosity, why this remove?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4162#discussion_r551178198", "createdAt": "2021-01-04T08:39:23Z", "author": {"login": "ppatierno"}, "path": "docker-images/kafka/cruise-control-scripts/cruise_control_tls_prepare_certificates.sh", "diffHunk": "@@ -24,13 +24,16 @@ function create_keystore {\n \n echo \"Preparing certificates for internal communication\"\n STORE=/tmp/cruise-control/replication.truststore.p12\n+rm -f \"$STORE\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2a65b4e3af1f864279357a137625314542b4621d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYxOTU3MTAz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4162#pullrequestreview-561957103", "createdAt": "2021-01-05T16:51:19Z", "commit": {"oid": "2a65b4e3af1f864279357a137625314542b4621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyNjY1ODg3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4162#pullrequestreview-562665887", "createdAt": "2021-01-06T12:15:35Z", "commit": {"oid": "2a65b4e3af1f864279357a137625314542b4621d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 647, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}