{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NDgxNTQx", "number": 3306, "title": "Add KafkaConnect to the Prometheus ServiceMonitor example.", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nWe've found that the ServiceMonitor configuration did not include Kafka Connect metrics.  The changes in this pull request allows Prometheus to scrape Kafka Connect metrics as well.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-07-10T14:45:31Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306", "merged": true, "mergeCommit": {"oid": "3fd62fc286076458b38dae856d82b153273ba762"}, "closed": true, "closedAt": "2020-07-14T07:37:39Z", "author": {"login": "allanmoso"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczl6X6AH2gAyNDQ3NDgxNTQxOjM3MzdmMTc0MGQ4NjU2ZmI4Nzg0ZmQ4Mjk0YmY0ZGZjZDY5ODg3MDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0wbQ5AFqTQ0NzgzNTU3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3737f1740d8656fb8784fd8294bf4dfcd6988706", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3737f1740d8656fb8784fd8294bf4dfcd6988706", "committedDate": "2020-07-10T16:06:28Z", "message": "Add KafkaConnect to the Prometheus ServiceMonitor example.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e4f51ef4baeb987075dd5de6640cb2c28c892964", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e4f51ef4baeb987075dd5de6640cb2c28c892964", "committedDate": "2020-07-10T14:40:13Z", "message": "Add KafkaConnect to the Prometheus ServiceMonitor example."}, "afterCommit": {"oid": "3737f1740d8656fb8784fd8294bf4dfcd6988706", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3737f1740d8656fb8784fd8294bf4dfcd6988706", "committedDate": "2020-07-10T16:06:28Z", "message": "Add KafkaConnect to the Prometheus ServiceMonitor example.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjY3OTIy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306#pullrequestreview-446667922", "createdAt": "2020-07-10T19:59:17Z", "commit": {"oid": "3737f1740d8656fb8784fd8294bf4dfcd6988706"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxOTo1OToxN1rOGwEDTQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxOTo1OToxN1rOGwEDTQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MzA1MTIxMw==", "bodyText": "Does it work when it is instead written as YAML like the rest of the file?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  - {key: \"strimzi.io/kind\", operator: In, values: [\"Kafka\", \"KafkaConnect\"]}\n          \n          \n            \n                  - key: strimzi.io/kind\n          \n          \n            \n                    operator: In\n          \n          \n            \n                    values: \n          \n          \n            \n                      - Kafka\n          \n          \n            \n                      - KafkaConnect", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306#discussion_r453051213", "createdAt": "2020-07-10T19:59:17Z", "author": {"login": "scholzj"}, "path": "examples/metrics/prometheus-install/strimzi-service-monitor.yaml", "diffHunk": "@@ -6,8 +6,8 @@ metadata:\n     app: strimzi\n spec:\n   selector:\n-    matchLabels:\n-      strimzi.io/kind: Kafka\n+    matchExpressions:\n+      - {key: \"strimzi.io/kind\", operator: In, values: [\"Kafka\", \"KafkaConnect\"]}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3737f1740d8656fb8784fd8294bf4dfcd6988706"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17e246a76de5ea9db3e03f4d67ecea2678439638", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/17e246a76de5ea9db3e03f4d67ecea2678439638", "committedDate": "2020-07-13T19:08:34Z", "message": "Switched ServiceMonitor matchExpression to YAML form.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2ff3bde02f058389e23a3b0034a9f3ee5e1495bc", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2ff3bde02f058389e23a3b0034a9f3ee5e1495bc", "committedDate": "2020-07-13T12:39:03Z", "message": "Switched ServiceMonitor matchExpression to YAML form."}, "afterCommit": {"oid": "17e246a76de5ea9db3e03f4d67ecea2678439638", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/17e246a76de5ea9db3e03f4d67ecea2678439638", "committedDate": "2020-07-13T19:08:34Z", "message": "Switched ServiceMonitor matchExpression to YAML form.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NjQxMDU1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306#pullrequestreview-447641055", "createdAt": "2020-07-13T22:01:22Z", "commit": {"oid": "17e246a76de5ea9db3e03f4d67ecea2678439638"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODM0NTU0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306#pullrequestreview-447834554", "createdAt": "2020-07-14T06:53:30Z", "commit": {"oid": "17e246a76de5ea9db3e03f4d67ecea2678439638"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3ODM1NTc5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3306#pullrequestreview-447835579", "createdAt": "2020-07-14T06:55:22Z", "commit": {"oid": "17e246a76de5ea9db3e03f4d67ecea2678439638"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1300, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}