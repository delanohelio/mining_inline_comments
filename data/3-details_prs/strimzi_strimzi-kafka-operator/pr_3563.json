{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc1NTI5Mjg3", "number": 3563, "title": "[DOC] Update to Overview for CORS and Metrics", "bodyText": "Signed-off-by: prmellor pmellor@redhat.com\nDocumentation\nUpdate of Overview sections for Kafka Bridge and Metrics.\n\nKafka Bridge config section mentions CORS\nMetrics section updates for support of Operators and Cruise Control\nConsolidated files so metrics concepts in single file -- removes four files\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-08-28T17:01:39Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563", "merged": true, "mergeCommit": {"oid": "aee5b05c0c0ca688a1d13d84077ca7d22acf451b"}, "closed": true, "closedAt": "2020-09-03T20:04:16Z", "author": {"login": "PaulRMellor"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdDYCK5AH2gAyNDc1NTI5Mjg3OjE2YTRmOGZjOWNmNmVhM2IxNTVlMDIzOThkMGEwZDY2NzIzZWQwZTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdFV1j9AFqTQ4MjE0Mjg0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5", "committedDate": "2020-08-28T16:59:06Z", "message": "[DOC] Update to Overview for CORS and Metrics\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MDU1MDcz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-478055073", "createdAt": "2020-08-28T22:24:59Z", "commit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQyMjoyNTowMFrOHJV9qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQyMjoyNjoxNlrOHJV-7A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg==", "bodyText": "I'm not sure I would word it like this. We do not support any other use cases than rebalancing. This suggests we do.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559082", "createdAt": "2020-08-28T22:25:00Z", "author": {"login": "scholzj"}, "path": "documentation/assemblies/overview/assembly-metrics-overview.adoc", "diffHunk": "@@ -16,22 +16,23 @@ Example metrics configuration files are provided with Strimzi.\n \n Distributed tracing complements the gathering of metrics data by providing a facility for end-to-end tracking of messages through Strimzi.\n \n+Cruise Control is used to monitor the workload of Kafka clusters, but it also automates the process of rebalancing. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTE3OQ==", "bodyText": "Again, maybe without monitoring it would be better?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * *Cruise Control* monitors and balances data across a Kafka cluster\n          \n          \n            \n            * *Cruise Control* balances data across a Kafka cluster", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559179", "createdAt": "2020-08-28T22:25:26Z", "author": {"login": "scholzj"}, "path": "documentation/assemblies/overview/assembly-metrics-overview.adoc", "diffHunk": "@@ -16,22 +16,23 @@ Example metrics configuration files are provided with Strimzi.\n \n Distributed tracing complements the gathering of metrics data by providing a facility for end-to-end tracking of messages through Strimzi.\n \n+Cruise Control is used to monitor the workload of Kafka clusters, but it also automates the process of rebalancing. \n+\n .Metrics and monitoring tools\n Strimzi can employ the following tools for metrics and monitoring:\n \n * *Prometheus* pulls metrics from Kafka, ZooKeeper and Kafka Connect clusters. The Prometheus *Alertmanager* plugin handles alerts and routes them to a notification service.\n * *Kafka Exporter* adds additional Prometheus metrics\n * *Grafana* provides dashboard visualizations of Prometheus metrics\n * *Jaeger* provides distributed tracing support to track transactions between applications\n+* *Cruise Control* monitors and balances data across a Kafka cluster", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTMxOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n          \n          \n            \n            To use Prometheus to obtain metrics data and provide alerts, Prometheus and the Prometheus Alertmanager plugin must be deployed.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559319", "createdAt": "2020-08-28T22:25:58Z", "author": {"login": "scholzj"}, "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTQwNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.\n          \n          \n            \n            Kafka resources must also be deployed or redeployed with metrics configuration to expose the metrics data.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479559404", "createdAt": "2020-08-28T22:26:16Z", "author": {"login": "scholzj"}, "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n+Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MzkzNTQ0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-478393544", "createdAt": "2020-08-31T07:49:46Z", "commit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNzo0OTo0NlrOHJuRJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNzo1MjozMVrOHJuWcw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzI4NQ==", "bodyText": "Agree. We support the rebalancing feature only but of course, CC has to monitor the cluster workload for doing it.\nUsing \"automates\" sounds that it does rebalancing automatically while it's not supported, the user has to interact with CC using KafkaRebalance resource; there is no automatic rebalancing done by CC without user request/interaction.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479957285", "createdAt": "2020-08-31T07:49:46Z", "author": {"login": "ppatierno"}, "path": "documentation/assemblies/overview/assembly-metrics-overview.adoc", "diffHunk": "@@ -16,22 +16,23 @@ Example metrics configuration files are provided with Strimzi.\n \n Distributed tracing complements the gathering of metrics data by providing a facility for end-to-end tracking of messages through Strimzi.\n \n+Cruise Control is used to monitor the workload of Kafka clusters, but it also automates the process of rebalancing. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTU1OTA4Mg=="}, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzkzMw==", "bodyText": "mentioning an \"initial OPTIONS HTTP request\"", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479957933", "createdAt": "2020-08-31T07:51:00Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.\n+You can define a list of allowed resource origins and HTTP methods for interaction with the Kafka cluster.\n+\n+CORS allows for _simple_ and _preflighted_ requests between origin sources on different domains.\n+\n+* A simple request is a HTTP request that must have an allowed origin defined in its header.\n+* A preflighted request sends an initial HTTP request before the actual request to check that the origin and the method are allowed.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1ODY0Mw==", "bodyText": "it should be \"alerts\" not \"notifications\".\nThen, not a native speaker but ... does the double \"issues\" (of course with different meanings) sound ok in English?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r479958643", "createdAt": "2020-08-31T07:52:31Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/overview/con-metrics-overview-tools.adoc", "diffHunk": "@@ -0,0 +1,63 @@\n+// This module is included in:\n+//\n+// overview/assembly-metrics-overview.adoc\n+\n+[id=\"metrics-overview-tools-{context}\"]\n+= Prometheus\n+\n+Prometheus can extract metrics data from Kafka components and the Strimzi Operators.\n+\n+To use Prometheus to obtain metrics data and provide notifications, Prometheus and the Prometheus Alertmanager plugin must be deployed.\n+Kafka resources must also be deployed or redeployed with Prometheus configuration to expose the metrics data.\n+\n+Prometheus scrapes the exposed metrics data for monitoring.\n+Alertmanager issues notifications on conditions that indicate potential issues based on pre-defined alerting rules.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16a4f8fc9cf6ea3b155e02398d0a0d66723ed0e5"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1a923c0085013b0b6147f22e100367793ad9f9fc", "committedDate": "2020-09-01T08:26:29Z", "message": "review edits PP, JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NTQxNTc3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-479541577", "createdAt": "2020-09-01T09:05:20Z", "commit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5NTQ1NjQy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-479545642", "createdAt": "2020-09-01T09:10:54Z", "commit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgwNjk3MDM3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-480697037", "createdAt": "2020-09-02T10:43:15Z", "commit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDo0MzoxNVrOHLpWkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDo0NjoxNFrOHLpdJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3MzkwNA==", "bodyText": "It's maybe worth stating that CORS is optional.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481973904", "createdAt": "2020-09-02T10:43:15Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTEyOA==", "bodyText": "Does the intended audience understand what is meant by an origin, in the context of HTTP requests? Consider adding an example, such as \"for example, a domain\".", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481975128", "createdAt": "2020-09-02T10:45:25Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk3NTU5MA==", "bodyText": "Explain where you can define the list of allowed origins.\nSuggested change:\nfor interaction with the Kafka cluster > for interaction with the Kafka cluster through the Kafka Bridge", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#discussion_r481975590", "createdAt": "2020-09-02T10:46:14Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/overview/con-configuration-points-bridge.adoc", "diffHunk": "@@ -11,6 +11,18 @@ Kafka Bridge consumer and producer configuration is standard, as described in th\n \n HTTP-related configuration options set the port connection which the server listens on.\n \n+[discrete]\n+== CORS\n+\n+The Kafka Bridge supports the use of Cross-Origin Resource Sharing (CORS).\n+CORS is a HTTP mechanism that allows browser access to selected resources from more than one origin.\n+You can define a list of allowed resource origins and HTTP methods for interaction with the Kafka cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1a923c0085013b0b6147f22e100367793ad9f9fc"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a466dfb5958d355503d48c621765aab0e8e07d3c", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a466dfb5958d355503d48c621765aab0e8e07d3c", "committedDate": "2020-09-03T10:28:39Z", "message": "review edits DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgxNzA3NjYz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-481707663", "createdAt": "2020-09-03T10:30:59Z", "commit": {"oid": "a466dfb5958d355503d48c621765aab0e8e07d3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDgyMTQyODQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3563#pullrequestreview-482142847", "createdAt": "2020-09-03T19:33:22Z", "commit": {"oid": "a466dfb5958d355503d48c621765aab0e8e07d3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 903, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}