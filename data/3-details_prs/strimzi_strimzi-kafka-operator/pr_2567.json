{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MjA5ODY5", "number": 2567, "title": "ST: Extend current test case to catch ZK issues during scale or roliing update", "bodyText": "Signed-off-by: Jakub Stejskal xstejs24@gmail.com\nType of change\n\nBugfix\n\nDescription\nThis PR improve current rolling update/scale tests for ZK and Kafka to catch #2494\nTest case covered after improvement (each exchange messages create new topic + consume from already created one):\n\nRoll Kafka, Roll ZK, exchange messages\nScale up Kafka, exchange messages, scale up ZK, exchange messages, scale down Kafka, exchange messages\nScale up ZK, exchange, scale down ZK, exchange messages\nBreak rolling update (add too big values to resources) of ZK, wait for 2 reconciliations to see that one pod is pending and other are ready, exchange messages\nBreak rolling update (add too big values to resources) of Kafka, wait for 2 reconciliations to see that one pod is pending and other are ready, exchange messages\n\nAny other ideas?\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-02-17T15:56:24Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567", "merged": true, "mergeCommit": {"oid": "feb751c549cdceb776dff70939ccb7e9b4850f46"}, "closed": true, "closedAt": "2020-03-23T22:01:41Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcG1q7SgBqjMwNjI3NzQzNDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcQZGWbAFqTM3OTE3ODMxOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8c84a17bfd3b73e1f30e6be1396526bc9befd3c4", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8c84a17bfd3b73e1f30e6be1396526bc9befd3c4", "committedDate": "2020-02-17T15:49:18Z", "message": "Extend current test case to catch ZK issues with lose quorom after rolling update or scale\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}, "afterCommit": {"oid": "03982f81a49bc0d435c70b7ffa37ea03049927e2", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/03982f81a49bc0d435c70b7ffa37ea03049927e2", "committedDate": "2020-02-22T15:01:16Z", "message": "fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea1fe2d802406ed5d2a892ca3334b36bd71e2a1f", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ea1fe2d802406ed5d2a892ca3334b36bd71e2a1f", "committedDate": "2020-03-21T19:16:48Z", "message": "Extend current test case to catch ZK issues with lose quorom after rolling update or scale\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b16c8ae4f6cac0a8e194811837bdbf34f224113d", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b16c8ae4f6cac0a8e194811837bdbf34f224113d", "committedDate": "2020-03-21T19:18:25Z", "message": "Minor fixes\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a61fb50add8e4d36e1ea9870c500dbdd190e70a", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a61fb50add8e4d36e1ea9870c500dbdd190e70a", "committedDate": "2020-03-21T19:18:27Z", "message": "fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f6dc0b2954b56e8cc9004805a0378d971294770d", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f6dc0b2954b56e8cc9004805a0378d971294770d", "committedDate": "2020-03-21T19:18:27Z", "message": "fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "committedDate": "2020-03-21T19:43:00Z", "message": "fixup! fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c481071c47c19ccc932e738fbd64a4935efeb1b7", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c481071c47c19ccc932e738fbd64a4935efeb1b7", "committedDate": "2020-02-22T15:17:34Z", "message": "fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}, "afterCommit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6", "committedDate": "2020-03-21T19:43:00Z", "message": "fixup! fixup! fix race condition\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MDEyNjk2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#pullrequestreview-379012696", "createdAt": "2020-03-22T14:51:13Z", "commit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MDQ2Nzg4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#pullrequestreview-379046788", "createdAt": "2020-03-22T21:00:56Z", "commit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MTc4MzE4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#pullrequestreview-379178318", "createdAt": "2020-03-23T07:22:10Z", "commit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwNzoyMjoxMFrOF55MKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QwNzoyMjoxMFrOF55MKg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjI1MDE1NA==", "bodyText": "That will bite you at some point!", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2567#discussion_r396250154", "createdAt": "2020-03-23T07:22:10Z", "author": {"login": "tombentley"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaResource.java", "diffHunk": "@@ -124,6 +124,7 @@ private static KafkaBuilder defaultKafka(Kafka kafka, String name, int kafkaRepl\n                 .editKafka()\n                     .withVersion(Environment.ST_KAFKA_VERSION)\n                     .withReplicas(kafkaReplicas)\n+                    .addToConfig(\"log.message.format.version\", Environment.ST_KAFKA_VERSION.substring(0, 3))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85f4e5ccc4860ac72bae9d5e0135d00c3c0c1ff6"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1727, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}