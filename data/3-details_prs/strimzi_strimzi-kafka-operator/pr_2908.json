{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEwMzUwNjEz", "number": 2908, "title": "Add computed property bootstrap to Kafka CR status", "bodyText": "Kafka CR status.\nContributes to #2905\nSigned-off-by: Andrew Schofield andrew_schofield@uk.ibm.com\nType of change\n\nEnhancement\n\nDescription\nCompute the derived property bootstrap from the addresses for each listener.\nCalculate the value whenever the addresses are changed to make sure the two\nsources of information stay in sync.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-04-28T20:42:34Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908", "merged": true, "mergeCommit": {"oid": "672fb074002eb0e0a4d87a335eebcd8c4392f248"}, "closed": true, "closedAt": "2020-04-30T19:58:34Z", "author": {"login": "AndrewJSchofield"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABccKD7PAH2gAyNDEwMzUwNjEzOmI3MGRhMDU3NTBkMmQyZGQ3NGE2Mjg2ZWJhMDk1OWMxOTM4ZmZmODM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcct3qIgH2gAyNDEwMzUwNjEzOmI2OGNmNDhmOTZhMTA0ZDgwNGQ2YmE3ZjI3NGMzZTYxMTNlZWY5MGQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83", "author": {"user": {"login": "AndrewJSchofield", "name": "Andrew Schofield"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b70da05750d2d2dd74a6286eba0959c1938fff83", "committedDate": "2020-04-28T20:39:18Z", "message": "Add computed property bootstrap to\nKafka CR status.\n\nContributes to strimzi/strimzi-kafka-operator#2905\n\nSigned-off-by: Andrew Schofield <andrew_schofield@uk.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMjQxOTI3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#pullrequestreview-402241927", "createdAt": "2020-04-28T21:57:33Z", "commit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyMzk5OTYz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#pullrequestreview-402399963", "createdAt": "2020-04-29T06:48:42Z", "commit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0ODo0M1rOGNxutA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwNjo0ODo0M1rOGNxutA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzA5OTQ0NA==", "bodyText": "what about using \"comma-separated list of hostname:\u200dport pairs\" which is how we already explain what bootstrap means in our doc?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#discussion_r417099444", "createdAt": "2020-04-29T06:48:43Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/status/ListenerStatus.java", "diffHunk": "@@ -54,6 +56,17 @@ public void setType(String type) {\n \n     public void setAddresses(List<ListenerAddress> addresses) {\n         this.addresses = addresses;\n+        if ((addresses == null) || (addresses.isEmpty())) {\n+            bootstrap = null;\n+        } else {\n+            bootstrap = addresses.stream().map(a -> a.getHost() + \":\" + a.getPort()).collect(Collectors.joining(\",\"));\n+        }\n+    }\n+\n+    @Description(\"A concatenated list of the bootstrap addresses for this listener.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "originalPosition": 35}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNDYwMjI0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#pullrequestreview-402460224", "createdAt": "2020-04-29T08:29:28Z", "commit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODoyOToyOFrOGN0xkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yOVQwODoyOToyOFrOGN0xkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNzE0OTMzMQ==", "bodyText": "Unnecessary parens", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#discussion_r417149331", "createdAt": "2020-04-29T08:29:28Z", "author": {"login": "tombentley"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/status/ListenerStatus.java", "diffHunk": "@@ -54,6 +56,17 @@ public void setType(String type) {\n \n     public void setAddresses(List<ListenerAddress> addresses) {\n         this.addresses = addresses;\n+        if ((addresses == null) || (addresses.isEmpty())) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTQ1Njc2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#pullrequestreview-402545676", "createdAt": "2020-04-29T10:34:16Z", "commit": {"oid": "b70da05750d2d2dd74a6286eba0959c1938fff83"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "99c3fa884f7e95bc044de0b2a88fc411c4191c24", "author": {"user": {"login": "AndrewJSchofield", "name": "Andrew Schofield"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/99c3fa884f7e95bc044de0b2a88fc411c4191c24", "committedDate": "2020-04-29T10:39:47Z", "message": "Improve description\n\nSigned-off-by: Andrew Schofield <andrew_schofield@uk.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAyNTU4ODA4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2908#pullrequestreview-402558808", "createdAt": "2020-04-29T10:55:54Z", "commit": {"oid": "99c3fa884f7e95bc044de0b2a88fc411c4191c24"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b9c02056c3702b8c59a31ec6e1b90dad1a07ab5e", "author": {"user": {"login": "AndrewJSchofield", "name": "Andrew Schofield"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b9c02056c3702b8c59a31ec6e1b90dad1a07ab5e", "committedDate": "2020-04-29T14:19:23Z", "message": "Update Kafka CRD yaml (again).\n\nSigned-off-by: Andrew Schofield <andrew_schofield@uk.ibm.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b68cf48f96a104d804d6ba7f274c3e6113eef90d", "author": {"user": {"login": "AndrewJSchofield", "name": "Andrew Schofield"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b68cf48f96a104d804d6ba7f274c3e6113eef90d", "committedDate": "2020-04-30T14:22:29Z", "message": "Renamed bootstrap to bootstrapServers\n\nSigned-off-by: Andrew Schofield <andrew_schofield@uk.ibm.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1978, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}