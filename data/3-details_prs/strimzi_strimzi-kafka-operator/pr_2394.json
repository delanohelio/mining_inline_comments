{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyNTI1NDQz", "number": 2394, "title": "Fix kafka user quotas deleting", "bodyText": "Signed-off-by: Stanislav Knot sknot@redhat.com\nType of change\n\nBugfix\n\nDescription\nFixes #2393\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-01-14T09:16:37Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394", "merged": true, "mergeCommit": {"oid": "769583ec808d9d8f6ac2be29673a5aac3e62656e"}, "closed": true, "closedAt": "2020-01-14T12:41:02Z", "author": {"login": "sknot-rh"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb6NWdXAH2gAyMzYyNTI1NDQzOjVkMGJmN2VhYjg3MmYyYWU5NWE1NjUwNjA3NzllZGEzYWM0NTY1ZmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb6QRl7AFqTM0MjUwMTc2Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d0bf7eab872f2ae95a565060779eda3ac4565fa", "committedDate": "2020-01-14T09:15:50Z", "message": "Fix kafka user quotas deleting\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzg2Mjg0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#pullrequestreview-342386284", "createdAt": "2020-01-14T09:22:13Z", "commit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMjoxM1rOFdQtfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMjoxM1rOFdQtfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNjgxNA==", "bodyText": "I did the test with a TLS user but in case for scram-sha why here it's not KafkaUserModel.getScramUserName(user)?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366226814", "createdAt": "2020-01-14T09:22:13Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyMzg3MjU5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#pullrequestreview-342387259", "createdAt": "2020-01-14T09:23:43Z", "commit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMzo0M1rOFdQwMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xNFQwOToyMzo0M1rOFdQwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NjIyNzUwNQ==", "bodyText": "Is deleting both just about being extra sure that there's nothing left? Because surely you know the type of user name in use, so you ought to be able to delete it using a single delete.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#discussion_r366227505", "createdAt": "2020-01-14T09:23:43Z", "author": {"login": "tombentley"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -290,6 +290,8 @@ public KafkaUserOperator(Vertx vertx,\n         return CompositeFuture.join(secretOperations.reconcile(namespace, KafkaUserModel.getSecretName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getTlsUserName(user), null),\n                 aclOperations.reconcile(KafkaUserModel.getScramUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(KafkaUserModel.getTlsUserName(user), null),\n+                kafkaUserQuotasOperator.reconcile(user, null),", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5d0bf7eab872f2ae95a565060779eda3ac4565fa"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8fbb4a6d41145d2405afd68259142516ef9d5b7f", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8fbb4a6d41145d2405afd68259142516ef9d5b7f", "committedDate": "2020-01-14T09:42:53Z", "message": "use scram name\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNDAzMTAx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#pullrequestreview-342403101", "createdAt": "2020-01-14T09:48:20Z", "commit": {"oid": "8fbb4a6d41145d2405afd68259142516ef9d5b7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNDA0ODU1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#pullrequestreview-342404855", "createdAt": "2020-01-14T09:51:03Z", "commit": {"oid": "8fbb4a6d41145d2405afd68259142516ef9d5b7f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be5501a4a81ce211d4bc73bc61fd6d31e3ca3f1e", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/be5501a4a81ce211d4bc73bc61fd6d31e3ca3f1e", "committedDate": "2020-01-14T10:24:32Z", "message": "mocking\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQyNTAxNzY3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2394#pullrequestreview-342501767", "createdAt": "2020-01-14T12:40:14Z", "commit": {"oid": "be5501a4a81ce211d4bc73bc61fd6d31e3ca3f1e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1791, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}