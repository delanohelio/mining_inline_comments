{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcyNjMzOTYz", "number": 3541, "title": "[DOC] Contributing guide update to describe Custom Resource API Reference build", "bodyText": "Signed-off-by: prmellor pmellor@redhat.com\nDocumentation\nUpdate to the Contributing Guide to describe what the Custom Resource API Reference contains and how it is built\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-08-24T16:33:51Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541", "merged": true, "mergeCommit": {"oid": "450523f1d171adcd314145af0a8e6f00eb340d93"}, "closed": true, "closedAt": "2020-08-26T13:16:00Z", "author": {"login": "PaulRMellor"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCFO-dAH2gAyNDcyNjMzOTYzOmYzODViOGQ2NTQ2ZTRhYjllMDMwNmY1YjQ5MWVlMGM4ZGFkYzJlYzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdCqlCUgFqTQ3NTQxNzkwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2", "committedDate": "2020-08-24T16:30:58Z", "message": "[DOC] Contributing guide update to describe Custom Resource API Reference build\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDczNzIxNzUw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#pullrequestreview-473721750", "createdAt": "2020-08-24T17:43:49Z", "commit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNzo0Mzo0OVrOHFvwjQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNFQxNzo0Mzo0OVrOHFvwjQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NTc4NzQwNQ==", "bodyText": "I think you should make it clear that this is generated automatically by the Maven build and does not have to be done manually.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#discussion_r475787405", "createdAt": "2020-08-24T17:43:49Z", "author": {"login": "scholzj"}, "path": "documentation/contributing/introduction.adoc", "diffHunk": "@@ -80,4 +82,57 @@ In contrast to the _Deploying_ guide, this guide provides a reduced set of instr\n \n The _Using Strimzi_ guide provides configuration instructions for Kafka components, and instructions for using Strimzi Operators.\n The majority of the content relates to how you might want to modify your deployment and introduce additional features, such as Cruise Control or distributed tracing.\n-The _Using Strimzi_ guide also contains the API reference guide which is generated directly from the Java code of the operators.\n+\n+=== Custom Resource API Reference\n+\n+The _Using Strimzi_ guide (documentation/using/master.adoc) also contains a _Custom Resource API Reference_ that describes the configuration properties for custom resources.\n+\n+The _Custom Resource API Reference_ is built from two files.\n+\n+.Custom Resource API Reference files\n+[source,asciidoc,options=\"nowrap\"]\n+----\n+\\include::modules/con-common-configuration-properties.adoc[leveloffset=+1]\n+\\include::modules/appendix_crds.adoc[]\n+----\n+\n+The `con-common-configuration-properties.adoc` file contains descriptions of common configuration properties.\n+The content for the `documentation/modules/appendix_crds.adoc` file is generated directly from descriptions in the Java code.\n+\n+Java files in the `api/` folder are annotated so that the descriptions are picked up in the build.\n+\n+.Java annotations for documentation\n+[source,java,options=\"nowrap\"]\n+----\n+import io.strimzi.crdgenerator.annotations.Description;\n+import io.strimzi.crdgenerator.annotations.DescriptionFile;\n+----\n+\n+The tables in `appendix_crds.adoc` are built from `@Description` annotations in the Java files.\n+\n+Additional information is included by adding:\n+\n+. An `@DescriptionFile` annotation to the Java file\n+. A corresponding description file (`.adoc`) in the `documentation/api/` folder\n+. An `include:__DESCRIPTION-FILE-NAME__` reference in `appendix_crds.adoc`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "originalPosition": 48}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0MjU1NDI1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#pullrequestreview-474255425", "createdAt": "2020-08-25T08:31:50Z", "commit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODozMTo1MFrOHGNbSQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQwODozODoyOFrOHGNrLA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI3MzQ4MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            api/                                 # Property descriptions for the Custom Resource API Reference\n          \n          \n            \n            api/                                 # Property descriptions for the Custom Resource API Reference section of the _Using Strimzi_ guide", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#discussion_r476273481", "createdAt": "2020-08-25T08:31:50Z", "author": {"login": "laidan6000"}, "path": "documentation/contributing/introduction.adoc", "diffHunk": "@@ -36,8 +36,10 @@ Assemblies, which usually encapsulate a feature or process, bring the related co\n An assembly is like a sub-section or chapter in a book.\n For example, the _Deploying Strimzi_ guide has a chapter called _Verifying the Strimzi deployment_, which is contained in its own assembly.\n \n+.Documentation folder descriptions\n [source,options=\"nowrap\",subs=\"+quotes\"]\n ----\n+api/                                 # Property descriptions for the Custom Resource API Reference", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI3NjAwOQ==", "bodyText": "The KafkaUserQuotas object / resource?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#discussion_r476276009", "createdAt": "2020-08-25T08:35:50Z", "author": {"login": "laidan6000"}, "path": "documentation/contributing/introduction.adoc", "diffHunk": "@@ -80,4 +82,57 @@ In contrast to the _Deploying_ guide, this guide provides a reduced set of instr\n \n The _Using Strimzi_ guide provides configuration instructions for Kafka components, and instructions for using Strimzi Operators.\n The majority of the content relates to how you might want to modify your deployment and introduce additional features, such as Cruise Control or distributed tracing.\n-The _Using Strimzi_ guide also contains the API reference guide which is generated directly from the Java code of the operators.\n+\n+=== Custom Resource API Reference\n+\n+The _Using Strimzi_ guide (documentation/using/master.adoc) also contains a _Custom Resource API Reference_ that describes the configuration properties for custom resources.\n+\n+The _Custom Resource API Reference_ is built from two files.\n+\n+.Custom Resource API Reference files\n+[source,asciidoc,options=\"nowrap\"]\n+----\n+\\include::modules/con-common-configuration-properties.adoc[leveloffset=+1]\n+\\include::modules/appendix_crds.adoc[]\n+----\n+\n+The `con-common-configuration-properties.adoc` file contains descriptions of common configuration properties.\n+The content for the `documentation/modules/appendix_crds.adoc` file is generated directly from descriptions in the Java code.\n+\n+Java files in the `api/` folder are annotated so that the descriptions are picked up in the build.\n+\n+.Java annotations for documentation\n+[source,java,options=\"nowrap\"]\n+----\n+import io.strimzi.crdgenerator.annotations.Description;\n+import io.strimzi.crdgenerator.annotations.DescriptionFile;\n+----\n+\n+The tables in `appendix_crds.adoc` are built from `@Description` annotations in the Java files.\n+\n+Additional information is included by adding:\n+\n+. An `@DescriptionFile` annotation to the Java file\n+. A corresponding description file (`.adoc`) in the `documentation/api/` folder\n+. An `include:__DESCRIPTION-FILE-NAME__` reference in `appendix_crds.adoc`\n+\n+For example, to add additional configuration for `KafkaUserQuotas`:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjI3NzU0OA==", "bodyText": "Typo: any\nYou must rebuild the API Reference before submitting the PR?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#discussion_r476277548", "createdAt": "2020-08-25T08:38:28Z", "author": {"login": "laidan6000"}, "path": "documentation/contributing/introduction.adoc", "diffHunk": "@@ -80,4 +82,57 @@ In contrast to the _Deploying_ guide, this guide provides a reduced set of instr\n \n The _Using Strimzi_ guide provides configuration instructions for Kafka components, and instructions for using Strimzi Operators.\n The majority of the content relates to how you might want to modify your deployment and introduce additional features, such as Cruise Control or distributed tracing.\n-The _Using Strimzi_ guide also contains the API reference guide which is generated directly from the Java code of the operators.\n+\n+=== Custom Resource API Reference\n+\n+The _Using Strimzi_ guide (documentation/using/master.adoc) also contains a _Custom Resource API Reference_ that describes the configuration properties for custom resources.\n+\n+The _Custom Resource API Reference_ is built from two files.\n+\n+.Custom Resource API Reference files\n+[source,asciidoc,options=\"nowrap\"]\n+----\n+\\include::modules/con-common-configuration-properties.adoc[leveloffset=+1]\n+\\include::modules/appendix_crds.adoc[]\n+----\n+\n+The `con-common-configuration-properties.adoc` file contains descriptions of common configuration properties.\n+The content for the `documentation/modules/appendix_crds.adoc` file is generated directly from descriptions in the Java code.\n+\n+Java files in the `api/` folder are annotated so that the descriptions are picked up in the build.\n+\n+.Java annotations for documentation\n+[source,java,options=\"nowrap\"]\n+----\n+import io.strimzi.crdgenerator.annotations.Description;\n+import io.strimzi.crdgenerator.annotations.DescriptionFile;\n+----\n+\n+The tables in `appendix_crds.adoc` are built from `@Description` annotations in the Java files.\n+\n+Additional information is included by adding:\n+\n+. An `@DescriptionFile` annotation to the Java file\n+. A corresponding description file (`.adoc`) in the `documentation/api/` folder\n+. An `include:__DESCRIPTION-FILE-NAME__` reference in `appendix_crds.adoc`\n+\n+For example, to add additional configuration for `KafkaUserQuotas`:\n+\n+. `api/src/main/java/io/strimzi/api/kafka/model/KafkaUserQuotas.java` contains:\n+** `import io.strimzi.crdgenerator.annotations.Description`\n+** `import io.strimzi.crdgenerator.annotations.DescriptionFile`\n+** `@Description(\"_descriptions for individual properties..._\");`\n+** An `@DescriptionFile` annotation\n+. `documentation/api` includes the `io.strimzi.api.kafka.model.KafkaUserQuotas.adoc` file containing the additional configuration description.\n++\n+The description file requires the same name as the related Java package.\n+. `appendix_crds.adoc` contains a reference to include the additional configuration description:\n++\n+[source,asciidoc,options=\"nowrap\"]\n+----\n+### `KafkaUserQuotas` schema reference\n+\n+/include::../api/io.strimzi.api.kafka.model.KafkaUserQuotas.adoc[leveloffset=+1]\n+----\n+\n+If you change any anything in the `api` module of the Java code, you must rebuild the _Custom Resource API Reference_ using a xref:make-tooling[make command].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f385b8d6546e4ab9e0306f5b491ee0c8dadc2ec2"}, "originalPosition": 69}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "478ac6d63092e7e9b113d16bbfb1863e3b060a4e", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/478ac6d63092e7e9b113d16bbfb1863e3b060a4e", "committedDate": "2020-08-25T09:24:10Z", "message": "review edits JS\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe19553222433206920b76dffa2c5ffce3064c04", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/fe19553222433206920b76dffa2c5ffce3064c04", "committedDate": "2020-08-25T09:34:15Z", "message": "review edits DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc0Nzg3NTYy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#pullrequestreview-474787562", "createdAt": "2020-08-25T19:28:51Z", "commit": {"oid": "fe19553222433206920b76dffa2c5ffce3064c04"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1NDE3OTA5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3541#pullrequestreview-475417909", "createdAt": "2020-08-26T12:01:33Z", "commit": {"oid": "fe19553222433206920b76dffa2c5ffce3064c04"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1202, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}