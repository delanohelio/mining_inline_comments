{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNTcyNTgy", "number": 3248, "title": "[systemtest][enhancement] Variable timeout part 2 - resource rolling update", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nIn this PR I'm gonna change the waiting for resource rolling update. Until now we had fixed 14 minutes, but we found out that this timeout is not long enough - especially when we have 3 pods, all three had error and need approx 6 minutes to kill the pod and bring it up again.\nSo we decided to change it this way -> we \"calculating\" the timeout based of number of pods * 6 minutes. This will (hopefully) ensures, that tests will pass without errors or exception on waiting for rolling update.\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-06-26T13:00:28Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248", "merged": true, "mergeCommit": {"oid": "0b52658445595041f790ca3e0f13fcdf1165fb10"}, "closed": true, "closedAt": "2020-06-30T14:35:08Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvKgRCgFqTQzODYxNjQxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwT2migFqTQzOTkxODM5Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4NjE2NDEw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#pullrequestreview-438616410", "createdAt": "2020-06-26T21:53:30Z", "commit": {"oid": "87649a88501ba4e668026845c59b53f31cc5bc9c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMTo1MzozMFrOGpvwMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQyMTo1MzozMFrOGpvwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjQyNzE4Ng==", "bodyText": "/**\n * rollingUpdateTimeout returns a reasonable timeout in milliseconds for a number of pods in a to roll on update\n */\npublic static long rollingUpdateTimeout(int numberOfPods) {", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#discussion_r446427186", "createdAt": "2020-06-26T21:53:30Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceOperation.java", "diffHunk": "@@ -48,4 +48,8 @@ public static long getTimeoutForResourceReadiness(String kind) {\n \n         return timeout;\n     }\n+\n+    public static long getTimeoutForRollingUpdate(int expectPods) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87649a88501ba4e668026845c59b53f31cc5bc9c"}, "originalPosition": 5}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "87649a88501ba4e668026845c59b53f31cc5bc9c", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/87649a88501ba4e668026845c59b53f31cc5bc9c", "committedDate": "2020-06-26T12:43:23Z", "message": "change utils methods\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}, "afterCommit": {"oid": "c9a90d089d69b43aebdea11b44c3ff2eb08d5f4d", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c9a90d089d69b43aebdea11b44c3ff2eb08d5f4d", "committedDate": "2020-06-29T08:44:47Z", "message": "comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c9a90d089d69b43aebdea11b44c3ff2eb08d5f4d", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c9a90d089d69b43aebdea11b44c3ff2eb08d5f4d", "committedDate": "2020-06-29T08:44:47Z", "message": "comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}, "afterCommit": {"oid": "e58ade26b0c9a6400c5f9fa7b61175a08052796d", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e58ade26b0c9a6400c5f9fa7b61175a08052796d", "committedDate": "2020-06-29T13:25:50Z", "message": "comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c40cb99204a85db94b459ab7745d09816c09bc80", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c40cb99204a85db94b459ab7745d09816c09bc80", "committedDate": "2020-06-29T19:20:41Z", "message": "add method for rolling update\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb1bd90b03c1a6b79fd54e266d98b8d8df148f82", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bb1bd90b03c1a6b79fd54e266d98b8d8df148f82", "committedDate": "2020-06-29T19:20:41Z", "message": "change utils methods\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c1d102fa35b5e4cda40561a45c3b04b847650ba", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7c1d102fa35b5e4cda40561a45c3b04b847650ba", "committedDate": "2020-06-29T19:20:41Z", "message": "comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "85fc2983e1437120bd5ee60dffd5da701e1bcaec", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85fc2983e1437120bd5ee60dffd5da701e1bcaec", "committedDate": "2020-06-29T19:21:19Z", "message": "change the timeout\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e58ade26b0c9a6400c5f9fa7b61175a08052796d", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e58ade26b0c9a6400c5f9fa7b61175a08052796d", "committedDate": "2020-06-29T13:25:50Z", "message": "comment\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}, "afterCommit": {"oid": "85fc2983e1437120bd5ee60dffd5da701e1bcaec", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/85fc2983e1437120bd5ee60dffd5da701e1bcaec", "committedDate": "2020-06-29T19:21:19Z", "message": "change the timeout\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5Nzc4MDA0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#pullrequestreview-439778004", "createdAt": "2020-06-30T08:17:27Z", "commit": {"oid": "85fc2983e1437120bd5ee60dffd5da701e1bcaec"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODoxNzoyOFrOGqxJWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQwODoxNzoyOFrOGqxJWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzQ5ODU4Nw==", "bodyText": "Sorry I left a typo in my recommended update:\nfor a number of pods in a quorum to roll on update", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#discussion_r447498587", "createdAt": "2020-06-30T08:17:28Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/ResourceOperation.java", "diffHunk": "@@ -62,4 +62,11 @@ public static long getTimeoutForKafkaRebalanceState(KafkaRebalanceState state) {\n \n         return timeout;\n     }\n+\n+    /**\n+     * rollingUpdateTimeout returns a reasonable timeout in milliseconds for a number of pods in a to roll on update", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "85fc2983e1437120bd5ee60dffd5da701e1bcaec"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODg4NTky", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#pullrequestreview-439888592", "createdAt": "2020-06-30T10:36:30Z", "commit": {"oid": "85fc2983e1437120bd5ee60dffd5da701e1bcaec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b9b2e0883f78fb0ce1d078fc1258f96ada948e1", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0b9b2e0883f78fb0ce1d078fc1258f96ada948e1", "committedDate": "2020-06-30T11:03:29Z", "message": "typo\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTE4Mzkz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3248#pullrequestreview-439918393", "createdAt": "2020-06-30T11:22:17Z", "commit": {"oid": "0b9b2e0883f78fb0ce1d078fc1258f96ada948e1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1238, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}