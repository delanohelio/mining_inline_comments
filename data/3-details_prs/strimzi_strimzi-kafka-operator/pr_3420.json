{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDU5Mzc2MTE2", "number": 3420, "title": "Add more azure pipelines for system tests", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis PR adds several new pipelines to verify opened PRs and run them against any branch which contains it. In case you run it against branch, where release.version contains x.y.z-SNAPSHOT, the pipeline will build images locally and use them. In other cases, it will use a specific version released on dockerhub.\nNew pipelines are:\n\nacceptance-helm - run acceptance system tests with CO installed by helm\nacceptance-bundle - run acceptance system tests with CO installed by yaml bundle\nregression-bundle - run regression system tests with CO installed by yaml bundle (3 jobs in parallel)\nupgrade-bundle - run upgrade system tests with CO installed by yaml bundle\n\nPipelines system-tests was replaced by acceptance-bundle\nAn example how AZP looks like with these pipelines:\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-07-30T16:35:27Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420", "merged": true, "mergeCommit": {"oid": "e5c1f766bdce54fb97b076c047bcd333b8cf6215"}, "closed": true, "closedAt": "2020-07-31T17:51:52Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc5vie1AH2gAyNDU5Mzc2MTE2OjY0ZDA1MzE1NWZmNTU3YzYyN2UwOGQ0NjRhNmVmMjdkNGZmZjAyZGE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc6TYThAH2gAyNDU5Mzc2MTE2OmE3ZWUxNDRmZjdmYTRmNWFhMWY2NDYwM2E2MzU3M2FmMjZhMDMzNDg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "64d053155ff557c627e08d464a6ef27d4fff02da", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/64d053155ff557c627e08d464a6ef27d4fff02da", "committedDate": "2020-07-29T18:42:58Z", "message": "Add new azp\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4dc992f865e542762b5e214bd678c2618f52ff57", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4dc992f865e542762b5e214bd678c2618f52ff57", "committedDate": "2020-07-29T18:42:58Z", "message": "Add another pipelines for Strimzi\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24e125f46fe015f9eedc7204cc93440967e6c01f", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/24e125f46fe015f9eedc7204cc93440967e6c01f", "committedDate": "2020-07-30T11:38:43Z", "message": "Helm image config set\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3b614d19002defd60323c7871e74937b6717a97", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a3b614d19002defd60323c7871e74937b6717a97", "committedDate": "2020-07-30T11:38:43Z", "message": "Minor fixes\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a66d10619e188805bb3fcaeb6f74afe0daf8104", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a66d10619e188805bb3fcaeb6f74afe0daf8104", "committedDate": "2020-07-30T11:38:43Z", "message": "Cleanup\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9945631c8b353db780072cc821ae0256532bcf6a", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9945631c8b353db780072cc821ae0256532bcf6a", "committedDate": "2020-07-30T17:20:19Z", "message": "Clean some leftovers\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acd66fe2f6d8e722597c1bec6ef51f96afe2e547", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/acd66fe2f6d8e722597c1bec6ef51f96afe2e547", "committedDate": "2020-07-30T17:21:06Z", "message": "Change external listener type in one test\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8629785350a0cdf94184b12d9afc775ee0fb385e", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8629785350a0cdf94184b12d9afc775ee0fb385e", "committedDate": "2020-07-30T17:21:40Z", "message": "Try to enable network policy on minikube\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2adf07edea37050a1a59f6ebd8fefe64e8ceb760", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2adf07edea37050a1a59f6ebd8fefe64e8ceb760", "committedDate": "2020-07-30T18:13:46Z", "message": "fixup! Try to enable network policy on minikube\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc945e73519f8b6fcff3bb0f19c35b1ab6db8eb5", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bc945e73519f8b6fcff3bb0f19c35b1ab6db8eb5", "committedDate": "2020-07-30T18:39:17Z", "message": "Remove NP form minikube\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28556af9eac5e8b367750d6a535c73080aae2a27", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/28556af9eac5e8b367750d6a535c73080aae2a27", "committedDate": "2020-07-31T06:21:52Z", "message": "Add some fixes and split regression cause timeout\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a27c2e19aaf187623dfbe3a7942ad76d7223108e", "committedDate": "2020-07-31T06:46:36Z", "message": "fixup! Add some fixes and split regression cause timeout\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTYzNTAy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-458963502", "createdAt": "2020-07-31T07:16:14Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU4OTc1Mjgy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-458975282", "createdAt": "2020-07-31T07:39:25Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDA0MDYy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-459004062", "createdAt": "2020-07-31T08:30:22Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMDoyMlrOG6Aaaw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMDoyMlrOG6Aaaw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3NzM1NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # This pipeline will be trigger manually for releases\n          \n          \n            \n            # This pipeline will be triggered manually for a release", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#discussion_r463477355", "createdAt": "2020-07-31T08:30:22Z", "author": {"login": "samuel-hawker"}, "path": ".azure/acceptance-pipeline.yaml", "diffHunk": "@@ -0,0 +1,20 @@\n+# Triggers\n+# This pipeline will be trigger manually for releases", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDA0NTA2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-459004506", "createdAt": "2020-07-31T08:31:05Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMTowNVrOG6Ab0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMTowNVrOG6Ab0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3NzcxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # This pipeline will be trigger manually for releases\n          \n          \n            \n            # This pipeline will be triggered manually for a release", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#discussion_r463477713", "createdAt": "2020-07-31T08:31:05Z", "author": {"login": "samuel-hawker"}, "path": ".azure/helm-acceptance-pipeline.yaml", "diffHunk": "@@ -0,0 +1,20 @@\n+# Triggers\n+# This pipeline will be trigger manually for releases", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDA1NDQ4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-459005448", "createdAt": "2020-07-31T08:32:41Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMjo0MVrOG6AetQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMjo0MVrOG6AetQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3ODQ1Mw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            # Regression tests are split to 4 jobs because of timeout 360 minutes on job\n          \n          \n            \n            # Regression tests are split into 4 jobs because of timeout set to 360 minutes for each job\n          \n      \n    \n    \n  \n\nMaybe needs more explanation, is this to parallelising the jobs? Or is 360 the max timeout time?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#discussion_r463478453", "createdAt": "2020-07-31T08:32:41Z", "author": {"login": "samuel-hawker"}, "path": ".azure/regression-pipeline.yaml", "diffHunk": "@@ -0,0 +1,47 @@\n+# Triggers\n+# This pipeline will be trigger manually for releases\n+trigger: none\n+pr:\n+  autoCancel: false\n+  branches:\n+    include:\n+      - '*'\n+      -\n+# Regression tests are split to 4 jobs because of timeout 360 minutes on job", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5MDA1ODU1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#pullrequestreview-459005855", "createdAt": "2020-07-31T08:33:23Z", "commit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMzoyM1rOG6Af3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0zMVQwODozMzoyM1rOG6Af3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MzQ3ODc1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  # !LoggingChangeST is skipped because it's kinda flaky o azure\n          \n          \n            \n                  # !LoggingChangeST is skipped because it can be flaky on Azure", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3420#discussion_r463478750", "createdAt": "2020-07-31T08:33:23Z", "author": {"login": "samuel-hawker"}, "path": ".azure/regression-pipeline.yaml", "diffHunk": "@@ -0,0 +1,47 @@\n+# Triggers\n+# This pipeline will be trigger manually for releases\n+trigger: none\n+pr:\n+  autoCancel: false\n+  branches:\n+    include:\n+      - '*'\n+      -\n+# Regression tests are split to 4 jobs because of timeout 360 minutes on job\n+jobs:\n+  - template: 'templates/system_test_general.yaml'\n+    parameters:\n+      name: 'regression_kafka_mirrormaker'\n+      display_name: 'regression-bundle I. -  kafka + mirrormaker'\n+      test_case: 'kafka.*ST,mirrormaker.*ST'\n+      groups: 'regression'\n+      cluster_operator_install_type: 'bundle'\n+      timeout: 360\n+\n+  - template: 'templates/system_test_general.yaml'\n+    parameters:\n+      name: 'regression_connect_security'\n+      display_name: 'regression-bundle II. - connect + security'\n+      test_case: 'connect.*ST,security.*ST'\n+      groups: 'regression'\n+      cluster_operator_install_type: 'bundle'\n+      timeout: 360\n+\n+  - template: 'templates/system_test_general.yaml'\n+    parameters:\n+      name: 'regression_operators_rollingupdate_watcher'\n+      display_name: 'regression-bundle III. - operator + rollingupdate + watcher'\n+      test_case: 'operators.*ST,rollingupdate.*ST,watcher.*ST'\n+      groups: 'regression'\n+      cluster_operator_install_type: 'bundle'\n+      timeout: 360\n+\n+  - template: 'templates/system_test_general.yaml'\n+    parameters:\n+      name: 'regression_all_remaining'\n+      display_name: 'regression-bundle IV. - remaining system tests'\n+      # !LoggingChangeST is skipped because it's kinda flaky o azure", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a27c2e19aaf187623dfbe3a7942ad76d7223108e"}, "originalPosition": 43}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fb1a3fa5eaad4e8e013fb2dcc84902232f3eb8a", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7fb1a3fa5eaad4e8e013fb2dcc84902232f3eb8a", "committedDate": "2020-07-31T10:29:43Z", "message": "Address comments, fix one class with s2i without annotation\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a7ee144ff7fa4f5aa1f64603a63573af26a03348", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a7ee144ff7fa4f5aa1f64603a63573af26a03348", "committedDate": "2020-07-31T12:28:26Z", "message": "Fix asserts in one test\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1047, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}