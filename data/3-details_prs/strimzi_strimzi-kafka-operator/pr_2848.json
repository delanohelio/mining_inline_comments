{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MDI2MTk3", "number": 2848, "title": "ST: Add upgrade test for 0.17 and enhance jenkins pipeline", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis PR adds Strimzi 0.17 to upgrade chain system tests. I also add an enhancement for Jenkins job to use the proper image in upgrade tests in case that images were built locally during the build.\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-04-17T09:33:05Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848", "merged": true, "mergeCommit": {"oid": "d75ad145d550b7978497b1ac48760135c2ed0c62"}, "closed": true, "closedAt": "2020-04-22T07:52:06Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 22, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYd3wqgH2gAyNDA1MDI2MTk3OjIxODE1ZTZlNDBiM2E2Mzk2MDdhODBjMGUyODcyNDM5YzU4MzkzZGI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcaDCwFAH2gAyNDA1MDI2MTk3OjA1ZDA0OTFmNjc0N2Q0MmY5ZTNlYWE0MGExZTNmZWM4YzE1MzBkNzA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "21815e6e40b3a639607a80c0e2872439c58393db", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/21815e6e40b3a639607a80c0e2872439c58393db", "committedDate": "2020-04-17T09:28:25Z", "message": "Add option to run upgrade properly on jenkins, add 0.17 upgrade test\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80adff7b22d3cbf4fc1a6bf19dde9453e5452ae9", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/80adff7b22d3cbf4fc1a6bf19dde9453e5452ae9", "committedDate": "2020-04-17T09:29:25Z", "message": "Fix env variable name\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd352e04bdedf7641bfa214c601942a4e18b3fa3", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cd352e04bdedf7641bfa214c601942a4e18b3fa3", "committedDate": "2020-04-17T09:30:39Z", "message": "Fix image tag in uograde json\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1MzE2NTAy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-395316502", "createdAt": "2020-04-17T09:50:26Z", "commit": {"oid": "cd352e04bdedf7641bfa214c601942a4e18b3fa3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28e68c2d440e9ab6e7aac4bb752b4d5b702666b1", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/28e68c2d440e9ab6e7aac4bb752b4d5b702666b1", "committedDate": "2020-04-17T12:02:07Z", "message": "Change tag in 050 during Jenkinsfile pr build\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ac58b47924b37c19417263dab9bb132ee8cc234", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9ac58b47924b37c19417263dab9bb132ee8cc234", "committedDate": "2020-04-17T14:53:37Z", "message": "Add debug info\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "da74d0fb1d7a881797e33b8d72e966e26591fc3c", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/da74d0fb1d7a881797e33b8d72e966e26591fc3c", "committedDate": "2020-04-17T20:51:22Z", "message": "Try to debug issue with build\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b24c602547017a71c4b54f7bccdbfbf20c04b72", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6b24c602547017a71c4b54f7bccdbfbf20c04b72", "committedDate": "2020-04-17T22:02:54Z", "message": "fixup! Try to debug issue with build\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1b7e5886d09c77f906f8cca04663d638860f295", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f1b7e5886d09c77f906f8cca04663d638860f295", "committedDate": "2020-04-18T07:24:28Z", "message": "fixup! fixup! Try to debug issue with build\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1ODk1MjE2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-395895216", "createdAt": "2020-04-18T08:44:05Z", "commit": {"oid": "f1b7e5886d09c77f906f8cca04663d638860f295"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1OTg5MjI3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-395989227", "createdAt": "2020-04-19T08:06:20Z", "commit": {"oid": "f1b7e5886d09c77f906f8cca04663d638860f295"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwODowNjoyMVrOGH0Gfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQwODowNjoyMVrOGH0Gfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg0Njg0Ng==", "bodyText": "what about this TODO to remove?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#discussion_r410846846", "createdAt": "2020-04-19T08:06:21Z", "author": {"login": "ppatierno"}, "path": "test/src/main/java/io/strimzi/test/k8s/cmdClient/BaseCmdKubeClient.java", "diffHunk": "@@ -181,6 +181,8 @@ public K replace(File... files) {\n     @SuppressWarnings(\"unchecked\")\n     public K applyContent(String yamlContent) {\n         try (Context context = defaultContext()) {\n+            // TODO remove this\n+            LOGGER.info(yamlContent);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1b7e5886d09c77f906f8cca04663d638860f295"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d380ac2426f72c9737ee67f4b30312d2df17cb4", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d380ac2426f72c9737ee67f4b30312d2df17cb4", "committedDate": "2020-04-19T11:18:13Z", "message": "Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8620555454230ae0da7b1a7c92d2b0b9b31e9a4b", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8620555454230ae0da7b1a7c92d2b0b9b31e9a4b", "committedDate": "2020-04-19T20:39:20Z", "message": "fixup! Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f4f487329ce0ddfee48c224dd621311d2fbaed32", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f4f487329ce0ddfee48c224dd621311d2fbaed32", "committedDate": "2020-04-20T07:27:02Z", "message": "fixup! fixup! Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af14599d73a6898908a58122d61cc9ad78989fd3", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/af14599d73a6898908a58122d61cc9ad78989fd3", "committedDate": "2020-04-20T12:16:49Z", "message": "fixup! fixup! fixup! Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17e8784c6cad60b1ff024cd9c3f06f9071f93837", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/17e8784c6cad60b1ff024cd9c3f06f9071f93837", "committedDate": "2020-04-20T17:24:30Z", "message": "fixup! fixup! fixup! fixup! Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/71a0504206c0bce21f6f7ca9a00d0195a0d43cee", "committedDate": "2020-04-20T20:37:29Z", "message": "fixup! fixup! fixup! fixup! fixup! Add new way how to determine if upgrade test is flaky. Fix sed\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MjA3MTI0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-397207124", "createdAt": "2020-04-21T10:41:03Z", "commit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzA0OTc5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-397304979", "createdAt": "2020-04-21T13:00:45Z", "commit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3MzA3NTg5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-397307589", "createdAt": "2020-04-21T13:03:51Z", "commit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk3OTA0NDE3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#pullrequestreview-397904417", "createdAt": "2020-04-22T07:14:20Z", "commit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNzoxNDoyMVrOGJnBSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQwNzoxNDoyMVrOGJnBSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMjcyOTY3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    // For upgrade tests running with locally builded images we need to change tag in StrimziUpgradeST.json\n          \n          \n            \n                                    // For upgrade tests running with locally buildt images we need to change tag in StrimziUpgradeST.json", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2848#discussion_r412729674", "createdAt": "2020-04-22T07:14:21Z", "author": {"login": "tombentley"}, "path": "Jenkinsfile-pr", "diffHunk": "@@ -130,6 +130,18 @@ pipeline {\n                         if (env.OC_VERSION == \"4\" && !env.ghprbCommentBody.contains('test_only')) {\n                             env.DOCKER_REGISTRY = \"image-registry.openshift-image-registry.svc:5000\"\n                         }\n+                        // For upgrade tests running with locally builded images we need to change tag in StrimziUpgradeST.json", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71a0504206c0bce21f6f7ca9a00d0195a0d43cee"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "05d0491f6747d42f9e3eaa40a1e3fec8c1530d70", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/05d0491f6747d42f9e3eaa40a1e3fec8c1530d70", "committedDate": "2020-04-22T07:20:50Z", "message": "Fix typo\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1887, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}