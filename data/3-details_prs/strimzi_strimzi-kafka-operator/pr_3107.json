{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzODcwODU4", "number": 3107, "title": "[DOC] Cruise Control documentation updates", "bodyText": "Type of change\n\nDocumentation\n\nDescription\nRESOLVES ISSUES #3094 and #3090\nThis pull request contains various changes to the Cruise Control chapter of the documentation.\n\nNew title: Cruise Control for cluster rebalancing\nAdded a new paragraph at the start explaining what Cruise Control is and a brief explanation of what is NOT supported\nAdded an example: Kafka configuration for hard optimization goals\nRemoved some redundant / ambiguous information\nRemoved two references to the CpuCapacityGoal and the CpuUsageDistributionGoal, which are not yet supported\nLinked to the \"Capacity configuration\" section in a couple of places\nUpdated the procedures as a result of testing\nEdited for consistency, e.g. \"rebalance proposal\" replaced with \"optimization proposal\" in a couple of places.\nEdited the \"Cruise Control configuration\" module:\n** Make it consistent with the content on optimization goals and optimization proposals\n** Attempt to simplify the explanation of \"Auto-created topics and log compaction\"\nChanged links to cross-references when referring to a specific anchor\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging -\n Update CHANGELOG.md", "createdAt": "2020-05-27T13:57:35Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107", "merged": true, "mergeCommit": {"oid": "9dc289334dd7e10cac87664ed0274290aae6a487"}, "closed": true, "closedAt": "2020-05-29T15:49:02Z", "author": {"login": "laidan6000"}, "timelineItems": {"totalCount": 33, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclWSwsgH2gAyNDIzODcwODU4OmIwZWQ5ZGYwNGY4MTVmOTFjMGYzNDJkNDZlYjJhZTdlOWViNmZkNGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcmEC2KAFqTQyMTA1MDU1OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b0ed9df04f815f91c0f342d46eb2ae7e9eb6fd4d", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b0ed9df04f815f91c0f342d46eb2ae7e9eb6fd4d", "committedDate": "2020-05-27T09:59:41Z", "message": "Daniel's proofread plus terminology\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b82d01e017064d0f9fdd0d6f6255ad868d242c91", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b82d01e017064d0f9fdd0d6f6255ad868d242c91", "committedDate": "2020-05-27T10:49:55Z", "message": "Changed apiVersion to v1alpha1 in KafkaRebalance\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97c5bc84e931e4b6780533cb3c0d8ad90d016af1", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/97c5bc84e931e4b6780533cb3c0d8ad90d016af1", "committedDate": "2020-05-27T11:18:55Z", "message": "Add skip_hard_goal_check=true note (QE)\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7ca0df5173714e7716b40f4354c1b11237c0610", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d7ca0df5173714e7716b40f4354c1b11237c0610", "committedDate": "2020-05-27T13:15:13Z", "message": "Fixed broken cross-refs\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a74d295fe8c8e9267dcc32bcef69ed0b863e9cab", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a74d295fe8c8e9267dcc32bcef69ed0b863e9cab", "committedDate": "2020-05-27T13:22:43Z", "message": "Changed anchor links to cross-refs\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9f189b4cea2af241575d8c40d3beedaabf0721d4", "committedDate": "2020-05-27T14:43:37Z", "message": "Removed goals: {} empty config\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzE4NTAz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419318503", "createdAt": "2020-05-27T15:06:44Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowNjo0NFrOGbPOXw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNTowOTowM1rOGbPVJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxNDE3NQ==", "bodyText": "do we need to use a specific number here (six)? If something changes in the future with less or more hard goals I think we will totally forget to update this number. I am pretty sure :-) Maybe just using \"some\" ... or your call ;-)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431214175", "createdAt": "2020-05-27T15:06:44Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/cruise-control/con-optimization-goals.adoc", "diffHunk": "@@ -30,66 +30,91 @@ For more information on each optimization goal, see link:https://github.com/link\n \n NOTE: CPU goals, intra-broker disk goals, \"Write your own\" goals, and Kafka assigner goals are not yet supported.\n \n-As described in the following sections, you can customize the supported optimization goals by reordering them in terms of priority, and disabling goals to exclude from optimization proposal calculations.\n-\n [discrete]\n-== Goals configuration in {ProductName}\n+== Goals configuration in {ProductName} custom resources\n \n-You configure optimization goals in the `Kafka` and `KafkaRebalance` custom resources. Cruise Control has configurations for link:#hard-soft-goals[hard] optimization goals that must be satisfied, as well as link:#master-goals[master], link:#default-goals[default], and link:#user-provided-goals[user-provided] optimization goals.\n+You configure optimization goals in `Kafka` and `KafkaRebalance` custom resources. Cruise Control has configurations for xref:#hard-soft-goals[_hard_] optimization goals that must be satisfied, as well as xref:#master-goals[_master_], xref:#default-goals[_default_], and xref:#user-provided-goals[_user-provided_] optimization goals. \n+Optimization goals are subject to any xref:#capacity-configuration[_capacity limits_] on broker resources.\n \n The following sections describe each goal configuration in more detail.\n \n [#hard-soft-goals]\n [discrete]\n === Hard goals and soft goals\n \n-_Hard goals_ are goals that _must_ be satisfied in optimization proposals. \n-Goals that are not hard goals are known as _soft goals_, and might not be satisfied by optimization proposals. \n+Hard goals are goals that _must_ be satisfied in optimization proposals. \n+Goals that are not configured as hard goals are known as _soft goals_. \n You can think of soft goals as _best effort_ goals: they do _not_ need to be satisfied in optimization proposals, but are included in optimization calculations.\n An optimization proposal that violates one or more soft goals, but satisfies all hard goals, is valid.\n \n-Cruise control will calculate optimization proposals that satisfy all the hard goals and as many soft goals as possible (in their priority order). \n+Cruise Control will calculate optimization proposals that satisfy all the hard goals and as many soft goals as possible (in their priority order). \n An optimization proposal that does _not_ satisfy all the hard goals is rejected by Cruise Control and not sent to the user for approval.\n \n NOTE: For example, you might have a soft goal to distribute a topic's replicas evenly across the cluster (the topic replica distribution goal). \n Cruise Control will ignore this goal if doing so enables all the configured hard goals to be met.\n \n-In Cruise Control, six of the link:#master-goals[master optimization goals] are preset as hard goals:\n+In Cruise Control, six of the xref:#master-goals[master optimization goals] are preset as hard goals:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIxNTkxMQ==", "bodyText": "Again a number here (Six) I would avoid that as I mentioned before", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431215911", "createdAt": "2020-05-27T15:09:03Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/cruise-control/con-optimization-goals.adoc", "diffHunk": "@@ -30,66 +30,91 @@ For more information on each optimization goal, see link:https://github.com/link\n \n NOTE: CPU goals, intra-broker disk goals, \"Write your own\" goals, and Kafka assigner goals are not yet supported.\n \n-As described in the following sections, you can customize the supported optimization goals by reordering them in terms of priority, and disabling goals to exclude from optimization proposal calculations.\n-\n [discrete]\n-== Goals configuration in {ProductName}\n+== Goals configuration in {ProductName} custom resources\n \n-You configure optimization goals in the `Kafka` and `KafkaRebalance` custom resources. Cruise Control has configurations for link:#hard-soft-goals[hard] optimization goals that must be satisfied, as well as link:#master-goals[master], link:#default-goals[default], and link:#user-provided-goals[user-provided] optimization goals.\n+You configure optimization goals in `Kafka` and `KafkaRebalance` custom resources. Cruise Control has configurations for xref:#hard-soft-goals[_hard_] optimization goals that must be satisfied, as well as xref:#master-goals[_master_], xref:#default-goals[_default_], and xref:#user-provided-goals[_user-provided_] optimization goals. \n+Optimization goals are subject to any xref:#capacity-configuration[_capacity limits_] on broker resources.\n \n The following sections describe each goal configuration in more detail.\n \n [#hard-soft-goals]\n [discrete]\n === Hard goals and soft goals\n \n-_Hard goals_ are goals that _must_ be satisfied in optimization proposals. \n-Goals that are not hard goals are known as _soft goals_, and might not be satisfied by optimization proposals. \n+Hard goals are goals that _must_ be satisfied in optimization proposals. \n+Goals that are not configured as hard goals are known as _soft goals_. \n You can think of soft goals as _best effort_ goals: they do _not_ need to be satisfied in optimization proposals, but are included in optimization calculations.\n An optimization proposal that violates one or more soft goals, but satisfies all hard goals, is valid.\n \n-Cruise control will calculate optimization proposals that satisfy all the hard goals and as many soft goals as possible (in their priority order). \n+Cruise Control will calculate optimization proposals that satisfy all the hard goals and as many soft goals as possible (in their priority order). \n An optimization proposal that does _not_ satisfy all the hard goals is rejected by Cruise Control and not sent to the user for approval.\n \n NOTE: For example, you might have a soft goal to distribute a topic's replicas evenly across the cluster (the topic replica distribution goal). \n Cruise Control will ignore this goal if doing so enables all the configured hard goals to be met.\n \n-In Cruise Control, six of the link:#master-goals[master optimization goals] are preset as hard goals:\n+In Cruise Control, six of the xref:#master-goals[master optimization goals] are preset as hard goals:\n \n [source]\n-RackAwareGoal; ReplicaCapacityGoal; DiskCapacityGoal; NetworkInboundCapacityGoal; NetworkOutboundCapacityGoal; CpuCapacityGoal\n+RackAwareGoal; ReplicaCapacityGoal; DiskCapacityGoal; NetworkInboundCapacityGoal; NetworkOutboundCapacityGoal\n \n-Hard goals are controlled in the Cruise Control deployment configuration, by editing the `hard.goals` property in `Kafka.spec.cruiseControl.config`.\n+You configure hard goals in the Cruise Control deployment configuration, by editing the `hard.goals` property in `Kafka.spec.cruiseControl.config`.\n \n * To inherit the six preset hard goals from Cruise Control, do not specify the `hard.goals` property in `Kafka.spec.cruiseControl.config`\n \n-* To change the preset hard goals, specify the desired goals in the `hard.goals` configuration option.\n+* To change the preset hard goals, specify the desired goals in the `hard.goals` property, using their fully-qualified domain names.\n \n-Increasing the number of hard goals will reduce the likelihood of Cruise Control generating valid optimization proposals.\n+.Example `Kafka` configuration for hard optimization goals\n+[source,yaml,subs=\"attributes+\"]\n+----\n+apiVersion: {KafkaApiVersion}\n+kind: Kafka\n+metadata:\n+  name: my-cluster\n+spec:\n+  kafka:\n+    # ...\n+  zookeeper:\n+    # ...\n+  entityOperator:\n+    topicOperator: {}\n+    userOperator: {}\n+  cruiseControl:\n+    capacity:\n+      networkIn: 10000KB/s\n+      networkOut: 10000KB/s\n+    config:\n+      hard.goals: >\n+        com.linkedin.kafka.cruisecontrol.analyzer.goals.NetworkInboundCapacityGoal,\n+        com.linkedin.kafka.cruisecontrol.analyzer.goals.NetworkOutboundCapacityGoal\n+      # ...\n+----\n+\n+Increasing the number of configured hard goals will reduce the likelihood of Cruise Control generating valid optimization proposals.\n \n-NOTE: If `skipHardGoalCheck: true` is specified in the `KafkaRebalance` custom resource, Cruise Control does not check that the list of user-provided optimization goals (`goals`) contains _all_ the configured hard goals (`hard.goals`). Therefore, if some, but not all, of the user-provided optimization goals are in the `hard.goals` list, Cruise Control will still treat them as hard goals even if `skipHardGoalCheck: true` is specified.\n+If `skipHardGoalCheck: true` is specified in the `KafkaRebalance` custom resource, Cruise Control does not check that the list of user-provided optimization goals (`goals`) contains _all_ the configured hard goals (`hard.goals`). Therefore, if some, but not all, of the user-provided optimization goals are in the `hard.goals` list, Cruise Control will still treat them as hard goals even if `skipHardGoalCheck: true` is specified.\n \n [#master-goals]\n [discrete]\n === Master optimization goals\n \n The _master optimization goals_ are available to all users.\n-Goals that are not listed in the master optimization goals are not available to use for Cruise Control operations.\n+Goals that are not listed in the master optimization goals are not available for use in Cruise Control operations.\n \n Unless you change the Cruise Control xref:proc-deploying-cruise-control-{context}[deployment configuration], {ProductName} will inherit the following master optimization goals from Cruise Control, in descending priority order:\n \n [source]\n-RackAwareGoal; ReplicaCapacityGoal; DiskCapacityGoal; NetworkInboundCapacityGoal; NetworkOutboundCapacityGoal; CpuCapacityGoal; ReplicaDistributionGoal; PotentialNwOutGoal; DiskUsageDistributionGoal; NetworkInboundUsageDistributionGoal; NetworkOutboundUsageDistributionGoal; CpuUsageDistributionGoal; TopicReplicaDistributionGoal; LeaderReplicaDistributionGoal; LeaderBytesInDistributionGoal; PreferredLeaderElectionGoal\n+RackAwareGoal; ReplicaCapacityGoal; DiskCapacityGoal; NetworkInboundCapacityGoal; NetworkOutboundCapacityGoal; ReplicaDistributionGoal; PotentialNwOutGoal; DiskUsageDistributionGoal; NetworkInboundUsageDistributionGoal; NetworkOutboundUsageDistributionGoal; TopicReplicaDistributionGoal; LeaderReplicaDistributionGoal; LeaderBytesInDistributionGoal; PreferredLeaderElectionGoal\n \n-Six of these goals are preset as link:#hard-soft-goals[hard goals].\n+Six of these goals are preset as xref:#hard-soft-goals[hard goals].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 105}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTA0MTEz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419904113", "createdAt": "2020-05-28T08:49:34Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo0OTozNFrOGbrrhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwODo0OTozNFrOGbrrhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4MDM4OA==", "bodyText": "Could we change this to \"not currently supported\"? We will most likely be add topic replication in the future, not sure about slack notifications though? Maybe change slack notifications to something ore general like \"anomaly notifications\"", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431680388", "createdAt": "2020-05-28T08:49:34Z", "author": {"login": "tomncooper"}, "path": "documentation/assemblies/cruise-control/assembly-cruise-control-concepts.adoc", "diffHunk": "@@ -3,11 +3,16 @@\n // master.adoc\n \n [id='cruise-control-concepts-{context}']\n-= Cruise Control\n+= Cruise Control for cluster rebalancing\n \n-You can deploy {CruiseControlProject} and access a subset of its features through {ProductName} custom resources.\n+You can deploy {CruiseControlProject} to your {ProductName} cluster and access its _cluster rebalancing_ feature through custom resources.\n \n-Example YAML files for deploying Cruise Control and setting optimization goals are provided in `examples/cruise-control/`.\n+Cruise Control is an open source system for automating Kafka operations, including monitoring cluster workload, rebalancing a cluster based on predefined constraints, and detecting and fixing anomalies, among others. \n+It consists of four main components--the Load Monitor, the Analyzer, the Anomaly Detector, and the Executor--and a REST API for all interactions.\n+{ProductName} utilizes the REST API to support the cluster rebalancing features of Cruise Control.\n+Other features, such as anomaly detection, Slack notifications, and changing the topic replication factor, are not supported.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTE1OTQz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419915943", "createdAt": "2020-05-28T09:04:34Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOTowNDozNFrOGbsOdQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOTowNDozNFrOGbsOdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY4OTMzMw==", "bodyText": "So I don't really understand this point. The issue would come if the configured hard.goals had more than those two goals in? If master goals had these two in and so did hard.goals then you would be fine.\nThis highlights another issue that we should highlight that if a user changes master goals they should also make sure that they make sure hard.goals is still a subset of the new master goals or strange errors will occur (in the CC release we are using, the latest release adds more checks that would fail to start if the user messed this up).", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431689333", "createdAt": "2020-05-28T09:04:34Z", "author": {"login": "tomncooper"}, "path": "documentation/modules/cruise-control/proc-generating-optimization-proposals.adoc", "diffHunk": "@@ -49,6 +49,8 @@ spec:\n     - RackAwareGoal\n     - ReplicaCapacityGoal\n ----\n++\n+In the above example, if `RackAwareGoal` and `ReplicaCapacityGoal` are configured as the only master optimization goals (in `Kafka.spec.cruiseControl.config.goals`), you must add `skip_hard_goal_check=true` to the Cruise Control deployment configuration. Otherwise an error will occur. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 40}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTE4NjQ5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419918649", "createdAt": "2020-05-28T09:08:06Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOTowODowN1rOGbsWgw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQwOTowODowN1rOGbsWgw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTY5MTM5NQ==", "bodyText": "\"If a hard goal is broken\"", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431691395", "createdAt": "2020-05-28T09:08:07Z", "author": {"login": "tomncooper"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -57,11 +57,13 @@ spec:\n       send.buffer.bytes: 131072\n     # ...\n ----\n+\n+[#capacity-configuration]\n+[discrete]\n == Capacity configuration\n \n Cruise Control uses _capacity limits_ to determine if optimization goals for broker resources are being broken.\n-An optimization will fail if a goal is broken, preventing the optimization from being used to generate an optimization proposal for balanced partition assignments.\n-For example, an optimization that would cause a broker to exceed its CPU capacity would not be used if the `CpuCapacityGoal` is set as a hard goal.\n+An optimization will fail if a goal is broken, preventing the optimization from being used to generate an optimization proposal.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTc1Mjk4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419975298", "createdAt": "2020-05-28T10:26:10Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDoyNjoxMFrOGbvBZw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDoyNjoxMFrOGbvBZw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTczNTE0Mw==", "bodyText": "Not sure we need among others if we say including", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431735143", "createdAt": "2020-05-28T10:26:10Z", "author": {"login": "PaulRMellor"}, "path": "documentation/assemblies/cruise-control/assembly-cruise-control-concepts.adoc", "diffHunk": "@@ -3,11 +3,16 @@\n // master.adoc\n \n [id='cruise-control-concepts-{context}']\n-= Cruise Control\n+= Cruise Control for cluster rebalancing\n \n-You can deploy {CruiseControlProject} and access a subset of its features through {ProductName} custom resources.\n+You can deploy {CruiseControlProject} to your {ProductName} cluster and access its _cluster rebalancing_ feature through custom resources.\n \n-Example YAML files for deploying Cruise Control and setting optimization goals are provided in `examples/cruise-control/`.\n+Cruise Control is an open source system for automating Kafka operations, including monitoring cluster workload, rebalancing a cluster based on predefined constraints, and detecting and fixing anomalies, among others. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTgwMjk5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419980299", "createdAt": "2020-05-28T10:33:36Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDozMzozNlrOGbvQZA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDozMzozNlrOGbvQZA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTczODk4MA==", "bodyText": "Do we want to list things we don't support here like anomaly detection? Maybe we could  be clear in this intro what is supported. Strimzi currently supports the <> features of Cruise Control", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431738980", "createdAt": "2020-05-28T10:33:36Z", "author": {"login": "PaulRMellor"}, "path": "documentation/assemblies/cruise-control/assembly-cruise-control-concepts.adoc", "diffHunk": "@@ -3,11 +3,16 @@\n // master.adoc\n \n [id='cruise-control-concepts-{context}']\n-= Cruise Control\n+= Cruise Control for cluster rebalancing\n \n-You can deploy {CruiseControlProject} and access a subset of its features through {ProductName} custom resources.\n+You can deploy {CruiseControlProject} to your {ProductName} cluster and access its _cluster rebalancing_ feature through custom resources.\n \n-Example YAML files for deploying Cruise Control and setting optimization goals are provided in `examples/cruise-control/`.\n+Cruise Control is an open source system for automating Kafka operations, including monitoring cluster workload, rebalancing a cluster based on predefined constraints, and detecting and fixing anomalies, among others. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTgyNzQ1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419982745", "createdAt": "2020-05-28T10:37:20Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDozNzoyMFrOGbvXxA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDozNzoyMFrOGbvXxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0MDg2OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            These are as follows, in the default descending priority order:\n          \n          \n            \n            The supported goals, in the default descending order of priority, are as follows:", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431740868", "createdAt": "2020-05-28T10:37:20Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/con-optimization-goals.adoc", "diffHunk": "@@ -9,7 +9,7 @@ To rebalance a Kafka cluster, Cruise Control uses optimization goals to generate\n \n Optimization goals are constraints on workload redistribution and resource utilization across a Kafka cluster.\n With a few exceptions, {ProductName} supports all the optimization goals developed in the Cruise Control project.\n-These are as follows, in descending priority order:\n+These are as follows, in the default descending priority order:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTg3OTI1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419987925", "createdAt": "2020-05-28T10:45:20Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo0NToyMFrOGbvnhA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo0NToyMFrOGbvnhA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0NDkwMA==", "bodyText": "link#capacity-configuration. xref?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431744900", "createdAt": "2020-05-28T10:45:20Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/con-optimization-proposals.adoc", "diffHunk": "@@ -7,15 +7,17 @@\n = Optimization proposals overview\n \n An _optimization proposal_ is a summary of proposed changes that would produce a more balanced Kafka cluster, with partition workloads distributed more evenly among the brokers. \n-Each optimization proposal is based on the set of xref:con-optimization-goals-{context}[optimization goals] that were used to generate it.\n+Each optimization proposal is based on the set of xref:con-optimization-goals-{context}[optimization goals] that was used to generate it, subject to any configured link#capacity-configuration[capacity limits on broker resources].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTg4OTQz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419988943", "createdAt": "2020-05-28T10:46:49Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo0Njo0OVrOGbvqYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo0Njo0OVrOGbvqYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0NTYzNA==", "bodyText": "Maybe the content in brackets doesn't need to be", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431745634", "createdAt": "2020-05-28T10:46:49Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/con-optimization-proposals.adoc", "diffHunk": "@@ -56,7 +58,7 @@ m\u00a6numReplicaMovements\n m\u00a6onDemandBalancednessScoreBefore, onDemandBalancednessScoreAfter\n \u00a6A measurement of the overall _balancedness_ of a Kafka Cluster, before and after the optimization proposal was generated.\n \n-The calculation is 100 minus the sum of the `BalancednessScore` of each violated soft goal. Cruise Control assigns a `BalancednessScore` to every optimization goal based on several factors, including priority (the goal's position in the list of `default.goals` or user-provided goals).\n+The score is calculated by subtracting the sum of the `BalancednessScore` of each violated soft goal from 100. Cruise Control assigns a `BalancednessScore` to every optimization goal based on several factors, including priority (the goal's position in the list of `default.goals` or user-provided goals).", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTkxMTc2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419991176", "createdAt": "2020-05-28T10:50:14Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MDoxNFrOGbvxYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MDoxNFrOGbvxYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0NzQyNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            You can provide any xref:ref-cruise-control-configuration-{context}[standard configuration option] apart from those managed directly by {ProductName}. \n          \n          \n            \n            You can provide any xref:ref-cruise-control-configuration-{context}[standard Cruise Control configuration option] apart from those managed directly by {ProductName}.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431747425", "createdAt": "2020-05-28T10:50:14Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -89,10 +80,12 @@ spec:\n       timeoutSeconds: 5\n # ...\n ----\n-<1> Specifies capacity limits for broker resources. For more information, see xref:capacity_configuration[Capacity configuration].\n-<2> Defines the Cruise Control configuration, including default and enabled optimization goals. You can provide any xref:ref-cruise-control-configuration-{context}[standard configuration option] apart from those managed directly by {ProductName}.\n+<1> Specifies capacity limits for broker resources. For more information, see xref:#capacity-configuration[Capacity configuration].\n+<2> Defines the Cruise Control configuration, including the default optimization goals (in `default.goals`) and any customizations to the master optimization goals (in `goals`) or the hard goals (in `hard.goals`). \n+You can provide any xref:ref-cruise-control-configuration-{context}[standard configuration option] apart from those managed directly by {ProductName}. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 50}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTkxODcy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419991872", "createdAt": "2020-05-28T10:51:15Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MToxNVrOGbvzZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MToxNVrOGbvzZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0Nzk0Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            <4> Defined loggers and log levels added directly (inline) or indirectly (external) through a ConfigMap. A custom ConfigMap must be placed under the log4j.properties key. Cruise Control has a single logger called cruisecontrol.root.logger. You can set the log level to INFO, ERROR, WARN, TRACE, DEBUG, FATAL or OFF. For more information, see xref:#logging-configuration[Logging configuration].\n          \n          \n            \n            <4> Defined loggers and log levels added directly (inline) or indirectly (external) through a ConfigMap. A custom ConfigMap must be placed under the log4j.properties key. Cruise Control has a single logger called `cruisecontrol.root.logger`. You can set the log level to INFO, ERROR, WARN, TRACE, DEBUG, FATAL or OFF. For more information, see xref:#logging-configuration[Logging configuration].", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431747942", "createdAt": "2020-05-28T10:51:15Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/proc-deploying-cruise-control.adoc", "diffHunk": "@@ -89,10 +80,12 @@ spec:\n       timeoutSeconds: 5\n # ...\n ----\n-<1> Specifies capacity limits for broker resources. For more information, see xref:capacity_configuration[Capacity configuration].\n-<2> Defines the Cruise Control configuration, including default and enabled optimization goals. You can provide any xref:ref-cruise-control-configuration-{context}[standard configuration option] apart from those managed directly by {ProductName}.\n+<1> Specifies capacity limits for broker resources. For more information, see xref:#capacity-configuration[Capacity configuration].\n+<2> Defines the Cruise Control configuration, including the default optimization goals (in `default.goals`) and any customizations to the master optimization goals (in `goals`) or the hard goals (in `hard.goals`). \n+You can provide any xref:ref-cruise-control-configuration-{context}[standard configuration option] apart from those managed directly by {ProductName}. \n+For more information on configuring optimization goals, see xref:con-optimization-goals-{context}[]. \n <3> CPU and memory resources reserved for Cruise Control. For more information, see xref:assembly-resource-limits-and-requests-deployment-configuration-kafka[].\n-<4> Defined loggers and log levels added directly (inline) or indirectly (external) through a ConfigMap. A custom ConfigMap must be placed under the log4j.properties key. Cruise Control has a single logger called cruisecontrol.root.logger. You can set the log level to INFO, ERROR, WARN, TRACE, DEBUG, FATAL or OFF. For more information, see xref:logging_configuration[Logging configuration].\n+<4> Defined loggers and log levels added directly (inline) or indirectly (external) through a ConfigMap. A custom ConfigMap must be placed under the log4j.properties key. Cruise Control has a single logger called cruisecontrol.root.logger. You can set the log level to INFO, ERROR, WARN, TRACE, DEBUG, FATAL or OFF. For more information, see xref:#logging-configuration[Logging configuration].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 54}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTkyNzMy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419992732", "createdAt": "2020-05-28T10:52:34Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MjozNVrOGbv17A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1MjozNVrOGbv17A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc0ODU4OA==", "bodyText": "Should we have an attribute for this to future-proof?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431748588", "createdAt": "2020-05-28T10:52:35Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/proc-generating-optimization-proposals.adoc", "diffHunk": "@@ -23,7 +23,7 @@ You can then analyze the summary information in the optimization proposal and de\n +\n [source,yaml,subs=\"attributes+\"]\n ----\n-apiVersion: {KafkaApiVersion}\n+apiVersion: kafka.strimzi.io/v1alpha1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTk0OTUz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419994953", "createdAt": "2020-05-28T10:55:49Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1NTo0OVrOGbv8bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMDo1NTo0OVrOGbv8bQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc1MDI1Mw==", "bodyText": "Can we make this clearer: the different properties", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431750253", "createdAt": "2020-05-28T10:55:49Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/proc-generating-optimization-proposals.adoc", "diffHunk": "@@ -107,7 +109,7 @@ Status:\n   Session Id:                             05539377-ca7b-45ef-b359-e13564f1458c\n ----\n +\n-For information about the different properties, see link:#contents-optimization-proposals[Contents of optimization proposals]. \n+For information about the different properties, see xref:#contents-optimization-proposals[Contents of optimization proposals]. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 49}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTk3OTQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419997947", "createdAt": "2020-05-28T11:00:13Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMTowMDoxM1rOGbwFKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOFQxMTowMDoxM1rOGbwFKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTc1MjQ4OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The Cruise Control metric reporters will attempt to disable log compaction for the `strimzi.cruisecontrol.metrics` topic but will fail if they are started with a new Kafka cluster.\n          \n          \n            \n            The Cruise Control metric reporters will attempt to disable log compaction for the `strimzi.cruisecontrol.metrics` topic, but will fail if they are started with a new Kafka cluster.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r431752489", "createdAt": "2020-05-28T11:00:13Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/cruise-control/ref-cruise-control-configuration.adoc", "diffHunk": "@@ -92,35 +94,38 @@ spec:\n     # ...\n ----\n \n-\n .Additional resources\n For more information, refer to the xref:type-BrokerCapacity-reference[].\n \n-== Topic creation and configuration\n+[#auto-created-topics-logs]\n+[discrete]\n+== Auto-created topics and log compaction\n \n-Cruise Control requires the following three topics to be created in order to function properly:\n+Cruise Control requires the following three topics in order to work:\n \n * `strimzi.cruisecontrol.partitionmetricsamples`\n * `strimzi.cruisecontrol.modeltrainingsamples`\n * `strimzi.cruisecontrol.metrics`\n \n-Cruise Control will create the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics after the Cruise Control metric reporters create the `strimzi.cruisecontrol.metrics` topic.\n-However, if automatic topic creation is disabled in Kafka with a configuration of `auto.create.topics.enable: false` in `spec.kafka.config` when starting a new Kafka cluster, the Cruise Control metric reporters will be unable to create the `strimzi.cruisecontrol.metrics` topic.\n-In this situation, the `strimzi.cruisecontrol.metrics` topic will need to be created manually.\n+These three topics are usually auto-created by {ProductName} and Cruise Control. First, the metric reporters create the `strimzi.cruisecontrol.metrics` topic. \n+Then, Cruise Control creates the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics.\n+\n+However, if automatic topic creation is _disabled_ in Kafka (`auto.create.topics.enable: false` is configured in `spec.kafka.config` when starting a new Kafka cluster) the Cruise Control metric reporters are unable to create the `strimzi.cruisecontrol.metrics` topic.\n+In this situation, you need to manually create the `strimzi.cruisecontrol.metrics` topic before deploying Cruise Control. \n+You can do this using the following command:\n \n-To manually create the `strimzi.cruisecontrol.metrics` Cruise Control topic in your Kubernetes cluster:\n [source,shell,subs=\"attributes+\"]\n ----\n kubectl apply -f examples/cruise-control/cruise-control-topic.yaml\n ----\n \n Since log compaction may remove records needed by Cruise Control, all topics created by Cruise Control must be configured with `cleanup.policy=delete` to disable log compaction.\n Cruise Control will automatically disable log compaction for the `strimzi.cruisecontrol.partitionmetricsamples` and `strimzi.cruisecontrol.modeltrainingsamples` topics.\n-The Cruise Control metric reporters will attempt to disable log compaction for the `strimzi.cruisecontrol.metrics` topic but will fail when being started with a new Kafka cluster.\n+The Cruise Control metric reporters will attempt to disable log compaction for the `strimzi.cruisecontrol.metrics` topic but will fail if they are started with a new Kafka cluster.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5OTk4NjMw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-419998630", "createdAt": "2020-05-28T11:01:17Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwMTY1Mzg0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-420165384", "createdAt": "2020-05-28T14:25:24Z", "commit": {"oid": "9f189b4cea2af241575d8c40d3beedaabf0721d4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48dc9c1dca28cecb8616b527654e26a1bad0b4f9", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/48dc9c1dca28cecb8616b527654e26a1bad0b4f9", "committedDate": "2020-05-28T14:30:11Z", "message": "Review comments PP\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bbe4254ba6dc0254496ee34e7c9cc58158d2bb44", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bbe4254ba6dc0254496ee34e7c9cc58158d2bb44", "committedDate": "2020-05-28T15:08:50Z", "message": "List supported CC features\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f8612584a43fe05645038fda1a46f4d4361dbee", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3f8612584a43fe05645038fda1a46f4d4361dbee", "committedDate": "2020-05-28T15:30:43Z", "message": "Review comments PM\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e59573cb2e56a9f248b9247a680e44b2f2062451", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e59573cb2e56a9f248b9247a680e44b2f2062451", "committedDate": "2020-05-28T16:09:22Z", "message": "Edited paragraph on log compaction\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17837da73f2b6e74551fce251b3331fbdf4f880e", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/17837da73f2b6e74551fce251b3331fbdf4f880e", "committedDate": "2020-05-29T07:51:31Z", "message": "Removed v1alpha1 variable\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "31c650bfc57f517fb446958d724499aaa30c60c4", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/31c650bfc57f517fb446958d724499aaa30c60c4", "committedDate": "2020-05-29T09:36:54Z", "message": "Added note on master goals, plus consistency edits\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwODM5MjY0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-420839264", "createdAt": "2020-05-29T10:36:19Z", "commit": {"oid": "31c650bfc57f517fb446958d724499aaa30c60c4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozNjoxOVrOGcXmQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yOVQxMDozNjoxOVrOGcXmQQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMjM5OTkzNw==", "bodyText": "I thought we has switched to using describe? We should be consistent with whichever command was used elsewhere?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#discussion_r432399937", "createdAt": "2020-05-29T10:36:19Z", "author": {"login": "tomncooper"}, "path": "documentation/modules/cruise-control/proc-fixing-problems-with-kafkarebalance.adoc", "diffHunk": "@@ -26,13 +26,20 @@ During a \u201crefresh\u201d, a new optimization proposal is requested from the Cruise\n \n .Procedure\n \n-. Get information about the error from the `KafkaRebalance` status and resolve the issue if possible.\n+. Get information about the error from the `KafkaRebalance` status:\n++\n+[source,shell,subs=\"+quotes\"]\n+----\n+kubectl get kafka kafkarebalance -o jsonpath='{.status}'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "31c650bfc57f517fb446958d724499aaa30c60c4"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIwODcwMjI0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-420870224", "createdAt": "2020-05-29T11:30:47Z", "commit": {"oid": "31c650bfc57f517fb446958d724499aaa30c60c4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "229ec14c46d0da284203cce42b0878394d92eb9f", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/229ec14c46d0da284203cce42b0878394d92eb9f", "committedDate": "2020-05-29T11:30:55Z", "message": "Changed check status cmd to kubectl describe\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDAwNzYw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-421000760", "createdAt": "2020-05-29T14:20:35Z", "commit": {"oid": "229ec14c46d0da284203cce42b0878394d92eb9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIxMDUwNTU5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3107#pullrequestreview-421050559", "createdAt": "2020-05-29T15:17:56Z", "commit": {"oid": "229ec14c46d0da284203cce42b0878394d92eb9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1444, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}