{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0MTE3NDMw", "number": 3903, "title": "Fix the client rack-awareness in Kafka Connect", "bodyText": "Type of change\n\nBugfix\n\nDescription\nThe client rack-awareness in Kafka Connect does not work because it references a non-existing cluster role. This PR adds a new cluster role strimzi-kafka-client with the required rights. I also had to do some changes to how the ClusterRoleBindings are named to make sure a KafkaConnect and Kafka with the same name can run together.\nI considered re-using the strimzi-kafka-broker role which has currently the same rights. But I decided using separate role is cleaner in case the broker role needs to change in the future.\nThis should resolve #3902.\nChecklist\n\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-11-02T14:59:59Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3903", "merged": true, "mergeCommit": {"oid": "cc7b7863313c73648f8221a0dfa73fa5d80c0ce3"}, "closed": true, "closedAt": "2020-11-03T09:20:56Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdYlySdAH2gAyNTE0MTE3NDMwOmRlYTk4NTliMmMwMGUwMDAxMWMxYjYxZDQwNjU5YjM2ZmMwZWVkMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYraQigFqTUyMjAwMzcyNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "dea9859b2c00e00011c1b61d40659b36fc0eed1a", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/dea9859b2c00e00011c1b61d40659b36fc0eed1a", "committedDate": "2020-11-02T14:52:50Z", "message": "Fix the client rack-awareness in Kafka Connect - Closes #3902\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ed1a4a4dc819313588629f4571921c1bce91c6f", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8ed1a4a4dc819313588629f4571921c1bce91c6f", "committedDate": "2020-11-02T15:48:54Z", "message": "Fix typo in docs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTQxNDg5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3903#pullrequestreview-521941489", "createdAt": "2020-11-02T19:44:18Z", "commit": {"oid": "8ed1a4a4dc819313588629f4571921c1bce91c6f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxOTo0NDoxOFrOHsTKHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxOTo0NDoxOFrOHsTKHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjIxMzI3Nw==", "bodyText": "why Topic Operator here?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3903#discussion_r516213277", "createdAt": "2020-11-02T19:44:18Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/ref-operator-cluster.adoc", "diffHunk": "@@ -241,6 +241,15 @@ The `strimzi-topic-operator` `ClusterRole` represents the access needed by the T\n include::install/cluster-operator/031-ClusterRole-strimzi-entity-operator.yaml[]\n ----\n \n+The `strimzi-kafka-client` `ClusterRole` represents the access needed by the components based on Kafka clients which use the client rack-awareness.\n+As described in the xref:delegated-privileges-str[Delegated privileges] section, this role is also needed by the Cluster Operator in order to be able to delegate this access.\n+\n+[source,yaml,options=\"nowrap\"]\n+.`ClusterRole` for the Cluster Operator allowing it to delegate access to events to the Topic Operator", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8ed1a4a4dc819313588629f4571921c1bce91c6f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c66e37b24c22ecad1c3c5b2262795a895933b105", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c66e37b24c22ecad1c3c5b2262795a895933b105", "committedDate": "2020-11-02T21:18:43Z", "message": "Give the cluster role binding an unique name\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIyMDAzNzI2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3903#pullrequestreview-522003726", "createdAt": "2020-11-02T21:26:01Z", "commit": {"oid": "c66e37b24c22ecad1c3c5b2262795a895933b105"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 870, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}