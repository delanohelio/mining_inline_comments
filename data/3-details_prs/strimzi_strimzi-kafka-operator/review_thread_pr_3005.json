{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE3MjQ2MTc0", "number": 3005, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NDoxNFrOD8Aouw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NjozOFrOD8Arig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjUxNTc5OnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NDoxNFrOGUr29w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0OTo1M1rOGUsBuA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM0MzI4Nw==", "bodyText": "Should this be podDnsNameWithoutClusterDomain?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3005#discussion_r424343287", "createdAt": "2020-05-13T10:44:14Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "diffHunk": "@@ -136,7 +136,12 @@ public KafkaBrokerConfigurationBuilder withListeners(String clusterName, String\n \n         // Replication listener\n         listeners.add(\"REPLICATION-9091://0.0.0.0:9091\");\n-        advertisedListeners.add(String.format(\"REPLICATION-9091://%s-${STRIMZI_BROKER_ID}.%s-brokers.%s.svc:9091\", KafkaResources.kafkaStatefulSetName(clusterName), KafkaResources.kafkaStatefulSetName(clusterName), namespace));\n+        advertisedListeners.add(String.format(\"REPLICATION-9091://%s:9091\",\n+                ModelUtils.podDnsName(namespace,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac78a777640693c5d073344d6889eab672fd0777"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM0NjA0MA==", "bodyText": "You're absolutely right, I made these changes prior to our conversation and misunderstood. whether they should be long or short.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3005#discussion_r424346040", "createdAt": "2020-05-13T10:49:53Z", "author": {"login": "samuel-hawker"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "diffHunk": "@@ -136,7 +136,12 @@ public KafkaBrokerConfigurationBuilder withListeners(String clusterName, String\n \n         // Replication listener\n         listeners.add(\"REPLICATION-9091://0.0.0.0:9091\");\n-        advertisedListeners.add(String.format(\"REPLICATION-9091://%s-${STRIMZI_BROKER_ID}.%s-brokers.%s.svc:9091\", KafkaResources.kafkaStatefulSetName(clusterName), KafkaResources.kafkaStatefulSetName(clusterName), namespace));\n+        advertisedListeners.add(String.format(\"REPLICATION-9091://%s:9091\",\n+                ModelUtils.podDnsName(namespace,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM0MzI4Nw=="}, "originalCommit": {"oid": "ac78a777640693c5d073344d6889eab672fd0777"}, "originalPosition": 19}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjUxNjg0OnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NDozOVrOGUr3qA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NDozOVrOGUr3qA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM0MzQ2NA==", "bodyText": "Same as above - should this be podDnsNameWithoutClusterDomain?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3005#discussion_r424343464", "createdAt": "2020-05-13T10:44:39Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBrokerConfigurationBuilder.java", "diffHunk": "@@ -273,7 +278,13 @@ private void configureReplicationListener() {\n      * @return  String with advertised listener configuration\n      */\n     private String getAdvertisedListener(String clusterName, String namespace, String listenerName, int port)    {\n-        return String.format(\"%s://%s-${STRIMZI_BROKER_ID}.%s-brokers.%s.svc:%d\", listenerName, KafkaResources.kafkaStatefulSetName(clusterName), KafkaResources.kafkaStatefulSetName(clusterName), namespace, port);\n+        return String.format(\"%s://%s:%d\",\n+                listenerName,\n+                ModelUtils.podDnsName(namespace,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac78a777640693c5d073344d6889eab672fd0777"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY0MjUyMjk4OnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/operator/assembly/KafkaAssemblyOperator.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NjozOFrOGUr7cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xM1QxMDo0NjozOFrOGUr7cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNDM0NDQzNA==", "bodyText": "Same as above - should this be podDnsNameWithoutClusterDomain?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3005#discussion_r424344434", "createdAt": "2020-05-13T10:46:38Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/operator/assembly/KafkaAssemblyOperator.java", "diffHunk": "@@ -1478,10 +1478,10 @@ String zkConnectionString(int connectToReplicas, Function<Integer, String> zkNod\n                             return Future.failedFuture(Util.missingSecretException(namespace, ClusterOperator.secretName(name)));\n                         }\n \n-                        Function<Integer, String> zkNodeAddress = (Integer i) -> String.format(\"%s.%s.%s.svc\",\n-                                zkCluster.getPodName(i),\n+                        Function<Integer, String> zkNodeAddress = (Integer i) -> ModelUtils.podDnsName(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ac78a777640693c5d073344d6889eab672fd0777"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 42, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}