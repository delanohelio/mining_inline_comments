{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwMzQ3NzMy", "number": 2802, "title": "[MO] - [clients] -> removing future + solving issue with vertx", "bodyText": "Signed-off-by: morsak xorsak02@stud.fit.vutbr.cz\nType of change\n\nEnhancement / new feature\nRefactoring\n\nDescription\nThis PR adding ability that clients only returning int type, which is sent or receive messages and encapsulate all the async calls inside the methods.\nAdditionally, I have done some refactoring which was needed for instance:\n\nuse instance attribute of Vert.x from the class AbstractVerticle\nauto-closeable interfaces, which ensures that the client will always close the Vert.x instance\n\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-04-07T15:41:33Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802", "merged": true, "mergeCommit": {"oid": "5be48df9cbc8f8cb36d08e17bcd07b6ec5732272"}, "closed": true, "closedAt": "2020-04-09T14:13:21Z", "author": {"login": "see-quick"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVYpQ0gFqTM4OTQzMjk2Mg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcV6SYoAFqTM5MDY4OTA5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5NDMyOTYy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-389432962", "createdAt": "2020-04-07T19:40:43Z", "commit": {"oid": "050815acd53e9a899f745452239a72aeef360c0a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTo0MDo0M1rOGCTONg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wN1QxOTo0MDo0M1rOGCTONg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTA2NTI3MA==", "bodyText": "Do we still need the TODO?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#discussion_r405065270", "createdAt": "2020-04-07T19:40:43Z", "author": {"login": "scholzj"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/kafkaclients/externalClients/Consumer.java", "diffHunk": "@@ -13,8 +14,8 @@\n import java.util.concurrent.atomic.AtomicInteger;\n import java.util.function.IntPredicate;\n \n-\n-public class Consumer extends ClientHandlerBase<Integer> {\n+// TODO: autocloseable to close vertx always...", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "050815acd53e9a899f745452239a72aeef360c0a"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5Njc5ODk3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-389679897", "createdAt": "2020-04-08T06:19:00Z", "commit": {"oid": "050815acd53e9a899f745452239a72aeef360c0a"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNjoxOTowMFrOGCggQA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQwNjoxOTowOFrOGCggfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI4Mjg4MA==", "bodyText": "can we remove these lines?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#discussion_r405282880", "createdAt": "2020-04-08T06:19:00Z", "author": {"login": "ppatierno"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/KafkaST.java", "diffHunk": "@@ -1290,11 +1286,11 @@ void testNodePortTls() throws Exception {\n                 .withConsumerGroupName(CONSUMER_GROUP_NAME + \"-\" + rng.nextInt(Integer.MAX_VALUE))\n                 .build();\n \n-        Future<Integer> producer = basicExternalKafkaClient.sendMessagesTls();\n-        Future<Integer> consumer = basicExternalKafkaClient.receiveMessagesTls();\n-\n-        assertThat(producer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n-        assertThat(consumer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n+//        Future<Integer> producer = basicExternalKafkaClient.sendMessagesTls();\n+//        Future<Integer> consumer = basicExternalKafkaClient.receiveMessagesTls();\n+//\n+//        assertThat(producer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n+//        assertThat(consumer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "050815acd53e9a899f745452239a72aeef360c0a"}, "originalPosition": 63}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTI4Mjk0MA==", "bodyText": "ditto as above?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#discussion_r405282940", "createdAt": "2020-04-08T06:19:08Z", "author": {"login": "ppatierno"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/KafkaST.java", "diffHunk": "@@ -1324,11 +1320,11 @@ void testLoadBalancer() throws Exception {\n                 .withConsumerGroupName(CONSUMER_GROUP_NAME + \"-\" + rng.nextInt(Integer.MAX_VALUE))\n                 .build();\n \n-        Future<Integer> producer = basicExternalKafkaClient.sendMessagesPlain();\n-        Future<Integer> consumer = basicExternalKafkaClient.receiveMessagesPlain();\n-\n-        assertThat(producer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n-        assertThat(consumer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n+//        Future<Integer> producer = basicExternalKafkaClient.sendMessagesPlain();\n+//        Future<Integer> consumer = basicExternalKafkaClient.receiveMessagesPlain();\n+//\n+//        assertThat(producer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));\n+//        assertThat(consumer.get(Constants.GLOBAL_CLIENTS_TIMEOUT, TimeUnit.MILLISECONDS), is(MESSAGE_COUNT));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "050815acd53e9a899f745452239a72aeef360c0a"}, "originalPosition": 80}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "709e7242628732abdcdae6e4a929c01b811865ae", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/709e7242628732abdcdae6e4a929c01b811865ae", "committedDate": "2020-04-08T11:16:00Z", "message": "[MO] - [clients] -> removing future + solving issue with vertx\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a8a8a3eefde91c4ba993662a026138edaf91798", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6a8a8a3eefde91c4ba993662a026138edaf91798", "committedDate": "2020-04-08T11:16:00Z", "message": "[MO] -[fix] -> fix\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7c8cefe4c7df2c28f3fcbf77b12ec0888b7ce15c", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7c8cefe4c7df2c28f3fcbf77b12ec0888b7ce15c", "committedDate": "2020-04-08T11:16:00Z", "message": "[MO] - [refactor] -> jakub commends\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f8f7be9ffce8aad546b50ce90e77783e282fc6be", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f8f7be9ffce8aad546b50ce90e77783e282fc6be", "committedDate": "2020-04-08T11:16:00Z", "message": "[MO] - [refactor] -> removing instance\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "08cd56df7c9756b6927ed1b3b39c71608e70c931", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/08cd56df7c9756b6927ed1b3b39c71608e70c931", "committedDate": "2020-04-08T11:13:50Z", "message": "[MO] - [refactor] -> removing instance\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}, "afterCommit": {"oid": "f8f7be9ffce8aad546b50ce90e77783e282fc6be", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f8f7be9ffce8aad546b50ce90e77783e282fc6be", "committedDate": "2020-04-08T11:16:00Z", "message": "[MO] - [refactor] -> removing instance\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "336fa2a5100a7dab3aa660bc379ef282f40210bb", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/336fa2a5100a7dab3aa660bc379ef282f40210bb", "committedDate": "2020-04-08T11:16:53Z", "message": "[MO] - [oauth] -> removing\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTIzMDU1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-389923055", "createdAt": "2020-04-08T12:25:00Z", "commit": {"oid": "336fa2a5100a7dab3aa660bc379ef282f40210bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMzI0OTI2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-390324926", "createdAt": "2020-04-08T20:55:19Z", "commit": {"oid": "336fa2a5100a7dab3aa660bc379ef282f40210bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNjY0ODEw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-390664810", "createdAt": "2020-04-09T10:13:36Z", "commit": {"oid": "336fa2a5100a7dab3aa660bc379ef282f40210bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwNjg5MDky", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2802#pullrequestreview-390689092", "createdAt": "2020-04-09T10:53:04Z", "commit": {"oid": "336fa2a5100a7dab3aa660bc379ef282f40210bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1816, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}