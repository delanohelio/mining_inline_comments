{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM5OTMzNzYy", "number": 3240, "title": "Fixed log4j2 support for the bridge", "bodyText": "Signed-off-by: Paolo Patierno ppatierno@live.com\nType of change\n\nBugfix\n\nDescription\nThis PR fixes #3232 allowing the cluster operator to support the bridge log4j2 properly.\nThis PR also replaces the closed #3085\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Make sure all tests pass\n Update documentation\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-06-25T10:37:26Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240", "merged": true, "mergeCommit": {"oid": "8d8cfa9dc0d281bbf69a530a92290f839a923773"}, "closed": true, "closedAt": "2020-06-30T17:43:37Z", "author": {"login": "ppatierno"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcu-eM3AFqTQzODA4NDIxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwVLPiAFqTQzOTk4MzI1NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MDg0MjEx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-438084211", "createdAt": "2020-06-26T07:50:11Z", "commit": {"oid": "14c6b4c80a6faa93e65f327cade17641ca179236"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzo1MDoxMVrOGpXLwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNlQwNzo1MjoxM1rOGpXQCQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAyNDY0Mg==", "bodyText": "Maybe it would be better, at this point to change the value of ANCILLARY_CM_KEY_LOG_CONFIG to \"log4j2.properties\" and override getAncillaryConfigMapKeyLogConfig() on the Kafka and other things which are still log4j 1.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#discussion_r446024642", "createdAt": "2020-06-26T07:50:11Z", "author": {"login": "tombentley"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/AbstractModel.java", "diffHunk": "@@ -1203,7 +1203,7 @@ protected String determineImagePullPolicy(ImagePullPolicy requestedImagePullPoli\n         }\n     }\n \n-    String getAncillaryConfigMapKeyLogConfig() {\n+    public String getAncillaryConfigMapKeyLogConfig() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c6b4c80a6faa93e65f327cade17641ca179236"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NjAyNTczNw==", "bodyText": "So, hang on one moment. In the bridge itself we have two copies of this config, and now in the CO we're also embedding a 3rd copy. Is that really necessary?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#discussion_r446025737", "createdAt": "2020-06-26T07:52:13Z", "author": {"login": "tombentley"}, "path": "cluster-operator/src/main/resources/kafkaBridgeDefaultLoggingProperties", "diffHunk": "@@ -1,9 +1,24 @@\n-log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender\n-log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout\n-log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} %p %m (%c) [%t]%n\n-bridge.root.logger=INFO\n-log4j.rootLogger=${bridge.root.logger}, CONSOLE\n-log4j.logger.http.openapi.operation.healthy=WARN, CONSOLE\n-log4j.additivity.http.openapi.operation.healthy=false\n-log4j.logger.http.openapi.operation.ready=WARN, CONSOLE\n-log4j.additivity.http.openapi.operation.ready=false\n\\ No newline at end of file\n+name = BridgeConfig", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "14c6b4c80a6faa93e65f327cade17641ca179236"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM4MjcyNjAx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-438272601", "createdAt": "2020-06-26T12:58:06Z", "commit": {"oid": "14c6b4c80a6faa93e65f327cade17641ca179236"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2f8b5b0ccf1de8d6b6487b3a54b7bb93d3aa638", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c2f8b5b0ccf1de8d6b6487b3a54b7bb93d3aa638", "committedDate": "2020-06-29T15:31:38Z", "message": "Fixed log4j2 support in the bridge\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c155da975aaf57e272ad38249bfc03b1c7fc73fa", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c155da975aaf57e272ad38249bfc03b1c7fc73fa", "committedDate": "2020-06-29T15:32:51Z", "message": "Updated bridge version to latest 0.17.0\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8d93031798f090783181e689062b4c8c93a4e59", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c8d93031798f090783181e689062b4c8c93a4e59", "committedDate": "2020-06-29T15:24:53Z", "message": "Updated bridge version to latest 0.17.0\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}, "afterCommit": {"oid": "c155da975aaf57e272ad38249bfc03b1c7fc73fa", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c155da975aaf57e272ad38249bfc03b1c7fc73fa", "committedDate": "2020-06-29T15:32:51Z", "message": "Updated bridge version to latest 0.17.0\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4185b766d27925fbd9b5f0e0bfc12d83ec0ddb73", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4185b766d27925fbd9b5f0e0bfc12d83ec0ddb73", "committedDate": "2020-06-29T19:55:31Z", "message": "Update derived resources\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NzA3OTMy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-439707932", "createdAt": "2020-06-30T06:34:33Z", "commit": {"oid": "4185b766d27925fbd9b5f0e0bfc12d83ec0ddb73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NzMyMTM2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-439732136", "createdAt": "2020-06-30T07:15:59Z", "commit": {"oid": "4185b766d27925fbd9b5f0e0bfc12d83ec0ddb73"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5a47826f4232b2465d1b1af9e0dff60992a087f9", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5a47826f4232b2465d1b1af9e0dff60992a087f9", "committedDate": "2020-06-30T09:30:48Z", "message": "Updated missing files with bridge 0.17.0\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5ODg3NzI1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-439887725", "createdAt": "2020-06-30T10:35:17Z", "commit": {"oid": "5a47826f4232b2465d1b1af9e0dff60992a087f9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ccbecdbc52ff140a7e53cf31e5cd08055ebed795", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ccbecdbc52ff140a7e53cf31e5cd08055ebed795", "committedDate": "2020-06-30T12:45:54Z", "message": "Fixed regression test about bridge logging\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5OTgzMjU0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3240#pullrequestreview-439983254", "createdAt": "2020-06-30T12:54:44Z", "commit": {"oid": "ccbecdbc52ff140a7e53cf31e5cd08055ebed795"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1230, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}