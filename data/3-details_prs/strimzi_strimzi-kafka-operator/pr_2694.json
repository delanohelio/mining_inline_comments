{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg3MzEwOTg1", "number": 2694, "title": "feat: yq check enforce bash usage", "bodyText": "Some build machines or distributions of linux do not have bash as the\ndefault shell, when the if check is ran on regular shell it always\nfails. We enforce the usage of bash when running this command so\nthat the check does not fail on these environments\nSigned-off-by: Samuel Hawker samuel.hawker@ibm.com\nType of change\nSelect the type of your PR\n\nBugfix\nEnhancement / new feature\nRefactoring\nDocumentation\n\nDescription\nPlease describe your pull request\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-03-12T15:29:43Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694", "merged": true, "mergeCommit": {"oid": "d6341be6f24f4480928aabd66fe0bf41bdb883f0"}, "closed": true, "closedAt": "2020-03-13T10:24:23Z", "author": {"login": "samuel-hawker"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcM9UFNgH2gAyMzg3MzEwOTg1OmVkM2Y2MmQzN2MwZjVlYTc0NDkyOTQyZjA2NmIyNDQ5MDkzYmJiMDg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcNMPuWAFqTM3NDEyNjk5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ed3f62d37c0f5ea74492942f066b2449093bbb08", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ed3f62d37c0f5ea74492942f066b2449093bbb08", "committedDate": "2020-03-12T15:19:19Z", "message": "feat: yq check enforce bash usage\n\nSome build machines or distributions of linux do not have bash as the\ndefault shell, when the if check is ran on regular shell it always\nfails. We enforce the usage of bash when running this command so\nthat the check does not fail on these environments\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczNjc0MDk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#pullrequestreview-373674094", "createdAt": "2020-03-12T15:44:33Z", "commit": {"oid": "ed3f62d37c0f5ea74492942f066b2449093bbb08"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNTo0NDozM1rOF1kMmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxNTo0NDozM1rOF1kMmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTcxMTg5Ng==", "bodyText": "How does it work when your bash in /bin/bash is ages old ... typically on MacOS?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#discussion_r391711896", "createdAt": "2020-03-12T15:44:33Z", "author": {"login": "scholzj"}, "path": "Makefile", "diffHunk": "@@ -161,7 +161,7 @@ RED=\\033[0;31m\n NO_COLOUR=\\033[0m\n YQ_VERSION = $(shell yq --version | $(SED) 's/^.* //g')\n \n-yq_check:\n+yq_check: $(eval SHELL:=/bin/bash)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ed3f62d37c0f5ea74492942f066b2449093bbb08"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d7db123d715203f28f767cf4a1cfae4a720405a", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2d7db123d715203f28f767cf4a1cfae4a720405a", "committedDate": "2020-03-12T19:48:59Z", "message": "feat: Convert yq_check to dependency script\n\nAfter discussions it was agreed a yq check might\nbetter belong in a bash script to ensure the\ncheck is always made in the correct shell (bash)\nHere I have added additional dependency checks that\na builder would need.\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczOTY3NTE4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#pullrequestreview-373967518", "createdAt": "2020-03-12T23:41:59Z", "commit": {"oid": "2d7db123d715203f28f767cf4a1cfae4a720405a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMzo0MjowMFrOF1zZAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQyMzo0MjowMFrOF1zZAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTk2MDgzMg==", "bodyText": "commend => command? Is it typo?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#discussion_r391960832", "createdAt": "2020-03-12T23:42:00Z", "author": {"login": "scholzj"}, "path": "prerequisites-check.sh", "diffHunk": "@@ -0,0 +1,19 @@\n+#!/usr/bin/env bash\n+\n+RED=\"\\033[0;31m\"\n+NO_COLOUR=\"\\033[0m\"\n+\n+function check_commend_present() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d7db123d715203f28f767cf4a1cfae4a720405a"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4296a5e1cfc1e77105680474e68609aa7f78f6b8", "author": {"user": {"login": "samuel-hawker", "name": "Samuel Hawker"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4296a5e1cfc1e77105680474e68609aa7f78f6b8", "committedDate": "2020-03-12T23:59:06Z", "message": "fix: typo commend to command\n\nSigned-off-by: Samuel Hawker <samuel.hawker@ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzczOTc2OTM5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#pullrequestreview-373976939", "createdAt": "2020-03-13T00:15:00Z", "commit": {"oid": "4296a5e1cfc1e77105680474e68609aa7f78f6b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MDk1ODk4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#pullrequestreview-374095898", "createdAt": "2020-03-13T07:35:57Z", "commit": {"oid": "4296a5e1cfc1e77105680474e68609aa7f78f6b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0MTI2OTky", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2694#pullrequestreview-374126992", "createdAt": "2020-03-13T08:43:08Z", "commit": {"oid": "4296a5e1cfc1e77105680474e68609aa7f78f6b8"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2051, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}