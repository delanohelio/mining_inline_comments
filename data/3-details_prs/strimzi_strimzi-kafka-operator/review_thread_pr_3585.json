{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDc3NjY1ODY4", "number": 3585, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDoxMTo0NFrOEfYsWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTozODo1NVrOEf6OsQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMzQ1ODgwOnYy", "diffSide": "RIGHT", "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDoxMTo0NVrOHLoUew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwNzoxODozN1rOHMZTew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1Njk4Nw==", "bodyText": "what's the rationale behind highlighting that it's a dashboard for Kafka Exporter but not saying the same for the bridge, cruise control, and so on? Maybe we should just remove this one?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r481956987", "createdAt": "2020-09-02T10:11:45Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc1OTU0Nw==", "bodyText": "Exporter is in a separate section, so it was for the link really. But, you're right, I don't think we need it here after the restructure.\nRemoved.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r482759547", "createdAt": "2020-09-03T07:18:37Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1Njk4Nw=="}, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMzQ2NTI1OnYy", "diffSide": "RIGHT", "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDoxMzo1NFrOHLoYxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwODoxMzoyM1rOHMbR6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1ODA4Nw==", "bodyText": "It's not the right description. Please take a shorter one from the actual reason for this YAML; it's part of our doc.\n\nThe Grafana dashboards provided show metrics for CPU, memory and disk volume usage, which come directly from the Kubernetes cAdvisor agent and kubelet on the nodes. An additional configuration is needed because the Prometheus operator does not have something like PodMonitor for scraping metrics directly from nodes", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r481958087", "createdAt": "2020-09-02T10:13:54Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <3>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <4>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <5>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <7>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <8>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <9>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <12>\n+\u251c\u2500\u2500 kafka-metrics.yaml <13>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <14>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards\n+<2> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n+<3> Installation file for the Grafana image\n+<4> Configuration to add roles for service monitoring", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 77}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjc5MTkxNA==", "bodyText": "Added:\nAdditional configuration to scrape metrics for CPU, memory and disk volume usage, which comes directly from the Kubernetes cAdvisor agent and kubelet on the nodes.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r482791914", "createdAt": "2020-09-03T08:13:23Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <3>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <4>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <5>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <7>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <8>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <9>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <12>\n+\u251c\u2500\u2500 kafka-metrics.yaml <13>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <14>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards\n+<2> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n+<3> Installation file for the Grafana image\n+<4> Configuration to add roles for service monitoring", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1ODA4Nw=="}, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 77}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxMzQ3MTc4OnYy", "diffSide": "RIGHT", "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wMlQxMDoxNTo0N1rOHLoc1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwODo0MDo1N1rOHMcTcQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1OTEyNQ==", "bodyText": "Actually they are PodMonitor definitions for the Prometheus operator that translates them to Prometheus job for its configuration. I would change somehow to say this and not letting people to expect to see \"job\" definitions in this file.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r481959125", "createdAt": "2020-09-02T10:15:47Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <3>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <4>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <5>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <7>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <8>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <9>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <12>\n+\u251c\u2500\u2500 kafka-metrics.yaml <13>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <14>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards\n+<2> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n+<3> Installation file for the Grafana image\n+<4> Configuration to add roles for service monitoring\n+<5> Hook definitions for sending notifications through Alertmanager\n+<6> Resources for deploying and configuring Alertmanager\n+<7> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n+<8> Installation file for the Prometheus image\n+<9> Prometheus job definitions to scrape metrics data from pods", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MjgwODY4OQ==", "bodyText": "Changed to:\n\nPodMonitor definitions that translate to jobs for the Prometheus operator to be able to scrape metrics data directly from pods.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r482808689", "createdAt": "2020-09-03T08:40:57Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,114 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json <2>\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <3>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <4>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <5>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <7>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <8>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <9>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <12>\n+\u251c\u2500\u2500 kafka-metrics.yaml <13>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <14>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards\n+<2> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n+<3> Installation file for the Grafana image\n+<4> Configuration to add roles for service monitoring\n+<5> Hook definitions for sending notifications through Alertmanager\n+<6> Resources for deploying and configuring Alertmanager\n+<7> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n+<8> Installation file for the Prometheus image\n+<9> Prometheus job definitions to scrape metrics data from pods", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MTk1OTEyNQ=="}, "originalCommit": {"oid": "4cef0659ad41895f82d2f71167a0331510cabdfa"}, "originalPosition": 82}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzAxODk1MzQ1OnYy", "diffSide": "RIGHT", "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QwOTozODo1NVrOHMenTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0wM1QxNToxNzozNFrOHMri2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg0NjU0MA==", "bodyText": "Maybe I wasn't clear. PodMonitor is a Prometheus operator concept. When it's applied, then the Prometheus operator translates it in a \"job configuration\" that is Prometheus (server) concept.\nSo maybe something like:\nPodMonitor definitions translated by the Prometheus operator into jobs for the Prometheus server to be able to scrape metrics data directly from pods.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r482846540", "createdAt": "2020-09-03T09:38:55Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,113 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <2>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <3>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <4>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <5>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <7>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <8>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <9>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-metrics.yaml <12>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <13>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards.\n+<2> Installation file for the Grafana image.\n+<3> Additional configuration to scrape metrics for CPU, memory and disk volume usage, which comes directly from the Kubernetes cAdvisor agent and kubelet on the nodes.\n+<4> Hook definitions for sending notifications through Alertmanager.\n+<5> Resources for deploying and configuring Alertmanager.\n+<6> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus).\n+<7> Installation resource file for the Prometheus image.\n+<8> PodMonitor definitions that translate to jobs for the Prometheus operator to be able to scrape metrics data directly from pods.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "945fca8dfb7a99d40444f8766a8c9dcaab3ecd04"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4MzA1ODM5Mg==", "bodyText": "Thanks Paolo. I've updated as you suggest", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3585#discussion_r483058392", "createdAt": "2020-09-03T15:17:34Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/ref_metrics-config-files.adoc", "diffHunk": "@@ -5,50 +5,113 @@\n \n [id='ref-metrics-config-files-{context}']\n \n-= Example Metrics files\n+= Example metrics files\n \n-You can find the example metrics configuration files in the `examples/metrics` directory.\n+You can find example Grafana dashboards and other metrics configuration files in the `examples/metrics` directory.\n \n+.Example metrics files provided with Strimzi\n [source]\n --\n metrics\n-\u251c\u2500\u2500 grafana-install\n-\u2502   \u251c\u2500\u2500 grafana.yaml <1>\n-\u251c\u2500\u2500 grafana-dashboards <2>\n+\u251c\u2500\u2500 grafana-dashboards <1>\n+\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-connect.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n-\u2502   \u251c\u2500\u2500 strimzi-zookeeper.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka-exporter.json\n \u2502   \u251c\u2500\u2500 strimzi-kafka-mirror-maker-2.json\n+\u2502   \u251c\u2500\u2500 strimzi-kafka.json\n \u2502   \u251c\u2500\u2500 strimzi-operators.json\n-\u2502   \u251c\u2500\u2500 strimzi-kafka-bridge.json\n-\u2502   \u251c\u2500\u2500 strimzi-cruise-control.json\n-\u2502   \u2514\u2500\u2500 strimzi-kafka-exporter.json <3>\n-\u251c\u2500\u2500 kafka-connect-metrics.yaml <4>\n-\u251c\u2500\u2500 kafka-metrics.yaml <5>\n-\u251c\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <6>\n-\u251c\u2500\u2500 kafka-bridge-metrics.yaml <7>\n-\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <8>\n+\u2502   \u2514\u2500\u2500 strimzi-zookeeper.json\n+\u251c\u2500\u2500 grafana-install\n+\u2502   \u2514\u2500\u2500 grafana.yaml <2>\n \u251c\u2500\u2500 prometheus-additional-properties\n-\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <9>\n+\u2502   \u2514\u2500\u2500 prometheus-additional.yaml <3>\n \u251c\u2500\u2500 prometheus-alertmanager-config\n-\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <10>\n-\u2514\u2500\u2500 prometheus-install\n-    \u251c\u2500\u2500 alert-manager.yaml <11>\n-    \u251c\u2500\u2500 prometheus-rules.yaml <12>\n-    \u251c\u2500\u2500 prometheus.yaml <13>\n-    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <14>\n+\u2502   \u2514\u2500\u2500 alert-manager-config.yaml <4>\n+\u251c\u2500\u2500 prometheus-install\n+\u2502    \u251c\u2500\u2500 alert-manager.yaml <5>\n+\u2502    \u251c\u2500\u2500 prometheus-rules.yaml <6>\n+\u2502    \u251c\u2500\u2500 prometheus.yaml <7>\n+\u2502    \u251c\u2500\u2500 strimzi-pod-monitor.yaml <8>\n+\u251c\u2500\u2500 kafka-bridge-metrics.yaml <9>\n+\u251c\u2500\u2500 kafka-connect-metrics.yaml <10>\n+\u251c\u2500\u2500 kafka-cruise-control-metrics.yaml <11>\n+\u251c\u2500\u2500 kafka-metrics.yaml <12>\n+\u2514\u2500\u2500 kafka-mirror-maker-2-metrics.yaml <13>\n --\n-<1> Installation file for the Grafana image\n-<2> Grafana dashboards\n-<3> Grafana dashboard specific to xref:assembly-kafka-exporter-{context}[Kafka Exporter]\n-<4> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Connect\n-<5> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka and ZooKeeper\n-<6> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Kafka Mirror Maker 2.0\n-<7> Kafka Bridge resource with metrics enabled\n-<8> Metrics configuration that defines Prometheus JMX Exporter relabeling rules for Cruise Control\n-<9> Configuration to add roles for service monitoring\n-<10> Hook definitions for sending notifications through Alertmanager\n-<11> Resources for deploying and configuring Alertmanager\n-<12> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus)\n-<13> Installation file for the Prometheus image\n-<14> Prometheus job definitions to scrape metrics data from pods\n+<1> Grafana dashboards.\n+<2> Installation file for the Grafana image.\n+<3> Additional configuration to scrape metrics for CPU, memory and disk volume usage, which comes directly from the Kubernetes cAdvisor agent and kubelet on the nodes.\n+<4> Hook definitions for sending notifications through Alertmanager.\n+<5> Resources for deploying and configuring Alertmanager.\n+<6> Alerting rules examples for use with Prometheus Alertmanager (deployed with Prometheus).\n+<7> Installation resource file for the Prometheus image.\n+<8> PodMonitor definitions that translate to jobs for the Prometheus operator to be able to scrape metrics data directly from pods.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Mjg0NjU0MA=="}, "originalCommit": {"oid": "945fca8dfb7a99d40444f8766a8c9dcaab3ecd04"}, "originalPosition": 81}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1063, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}