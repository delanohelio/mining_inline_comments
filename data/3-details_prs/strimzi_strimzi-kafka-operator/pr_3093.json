{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzMDgwNTc4", "number": 3093, "title": "[MO] - [system test] -> removing extra log", "bodyText": "Signed-off-by: morsak xorsak02@stud.fit.vutbr.cz\nType of change\n\nRefactor\n\nDescription\nThis PR setting logging to the debug level from our the Producer. Moreover, now we are closing also Producer instance from the vertx, which caused some issues.", "createdAt": "2020-05-26T09:09:26Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093", "merged": true, "mergeCommit": {"oid": "40af1a162fcb5a8a03be8c2fad4d6399bf85b0e5"}, "closed": true, "closedAt": "2020-05-27T14:51:59Z", "author": {"login": "see-quick"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclBpt0gFqTQxODE0NTY1Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABclY6xoAFqTQxOTE4MjQzNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MTQ1NjU2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093#pullrequestreview-418145656", "createdAt": "2020-05-26T09:56:15Z", "commit": {"oid": "686c79c34a31975692347c4df687585f608847ca"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTo1NjoxNVrOGaXHxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwOTo1NjozMlrOGaXIUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5NDk4Mw==", "bodyText": "Could you please add here client name/id ?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093#discussion_r430294983", "createdAt": "2020-05-26T09:56:15Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/kafkaclients/externalClients/Consumer.java", "diffHunk": "@@ -65,8 +65,11 @@ protected void handleClient() {\n \n     @Override\n     public void close() {\n-        LOGGER.info(\"Closing Vert.x instance for the client {}\", this.getClass().getName());\n         if (vertx != null) {\n+            LOGGER.info(\"Closing Consumer instance {}\", consumer.getClass().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686c79c34a31975692347c4df687585f608847ca"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5NTA1OA==", "bodyText": "Same as above", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093#discussion_r430295058", "createdAt": "2020-05-26T09:56:25Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/kafkaclients/externalClients/Producer.java", "diffHunk": "@@ -50,30 +53,34 @@ protected void handleClient() {\n \n         LOGGER.info(\"Producer is starting with following properties: {}\", properties.getProperties().toString());\n \n-        KafkaProducer<String, String> producer = KafkaProducer.create(vertx, properties.getProperties());\n-\n         if (msgCntPredicate.test(-1)) {\n             vertx.eventBus().consumer(clientName, msg -> {\n                 if (msg.body().equals(\"stop\")) {\n                     LOGGER.debug(\"Received stop command! Produced messages: {}\", numSent.get());\n                     resultPromise.complete(numSent.get());\n                 }\n             });\n-            vertx.setPeriodic(1000, id -> sendNext(producer, topic));\n+            vertx.setPeriodic(1000, id -> sendNext(topic));\n         } else {\n-            sendNext(producer, topic);\n+            sendNext(topic);\n         }\n     }\n \n     @Override\n     public void close() {\n-        LOGGER.info(\"Closing Vert.x instance for the client {}\", this.getClass().getName());\n         if (vertx != null) {\n+\n+            LOGGER.info(\"Closing Producer instance {}\", producer.getClass().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686c79c34a31975692347c4df687585f608847ca"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDI5NTEyMg==", "bodyText": "Same as above", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093#discussion_r430295122", "createdAt": "2020-05-26T09:56:32Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/kafkaclients/externalClients/Producer.java", "diffHunk": "@@ -50,30 +53,34 @@ protected void handleClient() {\n \n         LOGGER.info(\"Producer is starting with following properties: {}\", properties.getProperties().toString());\n \n-        KafkaProducer<String, String> producer = KafkaProducer.create(vertx, properties.getProperties());\n-\n         if (msgCntPredicate.test(-1)) {\n             vertx.eventBus().consumer(clientName, msg -> {\n                 if (msg.body().equals(\"stop\")) {\n                     LOGGER.debug(\"Received stop command! Produced messages: {}\", numSent.get());\n                     resultPromise.complete(numSent.get());\n                 }\n             });\n-            vertx.setPeriodic(1000, id -> sendNext(producer, topic));\n+            vertx.setPeriodic(1000, id -> sendNext(topic));\n         } else {\n-            sendNext(producer, topic);\n+            sendNext(topic);\n         }\n     }\n \n     @Override\n     public void close() {\n-        LOGGER.info(\"Closing Vert.x instance for the client {}\", this.getClass().getName());\n         if (vertx != null) {\n+\n+            LOGGER.info(\"Closing Producer instance {}\", producer.getClass().getName());\n+            if (producer != null) {\n+                producer.close();\n+            }\n+\n+            LOGGER.info(\"Closing Vert.x instance for the client {}\", this.getClass().getName());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "686c79c34a31975692347c4df687585f608847ca"}, "originalPosition": 55}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39d4b1e61ee03bf0fc6f2324201078d0c2103925", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/39d4b1e61ee03bf0fc6f2324201078d0c2103925", "committedDate": "2020-05-27T07:37:55Z", "message": "[MO] - [bug] -> extra log from client\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "93fb3e94a064cbda95cd5518c1cc51dd822870c3", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/93fb3e94a064cbda95cd5518c1cc51dd822870c3", "committedDate": "2020-05-27T07:37:55Z", "message": "[MO] -[closing] -> producer, consumer instance\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aaa70f19b0cee2b23a9a1d213e141aec5fecdde6", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/aaa70f19b0cee2b23a9a1d213e141aec5fecdde6", "committedDate": "2020-05-27T07:37:55Z", "message": "ds\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9a2d9bf68fd211eb13bca0022210d32462a2f017", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a2d9bf68fd211eb13bca0022210d32462a2f017", "committedDate": "2020-05-27T07:37:55Z", "message": "update\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff8a7003018e41a56e20fb0144ebe5678e6f36b5", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ff8a7003018e41a56e20fb0144ebe5678e6f36b5", "committedDate": "2020-05-26T10:05:40Z", "message": "update\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}, "afterCommit": {"oid": "9a2d9bf68fd211eb13bca0022210d32462a2f017", "author": {"user": {"login": "see-quick", "name": "Ors\u00e1k Maro\u0161"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9a2d9bf68fd211eb13bca0022210d32462a2f017", "committedDate": "2020-05-27T07:37:55Z", "message": "update\n\nSigned-off-by: morsak <xorsak02@stud.fit.vutbr.cz>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MTgyNDM2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3093#pullrequestreview-419182436", "createdAt": "2020-05-27T13:03:12Z", "commit": {"oid": "9a2d9bf68fd211eb13bca0022210d32462a2f017"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1799, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}