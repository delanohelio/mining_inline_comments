{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1MDg4Mzg4", "number": 3722, "title": "Move test for introspection endpoint to make it valuable", "bodyText": "Signed-off-by: Jakub Stejskal xstejs24@gmail.com\nType of change\n\nBugfix\n\nDescription\nTest for introspection endpoint was useles, because it didn't the clients didn't use the tls listener where it was configured. This PR fix this issue and it also covers #3704.\nChecklist\n\n Write tests\n Make sure all tests pass", "createdAt": "2020-09-29T20:32:05Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722", "merged": true, "mergeCommit": {"oid": "b6b0d5621b50c4bc6f242ad5cb3d3a33432c10fa"}, "closed": true, "closedAt": "2020-10-07T07:06:30Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNuNRlgH2gAyNDk1MDg4Mzg4OmQzZjg1ZTJlYTU4YTExOGNlZjRmOWRlYWQ0MzU3ZjA2NWIxMjIyNTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdOM4EugFqTUwMDEwNTc3Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d3f85e2ea58a118cef4f9dead4357f065b122253", "committedDate": "2020-09-29T20:28:23Z", "message": "Move test for introspection endpoint to make it valuable\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MzIxMjkw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#pullrequestreview-499321290", "createdAt": "2020-09-30T11:11:59Z", "commit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMToxMTo1OVrOHaYk4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQxMToxMTo1OVrOHaYk4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzQyNzY4Mg==", "bodyText": "I think I getting your point here. You are using the kafkaReplicas parameter that is dependent on the zookeeperReplicas. Wouldn't be better using some Math.min(kafkaReplicas / 3, 3) meaning if we specify 3 Kafka replicas we will deploy 1 zookeeper instead of 3, which are not needed? WDYT?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#discussion_r497427682", "createdAt": "2020-09-30T11:11:59Z", "author": {"login": "see-quick"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaResource.java", "diffHunk": "@@ -55,7 +55,7 @@ public static DoneableKafka kafkaEphemeral(String name, int kafkaReplicas, int z\n     }\n \n     public static DoneableKafka kafkaPersistent(String name, int kafkaReplicas) {\n-        return kafkaPersistent(name, kafkaReplicas, 3);\n+        return kafkaPersistent(name, kafkaReplicas, Math.min(kafkaReplicas, 3));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "originalPosition": 14}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5MzUwMTkw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#pullrequestreview-499350190", "createdAt": "2020-09-30T11:55:17Z", "commit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk5ODQ4Mjc4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#pullrequestreview-499848278", "createdAt": "2020-09-30T22:11:32Z", "commit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMjoxMTozMlrOHaxIOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0zMFQyMjoxMTozMlrOHaxIOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NzgyOTk0Ng==", "bodyText": "Why are we using the min(...) here and on line 58? I think it deserves some explanation.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#discussion_r497829946", "createdAt": "2020-09-30T22:11:32Z", "author": {"login": "scholzj"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaResource.java", "diffHunk": "@@ -46,7 +46,7 @@\n     }\n \n     public static DoneableKafka kafkaEphemeral(String name, int kafkaReplicas) {\n-        return kafkaEphemeral(name, kafkaReplicas, 3);\n+        return kafkaEphemeral(name, kafkaReplicas, Math.min(kafkaReplicas, 3));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAwMTA1Nzc3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3722#pullrequestreview-500105777", "createdAt": "2020-10-01T08:12:17Z", "commit": {"oid": "d3f85e2ea58a118cef4f9dead4357f065b122253"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1008, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}