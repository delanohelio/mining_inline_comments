{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0Mjc4NjY4", "number": 2418, "title": "Fix connector operator when connect runs in a different namespace", "bodyText": "Type of change\n\nBugfix\n\nDescription\nThe connector operator is using only the service name to connect to the Kafka Connect REST API. However that is not enough when the operator does not run in the same namespace as the operator. In that case it needs to use the qualified name <connect-service>.<connect-namespace>.svc. This PR fixes this and should close the issue #2417.\nChecklist\n\n Make sure all tests pass\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-01-17T19:04:56Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418", "merged": true, "mergeCommit": {"oid": "6383062bb76087e00dbdf31cf5d3e2e8c4143182"}, "closed": true, "closedAt": "2020-01-20T13:09:58Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7UFKWAFqTM0NDc5OTYxNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABb8Krh_gBqjI5NjI1NjEyMzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ0Nzk5NjE3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#pullrequestreview-344799617", "createdAt": "2020-01-17T19:39:13Z", "commit": {"oid": "4047d92c25ad074373a95822b54083cb983d452a"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxOTozOToxM1rOFfDSSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xN1QxOTozOToyOVrOFfDSpA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEwNDAxMA==", "bodyText": "Typo deployment", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368104010", "createdAt": "2020-01-17T19:39:13Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect dpeloyment", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4047d92c25ad074373a95822b54083cb983d452a"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODEwNDEwMA==", "bodyText": "Typo qualified", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368104100", "createdAt": "2020-01-17T19:39:29Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect dpeloyment\n+     * @return              quaified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4047d92c25ad074373a95822b54083cb983d452a"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ1MTgxMTEy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#pullrequestreview-345181112", "createdAt": "2020-01-20T09:40:29Z", "commit": {"oid": "4c5a089bc30448aa455cc7784bf64c97c35308eb"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo0MDoyOVrOFfYV9A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMFQwOTo0MDoyOVrOFfYV9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2ODQ0OTAxMg==", "bodyText": "We should at least add something to the javadoc of serviceName() to say that's it's the namespace-local name.\nAnd we should consider deprecating it and adding a new localServiceName() method instead to make the distinction more obvious.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2418#discussion_r368449012", "createdAt": "2020-01-20T09:40:29Z", "author": {"login": "tombentley"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/KafkaConnectResources.java", "diffHunk": "@@ -47,6 +47,17 @@ public static String metricsAndLogConfigMapName(String clusterName) {\n         return clusterName + \"-connect-config\";\n     }\n \n+    /**\n+     * Returns qualified name of the service which works across different namespaces.\n+     *\n+     * @param clusterName   Name of the Connect CR\n+     * @param namespace     Namespace of the Connect deployment\n+     * @return              qualified namespace in the format \"&lt;service-name&gt;.&lt;namespace&gt;.svc\"\n+     */\n+    public static String qualifiedServiceName(String clusterName, String namespace) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4c5a089bc30448aa455cc7784bf64c97c35308eb"}, "originalPosition": 11}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e42598d93b3d1b7724bca6b48fb461e4bfd0913b", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e42598d93b3d1b7724bca6b48fb461e4bfd0913b", "committedDate": "2020-01-20T10:53:39Z", "message": "Fix connector operator when connect runs in a different namespace - Closes #2417\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "committedDate": "2020-01-20T10:53:39Z", "message": "Fix typos in javadocs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c5a089bc30448aa455cc7784bf64c97c35308eb", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4c5a089bc30448aa455cc7784bf64c97c35308eb", "committedDate": "2020-01-17T23:47:40Z", "message": "Fix typos in javadocs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}, "afterCommit": {"oid": "e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e302b072a4977fc0973d6f6abbc67a0a5434e9f3", "committedDate": "2020-01-20T10:53:39Z", "message": "Fix typos in javadocs\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "committedDate": "2020-01-20T11:16:49Z", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b5a6d6daaec1ef89e206ac3582e5792d75ade90e", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b5a6d6daaec1ef89e206ac3582e5792d75ade90e", "committedDate": "2020-01-20T10:56:41Z", "message": "Review comments"}, "afterCommit": {"oid": "5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5d7a1dd6b1c7f615aa5f9d92da5bf6712f45b73a", "committedDate": "2020-01-20T11:16:49Z", "message": "Review comments\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1814, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}