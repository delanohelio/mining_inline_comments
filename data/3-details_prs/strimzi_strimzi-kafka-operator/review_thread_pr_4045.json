{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMxOTM0NjMw", "number": 4045, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMDo1MDowMFrOFAeGVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDowMzo0MVrOFCO9Gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MDM3NDYwOnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMDo1MDowMFrOH-yKLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMToyMFrOIAhRmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NTU2NQ==", "bodyText": "ClusterOpratorRBAC is better name from my POV", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r535595565", "createdAt": "2020-12-03T20:50:00Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.operators;\n+\n+import io.strimzi.api.kafka.model.status.Condition;\n+import io.strimzi.systemtest.AbstractST;\n+import io.strimzi.systemtest.resources.KubernetesResource;\n+import io.strimzi.systemtest.resources.ResourceManager;\n+import io.strimzi.systemtest.resources.crd.KafkaConnectResource;\n+import io.strimzi.systemtest.resources.crd.KafkaResource;\n+import io.strimzi.systemtest.resources.operator.BundleResource;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaConnectUtils;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Tag;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.strimzi.systemtest.Constants.CONNECT;\n+import static io.strimzi.systemtest.Constants.REGRESSION;\n+import static io.strimzi.systemtest.enums.CustomResourceStatus.NotReady;\n+import static io.strimzi.systemtest.resources.ResourceManager.cmdKubeClient;\n+import static io.strimzi.systemtest.resources.ResourceManager.kubeClient;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+@Tag(REGRESSION)\n+public class ClusterOperatorST extends AbstractST {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTY4OTU2NA==", "bodyText": "I thought that this will be suite also for another tests related just to CO ... but yes, this can be also the good one.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r535689564", "createdAt": "2020-12-03T22:27:41Z", "author": {"login": "im-konge"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.operators;\n+\n+import io.strimzi.api.kafka.model.status.Condition;\n+import io.strimzi.systemtest.AbstractST;\n+import io.strimzi.systemtest.resources.KubernetesResource;\n+import io.strimzi.systemtest.resources.ResourceManager;\n+import io.strimzi.systemtest.resources.crd.KafkaConnectResource;\n+import io.strimzi.systemtest.resources.crd.KafkaResource;\n+import io.strimzi.systemtest.resources.operator.BundleResource;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaConnectUtils;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Tag;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.strimzi.systemtest.Constants.CONNECT;\n+import static io.strimzi.systemtest.Constants.REGRESSION;\n+import static io.strimzi.systemtest.enums.CustomResourceStatus.NotReady;\n+import static io.strimzi.systemtest.resources.ResourceManager.cmdKubeClient;\n+import static io.strimzi.systemtest.resources.ResourceManager.kubeClient;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+@Tag(REGRESSION)\n+public class ClusterOperatorST extends AbstractST {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NTU2NQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAxOTk0Mg==", "bodyText": "well other class in operators are for CO as well. Maybe even a different name would be better", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r536019942", "createdAt": "2020-12-04T11:06:32Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.operators;\n+\n+import io.strimzi.api.kafka.model.status.Condition;\n+import io.strimzi.systemtest.AbstractST;\n+import io.strimzi.systemtest.resources.KubernetesResource;\n+import io.strimzi.systemtest.resources.ResourceManager;\n+import io.strimzi.systemtest.resources.crd.KafkaConnectResource;\n+import io.strimzi.systemtest.resources.crd.KafkaResource;\n+import io.strimzi.systemtest.resources.operator.BundleResource;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaConnectUtils;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Tag;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.strimzi.systemtest.Constants.CONNECT;\n+import static io.strimzi.systemtest.Constants.REGRESSION;\n+import static io.strimzi.systemtest.enums.CustomResourceStatus.NotReady;\n+import static io.strimzi.systemtest.resources.ResourceManager.cmdKubeClient;\n+import static io.strimzi.systemtest.resources.ResourceManager.kubeClient;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+@Tag(REGRESSION)\n+public class ClusterOperatorST extends AbstractST {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NTU2NQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjcwODQyOA==", "bodyText": "Yeah I'll think about different name, good catch", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r536708428", "createdAt": "2020-12-05T11:53:18Z", "author": {"login": "im-konge"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.operators;\n+\n+import io.strimzi.api.kafka.model.status.Condition;\n+import io.strimzi.systemtest.AbstractST;\n+import io.strimzi.systemtest.resources.KubernetesResource;\n+import io.strimzi.systemtest.resources.ResourceManager;\n+import io.strimzi.systemtest.resources.crd.KafkaConnectResource;\n+import io.strimzi.systemtest.resources.crd.KafkaResource;\n+import io.strimzi.systemtest.resources.operator.BundleResource;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaConnectUtils;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Tag;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.strimzi.systemtest.Constants.CONNECT;\n+import static io.strimzi.systemtest.Constants.REGRESSION;\n+import static io.strimzi.systemtest.enums.CustomResourceStatus.NotReady;\n+import static io.strimzi.systemtest.resources.ResourceManager.cmdKubeClient;\n+import static io.strimzi.systemtest.resources.ResourceManager.kubeClient;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+@Tag(REGRESSION)\n+public class ClusterOperatorST extends AbstractST {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NTU2NQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNjA5MQ==", "bodyText": "Agreed with Jakub here, ClusterOpratorRbac is better here", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r537416091", "createdAt": "2020-12-07T11:01:20Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/operators/ClusterOperatorST.java", "diffHunk": "@@ -0,0 +1,111 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.operators;\n+\n+import io.strimzi.api.kafka.model.status.Condition;\n+import io.strimzi.systemtest.AbstractST;\n+import io.strimzi.systemtest.resources.KubernetesResource;\n+import io.strimzi.systemtest.resources.ResourceManager;\n+import io.strimzi.systemtest.resources.crd.KafkaConnectResource;\n+import io.strimzi.systemtest.resources.crd.KafkaResource;\n+import io.strimzi.systemtest.resources.operator.BundleResource;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaConnectUtils;\n+import io.strimzi.systemtest.utils.kafkaUtils.KafkaUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+import org.junit.jupiter.api.BeforeAll;\n+import org.junit.jupiter.api.Tag;\n+import org.junit.jupiter.api.Test;\n+\n+import static io.strimzi.systemtest.Constants.CONNECT;\n+import static io.strimzi.systemtest.Constants.REGRESSION;\n+import static io.strimzi.systemtest.enums.CustomResourceStatus.NotReady;\n+import static io.strimzi.systemtest.resources.ResourceManager.cmdKubeClient;\n+import static io.strimzi.systemtest.resources.ResourceManager.kubeClient;\n+import static org.hamcrest.MatcherAssert.assertThat;\n+import static org.hamcrest.Matchers.is;\n+import static org.junit.jupiter.api.Assertions.assertTrue;\n+\n+@Tag(REGRESSION)\n+public class ClusterOperatorST extends AbstractST {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NTU2NQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 33}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM2MDM4NDc0OnYy", "diffSide": "RIGHT", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wM1QyMDo1MToyNFrOH-yQIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wNFQxOToxNDowOVrOH_edYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NzA4OQ==", "bodyText": "Shouldn't be allowNP based on env variable for NetowkrPolicies?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r535597089", "createdAt": "2020-12-03T20:51:24Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTYwMDUzNg==", "bodyText": "By default is on true, so you'll have to deploy KafkaClients pod even if you don't want to send/receive messages or do some requests on Connect's API. From my POV it's better to determine, if we want to deploy KafkaConnect with NP or without, to not create extra Clients pod.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r535600536", "createdAt": "2020-12-03T20:54:29Z", "author": {"login": "im-konge"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NzA4OQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjAyMDM5NQ==", "bodyText": "make sense. We should try to improve this thing with NP and clients pod, but not in this PR.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r536020395", "createdAt": "2020-12-04T11:07:18Z", "author": {"login": "Frawless"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NzA4OQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNjMyMTM3Nw==", "bodyText": "Yep, that's what I planned, thanks", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r536321377", "createdAt": "2020-12-04T19:14:09Z", "author": {"login": "im-konge"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNTU5NzA4OQ=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3MzQ4MTQ5OnYy", "diffSide": "RIGHT", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMDowMFrOIAhOSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wN1QxMTowMDoxOVrOIAhPGQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNTI0Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {\n          \n          \n            \n                    if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES && allowNP) {\n          \n          \n            \n                        KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnect, KafkaConnectResources.deploymentName(kafkaConnect.getMetadata().getName()));\n          \n          \n            \n                    }\n          \n          \n            \n                    return new DoneableKafkaConnect(kafkaConnect, kC -> {\n          \n          \n            \n                private static DoneableKafkaConnect deployKafkaConnectWithNetworkPolicy(KafkaConnect kafkaConnect) {\n          \n          \n            \n                    if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES && allowNP) {\n          \n          \n            \n                        KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnect, KafkaConnectResources.deploymentName(kafkaConnect.getMetadata().getName()));\n          \n          \n            \n                    }\n          \n          \n            \n                    return deployKafkaConnect(kafkaConnect)\n          \n          \n            \n                  }\n          \n          \n            \n            \n          \n          \n            \n                private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n          \n          \n            \n                    return new DoneableKafkaConnect(kafkaConnect, kC -> {\n          \n      \n    \n    \n  \n\nThis is cleaner in my opinion, boolean arguments are the devil", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r537415242", "createdAt": "2020-12-07T11:00:00Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES && allowNP) {\n             KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnect, KafkaConnectResources.deploymentName(kafkaConnect.getMetadata().getName()));\n         }\n         return new DoneableKafkaConnect(kafkaConnect, kC -> {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 39}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNTQ0OQ==", "bodyText": "A different method signature is preferable to passing true/false", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r537415449", "createdAt": "2020-12-07T11:00:19Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -87,8 +91,8 @@ private static KafkaConnectBuilder defaultKafkaConnect(KafkaConnect kafkaConnect\n             .endSpec();\n     }\n \n-    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect) {\n-        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES) {\n+    private static DoneableKafkaConnect deployKafkaConnect(KafkaConnect kafkaConnect, boolean allowNP) {\n+        if (Environment.DEFAULT_TO_DENY_NETWORK_POLICIES && allowNP) {\n             KubernetesResource.allowNetworkPolicySettingsForResource(kafkaConnect, KafkaConnectResources.deploymentName(kafkaConnect.getMetadata().getName()));\n         }\n         return new DoneableKafkaConnect(kafkaConnect, kC -> {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzNzQxNTI0Mg=="}, "originalCommit": {"oid": "66765ee328ffc111d5d1e6e9ad14b6be99cc123a"}, "originalPosition": 39}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM3ODg2NDkxOnYy", "diffSide": "RIGHT", "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDowMzo0MVrOIBRNMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMjo0OToyMlrOIB50Pw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMTM5Mw==", "bodyText": "You can remove the booleans similarly from here and line 45", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r538201393", "createdAt": "2020-12-08T10:03:41Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -39,12 +39,17 @@\n     }\n \n     public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas) {\n-        return kafkaConnect(name, name, kafkaConnectReplicas);\n+        return kafkaConnect(name, name, kafkaConnectReplicas, true);\n     }\n \n-    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas) {\n+    public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas, boolean allowNP) {\n+        return kafkaConnect(name, name, kafkaConnectReplicas, allowNP);\n+    }\n+\n+    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas, boolean allowNP) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f6dd55281800d1fe94e48880b0b4c80925a888d2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIxMzAyNQ==", "bodyText": "Hmmm ... I was thinking that I'll leave it like this, so we just specify in the KafkaConnect \"creation\" if we want it with NP or not..\nBut yes, I can create the kafkaConnectWithoutNetworkPolicies method and kafkaConnectWithNetworkPolicies.\nThese two (which you mentioned - line 45 and 49) are global and if I will change the naming, I will have to change it everywhere.\nWDYT @samuel-hawker and @Frawless ? Will we leave it like this or should I rename them all?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r538213025", "createdAt": "2020-12-08T10:20:14Z", "author": {"login": "im-konge"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -39,12 +39,17 @@\n     }\n \n     public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas) {\n-        return kafkaConnect(name, name, kafkaConnectReplicas);\n+        return kafkaConnect(name, name, kafkaConnectReplicas, true);\n     }\n \n-    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas) {\n+    public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas, boolean allowNP) {\n+        return kafkaConnect(name, name, kafkaConnectReplicas, allowNP);\n+    }\n+\n+    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMTM5Mw=="}, "originalCommit": {"oid": "f6dd55281800d1fe94e48880b0b4c80925a888d2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNzE5Nw==", "bodyText": "I don't think it's that problematic here, since this is the highest level of abstraction I think we are going when deploying a KafkaConnect.\nI am happy for you to leave as is, but there is nothing worse than passing a boolean through a chain of 5 functions was my origin point! (Which this isn't doing)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r538237197", "createdAt": "2020-12-08T10:51:00Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -39,12 +39,17 @@\n     }\n \n     public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas) {\n-        return kafkaConnect(name, name, kafkaConnectReplicas);\n+        return kafkaConnect(name, name, kafkaConnectReplicas, true);\n     }\n \n-    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas) {\n+    public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas, boolean allowNP) {\n+        return kafkaConnect(name, name, kafkaConnectReplicas, allowNP);\n+    }\n+\n+    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMTM5Mw=="}, "originalCommit": {"oid": "f6dd55281800d1fe94e48880b0b4c80925a888d2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODgwODM5NA==", "bodyText": "Maybe it's really ridiculous, but I have some changes (small refactor) of these Network policies methods for all other resources. How about to do everything in that one? Sorry ... I'll request you for the review there", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r538808394", "createdAt": "2020-12-08T21:07:59Z", "author": {"login": "im-konge"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -39,12 +39,17 @@\n     }\n \n     public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas) {\n-        return kafkaConnect(name, name, kafkaConnectReplicas);\n+        return kafkaConnect(name, name, kafkaConnectReplicas, true);\n     }\n \n-    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas) {\n+    public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas, boolean allowNP) {\n+        return kafkaConnect(name, name, kafkaConnectReplicas, allowNP);\n+    }\n+\n+    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMTM5Mw=="}, "originalCommit": {"oid": "f6dd55281800d1fe94e48880b0b4c80925a888d2"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODg2Njc1MQ==", "bodyText": "No problem!", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/4045#discussion_r538866751", "createdAt": "2020-12-08T22:49:22Z", "author": {"login": "samuel-hawker"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectResource.java", "diffHunk": "@@ -39,12 +39,17 @@\n     }\n \n     public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas) {\n-        return kafkaConnect(name, name, kafkaConnectReplicas);\n+        return kafkaConnect(name, name, kafkaConnectReplicas, true);\n     }\n \n-    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas) {\n+    public static DoneableKafkaConnect kafkaConnect(String name, int kafkaConnectReplicas, boolean allowNP) {\n+        return kafkaConnect(name, name, kafkaConnectReplicas, allowNP);\n+    }\n+\n+    public static DoneableKafkaConnect kafkaConnect(String name, String clusterName, int kafkaConnectReplicas, boolean allowNP) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIwMTM5Mw=="}, "originalCommit": {"oid": "f6dd55281800d1fe94e48880b0b4c80925a888d2"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 806, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}