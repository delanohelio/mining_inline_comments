{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA1ODg0Mjg5", "number": 3839, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjoxN1rOEvRDDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMzo0M1rOEvRE0A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk3ODM4OnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjoxN1rOHkJpMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjoxN1rOHkJpMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2ODc4Nw==", "bodyText": "Maybe put name into var?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507668787", "createdAt": "2020-10-19T11:22:17Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "diffHunk": "@@ -739,6 +746,158 @@ void testHostAliases() {\n         assertThat(output, containsString(etcHostsData));\n     }\n \n+    @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n+    void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n+        String secretPassword = \"password\";\n+        String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n+\n+        String secretEnv = \"MY_CONNECTOR_SECRET\";\n+        String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n+\n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n+        String configMapVolumeName = \"connect-config-map\";\n+        String secretVolumeName = \"connect-secret\";\n+\n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+\n+        String configMapKey = \"my-key\";\n+        String secretKey = \"my-secret-key\";\n+\n+        Secret connectSecret = new SecretBuilder()\n+            .withNewMetadata()\n+            .withName(\"my-secret\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk3ODgxOnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjoyM1rOHkJpbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyNDozMFrOHkJtkg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2ODg0Ng==", "bodyText": "Indent", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507668846", "createdAt": "2020-10-19T11:22:23Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "diffHunk": "@@ -739,6 +746,158 @@ void testHostAliases() {\n         assertThat(output, containsString(etcHostsData));\n     }\n \n+    @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n+    void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n+        String secretPassword = \"password\";\n+        String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n+\n+        String secretEnv = \"MY_CONNECTOR_SECRET\";\n+        String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n+\n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n+        String configMapVolumeName = \"connect-config-map\";\n+        String secretVolumeName = \"connect-secret\";\n+\n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+\n+        String configMapKey = \"my-key\";\n+        String secretKey = \"my-secret-key\";\n+\n+        Secret connectSecret = new SecretBuilder()\n+            .withNewMetadata()\n+            .withName(\"my-secret\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 55}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2OTkwNg==", "bodyText": "It's in multiple places, I am list lazy mark every line :)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507669906", "createdAt": "2020-10-19T11:24:30Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "diffHunk": "@@ -739,6 +746,158 @@ void testHostAliases() {\n         assertThat(output, containsString(etcHostsData));\n     }\n \n+    @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n+    void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n+        String secretPassword = \"password\";\n+        String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n+\n+        String secretEnv = \"MY_CONNECTOR_SECRET\";\n+        String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n+\n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n+        String configMapVolumeName = \"connect-config-map\";\n+        String secretVolumeName = \"connect-secret\";\n+\n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+\n+        String configMapKey = \"my-key\";\n+        String secretKey = \"my-secret-key\";\n+\n+        Secret connectSecret = new SecretBuilder()\n+            .withNewMetadata()\n+            .withName(\"my-secret\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2ODg0Ng=="}, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 55}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk3OTA5OnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjozMVrOHkJpqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjozMVrOHkJpqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2ODkwNA==", "bodyText": "Maybe put name into var?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507668904", "createdAt": "2020-10-19T11:22:31Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "diffHunk": "@@ -739,6 +746,158 @@ void testHostAliases() {\n         assertThat(output, containsString(etcHostsData));\n     }\n \n+    @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n+    void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n+        String secretPassword = \"password\";\n+        String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n+\n+        String secretEnv = \"MY_CONNECTOR_SECRET\";\n+        String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n+\n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n+        String configMapVolumeName = \"connect-config-map\";\n+        String secretVolumeName = \"connect-secret\";\n+\n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+\n+        String configMapKey = \"my-key\";\n+        String secretKey = \"my-secret-key\";\n+\n+        Secret connectSecret = new SecretBuilder()\n+            .withNewMetadata()\n+            .withName(\"my-secret\")\n+            .endMetadata()\n+            .withType(\"Opaque\")\n+            .addToData(secretKey, encodedPassword)\n+            .build();\n+\n+        ConfigMap configMap = new ConfigMapBuilder()\n+            .editOrNewMetadata()\n+            .withName(\"my-config-map\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 63}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk3OTM5OnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjozOFrOHkJp2w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMjozOFrOHkJp2w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2ODk1NQ==", "bodyText": "Maybe put value into var?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507668955", "createdAt": "2020-10-19T11:22:38Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectS2IST.java", "diffHunk": "@@ -739,6 +746,158 @@ void testHostAliases() {\n         assertThat(output, containsString(etcHostsData));\n     }\n \n+    @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n+    void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n+        String secretPassword = \"password\";\n+        String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n+\n+        String secretEnv = \"MY_CONNECTOR_SECRET\";\n+        String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n+\n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n+        String configMapVolumeName = \"connect-config-map\";\n+        String secretVolumeName = \"connect-secret\";\n+\n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+\n+        String configMapKey = \"my-key\";\n+        String secretKey = \"my-secret-key\";\n+\n+        Secret connectSecret = new SecretBuilder()\n+            .withNewMetadata()\n+            .withName(\"my-secret\")\n+            .endMetadata()\n+            .withType(\"Opaque\")\n+            .addToData(secretKey, encodedPassword)\n+            .build();\n+\n+        ConfigMap configMap = new ConfigMapBuilder()\n+            .editOrNewMetadata()\n+            .withName(\"my-config-map\")\n+            .endMetadata()\n+            .addToData(configMapKey, \"my-value\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 65}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE3OTk4Mjg4OnYy", "diffSide": "RIGHT", "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectST.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxMToyMzo0M1rOHkJsAA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xOVQxNzozMTowOVrOHkZguQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2OTUwNA==", "bodyText": "Maybe we should put this into some method? It's the same for ConnectST and ConnectS2IST. Same with creation of serets/cm", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507669504", "createdAt": "2020-10-19T11:23:43Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectST.java", "diffHunk": "@@ -1031,16 +1031,23 @@ void testScaleConnectAndConnectorSubresource() {\n     }\n \n     @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n     void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n         String secretPassword = \"password\";\n         String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n \n         String secretEnv = \"MY_CONNECTOR_SECRET\";\n         String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n \n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n         String configMapVolumeName = \"connect-config-map\";\n         String secretVolumeName = \"connect-secret\";\n \n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzcxOTI5NA==", "bodyText": "Well the tests are practically same, only difference is between the CRs -> I would like to make the tests \"more generic\" how we discussed offline. But for now, I guess, I can create some method in AbstractST and then just refactor it.\nWDYT @Frawless ?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507719294", "createdAt": "2020-10-19T12:50:03Z", "author": {"login": "im-konge"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectST.java", "diffHunk": "@@ -1031,16 +1031,23 @@ void testScaleConnectAndConnectorSubresource() {\n     }\n \n     @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n     void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n         String secretPassword = \"password\";\n         String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n \n         String secretEnv = \"MY_CONNECTOR_SECRET\";\n         String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n \n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n         String configMapVolumeName = \"connect-config-map\";\n         String secretVolumeName = \"connect-secret\";\n \n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2OTUwNA=="}, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzkyODc2MQ==", "bodyText": "Discussed offline", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3839#discussion_r507928761", "createdAt": "2020-10-19T17:31:09Z", "author": {"login": "Frawless"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/connect/ConnectST.java", "diffHunk": "@@ -1031,16 +1031,23 @@ void testScaleConnectAndConnectorSubresource() {\n     }\n \n     @Test\n+    @SuppressWarnings({\"checkstyle:MethodLength\"})\n     void testMountingSecretAndConfigMapAsVolumesAndEnvVars() {\n         String secretPassword = \"password\";\n         String encodedPassword = Base64.getEncoder().encodeToString(secretPassword.getBytes());\n \n         String secretEnv = \"MY_CONNECTOR_SECRET\";\n         String configMapEnv = \"MY_CONNECT_CONFIG_MAP\";\n \n+        String dotedSecretEnv = \"MY_DOTED_CONNECTOR_SECRET\";\n+        String dotedConfigMapEnv = \"MY_DOTED_CONNECT_CONFIG_MAP\";\n+\n         String configMapVolumeName = \"connect-config-map\";\n         String secretVolumeName = \"connect-secret\";\n \n+        String dotedConfigMapVolumeName = \"connect.config.map\";\n+        String dotedSecretVolumeName = \"connect.secret\";\n+", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNzY2OTUwNA=="}, "originalCommit": {"oid": "38bee2952228dd06d59fe152129d9809947375e1"}, "originalPosition": 20}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 944, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}