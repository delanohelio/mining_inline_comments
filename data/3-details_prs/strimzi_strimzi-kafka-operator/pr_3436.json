{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYxODE4MjAz", "number": 3436, "title": "Fix the scale subresource", "bodyText": "Type of change\n\nBugfix\n\nDescription\nAs reported in #3432, the scale subresource has currently misconfigured the selector.\n\nThe CRD points to .status.selector which is a wrong name\nThe selector should be a String and not LabelSelector\n\nThis PR fixes the issue. I had to rename the podSelector to labelSelector because changing the typo of existing field would not allow operator upgrades. But since this field is used only for the scale subresource and nothing else, the format and name change should not cause any problems. If anyone things so, we can also keep the old field and just deprecate it. But it didn't seemed needed for me.\nChecklist\n\n Write tests\n Make sure all tests pass\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging", "createdAt": "2020-08-02T15:03:01Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436", "merged": true, "mergeCommit": {"oid": "173cfd4034bf39308e290f5febbdf29b269d20f7"}, "closed": true, "closedAt": "2020-08-03T22:13:08Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6-BTxAH2gAyNDYxODE4MjAzOjY1N2RiZWNkNzM4MDM0MWExYjlkYTk4NDhjMWI1ZTAwZjMxMjQ2NDE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc7M1BFgFqTQ1OTgwMjA3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/657dbecd7380341a1b9da9848c1b5e00f3124641", "committedDate": "2020-08-02T14:09:14Z", "message": "Fix the scale subresource - Close #3432\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjU2NzE1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#pullrequestreview-459656715", "createdAt": "2020-08-02T15:14:39Z", "commit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNToxNDo0MFrOG6lxLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNToxNDo0MFrOG6lxLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4OTM5MQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Map sourceMap = new HashMap<String, String>(5);\n          \n          \n            \n                    Map sourceMap = new HashMap<String, String>(4);", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#discussion_r464089391", "createdAt": "2020-08-02T15:14:40Z", "author": {"login": "samuel-hawker"}, "path": "operator-common/src/test/java/io/strimzi/operator/common/model/LabelsTest.java", "diffHunk": "@@ -99,6 +99,20 @@ public void testStrimziSelectorLabels()   {\n         assertThat(labels.strimziSelectorLabels().toMap(), is(expected));\n     }\n \n+    @Test\n+    public void testToLabelSelectorString()   {\n+        Map sourceMap = new HashMap<String, String>(5);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjU2ODEz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#pullrequestreview-459656813", "createdAt": "2020-08-02T15:16:00Z", "commit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNToxNjowMFrOG6lx1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wMlQxNToxNjowMFrOG6lx1A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDA4OTU1Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    return labels.keySet().stream().map(key -> key + \"=\" + labels.get(key)).collect(Collectors.joining(\",\"));\n          \n          \n            \n                    return labels.entrySet().stream().map(entry -> entry.getKey() + \"=\" + entry.getValue()).collect(Collectors.joining(\",\"));", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#discussion_r464089556", "createdAt": "2020-08-02T15:16:00Z", "author": {"login": "samuel-hawker"}, "path": "operator-common/src/main/java/io/strimzi/operator/common/model/Labels.java", "diffHunk": "@@ -342,6 +342,13 @@ public Labels withStatefulSetPod(String name) {\n         return labels;\n     }\n \n+    /**\n+     * @return A string which can be used as the Kuberneter label selector (e.g. key1=value1,key2=value2).\n+     */\n+    public String toSelectorString() {\n+        return labels.keySet().stream().map(key -> key + \"=\" + labels.get(key)).collect(Collectors.joining(\",\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d1ac80d574a7ee1a997932abc7f944c9011f6395", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d1ac80d574a7ee1a997932abc7f944c9011f6395", "committedDate": "2020-08-02T15:18:10Z", "message": "Apply suggestions from code review\r\n\r\nSigned-off-by: Jakub Scholz <www@scholzj.com>\n\nCo-authored-by: Samuel Hawker <sam.b.hawker@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjU3NDcy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#pullrequestreview-459657472", "createdAt": "2020-08-02T15:25:11Z", "commit": {"oid": "657dbecd7380341a1b9da9848c1b5e00f3124641"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5NjU3NTE0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#pullrequestreview-459657514", "createdAt": "2020-08-02T15:25:42Z", "commit": {"oid": "d1ac80d574a7ee1a997932abc7f944c9011f6395"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU5ODAyMDc0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3436#pullrequestreview-459802074", "createdAt": "2020-08-03T07:24:23Z", "commit": {"oid": "d1ac80d574a7ee1a997932abc7f944c9011f6395"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1073, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}