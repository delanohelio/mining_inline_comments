{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3ODM0MzQ4", "number": 2878, "title": "[DOC] Node port preferred host address", "bodyText": "Signed-off-by: prmellor pmellor@redhat.com\nDocumentation\nUpdate to the doc to described the preferredAddressType property for node port listeners.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-04-23T10:46:32Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878", "merged": true, "mergeCommit": {"oid": "392ede260a94130623310bc7b310e711a68d62a2"}, "closed": true, "closedAt": "2020-04-27T10:25:03Z", "author": {"login": "PaulRMellor"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaajrggH2gAyNDA3ODM0MzQ4OmZkNTM3YjJhZTBkOTRjMDc5ZTI2MWFjZjYyZjkzYWQ0MDI2NTg5ODk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcbrKP8gH2gAyNDA3ODM0MzQ4OjllZTAxNjNiZDcxZWRhZDI2MzdjZTMxZGYzOTE4YjRkNjM0ZjA2ZGE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/fd537b2ae0d94c079e261acf62f93ad402658989", "committedDate": "2020-04-23T10:44:37Z", "message": "node port preferred host address\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4OTgwODQ0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878#pullrequestreview-398980844", "createdAt": "2020-04-23T10:49:07Z", "commit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5MjI1NTg1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878#pullrequestreview-399225585", "createdAt": "2020-04-23T15:37:43Z", "commit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk5OTY0MDgz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878#pullrequestreview-399964083", "createdAt": "2020-04-24T13:50:39Z", "commit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzo1MDozOVrOGLYqIQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yNFQxMzo1MjoxMVrOGLYutw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU5MTUyMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            An additional `NodePort` type `Service` is created to serve as a Kafka bootstrap address.\n          \n          \n            \n            An additional `NodePort` type of `Service` is created to serve as a Kafka bootstrap address.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878#discussion_r414591521", "createdAt": "2020-04-24T13:50:39Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/con-kafka-broker-external-listeners-nodeports.adoc", "diffHunk": "@@ -9,17 +9,45 @@\n When exposing Kafka using `NodePort` type `Services`, Kafka clients connect directly to the nodes of Kubernetes.\n You must enable access to the ports on the Kubernetes nodes for each client (for example, in firewalls or security groups).\n Each Kafka broker pod is then accessible on a separate port.\n-Additional `NodePort` type `Service` is created to serve as a Kafka bootstrap address.\n+\n+An additional `NodePort` type `Service` is created to serve as a Kafka bootstrap address.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNDU5MjY5NQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            If the preferred address type if not found, {ProductName} proceeds through the types in the standard order of priority.\n          \n          \n            \n            If the preferred address type is not found, {ProductName} proceeds through the types in the standard order of priority.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2878#discussion_r414592695", "createdAt": "2020-04-24T13:52:11Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/con-kafka-broker-external-listeners-nodeports.adoc", "diffHunk": "@@ -9,17 +9,45 @@\n When exposing Kafka using `NodePort` type `Services`, Kafka clients connect directly to the nodes of Kubernetes.\n You must enable access to the ports on the Kubernetes nodes for each client (for example, in firewalls or security groups).\n Each Kafka broker pod is then accessible on a separate port.\n-Additional `NodePort` type `Service` is created to serve as a Kafka bootstrap address.\n+\n+An additional `NodePort` type `Service` is created to serve as a Kafka bootstrap address.\n \n When configuring the advertised addresses for the Kafka broker pods, {ProductName} uses the address of the node on which the given pod is running.\n-When selecting the node address, the different address types are used with the following priority:\n+Nodes often have multiple addresses.\n+The address type used is based on the first type found in the following order of priority:\n \n . ExternalDNS\n . ExternalIP\n . Hostname\n . InternalDNS\n . InternalIP\n \n+You can use the `preferredAddressType` property in your listener configuration to specify the first address type checked as the node address.\n+This property is useful, for example, if your deployment does not have DNS support, or you only want to expose a broker internally through an internal DNS or IP address.\n+If an address of this type is found, it is used.\n+If the preferred address type if not found, {ProductName} proceeds through the types in the standard order of priority.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fd537b2ae0d94c079e261acf62f93ad402658989"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ee0163bd71edad2637ce31df3918b4d634f06da", "author": {"user": {"login": "PaulRMellor", "name": null}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/9ee0163bd71edad2637ce31df3918b4d634f06da", "committedDate": "2020-04-27T08:39:09Z", "message": "review edits DL\n\nSigned-off-by: prmellor <pmellor@redhat.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1934, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}