{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2NzgwMzAz", "number": 3297, "title": "[DOC] Improvements to Prometheus Operator deployment procedure", "bodyText": "Signed-off-by: Daniel Laing dlaing@redhat.com\nType of change\n\nDocumentation\n\nDescription\nMade a couple of improvements to the \"Deploying the CoreOS Prometheus Operator\" procedure.\n\nAdded a statement: \"Choose a release that is compatible with your version of Kubernetes\".\nAdded an attribute for the version of the Prometheus Operator (set to master).\n\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-07-09T10:48:56Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297", "merged": true, "mergeCommit": {"oid": "f5b982d49d0b1c81407122106dfb1abc9fed8e18"}, "closed": true, "closedAt": "2020-07-14T21:01:59Z", "author": {"login": "laidan6000"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczMtXfAH2gAyNDQ2NzgwMzAzOjBlZmFkNzQzMWI1NmI5OTFiZDBhOTM5MjA3ZTc1YWVhMWU5YzBkZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc02cE0gFqTQ0ODEyOTc5NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0efad7431b56b991bd0a939207e75aea1e9c0dea", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/0efad7431b56b991bd0a939207e75aea1e9c0dea", "committedDate": "2020-07-09T10:44:38Z", "message": "Edit Prometheus Operator deployment, new condition\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9be74d1fa1ec9ee0761807a444ad4945e0c8309", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e9be74d1fa1ec9ee0761807a444ad4945e0c8309", "committedDate": "2020-07-09T10:53:11Z", "message": "Use a better attribute name\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1NTE1Mjk1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-445515295", "createdAt": "2020-07-09T11:08:22Z", "commit": {"oid": "0efad7431b56b991bd0a939207e75aea1e9c0dea"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowODoyMlrOGvMb5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQxMTowODoyMlrOGvMb5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjE0MDAwNw==", "bodyText": "Not so simple :-( The Prometheus operator team provided me this link in the past for choosing a release https://github.com/coreos/kube-prometheus#kubernetes-compatibility-matrix but then if you are using OpenShift 3.11 for example the above URL is not valid anymore and the right bundle comes from https://github.com/openshift/prometheus-operator/tree/release-3.11. Anyway because we want to stay on vanilla Kubernetes here, I would add the link to the versions matrix. It's mentioned more or less here https://github.com/coreos/prometheus-operator#quickstart", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#discussion_r452140007", "createdAt": "2020-07-09T11:08:22Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus-operator.adoc", "diffHunk": "@@ -10,17 +10,19 @@ To deploy the Prometheus Operator to your Kafka cluster, apply the YAML bundle r\n \n .Procedure\n \n-. Download the resource file from the repository and replace the example `namespace` with your own:\n+. Download the `bundle.yaml` resources file from the repository and replace the example `namespace` with your own:\n +\n On Linux, use:\n +\n-[source,shell,subs=+quotes]\n-curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n+[source,shell,subs=\"+quotes,attributes+\"]\n+curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/{PrometheusSupport}/bundle.yaml | sed -e 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n +\n On MacOS, use:\n +\n-[source,shell,subs=+quotes]\n-curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e '' 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n+[source,shell,subs=\"+quotes,attributes+\"]\n+curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/{PrometheusSupport}/bundle.yaml | sed -e '' 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n++\n+Choose a release that is compatible with your version of Kubernetes.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0efad7431b56b991bd0a939207e75aea1e9c0dea"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "42951c290d49b10195a423052c2f05df75e550c9", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/42951c290d49b10195a423052c2f05df75e550c9", "committedDate": "2020-07-09T14:08:10Z", "message": "Added info on OpenShift repo\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "147de3ff8ebce96078c27ce96c0cc2774c249b17", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/147de3ff8ebce96078c27ce96c0cc2774c249b17", "committedDate": "2020-07-09T15:31:01Z", "message": "Review comments\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MDA1OTM3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-446005937", "createdAt": "2020-07-09T22:17:11Z", "commit": {"oid": "147de3ff8ebce96078c27ce96c0cc2774c249b17"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjoxNzoxMVrOGvjqYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOVQyMjoxODowNlrOGvjrxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUyMDU0Nw==", "bodyText": "Do we really need the variable if it is used only in two places next to each other? I think it might be better to keep the version in the example directly where it is more likely to be seen and noticed that it is wrong since we only rarely fo through the variable values and they seem to be often outdated.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#discussion_r452520547", "createdAt": "2020-07-09T22:17:11Z", "author": {"login": "scholzj"}, "path": "documentation/shared/attributes.adoc", "diffHunk": "@@ -33,6 +33,7 @@\n :JMXExporter: link:https://github.com/prometheus/jmx_exporter[JMX Exporter documentation^]\n :PrometheusHome: link:https://github.com/prometheus[Prometheus^]\n :PrometheusConfig: link:https://prometheus.io/docs/prometheus/latest/configuration/configuration[Configuration^]\n+:SupportedPrometheusVersion: master", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147de3ff8ebce96078c27ce96c0cc2774c249b17"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjUyMDkwMA==", "bodyText": "Is this the latest master release? Or which version? I expect the matrix lists more versions than just 1.18.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#discussion_r452520900", "createdAt": "2020-07-09T22:18:06Z", "author": {"login": "scholzj"}, "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus-operator.adoc", "diffHunk": "@@ -10,23 +10,30 @@ To deploy the Prometheus Operator to your Kafka cluster, apply the YAML bundle r\n \n .Procedure\n \n-. Download the resource file from the repository and replace the example `namespace` with your own:\n+. Download the `bundle.yaml` resources file from the repository.\n +\n On Linux, use:\n +\n-[source,shell,subs=+quotes]\n-curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n+[source,shell,subs=\"+quotes,attributes+\"]\n+curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/{SupportedPrometheusVersion}/bundle.yaml | sed -e 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n +\n On MacOS, use:\n +\n-[source,shell,subs=+quotes]\n-curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e '' 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n+[source,shell,subs=\"+quotes,attributes+\"]\n+curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/{SupportedPrometheusVersion}/bundle.yaml | sed -e '' 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n++\n+** Replace the example `namespace` with your own.\n++\n+ifdef::Downloading[]\n+** Use the latest `master` release as shown, or choose a release that is compatible with your version of Kubernetes (see the https://github.com/coreos/kube-prometheus#kubernetes-compatibility-matrix[Kubernetes compatibility matrix]). \n+The Prometheus Operator installation works with Kubernetes 1.18+.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "147de3ff8ebce96078c27ce96c0cc2774c249b17"}, "originalPosition": 25}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/2d99b01fa028833b49fd64ca65ca9f2e7477d991", "committedDate": "2020-07-10T10:55:14Z", "message": "Review comments JS\n\nSigned-off-by: Daniel Laing <dlaing@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTM5NTAw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-446539500", "createdAt": "2020-07-10T16:32:44Z", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozMjo0NFrOGv93qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNjozMjo0NFrOGv93qg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk0OTkzMA==", "bodyText": "Do we want to wrap this in ifndef::Downloading[]?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#discussion_r452949930", "createdAt": "2020-07-10T16:32:44Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus-operator.adoc", "diffHunk": "@@ -10,23 +10,30 @@ To deploy the Prometheus Operator to your Kafka cluster, apply the YAML bundle r\n \n .Procedure\n \n-. Download the resource file from the repository and replace the example `namespace` with your own:\n+. Download the `bundle.yaml` resources file from the repository.\n +\n On Linux, use:\n +\n-[source,shell,subs=+quotes]\n+[source,shell,subs=\"+quotes,attributes+\"]\n curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n +\n On MacOS, use:\n +\n-[source,shell,subs=+quotes]\n+[source,shell,subs=\"+quotes,attributes+\"]\n curl -s https://raw.githubusercontent.com/coreos/prometheus-operator/master/bundle.yaml | sed -e '' 's/namespace: .*/namespace: _my-namespace_/' > prometheus-operator-deployment.yaml\n++\n+** Replace the example `namespace` with your own.\n++\n+ifdef::Downloading[]\n+** Use the latest `master` release as shown, or choose a release that is compatible with your version of Kubernetes (see the https://github.com/coreos/kube-prometheus#kubernetes-compatibility-matrix[Kubernetes compatibility matrix]). \n+The `master` release of the Prometheus Operator works with Kubernetes 1.18+.\n+endif::Downloading[]\n++\n+NOTE: If using OpenShift, specify a release of the link:https://github.com/openshift/prometheus-operator[OpenShift fork^] of the Prometheus Operator repository.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTQwMTI3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-446540127", "createdAt": "2020-07-10T16:33:43Z", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NjY2MDM1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-446666035", "createdAt": "2020-07-10T19:55:43Z", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2Njg4Nzg1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-446688785", "createdAt": "2020-07-10T20:41:22Z", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4MTI5Nzk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3297#pullrequestreview-448129794", "createdAt": "2020-07-14T13:55:41Z", "commit": {"oid": "2d99b01fa028833b49fd64ca65ca9f2e7477d991"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1293, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}