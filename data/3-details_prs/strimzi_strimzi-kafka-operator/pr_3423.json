{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYwMjE4MDcx", "number": 3423, "title": "Add Identity Replication policy to MirrorMaker2", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis PR relates to the issue #2546\nIn the context of a DRP scenario with an active-passive replication, we wanted to have prefixless topics on the destination cluster.\nPeople on the issue notice that this is a common scenario that could be beneficial to others. This is why this PR propose a way to integrate this custom replication policy directly into Strimzi image.\nIn the MirrorMaker2 CRD, we can choose this replication policy by adding the following configuration:\n...\nmirrors:\n  - sourceCluster:  \"source-cluster\"\n    targetCluster: \"target-cluster\"\n    sourceConnector:\n      config:\n       ...\n        replication.policy.class: org.strimzi.kafka.connect.mirror.IdentityReplicationPolicy\n...\n\nI'm please to read your change suggestions\nThanks for reviews.\nNote:\nThis custom replication has been inspired from the following implementation: https://github.com/aws-samples/mirrormaker2-msk-migration#custommm2replicationpolicy\nChecklist\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-07-31T14:51:48Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3423", "merged": true, "mergeCommit": {"oid": "295c8bfa5a582e5698042290183ece982334495c"}, "closed": true, "closedAt": "2020-08-30T10:53:52Z", "author": {"login": "thpham"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc6VmIqgBqjM2MDg5MzU2Mjc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdDu6uVgFqTQ3ODE1MDY5Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cc3d462be536c3afe4e418a1969e0ae6395dfa13", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cc3d462be536c3afe4e418a1969e0ae6395dfa13", "committedDate": "2020-07-31T14:15:40Z", "message": "Add MirrorMaker2 library that allows customization of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994"}, "afterCommit": {"oid": "3c2dc22b90b0dbfa4aff76df072514759aa00633", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/3c2dc22b90b0dbfa4aff76df072514759aa00633", "committedDate": "2020-07-31T15:02:30Z", "message": "Add MirrorMaker2 library that allows customisation of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "29f4f1e5ce32b855ef30633d8b52ed1e107cfb0d", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/29f4f1e5ce32b855ef30633d8b52ed1e107cfb0d", "committedDate": "2020-08-05T15:28:47Z", "message": "fix wrong package name"}, "afterCommit": {"oid": "f210abb6b60db265dd7237d063bb86a508ff48fb", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f210abb6b60db265dd7237d063bb86a508ff48fb", "committedDate": "2020-08-05T17:06:09Z", "message": "fix wrong package name"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f210abb6b60db265dd7237d063bb86a508ff48fb", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f210abb6b60db265dd7237d063bb86a508ff48fb", "committedDate": "2020-08-05T17:06:09Z", "message": "fix wrong package name"}, "afterCommit": {"oid": "c2010699de0ba3e107ce6f4e1bb3bc8bf8aa3fe2", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c2010699de0ba3e107ce6f4e1bb3bc8bf8aa3fe2", "committedDate": "2020-08-05T17:32:48Z", "message": "fix wrong package name\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2010699de0ba3e107ce6f4e1bb3bc8bf8aa3fe2", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c2010699de0ba3e107ce6f4e1bb3bc8bf8aa3fe2", "committedDate": "2020-08-05T17:32:48Z", "message": "fix wrong package name\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}, "afterCommit": {"oid": "760773fac538657aacb03067d3aabfdc983085e0", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/760773fac538657aacb03067d3aabfdc983085e0", "committedDate": "2020-08-27T07:18:11Z", "message": "Add Mirror Maker2 Extensions library that allows customisation of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c8f0856ad6223f541bd15252ed5597c69091f670", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c8f0856ad6223f541bd15252ed5597c69091f670", "committedDate": "2020-08-27T07:20:27Z", "message": "Add Mirror Maker2 Extensions library that allows customisation of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "760773fac538657aacb03067d3aabfdc983085e0", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/760773fac538657aacb03067d3aabfdc983085e0", "committedDate": "2020-08-27T07:18:11Z", "message": "Add Mirror Maker2 Extensions library that allows customisation of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}, "afterCommit": {"oid": "c8f0856ad6223f541bd15252ed5597c69091f670", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c8f0856ad6223f541bd15252ed5597c69091f670", "committedDate": "2020-08-27T07:20:27Z", "message": "Add Mirror Maker2 Extensions library that allows customisation of the Replication Policy\n\nrelates to: https://github.com/strimzi/strimzi-kafka-operator/issues/2546#issue-564532994\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTI1Nzc2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3423#pullrequestreview-478125776", "createdAt": "2020-08-29T12:44:32Z", "commit": {"oid": "c8f0856ad6223f541bd15252ed5597c69091f670"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQxMjo0NDozMlrOHJbRbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOVQxMjo0NDozMlrOHJbRbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTY0NjA2Mg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              version: 2.5.0\n          \n          \n            \n              version: 2.6.0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3423#discussion_r479646062", "createdAt": "2020-08-29T12:44:32Z", "author": {"login": "scholzj"}, "path": "examples/mirror-maker/kafka-mirror-maker-2-custom-replication-policy.yaml", "diffHunk": "@@ -0,0 +1,35 @@\n+apiVersion: kafka.strimzi.io/v1alpha1\n+kind: KafkaMirrorMaker2\n+metadata:\n+  name: my-mirror-maker-2\n+spec:\n+  version: 2.5.0", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c8f0856ad6223f541bd15252ed5597c69091f670"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c9161a1a6bb4a451add2e36a94efb3b4b5b643c", "author": {"user": {"login": "thpham", "name": "Thomas Kim Pham"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4c9161a1a6bb4a451add2e36a94efb3b4b5b643c", "committedDate": "2020-08-29T15:09:21Z", "message": "bump mm2-extensions release and fix mm2 crd example version\n\nSigned-off-by: Pham, Thomas <Thomas.Pham@sicpa.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTM4MTk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3423#pullrequestreview-478138194", "createdAt": "2020-08-29T16:11:38Z", "commit": {"oid": "4c9161a1a6bb4a451add2e36a94efb3b4b5b643c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MTUwNjky", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3423#pullrequestreview-478150692", "createdAt": "2020-08-29T19:38:47Z", "commit": {"oid": "4c9161a1a6bb4a451add2e36a94efb3b4b5b643c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1053, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}