{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkzNzEzMDUw", "number": 2749, "title": "[systemtest] Remove duplicated methods, add new one to utils classes", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nIn this PR I'm removing all duplicated methods from ST and also add methods from ST to utils for future usage.\nChecklist\n\n Move methods to utils\n Delete duplicated methods\n Make sure all tests pass", "createdAt": "2020-03-25T17:05:56Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749", "merged": true, "mergeCommit": {"oid": "4c3facc0d4f032a8fb8d72673fe07727edbe68fe"}, "closed": true, "closedAt": "2020-03-28T19:50:17Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRK5AtgBqjMxNjQ5OTEyODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSKxxYAFqTM4MzM0MzkyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "004b5048a0a7989970b4cb3bb3cf7cae2ceb3aa1", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/004b5048a0a7989970b4cb3bb3cf7cae2ceb3aa1", "committedDate": "2020-03-25T17:00:39Z", "message": "remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}, "afterCommit": {"oid": "f1c0f196f1af7abc1bcd3c6c377ada475513f26e", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f1c0f196f1af7abc1bcd3c6c377ada475513f26e", "committedDate": "2020-03-25T17:23:54Z", "message": "remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbedd3bd104b1127894c0ae114ac56aaca581621", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cbedd3bd104b1127894c0ae114ac56aaca581621", "committedDate": "2020-03-27T13:50:29Z", "message": "remove duplicated methods from CustomResourceStatusST\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "63b7b32340783b48028d1514886764b43b663d55", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/63b7b32340783b48028d1514886764b43b663d55", "committedDate": "2020-03-27T13:50:31Z", "message": "move methods from STs\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df4fe0cfb4c5acfaf3642c64d60c3cec0d1e3ae3", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/df4fe0cfb4c5acfaf3642c64d60c3cec0d1e3ae3", "committedDate": "2020-03-27T13:50:31Z", "message": "create utils file for cluster relevant methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6fedfb7a80a003ad4cd1c0d7fe57bfda560db9f", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a6fedfb7a80a003ad4cd1c0d7fe57bfda560db9f", "committedDate": "2020-03-27T13:51:11Z", "message": "remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzU1MjQx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-382355241", "createdAt": "2020-03-26T19:42:44Z", "commit": {"oid": "f1c0f196f1af7abc1bcd3c6c377ada475513f26e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTo0Mjo0NFrOF8Xiiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQxOTo0NTozNFrOF8Xodg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0NDU1NQ==", "bodyText": "As we discussed, move this to the KafkaUtils", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#discussion_r398844555", "createdAt": "2020-03-26T19:42:44Z", "author": {"login": "see-quick"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/kubeUtils/objects/ClusterUtils.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.utils.kubeUtils.objects;\n+\n+import io.strimzi.api.kafka.model.KafkaResources;\n+import io.strimzi.systemtest.Constants;\n+import io.strimzi.systemtest.utils.kubeUtils.controllers.DeploymentUtils;\n+import io.strimzi.systemtest.utils.kubeUtils.controllers.StatefulSetUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static io.strimzi.api.kafka.model.KafkaResources.kafkaStatefulSetName;\n+import static io.strimzi.api.kafka.model.KafkaResources.zookeeperStatefulSetName;\n+\n+public class ClusterUtils {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1c0f196f1af7abc1bcd3c6c377ada475513f26e"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg0NjA3MA==", "bodyText": "You shouldn't use AtomicInteger, you shouldn't use things unless you have a really good reason to use. And the reason for using AtomicInteger might be only allowing concurrent accesses or such as.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    AtomicInteger count = new AtomicInteger();\n          \n          \n            \n                 int[] count = {0};", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#discussion_r398846070", "createdAt": "2020-03-26T19:45:34Z", "author": {"login": "see-quick"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/utils/kubeUtils/objects/ClusterUtils.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+package io.strimzi.systemtest.utils.kubeUtils.objects;\n+\n+import io.strimzi.api.kafka.model.KafkaResources;\n+import io.strimzi.systemtest.Constants;\n+import io.strimzi.systemtest.utils.kubeUtils.controllers.DeploymentUtils;\n+import io.strimzi.systemtest.utils.kubeUtils.controllers.StatefulSetUtils;\n+import io.strimzi.test.TestUtils;\n+import org.apache.logging.log4j.LogManager;\n+import org.apache.logging.log4j.Logger;\n+\n+import java.util.Map;\n+import java.util.concurrent.atomic.AtomicInteger;\n+\n+import static io.strimzi.api.kafka.model.KafkaResources.kafkaStatefulSetName;\n+import static io.strimzi.api.kafka.model.KafkaResources.zookeeperStatefulSetName;\n+\n+public class ClusterUtils {\n+    private static final Logger LOGGER = LogManager.getLogger(ClusterUtils.class);\n+\n+    @SuppressWarnings(\"unchecked\")\n+    public static void waitForClusterStability(String clusterName) {\n+        LOGGER.info(\"Waiting for cluster stability\");\n+        Map<String, String>[] zkPods = new Map[1];\n+        Map<String, String>[] kafkaPods = new Map[1];\n+        Map<String, String>[] eoPods = new Map[1];\n+        AtomicInteger count = new AtomicInteger();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f1c0f196f1af7abc1bcd3c6c377ada475513f26e"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d", "committedDate": "2020-03-27T14:12:28Z", "message": "fixup! remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f1c0f196f1af7abc1bcd3c6c377ada475513f26e", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f1c0f196f1af7abc1bcd3c6c377ada475513f26e", "committedDate": "2020-03-25T17:23:54Z", "message": "remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}, "afterCommit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d", "committedDate": "2020-03-27T14:12:28Z", "message": "fixup! remove utils methods and duplicated methods\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyOTU4MDEx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-382958011", "createdAt": "2020-03-27T15:23:12Z", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyOTcxOTMx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-382971931", "createdAt": "2020-03-27T15:38:43Z", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMDA1NDQ5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-383005449", "createdAt": "2020-03-27T16:17:08Z", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMjk4MjE3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-383298217", "createdAt": "2020-03-28T09:33:53Z", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzQzOTIx", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2749#pullrequestreview-383343921", "createdAt": "2020-03-28T19:50:08Z", "commit": {"oid": "1c062d8f4250fb6ab9c4f9f6fdd3cf93ca57735d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2132, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}