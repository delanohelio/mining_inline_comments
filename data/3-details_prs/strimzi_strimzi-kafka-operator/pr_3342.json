{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzMzQyNTY4", "number": 3342, "title": "fix: grep error in yq version check", "bodyText": "Type of change\n\nBugfix\n\nDescription\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\nChecklist\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-07-20T11:18:55Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3342", "merged": true, "mergeCommit": {"oid": "9d13678bea5eceb81ee2fe7616ed45a613f2f010"}, "closed": true, "closedAt": "2020-07-20T15:07:51Z", "author": {"login": "its-dave"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2wAaOgFqTQ1MTUyNDA1NA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc2xKwCgFqTQ1MTU3Nzg3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTI0MDU0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3342#pullrequestreview-451524054", "createdAt": "2020-07-20T11:33:53Z", "commit": {"oid": "6a1410ccba6c0ea8db3c5136753a55b80397a866"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a1410ccba6c0ea8db3c5136753a55b80397a866", "author": {"user": {"login": "its-dave", "name": "Dave"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6a1410ccba6c0ea8db3c5136753a55b80397a866", "committedDate": "2020-07-20T11:14:10Z", "message": "fix: grep error in yq version check\n\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\n\nSigned-off-by: Dave <davilane@uk.ibm.com>"}, "afterCommit": {"oid": "ae57b8df6c220727981931f05bbbc2c59c2e5d1b", "author": {"user": {"login": "its-dave", "name": "Dave"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ae57b8df6c220727981931f05bbbc2c59c2e5d1b", "committedDate": "2020-07-20T11:48:48Z", "message": "fix: grep error in yq version check\n\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\n\nSigned-off-by: Dave Lane <davilane@uk.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTU0MDA1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3342#pullrequestreview-451554005", "createdAt": "2020-07-20T12:20:46Z", "commit": {"oid": "ae57b8df6c220727981931f05bbbc2c59c2e5d1b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjoyMDo0NlrOG0JVFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxMjoyMDo0NlrOG0JVFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzMzMTk4OA==", "bodyText": "You should probably remove the comment which was related to the code below which you removed.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3342#discussion_r457331988", "createdAt": "2020-07-20T12:20:46Z", "author": {"login": "scholzj"}, "path": "prerequisites-check.sh", "diffHunk": "@@ -15,11 +15,8 @@ check_command_present mvn\n check_command_present git\n check_command_present docker\n \n-YQ_VERSION=\"$(yq --version | ${SED} 's/^.* //g')\"\n+YQ_VERSION=\"$(yq --version 2>&1 | ${SED} 's/^.* //g')\"\n # After version 3.3.1, yq --version sends the string to STDERR instead of STDOUT", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ae57b8df6c220727981931f05bbbc2c59c2e5d1b"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ab99a7488af7884b484bf86583285f11643c2ed", "author": {"user": {"login": "its-dave", "name": "Dave"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8ab99a7488af7884b484bf86583285f11643c2ed", "committedDate": "2020-07-20T12:37:02Z", "message": "fix: grep error in yq version check\n\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\n\nSigned-off-by: Dave Lane <davilane@uk.ibm.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ae57b8df6c220727981931f05bbbc2c59c2e5d1b", "author": {"user": {"login": "its-dave", "name": "Dave"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ae57b8df6c220727981931f05bbbc2c59c2e5d1b", "committedDate": "2020-07-20T11:48:48Z", "message": "fix: grep error in yq version check\n\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\n\nSigned-off-by: Dave Lane <davilane@uk.ibm.com>"}, "afterCommit": {"oid": "8ab99a7488af7884b484bf86583285f11643c2ed", "author": {"user": {"login": "its-dave", "name": "Dave"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8ab99a7488af7884b484bf86583285f11643c2ed", "committedDate": "2020-07-20T12:37:02Z", "message": "fix: grep error in yq version check\n\nOutput of yq --version has changed from stdout to stderr\nThis commit handles both outputs\nCurrent fix uses grep -P argument, which is exclusive to GNU version\nof grep, but results in an unrecognised option error in the BSD or\nBusyBox version of grep\nThis commit removes the need for a second version check using grep\n\nSigned-off-by: Dave Lane <davilane@uk.ibm.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNTc3ODcw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3342#pullrequestreview-451577870", "createdAt": "2020-07-20T12:55:05Z", "commit": {"oid": "8ab99a7488af7884b484bf86583285f11643c2ed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1336, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}