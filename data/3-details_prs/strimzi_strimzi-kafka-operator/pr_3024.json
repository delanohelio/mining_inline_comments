{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE4MTEzNDEz", "number": 3024, "title": "[systemtest][fixes] Make SecurityST less flaky", "bodyText": "Signed-off-by: Lukas Kral lukywill16@gmail.com\nType of change\n\nBugfix\n\nDescription\nThis PR will fix some failing tests in SecurityST:\n\n\nI fixed all networkpolicies tests which were failing - problem here was in assertThrown, where we waited for Runtime exception, but Assertion error was always hit. I changed that because our internal clients doesn't have Runtime exception -> external clients does. So it's desired.\n\n\nI changed CRs method - deleteWithoutWait - to delete CRs by name. By this change I had to update tests which used deleteWithoutWait methods. The main problem of this was that the CRs weren't properly deleted, so they affected next tests.\n\n\nChecklist\n\n Make sure all tests pass", "createdAt": "2020-05-14T16:36:52Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024", "merged": true, "mergeCommit": {"oid": "5d90a59dd7e42dc0aaa6d9c671e60c6271f5a317"}, "closed": true, "closedAt": "2020-05-21T15:41:32Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchQQAkgBqjMzMzc0ODAyMDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcjXz2egFqTQxNTkxMjQwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e05faec9ffb7e6a479abe461b2fa9903b4821fb0", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e05faec9ffb7e6a479abe461b2fa9903b4821fb0", "committedDate": "2020-05-14T16:34:47Z", "message": "fixing securityst\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}, "afterCommit": {"oid": "ba80d1a1968f27cec4097cbd6c49636b0045acf5", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ba80d1a1968f27cec4097cbd6c49636b0045acf5", "committedDate": "2020-05-14T16:41:23Z", "message": "fixing securityst\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef8016201dd4cfeb3534ae9904714af3982d15ec", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ef8016201dd4cfeb3534ae9904714af3982d15ec", "committedDate": "2020-05-19T11:38:29Z", "message": "fixing securityst\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "523f5e4804ef87797145c57b916164c988d145c0", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/523f5e4804ef87797145c57b916164c988d145c0", "committedDate": "2020-05-19T11:38:45Z", "message": "add cascading to all deleteWithoutWait methods\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ffce80639140dafa4c2c4c44cc8190c017829a40", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ffce80639140dafa4c2c4c44cc8190c017829a40", "committedDate": "2020-05-19T11:45:24Z", "message": "add longer operationtimeout\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8bbbf02f84f095ca97b2309ed0c249ae76e1265d", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8bbbf02f84f095ca97b2309ed0c249ae76e1265d", "committedDate": "2020-05-15T17:45:04Z", "message": "add cascading to all deleteWithoutWait methods\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}, "afterCommit": {"oid": "ffce80639140dafa4c2c4c44cc8190c017829a40", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/ffce80639140dafa4c2c4c44cc8190c017829a40", "committedDate": "2020-05-19T11:45:24Z", "message": "add longer operationtimeout\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89a7557f17263d466702077d2d067e0706aeecd6", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/89a7557f17263d466702077d2d067e0706aeecd6", "committedDate": "2020-05-19T14:32:56Z", "message": "fix network policies tests\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MDc0MDc4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024#pullrequestreview-415074078", "createdAt": "2020-05-20T07:47:38Z", "commit": {"oid": "89a7557f17263d466702077d2d067e0706aeecd6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNzo0NzozOFrOGX_RBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMFQwNzo0NzozOFrOGX_RBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzgwNjk4MA==", "bodyText": "I am not sure 100%  but this is not clusterName. It is the Kafka Connect S2I custom resource name and same with the others. Hmmm?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024#discussion_r427806980", "createdAt": "2020-05-20T07:47:38Z", "author": {"login": "see-quick"}, "path": "systemtest/src/main/java/io/strimzi/systemtest/resources/crd/KafkaConnectS2IResource.java", "diffHunk": "@@ -91,8 +91,8 @@ public static KafkaConnectS2I kafkaConnectS2IWithoutWait(KafkaConnectS2I kafkaCo\n         return kafkaConnectS2I;\n     }\n \n-    public static void deleteKafkaConnectS2IWithoutWait(KafkaConnectS2I kafkaConnectS2I) {\n-        kafkaConnectS2IClient().inNamespace(ResourceManager.kubeClient().getNamespace()).delete(kafkaConnectS2I);\n+    public static void deleteKafkaConnectS2IWithoutWait(String clusterName) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89a7557f17263d466702077d2d067e0706aeecd6"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2f8dd09e2007251196356a038da7951aeec0c41", "author": {"user": {"login": "im-konge", "name": "Luk\u00e1\u0161 Kr\u00e1l"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d2f8dd09e2007251196356a038da7951aeec0c41", "committedDate": "2020-05-20T11:24:03Z", "message": "fixup! fix network policies tests\n\nSigned-off-by: Lukas Kral <lukywill16@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1MjUzOTc5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024#pullrequestreview-415253979", "createdAt": "2020-05-20T11:51:56Z", "commit": {"oid": "d2f8dd09e2007251196356a038da7951aeec0c41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1NzI4NDY0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024#pullrequestreview-415728464", "createdAt": "2020-05-20T21:30:23Z", "commit": {"oid": "d2f8dd09e2007251196356a038da7951aeec0c41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE1OTEyNDAy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3024#pullrequestreview-415912402", "createdAt": "2020-05-21T06:37:53Z", "commit": {"oid": "d2f8dd09e2007251196356a038da7951aeec0c41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1720, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}