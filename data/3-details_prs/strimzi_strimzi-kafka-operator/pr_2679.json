{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg2MTczNzUy", "number": 2679, "title": "[systemtest] Add asserts for checking java options in EO", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nAdd asserts for checking presence of Java options if we add it to Kafka creation - to EO - topic-operator and user-operator\nChecklist\n\n Write tests\n Make sure all tests pass", "createdAt": "2020-03-10T14:40:08Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679", "merged": true, "mergeCommit": {"oid": "3f64185d3bdd0df93dce679fa540306236d956c9"}, "closed": true, "closedAt": "2020-03-11T13:26:47Z", "author": {"login": "im-konge"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcMTgujgH2gAyMzg2MTczNzUyOmJhY2FjYjc3YjQwMjdkNzNhODY5NDA5ZmFkNjVhNDZkYjI0MGVmZmY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcMlemWgFqTM3MjY3ODE5NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bacacb77b4027d73a869409fad65a46db240efff", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/bacacb77b4027d73a869409fad65a46db240efff", "committedDate": "2020-03-10T14:37:07Z", "message": "add checks for java options\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMDE5ODY3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#pullrequestreview-372019867", "createdAt": "2020-03-10T14:44:57Z", "commit": {"oid": "bacacb77b4027d73a869409fad65a46db240efff"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMDYyOTA4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#pullrequestreview-372062908", "createdAt": "2020-03-10T15:28:40Z", "commit": {"oid": "bacacb77b4027d73a869409fad65a46db240efff"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNToyODo0MFrOF0UNyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMFQxNToyODo0MFrOF0UNyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MDQwMTQ4MQ==", "bodyText": "Maybe this looks simpler\nString value = container.getEnv().stream().filter(envVar ->\n                        envVar.getName().equals(\"STRIMZI_JAVA_SYSTEM_PROPERTIES\")).findFirst().get().getValue();", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#discussion_r390401481", "createdAt": "2020-03-10T15:28:40Z", "author": {"login": "sknot-rh"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/KafkaST.java", "diffHunk": "@@ -771,6 +783,16 @@ void testJvmAndResources() {\n         assertResources(cmdKubeClient().namespace(), pod.get().getMetadata().getName(), \"user-operator\",\n                 \"512M\", \"300m\", \"256M\", \"300m\");\n \n+        String eoPod = eoPods.keySet().toArray()[0].toString();\n+        kubeClient().getPod(eoPod).getSpec().getContainers().forEach(container -> {\n+            if (!container.getName().equals(\"tls-sidecar\")) {\n+                LOGGER.info(\"Check if -D java options are present in {}\", container.getName());\n+                String value = container.getEnv().stream().filter(envVar ->\n+                        envVar.getName().equals(\"STRIMZI_JAVA_SYSTEM_PROPERTIES\")).collect(Collectors.toList()).get(0).getValue();\n+                assertThat(value, is(\"-Djavax.net.debug=verbose\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bacacb77b4027d73a869409fad65a46db240efff"}, "originalPosition": 50}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b4c63300821c12dce163b1e22a9003651c547bd", "author": {"user": null}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/8b4c63300821c12dce163b1e22a9003651c547bd", "committedDate": "2020-03-10T15:42:21Z", "message": "fixup! add checks for java options\n\nSigned-off-by: Lukas Kral <lkral@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyMzE4NDU2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#pullrequestreview-372318456", "createdAt": "2020-03-10T21:00:26Z", "commit": {"oid": "8b4c63300821c12dce163b1e22a9003651c547bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNTEzMzIw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#pullrequestreview-372513320", "createdAt": "2020-03-11T07:03:49Z", "commit": {"oid": "8b4c63300821c12dce163b1e22a9003651c547bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyNjc4MTk1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2679#pullrequestreview-372678195", "createdAt": "2020-03-11T11:33:05Z", "commit": {"oid": "8b4c63300821c12dce163b1e22a9003651c547bd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2038, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}