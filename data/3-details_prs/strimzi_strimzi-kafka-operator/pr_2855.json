{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1Mzc0MzY1", "number": 2855, "title": "Make log message in Utisl.waitFor configurable", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThe waitFor method in Utils class is used on many different purposes - deletions, comparing generations, connecting to Zookeeper etc. But it is logging only the original purpose - waiting for readiness. When this method is used in several places right after each other, this is very confusing because you do not know which of them really failed.\nThis PR changes this method and its callers to make the log messages clear about what we are waiting for by making the log state configurable.\nChecklist\n\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally", "createdAt": "2020-04-17T22:57:09Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855", "merged": true, "mergeCommit": {"oid": "9623c0c875ba49f59328fc49e2c93adafbaa0599"}, "closed": true, "closedAt": "2020-04-20T09:44:16Z", "author": {"login": "scholzj"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYpHr3AH2gAyNDA1Mzc0MzY1OmNjMTNmNTg5MzkzYjJjMzhiOTNjMjYxNmE1N2UyOTRmYWQ3OGNlODU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZb3v1gFqTM5NjI5ODAwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "cc13f589393b2c38b93c2616a57e294fad78ce85", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cc13f589393b2c38b93c2616a57e294fad78ce85", "committedDate": "2020-04-17T22:34:46Z", "message": "Make log message in waitFor configurable\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fd19bd7b82b3e3a18af52421a2744792f945a4e", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5fd19bd7b82b3e3a18af52421a2744792f945a4e", "committedDate": "2020-04-17T23:38:38Z", "message": "Fix tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "87cd2927569346018ab59dc896371fc8e22af220", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/87cd2927569346018ab59dc896371fc8e22af220", "committedDate": "2020-04-18T15:17:19Z", "message": "Actually commit the fix for the tests\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDAyMjQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855#pullrequestreview-396002247", "createdAt": "2020-04-19T10:41:20Z", "commit": {"oid": "87cd2927569346018ab59dc896371fc8e22af220"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDo0MToyMVrOGH10Nw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xOVQxMDo0MToyMVrOGH10Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDg3NDkzNQ==", "bodyText": "I wonder if instead of ready we should use the term completed not to conflate with the idea of a CR being ready.\nJust in the case of deletes it seems slightly strange to pass a deletion boolean supplier as 'ready' but it really is a case of semantics... just a thought not expecting a change unless you strongly agree.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855#discussion_r410874935", "createdAt": "2020-04-19T10:41:21Z", "author": {"login": "samuel-hawker"}, "path": "operator-common/src/main/java/io/strimzi/operator/common/Util.java", "diffHunk": "@@ -52,14 +52,15 @@\n     /**\n      * @param vertx The vertx instance.\n      * @param logContext A string used for context in logging.\n+     * @param logState The state we are waiting for use in log messages\n      * @param pollIntervalMs The poll interval in milliseconds.\n      * @param timeoutMs The timeout, in milliseconds.\n      * @param ready Determines when the wait is complete by returning true.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "87cd2927569346018ab59dc896371fc8e22af220"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04e9573e3d9fa488b55209ed98beac1781b0bed", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b04e9573e3d9fa488b55209ed98beac1781b0bed", "committedDate": "2020-04-19T13:35:22Z", "message": "Since we use waitFor as generic method now, the supplied should not be called ready\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDM3NjI2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855#pullrequestreview-396037626", "createdAt": "2020-04-19T16:36:56Z", "commit": {"oid": "b04e9573e3d9fa488b55209ed98beac1781b0bed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MDU0OTA5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855#pullrequestreview-396054909", "createdAt": "2020-04-19T19:44:33Z", "commit": {"oid": "b04e9573e3d9fa488b55209ed98beac1781b0bed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2Mjk4MDAy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2855#pullrequestreview-396298002", "createdAt": "2020-04-20T09:42:31Z", "commit": {"oid": "b04e9573e3d9fa488b55209ed98beac1781b0bed"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1898, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}