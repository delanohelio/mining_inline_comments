{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY3MjcwNTY0", "number": 3505, "title": "Fix Prometheus additional configuration documentation", "bodyText": "Signed-off-by: Paolo Patierno ppatierno@live.com\nType of change\n\nDocumentation\n\nDescription\nThe documentation section about the Prometheus additional configuration for scraping metrics from cadvisor and kubelet (on nodes) is not clear.\nThis PR tries to address that.\nChecklist\n\n Update documentation", "createdAt": "2020-08-13T09:39:14Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505", "merged": true, "mergeCommit": {"oid": "c64e8bcf60b99a1b641cef17e42247267d465690"}, "closed": true, "closedAt": "2020-08-13T15:42:25Z", "author": {"login": "ppatierno"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc-cujxgH2gAyNDY3MjcwNTY0OjM3OWIwNDY3YjU3NTg0MGM3OWFlOTcxYzhmYzMzM2FmZjc1OTM0M2E=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc-gtUdgFqTQ2NjgwNDcyOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "379b0467b575840c79ae971c8fc333aff759343a", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/379b0467b575840c79ae971c8fc333aff759343a", "committedDate": "2020-08-13T09:37:35Z", "message": "Fix Prometheus additional configuration documentation\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NjQxOTk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#pullrequestreview-466641994", "createdAt": "2020-08-13T10:36:04Z", "commit": {"oid": "379b0467b575840c79ae971c8fc333aff759343a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDozNjowNVrOHAF3yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMDozNjowNVrOHAF3yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTg1ODI1MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            This is because the Prometheus operator doesn't have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.\n          \n          \n            \n            This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469858250", "createdAt": "2020-08-13T10:36:05Z", "author": {"login": "sknot-rh"}, "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus.adoc", "diffHunk": "@@ -34,7 +34,10 @@ sed -i '' 's/namespace: .*/namespace: _my-namespace_/' prometheus.yaml\n . Edit the `PodMonitor` resource in `strimzi-pod-monitor.yaml` to define Prometheus jobs that will scrape the metrics data from pods.\n `PodMonitor` is used to scrape data directly from pods and is used for Apache Kafka, ZooKeeper, Operators, and Kafka Bridge. Update the `namespaceSelector.matchNames` property with the namespace where the pods to scrape the metrics from are running.\n \n-. To use another role:\n+. The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n+These metrics come from cadvisor and kubelet directly on the nodes.\n+In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n+This is because the Prometheus operator doesn't have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "379b0467b575840c79ae971c8fc333aff759343a"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b18657c97d51130cabdf4974e43597a77e06262", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/4b18657c97d51130cabdf4974e43597a77e06262", "committedDate": "2020-08-13T10:39:50Z", "message": "Fix documentation check\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzM5OTk0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#pullrequestreview-466739994", "createdAt": "2020-08-13T13:04:28Z", "commit": {"oid": "4b18657c97d51130cabdf4974e43597a77e06262"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMzowNDoyOFrOHAKj7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xM1QxMzowNDoyOFrOHAKj7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2OTkzNTA4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            . The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n          \n          \n            \n            These metrics come from cadvisor and kubelet directly on the nodes.\n          \n          \n            \n            In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n          \n          \n            \n            This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.\n          \n          \n            \n            +\n          \n          \n            \n            The Grafana dashboards provided show metrics for CPU, memory and disk volume usage,\n          \n          \n            \n            which come directly from the Kubernetes cAdvisor agent and kubelet on the nodes.\n          \n          \n            \n            The configuration is needed because the Prometheus operator does not have something like `PodMonitor` for scraping metrics directly from nodes.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#discussion_r469935087", "createdAt": "2020-08-13T13:04:28Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/metrics/proc_metrics-deploying-prometheus.adoc", "diffHunk": "@@ -34,7 +34,10 @@ sed -i '' 's/namespace: .*/namespace: _my-namespace_/' prometheus.yaml\n . Edit the `PodMonitor` resource in `strimzi-pod-monitor.yaml` to define Prometheus jobs that will scrape the metrics data from pods.\n `PodMonitor` is used to scrape data directly from pods and is used for Apache Kafka, ZooKeeper, Operators, and Kafka Bridge. Update the `namespaceSelector.matchNames` property with the namespace where the pods to scrape the metrics from are running.\n \n-. To use another role:\n+. The provided Grafana dashboards show metrics about CPU, memory and volume disks usage.\n+These metrics come from cadvisor and kubelet directly on the nodes.\n+In order to have Prometheus scraping for these metrics, an additional configuration is needed.\n+This is because the Prometheus operator does not have a corresponding of `PodMonitor` for scraping metrics coming from nodes directly.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4b18657c97d51130cabdf4974e43597a77e06262"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2NzY1MzM1", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#pullrequestreview-466765335", "createdAt": "2020-08-13T13:33:52Z", "commit": {"oid": "4b18657c97d51130cabdf4974e43597a77e06262"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94f3472648a23b2eb171ec226a48514c84e17577", "author": {"user": {"login": "ppatierno", "name": "Paolo Patierno"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/94f3472648a23b2eb171ec226a48514c84e17577", "committedDate": "2020-08-13T13:40:10Z", "message": "Fixed comments\n\nSigned-off-by: Paolo Patierno <ppatierno@live.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2ODA0NzI4", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3505#pullrequestreview-466804728", "createdAt": "2020-08-13T14:15:51Z", "commit": {"oid": "94f3472648a23b2eb171ec226a48514c84e17577"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1152, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}