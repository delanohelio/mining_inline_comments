{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzMDM3NzMy", "number": 2944, "reviewThreads": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyMjo0N1rOD5G_lw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzoxMTozOFrOD56cVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjEwMDA3OnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyMjo0N1rOGQMi6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODo1OToxM1rOGRJ7fg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNTk0Nw==", "bodyText": "I think this is confusing and the reader might not understand what he should do. Eben I'm not completely sure what does this refer to. Does it refer to the KAfkaUser authentication section?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419635947", "createdAt": "2020-05-04T18:22:47Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkxNzI2OA==", "bodyText": "Is this clearer:\n\nWhen you configure a KafkaUser, you use the spec property to define the authentication and authorization mechanisms required for the Kafka user to be able to connect to Kafka brokers.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419917268", "createdAt": "2020-05-05T07:36:55Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNTk0Nw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkxOTU1NQ==", "bodyText": "Sorry, no. It isn't. What are you trying to say? that the KafkaUser.spec.authntication should match Kafka.spec.kafka.listeners.*.authentication? And that Kafka.spec.kafka.authorization needs to be configured to use KafkaUser.spec.authorization? Then we should probably list this. I do not think this is really clear from it.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419919555", "createdAt": "2020-05-05T07:41:35Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNTk0Nw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY0MTY2Mg==", "bodyText": "Okay. How about:\n\nWhen you configure the KafkaUser authentication and authorization mechanisms, ensure they match the equivalent Kafka configuration:\n\nKafkaUser.spec.authentication matches Kafka.spec.kafka.listeners.*.authentication\nKafkaUser.spec.authorization matches Kafka.spec.kafka.authorization", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420641662", "createdAt": "2020-05-06T08:59:13Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNTk0Nw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjEwMjgyOnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyMzozNlrOGQMkrA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQwODo0MDowMlrOGRJRUQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng==", "bodyText": "It does and it doesn't .... the user will not get any error when such authentication is not enabled in the broker. There is no check for that. So this might be a bit confusing.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419636396", "createdAt": "2020-05-04T18:23:36Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg4MDI2Nw==", "bodyText": "The user won't get an error but anyway user authentication depends on the authentication settings in Kafka, of course, you cannot authenticate a user via TLS if it's not enabled in the Kafka configuration. I think that this sentence is appropriate here.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419880267", "createdAt": "2020-05-05T06:03:01Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkyMzQ1MQ==", "bodyText": "Maybe we could add a note:\n\nNOTE: Authentication between Kafka users and Kafka brokers depends on the authentication settings for each. For example, it is not possible to authenticate a user through TLS if it is not also enabled in the Kafka configuration.\n\nNot sure if this is too much or makes things clearer?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419923451", "createdAt": "2020-05-05T07:49:29Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkyNjg5MA==", "bodyText": "I think this is good. I would also add similar note on authorization since that seems to be a common mistake among users that they do not enable it and wonder why it does not work.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419926890", "createdAt": "2020-05-05T07:56:18Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk5Mjc1Mg==", "bodyText": "Yes it's good for me as well.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419992752", "createdAt": "2020-05-05T09:55:57Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDYzMDg2NQ==", "bodyText": "\ud83d\udc4d", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420630865", "createdAt": "2020-05-06T08:40:02Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNjM5Ng=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjEwNzcyOnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyNDo0M1rOGQMnlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOToxNTo0M1rOGQg9iQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNzE0Mw==", "bodyText": "I wonder if everyone will understand that this is not the only option.\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].\n          \n          \n            \n            * A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using for example TLS authentication and encryption].", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419637143", "createdAt": "2020-05-04T18:24:43Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].\n+\n+.Prerequisites\n+\n+* A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1MzY1NA==", "bodyText": "I've changed this a little to make it more clear on the types of authentication:", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419953654", "createdAt": "2020-05-05T08:45:52Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].\n+\n+.Prerequisites\n+\n+* A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNzE0Mw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk3MDQ0MQ==", "bodyText": "That looks good.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419970441", "createdAt": "2020-05-05T09:15:43Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,68 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you create a user, you must configure the authentication and authorization mechanisms required when connecting to Kafka brokers using a listener.\n+\n+This procedure shows how a user is created with TLS authentication.\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].\n+\n+.Prerequisites\n+\n+* A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzNzE0Mw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 22}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjExNDgyOnYy", "diffSide": "RIGHT", "path": "documentation/modules/ref-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyNjozNFrOGQMr5w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwODo1MDo0MFrOGQgGaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODI0Nw==", "bodyText": "I think that the change of the title is misleading since this only one of the ways. It doesn't cover for example OAuth. So I think this should be still abotu the KafkaUser resource.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419638247", "createdAt": "2020-05-04T18:26:34Z", "author": {"login": "scholzj"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -3,30 +3,34 @@\n // assembly-using-the-user-operator.adoc\n \n [id='ref-kafka-user-{context}']\n-= Kafka User resource\n+= Securing user access to Kafka", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk1NjMyOQ==", "bodyText": "Good point, though we do mention oauth. Reverted.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419956329", "createdAt": "2020-05-05T08:50:40Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -3,30 +3,34 @@\n // assembly-using-the-user-operator.adoc\n \n [id='ref-kafka-user-{context}']\n-= Kafka User resource\n+= Securing user access to Kafka", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODI0Nw=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMjExOTQ5OnYy", "diffSide": "RIGHT", "path": "documentation/modules/ref-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNFQxODoyNzozOFrOGQMulg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMDoyMTowOFrOGRMnPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODkzNA==", "bodyText": "The example seems to be missing the p12 file and password. We should add it. Please let me or @ppatierno know if you need the example.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419638934", "createdAt": "2020-05-04T18:27:38Z", "author": {"login": "scholzj"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.\n+All keys are in X.509 format.\n \n-.An example of the `Secret` with user credentials\n+.An example `Secret` with user credentials", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkwMDMyMg==", "bodyText": "Thanks @scholzj . I was going to ask about P12. Example would be useful.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419900322", "createdAt": "2020-05-05T06:57:57Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.\n+All keys are in X.509 format.\n \n-.An example of the `Secret` with user credentials\n+.An example `Secret` with user credentials", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODkzNA=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTkxNDIwNA==", "bodyText": "The data section now looks something like this:\ndata:\n  ca.crt: # ...\n  user.crt: # ...\n  user.key: # ...\n  user.p12: # ...\n  user.password: # ...", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419914204", "createdAt": "2020-05-05T07:30:17Z", "author": {"login": "scholzj"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.\n+All keys are in X.509 format.\n \n-.An example of the `Secret` with user credentials\n+.An example `Secret` with user credentials", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODkzNA=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDY4NTYzMQ==", "bodyText": "Updated:\n\nSecrets provide private keys and certificates in PEM and PKCS #12 formats.\nFor more information on securing Kafka communication with Secrets, see xref:security-{context}[].\ndata:\n  ca.crt: # Public key of the client CA\n  user.crt: # User certificate that contains the public key of the user\n  user.key: # Private key of the user\n  user.p12: # PKCS #12 archive file for storing certificates and keys\n  user.password: # Password for protecting the PKCS #12 archive file", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420685631", "createdAt": "2020-05-06T10:21:08Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.\n+All keys are in X.509 format.\n \n-.An example of the `Secret` with user credentials\n+.An example `Secret` with user credentials", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTYzODkzNA=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxMzcyNTQyOnYy", "diffSide": "RIGHT", "path": "documentation/modules/ref-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwNjowNzoxOFrOGQbiRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQwOTo1NjozNVrOGQiWBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg4MTU0MA==", "bodyText": "you mention the \"user certificate\" here which is actually the \"public key\" mentioned in the line above.\nWe should always remember that a certificate contains a public key signed by another certificate coming from a CA.\nSo the user certificate is/contains actually the public key which is signed by the client CA certificate (which is itself a public key but self-signed in our case).", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419881540", "createdAt": "2020-05-05T06:07:18Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk2NjI1NQ==", "bodyText": "I'm hoping this is clearer:\n\nThe public key is contained in a user certificate, which is signed by the client Certificate Authority (CA).", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419966255", "createdAt": "2020-05-05T09:08:14Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg4MTU0MA=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk5MzA5Mg==", "bodyText": "it's better yes.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r419993092", "createdAt": "2020-05-05T09:56:35Z", "author": {"login": "ppatierno"}, "path": "documentation/modules/ref-kafka-user.adoc", "diffHunk": "@@ -41,12 +45,12 @@ spec:\n   # ...\n ----\n \n-When the user is created by the User Operator, it will create a new secret with the same name as the `KafkaUser` resource.\n-The secret will contain a public and private key which should be used for the TLS Client Authentication.\n-Bundled with them will be the public key of the client certification authority which was used to sign the user certificate.\n-All keys will be in X509 format.\n+When the user is created by the User Operator, it creates a new secret with the same name as the `KafkaUser` resource.\n+The secret contains a public and private key to use for TLS client authentication.\n+Bundled with the keys is the public key of the client Certificate Authority (CA) used to sign the user certificate.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTg4MTU0MA=="}, "originalCommit": {"oid": "62f43384440d15f452a16f5827c45c66636bfc4f"}, "originalPosition": 54}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDA5ODA5OnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNToyOToyM1rOGRYtYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNToyOToyM1rOGRYtYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg4MzgwOQ==", "bodyText": "I guess one empty line would be enough", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420883809", "createdAt": "2020-05-06T15:29:23Z", "author": {"login": "scholzj"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,83 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+For example:\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you configure the `KafkaUser` authentication and authorization mechanisms, ensure they match the equivalent `Kafka` configuration:\n+\n+* `KafkaUser.spec.authentication` matches `Kafka.spec.kafka.listeners.*.authentication`\n+* `KafkaUser.spec.authorization` matches `Kafka.spec.kafka.authorization`\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f214d843cab23a94b6a7423bd364983c73d29bd2"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDUyMzYyOnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzoxMDoxMFrOGRc81A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QwOToxMjo0MFrOGR1n0w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk1MzMwMA==", "bodyText": "As a KafkaUser...", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420953300", "createdAt": "2020-05-06T17:10:10Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,83 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+For example:\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you configure the `KafkaUser` authentication and authorization mechanisms, ensure they match the equivalent `Kafka` configuration:\n+\n+* `KafkaUser.spec.authentication` matches `Kafka.spec.kafka.listeners.*.authentication`\n+* `KafkaUser.spec.authorization` matches `Kafka.spec.kafka.authorization`\n+\n+\n+a `KafkaUser`, you use the `spec` property to define the `authentication` and `authorization` mechanisms required for the Kafka user to be able to connect to Kafka brokers.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f214d843cab23a94b6a7423bd364983c73d29bd2"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTM1NzUyMw==", "bodyText": "Actually, that line was meant to be taken out pending changes in previous paragraph. Removed now.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r421357523", "createdAt": "2020-05-07T09:12:40Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,83 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+For example:\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you configure the `KafkaUser` authentication and authorization mechanisms, ensure they match the equivalent `Kafka` configuration:\n+\n+* `KafkaUser.spec.authentication` matches `Kafka.spec.kafka.listeners.*.authentication`\n+* `KafkaUser.spec.authorization` matches `Kafka.spec.kafka.authorization`\n+\n+\n+a `KafkaUser`, you use the `spec` property to define the `authentication` and `authorization` mechanisms required for the Kafka user to be able to connect to Kafka brokers.", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk1MzMwMA=="}, "originalCommit": {"oid": "f214d843cab23a94b6a7423bd364983c73d29bd2"}, "originalPosition": 23}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYyMDUyOTUwOnYy", "diffSide": "RIGHT", "path": "documentation/modules/proc-configuring-kafka-user.adoc", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzoxMTozOFrOGRdAkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNzoxMTozOFrOGRdAkw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDk1NDI1OQ==", "bodyText": "Suggested change:\nfrom the secret my-user > from the my-user secret", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2944#discussion_r420954259", "createdAt": "2020-05-06T17:11:38Z", "author": {"login": "laidan6000"}, "path": "documentation/modules/proc-configuring-kafka-user.adoc", "diffHunk": "@@ -0,0 +1,83 @@\n+// Module included in the following assemblies:\n+//\n+// assembly-using-the-user-operator.adoc\n+\n+[id='proc-configuring-kafka-user-{context}']\n+= Configuring a Kafka user\n+\n+Use the properties of the `KafkaUser` resource to configure a Kafka user.\n+\n+You can use `kubectl apply` to create or modify users, and `kubectl delete` to delete existing users.\n+\n+For example:\n+\n+* `kubectl apply -f _<user-config-file>_`\n+* `kubectl delete KafkaUser _<user-name>_`\n+\n+When you configure the `KafkaUser` authentication and authorization mechanisms, ensure they match the equivalent `Kafka` configuration:\n+\n+* `KafkaUser.spec.authentication` matches `Kafka.spec.kafka.listeners.*.authentication`\n+* `KafkaUser.spec.authorization` matches `Kafka.spec.kafka.authorization`\n+\n+\n+a `KafkaUser`, you use the `spec` property to define the `authentication` and `authorization` mechanisms required for the Kafka user to be able to connect to Kafka brokers.\n+\n+This procedure shows how a user is created with TLS authentication.\n+You can also create a user with SCRAM-SHA authentication.\n+\n+The authentication required depends on the xref:assembly-kafka-broker-listener-authentication-deployment-configuration-kafka[type of authentication configured for the Kafka broker listener].\n+\n+NOTE: Authentication between Kafka users and Kafka brokers depends on the authentication settings for each.\n+For example, it is not possible to authenticate a user with TLS if it is not also enabled in the Kafka configuration.\n+\n+.Prerequisites\n+\n+* A running Kafka cluster xref:con-mutual-tls-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using TLS authentication and encryption].\n+* A running User Operator (typically xref:assembly-kafka-entity-operator-deployment-configuration-kafka[deployed with the Entity Operator]).\n+\n+If you are using SCRAM-SHA authentication, you need a running Kafka cluster xref:con-scram-sha-authentication-deployment-configuration-kafka[configured with a Kafka broker listener using SCRAM-SHA authentication].\n+\n+.Procedure\n+\n+. Prepare a YAML file containing the `KafkaUser` to be created.\n++\n+.An example `KafkaUser`\n+[source,yaml,subs=\"attributes+\"]\n+----\n+apiVersion: {KafkaUserApiVersion}\n+kind: KafkaUser\n+metadata:\n+  name: my-user\n+  labels:\n+    strimzi.io/cluster: my-cluster\n+spec:\n+  authentication: <1>\n+    type: tls\n+  authorization:\n+    type: simple <2>\n+    acls:\n+      - resource:\n+          type: topic\n+          name: my-topic\n+          patternType: literal\n+        operation: Read\n+      - resource:\n+          type: topic\n+          name: my-topic\n+          patternType: literal\n+        operation: Describe\n+      - resource:\n+          type: group\n+          name: my-group\n+          patternType: literal\n+        operation: Read\n+----\n+<1> User authentication mechanism, defined as mutual `tls` or `scram-sha-512`.\n+<2> Simple authorization, which requires an accompanying list of ACL rules.\n+\n+. Create the `KafkaUser` resource in Kubernetes.\n++\n+[source,shell,subs=+quotes]\n+kubectl apply -f _<user-config-file>_\n+\n+. Use the credentials from the secret `my-user` in your client application.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f214d843cab23a94b6a7423bd364983c73d29bd2"}, "originalPosition": 83}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4948, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}