{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA3MjMxNDA4", "number": 3849, "title": "Ability to specify a prefix for KafkaUser created Secrets", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nAdded the ability to specify a secretPrefix property on the User Operator that will be used as a prefix to the name of all secrets created from the KafkaUser resource.\nSee #3333 for details.\nChecklist\nPlease go through this checklist and make sure all applicable tasks have been done\n\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md\n Supply screenshots for visual changes, such as Grafana dashboards", "createdAt": "2020-10-21T03:59:24Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849", "merged": true, "mergeCommit": {"oid": "6b8b0dc649fc494c504ab78819c4f84c5ffc8e97"}, "closed": true, "closedAt": "2020-10-22T14:30:53Z", "author": {"login": "allanmoso"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdUlQdPgH2gAyNTA3MjMxNDA4OmM2MzkwZjU4M2VmNTFlNGY1MDEwZjJmMzQyMWNlZmI3YWM1Y2QwMWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdVBRHtgH2gAyNTA3MjMxNDA4OjczOGQ1ZjM4NjNjN2UyMjUzNTJmNTM2NzNkNGQ5NjNiNjY1ODgwMzU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c6390f583ef51e4f5010f2f3421cefb7ac5cd01a", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c6390f583ef51e4f5010f2f3421cefb7ac5cd01a", "committedDate": "2020-10-21T04:00:11Z", "message": "Secret prefix implemented in the user-operator module.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5916cb194dad5a1a02f7861175b793f63579d56b", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/5916cb194dad5a1a02f7861175b793f63579d56b", "committedDate": "2020-10-21T04:00:21Z", "message": "Implemented secret prefix in the EntityUserOperator and updated EntityUserOperatorSpec.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a1578dc62fbdba0bd010fec508fbcb0ca2ba679e", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a1578dc62fbdba0bd010fec508fbcb0ca2ba679e", "committedDate": "2020-10-21T04:00:22Z", "message": "Updated User Operator configuration documentation.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6abcf0dc04f041af4b95fabeb9541c5d97c17001", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6abcf0dc04f041af4b95fabeb9541c5d97c17001", "committedDate": "2020-10-21T03:50:07Z", "message": "Updated User Operator configuration documentation."}, "afterCommit": {"oid": "a1578dc62fbdba0bd010fec508fbcb0ca2ba679e", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/a1578dc62fbdba0bd010fec508fbcb0ca2ba679e", "committedDate": "2020-10-21T04:00:22Z", "message": "Updated User Operator configuration documentation.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d510a55ce1bbade1f728b6e14888848b4f23abb5", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d510a55ce1bbade1f728b6e14888848b4f23abb5", "committedDate": "2020-10-21T04:06:56Z", "message": "Updated CHANGELOG.md.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7213c9c77ccc7d160070394e02f4cf410436342a", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7213c9c77ccc7d160070394e02f4cf410436342a", "committedDate": "2020-10-21T04:05:43Z", "message": "Updated CHANGELOG.md."}, "afterCommit": {"oid": "d510a55ce1bbade1f728b6e14888848b4f23abb5", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/d510a55ce1bbade1f728b6e14888848b4f23abb5", "committedDate": "2020-10-21T04:06:56Z", "message": "Updated CHANGELOG.md.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNDM5MDQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-513439047", "createdAt": "2020-10-21T08:39:49Z", "commit": {"oid": "d510a55ce1bbade1f728b6e14888848b4f23abb5"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODozOTo0OVrOHlguuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQwODo0NjoxM1rOHlhAaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTA5NTYxMQ==", "bodyText": "The 0.20.0 release is already being released. So this will end up in 0.21.0. Can you create a new section for 0.21.0 on top and move it there?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#discussion_r509095611", "createdAt": "2020-10-21T08:39:49Z", "author": {"login": "scholzj"}, "path": "CHANGELOG.md", "diffHunk": "@@ -26,6 +26,7 @@\n * Add improvements for `oauth` authentication, and `keycloak` authorization:\n   * Support for re-authentication was added, which also enforces access token lifespan on the Kafka client session\n   * Permission changes through Keycloak Authorization Services are now detected by Kafka Brokers\n+* Add support for `secretPrefix` property for User Operator to prefix all secret names created from KafkaUser resource.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d510a55ce1bbade1f728b6e14888848b4f23abb5"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTEwMDEzNg==", "bodyText": "I think this is what failed the CI builds:\nReplace 'e.g'. with 'for example, ':\ndocumentation/modules/con-configuring-user-operator.adoc:36:The `secretPrefix` property can be used to add a prefix to the name of all Secrets created from the KafkaUser resource. e.g., `STRIMZI_SECRET_PREFIX=kafka-` would cause all secret names to start with `kafka-`, e.g. `kafka-my-user`.\nERROR: 1 docs problems found.\nMakefile:130: recipe for target 'docu_check' failed\nmake: *** [docu_check] Error 1\n\nCan you use _For example, _ instead of _e.g., _", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#discussion_r509100136", "createdAt": "2020-10-21T08:46:13Z", "author": {"login": "scholzj"}, "path": "documentation/modules/con-configuring-user-operator.adoc", "diffHunk": "@@ -32,6 +32,9 @@ For more details about resource request and limit configuration, see xref:assemb\n The `logging` property configures the logging of the User Operator.\n For more details, see xref:con-entity-operator-logging-{context}[].\n \n+`secretPrefix`::\n+The `secretPrefix` property can be used to add a prefix to the name of all Secrets created from the KafkaUser resource. e.g., `STRIMZI_SECRET_PREFIX=kafka-` would cause all secret names to start with `kafka-`, e.g. `kafka-my-user`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d510a55ce1bbade1f728b6e14888848b4f23abb5"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b7e36c009f0ca73aeaa7883242dbdd430fff9201", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/b7e36c009f0ca73aeaa7883242dbdd430fff9201", "committedDate": "2020-10-21T11:01:12Z", "message": "Build error fix and PR feedback changes.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "efe26d5b101ba031b5ca340b68dde85561a5b42c", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/efe26d5b101ba031b5ca340b68dde85561a5b42c", "committedDate": "2020-10-21T11:04:16Z", "message": "CRD Changes to Helm to add the secretPrefix property.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNjA0MTY5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-513604169", "createdAt": "2020-10-21T12:08:23Z", "commit": {"oid": "efe26d5b101ba031b5ca340b68dde85561a5b42c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNjU3ODAz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-513657803", "createdAt": "2020-10-21T13:09:52Z", "commit": {"oid": "efe26d5b101ba031b5ca340b68dde85561a5b42c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzowOTo1MlrOHlq-4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxMzowOTo1MlrOHlq-4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTI2MzU4Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The `secretPrefix` property can be used to add a prefix to the name of all Secrets created from the KafkaUser resource. For example, `STRIMZI_SECRET_PREFIX=kafka-` would cause all secret names to start with `kafka-`; a KafkaUser named `my-user`, would create a secret named `kafka-my-user`.\n          \n          \n            \n            The `secretPrefix` property adds a prefix to the name of all Secrets created from the name of the `KafkaUser` resource. If, for example, `STRIMZI_SECRET_PREFIX=kafka-` and the `KafkaUser` name is `my-user`, the Secret name is `kafka-my-user`.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#discussion_r509263586", "createdAt": "2020-10-21T13:09:52Z", "author": {"login": "PaulRMellor"}, "path": "documentation/modules/con-configuring-user-operator.adoc", "diffHunk": "@@ -32,6 +32,9 @@ For more details about resource request and limit configuration, see xref:assemb\n The `logging` property configures the logging of the User Operator.\n For more details, see xref:con-entity-operator-logging-{context}[].\n \n+`secretPrefix`::\n+The `secretPrefix` property can be used to add a prefix to the name of all Secrets created from the KafkaUser resource. For example, `STRIMZI_SECRET_PREFIX=kafka-` would cause all secret names to start with `kafka-`; a KafkaUser named `my-user`, would create a secret named `kafka-my-user`.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "efe26d5b101ba031b5ca340b68dde85561a5b42c"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbebf8d7a3771ec72828a6f90d94db2f597e79f9", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cbebf8d7a3771ec72828a6f90d94db2f597e79f9", "committedDate": "2020-10-21T13:27:09Z", "message": "Update secretPrefix description in documentation/modules/con-configuring-user-operator.adoc\n\nCo-authored-by: PaulRMellor <47596553+PaulRMellor@users.noreply.github.com>\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "39a55ba8062a939fadf70548df7f49cc0cf5428c", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/39a55ba8062a939fadf70548df7f49cc0cf5428c", "committedDate": "2020-10-21T13:25:32Z", "message": "Update secretPrefix description in documentation/modules/con-configuring-user-operator.adoc\n\nCo-authored-by: PaulRMellor <47596553+PaulRMellor@users.noreply.github.com>"}, "afterCommit": {"oid": "cbebf8d7a3771ec72828a6f90d94db2f597e79f9", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/cbebf8d7a3771ec72828a6f90d94db2f597e79f9", "committedDate": "2020-10-21T13:27:09Z", "message": "Update secretPrefix description in documentation/modules/con-configuring-user-operator.adoc\n\nCo-authored-by: PaulRMellor <47596553+PaulRMellor@users.noreply.github.com>\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzNjc5OTQ3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-513679947", "createdAt": "2020-10-21T13:28:47Z", "commit": {"oid": "efe26d5b101ba031b5ca340b68dde85561a5b42c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTEzODg3OTA5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-513887909", "createdAt": "2020-10-21T16:23:57Z", "commit": {"oid": "cbebf8d7a3771ec72828a6f90d94db2f597e79f9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjoyMzo1N1rOHl08qw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yMVQxNjoyNDoyMFrOHl09fA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQyNjg1OQ==", "bodyText": "missing JavaDoc description about this parameter", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#discussion_r509426859", "createdAt": "2020-10-21T16:23:57Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/model/KafkaUserModel.java", "diffHunk": "@@ -95,17 +98,19 @@ protected KafkaUserModel(String namespace, String name, Labels labels) {\n      * @param clientsCaCert The clients CA certificate Secret.\n      * @param clientsCaKey The clients CA key Secret.\n      * @param userSecret Kubernetes secret with existing user certificate.\n+     * @param secretPrefix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbebf8d7a3771ec72828a6f90d94db2f597e79f9"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwOTQyNzA2OA==", "bodyText": "missing JavaDoc description", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#discussion_r509427068", "createdAt": "2020-10-21T16:24:20Z", "author": {"login": "ppatierno"}, "path": "user-operator/src/main/java/io/strimzi/operator/user/operator/KafkaUserOperator.java", "diffHunk": "@@ -74,6 +75,7 @@\n      * @param caCertName The name of the Secret containing the clients CA certificate.\n      * @param caKeyName The name of the Secret containing the clients CA private key.\n      * @param caNamespace The namespace of the Secret containing the clients CA certificate and private key.\n+     * @param secretPrefix", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbebf8d7a3771ec72828a6f90d94db2f597e79f9"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e2c76a4c3cee540ab4a1e46ad66ed91f110778cc", "author": {"user": {"login": "allanmoso", "name": "Allan Moso"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/e2c76a4c3cee540ab4a1e46ad66ed91f110778cc", "committedDate": "2020-10-21T18:35:23Z", "message": "Added missing javadoc for secretPrefix.\n\nSigned-off-by: Allan Moso <allan.moso@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE0MTU0NjA3", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/3849#pullrequestreview-514154607", "createdAt": "2020-10-21T20:21:28Z", "commit": {"oid": "e2c76a4c3cee540ab4a1e46ad66ed91f110778cc"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "738d5f3863c7e225352f53673d4d963b66588035", "author": {"user": {"login": "scholzj", "name": "Jakub Scholz"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/738d5f3863c7e225352f53673d4d963b66588035", "committedDate": "2020-10-22T12:38:15Z", "message": "Fix Javadoc\n\nSigned-off-by: Jakub Scholz <www@scholzj.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 838, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}