{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA1MDg1MzQ5", "number": 2850, "title": "Deflakiness of TO IT", "bodyText": "Signed-off-by: Stanislav Knot sknot@redhat.com\nType of change\n\nBugfix\n\nDescription\nAffected TO was flaky... The Kafka cluster was not closed sometimes because of NPE when unmapping files (https://issues.apache.org/jira/browse/KAFKA-8398). The Adminclient was sending request to wrong instance and thus the test was timeouting.\nUsing vertex instance for each test helps.\nChecklist\n\n Update/write design documentation in ./design\n Write tests\n Make sure all tests pass\n Update documentation\n Check RBAC rights for Kubernetes / OpenShift roles\n Try your changes from Pod inside your Kubernetes and OpenShift cluster, not just locally\n Reference relevant issue(s) and close them after merging\n Update CHANGELOG.md", "createdAt": "2020-04-17T11:44:39Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850", "merged": true, "mergeCommit": {"oid": "6db97c15cf61f278104396e579483037e93730bc"}, "closed": true, "closedAt": "2020-04-17T17:27:21Z", "author": {"login": "sknot-rh"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcYf9x0AH2gAyNDA1MDg1MzQ5OjdiNWJjODkwNzE4YzdjOTA4YjE0YWUzZDBlYWIyMDBkOWNiNjI5Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcZaCd-gFqTM5NjIwNjEwNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7b5bc890718c7c908b14ae3d0eab200d9cb62928", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7b5bc890718c7c908b14ae3d0eab200d9cb62928", "committedDate": "2020-04-17T11:54:48Z", "message": "Deflakines of TO IT\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c57ce6c5443660cb7c2c078ed87b8898ce49716d", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c57ce6c5443660cb7c2c078ed87b8898ce49716d", "committedDate": "2020-04-17T11:40:48Z", "message": "Deflakines of TO IT\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "7b5bc890718c7c908b14ae3d0eab200d9cb62928", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/7b5bc890718c7c908b14ae3d0eab200d9cb62928", "committedDate": "2020-04-17T11:54:48Z", "message": "Deflakines of TO IT\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDE3Mjg2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-395417286", "createdAt": "2020-04-17T12:40:20Z", "commit": {"oid": "7b5bc890718c7c908b14ae3d0eab200d9cb62928"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDI1Mjcz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-395425273", "createdAt": "2020-04-17T12:52:04Z", "commit": {"oid": "7b5bc890718c7c908b14ae3d0eab200d9cb62928"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMjo1MjowNFrOGHMsRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMjo1MjowNFrOGHMsRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDIwMTE1OQ==", "bodyText": "To reviewers: Github diff might seem like a mess. Basically it is just moving vertx instantiation from BrforeAll to BeforeEach (similarly with closing it).", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#discussion_r410201159", "createdAt": "2020-04-17T12:52:04Z", "author": {"login": "sknot-rh"}, "path": "topic-operator/src/test/java/io/strimzi/operator/topic/TopicOperatorMockTest.java", "diffHunk": "@@ -67,22 +65,14 @@\n \n     // TODO this is all in common with TOIT, so factor out a common base class\n \n-    @BeforeAll\n-    public static void before() {\n+    @BeforeEach", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7b5bc890718c7c908b14ae3d0eab200d9cb62928"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c52c7bf5b3ed869a8311f89e2d9af88abdedbd0f", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c52c7bf5b3ed869a8311f89e2d9af88abdedbd0f", "committedDate": "2020-04-17T13:30:11Z", "message": "wait for undeploy\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6340b0fde3525b71bcf4cb2131d7763f4d345ea8", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/6340b0fde3525b71bcf4cb2131d7763f4d345ea8", "committedDate": "2020-04-17T13:29:23Z", "message": "wait for undeploy\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "c52c7bf5b3ed869a8311f89e2d9af88abdedbd0f", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c52c7bf5b3ed869a8311f89e2d9af88abdedbd0f", "committedDate": "2020-04-17T13:30:11Z", "message": "wait for undeploy\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "146a005b90fdb17f4e4ac101afe6136930bedb77", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/146a005b90fdb17f4e4ac101afe6136930bedb77", "committedDate": "2020-04-17T13:32:11Z", "message": "enable test on travis\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89c40c23e0f4f23280468f72f6173daa31b50bae", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/89c40c23e0f4f23280468f72f6173daa31b50bae", "committedDate": "2020-04-17T13:56:52Z", "message": "real waiting\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c8938222082de366344e746597d77374701054fe", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/c8938222082de366344e746597d77374701054fe", "committedDate": "2020-04-17T13:35:36Z", "message": "real waiting\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}, "afterCommit": {"oid": "89c40c23e0f4f23280468f72f6173daa31b50bae", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/89c40c23e0f4f23280468f72f6173daa31b50bae", "committedDate": "2020-04-17T13:56:52Z", "message": "real waiting\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NDc3NjIy", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-395477622", "createdAt": "2020-04-17T13:58:05Z", "commit": {"oid": "c8938222082de366344e746597d77374701054fe"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzo1ODoyN1rOGHPI0Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xN1QxMzo1ODoyN1rOGHPI0Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMDI0MTIzMw==", "bodyText": "Not even a suggested change, but context.checkpoint() calls context.checkpoint(1) and generally in the rest of the code we have been calling the argument-less call. But that aside this looks like a good change to me.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#discussion_r410241233", "createdAt": "2020-04-17T13:58:27Z", "author": {"login": "samuel-hawker"}, "path": "topic-operator/src/test/java/io/strimzi/operator/topic/TopicOperatorMockTest.java", "diffHunk": "@@ -138,15 +136,18 @@ public void createMockKube(VertxTestContext context) throws Exception {\n     }\n \n     @AfterEach\n-    public void tearDown() {\n+    public void tearDown(VertxTestContext context) {\n+        Checkpoint checkpoint = context.checkpoint(1);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89c40c23e0f4f23280468f72f6173daa31b50bae"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NTM1OTIz", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-395535923", "createdAt": "2020-04-17T15:06:02Z", "commit": {"oid": "89c40c23e0f4f23280468f72f6173daa31b50bae"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f3880c062cc4c12d1c7dee317871607c2ca973a1", "author": {"user": {"login": "sknot-rh", "name": "Stanislav Knot"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/f3880c062cc4c12d1c7dee317871607c2ca973a1", "committedDate": "2020-04-17T15:11:16Z", "message": "suggestion\n\nSigned-off-by: Stanislav Knot <sknot@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk1NTgzMzYw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-395583360", "createdAt": "2020-04-17T16:04:58Z", "commit": {"oid": "f3880c062cc4c12d1c7dee317871607c2ca973a1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk2MjA2MTA0", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2850#pullrequestreview-396206104", "createdAt": "2020-04-20T07:34:25Z", "commit": {"oid": "f3880c062cc4c12d1c7dee317871607c2ca973a1"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1891, "cost": 1, "resetAt": "2021-10-28T19:08:13Z"}}}