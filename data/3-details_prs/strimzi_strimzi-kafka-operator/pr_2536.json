{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzczNjU1ODkx", "number": 2536, "title": "ST: Improve checks for nodeport status", "bodyText": "Type of change\n\nEnhancement / new feature\n\nDescription\nThis PR add test coverage for  #2355.\ntestNodePort now contains check, for retrieve Kafka status with nodePort information and compare it with kubernetes node IP. Tested on multinode kube cluster and on oc cluster up.\nChecklist\n\n Write tests\n Make sure all tests pass", "createdAt": "2020-02-11T13:23:09Z", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536", "merged": true, "mergeCommit": {"oid": "1d6645021d65585b3dc1c6e7323174d8768401e5"}, "closed": true, "closedAt": "2020-02-20T09:55:34Z", "author": {"login": "Frawless"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcDSMImAFqTM1NjY3NjMzMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFSj7JAFqTM1OTkzNDU4Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2Njc2MzMw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536#pullrequestreview-356676330", "createdAt": "2020-02-11T13:59:24Z", "commit": {"oid": "741e9fac01f04349ad7f6cdaa155b7e3436cde41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU3Mjc5NzA5", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536#pullrequestreview-357279709", "createdAt": "2020-02-12T08:58:42Z", "commit": {"oid": "741e9fac01f04349ad7f6cdaa155b7e3436cde41"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU4NTkzMjgw", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536#pullrequestreview-358593280", "createdAt": "2020-02-13T22:19:04Z", "commit": {"oid": "741e9fac01f04349ad7f6cdaa155b7e3436cde41"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoxOTowNFrOFplkFQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xM1QyMjoxOTowNFrOFplkFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3OTE1MTM4MQ==", "bodyText": "You check if it has external listener but not the type. That is a bit weird. Either you expect the resource above and you do not need to check for any of them or you should check for both of them, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536#discussion_r379151381", "createdAt": "2020-02-13T22:19:04Z", "author": {"login": "scholzj"}, "path": "systemtest/src/test/java/io/strimzi/systemtest/KafkaST.java", "diffHunk": "@@ -1035,6 +1039,31 @@ void testNodePort() throws Exception {\n             .done();\n \n         kafkaClient.sendAndRecvMessages(NAMESPACE);\n+\n+        // Check that Kafka status has correct addresses in NodePort external listener part\n+        for (ListenerStatus listenerStatus : KafkaResource.getKafkaStatus(CLUSTER_NAME, NAMESPACE).getListeners()) {\n+            if (listenerStatus.getType().equals(\"external\")) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "741e9fac01f04349ad7f6cdaa155b7e3436cde41"}, "originalPosition": 52}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "eb0a951e0025394f8d41b6177c646488ece4a17c", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/eb0a951e0025394f8d41b6177c646488ece4a17c", "committedDate": "2020-02-17T08:40:07Z", "message": "Add check to testNodePort to see if status of Kafka is set properly with node addresses\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1901dac43042f3474303846a55f1445d6a4d003f", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/1901dac43042f3474303846a55f1445d6a4d003f", "committedDate": "2020-02-17T08:40:10Z", "message": "Checkstyle fixups\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "571b0da62eea6def7ce4bc0d5a78075d5ab24f81", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/571b0da62eea6def7ce4bc0d5a78075d5ab24f81", "committedDate": "2020-02-17T09:45:15Z", "message": "Change the way how to collect node address for comparison with status\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "741e9fac01f04349ad7f6cdaa155b7e3436cde41", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/741e9fac01f04349ad7f6cdaa155b7e3436cde41", "committedDate": "2020-02-11T13:18:14Z", "message": "Checkstyle fixups\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}, "afterCommit": {"oid": "571b0da62eea6def7ce4bc0d5a78075d5ab24f81", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/571b0da62eea6def7ce4bc0d5a78075d5ab24f81", "committedDate": "2020-02-17T09:45:15Z", "message": "Change the way how to collect node address for comparison with status\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fd1f3b3ee0b38963b7b96df3be6695f2fa04eca0", "author": {"user": {"login": "Frawless", "name": "Jakub Stejskal"}}, "url": "https://github.com/strimzi/strimzi-kafka-operator/commit/fd1f3b3ee0b38963b7b96df3be6695f2fa04eca0", "committedDate": "2020-02-17T09:57:03Z", "message": "fixup! Change the way how to collect node address for comparison with status\n\nSigned-off-by: Jakub Stejskal <xstejs24@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU5OTM0NTg2", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2536#pullrequestreview-359934586", "createdAt": "2020-02-17T19:33:14Z", "commit": {"oid": "fd1f3b3ee0b38963b7b96df3be6695f2fa04eca0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1705, "cost": 1, "resetAt": "2021-10-28T20:13:43Z"}}}