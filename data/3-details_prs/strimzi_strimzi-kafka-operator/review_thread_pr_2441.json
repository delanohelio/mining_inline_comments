{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1OTE5ODU1", "number": 2441, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjowNToyMlrODZ_dlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzozODoxMlrODbqQFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NTgwNzU5OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQyMjowNToyMlrOFgsnTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwODo0ODo1OVrOFg2evw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyOTcxMQ==", "bodyText": "In a recent email discussion @tombentley pointed out that it can have more values than just tls which can help to reduce the output to only handshake for example. So I think this should be string and should be called javaxNetDebug maybe?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r369829711", "createdAt": "2020-01-22T22:05:22Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private boolean tlsDebugEnabled = false;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4db2e5a03e259956d71ccd56d02c7922551a5057"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk1ODE5OQ==", "bodyText": "Do we want also some enum of valid values?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r369958199", "createdAt": "2020-01-23T07:07:50Z", "author": {"login": "sknot-rh"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private boolean tlsDebugEnabled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyOTcxMQ=="}, "originalCommit": {"oid": "4db2e5a03e259956d71ccd56d02c7922551a5057"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk3NDI3Ng==", "bodyText": "@tombentley WDYT? I think Strimzi might be ok, or?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r369974276", "createdAt": "2020-01-23T08:03:21Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private boolean tlsDebugEnabled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyOTcxMQ=="}, "originalCommit": {"oid": "4db2e5a03e259956d71ccd56d02c7922551a5057"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk4ODgwMA==", "bodyText": "I wonder whether this is the right approach for enabling TLS debugging. All we're really doing here is setting a system property. It seem to me that sooner or later someone will come up with some other system property which needs to be set, and then we'll need a PR etc specifically for that. The alternative would be allowing a Map<String, String> systemProperties (or a List<SystemProperty> where SystemProperty is just a name, value pair) which would let the user set any system properties they liked.\nIn any case, I think a String value is fine.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r369988800", "createdAt": "2020-01-23T08:43:06Z", "author": {"login": "tombentley"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private boolean tlsDebugEnabled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyOTcxMQ=="}, "originalCommit": {"oid": "4db2e5a03e259956d71ccd56d02c7922551a5057"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTk5MTM1OQ==", "bodyText": "I guess a map systemProperties would make sense as well. I'm fine with both.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r369991359", "createdAt": "2020-01-23T08:48:59Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private boolean tlsDebugEnabled = false;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTgyOTcxMQ=="}, "originalCommit": {"oid": "4db2e5a03e259956d71ccd56d02c7922551a5057"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTYzMjc4OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo1NjowOVrOFiH1XQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwOToxMDoxNlrOFidh0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyNDI1Mw==", "bodyText": "Do we need it to be Map<String, Object>? Would Map<String, String> be enough? What objects do we expect? Like list? Maps?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371324253", "createdAt": "2020-01-27T15:56:09Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private Map<String, Object> javaSystemProperties;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66e69cf759d92b8707f1d380aaeef91658890412"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3MDUzNg==", "bodyText": "I was thinking about numeric data (int, float)", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371670536", "createdAt": "2020-01-28T08:50:43Z", "author": {"login": "sknot-rh"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private Map<String, Object> javaSystemProperties;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyNDI1Mw=="}, "originalCommit": {"oid": "66e69cf759d92b8707f1d380aaeef91658890412"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3OTY5OA==", "bodyText": "I would stick with <String, String>, because that's what I always think of system properties as (and that's how they're exposed in the Java API).", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371679698", "createdAt": "2020-01-28T09:10:16Z", "author": {"login": "tombentley"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -33,6 +33,7 @@\n     private String xms;\n     private Boolean server;\n     private boolean gcLoggingEnabled = false;\n+    private Map<String, Object> javaSystemProperties;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyNDI1Mw=="}, "originalCommit": {"oid": "66e69cf759d92b8707f1d380aaeef91658890412"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTYzNjIwOnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo1Njo1N1rOFiH3hQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo1Njo1N1rOFiH3hQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyNDgwNQ==", "bodyText": "Would this sound better and and be more understandable?\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                @Description(\"A map of -D options to the JVM.\")\n          \n          \n            \n                @Description(\"A map of additional system properties which will be passed using the `-D` option to the JVM.\")", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371324805", "createdAt": "2020-01-27T15:56:57Z", "author": {"login": "scholzj"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/JvmOptions.java", "diffHunk": "@@ -77,6 +78,15 @@ public void setGcLoggingEnabled(boolean gcLoggingEnabled) {\n         this.gcLoggingEnabled = gcLoggingEnabled;\n     }\n \n+    @Description(\"A map of -D options to the JVM.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66e69cf759d92b8707f1d380aaeef91658890412"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5NTY0NTAyOnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBridgeCluster.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo1OTowNlrOFiH9CQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo1OTowNlrOFiH9CQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyNjIxNw==", "bodyText": "What do you expect to be in the default options? Also, if we ever use it in the future, I would expect that it should be merged rather than one or another. For one or another, we should use one of the other environment variables.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371326217", "createdAt": "2020-01-27T15:59:06Z", "author": {"login": "scholzj"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/KafkaBridgeCluster.java", "diffHunk": "@@ -145,6 +145,7 @@ public static KafkaBridgeCluster fromCrd(KafkaBridge kafkaBridge, KafkaVersion.L\n         kafkaBridgeCluster.setResources(spec.getResources());\n         kafkaBridgeCluster.setLogging(spec.getLogging());\n         kafkaBridgeCluster.setGcLoggingEnabled(spec.getJvmOptions() == null ? DEFAULT_JVM_GC_LOGGING_ENABLED : spec.getJvmOptions().isGcLoggingEnabled());\n+        kafkaBridgeCluster.setJavaSystemProperties(spec.getJvmOptions() == null ? DEFAULT_JAVA_SYSTEM_PROPERTIES : spec.getJvmOptions().getJavaSystemProperties());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66e69cf759d92b8707f1d380aaeef91658890412"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5ODQzMDQ3OnYy", "diffSide": "RIGHT", "path": "helm-charts/strimzi-kafka-operator/templates/040-Crd-kafka.yaml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMjowMzoyNlrOFiikBA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxMjowMzoyNlrOFiikBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTc2MjE4MA==", "bodyText": "Is this really the json schema we want? At the json level values are not constrained to strings, so I suspect it leaves us vulnerable to either a deserialization exception or CCE. And it's not self describing. Perhaps it would be better to use a List<SystemProperty> at the Java level, so have a self-describing json schema here?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r371762180", "createdAt": "2020-01-28T12:03:26Z", "author": {"login": "tombentley"}, "path": "helm-charts/strimzi-kafka-operator/templates/040-Crd-kafka.yaml", "diffHunk": "@@ -841,6 +841,8 @@ spec:\n                       pattern: '[0-9]+[mMgG]?'\n                     gcLoggingEnabled:\n                       type: boolean\n+                    javaSystemProperties:\n+                      type: object", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "06860ddd0a99b6641794b917a10d42245e8229b2"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzI5NTA5OnYy", "diffSide": "RIGHT", "path": "api/src/main/java/io/strimzi/api/kafka/model/SystemProperty.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzozNToyN1rOFjRT6w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzozNToyN1rOFjRT6w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyODEwNw==", "bodyText": "why don't say \"name\" instead of \"key\"?", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r372528107", "createdAt": "2020-01-29T17:35:27Z", "author": {"login": "ppatierno"}, "path": "api/src/main/java/io/strimzi/api/kafka/model/SystemProperty.java", "diffHunk": "@@ -0,0 +1,63 @@\n+/*\n+ * Copyright Strimzi authors.\n+ * License: Apache License 2.0 (see the file LICENSE or http://apache.org/licenses/LICENSE-2.0.html).\n+ */\n+\n+package io.strimzi.api.kafka.model;\n+\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import io.strimzi.crdgenerator.annotations.Description;\n+import io.sundr.builder.annotations.Buildable;\n+import lombok.EqualsAndHashCode;\n+\n+import java.io.Serializable;\n+import java.util.HashMap;\n+import java.util.Map;\n+\n+/**\n+ * Representation for SystemProperty variables for Strimzi containers.\n+ */\n+@Buildable(\n+        editableEnabled = false,\n+        generateBuilderPackage = false,\n+        builderPackage = \"io.fabric8.kubernetes.api.builder\"\n+)\n+@JsonInclude(JsonInclude.Include.NON_DEFAULT)\n+@EqualsAndHashCode\n+public class SystemProperty implements UnknownPropertyPreserving, Serializable {\n+\n+    private static final long serialVersionUID = 1L;\n+\n+    private String name;\n+    private String value;\n+    private Map<String, Object> additionalProperties = new HashMap<>(0);\n+\n+    @Description(\"The system property key.\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d2185c65e162eb0f4acf98e82e84511781da4a3"}, "originalPosition": 35}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMzMwMzkwOnYy", "diffSide": "RIGHT", "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/AbstractModel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzozODoxMlrOFjRZew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNzozODoxMlrOFjRZew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjUyOTUzMQ==", "bodyText": "because you are passing the javaSystemProperties this method could be static but I think we are using the ModelUtils class for this kind of things so maybe we should move the method there.", "url": "https://github.com/strimzi/strimzi-kafka-operator/pull/2441#discussion_r372529531", "createdAt": "2020-01-29T17:38:12Z", "author": {"login": "ppatierno"}, "path": "cluster-operator/src/main/java/io/strimzi/operator/cluster/model/AbstractModel.java", "diffHunk": "@@ -1284,4 +1291,15 @@ protected void addContainerEnvsToExistingEnvs(List<EnvVar> existingEnvs, List<Co\n             }\n         }\n     }\n+\n+    protected String getJavaSystemPropertiesToString(List<SystemProperty> javaSystemProperties) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1d2185c65e162eb0f4acf98e82e84511781da4a3"}, "originalPosition": 40}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 655, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}