{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyMDM2NDg2", "number": 1734, "title": "fix BETWEEN operator; ensure task cancellation when terminating workflow", "bodyText": "Fix BETWEEN operator\nFix the parsing of the operator\n\n\nEnsure task is cancelled when terminating a workflow\nRemove tasks from the queue first so that polling for tasks will not retrieve these\nUpdate task status to CANCELED\nUpdate workflow status to TERMINATED", "createdAt": "2020-06-09T20:08:37Z", "url": "https://github.com/Netflix/conductor/pull/1734", "merged": true, "mergeCommit": {"oid": "0d4e09af6f9f1546c7f9e13d935ead9bbac323af"}, "closed": true, "closedAt": "2020-06-11T00:40:46Z", "author": {"login": "apanicker-nflx"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpvCcVgBqjM0MjczODE2OTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqCqZMgFqTQyODUwNTAwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4c0763852659c4fd0183828d8e2258ddae37bc3d", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/4c0763852659c4fd0183828d8e2258ddae37bc3d", "committedDate": "2020-06-09T20:08:13Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}, "afterCommit": {"oid": "be7b86478ca22fd547053d50e37c166d93f9ba6b", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/be7b86478ca22fd547053d50e37c166d93f9ba6b", "committedDate": "2020-06-10T01:04:58Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "be7b86478ca22fd547053d50e37c166d93f9ba6b", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/be7b86478ca22fd547053d50e37c166d93f9ba6b", "committedDate": "2020-06-10T01:04:58Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}, "afterCommit": {"oid": "22a7821069cd05ff155f078bea4a5ca09270cf89", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/22a7821069cd05ff155f078bea4a5ca09270cf89", "committedDate": "2020-06-10T01:36:13Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI3NjU5OTU5", "url": "https://github.com/Netflix/conductor/pull/1734#pullrequestreview-427659959", "createdAt": "2020-06-10T01:58:56Z", "commit": {"oid": "22a7821069cd05ff155f078bea4a5ca09270cf89"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1ODo1NlrOGhiPlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwMTo1ODo1NlrOGhiPlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzgxNzIzOQ==", "bodyText": "Couple of things:\n\nNow that we're not checking length of peeked, could it possibly throw ArrayIndexOutOfBounds exception?\nGiven that STARTS_WITH below still checks with String equals, what was the case for checking each character by element?", "url": "https://github.com/Netflix/conductor/pull/1734#discussion_r437817239", "createdAt": "2020-06-10T01:58:56Z", "author": {"login": "kishorebanala"}, "path": "es5-persistence/src/main/java/com/netflix/conductor/elasticsearch/query/parser/ComparisonOp.java", "diffHunk": "@@ -70,7 +62,7 @@ protected void _parse() throws Exception {\n \t\t\tthis.value = \"IS\";\n \t\t}else if(peeked[0] == '!' && peeked[1] == '='){\n \t\t\tthis.value = \"!=\";\n-\t\t}else if(peeked.length == betwnLen && new String(peeked).equals(Operators.BETWEEN.value())) {\n+\t\t}else if(peeked[0] == 'B' && peeked[1] == 'E' && peeked[2] == 'T' && peeked[3] == 'W' && peeked[4] == 'E' && peeked[5] == 'E' && peeked[6] == 'N'){", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "22a7821069cd05ff155f078bea4a5ca09270cf89"}, "originalPosition": 57}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "22a7821069cd05ff155f078bea4a5ca09270cf89", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/22a7821069cd05ff155f078bea4a5ca09270cf89", "committedDate": "2020-06-10T01:36:13Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}, "afterCommit": {"oid": "c627e2fd1487965e639840ee9b12a993783d1ff6", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/c627e2fd1487965e639840ee9b12a993783d1ff6", "committedDate": "2020-06-10T02:10:42Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9df9e2bf6b78bff53d9d87ebddbf8f9597e5597e", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/9df9e2bf6b78bff53d9d87ebddbf8f9597e5597e", "committedDate": "2020-06-10T20:21:12Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c627e2fd1487965e639840ee9b12a993783d1ff6", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/c627e2fd1487965e639840ee9b12a993783d1ff6", "committedDate": "2020-06-10T02:10:42Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}, "afterCommit": {"oid": "9df9e2bf6b78bff53d9d87ebddbf8f9597e5597e", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/9df9e2bf6b78bff53d9d87ebddbf8f9597e5597e", "committedDate": "2020-06-10T20:21:12Z", "message": "fix BETWEEN operator; ensure task cancellation when terminating workflow"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4NTA1MDAw", "url": "https://github.com/Netflix/conductor/pull/1734#pullrequestreview-428505000", "createdAt": "2020-06-10T23:57:01Z", "commit": {"oid": "9df9e2bf6b78bff53d9d87ebddbf8f9597e5597e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 808, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}