{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNjk1NTQ1", "number": 1976, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMDoxNlrOE7Iydw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMToyMVrOE7I0jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNDQ1NDMxOnYy", "diffSide": "RIGHT", "path": "client/go/conductorhttpclient.go", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMDoxNlrOH2nDBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToyMjowOVrOH3ldig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNDkwMw==", "bodyText": "Suggestion: Can we remove this log statement? It will create noise in logs.", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r527024903", "createdAt": "2020-11-19T16:30:16Z", "author": {"login": "rmohta"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -192,7 +192,13 @@ func (c *ConductorHttpClient) PollForTask(taskType string, workerid string, doma\n     url := c.httpClient.MakeUrl(\"/tasks/poll/{taskType}\", \"{taskType}\", taskType)\n     params := map[string]string{\n         \"workerid\": workerid,\n-        \"domain\":   domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Polling for task with domain: \", domain, \"taskType: \", taskType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NzQ5OA==", "bodyText": "Done", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r528047498", "createdAt": "2020-11-21T01:22:09Z", "author": {"login": "djcass44"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -192,7 +192,13 @@ func (c *ConductorHttpClient) PollForTask(taskType string, workerid string, doma\n     url := c.httpClient.MakeUrl(\"/tasks/poll/{taskType}\", \"{taskType}\", taskType)\n     params := map[string]string{\n         \"workerid\": workerid,\n-        \"domain\":   domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Polling for task with domain: \", domain, \"taskType: \", taskType)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNDkwMw=="}, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMwNDQ1OTY2OnYy", "diffSide": "RIGHT", "path": "client/go/conductorhttpclient.go", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMToyMVrOH2nGTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yMVQwMToyMjoyMFrOH3ldpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNTc0Mw==", "bodyText": "Suggestion: Can we remove this log statement?", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r527025743", "createdAt": "2020-11-19T16:31:21Z", "author": {"login": "rmohta"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -207,7 +213,13 @@ func (c *ConductorHttpClient) AckTask(taskId, workerid, domain string) (string,\n     url := c.httpClient.MakeUrl(\"/tasks/{taskId}/ack\", \"{taskId}\", taskId)\n     params := map[string]string{\n         \"workerid\": workerid,\n-\t\"domain\": domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Acking task with domain: \", domain, \"taskid: \", taskId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyODA0NzUyNw==", "bodyText": "Done", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r528047527", "createdAt": "2020-11-21T01:22:20Z", "author": {"login": "djcass44"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -207,7 +213,13 @@ func (c *ConductorHttpClient) AckTask(taskId, workerid, domain string) (string,\n     url := c.httpClient.MakeUrl(\"/tasks/{taskId}/ack\", \"{taskId}\", taskId)\n     params := map[string]string{\n         \"workerid\": workerid,\n-\t\"domain\": domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Acking task with domain: \", domain, \"taskid: \", taskId)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNTc0Mw=="}, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 23}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4141, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}