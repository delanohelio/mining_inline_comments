{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAwOTY3MTE0", "number": 1630, "title": "tasklog limit - allow more than 10 entries", "bodyText": "When query elasticsearch if size is not specified ES server will serve only 10 first entries by default, this caused lost of task_log on conductor-ui\nAssuming we have lots of task logs entries:\nTASK_ID=$1\n\nfor i in {1..20};\ndo curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' \"http://localhost:9000/api/tasks/$1/log\" -d \"$i\";\ndone\n\nCurrently we can only see:\n\nAfter the change, started with task_elasticsearch_query_size=20\ndocker run --rm --name conductor -p 9000:8080 -p 5000:5000  -edb=memory -eworkflow.elasticsearch.instanceType=memory -etask_elasticsearch_query_size=20 s50600822/conductor:all-tasklog-limit-4", "createdAt": "2020-04-08T16:56:48Z", "url": "https://github.com/Netflix/conductor/pull/1630", "merged": true, "mergeCommit": {"oid": "a63603cc6ff95a1bb0761738f787a5b39a5d0615"}, "closed": true, "closedAt": "2020-05-11T23:47:11Z", "author": {"login": "s50600822"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcVqndIAH2gAyNDAwOTY3MTE0OjI2NGFkYTNjYmE0OTA3MTg1MTVhMjk3NzVlNjE2N2Y1NjliNTNiMmI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcgYh-_AFqTQwOTYwNjAxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "264ada3cba490718515a29775e6167f569b53b2b", "author": {"user": {"login": "s50600822", "name": "HOA PHAN"}}, "url": "https://github.com/Netflix/conductor/commit/264ada3cba490718515a29775e6167f569b53b2b", "committedDate": "2020-04-08T16:37:36Z", "message": "tasklog limit - allow more than 10"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzMjUxMzgz", "url": "https://github.com/Netflix/conductor/pull/1630#pullrequestreview-393251383", "createdAt": "2020-04-14T19:59:53Z", "commit": {"oid": "264ada3cba490718515a29775e6167f569b53b2b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxOTo1OTo1M1rOGFetfw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxOTo1OTo1M1rOGFetfw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODM5OTIzMQ==", "bodyText": "could be renamed to tasklog.elasticsearch.query.size for clarity.", "url": "https://github.com/Netflix/conductor/pull/1630#discussion_r408399231", "createdAt": "2020-04-14T19:59:53Z", "author": {"login": "apanicker-nflx"}, "path": "es5-persistence/src/main/java/com/netflix/conductor/elasticsearch/ElasticSearchConfiguration.java", "diffHunk": "@@ -76,6 +76,9 @@\n     String ELASTIC_SEARCH_INDEX_REPLICAS_COUNT_PROPERTY_NAME = \"workflow.elasticsearch.index.replicas.count\";\n     int ELASTIC_SEARCH_INDEX_REPLICAS_COUNT_DEFAULT_VALUE = 1;\n \n+    String ELASTIC_SEARCH_TASK_LOG_RESULT_LIMIT = \"task.elasticsearch.query.size\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "264ada3cba490718515a29775e6167f569b53b2b"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7190cbbca7e45c553e1d413b0565d28f1d333701", "author": {"user": {"login": "s50600822", "name": "HOA PHAN"}}, "url": "https://github.com/Netflix/conductor/commit/7190cbbca7e45c553e1d413b0565d28f1d333701", "committedDate": "2020-04-27T22:43:03Z", "message": "rename key for clarity"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9d35527f4e69395dc0ea6f5891dde8d8a981c4c1", "author": {"user": {"login": "s50600822", "name": "HOA PHAN"}}, "url": "https://github.com/Netflix/conductor/commit/9d35527f4e69395dc0ea6f5891dde8d8a981c4c1", "committedDate": "2020-05-02T22:13:19Z", "message": "apply task log limit for ES6"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5NjA2MDEw", "url": "https://github.com/Netflix/conductor/pull/1630#pullrequestreview-409606010", "createdAt": "2020-05-11T23:46:30Z", "commit": {"oid": "9d35527f4e69395dc0ea6f5891dde8d8a981c4c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 754, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}