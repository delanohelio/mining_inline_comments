{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0MTA5MDIy", "number": 1996, "title": "Added GitHub Actions", "bodyText": "Added CI workflow\nAdded Release Drafter workflow (disabled, for now)\nIssue triage workflow\nPR triage workflow\nStale issues/PRs workflow\nUpdate gradle wrapper workflow\nUsed test-containers for HTTP task test server", "createdAt": "2020-12-08T04:23:30Z", "url": "https://github.com/Netflix/conductor/pull/1996", "merged": true, "mergeCommit": {"oid": "25d503fb9de1a3d1c3ad9964b2a6896785de5392"}, "closed": true, "closedAt": "2021-04-06T00:11:38Z", "author": {"login": "apanicker-nflx"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkTcc_gBqjQwODczNDAxOTY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABeKQEbegFqTYyODE4OTgxNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c995fd0790c70f792bacbdbf8bd2529a5d57fc43", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/c995fd0790c70f792bacbdbf8bd2529a5d57fc43", "committedDate": "2020-12-08T19:54:39Z", "message": "fix branch name"}, "afterCommit": {"oid": "b60959df0e11973449c46deb6bd5100b2c702efe", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/b60959df0e11973449c46deb6bd5100b2c702efe", "committedDate": "2020-12-09T00:17:35Z", "message": "added workflow status badge to readme;\nless verbose travis builds"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a905ef7645d0384bed5ccef078f9c54b26550d28", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/a905ef7645d0384bed5ccef078f9c54b26550d28", "committedDate": "2020-12-09T01:44:38Z", "message": "added project management workflow"}, "afterCommit": {"oid": "a7ca856ea27599ffe7b267c0d49c1009750d5301", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/a7ca856ea27599ffe7b267c0d49c1009750d5301", "committedDate": "2020-12-09T01:53:50Z", "message": "added project management workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7ca856ea27599ffe7b267c0d49c1009750d5301", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/a7ca856ea27599ffe7b267c0d49c1009750d5301", "committedDate": "2020-12-09T01:53:50Z", "message": "added project management workflow"}, "afterCommit": {"oid": "03d4d8e54b63dd8cbc7b186820f3c0accf8b7ad7", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/03d4d8e54b63dd8cbc7b186820f3c0accf8b7ad7", "committedDate": "2021-03-16T23:46:36Z", "message": "enable tests in workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7d394b124c49d9cf802a3422c6408631cf080f2b", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/7d394b124c49d9cf802a3422c6408631cf080f2b", "committedDate": "2021-03-18T00:28:08Z", "message": "use testcontainer for http test"}, "afterCommit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/54bdad1ee600bbe02189249344c5489627cfe2f0", "committedDate": "2021-03-18T00:33:29Z", "message": "use testcontainer for http test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE0OTA1MTc0", "url": "https://github.com/Netflix/conductor/pull/1996#pullrequestreview-614905174", "createdAt": "2021-03-18T01:10:48Z", "commit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQwMToxMDo0OFrOI42jJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQwMToxMDo0OFrOI42jJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ4NDkwMA==", "bodyText": "Should this line be calling a modified version of buildViaTravis.sh? One that acts accordingly whether its a PR build, branch or release.", "url": "https://github.com/Netflix/conductor/pull/1996#discussion_r596484900", "createdAt": "2021-03-18T01:10:48Z", "author": {"login": "aravindanr"}, "path": ".github/workflows/ci.yml", "diffHunk": "@@ -0,0 +1,42 @@\n+# This workflow will build the project\n+\n+name: CI\n+\n+on:\n+  push:\n+    branches:\n+      - '3.0'\n+    tags:\n+      - v3.*\n+  pull_request:\n+    branches:\n+      - '3.0'\n+\n+  # Allow running this workflow manually from the Actions tab\n+  workflow_dispatch:\n+\n+jobs:\n+  build:\n+    # The type of runner that the job will run on\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - uses: actions/checkout@v2\n+        with:\n+          ref: ${{ github.event.pull_request.head.sha }}\n+      - name: Gradle wrapper validation\n+        uses: gradle/wrapper-validation-action@v1\n+      - name: Set up JDK 1.8\n+        uses: actions/setup-java@v1\n+        with:\n+          java-version: 1.8\n+      - name: Cache Gradle packages\n+        uses: actions/cache@v2\n+        with:\n+          path: ~/.gradle/caches\n+          key: ${{ runner.os }}-gradle-${{ hashFiles('**/*.gradle*', '**/gradle-wrapper.properties') }}\n+          restore-keys: ${{ runner.os }}-gradle\n+      - name: Build with Gradle\n+        run: |\n+          echo \"Running build for commit ${{ github.sha }} in ${{ github.head_ref }}\"\n+          ./gradlew build -x javadoc", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0"}, "originalPosition": 42}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjE0OTA1ODIz", "url": "https://github.com/Netflix/conductor/pull/1996#pullrequestreview-614905823", "createdAt": "2021-03-18T01:12:45Z", "commit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQwMToxMjo0NVrOI42lJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMy0xOFQwMToxMjo0NVrOI42lJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU5NjQ4NTQxMg==", "bodyText": "This is not needed. @ClassRule takes care of destroying the docker container.", "url": "https://github.com/Netflix/conductor/pull/1996#discussion_r596485412", "createdAt": "2021-03-18T01:12:45Z", "author": {"login": "aravindanr"}, "path": "contribs/src/test/java/com/netflix/conductor/contribs/tasks/http/HttpTaskTest.java", "diffHunk": "@@ -77,18 +77,62 @@ public static void init() throws Exception {\n         map.put(\"SomeKey\", null);\n         JSON_RESPONSE = objectMapper.writeValueAsString(map);\n \n-        server = new Server(7009);\n-        ServletContextHandler servletContextHandler = new ServletContextHandler(server, \"/\",\n-            ServletContextHandler.SESSIONS);\n-        servletContextHandler.setHandler(new EchoHandler());\n-        server.start();\n+        final TypeReference<Map<String, Object>> mapOfObj = new TypeReference<Map<String, Object>>() {\n+        };\n+        MockServerClient client = new MockServerClient(mockServer.getHost(), mockServer.getServerPort());\n+        client.when(\n+            request()\n+                .withPath(\"/post\")\n+                .withMethod(\"POST\"))\n+            .respond(request -> {\n+                Map<String, Object> reqBody = objectMapper.readValue(request.getBody().toString(), mapOfObj);\n+                Set<String> keys = reqBody.keySet();\n+                Map<String, Object> respBody = new HashMap<>();\n+                keys.forEach(k -> respBody.put(k, k));\n+                return response()\n+                    .withContentType(MediaType.APPLICATION_JSON)\n+                    .withBody(objectMapper.writeValueAsString(respBody));\n+            });\n+        client.when(\n+            request()\n+                .withPath(\"/post2\")\n+                .withMethod(\"POST\"))\n+            .respond(response()\n+                .withStatusCode(204));\n+        client.when(\n+            request()\n+                .withPath(\"/failure\")\n+                .withMethod(\"GET\"))\n+            .respond(response()\n+                .withStatusCode(500)\n+                .withContentType(MediaType.TEXT_PLAIN)\n+                .withBody(ERROR_RESPONSE));\n+        client.when(\n+            request()\n+                .withPath(\"/text\")\n+                .withMethod(\"GET\"))\n+            .respond(response()\n+                .withBody(TEXT_RESPONSE));\n+        client.when(\n+            request()\n+                .withPath(\"/numeric\")\n+                .withMethod(\"GET\"))\n+            .respond(response()\n+                .withBody(String.valueOf(NUM_RESPONSE)));\n+        client.when(\n+            request()\n+                .withPath(\"/json\")\n+                .withMethod(\"GET\"))\n+            .respond(response()\n+                .withContentType(MediaType.APPLICATION_JSON)\n+                .withBody(JSON_RESPONSE));\n     }\n \n     @AfterClass\n     public static void cleanup() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0"}, "originalPosition": 133}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "54bdad1ee600bbe02189249344c5489627cfe2f0", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/54bdad1ee600bbe02189249344c5489627cfe2f0", "committedDate": "2021-03-18T00:33:29Z", "message": "use testcontainer for http test"}, "afterCommit": {"oid": "44a0d3673214bd4a8cee73a5bd6f95de222fd2de", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/44a0d3673214bd4a8cee73a5bd6f95de222fd2de", "committedDate": "2021-03-18T20:14:40Z", "message": "use testcontainer for http test"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "36ad782ce75595d7f91e2e7f011a17a724ea789e", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/36ad782ce75595d7f91e2e7f011a17a724ea789e", "committedDate": "2021-03-19T17:04:01Z", "message": "try to print more detail about failure"}, "afterCommit": {"oid": "fd4878c48dd5a3c39ebc98b48ab0912336021618", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/fd4878c48dd5a3c39ebc98b48ab0912336021618", "committedDate": "2021-03-30T19:14:26Z", "message": "try to print more detail about failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ac2ec7636aa2b153b25148faffbbf66a0510dff8", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/ac2ec7636aa2b153b25148faffbbf66a0510dff8", "committedDate": "2021-04-02T23:05:58Z", "message": "added CI workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "914d678ff1f74c042900a3ec297381367ea2cb4d", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/914d678ff1f74c042900a3ec297381367ea2cb4d", "committedDate": "2021-04-02T23:05:58Z", "message": "added workflow status badge to readme;less verbose travis builds"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2a591f3f282b6bb0129fa98c95ce3b40b026a5db", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/2a591f3f282b6bb0129fa98c95ce3b40b026a5db", "committedDate": "2021-04-02T23:05:58Z", "message": "upgrade gradle wrapper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af9fb701c431eba910c2302b9d233431ff0e03d1", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/af9fb701c431eba910c2302b9d233431ff0e03d1", "committedDate": "2021-04-02T23:05:58Z", "message": "use testcontainer for http test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ef072b5785a81248884215aef1cf37a06ac5b702", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/ef072b5785a81248884215aef1cf37a06ac5b702", "committedDate": "2021-04-02T23:05:58Z", "message": "try to print more detail about failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a34ce799b4422542950168bd69b56e1a390610", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/09a34ce799b4422542950168bd69b56e1a390610", "committedDate": "2021-04-02T23:05:58Z", "message": "added stale workflow"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebaef7d5f89869352b786a6e35a1f0f5a7507172", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/ebaef7d5f89869352b786a6e35a1f0f5a7507172", "committedDate": "2021-04-02T23:05:59Z", "message": "added gradle wrapper workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2dbe0606e40ff7342e0712021bf59e69b9d16ff7", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/2dbe0606e40ff7342e0712021bf59e69b9d16ff7", "committedDate": "2021-04-02T22:29:33Z", "message": "added gradle wrapper workflow"}, "afterCommit": {"oid": "ebaef7d5f89869352b786a6e35a1f0f5a7507172", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/ebaef7d5f89869352b786a6e35a1f0f5a7507172", "committedDate": "2021-04-02T23:05:59Z", "message": "added gradle wrapper workflow"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b7c59e26b6a8a1890376a46330219c0b111876c5", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/b7c59e26b6a8a1890376a46330219c0b111876c5", "committedDate": "2021-04-02T23:52:38Z", "message": "added release drafter"}, "afterCommit": {"oid": "aae2ed660e426585e7de4d981e5a3e9ad7762166", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/aae2ed660e426585e7de4d981e5a3e9ad7762166", "committedDate": "2021-04-03T05:20:30Z", "message": "added release drafter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "aae2ed660e426585e7de4d981e5a3e9ad7762166", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/aae2ed660e426585e7de4d981e5a3e9ad7762166", "committedDate": "2021-04-03T05:20:30Z", "message": "added release drafter"}, "afterCommit": {"oid": "79301145d474e10aebd1d36a740d4153025d8d47", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/79301145d474e10aebd1d36a740d4153025d8d47", "committedDate": "2021-04-03T06:03:27Z", "message": "added release drafter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f255f3f469775ebfef42a8011fef0f4e494f4cdc", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/f255f3f469775ebfef42a8011fef0f4e494f4cdc", "committedDate": "2021-04-03T06:43:53Z", "message": "added release drafter"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "79301145d474e10aebd1d36a740d4153025d8d47", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/79301145d474e10aebd1d36a740d4153025d8d47", "committedDate": "2021-04-03T06:03:27Z", "message": "added release drafter"}, "afterCommit": {"oid": "f255f3f469775ebfef42a8011fef0f4e494f4cdc", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/f255f3f469775ebfef42a8011fef0f4e494f4cdc", "committedDate": "2021-04-03T06:43:53Z", "message": "added release drafter"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64d6979fd873be0c0e1b23ec06af3b58c557370f", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/64d6979fd873be0c0e1b23ec06af3b58c557370f", "committedDate": "2021-04-05T18:51:05Z", "message": "added pull request template"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7fa0d779d00ed724122a64c2e565806ed13342da", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/7fa0d779d00ed724122a64c2e565806ed13342da", "committedDate": "2021-04-04T20:07:25Z", "message": "added pull request template"}, "afterCommit": {"oid": "64d6979fd873be0c0e1b23ec06af3b58c557370f", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/64d6979fd873be0c0e1b23ec06af3b58c557370f", "committedDate": "2021-04-05T18:51:05Z", "message": "added pull request template"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b8ec8cc01befb41955e46f7b75450067df0f7400", "author": {"user": {"login": "apanicker-nflx", "name": "Anoop Panicker"}}, "url": "https://github.com/Netflix/conductor/commit/b8ec8cc01befb41955e46f7b75450067df0f7400", "committedDate": "2021-04-05T21:03:40Z", "message": "updated CI status badge in ReadMe"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NjI4MTg5ODE1", "url": "https://github.com/Netflix/conductor/pull/1996#pullrequestreview-628189815", "createdAt": "2021-04-05T21:50:57Z", "commit": {"oid": "b8ec8cc01befb41955e46f7b75450067df0f7400"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 741, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}