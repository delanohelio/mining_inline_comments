{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5MjU4ODMz", "number": 1546, "title": "index all task updates, not just when workflows are in terminal state", "bodyText": "All task updates used to be indexed until async indexing was added in release 2.16.0. In order to accommodate async indexing, index requests were cached until it was time to commit their block. Since a system failure would mean that the uncommitted block(s) would be lost, it was determined to only index tasks when the workflow was set to terminal state (COMPLETED, FAILED, TERMINATED, etc).\nThis causes a problem for the /tasks/search API because not all tasks are returned, especially if they are in progress.\nThis pull request will index all task updates if async indexing is disabled; otherwise tasks will only be indexed when the workflows are put in terminal state.", "createdAt": "2020-02-24T22:15:25Z", "url": "https://github.com/Netflix/conductor/pull/1546", "merged": true, "mergeCommit": {"oid": "fa97e7d02de6a760dbe9054ad200e8a977639498"}, "closed": true, "closedAt": "2020-02-27T01:54:11Z", "author": {"login": "rickfish"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcHk1RHgH2gAyMzc5MjU4ODMzOjk1MzFjMDhjMzkyMzk2ZDM3YzVhZDU0YmYyYmRlMDFiZTJhOWQzZDc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIRZYRgFqTM2NTM2NzgzMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "9531c08c392396d37c5ad54bf2bde01be2a9d3d7", "author": {"user": null}, "url": "https://github.com/Netflix/conductor/commit/9531c08c392396d37c5ad54bf2bde01be2a9d3d7", "committedDate": "2020-02-24T21:58:19Z", "message": "index all task updates, not just when workflows are in terminal state"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NTU3MDQ1", "url": "https://github.com/Netflix/conductor/pull/1546#pullrequestreview-364557045", "createdAt": "2020-02-26T00:56:13Z", "commit": {"oid": "9531c08c392396d37c5ad54bf2bde01be2a9d3d7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMDo1NjoxM1rOFua0jQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwMDo1NjoxM1rOFua0jQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDIxODI1Mw==", "bodyText": "Can remove this comment section here since the comments below in updateTask covers this.", "url": "https://github.com/Netflix/conductor/pull/1546#discussion_r384218253", "createdAt": "2020-02-26T00:56:13Z", "author": {"login": "apanicker-nflx"}, "path": "core/src/main/java/com/netflix/conductor/core/orchestration/ExecutionDAOFacade.java", "diffHunk": "@@ -230,7 +230,11 @@ public String updateWorkflow(Workflow workflow) {\n                 workflow.getTasks().forEach(indexDAO::asyncIndexTask);\n             } else {\n                 indexDAO.indexWorkflow(workflow);\n-                workflow.getTasks().forEach(indexDAO::indexTask);\n+                /*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9531c08c392396d37c5ad54bf2bde01be2a9d3d7"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27ada4ae437c752d834c4960bc1417ec6e2d858d", "author": {"user": null}, "url": "https://github.com/Netflix/conductor/commit/27ada4ae437c752d834c4960bc1417ec6e2d858d", "committedDate": "2020-02-26T14:52:20Z", "message": "Merge branch 'dev' of https://github.com/Netflix/conductor into index-all-task-updates"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "560036940469d62204c59e15a1283fe570d1b569", "author": {"user": null}, "url": "https://github.com/Netflix/conductor/commit/560036940469d62204c59e15a1283fe570d1b569", "committedDate": "2020-02-26T14:58:50Z", "message": "remove unnecessary comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1MzY3ODMz", "url": "https://github.com/Netflix/conductor/pull/1546#pullrequestreview-365367833", "createdAt": "2020-02-27T01:53:35Z", "commit": {"oid": "560036940469d62204c59e15a1283fe570d1b569"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 843, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}