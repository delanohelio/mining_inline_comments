{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM4ODk1MzEw", "number": 1748, "title": "Use RxExecutionScheduler instead of default RxComputation Scheduler for polling events", "bodyText": "As per official doc, RxComputationScheduler is recommended to be used for short CPU bound tasks and the number of threads in this scheduler is bound to the CPU cores and hence it is not ideal for polling messages from different queues.\nRxJava offers an Executor Scheduler where one can control the number of threads to be used for the polling of the events. RxJava's I/O scheduler is also applicable for this use case, but in case of any unavailability of queues it might end up creating more threads causing OOM.\nThe intended change is to use the singleton Executor Scheduler instance that is will be used across different queues. The executor thread count is controlled by  worklfow.event.queue.scheduler.poll.thread.count property.  We tried this in our setup and helped scale event processing to an extent.", "createdAt": "2020-06-24T00:42:18Z", "url": "https://github.com/Netflix/conductor/pull/1748", "merged": true, "mergeCommit": {"oid": "a33b96be3e5b355513bf89caa8c07de31606d5c5"}, "closed": true, "closedAt": "2020-07-15T22:31:07Z", "author": {"login": "mdepak"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwJt3AgFqTQzOTU2OTU4Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1SaJRgFqTQ0OTM4ODI0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NTY5NTg2", "url": "https://github.com/Netflix/conductor/pull/1748#pullrequestreview-439569586", "createdAt": "2020-06-29T23:30:58Z", "commit": {"oid": "0fa317fec9f86613f64afc0fab4d4e4b71993306"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMzozMDo1OFrOGqmDAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMzozMDo1OFrOGqmDAQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzMxNjczNw==", "bodyText": "Please rename method to recordEventQueuePollSize to help with maintainability.", "url": "https://github.com/Netflix/conductor/pull/1748#discussion_r447316737", "createdAt": "2020-06-29T23:30:58Z", "author": {"login": "apanicker-nflx"}, "path": "core/src/main/java/com/netflix/conductor/metrics/Monitors.java", "diffHunk": "@@ -309,4 +309,8 @@ public static void recordAcquireLockFailure(String exceptionClassName) {\n \tpublic static void recordSystemTaskWorkerPollingLimited(String queueName) {\n \t\tcounter(classQualifier, \"system_task_worker_polling_limited\", \"queueName\", queueName);\n \t}\n+\n+\tpublic static void recordQueuePollSize(String queueType, int val) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0fa317fec9f86613f64afc0fab4d4e4b71993306"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ea34fc16defd6a25cb5d4f3126bfd1fd800f981", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/8ea34fc16defd6a25cb5d4f3126bfd1fd800f981", "committedDate": "2020-07-08T00:18:19Z", "message": "Use I/O scheduler instead of computation scheduler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ac3118bf28a398ab2e058b81e8f728056f0f575", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/3ac3118bf28a398ab2e058b81e8f728056f0f575", "committedDate": "2020-07-08T00:19:25Z", "message": "Use Rx Executor scheduler instead of default RxComputation scheduler"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b4c0b5b310014b3a5093482c9e61cbfdcf20e12", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/6b4c0b5b310014b3a5093482c9e61cbfdcf20e12", "committedDate": "2020-07-08T00:19:25Z", "message": "Fix type in property name"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7efad90421acf4b23c8dd0e26bbe7de7ea494efc", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/7efad90421acf4b23c8dd0e26bbe7de7ea494efc", "committedDate": "2020-07-08T00:19:25Z", "message": "Minor refactoring"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e976cc2ff6f493ab15d1b85b1ad61b382bce8581", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/e976cc2ff6f493ab15d1b85b1ad61b382bce8581", "committedDate": "2020-07-08T00:19:25Z", "message": "Fix compilation error"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a78b373469f073c11d2c94520557b6155a660173", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/a78b373469f073c11d2c94520557b6155a660173", "committedDate": "2020-06-30T17:51:26Z", "message": "Fix compilation error"}, "afterCommit": {"oid": "e976cc2ff6f493ab15d1b85b1ad61b382bce8581", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/e976cc2ff6f493ab15d1b85b1ad61b382bce8581", "committedDate": "2020-07-08T00:19:25Z", "message": "Fix compilation error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bddeae7e08020c1b4c2182a9b09fb0664d32b85", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/1bddeae7e08020c1b4c2182a9b09fb0664d32b85", "committedDate": "2020-07-08T00:29:25Z", "message": "Merge remote-tracking branch 'upstream/dev' into event_poll_execution_scheduler\n\n# Conflicts:\n#\tcore/src/main/java/com/netflix/conductor/core/config/Configuration.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5Mzg4MjQy", "url": "https://github.com/Netflix/conductor/pull/1748#pullrequestreview-449388242", "createdAt": "2020-07-15T22:30:55Z", "commit": {"oid": "1bddeae7e08020c1b4c2182a9b09fb0664d32b85"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 814, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}