{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2ODg1OTYz", "number": 1719, "title": "Support to batch poll system tasks", "bodyText": "Using batch polling for system tasks from the queues. It will be very helpful for high throughput scenarios where large number of system tasks are executed and can possibly reduce the i/o (number of lookups in queues). It can be controlled by workflow.system.task.queue.pollCount configuration.", "createdAt": "2020-06-02T23:46:11Z", "url": "https://github.com/Netflix/conductor/pull/1719", "merged": true, "mergeCommit": {"oid": "70b1f603634fbcc0a31347099239dab20d5b621c"}, "closed": true, "closedAt": "2020-06-16T00:09:27Z", "author": {"login": "mdepak"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclN2BRgH2gAyNDI2ODg1OTYzOmQ3YmYxMmZjNWFmYWYwNzU2NzViNjExZDQ1OWE3ZGE5YTQzYzg3ODQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcra4rgAH2gAyNDI2ODg1OTYzOjZjNWM5Nzg1OTFiMDQzZDA4ZjczODdhMzNlMDQwY2JlZjhkZGQ2NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d7bf12fc5afaf075675b611d459a7da9a43c8784", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/d7bf12fc5afaf075675b611d459a7da9a43c8784", "committedDate": "2020-05-27T00:09:03Z", "message": "Add support to poll multiple system tasks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b7f70d8e8c2306aa3c4431602e9b103be01b2ff", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/1b7f70d8e8c2306aa3c4431602e9b103be01b2ff", "committedDate": "2020-05-27T16:33:35Z", "message": "Fix bug in acquiring permits"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2031577f9d9b52548374f95adad189103d4f86d", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/f2031577f9d9b52548374f95adad189103d4f86d", "committedDate": "2020-05-30T01:25:50Z", "message": "Fix bug in releasing permit"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/71f610012369d65ba7679d192e4aec5e9ec4567c", "committedDate": "2020-06-02T22:07:27Z", "message": "Minor refactoring"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NzAwNzgw", "url": "https://github.com/Netflix/conductor/pull/1719#pullrequestreview-426700780", "createdAt": "2020-06-09T00:00:28Z", "commit": {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMDowMDoyOFrOGg0TRw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMDowMDoyOFrOGg0TRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDUxOQ==", "bodyText": "Does this need to be a separate method? This could be rolled into the methods defined above where numSlots=1.", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r437064519", "createdAt": "2020-06-09T00:00:28Z", "author": {"login": "apanicker-nflx"}, "path": "core/src/main/java/com/netflix/conductor/core/utils/SemaphoreUtil.java", "diffHunk": "@@ -62,4 +63,23 @@ public int availableSlots() {\n         LOGGER.debug(\"Number of available permits: {}\", available);\n         return available;\n     }\n+\n+    /**\n+     * Signals if processing is allowed based on whether specified number of permits can be acquired.\n+     *\n+     * @param numSlots the number of permits to acquire\n+     * @return {@code true} - if permit is acquired\n+     * {@code false} - if permit could not be acquired\n+     */\n+    public boolean acquireSlots(int numSlots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c"}, "originalPosition": 29}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NzAwOTY1", "url": "https://github.com/Netflix/conductor/pull/1719#pullrequestreview-426700965", "createdAt": "2020-06-09T00:00:58Z", "commit": {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMDowMDo1OFrOGg0T4A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwMDowMDo1OFrOGg0T4A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA2NDY3Mg==", "bodyText": "same as above.", "url": "https://github.com/Netflix/conductor/pull/1719#discussion_r437064672", "createdAt": "2020-06-09T00:00:58Z", "author": {"login": "apanicker-nflx"}, "path": "core/src/main/java/com/netflix/conductor/core/utils/SemaphoreUtil.java", "diffHunk": "@@ -62,4 +63,23 @@ public int availableSlots() {\n         LOGGER.debug(\"Number of available permits: {}\", available);\n         return available;\n     }\n+\n+    /**\n+     * Signals if processing is allowed based on whether specified number of permits can be acquired.\n+     *\n+     * @param numSlots the number of permits to acquire\n+     * @return {@code true} - if permit is acquired\n+     * {@code false} - if permit could not be acquired\n+     */\n+    public boolean acquireSlots(int numSlots) {\n+        return semaphore.tryAcquire(numSlots);\n+    }\n+\n+    /**\n+     * Signals that processing is complete and the specified number of permits can be released.\n+     */\n+    public void completeProcessing(int numSlots) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "71f610012369d65ba7679d192e4aec5e9ec4567c"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6c5c978591b043d08f7387a33e040cbef8ddd662", "author": {"user": {"login": "mdepak", "name": "Deepak Mahudeswaran"}}, "url": "https://github.com/Netflix/conductor/commit/6c5c978591b043d08f7387a33e040cbef8ddd662", "committedDate": "2020-06-15T06:44:16Z", "message": "Incorporate review comments"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 796, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}