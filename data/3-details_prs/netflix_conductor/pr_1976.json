{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIzNjk1NTQ1", "number": 1976, "title": "Updated go client to only include domain param when given", "bodyText": "Configured the Ack and PollForTask methods to only include the \"domain\" parameter if explicitly requested.\nSee #1952", "createdAt": "2020-11-19T05:53:26Z", "url": "https://github.com/Netflix/conductor/pull/1976", "merged": true, "mergeCommit": {"oid": "181c2df6de7d0a8dd7c080f94e2eee4659b60b34"}, "closed": true, "closedAt": "2020-12-01T00:37:08Z", "author": {"login": "djcass44"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdd8M0ugH2gAyNTIzNjk1NTQ1Ojg4ZmU0NzAzYzY1ZTQwYjA1ZTU4ZjhjODQ2ZWZhMjM1MjNlNjY1ZjM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdehkl-AH2gAyNTIzNjk1NTQ1OjdlYTM3Nzc0M2Q1N2FiYmFmODZmN2NiYWZiMDUwYmM2M2M2YjkzNDc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "88fe4703c65e40b05e58f8c846efa23523e665f3", "author": {"user": {"login": "djcass44", "name": "Django"}}, "url": "https://github.com/Netflix/conductor/commit/88fe4703c65e40b05e58f8c846efa23523e665f3", "committedDate": "2020-11-19T05:49:21Z", "message": "Updated Ack method to only include the \"domain\" param if explicitly requested"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "527a7d914184c0e21160174add4be2552d055e60", "author": {"user": {"login": "djcass44", "name": "Django"}}, "url": "https://github.com/Netflix/conductor/commit/527a7d914184c0e21160174add4be2552d055e60", "committedDate": "2020-11-19T05:51:08Z", "message": "Updated PollForTask method to only include the \"domain\" param if explicitly requested"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda", "author": {"user": {"login": "djcass44", "name": "Django"}}, "url": "https://github.com/Netflix/conductor/commit/4850908607eaca3278b4fa827b460a59c25dacda", "committedDate": "2020-11-19T05:53:05Z", "message": "Updated logging"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM0NjI3Mzg4", "url": "https://github.com/Netflix/conductor/pull/1976#pullrequestreview-534627388", "createdAt": "2020-11-19T16:30:16Z", "commit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMDoxNlrOH2nDBw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xOVQxNjozMToyMVrOH2nGTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNDkwMw==", "bodyText": "Suggestion: Can we remove this log statement? It will create noise in logs.", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r527024903", "createdAt": "2020-11-19T16:30:16Z", "author": {"login": "rmohta"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -192,7 +192,13 @@ func (c *ConductorHttpClient) PollForTask(taskType string, workerid string, doma\n     url := c.httpClient.MakeUrl(\"/tasks/poll/{taskType}\", \"{taskType}\", taskType)\n     params := map[string]string{\n         \"workerid\": workerid,\n-        \"domain\":   domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Polling for task with domain: \", domain, \"taskType: \", taskType)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNzAyNTc0Mw==", "bodyText": "Suggestion: Can we remove this log statement?", "url": "https://github.com/Netflix/conductor/pull/1976#discussion_r527025743", "createdAt": "2020-11-19T16:31:21Z", "author": {"login": "rmohta"}, "path": "client/go/conductorhttpclient.go", "diffHunk": "@@ -207,7 +213,13 @@ func (c *ConductorHttpClient) AckTask(taskId, workerid, domain string) (string,\n     url := c.httpClient.MakeUrl(\"/tasks/{taskId}/ack\", \"{taskId}\", taskId)\n     params := map[string]string{\n         \"workerid\": workerid,\n-\t\"domain\": domain,\n+    }\n+    // only add the domain if requested, otherwise conductor will silently fail (https://github.com/Netflix/conductor/issues/1952)\n+    if domain != \"\" {\n+        log.Println(\"Acking task with domain: \", domain, \"taskid: \", taskId)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4850908607eaca3278b4fa827b460a59c25dacda"}, "originalPosition": 23}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ea377743d57abbaf86f7cbafb050bc63c6b9347", "author": {"user": {"login": "djcass44", "name": "Django"}}, "url": "https://github.com/Netflix/conductor/commit/7ea377743d57abbaf86f7cbafb050bc63c6b9347", "committedDate": "2020-11-21T01:21:48Z", "message": "Removed unnecessary log statements"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 728, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}