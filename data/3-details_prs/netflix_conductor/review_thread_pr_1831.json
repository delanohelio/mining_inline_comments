{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4ODMzMjc0", "number": 1831, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDoxNjoyMVrOEZQ8XA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMzoxMjowM1rOEcTUJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTI3NDUyOnYy", "diffSide": "RIGHT", "path": "core/src/test/java/com/netflix/conductor/core/execution/mapper/JsonJQTransformTaskMapperTest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDoxNjoyMVrOHB--0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxMDozMTo0NFrOHCNaiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg0MjUxNQ==", "bodyText": "Please add license header", "url": "https://github.com/Netflix/conductor/pull/1831#discussion_r471842515", "createdAt": "2020-08-18T00:16:21Z", "author": {"login": "apanicker-nflx"}, "path": "core/src/test/java/com/netflix/conductor/core/execution/mapper/JsonJQTransformTaskMapperTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package com.netflix.conductor.core.execution.mapper;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16c0f049661c6ac2228d551917b0ce7ba13883b1"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjA3ODk4Nw==", "bodyText": "@apanicker-nflx done", "url": "https://github.com/Netflix/conductor/pull/1831#discussion_r472078987", "createdAt": "2020-08-18T10:31:44Z", "author": {"login": "elisherer"}, "path": "core/src/test/java/com/netflix/conductor/core/execution/mapper/JsonJQTransformTaskMapperTest.java", "diffHunk": "@@ -0,0 +1,106 @@\n+package com.netflix.conductor.core.execution.mapper;", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg0MjUxNQ=="}, "originalCommit": {"oid": "16c0f049661c6ac2228d551917b0ce7ba13883b1"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0OTI3NjQ2OnYy", "diffSide": "RIGHT", "path": "docs/docs/configuration/systask.md", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDoxNzoyMVrOHB-_7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQwMDoxNzoyMVrOHB-_7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTg0Mjc5OQ==", "bodyText": "This is great, thanks for adding documentation.", "url": "https://github.com/Netflix/conductor/pull/1831#discussion_r471842799", "createdAt": "2020-08-18T00:17:21Z", "author": {"login": "apanicker-nflx"}, "path": "docs/docs/configuration/systask.md", "diffHunk": "@@ -675,3 +675,42 @@ Do while task does NOT support domain or isolation group execution. Nesting of D\n ```\n If any of loopover task will be failed then do while task will be failed. In such case retry will start iteration from 1. TaskType SUB_WORKFLOW is not supported as a part of loopover task. Since loopover tasks will be executed in loop inside scope of parent do while task, crossing branching outside of DO_WHILE task will not be respected. Branching inside loopover task will be supported.\n In case of exception while evaluating loopCondition, do while task will be failed with FAILED_WITH_TERMINAL_ERROR.\n+\n+## JSON JQ Transform Task", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "16c0f049661c6ac2228d551917b0ce7ba13883b1"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MTEyMDM5OnYy", "diffSide": "RIGHT", "path": "test-harness/src/test/groovy/com/netflix/counductor/integration/test/JsonJQTransformTaskSpec.groovy", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMzoxMjowM1rOHGv7Ew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNVQyMzoxMjowM1rOHGv7Ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NjgzODY3NQ==", "bodyText": "+1", "url": "https://github.com/Netflix/conductor/pull/1831#discussion_r476838675", "createdAt": "2020-08-25T23:12:03Z", "author": {"login": "kishorebanala"}, "path": "test-harness/src/test/groovy/com/netflix/counductor/integration/test/JsonJQTransformTaskSpec.groovy", "diffHunk": "@@ -0,0 +1,131 @@\n+/*\n+ * Copyright 2020 Netflix, Inc.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package com.netflix.counductor.integration.test\n+\n+import com.fasterxml.jackson.databind.ObjectMapper\n+import com.netflix.archaius.guice.ArchaiusModule\n+import com.netflix.conductor.common.metadata.tasks.Task\n+import com.netflix.conductor.common.run.Workflow\n+import com.netflix.conductor.common.utils.JsonMapperProvider\n+import com.netflix.conductor.contribs.json.JsonJqTransform\n+import com.netflix.conductor.core.execution.WorkflowExecutor\n+import com.netflix.conductor.service.ExecutionService\n+import com.netflix.conductor.test.util.WorkflowTestUtil\n+import com.netflix.conductor.tests.utils.TestModule\n+import com.netflix.governator.guice.test.ModulesForTesting\n+import spock.lang.Shared\n+import spock.lang.Specification\n+\n+import javax.inject.Inject\n+\n+@ModulesForTesting([TestModule.class, ArchaiusModule.class])\n+class JsonJQTransformTaskSpec extends Specification {\n+\n+    @Inject\n+    ExecutionService workflowExecutionService\n+\n+    @Inject\n+    WorkflowExecutor workflowExecutor\n+\n+    @Inject\n+    WorkflowTestUtil workflowTestUtil\n+\n+    @Shared\n+    ObjectMapper objectMapper = new JsonMapperProvider().get()\n+\n+    @Shared\n+    def JSON_JQ_TRANSFORM_WF = 'test_json_jq_transform_wf'\n+\n+    def setup() {\n+        // We do this to register the JSON JQ TRANSFORM task type as a system task since it's in the contrib module\n+        new JsonJqTransform(objectMapper)\n+\n+        workflowTestUtil.registerWorkflows(\n+            'simple_json_jq_transform_integration_test.json',\n+        )\n+    }\n+\n+    def cleanup() {\n+        workflowTestUtil.clearWorkflows()\n+    }\n+\n+    /**\n+     * Given the following input JSON\n+     * {\n+     *   \"in1\": {\n+     *     \"array\": [ \"a\", \"b\" ]\n+     *   },\n+     *   \"in2\": {\n+     *     \"array\": [ \"c\", \"d\" ]\n+     *   }\n+     * }\n+     * expect the workflow task to transform to following result:\n+     * {\n+     *     out: [ \"a\", \"b\", \"c\", \"d\" ]\n+     * }\n+     */\n+    def \"Test workflow with json jq transform task succeeds\"() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d62cd9a362a9aaf5bdf619b4288d38bbe0cc837f"}, "originalPosition": 80}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4116, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}