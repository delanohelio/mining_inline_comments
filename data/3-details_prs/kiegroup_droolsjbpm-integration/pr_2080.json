{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyODk3NjEw", "number": 2080, "title": "[JBPM-9129] Start process without triggering a start node", "bodyText": "", "createdAt": "2020-05-04T11:36:13Z", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080", "merged": true, "mergeCommit": {"oid": "20a28ee3039de4c5866215596c22cd54b633ff54"}, "closed": true, "closedAt": "2020-05-27T14:05:32Z", "author": {"login": "elguardian"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcePz8DgBqjMzMDMxODk4NDk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQJ4EugFqTUwMzcwOTIwMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fb73a97482be1ad1edf839a46c3f829846cda1ff", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/fb73a97482be1ad1edf839a46c3f829846cda1ff", "committedDate": "2020-05-04T11:35:30Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "0c2b02781ec214db19f8d3c66bab7b28a41e6a7a", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/0c2b02781ec214db19f8d3c66bab7b28a41e6a7a", "committedDate": "2020-05-05T08:28:55Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0c2b02781ec214db19f8d3c66bab7b28a41e6a7a", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/0c2b02781ec214db19f8d3c66bab7b28a41e6a7a", "committedDate": "2020-05-05T08:28:55Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "a7a0dabf30be38e1bbb5829315d4723d430d7e63", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/a7a0dabf30be38e1bbb5829315d4723d430d7e63", "committedDate": "2020-05-11T18:24:46Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7a0dabf30be38e1bbb5829315d4723d430d7e63", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/a7a0dabf30be38e1bbb5829315d4723d430d7e63", "committedDate": "2020-05-11T18:24:46Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "ad53c8ab7e0c8bc1cf4af16ea25035b5286f06fe", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ad53c8ab7e0c8bc1cf4af16ea25035b5286f06fe", "committedDate": "2020-05-17T13:36:22Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ad53c8ab7e0c8bc1cf4af16ea25035b5286f06fe", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ad53c8ab7e0c8bc1cf4af16ea25035b5286f06fe", "committedDate": "2020-05-17T13:36:22Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "adda50081692f245c8ae6a3cb12aaf32eae037ce", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/adda50081692f245c8ae6a3cb12aaf32eae037ce", "committedDate": "2020-05-19T07:03:22Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "adda50081692f245c8ae6a3cb12aaf32eae037ce", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/adda50081692f245c8ae6a3cb12aaf32eae037ce", "committedDate": "2020-05-19T07:03:22Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "02b03778769c5240608eb7b9b266dfd7ae950d67", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/02b03778769c5240608eb7b9b266dfd7ae950d67", "committedDate": "2020-05-19T08:18:45Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02b03778769c5240608eb7b9b266dfd7ae950d67", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/02b03778769c5240608eb7b9b266dfd7ae950d67", "committedDate": "2020-05-19T08:18:45Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "d3c8dd5a247657112212859f04c3993fd5d37b8c", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d3c8dd5a247657112212859f04c3993fd5d37b8c", "committedDate": "2020-05-19T12:55:38Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3c8dd5a247657112212859f04c3993fd5d37b8c", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d3c8dd5a247657112212859f04c3993fd5d37b8c", "committedDate": "2020-05-19T12:55:38Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "f95467ce46d63713a57cf9e1901155d9b5cdc68c", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/f95467ce46d63713a57cf9e1901155d9b5cdc68c", "committedDate": "2020-05-19T16:15:11Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f95467ce46d63713a57cf9e1901155d9b5cdc68c", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/f95467ce46d63713a57cf9e1901155d9b5cdc68c", "committedDate": "2020-05-19T16:15:11Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d", "committedDate": "2020-05-21T09:54:03Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d", "committedDate": "2020-05-21T09:54:03Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/64c41953b7b91b76ef84b6049092538d5b2347fc", "committedDate": "2020-05-24T13:25:50Z", "message": "[JBPM-9129] Start process without triggering a start node"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE2ODY1MTQx", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-416865141", "createdAt": "2020-05-22T12:16:50Z", "commit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "state": "COMMENTED", "comments": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxMjoxNjo1MFrOGZVCMg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNVQwOTo0OTowNlrOGZ7lqA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTIxMjIxMA==", "bodyText": "Please remove this file. It's empty and a .gitignore file is already in place at project level", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429212210", "createdAt": "2020-05-22T12:16:50Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/filtered-resources/kjars-sources/restart-project/src/main/resources/.gitignore", "diffHunk": "@@ -0,0 +1 @@\n+# empty", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI0NzQ2OQ==", "bodyText": "Please remove auto-generated TODO comment.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429247469", "createdAt": "2020-05-22T13:32:24Z", "author": {"login": "afalhambra"}, "path": "jbpm-simulation/src/test/java/org/jbpm/simulation/BPMN2SimulationDataProviderTest.java", "diffHunk": "@@ -78,6 +78,18 @@ public Object getMetaData(String name) {\n             public long getId() {\n                 return 2;\n             }\n+\n+            @Override\n+            public String getUniqueId() {\n+                // TODO Auto-generated method stub\n+                return null;\n+            }\n+\n+            @Override\n+            public String getNodeUniqueId() {\n+                // TODO Auto-generated method stub", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI0NzU0NA==", "bodyText": "Please remove auto-generated TODO comment.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429247544", "createdAt": "2020-05-22T13:32:30Z", "author": {"login": "afalhambra"}, "path": "jbpm-simulation/src/test/java/org/jbpm/simulation/BPMN2SimulationDataProviderTest.java", "diffHunk": "@@ -136,6 +148,18 @@ public Object getMetaData(String name) {\n             public long getId() {\n                 return 2;\n             }\n+\n+            @Override\n+            public String getUniqueId() {\n+                // TODO Auto-generated method stub\n+                return null;\n+            }\n+\n+            @Override\n+            public String getNodeUniqueId() {\n+                // TODO Auto-generated method stub", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "originalPosition": 54}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI4NTkwMA==", "bodyText": "Please remove this. There is no such method defined in interface Node", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429285900", "createdAt": "2020-05-22T14:37:52Z", "author": {"login": "afalhambra"}, "path": "jbpm-simulation/src/test/java/org/jbpm/simulation/BPMN2SimulationDataProviderTest.java", "diffHunk": "@@ -78,6 +78,18 @@ public Object getMetaData(String name) {\n             public long getId() {\n                 return 2;\n             }\n+\n+            @Override\n+            public String getUniqueId() {\n+                // TODO Auto-generated method stub\n+                return null;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTI4Njk5OQ==", "bodyText": "Same here. No such method defined in interface Node", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429286999", "createdAt": "2020-05-22T14:39:39Z", "author": {"login": "afalhambra"}, "path": "jbpm-simulation/src/test/java/org/jbpm/simulation/BPMN2SimulationDataProviderTest.java", "diffHunk": "@@ -136,6 +148,18 @@ public Object getMetaData(String name) {\n             public long getId() {\n                 return 2;\n             }\n+\n+            @Override\n+            public String getUniqueId() {\n+                // TODO Auto-generated method stub\n+                return null;\n+            }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1ce80ccf64cfc05700a3e13039b4d3a942bdc5d"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTc5MTU5Mw==", "bodyText": "Why startProcessWithCorrelationKeyFromNodeIds method name? why not startProcessFromNodeIds method name for consistency and coherency across classes?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429791593", "createdAt": "2020-05-25T08:04:31Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-remote/kie-server-rest/kie-server-rest-jbpm/src/main/java/org/kie/server/remote/rest/jbpm/ProcessResource.java", "diffHunk": "@@ -196,6 +199,96 @@ public Response startProcess(@javax.ws.rs.core.Context HttpHeaders headers,\n         }\n     }\n \n+    @ApiOperation(value = \"Starts a new process instance from the specific nodes\",\n+            response=Long.class, code=201)\n+    @ApiResponses(value = {@ApiResponse(code = 201, response = Long.class, message = \"Process instance created\",\n+                                        examples = @Example(value = {@ExampleProperty(mediaType = JSON, value = LONG_RESPONSE_JSON),\n+                                                                     @ExampleProperty(mediaType = XML, value = LONG_RESPONSE_XML)})),\n+            @ApiResponse(code = 500, message = \"Unexpected error\"),\n+            @ApiResponse(code = 404, message = \"Process ID or Container Id not found\"),\n+            @ApiResponse(code = 403, message = \"User does not have permission to access this asset\")})\n+    @POST\n+    @Path(START_PROCESS_FROM_NODES_POST_URI)\n+    @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n+    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n+    public Response startProcessFromNodeIds(@javax.ws.rs.core.Context HttpHeaders headers,\n+            @ApiParam(value = \"container id where the process definition resides\", required = true, example = \"evaluation_1.0.0-SNAPSHOT\") @PathParam(CONTAINER_ID) String containerId, \n+            @ApiParam(value = \"process instance id that new instance should be created from\", required = true, example = \"evaluation\") @PathParam(PROCESS_ID) String processId, \n+                                            @ApiParam(value = \"optional map of process variables\", required = false) @DefaultValue(\"\") String payload) {\n+\n+        Variant v = getVariant(headers);\n+        String type = getContentType(headers);\n+        Header conversationIdHeader = buildConversationIdHeader(containerId, context, headers);\n+        \n+        try {\n+            String response = processServiceBase.startProcessFromNodeIds(containerId, processId, payload, type);\n+\n+            logger.debug(\"Returning CREATED response with content '{}'\", response);\n+            return createResponse(response, v, Response.Status.CREATED, conversationIdHeader);\n+        } catch (DeploymentNotActiveException e) {\n+            return badRequest(\n+                    e.getMessage(), v);\n+        } catch (DeploymentNotFoundException e) {\n+            return notFound(\n+                    MessageFormat.format(CONTAINER_NOT_FOUND, containerId), v);\n+        } catch (ProcessDefinitionNotFoundException e) {\n+            return notFound(\n+                    MessageFormat.format(PROCESS_DEFINITION_NOT_FOUND, processId, containerId), v);\n+        } catch (SecurityException e) {\n+            return forbidden(errorMessage(e, e.getMessage()), v, conversationIdHeader);\n+        } catch (Exception e) {\n+            logger.error(\"Unexpected error during processing {}\", e.getMessage(), e);\n+            return internalServerError(\n+                    MessageFormat.format(CREATE_RESPONSE_ERROR, e.getMessage()), v);\n+        }\n+    }\n+\n+    @ApiOperation(value = \"Starts a new process instance from the specific nodes\",\n+                  response = Long.class, code = 201)\n+    @ApiResponses(value = {@ApiResponse(code = 201, response = Long.class, message = \"Process instance created\",\n+                                        examples = @Example(value = {@ExampleProperty(mediaType = JSON, value = LONG_RESPONSE_JSON),\n+                                                                     @ExampleProperty(mediaType = XML, value = LONG_RESPONSE_XML)})),\n+                           @ApiResponse(code = 500, message = \"Unexpected error\"),\n+                           @ApiResponse(code = 404, message = \"Process ID or Container Id not found\"),\n+                           @ApiResponse(code = 403, message = \"User does not have permission to access this asset\")})\n+    @POST\n+    @Path(START_PROCESS_FROM_NODES_WITH_CORRELATION_KEY_POST_URI)\n+    @Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n+    @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})\n+    public Response startProcessWithCorrelationKeyFromNodeIds(@javax.ws.rs.core.Context HttpHeaders headers,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 202}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTgzMTg0Nw==", "bodyText": "Not really useful as it will print out memory address only - no toString method is implemented in NodeInstanceList class", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429831847", "createdAt": "2020-05-25T09:24:37Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-services/kie-server-services-jbpm/src/main/java/org/kie/server/services/jbpm/RuntimeDataServiceBase.java", "diffHunk": "@@ -289,6 +290,18 @@ public NodeInstanceList getProcessInstanceHistory(long processInstanceId, Boolea\n         return nodeInstanceList;\n     }\n \n+    public NodeInstanceList getProcessInstanceFullHistoryByType(long processInstanceId, String entryType, Integer page, Integer pageSize) {\n+\n+        logger.debug(\"About to search for node instances with page {} and page size {}\", page, pageSize);\n+        Collection<NodeInstanceDesc> result = null;\n+\n+        result = runtimeDataService.getProcessInstanceFullHistoryByType(processInstanceId, EntryType.valueOf(entryType), buildQueryContext(page, pageSize));\n+\n+        NodeInstanceList nodeInstanceList = convertToNodeInstanceList(result);\n+        logger.debug(\"Returning result of node instances search: {}\", nodeInstanceList);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MDkxMQ==", "bodyText": "Unnecessary unboxing\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        assertTrue(processInstanceId.longValue() > 0);\n          \n          \n            \n                        assertTrue(processInstanceId > 0);", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429840911", "createdAt": "2020-05-25T09:43:06Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 71}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MTA5NQ==", "bodyText": "Unnecessary unboxing\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        assertTrue(processInstanceId.longValue() > 0);\n          \n          \n            \n                        assertTrue(processInstanceId > 0);", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429841095", "createdAt": "2020-05-25T09:43:30Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());\n+            if (processInstanceId != null) {\n+                processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            }\n+        }\n+    }\n+\n+    @Test()\n+    public void testStartWithCorrelationKeyProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MTQ5Mw==", "bodyText": "Can be replaced with method reference\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n          \n          \n            \n                        String[] nodeIds = list.stream().map(NodeInstance::getNodeId).toArray(String[]::new);", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429841493", "createdAt": "2020-05-25T09:44:22Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MTc1Nw==", "bodyText": "Can be replaced with method reference\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n          \n          \n            \n                        String[] nodeIds = list.stream().map(NodeInstance::getNodeId).toArray(String[]::new);", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429841757", "createdAt": "2020-05-25T09:44:52Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());\n+            if (processInstanceId != null) {\n+                processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            }\n+        }\n+    }\n+\n+    @Test()\n+    public void testStartWithCorrelationKeyProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 112}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MjExNg==", "bodyText": "Member field never used. Please remove.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429842116", "createdAt": "2020-05-25T09:45:35Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 50}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0MzU2Ng==", "bodyText": "Redundant type declaration\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Map<String, Object> parameters = new HashMap<String, Object>();\n          \n          \n            \n                    Map<String, Object> parameters = new HashMap<>();", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429843566", "createdAt": "2020-05-25T09:48:27Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());\n+            if (processInstanceId != null) {\n+                processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            }\n+        }\n+    }\n+\n+    @Test()\n+    public void testStartWithCorrelationKeyProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 97}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTg0Mzg4MA==", "bodyText": "Redundant type declaration\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    Map<String, Object> parameters = new HashMap<String, Object>();\n          \n          \n            \n                    Map<String, Object> parameters = new HashMap<>();", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r429843880", "createdAt": "2020-05-25T09:49:06Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 66}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDI0NjE4", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418024618", "createdAt": "2020-05-26T07:10:44Z", "commit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMDo0NFrOGaRUoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMDo0NFrOGaRUoA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDE5OTk2OA==", "bodyText": "Can you please add assertions making sure that the process is running and the nodes supplied above are active?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r430199968", "createdAt": "2020-05-26T07:10:44Z", "author": {"login": "sutaakar"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 85}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDI1Njg2", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418025686", "createdAt": "2020-05-26T07:12:30Z", "commit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMjozMVrOGaRX_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMjozMVrOGaRX_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIwMDgyOQ==", "bodyText": "Please move the fail statement after process instance abortion, this way the process instance is not aborted when an exception is thrown.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r430200829", "createdAt": "2020-05-26T07:12:31Z", "author": {"login": "sutaakar"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 88}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDI2MTg2", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418026186", "createdAt": "2020-05-26T07:13:14Z", "commit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMzoxNFrOGaRZew==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxMzoxNFrOGaRZew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIwMTIxMQ==", "bodyText": "Same as above.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r430201211", "createdAt": "2020-05-26T07:13:14Z", "author": {"login": "sutaakar"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters, nodeIds);\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());\n+            if (processInstanceId != null) {\n+                processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            }\n+        }\n+    }\n+\n+    @Test()\n+    public void testStartWithCorrelationKeyProcess() {\n+        Map<String, Object> parameters = new HashMap<String, Object>();\n+\n+        Long processInstanceId = processClient.startProcess(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, parameters);\n+        try {\n+            assertNotNull(processInstanceId);\n+            assertTrue(processInstanceId.longValue() > 0);\n+\n+            // Process instance is running and is active.\n+            ProcessInstance processInstance = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertNotNull(processInstance);\n+            assertEquals(org.kie.api.runtime.process.ProcessInstance.STATE_ACTIVE, processInstance.getState().intValue());\n+\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+\n+            List<NodeInstance> list = this.processClient.findNodeInstancesByType(CONTAINER_ID_RESTART, processInstanceId, \"ABORTED\", 0, 10);\n+            String[] nodeIds = list.stream().map(e -> e.getNodeId()).toArray(String[]::new);\n+\n+            CorrelationKeyFactory correlationKeyFactory = KieInternalServices.Factory.get().newCorrelationKeyFactory();\n+            CorrelationKey firstKey = correlationKeyFactory.newCorrelationKey(\"mysimlekey\");\n+            processInstanceId = null;\n+            processInstanceId = processClient.startProcessFromNodeIds(CONTAINER_ID_RESTART, PROCESS_ID_RESTART, firstKey, parameters, nodeIds);\n+\n+            ProcessInstance pi = processClient.getProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+            assertThat(pi.getCorrelationKey(), is(\"mysimlekey\"));\n+            processClient.abortProcessInstance(CONTAINER_ID_RESTART, processInstanceId);\n+        } catch (Exception e) {\n+            fail(e.getMessage());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 123}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDI3NTAz", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418027503", "createdAt": "2020-05-26T07:15:26Z", "commit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxNToyNlrOGaRdbw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yNlQwNzoxNToyNlrOGaRdbw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDIwMjIyMw==", "bodyText": "May be better to rename the test method to something like testStartProcessFromNodeId to distinguish it from usual process start.", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r430202223", "createdAt": "2020-05-26T07:15:26Z", "author": {"login": "sutaakar"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/StartProcessServiceIntegrationTest.java", "diffHunk": "@@ -0,0 +1,129 @@\n+/*\n+ * Copyright 2020 Red Hat, Inc. and/or its affiliates.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+*/\n+\n+package org.kie.server.integrationtests.jbpm;\n+\n+import java.util.HashMap;\n+import java.util.List;\n+import java.util.Map;\n+\n+import org.junit.BeforeClass;\n+import org.junit.Test;\n+import org.kie.api.KieServices;\n+import org.kie.internal.KieInternalServices;\n+import org.kie.internal.process.CorrelationKey;\n+import org.kie.internal.process.CorrelationKeyFactory;\n+import org.kie.internal.runtime.conf.RuntimeStrategy;\n+import org.kie.server.api.KieServerConstants;\n+import org.kie.server.api.model.KieServerConfigItem;\n+import org.kie.server.api.model.ReleaseId;\n+import org.kie.server.api.model.instance.NodeInstance;\n+import org.kie.server.api.model.instance.ProcessInstance;\n+import org.kie.server.integrationtests.shared.KieServerDeployer;\n+\n+import static org.hamcrest.CoreMatchers.is;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertThat;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n+public class StartProcessServiceIntegrationTest extends JbpmKieServerBaseIntegrationTest {\n+\n+    private static final KieServerConfigItem PPI_RUNTIME_STRATEGY = new KieServerConfigItem(KieServerConstants.PCFG_RUNTIME_STRATEGY, RuntimeStrategy.PER_PROCESS_INSTANCE.name(), String.class.getName());\n+\n+    private static ReleaseId releaseId = new ReleaseId(\"org.kie.server.testing\", \"restart-project\",\n+            \"1.0.0.Final\");\n+\n+    protected static final String SORT_BY_PROCESS_ID = \"ProcessId\";\n+\n+    @BeforeClass\n+    public static void buildAndDeployArtifacts() {\n+\n+        KieServerDeployer.buildAndDeployCommonMavenParent();\n+        KieServerDeployer.buildAndDeployMavenProjectFromResource(\"/kjars-sources/restart-project\");\n+\n+        kieContainer = KieServices.Factory.get().newKieContainer(releaseId);\n+\n+        createContainer(CONTAINER_ID_RESTART, releaseId, PPI_RUNTIME_STRATEGY);\n+    }\n+\n+\n+    @Test()\n+    public void testStartProcess() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc"}, "originalPosition": 65}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "64c41953b7b91b76ef84b6049092538d5b2347fc", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/64c41953b7b91b76ef84b6049092538d5b2347fc", "committedDate": "2020-05-24T13:25:50Z", "message": "[JBPM-9129] Start process without triggering a start node"}, "afterCommit": {"oid": "02c5868299940325538a2df7ddfc880c98b14e96", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/02c5868299940325538a2df7ddfc880c98b14e96", "committedDate": "2020-05-26T07:47:06Z", "message": "[JBPM-9129] Start process without triggering a start node\n\nadding rest api to provide access to start process from arbitary nodes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4MDUzMTM3", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418053137", "createdAt": "2020-05-26T07:53:42Z", "commit": {"oid": "02c5868299940325538a2df7ddfc880c98b14e96"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4OTYyNDI0", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-418962424", "createdAt": "2020-05-27T08:20:55Z", "commit": {"oid": "02c5868299940325538a2df7ddfc880c98b14e96"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODoyMDo1NlrOGa-hKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QwODoyMDo1NlrOGa-hKw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDk0MDQ1OQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                                          @ApiParam(value = \"entry type from the history\", required = false,\n          \n          \n            \n                                                                    example = \"123\") @QueryParam(PROCESS_INST_HISTORY_TYPE) String processInstHistoryType,\n          \n          \n            \n                       @ApiParam(value = \"entry type from the history\", required = false, example = \"START\") @QueryParam(PROCESS_INST_HISTORY_TYPE) String processInstHistoryType,", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#discussion_r430940459", "createdAt": "2020-05-27T08:20:56Z", "author": {"login": "sutaakar"}, "path": "kie-server-parent/kie-server-remote/kie-server-rest/kie-server-rest-jbpm/src/main/java/org/kie/server/remote/rest/jbpm/ProcessResource.java", "diffHunk": "@@ -824,13 +917,20 @@ public Response getProcessInstanceHistory(@Context HttpHeaders headers, @PathPar\n             @ApiParam(value = \"identifier of the process instance that history should be collected for\", required = true, example = \"123\") @PathParam(PROCESS_INST_ID) long processInstanceId,\n             @ApiParam(value = \"instructs if active nodes only should be collected, defaults to false\", required = false) @QueryParam(\"activeOnly\")Boolean active, \n             @ApiParam(value = \"instructs if completed nodes only should be collected, defaults to false\", required = false) @QueryParam(\"completedOnly\")Boolean completed,\n+                                              @ApiParam(value = \"entry type from the history\", required = false,\n+                                                        example = \"123\") @QueryParam(PROCESS_INST_HISTORY_TYPE) String processInstHistoryType,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "02c5868299940325538a2df7ddfc880c98b14e96"}, "originalPosition": 244}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "016e127b0b955125ca76c8a5e3c2f96c79cdcbd6", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/016e127b0b955125ca76c8a5e3c2f96c79cdcbd6", "committedDate": "2020-05-27T08:54:30Z", "message": "[JBPM-9129] Start process without triggering a start node\n\nadding rest api to provide access to start process from arbitary nodes."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "02c5868299940325538a2df7ddfc880c98b14e96", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/02c5868299940325538a2df7ddfc880c98b14e96", "committedDate": "2020-05-26T07:47:06Z", "message": "[JBPM-9129] Start process without triggering a start node\n\nadding rest api to provide access to start process from arbitary nodes."}, "afterCommit": {"oid": "016e127b0b955125ca76c8a5e3c2f96c79cdcbd6", "author": {"user": null}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/016e127b0b955125ca76c8a5e3c2f96c79cdcbd6", "committedDate": "2020-05-27T08:54:30Z", "message": "[JBPM-9129] Start process without triggering a start node\n\nadding rest api to provide access to start process from arbitary nodes."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzNzA5MjAy", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2080#pullrequestreview-503709202", "createdAt": "2020-10-07T09:50:25Z", "commit": {"oid": "016e127b0b955125ca76c8a5e3c2f96c79cdcbd6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1405, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}