{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2MTYxMTIw", "number": 2151, "title": "[JBPM-9223] include case file", "bodyText": "Depends on jbpm:1697\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. Whenthis flag is true, caseFile information will be include in the response items", "createdAt": "2020-07-08T10:57:26Z", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151", "merged": true, "mergeCommit": {"oid": "32658e99a776a5977b0a332c2fc360cb15cf04dc"}, "closed": true, "closedAt": "2020-07-23T12:40:50Z", "author": {"login": "fjtirado"}, "timelineItems": {"totalCount": 25, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczLljyABqjM1Mjg4MTAyNDM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3rlK1AFqTQ1Mzk0ODM4Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "836f910acc112073488f7beeeed046a071ca10d1", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/836f910acc112073488f7beeeed046a071ca10d1", "committedDate": "2020-07-08T10:55:53Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "2a91dfbea5f808339e4ffc113b10ceaac1b43c5d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/2a91dfbea5f808339e4ffc113b10ceaac1b43c5d", "committedDate": "2020-07-09T09:25:59Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2a91dfbea5f808339e4ffc113b10ceaac1b43c5d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/2a91dfbea5f808339e4ffc113b10ceaac1b43c5d", "committedDate": "2020-07-09T09:25:59Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "1bd1a3a1fe3dbb38b5b0cbb8186ad2f875b350f5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/1bd1a3a1fe3dbb38b5b0cbb8186ad2f875b350f5", "committedDate": "2020-07-09T09:29:58Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1bd1a3a1fe3dbb38b5b0cbb8186ad2f875b350f5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/1bd1a3a1fe3dbb38b5b0cbb8186ad2f875b350f5", "committedDate": "2020-07-09T09:29:58Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "50c964e1f69150464524f3c22867eb1681fd4319", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/50c964e1f69150464524f3c22867eb1681fd4319", "committedDate": "2020-07-09T11:36:47Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "50c964e1f69150464524f3c22867eb1681fd4319", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/50c964e1f69150464524f3c22867eb1681fd4319", "committedDate": "2020-07-09T11:36:47Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "bdad1a396e8de9a98b84bf9734961245f7189f9c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/bdad1a396e8de9a98b84bf9734961245f7189f9c", "committedDate": "2020-07-09T14:30:25Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bdad1a396e8de9a98b84bf9734961245f7189f9c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/bdad1a396e8de9a98b84bf9734961245f7189f9c", "committedDate": "2020-07-09T14:30:25Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "d12a8f1d74990d14086a99c137c5a579f4183142", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d12a8f1d74990d14086a99c137c5a579f4183142", "committedDate": "2020-07-10T16:10:48Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d12a8f1d74990d14086a99c137c5a579f4183142", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d12a8f1d74990d14086a99c137c5a579f4183142", "committedDate": "2020-07-10T16:10:48Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "c4951dcd9af0101091ba310e546816feaed29ea0", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/c4951dcd9af0101091ba310e546816feaed29ea0", "committedDate": "2020-07-13T08:33:38Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4951dcd9af0101091ba310e546816feaed29ea0", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/c4951dcd9af0101091ba310e546816feaed29ea0", "committedDate": "2020-07-13T08:33:38Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "4cf115f4043c9a09d70f7c24be38f804c5969739", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/4cf115f4043c9a09d70f7c24be38f804c5969739", "committedDate": "2020-07-14T09:56:34Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4cf115f4043c9a09d70f7c24be38f804c5969739", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/4cf115f4043c9a09d70f7c24be38f804c5969739", "committedDate": "2020-07-14T09:56:34Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "0f64cc80850c51a4321f029d4b326da7c6c90c1e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/0f64cc80850c51a4321f029d4b326da7c6c90c1e", "committedDate": "2020-07-14T12:04:42Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "0f64cc80850c51a4321f029d4b326da7c6c90c1e", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/0f64cc80850c51a4321f029d4b326da7c6c90c1e", "committedDate": "2020-07-14T12:04:42Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "2f84765a6b7e2f8d2aeaf6db078f0613155515f8", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/2f84765a6b7e2f8d2aeaf6db078f0613155515f8", "committedDate": "2020-07-14T12:09:53Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2f84765a6b7e2f8d2aeaf6db078f0613155515f8", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/2f84765a6b7e2f8d2aeaf6db078f0613155515f8", "committedDate": "2020-07-14T12:09:53Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0", "committedDate": "2020-07-14T17:22:00Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4NzIzNjg1", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#pullrequestreview-448723685", "createdAt": "2020-07-15T08:09:18Z", "commit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwODowOToxOVrOGxzEkA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNVQwOTowODoxMlrOGx1QAA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg3MDE2MA==", "bodyText": "Maybe you can reuse the getAdditionalParams method as we have for this as above? Something like below\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                            if (queryString.isEmpty()) {\n          \n          \n            \n                                queryString+= \"?withData=true\";\n          \n          \n            \n                            } else {\n          \n          \n            \n                                queryString+= \"&withData=true\";\n          \n          \n            \n                            }\n          \n          \n            \n                            queryString = getAdditionalParams(queryString, \"withData\", Collections.singletonList(withData));\n          \n      \n    \n    \n  \n\nIf above suggestion is not suitable, then I would suggest to add this check queryString != null in the condition (queryString.isEmpty()), so we make the code more robust. Right now queryString won't be null but maybe in future getAdditionalParams or getSortingQueryString methods may change their implementation and return a null instead.\nWhat do you think?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r454870160", "createdAt": "2020-07-15T08:09:19Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client/impl/CaseServicesClientImpl.java", "diffHunk": "@@ -878,16 +878,26 @@ public void removeComment(String containerId, String caseId, String commentId) {\n         return getCaseInstances(null, page, pageSize, sort, sortOrder);\n     }\n \n-    @Override\n     public List<CaseInstance> getCaseInstances(List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder) {\n+        return getCaseInstances (status, page, pageSize, sort, sortOrder, false);\n+    }\n+\n+    @Override\n+    public List<CaseInstance> getCaseInstances(List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder, boolean withData) {\n         CaseInstanceList list = null;\n         if( config.isRest() ) {\n             Map<String, Object> valuesMap = new HashMap<String, Object>();\n \n             String queryString = getPagingQueryString(\"\", page, pageSize);\n             queryString = getAdditionalParams(queryString, \"status\", status);\n             queryString = getSortingQueryString(queryString, sort, sortOrder);\n-\n+            if (withData) {\n+                if (queryString.isEmpty()) {\n+                    queryString+= \"?withData=true\";\n+                } else {\n+                    queryString+= \"&withData=true\";\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg4MjQyMg==", "bodyText": "I know you haven't changed this, but I think it's a good chance now to solve this small issue.\nWe are trying to print out 2 values bug we are passing 3 in the log, thus it makes log output not really useful. Should be something like:\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                    logger.debug(\"About to look for case instances by data item name {} with status {}\", dataItemName, dataItemValue, status);\n          \n          \n            \n                                    logger.debug(\"About to look for case instances by data item name {} with status {}\", dataItemName, status);", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r454882422", "createdAt": "2020-07-15T08:29:52Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-remote/kie-server-rest/kie-server-rest-case-mgmt/src/main/java/org/kie/server/remote/rest/casemgmt/CaseQueryResource.java", "diffHunk": "@@ -120,17 +121,17 @@ public Response getCaseInstances(@javax.ws.rs.core.Context HttpHeaders headers,\n                     CaseInstanceList responseObject = null;\n                     if (dataItemName != null && !dataItemName.isEmpty() && dataItemValue != null && !dataItemValue.isEmpty()) {\n                         logger.debug(\"About to look for case instances by data item name {} and value {} with status {}\", dataItemName, dataItemValue, status);\n-                        responseObject = this.caseManagementRuntimeDataServiceBase.getCaseInstancesByCaseFileData(dataItemName, dataItemValue, status, page, pageSize, sort, sortOrder);\n+                        responseObject = this.caseManagementRuntimeDataServiceBase.getCaseInstancesByCaseFileData(dataItemName, dataItemValue, status, page, pageSize, sort, sortOrder, withData);\n                     } else if (dataItemName != null && !dataItemName.isEmpty()) {\n                         logger.debug(\"About to look for case instances by data item name {} with status {}\", dataItemName, dataItemValue, status);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "originalPosition": 17}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDg4ODcyNw==", "bodyText": "This change is not really needed, isn't it?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r454888727", "createdAt": "2020-07-15T08:40:33Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-remote/kie-server-rest/kie-server-rest-case-mgmt/src/test/java/org/kie/server/remote/rest/casemgmt/CaseQueryResourceTest.java", "diffHunk": "@@ -80,10 +81,10 @@ public void testGetCaseInstances(){\n         boolean sortOrder = true;\n         when(runtimeDataService.getCaseInstances(status, page, pageSize, sort, sortOrder)).thenReturn(new CaseInstanceList());\n \n-        caseQueryResource.getCaseInstances(httpHeaders, null, null, null, status, page, pageSize, sort, sortOrder);\n+        caseQueryResource.getCaseInstances(httpHeaders, null, null, null, status, page, pageSize, sort, sortOrder, false);\n \n         verify(kieServerRegistry).getContainer(\"\");\n-        verify(runtimeDataService).getCaseInstancesAnyRole(status, page, pageSize, sort, sortOrder);\n+        verify(runtimeDataService).getCaseInstancesAnyRole(status, page, pageSize, sort, sortOrder, false);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkwMjU5Nw==", "bodyText": "Maybe it would good to add another test in this class for calling the new overloaded method getCaseInstancesOwnedBy", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r454902597", "createdAt": "2020-07-15T09:02:29Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-all/src/test/java/org/kie/server/integrationtests/jbpm/cases/CaseRuntimeDataServiceIntegrationTest.java", "diffHunk": "@@ -525,6 +525,20 @@ public void testGetCaseInstancesByStatusSorting() {\n         assertEquals(hrCaseId, caseInstances.get(0).getCaseId());\n         assertEquals(claimCaseId, caseInstances.get(1).getCaseId());\n     }\n+    ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NDkwNTg1Ng==", "bodyText": "I think it would be good to add a test method here for calling method getCaseInstances for calling the underling new overloaded method getCaseInstancesAnyRole withData=true", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r454905856", "createdAt": "2020-07-15T09:08:12Z", "author": {"login": "afalhambra"}, "path": "kie-server-parent/kie-server-remote/kie-server-rest/kie-server-rest-case-mgmt/src/test/java/org/kie/server/remote/rest/casemgmt/CaseQueryResourceTest.java", "diffHunk": "@@ -17,10 +17,10 @@\n package org.kie.server.remote.rest.casemgmt;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0"}, "originalPosition": 1}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/65cda48fa737b1c6ff3a6d7eb58d75d46fa771e0", "committedDate": "2020-07-14T17:22:00Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "28403030be10bc0b5a233f89a96802e969436e6c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/28403030be10bc0b5a233f89a96802e969436e6c", "committedDate": "2020-07-15T10:44:41Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "28403030be10bc0b5a233f89a96802e969436e6c", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/28403030be10bc0b5a233f89a96802e969436e6c", "committedDate": "2020-07-15T10:44:41Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "ff7e8831945cc36e7fa25925982418ed9cdfd000", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ff7e8831945cc36e7fa25925982418ed9cdfd000", "committedDate": "2020-07-15T10:51:01Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff7e8831945cc36e7fa25925982418ed9cdfd000", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/ff7e8831945cc36e7fa25925982418ed9cdfd000", "committedDate": "2020-07-15T10:51:01Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "61f52e9cc0380914c6feff737ef7c3babac254dd", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/61f52e9cc0380914c6feff737ef7c3babac254dd", "committedDate": "2020-07-15T14:45:42Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61f52e9cc0380914c6feff737ef7c3babac254dd", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/61f52e9cc0380914c6feff737ef7c3babac254dd", "committedDate": "2020-07-15T14:45:42Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "3ca686b139eb23178071b19003d653a5abd8edb5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/3ca686b139eb23178071b19003d653a5abd8edb5", "committedDate": "2020-07-15T16:26:49Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5NTU1Njc3", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#pullrequestreview-449555677", "createdAt": "2020-07-16T06:58:55Z", "commit": {"oid": "3ca686b139eb23178071b19003d653a5abd8edb5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3ca686b139eb23178071b19003d653a5abd8edb5", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/3ca686b139eb23178071b19003d653a5abd8edb5", "committedDate": "2020-07-15T16:26:49Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "b2335c9836cd61782e8b9fbf6d2b008c5118750d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/b2335c9836cd61782e8b9fbf6d2b008c5118750d", "committedDate": "2020-07-16T09:37:11Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ5ODk5MTMz", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#pullrequestreview-449899133", "createdAt": "2020-07-16T14:23:14Z", "commit": {"oid": "b2335c9836cd61782e8b9fbf6d2b008c5118750d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNDoyMzoxNFrOGytYXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xNlQxNDoyMzozNVrOGytZUA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTgyNTUwMA==", "bodyText": "Arrays should not be created for varargs parameters\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                                (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesAnyRole\", new Object[]{safeList(status), page, pageSize, sort, sortOrder, withData})) );\n          \n          \n            \n                                (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesAnyRole\", safeList(status), page, pageSize, sort, sortOrder, withData)) );", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r455825500", "createdAt": "2020-07-16T14:23:14Z", "author": {"login": "gmunozfe"}, "path": "kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client/impl/CaseServicesClientImpl.java", "diffHunk": "@@ -878,22 +878,26 @@ public void removeComment(String containerId, String caseId, String commentId) {\n         return getCaseInstances(null, page, pageSize, sort, sortOrder);\n     }\n \n-    @Override\n     public List<CaseInstance> getCaseInstances(List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder) {\n+        return getCaseInstances (status, page, pageSize, sort, sortOrder, false);\n+    }\n+\n+    @Override\n+    public List<CaseInstance> getCaseInstances(List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder, boolean withData) {\n         CaseInstanceList list = null;\n         if( config.isRest() ) {\n             Map<String, Object> valuesMap = new HashMap<String, Object>();\n \n             String queryString = getPagingQueryString(\"\", page, pageSize);\n             queryString = getAdditionalParams(queryString, \"status\", status);\n             queryString = getSortingQueryString(queryString, sort, sortOrder);\n-\n+            queryString = getAdditionalParams(queryString, \"withData\", Collections.singletonList(withData));\n             list = makeHttpGetRequestAndCreateCustomResponse(\n                     build(loadBalancer.getUrl(), CASE_QUERY_URI + \"/\" + CASE_ALL_INSTANCES_GET_URI, valuesMap) + queryString, CaseInstanceList.class);\n \n         } else {\n             CommandScript script = new CommandScript( Collections.singletonList(\n-                    (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesAnyRole\", new Object[]{safeList(status), page, pageSize, sort, sortOrder})) );\n+                    (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesAnyRole\", new Object[]{safeList(status), page, pageSize, sort, sortOrder, withData})) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2335c9836cd61782e8b9fbf6d2b008c5118750d"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NTgyNTc0NA==", "bodyText": "Same here", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#discussion_r455825744", "createdAt": "2020-07-16T14:23:35Z", "author": {"login": "gmunozfe"}, "path": "kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client/impl/CaseServicesClientImpl.java", "diffHunk": "@@ -918,20 +922,26 @@ public void removeComment(String containerId, String caseId, String commentId) {\n \n     @Override\n     public List<CaseInstance> getCaseInstancesOwnedBy(String owner, List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder) {\n+        return getCaseInstancesOwnedBy(owner, status, page, pageSize, sort,  sortOrder, false);\n+    }\n+\n+    @Override\n+    public List<CaseInstance> getCaseInstancesOwnedBy(String owner, List<String> status, Integer page, Integer pageSize, String sort, boolean sortOrder, boolean withData) {\n         CaseInstanceList list = null;\n         if( config.isRest() ) {\n             Map<String, Object> valuesMap = new HashMap<String, Object>();\n \n             String queryString = getPagingQueryString(\"?owner=\"+owner, page, pageSize);\n             queryString = getAdditionalParams(queryString, \"status\", status);\n             queryString = getSortingQueryString(queryString, sort, sortOrder);\n+            queryString = getAdditionalParams(queryString, \"withData\", Collections.singletonList(withData));\n \n             list = makeHttpGetRequestAndCreateCustomResponse(\n                     build(loadBalancer.getUrl(), CASE_QUERY_URI + \"/\" + CASE_ALL_INSTANCES_GET_URI, valuesMap) + queryString, CaseInstanceList.class);\n \n         } else {\n             CommandScript script = new CommandScript( Collections.singletonList(\n-                    (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesOwnedBy\", new Object[]{owner, safeList(status), page, pageSize, sort, sortOrder})) );\n+                    (KieServerCommand) new DescriptorCommand(\"CaseQueryService\", \"getCaseInstancesOwnedBy\", new Object[]{owner, safeList(status), page, pageSize, sort, sortOrder, withData})) );", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b2335c9836cd61782e8b9fbf6d2b008c5118750d"}, "originalPosition": 54}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b2335c9836cd61782e8b9fbf6d2b008c5118750d", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/b2335c9836cd61782e8b9fbf6d2b008c5118750d", "committedDate": "2020-07-16T09:37:11Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "f27a274a1a93c4f748b3263c6e58ec4658da08be", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/f27a274a1a93c4f748b3263c6e58ec4658da08be", "committedDate": "2020-07-16T17:30:32Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f27a274a1a93c4f748b3263c6e58ec4658da08be", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/f27a274a1a93c4f748b3263c6e58ec4658da08be", "committedDate": "2020-07-16T17:30:32Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "cf91d867ce4d72664846180ea9b0123b05654b05", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/cf91d867ce4d72664846180ea9b0123b05654b05", "committedDate": "2020-07-17T08:16:26Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "cf91d867ce4d72664846180ea9b0123b05654b05", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/cf91d867ce4d72664846180ea9b0123b05654b05", "committedDate": "2020-07-17T08:16:26Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "d21873aafdf11e7dc35339c8884e6ea5c1bb2e71", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d21873aafdf11e7dc35339c8884e6ea5c1bb2e71", "committedDate": "2020-07-17T11:15:52Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d21873aafdf11e7dc35339c8884e6ea5c1bb2e71", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/d21873aafdf11e7dc35339c8884e6ea5c1bb2e71", "committedDate": "2020-07-17T11:15:52Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "7303dde0989f5405137d93abbebb8f0e8bcf9464", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/7303dde0989f5405137d93abbebb8f0e8bcf9464", "committedDate": "2020-07-17T14:43:33Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26842d33174cf70bc31a23be422a44997f09d70b", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/26842d33174cf70bc31a23be422a44997f09d70b", "committedDate": "2020-07-20T08:30:19Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7303dde0989f5405137d93abbebb8f0e8bcf9464", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/7303dde0989f5405137d93abbebb8f0e8bcf9464", "committedDate": "2020-07-17T14:43:33Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}, "afterCommit": {"oid": "26842d33174cf70bc31a23be422a44997f09d70b", "author": {"user": {"login": "fjtirado", "name": "Francisco Javier Tirado Sarti"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/26842d33174cf70bc31a23be422a44997f09d70b", "committedDate": "2020-07-20T08:30:19Z", "message": "[JBPM-9223] include case file\n\nAdding new \"withData\" flag to CaseAdminResource.getCaseInstances. When\nthis flag is true, caseFile information will be include in the response\nitems"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUzOTQ4Mzgy", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2151#pullrequestreview-453948382", "createdAt": "2020-07-23T08:58:26Z", "commit": {"oid": "26842d33174cf70bc31a23be422a44997f09d70b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1293, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}