{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNTE3ODE5", "number": 2344, "title": "[JBPM-9529] Business-central REST API is allowing container creation \u2026", "bodyText": "\u2026with empty container id\nThank you for submitting this pull request\nJIRA: (https://issues.redhat.com/browse/JBPM-9529)", "createdAt": "2020-12-18T12:36:15Z", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344", "merged": true, "mergeCommit": {"oid": "198be20984af1255e298281a6593957a3bd39d76"}, "closed": true, "closedAt": "2021-01-11T20:53:55Z", "author": {"login": "abhijithumbe"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdtcAzngFqTU2MjQzOTMyMw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABduKX9FAFqTU2NDM0MzI0Nw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYyNDM5MzIz", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#pullrequestreview-562439323", "createdAt": "2021-01-06T09:22:03Z", "commit": {"oid": "b949d1ea2be741b743678e3fadc495a99b2e4e22"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzNTAxODM3", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#pullrequestreview-563501837", "createdAt": "2021-01-07T13:54:36Z", "commit": {"oid": "5220281aa97ce9e0a235d6e9559fc7d5efc890c1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5220281aa97ce9e0a235d6e9559fc7d5efc890c1", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/5220281aa97ce9e0a235d6e9559fc7d5efc890c1", "committedDate": "2021-01-07T12:56:25Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}, "afterCommit": {"oid": "de82dd669e4276c249cabdad834c260125231341", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/de82dd669e4276c249cabdad834c260125231341", "committedDate": "2021-01-07T14:22:22Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTYzNzUxNjg1", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#pullrequestreview-563751685", "createdAt": "2021-01-07T19:12:32Z", "commit": {"oid": "de82dd669e4276c249cabdad834c260125231341"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxOToxMjozM1rOIP4sfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wN1QxOToxMzoyNlrOIP4uBw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUyODQ0Ng==", "bodyText": "Can containerSpec or getID() return a null value?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#discussion_r553528446", "createdAt": "2021-01-07T19:12:33Z", "author": {"login": "adrielparedes"}, "path": "kie-server-parent/kie-server-controller/kie-server-controller-impl/src/main/java/org/kie/server/controller/impl/service/SpecManagementServiceImpl.java", "diffHunk": "@@ -58,6 +58,10 @@ public synchronized void saveContainerSpec(String serverTemplateId,\n             throw new KieServerControllerIllegalArgumentException(\"No server template found for id \" + serverTemplateId);\n         }\n \n+        if (containerSpec.getId().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de82dd669e4276c249cabdad834c260125231341"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1MzUyODgzOQ==", "bodyText": "Can containerSpec or getID() return a null value?", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#discussion_r553528839", "createdAt": "2021-01-07T19:13:26Z", "author": {"login": "adrielparedes"}, "path": "kie-server-parent/kie-server-controller/kie-server-controller-impl/src/main/java/org/kie/server/controller/impl/service/SpecManagementServiceImpl.java", "diffHunk": "@@ -94,6 +98,12 @@ public synchronized void updateContainerSpec(String serverTemplateId, String con\n             throw new KieServerControllerIllegalArgumentException(\"No server template found for id \" + serverTemplateId);\n         }\n \n+\n+        if (containerSpec.getId().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "de82dd669e4276c249cabdad834c260125231341"}, "originalPosition": 16}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de82dd669e4276c249cabdad834c260125231341", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/de82dd669e4276c249cabdad834c260125231341", "committedDate": "2021-01-07T14:22:22Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}, "afterCommit": {"oid": "40e25a2498df802aa2f0273db106d154102ebcd5", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/40e25a2498df802aa2f0273db106d154102ebcd5", "committedDate": "2021-01-08T13:11:10Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MjU1NzU4", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#pullrequestreview-564255758", "createdAt": "2021-01-08T13:25:20Z", "commit": {"oid": "40e25a2498df802aa2f0273db106d154102ebcd5"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxMzoyNToyMFrOIQR6kA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0wOFQxMzoyNToyMFrOIQR6kA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1Mzk0MTY0OA==", "bodyText": "In this case if getId() is null it will throw a NPE, you should check if containerSpec.getId()==null before checking getId().isEmpty(). Same in code below. To check what I'm saying add a small test just for null values and you will see that behavior", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#discussion_r553941648", "createdAt": "2021-01-08T13:25:20Z", "author": {"login": "adrielparedes"}, "path": "kie-server-parent/kie-server-controller/kie-server-controller-impl/src/main/java/org/kie/server/controller/impl/service/SpecManagementServiceImpl.java", "diffHunk": "@@ -58,6 +58,10 @@ public synchronized void saveContainerSpec(String serverTemplateId,\n             throw new KieServerControllerIllegalArgumentException(\"No server template found for id \" + serverTemplateId);\n         }\n \n+        if (containerSpec.getId().isEmpty() || containerSpec.getId()==null ) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "40e25a2498df802aa2f0273db106d154102ebcd5"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1e5973d0907e8d94e38319ac1a1382666e264d16", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/1e5973d0907e8d94e38319ac1a1382666e264d16", "committedDate": "2021-01-08T14:31:57Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40e25a2498df802aa2f0273db106d154102ebcd5", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/40e25a2498df802aa2f0273db106d154102ebcd5", "committedDate": "2021-01-08T13:11:10Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}, "afterCommit": {"oid": "1e5973d0907e8d94e38319ac1a1382666e264d16", "author": {"user": {"login": "abhijithumbe", "name": null}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/1e5973d0907e8d94e38319ac1a1382666e264d16", "committedDate": "2021-01-08T14:31:57Z", "message": "[JBPM-9529] Business-central REST API is allowing container creation with empty container id"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY0MzQzMjQ3", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2344#pullrequestreview-564343247", "createdAt": "2021-01-08T15:22:58Z", "commit": {"oid": "1e5973d0907e8d94e38319ac1a1382666e264d16"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1141, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}