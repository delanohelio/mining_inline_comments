{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUzNTIxMzQx", "number": 2163, "title": "[JBPM-9247] Fields attribute isn't processed in Accept header", "bodyText": "Signed-off-by: Karel Suta ksuta@redhat.com", "createdAt": "2020-07-20T14:43:40Z", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163", "merged": true, "mergeCommit": {"oid": "3f5e2ac7092da6909440f0b5196234573cd60ae0"}, "closed": true, "closedAt": "2020-07-22T08:19:01Z", "author": {"login": "sutaakar"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc2zoCcgFqTQ1MTczMjMxMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABc3G4RugFqTQ1MjQ5OTEwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUxNzMyMzEw", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163#pullrequestreview-451732310", "createdAt": "2020-07-20T15:44:56Z", "commit": {"oid": "eacaa0937827cc74bdd62fb20a5a40ed89686f52"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNTo0NDo1NlrOG0UHiw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMFQxNTo0NDo1NlrOG0UHiw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1NzUwODc0Nw==", "bodyText": "Just for completeness, you can add\nAssertions.assertThat(target.request().header(\"accept\", MediaType.APPLICATION_JSON + \";fields=not_null\").get(String.class)).doesNotContain(\"null\");", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163#discussion_r457508747", "createdAt": "2020-07-20T15:44:56Z", "author": {"login": "fjtirado"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/rest/JbpmRestIntegrationTest.java", "diffHunk": "@@ -218,6 +229,21 @@ public void testBasicJbpmRequestManyAcceptHeaders() throws Exception {\n \n     }\n \n+    @Test\n+    public void testBasicJbpmRequestAcceptHeadersStrictAndField() throws Exception {\n+        assumeTrue(marshallingFormat == MarshallingFormat.JSON);\n+\n+        long processId = processClient.startProcess(CONTAINER_ID, PROCESS_ID_USERTASK);\n+        ProcessInstance desc = processClient.getProcessInstance(CONTAINER_ID, processId);\n+        TaskSummary[] tasks = desc.getActiveUserTasks().getTasks();\n+        assertTrue(tasks.length > 0);\n+\n+        WebTarget target = newRequest(RestURI.build(TestConfig.getKieServerHttpUrl(), QUERY_URI + \"/\" + TASK_GET_URI, Collections.singletonMap(TASK_INSTANCE_ID, tasks[0].getId())));\n+        Assertions.assertThat(target.request(MediaType.APPLICATION_JSON_TYPE).get(String.class)).contains(\"null\");\n+        Assertions.assertThat(target.request().header(\"content-type\", MediaType.APPLICATION_JSON + \";fields=not_null;strict=true\").get(String.class)).doesNotContain(\"null\");\n+        Assertions.assertThat(target.request().header(\"accept\", MediaType.APPLICATION_JSON + \";fields=not_null;strict=true\").get(String.class)).doesNotContain(\"null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "eacaa0937827cc74bdd62fb20a5a40ed89686f52"}, "originalPosition": 76}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eacaa0937827cc74bdd62fb20a5a40ed89686f52", "author": {"user": {"login": "sutaakar", "name": "Karel Suta"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/eacaa0937827cc74bdd62fb20a5a40ed89686f52", "committedDate": "2020-07-20T14:42:39Z", "message": "[JBPM-9247] Fields attribute isn't processed in Accept header\n\nSigned-off-by: Karel Suta <ksuta@redhat.com>"}, "afterCommit": {"oid": "67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1", "author": {"user": {"login": "sutaakar", "name": "Karel Suta"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1", "committedDate": "2020-07-21T06:46:09Z", "message": "[JBPM-9247] Fields attribute isn't processed in Accept header\n\nSigned-off-by: Karel Suta <ksuta@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyMzQ5MzYw", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163#pullrequestreview-452349360", "createdAt": "2020-07-21T11:04:39Z", "commit": {"oid": "67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMTowNDozOVrOG0y_NQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yMVQxMTowNDozOVrOG0y_NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1ODAxNDUxNw==", "bodyText": "And just for complete completeness, you can add\nAssertions.assertThat(target.request().header(\"content-type\", MediaType.APPLICATION_JSON + \";fields=not_null\").get(String.class)).doesNotContain(\"null\");", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163#discussion_r458014517", "createdAt": "2020-07-21T11:04:39Z", "author": {"login": "MarianMacik"}, "path": "kie-server-parent/kie-server-tests/kie-server-integ-tests-jbpm/src/test/java/org/kie/server/integrationtests/jbpm/rest/JbpmRestIntegrationTest.java", "diffHunk": "@@ -218,6 +229,22 @@ public void testBasicJbpmRequestManyAcceptHeaders() throws Exception {\n \n     }\n \n+    @Test\n+    public void testBasicJbpmRequestAcceptHeadersStrictAndField() throws Exception {\n+        assumeTrue(marshallingFormat == MarshallingFormat.JSON);\n+\n+        long processId = processClient.startProcess(CONTAINER_ID, PROCESS_ID_USERTASK);\n+        ProcessInstance desc = processClient.getProcessInstance(CONTAINER_ID, processId);\n+        TaskSummary[] tasks = desc.getActiveUserTasks().getTasks();\n+        assertTrue(tasks.length > 0);\n+\n+        WebTarget target = newRequest(RestURI.build(TestConfig.getKieServerHttpUrl(), QUERY_URI + \"/\" + TASK_GET_URI, Collections.singletonMap(TASK_INSTANCE_ID, tasks[0].getId())));\n+        Assertions.assertThat(target.request(MediaType.APPLICATION_JSON_TYPE).get(String.class)).contains(\"null\");\n+        Assertions.assertThat(target.request().header(\"content-type\", MediaType.APPLICATION_JSON + \";fields=not_null;strict=true\").get(String.class)).doesNotContain(\"null\");\n+        Assertions.assertThat(target.request().header(\"accept\", MediaType.APPLICATION_JSON + \";fields=not_null;strict=true\").get(String.class)).doesNotContain(\"null\");\n+        Assertions.assertThat(target.request().header(\"accept\", MediaType.APPLICATION_JSON + \";fields=not_null\").get(String.class)).doesNotContain(\"null\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1"}, "originalPosition": 77}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70f39d0fe63c11ae5649af3e80501d4c37a88c2e", "author": {"user": {"login": "sutaakar", "name": "Karel Suta"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/70f39d0fe63c11ae5649af3e80501d4c37a88c2e", "committedDate": "2020-07-21T11:14:01Z", "message": "[JBPM-9247] Fields attribute isn't processed in Accept header\n\nSigned-off-by: Karel Suta <ksuta@redhat.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1", "author": {"user": {"login": "sutaakar", "name": "Karel Suta"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/67d8e2f7b59fbae5f797d08d9fc70ec0530d83b1", "committedDate": "2020-07-21T06:46:09Z", "message": "[JBPM-9247] Fields attribute isn't processed in Accept header\n\nSigned-off-by: Karel Suta <ksuta@redhat.com>"}, "afterCommit": {"oid": "70f39d0fe63c11ae5649af3e80501d4c37a88c2e", "author": {"user": {"login": "sutaakar", "name": "Karel Suta"}}, "url": "https://github.com/kiegroup/droolsjbpm-integration/commit/70f39d0fe63c11ae5649af3e80501d4c37a88c2e", "committedDate": "2020-07-21T11:14:01Z", "message": "[JBPM-9247] Fields attribute isn't processed in Accept header\n\nSigned-off-by: Karel Suta <ksuta@redhat.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDUyNDk5MTAx", "url": "https://github.com/kiegroup/droolsjbpm-integration/pull/2163#pullrequestreview-452499101", "createdAt": "2020-07-21T14:12:49Z", "commit": {"oid": "70f39d0fe63c11ae5649af3e80501d4c37a88c2e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1306, "cost": 1, "resetAt": "2021-11-01T15:33:45Z"}}}