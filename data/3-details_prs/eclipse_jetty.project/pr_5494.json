{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA4NDQ1MTUx", "number": 5494, "title": "Issue #5492 - Adding java.features.* start properties", "bodyText": "Simplifying alpn start modules in the process.\n(from 11 to 3)\n\nSigned-off-by: Joakim Erdfelt joakim.erdfelt@gmail.com", "createdAt": "2020-10-22T17:21:49Z", "url": "https://github.com/eclipse/jetty.project/pull/5494", "merged": true, "mergeCommit": {"oid": "bbcae2377487b4af5d9ae000e8317cb45b329081"}, "closed": true, "closedAt": "2021-02-18T22:04:39Z", "author": {"login": "joakime"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVFT9JAH2gAyNTA4NDQ1MTUxOjRkZGQxYTFhOGM3Y2VkNTM3ZmRiNDcwMTEzZTUyMGIzN2EwMzNhMmM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd7YksVAFqTU5MzQ1ODUxMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4ddd1a1a8c7ced537fdb470113e520b37a033a2c", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/4ddd1a1a8c7ced537fdb470113e520b37a033a2c", "committedDate": "2020-10-22T17:20:58Z", "message": "Issue #5492 - Adding java.features.* start properties\n\n+ Simplifying alpn start modules in the process.\n  (from 11 to 3)\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE1NDE4OTc2", "url": "https://github.com/eclipse/jetty.project/pull/5494#pullrequestreview-515418976", "createdAt": "2020-10-23T07:43:35Z", "commit": {"oid": "4ddd1a1a8c7ced537fdb470113e520b37a033a2c"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzo0MzozNlrOHnCYtw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yM1QwNzo0MzozNlrOHnCYtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMDY5NTYwNw==", "bodyText": "As discussed, I won't add features that we don't use -- keep only java.feature.alpn.\nFor example, loom won't be available in 16 AFAIK, and other features may be available only with --enable-preview so it's not only the java version, we may need to sniff the existence of classes/methods, etc.", "url": "https://github.com/eclipse/jetty.project/pull/5494#discussion_r510695607", "createdAt": "2020-10-23T07:43:36Z", "author": {"login": "sbordet"}, "path": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "diffHunk": "@@ -1505,6 +1505,12 @@ public void setProperty(String key, String value, String source)\n             {\n                 JavaVersion ver = JavaVersion.parse(value);\n                 properties.setProperty(\"java.version.platform\", Integer.toString(ver.getPlatform()), source);\n+\n+                // features built into java.\n+                properties.setProperty(\"java.feature.alpn\", Boolean.toString(ver.getPlatform() >= 9), source);\n+                properties.setProperty(\"java.feature.jpms\", Boolean.toString(ver.getPlatform() >= 9), source);\n+                properties.setProperty(\"java.feature.loom\", Boolean.toString(ver.getPlatform() >= 16), source);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ddd1a1a8c7ced537fdb470113e520b37a033a2c"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE2OTg5NTIy", "url": "https://github.com/eclipse/jetty.project/pull/5494#pullrequestreview-516989522", "createdAt": "2020-10-26T16:59:58Z", "commit": {"oid": "4ddd1a1a8c7ced537fdb470113e520b37a033a2c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1OTo1OVrOHoZc8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yNlQxNjo1OTo1OVrOHoZc8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjEyMjA5Nw==", "bodyText": "Does \"feature\" add much?\nHow about just \"java.alpn\" ?", "url": "https://github.com/eclipse/jetty.project/pull/5494#discussion_r512122097", "createdAt": "2020-10-26T16:59:59Z", "author": {"login": "gregw"}, "path": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "diffHunk": "@@ -1505,6 +1505,12 @@ public void setProperty(String key, String value, String source)\n             {\n                 JavaVersion ver = JavaVersion.parse(value);\n                 properties.setProperty(\"java.version.platform\", Integer.toString(ver.getPlatform()), source);\n+\n+                // features built into java.\n+                properties.setProperty(\"java.feature.alpn\", Boolean.toString(ver.getPlatform() >= 9), source);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4ddd1a1a8c7ced537fdb470113e520b37a033a2c"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "de5b8bc84a0abd91c629d5cc9dadb977ca9992c8", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/de5b8bc84a0abd91c629d5cc9dadb977ca9992c8", "committedDate": "2021-02-15T18:59:48Z", "message": "Merge remote-tracking branch 'origin/jetty-9.4.x' into jetty-9.4.x-5492-java-features-start-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1b15c1e4a33cfe23ebcb5bae1aea34ed885389d9", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/1b15c1e4a33cfe23ebcb5bae1aea34ed885389d9", "committedDate": "2021-02-15T19:09:24Z", "message": "Issue #5492 - Changing from \"java.feature.*\" to \"runtime.feature.*\"\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7ed68d068133cc8ce54d68cda4f8ce8cf27f3827", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/7ed68d068133cc8ce54d68cda4f8ce8cf27f3827", "committedDate": "2021-02-15T20:25:09Z", "message": "Issue #5492 - Updating jetty-start property test expectations\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkxMDgzNTAw", "url": "https://github.com/eclipse/jetty.project/pull/5494#pullrequestreview-591083500", "createdAt": "2021-02-16T10:24:49Z", "commit": {"oid": "7ed68d068133cc8ce54d68cda4f8ce8cf27f3827"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQxMDoyNDo0OVrOIl_rSA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0xNlQxMDoyNDo0OVrOIl_rSA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3NjcxMTQ5Ng==", "bodyText": "*.feature.jpms is not used, so I would remove it -- no need to leave in the code unnecessary stuff.", "url": "https://github.com/eclipse/jetty.project/pull/5494#discussion_r576711496", "createdAt": "2021-02-16T10:24:49Z", "author": {"login": "sbordet"}, "path": "jetty-start/src/main/java/org/eclipse/jetty/start/StartArgs.java", "diffHunk": "@@ -1505,6 +1505,13 @@ public void setProperty(String key, String value, String source)\n             {\n                 JavaVersion ver = JavaVersion.parse(value);\n                 properties.setProperty(\"java.version.platform\", Integer.toString(ver.getPlatform()), source);\n+\n+                // features built into java.\n+                // In Jetty 10+ these will always be true, but still need to stick around for users that\n+                // want to move between Jetty 9.4.x and 10.0.x+\n+                properties.setProperty(\"runtime.feature.alpn\", Boolean.toString(isMethodAvailable(javax.net.ssl.SSLParameters.class, \"getApplicationProtocols\", null)), source);\n+                properties.setProperty(\"runtime.feature.jpms\", Boolean.toString(isClassAvailable(\"java.lang.ModuleLayer\")), source);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7ed68d068133cc8ce54d68cda4f8ce8cf27f3827"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2aa1a68079be674a8f1b77945c70b0d5728ccaca", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/2aa1a68079be674a8f1b77945c70b0d5728ccaca", "committedDate": "2021-02-18T16:55:34Z", "message": "Merge remote-tracking branch 'origin/jetty-9.4.x' into jetty-9.4.x-5492-java-features-start-properties"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2bed1368bfea82ad48311e74c027c4c20b122a6", "author": {"user": {"login": "joakime", "name": "Joakim Erdfelt"}}, "url": "https://github.com/eclipse/jetty.project/commit/f2bed1368bfea82ad48311e74c027c4c20b122a6", "committedDate": "2021-02-18T17:14:54Z", "message": "Issue #5492 - changed from review\n\nSigned-off-by: Joakim Erdfelt <joakim.erdfelt@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTkzNDU4NTEy", "url": "https://github.com/eclipse/jetty.project/pull/5494#pullrequestreview-593458512", "createdAt": "2021-02-18T17:16:34Z", "commit": {"oid": "f2bed1368bfea82ad48311e74c027c4c20b122a6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4982, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}