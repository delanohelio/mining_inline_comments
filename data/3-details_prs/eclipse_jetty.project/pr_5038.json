{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ2ODMyNjU1", "number": 5038, "title": "Issue #5029 Relative Redirection", "bodyText": "Provide option to allow relative redirection.", "createdAt": "2020-07-09T12:36:43Z", "url": "https://github.com/eclipse/jetty.project/pull/5038", "merged": true, "mergeCommit": {"oid": "5c1dda3f7cfb0ba8f67aef1554bd91125f68db5b"}, "closed": true, "closedAt": "2020-07-15T21:14:27Z", "author": {"login": "gregw"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczOTCUgH2gAyNDQ2ODMyNjU1OmM4YjhkNzQ5M2UxODM5OWJhNGFiYWMxNTNiMGY4ZjIyY2U5M2RlZDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc1KWCBgFqTQ0ODkzMzM5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c8b8d7493e18399ba4abac153b0f8f22ce93ded4", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/c8b8d7493e18399ba4abac153b0f8f22ce93ded4", "committedDate": "2020-07-09T12:35:41Z", "message": "Issue #5029 Relative Redirection\n\nProvide option to allow relative redirection"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2b599b21c237a5f72b98c3a687ca358571cfe42d", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/2b599b21c237a5f72b98c3a687ca358571cfe42d", "committedDate": "2020-07-09T19:20:19Z", "message": "Issue #5029 Relative Redirection\n\nFixed checkstyle"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2MzkwNDkw", "url": "https://github.com/eclipse/jetty.project/pull/5038#pullrequestreview-446390490", "createdAt": "2020-07-10T13:14:45Z", "commit": {"oid": "2b599b21c237a5f72b98c3a687ca358571cfe42d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzoxNDo0NVrOGv23cw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxMzoxNjo0M1rOGv27sA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgzNTE4Nw==", "bodyText": "I don't like the name.\nIt's not whether relative redirects are allowed or not.\nIt's about whether we generate relative redirects or not.\ngenerateRelativeRedirects?\nuseRelativeRedirects?", "url": "https://github.com/eclipse/jetty.project/pull/5038#discussion_r452835187", "createdAt": "2020-07-10T13:14:45Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/main/config/etc/jetty.xml", "diffHunk": "@@ -74,6 +74,7 @@\n       <Set name=\"requestCookieCompliance\"><Call class=\"org.eclipse.jetty.http.CookieCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.httpConfig.requestCookieCompliance\" deprecated=\"jetty.httpConfig.cookieCompliance\" default=\"RFC6265\"/></Arg></Call></Set>\n       <Set name=\"responseCookieCompliance\"><Call class=\"org.eclipse.jetty.http.CookieCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.httpConfig.responseCookieCompliance\" default=\"RFC6265\"/></Arg></Call></Set>\n       <Set name=\"multiPartFormDataCompliance\"><Call class=\"org.eclipse.jetty.server.MultiPartFormDataCompliance\" name=\"valueOf\"><Arg><Property name=\"jetty.httpConfig.multiPartFormDataCompliance\" default=\"RFC7578\"/></Arg></Call></Set>\n+      <Set name=\"relativeRedirectionAllowed\"><Property name=\"jetty.httpConfig.relativeRedirectionAllowed\" default=\"false\"/></Set>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b599b21c237a5f72b98c3a687ca358571cfe42d"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MjgzNjI3Mg==", "bodyText": "Is the Servlet specification mandating absolute redirects? Just to be sure that we actually can.", "url": "https://github.com/eclipse/jetty.project/pull/5038#discussion_r452836272", "createdAt": "2020-07-10T13:16:43Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "diffHunk": "@@ -506,7 +506,9 @@ public void sendRedirect(int code, String location) throws IOException\n \n         if (!URIUtil.hasScheme(location))\n         {\n-            StringBuilder buf = _channel.getRequest().getRootURL();\n+            StringBuilder buf = _channel.getHttpConfiguration().isRelativeRedirectionAllowed()\n+                ? new StringBuilder()\n+                : _channel.getRequest().getRootURL();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b599b21c237a5f72b98c3a687ca358571cfe42d"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a91f2853c27726aa5d7998db670bd23e0168f77", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/4a91f2853c27726aa5d7998db670bd23e0168f77", "committedDate": "2020-07-15T08:51:44Z", "message": "rename from review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ4OTMzMzk5", "url": "https://github.com/eclipse/jetty.project/pull/5038#pullrequestreview-448933399", "createdAt": "2020-07-15T13:07:11Z", "commit": {"oid": "4a91f2853c27726aa5d7998db670bd23e0168f77"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 363, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}