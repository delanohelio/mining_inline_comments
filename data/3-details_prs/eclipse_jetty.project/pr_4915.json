{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNzkyOTg4", "number": 4915, "title": "Issue #4885 do not allow cookies to be set from an include", "bodyText": "Closes #4885\nAccording to the servlet spec section 9.3, an application cannot set a cookie on a response during an include.", "createdAt": "2020-05-27T11:40:06Z", "url": "https://github.com/eclipse/jetty.project/pull/4915", "merged": true, "mergeCommit": {"oid": "84cb97e6bda1ae300a43a6138a096d9e4e979266"}, "closed": true, "closedAt": "2020-05-28T08:51:40Z", "author": {"login": "janbartel"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABclXq6TAH2gAyNDIzNzkyOTg4OmQxZGVjZDM4ZWMxODJiNmJlMTRiODI1ZGU0Y2QxN2ZiZWRhM2I1MjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABclf5J_AFqTQxOTYxMTMyMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d1decd38ec182b6be14b825de4cd17fbeda3b522", "author": {"user": {"login": "janbartel", "name": "Jan Bartel"}}, "url": "https://github.com/eclipse/jetty.project/commit/d1decd38ec182b6be14b825de4cd17fbeda3b522", "committedDate": "2020-05-27T11:35:58Z", "message": "Issue #4885 do not allow cookies to be set from an include\n\nSigned-off-by: Jan Bartel <janb@webtide.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5MzA4MDQ4", "url": "https://github.com/eclipse/jetty.project/pull/4915#pullrequestreview-419308048", "createdAt": "2020-05-27T14:56:26Z", "commit": {"oid": "d1decd38ec182b6be14b825de4cd17fbeda3b522"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDo1NjoyNlrOGbOjyg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yN1QxNDo1NjoyNlrOGbOjyg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTIwMzI3NA==", "bodyText": "So it silently fails if an attempt is made to addCookie during an INCLUDE?", "url": "https://github.com/eclipse/jetty.project/pull/4915#discussion_r431203274", "createdAt": "2020-05-27T14:56:26Z", "author": {"login": "joakime"}, "path": "jetty-server/src/main/java/org/eclipse/jetty/server/Response.java", "diffHunk": "@@ -280,27 +280,31 @@ else if (!cookie.getPath().equals(oldCookie.getPath()))\n \n     @Override\n     public void addCookie(Cookie cookie)\n-    {\n-        if (StringUtil.isBlank(cookie.getName()))\n-            throw new IllegalArgumentException(\"Cookie.name cannot be blank/null\");\n-\n-        String comment = cookie.getComment();\n-        // HttpOnly was supported as a comment in cookie flags before the java.net.HttpCookie implementation so need to check that\n-        boolean httpOnly = cookie.isHttpOnly() || HttpCookie.isHttpOnlyInComment(comment);\n-        SameSite sameSite = HttpCookie.getSameSiteFromComment(comment);\n-        comment = HttpCookie.getCommentWithoutAttributes(comment);\n-\n-        addCookie(new HttpCookie(\n-            cookie.getName(),\n-            cookie.getValue(),\n-            cookie.getDomain(),\n-            cookie.getPath(),\n-            (long)cookie.getMaxAge(),\n-            httpOnly,\n-            cookie.getSecure(),\n-            comment,\n-            cookie.getVersion(),\n-            sameSite));\n+    { \n+        //Servlet Spec 9.3 Include method: cannot set a cookie if handling an include\n+        if (isMutable())\n+        {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d1decd38ec182b6be14b825de4cd17fbeda3b522"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE5NjExMzIz", "url": "https://github.com/eclipse/jetty.project/pull/4915#pullrequestreview-419611323", "createdAt": "2020-05-27T21:10:46Z", "commit": {"oid": "d1decd38ec182b6be14b825de4cd17fbeda3b522"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 423, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}