{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIzNTMwODU3", "number": 4912, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODoxNzoyM1rOEEMNNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODoxNzoyM1rOEEMNNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcyODI5NzQ5OnYy", "diffSide": "RIGHT", "path": "jetty-websocket/websocket-jetty-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODoxNzoyM1rOGhqAbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQwODoxNzoyM1rOGhqAbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzk0NDQzMA==", "bodyText": "We have just synchronized above, so can this check and change be done in that block?", "url": "https://github.com/eclipse/jetty.project/pull/4912#discussion_r437944430", "createdAt": "2020-06-10T08:17:23Z", "author": {"login": "gregw"}, "path": "jetty-websocket/websocket-jetty-common/src/main/java/org/eclipse/jetty/websocket/common/JettyWebSocketFrameHandler.java", "diffHunk": "@@ -206,6 +206,16 @@ public void onFrame(Frame frame, Callback callback)\n             }\n         }\n \n+        // If we have received a close frame, set state to closed to disallow suspends and resumes.\n+        byte opCode = frame.getOpCode();\n+        if (opCode == OpCode.CLOSE)\n+        {\n+            synchronized (this)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "277561e48baba8d6867ad91a7d536dfea48f62d3"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2570, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}