{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1OTc1NTQ2", "number": 4580, "title": "Fixes #4577 IPAccessHandler in context", "bodyText": "Fixes and tests #4577 IPAccessHandler in context by using target instead of pathInfo for path matching.\nSigned-off-by: Greg Wilkins gregw@webtide.com", "createdAt": "2020-02-17T07:14:02Z", "url": "https://github.com/eclipse/jetty.project/pull/4580", "merged": true, "mergeCommit": {"oid": "9bb684065845cfaa38cb79d2534d78ee66106f76"}, "closed": true, "closedAt": "2020-02-25T07:46:02Z", "author": {"login": "gregw"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcFH-QDAH2gAyMzc1OTc1NTQ2OjgwZTQ4MWVhMWFmN2ZiYjFiOGM3NmJjMjkxMzNmM2ZmOTM5ZjI1MWQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcHagwqAFqTM2MzI2OTc0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "80e481ea1af7fbb1b8c76bc29133f3ff939f251d", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/80e481ea1af7fbb1b8c76bc29133f3ff939f251d", "committedDate": "2020-02-17T07:13:02Z", "message": "Fixes #4577 IPAccessHandler in context\n\nFixes and tests #4577 IPAccessHandler in context by using target instead of pathInfo for path matching.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYyNDQxNDY0", "url": "https://github.com/eclipse/jetty.project/pull/4580#pullrequestreview-362441464", "createdAt": "2020-02-21T07:32:29Z", "commit": {"oid": "80e481ea1af7fbb1b8c76bc29133f3ff939f251d"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNzozMjozMFrOFst3DQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwNzozNjo1NVrOFst8ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQzMzAzNw==", "bodyText": "Use try-with-resources for the Socket.", "url": "https://github.com/eclipse/jetty.project/pull/4580#discussion_r382433037", "createdAt": "2020-02-21T07:32:30Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/IPAccessHandlerTest.java", "diffHunk": "@@ -119,6 +136,44 @@ public void testHandler(String white, String black, String host, String uri, Str\n         }\n     }\n \n+    @ParameterizedTest\n+    @MethodSource(\"data\")\n+    public void testContext(String white, String black, String host, String uri, String code, boolean byPath)\n+        throws Exception\n+    {\n+        ContextHandler context = new ContextHandler(_server, \"/ctx\");\n+        context.setHandler(_handler);\n+        _server.setHandler(context);\n+        _server.start();\n+\n+        _handler.setWhite(white.split(\";\", -1));\n+        _handler.setBlack(black.split(\";\", -1));\n+        _handler.setWhiteListByPath(byPath);\n+\n+        String request = \"GET /ctx\" + uri + \" HTTP/1.1\\n\" + \"Host: \" + host + \"\\n\\n\";\n+        Socket socket = new Socket(\"127.0.0.1\", _connector.getLocalPort());\n+        socket.setSoTimeout(5000);\n+        try", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80e481ea1af7fbb1b8c76bc29133f3ff939f251d"}, "originalPosition": 95}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQzNDQ0Mg==", "bodyText": "Now that you have changed the test annotation to be per-instance, all fields should not be static: _server, _connector, _handler.", "url": "https://github.com/eclipse/jetty.project/pull/4580#discussion_r382434442", "createdAt": "2020-02-21T07:36:55Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/test/java/org/eclipse/jetty/server/handler/IPAccessHandlerTest.java", "diffHunk": "@@ -57,30 +57,44 @@\n     private static NetworkConnector _connector;\n     private static IPAccessHandler _handler;\n \n-    @BeforeAll\n-    public static void setUp()\n+    @BeforeEach", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "80e481ea1af7fbb1b8c76bc29133f3ff939f251d"}, "originalPosition": 17}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d95f2fbea3a7cac24026b14208240301f21a0154", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/d95f2fbea3a7cac24026b14208240301f21a0154", "committedDate": "2020-02-21T19:33:01Z", "message": "Tests #4577 IPAccessHandler target\n\nUpdates from review.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5480da40090a576a6a02c8acb4eb8c75bc887832", "author": {"user": {"login": "gregw", "name": "Greg Wilkins"}}, "url": "https://github.com/eclipse/jetty.project/commit/5480da40090a576a6a02c8acb4eb8c75bc887832", "committedDate": "2020-02-24T09:52:35Z", "message": "Issue #4577 IpAccessHandler NPE\n\nMatch on full URI path rather than target.\n\nSigned-off-by: Greg Wilkins <gregw@webtide.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYzMjY5NzQy", "url": "https://github.com/eclipse/jetty.project/pull/4580#pullrequestreview-363269742", "createdAt": "2020-02-24T09:56:52Z", "commit": {"oid": "5480da40090a576a6a02c8acb4eb8c75bc887832"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 454, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}