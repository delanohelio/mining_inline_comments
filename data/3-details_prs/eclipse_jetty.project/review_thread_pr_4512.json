{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY2MjUyODYy", "number": 4512, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowMjozMFrODbOvfQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowODoxMFrODbO3Bg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5ODc5Njc3OnYy", "diffSide": "RIGHT", "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowMjozMFrOFimBMA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowMjozMFrOFimBMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxODgwMA==", "bodyText": "This should not be a log warn.... at least no a log warn on every single cookie set as that will be very verbose.\nI think debug is fine.", "url": "https://github.com/eclipse/jetty.project/pull/4512#discussion_r371818800", "createdAt": "2020-01-28T14:02:30Z", "author": {"login": "gregw"}, "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "diffHunk": "@@ -448,6 +460,39 @@ public static SameSite getSameSiteFromComment(String comment)\n         return null;\n     }\n \n+    /**\n+     * Get the default value for SameSite cookie attribute, if one\n+     * has been set for the given context.\n+     * \n+     * @param context the context to check for default SameSite value\n+     * @return the default SameSite value or null if one does not exist\n+     * @throws IllegalStateException if the default value is not a permitted value\n+     */\n+    public static SameSite getSameSiteDefault(ServletContext context)\n+    {\n+        if (context == null)\n+            return null;\n+        Object o = context.getAttribute(SAME_SITE_DEFAULT_ATTRIBUTE);\n+        if (o == null)\n+        {\n+            LOG.warn(\"No default value for SameSite\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f52373bee48fe3b4ef163d1ca74a3ab32bc865b7"}, "originalPosition": 62}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5ODgwMDg2OnYy", "diffSide": "RIGHT", "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowNDowNlrOFimEIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowNDowNlrOFimEIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgxOTU1NA==", "bodyText": "You should use o.toString() rather than a cast.", "url": "https://github.com/eclipse/jetty.project/pull/4512#discussion_r371819554", "createdAt": "2020-01-28T14:04:06Z", "author": {"login": "gregw"}, "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "diffHunk": "@@ -448,6 +460,39 @@ public static SameSite getSameSiteFromComment(String comment)\n         return null;\n     }\n \n+    /**\n+     * Get the default value for SameSite cookie attribute, if one\n+     * has been set for the given context.\n+     * \n+     * @param context the context to check for default SameSite value\n+     * @return the default SameSite value or null if one does not exist\n+     * @throws IllegalStateException if the default value is not a permitted value\n+     */\n+    public static SameSite getSameSiteDefault(ServletContext context)\n+    {\n+        if (context == null)\n+            return null;\n+        Object o = context.getAttribute(SAME_SITE_DEFAULT_ATTRIBUTE);\n+        if (o == null)\n+        {\n+            LOG.warn(\"No default value for SameSite\");\n+            return null;\n+        }\n+        \n+        if (o instanceof SameSite)\n+            return (SameSite)o;\n+        \n+        try\n+        {\n+            return Enum.valueOf(SameSite.class, ((String)o).trim().toUpperCase(Locale.ENGLISH));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f52373bee48fe3b4ef163d1ca74a3ab32bc865b7"}, "originalPosition": 71}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5ODgxNjA2OnYy", "diffSide": "RIGHT", "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowODoxMFrOFimNJQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQxNDowODoxMFrOFimNJQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTgyMTg2MQ==", "bodyText": "Should we set the converted value back so that every cookie doesn't need to carry this cost???", "url": "https://github.com/eclipse/jetty.project/pull/4512#discussion_r371821861", "createdAt": "2020-01-28T14:08:10Z", "author": {"login": "gregw"}, "path": "jetty-http/src/main/java/org/eclipse/jetty/http/HttpCookie.java", "diffHunk": "@@ -448,6 +460,39 @@ public static SameSite getSameSiteFromComment(String comment)\n         return null;\n     }\n \n+    /**\n+     * Get the default value for SameSite cookie attribute, if one\n+     * has been set for the given context.\n+     * \n+     * @param context the context to check for default SameSite value\n+     * @return the default SameSite value or null if one does not exist\n+     * @throws IllegalStateException if the default value is not a permitted value\n+     */\n+    public static SameSite getSameSiteDefault(ServletContext context)\n+    {\n+        if (context == null)\n+            return null;\n+        Object o = context.getAttribute(SAME_SITE_DEFAULT_ATTRIBUTE);\n+        if (o == null)\n+        {\n+            LOG.warn(\"No default value for SameSite\");\n+            return null;\n+        }\n+        \n+        if (o instanceof SameSite)\n+            return (SameSite)o;\n+        \n+        try\n+        {\n+            return Enum.valueOf(SameSite.class, ((String)o).trim().toUpperCase(Locale.ENGLISH));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f52373bee48fe3b4ef163d1ca74a3ab32bc865b7"}, "originalPosition": 71}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2767, "cost": 1, "resetAt": "2021-11-12T18:49:56Z"}}}