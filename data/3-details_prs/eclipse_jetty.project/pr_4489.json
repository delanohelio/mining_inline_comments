{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY0MDMzMTM4", "number": 4489, "title": "Fixes #2643 - Switch SslContextFactory.keystoreType from JKS to PKCS12.", "bodyText": "Updated old keystores to new PKCS12 keystores.\nRemoved unused keystores and truststores.\nSigned-off-by: Simone Bordet simone.bordet@gmail.com\nFixes #2643", "createdAt": "2020-01-17T08:50:18Z", "url": "https://github.com/eclipse/jetty.project/pull/4489", "merged": true, "mergeCommit": {"oid": "ce6e146ac10607b2893961c47287598969f4b4c9"}, "closed": true, "closedAt": "2020-01-30T18:28:50Z", "author": {"login": "sbordet"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb7Kw1TgH2gAyMzY0MDMzMTM4OmQ2MGI0NDU5YmYxNmU3MTBiNjZhNzRjZWJkMWU0ZThiN2E0OGY1MTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb_eRO8AH2gAyMzY0MDMzMTM4OjhiZDFhN2Y1YmM0MWU0NDgwZTU4MzQwOTVkOTY2ZTA4NmE5NzZlYWQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515", "author": {"user": {"login": "sbordet", "name": "Simone Bordet"}}, "url": "https://github.com/eclipse/jetty.project/commit/d60b4459bf16e710b66a74cebd1e4e8b7a48f515", "committedDate": "2020-01-17T08:48:51Z", "message": "Fixes #2643 - Switch SslContextFactory.keystoreType from JKS to PKCS12.\n\nUpdated old keystores to new PKCS12 keystores.\nRemoved unused keystores and truststores.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwOTE3NDIy", "url": "https://github.com/eclipse/jetty.project/pull/4489#pullrequestreview-350917422", "createdAt": "2020-01-30T15:34:30Z", "commit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTozNDozMFrOFjvZlw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMFQxNTo0MDoxOFrOFjvnaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyMTA3OQ==", "bodyText": "shall we not use obfuscation at all?", "url": "https://github.com/eclipse/jetty.project/pull/4489#discussion_r373021079", "createdAt": "2020-01-30T15:34:30Z", "author": {"login": "gregw"}, "path": "jetty-alpn/jetty-alpn-conscrypt-server/src/test/java/org/eclipse/jetty/alpn/conscrypt/server/ConscryptHTTP2ServerTest.java", "diffHunk": "@@ -79,11 +79,9 @@\n     private void configureSslContextFactory(SslContextFactory sslContextFactory)\n     {\n         Path path = Paths.get(\"src\", \"test\", \"resources\");\n-        File keys = path.resolve(\"keystore\").toFile();\n+        File keys = path.resolve(\"keystore.p12\").toFile();\n         sslContextFactory.setKeyStorePath(keys.getAbsolutePath());\n-        sslContextFactory.setKeyManagerPassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");\n-        sslContextFactory.setTrustStorePath(keys.getAbsolutePath());\n-        sslContextFactory.setTrustStorePassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");\n+        sslContextFactory.setKeyStorePassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyMjA5Nw==", "bodyText": "no obfuscation", "url": "https://github.com/eclipse/jetty.project/pull/4489#discussion_r373022097", "createdAt": "2020-01-30T15:36:15Z", "author": {"login": "gregw"}, "path": "jetty-osgi/test-jetty-osgi/src/test/java/org/eclipse/jetty/osgi/test/TestJettyOSGiBootHTTP2Conscrypt.java", "diffHunk": "@@ -135,13 +135,13 @@ public void testHTTP2() throws Exception\n             assertNotNull(port);\n \n             Path path = Paths.get(\"src\", \"test\", \"config\");\n-            File keys = path.resolve(\"etc\").resolve(\"keystore\").toFile();\n+            File keys = path.resolve(\"etc\").resolve(\"keystore.p12\").toFile();\n \n             ClientConnector clientConnector = new ClientConnector();\n             SslContextFactory.Client sslContextFactory = new SslContextFactory.Client();\n-            sslContextFactory.setKeyManagerPassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");\n-            sslContextFactory.setTrustStorePath(keys.getAbsolutePath());\n             sslContextFactory.setKeyStorePath(keys.getAbsolutePath());\n+            sslContextFactory.setKeyStorePassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyMzU5OA==", "bodyText": "can we just call the file either keystore.p12 or test-keystore.p12 and not rename during the move?", "url": "https://github.com/eclipse/jetty.project/pull/4489#discussion_r373023598", "createdAt": "2020-01-30T15:38:39Z", "author": {"login": "gregw"}, "path": "jetty-server/src/main/config/modules/test-keystore.mod", "diffHunk": "@@ -9,13 +9,10 @@ ssl\n ssl\n \n [files]\n-basehome:modules/test-keystore/keystore|etc/test-keystore\n+basehome:modules/test-keystore/keystore.p12|etc/test-keystore.p12", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzAyNDYxNg==", "bodyText": "can we lose the ../../..?", "url": "https://github.com/eclipse/jetty.project/pull/4489#discussion_r373024616", "createdAt": "2020-01-30T15:40:18Z", "author": {"login": "gregw"}, "path": "tests/test-integration/src/test/java/org/eclipse/jetty/test/HttpInputIntegrationTest.java", "diffHunk": "@@ -104,9 +104,8 @@ public static void beforeClass() throws Exception\n         // SSL Context Factory for HTTPS and HTTP/2\n         String jettyDistro = System.getProperty(\"jetty.distro\", \"../../jetty-distribution/target/distribution\");\n         __sslContextFactory = new SslContextFactory.Server();\n-        __sslContextFactory.setKeyStorePath(jettyDistro + \"/../../../jetty-server/src/test/config/etc/keystore\");\n-        __sslContextFactory.setKeyStorePassword(\"OBF:1vny1zlo1x8e1vnw1vn61x8g1zlu1vn4\");\n-        __sslContextFactory.setKeyManagerPassword(\"OBF:1u2u1wml1z7s1z7a1wnl1u2g\");\n+        __sslContextFactory.setKeyStorePath(jettyDistro + \"/../../../jetty-server/src/test/resources/keystore.p12\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d60b4459bf16e710b66a74cebd1e4e8b7a48f515"}, "originalPosition": 7}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4b9fec0cf3588b055eb6b12e237383828453c304", "author": {"user": {"login": "sbordet", "name": "Simone Bordet"}}, "url": "https://github.com/eclipse/jetty.project/commit/4b9fec0cf3588b055eb6b12e237383828453c304", "committedDate": "2020-01-30T16:53:41Z", "message": "Updates after review.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bd1a7f5bc41e4480e5834095d966e086a976ead", "author": {"user": {"login": "sbordet", "name": "Simone Bordet"}}, "url": "https://github.com/eclipse/jetty.project/commit/8bd1a7f5bc41e4480e5834095d966e086a976ead", "committedDate": "2020-01-30T17:48:08Z", "message": "Using only non-obfuscated passwords in tests.\n\nSigned-off-by: Simone Bordet <simone.bordet@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 549, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}