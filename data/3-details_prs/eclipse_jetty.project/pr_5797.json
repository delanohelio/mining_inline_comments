{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM2NDc3MTEz", "number": 5797, "title": "Issue #5794 ensuring serverChannel is closed in the event of a failed bind to ensure proper resources are cleaned", "bodyText": "Issue #5794 ensuring serverChannel is closed in the event of a failed bind to ensure proper resources are cleaned\nSigned-off-by: Joe Witt joewitt@apache.org", "createdAt": "2020-12-11T04:02:39Z", "url": "https://github.com/eclipse/jetty.project/pull/5797", "merged": true, "mergeCommit": {"oid": "db68a313cbf4d64b81d28b29f5d37b773365600b"}, "closed": true, "closedAt": "2020-12-14T09:13:38Z", "author": {"login": "joewitt"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdk_z1sgH2gAyNTM2NDc3MTEzOmY3ZDRiOTQwYTJlMzYwYzlkN2IxZDFhOTQ2ZTc4MjhmMzQ3YzI3ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmCGWNAFqTU1MTE3MTQ0Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788", "author": {"user": {"login": "joewitt", "name": "Joe Witt"}}, "url": "https://github.com/eclipse/jetty.project/commit/f7d4b940a2e360c9d7b1d1a946e7828f347c2788", "committedDate": "2020-12-11T03:59:09Z", "message": "Issue #5794 ensuring serverChannel is closed in the event of a failed bind to ensure proper resources are cleaned\n\nSigned-off-by: Joe Witt <joewitt@apache.org>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5OTA2NDY4", "url": "https://github.com/eclipse/jetty.project/pull/5797#pullrequestreview-549906468", "createdAt": "2020-12-11T08:53:42Z", "commit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwODo1Mzo0MlrOIDvAFg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQwODo1Mzo0MlrOIDvAFg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc4NjcxMA==", "bodyText": "Can you please rework this fix to use try-with-resources, so there is no need of an explicit close?", "url": "https://github.com/eclipse/jetty.project/pull/5797#discussion_r540786710", "createdAt": "2020-12-11T08:53:42Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/main/java/org/eclipse/jetty/server/ServerConnector.java", "diffHunk": "@@ -346,6 +346,14 @@ protected ServerSocketChannel openAcceptChannel() throws IOException\n             }\n             catch (BindException e)\n             {\n+                try\n+                {\n+                    serverChannel.close();\n+                }\n+                catch (IOException ioe)\n+                {\n+                    LOG.warn(ioe);\n+                }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTY0NzI0", "url": "https://github.com/eclipse/jetty.project/pull/5797#pullrequestreview-551164724", "createdAt": "2020-12-14T09:04:57Z", "commit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTowNDo1N1rOIFGV9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQwOTowNDo1N1rOIFGV9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjIxNzcxNw==", "bodyText": "Re: using try-with-resources: doh :)\n@gregw #5802 is the same fix? @joewitt can you use IO.close() instead? Also, I think we want to catch everything that may possibly be throws after ServerSocketChannel.open(), so I would widen the try scope.", "url": "https://github.com/eclipse/jetty.project/pull/5797#discussion_r542217717", "createdAt": "2020-12-14T09:04:57Z", "author": {"login": "sbordet"}, "path": "jetty-server/src/main/java/org/eclipse/jetty/server/ServerConnector.java", "diffHunk": "@@ -346,6 +346,14 @@ protected ServerSocketChannel openAcceptChannel() throws IOException\n             }\n             catch (BindException e)\n             {\n+                try\n+                {\n+                    serverChannel.close();\n+                }\n+                catch (IOException ioe)\n+                {\n+                    LOG.warn(ioe);\n+                }", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDc4NjcxMA=="}, "originalCommit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMTcxNDQy", "url": "https://github.com/eclipse/jetty.project/pull/5797#pullrequestreview-551171442", "createdAt": "2020-12-14T09:13:06Z", "commit": {"oid": "f7d4b940a2e360c9d7b1d1a946e7828f347c2788"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 608, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}