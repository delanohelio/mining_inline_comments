{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEyNTg3NDIy", "number": 4840, "title": "Start a mongo instance for testing using docker via java code", "bodyText": "If @janbartel like it I can make changes for other external stuff we use such infinispan, memcache, hazelcast (remote mode) etc...\nThis simply avoid to start an external instance of any product (even in this case we can test different version of mongo using -Dmongo.docker.version=x.x.x as long as the tag is available here https://hub.docker.com/_/mongo?tab=tags\nATM those tests were activated only with a profile I wonder if it should per default now?", "createdAt": "2020-05-03T11:22:18Z", "url": "https://github.com/eclipse/jetty.project/pull/4840", "merged": true, "mergeCommit": {"oid": "78992a126cb03e6627fae23c014139811ef61a2a"}, "closed": true, "closedAt": "2020-05-07T21:06:04Z", "author": {"login": "olamy"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcdpHDjABqjMyOTczMTY3NDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcfDHDMgH2gAyNDEyNTg3NDIyOjU1OGZhNmFjMjkxMDYzMzEyOWEzNjNhYjVmODE2MGY4Y2U0YzJiZDU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ea6ffbecbbddf3ef35031d17fce99fa17e1d4c16", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/ea6ffbecbbddf3ef35031d17fce99fa17e1d4c16", "committedDate": "2020-05-03T11:10:09Z", "message": "test everything and remove debug\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}, "afterCommit": {"oid": "15d318f60862f8eb66eabdfe68fcb2a5da8a08b4", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/15d318f60862f8eb66eabdfe68fcb2a5da8a08b4", "committedDate": "2020-05-03T11:23:01Z", "message": "remove slow mongo maven plugin which was forking an external process and now run mongodb in a container so we can even now test with different version using -Dmongo.docker.version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3beb1786e049b292acfff7db3f1857bdf3fb3917", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/3beb1786e049b292acfff7db3f1857bdf3fb3917", "committedDate": "2020-05-03T11:32:22Z", "message": "oops\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}, "afterCommit": {"oid": "d08e0ceafe10997c86cea1ff9d3bc39141460a7b", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/d08e0ceafe10997c86cea1ff9d3bc39141460a7b", "committedDate": "2020-05-03T11:34:02Z", "message": "remove slow mongo maven plugin which was forking an external process and now run mongodb in a container so we can even now test with different version using -Dmongo.docker.version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "73b2497e783a7d12eb7f5dfd5f1f450af1ac374c", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/73b2497e783a7d12eb7f5dfd5f1f450af1ac374c", "committedDate": "2020-05-03T22:02:31Z", "message": "log how to start mongo container\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}, "afterCommit": {"oid": "485ca1a37a904365544e37f85fc4edec6bdbc3e9", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/485ca1a37a904365544e37f85fc4edec6bdbc3e9", "committedDate": "2020-05-03T22:05:33Z", "message": "remove slow mongo maven plugin which was forking an external process and now run mongodb in a container so we can even now test with different version using -Dmongo.docker.version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2ad9f3d9039442238b573fbd2c850a7efd5cd84", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/d2ad9f3d9039442238b573fbd2c850a7efd5cd84", "committedDate": "2020-05-04T07:53:56Z", "message": "remove slow mongo maven plugin which was forking an external process and now run mongodb in a container so we can even now test with different version using -Dmongo.docker.version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6eee467abc56a1321de46ed5c82946f11f17ce03", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/6eee467abc56a1321de46ed5c82946f11f17ce03", "committedDate": "2020-05-04T07:21:02Z", "message": "reduce log and lazy loading of mongo\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}, "afterCommit": {"oid": "d2ad9f3d9039442238b573fbd2c850a7efd5cd84", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/d2ad9f3d9039442238b573fbd2c850a7efd5cd84", "committedDate": "2020-05-04T07:53:56Z", "message": "remove slow mongo maven plugin which was forking an external process and now run mongodb in a container so we can even now test with different version using -Dmongo.docker.version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e745ec9b7440298dd6269a1f9f7e350e4d4f5b7", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/4e745ec9b7440298dd6269a1f9f7e350e4d4f5b7", "committedDate": "2020-05-05T04:09:56Z", "message": "activate docker test only if docker is available\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA1NjUwMzUw", "url": "https://github.com/eclipse/jetty.project/pull/4840#pullrequestreview-405650350", "createdAt": "2020-05-05T10:04:38Z", "commit": {"oid": "4e745ec9b7440298dd6269a1f9f7e350e4d4f5b7"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMDowNDozOFrOGQinJw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNVQxMDowNDozOFrOGQinJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxOTk5NzQ3OQ==", "bodyText": "I'd still call the profile \"mongodb\". It just happens to be being used in a ci environment, but can also be run locally.", "url": "https://github.com/eclipse/jetty.project/pull/4840#discussion_r419997479", "createdAt": "2020-05-05T10:04:38Z", "author": {"login": "janbartel"}, "path": "tests/test-sessions/test-mongodb-sessions/pom.xml", "diffHunk": "@@ -95,15 +96,27 @@\n       <artifactId>jetty-test-helper</artifactId>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-simple</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n   </dependencies>\n   <profiles>\n     <profile>\n-      <id>mongodb</id>\n+      <id>ci</id>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e745ec9b7440298dd6269a1f9f7e350e4d4f5b7"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45137cc200545da7df6dd7f4d093546685015db6", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/45137cc200545da7df6dd7f4d093546685015db6", "committedDate": "2020-05-06T09:35:36Z", "message": "change profile name\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6939f3c0ae6810ea53dcb5f895992edb9a923f36", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/6939f3c0ae6810ea53dcb5f895992edb9a923f36", "committedDate": "2020-05-06T21:09:38Z", "message": "add default value for mongo version\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26694adaf29232eba8e4f50a42d789e62930bb51", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/26694adaf29232eba8e4f50a42d789e62930bb51", "committedDate": "2020-05-07T01:37:54Z", "message": "add comment regarding mongodb version in pom\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3NDE0NjYy", "url": "https://github.com/eclipse/jetty.project/pull/4840#pullrequestreview-407414662", "createdAt": "2020-05-07T12:18:54Z", "commit": {"oid": "26694adaf29232eba8e4f50a42d789e62930bb51"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjoxODo1NVrOGR70yg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wN1QxMjoxODo1NVrOGR70yg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTQ1OTE0Ng==", "bodyText": "Delete this commented out line and you're good to go.", "url": "https://github.com/eclipse/jetty.project/pull/4840#discussion_r421459146", "createdAt": "2020-05-07T12:18:55Z", "author": {"login": "janbartel"}, "path": "tests/test-sessions/test-mongodb-sessions/pom.xml", "diffHunk": "@@ -95,13 +97,29 @@\n       <artifactId>jetty-test-helper</artifactId>\n       <scope>test</scope>\n     </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>testcontainers</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.testcontainers</groupId>\n+      <artifactId>junit-jupiter</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n+    <dependency>\n+      <groupId>org.slf4j</groupId>\n+      <artifactId>slf4j-simple</artifactId>\n+      <scope>test</scope>\n+    </dependency>\n   </dependencies>\n   <profiles>\n     <profile>\n-      <id>mongodb</id>\n+      <id>remote-session-tests</id>\n       <activation>\n+<!--        <file><exists>/var/run/docker.sock</exists></file>-->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26694adaf29232eba8e4f50a42d789e62930bb51"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "558fa6ac2910633129a363ab5f8160f8ce4c2bd5", "author": {"user": {"login": "olamy", "name": "Olivier Lamy"}}, "url": "https://github.com/eclipse/jetty.project/commit/558fa6ac2910633129a363ab5f8160f8ce4c2bd5", "committedDate": "2020-05-07T20:15:09Z", "message": "remove comment\n\nSigned-off-by: olivier lamy <oliver.lamy@gmail.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 373, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}