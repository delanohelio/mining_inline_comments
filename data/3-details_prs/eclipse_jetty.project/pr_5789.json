{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1ODY3NjI3", "number": 5789, "title": "Fix the calculation of rates in ConnectionStatistics", "bodyText": "closes #5783\nThe calculation for the rate was previously done as getTotal()  / elapsedTime.\nWhen it should really be getIncreaseOverElapsedTime() / elapsedTime.", "createdAt": "2020-12-10T11:29:08Z", "url": "https://github.com/eclipse/jetty.project/pull/5789", "merged": true, "mergeCommit": {"oid": "3d11d4e07180fcc2c938ebba5a13c71a95f51969"}, "closed": true, "closedAt": "2020-12-28T05:26:55Z", "author": {"login": "lachlan-roberts"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkxdaZgH2gAyNTM1ODY3NjI3OmZmZTNhYTQ0NTljMjViM2RiMTQyYjA0NjU2OTlmMDI3ZTE0M2RkNmE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoOnY5AH2gAyNTM1ODY3NjI3OjRlOWU5YjhkMTlmZTU4YmU0YmUwNDFkMGQ1MTZjZjMzODRkZGQwYjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ffe3aa4459c25b3db142b0465699f027e143dd6a", "author": {"user": {"login": "lachlan-roberts", "name": "Lachlan"}}, "url": "https://github.com/eclipse/jetty.project/commit/ffe3aa4459c25b3db142b0465699f027e143dd6a", "committedDate": "2020-12-10T11:15:59Z", "message": "Issue #5783 - fix getRate() methods on ConnectionStatistics\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a940fc18111daf11e4965a12c3e330b1f694267", "author": {"user": {"login": "lachlan-roberts", "name": "Lachlan"}}, "url": "https://github.com/eclipse/jetty.project/commit/8a940fc18111daf11e4965a12c3e330b1f694267", "committedDate": "2020-12-10T11:22:31Z", "message": "Issue #5783 - start _rateCheckTimeStamp at current time\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTIzNzQ5", "url": "https://github.com/eclipse/jetty.project/pull/5789#pullrequestreview-555923749", "createdAt": "2020-12-19T07:21:25Z", "commit": {"oid": "8a940fc18111daf11e4965a12c3e330b1f694267"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQwNzoyMToyNVrOII5tNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQwNzoyMToyNVrOII5tNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjIwNDk4MQ==", "bodyText": "Is the total really necessary in this class?\nIt is entirely independent so no benefit being in here.  If you just want a rate you don't need it, if you also want the total then just have a LongAdder in addition to a RateCounter.", "url": "https://github.com/eclipse/jetty.project/pull/5789#discussion_r546204981", "createdAt": "2020-12-19T07:21:25Z", "author": {"login": "gregw"}, "path": "jetty-util/src/main/java/org/eclipse/jetty/util/statistic/RateCounter.java", "diffHunk": "@@ -0,0 +1,61 @@\n+//\n+//  ========================================================================\n+//  Copyright (c) 1995-2020 Mort Bay Consulting Pty Ltd and others.\n+//  ------------------------------------------------------------------------\n+//  All rights reserved. This program and the accompanying materials\n+//  are made available under the terms of the Eclipse Public License v1.0\n+//  and Apache License v2.0 which accompanies this distribution.\n+//\n+//      The Eclipse Public License is available at\n+//      http://www.eclipse.org/legal/epl-v10.html\n+//\n+//      The Apache License v2.0 is available at\n+//      http://www.opensource.org/licenses/apache2.0.php\n+//\n+//  You may elect to redistribute this code under either of these licenses.\n+//  ========================================================================\n+//\n+\n+package org.eclipse.jetty.util.statistic;\n+\n+import java.util.concurrent.TimeUnit;\n+import java.util.concurrent.atomic.AtomicLong;\n+import java.util.concurrent.atomic.LongAdder;\n+\n+/**\n+ * Gives the same basic functionality of {@link LongAdder} but allows you to check\n+ * the rate of increase of the sum since the last call to {@link #getRate()};\n+ */\n+public class RateCounter\n+{\n+    private final LongAdder _total = new LongAdder();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8a940fc18111daf11e4965a12c3e330b1f694267"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4e9e9b8d19fe58be4be041d0d516cf3384ddd0b2", "author": {"user": {"login": "lachlan-roberts", "name": "Lachlan"}}, "url": "https://github.com/eclipse/jetty.project/commit/4e9e9b8d19fe58be4be041d0d516cf3384ddd0b2", "committedDate": "2020-12-21T04:55:54Z", "message": "Remove the total count from the RateCounter.\n\nSigned-off-by: Lachlan Roberts <lachlan@webtide.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 606, "cost": 1, "resetAt": "2021-11-01T13:51:04Z"}}}