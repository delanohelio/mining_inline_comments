{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDY2NTc3", "number": 2579, "title": "Add CopySpec for buildfile", "bodyText": "Part of #2570", "createdAt": "2020-07-09T20:04:28Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2579", "merged": true, "mergeCommit": {"oid": "70f54e3cfd5acc04fde69e29a05e38895797609d"}, "closed": true, "closedAt": "2020-07-10T20:04:38Z", "author": {"login": "loosebazooka"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABczUs21gH2gAyNDQ3MDY2NTc3OmZmOTQxNDNmMDcyMWVkZmJkODA2NDM1ZmYwOWZlZDYxY2NkN2E4Mjg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0lpH8gFqTQ0NzQ5MjI2MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ff94143f0721edfbd806435ff09fed61ccd7a828", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/ff94143f0721edfbd806435ff09fed61ccd7a828", "committedDate": "2020-07-09T20:03:19Z", "message": "Add CopySpec for buildfile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ2NTc5MjYy", "url": "https://github.com/GoogleContainerTools/jib/pull/2579#pullrequestreview-446579262", "createdAt": "2020-07-10T17:36:09Z", "commit": {"oid": "ff94143f0721edfbd806435ff09fed61ccd7a828"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNzozNjoxMFrOGv_v8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xMFQxNzozNjoxMFrOGv_v8w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mjk4MDcyMw==", "bodyText": "I assume if includes is given (and no 'excludesgiven), only those files listed are copied fromsrc`, right?", "url": "https://github.com/GoogleContainerTools/jib/pull/2579#discussion_r452980723", "createdAt": "2020-07-10T17:36:10Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/CopySpec.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.cli.buildfile;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.google.cloud.tools.jib.api.buildplan.AbsoluteUnixPath;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.List;\n+import java.util.Optional;\n+import javax.annotation.Nullable;\n+\n+/**\n+ * A yaml block for specifying a copy directive.\n+ *\n+ * <p>Example use of this yaml snippet.\n+ *\n+ * <pre>{@code\n+ * src: path/to/somewhere\n+ * dest: /absolute/path/on/container\n+ * includes:\n+ *   - **\\/*.txt\n+ * excludes:\n+ *   - **\\/goose.txt\n+ *   - **\\/moose.txt\n+ * properties: see {@link FilePropertiesSpec}\n+ * }</pre>\n+ */\n+public class CopySpec {\n+  private final Path src;\n+  private final AbsoluteUnixPath dest;\n+\n+  @Nullable private final FilePropertiesSpec properties;\n+  @Nullable private final List<String> excludes;\n+  @Nullable private final List<String> includes;\n+\n+  /**\n+   * Constructor for use by jackson to populate this object.\n+   *\n+   * @param src a file/directory on the local filesystem to copy *from*\n+   * @param dest an absolute unix style path to copy *to* on the container\n+   * @param excludes glob of files to exclude (has precedence over includes)\n+   * @param includes glob of files to include", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff94143f0721edfbd806435ff09fed61ccd7a828"}, "originalPosition": 58}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebbc31d27f6bfd07daf65506da5af488bd879249", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/ebbc31d27f6bfd07daf65506da5af488bd879249", "committedDate": "2020-07-10T18:21:58Z", "message": "updated comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NDkyMjYw", "url": "https://github.com/GoogleContainerTools/jib/pull/2579#pullrequestreview-447492260", "createdAt": "2020-07-13T18:21:33Z", "commit": {"oid": "ebbc31d27f6bfd07daf65506da5af488bd879249"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoyMTozM1rOGw0Xvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoyMTozM1rOGw0Xvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0Mjg3OQ==", "bodyText": "I didn't think about copying collections at the time of review.", "url": "https://github.com/GoogleContainerTools/jib/pull/2579#discussion_r453842879", "createdAt": "2020-07-13T18:21:33Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/CopySpec.java", "diffHunk": "@@ -0,0 +1,94 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.cli.buildfile;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.google.cloud.tools.jib.api.buildplan.AbsoluteUnixPath;\n+import java.nio.file.Path;\n+import java.nio.file.Paths;\n+import java.util.List;\n+import java.util.Optional;\n+import javax.annotation.Nullable;\n+\n+/**\n+ * A yaml block for specifying a copy directive.\n+ *\n+ * <p>Example use of this yaml snippet.\n+ *\n+ * <pre>{@code\n+ * src: path/to/somewhere\n+ * dest: /absolute/path/on/container\n+ * includes:\n+ *   - **\\/*.txt\n+ * excludes:\n+ *   - **\\/goose.txt\n+ *   - **\\/moose.txt\n+ * properties: see {@link FilePropertiesSpec}\n+ * }</pre>\n+ */\n+public class CopySpec {\n+  private final Path src;\n+  private final AbsoluteUnixPath dest;\n+\n+  @Nullable private final FilePropertiesSpec properties;\n+  @Nullable private final List<String> excludes;\n+  @Nullable private final List<String> includes;\n+\n+  /**\n+   * Constructor for use by jackson to populate this object.\n+   *\n+   * @param src a file/directory on the local filesystem to copy *from*\n+   * @param dest an absolute unix style path to copy *to* on the container\n+   * @param includes glob to filter files to include from \"src\"\n+   * @param excludes glob to filter out files included by \"src\" and \"includes\" (applied last)\n+   * @param properties a {@link FilePropertiesSpec} that applies to all files in this copy\n+   */\n+  @JsonCreator\n+  public CopySpec(\n+      @JsonProperty(value = \"src\", required = true) String src,\n+      @JsonProperty(value = \"dest\", required = true) String dest,\n+      @JsonProperty(\"includes\") List<String> includes,\n+      @JsonProperty(\"excludes\") List<String> excludes,\n+      @JsonProperty(\"properties\") FilePropertiesSpec properties) {\n+    this.src = Paths.get(src);\n+    this.dest = AbsoluteUnixPath.get(dest);\n+    this.excludes = excludes;\n+    this.includes = includes;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebbc31d27f6bfd07daf65506da5af488bd879249"}, "originalPosition": 71}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 66, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}