{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQwNzgxODQ3", "number": 2542, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzo0NjoxNVrOEJqr9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNTozOToxNlrOEJt5Wg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NTcyMDIxOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzo0NjoxNVrOGqRt_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNDo1MjoyNFrOGqUsGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk4MzY3Nw==", "bodyText": "This is probably a change due to the previous formatter that didn't work. Please restore it to the original state.", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r446983677", "createdAt": "2020-06-29T13:46:15Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -46,8 +46,8 @@\n class RegistryEndpointCaller<T> {\n \n   /**\n-   * <a\n-   * href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308</a>.\n+   * <a href=", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzAzMjM0NA==", "bodyText": "Done", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447032344", "createdAt": "2020-06-29T14:52:24Z", "author": {"login": "louismurerwa"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -46,8 +46,8 @@\n class RegistryEndpointCaller<T> {\n \n   /**\n-   * <a\n-   * href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308</a>.\n+   * <a href=", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk4MzY3Nw=="}, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NTc1NjQxOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzo1NDoxMVrOGqSERg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNToxMzo1MFrOGqVpEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk4OTM4Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          + \"; possible causes include invalid or wrong reference \\n\");\n          \n          \n            \n                          + \" but did not return any details; possible causes include invalid or wrong reference, or proxy/firewall/VPN interfering\\n\");\n          \n      \n    \n    \n  \n\nDon't forget to update the unit test.", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r446989382", "createdAt": "2020-06-29T13:54:11Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -188,22 +188,28 @@ RegistryErrorException newRegistryErrorException(ResponseException responseExcep\n     RegistryErrorExceptionBuilder registryErrorExceptionBuilder =\n         new RegistryErrorExceptionBuilder(\n             registryEndpointProvider.getActionDescription(), responseException);\n-\n-    try {\n-      ErrorResponseTemplate errorResponse =\n-          JsonTemplateMapper.readJson(responseException.getContent(), ErrorResponseTemplate.class);\n-      for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n-        registryErrorExceptionBuilder.addReason(errorEntry);\n+    if (responseException.getContent() != null) {\n+      try {\n+        ErrorResponseTemplate errorResponse =\n+            JsonTemplateMapper.readJson(\n+                responseException.getContent(), ErrorResponseTemplate.class);\n+        for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n+          registryErrorExceptionBuilder.addReason(errorEntry);\n+        }\n+      } catch (IOException ex) {\n+        registryErrorExceptionBuilder.addReason(\n+            \"registry returned error code \"\n+                + responseException.getStatusCode()\n+                + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n+                + responseException.getContent()\n+                + \"\\n\");\n       }\n-    } catch (IOException ex) {\n+    } else {\n       registryErrorExceptionBuilder.addReason(\n           \"registry returned error code \"\n               + responseException.getStatusCode()\n-              + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n-              + responseException.getContent()\n-              + \"\\n\");\n+              + \"; possible causes include invalid or wrong reference \\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 45}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA0Nzk1Mw==", "bodyText": "Done:Fixed the error message.", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447047953", "createdAt": "2020-06-29T15:13:50Z", "author": {"login": "louismurerwa"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -188,22 +188,28 @@ RegistryErrorException newRegistryErrorException(ResponseException responseExcep\n     RegistryErrorExceptionBuilder registryErrorExceptionBuilder =\n         new RegistryErrorExceptionBuilder(\n             registryEndpointProvider.getActionDescription(), responseException);\n-\n-    try {\n-      ErrorResponseTemplate errorResponse =\n-          JsonTemplateMapper.readJson(responseException.getContent(), ErrorResponseTemplate.class);\n-      for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n-        registryErrorExceptionBuilder.addReason(errorEntry);\n+    if (responseException.getContent() != null) {\n+      try {\n+        ErrorResponseTemplate errorResponse =\n+            JsonTemplateMapper.readJson(\n+                responseException.getContent(), ErrorResponseTemplate.class);\n+        for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n+          registryErrorExceptionBuilder.addReason(errorEntry);\n+        }\n+      } catch (IOException ex) {\n+        registryErrorExceptionBuilder.addReason(\n+            \"registry returned error code \"\n+                + responseException.getStatusCode()\n+                + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n+                + responseException.getContent()\n+                + \"\\n\");\n       }\n-    } catch (IOException ex) {\n+    } else {\n       registryErrorExceptionBuilder.addReason(\n           \"registry returned error code \"\n               + responseException.getStatusCode()\n-              + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n-              + responseException.getContent()\n-              + \"\\n\");\n+              + \"; possible causes include invalid or wrong reference \\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk4OTM4Mg=="}, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 45}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NTc2NDY0OnYy", "diffSide": "RIGHT", "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryEndpointCallerTest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxMzo1NjowM1rOGqSJjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNToxNToxN1rOGqVtVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk5MDczMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              public void testNewRegistryErrorException_nullJsonErrorOutput() {\n          \n          \n            \n              public void testNewRegistryErrorException_noOutputFromRegistry() {", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r446990732", "createdAt": "2020-06-29T13:56:03Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryEndpointCallerTest.java", "diffHunk": "@@ -435,6 +435,24 @@ public void testNewRegistryErrorException_nonJsonErrorOutput() {\n         registryException.getMessage());\n   }\n \n+  @Test\n+  public void testNewRegistryErrorException_nullJsonErrorOutput() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA0OTA0NQ==", "bodyText": "Done", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447049045", "createdAt": "2020-06-29T15:15:17Z", "author": {"login": "louismurerwa"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryEndpointCallerTest.java", "diffHunk": "@@ -435,6 +435,24 @@ public void testNewRegistryErrorException_nonJsonErrorOutput() {\n         registryException.getMessage());\n   }\n \n+  @Test\n+  public void testNewRegistryErrorException_nullJsonErrorOutput() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Njk5MDczMg=="}, "originalCommit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NjIwMDg4OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNToyOToyN1rOGqWVOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNTozNzo1N1rOGqWtzg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA1OTI1Nw==", "bodyText": "nit: minor correction\n\n  \n    \n  \n    \n\n  \n  This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                          + \"; but did not return any details; possible causes include invalid or wrong reference, or proxy/firewall/VPN interfering \\n\");\n          \n          \n            \n                          + \" but did not return any details; possible causes include invalid or wrong reference, or proxy/firewall/VPN interfering \\n\");\n          \n      \n    \n    \n  \n\nDon't forget the test.", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447059257", "createdAt": "2020-06-29T15:29:27Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -188,22 +187,28 @@ RegistryErrorException newRegistryErrorException(ResponseException responseExcep\n     RegistryErrorExceptionBuilder registryErrorExceptionBuilder =\n         new RegistryErrorExceptionBuilder(\n             registryEndpointProvider.getActionDescription(), responseException);\n-\n-    try {\n-      ErrorResponseTemplate errorResponse =\n-          JsonTemplateMapper.readJson(responseException.getContent(), ErrorResponseTemplate.class);\n-      for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n-        registryErrorExceptionBuilder.addReason(errorEntry);\n+    if (responseException.getContent() != null) {\n+      try {\n+        ErrorResponseTemplate errorResponse =\n+            JsonTemplateMapper.readJson(\n+                responseException.getContent(), ErrorResponseTemplate.class);\n+        for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n+          registryErrorExceptionBuilder.addReason(errorEntry);\n+        }\n+      } catch (IOException ex) {\n+        registryErrorExceptionBuilder.addReason(\n+            \"registry returned error code \"\n+                + responseException.getStatusCode()\n+                + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n+                + responseException.getContent()\n+                + \"\\n\");\n       }\n-    } catch (IOException ex) {\n+    } else {\n       registryErrorExceptionBuilder.addReason(\n           \"registry returned error code \"\n               + responseException.getStatusCode()\n-              + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n-              + responseException.getContent()\n-              + \"\\n\");\n+              + \"; but did not return any details; possible causes include invalid or wrong reference, or proxy/firewall/VPN interfering \\n\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6473b4258fe570fc2f507ce7dcc0a03807218a2a"}, "originalPosition": 44}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2NTU1MA==", "bodyText": "Done", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447065550", "createdAt": "2020-06-29T15:37:57Z", "author": {"login": "louismurerwa"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -188,22 +187,28 @@ RegistryErrorException newRegistryErrorException(ResponseException responseExcep\n     RegistryErrorExceptionBuilder registryErrorExceptionBuilder =\n         new RegistryErrorExceptionBuilder(\n             registryEndpointProvider.getActionDescription(), responseException);\n-\n-    try {\n-      ErrorResponseTemplate errorResponse =\n-          JsonTemplateMapper.readJson(responseException.getContent(), ErrorResponseTemplate.class);\n-      for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n-        registryErrorExceptionBuilder.addReason(errorEntry);\n+    if (responseException.getContent() != null) {\n+      try {\n+        ErrorResponseTemplate errorResponse =\n+            JsonTemplateMapper.readJson(\n+                responseException.getContent(), ErrorResponseTemplate.class);\n+        for (ErrorEntryTemplate errorEntry : errorResponse.getErrors()) {\n+          registryErrorExceptionBuilder.addReason(errorEntry);\n+        }\n+      } catch (IOException ex) {\n+        registryErrorExceptionBuilder.addReason(\n+            \"registry returned error code \"\n+                + responseException.getStatusCode()\n+                + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n+                + responseException.getContent()\n+                + \"\\n\");\n       }\n-    } catch (IOException ex) {\n+    } else {\n       registryErrorExceptionBuilder.addReason(\n           \"registry returned error code \"\n               + responseException.getStatusCode()\n-              + \"; possible causes include invalid or wrong reference. Actual error output follows:\\n\"\n-              + responseException.getContent()\n-              + \"\\n\");\n+              + \"; but did not return any details; possible causes include invalid or wrong reference, or proxy/firewall/VPN interfering \\n\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA1OTI1Nw=="}, "originalCommit": {"oid": "6473b4258fe570fc2f507ce7dcc0a03807218a2a"}, "originalPosition": 44}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc4NjI0NjAyOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNTozOToxNlrOGqWxVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQxNTo0NToyNlrOGqXCeQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2NjQ1NA==", "bodyText": "@chanseokoh Is this the correct styling of a-href ?", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447066454", "createdAt": "2020-06-29T15:39:16Z", "author": {"login": "louismurerwa"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -46,8 +46,8 @@\n class RegistryEndpointCaller<T> {\n \n   /**\n-   * <a\n-   * href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308</a>.\n+   * <a href =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "646542cde28b272d7dd11c3b7cfbf419a3100542"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA3MDg0MQ==", "bodyText": "Hmm... let's keep your change if the formatter keeps changing this. As long as builds succeed, we should be good.", "url": "https://github.com/GoogleContainerTools/jib/pull/2542#discussion_r447070841", "createdAt": "2020-06-29T15:45:26Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/RegistryEndpointCaller.java", "diffHunk": "@@ -46,8 +46,8 @@\n class RegistryEndpointCaller<T> {\n \n   /**\n-   * <a\n-   * href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/308</a>.\n+   * <a href =", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzA2NjQ1NA=="}, "originalCommit": {"oid": "646542cde28b272d7dd11c3b7cfbf419a3100542"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 220, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}