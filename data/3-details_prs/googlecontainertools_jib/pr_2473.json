{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDE5NzMzMzUw", "number": 2473, "title": "Show helpful and actionable messages to guide the user to correct extra extension config", "bodyText": "The user is already forced to set the implementation attribute (i.e., <configuration implementation=...>) for Maven to be able to parse a complex <configuration> structure from the first place. However, this PR further prevents certain cases that can otherwise pass through (e.g., <configuration>string value). In such a case, this PR prints out a helpful message:\n[ERROR] Failed to execute goal com.google.cloud.tools:jib-maven-plugin:2.2.1-SNAPSHOT:dockerBuild (default-cli) on project helloworld: error running extension 'com.example.MyExtension': extension-specific <configuration> for MyExtension is not of type com.example.MyExtensionConfig but java.lang.String; specify the correct type with <pluginExtension><configuration implementation=\"com.example.MyExtensionConfig\"> -> [Help 1]\nAnd looks like we don't need any extra checks on Gradle. Gradle prints out the usual error message for misconfiguration coming from Action.execute(someConfigObject).\n* What went wrong:\nExecution failed for task ':jibDockerBuild'.\n> Could not set unknown property 'foo' for object of type com.example.ExtensionConfig.", "createdAt": "2020-05-18T20:45:32Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2473", "merged": true, "mergeCommit": {"oid": "27cde263210b9da5b670a37767ef39c4c2807218"}, "closed": true, "closedAt": "2020-05-19T22:11:47Z", "author": {"login": "chanseokoh"}, "timelineItems": {"totalCount": 31, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcfWVgOAH2gAyNDE5NzMzMzUwOjMwZTUyYjcwMmY1YzNhMmQ1ODljMDYxNzFjNjhhYjY4YmZjODkwYzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABci73kSAFqTQxNDg1NjcxNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "30e52b702f5c3a2d589c06171c68ab68bfc890c3", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/30e52b702f5c3a2d589c06171c68ab68bfc890c3", "committedDate": "2020-05-08T18:39:08Z", "message": "Add extra config obj to Gradle ext API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d40f737c357065f89666dcc4097dd67b0ae42122", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/d40f737c357065f89666dcc4097dd67b0ae42122", "committedDate": "2020-05-08T18:39:35Z", "message": "Add extra config obj to Maven ext API"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09a021d9ffc469e2ace70340a42f9a0bb960d816", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/09a021d9ffc469e2ace70340a42f9a0bb960d816", "committedDate": "2020-05-08T18:39:53Z", "message": "Add Maven util to handle extra config obj"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "97d00d324445983dc3310d7a2a717d059bd1032a", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/97d00d324445983dc3310d7a2a717d059bd1032a", "committedDate": "2020-05-08T18:40:45Z", "message": "Wire extra config obj"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0b471f4e3003961a44ea640ef63a15c79f2b949f", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/0b471f4e3003961a44ea640ef63a15c79f2b949f", "committedDate": "2020-05-08T18:45:13Z", "message": "Fix test compilation errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e7037375b4429b8640f7315f5c633cfb03219ba0", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/e7037375b4429b8640f7315f5c633cfb03219ba0", "committedDate": "2020-05-08T18:58:33Z", "message": "Fix Javadoc error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "26618e36a5e6ad4fb5ca31d9048206f2a87faa2e", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/26618e36a5e6ad4fb5ca31d9048206f2a87faa2e", "committedDate": "2020-05-13T18:22:53Z", "message": "Add extension-defined extra config option"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fa34189f14a0e1aa6da6ff508140a5f9eec49ddb", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/fa34189f14a0e1aa6da6ff508140a5f9eec49ddb", "committedDate": "2020-05-13T18:51:45Z", "message": "Merge branch 'master' into extra-extension-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50891c73f59b880d26cba188c6c65f483b197f70", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/50891c73f59b880d26cba188c6c65f483b197f70", "committedDate": "2020-05-13T19:21:57Z", "message": "Fix compilation errors and style"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "73a73c41007d5c8b205f5e157de02eea7ece286f", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/73a73c41007d5c8b205f5e157de02eea7ece286f", "committedDate": "2020-05-13T19:31:13Z", "message": "Fix Javadocs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "50df231587f53a291f91171e095e476619d08d64", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/50df231587f53a291f91171e095e476619d08d64", "committedDate": "2020-05-13T20:07:24Z", "message": "Fix javadoc"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c77148360bf4cc42ae515e2529c55eb2d4229f9b", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/c77148360bf4cc42ae515e2529c55eb2d4229f9b", "committedDate": "2020-05-13T20:24:09Z", "message": "Remove comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "80e58f142fabe78ae69e7e87a183542bcfebf43e", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/80e58f142fabe78ae69e7e87a183542bcfebf43e", "committedDate": "2020-05-13T21:05:13Z", "message": "Remove unnecessary class"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8c30b7b5da9351f8b34ad3b0d3566d810ef2f56f", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8c30b7b5da9351f8b34ad3b0d3566d810ef2f56f", "committedDate": "2020-05-15T19:46:52Z", "message": "Add tests"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4f5326f5eef547d0d97139fc270604fd2926e154", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/4f5326f5eef547d0d97139fc270604fd2926e154", "committedDate": "2020-05-15T19:55:43Z", "message": "Fix ErrorProne"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa7c0bd839bcb682e0f87b607004a0ad5dc606c0", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/aa7c0bd839bcb682e0f87b607004a0ad5dc606c0", "committedDate": "2020-05-15T20:55:47Z", "message": "potato -> fooParam, tomato -> barParam"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ef3f360c1656146e708891c39a4217ded3e0f52", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/5ef3f360c1656146e708891c39a4217ded3e0f52", "committedDate": "2020-05-15T20:58:37Z", "message": "Add comments about suppressing class cast warnings"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a48ba9f7311d9e99481d42b38c8f8fa675f48518", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/a48ba9f7311d9e99481d42b38c8f8fa675f48518", "committedDate": "2020-05-15T21:31:10Z", "message": "No default implementation in interface"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a79c4b8b00b41423c66df2983bb3ba1581a79411", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/a79c4b8b00b41423c66df2983bb3ba1581a79411", "committedDate": "2020-05-15T21:55:06Z", "message": "Update Gradle comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7848b66837b344543fdfb81efeb9e8602e297de3", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/7848b66837b344543fdfb81efeb9e8602e297de3", "committedDate": "2020-05-18T15:21:34Z", "message": "Share extension logger code"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dfac478ee76e75210c8aaf5aa70edcdd2359445e", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/dfac478ee76e75210c8aaf5aa70edcdd2359445e", "committedDate": "2020-05-18T15:27:05Z", "message": "Merge branch 'refactor-extension-code' into extension-config-class-cast-better-error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "223cf5fc07cee4782f07e289ed3c8c83e8b7cfe8", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/223cf5fc07cee4782f07e289ed3c8c83e8b7cfe8", "committedDate": "2020-05-18T15:50:55Z", "message": "Merge branch 'master' into extra-extension-config"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "70ce743ac58e920835125552e4eb3524c813a303", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/70ce743ac58e920835125552e4eb3524c813a303", "committedDate": "2020-05-18T16:04:32Z", "message": "Merge branch 'extra-extension-config' into extension-config-class-cast-better-error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8bf4abfb314fdfa8bebb2408843f47c9ef957fd", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/a8bf4abfb314fdfa8bebb2408843f47c9ef957fd", "committedDate": "2020-05-18T19:24:18Z", "message": "Handle Maven extension config class mismatches"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d7251644e44dacb82185d66f1b6761ddfde473c8", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/d7251644e44dacb82185d66f1b6761ddfde473c8", "committedDate": "2020-05-18T20:33:46Z", "message": "Gradle counterpart"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "40086c813e27fa5164dc5e84385efd7303004656", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/40086c813e27fa5164dc5e84385efd7303004656", "committedDate": "2020-05-18T20:59:37Z", "message": "Update comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc96922ddc1001a713c47906f0395ce98c83bf9f", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/dc96922ddc1001a713c47906f0395ce98c83bf9f", "committedDate": "2020-05-19T15:41:08Z", "message": "Merge branch 'master' into extension-config-class-cast-better-error"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0NzYyNDYx", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#pullrequestreview-414762461", "createdAt": "2020-05-19T19:35:42Z", "commit": {"oid": "dc96922ddc1001a713c47906f0395ce98c83bf9f"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozNTo0MlrOGXvqpw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOVQxOTozNTo0MlrOGXvqpw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNzU1MTM5OQ==", "bodyText": "maybe this should be a hard failure?", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#discussion_r427551399", "createdAt": "2020-05-19T19:35:42Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/GradleProjectProperties.java", "diffHunk": "@@ -458,13 +458,20 @@ public JibContainerBuilder runPluginExtensions(\n       ContainerBuildPlan buildPlan)\n       throws JibPluginExtensionException {\n     T extraConfig = null;\n-    if (extraConfigType.isPresent() && config.getExtraConfiguration().isPresent()) {\n-      try {\n+    if (config.getExtraConfiguration().isPresent()) {\n+      if (!extraConfigType.isPresent()) {\n+        log(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dc96922ddc1001a713c47906f0395ce98c83bf9f"}, "originalPosition": 8}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a4424ed76818a0a5009c4e6ad5da0f22e399a9ef", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/a4424ed76818a0a5009c4e6ad5da0f22e399a9ef", "committedDate": "2020-05-19T21:22:59Z", "message": "Merge branch 'master' into extension-config-class-cast-better-error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bdedf95646695bedf9205c5eac330ee6b1b98e3c", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/bdedf95646695bedf9205c5eac330ee6b1b98e3c", "committedDate": "2020-05-19T21:35:26Z", "message": "Fail on unwanted <configuration>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE0ODU2NzE0", "url": "https://github.com/GoogleContainerTools/jib/pull/2473#pullrequestreview-414856714", "createdAt": "2020-05-19T22:04:36Z", "commit": {"oid": "bdedf95646695bedf9205c5eac330ee6b1b98e3c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 251, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}