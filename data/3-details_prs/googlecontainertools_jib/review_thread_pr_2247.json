{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY3MDc3NTQy", "number": 2247, "reviewThreads": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwMjoxNTo1NFrODappiA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNzo1Nzo0N1rODcUADQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MjcxOTQ0OnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwMjoxNTo1NFrOFhuZDQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwMjoxNTo1NFrOFhuZDQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkwNzQwNQ==", "bodyText": "These test changes (and the ones below) are now checking for whether the jibDependencies task depends on the requisite tasks (like the warTask or bootWarTask below) and whether all the jib tasks depend on jibDependencies which is the only task they need to depend on now.", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r370907405", "createdAt": "2020-01-25T02:15:54Z", "author": {"login": "seanabraham"}, "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "diffHunk": "@@ -212,11 +143,19 @@ public void testWebAppProject() {\n     Task warTask = tasks.getByPath(\":war\");\n     Assert.assertNotNull(warTask);\n \n+    Task jibDependenciesTask = tasks.getByPath(\":jibDependencies\");\n+    Set<Task> taskDependencies = jibDependenciesTask.getDependsOn()\n+        .stream()\n+        .filter(it -> it instanceof TaskProvider)\n+        .map(it -> ((TaskProvider<?>) it).get())\n+        .collect(Collectors.toSet());\n+\n+    Assert.assertTrue(taskDependencies.contains(warTask));\n+\n     for (String taskName : KNOWN_JIB_TASKS) {\n-      List<TaskProvider<?>> taskProviders =\n-          (List<TaskProvider<?>>) tasks.getByPath(taskName).getDependsOn().iterator().next();\n-      Assert.assertEquals(1, taskProviders.size());\n-      Assert.assertEquals(warTask, taskProviders.get(0).get());\n+      TaskProvider<?> jibDependenciesTaskProvider =\n+          (TaskProvider<?>) tasks.getByPath(taskName).getDependsOn().iterator().next();\n+      Assert.assertEquals(jibDependenciesTaskProvider.get(), jibDependenciesTask);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "83bf080820fef49d9de2c816da016fb6b35e9bf2"}, "originalPosition": 112}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5Mjc1NjExOnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwNDowNDowMFrOFhusMw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQyMzo0NDozNFrOFhxyWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxMjMwNw==", "bodyText": "I'll check when I can, but this doesn't show up in gradlew tasks does it?", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r370912307", "createdAt": "2020-01-25T04:04:00Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -162,68 +165,49 @@ public void apply(Project project) {\n             SyncMapTask.class,\n             task -> task.setJibExtension(jibExtension));\n \n+    Set<TaskProvider<?>> jibTaskProviders =\n+        ImmutableSet.of(buildImageTask, buildDockerTask, buildTarTask, syncMapTask);\n+\n     // A check to catch older versions of Jib.  This can be removed once we are certain people\n     // are using Jib 1.3.1 or later.\n     tasks.register(SKAFFOLD_CHECK_REQUIRED_VERSION_TASK_NAME, CheckJibVersionTask.class);\n \n     project.afterEvaluate(\n         projectAfterEvaluation -> {\n-          try {\n-            TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n-            TaskProvider<Task> bootWarTask =\n-                TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n-            List<TaskProvider<?>> dependsOnTask = new ArrayList<>();\n-            if (warTask != null || bootWarTask != null) {\n-              // Have all tasks depend on the 'war' and/or 'bootWar' task.\n-              if (warTask != null) {\n-                dependsOnTask.add(warTask);\n-              }\n-              if (bootWarTask != null) {\n-                dependsOnTask.add(bootWarTask);\n-              }\n-            } else if (\"packaged\".equals(jibExtension.getContainerizingMode())) {\n-              // Have all tasks depend on the 'jar' task.\n-              TaskProvider<Task> jarTask = projectAfterEvaluation.getTasks().named(\"jar\");\n-              dependsOnTask.add(jarTask);\n-\n-              if (projectAfterEvaluation.getPlugins().hasPlugin(\"org.springframework.boot\")) {\n-                Jar jar = (Jar) jarTask.get();\n-                jar.setEnabled(true);\n-                jar.getArchiveClassifier().set(\"original\");\n-              }\n-            } else {\n-              // Have all tasks depend on the 'classes' task.\n-              dependsOnTask.add(projectAfterEvaluation.getTasks().named(\"classes\"));\n+          TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> bootWarTask =\n+              TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> jibDependenciesTask = tasks.register(\"jibDependencies\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d044eef0f4526f76e914f67601377351aa7a8b08"}, "originalPosition": 74}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDk2MzAzMw==", "bodyText": "Though I can't remember what determines whether or not tasks show up in the gradlew tasks output, it doesn't look like it does in this case.", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r370963033", "createdAt": "2020-01-25T23:44:34Z", "author": {"login": "seanabraham"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -162,68 +165,49 @@ public void apply(Project project) {\n             SyncMapTask.class,\n             task -> task.setJibExtension(jibExtension));\n \n+    Set<TaskProvider<?>> jibTaskProviders =\n+        ImmutableSet.of(buildImageTask, buildDockerTask, buildTarTask, syncMapTask);\n+\n     // A check to catch older versions of Jib.  This can be removed once we are certain people\n     // are using Jib 1.3.1 or later.\n     tasks.register(SKAFFOLD_CHECK_REQUIRED_VERSION_TASK_NAME, CheckJibVersionTask.class);\n \n     project.afterEvaluate(\n         projectAfterEvaluation -> {\n-          try {\n-            TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n-            TaskProvider<Task> bootWarTask =\n-                TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n-            List<TaskProvider<?>> dependsOnTask = new ArrayList<>();\n-            if (warTask != null || bootWarTask != null) {\n-              // Have all tasks depend on the 'war' and/or 'bootWar' task.\n-              if (warTask != null) {\n-                dependsOnTask.add(warTask);\n-              }\n-              if (bootWarTask != null) {\n-                dependsOnTask.add(bootWarTask);\n-              }\n-            } else if (\"packaged\".equals(jibExtension.getContainerizingMode())) {\n-              // Have all tasks depend on the 'jar' task.\n-              TaskProvider<Task> jarTask = projectAfterEvaluation.getTasks().named(\"jar\");\n-              dependsOnTask.add(jarTask);\n-\n-              if (projectAfterEvaluation.getPlugins().hasPlugin(\"org.springframework.boot\")) {\n-                Jar jar = (Jar) jarTask.get();\n-                jar.setEnabled(true);\n-                jar.getArchiveClassifier().set(\"original\");\n-              }\n-            } else {\n-              // Have all tasks depend on the 'classes' task.\n-              dependsOnTask.add(projectAfterEvaluation.getTasks().named(\"classes\"));\n+          TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> bootWarTask =\n+              TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> jibDependenciesTask = tasks.register(\"jibDependencies\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxMjMwNw=="}, "originalCommit": {"oid": "d044eef0f4526f76e914f67601377351aa7a8b08"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5Mjc1NzYzOnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwNDoxMDoxNVrOFhus7w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwNDoxMDoxNVrOFhus7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxMjQ5NQ==", "bodyText": "we've been filtering like .filter(TaskProvider.class::isInstance)", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r370912495", "createdAt": "2020-01-25T04:10:15Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "diffHunk": "@@ -230,15 +171,24 @@ public void testWebAppProject_bootWar() {\n     TaskContainer tasks = project.getTasks();\n     Task warTask = tasks.getByPath(\":war\");\n     Task bootWarTask = tasks.getByPath(\":bootWar\");\n+    Task jibDependenciesTask = tasks.getByPath(\":jibDependencies\");\n     Assert.assertNotNull(warTask);\n     Assert.assertNotNull(bootWarTask);\n \n+    Set<Task> taskDependencies =\n+        jibDependenciesTask\n+            .getDependsOn()\n+            .stream()\n+            .filter(it -> it instanceof TaskProvider)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d044eef0f4526f76e914f67601377351aa7a8b08"}, "originalPosition": 128}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5Mjc1NzcxOnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwNDoxMDo0OFrOFhus-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNVQwNDoxMDo0OFrOFhus-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDkxMjUwNw==", "bodyText": "filter(... like above", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r370912507", "createdAt": "2020-01-25T04:10:48Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/test/java/com/google/cloud/tools/jib/gradle/JibPluginTest.java", "diffHunk": "@@ -252,16 +202,25 @@ public void testWebAppProject_bootWarDisabled() {\n     TaskContainer tasks = project.getTasks();\n     Task warTask = tasks.getByPath(\":war\");\n     Task bootWarTask = tasks.getByPath(\":bootWar\");\n+    Task jibDependenciesTask = tasks.getByPath(\":jibDependencies\");\n     Assert.assertNotNull(warTask);\n     Assert.assertNotNull(bootWarTask);\n     bootWarTask.setEnabled(false); // should depend on bootWar even if disabled\n \n+    Set<Task> taskDependencies =\n+        jibDependenciesTask\n+            .getDependsOn()\n+            .stream()\n+            .filter(it -> it instanceof TaskProvider)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d044eef0f4526f76e914f67601377351aa7a8b08"}, "originalPosition": 159}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5MzYwNDI0OnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxODo0Njo1OVrOFh1U_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNlQxODo0Njo1OVrOFh1U_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTAyMTA1NQ==", "bodyText": "Can you use a const as above https://github.com/GoogleContainerTools/jib/pull/2247/files#diff-aef8bf567c91df6622aa0ea29ed0c682R53\nJIB_DEPENDECIES_TASK_NAME=\"jibDependencies\"\n\nand then reuse it in JibPluginTest.java.", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r371021055", "createdAt": "2020-01-26T18:46:59Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -162,68 +165,49 @@ public void apply(Project project) {\n             SyncMapTask.class,\n             task -> task.setJibExtension(jibExtension));\n \n+    Set<TaskProvider<?>> jibTaskProviders =\n+        ImmutableSet.of(buildImageTask, buildDockerTask, buildTarTask, syncMapTask);\n+\n     // A check to catch older versions of Jib.  This can be removed once we are certain people\n     // are using Jib 1.3.1 or later.\n     tasks.register(SKAFFOLD_CHECK_REQUIRED_VERSION_TASK_NAME, CheckJibVersionTask.class);\n \n     project.afterEvaluate(\n         projectAfterEvaluation -> {\n-          try {\n-            TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n-            TaskProvider<Task> bootWarTask =\n-                TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n-            List<TaskProvider<?>> dependsOnTask = new ArrayList<>();\n-            if (warTask != null || bootWarTask != null) {\n-              // Have all tasks depend on the 'war' and/or 'bootWar' task.\n-              if (warTask != null) {\n-                dependsOnTask.add(warTask);\n-              }\n-              if (bootWarTask != null) {\n-                dependsOnTask.add(bootWarTask);\n-              }\n-            } else if (\"packaged\".equals(jibExtension.getContainerizingMode())) {\n-              // Have all tasks depend on the 'jar' task.\n-              TaskProvider<Task> jarTask = projectAfterEvaluation.getTasks().named(\"jar\");\n-              dependsOnTask.add(jarTask);\n-\n-              if (projectAfterEvaluation.getPlugins().hasPlugin(\"org.springframework.boot\")) {\n-                Jar jar = (Jar) jarTask.get();\n-                jar.setEnabled(true);\n-                jar.getArchiveClassifier().set(\"original\");\n-              }\n-            } else {\n-              // Have all tasks depend on the 'classes' task.\n-              dependsOnTask.add(projectAfterEvaluation.getTasks().named(\"classes\"));\n+          TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> bootWarTask =\n+              TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> jibDependenciesTask = tasks.register(\"jibDependencies\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "26649a1db011c7c87944a1ed20109c75209c71a0"}, "originalPosition": 74}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMxMDE0NDEzOnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQxNzo1Nzo0N1rOFkTNdw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0zMVQyMzo0MDo1NFrOFkaw4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYwNzc5OQ==", "bodyText": "Sorry, after thinking about this while we were doing the release, I realized I'm not quite convinced this is how we want to do this. Maybe in the future... but the problem is going backwards/deprecating something has a high cost.\nCan we just use the mechanism used previously: https://github.com/GoogleContainerTools/jib/pull/2247/files#diff-aef8bf567c91df6622aa0ea29ed0c682L175", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r373607799", "createdAt": "2020-01-31T17:57:47Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -162,68 +166,49 @@ public void apply(Project project) {\n             SyncMapTask.class,\n             task -> task.setJibExtension(jibExtension));\n \n+    Set<TaskProvider<?>> jibTaskProviders =\n+        ImmutableSet.of(buildImageTask, buildDockerTask, buildTarTask, syncMapTask);\n+\n     // A check to catch older versions of Jib.  This can be removed once we are certain people\n     // are using Jib 1.3.1 or later.\n     tasks.register(SKAFFOLD_CHECK_REQUIRED_VERSION_TASK_NAME, CheckJibVersionTask.class);\n \n     project.afterEvaluate(\n         projectAfterEvaluation -> {\n-          try {\n-            TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n-            TaskProvider<Task> bootWarTask =\n-                TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n-            List<TaskProvider<?>> dependsOnTask = new ArrayList<>();\n-            if (warTask != null || bootWarTask != null) {\n-              // Have all tasks depend on the 'war' and/or 'bootWar' task.\n-              if (warTask != null) {\n-                dependsOnTask.add(warTask);\n-              }\n-              if (bootWarTask != null) {\n-                dependsOnTask.add(bootWarTask);\n-              }\n-            } else if (\"packaged\".equals(jibExtension.getContainerizingMode())) {\n-              // Have all tasks depend on the 'jar' task.\n-              TaskProvider<Task> jarTask = projectAfterEvaluation.getTasks().named(\"jar\");\n-              dependsOnTask.add(jarTask);\n-\n-              if (projectAfterEvaluation.getPlugins().hasPlugin(\"org.springframework.boot\")) {\n-                Jar jar = (Jar) jarTask.get();\n-                jar.setEnabled(true);\n-                jar.getArchiveClassifier().set(\"original\");\n-              }\n-            } else {\n-              // Have all tasks depend on the 'classes' task.\n-              dependsOnTask.add(projectAfterEvaluation.getTasks().named(\"classes\"));\n+          TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> bootWarTask =\n+              TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> jibDependenciesTask = tasks.register(DEPENDENCIES_TASK_NAME);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2b7a2057bd5b9ee46aee327061a821db6505b210"}, "originalPosition": 82}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzczMTU1Mw==", "bodyText": "Sure, I can make that change", "url": "https://github.com/GoogleContainerTools/jib/pull/2247#discussion_r373731553", "createdAt": "2020-01-31T23:40:54Z", "author": {"login": "seanabraham"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/JibPlugin.java", "diffHunk": "@@ -162,68 +166,49 @@ public void apply(Project project) {\n             SyncMapTask.class,\n             task -> task.setJibExtension(jibExtension));\n \n+    Set<TaskProvider<?>> jibTaskProviders =\n+        ImmutableSet.of(buildImageTask, buildDockerTask, buildTarTask, syncMapTask);\n+\n     // A check to catch older versions of Jib.  This can be removed once we are certain people\n     // are using Jib 1.3.1 or later.\n     tasks.register(SKAFFOLD_CHECK_REQUIRED_VERSION_TASK_NAME, CheckJibVersionTask.class);\n \n     project.afterEvaluate(\n         projectAfterEvaluation -> {\n-          try {\n-            TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n-            TaskProvider<Task> bootWarTask =\n-                TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n-            List<TaskProvider<?>> dependsOnTask = new ArrayList<>();\n-            if (warTask != null || bootWarTask != null) {\n-              // Have all tasks depend on the 'war' and/or 'bootWar' task.\n-              if (warTask != null) {\n-                dependsOnTask.add(warTask);\n-              }\n-              if (bootWarTask != null) {\n-                dependsOnTask.add(bootWarTask);\n-              }\n-            } else if (\"packaged\".equals(jibExtension.getContainerizingMode())) {\n-              // Have all tasks depend on the 'jar' task.\n-              TaskProvider<Task> jarTask = projectAfterEvaluation.getTasks().named(\"jar\");\n-              dependsOnTask.add(jarTask);\n-\n-              if (projectAfterEvaluation.getPlugins().hasPlugin(\"org.springframework.boot\")) {\n-                Jar jar = (Jar) jarTask.get();\n-                jar.setEnabled(true);\n-                jar.getArchiveClassifier().set(\"original\");\n-              }\n-            } else {\n-              // Have all tasks depend on the 'classes' task.\n-              dependsOnTask.add(projectAfterEvaluation.getTasks().named(\"classes\"));\n+          TaskProvider<Task> warTask = TaskCommon.getWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> bootWarTask =\n+              TaskCommon.getBootWarTaskProvider(projectAfterEvaluation);\n+          TaskProvider<Task> jibDependenciesTask = tasks.register(DEPENDENCIES_TASK_NAME);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MzYwNzc5OQ=="}, "originalCommit": {"oid": "2b7a2057bd5b9ee46aee327061a821db6505b210"}, "originalPosition": 82}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 474, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}