{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcwNTM5NDU2", "number": 2264, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTo0NzoyN1rODdYaBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMTowNzozMlrODeJsMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyMTM1MTc0OnYy", "diffSide": "LEFT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "isResolved": true, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNVQxNTo0NzoyN1rOFl8z0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xMFQxODowMzowOFrOFnwCHg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzNzkzOA==", "bodyText": "This was API'ish (I used it in Cram).  It would be nice to not break any users even if it wasn't officially API.", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r375337938", "createdAt": "2020-02-05T15:47:27Z", "author": {"login": "briandealwis"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "diffHunk": "@@ -187,17 +187,6 @@ public CredentialRetriever wellKnownCredentialHelpers() {\n     };\n   }\n \n-  /**\n-   * Creates a new {@link CredentialRetriever} that tries to retrieve credentials from Docker config\n-   * (located at {@code $USER_HOME/.docker/config.json}).\n-   *\n-   * @return a new {@link CredentialRetriever}\n-   * @see DockerConfigCredentialRetriever\n-   */\n-  public CredentialRetriever dockerConfig() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5648e08bc5b9e767bfea051ae6b826b779e3fddc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU4NzcyMA==", "bodyText": "So do we look in $USER_HOME first and if no file exists then check user.home?", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r376587720", "createdAt": "2020-02-07T20:17:43Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "diffHunk": "@@ -187,17 +187,6 @@ public CredentialRetriever wellKnownCredentialHelpers() {\n     };\n   }\n \n-  /**\n-   * Creates a new {@link CredentialRetriever} that tries to retrieve credentials from Docker config\n-   * (located at {@code $USER_HOME/.docker/config.json}).\n-   *\n-   * @return a new {@link CredentialRetriever}\n-   * @see DockerConfigCredentialRetriever\n-   */\n-  public CredentialRetriever dockerConfig() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzNzkzOA=="}, "originalCommit": {"oid": "5648e08bc5b9e767bfea051ae6b826b779e3fddc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MzQzMw==", "bodyText": "As of now, we only check user.home. With this PR, we first check user.home, and if we fail, we try $HOME. We don't introduce a breaking change.", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r376593433", "createdAt": "2020-02-07T20:32:13Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "diffHunk": "@@ -187,17 +187,6 @@ public CredentialRetriever wellKnownCredentialHelpers() {\n     };\n   }\n \n-  /**\n-   * Creates a new {@link CredentialRetriever} that tries to retrieve credentials from Docker config\n-   * (located at {@code $USER_HOME/.docker/config.json}).\n-   *\n-   * @return a new {@link CredentialRetriever}\n-   * @see DockerConfigCredentialRetriever\n-   */\n-  public CredentialRetriever dockerConfig() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzNzkzOA=="}, "originalCommit": {"oid": "5648e08bc5b9e767bfea051ae6b826b779e3fddc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIxODQzMg==", "bodyText": "I must be missing something but from what I can see you've removed this arg-less function and replaced with with two other variants that require a pointer to a file.  We use this method in the jib-core examples README", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r377218432", "createdAt": "2020-02-10T17:48:59Z", "author": {"login": "briandealwis"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "diffHunk": "@@ -187,17 +187,6 @@ public CredentialRetriever wellKnownCredentialHelpers() {\n     };\n   }\n \n-  /**\n-   * Creates a new {@link CredentialRetriever} that tries to retrieve credentials from Docker config\n-   * (located at {@code $USER_HOME/.docker/config.json}).\n-   *\n-   * @return a new {@link CredentialRetriever}\n-   * @see DockerConfigCredentialRetriever\n-   */\n-  public CredentialRetriever dockerConfig() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzNzkzOA=="}, "originalCommit": {"oid": "5648e08bc5b9e767bfea051ae6b826b779e3fddc"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NzIyNTc1OA==", "bodyText": "I was talking to @loosebazooka. The method is restored.", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r377225758", "createdAt": "2020-02-10T18:03:08Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/frontend/CredentialRetrieverFactory.java", "diffHunk": "@@ -187,17 +187,6 @@ public CredentialRetriever wellKnownCredentialHelpers() {\n     };\n   }\n \n-  /**\n-   * Creates a new {@link CredentialRetriever} that tries to retrieve credentials from Docker config\n-   * (located at {@code $USER_HOME/.docker/config.json}).\n-   *\n-   * @return a new {@link CredentialRetriever}\n-   * @see DockerConfigCredentialRetriever\n-   */\n-  public CredentialRetriever dockerConfig() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTMzNzkzOA=="}, "originalCommit": {"oid": "5648e08bc5b9e767bfea051ae6b826b779e3fddc"}, "originalPosition": 11}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMyOTQyNjQxOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerConfigCredentialRetriever.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMTowNzozMlrOFnKU0A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMTo0NjozOFrOFnLOtA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwNzk1Mg==", "bodyText": "potential value in adding comment here (or somewhere) that legacyConfigFormat = auths{} block of dockerConfig.", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r376607952", "createdAt": "2020-02-07T21:07:32Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerConfigCredentialRetriever.java", "diffHunk": "@@ -81,6 +85,20 @@ public Path getDockerConfigFile() {\n     if (!Files.exists(dockerConfigFile)) {\n       return Optional.empty();\n     }\n+\n+    if (legacyConfigFormat) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "dfc96008f3c5c325fe6fc71a8ca0dfb29d0b1c4e"}, "originalPosition": 62}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYyMjc3Mg==", "bodyText": "I was able to simplify this a bit.", "url": "https://github.com/GoogleContainerTools/jib/pull/2264#discussion_r376622772", "createdAt": "2020-02-07T21:46:38Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerConfigCredentialRetriever.java", "diffHunk": "@@ -81,6 +85,20 @@ public Path getDockerConfigFile() {\n     if (!Files.exists(dockerConfigFile)) {\n       return Optional.empty();\n     }\n+\n+    if (legacyConfigFormat) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjYwNzk1Mg=="}, "originalCommit": {"oid": "dfc96008f3c5c325fe6fc71a8ca0dfb29d0b1c4e"}, "originalPosition": 62}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 488, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}