{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY4MjEwNDQ1", "number": 2256, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1MjoxOFrODbXgYg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1MjoxOFrODbXgYg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjMwMDIzMjY2OnYy", "diffSide": "RIGHT", "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "isResolved": true, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMDo1MjoxOFrOFi0Euw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQyMToxNTo0NFrOFi0z6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw==", "bodyText": "I'm not sure I understand the change here", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372049083", "createdAt": "2020-01-28T20:52:18Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1MDU0MA==", "bodyText": "was the generated file a different size?", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372050540", "createdAt": "2020-01-28T20:55:31Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1MTcyMQ==", "bodyText": "Yeah, somehow the size was 2748 instead of 2749 when running locally. The point of the test is to see that the JAR is not fat, so it is sufficient to see it is small.", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372051721", "createdAt": "2020-01-28T20:58:11Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1NDA4Ng==", "bodyText": "I see, okay. Can we add a bug to make this test more robust? This seems fine for the purposes of fixing integ-tests for now (temporary)", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372054086", "createdAt": "2020-01-28T21:03:05Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1NTQwMg==", "bodyText": "I actually think this is a final form to be robust. Thinking how a jar is created by Maven, now I recall that it is almost impossible to reproducibly create the exact same jar. (MANIFEST.MF will have build information for example.)", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372055402", "createdAt": "2020-01-28T21:06:04Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA1NjU2Ng==", "bodyText": "What if future springboot examples exceed the size? I guess we don't update our springboot examples all that often. test can be update then.", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372056566", "createdAt": "2020-01-28T21:08:27Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA2MTE2Mg==", "bodyText": "Yeah, we pin down the Spring Boot version, so I don't think the size will ever noticeably increase.", "url": "https://github.com/GoogleContainerTools/jib/pull/2256#discussion_r372061162", "createdAt": "2020-01-28T21:15:44Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin/src/integration-test/java/com/google/cloud/tools/jib/maven/BuildImageMojoIntegrationTest.java", "diffHunk": "@@ -694,7 +694,10 @@ public void testExecute_springBootPackaged()\n                 \"-c\",\n                 \"/app/classpath/spring-boot-0.1.0.original.jar\")\n             .run();\n-    Assert.assertEquals(\"2749 /app/classpath/spring-boot-0.1.0.original.jar\\n\", sizeOutput);\n+    Assert.assertThat(\n+        sizeOutput, CoreMatchers.containsString(\" /app/classpath/spring-boot-0.1.0.original.jar\"));\n+    int fileSize = Integer.parseInt(sizeOutput.substring(0, sizeOutput.indexOf(' ')));\n+    Assert.assertTrue(fileSize < 3000);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjA0OTA4Mw=="}, "originalCommit": {"oid": "4aae59be2ef55c9a96d0a7992ff8eef673633196"}, "originalPosition": 8}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 479, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}