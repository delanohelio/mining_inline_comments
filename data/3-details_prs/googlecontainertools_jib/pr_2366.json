{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0Nzk1MjUz", "number": 2366, "title": "Return copies instead of exposing internal collections / and more", "bodyText": "Returns copies of collections to achieve absolute immutable. I missed some fields by mistake.\nFixes wrong OSGi package export in jib-build-plan.\n\nMisc:\n\nRemoves the deprecated describeContainer.\nEnsure type before casting; we can remove @SuppressWarnings.", "createdAt": "2020-03-27T14:44:56Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2366", "merged": true, "mergeCommit": {"oid": "f8bbe1afac785b0f15f69fc29aee11a7ff955495"}, "closed": true, "closedAt": "2020-03-30T14:59:28Z", "author": {"login": "chanseokoh"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcRxdszgH2gAyMzk0Nzk1MjUzOmJlMjQwYjYwZGVjNTkyMGVmZWU3Y2YxOTAzZDMyYmRhYjhkN2MwZTE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcSvIVxAH2gAyMzk0Nzk1MjUzOjhiNzExNTcxYTM4MjYzZjQ5OTdhNjdiM2I1MWRmYjYwMWQyNDA1Mzg=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "be240b60dec5920efee7cf1903d32bdab8d7c0e1", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/be240b60dec5920efee7cf1903d32bdab8d7c0e1", "committedDate": "2020-03-27T14:20:35Z", "message": "Minor fixes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89b4525354f67d00367a32daead00e41a6a1791e", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/89b4525354f67d00367a32daead00e41a6a1791e", "committedDate": "2020-03-27T14:25:59Z", "message": "Remove suppressWarning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09975b8e94d5ab6b902f9eec00996dae4f95f6b5", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/09975b8e94d5ab6b902f9eec00996dae4f95f6b5", "committedDate": "2020-03-27T14:36:13Z", "message": "Remove warning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/0342e9851d4cddca1fc410e329abb9cf546918b8", "committedDate": "2020-03-27T14:55:40Z", "message": "Fix wrong package export"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgzMzA1NjE5", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#pullrequestreview-383305619", "createdAt": "2020-03-28T11:38:24Z", "commit": {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMTozODoyNFrOF9I1_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOFQxMTo0Mjo1NlrOF9I3vg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1MjM1MQ==", "bodyText": "is this a modules thing?", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#discussion_r399652351", "createdAt": "2020-03-28T11:38:24Z", "author": {"login": "loosebazooka"}, "path": "jib-build-plan/build.gradle", "diffHunk": "@@ -25,7 +25,7 @@ jar {\n     attributes 'Bundle-Vendor': 'Google LLC'\n     attributes 'Bundle-DocURL': 'https://github.com/GoogleContainerTools/jib'\n     attributes 'Bundle-License': 'https://www.apache.org/licenses/LICENSE-2.0'\n-    attributes 'Export-Package': 'com.google.cloud.tools.jib.plugins.api.buildplan'\n+    attributes 'Export-Package': 'com.google.cloud.tools.jib.api.buildplan'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1MjcwOA==", "bodyText": "Can we leave the comment in also?", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#discussion_r399652708", "createdAt": "2020-03-28T11:42:09Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/api/JibContainerBuilder.java", "diffHunk": "@@ -640,8 +642,13 @@ public JibContainerBuilder applyContainerBuildPlan(ContainerBuildPlan buildPlan)\n     baseImageConfiguration.getTarPath().ifPresent(builder::setTarPath);\n     baseImageConfiguration = builder.build();\n \n-    // For now, only FileEntriesLayer is supported in jib-core.\n-    layerConfigurations = (List<FileEntriesLayer>) buildPlan.getLayers();\n+    Function<LayerObject, FileEntriesLayer> castToFileEntriesLayer =", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8"}, "originalPosition": 38}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTY1Mjc5OA==", "bodyText": "Presumably no user will ever hit this, but should we include an error message if they do?", "url": "https://github.com/GoogleContainerTools/jib/pull/2366#discussion_r399652798", "createdAt": "2020-03-28T11:42:56Z", "author": {"login": "loosebazooka"}, "path": "jib-plugins-common/src/main/java/com/google/cloud/tools/jib/plugins/common/PluginConfigurationProcessor.java", "diffHunk": "@@ -302,7 +303,9 @@ public static String getSkaffoldSyncMap(\n     // since jib has already expanded out directories after processing everything, we just\n     // ignore directories and provide only files to watch\n     Set<Path> excludesExpanded = getAllFiles(excludes);\n-    for (FileEntriesLayer layer : jibContainerBuilder.describeContainer().getFileEntriesLayers()) {\n+    for (LayerObject layerObject : jibContainerBuilder.toContainerBuildPlan().getLayers()) {\n+      Verify.verify(layerObject instanceof FileEntriesLayer);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0342e9851d4cddca1fc410e329abb9cf546918b8"}, "originalPosition": 14}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d23b4594c2651a9a42401e2160d64f65c8467bc1", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/d23b4594c2651a9a42401e2160d64f65c8467bc1", "committedDate": "2020-03-30T14:11:12Z", "message": "Comment and error messages"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8b711571a38263f4997a67b3b51dfb601d240538", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8b711571a38263f4997a67b3b51dfb601d240538", "committedDate": "2020-03-30T14:11:22Z", "message": "Merge branch 'chanseok-minor-cleanups' of https://github.com/GoogleContainerTools/jib into chanseok-minor-cleanups"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 165, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}