{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzOTkwNjEy", "number": 2408, "title": "Add entry in faq for manifests lists", "bodyText": "Add faq entry, so we can link to it for failing builds.\nUsing example provided in: #2148", "createdAt": "2020-04-15T21:09:44Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2408", "merged": true, "mergeCommit": {"oid": "c9f6caa419ef84e6be4eb9daca0f9d3b0689bbaa"}, "closed": true, "closedAt": "2020-04-16T15:30:23Z", "author": {"login": "loosebazooka"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX-srHgH2gAyNDAzOTkwNjEyOjcxN2Q1NTAwODg4Nzg0YzRiNmNmOGJmZWU3MjU5N2QxZGY3NGIwYzU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcYNhpfgFqTM5NDY4NzM3MA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "717d5500888784c4b6cf8bfee72597d1df74b0c5", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/717d5500888784c4b6cf8bfee72597d1df74b0c5", "committedDate": "2020-04-15T21:09:15Z", "message": "Add entry in faq for manifests lists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/3c73f8b38e2201d7dfa037bff17fa8465ca9551e", "committedDate": "2020-04-15T21:12:24Z", "message": "use java formatting on json (comment rendering)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0MTkyMzUx", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#pullrequestreview-394192351", "createdAt": "2020-04-15T23:01:08Z", "commit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzowMTowOFrOGGOkIA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMzowOTo1NlrOGGOvxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4MzI2NA==", "bodyText": "The manifest inspect command is an experimental one and needs to update ~/.docker/config.json. Maybe we can add some links:\nhttps://docs.docker.com/engine/reference/commandline/manifest_inspect/ https://docs.docker.com/engine/reference/commandline/cli/#experimental-features", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409183264", "createdAt": "2020-04-15T23:01:08Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, Jib will pick always select an image for the platform:`amd64/linux` if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list). If you need to specify a different image from a manifest list you must specify the image digest for the platform you are targeting. \n+\n+To determine the digest of an image in a manifest list, you can view the manifest list with:\n+```\n+$ docker manifest inspect openjdk:8", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4Mzg4MQ==", "bodyText": "\"will pick always select\" --> \"will always select\"\n\"for the platform:amd64/linux\" --> \"for the platform amd64/linux", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409183881", "createdAt": "2020-04-15T23:03:03Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, Jib will pick always select an image for the platform:`amd64/linux` if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list). If you need to specify a different image from a manifest list you must specify the image digest for the platform you are targeting. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NDI3Nw==", "bodyText": "For the title, how about \"a manifest list or an OCI index\"? (But we can omit OCI index in the text for brevity.)\nAnd how about \"specify OS and architecture of a base image from...\"?", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409184277", "createdAt": "2020-04-15T23:04:06Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -27,7 +27,8 @@ If a question you have is not answered below, please [submit an issue](/../../is\n [What would a Dockerfile for a Jib-built image look like?](#what-would-a-dockerfile-for-a-jib-built-image-look-like)\\\n [How can I inspect the image Jib built?](#how-can-i-inspect-the-image-jib-built)\\\n [I would like to run my application with a javaagent.](#i-would-like-to-run-my-application-with-a-javaagent)\\\n-[How can I tag my image with a timestamp?](#how-can-i-tag-my-image-with-a-timestamp)\n+[How can I tag my image with a timestamp?](#how-can-i-tag-my-image-with-a-timestamp)\\\n+[How do I specify an image from a manifest list?](#how-do-i-specify-an-image-from-a-manifest-list)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NTAzOA==", "bodyText": "\"for the platform:amd64/linux\" --> \"for the platform amd64/linux", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409185038", "createdAt": "2020-04-15T23:06:27Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, Jib will pick always select an image for the platform:`amd64/linux` if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list). If you need to specify a different image from a manifest list you must specify the image digest for the platform you are targeting. \n+\n+To determine the digest of an image in a manifest list, you can view the manifest list with:\n+```\n+$ docker manifest inspect openjdk:8\n+```\n+\n+You can then inspect the output for the specific image you want (in this example an image for the platform:`arm64/linux`)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NjI0NQ==", "bodyText": "Can we add something like\n\"As in the example, you can preserve the tag for commenting purposes, but note that the tag will not be used but ignored.\"", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409186245", "createdAt": "2020-04-15T23:09:56Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, Jib will pick always select an image for the platform:`amd64/linux` if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list). If you need to specify a different image from a manifest list you must specify the image digest for the platform you are targeting. \n+\n+To determine the digest of an image in a manifest list, you can view the manifest list with:\n+```\n+$ docker manifest inspect openjdk:8\n+```\n+\n+You can then inspect the output for the specific image you want (in this example an image for the platform:`arm64/linux`)\n+```java\n+{         \n+   ...\n+   // This whole BLOB itself is a manifest list.\n+   \"mediaType\": \"application/vnd.docker.distribution.manifest.list.v2+json\",\n+   \"manifests\": [\n+      {\n+         // This entry in the list points to the manifest for the ARM64/Linux manifest.\n+         \"mediaType\": \"application/vnd.docker.distribution.manifest.v2+json\",\n+         ...\n+         \"digest\": \"sha256:1fbd49e3fc5e53154fa93cad15f211112d899a6b0c5dc1e8661d6eb6c18b30a6\",\n+         \"platform\": {\n+            \"architecture\": \"arm64\",\n+            \"os\": \"linux\",\n+            \"variant\": \"v8\"\n+         }\n+      }\n+   ]\n+}\n+```\n+\n+You then use the digest for the target platform you desire in your `jib.to.image` in the form `\"opendjdk:8@sha256:1fbd49e3fc5e53154fa93cad15f211112d899a6b0c5dc1e8661d6eb6c18b30a6\"`", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d55672089a8996ba00223093a03be0fd0491720c", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/d55672089a8996ba00223093a03be0fd0491720c", "committedDate": "2020-04-16T03:46:58Z", "message": "some changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0Mjg2MDYy", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#pullrequestreview-394286062", "createdAt": "2020-04-16T04:12:25Z", "commit": {"oid": "d55672089a8996ba00223093a03be0fd0491720c"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNDoxMjoyNlrOGGT4Yw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQwNDoxNjo1M1rOGGT8sw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3MDM3MQ==", "bodyText": "Yeah, I think \"platform\" is a good keyword for search.", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409270371", "createdAt": "2020-04-16T04:12:26Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -27,7 +27,8 @@ If a question you have is not answered below, please [submit an issue](/../../is\n [What would a Dockerfile for a Jib-built image look like?](#what-would-a-dockerfile-for-a-jib-built-image-look-like)\\\n [How can I inspect the image Jib built?](#how-can-i-inspect-the-image-jib-built)\\\n [I would like to run my application with a javaagent.](#i-would-like-to-run-my-application-with-a-javaagent)\\\n-[How can I tag my image with a timestamp?](#how-can-i-tag-my-image-with-a-timestamp)\n+[How can I tag my image with a timestamp?](#how-can-i-tag-my-image-with-a-timestamp)\\\n+[How do I specify an image from a manifest list?](#how-do-i-specify-an-image-from-a-manifest-list)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTE4NDI3Nw=="}, "originalCommit": {"oid": "3c73f8b38e2201d7dfa037bff17fa8465ca9551e"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3MDU0Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            To view a manifest, [enable experimental docker cli](https://docs.docker.com/engine/reference/commandline/cli/#experimental-features) features and then run the [manifest inspect](https://docs.docker.com/engine/reference/commandline/manifest_inspect/) command.\n          \n          \n            \n            To view a manifest, [enable experimental docker CLI](https://docs.docker.com/engine/reference/commandline/cli/#experimental-features) features and then run the [manifest inspect](https://docs.docker.com/engine/reference/commandline/manifest_inspect/) command.", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409270547", "createdAt": "2020-04-16T04:13:10Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list), Jib will always select an image for the platform `amd64/linux` . If you need to specify a different image from a manifest list you must specify the digest for the platform you are targeting. \n+\n+To view a manifest, [enable experimental docker cli](https://docs.docker.com/engine/reference/commandline/cli/#experimental-features) features and then run the [manifest inspect](https://docs.docker.com/engine/reference/commandline/manifest_inspect/) command.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55672089a8996ba00223093a03be0fd0491720c"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3MDg4Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            By design, if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list), Jib will always select an image for the platform `amd64/linux` . If you need to specify a different image from a manifest list you must specify the digest for the platform you are targeting. \n          \n          \n            \n            By design, if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list), Jib will always select an image for the platform `amd64/linux`. If you need to specify a different image from a manifest list you must specify the digest for the platform you are targeting.", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409270887", "createdAt": "2020-04-16T04:14:18Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list), Jib will always select an image for the platform `amd64/linux` . If you need to specify a different image from a manifest list you must specify the digest for the platform you are targeting. ", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d55672089a8996ba00223093a03be0fd0491720c"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3MTQ3NQ==", "bodyText": "We shouldn't forget to update this paragraph once we fix #1567. But I think we will forget, so should we add a link to the issue?", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#discussion_r409271475", "createdAt": "2020-04-16T04:16:53Z", "author": {"login": "chanseokoh"}, "path": "docs/faq.md", "diffHunk": "@@ -466,6 +467,38 @@ Some plugins, such as the [Docker Prepare Gradle Plugin](https://github.com/gcla\n \n To inspect the image that is produced from the build using Docker, you can use commands such as `docker inspect your/image:tag` to view the image configuration, or you can also download the image using `docker save` to manually inspect the container image. Other tools, such as [dive](https://github.com/wagoodman/dive), provide nicer UI to inspect the image.\n \n+### How do I specify an image from a manifest list?\n+\n+By design, if the target image reference is a [manifest list](https://docs.docker.com/registry/spec/manifest-v2-2/#manifest-list), Jib will always select an image for the platform `amd64/linux` . If you need to specify a different image from a manifest list you must specify the digest for the platform you are targeting. ", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTI3MDg4Nw=="}, "originalCommit": {"oid": "d55672089a8996ba00223093a03be0fd0491720c"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cae0ebd85ae5df23165f5ba1aa12dee1cb268a70", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/cae0ebd85ae5df23165f5ba1aa12dee1cb268a70", "committedDate": "2020-04-16T14:13:01Z", "message": "Update docs/faq.md\n\nCo-Authored-By: Chanseok Oh <chanseok@google.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "092c1a2122fef0cd0ca4e25d0d955fd3a53adfa9", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/092c1a2122fef0cd0ca4e25d0d955fd3a53adfa9", "committedDate": "2020-04-16T14:13:30Z", "message": "Update docs/faq.md\n\nCo-Authored-By: Chanseok Oh <chanseok@google.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1259bd109032ce7bb4d95aebd3a5cb3c0c5d8bb9", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/1259bd109032ce7bb4d95aebd3a5cb3c0c5d8bb9", "committedDate": "2020-04-16T14:21:10Z", "message": "Update faq.md"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk0Njg3Mzcw", "url": "https://github.com/GoogleContainerTools/jib/pull/2408#pullrequestreview-394687370", "createdAt": "2020-04-16T14:25:47Z", "commit": {"oid": "1259bd109032ce7bb4d95aebd3a5cb3c0c5d8bb9"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 212, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}