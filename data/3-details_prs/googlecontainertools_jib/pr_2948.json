{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxNDg4MjI2", "number": 2948, "title": " Consolidate prepare release scripts and migrate to GitHub Actions", "bodyText": "I was duplicating jib-gradle-prepare-release.yml, and it became too many, as we have 7 release targets (build-plan, core, maven, gradle, extension-common, maven-extension, and gradle-extension). I think it's better to consolidate them into a single GitHub Actions workflow.\nNote, I should have renamed jib-gradle-prepare-release.yml to jib-prepare-release.yml, but that loses GitHub diff comparison. I'll rename the file in a separate PR.", "createdAt": "2020-12-16T22:56:49Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2948", "merged": true, "mergeCommit": {"oid": "8b792d674d71ffef7f0b4d5ce138e26f94a1442b"}, "closed": true, "closedAt": "2020-12-22T16:08:05Z", "author": {"login": "chanseokoh"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdm27c1AH2gAyNTQxNDg4MjI2OjRhY2M5YTk2MTEzNzg5YzZmODEwZjY2NGJjMjg4ZDM2MDc1ZTIzNTQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdoefm-gH2gAyNTQxNDg4MjI2OjQzMzZmMmE2ZmNjNmE1OTI3NTlhNzYxNmNlN2JjMThiYjlhMjdlNDE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "4acc9a96113789c6f810f664bc288d36075e2354", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/4acc9a96113789c6f810f664bc288d36075e2354", "committedDate": "2020-12-16T22:46:10Z", "message": "Consolidate prepare release into GitHub Actions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1a60405a2f7ac3d5e83c3c49b908ec7d28d48f36", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/1a60405a2f7ac3d5e83c3c49b908ec7d28d48f36", "committedDate": "2020-12-16T22:48:04Z", "message": "Rename workflow file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "46ab9c04e0a4ae09691597f7a0f98ee4659243a6", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/46ab9c04e0a4ae09691597f7a0f98ee4659243a6", "committedDate": "2020-12-16T22:56:32Z", "message": "comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c71baa6469750ca41d0db529ee97c9543cfbba5", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/5c71baa6469750ca41d0db529ee97c9543cfbba5", "committedDate": "2020-12-16T23:00:40Z", "message": "Fix associated tag in GitHub release"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2NzA4NTQ3", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#pullrequestreview-556708547", "createdAt": "2020-12-21T22:42:43Z", "commit": {"oid": "5c71baa6469750ca41d0db529ee97c9543cfbba5"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjo0Mjo0M1rOIJoJHw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjo0OToxN1rOIJoSTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2NTc5MQ==", "bodyText": "so we can't validate this in the inputs section above?", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546965791", "createdAt": "2020-12-21T22:42:43Z", "author": {"login": "loosebazooka"}, "path": ".github/workflows/jib-gradle-prepare-release.yml", "diffHunk": "@@ -1,38 +1,61 @@\n-name: Prepare Jib Gradle release\n+name: Prepare Jib release\n on:\n   workflow_dispatch:\n     inputs:\n+      project:\n+        description: Jib project to release\n+        required: true\n+        default: (build-plan | core | maven | gradle | extension-common | maven-extension | gradle-extension)\n       release_version:\n         description: new release version\n         required: true\n         default: (for example, 0.1.0)\n \n jobs:\n   release:\n-    name: Prepare Jib Gradle release\n+    name: Prepare Jib release\n     runs-on: ubuntu-latest\n     steps:\n       - name: Check out code\n         uses: actions/checkout@v2\n \n-      - name: Build project\n+      - name: Check input\n         run: |\n+          echo '* input project: \"${{ github.event.inputs.project }}\"'\n+\n+          case ${{ github.event.inputs.project }} in\n+            build-plan|core|maven|gradle|extension-common|maven-extension|gradle-extension) ;;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c71baa6469750ca41d0db529ee97c9543cfbba5"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2ODE0MA==", "bodyText": "Just to clarify, we don't yet draft releases for the extension projects?", "url": "https://github.com/GoogleContainerTools/jib/pull/2948#discussion_r546968140", "createdAt": "2020-12-21T22:49:17Z", "author": {"login": "loosebazooka"}, "path": ".github/workflows/jib-gradle-prepare-release.yml", "diffHunk": "@@ -41,24 +64,38 @@ jobs:\n         with:\n           # Provided by Actions. No need to create a token.\n           github_token: ${{ secrets.GITHUB_TOKEN }}\n-          source_branch: gradle_release_v${{ github.event.inputs.release_version }}\n-          pr_title: \"Gradle release v${{ github.event.inputs.release_version }}\"\n+          source_branch: ${{ github.event.inputs.project }}-release-v${{ github.event.inputs.release_version }}\n+          pr_title: \"${{ github.event.inputs.project }} release v${{ github.event.inputs.release_version }}\"\n           pr_body: \"To be merged after the release is complete.\"\n \n-      - name: Draft GitHub release\n+      - name: Draft Maven/Gradle GitHub release", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5c71baa6469750ca41d0db529ee97c9543cfbba5"}, "originalPosition": 79}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4336f2a6fcc6a592759a7616ce7bc18bb9a27e41", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/4336f2a6fcc6a592759a7616ce7bc18bb9a27e41", "committedDate": "2020-12-21T23:25:53Z", "message": "Merge branch 'master' into consolidate-prepare-release"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4746, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}