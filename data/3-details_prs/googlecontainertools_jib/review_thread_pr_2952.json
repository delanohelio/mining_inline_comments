{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNjgxMzQ1", "number": 2952, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDowMjowOFrOFH6rFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjozODowMVrOFH9JNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzODQ1NjUyOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDowMjowOFrOIJkXWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjozMzo1NlrOIJn-DQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwMzg5Nw==", "bodyText": "Why do we want to apply java-library for jib-gradle-plugin? It's not a Java library. And it's not in parity with jib-maven-plugin either.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546903897", "createdAt": "2020-12-21T20:02:08Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,7 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+['jib-core', 'jib-gradle-plugin', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwODU4NA==", "bodyText": "ah, my comment is missing when I rewrote the PR. The java-gradle-plugin now auto applies the java-library plugin, so we must do this, I'll add in the comment.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546908584", "createdAt": "2020-12-21T20:13:09Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,7 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+['jib-core', 'jib-gradle-plugin', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwMzg5Nw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkxMjA1MQ==", "bodyText": "If java-gradle-plugin auto-applies java-library, then doesn't it mean we don't have to apply it manually here? (That is, no need to include jib-gradle-plugin in this line?\nAnd the Travis \"pr\" build failed and this seems related. Interestingly, however, the \"push\" build didn't fail.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546912051", "createdAt": "2020-12-21T20:21:47Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,7 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+['jib-core', 'jib-gradle-plugin', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwMzg5Nw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkyNzY2NQ==", "bodyText": "Right the reason is we need to apply Java-library before java", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546927665", "createdAt": "2020-12-21T21:02:09Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,7 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+['jib-core', 'jib-gradle-plugin', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwMzg5Nw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2Mjk1Nw==", "bodyText": "or we get some error where the something is already configured that the java-library plugin wants to modify.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546962957", "createdAt": "2020-12-21T22:33:56Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,7 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+['jib-core', 'jib-gradle-plugin', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwMzg5Nw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzODQ2NTA3OnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/ContainerParameters.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDowNTowN1rOIJkcSw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDoyMjoyNFrOIJk4KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTE2Mw==", "bodyText": "I guess this fixes #2930. And I was wondering if we should fix it by converting it to a Property as we did for allowInsecureRegistries.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546905163", "createdAt": "2020-12-21T20:05:07Z", "author": {"login": "chanseokoh"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/ContainerParameters.java", "diffHunk": "@@ -112,7 +112,6 @@ public void setExtraClasspath(List<String> classpath) {\n   }\n \n   @Input\n-  @Optional\n   public boolean getExpandClasspathDependencies() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwODM1NQ==", "bodyText": "Perhaps, but I think it's beyond the scope of this PR. (this just fixes the issue that a boolean can't be optional)", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546908355", "createdAt": "2020-12-21T20:12:34Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/ContainerParameters.java", "diffHunk": "@@ -112,7 +112,6 @@ public void setExtraClasspath(List<String> classpath) {\n   }\n \n   @Input\n-  @Optional\n   public boolean getExpandClasspathDependencies() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTE2Mw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkxMjI5Nw==", "bodyText": "Okay, I think this is a simple fix that works.", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546912297", "createdAt": "2020-12-21T20:22:24Z", "author": {"login": "chanseokoh"}, "path": "jib-gradle-plugin/src/main/java/com/google/cloud/tools/jib/gradle/ContainerParameters.java", "diffHunk": "@@ -112,7 +112,6 @@ public void setExtraClasspath(List<String> classpath) {\n   }\n \n   @Input\n-  @Optional\n   public boolean getExpandClasspathDependencies() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTE2Mw=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzODQ2OTQ1OnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDowNjoyOFrOIJketQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMDoxMzo1NFrOIJkq5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTc4MQ==", "bodyText": "Oh, we missed this? And I'm curious what the effect of adding this is?", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546905781", "createdAt": "2020-12-21T20:06:28Z", "author": {"login": "chanseokoh"}, "path": "jib-gradle-plugin/build.gradle", "diffHunk": "@@ -72,6 +72,7 @@ pluginBundle {\n }\n \n gradlePlugin {\n+  testSourceSets sourceSets.integrationTest, sourceSets.test", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwODkwMw==", "bodyText": "For some reason, in gradle 6.0+, without this, the gradleTestKit isn't applied to integration tests (so anything where we exectute gradle would probably not work anymore).", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546908903", "createdAt": "2020-12-21T20:13:54Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin/build.gradle", "diffHunk": "@@ -72,6 +72,7 @@ pluginBundle {\n }\n \n gradlePlugin {\n+  testSourceSets sourceSets.integrationTest, sourceSets.test", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjkwNTc4MQ=="}, "originalCommit": {"oid": "79087bf49287868821e80082191c719370ab7900"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzODg2MTM1OnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjozODowMVrOIJoDZg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yMVQyMjozODowMVrOIJoDZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0Njk2NDMyNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            // gradle-java-plugin (in jib-gradle-plugin) auto applies java-library, so ensure that happens first\n          \n          \n            \n            // java-gradle-plugin (in jib-gradle-plugin) auto applies java-library, so ensure that happens first", "url": "https://github.com/GoogleContainerTools/jib/pull/2952#discussion_r546964326", "createdAt": "2020-12-21T22:38:01Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,7 +21,9 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n-['jib-core', 'jib-gradle-plugin-extension-api', 'jib-maven-plugin-extension-api'].each { projectName ->\n+// `java-library` must be applied before `java`\n+// gradle-java-plugin (in jib-gradle-plugin) auto applies java-library, so ensure that happens first", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f35218b76759b41c0e2edf419b9c47d1b652cde4"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4901, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}