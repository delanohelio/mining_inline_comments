{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNTc2NjQy", "number": 2273, "title": "Improve checkstyle config", "bodyText": "update checkstyle to 8.29\nimprove config modification\nadd temporary check suppressions so fixes can go in gradually\n\nbeginning of #2272", "createdAt": "2020-02-07T19:58:08Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2273", "merged": true, "mergeCommit": {"oid": "d362f5f5d356e116e843f4070d1b4e2aa397a02a"}, "closed": true, "closedAt": "2020-02-07T21:43:39Z", "author": {"login": "loosebazooka"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcCFC6LABqjMwMTg5Mzg5NTc=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcCFYuqABqjMwMTkwMDE3NjA=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97998e72d522152c4a778f7477cc685f6eaf2b5f", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/97998e72d522152c4a778f7477cc685f6eaf2b5f", "committedDate": "2020-02-07T19:57:47Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}, "afterCommit": {"oid": "2cab209ffe002e8b42c5ca0185b12ed28c22ea6d", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/2cab209ffe002e8b42c5ca0185b12ed28c22ea6d", "committedDate": "2020-02-07T20:06:28Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2cab209ffe002e8b42c5ca0185b12ed28c22ea6d", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/2cab209ffe002e8b42c5ca0185b12ed28c22ea6d", "committedDate": "2020-02-07T20:06:28Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}, "afterCommit": {"oid": "2c3e09266e2c340da4957bb1194bf322fc1806ee", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/2c3e09266e2c340da4957bb1194bf322fc1806ee", "committedDate": "2020-02-07T20:18:40Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1NDE3MTI1", "url": "https://github.com/GoogleContainerTools/jib/pull/2273#pullrequestreview-355417125", "createdAt": "2020-02-07T20:27:15Z", "commit": {"oid": "2c3e09266e2c340da4957bb1194bf322fc1806ee"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDoyNzoxNVrOFnJUbQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QyMDoyOToxMFrOFnJXnA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MTQ2OQ==", "bodyText": "refrenced --> referenced", "url": "https://github.com/GoogleContainerTools/jib/pull/2273#discussion_r376591469", "createdAt": "2020-02-07T20:27:15Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -117,39 +117,27 @@ subprojects {\n \n   /* CHECKSTYLE */\n   checkstyle {\n-    toolVersion = '8.18'\n+    toolVersion = '8.29'\n \n-    // use the google checks packaged with the jar\n+    // use google checks from the jar\n     def googleChecks = resources.text.fromArchiveEntry(configurations.checkstyle[0], 'google_checks.xml').asString()\n \n-    // preserve these, the parser erases them\n-    def xmlVersionNode = googleChecks.find(/<\\?xml version.*>/)\n-    def doctypeNode = googleChecks.find(/(?s)<!DOCTYPE[^>]*>/)\n-\n-    def parser = new XmlParser()\n-    parser.setFeature(\"http://apache.org/xml/features/disallow-doctype-decl\", false)\n-    parser.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false)\n-    def rootModule = parser.parseText(googleChecks)\n-\n-    // force each module within the root checker to only work on \"properties, xml\", ignore \"java\"\n-    def fileExtensionNode = parser.parseText('<property name=\"fileExtensions\" value=\"properties, xml\"/>')\n-    rootModule.module*.append(fileExtensionNode)\n-\n-    // add in copyright header check on only java files\n-    def copyrightNode = parser.parseText('''\n-    <module name=\"RegexpHeader\">\n-        <property name=\"headerFile\" value=\"${config_loc}/copyright-java.header\"/>\n-        <property name=\"fileExtensions\" value=\"java\"/>\n-        <property name=\"id\" value=\"header\"/>\n-    </module>\n-    ''')\n-    rootModule.append(copyrightNode)\n+    // set the location of the suppressions file refrenced in google_checks.xml", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c3e09266e2c340da4957bb1194bf322fc1806ee"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjU5MjI4NA==", "bodyText": "So hopefully we will eventually fix these violations?", "url": "https://github.com/GoogleContainerTools/jib/pull/2273#discussion_r376592284", "createdAt": "2020-02-07T20:29:10Z", "author": {"login": "chanseokoh"}, "path": "config/checkstyle/checkstyle-suppressions.xml", "diffHunk": "@@ -0,0 +1,38 @@\n+<?xml version=\"1.0\"?>\n+<!DOCTYPE suppressions PUBLIC\n+  \"-//Puppy Crawl//DTD Suppressions 1.1//EN\"\n+  \"http://www.puppycrawl.com/dtds/suppressions_1_1.dtd\">\n+<suppressions>\n+  <!-- clash with google java format -->\n+  <suppress files=\".*\\.java\" checks=\"SingleLineJavadoc\"/>\n+  <suppress files=\".*\\.java\" checks=\"Indentation\"/>\n+  <suppress files=\".*\\.java\" checks=\"RightCurly\"/>\n+  <suppress files=\".*\\.java\" checks=\"LineLength\"/>\n+\n+  <!-- temporary suppressions as we work through them -->", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c3e09266e2c340da4957bb1194bf322fc1806ee"}, "originalPosition": 12}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "84f8d508452696357280b5ef9faf43d321ceee02", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/84f8d508452696357280b5ef9faf43d321ceee02", "committedDate": "2020-02-07T20:30:16Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c3e09266e2c340da4957bb1194bf322fc1806ee", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/2c3e09266e2c340da4957bb1194bf322fc1806ee", "committedDate": "2020-02-07T20:18:40Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}, "afterCommit": {"oid": "84f8d508452696357280b5ef9faf43d321ceee02", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/84f8d508452696357280b5ef9faf43d321ceee02", "committedDate": "2020-02-07T20:30:16Z", "message": "Improve checkstyle config\n\n- update checkstyle to 8.29\n- improve config modification\n- add temporary check suppressions so fixes can go in gradually"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 339, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}