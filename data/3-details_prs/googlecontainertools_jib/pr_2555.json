{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQyMTEzOTU4", "number": 2555, "title": "Test for RegistryClient.pullManifest() ", "bodyText": "Part of #1808", "createdAt": "2020-06-30T15:34:45Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2555", "merged": true, "mergeCommit": {"oid": "c867dca50a6a5c6e4e9e4c08ca1ab2cbec32b553"}, "closed": true, "closedAt": "2020-07-01T16:09:03Z", "author": {"login": "louismurerwa"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcvJEfBAH2gAyNDQyMTEzOTU4OjVjNDdmZDE5NjA5MzA3MGNlMTBjNmQ0OGM2NTEwYzdlZGE4YzZkODY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcwsd9yAFqTQ0MTAwNTU5OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "5c47fd196093070ce10c6d48c6510c7eda8c6d86", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/5c47fd196093070ce10c6d48c6510c7eda8c6d86", "committedDate": "2020-06-26T20:14:34Z", "message": "Solved:NPE if the server doesn't provide any HTTP content for an error"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01835a184a7e1b7595885098e942d70c1b7d7598", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/01835a184a7e1b7595885098e942d70c1b7d7598", "committedDate": "2020-06-26T21:28:46Z", "message": "WIP"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "47ed51d4f65c96c3e6f62ef850692183a9beae7b", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/47ed51d4f65c96c3e6f62ef850692183a9beae7b", "committedDate": "2020-06-26T23:33:01Z", "message": "Google Style Formating Done"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "090d655527b962e8ccb8ed58178a954cd1ad4456", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/090d655527b962e8ccb8ed58178a954cd1ad4456", "committedDate": "2020-06-29T15:20:46Z", "message": "Fixed the error the styling errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6473b4258fe570fc2f507ce7dcc0a03807218a2a", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/6473b4258fe570fc2f507ce7dcc0a03807218a2a", "committedDate": "2020-06-29T15:23:14Z", "message": "Merge branch 'master' of https://github.com/GoogleContainerTools/jib into louis-fixnpeexception\nMerging #2537 fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "646542cde28b272d7dd11c3b7cfbf419a3100542", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/646542cde28b272d7dd11c3b7cfbf419a3100542", "committedDate": "2020-06-29T15:31:01Z", "message": "Fixing styling errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6594293f20346612c6b1985d4e62143e1013fc83", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/6594293f20346612c6b1985d4e62143e1013fc83", "committedDate": "2020-06-29T15:37:17Z", "message": "Minor Style Fix"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1532cb18a29a9ae5fa264f94426922c27065c6ee", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/1532cb18a29a9ae5fa264f94426922c27065c6ee", "committedDate": "2020-06-30T15:24:34Z", "message": "RegistryClient.pullManifest() Test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7fa9e567bf18a2675cb45b89661f617699f89d13", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/7fa9e567bf18a2675cb45b89661f617699f89d13", "committedDate": "2020-06-30T15:25:38Z", "message": "Merge branch 'master' of https://github.com/GoogleContainerTools/jib into pullmanifest\nUpdate local branch"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMTQzMjc5", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-440143279", "createdAt": "2020-06-30T15:38:06Z", "commit": {"oid": "7fa9e567bf18a2675cb45b89661f617699f89d13"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNTozODowNlrOGrCaAQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNTo0Mzo1OFrOGrCp8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4MTM3Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                String imageTag = \"testIMage\";\n          \n      \n    \n    \n  \n\nI think we can just specify this string when calling pullManifest(...).", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447781377", "createdAt": "2020-06-30T15:38:06Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +211,29 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String imageTag = \"testIMage\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa9e567bf18a2675cb45b89661f617699f89d13"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4MTcyNw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(imageTag);\n          \n          \n            \n                ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447781727", "createdAt": "2020-06-30T15:38:36Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +211,29 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String imageTag = \"testIMage\";\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(imageTag);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa9e567bf18a2675cb45b89661f617699f89d13"}, "originalPosition": 23}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzc4NTQ1OA==", "bodyText": "Instead of this, let's verify the details with the returned manifest (getManifest()) + digest (getDigest()).\nThe manifest in this case would be of type V22ManifestTemplate. So you could\nAssert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\nV22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\nAssert.assertEquals(2, manifest.getSchemaVersion());\nAssert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n... // you can do more checks\nLikewise, you'll be able to verify values in the returned digest.\nassertEquaus(\"sha256:...\", manifest.getDigest().toString());\n...", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447785458", "createdAt": "2020-06-30T15:43:58Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +211,29 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String imageTag = \"testIMage\";\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(imageTag);\n+    Assert.assertEquals(66, manifestAndDigest.getManifest().toString().length());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7fa9e567bf18a2675cb45b89661f617699f89d13"}, "originalPosition": 24}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c45f59691669fe50bf870576409157c5f66f8a59", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/c45f59691669fe50bf870576409157c5f66f8a59", "committedDate": "2020-06-30T16:39:12Z", "message": "Added more manifest checks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f03f79cf6ea8de6dac5c6b3aa90a3af1bbcca531", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/f03f79cf6ea8de6dac5c6b3aa90a3af1bbcca531", "committedDate": "2020-06-30T17:15:01Z", "message": "Merge branch 'master' of https://github.com/GoogleContainerTools/jib into pullmanifest"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMjI2Njk1", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-440226695", "createdAt": "2020-06-30T17:15:22Z", "commit": {"oid": "c45f59691669fe50bf870576409157c5f66f8a59"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNzoxNToyM1rOGrGkVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxNzoxNjo1NVrOGrGn4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg0OTU1Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                // verify details of the returned manifest\n          \n          \n            \n                Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n          \n      \n    \n    \n  \n\nCheck the instance here before force-casting below so that in case it's not of V22ManifestTemplate, the test doesn't crash with ClassCastException.\nAnd we can skip trivial comments.", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447849557", "createdAt": "2020-06-30T17:15:23Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +212,37 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    // verify details of the returned manifest", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c45f59691669fe50bf870576409157c5f66f8a59"}, "originalPosition": 31}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg1MDQ2NQ==", "bodyText": "As I said before, could you also verify manifestAndDigest.getDigest().toString()?", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447850465", "createdAt": "2020-06-30T17:16:55Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +212,37 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    // verify details of the returned manifest\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+  }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f03f79cf6ea8de6dac5c6b3aa90a3af1bbcca531"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45ead22e5206cc31ba1e0d992007c0171fcdfa52", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/45ead22e5206cc31ba1e0d992007c0171fcdfa52", "committedDate": "2020-06-30T18:10:03Z", "message": "Checking Digest of the Json"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwMjcyNzQ3", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-440272747", "createdAt": "2020-06-30T18:17:32Z", "commit": {"oid": "45ead22e5206cc31ba1e0d992007c0171fcdfa52"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxODoxNzozMlrOGrI5UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQxODoxNzozMlrOGrI5UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0Nzg4NzY5Ng==", "bodyText": "nit: HTTP/1.1 refers to an HTTP protocol version that can change (e.g., when the underlying HTTP client library we use changes the HTTP version), so let's remove it.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag HTTP/1.1\"));\n          \n          \n            \n                    CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag \"));", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r447887696", "createdAt": "2020-06-30T18:17:32Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +212,42 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n+    Assert.assertThat(\n+        registry.getInputRead(),\n+        CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag HTTP/1.1\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45ead22e5206cc31ba1e0d992007c0171fcdfa52"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "449f4675b39f182043badd50347a2ee7616f1e0e", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/449f4675b39f182043badd50347a2ee7616f1e0e", "committedDate": "2020-06-30T18:56:37Z", "message": "Changing Http CLient"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwNDIwNzAz", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-440420703", "createdAt": "2020-06-30T22:08:55Z", "commit": {"oid": "449f4675b39f182043badd50347a2ee7616f1e0e"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjowODo1NVrOGrQL_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0zMFQyMjowOToyMVrOGrQM9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNzE2NQ==", "bodyText": "nit: put a newline after this for better readability (separating the manifest checks and the endpoint check.)", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r448007165", "createdAt": "2020-06-30T22:08:55Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +212,42 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "449f4675b39f182043badd50347a2ee7616f1e0e"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODAwNzQxMg==", "bodyText": "nit: ditto. Let's put a newline after this.", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r448007412", "createdAt": "2020-06-30T22:09:21Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +212,42 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "449f4675b39f182043badd50347a2ee7616f1e0e"}, "originalPosition": 33}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eb56afe89c806984390f66c2c2cf12ae6345c05", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8eb56afe89c806984390f66c2c2cf12ae6345c05", "committedDate": "2020-07-01T15:02:37Z", "message": "Test for RegistryClient.pullmanifestlist()"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8150d45ee11cb2b83feebec469e2daea391e3ead", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8150d45ee11cb2b83feebec469e2daea391e3ead", "committedDate": "2020-07-01T15:03:46Z", "message": "Merge branch 'master' of https://github.com/GoogleContainerTools/jib into pullmanifest"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "66801367a69a3d32e6351740581e8f2d102827dd", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/66801367a69a3d32e6351740581e8f2d102827dd", "committedDate": "2020-07-01T15:14:01Z", "message": "Added endpoint test"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQwOTY1MjY0", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-440965264", "createdAt": "2020-07-01T15:15:01Z", "commit": {"oid": "66801367a69a3d32e6351740581e8f2d102827dd"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNToxNTowMVrOGrqSrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMVQxNToxNjowN1rOGrqVng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODQzNDg2MQ==", "bodyText": "getDigestsForPlatform() returns a List object. For complex objects that have multiple other objects/fields/values, often their toString() is more or less an internal/debug string representation of the objects. That is, theoretically the string form generated by List.toString() is not canonical and may change in future Java versions. For verifying the elements in a list, you would rather do\nassertEquals(\n    Arrays.asList(\"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f\"), \n    manifestList.getDigestsForPlatform(\"amd64\", \"linux\"));", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r448434861", "createdAt": "2020-07-01T15:15:01Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +213,82 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n+    Assert.assertThat(\n+        registry.getInputRead(),\n+        CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag \"));\n+  }\n+\n+  @Test\n+  public void testPullManifest_manifestList()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 403\\n\\n{\\n\"\n+            + \"  \\\"schemaVersion\\\": 2,\\n\"\n+            + \"  \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.list.v2+json\\\",\\n\"\n+            + \"  \\\"manifests\\\": [\\n\"\n+            + \"    {\\n\"\n+            + \"      \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"      \\\"size\\\": 7143,\\n\"\n+            + \"      \\\"digest\\\": \\\"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f\\\",\\n\"\n+            + \"      \\\"platform\\\": {\\n\"\n+            + \"        \\\"architecture\\\": \\\"amd64\\\",\\n\"\n+            + \"        \\\"os\\\": \\\"linux\\\"\\n\"\n+            + \"      }\\n\"\n+            + \"    }\\n\"\n+            + \"  ]\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:a340fa38667f765f8cfd79d4bc684ec8a6f48cdd63abfe36e109f4125ee38488\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestListTemplate);\n+    V22ManifestListTemplate manifestList =\n+        (V22ManifestListTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifestList.getSchemaVersion());\n+    Assert.assertEquals(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66801367a69a3d32e6351740581e8f2d102827dd"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODQzNTQyNg==", "bodyText": "nit: ditto. Let's put a newline after this.", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r448435426", "createdAt": "2020-07-01T15:15:47Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +213,82 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n+    Assert.assertThat(\n+        registry.getInputRead(),\n+        CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag \"));\n+  }\n+\n+  @Test\n+  public void testPullManifest_manifestList()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 403\\n\\n{\\n\"\n+            + \"  \\\"schemaVersion\\\": 2,\\n\"\n+            + \"  \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.list.v2+json\\\",\\n\"\n+            + \"  \\\"manifests\\\": [\\n\"\n+            + \"    {\\n\"\n+            + \"      \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"      \\\"size\\\": 7143,\\n\"\n+            + \"      \\\"digest\\\": \\\"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f\\\",\\n\"\n+            + \"      \\\"platform\\\": {\\n\"\n+            + \"        \\\"architecture\\\": \\\"amd64\\\",\\n\"\n+            + \"        \\\"os\\\": \\\"linux\\\"\\n\"\n+            + \"      }\\n\"\n+            + \"    }\\n\"\n+            + \"  ]\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:a340fa38667f765f8cfd79d4bc684ec8a6f48cdd63abfe36e109f4125ee38488\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestListTemplate);\n+    V22ManifestListTemplate manifestList =\n+        (V22ManifestListTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifestList.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"[sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f]\",\n+        manifestList.getDigestsForPlatform(\"amd64\", \"linux\").toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66801367a69a3d32e6351740581e8f2d102827dd"}, "originalPosition": 83}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODQzNTYxNA==", "bodyText": "nit: ditto. Let's put a newline after this.", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#discussion_r448435614", "createdAt": "2020-07-01T15:16:07Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/test/java/com/google/cloud/tools/jib/registry/RegistryClientTest.java", "diffHunk": "@@ -211,6 +213,82 @@ public void testConfigureBasicAuth()\n         registry.getInputRead(), CoreMatchers.containsString(\"Authorization: Basic dXNlcjpwYXNz\"));\n   }\n \n+  @Test\n+  public void testPullManifest()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 307\\n\\n{\\n\"\n+            + \"    \\\"schemaVersion\\\": 2,\\n\"\n+            + \"    \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"    \\\"config\\\": {\\n\"\n+            + \"        \\\"mediaType\\\": \\\"application/vnd.docker.container.image.v1+json\\\",\\n\"\n+            + \"        \\\"size\\\": 7023,\\n\"\n+            + \"        \\\"digest\\\": \\\"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\\\"\\n\"\n+            + \"    }\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:6b61466eabab6e5ffb68ae2bd9b85c789225540c2ac54ea1f71eb327588e8946\",\n+        manifestAndDigest.getDigest().toString());\n+    Assert.assertTrue(manifestAndDigest.getManifest() instanceof V22ManifestTemplate);\n+    V22ManifestTemplate manifest = (V22ManifestTemplate) manifestAndDigest.getManifest();\n+    Assert.assertEquals(2, manifest.getSchemaVersion());\n+    Assert.assertEquals(\n+        \"application/vnd.docker.distribution.manifest.v2+json\", manifest.getManifestMediaType());\n+    Assert.assertEquals(\n+        \"sha256:b5b2b2c507a0944348e0303114d8d93aaaa081732b86451d9bce1f432a537bc7\",\n+        manifest.getContainerConfiguration().getDigest().toString());\n+    Assert.assertEquals(7023, manifest.getContainerConfiguration().getSize());\n+    Assert.assertThat(\n+        registry.getInputRead(),\n+        CoreMatchers.containsString(\"GET /v2/foo/bar/manifests/image-tag \"));\n+  }\n+\n+  @Test\n+  public void testPullManifest_manifestList()\n+      throws IOException, InterruptedException, GeneralSecurityException, URISyntaxException,\n+          RegistryException {\n+    String manifestResponse =\n+        \"HTTP/1.1 200 OK\\nContent-Length: 403\\n\\n{\\n\"\n+            + \"  \\\"schemaVersion\\\": 2,\\n\"\n+            + \"  \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.list.v2+json\\\",\\n\"\n+            + \"  \\\"manifests\\\": [\\n\"\n+            + \"    {\\n\"\n+            + \"      \\\"mediaType\\\": \\\"application/vnd.docker.distribution.manifest.v2+json\\\",\\n\"\n+            + \"      \\\"size\\\": 7143,\\n\"\n+            + \"      \\\"digest\\\": \\\"sha256:e692418e4cbaf90ca69d05a66403747baa33ee08806650b51fab815ad7fc331f\\\",\\n\"\n+            + \"      \\\"platform\\\": {\\n\"\n+            + \"        \\\"architecture\\\": \\\"amd64\\\",\\n\"\n+            + \"        \\\"os\\\": \\\"linux\\\"\\n\"\n+            + \"      }\\n\"\n+            + \"    }\\n\"\n+            + \"  ]\\n\"\n+            + \"}\";\n+\n+    registry = new TestWebServer(false, Arrays.asList(manifestResponse), 1);\n+    RegistryClient registryClient = createRegistryClient(null);\n+    ManifestAndDigest<?> manifestAndDigest = registryClient.pullManifest(\"image-tag\");\n+\n+    Assert.assertEquals(\n+        \"sha256:a340fa38667f765f8cfd79d4bc684ec8a6f48cdd63abfe36e109f4125ee38488\",\n+        manifestAndDigest.getDigest().toString());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66801367a69a3d32e6351740581e8f2d102827dd"}, "originalPosition": 76}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "76a101bffa1a7f68ec107b5e9afb8f881908018a", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/76a101bffa1a7f68ec107b5e9afb8f881908018a", "committedDate": "2020-07-01T15:42:21Z", "message": "Small Style CHanges"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "982de04c900c64ce7434da20505a9bb3a674cc64", "author": {"user": {"login": "louismurerwa", "name": "Louis Murerwa"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/982de04c900c64ce7434da20505a9bb3a674cc64", "committedDate": "2020-07-01T15:54:39Z", "message": "Styling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxMDA1NTk5", "url": "https://github.com/GoogleContainerTools/jib/pull/2555#pullrequestreview-441005599", "createdAt": "2020-07-01T16:03:00Z", "commit": {"oid": "982de04c900c64ce7434da20505a9bb3a674cc64"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 51, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}