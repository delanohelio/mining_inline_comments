{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAyODgzODU1", "number": 2400, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QyMzowOToxN1rODxazJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDo1NToxMFrODyir3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMTQ1ODkyOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xM1QyMzowOToxN1rOGE4Wng==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNjoyNjozM1rOGFW3yA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc3MDc4Mg==", "bodyText": "Is there an elegant way to merge this with the Maven block below?", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r407770782", "createdAt": "2020-04-13T23:09:17Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,9 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-gradle-plugin-extension-api') {\n+  apply plugin: 'java-library'\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgwNTQ2OQ==", "bodyText": "you could do something like?\n[\"jib-gradle-plugin-extension\", \"jib-maven-plugin-extension\"].each { projectName ->\n  project(projectName) {\n    apply plugin: 'java-library'\n  }\n}\n\nor some variation of this? I think you can call apply direction on the Project object? Nothing great I can think of.\nMaybe in the subprojects section below you can check\nif(project in [extension-api-projects list]) { \n  apply plugin: 'java-library' \n}", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r407805469", "createdAt": "2020-04-14T01:03:52Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,9 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-gradle-plugin-extension-api') {\n+  apply plugin: 'java-library'\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc3MDc4Mg=="}, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwMjc4OA==", "bodyText": "The if check in the subprojects sections didn't work. I can go with the first suggestion.", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r408202788", "createdAt": "2020-04-14T14:55:40Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,9 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-gradle-plugin-extension-api') {\n+  apply plugin: 'java-library'\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc3MDc4Mg=="}, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODI3MDc5Mg==", "bodyText": "Hrmm... this is what worked for me in the end:\nif ([rootProject.project('jib-maven-plugin-extension-api')].contains(project)) {\n  apply plugin: 'java-library'\n}\n\nbut in the end, I mean they're all kinda gross :\\", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r408270792", "createdAt": "2020-04-14T16:26:33Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,9 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-gradle-plugin-extension-api') {\n+  apply plugin: 'java-library'\n+}", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzc3MDc4Mg=="}, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUzMTY5MTkzOnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin-extension-api/build.gradle", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQwMTowNDo0MlrOGE6fCg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNFQxNzozMzo1M1rOGFZhWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgwNTcwNg==", "bodyText": "I don't think you need to apply the plugin, I think you can use gradleApi() directly in the dependencies block? (that still makes them provided dependencies though)", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r407805706", "createdAt": "2020-04-14T01:04:42Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,42 @@\n+plugins {\n+  // Is this the only option? Can't we do something simiar to Maven Extension API?\n+  id 'java-gradle-plugin'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODIwNDU0MQ==", "bodyText": "Tried gradleApi() in dependencies{}, but it doesn't even allow me to see a Gradle Project object in .java source files.", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r408204541", "createdAt": "2020-04-14T14:57:45Z", "author": {"login": "chanseokoh"}, "path": "jib-gradle-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,42 @@\n+plugins {\n+  // Is this the only option? Can't we do something simiar to Maven Extension API?\n+  id 'java-gradle-plugin'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgwNTcwNg=="}, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 3}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODMxNDIwMQ==", "bodyText": "That's weird, I feel like it should work.\nhttps://docs.gradle.org/current/javadoc/org/gradle/api/artifacts/dsl/DependencyHandler.html#gradleApi--", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r408314201", "createdAt": "2020-04-14T17:33:53Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,42 @@\n+plugins {\n+  // Is this the only option? Can't we do something simiar to Maven Extension API?\n+  id 'java-gradle-plugin'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNzgwNTcwNg=="}, "originalCommit": {"oid": "03026f5e5573383f2cb847100612a35362cee4e1"}, "originalPosition": 3}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MDEzMjc1OnYy", "diffSide": "RIGHT", "path": "jib-gradle-plugin-extension-api/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMToxMzo0M1rOGGLxGg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQyMToxMzo0M1rOGGLxGg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTEzNzQzNA==", "bodyText": "should this go in the /* RELEASE */ section?", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r409137434", "createdAt": "2020-04-15T21:13:43Z", "author": {"login": "loosebazooka"}, "path": "jib-gradle-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+plugins {\n+  id 'net.researchgate.release'\n+  id 'maven-publish'\n+}\n+\n+dependencies {\n+  api project(':jib-build-plan')\n+  api project(':jib-plugins-extension-common')\n+  api gradleApi()\n+}\n+\n+jar {\n+  manifest {\n+    attributes 'Implementation-Version': version\n+    attributes 'Automatic-Module-Name': 'com.google.cloud.tools.jib.gradle.extension'\n+\n+    // OSGi metadata\n+    attributes 'Bundle-SymbolicName': 'com.google.cloud.tools.jib.gradle.extension'\n+    attributes 'Bundle-Name': 'Extension API for Jib Gradle Plugin'\n+    attributes 'Bundle-Vendor': 'Google LLC'\n+    attributes 'Bundle-DocURL': 'https://github.com/GoogleContainerTools/jib'\n+    attributes 'Bundle-License': 'https://www.apache.org/licenses/LICENSE-2.0'\n+    attributes 'Export-Package': 'com.google.cloud.tools.jib.gradle.extension'\n+  }\n+}\n+\n+configureMavenRelease()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e901e6db16e0cfb552ba6e532a5b782084b3ebaa"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjU0MzIzNjc5OnYy", "diffSide": "RIGHT", "path": "jib-build-plan/build.gradle", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDo1NToxMFrOGGpaJg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNlQxNDo1NToxMFrOGGpaJg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwOTYyMzA3OA==", "bodyText": "oh haha, didn't realize this was a mistake I created :D", "url": "https://github.com/GoogleContainerTools/jib/pull/2400#discussion_r409623078", "createdAt": "2020-04-16T14:55:10Z", "author": {"login": "loosebazooka"}, "path": "jib-build-plan/build.gradle", "diffHunk": "@@ -29,9 +29,9 @@ jar {\n   }\n }\n \n+/* RELEASE */\n configureMavenRelease()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b15f5b876336f56813e9ce2f7bb1a1a0d22a6823"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 363, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}