{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ3NzgwOTQ0", "number": 2581, "title": "Add PlatformSpec for buildfile", "bodyText": "part of #2570", "createdAt": "2020-07-11T15:23:18Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2581", "merged": true, "mergeCommit": {"oid": "0104e2e3e0c35eea327f4cd3f34a3d807067c4b0"}, "closed": true, "closedAt": "2020-07-13T23:54:02Z", "author": {"login": "loosebazooka"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcz53r9AH2gAyNDQ3NzgwOTQ0OjE4OGE5NGZiOGJjMzg2YjkxNzhhN2Q5MjY3MTRmYzRlMDkzMWViOTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc0nT91gFqTQ0NzU3MDE3OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "188a94fb8bc386b9178a7d926714fc4e0931eb93", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/188a94fb8bc386b9178a7d926714fc4e0931eb93", "committedDate": "2020-07-11T15:21:38Z", "message": "Add PlatformSpec for buildfile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NDg5Nzc5", "url": "https://github.com/GoogleContainerTools/jib/pull/2581#pullrequestreview-447489779", "createdAt": "2020-07-13T18:18:02Z", "commit": {"oid": "188a94fb8bc386b9178a7d926714fc4e0931eb93"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoxODowM1rOGw0P6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0xM1QxODoyMDoxMFrOGw0Ujg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MDg3NA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * A yaml block for specifying platforms\n          \n          \n            \n             * A yaml block for specifying platforms.", "url": "https://github.com/GoogleContainerTools/jib/pull/2581#discussion_r453840874", "createdAt": "2020-07-13T18:18:03Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/PlatformSpec.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.cli.buildfile;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import java.util.List;\n+import java.util.Optional;\n+import javax.annotation.Nullable;\n+\n+/**\n+ * A yaml block for specifying platforms", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188a94fb8bc386b9178a7d926714fc4e0931eb93"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MTcwMA==", "bodyText": "For every class in jib-build-plan, I copied collections to make it truly immutable. Should it do the same?", "url": "https://github.com/GoogleContainerTools/jib/pull/2581#discussion_r453841700", "createdAt": "2020-07-13T18:19:33Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/PlatformSpec.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.cli.buildfile;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import java.util.List;\n+import java.util.Optional;\n+import javax.annotation.Nullable;\n+\n+/**\n+ * A yaml block for specifying platforms\n+ *\n+ * <p>Example use of this yaml snippet.\n+ *\n+ * <pre>{@code\n+ * architecture: amd64\n+ * os: linux\n+ * os.version: 1.0.0\n+ * os.features:\n+ *   - headless\n+ * variant: amd64v10\n+ * features:\n+ *   - sse4\n+ *   - aes\n+ * }</pre>\n+ */\n+public class PlatformSpec {\n+  @Nullable private String architecture;\n+  @Nullable private String os;\n+  @Nullable private String osVersion;\n+  @Nullable private List<String> osFeatures;\n+  @Nullable private String variant;\n+  @Nullable private List<String> features;\n+\n+  /**\n+   * Constructor for use by jackson to populate this object.\n+   *\n+   * @param architecture the target cpu architecture\n+   * @param os the target operating system\n+   * @param variant the cpu variant\n+   * @param features a list of cpu features\n+   * @param osVersion the operating system version\n+   * @param osFeatures a list of operating system features\n+   */\n+  @JsonCreator\n+  public PlatformSpec(\n+      @JsonProperty(\"architecture\") String architecture,\n+      @JsonProperty(\"os\") String os,\n+      @JsonProperty(\"os.version\") String osVersion,\n+      @JsonProperty(\"os.features\") List<String> osFeatures,\n+      @JsonProperty(\"variant\") String variant,\n+      @JsonProperty(\"features\") List<String> features) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188a94fb8bc386b9178a7d926714fc4e0931eb93"}, "originalPosition": 67}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1Mzg0MjA2Mg==", "bodyText": "Likewise, it's an overhead, but every class in jib-build-plan returns a copy.", "url": "https://github.com/GoogleContainerTools/jib/pull/2581#discussion_r453842062", "createdAt": "2020-07-13T18:20:10Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/PlatformSpec.java", "diffHunk": "@@ -0,0 +1,99 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.cli.buildfile;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import java.util.List;\n+import java.util.Optional;\n+import javax.annotation.Nullable;\n+\n+/**\n+ * A yaml block for specifying platforms\n+ *\n+ * <p>Example use of this yaml snippet.\n+ *\n+ * <pre>{@code\n+ * architecture: amd64\n+ * os: linux\n+ * os.version: 1.0.0\n+ * os.features:\n+ *   - headless\n+ * variant: amd64v10\n+ * features:\n+ *   - sse4\n+ *   - aes\n+ * }</pre>\n+ */\n+public class PlatformSpec {\n+  @Nullable private String architecture;\n+  @Nullable private String os;\n+  @Nullable private String osVersion;\n+  @Nullable private List<String> osFeatures;\n+  @Nullable private String variant;\n+  @Nullable private List<String> features;\n+\n+  /**\n+   * Constructor for use by jackson to populate this object.\n+   *\n+   * @param architecture the target cpu architecture\n+   * @param os the target operating system\n+   * @param variant the cpu variant\n+   * @param features a list of cpu features\n+   * @param osVersion the operating system version\n+   * @param osFeatures a list of operating system features\n+   */\n+  @JsonCreator\n+  public PlatformSpec(\n+      @JsonProperty(\"architecture\") String architecture,\n+      @JsonProperty(\"os\") String os,\n+      @JsonProperty(\"os.version\") String osVersion,\n+      @JsonProperty(\"os.features\") List<String> osFeatures,\n+      @JsonProperty(\"variant\") String variant,\n+      @JsonProperty(\"features\") List<String> features) {\n+    this.architecture = architecture;\n+    this.os = os;\n+    this.osVersion = osVersion;\n+    this.osFeatures = osFeatures;\n+    this.variant = variant;\n+    this.features = features;\n+  }\n+\n+  public Optional<String> getArchitecture() {\n+    return Optional.ofNullable(architecture);\n+  }\n+\n+  public Optional<String> getOs() {\n+    return Optional.ofNullable(os);\n+  }\n+\n+  public Optional<String> getOsVersion() {\n+    return Optional.ofNullable(osVersion);\n+  }\n+\n+  public Optional<List<String>> getOsFeatures() {\n+    return Optional.ofNullable(osFeatures);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "188a94fb8bc386b9178a7d926714fc4e0931eb93"}, "originalPosition": 89}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e175a47554aa3b82f6042ef81cca42c68f622019", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/e175a47554aa3b82f6042ef81cca42c68f622019", "committedDate": "2020-07-13T19:46:25Z", "message": "style"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ3NTcwMTc5", "url": "https://github.com/GoogleContainerTools/jib/pull/2581#pullrequestreview-447570179", "createdAt": "2020-07-13T20:18:15Z", "commit": {"oid": "e175a47554aa3b82f6042ef81cca42c68f622019"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 72, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}