{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyNjA3NzAw", "number": 2353, "title": "Build plan adapter methods for JibContainerBuilder", "bodyText": "Adds internal methods for conversion between JibContainerBuilder <--> ContainerBuildPlan. I can't think of other ways to enable this conversion while not adding public methods to JibContainerBuilder.\nAs we currently build a JibContainerBuilder instance (which is the front-end public API) in our plugins code, the idea for the extension framework is basically like this:\n\nConstruct JibContainerBuilder (current behavior).\nConvert JibContainerBuilder to ContainerBuildPlan and pass it to extensions.\nExtensions modify the ContainerBuildPlan.\nConvert ContainerBuildPlan back to JibContainerBuilder.\nPlugins code proceeds with JibContainerBuilder to build an image (current behavior)\n\nAnother approach would be to revamp everything around BuildContext and ContainerConfiguration in jib-core. However, I think the amount of refactoring work to do so is prohibitively enormous, and this is not practical.", "createdAt": "2020-03-23T19:55:28Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2353", "merged": true, "mergeCommit": {"oid": "b2865c3e93df8bb2a21af9ab9ac4fff835f2bcc7"}, "closed": true, "closedAt": "2020-03-27T14:02:15Z", "author": {"login": "chanseokoh"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcQj0gfAH2gAyMzkyNjA3NzAwOjBkMjk0MTI5MDQ2MjcwN2ZiMGFkZTI0MDQ3OWMwY2E4MTNkNDcyOWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcRxAhngH2gAyMzkyNjA3NzAwOjEzYjQ4OGQwY2ZmNTQzNWE1NzNhMmJkNDRmNzA2ZmM3MTMxMmI2ZmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "0d2941290462707fb0ade240479c0ca813d4729a", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/0d2941290462707fb0ade240479c0ca813d4729a", "committedDate": "2020-03-23T19:52:54Z", "message": "Adapters between JibContainerBuilder and ContainerBuildPlan"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyMzk2MzA3", "url": "https://github.com/GoogleContainerTools/jib/pull/2353#pullrequestreview-382396307", "createdAt": "2020-03-26T20:34:58Z", "commit": {"oid": "0d2941290462707fb0ade240479c0ca813d4729a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDozNDo1OFrOF8ZVjA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNlQyMDozNDo1OFrOF8ZVjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5ODg3Mzk5Ng==", "bodyText": "Could we mask it with an interface?", "url": "https://github.com/GoogleContainerTools/jib/pull/2353#discussion_r398873996", "createdAt": "2020-03-26T20:34:58Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/api/JibContainerBuilder.java", "diffHunk": "@@ -542,12 +568,87 @@ public JibContainer containerize(Containerizer containerizer)\n    * Describes the container contents and configuration without actually physically building a\n    * container.\n    *\n+   * @deprecated use {@link #toContainerBuildPlan}.\n    * @return a description of the container being built\n    */\n+  @Deprecated\n   public JibContainerDescription describeContainer() {\n     return new JibContainerDescription(layerConfigurations);\n   }\n \n+  /**\n+   * Internal method. API end users should not use it.\n+   *\n+   * <p>Converts to {@link ContainerBuildPlan}. Note that not all values that this class holds can\n+   * be described by a build plan, such as {@link CredentialRetriever}s for {@link RegistryImage},\n+   * {@link DockerClient} for {@link DockerDaemonImage}, and output path for {@link TarImage}.\n+   *\n+   * @return {@link ContainerBuildPlan}\n+   */\n+  public ContainerBuildPlan toContainerBuildPlan() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0d2941290462707fb0ade240479c0ca813d4729a"}, "originalPosition": 211}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzgyNDgyODMx", "url": "https://github.com/GoogleContainerTools/jib/pull/2353#pullrequestreview-382482831", "createdAt": "2020-03-26T23:12:59Z", "commit": {"oid": "0d2941290462707fb0ade240479c0ca813d4729a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b488d0cff5435a573a2bd44f706fc71312b6fe", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/13b488d0cff5435a573a2bd44f706fc71312b6fe", "committedDate": "2020-03-27T13:48:43Z", "message": "Add missing BuildContext.setFormat"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 150, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}