{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk1NzQ0NDY5", "number": 2793, "reviewThreads": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNDo0NVrOEpi8tg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTowMjo0MFrOEpmRqw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExOTk5NjcwOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNDo0NVrOHbRwTA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNDo0NVrOHbRwTA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NDQ5Mg==", "bodyText": "This is when a local docker:// base image is cached.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498364492", "createdAt": "2020-10-01T16:14:45Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "diffHunk": "@@ -111,6 +111,8 @@ static boolean isGzipped(Path path) throws IOException {\n         Optional<LocalImage> cachedImage =\n             getCachedDockerImage(buildContext.getBaseImageLayersCache(), dockerImageDetails);\n         if (cachedImage.isPresent()) {\n+          PlatformChecker.checkManifestPlatform(\n+              buildContext, cachedImage.get().configurationTemplate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89e511b917f4d0fd80c2b90c83e02ffc60cc056"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzExOTk5ODc1OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNToxNVrOHbRxhg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNToxNVrOHbRxhg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NDgwNg==", "bodyText": "When using a local docker:// image that has not been cached.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498364806", "createdAt": "2020-10-01T16:15:15Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "diffHunk": "@@ -125,11 +127,14 @@ static boolean isGzipped(Path path) throws IOException {\n           dockerClient.save(imageReference, tarPath, throttledProgressReporter);\n         }\n \n-        return cacheDockerImageTar(\n-            buildContext,\n-            tarPath,\n-            progressEventDispatcher.newChildProducer(),\n-            tempDirectoryProvider);\n+        LocalImage localImage =\n+            cacheDockerImageTar(\n+                buildContext,\n+                tarPath,\n+                progressEventDispatcher.newChildProducer(),\n+                tempDirectoryProvider);\n+        PlatformChecker.checkManifestPlatform(buildContext, localImage.configurationTemplate);\n+        return localImage;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89e511b917f4d0fd80c2b90c83e02ffc60cc056"}, "originalPosition": 25}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDAwMTM1OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNTo1MVrOHbRzIg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNTo1MVrOHbRzIg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NTIxOA==", "bodyText": "When tar:// (covers both cached and fresh cases).", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498365218", "createdAt": "2020-10-01T16:15:51Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/LocalBaseImageSteps.java", "diffHunk": "@@ -139,9 +144,13 @@ static boolean isGzipped(Path path) throws IOException {\n       ProgressEventDispatcher.Factory progressEventDispatcherFactory,\n       Path tarPath,\n       TempDirectoryProvider tempDirectoryProvider) {\n-    return () ->\n-        cacheDockerImageTar(\n-            buildContext, tarPath, progressEventDispatcherFactory, tempDirectoryProvider);\n+    return () -> {\n+      LocalImage localImage =\n+          cacheDockerImageTar(\n+              buildContext, tarPath, progressEventDispatcherFactory, tempDirectoryProvider);\n+      PlatformChecker.checkManifestPlatform(buildContext, localImage.configurationTemplate);\n+      return localImage;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89e511b917f4d0fd80c2b90c83e02ffc60cc056"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDAwMzYwOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PullBaseImageStep.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNjoyNlrOHbR0gw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNjoyNlrOHbR0gw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NTU3MQ==", "bodyText": "When pulling a remote manifest (not cached).", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498365571", "createdAt": "2020-10-01T16:16:26Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PullBaseImageStep.java", "diffHunk": "@@ -233,6 +233,7 @@ public ImagesAndRegistryClient call()\n       BuildableManifestTemplate imageManifest = (BuildableManifestTemplate) manifestTemplate;\n       ContainerConfigurationTemplate containerConfig =\n           pullContainerConfigJson(manifestAndDigest, registryClient, progressEventDispatcher);\n+      PlatformChecker.checkManifestPlatform(buildContext, containerConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89e511b917f4d0fd80c2b90c83e02ffc60cc056"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDAwNDM3OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PullBaseImageStep.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNjozOVrOHbR1EA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxNjoxNjozOVrOHbR1EA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODM2NTcxMg==", "bodyText": "When using a cached manifest for a remote base image.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498365712", "createdAt": "2020-10-01T16:16:39Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PullBaseImageStep.java", "diffHunk": "@@ -379,10 +380,14 @@ private ContainerConfigurationTemplate pullContainerConfigJson(\n         return Collections.singletonList(\n             JsonToImageTranslator.toImage((V21ManifestTemplate) manifest));\n       }\n+\n+      ContainerConfigurationTemplate containerConfig =\n+          Verify.verifyNotNull(manifestsAndConfigs.get(0).getConfig());\n+      PlatformChecker.checkManifestPlatform(buildContext, containerConfig);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e89e511b917f4d0fd80c2b90c83e02ffc60cc056"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDUwOTc0OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxODo1MjoyMFrOHbW_dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxODo1NjoyNFrOHbXH9A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1MDI5NA==", "bodyText": "Just making sure I'm understanding this correctly, so this check needs to be included because we don't have a way to differentiate between implicitly or explicitly configured platforms?", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498450294", "createdAt": "2020-10-01T18:52:20Z", "author": {"login": "mpeddada1"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.builder.steps;\n+\n+import com.google.cloud.tools.jib.api.LogEvent;\n+import com.google.cloud.tools.jib.api.buildplan.Platform;\n+import com.google.cloud.tools.jib.configuration.BuildContext;\n+import com.google.cloud.tools.jib.event.EventHandlers;\n+import com.google.cloud.tools.jib.image.json.ContainerConfigurationTemplate;\n+import com.google.common.base.Verify;\n+import java.util.Set;\n+\n+/** Provides helper methods to check platforms. */\n+public class PlatformChecker {\n+\n+  /**\n+   * Assuming the base image is not a manifest list, checks and warns misconfigured platforms.\n+   *\n+   * @param buildContext the {@link BuildContext}\n+   * @param containerConfig container configuration JSON of the base image\n+   */\n+  static void checkManifestPlatform(\n+      BuildContext buildContext, ContainerConfigurationTemplate containerConfig) {\n+    EventHandlers eventHandlers = buildContext.getEventHandlers();\n+    String baseImageName =\n+        buildContext.getBaseImageConfiguration().getTarPath().isPresent()\n+            ? buildContext.getBaseImageConfiguration().getTarPath().get().toString()\n+            : buildContext.getBaseImageConfiguration().getImage().toString();\n+\n+    Set<Platform> platforms = buildContext.getContainerConfiguration().getPlatforms();\n+    Verify.verify(!platforms.isEmpty());\n+\n+    if (platforms.size() != 1) {\n+      eventHandlers.dispatch(\n+          LogEvent.warn(\n+              \"platforms configured, but '\" + baseImageName + \"' is not a manifest list\"));\n+    } else {\n+      Platform platform = platforms.iterator().next();\n+      if (!platform.getArchitecture().equals(containerConfig.getArchitecture())\n+          || !platform.getOs().equals(containerConfig.getOs())) {\n+\n+        // Unfortunately, \"platforms\" has amd64/linux by default even if the user didn't explicitly\n+        // configure it. Skip reporting to suppress false alarm.\n+        if (!(platform.getArchitecture().equals(\"amd64\") && platform.getOs().equals(\"linux\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ed7661cd1ced00f7792b0826e8590b01c01fe47"}, "originalPosition": 58}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1MjQ2OA==", "bodyText": "Yes, when it's a single platform of amd64/linux. That is, even if the user doesn't configure anything, platforms is a singleton set with amd64/linux. If you think the code comment on line 56-57 can be improved, feel free to suggest an edit.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498452468", "createdAt": "2020-10-01T18:56:24Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.builder.steps;\n+\n+import com.google.cloud.tools.jib.api.LogEvent;\n+import com.google.cloud.tools.jib.api.buildplan.Platform;\n+import com.google.cloud.tools.jib.configuration.BuildContext;\n+import com.google.cloud.tools.jib.event.EventHandlers;\n+import com.google.cloud.tools.jib.image.json.ContainerConfigurationTemplate;\n+import com.google.common.base.Verify;\n+import java.util.Set;\n+\n+/** Provides helper methods to check platforms. */\n+public class PlatformChecker {\n+\n+  /**\n+   * Assuming the base image is not a manifest list, checks and warns misconfigured platforms.\n+   *\n+   * @param buildContext the {@link BuildContext}\n+   * @param containerConfig container configuration JSON of the base image\n+   */\n+  static void checkManifestPlatform(\n+      BuildContext buildContext, ContainerConfigurationTemplate containerConfig) {\n+    EventHandlers eventHandlers = buildContext.getEventHandlers();\n+    String baseImageName =\n+        buildContext.getBaseImageConfiguration().getTarPath().isPresent()\n+            ? buildContext.getBaseImageConfiguration().getTarPath().get().toString()\n+            : buildContext.getBaseImageConfiguration().getImage().toString();\n+\n+    Set<Platform> platforms = buildContext.getContainerConfiguration().getPlatforms();\n+    Verify.verify(!platforms.isEmpty());\n+\n+    if (platforms.size() != 1) {\n+      eventHandlers.dispatch(\n+          LogEvent.warn(\n+              \"platforms configured, but '\" + baseImageName + \"' is not a manifest list\"));\n+    } else {\n+      Platform platform = platforms.iterator().next();\n+      if (!platform.getArchitecture().equals(containerConfig.getArchitecture())\n+          || !platform.getOs().equals(containerConfig.getOs())) {\n+\n+        // Unfortunately, \"platforms\" has amd64/linux by default even if the user didn't explicitly\n+        // configure it. Skip reporting to suppress false alarm.\n+        if (!(platform.getArchitecture().equals(\"amd64\") && platform.getOs().equals(\"linux\"))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1MDI5NA=="}, "originalCommit": {"oid": "5ed7661cd1ced00f7792b0826e8590b01c01fe47"}, "originalPosition": 58}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzEyMDU0MTg3OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQxOTowMjo0MFrOHbXUKg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wMVQyMTowNzozOVrOHba3ig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1NTU5NA==", "bodyText": "Is there a way to check that the base image is in fact not a manifest list in this method, before we proceed to doing the other checks?", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498455594", "createdAt": "2020-10-01T19:02:40Z", "author": {"login": "mpeddada1"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.builder.steps;\n+\n+import com.google.cloud.tools.jib.api.LogEvent;\n+import com.google.cloud.tools.jib.api.buildplan.Platform;\n+import com.google.cloud.tools.jib.configuration.BuildContext;\n+import com.google.cloud.tools.jib.event.EventHandlers;\n+import com.google.cloud.tools.jib.image.json.ContainerConfigurationTemplate;\n+import com.google.common.base.Verify;\n+import java.util.Set;\n+\n+/** Provides helper methods to check platforms. */\n+public class PlatformChecker {\n+\n+  /**\n+   * Assuming the base image is not a manifest list, checks and warns misconfigured platforms.\n+   *\n+   * @param buildContext the {@link BuildContext}\n+   * @param containerConfig container configuration JSON of the base image\n+   */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ed7661cd1ced00f7792b0826e8590b01c01fe47"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ3ODk4Nw==", "bodyText": "Yeah, I had the same question. I know this is a bit weird. It's mainly the consequence of factoring out some portion of code to reuse that in multiple places under certain conditions. But I think it's also weird to just pass something unnecessary to the method only to check the argument.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498478987", "createdAt": "2020-10-01T19:52:01Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.builder.steps;\n+\n+import com.google.cloud.tools.jib.api.LogEvent;\n+import com.google.cloud.tools.jib.api.buildplan.Platform;\n+import com.google.cloud.tools.jib.configuration.BuildContext;\n+import com.google.cloud.tools.jib.event.EventHandlers;\n+import com.google.cloud.tools.jib.image.json.ContainerConfigurationTemplate;\n+import com.google.common.base.Verify;\n+import java.util.Set;\n+\n+/** Provides helper methods to check platforms. */\n+public class PlatformChecker {\n+\n+  /**\n+   * Assuming the base image is not a manifest list, checks and warns misconfigured platforms.\n+   *\n+   * @param buildContext the {@link BuildContext}\n+   * @param containerConfig container configuration JSON of the base image\n+   */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1NTU5NA=="}, "originalCommit": {"oid": "5ed7661cd1ced00f7792b0826e8590b01c01fe47"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODUxMzgwMg==", "bodyText": "Yup, that's a valid point since it's meant to serve as a helper. As long as we check the condition before calling this method, we should be good.", "url": "https://github.com/GoogleContainerTools/jib/pull/2793#discussion_r498513802", "createdAt": "2020-10-01T21:07:39Z", "author": {"login": "mpeddada1"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/builder/steps/PlatformChecker.java", "diffHunk": "@@ -0,0 +1,75 @@\n+/*\n+ * Copyright 2020 Google LLC.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n+ * use this file except in compliance with the License. You may obtain a copy of\n+ * the License at\n+ *\n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n+ * License for the specific language governing permissions and limitations under\n+ * the License.\n+ */\n+\n+package com.google.cloud.tools.jib.builder.steps;\n+\n+import com.google.cloud.tools.jib.api.LogEvent;\n+import com.google.cloud.tools.jib.api.buildplan.Platform;\n+import com.google.cloud.tools.jib.configuration.BuildContext;\n+import com.google.cloud.tools.jib.event.EventHandlers;\n+import com.google.cloud.tools.jib.image.json.ContainerConfigurationTemplate;\n+import com.google.common.base.Verify;\n+import java.util.Set;\n+\n+/** Provides helper methods to check platforms. */\n+public class PlatformChecker {\n+\n+  /**\n+   * Assuming the base image is not a manifest list, checks and warns misconfigured platforms.\n+   *\n+   * @param buildContext the {@link BuildContext}\n+   * @param containerConfig container configuration JSON of the base image\n+   */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5ODQ1NTU5NA=="}, "originalCommit": {"oid": "5ed7661cd1ced00f7792b0826e8590b01c01fe47"}, "originalPosition": 35}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4937, "cost": 1, "resetAt": "2021-11-12T20:28:25Z"}}}