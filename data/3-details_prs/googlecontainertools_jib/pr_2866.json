{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEwMzQxODA5", "number": 2866, "title": "Add option to expand wildcard in entrypoint runtime classpath", "bodyText": "Gives a viable solution to #1871 (#1907, #2228, #2733).\nAlso enables the AppCDS support (#2471).\nThis PR adds the option jib.container.expandClasspathDependencies that expands the wildcard .../libs/* in the entrypoint JVM classpath. It's off by default. The feature to use an @argument file will be added later for a permanent fix for the issue later. See #2866 (comment) for details.", "createdAt": "2020-10-26T22:23:09Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2866", "merged": true, "mergeCommit": {"oid": "f0123a83be9560b8980690f86ffdbdfdcbc67439"}, "closed": true, "closedAt": "2020-11-03T16:09:19Z", "author": {"login": "chanseokoh"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdWb_wtgH2gAyNTEwMzQxODA5OjE3MzA4Y2IyOTBiYTAzYjIyMTA2ZTQ0YTEyMzU5NzI2ZmU5NTU0Y2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdYqdzZgFqTUyMTk2NDA4NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "17308cb290ba03b22106e44a12359726fe9554cd", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/17308cb290ba03b22106e44a12359726fe9554cd", "committedDate": "2020-10-26T22:20:39Z", "message": "Expand wildcard in entrypoint runtime classpath"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MzcxMTA0", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#pullrequestreview-517371104", "createdAt": "2020-10-27T06:04:56Z", "commit": {"oid": "17308cb290ba03b22106e44a12359726fe9554cd"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjowNDo1NlrOHosl3w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwNjowNDo1NlrOHosl3w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjQzNTY3OQ==", "bodyText": "I realize this is a draft, but I'm not super fond of this name. I sometimes think preserveClasspathOrder is a decent name, but i'm not sure.", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#discussion_r512435679", "createdAt": "2020-10-27T06:04:56Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/global/JibSystemProperties.java", "diffHunk": "@@ -32,10 +33,12 @@\n   public static final String SEND_CREDENTIALS_OVER_HTTP = \"sendCredentialsOverHttp\";\n   public static final String SERIALIZE = \"jib.serialize\";\n \n-  private static final String DISABLE_USER_AGENT = \"_JIB_DISABLE_USER_AGENT\";\n-\n   @VisibleForTesting public static final String SKIP_EXISTING_IMAGES = \"jib.skipExistingImages\";\n \n+  @VisibleForTesting\n+  static final String USE_WILDCARD_FOR_DEPENDENCY_CLASSPATH =\n+      \"jib.useWildcardForDependencyClasspath\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "17308cb290ba03b22106e44a12359726fe9554cd"}, "originalPosition": 18}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "022de85cf579076c0ddcee7368cbcc7678151c16", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/022de85cf579076c0ddcee7368cbcc7678151c16", "committedDate": "2020-10-27T14:37:49Z", "message": "Update CHANGELOG"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "86042e816b1aee259e36a6a72927b7a183dcc1d2", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/86042e816b1aee259e36a6a72927b7a183dcc1d2", "committedDate": "2020-10-27T14:38:07Z", "message": "Update and migrate system property"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2881777513a255e1ce29ff8892dceafcbcc2aed6", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/2881777513a255e1ce29ff8892dceafcbcc2aed6", "committedDate": "2020-11-02T16:52:17Z", "message": "Rename config to \"expandClasspathDependencies\" and flip default"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTAwNjAx", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#pullrequestreview-521900601", "createdAt": "2020-11-02T18:41:23Z", "commit": {"oid": "2881777513a255e1ce29ff8892dceafcbcc2aed6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODo0MToyNFrOHsRMgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wMlQxODo0MToyNFrOHsRMgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjE4MTEyMg==", "bodyText": "GradleProjectProperties also checks if the dependency is a jar whereas this does not. Is this intentional?", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#discussion_r516181122", "createdAt": "2020-11-02T18:41:24Z", "author": {"login": "mpeddada1"}, "path": "jib-maven-plugin/src/main/java/com/google/cloud/tools/jib/maven/MavenProjectProperties.java", "diffHunk": "@@ -350,6 +350,15 @@ public JibContainerBuilder createJibContainerBuilder(\n     return new DirectoryWalker(Paths.get(project.getBuild().getOutputDirectory())).walk().asList();\n   }\n \n+  @Override\n+  public List<Path> getDependencies() {\n+    return project\n+        .getArtifacts()\n+        .stream()\n+        .map(artifact -> artifact.getFile().toPath())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2881777513a255e1ce29ff8892dceafcbcc2aed6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTExOTYy", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#pullrequestreview-521911962", "createdAt": "2020-11-02T18:58:21Z", "commit": {"oid": "2881777513a255e1ce29ff8892dceafcbcc2aed6"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "880124d2e8331aea6ef425baf386dd5a0cdb63c6", "author": {"user": {"login": "chanseokoh", "name": "Chanseok Oh"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/880124d2e8331aea6ef425baf386dd5a0cdb63c6", "committedDate": "2020-11-02T19:11:51Z", "message": "Document potential failure in CHANGELOG"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTIxOTY0MDg0", "url": "https://github.com/GoogleContainerTools/jib/pull/2866#pullrequestreview-521964084", "createdAt": "2020-11-02T20:19:59Z", "commit": {"oid": "880124d2e8331aea6ef425baf386dd5a0cdb63c6"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4851, "cost": 1, "resetAt": "2021-11-01T14:51:55Z"}}}