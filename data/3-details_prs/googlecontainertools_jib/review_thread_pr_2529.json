{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzODYxMjcw", "number": 2529, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMDowOFrOEFSBkw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMzozOFrOEFSCEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTczNjUxOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMDowOFrOGjZ1ig==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNTowMDo1NFrOGj2JMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjY1MA==", "bodyText": "Do we have a citation for this? Just curious would be helpful to include.", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r439776650", "createdAt": "2020-06-13T23:10:08Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -113,16 +113,17 @@ public Credential retrieve()\n       return retrieve(Arrays.asList(credentialHelper.toString(), \"get\"));\n     }\n \n-    try {\n-      return retrieve(Arrays.asList(credentialHelper.toString() + \".cmd\", \"get\"));\n-\n-    } catch (CredentialHelperNotFoundException ex) {\n+    // We are on Windows.\n+    for (String suffix : Arrays.asList(\".cmd\", \".exe\")) {\n       try {\n-        return retrieve(Arrays.asList(credentialHelper.toString(), \"get\"));\n+        return retrieve(Arrays.asList(credentialHelper.toString() + suffix, \"get\"));\n       } catch (CredentialHelperNotFoundException ignored) {\n-        throw ex;\n+        // ignored\n       }\n     }\n+    // On Windows, launching a process from Java without a file extension should normally fail, but", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0MDQzNQ==", "bodyText": "Added this link to the code comment.", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r440240435", "createdAt": "2020-06-15T15:00:54Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -113,16 +113,17 @@ public Credential retrieve()\n       return retrieve(Arrays.asList(credentialHelper.toString(), \"get\"));\n     }\n \n-    try {\n-      return retrieve(Arrays.asList(credentialHelper.toString() + \".cmd\", \"get\"));\n-\n-    } catch (CredentialHelperNotFoundException ex) {\n+    // We are on Windows.\n+    for (String suffix : Arrays.asList(\".cmd\", \".exe\")) {\n       try {\n-        return retrieve(Arrays.asList(credentialHelper.toString(), \"get\"));\n+        return retrieve(Arrays.asList(credentialHelper.toString() + suffix, \"get\"));\n       } catch (CredentialHelperNotFoundException ignored) {\n-        throw ex;\n+        // ignored\n       }\n     }\n+    // On Windows, launching a process from Java without a file extension should normally fail, but", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjY1MA=="}, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTczNzQxOnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMjoyOFrOGjZ1-w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMjoyOFrOGjZ1-w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3Njc2Mw==", "bodyText": "I think this comment doesn't fully comply with the line 112.\n// We are on windows with undefined/ambiguous file extension ?", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r439776763", "createdAt": "2020-06-13T23:12:28Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -113,16 +113,17 @@ public Credential retrieve()\n       return retrieve(Arrays.asList(credentialHelper.toString(), \"get\"));\n     }\n \n-    try {\n-      return retrieve(Arrays.asList(credentialHelper.toString() + \".cmd\", \"get\"));\n-\n-    } catch (CredentialHelperNotFoundException ex) {\n+    // We are on Windows.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjczOTczNzc2OnYy", "diffSide": "RIGHT", "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xM1QyMzoxMzozOFrOGjZ2Kw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNToxNDoxNFrOGj2tzQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjgxMQ==", "bodyText": "Ccan we not detect this earlier? Or are we relying on path information that we may not have?", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r439776811", "createdAt": "2020-06-13T23:13:38Z", "author": {"login": "loosebazooka"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -177,7 +178,8 @@ private Credential retrieve(List<String> credentialHelperCommand)\n \n       // Checks if the failure is due to a nonexistent credential helper CLI.\n       if (ex.getMessage().contains(\"No such file or directory\")\n-          || ex.getMessage().contains(\"cannot find the file\")) {\n+          || ex.getMessage().contains(\"cannot find the file\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0MjQyOQ==", "bodyText": "Yeah, we want to test if the OS can find the command through $PATH. And most of the time, it isn't a full path in practice.", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r440242429", "createdAt": "2020-06-15T15:03:47Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -177,7 +178,8 @@ private Credential retrieve(List<String> credentialHelperCommand)\n \n       // Checks if the failure is due to a nonexistent credential helper CLI.\n       if (ex.getMessage().contains(\"No such file or directory\")\n-          || ex.getMessage().contains(\"cannot find the file\")) {\n+          || ex.getMessage().contains(\"cannot find the file\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjgxMQ=="}, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0Mzk3OA==", "bodyText": "Oh, that reminded me that we check the file existence if it is a path. There's another place I need to fix.", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r440243978", "createdAt": "2020-06-15T15:06:04Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -177,7 +178,8 @@ private Credential retrieve(List<String> credentialHelperCommand)\n \n       // Checks if the failure is due to a nonexistent credential helper CLI.\n       if (ex.getMessage().contains(\"No such file or directory\")\n-          || ex.getMessage().contains(\"cannot find the file\")) {\n+          || ex.getMessage().contains(\"cannot find the file\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjgxMQ=="}, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDI0OTgwNQ==", "bodyText": "Done with the latest commit a409b84.", "url": "https://github.com/GoogleContainerTools/jib/pull/2529#discussion_r440249805", "createdAt": "2020-06-15T15:14:14Z", "author": {"login": "chanseokoh"}, "path": "jib-core/src/main/java/com/google/cloud/tools/jib/registry/credentials/DockerCredentialHelper.java", "diffHunk": "@@ -177,7 +178,8 @@ private Credential retrieve(List<String> credentialHelperCommand)\n \n       // Checks if the failure is due to a nonexistent credential helper CLI.\n       if (ex.getMessage().contains(\"No such file or directory\")\n-          || ex.getMessage().contains(\"cannot find the file\")) {\n+          || ex.getMessage().contains(\"cannot find the file\")", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTc3NjgxMQ=="}, "originalCommit": {"oid": "43e438ee8d90e4587f6255114a3a4ad548719665"}, "originalPosition": 29}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 207, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}