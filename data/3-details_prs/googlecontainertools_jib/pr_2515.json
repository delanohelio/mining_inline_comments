{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMxMzAxMjk3", "number": 2515, "title": "Proposal for jib cli buildfile", "bodyText": "", "createdAt": "2020-06-08T17:54:55Z", "url": "https://github.com/GoogleContainerTools/jib/pull/2515", "merged": true, "mergeCommit": {"oid": "394bfa477dcd3d50c31d5834b8948c323e42d793"}, "closed": true, "closedAt": "2020-10-13T16:32:40Z", "author": {"login": "loosebazooka"}, "timelineItems": {"totalCount": 29, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcpYdqhAFqTQyNjY2NDQzMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdSK8QGAH2gAyNDMxMzAxMjk3OjhmZjlmOGQzMmJiMGIxMTQzY2RjYzQ0YjhjNjkxODM4NDZhYjBmZmU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2NjY0NDMy", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-426664432", "createdAt": "2020-06-08T22:27:05Z", "commit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjoyNzowNVrOGgyiAg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOFQyMjo0NDo1OFrOGgy6pg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNTUyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                # file properties only applied to layer this layer \"scripts and classes\"\n          \n          \n            \n                # file properties only applied to this layer \"scripts and classes\"", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437035522", "createdAt": "2020-06-08T22:27:05Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 48}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNzY4NA==", "bodyText": "TBH, I don't like this option. The Jib plugins deliberately exclude this option, as this completely nullifies caching and reproducibility almost all the time.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437037684", "createdAt": "2020-06-08T22:32:50Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        fileProperties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+```\n+\n+## Layers\n+\n+`layers` are a list of layer directives, each directive consisting of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `filesProperites`: on disk metadata for all files in the layer\n+* `files`: a list of copy directies\n+\n+`files` are a list of copy directives that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `fileproperties`: on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+File properties are available at 3 levels\n+* Global: applies to all layers\n+* Layer: applies to a single layer\n+* Copy: applies to a single copy directive\n+\n+Properties can be defined at any level and are applied in a cascading fashion.\n+- All properties in `Copy` are applied first\n+- Any property not in `Copy` are applied from `Layer`\n+- Any property not in `Copy` or `Layer` are applied from `Global`\n+- Any property not defined anywhere use jib system defaults.\n+\n+\n+## Extented features (not included in this build)\n+\n+### Other time options\n+* `actual`: use timestamp from file on disk", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzOTQ5OQ==", "bodyText": "As we discussed, I imagine eventually we will end up implementing this, but I think we would keep this as a low priority for some time. I guess there are numerous templating solutions, and I think people will have no issue using them with a script considering that this is a CLI tool.\nBTW, templating is like a feature that tools like Jib CLI can support independent of this spec; it doesn't need to be part of this buildfile spec.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437039499", "createdAt": "2020-06-08T22:37:58Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        fileProperties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+```\n+\n+## Layers\n+\n+`layers` are a list of layer directives, each directive consisting of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `filesProperites`: on disk metadata for all files in the layer\n+* `files`: a list of copy directies\n+\n+`files` are a list of copy directives that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `fileproperties`: on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+File properties are available at 3 levels\n+* Global: applies to all layers\n+* Layer: applies to a single layer\n+* Copy: applies to a single copy directive\n+\n+Properties can be defined at any level and are applied in a cascading fashion.\n+- All properties in `Copy` are applied first\n+- Any property not in `Copy` are applied from `Layer`\n+- Any property not in `Copy` or `Layer` are applied from `Global`\n+- Any property not defined anywhere use jib system defaults.\n+\n+\n+## Extented features (not included in this build)\n+\n+### Other time options\n+* `actual`: use timestamp from file on disk\n+* `now`: use time of build\n+\n+### Templating\n+Allow passing of values into build to be replaced in buildfile", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 111}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA0MTgzMA==", "bodyText": "The build plan allows adding a layer archive tarball. Perhaps Jib CLI can support that too?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437041830", "createdAt": "2020-06-08T22:44:58Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 46}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2Nzc3NTcz", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-426777573", "createdAt": "2020-06-09T04:18:42Z", "commit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "state": "COMMENTED", "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNDoxODo0MlrOGg4NLQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wOVQwNDoyNjo0MFrOGg4UCw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyODQ5Mw==", "bodyText": "Why Hint?  It could signify something optional that could be ignored?  Why not os and arch?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437128493", "createdAt": "2020-06-09T04:18:42Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyODYxNA==", "bodyText": "Is this YAML?  Should be explicit.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437128614", "createdAt": "2020-06-09T04:19:17Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyOTE3OQ==", "bodyText": "There are use-cases for this.  It shouldn't be the default, and these reasons can be expressed.  But we shouldn't prevent it.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437129179", "createdAt": "2020-06-09T04:21:46Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        fileProperties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+```\n+\n+## Layers\n+\n+`layers` are a list of layer directives, each directive consisting of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `filesProperites`: on disk metadata for all files in the layer\n+* `files`: a list of copy directies\n+\n+`files` are a list of copy directives that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `fileproperties`: on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+File properties are available at 3 levels\n+* Global: applies to all layers\n+* Layer: applies to a single layer\n+* Copy: applies to a single copy directive\n+\n+Properties can be defined at any level and are applied in a cascading fashion.\n+- All properties in `Copy` are applied first\n+- Any property not in `Copy` are applied from `Layer`\n+- Any property not in `Copy` or `Layer` are applied from `Global`\n+- Any property not defined anywhere use jib system defaults.\n+\n+\n+## Extented features (not included in this build)\n+\n+### Other time options\n+* `actual`: use timestamp from file on disk", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzAzNzY4NA=="}, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 107}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyOTMzNQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            * `files`: a list of copy directies\n          \n          \n            \n            * `files`: a list of _copy directives_ (see below)", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437129335", "createdAt": "2020-06-09T04:22:32Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        fileProperties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+```\n+\n+## Layers\n+\n+`layers` are a list of layer directives, each directive consisting of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `filesProperites`: on disk metadata for all files in the layer\n+* `files`: a list of copy directies", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEyOTgwOA==", "bodyText": "Seems odd to have \"fileProperties\" contain \"directoryPermissions\"?  Could this be named \"properties\"?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437129808", "createdAt": "2020-06-09T04:24:58Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzEzMDI1MQ==", "bodyText": "Might it be clearer to say that each property (permission, owner, group, timestamp) is resolved in the following order?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r437130251", "createdAt": "2020-06-09T04:26:40Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to layer this layer \"scripts and classes\"\n+    fileProperties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        fileProperties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+```\n+\n+## Layers\n+\n+`layers` are a list of layer directives, each directive consisting of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `filesProperites`: on disk metadata for all files in the layer\n+* `files`: a list of copy directies\n+\n+`files` are a list of copy directives that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `fileproperties`: on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+File properties are available at 3 levels\n+* Global: applies to all layers\n+* Layer: applies to a single layer\n+* Copy: applies to a single copy directive\n+\n+Properties can be defined at any level and are applied in a cascading fashion.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 97}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7", "committedDate": "2020-06-08T17:48:06Z", "message": "Proposal for jib cli buildfile"}, "afterCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/15051291dc2b50fad22ac5f27e41ebf5374ae831", "committedDate": "2020-06-10T13:22:59Z", "message": "review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4MzY0NjUy", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-428364652", "createdAt": "2020-06-10T19:29:50Z", "commit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOToyOTo1MVrOGiDVOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMFQxOTozNzozN1rOGiDkvw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM1OTM1NQ==", "bodyText": "When implementing this, keep in mind what exactly you want jib-cli to do when\n\nentrypoint is missing\nentrypoint: null (built-in null)\nentrypoint: ~ (ditto)\nentrypoint: (ditto. A parser may incorrectly auto-convert it into an empty array?)\nentrypoint: [] (an empty array?)\n\nespecially when considering that people may auto-generate the file or use templates. I guess most of the time, you'll just want to inherit the entrypoint from the base image, as it doesn't make sense to clear an entrypoint. (The behavior is spelled out in the Build Plan.)\nThis also applies to other fields.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438359355", "createdAt": "2020-06-10T19:29:51Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux\n+baseImageArchitecture: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM2MDMxNQ==", "bodyText": "Also keep in mind these should always be \"additions.\" It probably doesn't have to provide a way to reset or delete values coming from the base image. (The behavior is spelled out in the Build Plan.)", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438360315", "createdAt": "2020-06-10T19:31:46Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux\n+baseImageArchitecture: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 26}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM2MjQyMQ==", "bodyText": "I think specifying mediaType is pretty common and standard to specify the type (.tar, .tgz/.tar.gz, .zip, .xz, etc.). I am not sure if any compression format is allowed in the image spec or used in practice, but the OCI Image Spec does list some interesting types for a layer tar archive: .tar, .tar.gz, and .tar.zstd. I think Jib CLI can accept either .tar or .tgz/.tar.gz at least; either way, it has to either compress or decompress the archive to compute a digest.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438362421", "createdAt": "2020-06-10T19:35:53Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,118 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+osHint: linux\n+architectureHint: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+fileProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNzA0MTgzMA=="}, "originalCommit": {"oid": "c4ea7ac28a69b56e3b917c2aa735ebef18c2efa7"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODM2MzMyNw==", "bodyText": "mediatype --> mediaType\nSo, considering the different media types, probably it's safer to name this field differently rather than tar. Theoretically Jib CLI could accept all sorts of forms like .zip and convert it to a .tar for convenience, but I don't know if that's a good idea.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438363327", "createdAt": "2020-06-10T19:37:37Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux\n+baseImageArchitecture: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        properties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+    # a tar layer \n+  - name: \"some tar layer\"\n+    mediatype: \"some/mediatype\"\n+    tar: \"build/generated.tar\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 77}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTcxMDc3", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-428971077", "createdAt": "2020-06-11T14:30:52Z", "commit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDozMDo1MlrOGigEYw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDozMDo1MlrOGigEYw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODgzMDE3OQ==", "bodyText": "It'd be nice to support a foreign-layer and/or URL.  Ideally in such a way that it doesn't need to change to switch between format: Docker and format: OCI.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438830179", "createdAt": "2020-06-11T14:30:52Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux\n+baseImageArchitecture: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        properties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+    # a tar layer \n+  - name: \"some tar layer\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 75}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTg2MDk4", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-428986098", "createdAt": "2020-06-11T14:46:46Z", "commit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDo0Njo0NlrOGigvow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDo0Njo0NlrOGigvow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0MTI1MQ==", "bodyText": "There are other properties to select an image from a manifest list / image index.  Maybe this can be made more explicit as an map.  Something like:\nfrom:\n  image: \"gcr.io/distroless/java:8\"\n  platform:\n    os: linux\n    arch: arm\n    variant:  v6\n\nIt would be very useful to try expressing your format as a JSON schema so that it can be used to provide auto-complete support by IDEs.  @dgageot wrote some scripts for Skaffold to turn Go-based structures into JSON schema.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438841251", "createdAt": "2020-06-11T14:46:46Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 10}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI4OTk1Mzg4", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-428995388", "createdAt": "2020-06-11T14:56:32Z", "commit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDo1NjozMlrOGihKkQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMVQxNDo1NjozMlrOGihKkQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzODg0ODE0NQ==", "bodyText": "Including existing layers?  Maybe layerDefaults?\nBut maybe this is better handled by YAML aliases/anchors?  (Here's a nice overview)", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r438848145", "createdAt": "2020-06-11T14:56:32Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,128 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```\n+# \"FROM\" with option to use os/architecture for manifest lists\n+baseImage: \"gcr.io/distroless/java:8\"\n+baseImageOs: linux\n+baseImageArchitecture: amd64\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "15051291dc2b50fad22ac5f27e41ebf5374ae831"}, "originalPosition": 39}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTEwNDQz", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433510443", "createdAt": "2020-06-18T17:44:03Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzo0NDowM1rOGl5yVQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzo0NDowM1rOGl5yVQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjM5NzI2OQ==", "bodyText": "kind: for type and versioning", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442397269", "createdAt": "2020-06-18T17:44:03Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTE4NDA5", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433518409", "createdAt": "2020-06-18T17:54:48Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzo1NDo0OVrOGl6J_g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxNzo1NDo0OVrOGl6J_g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwMzMyNg==", "bodyText": "Platform specific layers?\nplatforms:\n  - os:\n    architecture:", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442403326", "createdAt": "2020-06-18T17:54:49Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists\n+from: \"gcr.io/distroless/java:8\"\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 62}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTIyNTM2", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433522536", "createdAt": "2020-06-18T18:00:27Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODowMDoyN1rOGl6V6g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODowMDoyN1rOGl6V6g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwNjM3OA==", "bodyText": "alternative is to configure things for removal\nstrip:\n\nenvironment\nvolumes", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442406378", "createdAt": "2020-06-18T18:00:27Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists\n+from: \"gcr.io/distroless/java:8\"\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        properties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+\n+    # a archive layer using a tar, default mediaType\n+  - name: \"some tar layer\"\n+    archive: \"build/generated.tar\"\n+\n+    # a foreign layer using the optional mediatype for archive layers\n+  - name: \"some foreign layer\"\n+    mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"\n+    archive: \"https://somewhere.com/layer\"\n+    # should we include size and digest here? I guess we can always ad tings\n+```\n+\n+## Layers\n+\n+`layers` are a list of `layer` directives\n+\n+`layer` directives can be `archive` or `file` layers\n+\n+a `archive` layer consists of 3 parts\n+* `name`: the name/description of the layer (metadata)\n+* `archive`: a tar file to include as a layer\n+* `mediatype`: the mediatype of archive\n+\n+a `file` layer consists of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `properties`: on disk metadata for all files in the layer\n+* `files`: a list of *copy directies* (see below)\n+\n+`files` are a list of *copy directives* that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `properties`: FilesProperties to represent on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+A list of properties that can be user specified for each file in a file layer\n+* filePermissions: An octal representing permissions for files\n+* directoryPermissions: An octal representing permissions for directories\n+* user: The ownership user property\n+* group: The ownership group property\n+* timestamp: millis since epoch or iso8601 creation time\n+\n+File properties are available at 3 levels\n+* Global (`layerProperties`): applies to all layers\n+* Layer (`properties`): applies to a single layer\n+* Copy (`properties`): applies to a single copy directive\n+\n+Each property (`filePermissions`, `directoryPermissions`, etc) can be defined at any level and are resolved in the follow order\n+- All properties in `Copy` are applied first\n+- Any properties not in `Copy` are applied from `Layer`\n+- Any properties not in `Copy` or `Layer` are applied from `Global`\n+- Any properties not defined anywhere use jib system defaults.\n+\n+\n+## Extented features (not included in this build)\n+\n+### Other time options\n+* `actual`: use timestamp from file on disk\n+* `now`: use time of build\n+\n+### Configurable base image value inheritance\n+Jib has some default behavior on inheritance of config parameters from the base image.\n+Perhaps this needs to be configurable\n+\n+(this is just an exploration, open to some ideas here)\n+\n+For all values in config of the base image, allow inheritance.\n+```\n+baseImage:\n+  from: \"gcr.io/birds/goose\"\n+  inherit:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 162}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTI1NzAy", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433525702", "createdAt": "2020-06-18T18:05:02Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODowNTowMlrOGl6frg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODowNTowMlrOGl6frg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQwODg3OA==", "bodyText": "file copy behavior needs to be defined", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442408878", "createdAt": "2020-06-18T18:05:02Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists\n+from: \"gcr.io/distroless/java:8\"\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 71}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTQ4NDI2", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433548426", "createdAt": "2020-06-18T18:37:25Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODozNzoyNVrOGl7kFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODozNzoyNVrOGl7kFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyNjM4OA==", "bodyText": "can this just be keyword \"foreign?\"\nshould we remove mediatype", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442426388", "createdAt": "2020-06-18T18:37:25Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists\n+from: \"gcr.io/distroless/java:8\"\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        properties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+\n+    # a archive layer using a tar, default mediaType\n+  - name: \"some tar layer\"\n+    archive: \"build/generated.tar\"\n+\n+    # a foreign layer using the optional mediatype for archive layers\n+  - name: \"some foreign layer\"\n+    mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 97}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzNTQ4ODY1", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-433548865", "createdAt": "2020-06-18T18:38:04Z", "commit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODozODowNFrOGl7lXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xOFQxODozODowNFrOGl7lXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MjQyNjcxNg==", "bodyText": "what about history entry?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r442426716", "createdAt": "2020-06-18T18:38:04Z", "author": {"login": "loosebazooka"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,187 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+# \"FROM\" with option to use os/architecture for manifest lists\n+from: \"gcr.io/distroless/java:8\"\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+# global file properties applied to all layers\n+layerProperties:\n+  filePermissions: \"644\"\n+  directoryPermissions: \"755\"\n+  user: \"0\"\n+  group: \"0\"\n+  timestamp: \"0\"\n+layers:\n+  - name: \"scripts and classes\"\n+    # file properties only applied to this layer \"scripts and classes\"\n+    properties:\n+      filePermissions: \"333\"\n+      directoryPermissions: \"777\"\n+      user: \"goose\"\n+      group: \"3\"\n+      timestamp: \"2020-06-03T19:31:50+00:00\"\n+    files:\n+      - from: \"target/scripts\"\n+        to: \"/app/scripts\"\n+        # file properties only applied to this copy directive\n+        properties:\n+          filePermissions: \"777\"\n+        # another copy for the same layer, with includes and excludes\n+      - from: \"target/classes\"\n+        to: \"/app/classes\"\n+        excludes:\n+          - \"**/goose.class\"\n+          - \"**/moose.class\"\n+        includes:\n+          - \"**/*.class\"\n+\n+    # another layer, only globally defined file permissions are applied here\n+  - name: \"other\"\n+    files:\n+      - from: \"build/other\"\n+        to: \"/app\"\n+\n+    # a archive layer using a tar, default mediaType\n+  - name: \"some tar layer\"\n+    archive: \"build/generated.tar\"\n+\n+    # a foreign layer using the optional mediatype for archive layers\n+  - name: \"some foreign layer\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e"}, "originalPosition": 96}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "fe3e2d79426510d5cea8f367a982d379f77f9e9e", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/fe3e2d79426510d5cea8f367a982d379f77f9e9e", "committedDate": "2020-06-17T20:42:03Z", "message": "clean up inherit section"}, "afterCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98", "committedDate": "2020-06-24T18:28:30Z", "message": "more buildfile stuff"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM2OTQ2NzY4", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-436946768", "createdAt": "2020-06-24T19:34:21Z", "commit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "state": "COMMENTED", "comments": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTozNDoyMVrOGogPvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yNFQxOTo1OTo0NFrOGohDlw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyNDU0MA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            apiVersion: jib/v0alpha1\n          \n          \n            \n            apiVersion: jib/v1alpha1\n          \n      \n    \n    \n  \n\nalpha and beta are like Maven -SNAPSHOT: v1alphaX \u2192 v1betaX \u2192 v1.\nOtherwise you're saying when this is complete then it becomes v0.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445124540", "createdAt": "2020-06-24T19:34:21Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyNTM1MQ==", "bodyText": "Buildfile seems more apt?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445125351", "createdAt": "2020-06-24T19:35:56Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyNjAxMw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                - architecutre: amd64\n          \n          \n            \n                - architecture: amd64", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445126013", "createdAt": "2020-06-24T19:37:13Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 25}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyNjU0OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n              platforms:\n          \n          \n            \n              # optional: if missing, then defaults to `linux/amd64`\n          \n          \n            \n              platforms:", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445126548", "createdAt": "2020-06-24T19:38:12Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyODI5NA==", "bodyText": "So what happens if the user does jib build ./buildplan.yaml gcr.io/project/image and gcr.io/project/image has never existed?  Do we always create a manifest list with a single image?  Do we only create a manifest list if there is > 1 platform specified?\nWhat happens if gcr.io/project/image does exist and it's a manifest for a different platform (not a manifest list)?  Do we replace it?  Do we \"promote\" the existing image to a component of a manifest list?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445128294", "createdAt": "2020-06-24T19:41:35Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEyOTQ4Ng==", "bodyText": "It would seem like os.version and os.features should be subitems of os:\nos:\n  id: \"linux\"\n  version: \"a\"\n  features: [\"b1\", \"b2\"]", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445129486", "createdAt": "2020-06-24T19:44:10Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMTg2OA==", "bodyText": "I haven't done an exhaustive search but it feels to me most other environments use an array of strings:\nenvironment:\n  - \"MYKEY1=value\"\nThat said, map-style allows using aliases and anchors so \ud83e\udd37", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445131868", "createdAt": "2020-06-24T19:48:26Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 35}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzMzA3OA==", "bodyText": "I was thrown off by this: I thought the from was referring to a base image.  WDYT about source and destination?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445133078", "createdAt": "2020-06-24T19:50:42Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+layers:\n+  properties:\n+    # file properties applied to all layers\n+    filePermissions: \"644\"\n+    directoryPermissions: \"755\"\n+    user: \"0\"\n+    group: \"0\"\n+    timestamp: \"0\"\n+  entries:\n+    - name: \"scripts and classes\"\n+      # file properties only applied to this layer \"scripts and classes\"\n+      properties:\n+        filePermissions: \"333\"\n+        directoryPermissions: \"777\"\n+        user: \"goose\"\n+        group: \"3\"\n+        timestamp: \"2020-06-03T19:31:50+00:00\"\n+      files:\n+        - from: \"target/scripts\"\n+          to: \"/app/scripts\"\n+          # file properties only applied to this copy directive\n+          properties:\n+            filePermissions: \"777\"\n+          # another copy for the same layer, with includes and excludes\n+        - from: \"target/classes\"\n+          to: \"/app/classes\"\n+          excludes:\n+            - \"**/goose.class\"\n+            - \"**/moose.class\"\n+          includes:\n+            - \"**/*.class\"\n+\n+      # another layer, only globally defined file permissions are applied here\n+    - name: \"other\"\n+      files:\n+        - from: \"build/other\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 92}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzNTkxMg==", "bodyText": "Note that YAML has native support for representing hex and octal numbers  (https://yaml.org/refcard.html)", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445135912", "createdAt": "2020-06-24T19:56:11Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+layers:\n+  properties:\n+    # file properties applied to all layers\n+    filePermissions: \"644\"\n+    directoryPermissions: \"755\"\n+    user: \"0\"\n+    group: \"0\"\n+    timestamp: \"0\"\n+  entries:\n+    - name: \"scripts and classes\"\n+      # file properties only applied to this layer \"scripts and classes\"\n+      properties:\n+        filePermissions: \"333\"\n+        directoryPermissions: \"777\"\n+        user: \"goose\"\n+        group: \"3\"\n+        timestamp: \"2020-06-03T19:31:50+00:00\"\n+      files:\n+        - from: \"target/scripts\"\n+          to: \"/app/scripts\"\n+          # file properties only applied to this copy directive\n+          properties:\n+            filePermissions: \"777\"\n+          # another copy for the same layer, with includes and excludes\n+        - from: \"target/classes\"\n+          to: \"/app/classes\"\n+          excludes:\n+            - \"**/goose.class\"\n+            - \"**/moose.class\"\n+          includes:\n+            - \"**/*.class\"\n+\n+      # another layer, only globally defined file permissions are applied here\n+    - name: \"other\"\n+      files:\n+        - from: \"build/other\"\n+          to: \"/app\"\n+\n+      # a archive layer using a tar, default mediaType\n+    - name: \"some tar layer\"\n+      archive: \"build/generated.tar\"\n+\n+      # a foreign layer using the optional mediatype for archive layers\n+    - name: \"some foreign layer\"\n+      mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"\n+      archive: \"https://somewhere.com/layer\"\n+      # should we include size and digest here? I guess we can always ad tings\n+```\n+\n+## Layers\n+\n+`layers.entries` are a list of `layer` directives\n+\n+`layer` directives can be `archive` or `file` layers\n+\n+a `archive` layer consists of 3 parts\n+* `name`: the name/description of the layer (metadata)\n+* `archive`: a tar file to include as a layer\n+* `mediatype`: the mediatype of archive\n+\n+a `file` layer consists of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `properties`: on disk metadata for all files in the layer\n+* `files`: a list of *copy directies* (see below)\n+\n+`files` are a list of *copy directives* that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `properties`: FilesProperties to represent on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+A list of properties that can be user specified for each file in a file layer\n+* filePermissions: An octal representing permissions for files\n+* directoryPermissions: An octal representing permissions for directories", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 133}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzNjU0Mw==", "bodyText": "?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            ## Extented features (not included in this build)\n          \n          \n            \n            ## Extended features (not included in this build)", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445136543", "createdAt": "2020-06-24T19:57:23Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+layers:\n+  properties:\n+    # file properties applied to all layers\n+    filePermissions: \"644\"\n+    directoryPermissions: \"755\"\n+    user: \"0\"\n+    group: \"0\"\n+    timestamp: \"0\"\n+  entries:\n+    - name: \"scripts and classes\"\n+      # file properties only applied to this layer \"scripts and classes\"\n+      properties:\n+        filePermissions: \"333\"\n+        directoryPermissions: \"777\"\n+        user: \"goose\"\n+        group: \"3\"\n+        timestamp: \"2020-06-03T19:31:50+00:00\"\n+      files:\n+        - from: \"target/scripts\"\n+          to: \"/app/scripts\"\n+          # file properties only applied to this copy directive\n+          properties:\n+            filePermissions: \"777\"\n+          # another copy for the same layer, with includes and excludes\n+        - from: \"target/classes\"\n+          to: \"/app/classes\"\n+          excludes:\n+            - \"**/goose.class\"\n+            - \"**/moose.class\"\n+          includes:\n+            - \"**/*.class\"\n+\n+      # another layer, only globally defined file permissions are applied here\n+    - name: \"other\"\n+      files:\n+        - from: \"build/other\"\n+          to: \"/app\"\n+\n+      # a archive layer using a tar, default mediaType\n+    - name: \"some tar layer\"\n+      archive: \"build/generated.tar\"\n+\n+      # a foreign layer using the optional mediatype for archive layers\n+    - name: \"some foreign layer\"\n+      mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"\n+      archive: \"https://somewhere.com/layer\"\n+      # should we include size and digest here? I guess we can always ad tings\n+```\n+\n+## Layers\n+\n+`layers.entries` are a list of `layer` directives\n+\n+`layer` directives can be `archive` or `file` layers\n+\n+a `archive` layer consists of 3 parts\n+* `name`: the name/description of the layer (metadata)\n+* `archive`: a tar file to include as a layer\n+* `mediatype`: the mediatype of archive\n+\n+a `file` layer consists of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `properties`: on disk metadata for all files in the layer\n+* `files`: a list of *copy directies* (see below)\n+\n+`files` are a list of *copy directives* that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `properties`: FilesProperties to represent on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+A list of properties that can be user specified for each file in a file layer\n+* filePermissions: An octal representing permissions for files\n+* directoryPermissions: An octal representing permissions for directories\n+* user: The ownership user property\n+* group: The ownership group property\n+* timestamp: millis since epoch or iso8601 creation time\n+\n+File properties are available at 3 levels\n+* Global (`layers.properties`): applies to all layers\n+* Layer (`layers.<entry>.properties`): applies to a single layer\n+* Copy (`layers.<entry>.<copy>.properties`): applies to a single copy directive\n+\n+Each property (`filePermissions`, `directoryPermissions`, etc) can be defined at any level and are resolved in the follow order\n+- All properties in `Copy` are applied first\n+- Any properties not in `Copy` are applied from `Layer`\n+- Any properties not in `Copy` or `Layer` are applied from `Global`\n+- Any properties not defined anywhere use jib system defaults.\n+\n+### Base image value inheritance\n+The value(s) defined in the base image are preserved and propogated into the\n+config of the new container.\n+\n+The behavior of the buildfile values post-inheritance must be considered\n+\n+These parameters will allow appending to the base image value:\n+- `environment`\n+- `volumes`\n+- `labels`\n+- `exposedPorts`\n+\n+The paratmeters will be overwritten:\n+- `user`\n+- `workingDirectory`\n+- `entrypoint`\n+- `cmd`\n+\n+If we start getting specific user requests to control this, we can explore\n+inheritance control in the future.\n+\n+## Extented features (not included in this build)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 170}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzNzc5OA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n            The paratmeters will be overwritten:\n          \n          \n            \n            These parameters will be overwritten:", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445137798", "createdAt": "2020-06-24T19:59:41Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+layers:\n+  properties:\n+    # file properties applied to all layers\n+    filePermissions: \"644\"\n+    directoryPermissions: \"755\"\n+    user: \"0\"\n+    group: \"0\"\n+    timestamp: \"0\"\n+  entries:\n+    - name: \"scripts and classes\"\n+      # file properties only applied to this layer \"scripts and classes\"\n+      properties:\n+        filePermissions: \"333\"\n+        directoryPermissions: \"777\"\n+        user: \"goose\"\n+        group: \"3\"\n+        timestamp: \"2020-06-03T19:31:50+00:00\"\n+      files:\n+        - from: \"target/scripts\"\n+          to: \"/app/scripts\"\n+          # file properties only applied to this copy directive\n+          properties:\n+            filePermissions: \"777\"\n+          # another copy for the same layer, with includes and excludes\n+        - from: \"target/classes\"\n+          to: \"/app/classes\"\n+          excludes:\n+            - \"**/goose.class\"\n+            - \"**/moose.class\"\n+          includes:\n+            - \"**/*.class\"\n+\n+      # another layer, only globally defined file permissions are applied here\n+    - name: \"other\"\n+      files:\n+        - from: \"build/other\"\n+          to: \"/app\"\n+\n+      # a archive layer using a tar, default mediaType\n+    - name: \"some tar layer\"\n+      archive: \"build/generated.tar\"\n+\n+      # a foreign layer using the optional mediatype for archive layers\n+    - name: \"some foreign layer\"\n+      mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"\n+      archive: \"https://somewhere.com/layer\"\n+      # should we include size and digest here? I guess we can always ad tings\n+```\n+\n+## Layers\n+\n+`layers.entries` are a list of `layer` directives\n+\n+`layer` directives can be `archive` or `file` layers\n+\n+a `archive` layer consists of 3 parts\n+* `name`: the name/description of the layer (metadata)\n+* `archive`: a tar file to include as a layer\n+* `mediatype`: the mediatype of archive\n+\n+a `file` layer consists of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `properties`: on disk metadata for all files in the layer\n+* `files`: a list of *copy directies* (see below)\n+\n+`files` are a list of *copy directives* that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `properties`: FilesProperties to represent on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+A list of properties that can be user specified for each file in a file layer\n+* filePermissions: An octal representing permissions for files\n+* directoryPermissions: An octal representing permissions for directories\n+* user: The ownership user property\n+* group: The ownership group property\n+* timestamp: millis since epoch or iso8601 creation time\n+\n+File properties are available at 3 levels\n+* Global (`layers.properties`): applies to all layers\n+* Layer (`layers.<entry>.properties`): applies to a single layer\n+* Copy (`layers.<entry>.<copy>.properties`): applies to a single copy directive\n+\n+Each property (`filePermissions`, `directoryPermissions`, etc) can be defined at any level and are resolved in the follow order\n+- All properties in `Copy` are applied first\n+- Any properties not in `Copy` are applied from `Layer`\n+- Any properties not in `Copy` or `Layer` are applied from `Global`\n+- Any properties not defined anywhere use jib system defaults.\n+\n+### Base image value inheritance\n+The value(s) defined in the base image are preserved and propogated into the\n+config of the new container.\n+\n+The behavior of the buildfile values post-inheritance must be considered\n+\n+These parameters will allow appending to the base image value:\n+- `environment`\n+- `volumes`\n+- `labels`\n+- `exposedPorts`\n+\n+The paratmeters will be overwritten:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 161}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NTEzNzgxNQ==", "bodyText": "Separate out environment and labels: they will override values with the same key.", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r445137815", "createdAt": "2020-06-24T19:59:44Z", "author": {"login": "briandealwis"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,186 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and\n+passed to the builder.\n+\n+```yaml\n+apiVersion: jib/v0alpha1\n+kind: Config\n+\n+# \"FROM\" with detail for manifest lists or multiple architectures\n+from:\n+  image: \"gcr.io/distroless/java:8\"\n+  platforms:\n+    - architecture: \"arm\"\n+      os: \"linux\"\n+      os.version: \"a\"\n+      os.features:\n+        - \"b1\"\n+        - \"b2\"\n+      variant: \"c\"\n+      features:\n+        - \"d1\"\n+        - \"d2\"\n+    - architecutre: amd64\n+      os: darwin\n+\n+# potentially simple form of \"FROM\" (based on ability to define schema)\n+from: \"gcr.io/distroless/java:8\"\n+\n+creationTime: 0 # millis since epoch or iso8601 creation time\n+format: Docker # Docker or OCI\n+\n+environment:\n+  \"MY_KEY1\": \"value\"\n+  \"MY_KEY2\": \"value\"\n+labels:\n+  \"com.example.owner\": \"person\"\n+  \"com.example.mode\": \"dev\"\n+volumes:\n+  - \"/myvolume\"\n+  - \"/youvolume\"\n+\n+exposedPorts:\n+  - \"123/udp\"\n+  - \"456\"\n+  - \"789/tcp\"\n+\n+user: root\n+workingDirectory: \"/somewhere\"\n+entrypoint:\n+  - \"java\"\n+  - \"-jar\"\n+cmd:\n+  - \"myjar.jar\"\n+\n+layers:\n+  properties:\n+    # file properties applied to all layers\n+    filePermissions: \"644\"\n+    directoryPermissions: \"755\"\n+    user: \"0\"\n+    group: \"0\"\n+    timestamp: \"0\"\n+  entries:\n+    - name: \"scripts and classes\"\n+      # file properties only applied to this layer \"scripts and classes\"\n+      properties:\n+        filePermissions: \"333\"\n+        directoryPermissions: \"777\"\n+        user: \"goose\"\n+        group: \"3\"\n+        timestamp: \"2020-06-03T19:31:50+00:00\"\n+      files:\n+        - from: \"target/scripts\"\n+          to: \"/app/scripts\"\n+          # file properties only applied to this copy directive\n+          properties:\n+            filePermissions: \"777\"\n+          # another copy for the same layer, with includes and excludes\n+        - from: \"target/classes\"\n+          to: \"/app/classes\"\n+          excludes:\n+            - \"**/goose.class\"\n+            - \"**/moose.class\"\n+          includes:\n+            - \"**/*.class\"\n+\n+      # another layer, only globally defined file permissions are applied here\n+    - name: \"other\"\n+      files:\n+        - from: \"build/other\"\n+          to: \"/app\"\n+\n+      # a archive layer using a tar, default mediaType\n+    - name: \"some tar layer\"\n+      archive: \"build/generated.tar\"\n+\n+      # a foreign layer using the optional mediatype for archive layers\n+    - name: \"some foreign layer\"\n+      mediaType: \"application/vnd.docker.image.rootfs.foreign.diff.tar.gzip\"\n+      archive: \"https://somewhere.com/layer\"\n+      # should we include size and digest here? I guess we can always ad tings\n+```\n+\n+## Layers\n+\n+`layers.entries` are a list of `layer` directives\n+\n+`layer` directives can be `archive` or `file` layers\n+\n+a `archive` layer consists of 3 parts\n+* `name`: the name/description of the layer (metadata)\n+* `archive`: a tar file to include as a layer\n+* `mediatype`: the mediatype of archive\n+\n+a `file` layer consists of 3 parts\n+* `name`: the name of the layer (metadata)\n+* `properties`: on disk metadata for all files in the layer\n+* `files`: a list of *copy directies* (see below)\n+\n+`files` are a list of *copy directives* that consist of 2 required and 3 optional parts\n+* `to` *required*: an absolute path to copy the files to on the container\n+* `from` *required*: a file, or directory on disk to copy from\n+* `includes`: only includes the patterns matched in this parameter\n+* `exludes`: excludes all files (higher prescendence than `includes`) matched in this parameter\n+* `properties`: FilesProperties to represent on disk metadata for all files in this copy directive\n+\n+### FileProperties\n+\n+A list of properties that can be user specified for each file in a file layer\n+* filePermissions: An octal representing permissions for files\n+* directoryPermissions: An octal representing permissions for directories\n+* user: The ownership user property\n+* group: The ownership group property\n+* timestamp: millis since epoch or iso8601 creation time\n+\n+File properties are available at 3 levels\n+* Global (`layers.properties`): applies to all layers\n+* Layer (`layers.<entry>.properties`): applies to a single layer\n+* Copy (`layers.<entry>.<copy>.properties`): applies to a single copy directive\n+\n+Each property (`filePermissions`, `directoryPermissions`, etc) can be defined at any level and are resolved in the follow order\n+- All properties in `Copy` are applied first\n+- Any properties not in `Copy` are applied from `Layer`\n+- Any properties not in `Copy` or `Layer` are applied from `Global`\n+- Any properties not defined anywhere use jib system defaults.\n+\n+### Base image value inheritance\n+The value(s) defined in the base image are preserved and propogated into the\n+config of the new container.\n+\n+The behavior of the buildfile values post-inheritance must be considered\n+\n+These parameters will allow appending to the base image value:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98"}, "originalPosition": 155}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/92daefc9433cc7ddb5d4dda30d7df0e6f2acaf98", "committedDate": "2020-06-24T18:28:30Z", "message": "more buildfile stuff"}, "afterCommit": {"oid": "8a2a2bb875cfa8d5555f1e7ba13fbcb0fa96bd2a", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8a2a2bb875cfa8d5555f1e7ba13fbcb0fa96bd2a", "committedDate": "2020-06-25T03:50:27Z", "message": "more changes, adds file copy behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bf21897c784ebd33626c613b2c6e9655377720e3", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/bf21897c784ebd33626c613b2c6e9655377720e3", "committedDate": "2020-06-30T22:11:27Z", "message": "Proposal for jib cli buildfile"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b322e33f453caf0160ac24363635cd5bf8d4d646", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/b322e33f453caf0160ac24363635cd5bf8d4d646", "committedDate": "2020-06-30T22:11:27Z", "message": "review changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea2554140ece87be79e7c7ed133fbcd99cc69511", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/ea2554140ece87be79e7c7ed133fbcd99cc69511", "committedDate": "2020-06-30T22:11:27Z", "message": "some more changes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7436f57d6148b1b6d864c2ab5a87e92adc540a90", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/7436f57d6148b1b6d864c2ab5a87e92adc540a90", "committedDate": "2020-06-30T22:11:27Z", "message": "more stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa09c2e75bda44c895df99a876c5c7c3889522d4", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/aa09c2e75bda44c895df99a876c5c7c3889522d4", "committedDate": "2020-06-30T22:11:27Z", "message": "clean up inherit section"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ea5b13c794c113aa8f2bab560733b5e5fce527d2", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/ea5b13c794c113aa8f2bab560733b5e5fce527d2", "committedDate": "2020-06-30T22:11:27Z", "message": "more buildfile stuff"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f34f628160136eb34315cfab91831aab074d8011", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/f34f628160136eb34315cfab91831aab074d8011", "committedDate": "2020-06-30T22:11:27Z", "message": "more changes, adds file copy behavior"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d2565355e866af76be8e038a614683228c68548f", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/d2565355e866af76be8e038a614683228c68548f", "committedDate": "2020-06-30T22:11:27Z", "message": "history, apiVersion"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "36dde4031795d1ff85c917c9bb39bf2f05b9151e", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/36dde4031795d1ff85c917c9bb39bf2f05b9151e", "committedDate": "2020-06-30T22:11:27Z", "message": "section about manifest lists"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c35a9be7f440e3190956a026df9d12dfbed21bc2", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/c35a9be7f440e3190956a026df9d12dfbed21bc2", "committedDate": "2020-06-25T03:51:56Z", "message": "history, apiVersion"}, "afterCommit": {"oid": "36dde4031795d1ff85c917c9bb39bf2f05b9151e", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/36dde4031795d1ff85c917c9bb39bf2f05b9151e", "committedDate": "2020-06-30T22:11:27Z", "message": "section about manifest lists"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "09bb28c0adc265186af47aee199d16ae6c17fc7d", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/09bb28c0adc265186af47aee199d16ae6c17fc7d", "committedDate": "2020-09-24T12:24:54Z", "message": "minor cleanup"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA3NDY5NDgx", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#pullrequestreview-507469481", "createdAt": "2020-10-13T14:01:53Z", "commit": {"oid": "09bb28c0adc265186af47aee199d16ae6c17fc7d"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDowMTo1M1rOHgoW6Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xM1QxNDowMTo1M1rOHgoW6Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMzk3NzcwNQ==", "bodyText": "\"translating directly into a buildplan\" is misleading, isn't it?", "url": "https://github.com/GoogleContainerTools/jib/pull/2515#discussion_r503977705", "createdAt": "2020-10-13T14:01:53Z", "author": {"login": "chanseokoh"}, "path": "proposals/buildfile.md", "diffHunk": "@@ -0,0 +1,211 @@\n+# Jib CLI Buildfile Specification\n+\n+Specification for a YAML buildfile describing building a container image. This buildfile can be\n+used by the jib-cli to generate a container. It is translated directly into a buildplan and", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "09bb28c0adc265186af47aee199d16ae6c17fc7d"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8ff9f8d32bb0b1143cdcc44b8c69183846ab0ffe", "author": {"user": {"login": "loosebazooka", "name": "Appu"}}, "url": "https://github.com/GoogleContainerTools/jib/commit/8ff9f8d32bb0b1143cdcc44b8c69183846ab0ffe", "committedDate": "2020-10-13T16:12:44Z", "message": "reword heading"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 34, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}