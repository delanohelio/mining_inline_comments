{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY1MDI5NTQw", "number": 2683, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMDowODoyOFrOEW8Zhw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNzowNVrOEW94lQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNDkzNzAzOnYy", "diffSide": "RIGHT", "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMDowODoyOFrOG-dwSg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDozMDoxNVrOG-kPSg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE1MjM5NA==", "bodyText": "Now that ownership is not nullable, How about\n  ownership = (user != null ? user : \"\") + (group != null ? \":\" + group : \"\")?\nor\n  ownership = user != null ? user : \"\";\n  if (group != null) {\n    ownership += \":\" + group;\n  }\n? Your preference.", "url": "https://github.com/GoogleContainerTools/jib/pull/2683#discussion_r468152394", "createdAt": "2020-08-10T20:08:28Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "diffHunk": "@@ -76,7 +86,9 @@ private void updateProperties() {\n       group = properties.getGroup().orElse(group);\n     }\n     // ownership calculations\n-    if (group == null) {\n+    if (group == null && user == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbacfaf70c4de4fd71545cf964eacb903a6db508"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1ODYzNA==", "bodyText": "yeah these look better, lemme update", "url": "https://github.com/GoogleContainerTools/jib/pull/2683#discussion_r468258634", "createdAt": "2020-08-11T00:30:15Z", "author": {"login": "loosebazooka"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "diffHunk": "@@ -76,7 +86,9 @@ private void updateProperties() {\n       group = properties.getGroup().orElse(group);\n     }\n     // ownership calculations\n-    if (group == null) {\n+    if (group == null && user == null) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE1MjM5NA=="}, "originalCommit": {"oid": "cbacfaf70c4de4fd71545cf964eacb903a6db508"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjkyNTE4MDM3OnYy", "diffSide": "RIGHT", "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMFQyMToxNzowNVrOG-gG6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xMVQwMDozNDozMVrOG-kTxA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5MDk1Mg==", "bodyText": "Do we need another release? 0.5.0? I don't recall new changes since 0.4.0.", "url": "https://github.com/GoogleContainerTools/jib/pull/2683#discussion_r468190952", "createdAt": "2020-08-10T21:17:05Z", "author": {"login": "chanseokoh"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "diffHunk": "@@ -34,10 +34,23 @@\n   // TODO perhaps use a fixed size list here\n   private final List<FilePropertiesSpec> stack = new ArrayList<>(3);\n \n-  @Nullable private FilePermissions filePermissions;\n-  @Nullable private FilePermissions directoryPermissions;\n-  @Nullable private Instant modificationTime;\n-  @Nullable private String ownership;\n+  private FilePermissions filePermissions;\n+  private FilePermissions directoryPermissions;\n+  private Instant modificationTime;\n+  private String ownership;\n+\n+  /** Create new FilePropertiesStack with defaults. */\n+  public FilePropertiesStack() {\n+    setDefaults();\n+  }\n+\n+  private void setDefaults() {\n+    filePermissions = FilePermissions.DEFAULT_FILE_PERMISSIONS;\n+    directoryPermissions = FilePermissions.DEFAULT_FOLDER_PERMISSIONS;\n+    modificationTime = FileEntriesLayer.DEFAULT_MODIFICATION_TIME;\n+    // TODO: get default from FileEntriesLayer (requires buildplan release)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cbacfaf70c4de4fd71545cf964eacb903a6db508"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1ODU3NA==", "bodyText": "I mean if we were to define a default in the build plan, this would be required.", "url": "https://github.com/GoogleContainerTools/jib/pull/2683#discussion_r468258574", "createdAt": "2020-08-11T00:29:59Z", "author": {"login": "loosebazooka"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "diffHunk": "@@ -34,10 +34,23 @@\n   // TODO perhaps use a fixed size list here\n   private final List<FilePropertiesSpec> stack = new ArrayList<>(3);\n \n-  @Nullable private FilePermissions filePermissions;\n-  @Nullable private FilePermissions directoryPermissions;\n-  @Nullable private Instant modificationTime;\n-  @Nullable private String ownership;\n+  private FilePermissions filePermissions;\n+  private FilePermissions directoryPermissions;\n+  private Instant modificationTime;\n+  private String ownership;\n+\n+  /** Create new FilePropertiesStack with defaults. */\n+  public FilePropertiesStack() {\n+    setDefaults();\n+  }\n+\n+  private void setDefaults() {\n+    filePermissions = FilePermissions.DEFAULT_FILE_PERMISSIONS;\n+    directoryPermissions = FilePermissions.DEFAULT_FOLDER_PERMISSIONS;\n+    modificationTime = FileEntriesLayer.DEFAULT_MODIFICATION_TIME;\n+    // TODO: get default from FileEntriesLayer (requires buildplan release)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5MDk1Mg=="}, "originalCommit": {"oid": "cbacfaf70c4de4fd71545cf964eacb903a6db508"}, "originalPosition": 37}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODI1OTc4MA==", "bodyText": "The thing is, I think there might be some other minor additions to the buildplan that might come up, so we can hold off on this.", "url": "https://github.com/GoogleContainerTools/jib/pull/2683#discussion_r468259780", "createdAt": "2020-08-11T00:34:31Z", "author": {"login": "loosebazooka"}, "path": "jib-cli/src/main/java/com/google/cloud/tools/jib/cli/buildfile/FilePropertiesStack.java", "diffHunk": "@@ -34,10 +34,23 @@\n   // TODO perhaps use a fixed size list here\n   private final List<FilePropertiesSpec> stack = new ArrayList<>(3);\n \n-  @Nullable private FilePermissions filePermissions;\n-  @Nullable private FilePermissions directoryPermissions;\n-  @Nullable private Instant modificationTime;\n-  @Nullable private String ownership;\n+  private FilePermissions filePermissions;\n+  private FilePermissions directoryPermissions;\n+  private Instant modificationTime;\n+  private String ownership;\n+\n+  /** Create new FilePropertiesStack with defaults. */\n+  public FilePropertiesStack() {\n+    setDefaults();\n+  }\n+\n+  private void setDefaults() {\n+    filePermissions = FilePermissions.DEFAULT_FILE_PERMISSIONS;\n+    directoryPermissions = FilePermissions.DEFAULT_FOLDER_PERMISSIONS;\n+    modificationTime = FileEntriesLayer.DEFAULT_MODIFICATION_TIME;\n+    // TODO: get default from FileEntriesLayer (requires buildplan release)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2ODE5MDk1Mg=="}, "originalCommit": {"oid": "cbacfaf70c4de4fd71545cf964eacb903a6db508"}, "originalPosition": 37}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 110, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}