{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0ODEwMzkw", "number": 2368, "reviewThreads": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNToxMjoxN1rODsG7JA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNToyOTo1OVrODtlefQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NTc3MzgwOnYy", "diffSide": "RIGHT", "path": "build.gradle", "isResolved": false, "comments": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNToxMjoxN1rOF81kqA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjo1MzoxNFrOF_Jtig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg==", "bodyText": "Should I apply java-library to use the api dependencies?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399336616", "createdAt": "2020-03-27T15:12:17Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwODM0Mg==", "bodyText": "I mean if java lets you define api dependencies, then maybe this is unnecessary?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399408342", "createdAt": "2020-03-27T16:57:25Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDUwNTUyNQ==", "bodyText": "java doesn't define api. java-library is necessary.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r400505525", "createdAt": "2020-03-30T21:29:02Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNDIwOA==", "bodyText": "yeah I dunno if there's a better way to do this, I don't like applying these plugins conditionally in some parent. But maybe this is okay for now.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401704208", "createdAt": "2020-04-01T15:27:49Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTczNTcxMQ==", "bodyText": "Oh, maybe I should put this in jib-maven-plugin-extension-api instead at root.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401735711", "createdAt": "2020-04-01T16:10:53Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTczNjg1NA==", "bodyText": "Nah, there was a reason I put it at root. Looks like java-library needs to be applied before java.\nAn exception occurred applying plugin request [id: 'java-library']\n> Failed to apply plugin [id 'org.gradle.java-library']\n   > Cannot create variant 'classes' after configuration ':jib-maven-plugin-extension-api:apiElements' has been resolved", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401736854", "createdAt": "2020-04-01T16:12:39Z", "author": {"login": "chanseokoh"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTc2MzcyMg==", "bodyText": "oh yeah I agree, I think maybe there's a consequence to us putting so much in the root buildfile :/", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401763722", "createdAt": "2020-04-01T16:53:14Z", "author": {"login": "loosebazooka"}, "path": "build.gradle", "diffHunk": "@@ -21,6 +21,10 @@ idea.project.settings {\n \n import net.ltgt.gradle.errorprone.CheckSeverity\n \n+project('jib-maven-plugin-extension-api') {\n+  apply plugin: 'java-library'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTMzNjYxNg=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjIxNDUwOnYy", "diffSide": "RIGHT", "path": "jib-maven-plugin-extension-api/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1NjoyMFrOF856Dg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxOTozNjoyNlrOF8_ZPw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzYzMA==", "bodyText": "So I think this part is weird... We don't actually want a direct dependency on the source like this do we?\nIn the end we should depend on the publicly available jib-build-plan obviously we can't do that now since we never released anything.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399407630", "createdAt": "2020-03-27T16:56:20Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+  id 'net.researchgate.release'\n+  id 'maven-publish'\n+}\n+\n+dependencies {\n+  api project(':jib-build-plan')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ5NzUzNQ==", "bodyText": "If we assume we published com.google.cloud.tools:jib-build-plan:0.1.0, I think api 'com.google.cloud.tools:jib-build-plan:0.1.0' is the correct way to go, right? Because the extension dev should be able to access and use those classes in jib-build-plan, isn't it? (I assume the dev will only declare this dependency of this Maven extension API, after which I expect the dev can make use of all the classes in both jib-build-plan and jib-maven-plugin-extension-api plus the maven-core API.) Am I getting this right?\nSo, given that we haven't released jib-build-plan, what do you think is best to move forward at the moment, maybe a temporary measure for the sake of moving forward?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399497535", "createdAt": "2020-03-27T19:36:26Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,40 @@\n+plugins {\n+  id 'net.researchgate.release'\n+  id 'maven-publish'\n+}\n+\n+dependencies {\n+  api project(':jib-build-plan')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwNzYzMA=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3NjIyMTgzOnYy", "diffSide": "RIGHT", "path": "jib-maven-plugin/build.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxNjo1ODowN1rOF85-qg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yN1QxOTozOToxMFrOF8_eeg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwODgxMA==", "bodyText": "this one too, I'm unsure of, should we depend on what's publicly available?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399408810", "createdAt": "2020-03-27T16:58:07Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin/build.gradle", "diffHunk": "@@ -11,6 +11,7 @@ dependencies {\n   sourceProject project(':jib-build-plan')\n   sourceProject project(':jib-core')\n   sourceProject project(':jib-plugins-common')\n+  sourceProject project(':jib-maven-plugin-extension-api')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQ5ODg3NA==", "bodyText": "Hmm... yeah, I think we should use a published one. But haven't someone said if we don't make a breaking change in jib-maven-plugin-extension-api, then including source will be acceptable?\nHow should we proceed at the moment?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r399498874", "createdAt": "2020-03-27T19:39:10Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin/build.gradle", "diffHunk": "@@ -11,6 +11,7 @@ dependencies {\n   sourceProject project(':jib-build-plan')\n   sourceProject project(':jib-core')\n   sourceProject project(':jib-plugins-common')\n+  sourceProject project(':jib-maven-plugin-extension-api')", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTQwODgxMA=="}, "originalCommit": {"oid": "1ef7a06e69ab26b6e12d127cb42043072f3da4d0"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MTI2MDExOnYy", "diffSide": "RIGHT", "path": "jib-maven-plugin-extension-api/build.gradle", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNToyODo1NlrOF_GIjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjowNjo1OVrOF_H1oA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNTEwMg==", "bodyText": "I guess we expose maven core api in our api huh.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401705102", "createdAt": "2020-04-01T15:28:56Z", "author": {"login": "loosebazooka"}, "path": "jib-maven-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+plugins {\n+  id 'net.researchgate.release'\n+  id 'maven-publish'\n+}\n+\n+dependencies {\n+  api project(':jib-build-plan')\n+  api project(':jib-plugins-extension-common')\n+  api \"org.apache.maven:maven-core:${dependencyVersions.MAVEN_API}\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f919223b40c346d16eb69e0a7804d2b3088f53d2"}, "originalPosition": 9}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTczMzAyNA==", "bodyText": "The API method signature will be like extend(ContainerBuildPlan, MavenProject, MavenSession, ...), so I guess we need to expose the maven-core, unless there's something else workable?", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401733024", "createdAt": "2020-04-01T16:06:59Z", "author": {"login": "chanseokoh"}, "path": "jib-maven-plugin-extension-api/build.gradle", "diffHunk": "@@ -0,0 +1,41 @@\n+plugins {\n+  id 'net.researchgate.release'\n+  id 'maven-publish'\n+}\n+\n+dependencies {\n+  api project(':jib-build-plan')\n+  api project(':jib-plugins-extension-common')\n+  api \"org.apache.maven:maven-core:${dependencyVersions.MAVEN_API}\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNTEwMg=="}, "originalCommit": {"oid": "f919223b40c346d16eb69e0a7804d2b3088f53d2"}, "originalPosition": 9}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ5MTI2NTI1OnYy", "diffSide": "RIGHT", "path": "jib-plugins-extension-common/settings.gradle", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNToyOTo1OVrOF_GLyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQxNjowOTowOVrOF_H7jg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNTkyOQ==", "bodyText": "I feel like this file shouldn't be here.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401705929", "createdAt": "2020-04-01T15:29:59Z", "author": {"login": "loosebazooka"}, "path": "jib-plugins-extension-common/settings.gradle", "diffHunk": "@@ -0,0 +1 @@\n+rootProject.name = 'jib-plugins-extension-common'", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f919223b40c346d16eb69e0a7804d2b3088f53d2"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTczNDU0Mg==", "bodyText": "I still don't know what this file is for. Is this required for releasing? We need to publish this sub-project.\nRemoved per #2377.", "url": "https://github.com/GoogleContainerTools/jib/pull/2368#discussion_r401734542", "createdAt": "2020-04-01T16:09:09Z", "author": {"login": "chanseokoh"}, "path": "jib-plugins-extension-common/settings.gradle", "diffHunk": "@@ -0,0 +1 @@\n+rootProject.name = 'jib-plugins-extension-common'", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTcwNTkyOQ=="}, "originalCommit": {"oid": "f919223b40c346d16eb69e0a7804d2b3088f53d2"}, "originalPosition": 1}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 330, "cost": 1, "resetAt": "2021-11-12T19:05:54Z"}}}