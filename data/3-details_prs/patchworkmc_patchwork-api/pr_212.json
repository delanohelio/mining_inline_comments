{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyODg3OTU3", "number": 212, "title": "Implement Item Events", "bodyText": "This PR implements everything in net.minecraftforge.event.entity.item. Implementations differ slightly from forge, notably in onPlayerTossEvent (https://github.com/PatchworkMC/YarnForge/blob/af120a35c3e6951b7ef4318801b6b8dce6fc5420/src/main/java/net/minecraftforge/common/ForgeHooks.java#L428). As far as I can tell, this needlessly replaces calls to PlayerEntity#dropItem(ItemStack, boolean, boolean) and calls it instead in ForgeHooks, and has to deal with spawning the item manually. Instead, this PR injects into dropItem(ItemStack, boolean, boolean) directly.\nCorresponding testmods PR: PatchworkMC/patchwork-testmods#5", "createdAt": "2020-12-19T06:54:21Z", "url": "https://github.com/PatchworkMC/patchwork-api/pull/212", "merged": true, "mergeCommit": {"oid": "6638a9bbdeeae8c58578b1e321a3eeda797902dd"}, "closed": true, "closedAt": "2020-12-19T22:14:01Z", "author": {"login": "WalkerKnapp"}, "timelineItems": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdhXCstAH2gAyNTQyODg3OTU3OjEyY2MwNmJlMDBiYzU0MjcyN2MzMzA1NWRlMGRkZGZkYmY2ZmI5NjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdn0RALgFqTU1NTk3MTcwMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "12cc06be00bc542727c33055de0dddfdbf6fb966", "author": {"user": {"login": "WalkerKnapp", "name": "Walker Knapp"}}, "url": "https://github.com/PatchworkMC/patchwork-api/commit/12cc06be00bc542727c33055de0dddfdbf6fb966", "committedDate": "2020-11-29T20:47:30Z", "message": "Implement ItemEvent events"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6e7a8766253f0b55a9667763e53bd2ba7a9a21bf", "author": {"user": {"login": "WalkerKnapp", "name": "Walker Knapp"}}, "url": "https://github.com/PatchworkMC/patchwork-api/commit/6e7a8766253f0b55a9667763e53bd2ba7a9a21bf", "committedDate": "2020-12-19T06:35:47Z", "message": "Use alternative call-points for ItemTossEvent and ItemExpireEvent"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU1OTcxNzAx", "url": "https://github.com/PatchworkMC/patchwork-api/pull/212#pullrequestreview-555971701", "createdAt": "2020-12-19T22:13:49Z", "commit": {"oid": "6e7a8766253f0b55a9667763e53bd2ba7a9a21bf"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQyMjoxMzo0OVrOII-33A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOVQyMjoxMzo0OVrOII-33A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NjI4OTYyOA==", "bodyText": "I'll take your word for it", "url": "https://github.com/PatchworkMC/patchwork-api/pull/212#discussion_r546289628", "createdAt": "2020-12-19T22:13:49Z", "author": {"login": "TheGlitch76"}, "path": "patchwork-events-entity/src/main/java/net/patchworkmc/mixin/event/entity/MixinPlayerEntity.java", "diffHunk": "@@ -154,4 +157,16 @@ private int onAddExperienceLevels(int levels) {\n \t\t// There are no effects from passing in zero levels, so do that if we've been canceled\n \t\treturn event.isCanceled() ? 0 : event.getLevels();\n \t}\n+\n+\t@Inject(method = \"dropItem(Lnet/minecraft/item/ItemStack;ZZ)Lnet/minecraft/entity/ItemEntity;\",\n+\t\t\tat = @At(value = \"RETURN\", ordinal = 1), locals = LocalCapture.CAPTURE_FAILHARD, cancellable = true)\n+\tprivate void onDropItem(ItemStack itemStack, boolean bl, boolean bl2, CallbackInfoReturnable<ItemEntity> ci, double y, ItemEntity itemEntity) {\n+\t\t// Note: This is implemented slightly differently from forge, since forge only calls this event on\n+\t\t// dropSelectedItem(boolean) and dropItem(ItemStack, boolean), but this way makes it much nicer to implement\n+\t\t// and should produce the same behavior for modders", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "6e7a8766253f0b55a9667763e53bd2ba7a9a21bf"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1000, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}