{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcyNDI3OTI2", "number": 1220, "title": "./gradlew test -Drecreate=true", "bodyText": "Before this PR\nA number of our repos use the ./gradlew test -Drecreate=true pattern, but I recently found (on our circle-templates repo) that we've been doing it wrong the entire time.  Specifically, the task short-circuits and doesn't run when there are no code changes, even though the behaviour should be different when -Drecreate=true is passed in.\nAfter this PR\n==COMMIT_MSG==\nFor repos that use snapshot-style testing, ./gradlew test -Drecreate=true will ensure the \"recreate\" system property is passed through to Java correctly.\n==COMMIT_MSG==\nPossible downsides?", "createdAt": "2020-02-07T14:05:41Z", "url": "https://github.com/palantir/gradle-baseline/pull/1220", "merged": true, "mergeCommit": {"oid": "5dc5a8f9c7eeb3852bd21c66a8121234e48858d0"}, "closed": true, "closedAt": "2020-02-10T14:27:05Z", "author": {"login": "iamdanfox"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcB_2FZAH2gAyMzcyNDI3OTI2OmExMDJjMTMxMTIzMWQyN2FiNzIzNTAwNDQ1MGQxZTQ1ZDgyNGZiY2Q=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcC7m2jAFqTM1NTg3MTU2Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a102c1311231d27ab7235004450d1e45d824fbcd", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/a102c1311231d27ab7235004450d1e45d824fbcd", "committedDate": "2020-02-07T14:03:06Z", "message": "-Drecreate=true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ce1c5966c48050e7c41606c312803d893fbaccc6", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/ce1c5966c48050e7c41606c312803d893fbaccc6", "committedDate": "2020-02-07T14:03:06Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1MTg5MjIz", "url": "https://github.com/palantir/gradle-baseline/pull/1220#pullrequestreview-355189223", "createdAt": "2020-02-07T14:24:21Z", "commit": {"oid": "ce1c5966c48050e7c41606c312803d893fbaccc6"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNDoyNDoyMVrOFm-mCA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wN1QxNDoyNDoyMVrOFm-mCA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NjQxNTc1Mg==", "bodyText": "Should be be defensive and disable caching when shouldRecreate=true?", "url": "https://github.com/palantir/gradle-baseline/pull/1220#discussion_r376415752", "createdAt": "2020-02-07T14:24:21Z", "author": {"login": "carterkozak"}, "path": "gradle-baseline-java/src/main/groovy/com/palantir/baseline/plugins/BaselineTesting.java", "diffHunk": "@@ -46,6 +46,12 @@ public void apply(Project project) {\n                 // Never cache test tasks, until we work out the correct inputs for ETE / integration tests\n                 task.getOutputs().cacheIf(t -> false);\n             }\n+\n+            // repos that use 'snapshot' style testing should all use one convenient task to refresh the snapshots,\n+            // ./gradlew test -Drecreate=true\n+            String shouldRecreate = System.getProperty(\"recreate\", \"false\");\n+            task.systemProperty(\"recreate\", shouldRecreate);\n+            task.getInputs().property(\"recreate\", shouldRecreate);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ce1c5966c48050e7c41606c312803d893fbaccc6"}, "originalPosition": 9}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32641ab91b9ba41dbaac9882677a119d1de77b50", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/32641ab91b9ba41dbaac9882677a119d1de77b50", "committedDate": "2020-02-07T14:29:19Z", "message": "always re-run test"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b23f116e153358633732bd239dad1ebf9a709a0a", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/b23f116e153358633732bd239dad1ebf9a709a0a", "committedDate": "2020-02-07T14:30:17Z", "message": "Merge branch 'dfox/recreate-true' of github.com:palantir/gradle-baseline into dfox/recreate-true"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bc647247df5bb14771ab0cdea182bd6e0997beb0", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/bc647247df5bb14771ab0cdea182bd6e0997beb0", "committedDate": "2020-02-07T14:30:55Z", "message": "enforce boolean"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "dc09fe3127601d01c6bede6fa52d349620041bcd", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/dc09fe3127601d01c6bede6fa52d349620041bcd", "committedDate": "2020-02-07T14:30:23Z", "message": "enforce boolean"}, "afterCommit": {"oid": "bc647247df5bb14771ab0cdea182bd6e0997beb0", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/bc647247df5bb14771ab0cdea182bd6e0997beb0", "committedDate": "2020-02-07T14:30:55Z", "message": "enforce boolean"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU1ODcxNTY2", "url": "https://github.com/palantir/gradle-baseline/pull/1220#pullrequestreview-355871566", "createdAt": "2020-02-10T11:40:46Z", "commit": {"oid": "bc647247df5bb14771ab0cdea182bd6e0997beb0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2161, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}