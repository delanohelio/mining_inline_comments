{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNzU3MzU2", "number": 1411, "title": "Improve gradle-baseline-java integration with IntelliJ import", "bodyText": "Before this PR\nWhen directly importing the gradle project in IntelliJ, neither checkstyle nor copyright would be set up properly\nAfter this PR\n==COMMIT_MSG==\nAdds the proper configuration files upon IntelliJ import of a gradle project for checkstyle and copyright.\nThis generates the following additional files:\n\n.idea/copyright/profiles_settings.xml\nan xml file under .idea/copyright/ per copyright file under .baseline/copyright\n.idea/checkstyle-idea.xml (and adds Checkstyle-IDEA to the external dependencies) if baseline-checkstyle is applied\nEither .idea/codeStyleSettings.xml or a .idea/codeStyles/ folder with the contents being copied from .baseline/idea\n\nIf .baseline/idea/codeStyles is present, it will copy its contents, otherwise, it will fall back to .baseline/idea/intellij-java-palantir-style.xml as currently\nThe fallback is using a legacy IntelliJ format and requires closing and reopening the project to be taken into account\n\n\n\n==COMMIT_MSG==\nPossible downsides?\n\nSmall changes to the existing code structure for non-import code paths, which shouldn't change the output\nNot impossible this would override or conflict with other setups people have manually done", "createdAt": "2020-06-12T15:48:56Z", "url": "https://github.com/palantir/gradle-baseline/pull/1411", "merged": true, "mergeCommit": {"oid": "3bd2a1e0bafa7199bf2220c44e6b5dae06992519"}, "closed": true, "closedAt": "2020-06-17T16:36:21Z", "author": {"login": "aldexis"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqkk-MAH2gAyNDMzNzU3MzU2OjdiYzMyMjhjNGMxYjhmOWVhNTg1YjMyNzIwZjlhMmM1NDljNzRiOWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcsMjYBgFqTQzMjU3Nzk3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7bc3228c4c1b8f9ea585b32720f9a2c549c74b9e", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/7bc3228c4c1b8f9ea585b32720f9a2c549c74b9e", "committedDate": "2020-06-12T15:27:52Z", "message": "Improve gradle-baseline-java integration with IntelliJ import"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f724713d8942bd817677ea606eb5a2819aa10424", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/f724713d8942bd817677ea606eb5a2819aa10424", "committedDate": "2020-06-12T15:12:08Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "339b5f9afb156eef51f2ef2cc93d6e277590ed05", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/339b5f9afb156eef51f2ef2cc93d6e277590ed05", "committedDate": "2020-06-12T15:53:06Z", "message": "Fix checkstyle"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bd58a9a66ac578e8d409f57b4cf36177918e15cd", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/bd58a9a66ac578e8d409f57b4cf36177918e15cd", "committedDate": "2020-06-12T15:58:48Z", "message": "SpotlessApply"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "692a046470332dd1202bb2c6b3c6027ca0abdba8", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/692a046470332dd1202bb2c6b3c6027ca0abdba8", "committedDate": "2020-06-12T16:59:43Z", "message": "Rely on single-file style settings to generate new style files"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2c7854c6676498679005fd92a6f989cbc3ec5d84", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/2c7854c6676498679005fd92a6f989cbc3ec5d84", "committedDate": "2020-06-12T17:14:13Z", "message": "Test potential fix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMwNzI1MTU3", "url": "https://github.com/palantir/gradle-baseline/pull/1411#pullrequestreview-430725157", "createdAt": "2020-06-15T14:56:20Z", "commit": {"oid": "2c7854c6676498679005fd92a6f989cbc3ec5d84"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDo1NjoyMVrOGj18FA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNVQxNDo1NjoyMVrOGj18FA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDIzNzA3Ng==", "bodyText": "I'd flip this so it performs the action when (and if) the BaselineCheckstyle plugin is applied.\nIn the current state, you're dependent on the order of application, so if BaselineCheckstyle is applied later, intellij won't be configured correctly.\nproject.plugins.withType(BaselineCheckstyle) {\n  // rest of the function\n}", "url": "https://github.com/palantir/gradle-baseline/pull/1411#discussion_r440237076", "createdAt": "2020-06-15T14:56:21Z", "author": {"login": "dansanduleac"}, "path": "gradle-baseline-java/src/main/groovy/com/palantir/baseline/plugins/BaselineIdea.groovy", "diffHunk": "@@ -203,6 +294,29 @@ class BaselineIdea extends AbstractBaselinePlugin {\n         }\n \n         project.logger.debug \"Baseline: Configuring Checkstyle for Idea\"\n+\n+        addCheckstyleNode(node)\n+        addCheckstyleExternalDependencies(node)\n+    }\n+\n+    private static void addCheckstyleIntellijImport(project) {\n+        def checkstyle = project.plugins.findPlugin(BaselineCheckstyle)\n+        if (checkstyle == null) {\n+            project.logger.debug \"Baseline: Skipping IDEA checkstyle configuration since baseline-checkstyle not applied\"\n+            return\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c7854c6676498679005fd92a6f989cbc3ec5d84"}, "originalPosition": 194}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f312b24944eb15558c61c2cddc7be8d9b1355ed", "author": {"user": {"login": "aldexis", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/2f312b24944eb15558c61c2cddc7be8d9b1355ed", "committedDate": "2020-06-16T12:36:53Z", "message": "Address comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4a794f5134f32ca62c9e8229b197776902d42a96", "author": {"user": {"login": "dansanduleac", "name": "Dan S\u0103nduleac"}}, "url": "https://github.com/palantir/gradle-baseline/commit/4a794f5134f32ca62c9e8229b197776902d42a96", "committedDate": "2020-06-17T14:58:37Z", "message": "fix copyright re-adding block"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "070ee37b5e68a6923e5e8a1c774dd26d1972c79c", "author": {"user": {"login": "dansanduleac", "name": "Dan S\u0103nduleac"}}, "url": "https://github.com/palantir/gradle-baseline/commit/070ee37b5e68a6923e5e8a1c774dd26d1972c79c", "committedDate": "2020-06-17T15:05:24Z", "message": "add to existing code_scheme if exists"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTAyMDQ3", "url": "https://github.com/palantir/gradle-baseline/pull/1411#pullrequestreview-432502047", "createdAt": "2020-06-17T15:08:49Z", "commit": {"oid": "070ee37b5e68a6923e5e8a1c774dd26d1972c79c"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "beaf8abc3b62897fb37189c85598b9a19d0276e3", "author": {"user": {"login": "dansanduleac", "name": "Dan S\u0103nduleac"}}, "url": "https://github.com/palantir/gradle-baseline/commit/beaf8abc3b62897fb37189c85598b9a19d0276e3", "committedDate": "2020-06-17T15:17:34Z", "message": "fix another double add"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34cdd353b6951709bbc525e20b6f5b7366147813", "author": {"user": {"login": "dansanduleac", "name": "Dan S\u0103nduleac"}}, "url": "https://github.com/palantir/gradle-baseline/commit/34cdd353b6951709bbc525e20b6f5b7366147813", "committedDate": "2020-06-17T15:23:38Z", "message": "explanatory comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ad4a82ad692937499f3f84bfb67ae9eb08f7d60", "author": {"user": {"login": "dansanduleac", "name": "Dan S\u0103nduleac"}}, "url": "https://github.com/palantir/gradle-baseline/commit/6ad4a82ad692937499f3f84bfb67ae9eb08f7d60", "committedDate": "2020-06-17T15:26:30Z", "message": "fix setting default copyright too"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMyNTc3OTc0", "url": "https://github.com/palantir/gradle-baseline/pull/1411#pullrequestreview-432577974", "createdAt": "2020-06-17T16:36:15Z", "commit": {"oid": "6ad4a82ad692937499f3f84bfb67ae9eb08f7d60"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2043, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}