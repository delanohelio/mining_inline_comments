{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMzNzk0NDg5", "number": 1412, "title": "StrictUnusedVariable handles Java 14 records", "bodyText": "Partially addresses #1405\nBefore this PR\nWe would incorrectly identify any record definition as a violation of StrictUnusedVariable due to some peculiarities with how the record definition was interpreted by errorprone.\nAfter this PR\n==COMMIT_MSG==\nStrictUnusedVariable handles Java 14 records\n==COMMIT_MSG==\nPossible downsides?\nN/A", "createdAt": "2020-06-12T17:05:49Z", "url": "https://github.com/palantir/gradle-baseline/pull/1412", "merged": true, "mergeCommit": {"oid": "eb4d55b75ee04d9a0133645f8ba72885752ac427"}, "closed": true, "closedAt": "2020-06-12T17:16:35Z", "author": {"login": "ferozco"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqlz58gH2gAyNDMzNzk0NDg5OmI3MjdjZWQyYWEwYTRkNDcyZTliZTQ4ZTc1MTAzY2I2OTI3ZmY5ODg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqmDEpgFqTQyOTkwNjk5Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b727ced2aa0a4d472e9be48e75103cb6927ff988", "author": {"user": {"login": "ferozco", "name": "Felipe Orozco"}}, "url": "https://github.com/palantir/gradle-baseline/commit/b727ced2aa0a4d472e9be48e75103cb6927ff988", "committedDate": "2020-06-12T16:54:05Z", "message": "StrictUnusedVariable supports records"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "48c3b3fcca36ad5642fd7218bee71149f91fb30f", "author": {"user": {"login": "ferozco", "name": "Felipe Orozco"}}, "url": "https://github.com/palantir/gradle-baseline/commit/48c3b3fcca36ad5642fd7218bee71149f91fb30f", "committedDate": "2020-06-12T17:02:29Z", "message": "comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e4e8958c3f466f227a52d200ac5333f970d20292", "author": {"user": {"login": "ferozco", "name": "Felipe Orozco"}}, "url": "https://github.com/palantir/gradle-baseline/commit/e4e8958c3f466f227a52d200ac5333f970d20292", "committedDate": "2020-06-12T17:09:03Z", "message": "disable for java 11"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be7f74c93b5f5bdd4d5787f5f08b2245b00b8d9b", "author": {"user": {"login": "ferozco", "name": "Felipe Orozco"}}, "url": "https://github.com/palantir/gradle-baseline/commit/be7f74c93b5f5bdd4d5787f5f08b2245b00b8d9b", "committedDate": "2020-06-12T17:10:23Z", "message": "intellij!"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "be37afa96eed894677999269494c27fea155791f", "author": {"user": {"login": "ferozco", "name": "Felipe Orozco"}}, "url": "https://github.com/palantir/gradle-baseline/commit/be37afa96eed894677999269494c27fea155791f", "committedDate": "2020-06-12T17:10:23Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTA2OTc0", "url": "https://github.com/palantir/gradle-baseline/pull/1412#pullrequestreview-429906974", "createdAt": "2020-06-12T17:10:36Z", "commit": {"oid": "e4e8958c3f466f227a52d200ac5333f970d20292"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzoxMDozNlrOGjLlDA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzoxMDozNlrOGjLlDA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MzA1Mg==", "bodyText": "slick", "url": "https://github.com/palantir/gradle-baseline/pull/1412#discussion_r439543052", "createdAt": "2020-06-12T17:10:36Z", "author": {"login": "carterkozak"}, "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/StrictUnusedVariable.java", "diffHunk": "@@ -768,6 +768,14 @@ public Void visitLambdaExpression(LambdaExpressionTree node, Void unused) {\n \n         @Override\n         public Void visitMethod(MethodTree tree, Void unused) {\n+            // From the perspective of an errorprone rule there are two standalone trees for a single `record`\n+            // definition; A MethodTree which looks like a void function and a ClassTree which has the record fields.\n+            //\n+            // Its unclear why both trees are emitted, but we can identify and ignore a record's MethodTree by checking\n+            // if it does not have any associated source.\n+            if (state.getEndPosition(tree) < 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e4e8958c3f466f227a52d200ac5333f970d20292"}, "originalPosition": 9}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTA2OTk4", "url": "https://github.com/palantir/gradle-baseline/pull/1412#pullrequestreview-429906998", "createdAt": "2020-06-12T17:10:38Z", "commit": {"oid": "e4e8958c3f466f227a52d200ac5333f970d20292"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5OTA2OTk2", "url": "https://github.com/palantir/gradle-baseline/pull/1412#pullrequestreview-429906996", "createdAt": "2020-06-12T17:10:38Z", "commit": {"oid": "be7f74c93b5f5bdd4d5787f5f08b2245b00b8d9b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzoxMDozOFrOGjLlHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxNzoxMDozOFrOGjLlHQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTU0MzA2OQ==", "bodyText": "What a nifty annotation!", "url": "https://github.com/palantir/gradle-baseline/pull/1412#discussion_r439543069", "createdAt": "2020-06-12T17:10:38Z", "author": {"login": "ferozco"}, "path": "baseline-error-prone/src/test/java/com/palantir/baseline/errorprone/StrictUnusedVariableTest.java", "diffHunk": "@@ -295,6 +298,22 @@ public void fixes_previously_suppressed_variables() {\n                 .doTest(TestMode.TEXT_MATCH);\n     }\n \n+    @Test\n+    @DisabledForJreRange(max = JRE.JAVA_13)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "be7f74c93b5f5bdd4d5787f5f08b2245b00b8d9b"}, "originalPosition": 19}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2046, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}