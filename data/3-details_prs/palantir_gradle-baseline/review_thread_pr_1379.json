{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI2ODEzODQ0", "number": 1379, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTowNzo1OFrOEB666A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODowNzoxM1rOECQ-jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDQ5Mzg0OnYy", "diffSide": "RIGHT", "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsError.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTowNzo1OFrOGeEA1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTowNzo1OFrOGeEA1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE3NjIxNA==", "bodyText": "I'm not sure we want to suggest a replacement for classes that extend specific error implementations, just those which extend Error. We could fail without a suggested fix in the case of specific error types.", "url": "https://github.com/palantir/gradle-baseline/pull/1379#discussion_r434176214", "createdAt": "2020-06-02T21:07:58Z", "author": {"login": "carterkozak"}, "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsError.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.baseline.errorprone;\n+\n+import com.google.auto.service.AutoService;\n+import com.google.errorprone.BugPattern;\n+import com.google.errorprone.VisitorState;\n+import com.google.errorprone.bugpatterns.BugChecker;\n+import com.google.errorprone.fixes.SuggestedFix;\n+import com.google.errorprone.fixes.SuggestedFixes;\n+import com.google.errorprone.matchers.Description;\n+import com.google.errorprone.matchers.Matcher;\n+import com.google.errorprone.matchers.Matchers;\n+import com.google.errorprone.suppliers.Suppliers;\n+import com.sun.source.tree.ClassTree;\n+import com.sun.source.tree.Tree;\n+import com.sun.tools.javac.code.Type;\n+\n+@AutoService(BugChecker.class)\n+@BugPattern(\n+        name = \"ExtendsError\",\n+        link = \"https://github.com/palantir/gradle-baseline#baseline-error-prone-checks\",\n+        linkType = BugPattern.LinkType.CUSTOM,\n+        providesFix = BugPattern.ProvidesFix.REQUIRES_HUMAN_ATTENTION,\n+        severity = BugPattern.SeverityLevel.ERROR,\n+        summary = \"Class should not extend java.lang.Error. While allowed by java it can lead to surprising behaviour\"\n+                + \" if users end up catching Error.\")\n+public final class ExtendsError extends BugChecker implements BugChecker.ClassTreeMatcher {\n+    private static final Matcher<ClassTree> ERROR_MATCHER = Matchers.isSubtypeOf(Error.class);\n+\n+    @Override\n+    public Description matchClass(ClassTree tree, VisitorState state) {\n+        if (tree.getKind() != Tree.Kind.CLASS) {\n+            // Don't apply to out interfaces and enums\n+            return Description.NO_MATCH;\n+        }\n+\n+        if (!ERROR_MATCHER.matches(tree, state)) {\n+            return Description.NO_MATCH;\n+        }\n+\n+        return buildDescription(tree).addFix(buildFix(tree, state)).build();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c0b21629fba43364dfc3496d9b6ec49e159c757"}, "originalPosition": 56}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwNDQ5NDU3OnYy", "diffSide": "RIGHT", "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsError.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTowODoxMlrOGeEBRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQyMTo0ODoxNVrOGeFIfQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE3NjMyNg==", "bodyText": "What if I extend Throwable?", "url": "https://github.com/palantir/gradle-baseline/pull/1379#discussion_r434176326", "createdAt": "2020-06-02T21:08:12Z", "author": {"login": "carterkozak"}, "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsError.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.baseline.errorprone;\n+\n+import com.google.auto.service.AutoService;\n+import com.google.errorprone.BugPattern;\n+import com.google.errorprone.VisitorState;\n+import com.google.errorprone.bugpatterns.BugChecker;\n+import com.google.errorprone.fixes.SuggestedFix;\n+import com.google.errorprone.fixes.SuggestedFixes;\n+import com.google.errorprone.matchers.Description;\n+import com.google.errorprone.matchers.Matcher;\n+import com.google.errorprone.matchers.Matchers;\n+import com.google.errorprone.suppliers.Suppliers;\n+import com.sun.source.tree.ClassTree;\n+import com.sun.source.tree.Tree;\n+import com.sun.tools.javac.code.Type;\n+\n+@AutoService(BugChecker.class)\n+@BugPattern(\n+        name = \"ExtendsError\",\n+        link = \"https://github.com/palantir/gradle-baseline#baseline-error-prone-checks\",\n+        linkType = BugPattern.LinkType.CUSTOM,\n+        providesFix = BugPattern.ProvidesFix.REQUIRES_HUMAN_ATTENTION,\n+        severity = BugPattern.SeverityLevel.ERROR,\n+        summary = \"Class should not extend java.lang.Error. While allowed by java it can lead to surprising behaviour\"\n+                + \" if users end up catching Error.\")\n+public final class ExtendsError extends BugChecker implements BugChecker.ClassTreeMatcher {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9c0b21629fba43364dfc3496d9b6ec49e159c757"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE5NDU1Nw==", "bodyText": "I think we should also forbid that, I would be surprised if java allowed that", "url": "https://github.com/palantir/gradle-baseline/pull/1379#discussion_r434194557", "createdAt": "2020-06-02T21:48:15Z", "author": {"login": "robert3005"}, "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsError.java", "diffHunk": "@@ -0,0 +1,64 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.baseline.errorprone;\n+\n+import com.google.auto.service.AutoService;\n+import com.google.errorprone.BugPattern;\n+import com.google.errorprone.VisitorState;\n+import com.google.errorprone.bugpatterns.BugChecker;\n+import com.google.errorprone.fixes.SuggestedFix;\n+import com.google.errorprone.fixes.SuggestedFixes;\n+import com.google.errorprone.matchers.Description;\n+import com.google.errorprone.matchers.Matcher;\n+import com.google.errorprone.matchers.Matchers;\n+import com.google.errorprone.suppliers.Suppliers;\n+import com.sun.source.tree.ClassTree;\n+import com.sun.source.tree.Tree;\n+import com.sun.tools.javac.code.Type;\n+\n+@AutoService(BugChecker.class)\n+@BugPattern(\n+        name = \"ExtendsError\",\n+        link = \"https://github.com/palantir/gradle-baseline#baseline-error-prone-checks\",\n+        linkType = BugPattern.LinkType.CUSTOM,\n+        providesFix = BugPattern.ProvidesFix.REQUIRES_HUMAN_ATTENTION,\n+        severity = BugPattern.SeverityLevel.ERROR,\n+        summary = \"Class should not extend java.lang.Error. While allowed by java it can lead to surprising behaviour\"\n+                + \" if users end up catching Error.\")\n+public final class ExtendsError extends BugChecker implements BugChecker.ClassTreeMatcher {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDE3NjMyNg=="}, "originalCommit": {"oid": "9c0b21629fba43364dfc3496d9b6ec49e159c757"}, "originalPosition": 42}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjcwODEwNzY0OnYy", "diffSide": "RIGHT", "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsErrorOrThrowable.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODowNzoxM1rOGenifA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wM1QxODowNzoxM1rOGenifA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzNDc1ODI2OA==", "bodyText": "I think you have to add this to the list that gets applied by default in the errorprone plugin", "url": "https://github.com/palantir/gradle-baseline/pull/1379#discussion_r434758268", "createdAt": "2020-06-03T18:07:13Z", "author": {"login": "ferozco"}, "path": "baseline-error-prone/src/main/java/com/palantir/baseline/errorprone/ExtendsErrorOrThrowable.java", "diffHunk": "@@ -0,0 +1,73 @@\n+/*\n+ * (c) Copyright 2020 Palantir Technologies Inc. All rights reserved.\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+\n+package com.palantir.baseline.errorprone;\n+\n+import com.google.auto.service.AutoService;\n+import com.google.errorprone.BugPattern;\n+import com.google.errorprone.VisitorState;\n+import com.google.errorprone.bugpatterns.BugChecker;\n+import com.google.errorprone.fixes.SuggestedFix;\n+import com.google.errorprone.fixes.SuggestedFixes;\n+import com.google.errorprone.matchers.Description;\n+import com.google.errorprone.matchers.Matcher;\n+import com.google.errorprone.matchers.Matchers;\n+import com.google.errorprone.suppliers.Suppliers;\n+import com.sun.source.tree.ClassTree;\n+import com.sun.source.tree.Tree;\n+import com.sun.tools.javac.code.Type;\n+import java.util.Optional;\n+\n+@AutoService(BugChecker.class)\n+@BugPattern(\n+        name = \"ExtendsErrorOrThrowable\",\n+        link = \"https://github.com/palantir/gradle-baseline#baseline-error-prone-checks\",\n+        linkType = BugPattern.LinkType.CUSTOM,\n+        providesFix = BugPattern.ProvidesFix.REQUIRES_HUMAN_ATTENTION,\n+        severity = BugPattern.SeverityLevel.ERROR,\n+        summary = \"Class should not extend Error or Throwable directly. While allowed by java \"\n+                + \"it can lead to surprising behaviour if users end up catching Error or Throwable.\")\n+public final class ExtendsErrorOrThrowable extends BugChecker implements BugChecker.ClassTreeMatcher {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2c130fd7b80e517481808b8d4d530cc8a0bac4c6"}, "originalPosition": 43}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2245, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}