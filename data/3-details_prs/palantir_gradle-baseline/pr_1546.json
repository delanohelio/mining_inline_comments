{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxNzkzODAx", "number": 1546, "title": "checkstyle 8.36 -> 8.37 (and keep it up to date using excavator)", "bodyText": "Before this PR\n@fawind is putting in a bunch of work to allow people to use some more 'cutting edge' java syntax (e.g. records).  Checkstyle seems to be landing a lot of bugfixes related to these new features at the moment, e.g.\nhttps://checkstyle.sourceforge.io/releasenotes.html\nCurrently, as the checkstyle version is read out of a private static field, it has to be manually updated. This means we're probably going to miss bugfixes until someone complains about them.\nAfter this PR\n==COMMIT_MSG==\ncheckstyle 8.36 -> 8.37, to benefit from some bugfixes to do with new java language features (e.g. records)\n==COMMIT_MSG==\nPossible downsides?\n\nwe don't read the changelog every time a new rule is introduced, so we might accidentally roll out some new strictness before validating it.  I think we can just eat this risk and disable/customize the rule if we get feedback.", "createdAt": "2020-11-16T16:54:25Z", "url": "https://github.com/palantir/gradle-baseline/pull/1546", "merged": true, "mergeCommit": {"oid": "bbbaf43b2fc32269b67b8b9898f1c26ecf6d7244"}, "closed": true, "closedAt": "2020-11-17T08:30:02Z", "author": {"login": "iamdanfox"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddH2jvAH2gAyNTIxNzkzODAxOjZjYzhmYmUwOTZjYmNkOGViY2Q4NzA1MmNkNWVlZGFiOGNjMDA0ZDY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddVTI4gFqTUzMjEyMzU4OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6cc8fbe096cbcd8ebcd87052cd5eedab8cc004d6", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/6cc8fbe096cbcd8ebcd87052cd5eedab8cc004d6", "committedDate": "2020-11-16T16:49:58Z", "message": "Excavator should keep checkstyle up to date"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5ce44d5db0c936d65c626ee5da284c8ed1f55623", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/5ce44d5db0c936d65c626ee5da284c8ed1f55623", "committedDate": "2020-11-16T16:50:24Z", "message": "Update to 8.37, --write-locks"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b82435f1eb2acbd62c3c97b90ea00267e6b88c22", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/b82435f1eb2acbd62c3c97b90ea00267e6b88c22", "committedDate": "2020-11-16T16:50:24Z", "message": "Add generated changelog entries"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxNTE5ODI1", "url": "https://github.com/palantir/gradle-baseline/pull/1546#pullrequestreview-531519825", "createdAt": "2020-11-16T17:00:09Z", "commit": {"oid": "b82435f1eb2acbd62c3c97b90ea00267e6b88c22"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNzowMDowOVrOH0IRjg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNzowMDowOVrOH0IRjg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDQyMzU2Ng==", "bodyText": "an alternative approach here is to generate the resource just-in-time as a dependency of the ./gradlew idea task... no super strong opinions, i just kinda like that this one is reasonably bulletproof", "url": "https://github.com/palantir/gradle-baseline/pull/1546#discussion_r524423566", "createdAt": "2020-11-16T17:00:09Z", "author": {"login": "iamdanfox"}, "path": "gradle-baseline-java/build.gradle", "diffHunk": "@@ -131,3 +131,21 @@ project.ext.'gradle.publish.secret' = System.env[\"GRADLE_SECRET\"]\n tasks.withType(Test) {\n     systemProperty 'recreate', System.getProperty('recreate', 'false')\n }\n+\n+configurations {\n+    checkstyleVersion\n+}\n+\n+dependencies {\n+    checkstyleVersion 'com.puppycrawl.tools:checkstyle'\n+}\n+\n+task writeCheckstyleVersion() {\n+    doLast {\n+        file('src/main/resources/checkstyle.version').text = getVersion('com.puppycrawl.tools', 'checkstyle', configurations.checkstyleVersion)\n+    }\n+}\n+\n+if (gradle.startParameter.isWriteDependencyLocks()) {\n+    gradle.startParameter.taskNames += 'writeCheckstyleVersion'\n+}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b82435f1eb2acbd62c3c97b90ea00267e6b88c22"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a8a59c916e8b38a2c00cb24278424ad8ecabf8b1", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/a8a59c916e8b38a2c00cb24278424ad8ecabf8b1", "committedDate": "2020-11-16T18:00:18Z", "message": "how do java resources work"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3ecbab3c961a9e8ea29188db9b47426885929b9f", "author": {"user": {"login": "iamdanfox", "name": null}}, "url": "https://github.com/palantir/gradle-baseline/commit/3ecbab3c961a9e8ea29188db9b47426885929b9f", "committedDate": "2020-11-16T19:07:49Z", "message": "slash prefix"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyMTIzNTg5", "url": "https://github.com/palantir/gradle-baseline/pull/1546#pullrequestreview-532123589", "createdAt": "2020-11-17T08:29:57Z", "commit": {"oid": "3ecbab3c961a9e8ea29188db9b47426885929b9f"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1994, "cost": 1, "resetAt": "2021-11-01T16:19:10Z"}}}