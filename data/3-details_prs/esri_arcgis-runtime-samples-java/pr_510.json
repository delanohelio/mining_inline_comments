{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNTQ0OTQx", "number": 510, "title": "Multiple samples - Add done loading listeners to avoid silent failure", "bodyText": "We've recently had a lot of customers pointing out troubles with loadables, which is why we need to highlight this pattern a bit more. I'm also going to piggyback the issue regarding garbage collection and make some of the changes here where I've already had the sample open.\n\n\nMade some of the loadables class members, to avoid garbage collection\n\n\nAdded checks for LoadStatus.LOADED, either showing a message if failed to load, or enabling the rest of the sample's logic.\nNote that we're triggering the layer's loading process by adding it to the map outside of the doneLoadingListener, and just using the latter for error reporting or enabling functionality. The alternative would have been to add the layers to the map inside the listener, and start the loading with loadAsync(). However that can be a bit confusing and shouldn't be the pattern we promote.\n\n\nin a couple of samples I've removed service URL class members, and just put the URLs in-line when the appropriate table/layer is created\n\n\ncc @mbcoder", "createdAt": "2020-05-05T14:16:44Z", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510", "merged": true, "mergeCommit": {"oid": "cc5e0153996c1b9be255245720486646fbec7451"}, "closed": true, "closedAt": "2020-05-25T09:49:53Z", "author": {"login": "JonLavi"}, "timelineItems": {"totalCount": 35, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABceUfd-gH2gAyNDEzNTQ0OTQxOjU2YjE4OWZhNThjMTRmZmNmOTk0N2RkZjdhMTJiMmY2NjZjOGM4YzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcks3BwgH2gAyNDEzNTQ0OTQxOmMxYzNmNzNlZjU3MTliZTI5MmU5MWUxZjdjOTdkNjQyNDFmYjBjOWI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "56b189fa58c14ffcf9947ddf7a12b2f666c8c8c0", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/56b189fa58c14ffcf9947ddf7a12b2f666c8c8c0", "committedDate": "2020-05-05T13:56:17Z", "message": "add done loading listeners to avoid silent failure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/ee470aa80e50776fd9f3b1e556d0a90fac71bf57", "committedDate": "2020-05-06T08:47:48Z", "message": "update comments and remove .loadAsync()"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA5ODYyNTk5", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#pullrequestreview-409862599", "createdAt": "2020-05-12T09:27:59Z", "commit": {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQwOToyNzo1OVrOGT-HQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xMlQxMTowNjozMFrOGUBfIw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzU5Mzc5Mw==", "bodyText": "just a heads up from https://github.com/Esri/arcgis-runtime-samples-java/pull/511/files which is still to be approved: when putting loadables as member variables to protect against garbage collection, I was adding the following comment to make it clear why we did this. This comment may or may not be agreed on but wanted to doc it here if it's approved so we can add the same comment here for the loadables.\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                private FeatureLayer riverFeatureLayer;\n          \n          \n            \n            // keeps loadables in scope to avoid garbage collection\n          \n          \n            \n                private FeatureLayer riverFeatureLayer;", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423593793", "createdAt": "2020-05-12T09:27:59Z", "author": {"login": "Rachael-E"}, "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -18,19 +18,23 @@\n \n import javafx.application.Application;\n import javafx.scene.Scene;\n+import javafx.scene.control.Alert;\n import javafx.scene.layout.StackPane;\n import javafx.stage.Stage;\n \n import com.esri.arcgisruntime.data.ServiceFeatureTable;\n import com.esri.arcgisruntime.layers.AnnotationLayer;\n import com.esri.arcgisruntime.layers.FeatureLayer;\n+import com.esri.arcgisruntime.loadable.LoadStatus;\n import com.esri.arcgisruntime.mapping.ArcGISMap;\n import com.esri.arcgisruntime.mapping.Basemap;\n import com.esri.arcgisruntime.mapping.view.MapView;\n \n public class DisplayAnnotationSample extends Application {\n \n     private MapView mapView;\n+    private FeatureLayer riverFeatureLayer;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0MDI5MQ==", "bodyText": "I'm thinking a slight rewording of the comments here and throughout the PR, what do you think?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // check that the feature layer has loaded\n          \n          \n            \n                        // this event gets triggered asynchronously when the feature layer that has been added to the map is loaded\n          \n          \n            \n                        // check that the feature layer has loaded by adding a done loading listener (triggered asynchronously)\n          \n          \n            \n                        // check for the load status of the layer and if it hasn't loaded, report an error", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423640291", "createdAt": "2020-05-12T10:49:32Z", "author": {"login": "Rachael-E"}, "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -54,19 +58,35 @@ public void start(Stage stage) {\n             mapView.setMap(map);\n \n             // create a feature layer from a feature service\n-            FeatureLayer riverFeatureLayer = new FeatureLayer(new ServiceFeatureTable(\"https://services1.arcgis.com/6677msI40mnLuuLr/arcgis/rest/services/East_Lothian_Rivers/FeatureServer/0\"));\n+            riverFeatureLayer = new FeatureLayer(new ServiceFeatureTable(\"https://services1.arcgis.com/6677msI40mnLuuLr/arcgis/rest/services/East_Lothian_Rivers/FeatureServer/0\"));\n \n             // add the feature layer to the map\n             map.getOperationalLayers().add(riverFeatureLayer);\n \n             // create an annotation layer from a feature service\n-            AnnotationLayer annotationLayer = new AnnotationLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/RiversAnnotation/FeatureServer/0\");\n+            annotationLayer = new AnnotationLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/RiversAnnotation/FeatureServer/0\");\n \n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // check that the feature layer has loaded\n+            // this event gets triggered asynchronously when the feature layer that has been added to the map is loaded", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMzY0OTA1OQ==", "bodyText": "we can \"plain english\" this comment a little more\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a ArcGISMap with the a BasemapType Topographic and set it to the map view\n          \n          \n            \n                  // create an ArcGISMap with the topographic basemap and set it to the map view", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r423649059", "createdAt": "2020-05-12T11:06:30Z", "author": {"login": "Rachael-E"}, "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +74,38 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create a ArcGISMap with the a BasemapType Topographic and set it to the map view", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ee470aa80e50776fd9f3b1e556d0a90fac71bf57"}, "originalPosition": 45}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f2e1d22ebe29fb421af74e2d8875e517cb46656f", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/f2e1d22ebe29fb421af74e2d8875e517cb46656f", "committedDate": "2020-05-13T09:26:43Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Rachael Ellen <36415565+Rachael-E@users.noreply.github.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb8fe808bf5c85267dd6f28f2dfb4c92bfaeb93d", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/bb8fe808bf5c85267dd6f28f2dfb4c92bfaeb93d", "committedDate": "2020-05-13T09:31:36Z", "message": "Update ShowLabelsOnLayerSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7b124c9122bb44f5e78e67e12f2c8b47f6b211b1", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/7b124c9122bb44f5e78e67e12f2c8b47f6b211b1", "committedDate": "2020-05-13T09:33:20Z", "message": "Update EditFeatureAttachmentsSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "169b0574549c526eca094f671a2b11cdf1f1f2bd", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/169b0574549c526eca094f671a2b11cdf1f1f2bd", "committedDate": "2020-05-13T09:35:29Z", "message": "Update UpdateAttributesSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0e02cad59a8a9de645216c492514bcf672a9d086", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0e02cad59a8a9de645216c492514bcf672a9d086", "committedDate": "2020-05-13T09:36:30Z", "message": "Update UpdateAttributesSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a099f765ecf1813820c2447f07aea01f7b13d800", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a099f765ecf1813820c2447f07aea01f7b13d800", "committedDate": "2020-05-13T09:36:53Z", "message": "Update BufferListSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ede32eb6b6796b5762190c1ecbc1a3e222ad3c9", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6ede32eb6b6796b5762190c1ecbc1a3e222ad3c9", "committedDate": "2020-05-13T09:37:44Z", "message": "Update MapImageLayerSublayerVisibilitySample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fcfb59515b093cfdb7fa59eb80d40989b55a1c9", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/5fcfb59515b093cfdb7fa59eb80d40989b55a1c9", "committedDate": "2020-05-13T09:51:15Z", "message": "operational layers to local vars"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDExNjMxMjcx", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#pullrequestreview-411631271", "createdAt": "2020-05-14T09:35:26Z", "commit": {"oid": "5fcfb59515b093cfdb7fa59eb80d40989b55a1c9"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTozNToyNlrOGVUGQw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xNFQwOTozNToyNlrOGVUGQw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNTAwMjU2Mw==", "bodyText": "with your comment from my garbage collection PR in mind, should we change this to selectedFeature?", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r425002563", "createdAt": "2020-05-14T09:35:26Z", "author": {"login": "Rachael-E"}, "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -53,11 +53,10 @@\n \n public class UpdateAttributesSample extends Application {\n \n+  private ArcGISFeature selected;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5fcfb59515b093cfdb7fa59eb80d40989b55a1c9"}, "originalPosition": 4}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "32f2b8f651879dc04699169c52ad7a4f2a0889f0", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/32f2b8f651879dc04699169c52ad7a4f2a0889f0", "committedDate": "2020-05-15T08:40:03Z", "message": "Apply suggestions from code review"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a6a91af049e785186586774fa92f1e18b6175642", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a6a91af049e785186586774fa92f1e18b6175642", "committedDate": "2020-05-15T08:43:05Z", "message": "update var naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "029577cdca65d9a83399b9e0620b2bda9449e307", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/029577cdca65d9a83399b9e0620b2bda9449e307", "committedDate": "2020-05-15T08:53:51Z", "message": "Update DisplayAnnotationSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8a36421f40220c06cea04a765df14c422853e2c9", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8a36421f40220c06cea04a765df14c422853e2c9", "committedDate": "2020-05-15T08:54:35Z", "message": "Update ShowLabelsOnLayerSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "069b76a755bc71c048fffd12f62dbdbd270952e2", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/069b76a755bc71c048fffd12f62dbdbd270952e2", "committedDate": "2020-05-15T08:55:20Z", "message": "Update EditFeatureAttachmentsSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6a61d638cf2cb9aa73e7af8f4d57db46b7c68685", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6a61d638cf2cb9aa73e7af8f4d57db46b7c68685", "committedDate": "2020-05-15T08:55:53Z", "message": "Update UpdateAttributesSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3bcccdc39a418cebbb20bf6f816973c9c6204c6f", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3bcccdc39a418cebbb20bf6f816973c9c6204c6f", "committedDate": "2020-05-15T08:56:27Z", "message": "Update BufferListSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2f8c12dda1efae2e1b452eca99143b42fbdfeeaf", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/2f8c12dda1efae2e1b452eca99143b42fbdfeeaf", "committedDate": "2020-05-15T08:57:31Z", "message": "Update MapImageLayerSublayerVisibilitySample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b11f3632705b495b4308b93d93342761eb4d5c27", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/b11f3632705b495b4308b93d93342761eb4d5c27", "committedDate": "2020-05-15T08:58:50Z", "message": "Update RasterRenderingRuleSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3c7d377ecb4a9b51e95b1959104792195208b533", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3c7d377ecb4a9b51e95b1959104792195208b533", "committedDate": "2020-05-15T10:01:25Z", "message": "member variables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/3e363f4f9c734cb7a30963f13a67dfe744e8bc10", "committedDate": "2020-05-15T10:01:38Z", "message": "Merge branch 'done_loading_listeners' of github.com:Esri/arcgis-runtime-samples-java into done_loading_listeners"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDEzMjY3NTgw", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#pullrequestreview-413267580", "createdAt": "2020-05-18T04:42:39Z", "commit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "state": "APPROVED", "comments": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNDo0MjozOVrOGWnWVA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0xOFQwNDo1MTozMVrOGWnefQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NjU0OA==", "bodyText": "too verbose\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n          \n          \n            \n                        // check for the load status of the layer and if it hasn't loaded, report an error\n          \n          \n            \n                        // show alert if layer fails to load", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366548", "createdAt": "2020-05-18T04:42:39Z", "author": {"login": "tschie"}, "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2Njg2OA==", "bodyText": "This is okay, but seems a little overkill for a simple sample. We've had discussions before about omitting some best practices for the sake of brevity/focus. Should get approval from Lucas/Mike before making more of these changes.", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366868", "createdAt": "2020-05-18T04:44:07Z", "author": {"login": "tschie"}, "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            riverFeatureLayer.addDoneLoadingListener(() -> {\n+                if (riverFeatureLayer.getLoadStatus() != LoadStatus.LOADED) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NjkzMA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                        annotationLayer.addDoneLoadingListener(()->{\n          \n          \n            \n                        annotationLayer.addDoneLoadingListener(() -> {", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426366930", "createdAt": "2020-05-18T04:44:25Z", "author": {"login": "tschie"}, "path": "display_information/display-annotation/src/main/java/com/esri/samples/display_annotation/DisplayAnnotationSample.java", "diffHunk": "@@ -65,8 +67,25 @@ public void start(Stage stage) {\n             // add the annotation layer to the map\n             map.getOperationalLayers().add(annotationLayer);\n \n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            riverFeatureLayer.addDoneLoadingListener(() -> {\n+                if (riverFeatureLayer.getLoadStatus() != LoadStatus.LOADED) {\n+                    new Alert(Alert.AlertType.ERROR, \"Error loading Feature Layer.\").show();\n+                }\n+            });\n+\n+            // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+            // check for the load status of the layer and if it hasn't loaded, report an error\n+            annotationLayer.addDoneLoadingListener(()->{", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzcwMQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a feature layer from service feature table\n          \n          \n            \n                  // create a feature layer with the feature table", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367701", "createdAt": "2020-05-18T04:47:22Z", "author": {"login": "tschie"}, "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 52}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzczOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // add the feature layer to the ArcGISMap\n          \n          \n            \n                  // add the feature layer to the map", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367739", "createdAt": "2020-05-18T04:47:34Z", "author": {"login": "tschie"}, "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table\n+      FeatureLayer featureLayer = new FeatureLayer(featureTable);\n \n-      // add the layer to the ArcGISMap\n+      // add the feature layer to the ArcGISMap", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 56}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2NzgwMQ==", "bodyText": "too verbose", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426367801", "createdAt": "2020-05-18T04:47:44Z", "author": {"login": "tschie"}, "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -118,21 +114,30 @@ public void start(Stage stage) {\n       // add damage type label and comboBox to the control panel\n       controlsVBox.getChildren().addAll(typeDamageLabel, comboBox);\n \n-      // create a map with streets basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n-\n-      // create view for this ArcGISMap\n+      // create a map view\n       mapView = new MapView();\n \n+      // create a map with streets basemap and set it to the map view\n+      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 40, -95, 4);\n+      mapView.setMap(map);\n+\n       // create service feature table from URL\n-      featureTable = new ServiceFeatureTable(FEATURE_LAYER_URL);\n+      featureTable = new ServiceFeatureTable(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/DamageAssessment/FeatureServer/0\");\n \n-      // create a feature layer from table\n-      featureLayer = new FeatureLayer(featureTable);\n+      // create a feature layer from service feature table\n+      FeatureLayer featureLayer = new FeatureLayer(featureTable);\n \n-      // add the layer to the ArcGISMap\n+      // add the feature layer to the ArcGISMap\n       map.getOperationalLayers().add(featureLayer);\n \n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODAwMA==", "bodyText": "Perhaps identifiedFeature would be a better name? Looks odd to select the selected feature.", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368000", "createdAt": "2020-05-18T04:48:43Z", "author": {"login": "tschie"}, "path": "editing/update-attributes/src/main/java/com/esri/samples/update_attributes/UpdateAttributesSample.java", "diffHunk": "@@ -153,12 +158,12 @@ public void start(Stage stage) {\n                 GeoElement element = identified.get(0);\n                 // get selected feature\n                 if (element instanceof ArcGISFeature) {\n-                  selected = (ArcGISFeature) element;\n-                  featureLayer.selectFeature(selected);\n-                  selected.loadAsync();\n-                  selected.addDoneLoadingListener(() -> {\n-                    if (selected.getLoadStatus() == LoadStatus.LOADED) {\n-                      comboBox.getSelectionModel().select((String) selected.getAttributes().get(\"typdamage\"));\n+                  selectedFeature = (ArcGISFeature) element;\n+                  featureLayer.selectFeature(selectedFeature);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 81}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODI4NA==", "bodyText": "I realize there wasn't a comment before, but we should really have one for why we changed the opacity", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368284", "createdAt": "2020-05-18T04:50:00Z", "author": {"login": "tschie"}, "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +73,39 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create an ArcGISMap with the topographic basemap and set it to the map view\n       ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      mapView.setMap(map);\n \n       // create a Image Layer with dynamically generated ArcGISMap images\n-      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(WORLD_CITIES_SERVICE);\n-      imageLayer.setOpacity(0.7f);\n+      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/SampleWorldCities/MapServer\");\n \n       // add world cities layers as ArcGISMap operational layer\n       map.getOperationalLayers().add(imageLayer);\n \n-      // set the ArcGISMap to be displayed in this view\n-      mapView = new MapView();\n-      mapView.setMap(map);\n+      // set the image layer's opacity", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODU1NQ==", "bodyText": "if only we had a visible property to bind to.... @mbcoder \ud83d\ude1c", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368555", "createdAt": "2020-05-18T04:51:08Z", "author": {"login": "tschie"}, "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -75,27 +73,39 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a ArcGISMap with the a BasemapType Topographic\n+      // create a map view\n+      mapView = new MapView();\n+\n+      // create an ArcGISMap with the topographic basemap and set it to the map view\n       ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      mapView.setMap(map);\n \n       // create a Image Layer with dynamically generated ArcGISMap images\n-      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(WORLD_CITIES_SERVICE);\n-      imageLayer.setOpacity(0.7f);\n+      ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/SampleWorldCities/MapServer\");\n \n       // add world cities layers as ArcGISMap operational layer\n       map.getOperationalLayers().add(imageLayer);\n \n-      // set the ArcGISMap to be displayed in this view\n-      mapView = new MapView();\n-      mapView.setMap(map);\n+      // set the image layer's opacity\n+      imageLayer.setOpacity(0.7f);\n+\n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded\n+      // check for the load status of the layer and proceed to get its sublayers. If it hasn't loaded, report an error\n+      imageLayer.addDoneLoadingListener(() -> {\n+        if (imageLayer.getLoadStatus() == LoadStatus.LOADED) {\n+\n+          // get the layers from the ArcGISMap image layer\n+          SublayerList layers = imageLayer.getSublayers();\n \n-      // get the layers from the ArcGISMap image layer\n-      SublayerList layers = imageLayer.getSublayers();\n+          // handle sub layer selection\n+          citiesBox.selectedProperty().addListener(e -> layers.get(0).setVisible(citiesBox.isSelected()));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 73}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyNjM2ODYzNw==", "bodyText": "too verbose", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/510#discussion_r426368637", "createdAt": "2020-05-18T04:51:31Z", "author": {"login": "tschie"}, "path": "raster/raster-rendering-rule/src/main/java/com/esri/samples/raster_rendering_rule/RasterRenderingRuleSample.java", "diffHunk": "@@ -107,11 +107,12 @@ public RenderingRuleInfo fromString(String string) {\n \n       // create an Image Service Raster as a raster layer and add to map\n       final String ImageServiceRasterUri = \"https://sampleserver6.arcgisonline.com/arcgis/rest/services/CharlotteLAS/ImageServer\";\n-      final ImageServiceRaster imageServiceRaster = new ImageServiceRaster(ImageServiceRasterUri);\n-      final RasterLayer imageRasterLayer = new RasterLayer(imageServiceRaster);\n+      ImageServiceRaster imageServiceRaster = new ImageServiceRaster(ImageServiceRasterUri);\n+      RasterLayer imageRasterLayer = new RasterLayer(imageServiceRaster);\n       map.getOperationalLayers().add(imageRasterLayer);\n \n-      // add event listener to loading of Image Service Raster and wait until loaded\n+      // add a done loading listener, with a runnable that gets triggered asynchronously when the feature layer has loaded", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e363f4f9c734cb7a30963f13a67dfe744e8bc10"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "866ccb31d9f5741d12ed802f12577f3e6546b461", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/866ccb31d9f5741d12ed802f12577f3e6546b461", "committedDate": "2020-05-25T09:32:42Z", "message": "Update ShowLabelsOnLayerSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a76e21d7b25dc1eb74b95196ce50682de061cf70", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a76e21d7b25dc1eb74b95196ce50682de061cf70", "committedDate": "2020-05-25T09:33:17Z", "message": "Update EditFeatureAttachmentsSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a37d89d8fbf4fc6b3e81bdc07dfc6959be9d5d78", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/a37d89d8fbf4fc6b3e81bdc07dfc6959be9d5d78", "committedDate": "2020-05-25T09:34:03Z", "message": "Update RasterRenderingRuleSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e60f26f617885bb57101d5b873711bf4792b9984", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e60f26f617885bb57101d5b873711bf4792b9984", "committedDate": "2020-05-25T09:34:52Z", "message": "Update MapImageLayerSublayerVisibilitySample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "55892140dcfd2ad4fd446cc67e3092d244ba43ca", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/55892140dcfd2ad4fd446cc67e3092d244ba43ca", "committedDate": "2020-05-25T09:35:31Z", "message": "Update BufferListSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8e1b890adbf2a460858dc7921a96eeaea746cf4d", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8e1b890adbf2a460858dc7921a96eeaea746cf4d", "committedDate": "2020-05-25T09:36:12Z", "message": "Update UpdateAttributesSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1e3c9e224dc4cf6ac5e367d52f6402a78d207ec", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e1e3c9e224dc4cf6ac5e367d52f6402a78d207ec", "committedDate": "2020-05-25T09:37:11Z", "message": "Apply suggestions from code review\n\nCo-authored-by: Tyler Schiewe <tyler.schiewe@gmail.com>"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "db58e0459bd18e77130ccbb3e6d4ff07526f7ab3", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/db58e0459bd18e77130ccbb3e6d4ff07526f7ab3", "committedDate": "2020-05-25T09:38:38Z", "message": "var naming"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0011f27564f2c302a35b60a557a0fb86526edc0a", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0011f27564f2c302a35b60a557a0fb86526edc0a", "committedDate": "2020-05-25T09:39:18Z", "message": "Merge branch 'done_loading_listeners' of github.com:Esri/arcgis-runtime-samples-java into done_loading_listeners"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cd9c1248e3d7363884580d451f558951b18d4002", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/cd9c1248e3d7363884580d451f558951b18d4002", "committedDate": "2020-05-25T09:41:22Z", "message": "comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c1c3f73ef5719be292e91e1f7c97d64241fb0c9b", "author": {"user": {"login": "JonLavi", "name": "Jonathan Lavi"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/c1c3f73ef5719be292e91e1f7c97d64241fb0c9b", "committedDate": "2020-05-25T09:43:17Z", "message": "Merge remote-tracking branch 'origin/master' into done_loading_listeners"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3386, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}