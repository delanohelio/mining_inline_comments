{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMzNTU2NjA3", "number": 608, "title": "New Basemaps: Portal and Raster Categories", "bodyText": "Description\nThis PR is for the following sample categories:\n\nPortal\nRaster\n\nNotes specific to this PR:\n\nIdentify Raster Cell: indentation was tidied up\n\nGeneral comments on Basemap updates:\nIt updates Map and/or Basemap Constructors as per the new design. This may include the following changes depending on the sample:\n\nReplace Basemap.Type with BasemapStyle\nIf a lat/long/zoom was being set in the Map constructor, this is replaced with a Viewpoint being set on the MapView.\nAny Readme Updates identified\n\nIn addition, the samples that include the above changes, or other services requiring an API Key going forward, have the API Key  set within the sample. This will then work in conjunction with the Gradle Task being added in PR 593.\nOnce 593 is approved and merged into dev we will merge those changes into these PRs and then update all the Samples to 100.10.0-xxxx and do a round of testing of the Samples with all the API Key / Basemap changes at that time. (We have left them as 100.9.0 (in most cases) for now to minimize merge conflicts in the build.gradle file).\nIn the meantime, the updates listed above can be reviewed. Thanks!", "createdAt": "2020-12-07T10:19:05Z", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608", "merged": true, "mergeCommit": {"oid": "e2d5e375f2ae70f5ebb808a958e53973355c1f47"}, "closed": true, "closedAt": "2021-01-20T17:25:06Z", "author": {"login": "jenmerritt"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgo7lnAH2gAyNTMzNTU2NjA3OmM1ZGQxYTVlZGVmNTg1Y2YzZWMzZDk0N2ZmNzM1Njk5YzhiZjAzZTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdk0AsmAH2gAyNTMzNTU2NjA3OjAxZjViNDFlYjBkMDhiNGNiZDAyMDgzOTM0YmI3NjU4MGQ3MmMxODc=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "c5dd1a5edef585cf3ec3d947ff735699c8bf03e9", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/c5dd1a5edef585cf3ec3d947ff735699c8bf03e9", "committedDate": "2020-11-27T15:04:06Z", "message": "Update IntegratedWindowsAuthenticationController.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69b5ccb6630a774fd4dd6786cf7d5cd281affa7e", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/69b5ccb6630a774fd4dd6786cf7d5cd281affa7e", "committedDate": "2020-11-27T15:04:26Z", "message": "Update OAuthSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "320cab0b1072fdc1d7d3ef69eb1e1327efc57376", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/320cab0b1072fdc1d7d3ef69eb1e1327efc57376", "committedDate": "2020-11-27T15:04:31Z", "message": "Update ColormapRendererSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fae71e05f781ac3ba3bd18a19e934abce609394c", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/fae71e05f781ac3ba3bd18a19e934abce609394c", "committedDate": "2020-11-27T15:04:35Z", "message": "Update IdentifyRasterCellSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1d3326785b60dba512981abcaa4af9426590ff2e", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/1d3326785b60dba512981abcaa4af9426590ff2e", "committedDate": "2020-11-27T15:04:39Z", "message": "Update RasterFunctionSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "775bf5e9ddc3a3a64403ee0bcea087887b4dd968", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/775bf5e9ddc3a3a64403ee0bcea087887b4dd968", "committedDate": "2020-11-27T15:04:45Z", "message": "Update RasterLayerFileSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "02103ab67110aec6affde1bacd5971c875611103", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/02103ab67110aec6affde1bacd5971c875611103", "committedDate": "2020-11-27T15:04:49Z", "message": "Update RasterLayerGeopackageSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "15a1ed2bb27307104cb140145a63a7469eccebe3", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/15a1ed2bb27307104cb140145a63a7469eccebe3", "committedDate": "2020-11-27T15:04:52Z", "message": "Update RasterLayerURLSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6880ed476697e784fb9c623ada4d2164c9ec1159", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/6880ed476697e784fb9c623ada4d2164c9ec1159", "committedDate": "2020-11-27T15:04:55Z", "message": "Update RasterRenderingRuleSample.java"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9bb704a74345ebf87b8bd04ab883855004500938", "author": {"user": {"login": "sclaridge", "name": "Simone Claridge"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/9bb704a74345ebf87b8bd04ab883855004500938", "committedDate": "2020-11-30T13:39:46Z", "message": "Fix comment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/317d576bf9ebf06aa1bab53724227396e047b00f", "committedDate": "2020-12-03T16:41:27Z", "message": "Identify Raster Cell - tidy up indentation"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MDk3Mjg2", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#pullrequestreview-547097286", "createdAt": "2020-12-08T11:01:12Z", "commit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "state": "APPROVED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMTowMToxMlrOIBT0jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMTowNDozNlrOIBT9jA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0NDIzOQ==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a map with an imagery basemap style\n          \n          \n            \n                  // create a map with the imagery basemap style", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r538244239", "createdAt": "2020-12-08T11:01:12Z", "author": {"login": "JonLavi"}, "path": "portal/oauth/src/main/java/com/esri/samples/oauth/OAuthSample.java", "diffHunk": "@@ -49,8 +50,12 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with imagery basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.createImagery());\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with an imagery basemap style", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0NTAwOA==", "bodyText": "I realise I'm commenting on these to change to the, but Im not 100% sure it's correct. My rationale is since it's a unique value from an enum, there can't be any other imagery basemap styles, so it's correct to refer to as the style rather than a style?\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a map with an imagery basemap style\n          \n          \n            \n                  // create a map with the imagery basemap style", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r538245008", "createdAt": "2020-12-08T11:02:22Z", "author": {"login": "JonLavi"}, "path": "raster/colormap-renderer/src/main/java/com/esri/samples/colormap_renderer/ColormapRendererSample.java", "diffHunk": "@@ -54,14 +55,18 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n       // create a raster from a local raster file\n       Raster raster = new Raster(new File(System.getProperty(\"data.dir\"), \"./samples-data/raster/ShastaBW.tif\").getAbsolutePath());\n \n       // create a raster layer\n       RasterLayer rasterLayer = new RasterLayer(raster);\n \n-      // create a Map with imagery basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.createImagery());\n+      // create a map with an imagery basemap style", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "originalPosition": 29}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0NTMyNA==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a map with an oceans basemap style\n          \n          \n            \n                  // create a map with the oceans basemap style", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r538245324", "createdAt": "2020-12-08T11:02:48Z", "author": {"login": "JonLavi"}, "path": "raster/identify-raster-cell/src/main/java/com/esri/samples/identify_raster_cell/IdentifyRasterCellSample.java", "diffHunk": "@@ -43,180 +45,182 @@\n \n public class IdentifyRasterCellSample extends Application {\n \n-    private boolean calloutLocked = false;\n-    private Callout callout;\n-    private MapView mapView;\n-    private RasterLayer rasterLayer;\n-\n-    @Override\n-    public void start(Stage stage) {\n-\n-        try {\n-            // create stack pane and application scene\n-            StackPane stackPane = new StackPane();\n-            Scene scene = new Scene(stackPane);\n-\n-            // set title, size, and add scene to stage\n-            stage.setTitle(\"Identify Raster Cell Sample\");\n-            stage.setWidth(800);\n-            stage.setHeight(700);\n-            stage.setScene(scene);\n-            stage.show();\n-\n-            // create a map view\n-            mapView = new MapView();\n-\n-            // create a Map with an oceans basemap\n-            ArcGISMap map = new ArcGISMap(Basemap.createOceans());\n-\n-            // add the map to a map view\n-            mapView.setMap(map);\n-\n-            // create a raster from a local raster file\n-            Raster raster = new Raster(new File(System.getProperty(\"data.dir\"), \"./samples-data/SA_EVI_8Day_03May20/SA_EVI_8Day_03May20.tif\").getAbsolutePath());\n-\n-            // create a raster layer\n-            rasterLayer = new RasterLayer(raster);\n-\n-            // add the raster as an operational layer\n-            map.getOperationalLayers().add(rasterLayer);\n-\n-            // set viewpoint on the raster\n-            rasterLayer.addDoneLoadingListener(() -> {\n-                if (map.getLoadStatus() == LoadStatus.LOADED) {\n-                    mapView.setViewpointGeometryAsync(rasterLayer.getFullExtent(), 50);\n-                } else {\n-                    Alert alert = new Alert(Alert.AlertType.ERROR, \"Raster Layer Failed to Load!\");\n-                    alert.show();\n-                }\n-            });\n-\n-            // get a handle on the callout\n-            callout = mapView.getCallout();\n-            callout.setTitle(\"Raster cell attributes:\");\n-            // make the callout transparent to mouse interactions, so that we keep identifying raster cells behind it\n-            callout.setMouseTransparent(true);\n-\n-            // start identifying on-the-fly if the mouse enters the map view, and the callout is not locked\n-            mapView.setOnMouseEntered(mouseEvent -> {\n-                if (!calloutLocked) {\n-                    mapView.setOnMouseMoved(this::identifyRasterCell);\n-                }\n-            });\n-\n-            // stop identifying on-the-fly when the mouse leaves the map view\n-            mapView.setOnMouseExited(null);\n-\n-            // on click, either lock the callout in place if raster cells are identified on-the-fly,\n-            // or release the callout again and start identifying on-the-fly\n-            mapView.setOnMouseClicked(mouseEvent -> {\n-                if (mouseEvent.getButton() == MouseButton.PRIMARY && mouseEvent.isStillSincePress()) {\n-\n-                    if (!calloutLocked) {\n-                        // stop identifying on the fly\n-                        mapView.setOnMouseMoved(null);\n-                        // lock the callout in place\n-                        calloutLocked = true;\n-\n-                    } else {\n-                        // dismiss the callout\n-                        callout.dismiss();\n-                        // unlock the callout\n-                        calloutLocked = false;\n-                        // show a new callout at the clicked location\n-                        identifyRasterCell(mouseEvent);\n-                        // start identifying on-the-fly\n-                        mapView.setOnMouseMoved(this::identifyRasterCell);\n-                    }\n-                }\n-            });\n-\n-            // add the map view to stack pane\n-            stackPane.getChildren().addAll(mapView);\n-\n-        } catch (Exception e) {\n-            // on any error, display the stack trace\n-            e.printStackTrace();\n+  private boolean calloutLocked = false;\n+  private Callout callout;\n+  private MapView mapView;\n+  private RasterLayer rasterLayer;\n+\n+  @Override\n+  public void start(Stage stage) {\n+\n+    try {\n+      // create stack pane and application scene\n+      StackPane stackPane = new StackPane();\n+      Scene scene = new Scene(stackPane);\n+\n+      // set title, size, and add scene to stage\n+      stage.setTitle(\"Identify Raster Cell Sample\");\n+      stage.setWidth(800);\n+      stage.setHeight(700);\n+      stage.setScene(scene);\n+      stage.show();\n+\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with an oceans basemap style", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "originalPosition": 152}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0NTY0NQ==", "bodyText": "I won't comment on any other instances, before I make a fool of myself!\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a map with a dark gray basemap style\n          \n          \n            \n                  // create a map with the dark gray basemap style", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r538245645", "createdAt": "2020-12-08T11:03:21Z", "author": {"login": "JonLavi"}, "path": "raster/raster-function/src/main/java/com/esri/samples/raster_function/RasterFunctionSample.java", "diffHunk": "@@ -56,10 +57,14 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with dark canvas vector basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.createDarkGrayCanvasVector());\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n \n-      // add the map to a map view\n+      // create a map with a dark gray basemap style", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "originalPosition": 24}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODI0NjU0MA==", "bodyText": "Just said I won't comment, but this one definitely needs either a or the, doesn't matter which \ud83d\ude01\n\n  \n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                  // create a map with dark gray basemap style\n          \n          \n            \n                  // create a map with a dark gray basemap style", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r538246540", "createdAt": "2020-12-08T11:04:36Z", "author": {"login": "JonLavi"}, "path": "raster/raster-layer-url/src/main/java/com/esri/samples/raster_layer_url/RasterLayerURLSample.java", "diffHunk": "@@ -63,8 +68,8 @@ public void start(Stage stage) {\n         }\n       });\n \n-      // create a map with dark canvas vector basemap\n-      ArcGISMap map = new ArcGISMap(Basemap.createDarkGrayCanvasVector());\n+      // create a map with dark gray basemap style", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "317d576bf9ebf06aa1bab53724227396e047b00f"}, "originalPosition": 32}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39e10d5b112eb55a67300dab527e0435ee659524", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/39e10d5b112eb55a67300dab527e0435ee659524", "committedDate": "2020-12-08T14:15:39Z", "message": "Tidy style comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4MDY5NDEy", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#pullrequestreview-548069412", "createdAt": "2020-12-09T11:02:04Z", "commit": {"oid": "39e10d5b112eb55a67300dab527e0435ee659524"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTowMjowNFrOICO1Mg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxMTowMjowNFrOICO1Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTIxMTA1OA==", "bodyText": "is the BasemapStyle.ARCGIS_STREETS basemap still classed as a public basemap layer? I wasn't sure if it's accessible without an API key and therefore if it's ok to still refer to it as public. To be on the safe side we could just go with:\n\notherwise the map will contain only the basemap style layer", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/608#discussion_r539211058", "createdAt": "2020-12-09T11:02:04Z", "author": {"login": "Rachael-E"}, "path": "portal/oauth/README.md", "diffHunk": "@@ -10,7 +10,7 @@ Your app may need to access items that are only shared with authorized users. Fo\n \n ## How to use the sample\n \n-When you run the sample, the app will load a web map which contains premium content. You will be challenged for an ArcGIS Online login to view the private layers. Enter a user name and password for an ArcGIS Online named user account (such as your ArcGIS for Developers account). If you authenticate successfully, the traffic layer will display, otherwise the map will contain only the public basemap layer.\n+When you run the sample, the app will load a web map which contains premium content. You will be challenged for an ArcGIS Online login to view the private layers. Enter a user name and password for an ArcGIS Online named user account (such as your ArcGIS for Developers account). If you authenticate successfully, the traffic layer will display, otherwise the map will contain only the public basemap style layer.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "39e10d5b112eb55a67300dab527e0435ee659524"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "23a7b21b3b3c57e04d3748b7d72a45a048fa94ac", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/23a7b21b3b3c57e04d3748b7d72a45a048fa94ac", "committedDate": "2020-12-10T13:51:20Z", "message": "Merge branch 'dev' into sim11117-basemaps-portal-raster"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f2a544b5e6e899d1127a60cca35f57866531581", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/5f2a544b5e6e899d1127a60cca35f57866531581", "committedDate": "2020-12-10T14:13:52Z", "message": "update build.gradle - versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "acefc4d4373ec7e3a7c40154d03f9c39668da445", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/acefc4d4373ec7e3a7c40154d03f9c39668da445", "committedDate": "2020-12-10T14:14:08Z", "message": "oauth - update readme and comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01f5b41eb0d08b4cbd02083934bb76580d72c187", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/01f5b41eb0d08b4cbd02083934bb76580d72c187", "committedDate": "2020-12-10T14:14:20Z", "message": "tidy comment consistencies"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4918, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}