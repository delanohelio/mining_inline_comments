{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyNTc4NjM4", "number": 603, "title": " New Basemaps: Hydrography, Image layers and KML Categories", "bodyText": "Description\nThis PR is for the following sample categories:\n\nHydrography\nImage layers\nKML\n\nGeneral comments on Basemap updates:\nIt updates Map and/or Basemap Constructors as per the new design. This may include the following changes depending on the sample:\n\nReplace Basemap.Type with BasemapStyle\nIf a lat/long/zoom was being set in the Map constructor, this is replaced with a Viewpoint being set on the MapView.\nAny Readme Updates identified\n\nIn addition, the samples that include the above changes, or other services requiring an API Key going forward, have the API Key  set within the sample. This will then work in conjunction with the Gradle Task being added in PR 593.\nOnce 593 is approved and merged into dev we will merge those changes into these PRs and then update all the Samples to 100.10.0-xxxx and do a round of testing of the Samples with all the API Key / Basemap changes at that time. (We have left them as 100.9.0 (in most cases) for now to minimize merge conflicts in the build.gradle file).\nIn the meantime, the updates listed above can be reviewed. Thanks!", "createdAt": "2020-12-04T14:44:33Z", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603", "merged": true, "mergeCommit": {"oid": "112223d28ff85785119c04fecca11714d93bbe9f"}, "closed": true, "closedAt": "2021-01-20T17:27:55Z", "author": {"login": "jenmerritt"}, "timelineItems": {"totalCount": 19, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdgWE6EgH2gAyNTMyNTc4NjM4OjdmZmU4ZDE1YTg5ZWM5ZWE0MDc3ZWUxYWNjOTdjMTRjNGRjYzFiMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkzOOIAFqTU0OTE4NjIzOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "7ffe8d15a89ec9ea4077ee1acc97c14c4dcc1b25", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/7ffe8d15a89ec9ea4077ee1acc97c14c4dcc1b25", "committedDate": "2020-11-26T17:06:05Z", "message": "Hydrography - add enc exchange set"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64303c28876560ff5cba8cc772b43ab8d44dccd2", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/64303c28876560ff5cba8cc772b43ab8d44dccd2", "committedDate": "2020-11-27T09:50:13Z", "message": "Change sublayer renderer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8558ce66176e5e43adda482c77caa707db92018c", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/8558ce66176e5e43adda482c77caa707db92018c", "committedDate": "2020-11-27T10:18:44Z", "message": "Map image sublayer visibility"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78b9fd36726fb0baaf12251e946a2f3c1d569dad", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/78b9fd36726fb0baaf12251e946a2f3c1d569dad", "committedDate": "2020-11-27T10:54:43Z", "message": "Map image layer tables"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "53ef87d4abefb12424fa2a701fe45cd9bc3dec95", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/53ef87d4abefb12424fa2a701fe45cd9bc3dec95", "committedDate": "2020-11-27T11:26:12Z", "message": "Query map image sublayer"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "27f825493ebdcc94948e81feab02a47b8e85b831", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/27f825493ebdcc94948e81feab02a47b8e85b831", "committedDate": "2020-11-27T11:29:57Z", "message": "Create and save kml file"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dcd0653b840610d6c2463cca746772edd92beafe", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/dcd0653b840610d6c2463cca746772edd92beafe", "committedDate": "2020-11-27T11:34:48Z", "message": "Display kml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "34ae133538e69e10380e4961e2a01721484122af", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/34ae133538e69e10380e4961e2a01721484122af", "committedDate": "2020-11-27T11:41:09Z", "message": "Identify kml features"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d4d32a3bc5cb9f0285f1cdf7aafc55982a2debc9", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/d4d32a3bc5cb9f0285f1cdf7aafc55982a2debc9", "committedDate": "2020-12-04T14:38:32Z", "message": "Change sublayer renderer - set viewpoint on mapview"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/0ac39a8e808db9ed298e85e0011bc7302e2c46f6", "committedDate": "2020-12-04T14:42:30Z", "message": "Map image subayer visibility - set viewpoint on mapview"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MDc1MjU5", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#pullrequestreview-547075259", "createdAt": "2020-12-08T10:49:27Z", "commit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDo0OToyOFrOIBTVJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDo1NDo1M1rOIBTj1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNjE5Ng==", "bodyText": "Should we take the time here and make this pattern consistent with the rest of the samples? I.e. put the part where we add the MapView to the StackPane at the very end of the start method?", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538236196", "createdAt": "2020-12-08T10:49:28Z", "author": {"login": "JonLavi"}, "path": "hydrography/add-enc-exchange-set/src/main/java/com/esri/samples/add_enc_exchange_set/AddEncExchangeSetSample.java", "diffHunk": "@@ -63,6 +64,10 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n       // create a map view and add it to the stack pane\n       mapView = new MapView();\n       stackPane.getChildren().add(mapView);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzNjY5OQ==", "bodyText": "If you decide to move the stackPane interaction I mentioned above, then we could move the creation of the map view down to here, so it looks the same as with the other samples`", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538236699", "createdAt": "2020-12-08T10:50:11Z", "author": {"login": "JonLavi"}, "path": "hydrography/add-enc-exchange-set/src/main/java/com/esri/samples/add_enc_exchange_set/AddEncExchangeSetSample.java", "diffHunk": "@@ -83,8 +88,8 @@ public void start(Stage stage) {\n         }\n       });\n \n-      // create a map with the Oceans basemap and set it on the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.createOceans());\n+      // create a map with the oceans basemap style and set it on the map view\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_OCEANS);\n       mapView.setMap(map);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6"}, "originalPosition": 36}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzODcwMw==", "bodyText": "I know you haven't touched this code, but might be worth updating this?\nI think it makes more sense to set the SR on the map, rather than on an individual point, and then not specify a SR when creating points/viewpoints and adding them to our map.\nThen we ould also get rid of the initialLocation and create the Viewpoint directly with the coordinates.", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538238703", "createdAt": "2020-12-08T10:53:06Z", "author": {"login": "JonLavi"}, "path": "image_layers/query-map-image-sublayer/src/main/java/com/esri/samples/query_map_image_sublayer/QueryMapImageSublayerSample.java", "diffHunk": "@@ -72,8 +73,12 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with a basemap and set its initial viewpoint\n-      ArcGISMap map = new ArcGISMap(Basemap.createStreetsVector());\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style and set its initial viewpoint\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n       Point initialLocation = new Point(-12716000.00, 4170400.00, SpatialReferences.getWebMercator());\n       Viewpoint viewpoint = new Viewpoint(initialLocation, 6000000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6"}, "originalPosition": 30}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIzOTk1Nw==", "bodyText": "Maybe we should split this up (like in most samples), or rephrase the comment so that it's more accurate about what the code does?\n// create a map and add it to a new map view would make more sense, beause the map view doesn't exist until we create it in this block", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538239957", "createdAt": "2020-12-08T10:54:53Z", "author": {"login": "JonLavi"}, "path": "kml/display-kml/src/main/java/com/esri/samples/display_kml/DisplayKMLSample.java", "diffHunk": "@@ -58,12 +59,16 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n       // create a progress indicator\n       ProgressIndicator progressIndicator = new ProgressIndicator();\n       progressIndicator.setVisible(false);\n \n       // create a map and add it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.createDarkGrayCanvasVector());\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_DARK_GRAY);\n       mapView = new MapView();\n       mapView.setMap(map);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "0ac39a8e808db9ed298e85e0011bc7302e2c46f6"}, "originalPosition": 31}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cf1ee47770c383e86d1a1a8821242fb56c507b03", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/cf1ee47770c383e86d1a1a8821242fb56c507b03", "committedDate": "2020-12-08T12:10:37Z", "message": "Add ENC exchange set - adjust mapview setup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "24c68bc3c24c46e988d09916568d1ed792b69755", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/24c68bc3c24c46e988d09916568d1ed792b69755", "committedDate": "2020-12-08T12:27:48Z", "message": "Query map image sublayer - tidy up viewpoint setting"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/e9d36bf25065247d11bb4c15db3c49fc38018f79", "committedDate": "2020-12-08T12:29:48Z", "message": "Display KML - tidy comments"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTgzMTA5", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#pullrequestreview-547583109", "createdAt": "2020-12-08T19:59:26Z", "commit": {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxOTo1OToyN1rOIBzpow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQyMDoyNjowOVrOIB0pdQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2NTczMQ==", "bodyText": "another query about the conversion of level of detail 2 to scale 40000 here (see original comment here https://github.com/Esri/arcgis-runtime-samples-java/pull/602/files#r538755384)", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538765731", "createdAt": "2020-12-08T19:59:27Z", "author": {"login": "Rachael-E"}, "path": "image_layers/change-sublayer-renderer/src/main/java/com/esri/samples/change_sublayer_renderer/ChangeSublayerRendererSample.java", "diffHunk": "@@ -63,11 +65,20 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map and set it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.STREETS, 48.354406, -99.998267, 2);\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n+\n+      // create a map view and set its map\n       mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(48.354406, -99.998267, 40000));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc2NjAxNQ==", "bodyText": "as above: different scale, let's try and be consistent if possible", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538766015", "createdAt": "2020-12-08T19:59:54Z", "author": {"login": "Rachael-E"}, "path": "image_layers/map-image-layer-sublayer-visibility/src/main/java/com/esri/samples/map_image_layer_sublayer_visibility/MapImageLayerSublayerVisibilitySample.java", "diffHunk": "@@ -73,13 +79,16 @@ public void start(Stage stage) {\n       controlsVBox.getChildren().addAll(citiesBox, continentsBox, worldBox);\n       controlsVBox.getChildren().forEach(c -> ((CheckBox) c).setSelected(true));\n \n-      // create a map view\n-      mapView = new MapView();\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_TOPOGRAPHIC);\n \n-      // create an ArcGISMap with the topographic basemap and set it to the map view\n-      ArcGISMap map = new ArcGISMap(Basemap.Type.TOPOGRAPHIC, 48.354406, -99.998267, 2);\n+      // create a map view and set its map\n+      mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(48.354406, -99.998267, 150000000));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODc4MjA2OQ==", "bodyText": "was there a reason this scale changed to 9000000 when the original scale was set to 6000000?", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#discussion_r538782069", "createdAt": "2020-12-08T20:26:09Z", "author": {"login": "Rachael-E"}, "path": "image_layers/query-map-image-sublayer/src/main/java/com/esri/samples/query_map_image_sublayer/QueryMapImageSublayerSample.java", "diffHunk": "@@ -72,20 +71,24 @@ public void start(Stage stage) {\n       stage.setScene(scene);\n       stage.show();\n \n-      // create a map with a basemap and set its initial viewpoint\n-      ArcGISMap map = new ArcGISMap(Basemap.createStreetsVector());\n-      Point initialLocation = new Point(-12716000.00, 4170400.00, SpatialReferences.getWebMercator());\n-      Viewpoint viewpoint = new Viewpoint(initialLocation, 6000000);\n-      map.setInitialViewpoint(viewpoint);\n+      // authentication with an API key or named user is required to access basemaps and other location services\n+      String yourAPIKey = System.getProperty(\"apiKey\");\n+      ArcGISRuntimeEnvironment.setApiKey(yourAPIKey);\n+\n+      // create a map with a basemap style\n+      ArcGISMap map = new ArcGISMap(BasemapStyle.ARCGIS_STREETS);\n \n       // create and add a map image layer to the map\n       ArcGISMapImageLayer imageLayer = new ArcGISMapImageLayer(\"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer\");\n       map.getOperationalLayers().add(imageLayer);\n \n-      // create a map view and set the map to it\n+      // create a map view and set its map\n       mapView = new MapView();\n       mapView.setMap(map);\n \n+      // set a viewpoint on the map view\n+      mapView.setViewpoint(new Viewpoint(36.75056, -115.44154, 9000000));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e9d36bf25065247d11bb4c15db3c49fc38018f79"}, "originalPosition": 47}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d79282f078be7e585bc9d0f35461bd677c1a5d32", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/d79282f078be7e585bc9d0f35461bd677c1a5d32", "committedDate": "2020-12-10T10:45:00Z", "message": "Merge branch 'dev' into jen/basemaps-hydrography-imagelayers-kml"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "61fbbddbe3663ffb2738b222b90ff914c34340e7", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/61fbbddbe3663ffb2738b222b90ff914c34340e7", "committedDate": "2020-12-10T11:36:11Z", "message": "Update build.gradle - verisons"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dd6199ac1e446324f7636ee25400c585ad90ffc4", "author": {"user": {"login": "jenmerritt", "name": "Jen Merritt"}}, "url": "https://github.com/Esri/arcgis-runtime-samples-java/commit/dd6199ac1e446324f7636ee25400c585ad90ffc4", "committedDate": "2020-12-10T11:36:33Z", "message": "Tidy up comment and scale consistencies"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MTg2MjM5", "url": "https://github.com/Esri/arcgis-runtime-samples-java/pull/603#pullrequestreview-549186239", "createdAt": "2020-12-10T13:19:12Z", "commit": {"oid": "dd6199ac1e446324f7636ee25400c585ad90ffc4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4900, "cost": 1, "resetAt": "2021-11-01T14:20:25Z"}}}