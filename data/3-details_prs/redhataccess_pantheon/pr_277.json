{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDA3MTI3NDQ2", "number": 277, "title": " Once modules have been uploaded into Pantheon using the dynamic incl\u2026", "bodyText": "\u2026ude syntax, Pantheon needs to populate the attsFile attribute similar to the following CLI invocation of asciidoctor", "createdAt": "2020-04-22T08:21:41Z", "url": "https://github.com/redhataccess/pantheon/pull/277", "merged": true, "mergeCommit": {"oid": "7800c652f1bf5e39614ba0047e4ba469a7d4ab03"}, "closed": true, "closedAt": "2020-04-29T15:07:10Z", "author": {"login": "rednitish"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcaD3ZOAH2gAyNDA3MTI3NDQ2OjU4ZmUzNDlhM2RlMjNhMmVlZjg2Y2Y3ZWJhZDE3NTk0MjgwZTBjNzM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcb0fU1gFqTQwMTI2MjMxMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73", "author": {"user": {"login": "rednitish", "name": "Nitish Sharma"}}, "url": "https://github.com/redhataccess/pantheon/commit/58fe349a3de23a2eef86cf7ebad17594280e0c73", "committedDate": "2020-04-22T08:18:20Z", "message": " Once modules have been uploaded into Pantheon using the dynamic include syntax, Pantheon needs to populate the attsFile attribute similar to the following CLI invocation of asciidoctor"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTA2NDM5", "url": "https://github.com/redhataccess/pantheon/pull/277#pullrequestreview-398506439", "createdAt": "2020-04-22T19:26:02Z", "commit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOToyNjowMlrOGKHQ_A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOToyNjowMlrOGKHQ_A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI1Nzk4MA==", "bodyText": "Small nitpick, but could you remove the double-spacing after the equal sign?\n...attributeFileRelPath =<space><space>moduleVersion... <-- double-spacing here.", "url": "https://github.com/redhataccess/pantheon/pull/277#discussion_r413257980", "createdAt": "2020-04-22T19:26:02Z", "author": {"login": "benradey"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/asciidoctor/AsciidoctorService.java", "diffHunk": "@@ -179,10 +179,15 @@ private String buildModule(Module base, ModuleVersion moduleVersion, Map<String,\n                     .map(Supplier::get);\n \n             SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd MMMMM yyyy\");\n+\n+            String workspacePath = moduleVersion.getWorkspace().getPath();\n+            String attributeFileRelPath =  moduleVersion.getWorkspace().attributeFile().get();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTA4MDc4", "url": "https://github.com/redhataccess/pantheon/pull/277#pullrequestreview-398508078", "createdAt": "2020-04-22T19:28:29Z", "commit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOToyODoyOVrOGKHWsA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOToyODoyOVrOGKHWsA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI1OTQ0MA==", "bodyText": "Two comments here... first of all, please fix the spacing in this code. :)\n...concat(<remove this space>\"/\"<add a space here>+ attribute...\nSecond, it's very minor, but please be consistent the call that you use. I'd like to see either\nworkspacePath + \"/\" + attributeFileRelPath\n...or...\nworkspacePath.concat(\"/\").concat(attributeFileRelPath)\n...but not a mix of the two. It keeps the code clean.\nThanks!", "url": "https://github.com/redhataccess/pantheon/pull/277#discussion_r413259440", "createdAt": "2020-04-22T19:28:29Z", "author": {"login": "benradey"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/asciidoctor/AsciidoctorService.java", "diffHunk": "@@ -179,10 +179,15 @@ private String buildModule(Module base, ModuleVersion moduleVersion, Map<String,\n                     .map(Supplier::get);\n \n             SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd MMMMM yyyy\");\n+\n+            String workspacePath = moduleVersion.getWorkspace().getPath();\n+            String attributeFileRelPath =  moduleVersion.getWorkspace().attributeFile().get();\n             // build the attributes (default + those coming from http parameters)\n             AttributesBuilder atts = AttributesBuilder.attributes()\n                     // show the title on the generated html\n                     .attribute(\"showtitle\")\n+                    // provide attribute file as argument to ASCIIDOCTOR for building doc.\n+                    .attribute(\"attsFile\", workspacePath.concat( \"/\"+ attributeFileRelPath))", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTEwMzU1", "url": "https://github.com/redhataccess/pantheon/pull/277#pullrequestreview-398510355", "createdAt": "2020-04-22T19:31:20Z", "commit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOTozMToyMFrOGKHdpQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yMlQxOTozMToyMFrOGKHdpQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxMzI2MTIyMQ==", "bodyText": "Clever! I wouldn't have thought of this, but I like the logic!", "url": "https://github.com/redhataccess/pantheon/pull/277#discussion_r413261221", "createdAt": "2020-04-22T19:31:20Z", "author": {"login": "benradey"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/asciidoctor/AsciidoctorService.java", "diffHunk": "@@ -240,14 +245,10 @@ private String buildModule(Module base, ModuleVersion moduleVersion, Map<String,\n                             new MetadataExtractorTreeProcessor(moduleVersion.metadata().getOrCreate()));\n                 }\n \n-                String workspacePath = moduleVersion.getWorkspace().getPath();\n-                String attributeFileRelPath =  moduleVersion.getWorkspace().attributeFile().get();\n                 StringBuilder content = new StringBuilder();\n                 if (attributeFileRelPath != null && !attributeFileRelPath.isEmpty()) {\n                     content.append(\"include::\")\n-                            .append(workspacePath)\n-                            .append(\"/\")\n-                            .append(attributeFileRelPath)\n+                            .append(\"{attsFile}\")", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "originalPosition": 28}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzk4NTEyMzQy", "url": "https://github.com/redhataccess/pantheon/pull/277#pullrequestreview-398512342", "createdAt": "2020-04-22T19:32:26Z", "commit": {"oid": "58fe349a3de23a2eef86cf7ebad17594280e0c73"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "01a3d28a9d48ce94ebde7b1a6c796624637b5ff1", "author": {"user": {"login": "rednitish", "name": "Nitish Sharma"}}, "url": "https://github.com/redhataccess/pantheon/commit/01a3d28a9d48ce94ebde7b1a6c796624637b5ff1", "committedDate": "2020-04-24T04:55:38Z", "message": "Syntactic changes corresponding to peer review"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDAxMjYyMzEx", "url": "https://github.com/redhataccess/pantheon/pull/277#pullrequestreview-401262311", "createdAt": "2020-04-27T19:31:11Z", "commit": {"oid": "01a3d28a9d48ce94ebde7b1a6c796624637b5ff1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxOTozMToxMVrOGM0J4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0yN1QxOTozMToxMVrOGM0J4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxNjA5MDU5Mw==", "bodyText": "You're missing a space after the \"/\", but I won't ask for another commit, just please keep an eye out in the future. :)\nThanks!", "url": "https://github.com/redhataccess/pantheon/pull/277#discussion_r416090593", "createdAt": "2020-04-27T19:31:11Z", "author": {"login": "benradey"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/asciidoctor/AsciidoctorService.java", "diffHunk": "@@ -179,10 +179,15 @@ private String buildModule(Module base, ModuleVersion moduleVersion, Map<String,\n                     .map(Supplier::get);\n \n             SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd MMMMM yyyy\");\n+\n+            String workspacePath = moduleVersion.getWorkspace().getPath();\n+            String attributeFileRelPath = moduleVersion.getWorkspace().attributeFile().get();\n             // build the attributes (default + those coming from http parameters)\n             AttributesBuilder atts = AttributesBuilder.attributes()\n                     // show the title on the generated html\n                     .attribute(\"showtitle\")\n+                    // provide attribute file as argument to ASCIIDOCTOR for building doc.\n+                    .attribute(\"attsFile\", workspacePath + \"/\"+ attributeFileRelPath)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "01a3d28a9d48ce94ebde7b1a6c796624637b5ff1"}, "originalPosition": 12}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2106, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}