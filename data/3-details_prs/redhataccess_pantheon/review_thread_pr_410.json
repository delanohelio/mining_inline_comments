{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMDQwOTY2", "number": 410, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0NzoxMFrOEh-Vvw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxMDo1MlrOEh-zRw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDU5ODM5OnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0NzoxMFrOHPlXRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDoxOFrOHP5uew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMjg1Mw==", "bodyText": "comment is misleading", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486102853", "createdAt": "2020-09-10T06:47:10Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjQ3NQ==", "bodyText": "fixed", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436475", "createdAt": "2020-09-10T15:30:18Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMjg1Mw=="}, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDYwNTEwOnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0OToyNFrOHPlbWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDoyNFrOHP5uvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMzg5Nw==", "bodyText": "can we refactor/rename moduleType to contentType ?", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486103897", "createdAt": "2020-09-10T06:49:24Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjU0MQ==", "bodyText": "done", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436541", "createdAt": "2020-09-10T15:30:24Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMzg5Nw=="}, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDYwOTg1OnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/frontend/src/app/searchFilter.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo1MDo1M1rOHPleKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDoyOVrOHP5vFQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNDYxNw==", "bodyText": "can we have a more generic name i.e. instead of moduleTypeItems like contentTypeItems ?", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486104617", "createdAt": "2020-09-10T06:50:53Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/frontend/src/app/searchFilter.tsx", "diffHunk": "@@ -47,6 +47,7 @@ class SearchFilter extends Component<any, any> {\n \n     const moduleTypeItems = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjYyOQ==", "bodyText": "done", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436629", "createdAt": "2020-09-10T15:30:29Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/searchFilter.tsx", "diffHunk": "@@ -47,6 +47,7 @@ class SearchFilter extends Component<any, any> {\n \n     const moduleTypeItems = [", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNDYxNw=="}, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA0MDY3Mzk5OnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxMDo1MlrOHPmEGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQxNTozMDozNlrOHP5vcg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNDMyOA==", "bodyText": "Can we initialize moduleTypeCondition outside if blocks, as it will remove code duplication ?\ni.e.\nStringBuilder contentTypeCondition = new StringBuilder();", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486114328", "createdAt": "2020-09-10T07:10:52Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()\n+                        .append(\"@jcr:primaryType = 'pant:assembly'\");\n+            } else {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjQzNjcyMg==", "bodyText": "done", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486436722", "createdAt": "2020-09-10T15:30:36Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()\n+                        .append(\"@jcr:primaryType = 'pant:assembly'\");\n+            } else {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNDMyOA=="}, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 11}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 215, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}