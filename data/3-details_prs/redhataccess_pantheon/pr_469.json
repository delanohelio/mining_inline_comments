{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTIxOTIzNjIy", "number": 469, "title": "Ccs 3997 product version form", "bodyText": "", "createdAt": "2020-11-16T20:14:02Z", "url": "https://github.com/redhataccess/pantheon/pull/469", "merged": true, "mergeCommit": {"oid": "309a2cf5ce33112c687c81acafe1f0dd3fc65836"}, "closed": true, "closedAt": "2020-11-17T15:45:53Z", "author": {"login": "grantsydney"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABddKlDtAH2gAyNTIxOTIzNjIyOjNjNTU5M2Y5ZDE3MzMzMzIzZmI3ZWMzNmVhMzQyYTY3MTUxYjI5NzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABddbhFogFqTUzMjUwNzI3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3c5593f9d17333323fb7ec36ea342a67151b2971", "author": {"user": {"login": "grantsydney", "name": "Sydney Grant"}}, "url": "https://github.com/redhataccess/pantheon/commit/3c5593f9d17333323fb7ec36ea342a67151b2971", "committedDate": "2020-11-16T20:00:34Z", "message": "CCS-3997-add-version-to-product-form"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b", "author": {"user": {"login": "grantsydney", "name": "Sydney Grant"}}, "url": "https://github.com/redhataccess/pantheon/commit/2792535c956a7633c387203d7b65f84baacad52b", "committedDate": "2020-11-16T20:03:09Z", "message": "CCS-3997: remove console.log"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODI0MDU1", "url": "https://github.com/redhataccess/pantheon/pull/469#pullrequestreview-531824055", "createdAt": "2020-11-16T22:02:30Z", "commit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowMjozMVrOH0WGrg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowMjozMVrOH0WGrg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1MDE1OA==", "bodyText": "we don't need the lambda function for onClick event or the Button type. I recommend:\nSave", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524650158", "createdAt": "2020-11-16T22:02:31Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -94,8 +98,24 @@ class Product extends Component<any, IState> {\n                                     <TextInput id=\"product_description_text\" type=\"text\" placeholder=\"Product Description\" value={this.state.productDescription} onChange={this.handleProductInput} />\n                                 </FormGroup>\n                                 <br />\n+                                <FormGroup\n+                                        label=\"Product Version:\"\n+                                        isRequired={true}\n+                                        fieldId=\"version_name\"\n+                                >\n+                                    <TextInput id=\"new_version_name_text\" type=\"text\" placeholder=\"Product Version\" onChange={this.handleTextInputChange} value={this.state.versionName} />\n+                                </FormGroup>\n+                                <br />\n+                                <FormGroup\n+                                        label=\"Version URL Fragment:\"\n+                                        isRequired={true}\n+                                        fieldId=\"version_url_fragment\"\n+                                >\n+                                    <TextInput id=\"new_version_url_fragment\" type=\"text\" placeholder=\"Version URL Fragment\" onChange={this.handleUrlInputChange} value={this.state.versionUrlFragment} />\n+                                </FormGroup>\n+                                <br />\n                                 <ActionGroup>\n-                                    <Button aria-label=\"Creates a new Product Name with Description specified.\" onClick={this.saveProduct}>Save</Button>\n+                                    <Button type='submit' aria-label=\"Creates a new Product Name with Description specified.\" onClick={e => this.saveProduct(e)}>Save</Button>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "originalPosition": 63}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODI0OTM5", "url": "https://github.com/redhataccess/pantheon/pull/469#pullrequestreview-531824939", "createdAt": "2020-11-16T22:03:51Z", "commit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowMzo1MVrOH0WO7Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowMzo1MVrOH0WO7Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1MjI2OQ==", "bodyText": "I don't believe we don't believe we the changes on line 44.", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524652269", "createdAt": "2020-11-16T22:03:51Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -26,18 +28,20 @@ class Product extends Component<any, IState> {\n             productDescription: \"\",\n             productName: \"\",\n             productUrlFragment: \"\",\n+            versionName: \"\",\n+            versionUrlFragment: \"\",\n             redirect: false\n         }\n \n     }\n-\n+    \n     // render method transforms the react components into DOM nodes for the browser.\n     public render() {\n         return (\n             <React.Fragment>\n                 {/* Bullseye makes sure everyhting is in the middle */}\n                 <Bullseye>\n-                    <Form>\n+                    <Form onSubmit={this.saveProduct} method='POST'>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "originalPosition": 37}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMxODI3Mzc4", "url": "https://github.com/redhataccess/pantheon/pull/469#pullrequestreview-531827378", "createdAt": "2020-11-16T22:07:46Z", "commit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowNzo0NlrOH0WmEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQyMjowNzo0NlrOH0WmEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDY1ODE5NA==", "bodyText": "line 162 does not check if users can enter an empty string in Version Name field. It would be better if we do something like this:\nif (this.state.versionName.trim() === \"\" || this.state.versionUrlFragment === \"\")", "url": "https://github.com/redhataccess/pantheon/pull/469#discussion_r524658194", "createdAt": "2020-11-16T22:07:46Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/product.tsx", "diffHunk": "@@ -125,8 +145,52 @@ class Product extends Component<any, IState> {\n         }\n     }\n \n-    private saveProduct = () => {\n-        if (this.state.productName === \"\"|| this.state.productUrlFragment === \"\") {\n+    private handleTextInputChange = versionName => {\n+        this.setState({ versionName })\n+    }\n+\n+    private handleUrlInputChange = versionUrlFragment => {\n+        if (/^[-.\\w]+$/.test(versionUrlFragment)) {\n+            this.setState({ versionUrlFragment, isUrlFragmentValid: true })\n+        } else {\n+            this.setState({ isUrlFragmentValid: false})\n+        }\n+    }\n+\n+    private saveVersion = () => {\n+        // confirming form state is valid\n+        if (this.state.versionName === \"\" || this.state.productUrlFragment === \"\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2792535c956a7633c387203d7b65f84baacad52b"}, "originalPosition": 87}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8cce4260f4a38f8b3c445d7ec90c0554ca984698", "author": {"user": {"login": "grantsydney", "name": "Sydney Grant"}}, "url": "https://github.com/redhataccess/pantheon/commit/8cce4260f4a38f8b3c445d7ec90c0554ca984698", "committedDate": "2020-11-17T13:58:50Z", "message": "CCS-3997: comment fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTMyNTA3Mjcy", "url": "https://github.com/redhataccess/pantheon/pull/469#pullrequestreview-532507272", "createdAt": "2020-11-17T15:44:37Z", "commit": {"oid": "8cce4260f4a38f8b3c445d7ec90c0554ca984698"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1919, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}