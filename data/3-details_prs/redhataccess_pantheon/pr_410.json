{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDgzMDQwOTY2", "number": 410, "title": "CCS-3743 - update labels on left nav and search results. add Assembly to the filter", "bodyText": "This PR introduces the following changes:\n\nChange the label \"Modules\" to \"Contents\"  on the left nav\nChange the label \"Module Type\" to \"Content Type\" on the search results\nAdd \"Assembly\" to the filter for better find ability", "createdAt": "2020-09-09T18:27:15Z", "url": "https://github.com/redhataccess/pantheon/pull/410", "merged": true, "mergeCommit": {"oid": "2ca827c34ef99d327a3543bf4e2c56a6f3100e01"}, "closed": true, "closedAt": "2020-09-10T15:39:42Z", "author": {"login": "xdavidson"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHQX5IgH2gAyNDgzMDQwOTY2OmYzNjNiNzY5YzI0MTFjNTA3Mjc0NzM2OWM1MmRhMDI2NjZmMjZlYTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdHirO9AFqTQ4NjA2NTkxOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9", "author": {"user": {"login": "xdavidson", "name": "Lisa Davidson"}}, "url": "https://github.com/redhataccess/pantheon/commit/f363b769c2411c5072747369c52da02666f26ea9", "committedDate": "2020-09-09T18:19:17Z", "message": "update labels on left nav and search results. add Assembly to the filter"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjI2OTA1", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-485626905", "createdAt": "2020-09-10T06:47:10Z", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0NzoxMFrOHPlXRQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0NzoxMFrOHPlXRQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMjg1Mw==", "bodyText": "comment is misleading", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486102853", "createdAt": "2020-09-10T06:47:10Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjI4MjAw", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-485628200", "createdAt": "2020-09-10T06:49:24Z", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0OToyNFrOHPlbWQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo0OToyNFrOHPlbWQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwMzg5Nw==", "bodyText": "can we refactor/rename moduleType to contentType ?", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486103897", "createdAt": "2020-09-10T06:49:24Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjI5MTA0", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-485629104", "createdAt": "2020-09-10T06:50:53Z", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo1MDo1M1rOHPleKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNjo1MDo1M1rOHPleKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjEwNDYxNw==", "bodyText": "can we have a more generic name i.e. instead of moduleTypeItems like contentTypeItems ?", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486104617", "createdAt": "2020-09-10T06:50:53Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/frontend/src/app/searchFilter.tsx", "diffHunk": "@@ -47,6 +47,7 @@ class SearchFilter extends Component<any, any> {\n \n     const moduleTypeItems = [", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjQxMDQ1", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-485641045", "createdAt": "2020-09-10T07:10:52Z", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxMDo1MlrOHPmEGA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xMFQwNzoxMDo1MlrOHPmEGA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4NjExNDMyOA==", "bodyText": "Can we initialize moduleTypeCondition outside if blocks, as it will remove code duplication ?\ni.e.\nStringBuilder contentTypeCondition = new StringBuilder();", "url": "https://github.com/redhataccess/pantheon/pull/410#discussion_r486114328", "createdAt": "2020-09-10T07:10:52Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/ModuleListingServlet.java", "diffHunk": "@@ -115,8 +115,15 @@ protected String getQuery(SlingHttpServletRequest request) {\n \n         // Module type filter\n         if(!Strings.isNullOrEmpty(type)) {\n-            StringBuilder moduleTypeCondition = new StringBuilder()\n-                    .append(\"*/*/*/*/metadata/@pant:moduleType = '\" + type + \"'\");\n+            StringBuilder moduleTypeCondition;\n+            if (type.equalsIgnoreCase(\"assembly\")) {\n+                moduleTypeCondition = new StringBuilder()\n+                        .append(\"@jcr:primaryType = 'pant:assembly'\");\n+            } else {\n+                moduleTypeCondition = new StringBuilder()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg1NjQyNDA2", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-485642406", "createdAt": "2020-09-10T07:12:58Z", "commit": {"oid": "f363b769c2411c5072747369c52da02666f26ea9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "28ad8941bc911b01ed9e6259bdd20645e93d8d2b", "author": {"user": {"login": "xdavidson", "name": "Lisa Davidson"}}, "url": "https://github.com/redhataccess/pantheon/commit/28ad8941bc911b01ed9e6259bdd20645e93d8d2b", "committedDate": "2020-09-10T15:28:41Z", "message": "code reivew fixes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2MDY1OTE5", "url": "https://github.com/redhataccess/pantheon/pull/410#pullrequestreview-486065919", "createdAt": "2020-09-10T15:38:42Z", "commit": {"oid": "28ad8941bc911b01ed9e6259bdd20645e93d8d2b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2029, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}