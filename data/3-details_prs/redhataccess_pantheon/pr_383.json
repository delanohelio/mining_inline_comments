{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDczMzMxMTUx", "number": 383, "title": "Making 'variant' required for publish servlets", "bodyText": "", "createdAt": "2020-08-25T16:47:13Z", "url": "https://github.com/redhataccess/pantheon/pull/383", "merged": true, "mergeCommit": {"oid": "76661865d815a776493f6b6812146099ec858696"}, "closed": true, "closedAt": "2020-09-01T14:50:20Z", "author": {"login": "benradey"}, "timelineItems": {"totalCount": 10, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdCaDiogH2gAyNDczMzMxMTUxOmQ1YjZjNDAwYmRiNWQzMzY5YjNmZDE3NmRmZWE1NjM1MWY2MGI3M2I=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdEoY4rgFqTQ3OTgwNTkyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/d5b6c400bdb5d3369b3fd176dfea56351f60b73b", "committedDate": "2020-08-25T16:46:29Z", "message": "Making 'variant' required for publish servlets"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzAwNjc2", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-475300676", "createdAt": "2020-08-26T09:11:56Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOToxMTo1NlrOHHDIPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOToxMTo1NlrOHHDIPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1MzM0MA==", "bodyText": "@benradey returning null directly in code, is not a good practice.\nAlso, as per our discussion on JCR changes, we are under impression, in case of no variant, it should create a default or return a default variant.\n@xdavidson Am i missing something here ?\nAlso, As a coding standard we should move, our hard coded variables in Constant Class.", "url": "https://github.com/redhataccess/pantheon/pull/383#discussion_r477153340", "createdAt": "2020-08-26T09:11:56Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/PublishDraftVersion.java", "diffHunk": "@@ -72,12 +73,17 @@ private Locale getLocale(SlingHttpServletRequest request) {\n     }\n \n     private String getVariant(SlingHttpServletRequest request) {\n-        return paramValue(request, \"variant\", DocumentVariant.DEFAULT_VARIANT_NAME);\n+        return paramValue(request, \"variant\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzA1NDgx", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-475305481", "createdAt": "2020-08-26T09:16:26Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOToxNjoyNlrOHHDX0g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwOToxNjoyNlrOHHDX0g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzE1NzMzMA==", "bodyText": "same comment as above", "url": "https://github.com/redhataccess/pantheon/pull/383#discussion_r477157330", "createdAt": "2020-08-26T09:16:26Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/UnpublishVersion.java", "diffHunk": "@@ -82,12 +83,17 @@ private Locale getLocale(SlingHttpServletRequest request) {\n     }\n \n     private String getVariant(SlingHttpServletRequest request) {\n-        return paramValue(request, \"variant\", DocumentVariant.DEFAULT_VARIANT_NAME);\n+        return paramValue(request, \"variant\", null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc1MzA2NDkw", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-475306490", "createdAt": "2020-08-26T09:17:52Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjcyOTky", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-477672992", "createdAt": "2020-08-28T12:06:07Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjowNjowN1rOHJAZPA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjowNjowN1rOHJAZPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTIwNTY5Mg==", "bodyText": "@benradey  Can you please add a test case for below block in PublishDraftVersionTest.java", "url": "https://github.com/redhataccess/pantheon/pull/383#discussion_r479205692", "createdAt": "2020-08-28T12:06:07Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/PublishDraftVersion.java", "diffHunk": "@@ -72,12 +73,17 @@ private Locale getLocale(SlingHttpServletRequest request) {\n     }\n \n     private String getVariant(SlingHttpServletRequest request) {\n-        return paramValue(request, \"variant\", DocumentVariant.DEFAULT_VARIANT_NAME);\n+        return paramValue(request, \"variant\", null);\n     }\n \n     @Override\n     public void run(SlingHttpServletRequest request, PostResponse response, SlingPostProcessor[] processors) {\n         logger.debug(\"Operation Publishinging draft version started\");\n+        String variant = getVariant(request);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3NjczNjMz", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-477673633", "createdAt": "2020-08-28T12:07:15Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjowNzoxNVrOHJAeNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yOFQxMjowNzoxNVrOHJAeNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTIwNjk2NA==", "bodyText": "add test case for below piece of code in UnpublishVersionTest.java", "url": "https://github.com/redhataccess/pantheon/pull/383#discussion_r479206964", "createdAt": "2020-08-28T12:07:15Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/UnpublishVersion.java", "diffHunk": "@@ -82,12 +83,17 @@ private Locale getLocale(SlingHttpServletRequest request) {\n     }\n \n     private String getVariant(SlingHttpServletRequest request) {\n-        return paramValue(request, \"variant\", DocumentVariant.DEFAULT_VARIANT_NAME);\n+        return paramValue(request, \"variant\", null);\n     }\n \n     @Override\n     public void run(SlingHttpServletRequest request, PostResponse response, SlingPostProcessor[] processors) {\n         logger.debug(\"Operation UnPublishinging draft version started\");\n+        String variant = getVariant(request);\n+        if (variant == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "originalPosition": 20}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc3Njc2MDQ4", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-477676048", "createdAt": "2020-08-28T12:11:19Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc4MDkxNzU5", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-478091759", "createdAt": "2020-08-29T02:43:21Z", "commit": {"oid": "d5b6c400bdb5d3369b3fd176dfea56351f60b73b"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ed81d73f8092aa831214a92e18e9e91cabfa5d88", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/ed81d73f8092aa831214a92e18e9e91cabfa5d88", "committedDate": "2020-08-31T17:36:47Z", "message": "Merge branch 'master' into publishVariantExceptions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDc5ODA1OTIx", "url": "https://github.com/redhataccess/pantheon/pull/383#pullrequestreview-479805921", "createdAt": "2020-09-01T14:36:19Z", "commit": {"oid": "ed81d73f8092aa831214a92e18e9e91cabfa5d88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2009, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}