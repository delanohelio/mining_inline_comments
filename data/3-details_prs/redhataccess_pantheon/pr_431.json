{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDk2NDE5NTc4", "number": 431, "title": "Fixing up hydra code, now provides url on unpublish", "bodyText": "", "createdAt": "2020-10-01T17:20:11Z", "url": "https://github.com/redhataccess/pantheon/pull/431", "merged": true, "mergeCommit": {"oid": "737ec2381d6e1839e16739c5e853d142b3be2079"}, "closed": true, "closedAt": "2020-10-09T17:52:17Z", "author": {"login": "benradey"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdOUov1gH2gAyNDk2NDE5NTc4OjM4N2U3MjEyYjU2ZTk5OGMyNzUzYTFjZDFlNzgwN2U3MmE4NjBlNzA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdQ5nT4gFqTUwNTg2NDU5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "387e7212b56e998c2753a1cd1e7807e72a860e70", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/387e7212b56e998c2753a1cd1e7807e72a860e70", "committedDate": "2020-10-01T17:14:47Z", "message": "Fixing up hydra code, now provides url on unpublish"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc745a14ac2ebc571708f441caa85420a5df65e8", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/dc745a14ac2ebc571708f441caa85420a5df65e8", "committedDate": "2020-10-01T17:19:28Z", "message": "extra code cleanup"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "347a423ceff1e28d1537694cc8aa46c784a5e681", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/347a423ceff1e28d1537694cc8aa46c784a5e681", "committedDate": "2020-10-01T17:38:15Z", "message": "Fixing url structure"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "889eb4d9e5392f40210fff17657b68e8460f6eb1", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/889eb4d9e5392f40210fff17657b68e8460f6eb1", "committedDate": "2020-10-07T20:27:22Z", "message": "Possibly fixing uncaught throwable found by Lisa"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb", "committedDate": "2020-10-09T14:13:41Z", "message": "modifying locale to fit customer portal"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1NzMzNDk1", "url": "https://github.com/redhataccess/pantheon/pull/431#pullrequestreview-505733495", "createdAt": "2020-10-09T14:38:01Z", "commit": {"oid": "7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNDozODowMlrOHfMgpg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0wOVQxNDozODowMlrOHfMgpg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwMjQ3Mjg3MA==", "bodyText": "we have a method in ServletUtils that transforms the locale to language tag. see\nhttps://github.com/redhataccess/pantheon/blob/master/pantheon-bundle/src/main/java/com/redhat/pantheon/servlet/module/VariantJsonServlet.java#L109", "url": "https://github.com/redhataccess/pantheon/pull/431#discussion_r502472870", "createdAt": "2020-10-09T14:38:02Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/src/main/java/com/redhat/pantheon/extension/url/CustomerPortalUrlUuidProvider.java", "diffHunk": "@@ -30,10 +30,10 @@ public String generateUrlString(DocumentVariant variant) {\n             ProductVersion pv = metadata.productVersion().getReference();\n             StringBuilder sb = new StringBuilder(getHost(variant.getResourceResolver()));\n             sb.append(URL_PREFIX)\n-                    .append(getLocale(variant)).append(\"/\")\n-                    .append(getDocumentType(variant)).append(\"/\")\n+                    .append(getLocale(variant).replaceAll(\"_\", \"-\").toLowerCase()).append(\"/\") // turns en_US into en-us which is likely a customer portal requirement (need to confirm)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "7253c350e1f8e6bc187ec77ddd9ade3b80ccd2fb"}, "originalPosition": 6}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "567624583f758849572f2843cc41b0edb51d3a88", "author": {"user": {"login": "benradey", "name": "Ben Radey"}}, "url": "https://github.com/redhataccess/pantheon/commit/567624583f758849572f2843cc41b0edb51d3a88", "committedDate": "2020-10-09T15:58:48Z", "message": "Refactor to use servlet utils"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTA1ODY0NTkx", "url": "https://github.com/redhataccess/pantheon/pull/431#pullrequestreview-505864591", "createdAt": "2020-10-09T17:27:33Z", "commit": {"oid": "567624583f758849572f2843cc41b0edb51d3a88"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1887, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}