{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTEyMDY5NTk1", "number": 459, "title": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up.", "bodyText": "This PR:\n\nRaises event when the publish/unpublish happens (in versions component)\nHandles the event in module display and assembly display componnets\nIf event is publish, calls the API endpoint to get the URL.\nIf the response is not empty, set the URL\nIf the response is empty, construct the url on the client side.", "createdAt": "2020-10-29T07:10:47Z", "url": "https://github.com/redhataccess/pantheon/pull/459", "merged": true, "mergeCommit": {"oid": "97487cddefec0042704cf04a2c1adeeaf72afd07"}, "closed": true, "closedAt": "2020-10-29T09:46:15Z", "author": {"login": "aprajshekhar"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdXMph9gH2gAyNTEyMDY5NTk1Ojk5MmJmYzM0NDgwNzNlYTg2NWM1NTRlNDJlNDg5OThhOGU1MTJmMTk=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXOzwpAFqTUxOTQ3OTU2Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "992bfc3448073ea865c554e42e48998a8e512f19", "author": {"user": {"login": "aprajshekhar", "name": "A.P.Rajshekhar"}}, "url": "https://github.com/redhataccess/pantheon/commit/992bfc3448073ea865c554e42e48998a8e512f19", "committedDate": "2020-10-29T07:01:43Z", "message": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NDM2Njgx", "url": "https://github.com/redhataccess/pantheon/pull/459#pullrequestreview-519436681", "createdAt": "2020-10-29T08:39:08Z", "commit": {"oid": "992bfc3448073ea865c554e42e48998a8e512f19"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NDM5NTIw", "url": "https://github.com/redhataccess/pantheon/pull/459#pullrequestreview-519439520", "createdAt": "2020-10-29T08:43:07Z", "commit": {"oid": "992bfc3448073ea865c554e42e48998a8e512f19"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwODo0MzowOFrOHqRgwQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yOVQwODo0MzowOFrOHqRgwQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNDA4OTE1Mw==", "bodyText": "In future can we check if publish event can have different approach for this condition ?", "url": "https://github.com/redhataccess/pantheon/pull/459#discussion_r514089153", "createdAt": "2020-10-29T08:43:08Z", "author": {"login": "rednitish"}, "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "diffHunk": "@@ -271,10 +281,33 @@ class AssemblyDisplay extends Component<any, IAssemblyDisplayState> {\n     }\n \n     private onPublishEvent = () => {\n-        this.getVersionUUID(this.props.location.pathname)\n-        setTimeout(()=> {\n-            this.getPortalUrl(this.props.location.pathname.substring(PathPrefixes.MODULE_PATH_PREFIX.length), this.state.variant)\n-        }, 500)\n+        // try to get the url from api only if the component has been published\n+        if (this.state.releaseUpdateDate.trim() !== \"\"\n+        && this.state.releaseUpdateDate.length >= 15 ?\n+            new Intl.DateTimeFormat(\"en-GB\", { year: \"numeric\", month: \"long\", day: \"numeric\" }).format(new Date(this.state.releaseUpdateDate)) : \"--\") {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "992bfc3448073ea865c554e42e48998a8e512f19"}, "originalPosition": 44}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6241337d74491129ac78fb1c7ceb509c05e32648", "author": {"user": {"login": "aprajshekhar", "name": "A.P.Rajshekhar"}}, "url": "https://github.com/redhataccess/pantheon/commit/6241337d74491129ac78fb1c7ceb509c05e32648", "committedDate": "2020-10-29T08:59:11Z", "message": "CCS-3812: Module details page needs to be refreshed for the \"View on portal\" link to show-up. Code review changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5NDc5NTYy", "url": "https://github.com/redhataccess/pantheon/pull/459#pullrequestreview-519479562", "createdAt": "2020-10-29T09:32:42Z", "commit": {"oid": "6241337d74491129ac78fb1c7ceb509c05e32648"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1906, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}