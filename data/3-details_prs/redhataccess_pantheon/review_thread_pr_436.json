{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTAzMTcwNDk2", "number": 436, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo0ODoyNFrOEtncvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo1MDowM1rOEtnfEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjY3NzA5OnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo0ODoyNFrOHhghOA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMjo1Mzo0MFrOHhu8FQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5Nzg0OA==", "bodyText": "assemblyDisplay doesn't have issue with  \"\"View on Customer Portal\" link when publishing. This code is not neccessary.", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r504897848", "createdAt": "2020-10-14T18:48:24Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "diffHunk": "@@ -254,6 +254,10 @@ class AssemblyDisplay extends Component<any, any, any> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf421bf9658b18849e163f4e196f901655492c28"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTEzNDEwMQ==", "bodyText": "I am seeing this issue on QA for assembly when I am publishing the assembly for the first time. Let's discuss this as well in the PR review meeting that I have setup.", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r505134101", "createdAt": "2020-10-15T02:53:40Z", "author": {"login": "aprajshekhar"}, "path": "pantheon-bundle/frontend/src/app/assemblyDisplay.tsx", "diffHunk": "@@ -254,6 +254,10 @@ class AssemblyDisplay extends Component<any, any, any> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5Nzg0OA=="}, "originalCommit": {"oid": "bf421bf9658b18849e163f4e196f901655492c28"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2MjY4MzA1OnYy", "diffSide": "RIGHT", "path": "pantheon-bundle/frontend/src/app/moduleDisplay.tsx", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNFQxODo1MDowM1rOHhgk4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQwMjozNTowM1rOHhum_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5ODc4NQ==", "bodyText": "I don't believe this fix the underlining problem. The reason on Module display, \"View on Customer Portal\" link doesn't show up when publishing is because, you need add this method call in public componentDidMount() method:\nthis.getPortalUrl()", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r504898785", "createdAt": "2020-10-14T18:50:03Z", "author": {"login": "xdavidson"}, "path": "pantheon-bundle/frontend/src/app/moduleDisplay.tsx", "diffHunk": "@@ -306,6 +306,10 @@ class ModuleDisplay extends Component<any, IModuleDisplayState> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "bf421bf9658b18849e163f4e196f901655492c28"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTEyODcwMw==", "bodyText": "Thanks for the comment. this.getPortalUrl() already gets called from fetchModuleDetails() which gets called from  componentDidMount. Calling the this.getPortalUrl() will be required from publish event handler if the module has not been published at all or unpublished and republished.\nAlso, there is a time gap between 200 OK received and the actual JCR updates happening in the backend. I have setup a meeting on Monday to discuss this PR.", "url": "https://github.com/redhataccess/pantheon/pull/436#discussion_r505128703", "createdAt": "2020-10-15T02:35:03Z", "author": {"login": "aprajshekhar"}, "path": "pantheon-bundle/frontend/src/app/moduleDisplay.tsx", "diffHunk": "@@ -306,6 +306,10 @@ class ModuleDisplay extends Component<any, IModuleDisplayState> {\n \n     private onPublishEvent = () => {\n         this.getVersionUUID(this.props.location.pathname)\n+        // wait for 1 second so that JCR data gets updated", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNDg5ODc4NQ=="}, "originalCommit": {"oid": "bf421bf9658b18849e163f4e196f901655492c28"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 92, "cost": 1, "resetAt": "2021-11-13T12:10:21Z"}}}