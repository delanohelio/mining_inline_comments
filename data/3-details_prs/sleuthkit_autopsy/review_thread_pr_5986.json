{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDM1OTE4MjU5", "number": 5986, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODoyNDowM1rOEGduow==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNDowMFrOEGd7mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjEzOTg3OnYy", "diffSide": "RIGHT", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/MessageAccountPanel.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODoyNDowM1rOGlRzzw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODoyNDowM1rOGlRzzw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0MjI4Nw==", "bodyText": "Update header.", "url": "https://github.com/sleuthkit/autopsy/pull/5986#discussion_r441742287", "createdAt": "2020-06-17T18:24:03Z", "author": {"login": "raman-bt"}, "path": "Core/src/org/sleuthkit/autopsy/contentviewers/MessageAccountPanel.java", "diffHunk": "@@ -0,0 +1,408 @@\n+/*", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73e202905f7b7e3522bca7d4768a00aa5e1b2da0"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjc1MjE3MzA0OnYy", "diffSide": "RIGHT", "path": "Core/src/org/sleuthkit/autopsy/contentviewers/MessageAccountPanel.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozNDowMFrOGlSJXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xN1QxODozODoyNVrOGlSTHA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzgwNQ==", "bodyText": "I think some where there should be a check for CR.isEnabled(), and if not, no persona searches should be made, and persona labels/buttons should be disabled...?", "url": "https://github.com/sleuthkit/autopsy/pull/5986#discussion_r441747805", "createdAt": "2020-06-17T18:34:00Z", "author": {"login": "raman-bt"}, "path": "Core/src/org/sleuthkit/autopsy/contentviewers/MessageAccountPanel.java", "diffHunk": "@@ -0,0 +1,408 @@\n+/*\n+ * To change this license header, choose License Headers in Project Properties.\n+ * To change this template file, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.sleuthkit.autopsy.contentviewers;\n+\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.concurrent.CancellationException;\n+import java.util.concurrent.ExecutionException;\n+import java.util.logging.Level;\n+import javax.swing.GroupLayout;\n+import javax.swing.GroupLayout.Alignment;\n+import javax.swing.GroupLayout.ParallelGroup;\n+import javax.swing.GroupLayout.SequentialGroup;\n+import javax.swing.JButton;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.LayoutStyle.ComponentPlacement;\n+import javax.swing.SwingUtilities;\n+import javax.swing.SwingWorker;\n+import org.openide.util.Exceptions;\n+import org.openide.util.NbBundle.Messages;\n+import org.sleuthkit.autopsy.casemodule.Case;\n+import org.sleuthkit.autopsy.centralrepository.datamodel.Persona;\n+import org.sleuthkit.autopsy.centralrepository.datamodel.PersonaAccount;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialog;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialogCallback;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsMode;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsPanel;\n+import org.sleuthkit.autopsy.coreutils.Logger;\n+import org.sleuthkit.datamodel.Account;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+import org.sleuthkit.datamodel.CommunicationsManager;\n+import org.sleuthkit.datamodel.TskCoreException;\n+\n+/**\n+ * Panel for displaying accounts and their persona information.\n+ *\n+ */\n+final class MessageAccountPanel extends JPanel {\n+\n+    private static final long serialVersionUID = 1L;\n+    private final static Logger logger = Logger.getLogger(MessageAccountPanel.class.getName());\n+\n+    private AccountFetcher currentFetcher = null;\n+\n+    /**\n+     * Set the new artifact for the panel.\n+     *\n+     * @param artifact\n+     *\n+     * @throws TskCoreException\n+     */\n+    void setArtifact(BlackboardArtifact artifact) {\n+        this.removeAll();\n+        repaint();\n+\n+        if (artifact == null) {\n+            return;\n+        }\n+\n+        if (currentFetcher != null && !currentFetcher.isDone()) {\n+            currentFetcher.cancel(true);\n+        }\n+\n+        currentFetcher = new AccountFetcher(artifact);\n+        currentFetcher.execute();\n+    }\n+\n+    /**\n+     * Swingworker that fetches the accounts for a given artifact\n+     */\n+    class AccountFetcher extends SwingWorker<List<AccountContainer>, Void> {\n+\n+        private final BlackboardArtifact artifact;\n+\n+        /**\n+         * Construct a new AccountFetcher.\n+         *\n+         * @param artifact The artifact to get accounts for.\n+         */\n+        AccountFetcher(BlackboardArtifact artifact) {\n+            this.artifact = artifact;\n+        }\n+\n+        @Override\n+        protected List<AccountContainer> doInBackground() throws Exception {\n+            List<AccountContainer> dataList = new ArrayList<>();\n+\n+            CommunicationsManager commManager = Case.getCurrentCase().getSleuthkitCase().getCommunicationsManager();\n+            List<Account> accountList = commManager.getAccountsRelatedToArtifact(artifact);\n+            for (Account account : accountList) {\n+                if (isCancelled()) {\n+                    return new ArrayList<>();\n+                }\n+\n+                Collection<PersonaAccount> personAccounts = PersonaAccount.getPersonaAccountsForAccount(account);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "73e202905f7b7e3522bca7d4768a00aa5e1b2da0"}, "originalPosition": 102}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc1MDMwMA==", "bodyText": "I disabled the tab if Cr.isEnabled is fasle.  See MessageArtifactViewer setArtifact.", "url": "https://github.com/sleuthkit/autopsy/pull/5986#discussion_r441750300", "createdAt": "2020-06-17T18:38:25Z", "author": {"login": "kellykelly3"}, "path": "Core/src/org/sleuthkit/autopsy/contentviewers/MessageAccountPanel.java", "diffHunk": "@@ -0,0 +1,408 @@\n+/*\n+ * To change this license header, choose License Headers in Project Properties.\n+ * To change this template file, choose Tools | Templates\n+ * and open the template in the editor.\n+ */\n+package org.sleuthkit.autopsy.contentviewers;\n+\n+import java.awt.event.ActionEvent;\n+import java.awt.event.ActionListener;\n+import java.util.ArrayList;\n+import java.util.Collection;\n+import java.util.List;\n+import java.util.concurrent.CancellationException;\n+import java.util.concurrent.ExecutionException;\n+import java.util.logging.Level;\n+import javax.swing.GroupLayout;\n+import javax.swing.GroupLayout.Alignment;\n+import javax.swing.GroupLayout.ParallelGroup;\n+import javax.swing.GroupLayout.SequentialGroup;\n+import javax.swing.JButton;\n+import javax.swing.JLabel;\n+import javax.swing.JPanel;\n+import javax.swing.LayoutStyle.ComponentPlacement;\n+import javax.swing.SwingUtilities;\n+import javax.swing.SwingWorker;\n+import org.openide.util.Exceptions;\n+import org.openide.util.NbBundle.Messages;\n+import org.sleuthkit.autopsy.casemodule.Case;\n+import org.sleuthkit.autopsy.centralrepository.datamodel.Persona;\n+import org.sleuthkit.autopsy.centralrepository.datamodel.PersonaAccount;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialog;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsDialogCallback;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsMode;\n+import org.sleuthkit.autopsy.centralrepository.persona.PersonaDetailsPanel;\n+import org.sleuthkit.autopsy.coreutils.Logger;\n+import org.sleuthkit.datamodel.Account;\n+import org.sleuthkit.datamodel.BlackboardArtifact;\n+import org.sleuthkit.datamodel.CommunicationsManager;\n+import org.sleuthkit.datamodel.TskCoreException;\n+\n+/**\n+ * Panel for displaying accounts and their persona information.\n+ *\n+ */\n+final class MessageAccountPanel extends JPanel {\n+\n+    private static final long serialVersionUID = 1L;\n+    private final static Logger logger = Logger.getLogger(MessageAccountPanel.class.getName());\n+\n+    private AccountFetcher currentFetcher = null;\n+\n+    /**\n+     * Set the new artifact for the panel.\n+     *\n+     * @param artifact\n+     *\n+     * @throws TskCoreException\n+     */\n+    void setArtifact(BlackboardArtifact artifact) {\n+        this.removeAll();\n+        repaint();\n+\n+        if (artifact == null) {\n+            return;\n+        }\n+\n+        if (currentFetcher != null && !currentFetcher.isDone()) {\n+            currentFetcher.cancel(true);\n+        }\n+\n+        currentFetcher = new AccountFetcher(artifact);\n+        currentFetcher.execute();\n+    }\n+\n+    /**\n+     * Swingworker that fetches the accounts for a given artifact\n+     */\n+    class AccountFetcher extends SwingWorker<List<AccountContainer>, Void> {\n+\n+        private final BlackboardArtifact artifact;\n+\n+        /**\n+         * Construct a new AccountFetcher.\n+         *\n+         * @param artifact The artifact to get accounts for.\n+         */\n+        AccountFetcher(BlackboardArtifact artifact) {\n+            this.artifact = artifact;\n+        }\n+\n+        @Override\n+        protected List<AccountContainer> doInBackground() throws Exception {\n+            List<AccountContainer> dataList = new ArrayList<>();\n+\n+            CommunicationsManager commManager = Case.getCurrentCase().getSleuthkitCase().getCommunicationsManager();\n+            List<Account> accountList = commManager.getAccountsRelatedToArtifact(artifact);\n+            for (Account account : accountList) {\n+                if (isCancelled()) {\n+                    return new ArrayList<>();\n+                }\n+\n+                Collection<PersonaAccount> personAccounts = PersonaAccount.getPersonaAccountsForAccount(account);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MTc0NzgwNQ=="}, "originalCommit": {"oid": "73e202905f7b7e3522bca7d4768a00aa5e1b2da0"}, "originalPosition": 102}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 543, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}