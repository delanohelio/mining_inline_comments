{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzg0NTE2Nzk5", "number": 5683, "title": "6020 viber parser produces an illegal argument exception from comm helper", "bodyText": "", "createdAt": "2020-03-05T21:46:21Z", "url": "https://github.com/sleuthkit/autopsy/pull/5683", "merged": true, "mergeCommit": {"oid": "c78c38e8700af23b6e852f03fd9846000e4c492a"}, "closed": true, "closedAt": "2020-03-16T19:54:23Z", "author": {"login": "markmckinnon"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcJwBgEgH2gAyMzg0NTE2Nzk5OmJkNWY4NDZkMjQ2YWEwMTU5MTlkYzQzNWM2MjkyZWE3NWM5MjhjNGY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcOFUNIgFqTM3NDg5MDY1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "bd5f846d246aa015919dc435c6292ea75c928c4f", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/bd5f846d246aa015919dc435c6292ea75c928c4f", "committedDate": "2020-03-02T16:08:29Z", "message": "Update viber.py\n\nAdded the coalesce sqlite function to the sql statement, this function will return the first column included in it that does not contain a null value."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "64d73e04348572539f174820c5888450b8015787", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/64d73e04348572539f174820c5888450b8015787", "committedDate": "2020-03-05T21:44:23Z", "message": "Update viber.py\n\nIf contact does not have an email or phone number then create a TSK_Contact artifact outside of comms helper so we do not loose the contact."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcxMjU4ODc1", "url": "https://github.com/sleuthkit/autopsy/pull/5683#pullrequestreview-371258875", "createdAt": "2020-03-09T15:00:39Z", "commit": {"oid": "64d73e04348572539f174820c5888450b8015787"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxNTowMDozOVrOFzsTXA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wOVQxNTowMjoyNFrOFzsYPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0NzU0OA==", "bodyText": "If this value is a String, I think we should check for blankness too. Blankness can be described as the following conditions:\nis_blank(None) //True\nis_blank(\"\") //True\nis_blank(\"   \") //True", "url": "https://github.com/sleuthkit/autopsy/pull/5683#discussion_r389747548", "createdAt": "2020-03-09T15:00:39Z", "author": {"login": "dannysmyda"}, "path": "InternalPythonModules/android/viber.py", "diffHunk": "@@ -117,13 +117,28 @@ def parse_contacts(self, contacts_db, helper):\n         try:\n             contacts_parser = ViberContactsParser(contacts_db)\n             while contacts_parser.next():\n-                helper.addContact( \n-                    contacts_parser.get_contact_name(), \n-                    contacts_parser.get_phone(),\n-                    contacts_parser.get_home_phone(),\n-                    contacts_parser.get_mobile_phone(),\n-                    contacts_parser.get_email()\n-                )\n+                if contacts_parser.get_phone() is not None:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64d73e04348572539f174820c5888450b8015787"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4OTc0ODc5Ng==", "bodyText": "I think this should check for blankness as well.\nelif not is_blank(contacts_parser.get_contact_name())", "url": "https://github.com/sleuthkit/autopsy/pull/5683#discussion_r389748796", "createdAt": "2020-03-09T15:02:24Z", "author": {"login": "dannysmyda"}, "path": "InternalPythonModules/android/viber.py", "diffHunk": "@@ -117,13 +117,28 @@ def parse_contacts(self, contacts_db, helper):\n         try:\n             contacts_parser = ViberContactsParser(contacts_db)\n             while contacts_parser.next():\n-                helper.addContact( \n-                    contacts_parser.get_contact_name(), \n-                    contacts_parser.get_phone(),\n-                    contacts_parser.get_home_phone(),\n-                    contacts_parser.get_mobile_phone(),\n-                    contacts_parser.get_email()\n-                )\n+                if contacts_parser.get_phone() is not None:\n+                    helper.addContact( \n+                        contacts_parser.get_contact_name(), \n+                        contacts_parser.get_phone(),\n+                        contacts_parser.get_home_phone(),\n+                        contacts_parser.get_mobile_phone(),\n+                        contacts_parser.get_email()\n+                    )\n+                else:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "64d73e04348572539f174820c5888450b8015787"}, "originalPosition": 19}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d6bc88d0d4ca5a8fc5cc17814aefd0e420c473ba", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/d6bc88d0d4ca5a8fc5cc17814aefd0e420c473ba", "committedDate": "2020-03-11T13:53:26Z", "message": "Merge branch 'develop' into 6020-Viber-Parser-produces-an-IllegalArgumentException-from-CommHelper"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "276242d3192a029064869020b91a35fcb1c42e33", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/276242d3192a029064869020b91a35fcb1c42e33", "committedDate": "2020-03-11T15:10:02Z", "message": "Update viber.py\n\nAdded check for only spaces, blanks and special characters."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODI3ODkz", "url": "https://github.com/sleuthkit/autopsy/pull/5683#pullrequestreview-374827893", "createdAt": "2020-03-15T19:46:54Z", "commit": {"oid": "276242d3192a029064869020b91a35fcb1c42e33"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxOTo0Njo1NFrOF2g3cg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xNVQxOTo0Njo1NFrOF2g3cg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MjcwNTkwNg==", "bodyText": "I think we should use the catch block around the while loop or, in other words, just omit the block here.", "url": "https://github.com/sleuthkit/autopsy/pull/5683#discussion_r392705906", "createdAt": "2020-03-15T19:46:54Z", "author": {"login": "dannysmyda"}, "path": "InternalPythonModules/android/viber.py", "diffHunk": "@@ -117,13 +117,29 @@ def parse_contacts(self, contacts_db, helper):\n         try:\n             contacts_parser = ViberContactsParser(contacts_db)\n             while contacts_parser.next():\n-                helper.addContact( \n-                    contacts_parser.get_contact_name(), \n-                    contacts_parser.get_phone(),\n-                    contacts_parser.get_home_phone(),\n-                    contacts_parser.get_mobile_phone(),\n-                    contacts_parser.get_email()\n-                )\n+                if (not(not contacts_parser.get_phone() or contacts_parser.get_phone().isspace())):\n+                    helper.addContact( \n+                        contacts_parser.get_contact_name(), \n+                        contacts_parser.get_phone(),\n+                        contacts_parser.get_home_phone(),\n+                        contacts_parser.get_mobile_phone(),\n+                        contacts_parser.get_email()\n+                    )\n+                # Check if contact_name is blank and if it is not create a TSK_CONTACT otherwise ignore as not Contact Info\n+                elif (not(not contacts_parser.get_contact_name() or contacts_parser.get_contact_name().isspace())):\n+                    current_case = Case.getCurrentCase().getSleuthkitCase()\n+                    attributes = ArrayList()\n+                    artifact = contacts_db.getDBFile().newArtifact(BlackboardArtifact.ARTIFACT_TYPE.TSK_CONTACT)\n+                    attributes.add(BlackboardAttribute(BlackboardAttribute.ATTRIBUTE_TYPE.TSK_NAME.getTypeID(), self._PARSER_NAME, contacts_parser.get_contact_name()))\n+                    artifact.addAttributes(attributes)\n+                    \n+                    try:\n+                    # Post the artifact to blackboard\n+                       current_case.getBlackboard().postArtifact(artifact, self._PARSER_NAME)\n+                    except Blackboard.BlackboardException as e:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "276242d3192a029064869020b91a35fcb1c42e33"}, "originalPosition": 30}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "af2842925f7263024587de2f64c7733af6f2bd3b", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/af2842925f7263024587de2f64c7733af6f2bd3b", "committedDate": "2020-03-16T01:07:08Z", "message": "Update viber.py\n\nAddress comments, remove inner try block."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc0ODkwNjUx", "url": "https://github.com/sleuthkit/autopsy/pull/5683#pullrequestreview-374890651", "createdAt": "2020-03-16T03:12:37Z", "commit": {"oid": "af2842925f7263024587de2f64c7733af6f2bd3b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2789, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}