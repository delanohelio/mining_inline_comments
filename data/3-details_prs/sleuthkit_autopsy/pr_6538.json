{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM1MTU5MDM3", "number": 6538, "title": "[MultiUserTestTool] fix for wrong created temporary file", "bodyText": "Hello,\nafter setting up a multi user environment in Linux the test fails and tells me that I have insufficient privileges to create a file.\nI tracked the error down when the MultiUserTestTool class is creating a temporary file: \n  \n    \n      autopsy/Experimental/src/org/sleuthkit/autopsy/experimental/configuration/MultiUserTestTool.java\n    \n    \n         Line 156\n      in\n      4c66d9b\n    \n    \n    \n    \n\n        \n          \n           String tempFilePath = System.getProperty(\"java.io.tmpdir\") + TEST_FILE_NAME + \"_\" + TimeStampUtils.createTimeStamp() + \".txt\"; \n        \n    \n  \n\n\nThe problem is that at least in Linux the environment variable java.io.tmpdir contains by default the string: \"/tmp\"\nThat means the concatenation will create a string like that:\nString tempFilePath = \"/tmpAutopsyTempFile_<timestamp>.txt\"\nSo autopsy tries to create a file in the root directory /. But the file should be created in the /tmp directory.\nWith my fix there's a java.nio.file.Path object is created, which is more platform independent. An object of this type is created later anyway.", "createdAt": "2020-12-09T12:54:25Z", "url": "https://github.com/sleuthkit/autopsy/pull/6538", "merged": true, "mergeCommit": {"oid": "db33a79e18ec2309836cf90e4cfd4a04e0d46f74"}, "closed": true, "closedAt": "2020-12-17T14:22:08Z", "author": {"login": "mammo0"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkeE33gH2gAyNTM1MTU5MDM3OmI5OWRhM2U0YTBmY2M2OTFlNTM5ZjcyZTA0MTQ5YTUxMDhiYjU5ZjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdktX4HgH2gAyNTM1MTU5MDM3OjIwYzdjZTUzYTBlOWY1N2QxM2ViZThiYTE3MTgxN2IzZjZhZjVmZDk=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "b99da3e4a0fcc691e539f72e04149a5108bb59f4", "author": {"user": {"login": "mammo0", "name": null}}, "url": "https://github.com/sleuthkit/autopsy/commit/b99da3e4a0fcc691e539f72e04149a5108bb59f4", "committedDate": "2020-12-09T12:40:59Z", "message": "[MultiUserTestTool] fix for wrong created temporary file"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4Mzg0NDIw", "url": "https://github.com/sleuthkit/autopsy/pull/6538#pullrequestreview-548384420", "createdAt": "2020-12-09T16:46:40Z", "commit": {"oid": "b99da3e4a0fcc691e539f72e04149a5108bb59f4"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjo0Njo0MFrOICeoaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOVQxNjo0Njo0MFrOICeoaQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzOTQ2OTkyOQ==", "bodyText": "You might want to update the comment since the code is no longer Windows specific.", "url": "https://github.com/sleuthkit/autopsy/pull/6538#discussion_r539469929", "createdAt": "2020-12-09T16:46:40Z", "author": {"login": "esaunders"}, "path": "Experimental/src/org/sleuthkit/autopsy/experimental/configuration/MultiUserTestTool.java", "diffHunk": "@@ -153,16 +154,16 @@ static String runTest(String rootOutputDirectory) {\n             }\n \n             // Make a text file in Windows TEMP folder \n-            String tempFilePath = System.getProperty(\"java.io.tmpdir\") + TEST_FILE_NAME + \"_\" + TimeStampUtils.createTimeStamp() + \".txt\";\n+            Path tempFilePath = Paths.get(System.getProperty(\"java.io.tmpdir\"), TEST_FILE_NAME + \"_\" + TimeStampUtils.createTimeStamp() + \".txt\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b99da3e4a0fcc691e539f72e04149a5108bb59f4"}, "originalPosition": 13}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ4NjEyOTIx", "url": "https://github.com/sleuthkit/autopsy/pull/6538#pullrequestreview-548612921", "createdAt": "2020-12-09T21:12:10Z", "commit": {"oid": "b99da3e4a0fcc691e539f72e04149a5108bb59f4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "20c7ce53a0e9f57d13ebe8ba171817b3f6af5fd9", "author": {"user": {"login": "mammo0", "name": null}}, "url": "https://github.com/sleuthkit/autopsy/commit/20c7ce53a0e9f57d13ebe8ba171817b3f6af5fd9", "committedDate": "2020-12-10T06:30:19Z", "message": "[MultiUserTestTool] updated comment for temp file"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2811, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}