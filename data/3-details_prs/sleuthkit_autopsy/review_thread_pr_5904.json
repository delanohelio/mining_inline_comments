{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMTU2MDU1", "number": 5904, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNTo0MlrOD_BYRg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNzo1MVrOD_BaqQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDA5NDc4OnYy", "diffSide": "RIGHT", "path": "thirdparty/rr-full/plugins/eventlogs.pl", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNTo0MlrOGZelKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQwMjozMTo0NFrOGi1GPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODYxNg==", "bodyText": "Are these and the changes in all other .pl files still part of the upgrade or are these yours?", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r429368616", "createdAt": "2020-05-22T17:25:42Z", "author": {"login": "dannysmyda"}, "path": "thirdparty/rr-full/plugins/eventlogs.pl", "diffHunk": "@@ -57,9 +57,11 @@ sub pluginmain {\n \t\t\t::rptMsg($win_path);\n \t\t\t::rptMsg(\"LastWrite Time \".gmtime($win->get_timestamp()).\" (UTC)\");\n \t\t\tmy $cn;\n-\t\t\tif ($cn = $win->get_value(\"ComputerName\")->get_data()) {\n-\t\t\t\t::rptMsg(\"ComputerName = \".$cn);\t\t\t\t\n-\t\t\t}\n+            if (defined($win->get_value(\"ComputerName\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ1MjQ3Nw==", "bodyText": "These changes are fixes to undefined values that cause an error in the plugin and it will not completely execute.  These are separate from the upgrade PR.", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r430452477", "createdAt": "2020-05-26T14:24:06Z", "author": {"login": "markmckinnon"}, "path": "thirdparty/rr-full/plugins/eventlogs.pl", "diffHunk": "@@ -57,9 +57,11 @@ sub pluginmain {\n \t\t\t::rptMsg($win_path);\n \t\t\t::rptMsg(\"LastWrite Time \".gmtime($win->get_timestamp()).\" (UTC)\");\n \t\t\tmy $cn;\n-\t\t\tif ($cn = $win->get_value(\"ComputerName\")->get_data()) {\n-\t\t\t\t::rptMsg(\"ComputerName = \".$cn);\t\t\t\t\n-\t\t\t}\n+            if (defined($win->get_value(\"ComputerName\"))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODYxNg=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA3MTY5Ng==", "bodyText": "Okay, should these changes also be submitted to the RegRipper project? Reason I ask is that if we ever upgrade again these changes will get lost.", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r439071696", "createdAt": "2020-06-11T21:08:20Z", "author": {"login": "dannysmyda"}, "path": "thirdparty/rr-full/plugins/eventlogs.pl", "diffHunk": "@@ -57,9 +57,11 @@ sub pluginmain {\n \t\t\t::rptMsg($win_path);\n \t\t\t::rptMsg(\"LastWrite Time \".gmtime($win->get_timestamp()).\" (UTC)\");\n \t\t\tmy $cn;\n-\t\t\tif ($cn = $win->get_value(\"ComputerName\")->get_data()) {\n-\t\t\t\t::rptMsg(\"ComputerName = \".$cn);\t\t\t\t\n-\t\t\t}\n+            if (defined($win->get_value(\"ComputerName\"))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODYxNg=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTE3NDcxNw==", "bodyText": "Regripper 2.8 is no longer being supported as of 5/28/2020 according to this http://windowsir.blogspot.com/2020/05/regripper-v30.html so adding a PR to it will never happen as this is end of life for this version we are using.", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r439174717", "createdAt": "2020-06-12T02:31:44Z", "author": {"login": "markmckinnon"}, "path": "thirdparty/rr-full/plugins/eventlogs.pl", "diffHunk": "@@ -57,9 +57,11 @@ sub pluginmain {\n \t\t\t::rptMsg($win_path);\n \t\t\t::rptMsg(\"LastWrite Time \".gmtime($win->get_timestamp()).\" (UTC)\");\n \t\t\tmy $cn;\n-\t\t\tif ($cn = $win->get_value(\"ComputerName\")->get_data()) {\n-\t\t\t\t::rptMsg(\"ComputerName = \".$cn);\t\t\t\t\n-\t\t\t}\n+            if (defined($win->get_value(\"ComputerName\"))) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODYxNg=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 7}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjY3NDEwMDg5OnYy", "diffSide": "RIGHT", "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNzo1MVrOGZeo_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xMlQxMzozNjo0NlrOGjEOMw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTU5Nw==", "bodyText": "Would it be worth also sending a notification to the user to let them know? Or is the fact that we are running regripper not explicitly stated in the Recent Activity module description?", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r429369597", "createdAt": "2020-05-22T17:27:51Z", "author": {"login": "dannysmyda"}, "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "diffHunk": "@@ -418,10 +418,31 @@ private RegOutputFiles ripRegistryFile(String regFilePath, String outFilePathBas\n             String errFilePath = outFilePathBase + \"-full.err.txt\"; //NON-NLS\n             logger.log(Level.INFO, \"Writing Full RegRipper results to: {0}\", regOutputFiles.fullPlugins); //NON-NLS\n             executeRegRipper(rrFullCmd, rrFullHome, regFilePath, fullType, regOutputFiles.fullPlugins, errFilePath);\n+            try {\n+                scanErrorLogs(errFilePath);\n+            } catch (IOException ex) {\n+            logger.log(Level.SEVERE, \"Unable to run RegRipper\", ex); //NON-NLS\n+            this.addErrorMessage(NbBundle.getMessage(this.getClass(), \"ExtractRegistry.execRegRip.errMsg.failedAnalyzeRegFile\", this.getName()));\n+        } \n         }\n         return regOutputFiles;\n     }\n \n+    private void scanErrorLogs(String errFilePath) throws IOException {\n+        File regfile = new File(errFilePath);\n+        try (BufferedReader reader = new BufferedReader(new FileReader(regfile))) {\n+            String line = reader.readLine();\n+            while (line != null) {\n+                line = line.trim();\n+                if (line.contains(\"Error\") || line.contains(\"@INC\")) {\n+                   logger.log(Level.WARNING, \"Regripper file {0} contains errors from run\", errFilePath); //NON-NLS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMTMwMzM1Ng==", "bodyText": "I just put the warning in the log for debugging purposes if needed. Since not all plugins are parsed in Autopsy this will log the plugins that actually get an error that autopsy may not use.", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r431303356", "createdAt": "2020-05-27T17:04:47Z", "author": {"login": "markmckinnon"}, "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "diffHunk": "@@ -418,10 +418,31 @@ private RegOutputFiles ripRegistryFile(String regFilePath, String outFilePathBas\n             String errFilePath = outFilePathBase + \"-full.err.txt\"; //NON-NLS\n             logger.log(Level.INFO, \"Writing Full RegRipper results to: {0}\", regOutputFiles.fullPlugins); //NON-NLS\n             executeRegRipper(rrFullCmd, rrFullHome, regFilePath, fullType, regOutputFiles.fullPlugins, errFilePath);\n+            try {\n+                scanErrorLogs(errFilePath);\n+            } catch (IOException ex) {\n+            logger.log(Level.SEVERE, \"Unable to run RegRipper\", ex); //NON-NLS\n+            this.addErrorMessage(NbBundle.getMessage(this.getClass(), \"ExtractRegistry.execRegRip.errMsg.failedAnalyzeRegFile\", this.getName()));\n+        } \n         }\n         return regOutputFiles;\n     }\n \n+    private void scanErrorLogs(String errFilePath) throws IOException {\n+        File regfile = new File(errFilePath);\n+        try (BufferedReader reader = new BufferedReader(new FileReader(regfile))) {\n+            String line = reader.readLine();\n+            while (line != null) {\n+                line = line.trim();\n+                if (line.contains(\"Error\") || line.contains(\"@INC\")) {\n+                   logger.log(Level.WARNING, \"Regripper file {0} contains errors from run\", errFilePath); //NON-NLS", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTU5Nw=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTA4OTI1NQ==", "bodyText": "Okay, last thing, could we make the string checking case insensitive?", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r439089255", "createdAt": "2020-06-11T21:49:28Z", "author": {"login": "dannysmyda"}, "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "diffHunk": "@@ -418,10 +418,31 @@ private RegOutputFiles ripRegistryFile(String regFilePath, String outFilePathBas\n             String errFilePath = outFilePathBase + \"-full.err.txt\"; //NON-NLS\n             logger.log(Level.INFO, \"Writing Full RegRipper results to: {0}\", regOutputFiles.fullPlugins); //NON-NLS\n             executeRegRipper(rrFullCmd, rrFullHome, regFilePath, fullType, regOutputFiles.fullPlugins, errFilePath);\n+            try {\n+                scanErrorLogs(errFilePath);\n+            } catch (IOException ex) {\n+            logger.log(Level.SEVERE, \"Unable to run RegRipper\", ex); //NON-NLS\n+            this.addErrorMessage(NbBundle.getMessage(this.getClass(), \"ExtractRegistry.execRegRip.errMsg.failedAnalyzeRegFile\", this.getName()));\n+        } \n         }\n         return regOutputFiles;\n     }\n \n+    private void scanErrorLogs(String errFilePath) throws IOException {\n+        File regfile = new File(errFilePath);\n+        try (BufferedReader reader = new BufferedReader(new FileReader(regfile))) {\n+            String line = reader.readLine();\n+            while (line != null) {\n+                line = line.trim();\n+                if (line.contains(\"Error\") || line.contains(\"@INC\")) {\n+                   logger.log(Level.WARNING, \"Regripper file {0} contains errors from run\", errFilePath); //NON-NLS", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTU5Nw=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzOTQyMjUxNQ==", "bodyText": "changed to check to for case insensitive, good catch.", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r439422515", "createdAt": "2020-06-12T13:36:46Z", "author": {"login": "markmckinnon"}, "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "diffHunk": "@@ -418,10 +418,31 @@ private RegOutputFiles ripRegistryFile(String regFilePath, String outFilePathBas\n             String errFilePath = outFilePathBase + \"-full.err.txt\"; //NON-NLS\n             logger.log(Level.INFO, \"Writing Full RegRipper results to: {0}\", regOutputFiles.fullPlugins); //NON-NLS\n             executeRegRipper(rrFullCmd, rrFullHome, regFilePath, fullType, regOutputFiles.fullPlugins, errFilePath);\n+            try {\n+                scanErrorLogs(errFilePath);\n+            } catch (IOException ex) {\n+            logger.log(Level.SEVERE, \"Unable to run RegRipper\", ex); //NON-NLS\n+            this.addErrorMessage(NbBundle.getMessage(this.getClass(), \"ExtractRegistry.execRegRip.errMsg.failedAnalyzeRegFile\", this.getName()));\n+        } \n         }\n         return regOutputFiles;\n     }\n \n+    private void scanErrorLogs(String errFilePath) throws IOException {\n+        File regfile = new File(errFilePath);\n+        try (BufferedReader reader = new BufferedReader(new FileReader(regfile))) {\n+            String line = reader.readLine();\n+            while (line != null) {\n+                line = line.trim();\n+                if (line.contains(\"Error\") || line.contains(\"@INC\")) {\n+                   logger.log(Level.WARNING, \"Regripper file {0} contains errors from run\", errFilePath); //NON-NLS", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTU5Nw=="}, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 21}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 618, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}