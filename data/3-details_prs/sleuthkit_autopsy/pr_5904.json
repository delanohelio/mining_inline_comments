{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDIwMTU2MDU1", "number": 5904, "title": "6301 check reg ripper error logs and report any errors", "bodyText": "", "createdAt": "2020-05-19T14:27:23Z", "url": "https://github.com/sleuthkit/autopsy/pull/5904", "merged": true, "mergeCommit": {"oid": "4eb17e49ab36efc54f28881797d2d1857cdaea49"}, "closed": true, "closedAt": "2020-06-12T14:59:42Z", "author": {"login": "markmckinnon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABchNKDoAH2gAyNDIwMTU2MDU1OjUwYzdhODBlNzlmOWM4NmRmNWNlZGQ3NjA1MTQ4MjFiZDkxOTk0ZWE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcqjf7PgFqTQyOTc3NDg3OA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "50c7a80e79f9c86df5cedd760514821bd91994ea", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/50c7a80e79f9c86df5cedd760514821bd91994ea", "committedDate": "2020-05-14T13:05:20Z", "message": "Read error logs and update plugins for errors\n\nRead error logs and update pluginks for errors."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1612b219c1552cd2146744ff0ddf3ec92c0ac4a0", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/1612b219c1552cd2146744ff0ddf3ec92c0ac4a0", "committedDate": "2020-05-19T14:11:30Z", "message": "Error checking for regripper plugins\n\nError checking for regripper plugins"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e70b72913996d68680119ba4bd20f4fede92db19", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/e70b72913996d68680119ba4bd20f4fede92db19", "committedDate": "2020-05-19T19:08:37Z", "message": "Merge branch '6300-Update-Regripper-modules-to-current-version' into 6301-Check-RegRipper-error-logs-and-report-any-errors"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/aa21dd279636d1c13d5c9132a64424a52de09c70", "committedDate": "2020-05-21T19:14:33Z", "message": "Merge remote-tracking branch 'upstream/develop' into 6301-Check-RegRipper-error-logs-and-report-any-errors"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MDczNzAw", "url": "https://github.com/sleuthkit/autopsy/pull/5904#pullrequestreview-417073700", "createdAt": "2020-05-22T17:25:42Z", "commit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNTo0MlrOGZelKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0yMlQxNzoyNzo1MVrOGZeo_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2ODYxNg==", "bodyText": "Are these and the changes in all other .pl files still part of the upgrade or are these yours?", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r429368616", "createdAt": "2020-05-22T17:25:42Z", "author": {"login": "dannysmyda"}, "path": "thirdparty/rr-full/plugins/eventlogs.pl", "diffHunk": "@@ -57,9 +57,11 @@ sub pluginmain {\n \t\t\t::rptMsg($win_path);\n \t\t\t::rptMsg(\"LastWrite Time \".gmtime($win->get_timestamp()).\" (UTC)\");\n \t\t\tmy $cn;\n-\t\t\tif ($cn = $win->get_value(\"ComputerName\")->get_data()) {\n-\t\t\t\t::rptMsg(\"ComputerName = \".$cn);\t\t\t\t\n-\t\t\t}\n+            if (defined($win->get_value(\"ComputerName\"))) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTM2OTU5Nw==", "bodyText": "Would it be worth also sending a notification to the user to let them know? Or is the fact that we are running regripper not explicitly stated in the Recent Activity module description?", "url": "https://github.com/sleuthkit/autopsy/pull/5904#discussion_r429369597", "createdAt": "2020-05-22T17:27:51Z", "author": {"login": "dannysmyda"}, "path": "RecentActivity/src/org/sleuthkit/autopsy/recentactivity/ExtractRegistry.java", "diffHunk": "@@ -418,10 +418,31 @@ private RegOutputFiles ripRegistryFile(String regFilePath, String outFilePathBas\n             String errFilePath = outFilePathBase + \"-full.err.txt\"; //NON-NLS\n             logger.log(Level.INFO, \"Writing Full RegRipper results to: {0}\", regOutputFiles.fullPlugins); //NON-NLS\n             executeRegRipper(rrFullCmd, rrFullHome, regFilePath, fullType, regOutputFiles.fullPlugins, errFilePath);\n+            try {\n+                scanErrorLogs(errFilePath);\n+            } catch (IOException ex) {\n+            logger.log(Level.SEVERE, \"Unable to run RegRipper\", ex); //NON-NLS\n+            this.addErrorMessage(NbBundle.getMessage(this.getClass(), \"ExtractRegistry.execRegRip.errMsg.failedAnalyzeRegFile\", this.getName()));\n+        } \n         }\n         return regOutputFiles;\n     }\n \n+    private void scanErrorLogs(String errFilePath) throws IOException {\n+        File regfile = new File(errFilePath);\n+        try (BufferedReader reader = new BufferedReader(new FileReader(regfile))) {\n+            String line = reader.readLine();\n+            while (line != null) {\n+                line = line.trim();\n+                if (line.contains(\"Error\") || line.contains(\"@INC\")) {\n+                   logger.log(Level.WARNING, \"Regripper file {0} contains errors from run\", errFilePath); //NON-NLS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "aa21dd279636d1c13d5c9132a64424a52de09c70"}, "originalPosition": 21}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "72242c5e9b94be73b4480c85cc69c13e6b695592", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/72242c5e9b94be73b4480c85cc69c13e6b695592", "committedDate": "2020-06-12T13:35:53Z", "message": "Update ExtractRegistry.java\n\nChange contains to also ccheck only for lower case as well"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI5Nzc0ODc4", "url": "https://github.com/sleuthkit/autopsy/pull/5904#pullrequestreview-429774878", "createdAt": "2020-06-12T14:12:27Z", "commit": {"oid": "72242c5e9b94be73b4480c85cc69c13e6b695592"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2697, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}