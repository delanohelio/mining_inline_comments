{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxMDIzMTUx", "number": 5722, "title": "6032 translated file name columns in results view", "bodyText": "", "createdAt": "2020-03-19T14:04:53Z", "url": "https://github.com/sleuthkit/autopsy/pull/5722", "merged": true, "mergeCommit": {"oid": "f6b4997fcbf8ea5a6daeee3606c2745edcfaed82"}, "closed": true, "closedAt": "2020-03-20T15:23:47Z", "author": {"login": "rcordovano"}, "timelineItems": {"totalCount": 18, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcOQxpkAH2gAyMzkxMDIzMTUxOmQ3MzJlMjA4MzllN2U4YzEwZDRlZGEyOTU0ODdjZDVlMWI0ZWEzZWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcPhrL3gFqTM3ODU0ODU3NA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d732e20839e7e8c10d4eda295487cd5e1b4ea3ee", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/d732e20839e7e8c10d4eda295487cd5e1b4ea3ee", "committedDate": "2020-03-16T16:33:44Z", "message": "6032 Move file name translation and make task"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d43c7bd16c9f3818c431905ac7820e9f05c18862", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/d43c7bd16c9f3818c431905ac7820e9f05c18862", "committedDate": "2020-03-16T19:33:07Z", "message": "Merge remote-tracking branch 'upstream/develop' into 6032-translated-file-name-columns-in-results-view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1085baf9cdf32763e9c0365161bd4c64084ecb44", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/1085baf9cdf32763e9c0365161bd4c64084ecb44", "committedDate": "2020-03-17T12:43:04Z", "message": "Extend file name translation to BlackboardArtifactNodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "45e9222bccda7c2add909fdd09255d2251ad1848", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/45e9222bccda7c2add909fdd09255d2251ad1848", "committedDate": "2020-03-19T11:48:10Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "060467f6199039097a605caa1b8d31c99efe0108", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/060467f6199039097a605caa1b8d31c99efe0108", "committedDate": "2020-03-19T11:57:27Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89ccc44a56a36a776926655f4bd80cef40cea056", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/89ccc44a56a36a776926655f4bd80cef40cea056", "committedDate": "2020-03-19T12:24:29Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cdea715cf702fe3f95f5e99b3f2d0fd9bc9559fc", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/cdea715cf702fe3f95f5e99b3f2d0fd9bc9559fc", "committedDate": "2020-03-19T12:30:02Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a287d4704ac7d2a9ddf139b8cf97f101e1f29915", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/a287d4704ac7d2a9ddf139b8cf97f101e1f29915", "committedDate": "2020-03-19T12:31:36Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "915facbcb3fce881750d8feb8a283830e1b35600", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/915facbcb3fce881750d8feb8a283830e1b35600", "committedDate": "2020-03-19T12:36:46Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f2d4029ce66a9879a0e8cc20fbfedf3ce860709", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/5f2d4029ce66a9879a0e8cc20fbfedf3ce860709", "committedDate": "2020-03-19T12:43:03Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9c14a4de791b96725f0c4e0bd391732f984142e1", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/9c14a4de791b96725f0c4e0bd391732f984142e1", "committedDate": "2020-03-19T13:05:40Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1fa98f95ae8064570143ca7ba7582b25e7b58539", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/1fa98f95ae8064570143ca7ba7582b25e7b58539", "committedDate": "2020-03-19T13:06:39Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "37ed8b8f6724cf41f8dc6a264dbd6db9fa63afa2", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/37ed8b8f6724cf41f8dc6a264dbd6db9fa63afa2", "committedDate": "2020-03-19T13:13:20Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "df3f1ec2e81eaa68ddff0239765efd981d4c9e67", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/df3f1ec2e81eaa68ddff0239765efd981d4c9e67", "committedDate": "2020-03-19T16:10:58Z", "message": "6032 translated file names in results view"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4MDgxMjM0", "url": "https://github.com/sleuthkit/autopsy/pull/5722#pullrequestreview-378081234", "createdAt": "2020-03-19T20:46:55Z", "commit": {"oid": "df3f1ec2e81eaa68ddff0239765efd981d4c9e67"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMDo0Njo1NVrOF4_0Lg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xOVQyMDo0Njo1NVrOF4_0Lg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NTMxMDEyNg==", "bodyText": "This is the wrong substitution if translatedName is not null.", "url": "https://github.com/sleuthkit/autopsy/pull/5722#discussion_r395310126", "createdAt": "2020-03-19T20:46:55Z", "author": {"login": "dannysmyda"}, "path": "Core/src/org/sleuthkit/autopsy/datamodel/TagNode.java", "diffHunk": "@@ -0,0 +1,128 @@\n+/*\n+ * Autopsy Forensic Browser\n+ *\n+ * Copyright 2020-2020 Basis Technology Corp.\n+ * Contact: carrier <at> sleuthkit <dot> org\n+ *\n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ *\n+ *     http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.sleuthkit.autopsy.datamodel;\n+\n+import java.beans.PropertyChangeEvent;\n+import java.beans.PropertyChangeListener;\n+import org.openide.nodes.Children;\n+import org.openide.nodes.Sheet;\n+import org.openide.util.Lookup;\n+import org.openide.util.NbBundle;\n+import org.sleuthkit.autopsy.core.UserPreferences;\n+import org.sleuthkit.autopsy.datamodel.utils.FileNameTransTask;\n+import org.sleuthkit.autopsy.texttranslation.TextTranslationService;\n+import org.sleuthkit.datamodel.Content;\n+\n+/**\n+ * An abstract superclass for a node that represents a tag, uses the name of a\n+ * given Content object as its display name, and has a property sheet with an\n+ * original name property when machine translation is enabled.\n+ *\n+ * The translation of the Content name is done in a background thread. The\n+ * translated name is made the display name of the node and the untranslated\n+ * name is put into both the original name property and into the node's tooltip.\n+ *\n+ * TODO (Jira-6174): Consider modifying this class to be able to use it more broadly\n+ * within the Autopsy data model (i.e., AbstractNode suclasses). It's not really\n+ * specific to a tag node.\n+ */\n+@NbBundle.Messages({\n+    \"TagNode.propertySheet.origName=Original Name\",\n+    \"TagNode.propertySheet.origNameDisplayName=Original Name\"\n+})\n+abstract class TagNode extends DisplayableItemNode {\n+\n+    private final static String ORIG_NAME_PROP_NAME = Bundle.TagNode_propertySheet_origName();\n+    private final static String ORIG_NAME_PROP_DISPLAY_NAME = Bundle.TagNode_propertySheet_origNameDisplayName();\n+\n+    private final String originalName;\n+    private volatile String translatedName;\n+\n+    /**\n+     * An abstract superclass for a node that represents a tag, uses the name of\n+     * a given Content object as its display name, and has a property sheet with\n+     * an untranslated file name property when machine translation is enabled.\n+     *\n+     * @param lookup  The Lookup of the node.\n+     * @param content The Content to use for the node display name.\n+     */\n+    TagNode(Lookup lookup, Content content) {\n+        super(Children.LEAF, lookup);\n+        originalName = content.getName();\n+    }\n+\n+    @Override\n+    public boolean isLeafTypeNode() {\n+        return true;\n+    }\n+\n+    @Override\n+    abstract public String getItemType();\n+\n+    @Override\n+    abstract public <T> T accept(DisplayableItemNodeVisitor<T> visitor);\n+\n+    /**\n+     * Adds an original name property to the node's property sheet and submits\n+     * an original name translation task.\n+     *\n+     * The translation of the original name is done in a background thread. The\n+     * translated name is made the display name of the node and the untranslated\n+     * name is put into both the original name property and into the node's\n+     * tooltip.\n+     *\n+     * @param properties The node's property sheet.\n+     */\n+    protected void addOriginalNameProp(Sheet.Set properties) {\n+        if (TextTranslationService.getInstance().hasProvider() && UserPreferences.displayTranslatedFileNames()) {\n+            properties.put(new NodeProperty<>(\n+                    ORIG_NAME_PROP_NAME,\n+                    ORIG_NAME_PROP_DISPLAY_NAME,\n+                    \"\",\n+                    translatedName != null ? translatedName : \"\"));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "df3f1ec2e81eaa68ddff0239765efd981d4c9e67"}, "originalPosition": 98}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cc411113d01f756571c4fd161d72cf548dc30060", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/cc411113d01f756571c4fd161d72cf548dc30060", "committedDate": "2020-03-20T13:20:29Z", "message": "Merge remote-tracking branch 'upstream/develop' into 6032-translated-file-name-columns-in-results-view"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "39dc88814071414652f3ab7cec1915779ecc8e8b", "author": {"user": {"login": "rcordovano", "name": "Richard Cordovano"}}, "url": "https://github.com/sleuthkit/autopsy/commit/39dc88814071414652f3ab7cec1915779ecc8e8b", "committedDate": "2020-03-20T14:14:47Z", "message": "6032 fixes for review issues"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc4NTQ4NTc0", "url": "https://github.com/sleuthkit/autopsy/pull/5722#pullrequestreview-378548574", "createdAt": "2020-03-20T14:48:59Z", "commit": {"oid": "39dc88814071414652f3ab7cec1915779ecc8e8b"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2726, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}