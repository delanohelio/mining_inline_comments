{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzgzNjU5MzM5", "number": 5674, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozMzoxNFrODlfncA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozMzoxNFrODlfncA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQwNjQxOTA0OnYy", "diffSide": "RIGHT", "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxNjozMzoxNFrOFya0rg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0wNVQxODo0MzozOFrOFyfapQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjU5MA==", "bodyText": "Can this method just return a SQLException and use a try-with-resources block? Recalling what has been said about exception swallowing with try-catch-finally blocks, I believe try-with-resources handles that case for you automatically. Here are the notes from the JLS https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.3.1. Subtle, but the use of addSuppressed() is interesting. Read about it here: https://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html#addSuppressed(java.lang.Throwable). It looks like it was designed specifically to fill this gap.", "url": "https://github.com/sleuthkit/autopsy/pull/5674#discussion_r388412590", "createdAt": "2020-03-05T16:33:14Z", "author": {"login": "dannysmyda"}, "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "diffHunk": "@@ -779,6 +766,43 @@ static String getCreatePersonaAccountsTableStatement(CentralRepoPlatforms select\n     }\n \n     \n+     /**\n+      * Inserts the default content in accounts related tables.\n+      * \n+      * @param conn Database connection to use.\n+      * \n+      * @return True if success, false otherwise.\n+      */\n+    private boolean insertDefaultAccountsTablesContent(Connection conn) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "294aa6c7730e8ca32fac93119127377f0841f376"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjkxNw==", "bodyText": "I believe suppressed messages make their way into the logged trace, but I could be wrong.", "url": "https://github.com/sleuthkit/autopsy/pull/5674#discussion_r388412917", "createdAt": "2020-03-05T16:33:43Z", "author": {"login": "dannysmyda"}, "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "diffHunk": "@@ -779,6 +766,43 @@ static String getCreatePersonaAccountsTableStatement(CentralRepoPlatforms select\n     }\n \n     \n+     /**\n+      * Inserts the default content in accounts related tables.\n+      * \n+      * @param conn Database connection to use.\n+      * \n+      * @return True if success, false otherwise.\n+      */\n+    private boolean insertDefaultAccountsTablesContent(Connection conn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjU5MA=="}, "originalCommit": {"oid": "294aa6c7730e8ca32fac93119127377f0841f376"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxNzU3Mg==", "bodyText": "If this method is too much trouble to change due to intricate design using the return flag, then its ok.", "url": "https://github.com/sleuthkit/autopsy/pull/5674#discussion_r388417572", "createdAt": "2020-03-05T16:40:44Z", "author": {"login": "dannysmyda"}, "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "diffHunk": "@@ -779,6 +766,43 @@ static String getCreatePersonaAccountsTableStatement(CentralRepoPlatforms select\n     }\n \n     \n+     /**\n+      * Inserts the default content in accounts related tables.\n+      * \n+      * @param conn Database connection to use.\n+      * \n+      * @return True if success, false otherwise.\n+      */\n+    private boolean insertDefaultAccountsTablesContent(Connection conn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjU5MA=="}, "originalCommit": {"oid": "294aa6c7730e8ca32fac93119127377f0841f376"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ1NzMzMg==", "bodyText": "@dannysmyda: do you mean \"just throw a SQLException\"?\nI can certainly use try-with-resource in the method to manage the resources, but at this time Id prefer to not change the return value type.  I think the way this and other similar methods are used, is currently expecting a boolean return value.\nAnd this is going to get used in the upgrade path as well, and may further have some conflicts with changes Greg is making.", "url": "https://github.com/sleuthkit/autopsy/pull/5674#discussion_r388457332", "createdAt": "2020-03-05T17:46:17Z", "author": {"login": "raman-bt"}, "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "diffHunk": "@@ -779,6 +766,43 @@ static String getCreatePersonaAccountsTableStatement(CentralRepoPlatforms select\n     }\n \n     \n+     /**\n+      * Inserts the default content in accounts related tables.\n+      * \n+      * @param conn Database connection to use.\n+      * \n+      * @return True if success, false otherwise.\n+      */\n+    private boolean insertDefaultAccountsTablesContent(Connection conn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjU5MA=="}, "originalCommit": {"oid": "294aa6c7730e8ca32fac93119127377f0841f376"}, "originalPosition": 87}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQ4Nzg0NQ==", "bodyText": "Ok no worries. At first, I wasn't sure if the extended try-with-resources block you just wrote was equivalent to your previous code, but it is according to https://docs.oracle.com/javase/specs/jls/se8/html/jls-14.html#jls-14.20.3.2. Suppression will happen, and then the SQLException we actually care about will be caught in the block you define :).", "url": "https://github.com/sleuthkit/autopsy/pull/5674#discussion_r388487845", "createdAt": "2020-03-05T18:43:38Z", "author": {"login": "dannysmyda"}, "path": "Core/src/org/sleuthkit/autopsy/centralrepository/datamodel/RdbmsCentralRepoFactory.java", "diffHunk": "@@ -779,6 +766,43 @@ static String getCreatePersonaAccountsTableStatement(CentralRepoPlatforms select\n     }\n \n     \n+     /**\n+      * Inserts the default content in accounts related tables.\n+      * \n+      * @param conn Database connection to use.\n+      * \n+      * @return True if success, false otherwise.\n+      */\n+    private boolean insertDefaultAccountsTablesContent(Connection conn) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4ODQxMjU5MA=="}, "originalCommit": {"oid": "294aa6c7730e8ca32fac93119127377f0841f376"}, "originalPosition": 87}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 754, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}