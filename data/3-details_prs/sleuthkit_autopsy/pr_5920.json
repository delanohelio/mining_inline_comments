{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDI0Njk4NjY2", "number": 5920, "title": "6037 populate tsk metadata artifacts for extracted text", "bodyText": "", "createdAt": "2020-05-28T19:46:59Z", "url": "https://github.com/sleuthkit/autopsy/pull/5920", "merged": true, "mergeCommit": {"oid": "1bc5d54942770d22d6d6fe501afa9f3115a17cb4"}, "closed": true, "closedAt": "2020-06-08T18:25:37Z", "author": {"login": "markmckinnon"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcjNkuvgH2gAyNDI0Njk4NjY2OmRlMjFkZDg4Yzk1ZmZlMTk1YTc2ODI3MDJiN2JlZWM5YTU2Y2E0MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcpSoMLAFqTQyNjM4NjAwOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "de21dd88c95ffe195a7682702b7beec9a56ca418", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/de21dd88c95ffe195a7682702b7beec9a56ca418", "committedDate": "2020-05-20T18:42:19Z", "message": "Update KeywordSearchIngestModule.java\n\nAdd creation of TSK_METADATA artifact to ingest module."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "06e8890417160bd313e34daf48ead1dfb096b824", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/06e8890417160bd313e34daf48ead1dfb096b824", "committedDate": "2020-05-28T19:44:09Z", "message": "Added Metadata Artifact to Keyword Search and TImeline\n\nAdded the Metadata for Documents to TSK_METADATA artifact as well as event types in time line for Metadata."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c48eb1a387584c37e3e4557aa11bb722918d5947", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/c48eb1a387584c37e3e4557aa11bb722918d5947", "committedDate": "2020-05-29T19:10:45Z", "message": "Update KeywordSearchIngestModule.java\n\nCodacy Changes"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDIyNzE3MDQy", "url": "https://github.com/sleuthkit/autopsy/pull/5920#pullrequestreview-422717042", "createdAt": "2020-06-02T14:08:47Z", "commit": {"oid": "c48eb1a387584c37e3e4557aa11bb722918d5947"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNDowODo0OFrOGdziEg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0wMlQxNDowODo0OFrOGdziEg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMzkwNjE5NA==", "bodyText": "typo", "url": "https://github.com/sleuthkit/autopsy/pull/5920#discussion_r433906194", "createdAt": "2020-06-02T14:08:48Z", "author": {"login": "APriestman"}, "path": "KeywordSearch/src/org/sleuthkit/autopsy/keywordsearch/KeywordSearchIngestModule.java", "diffHunk": "@@ -515,7 +549,70 @@ public Reader openStream() throws IOException {\n                 return false;\n             }\n         }\n+        \n+        private void createMetadataArtifact(AbstractFile aFile, Map<String, String> metadata) {\n+    \n+            String moduleName = KeywordSearchIngestModule.class.getName();\n+            \n+            Collection<BlackboardAttribute> attributes = new ArrayList<>(); \n+            Collection<BlackboardArtifact> bbartifacts = new ArrayList<>();\n+            for (Map.Entry<String, String> entry : metadata.entrySet()) {\n+                if (METADATA_TYPES_MAP.containsKey(entry.getKey())) {\n+                    BlackboardAttribute bba = checkAttribute(entry.getKey(), entry.getValue());\n+                    if (bba != null) {\n+                        attributes.add(bba);\n+                    }\n+                }\n+            }\n+            if (!attributes.isEmpty()) {\n+                try {\n+                    BlackboardArtifact bbart = aFile.newArtifact(BlackboardArtifact.ARTIFACT_TYPE.TSK_METADATA);\n+                    bbart.addAttributes(attributes);\n+                    bbartifacts.add(bbart);\n+                } catch (TskCoreException ex) {\n+                    // Log error and return to continue processing\n+                   logger.log(Level.WARNING, String.format(\"Error creatinkg or adding artifact.\"), ex); //NON-NLS", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c48eb1a387584c37e3e4557aa11bb722918d5947"}, "originalPosition": 93}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9e7f12eb8b91d5adc35cc4da828eb055af849abd", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/9e7f12eb8b91d5adc35cc4da828eb055af849abd", "committedDate": "2020-06-02T14:16:55Z", "message": "Update KeywordSearchIngestModule.java\n\nFix typo"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "95451cbb5f8f6c277dbe52a6ded1b7a8e77df360", "author": {"user": {"login": "markmckinnon", "name": "Mark McKinnon"}}, "url": "https://github.com/sleuthkit/autopsy/commit/95451cbb5f8f6c277dbe52a6ded1b7a8e77df360", "committedDate": "2020-06-04T13:29:22Z", "message": "Update KeywordSearchIngestModule.java\n\nAdded better warning message to include the file name when there is an error for debugging if needed."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDI2Mzg2MDA5", "url": "https://github.com/sleuthkit/autopsy/pull/5920#pullrequestreview-426386009", "createdAt": "2020-06-08T15:59:11Z", "commit": {"oid": "95451cbb5f8f6c277dbe52a6ded1b7a8e77df360"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2706, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}