{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA0MDE3Nzg3", "number": 4301, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjo0NjozNFrOEuFYTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjo0NjozNFrOEuFYTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzE2NzU4MDk1OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/InsertOperationIT.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQxNjo0NjozNFrOHiQ6IA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0xNVQyMjoyODo1NlrOHidr4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY5MDY1Ng==", "bodyText": "this ps and below rs should probably be closed, or surrounded by a try-with-resources, but it's unrelated to your commit", "url": "https://github.com/splicemachine/spliceengine/pull/4301#discussion_r505690656", "createdAt": "2020-10-15T16:46:34Z", "author": {"login": "arnaud-splice"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/InsertOperationIT.java", "diffHunk": "@@ -466,13 +470,15 @@ public void testInsertFromSubOperation() throws Exception {\n         Assert.assertEquals(\"Incorrect number of groups returned!\", nameCountMap.size(), groupCount);\n     }\n \n+    @SuppressFBWarnings(\"RV_RETURN_VALUE_IGNORED_BAD_PRACTICE\") // delete/createNewFile\n     @Test\n     public void testInsertBlob() throws Exception {\n-        InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\");\n-        PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");\n-        ps.setString(1, \"csv_file\");\n-        ps.setBinaryStream(2, fin);\n-        ps.execute();\n+        try(InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\")) {\n+            PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "93ad34d394df102455f8a830db86990a182c8915"}, "originalPosition": 69}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTkwMDAwMw==", "bodyText": "methodWatcher.prepareStatement is keeping a list of statements and will close them automatically. Same btw for methodWatcher.execute and methodWatcher.executeQuery, making it much easier to make it SpotBugs-compliant.", "url": "https://github.com/splicemachine/spliceengine/pull/4301#discussion_r505900003", "createdAt": "2020-10-15T22:28:56Z", "author": {"login": "martinrupp"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/InsertOperationIT.java", "diffHunk": "@@ -466,13 +470,15 @@ public void testInsertFromSubOperation() throws Exception {\n         Assert.assertEquals(\"Incorrect number of groups returned!\", nameCountMap.size(), groupCount);\n     }\n \n+    @SuppressFBWarnings(\"RV_RETURN_VALUE_IGNORED_BAD_PRACTICE\") // delete/createNewFile\n     @Test\n     public void testInsertBlob() throws Exception {\n-        InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\");\n-        PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");\n-        ps.setString(1, \"csv_file\");\n-        ps.setBinaryStream(2, fin);\n-        ps.execute();\n+        try(InputStream fin = new FileInputStream(getResourceDirectory() + \"order_line_500K.csv\")) {\n+            PreparedStatement ps = methodWatcher.prepareStatement(\"insert into FILES (name, doc) values (?,?)\");", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUwNTY5MDY1Ng=="}, "originalCommit": {"oid": "93ad34d394df102455f8a830db86990a182c8915"}, "originalPosition": 69}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2877, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}