{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTMyMjA1NDA4", "number": 4777, "title": "DB-10949 Support parameterized FROM FINAL TABLE queries.", "bodyText": "Example of query this PR adds support for:\n\nprepare ps as 'select * from old table (update t1 set a = ?) where a >= ?';\nexecute ps using 'values (2, 1)';\n\nThe parameter list is normally one per activation, but FROM TABLE queries use two activations, so this change makes sure both activations can access the same parameter list.\nTwo new system procedures are also added: SYSCS_GET_TABLE_COUNT and SYSCS_IS_MEM_PLATFORM\nSYSCS_GET_TABLE_COUNT\nReturns the number of HBase user tables, or on mem, the number of tables allocated in MPartitionFactory.Admin.partitionMap.\nSYSCS_IS_MEM_PLATFORM\nReturns true if splice is running on the mem platform, otherwise false.\n\nsplice> CALL SYSCS_UTIL.SYSCS_GET_TABLE_COUNT();\nNumTables\n//-----------\n111\n1 row selected\nELAPSED TIME = 337 milliseconds\nsplice> call syscs_util.syscs_is_mem_platform();\nIsMe&\n//-----\nfalse", "createdAt": "2020-12-04T00:30:33Z", "url": "https://github.com/splicemachine/spliceengine/pull/4777", "merged": true, "mergeCommit": {"oid": "381df2238941c1b6fae75d9378bb4256c0af8c3f"}, "closed": true, "closedAt": "2020-12-08T21:08:36Z", "author": {"login": "msirek"}, "timelineItems": {"totalCount": 9, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdiskptgH2gAyNTMyMjA1NDA4OjZmZmIwMzdhMDNlZmQ5ZDRjYTRmNTYzNmZiMDE4MDJhNGY5ZjE4Njg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdkPlYfgFqTU0NzU3NDcyMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "6ffb037a03efd9d4ca4f5636fb01802a4f9f1868", "author": {"user": {"login": "msirek", "name": "Mark Sirek"}}, "url": "https://github.com/splicemachine/spliceengine/commit/6ffb037a03efd9d4ca4f5636fb01802a4f9f1868", "committedDate": "2020-12-04T00:26:31Z", "message": "DB-10949 Support parameterized FROM FINAL TABLE queries."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ0NzY5MTgw", "url": "https://github.com/splicemachine/spliceengine/pull/4777#pullrequestreview-544769180", "createdAt": "2020-12-04T09:03:03Z", "commit": {"oid": "6ffb037a03efd9d4ca4f5636fb01802a4f9f1868"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a2943a64070cb53d2d3213619ad0a9afc4d18f57", "author": {"user": {"login": "msirek", "name": "Mark Sirek"}}, "url": "https://github.com/splicemachine/spliceengine/commit/a2943a64070cb53d2d3213619ad0a9afc4d18f57", "committedDate": "2020-12-04T22:42:31Z", "message": "DB-10949 Make sure temporary trigger conglomerate is dropped."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f1782718de37395e1c66fe8f65beb9679b579ada", "author": {"user": {"login": "msirek", "name": "Mark Sirek"}}, "url": "https://github.com/splicemachine/spliceengine/commit/f1782718de37395e1c66fe8f65beb9679b579ada", "committedDate": "2020-12-05T00:37:15Z", "message": "DB-10949 Fix Spotbugs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ1NTgxMzQ5", "url": "https://github.com/splicemachine/spliceengine/pull/4777#pullrequestreview-545581349", "createdAt": "2020-12-05T11:48:06Z", "commit": {"oid": "f1782718de37395e1c66fe8f65beb9679b579ada"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "492244884835d1b1367e1cfbec6b8278163a16ee", "author": {"user": {"login": "msirek", "name": "Mark Sirek"}}, "url": "https://github.com/splicemachine/spliceengine/commit/492244884835d1b1367e1cfbec6b8278163a16ee", "committedDate": "2020-12-05T16:37:56Z", "message": "DB-10949 Fix mem platform ITs."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MDIzNTkw", "url": "https://github.com/splicemachine/spliceengine/pull/4777#pullrequestreview-547023590", "createdAt": "2020-12-08T10:18:18Z", "commit": {"oid": "492244884835d1b1367e1cfbec6b8278163a16ee"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDoxODoxOFrOIBR1gg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wOFQxMDoxODoxOFrOIBR1gg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzODIxMTcxNA==", "bodyText": "i'm not exactly sure why you don't have to specify @Category(value = {SerialTest.class}) here. but looks like this already runs only in serial. otherwise the assert in line 153 with checkNumTables() would cause sporadics. Maybe you want to add the SerialTest.class as a precaution still?", "url": "https://github.com/splicemachine/spliceengine/pull/4777#discussion_r538211714", "createdAt": "2020-12-08T10:18:18Z", "author": {"login": "martinrupp"}, "path": "splice_machine/src/test/java/com/splicemachine/db/impl/sql/compile/FromFinalTableIT.java", "diffHunk": "@@ -44,6 +48,8 @@\n public class FromFinalTableIT extends SpliceUnitTest {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "492244884835d1b1367e1cfbec6b8278163a16ee"}, "originalPosition": 19}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3MTI5NjYx", "url": "https://github.com/splicemachine/spliceengine/pull/4777#pullrequestreview-547129661", "createdAt": "2020-12-08T11:20:16Z", "commit": {"oid": "492244884835d1b1367e1cfbec6b8278163a16ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ3NTc0NzIx", "url": "https://github.com/splicemachine/spliceengine/pull/4777#pullrequestreview-547574721", "createdAt": "2020-12-08T19:47:55Z", "commit": {"oid": "492244884835d1b1367e1cfbec6b8278163a16ee"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 995, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}