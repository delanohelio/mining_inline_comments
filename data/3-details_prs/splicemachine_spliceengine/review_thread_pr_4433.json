{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0Mjc0MDUz", "number": 4433, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwOTo0NjozOVrOE0umOQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwOTo0NjozOVrOE0umOQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzIzNzI0ODU3OnYy", "diffSide": "RIGHT", "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "isResolved": false, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wM1QwOTo0NjozOVrOHsm83w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0wNFQwOTozMzozM1rOHtP7LA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw==", "bodyText": "It seems we support both schema and currentSchema, between which currentSchema has priority in a sense that if it's set, then schema is ignored. Is that intended?", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516537567", "createdAt": "2020-11-03T09:46:39Z", "author": {"login": "ascend1"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "diffHunk": "@@ -173,7 +172,9 @@\n         drdaID = info.getProperty(Attribute.DRDAID_ATTR, null);\n         rdbIntTkn = info.getProperty(Attribute.RDBINTTKN_ATTR, null);\n         ipAddress = info.getProperty(Property.IP_ADDRESS, null);\n-        defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);\n+        defaultSchema = info.getProperty(Property.CONNECTION_CURRENT_SCHEMA, null);\n+        if (defaultSchema == null)\n+            defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjU0MDEwMw==", "bodyText": "e.g. what's the expected behavior of schema=A;currentSchema=B.", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516540103", "createdAt": "2020-11-03T09:50:31Z", "author": {"login": "hatyo"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "diffHunk": "@@ -173,7 +172,9 @@\n         drdaID = info.getProperty(Attribute.DRDAID_ATTR, null);\n         rdbIntTkn = info.getProperty(Attribute.RDBINTTKN_ATTR, null);\n         ipAddress = info.getProperty(Property.IP_ADDRESS, null);\n-        defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);\n+        defaultSchema = info.getProperty(Property.CONNECTION_CURRENT_SCHEMA, null);\n+        if (defaultSchema == null)\n+            defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}, "originalCommit": {"oid": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjgzOTkxMA==", "bodyText": "Yes, @ascend1 and @hatyo , the code above is intended, so for the scenario @hatyo raised, we have a deterministic behavior. Basically, currentSchema will take precedence over schema.", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r516839910", "createdAt": "2020-11-03T17:32:03Z", "author": {"login": "yxia92"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "diffHunk": "@@ -173,7 +172,9 @@\n         drdaID = info.getProperty(Attribute.DRDAID_ATTR, null);\n         rdbIntTkn = info.getProperty(Attribute.RDBINTTKN_ATTR, null);\n         ipAddress = info.getProperty(Property.IP_ADDRESS, null);\n-        defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);\n+        defaultSchema = info.getProperty(Property.CONNECTION_CURRENT_SCHEMA, null);\n+        if (defaultSchema == null)\n+            defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}, "originalCommit": {"oid": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNzIwODg3Ng==", "bodyText": "Thanks!", "url": "https://github.com/splicemachine/spliceengine/pull/4433#discussion_r517208876", "createdAt": "2020-11-04T09:33:33Z", "author": {"login": "hatyo"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/jdbc/TransactionResourceImpl.java", "diffHunk": "@@ -173,7 +172,9 @@\n         drdaID = info.getProperty(Attribute.DRDAID_ATTR, null);\n         rdbIntTkn = info.getProperty(Attribute.RDBINTTKN_ATTR, null);\n         ipAddress = info.getProperty(Property.IP_ADDRESS, null);\n-        defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);\n+        defaultSchema = info.getProperty(Property.CONNECTION_CURRENT_SCHEMA, null);\n+        if (defaultSchema == null)\n+            defaultSchema = info.getProperty(Property.CONNECTION_SCHEMA, null);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxNjUzNzU2Nw=="}, "originalCommit": {"oid": "f7a1d7dc93cfcb6b5a7bd98045c9983600039c3b"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2849, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}