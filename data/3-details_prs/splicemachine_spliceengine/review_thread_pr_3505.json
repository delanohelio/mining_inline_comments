{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDExNjAyNDY4", "number": 3505, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNToxNDo0NFrOD4FpWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNToxNDo0NFrOD4FpWw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYwMTM5MzU1OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/ShowCreateTableIT.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNToxNDo0NFrOGOt_bQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0zMFQxNzo1MToxNlrOGO0Cig==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4Njc2NQ==", "bodyText": "Can you add these methods to SpliceUnitTest ?\nIf you don't want to create a temp directory for every class even if it doesn't use it we can create the directory on demand in getExternalResourceDirectory() (if not already created) and remove it if exists in deleteTempDirectory", "url": "https://github.com/splicemachine/spliceengine/pull/3505#discussion_r418086765", "createdAt": "2020-04-30T15:14:44Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/ShowCreateTableIT.java", "diffHunk": "@@ -101,6 +102,26 @@ public static void cleanup()\n         classWatcher.closeAll();\n     }\n \n+    static File tempDir;\n+\n+    @BeforeClass\n+    public static void createTempDirectory() throws Exception", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "45615da9db98f6271c81f5db21f3367f79feb52a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODEzODEzNQ==", "bodyText": "I know this looks like copied code but putting this in SpliceUnitTest would prevent ExternalTableIT, ExternalTablePartitionIT to run parallel:\nSince static File tempDir is static, it is shared by all instantiations of SpliceUnitTest, especially between ExternalTableIT, ExternalTablePartitionIT, etc. . However, @afterclass is called after ExternalTableIT is done, then would delete the (shared) tempDir, which might be still used by ExternalTablePartitionIT when running in parallel.\nSo static File tempDir can be static, but static in ExternalTableIT, so that it is not shared with the one in ExternalTablePartitionIT . Another solution would be to have a TestWatcher.", "url": "https://github.com/splicemachine/spliceengine/pull/3505#discussion_r418138135", "createdAt": "2020-04-30T16:30:36Z", "author": {"login": "martinrupp"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/ShowCreateTableIT.java", "diffHunk": "@@ -101,6 +102,26 @@ public static void cleanup()\n         classWatcher.closeAll();\n     }\n \n+    static File tempDir;\n+\n+    @BeforeClass\n+    public static void createTempDirectory() throws Exception", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4Njc2NQ=="}, "originalCommit": {"oid": "45615da9db98f6271c81f5db21f3367f79feb52a"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODE4NTg2Ng==", "bodyText": "Hadn't thought of that, makes sense. Thanks!", "url": "https://github.com/splicemachine/spliceengine/pull/3505#discussion_r418185866", "createdAt": "2020-04-30T17:51:16Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/ShowCreateTableIT.java", "diffHunk": "@@ -101,6 +102,26 @@ public static void cleanup()\n         classWatcher.closeAll();\n     }\n \n+    static File tempDir;\n+\n+    @BeforeClass\n+    public static void createTempDirectory() throws Exception", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQxODA4Njc2NQ=="}, "originalCommit": {"oid": "45615da9db98f6271c81f5db21f3367f79feb52a"}, "originalPosition": 15}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3209, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}