{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4ODU2OTA0", "number": 3995, "title": "DB-10027 Fix grouping by out-of-bound positions", "bodyText": "", "createdAt": "2020-08-17T14:09:29Z", "url": "https://github.com/splicemachine/spliceengine/pull/3995", "merged": true, "mergeCommit": {"oid": "1dc1ad6d437ab984c3faeeac80230f103900bc06"}, "closed": true, "closedAt": "2020-08-19T15:22:51Z", "author": {"login": "ascend1"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc_ytaZAH2gAyNDY4ODU2OTA0OmU5NmRmNzA4ZjczYWI2MDlhMDA3ZDlhZjM3ZjE1M2MwNTkxMjY1MDQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAYEQEAFqTQ3MDI3NjI1NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "e96df708f73ab609a007d9af37f153c059126504", "author": {"user": {"login": "ascend1", "name": "Zhen Li"}}, "url": "https://github.com/splicemachine/spliceengine/commit/e96df708f73ab609a007d9af37f153c059126504", "committedDate": "2020-08-17T13:48:10Z", "message": "DB-10027 Fix grouping by out-of-bound positions"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NjE2NTgw", "url": "https://github.com/splicemachine/spliceengine/pull/3995#pullrequestreview-468616580", "createdAt": "2020-08-17T16:29:16Z", "commit": {"oid": "e96df708f73ab609a007d9af37f153c059126504"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjoyOToxN1rOHBv_CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjoyOToxN1rOHBv_CA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5NjgwOA==", "bodyText": "Can we throw the same error message like the one in the below code which comes a few lines after this line:\n\t\t\t    /* Column is out of range if either a) resultCol is null, OR\n\t\t\t     * b) resultCol points to a column that is not visible to the\n\t\t\t     * user (i.e. it was generated internally).\n\t\t\t    */\n                if ((resultCol == null) ||\n                        (resultCol.getColumnPosition() > targetCols.visibleSize()))\n                {\n                    throw StandardException.newException(SQLState.LANG_COLUMN_OUT_OF_RANGE,\n                            String.valueOf(columnPosition));\n                }\n\nI think they are of similar nature, so it would be better to return consistent error message.", "url": "https://github.com/splicemachine/spliceengine/pull/3995#discussion_r471596808", "createdAt": "2020-08-17T16:29:17Z", "author": {"login": "yxia92"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/GroupByList.java", "diffHunk": "@@ -110,6 +110,10 @@ public void bindGroupByColumns(SelectNode select,List<AggregateNode> aggregateVe\n             if (OrderByColumn.isReferedColByNum(groupByCol.getColumnExpression())) {\n                 ResultColumnList targetCols = select.getResultColumns();\n                 int columnPosition = (Integer) groupByCol.getColumnExpression().getConstantValueAsObject();\n+                if (columnPosition <= 0) {\n+                    throw StandardException.newException(SQLState.LANG_INVALID_GROUP_POSITION,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e96df708f73ab609a007d9af37f153c059126504"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "98d08d4510807ca8fc6fddaea2c05058dfcaf601", "author": {"user": {"login": "ascend1", "name": "Zhen Li"}}, "url": "https://github.com/splicemachine/spliceengine/commit/98d08d4510807ca8fc6fddaea2c05058dfcaf601", "committedDate": "2020-08-17T16:32:27Z", "message": "DB-10027 Use existing exception"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4NzI1OTc3", "url": "https://github.com/splicemachine/spliceengine/pull/3995#pullrequestreview-468725977", "createdAt": "2020-08-17T18:20:32Z", "commit": {"oid": "98d08d4510807ca8fc6fddaea2c05058dfcaf601"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5OTA3OTgz", "url": "https://github.com/splicemachine/spliceengine/pull/3995#pullrequestreview-469907983", "createdAt": "2020-08-19T00:02:05Z", "commit": {"oid": "98d08d4510807ca8fc6fddaea2c05058dfcaf601"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwMjc2MjU1", "url": "https://github.com/splicemachine/spliceengine/pull/3995#pullrequestreview-470276255", "createdAt": "2020-08-19T09:19:36Z", "commit": {"oid": "98d08d4510807ca8fc6fddaea2c05058dfcaf601"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1179, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}