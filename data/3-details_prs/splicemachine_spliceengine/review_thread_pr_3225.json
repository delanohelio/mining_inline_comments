{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc1MjU2NTIy", "number": 3225, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjoxMjo0NVrODhDAVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjozMToxOFrODhs5mA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM1OTc4ODM4OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "isResolved": true, "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQxMjoxMjo0NVrOFrl1hw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0xOVQyMzozOTozOFrOFr7qnw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI1Mjk5OQ==", "bodyText": "We need to update the build number", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r381252999", "createdAt": "2020-02-19T12:12:45Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1947), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "66068d7d7f3a6b32c9e5efdbd404248ffbc921f6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMwMDY1NA==", "bodyText": "What should it be updated to?\n1949 because this will tentatively be part of build 1949?", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r381300654", "createdAt": "2020-02-19T13:49:41Z", "author": {"login": "arnaud-splice"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1947), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI1Mjk5OQ=="}, "originalCommit": {"oid": "66068d7d7f3a6b32c9e5efdbd404248ffbc921f6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTMyODY1Ng==", "bodyText": "1948 if it's part of the next build, 1949 otherwise", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r381328656", "createdAt": "2020-02-19T14:34:01Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1947), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI1Mjk5OQ=="}, "originalCommit": {"oid": "66068d7d7f3a6b32c9e5efdbd404248ffbc921f6"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTYxMDY1NQ==", "bodyText": "Done", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r381610655", "createdAt": "2020-02-19T23:39:38Z", "author": {"login": "arnaud-splice"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1947), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MTI1Mjk5OQ=="}, "originalCommit": {"oid": "66068d7d7f3a6b32c9e5efdbd404248ffbc921f6"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2NjY1MjQwOnYy", "diffSide": "RIGHT", "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMFQyMjozMToxOFrOFslc1A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMToxMjo0MFrOFszlZg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5NTI1Mg==", "bodyText": "I just have a minor comment to change 1949 to 1948 in anticipation that this PR will be merged to the 1948 build. So if the system is already running 1948, this script won't be triggered again when upgrading to 1949 (a script will be trigged only if the system is running a version lower than the build number specified here. If the running version is same as the build number, SpliceDataDictionary.needToUpgrade() ensures that no upgrade script will be triggered).", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r382295252", "createdAt": "2020-02-20T22:31:18Z", "author": {"login": "yxia92"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1949), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "868d9b349637ed5888401d29061f38232c1b3b44"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjUyNjgyMg==", "bodyText": "Done :)", "url": "https://github.com/splicemachine/spliceengine/pull/3225#discussion_r382526822", "createdAt": "2020-02-21T11:12:40Z", "author": {"login": "arnaud-splice"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/upgrade/SpliceCatalogUpgradeScripts.java", "diffHunk": "@@ -76,6 +76,7 @@ else if(v1==v2)\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1933), new UpgradeScriptToUpdateViewForSYSCONGLOMERATEINSCHEMAS(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1938), new UpgradeScriptForTriggerWhenClause(sdd,tc));\n         scripts.put(new Splice_DD_Version(sdd,3,1,0, 1941), new UpgradeScriptForTableColumnViewInSYSIBM(sdd,tc));\n+        scripts.put(new Splice_DD_Version(sdd,3,1,0, 1949), new UpgradeScriptBase(sdd,tc));", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjI5NTI1Mg=="}, "originalCommit": {"oid": "868d9b349637ed5888401d29061f38232c1b3b44"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3378, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}