{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkwMTkxODA5", "number": 4163, "title": "DB-10084 HBase flush and compactions are aware of min retention period ", "bodyText": "", "createdAt": "2020-09-21T10:22:08Z", "url": "https://github.com/splicemachine/spliceengine/pull/4163", "merged": true, "mergeCommit": {"oid": "a1eebf44a7c030e7bab15077c1a661186ecb11ac"}, "closed": true, "closedAt": "2020-10-08T06:16:37Z", "author": {"login": "arnaud-splice"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdHf4mVgH2gAyNDkwMTkxODA5OjJmOTMwMWEyOTNlNzdiZjIwMGVkMDFiNDEwOTUwYTIxNzQxNjczNGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdP_FUuAFqTUwMzM2NDczNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "2f9301a293e77bf200ed01b410950a217416734e", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/2f9301a293e77bf200ed01b410950a217416734e", "committedDate": "2020-09-10T12:23:35Z", "message": "DB-10084 WIP."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a29fb0ce25433b46af4134a8711d4db5b6849c79", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/a29fb0ce25433b46af4134a8711d4db5b6849c79", "committedDate": "2020-09-10T12:23:35Z", "message": "DB-10084 flush/compaction are aware of minRetentionPeriod."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3f8fa905f17418188309ae407c6520a4b2008537", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/3f8fa905f17418188309ae407c6520a4b2008537", "committedDate": "2020-09-10T12:23:35Z", "message": "DB-10084 Add default flusher to known places."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2d6e6f14c3729d3b742bc9866289757e7791b62a", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/2d6e6f14c3729d3b742bc9866289757e7791b62a", "committedDate": "2020-09-10T12:23:35Z", "message": "DB-10084 tolerate having Splice flusher not set properly."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c8dd1d46c8174a1652b736783bd758522fc2cb4", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/4c8dd1d46c8174a1652b736783bd758522fc2cb4", "committedDate": "2020-09-11T12:17:05Z", "message": "DB-10084 address comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5fac4f1f5417084bf5034bef2a0d36e08339fdb8", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/5fac4f1f5417084bf5034bef2a0d36e08339fdb8", "committedDate": "2020-09-14T14:25:52Z", "message": "DB-10084 address comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "028751068fc4e7ab01d8b79e7b3fde2f51f95429", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/028751068fc4e7ab01d8b79e7b3fde2f51f95429", "committedDate": "2020-09-14T16:10:50Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10084"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "3958379e4841b66c79a06d419f93c09fdc15ae1d", "author": {"user": {"login": "hatyo", "name": "Youssef Hatem"}}, "url": "https://github.com/splicemachine/spliceengine/commit/3958379e4841b66c79a06d419f93c09fdc15ae1d", "committedDate": "2020-09-14T17:46:04Z", "message": "DB-10084 address further comments."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/00845b1a61114db00fd66ca545bf89b017d20018", "committedDate": "2020-09-21T09:53:15Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10084"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjUwNTIw", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-493250520", "createdAt": "2020-09-22T08:51:36Z", "commit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1MzowNlrOHVwXwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwODo1MzowNlrOHVwXwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU3NDY1OA==", "bodyText": "should it be in Java style getMinRetainedPeriod?", "url": "https://github.com/splicemachine/spliceengine/pull/4163#discussion_r492574658", "createdAt": "2020-09-22T08:53:06Z", "author": {"login": "ipraznik-splice"}, "path": "db-engine/src/main/java/com/splicemachine/db/iapi/sql/dictionary/TableDescriptor.java", "diffHunk": "@@ -399,11 +399,11 @@ public void setPurgeDeletedRows(boolean purgeDeletedRows) {\n         this.purgeDeletedRows = purgeDeletedRows;\n     }\n \n-    public Long getMinRetainedVersions() {\n+    public Long minRetainedPeriod() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018"}, "originalPosition": 5}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjY5ODY2", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-493269866", "createdAt": "2020-09-22T09:16:36Z", "commit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOToxNjozNlrOHVxQOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yMlQwOToxNjozNlrOHVxQOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5MjU4OTExNQ==", "bodyText": "10 sec delay has to be removed", "url": "https://github.com/splicemachine/spliceengine/pull/4163#discussion_r492589115", "createdAt": "2020-09-22T09:16:36Z", "author": {"login": "ipraznik-splice"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/impl/sql/catalog/SpliceDataDictionary.java", "diffHunk": "@@ -1666,6 +1669,11 @@ public void addMinRetentionPeriodColumn(TransactionController tc) throws Standar\n             DataTypeDescriptor dtd = DataTypeDescriptor.getBuiltInDataTypeDescriptor(Types.BIGINT, 1);\n             tc.addColumnToConglomerate(td.getHeapConglomerateId(), colNumber, storableDV, dtd.getCollationType());\n \n+            try {\n+                Thread.sleep(10000);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018"}, "originalPosition": 24}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDkzMjcwNzI1", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-493270725", "createdAt": "2020-09-22T09:17:38Z", "commit": {"oid": "00845b1a61114db00fd66ca545bf89b017d20018"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "482529254e265a64818881245c5dfcad6bdfc5cb", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/482529254e265a64818881245c5dfcad6bdfc5cb", "committedDate": "2020-09-22T09:36:26Z", "message": "DB-10084 Address comments"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "556434127e38cea7923b3fd726978e38374f3fc2", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/556434127e38cea7923b3fd726978e38374f3fc2", "committedDate": "2020-09-22T09:55:52Z", "message": "DB-10084 Rename setMinRetainedPeriod to setMinRetentionPeriod"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "13b80a27d9c1ab3abc6e9022fb0a3f26159260de", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/13b80a27d9c1ab3abc6e9022fb0a3f26159260de", "committedDate": "2020-09-23T13:13:43Z", "message": "DB-10084 Return default value if region is offline"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f643dd64a162e797cb859acc6a7952d0210c2efe", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/f643dd64a162e797cb859acc6a7952d0210c2efe", "committedDate": "2020-09-23T14:25:15Z", "message": "DB-10084 Suppress errors from getTxnLowWatermark in SpliceDefaultFlusher"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "67de56acefcd5443d21d6a73814fc4e9283565c8", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/67de56acefcd5443d21d6a73814fc4e9283565c8", "committedDate": "2020-09-25T11:33:22Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10084"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7d483abc547edb522377ee46766dad2b681d7096", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/7d483abc547edb522377ee46766dad2b681d7096", "committedDate": "2020-09-25T14:15:04Z", "message": "DB-10084 Remove assert"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed25d219973da7e41efc0eca4d4509d3347afd82", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/ed25d219973da7e41efc0eca4d4509d3347afd82", "committedDate": "2020-09-25T14:13:54Z", "message": "DB-10084 Remove assert"}, "afterCommit": {"oid": "7d483abc547edb522377ee46766dad2b681d7096", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/7d483abc547edb522377ee46766dad2b681d7096", "committedDate": "2020-09-25T14:15:04Z", "message": "DB-10084 Remove assert"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "082a0cac08999ed308ebc86c087e723969c30160", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/082a0cac08999ed308ebc86c087e723969c30160", "committedDate": "2020-09-29T11:00:11Z", "message": "DB-10084 Fix issue with ConfigBuilder"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "165e3e9528f62a24603101f0b6e3f8947af638e2", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/165e3e9528f62a24603101f0b6e3f8947af638e2", "committedDate": "2020-10-01T16:02:46Z", "message": "DB-10084 Fix 3 issues\n\n- Do not attempt to get transaction low watermark in Restore Mode\n\n- Fix default min_retention_period. If we can't find the right\ninformation, we should retain forever, instead of returning an unrelated\nOLDEST_TIME_TRAVEL_TX. A retention period is expressed in seconds,\nwhereas OLDEST_TIME_TRAVEL_TX is a transaction_id\n\n- getTxnLowWatermark should not try to get a specific Txn ID if the\nretention period is set to forever"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTA2ODQ4", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-501906848", "createdAt": "2020-10-05T10:08:45Z", "commit": {"oid": "165e3e9528f62a24603101f0b6e3f8947af638e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAxOTYyMDM2", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-501962036", "createdAt": "2020-10-05T11:30:06Z", "commit": {"oid": "165e3e9528f62a24603101f0b6e3f8947af638e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTAzMzY0NzM2", "url": "https://github.com/splicemachine/spliceengine/pull/4163#pullrequestreview-503364736", "createdAt": "2020-10-06T21:15:56Z", "commit": {"oid": "165e3e9528f62a24603101f0b6e3f8947af638e2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1120, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}