{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMTM3ODA0", "number": 3922, "title": "DB-9840 Fix a parsing error when comments exist before CREATE TABLE...AS", "bodyText": "", "createdAt": "2020-08-03T12:04:37Z", "url": "https://github.com/splicemachine/spliceengine/pull/3922", "merged": true, "mergeCommit": {"oid": "2bb9b56b33a1efdabf8c582a6bf0364329331ca9"}, "closed": true, "closedAt": "2020-08-06T19:50:38Z", "author": {"login": "ascend1"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc7QzC5gH2gAyNDYyMTM3ODA0OmVhZDhjMWZmYmRmNWM3ZGQ0ODc2ZjZkMWMxYmNkZDk0YTkxYzc3OTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABc8P9bygH2gAyNDYyMTM3ODA0OmFkNTE0ZDMxMTM3YmNlODFiMDRmNTNmNGNmNmRkMjY3YWQ3ZjZjMmE=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798", "author": {"user": {"login": "ascend1", "name": "Zhen Li"}}, "url": "https://github.com/splicemachine/spliceengine/commit/ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798", "committedDate": "2020-08-03T12:01:51Z", "message": "DB-9840 Fix a parsing error when comments exist before CREATE TABLE...AS"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzEzMzU3", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-460313357", "createdAt": "2020-08-03T20:18:40Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwNjY5MzM4", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-460669338", "createdAt": "2020-08-04T09:57:50Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYxNDIwNjc1", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-461420675", "createdAt": "2020-08-05T07:48:49Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyMDk2Mzgx", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-462096381", "createdAt": "2020-08-05T23:46:44Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDAwMjI2", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-462400226", "createdAt": "2020-08-06T10:34:10Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYyNDAxMjk3", "url": "https://github.com/splicemachine/spliceengine/pull/3922#pullrequestreview-462401297", "createdAt": "2020-08-06T10:35:48Z", "commit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDozNTo0OFrOG8uAOg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wNlQxMDozNTo0OFrOG8uAOg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NjMyMTQ2Ng==", "bodyText": "You don't need to catch anything here, just let the exception bubble up and if any is raised the test will fail with the appropriate stacktrace and message.", "url": "https://github.com/splicemachine/spliceengine/pull/3922#discussion_r466321466", "createdAt": "2020-08-06T10:35:48Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/CreateTableIT.java", "diffHunk": "@@ -224,4 +224,18 @@ public void testCreateTableIfNotExists_GlobalTempTable() throws Exception {\n     public void testCreateTableIfNotExists_ExternalTable() throws Exception {\n         testCreateTableIfNotExists(\"external\");\n     }\n+\n+    @Test\n+    public void testCommentBeforeCreateTableAs() throws Exception {\n+        methodWatcher.executeUpdate(\"create table test_comment_before_create_as_dep_tbl (col int)\");\n+\n+        String createStmt = \"create table %s as select * from test_comment_before_create_as_dep_tbl\";\n+        try {\n+            methodWatcher.executeUpdate(\"-- some SQL-style comment here\\n\" + String.format(createStmt, generateTableName()));\n+            methodWatcher.executeUpdate(\"/* some C-style comment here */\\n\" + String.format(createStmt, generateTableName()));\n+            methodWatcher.executeUpdate(\"/* some mixed */\\n-- comments\\n\" + String.format(createStmt, generateTableName()));\n+        } catch (SQLException e) {\n+            Assert.fail(\"No exception should be thrown\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ead8c1ffbdf5c7dd4876f6d1c1bcdd94a91c7798"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad514d31137bce81b04f53f4cf6dd267ad7f6c2a", "author": {"user": {"login": "ascend1", "name": "Zhen Li"}}, "url": "https://github.com/splicemachine/spliceengine/commit/ad514d31137bce81b04f53f4cf6dd267ad7f6c2a", "committedDate": "2020-08-06T13:37:13Z", "message": "DB-9840 Simplify test"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1212, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}