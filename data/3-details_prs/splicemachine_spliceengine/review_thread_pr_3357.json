{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzk0OTkwODI0", "number": 3357, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoyNzozOFrODs10qQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMDo0NDozNlrODtVj4w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4MzQ1NzY5OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/SparkExplainIT.java", "isResolved": true, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0zMFQyMDoyNzozOFrOF967Jw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMDo0MDozMVrOF-s_8g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3Mjg3MQ==", "bodyText": "This category makes the IT ineligible for remote mode. Is it justified? If yes, please update remote_it/pom.xml.", "url": "https://github.com/splicemachine/spliceengine/pull/3357#discussion_r400472871", "createdAt": "2020-03-30T20:27:38Z", "author": {"login": "OlegMazurov"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/SparkExplainIT.java", "diffHunk": "@@ -34,6 +36,7 @@\n import static com.splicemachine.test_tools.Rows.row;\n import static com.splicemachine.test_tools.Rows.rows;\n \n+@Category(HBaseTest.class)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b54d7b27fab05aa4ab76609774deb0cc6b162a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI3MzQzNg==", "bodyText": "Thanks @OlegMazurov The reason I put this test in the HBaseTest category is to prevent it from running on the mem profile. There are two reasons: 1) sparkexplain under mem profile does not really return spark explain, it returns the control execution plan. 2) the plan from control path is a bit different from the spark plan.\nHowever, I don't intend to make the IT ineligible for remote mode. Is there a way that I can make it eligible for remote test but still not triggered for mem profile?", "url": "https://github.com/splicemachine/spliceengine/pull/3357#discussion_r401273436", "createdAt": "2020-03-31T23:30:27Z", "author": {"login": "yxia92"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/SparkExplainIT.java", "diffHunk": "@@ -34,6 +36,7 @@\n import static com.splicemachine.test_tools.Rows.row;\n import static com.splicemachine.test_tools.Rows.rows;\n \n+@Category(HBaseTest.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3Mjg3MQ=="}, "originalCommit": {"oid": "55b54d7b27fab05aa4ab76609774deb0cc6b162a"}, "originalPosition": 16}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI5MzI5OA==", "bodyText": "I was wrong assuming that the category brings dependencies on HBase. I don't think we should exclude the test from remote_it.", "url": "https://github.com/splicemachine/spliceengine/pull/3357#discussion_r401293298", "createdAt": "2020-04-01T00:40:31Z", "author": {"login": "OlegMazurov"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/impl/sql/execute/operations/SparkExplainIT.java", "diffHunk": "@@ -34,6 +36,7 @@\n import static com.splicemachine.test_tools.Rows.row;\n import static com.splicemachine.test_tools.Rows.rows;\n \n+@Category(HBaseTest.class)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMDQ3Mjg3MQ=="}, "originalCommit": {"oid": "55b54d7b27fab05aa4ab76609774deb0cc6b162a"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ4ODY1NzYzOnYy", "diffSide": "RIGHT", "path": "splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceUnitTest.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMDo0NDozNlrOF-tEgg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wMVQwMDo0NDozNlrOF-tEgg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwMTI5NDQ2Ng==", "bodyText": "ResultSet is AutoCloseable. You can use try-with-resources here.", "url": "https://github.com/splicemachine/spliceengine/pull/3357#discussion_r401294466", "createdAt": "2020-04-01T00:44:36Z", "author": {"login": "OlegMazurov"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/test/framework/SpliceUnitTest.java", "diffHunk": "@@ -290,9 +290,28 @@ protected void rowContainsQuery(int level, String query, String contains, Splice\n \n \n     protected void queryDoesNotContainString(String query, String notContains,SpliceWatcher methodWatcher) throws Exception {\n-        ResultSet resultSet = methodWatcher.executeQuery(query);\n-        while (resultSet.next())\n-            Assert.assertFalse(\"failed query: \" + query + \" -> \" + resultSet.getString(1), resultSet.getString(1).contains(notContains));\n+        queryDoesNotContainString(query,new String[] {notContains}, methodWatcher, false);\n+    }\n+\n+    protected void queryDoesNotContainString(String query, String[] notContains,SpliceWatcher methodWatcher, boolean caseInsensitive) throws Exception {\n+        ResultSet rs = null;\n+        try {\n+            rs = methodWatcher.executeQuery(query);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "55b54d7b27fab05aa4ab76609774deb0cc6b162a"}, "originalPosition": 13}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3298, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}