{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDY4ODU2OTA0", "number": 3995, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjoyOToxN1rOEZHjQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjoyOToxN1rOEZHjQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk0NzczNTcwOnYy", "diffSide": "RIGHT", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/GroupByList.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjoyOToxN1rOHBv_CA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xN1QxNjozODozOVrOHBwT1w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5NjgwOA==", "bodyText": "Can we throw the same error message like the one in the below code which comes a few lines after this line:\n\t\t\t    /* Column is out of range if either a) resultCol is null, OR\n\t\t\t     * b) resultCol points to a column that is not visible to the\n\t\t\t     * user (i.e. it was generated internally).\n\t\t\t    */\n                if ((resultCol == null) ||\n                        (resultCol.getColumnPosition() > targetCols.visibleSize()))\n                {\n                    throw StandardException.newException(SQLState.LANG_COLUMN_OUT_OF_RANGE,\n                            String.valueOf(columnPosition));\n                }\n\nI think they are of similar nature, so it would be better to return consistent error message.", "url": "https://github.com/splicemachine/spliceengine/pull/3995#discussion_r471596808", "createdAt": "2020-08-17T16:29:17Z", "author": {"login": "yxia92"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/GroupByList.java", "diffHunk": "@@ -110,6 +110,10 @@ public void bindGroupByColumns(SelectNode select,List<AggregateNode> aggregateVe\n             if (OrderByColumn.isReferedColByNum(groupByCol.getColumnExpression())) {\n                 ResultColumnList targetCols = select.getResultColumns();\n                 int columnPosition = (Integer) groupByCol.getColumnExpression().getConstantValueAsObject();\n+                if (columnPosition <= 0) {\n+                    throw StandardException.newException(SQLState.LANG_INVALID_GROUP_POSITION,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e96df708f73ab609a007d9af37f153c059126504"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTYwMjEzNQ==", "bodyText": "Oh yes, sorry that I didn't see the exception below. I was searching only using the term \"GROUP\". Fixed in the new commit.", "url": "https://github.com/splicemachine/spliceengine/pull/3995#discussion_r471602135", "createdAt": "2020-08-17T16:38:39Z", "author": {"login": "ascend1"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/GroupByList.java", "diffHunk": "@@ -110,6 +110,10 @@ public void bindGroupByColumns(SelectNode select,List<AggregateNode> aggregateVe\n             if (OrderByColumn.isReferedColByNum(groupByCol.getColumnExpression())) {\n                 ResultColumnList targetCols = select.getResultColumns();\n                 int columnPosition = (Integer) groupByCol.getColumnExpression().getConstantValueAsObject();\n+                if (columnPosition <= 0) {\n+                    throw StandardException.newException(SQLState.LANG_INVALID_GROUP_POSITION,", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MTU5NjgwOA=="}, "originalCommit": {"oid": "e96df708f73ab609a007d9af37f153c059126504"}, "originalPosition": 5}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3001, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}