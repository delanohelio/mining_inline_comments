{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTA5MDQ4Mzcx", "number": 4372, "title": "DB-10480 Support new syntax for EXPORT to specify different quote modes ", "bodyText": "", "createdAt": "2020-10-23T15:36:19Z", "url": "https://github.com/splicemachine/spliceengine/pull/4372", "merged": true, "mergeCommit": {"oid": "03f793c527151c651b6f78c9c7d22b9022dd0771"}, "closed": true, "closedAt": "2020-10-28T23:03:05Z", "author": {"login": "arnaud-splice"}, "timelineItems": {"totalCount": 15, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdVYqQHgBqjM5MTQ2MDkyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdXIHciAFqTUxOTI3MzUwNQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "26a2c3c59f5b16fd99fa845fbb1a9eb769bb3767", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/26a2c3c59f5b16fd99fa845fbb1a9eb769bb3767", "committedDate": "2020-10-23T15:35:26Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10480"}, "afterCommit": {"oid": "199b0fb4e18793eebddc84335e8648b786c03a36", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/199b0fb4e18793eebddc84335e8648b786c03a36", "committedDate": "2020-10-23T15:53:22Z", "message": "DB-10420 Support new syntax for Export to specify different quote modes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "199b0fb4e18793eebddc84335e8648b786c03a36", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/199b0fb4e18793eebddc84335e8648b786c03a36", "committedDate": "2020-10-23T15:53:22Z", "message": "DB-10420 Support new syntax for Export to specify different quote modes"}, "afterCommit": {"oid": "bd808b581bb174afc04d27abd25a1982e8bf0be6", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/bd808b581bb174afc04d27abd25a1982e8bf0be6", "committedDate": "2020-10-23T15:53:52Z", "message": "DB-10420 Support new syntax for Export to specify different quote modes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "committedDate": "2020-10-23T16:05:20Z", "message": "DB-10480 Support new syntax for Export to specify different quote modes"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bd808b581bb174afc04d27abd25a1982e8bf0be6", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/bd808b581bb174afc04d27abd25a1982e8bf0be6", "committedDate": "2020-10-23T15:53:52Z", "message": "DB-10420 Support new syntax for Export to specify different quote modes"}, "afterCommit": {"oid": "009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/009ca3de6c721b6b5720bdaa0ed5da50a0ac936e", "committedDate": "2020-10-23T16:05:20Z", "message": "DB-10480 Support new syntax for Export to specify different quote modes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5c68ba5cec59a4f3489001a93c2f11a85a635f91", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/5c68ba5cec59a4f3489001a93c2f11a85a635f91", "committedDate": "2020-10-24T21:10:16Z", "message": "DB-10480 Support binary export with new export syntax"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "51a3c5df0d8de082bae452c16ad31c56e5b0f035", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/51a3c5df0d8de082bae452c16ad31c56e5b0f035", "committedDate": "2020-10-24T21:17:05Z", "message": "DB-10480 Add new tokens to non reserved list"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/38340e9da98b513fa53bb2e746358fb2f2190408", "committedDate": "2020-10-24T22:56:18Z", "message": "DB-10480 Fix spotbugs"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3MzYyMDky", "url": "https://github.com/splicemachine/spliceengine/pull/4372#pullrequestreview-517362092", "createdAt": "2020-10-27T05:39:21Z", "commit": {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NDY5MDg1", "url": "https://github.com/splicemachine/spliceengine/pull/4372#pullrequestreview-517469085", "createdAt": "2020-10-27T08:54:24Z", "commit": {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODo1NDoyNFrOHoxSzQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMC0yN1QwODo1NjozOFrOHoxYjA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxMjcxNw==", "bodyText": "I think you can get rid of this, since <EXPORT> has two non-ambiguous branches:\n\n<EXPORT> <TO>: the new syntax.\n<EXPORT> methodCallParameterList which, by looking at methodCallParameterList boils down to: <EXPORT> <LEFT_PAREN> ....\n\nSo it is possible to restructure it a bit differently, e.g. something like:\n<EXPORT> handleExport\n...\nValueNode handleExport() throws StandardException:\n{}\n{\n  <TO> // new syntax\n  |\n  methodCallParameterList // old syntax.\n}\n\n(I think you're a fan of this syntax ;) )", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512512717", "createdAt": "2020-10-27T08:54:24Z", "author": {"login": "hatyo"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/sqlgrammar.jj", "diffHunk": "@@ -4194,10 +4200,61 @@ exportStatement() throws StandardException :\n {\n     StatementNode   statementNode;\n     Vector parameterList = new Vector();\n-}\n-{\n+    ValueNode exportPath;\n+    ValueNode compression = null;\n+    ValueNode replicationCount = null;\n+    ValueNode encoding = null;\n+    ValueNode fieldSeparator = null;\n+    ValueNode quoteCharacter = null;\n+    ValueNode quoteMode = null;\n+    ValueNode fileType = null;\n+}\n+{\n+    LOOKAHEAD ( {getToken(1).kind == EXPORT && getToken(2).kind == TO} )", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUxMjUxNDE4OA==", "bodyText": "I wouldn't change white spaces if possible to keep Git history clean, maybe dedicate a JIRA for that effort instead.", "url": "https://github.com/splicemachine/spliceengine/pull/4372#discussion_r512514188", "createdAt": "2020-10-27T08:56:38Z", "author": {"login": "hatyo"}, "path": "db-tools-i18n/src/main/resources/com/splicemachine/db/loc/messages.xml", "diffHunk": "@@ -290,12 +290,12 @@ Guide.\n                 <text>A connection could not be established because the password has a length of zero or is larger than the maximum allowed by the network protocol.</text>\n             </msg>\n \n-\t\t\t<msg>\n+            <msg>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "38340e9da98b513fa53bb2e746358fb2f2190408"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "dc5f591c6a4cc4110ad32dee23232850ea5c9696", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/dc5f591c6a4cc4110ad32dee23232850ea5c9696", "committedDate": "2020-10-27T10:43:39Z", "message": "DB-10480 Address review comment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE3NTczMjgw", "url": "https://github.com/splicemachine/spliceengine/pull/4372#pullrequestreview-517573280", "createdAt": "2020-10-27T10:53:14Z", "commit": {"oid": "dc5f591c6a4cc4110ad32dee23232850ea5c9696"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7939b37b6c5498241788632ff965c8eb9486ebf4", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/7939b37b6c5498241788632ff965c8eb9486ebf4", "committedDate": "2020-10-27T14:20:03Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10480"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4d8922e0a8dffe9f227110ff24871ee492adab9d", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/4d8922e0a8dffe9f227110ff24871ee492adab9d", "committedDate": "2020-10-28T16:17:43Z", "message": "Merge remote-tracking branch 'origin/master' into DB-10480"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "796d42b21ffd07c7af6abef740a9da901c4b2aec", "author": {"user": {"login": "arnaud-splice", "name": "Arnaud Lacurie"}}, "url": "https://github.com/splicemachine/spliceengine/commit/796d42b21ffd07c7af6abef740a9da901c4b2aec", "committedDate": "2020-10-28T17:58:26Z", "message": "DB-10480 Fix typo"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTE5MjczNTA1", "url": "https://github.com/splicemachine/spliceengine/pull/4372#pullrequestreview-519273505", "createdAt": "2020-10-29T01:44:52Z", "commit": {"oid": "796d42b21ffd07c7af6abef740a9da901c4b2aec"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1074, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}