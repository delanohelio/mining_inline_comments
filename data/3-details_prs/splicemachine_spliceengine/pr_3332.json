{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkxNjQ0Mzk4", "number": 3332, "title": "DB-8949 Decouple OlapServer from HMaster", "bodyText": "Allowing for Kubernetes-based deployment\nAlso:\n\nRetry Olap Server submission if failure is a ConnectionException\nAdd diagnostics if region server can't contact OlapServer (both for a Yarn or Spark failure)", "createdAt": "2020-03-20T17:04:52Z", "url": "https://github.com/splicemachine/spliceengine/pull/3332", "merged": true, "mergeCommit": {"oid": "5e424e17c17f37e14a36c22591f66353ce62e5d2"}, "closed": true, "closedAt": "2020-05-06T23:55:58Z", "author": {"login": "dgomezferro"}, "timelineItems": {"totalCount": 12, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPKir6gH2gAyMzkxNjQ0Mzk4OmQxZDE3NWExNTZiOWJiZWJmYmZlMDNlOWE0MzBkZTZhNDhmZThmYjQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcewjfSgFqTQwNzAzNDk3MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d1d175a156b9bbebfbfe03e9a430de6a48fe8fb4", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/d1d175a156b9bbebfbfe03e9a430de6a48fe8fb4", "committedDate": "2020-03-19T11:51:53Z", "message": "DB-8949 Decouple OlapServer from HMaster\n\nAllow for Kubernetes-based deployment"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9339e6e435cab2c5803c54e02f2441c61e218a67", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/9339e6e435cab2c5803c54e02f2441c61e218a67", "committedDate": "2020-03-19T14:13:00Z", "message": "DB-8949 Retry Olap Server submission if failure is ConnectionEx"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5f2400f816e211e9d375d8797b824f89b9f2b956", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/5f2400f816e211e9d375d8797b824f89b9f2b956", "committedDate": "2020-03-20T15:31:50Z", "message": "DB-8949 Add diagnostics to OlapServer connection exceptions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c2e90dc9850634f8981d711afaafc14cbc69b728", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/c2e90dc9850634f8981d711afaafc14cbc69b728", "committedDate": "2020-04-01T09:13:10Z", "message": "DB-8949 Create ZK paths on OlapServerMaster too"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6f3d1dc72bce799169c362c5554d1397a5b9330d", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/6f3d1dc72bce799169c362c5554d1397a5b9330d", "committedDate": "2020-04-03T12:09:32Z", "message": "DB-8949 Create Persistent ZK nodes"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "5250a4c31ad808cb04b72e03fe66418bd6070209", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/5250a4c31ad808cb04b72e03fe66418bd6070209", "committedDate": "2020-04-22T10:00:02Z", "message": "Merge remote-tracking branch 'origin/master' into DB-8949"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bff77dc2f1cde23a365d6e834d51f053e1ad00f2", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/bff77dc2f1cde23a365d6e834d51f053e1ad00f2", "committedDate": "2020-04-22T17:54:00Z", "message": "DB-8949 Address SpotBugs issues"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f31aec31cfe92076ef7f5c66aa570a7f5b088fe3", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/f31aec31cfe92076ef7f5c66aa570a7f5b088fe3", "committedDate": "2020-04-22T16:56:05Z", "message": "DB-8949 Address SpotBugs issues"}, "afterCommit": {"oid": "bff77dc2f1cde23a365d6e834d51f053e1ad00f2", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/bff77dc2f1cde23a365d6e834d51f053e1ad00f2", "committedDate": "2020-04-22T17:54:00Z", "message": "DB-8949 Address SpotBugs issues"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "801b3ab69e30333b4fd9a1b356d400063b376f04", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/801b3ab69e30333b4fd9a1b356d400063b376f04", "committedDate": "2020-04-27T08:21:08Z", "message": "DB-8949 SpotBugs"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ebc92c680f7573b77d9d10a4b095046bde83db8e", "author": {"user": {"login": "dgomezferro", "name": "Daniel G\u00f3mez Ferro"}}, "url": "https://github.com/splicemachine/spliceengine/commit/ebc92c680f7573b77d9d10a4b095046bde83db8e", "committedDate": "2020-05-06T17:34:52Z", "message": "Merge branch 'master' into DB-8949"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA2OTgwNjEw", "url": "https://github.com/splicemachine/spliceengine/pull/3332#pullrequestreview-406980610", "createdAt": "2020-05-06T20:56:58Z", "commit": {"oid": "ebc92c680f7573b77d9d10a4b095046bde83db8e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMDo1Njo1OFrOGRlHEQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQyMDo1Njo1OFrOGRlHEQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMTA4Njk5Mw==", "bodyText": "looks good, although i don't understand everything. are server names always of the form xxxxNUM, where NUM is 10 digits?", "url": "https://github.com/splicemachine/spliceengine/pull/3332#discussion_r421086993", "createdAt": "2020-05-06T20:56:58Z", "author": {"login": "martinrupp"}, "path": "hbase_sql/src/main/java/com/splicemachine/olap/OlapServerZNode.java", "diffHunk": "@@ -0,0 +1,54 @@\n+package com.splicemachine.olap;\n+\n+import java.util.Objects;\n+\n+public class OlapServerZNode implements Comparable<OlapServerZNode> {\n+    private String queueName;\n+    private int sequence;\n+\n+    public OlapServerZNode(String queueName, int sequence) {\n+        this.queueName = queueName;\n+        this.sequence = sequence;\n+    }\n+\n+    public String getQueueName() {\n+        return queueName;\n+    }\n+\n+    public long getSequence() {\n+        return sequence;\n+    }\n+\n+    public String toZNode() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ebc92c680f7573b77d9d10a4b095046bde83db8e"}, "originalPosition": 22}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDA3MDM0OTcx", "url": "https://github.com/splicemachine/spliceengine/pull/3332#pullrequestreview-407034971", "createdAt": "2020-05-06T22:38:01Z", "commit": {"oid": "ebc92c680f7573b77d9d10a4b095046bde83db8e"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1389, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}