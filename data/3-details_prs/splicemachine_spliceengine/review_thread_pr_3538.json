{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDEzNjg2MTY4", "number": 3538, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo0ODoyNlrOD50zHA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo1Mjo0M1rOD507ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTYwNDc2OnYy", "diffSide": "RIGHT", "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/OperatorToString.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo0ODoyNlrOGRT4iA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDo0ODoxNVrOGRWwNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwNDc0NA==", "bodyText": "i think this is effectively the same code as lines 355-357. SimpleStringOperatorNode doesn't override getOperand, and even if - if i understand java inheritance correctly - i think uop.getOperand() would call the same as (((SimpleStringOperatorNode)uop).getOperand() .\nso i think lines 355-361 can be replaced by\nelse if (operand instanceof SimpleStringOperatorNode || operand instanceof NotNode) {\n    return format(\"%s(%s) \", operatorString, opToString2(uop.getOperand(), vars));\n}", "url": "https://github.com/splicemachine/spliceengine/pull/3538#discussion_r420804744", "createdAt": "2020-05-06T13:48:26Z", "author": {"login": "martinrupp"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/OperatorToString.java", "diffHunk": "@@ -356,6 +356,9 @@ else if (operand instanceof SimpleStringOperatorNode) {\n                     SimpleStringOperatorNode sso = (SimpleStringOperatorNode) operand;\n                     return format(\"%s(%s) \", operatorString, opToString2(sso.getOperand(), vars));\n                 }\n+                else if (operand instanceof NotNode) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e09c91c373d2be25fe29ba7106a72a697ff936c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg1MTc2Ng==", "bodyText": "Good eye, I applied that change.", "url": "https://github.com/splicemachine/spliceengine/pull/3538#discussion_r420851766", "createdAt": "2020-05-06T14:48:15Z", "author": {"login": "dgomezferro"}, "path": "db-engine/src/main/java/com/splicemachine/db/impl/sql/compile/OperatorToString.java", "diffHunk": "@@ -356,6 +356,9 @@ else if (operand instanceof SimpleStringOperatorNode) {\n                     SimpleStringOperatorNode sso = (SimpleStringOperatorNode) operand;\n                     return format(\"%s(%s) \", operatorString, opToString2(sso.getOperand(), vars));\n                 }\n+                else if (operand instanceof NotNode) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwNDc0NA=="}, "originalCommit": {"oid": "1e09c91c373d2be25fe29ba7106a72a697ff936c"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjYxOTYyNjU0OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/main/java/com/splicemachine/derby/utils/StatisticsOperation.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxMzo1Mjo0M1rOGRUGBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNS0wNlQxNDozMzo0NlrOGRWDBA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwODE5Nw==", "bodyText": "do we test this case?", "url": "https://github.com/splicemachine/spliceengine/pull/3538#discussion_r420808197", "createdAt": "2020-05-06T13:52:43Z", "author": {"login": "martinrupp"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/utils/StatisticsOperation.java", "diffHunk": "@@ -126,6 +126,9 @@ else if (storedAs.equals(\"O\"))\n             } else {\n                 statsDataSet = scanSetBuilder.buildDataSet(scope).map(new CloneFunction<>(operationContext));\n             }\n+            if(statsDataSet.partitions() == 0) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1e09c91c373d2be25fe29ba7106a72a697ff936c"}, "originalPosition": 4}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDg0MDE5Ng==", "bodyText": "Yes, ExternalTableIT.collectStats() was failing due to this since DB-9369 was merged", "url": "https://github.com/splicemachine/spliceengine/pull/3538#discussion_r420840196", "createdAt": "2020-05-06T14:33:46Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/main/java/com/splicemachine/derby/utils/StatisticsOperation.java", "diffHunk": "@@ -126,6 +126,9 @@ else if (storedAs.equals(\"O\"))\n             } else {\n                 statsDataSet = scanSetBuilder.buildDataSet(scope).map(new CloneFunction<>(operationContext));\n             }\n+            if(statsDataSet.partitions() == 0) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyMDgwODE5Nw=="}, "originalCommit": {"oid": "1e09c91c373d2be25fe29ba7106a72a697ff936c"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3220, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}