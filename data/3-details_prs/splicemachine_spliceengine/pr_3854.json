{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDUxMTk2MDUx", "number": 3854, "title": "DB-9847 Spark 3.0 Configure upgraded maven dependencies", "bodyText": "", "createdAt": "2020-07-17T15:17:53Z", "url": "https://github.com/splicemachine/spliceengine/pull/3854", "merged": true, "mergeCommit": {"oid": "3f4a4dc0667c4a451e29d386c9279d98f468c5f0"}, "closed": true, "closedAt": "2020-08-20T16:52:15Z", "author": {"login": "ipraznik-splice"}, "timelineItems": {"totalCount": 21, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABc1wKcRgH2gAyNDUxMTk2MDUxOjNiZTRkOWFjN2YzZjZmYWM4ZjllYzE3NjFjNmU0MTlkZjQ3M2Y3MTg=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAnIZJAFqTQ3MTA5MjExNg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3be4d9ac7f3f6fac8f9ec1761c6e419df473f718", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/3be4d9ac7f3f6fac8f9ec1761c6e419df473f718", "committedDate": "2020-07-17T09:10:55Z", "message": "DB-9847 Spark 3.0 Configure upgraded maven dependencies"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "598cc9363dbf1da2b0149ccb763ebb3a199f9287", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/598cc9363dbf1da2b0149ccb763ebb3a199f9287", "committedDate": "2020-07-17T10:04:25Z", "message": "DB-9847 Scala versions"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fe51eb867eb09a8e79a8f76e1f8680a2e12367bd", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/fe51eb867eb09a8e79a8f76e1f8680a2e12367bd", "committedDate": "2020-07-17T11:17:28Z", "message": "DB-9847 spark 3.0 test profile added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/2cba42cee6018132860088d85ef28baed3a3a1cd", "committedDate": "2020-07-27T09:11:32Z", "message": "Merge branch 'master' into DB-9847"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1ODEyNjgw", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-455812680", "createdAt": "2020-07-27T14:04:29Z", "commit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDU1OTQwOTI1", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-455940925", "createdAt": "2020-07-27T16:25:17Z", "commit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjoyNToxN1rOG3qBBQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0yN1QxNjozMzoxOVrOG3qU9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAxMzI1Mw==", "bodyText": "yarn-client is deprecated in Spark 2.0+, no need to keep it.\nspark.submit.deployMode may need to be explicitly specified.", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r461013253", "createdAt": "2020-07-27T16:25:17Z", "author": {"login": "OlegMazurov"}, "path": "platform_it/pom.xml", "diffHunk": "@@ -1002,7 +1002,7 @@\n                                 <argument>-Dsplice.spark.kryoserializer.buffer=4m</argument>\n                                 <argument>-Dsplice.spark.locality.wait=60s</argument>\n                                 <argument>-Dsplice.spark.logConf=true</argument>\n-                                <argument>-Dsplice.spark.master=yarn-client</argument>\n+                                <argument>-Dsplice.spark.master=${splice.spark.master}</argument>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAxNTI0Ng==", "bodyText": "Splice explicitly uses org.xerial.snappy (in addition to Hadoop's internal version). Why is this dependency needed?", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r461015246", "createdAt": "2020-07-27T16:28:21Z", "author": {"login": "OlegMazurov"}, "path": "hbase_sql/pom.xml", "diffHunk": "@@ -148,7 +148,12 @@\n             <artifactId>guava</artifactId>\n             <scope>provided</scope>\n         </dependency>\n-\n+        <dependency>\n+            <groupId>org.iq80.snappy</groupId>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAxNzEwNg==", "bodyText": "Since many modules have this dependency, it should be added to  in the topmost pom.xml", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r461017106", "createdAt": "2020-07-27T16:31:19Z", "author": {"login": "OlegMazurov"}, "path": "scala_util/pom.xml", "diffHunk": "@@ -66,13 +66,13 @@\n         <dependency>\n             <groupId>org.scalatest</groupId>\n             <artifactId>scalatest_${scala.binary.version}</artifactId>\n-            <version>2.2.4</version>\n+            <version>${scalatest.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2MTAxODM1Nw==", "bodyText": "This is an unwanted dependency. We provide it as part of Splice. Do we really need to upgrade it for Spark 3.0? (I'd rather eliminate it)", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r461018357", "createdAt": "2020-07-27T16:33:19Z", "author": {"login": "OlegMazurov"}, "path": "hbase_sql/pom.xml", "diffHunk": "@@ -90,7 +90,7 @@\n         <dependency>\n             <groupId>com.typesafe.akka</groupId>\n             <artifactId>akka-remote_${scala.binary.version}</artifactId>\n-            <version>2.4.8</version>\n+            <version>${akka.version}</version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "2cba42cee6018132860088d85ef28baed3a3a1cd"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d07e9bfb56f43a7788c1b9e383cbbf04a1ea8af0", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/d07e9bfb56f43a7788c1b9e383cbbf04a1ea8af0", "committedDate": "2020-07-28T11:01:59Z", "message": "DB-9847 splice.spark.master is set to yarn, as yarn-client deprecated. org.scalatest version is moved to parent pom"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDYwMzIyMjgz", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-460322283", "createdAt": "2020-08-03T20:34:13Z", "commit": {"oid": "d07e9bfb56f43a7788c1b9e383cbbf04a1ea8af0"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMDozNDoxM1rOG7H0gQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0wM1QyMDozNDoxM1rOG7H0gQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ2NDY0NzI5Nw==", "bodyText": "Probably not a blocker, but is it better to use the lastest scala version 2.12.12 or are there reasons to stay on 2.12.10 ?", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r464647297", "createdAt": "2020-08-03T20:34:13Z", "author": {"login": "jpanko1"}, "path": "pom.xml", "diffHunk": "@@ -945,6 +954,48 @@\n                 <module>assembly</module>\n             </modules>\n         </profile>\n+        <profile>\n+            <id>spark_3.0</id>\n+            <activation>\n+                <property>\n+                    <name>env</name>\n+                    <value>spark_3.0</value>\n+                </property>\n+            </activation>\n+            <properties>\n+                <cdh.parcel.version>6.3.0</cdh.parcel.version>\n+                <envClassifier>spark_3.0</envClassifier>\n+                <envHbase>hbase2.1.4</envHbase>\n+                <hadoop.version>3.0.0-cdh6.3.0</hadoop.version>\n+                <hbase.version>2.1.0-cdh6.3.0</hbase.version>\n+                <hive.version>2.1.1-cdh6.3.0</hive.version>\n+                <zookeeper.version>3.4.5-cdh6.3.0</zookeeper.version>\n+                <scala.binary.version>2.12</scala.binary.version>\n+                <scala.version>2.12.10</scala.version>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d07e9bfb56f43a7788c1b9e383cbbf04a1ea8af0"}, "originalPosition": 62}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "2bff7af0a21a64738e6a18e9458b35a690645358", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/2bff7af0a21a64738e6a18e9458b35a690645358", "committedDate": "2020-08-11T08:55:10Z", "message": "Merge branch 'master' into DB-9847"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9ca67e813b64c2ac7cb7a96142f60ab8b8eb2218", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/9ca67e813b64c2ac7cb7a96142f60ab8b8eb2218", "committedDate": "2020-08-11T09:18:07Z", "message": "splice.spark.master splice.spark.submit.deployMode added to spliceFastSSL"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6cfc6c6755e215af59a7e79c654b597825fdf54", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/c6cfc6c6755e215af59a7e79c654b597825fdf54", "committedDate": "2020-08-11T11:09:02Z", "message": "DB-9847 PR org.iq80.snappy replaced by SpliceSnappy"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c92ce48b2ac16248d7f73f79d6c08458c3634b28", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/c92ce48b2ac16248d7f73f79d6c08458c3634b28", "committedDate": "2020-08-11T11:29:58Z", "message": "DB-9847 PR akka version is kept only in hbase_sql/pom.xml, scala version is upgraded to 2.12.12"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY2OTExMjk0", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-466911294", "createdAt": "2020-08-13T16:11:19Z", "commit": {"oid": "c92ce48b2ac16248d7f73f79d6c08458c3634b28"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "c6470136ddf4e3bebf2d37b62e88c08b2f96b47b", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/c6470136ddf4e3bebf2d37b62e88c08b2f96b47b", "committedDate": "2020-08-17T10:48:32Z", "message": "DB-9847 dbaas3.0 profile is added"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1433a06074f66cd621f2e64f52225a14c5a92d00", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/1433a06074f66cd621f2e64f52225a14c5a92d00", "committedDate": "2020-08-17T16:50:47Z", "message": "DB-9847 test profile spark_3.0 is removed"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4OTE3OTE5", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-468917919", "createdAt": "2020-08-18T00:38:31Z", "commit": {"oid": "1433a06074f66cd621f2e64f52225a14c5a92d00"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78ef272c8c3a86b32f99fd124d791bae299d766e", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/78ef272c8c3a86b32f99fd124d791bae299d766e", "committedDate": "2020-08-18T13:00:17Z", "message": "DB-9847 envClassifier is set to 'cdh6.3.0' in dbaas3.0 profile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NjIyMDk3", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-469622097", "createdAt": "2020-08-18T16:24:10Z", "commit": {"oid": "78ef272c8c3a86b32f99fd124d791bae299d766e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNjoyNDoxMFrOHCcSKQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOFQxNjoyNDoxMFrOHCcSKQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MjMyMjYwMQ==", "bodyText": "We can't reuse envClassifier in this profile. All platform dependent modules (hbase_sql, hbase_storage, etc.) will be built with the same version from two different profiles: cdh6.3.0 and dbaas3.0. There will be only one version in Maven repository at any particular time. Which one will depend on which profile was built last.", "url": "https://github.com/splicemachine/spliceengine/pull/3854#discussion_r472322601", "createdAt": "2020-08-18T16:24:10Z", "author": {"login": "OlegMazurov"}, "path": "pom.xml", "diffHunk": "@@ -983,6 +991,47 @@\n                 <module>assembly</module>\n             </modules>\n         </profile>\n+        <profile>\n+            <id>dbaas3.0</id>\n+            <activation>\n+                <property>\n+                    <name>env</name>\n+                    <value>dbaas3.0</value>\n+                </property>\n+            </activation>\n+            <properties>\n+                <cdh.parcel.version>6.3.2</cdh.parcel.version>\n+                <envClassifier>cdh6.3.0</envClassifier>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "78ef272c8c3a86b32f99fd124d791bae299d766e"}, "originalPosition": 54}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6ff8016c861063d46f7c7cf74775118601c7aed3", "author": {"user": {"login": "ipraznik-splice", "name": null}}, "url": "https://github.com/splicemachine/spliceengine/commit/6ff8016c861063d46f7c7cf74775118601c7aed3", "committedDate": "2020-08-19T10:10:08Z", "message": "envClassifier is set to 'dbaas3.0' in dbaas3.0 profile"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDgxOTk0", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-471081994", "createdAt": "2020-08-20T02:18:37Z", "commit": {"oid": "6ff8016c861063d46f7c7cf74775118601c7aed3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcxMDkyMTE2", "url": "https://github.com/splicemachine/spliceengine/pull/3854#pullrequestreview-471092116", "createdAt": "2020-08-20T02:52:42Z", "commit": {"oid": "6ff8016c861063d46f7c7cf74775118601c7aed3"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1256, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}