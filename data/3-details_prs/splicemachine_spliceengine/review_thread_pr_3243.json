{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc4MTgzNDk4", "number": 3243, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwOTozMToxOVrODh0OYQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwOTozMToxOVrODh0OYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM2Nzg1MjQ5OnYy", "diffSide": "RIGHT", "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/SpliceStringFunctionsIT.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQwOTozMToxOVrOFswtXQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yMVQxMTo0MzowMlrOFs0R2g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ3OTcwOQ==", "bodyText": "It seems this query used to work (slowly) before the fix, right? In that case we'd need to add a timeout for instance, to make sure the test fails if there's a regression. Or make the query bigger so that it crashes without the fix.", "url": "https://github.com/splicemachine/spliceengine/pull/3243#discussion_r382479709", "createdAt": "2020-02-21T09:31:19Z", "author": {"login": "dgomezferro"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/SpliceStringFunctionsIT.java", "diffHunk": "@@ -713,6 +713,27 @@ public void testHEX() throws Exception {\n         rs.close();\n     }\n \n+    @Test\n+    public void testLongConcatenateString() throws Exception {\n+        String sqlText = \"SELECT COUNT(*) FROM (\" + \"SELECT CAST(CAST(c AS DECIMAL(9,4)) AS CHAR(50))||','\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "72a940a7364ed8febc268f32e122959e71e77fab"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjUzODIwMg==", "bodyText": "Agreed. I set the test case failed after 1 second. Without the fix, it took more than 10 seconds.", "url": "https://github.com/splicemachine/spliceengine/pull/3243#discussion_r382538202", "createdAt": "2020-02-21T11:43:02Z", "author": {"login": "changli6"}, "path": "splice_machine/src/test/java/com/splicemachine/derby/utils/SpliceStringFunctionsIT.java", "diffHunk": "@@ -713,6 +713,27 @@ public void testHEX() throws Exception {\n         rs.close();\n     }\n \n+    @Test\n+    public void testLongConcatenateString() throws Exception {\n+        String sqlText = \"SELECT COUNT(*) FROM (\" + \"SELECT CAST(CAST(c AS DECIMAL(9,4)) AS CHAR(50))||','\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4MjQ3OTcwOQ=="}, "originalCommit": {"oid": "72a940a7364ed8febc268f32e122959e71e77fab"}, "originalPosition": 6}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3384, "cost": 1, "resetAt": "2021-11-13T12:26:42Z"}}}