{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjYxODI3", "number": 693, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo1MTo0NlrODi_LyA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNjozNzo1MlrODjWNgQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MDEzMzg0OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo1MTo0NlrOFuip_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxMDozOToxMlrOFumexw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0NjYyMw==", "bodyText": "shouldn't this be named prefix_index to overwrite the index defined by PrefixSearchable Entity?\notherwise we end up with two entities where the original one will almost never be used(?)", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384346623", "createdAt": "2020-02-26T08:51:46Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.\n  */\n+@Index(name = \"tenant_searchPrefixes\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM4MDExMw==", "bodyText": "The real index name is searchPrefixes_1 since it wasn't using the name property of the annotation. All indexes must be dropped and recreated anyway, therefore I would include the word tenant in the name to better indicate how the index is build up.", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384380113", "createdAt": "2020-02-26T09:47:52Z", "author": {"login": "idlira"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.\n  */\n+@Index(name = \"tenant_searchPrefixes\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0NjYyMw=="}, "originalCommit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "originalPosition": 18}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDQwOTI4Nw==", "bodyText": "i meant name it so that the parent index as defined by PrefixSearchableEntity is suppressed - although a misleading name in mongo would be created then - still better than a mostly unused index", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384409287", "createdAt": "2020-02-26T10:39:12Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.\n  */\n+@Index(name = \"tenant_searchPrefixes\",", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0NjYyMw=="}, "originalCommit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "originalPosition": 18}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTE4NDgyOnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowMzoyNVrOFusp1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowMzoyNVrOFusp1g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxMDQyMg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only make sense if indexed\n          \n          \n            \n             * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only makes sense if indexed", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384510422", "createdAt": "2020-02-26T14:03:25Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "diffHunk": "@@ -29,8 +29,12 @@\n \n /**\n  * Maintains a <tt>prefixSearchField</tt> in which all fields annotated with {@link PrefixSearchContent} are indexed.\n+ *\n+ * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only make sense if indexed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MTE4ODE2OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowNDoxN1rOFusr2A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowNDoxN1rOFusr2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxMDkzNg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * without columns.\n          \n          \n            \n             * with the same name and without columns.", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384510936", "createdAt": "2020-02-26T14:04:17Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjM4MzkwNjU3OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNjozNzo1M1rOFvGsBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNjozNzo1M1rOFvGsBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDkzNjk2Ng==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *\n          \n          \n            \n             * <p>", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384936966", "createdAt": "2020-02-27T06:37:53Z", "author": {"login": "jmuscireum"}, "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "diffHunk": "@@ -29,8 +29,12 @@\n \n /**\n  * Maintains a <tt>prefixSearchField</tt> in which all fields annotated with {@link PrefixSearchContent} are indexed.\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2132, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}