{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQzNDY1NDM0", "number": 805, "title": "Export of Metrics and Tenants.", "bodyText": "", "createdAt": "2020-07-02T11:49:09Z", "url": "https://github.com/scireum/sirius-biz/pull/805", "merged": true, "mergeCommit": {"oid": "73cdb5d32bb00999c8e14c37a5f65de475fbfc97"}, "closed": true, "closedAt": "2020-07-02T12:27:27Z", "author": {"login": "andyHa"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcw8bMLgH2gAyNDQzNDY1NDM0OjA0MjEwZTRhYzE1MDc1YWI1NjU0YzQ2MGZjOWM3ZDViZGJlZDY4MGU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcw98llAH2gAyNDQzNDY1NDM0OmJiODVhODU1ODAwZWIwODk4MTY4MjBmMDhiZTAzYTY1NmEwZTIyNGI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "04210e4ac15075ab5654c460fc9c7d5bdbed680e", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/04210e4ac15075ab5654c460fc9c7d5bdbed680e", "committedDate": "2020-07-02T10:38:27Z", "message": "Provides a simple way of injecting metrics into entity exports."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "7a2e936ae98f7601e742f6aa73aeb1777f098789", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/7a2e936ae98f7601e742f6aa73aeb1777f098789", "committedDate": "2020-07-02T10:44:10Z", "message": "Removes an unused field."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8bfd0c0defd01084558e85acc28c70e0cc56c17b", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/8bfd0c0defd01084558e85acc28c70e0cc56c17b", "committedDate": "2020-07-02T10:44:42Z", "message": "Enables the metrics framework for the tests.\n\nOtherwise startup warnings occur."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f71177d690adda22aa505bf226d5f7e02a204aad", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/f71177d690adda22aa505bf226d5f7e02a204aad", "committedDate": "2020-07-02T11:46:08Z", "message": "Provides an export-job for tenants."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8eeec8ae432b4a7c0da888892a92c4f1594c20f1", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/8eeec8ae432b4a7c0da888892a92c4f1594c20f1", "committedDate": "2020-07-02T11:46:12Z", "message": "Merge remote-tracking branch 'origin/master' into aha/metrics-export-and-tenant-export"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "d671d298a6793268020d31b844ebab39ffa39b20", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/d671d298a6793268020d31b844ebab39ffa39b20", "committedDate": "2020-07-02T11:48:40Z", "message": "Reverts a version bump performed by dependabot.\n\nWith the new driver (8.0.x) the schema tool fails with\n\"Unknown table 'dailymetric' in information_schema\".\n\nA better solution is probably to completely abandon the\nMySQL driver and switch over to the MariaDB one."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjA2ODU5", "url": "https://github.com/scireum/sirius-biz/pull/805#pullrequestreview-441606859", "createdAt": "2020-07-02T11:56:04Z", "commit": {"oid": "d671d298a6793268020d31b844ebab39ffa39b20"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjA4ODgw", "url": "https://github.com/scireum/sirius-biz/pull/805#pullrequestreview-441608880", "createdAt": "2020-07-02T11:59:08Z", "commit": {"oid": "04210e4ac15075ab5654c460fc9c7d5bdbed680e"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMTo1OTowOFrOGsJsMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMTo1OTowOFrOGsJsMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk0OTI5Nw==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * itself. This can now deciede which metric to make exportable (or even place them\n          \n          \n            \n             * itself. This can now decide which metric to make exportable (or even place them", "url": "https://github.com/scireum/sirius-biz/pull/805#discussion_r448949297", "createdAt": "2020-07-02T11:59:08Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/analytics/metrics/MetricsImportHandlerExtender.java", "diffHunk": "@@ -0,0 +1,121 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.analytics.metrics;\n+\n+import sirius.biz.importer.BaseImportHandler;\n+import sirius.biz.importer.EntityImportHandlerExtender;\n+import sirius.biz.importer.ImporterContext;\n+import sirius.biz.importer.format.FieldDefinition;\n+import sirius.db.mixing.BaseEntity;\n+import sirius.db.mixing.EntityDescriptor;\n+import sirius.db.mixing.Mapping;\n+import sirius.kernel.commons.MultiMap;\n+import sirius.kernel.commons.Strings;\n+import sirius.kernel.di.PartCollection;\n+import sirius.kernel.di.std.Part;\n+import sirius.kernel.di.std.Parts;\n+import sirius.kernel.di.std.Register;\n+\n+import javax.annotation.Nullable;\n+import java.util.Collection;\n+import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.function.BiConsumer;\n+import java.util.function.Function;\n+\n+/**\n+ * Provides a convenient way of semi-automatically exporting metrics for an entity.\n+ * <p>\n+ * To extend the export of an entity, a {@link MetricExporter} has to be created and\n+ * registered. Most probably this can be the {@link MonthlyMetricComputer} (or the like)\n+ * itself. This can now deciede which metric to make exportable (or even place them", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04210e4ac15075ab5654c460fc9c7d5bdbed680e"}, "originalPosition": 36}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b04547bbe06e33bda5d11979a7d146ffb5eba3f3", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/b04547bbe06e33bda5d11979a7d146ffb5eba3f3", "committedDate": "2020-07-02T12:10:16Z", "message": "Update src/main/java/sirius/biz/analytics/metrics/MetricsImportHandlerExtender.java\n\nCo-authored-by: Sascha Bieberstein <sabieber@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQxNjEyMDQz", "url": "https://github.com/scireum/sirius-biz/pull/805#pullrequestreview-441612043", "createdAt": "2020-07-02T12:03:46Z", "commit": {"oid": "04210e4ac15075ab5654c460fc9c7d5bdbed680e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjowMzo0N1rOGsJ14A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wMlQxMjowMzo0N1rOGsJ14A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0ODk1MTc3Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Wraps all infos required to inject a metric into an entity export via an {@link MetricExporter}.\n          \n          \n            \n             * Wraps all infos required to inject a metric into an entity export via a {@link MetricExporter}.", "url": "https://github.com/scireum/sirius-biz/pull/805#discussion_r448951776", "createdAt": "2020-07-02T12:03:47Z", "author": {"login": "mkeckmkeck"}, "path": "src/main/java/sirius/biz/analytics/metrics/MetricExportInfo.java", "diffHunk": "@@ -0,0 +1,89 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.analytics.metrics;\n+\n+import java.util.concurrent.atomic.AtomicInteger;\n+import java.util.function.ToIntFunction;\n+\n+/**\n+ * Wraps all infos required to inject a metric into an entity export via an {@link MetricExporter}.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "04210e4ac15075ab5654c460fc9c7d5bdbed680e"}, "originalPosition": 15}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "bb85a855800eb089816820f08be03a656a0e224b", "author": {"user": {"login": "sabieber", "name": "Sascha Bieberstein"}}, "url": "https://github.com/scireum/sirius-biz/commit/bb85a855800eb089816820f08be03a656a0e224b", "committedDate": "2020-07-02T12:24:50Z", "message": "Typo\n\nCo-authored-by: Matthias Keck <60612914+mkeckmkeck@users.noreply.github.com>"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4354, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}