{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQzNzIyMjI5", "number": 950, "title": "HotFix Backports", "bodyText": "Merge from master HF (dev-24.1.2, dev-24.1.3)", "createdAt": "2020-12-21T21:02:25Z", "url": "https://github.com/scireum/sirius-biz/pull/950", "merged": true, "mergeCommit": {"oid": "903994bc79985fc9d75ad5f8e4b9f854a14d1c68"}, "closed": true, "closedAt": "2020-12-23T12:42:53Z", "author": {"login": "idlira"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkKBKpAH2gAyNTQzNzIyMjI5OjU3YTViMDU5OTUzNjVlZDA2OGZiNmI1NzU5NjMyMWE1MGE3NDNhNWU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdo9wtSgFqTU1NzgyMTU1MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "57a5b05995365ed068fb6b57596321a50a743a5e", "author": {"user": {"login": "meg1502", "name": null}}, "url": "https://github.com/scireum/sirius-biz/commit/57a5b05995365ed068fb6b57596321a50a743a5e", "committedDate": "2020-12-08T13:18:50Z", "message": "Provides file sizes for files in tmp root\n\n(cherry picked from commit 4a6a1140d2959cc6f8060bdb9285c9e00daa2e7e)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cff007ed2024e1536a5213c6b0548ec031ef3c26", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/cff007ed2024e1536a5213c6b0548ec031ef3c26", "committedDate": "2020-12-21T19:08:53Z", "message": "Updates actually ALL and not just a single task to be executed within a batch."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4804134ba752d24efceb3890ff002af3afd794fd", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/4804134ba752d24efceb3890ff002af3afd794fd", "committedDate": "2020-12-21T20:55:40Z", "message": "Merge pull request #948 from scireum/hotfix/dev-24.1.2\n\nFixes the batch processing within the mongo replication loop."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "4c3a9d8e9e2bff473c55094d9db8bed81133c67f", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/4c3a9d8e9e2bff473c55094d9db8bed81133c67f", "committedDate": "2020-12-22T09:12:19Z", "message": "Fixes the metrics collection for the replication framework.\n\nAs we already reset the counter using getAndClear we must\nnot also use differentialMetric."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "58b420ed5d838aa156ae6c8cffa0f573d065fe7e", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/58b420ed5d838aa156ae6c8cffa0f573d065fe7e", "committedDate": "2020-12-22T09:15:48Z", "message": "Uses the proper compare method to determine which tasks are executable.\n\n(cherry picked from commit e893edb6969c0ac21b1d4038ee3290eb009bccab)"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cbe5bf5daf96634f0bffc92089fe46b0cbfb7f3c", "author": {"user": {"login": "andyHa", "name": "Andreas Haufler"}}, "url": "https://github.com/scireum/sirius-biz/commit/cbe5bf5daf96634f0bffc92089fe46b0cbfb7f3c", "committedDate": "2020-12-22T09:24:02Z", "message": "Improves the replication performance by fine-tuning the queue config.\n\nWe now do not wait until the queue runs completely empty before we attempt\nto refill it, but rather try to keep a certain base level of batches in the queue\n(as long as work is available).\n\nAdditionally we increased the batch size and the refill frequency to adjust the\nperformance for high load conditions."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "89350f33c763e883b9087852e6bf6b396f4a571a", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/89350f33c763e883b9087852e6bf6b396f4a571a", "committedDate": "2020-12-22T10:29:24Z", "message": "Merge pull request #951 from scireum/hotfix/dev-24.1.3\n\nImproves the performance ot the replication system."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODIxNTUx", "url": "https://github.com/scireum/sirius-biz/pull/950#pullrequestreview-557821551", "createdAt": "2020-12-23T11:51:21Z", "commit": {"oid": "89350f33c763e883b9087852e6bf6b396f4a571a"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMTo1MToyMVrOIKicGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMTo1MToyMVrOIKicGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyMDkyMw==", "bodyText": "Da m\u00fcssen wir mit dem parallelen mongo update aufpassen", "url": "https://github.com/scireum/sirius-biz/pull/950#discussion_r547920923", "createdAt": "2020-12-23T11:51:21Z", "author": {"login": "qw3ry"}, "path": "src/main/java/sirius/biz/storage/layer1/replication/mongo/MongoReplicationTaskStorage.java", "diffHunk": "@@ -131,7 +131,9 @@ public int emitBatches() {\n     private void markTasksAsScheduled(JSONObject batch) {\n         try {\n             mongo.update()\n+                 .many()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "89350f33c763e883b9087852e6bf6b396f4a571a"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4290, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}