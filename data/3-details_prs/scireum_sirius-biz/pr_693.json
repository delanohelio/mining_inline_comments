{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc5NjYxODI3", "number": 693, "title": "Defines a default Index including  the tenant and searchPrefixes", "bodyText": "Which will be created for all MongoTenantAware entities.\n\u26a0\ufe0f MongoTenantAware entities must be checked for indexes including tenant and either dropped (to be recreated by this class) or have the creation suppressed by defining an index without columns.\nFixes: SIRI-184", "createdAt": "2020-02-25T15:47:05Z", "url": "https://github.com/scireum/sirius-biz/pull/693", "merged": true, "mergeCommit": {"oid": "d228a65909e2430c1e9a439ac2b6e83b99bd06bd"}, "closed": true, "closedAt": "2020-02-27T08:26:14Z", "author": {"login": "idlira"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcH0EVagH2gAyMzc5NjYxODI3OmE1OWNkYzQwM2EwOTBiYjYwYmJmMjc4YTM3ZGVkZmE1ZGEwZTU2MTI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcIW5M4AFqTM2NTQ4MzA2MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/a59cdc403a090bb60bbf278a37dedfa5da0e5612", "committedDate": "2020-02-25T15:43:21Z", "message": "Defines a default Index including  the tenant and searchPrefixes\n\nWhich will be created for all MongoTenantAware entities.\n\nFixes: SIRI-184"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0MjUyODAw", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364252800", "createdAt": "2020-02-25T15:50:47Z", "commit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzExOTc5", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364711979", "createdAt": "2020-02-26T08:51:46Z", "commit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo1MTo0NlrOFuip_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQwODo1MTo0NlrOFuip_w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDM0NjYyMw==", "bodyText": "shouldn't this be named prefix_index to overwrite the index defined by PrefixSearchable Entity?\notherwise we end up with two entities where the original one will almost never be used(?)", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384346623", "createdAt": "2020-02-26T08:51:46Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.\n  */\n+@Index(name = \"tenant_searchPrefixes\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "originalPosition": 18}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzEyMDYw", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364712060", "createdAt": "2020-02-26T08:51:53Z", "commit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0NzkxNTA5", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364791509", "createdAt": "2020-02-26T10:39:20Z", "commit": {"oid": "a59cdc403a090bb60bbf278a37dedfa5da0e5612"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ee42a8fd8ae1324a242bce99287e5dfefbdd1421", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/ee42a8fd8ae1324a242bce99287e5dfefbdd1421", "committedDate": "2020-02-26T13:09:55Z", "message": "Removes default prefix_index in PrefixSearchableEntity\n\nFixes: SIRI-184"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a9b1393fdf40e8355bacf067af7c9d85fabd0f7f", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/a9b1393fdf40e8355bacf067af7c9d85fabd0f7f", "committedDate": "2020-02-26T13:10:36Z", "message": "Adds an index for searchPrefixes\n\nFixes: SIRI-84"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/240e3ef1ec82bcd98080fdd0ad07d889a0f820db", "committedDate": "2020-02-26T13:10:58Z", "message": "Renames index to better match other entities\n\nFixes: SIRI-184"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0OTIxODY0", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364921864", "createdAt": "2020-02-26T14:03:48Z", "commit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0OTIyMjUw", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364922250", "createdAt": "2020-02-26T14:04:18Z", "commit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY0OTIxNTU3", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-364921557", "createdAt": "2020-02-26T14:03:24Z", "commit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowMzoyNVrOFusp1g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yNlQxNDowNDoxN1rOFusr2A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxMDQyMg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only make sense if indexed\n          \n          \n            \n             * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only makes sense if indexed", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384510422", "createdAt": "2020-02-26T14:03:25Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "diffHunk": "@@ -29,8 +29,12 @@\n \n /**\n  * Maintains a <tt>prefixSearchField</tt> in which all fields annotated with {@link PrefixSearchContent} are indexed.\n+ *\n+ * Note that the <tt>searchPrefixes</tt> is not automatically indexed as it usually only make sense if indexed", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDUxMDkzNg==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             * without columns.\n          \n          \n            \n             * with the same name and without columns.", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384510936", "createdAt": "2020-02-26T14:04:17Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/tenants/mongo/MongoTenantAware.java", "diffHunk": "@@ -11,14 +11,23 @@\n import sirius.biz.mongo.MongoBizEntity;\n import sirius.biz.tenants.Tenant;\n import sirius.biz.web.TenantAware;\n+import sirius.db.mixing.annotations.Index;\n+import sirius.db.mongo.Mango;\n import sirius.db.mongo.types.MongoRef;\n import sirius.kernel.di.std.Part;\n \n import java.util.Optional;\n \n /**\n  * Base class which marks subclasses as aware of their tenant they belong to.\n+ * <p>\n+ * Note that an index is automatically created containing the tenant itself and the searchPrefixes,\n+ * which are added via {@link MongoBizEntity}. You can skip the index creation by defining an {@link Index}\n+ * without columns.", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "240e3ef1ec82bcd98080fdd0ad07d889a0f820db"}, "originalPosition": 16}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af", "committedDate": "2020-02-26T18:36:34Z", "message": "Updates Javadoc Typos\n\nCo-Authored-By: Sascha Bieberstein <sabieber@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDQyNDgz", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-365442483", "createdAt": "2020-02-27T06:37:52Z", "commit": {"oid": "9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNjozNzo1M1rOFvGsBg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0yN1QwNjozNzo1M1rOFvGsBg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM4NDkzNjk2Ng==", "bodyText": "Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n             *\n          \n          \n            \n             * <p>", "url": "https://github.com/scireum/sirius-biz/pull/693#discussion_r384936966", "createdAt": "2020-02-27T06:37:53Z", "author": {"login": "jmuscireum"}, "path": "src/main/java/sirius/biz/mongo/PrefixSearchableEntity.java", "diffHunk": "@@ -29,8 +29,12 @@\n \n /**\n  * Maintains a <tt>prefixSearchField</tt> in which all fields annotated with {@link PrefixSearchContent} are indexed.\n+ *", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af"}, "originalPosition": 4}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDQ0NTE1", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-365444515", "createdAt": "2020-02-27T06:44:16Z", "commit": {"oid": "9f82ccca8c4981d6fb2713bd15cfde3e7c9dc4af"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "130224be51a3226f72fd9709bfbfee073c731285", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/130224be51a3226f72fd9709bfbfee073c731285", "committedDate": "2020-02-27T07:11:32Z", "message": "Updates JavaDoc\n\nCo-Authored-By: jmuscireum <31538484+jmuscireum@users.noreply.github.com>"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDU4MDE5", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-365458019", "createdAt": "2020-02-27T07:21:35Z", "commit": {"oid": "130224be51a3226f72fd9709bfbfee073c731285"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY1NDgzMDYx", "url": "https://github.com/scireum/sirius-biz/pull/693#pullrequestreview-365483061", "createdAt": "2020-02-27T08:17:52Z", "commit": {"oid": "130224be51a3226f72fd9709bfbfee073c731285"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4534, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}