{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NzE3MTYx", "number": 654, "title": "Hides parameters marked as hidden but preserving its context", "bodyText": "", "createdAt": "2020-01-02T16:32:59Z", "url": "https://github.com/scireum/sirius-biz/pull/654", "merged": true, "mergeCommit": {"oid": "f1be0ddc9b13bc3d9715662471a7351a2f96a49a"}, "closed": true, "closedAt": "2020-01-03T11:09:53Z", "author": {"login": "idlira"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb2cX8WAH2gAyMzU4NzE3MTYxOjMyODRlMTliM2UwYjg0YjVhMzk0MzI2NGUwNjI5NjhiMzM3ZDBkMjU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABb2sV7kgH2gAyMzU4NzE3MTYxOmEzZGUyMzg4YzU5Zjc3OWI1YTNmNTViNTZkYWVhMDczYzliY2EzZDI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/3284e19b3e0b84b5a3943264e062968b337d0d25", "committedDate": "2020-01-02T16:30:20Z", "message": "Hides parameters marked as hidden but preserving its context"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3NzUyODMy", "url": "https://github.com/scireum/sirius-biz/pull/654#pullrequestreview-337752832", "createdAt": "2020-01-02T16:55:44Z", "commit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNjo1NTo0NFrOFZwHEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNjo1NTo0NFrOFZwHEA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU0Njk2MA==", "bodyText": "Wouldn't it be easier to create a new template file 'bla/bla/hidden.html.pasta' with\n<input type=\"hidden\" name=\"@param.getName()\" value=\"@context.getOrDefault(param.getName(), null)\"/>\n\nand add some logic to the Parameter class that wraps @param.getTemplateName() and will return the 'bla/bla/hidden.html.pasta' if the parameter is hidden instead of the template name implemented in the parameter subclasses?\nAs an alternative, this could also be done using <i:if> right here in the template.\nThese solutions would have the benefit of only iterating the parameter list once instead of three times.", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362546960", "createdAt": "2020-01-02T16:55:44Z", "author": {"login": "meg1502"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 6}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM3OTgzNDA4", "url": "https://github.com/scireum/sirius-biz/pull/654#pullrequestreview-337983408", "createdAt": "2020-01-03T08:32:44Z", "commit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwODozMjo0NFrOFZ7e3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwODozMjo0NFrOFZ7e3g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjczMzI3OA==", "bodyText": "add this block in the interactive-job html.pasta as well?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362733278", "createdAt": "2020-01-03T08:32:44Z", "author": {"login": "andyHa"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>\n                     </i:for>\n                 </div>\n             </div>\n+            <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getInvisibleParameters(context)\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 10}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/e391e00eb5680e31debb210b19cb4fdb4efe467a", "committedDate": "2020-01-03T09:29:58Z", "message": "Redesigns the handling of hidden parameters\n\nA new computeTemplateName now used by the pasta templates will return a new template with a hidden input instead of the actual template for hidden parameters."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDAzODY0", "url": "https://github.com/scireum/sirius-biz/pull/654#pullrequestreview-338003864", "createdAt": "2020-01-03T09:37:40Z", "commit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozNzo0MVrOFZ8dVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozNzo0MVrOFZ8dVw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTI3MQ==", "bodyText": "getEffectiveTemplateName / fetchEffectiveTemplateName?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749271", "createdAt": "2020-01-03T09:37:41Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 21}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzM4MDAzOTg4", "url": "https://github.com/scireum/sirius-biz/pull/654#pullrequestreview-338003988", "createdAt": "2020-01-03T09:38:00Z", "commit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozODowMFrOFZ8dvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozODowMFrOFZ8dvQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw==", "bodyText": "shouldn't this also take \"ONLY_WITH_VALUE\" into account?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749373", "createdAt": "2020-01-03T09:38:00Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {\n+        if (this.visibility == Visibility.HIDDEN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 22}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "a3de2388c59f779b5a3f55b56daea073c9bca3d2", "author": {"user": {"login": "idlira", "name": "Idevaldo De Lira"}}, "url": "https://github.com/scireum/sirius-biz/commit/a3de2388c59f779b5a3f55b56daea073c9bca3d2", "committedDate": "2020-01-03T11:06:37Z", "message": "Redesigns the handling of hidden parameters\n\ncomputeTemplateName -> getEffectiveTemplateName\nnew hasVisibleParameters helper to evaluate if extra artefacts shall be rendered"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 4479, "cost": 1, "resetAt": "2021-11-02T10:47:05Z"}}}