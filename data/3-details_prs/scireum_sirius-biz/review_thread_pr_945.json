{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQyNDk3ODY2", "number": 945, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoxOTo1N1rOFHKUnw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMzowMTo0NFrOFHLLtw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDUzNDcxOnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/web/BizClassAliasProvider.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoxOTo1N1rOIIgv1Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoxOTo1N1rOIIgv1Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc5NjA1Mw==", "bodyText": "JavaDoc?", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545796053", "createdAt": "2020-12-18T12:19:57Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/web/BizClassAliasProvider.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.web;\n+\n+import sirius.biz.codelists.CodeLists;\n+import sirius.biz.isenguard.Isenguard;\n+import sirius.biz.jobs.Jobs;\n+import sirius.biz.process.Processes;\n+import sirius.biz.storage.layer3.VirtualFileSystem;\n+import sirius.biz.tenants.Tenants;\n+import sirius.db.es.Elastic;\n+import sirius.db.jdbc.Databases;\n+import sirius.db.jdbc.OMA;\n+import sirius.db.mixing.EntityDescriptor;\n+import sirius.db.mixing.Mixing;\n+import sirius.db.mixing.annotations.Mixin;\n+import sirius.db.mongo.Mango;\n+import sirius.db.mongo.Mongo;\n+import sirius.db.redis.Redis;\n+import sirius.kernel.di.Injector;\n+import sirius.kernel.di.std.Part;\n+import sirius.kernel.di.std.Register;\n+import sirius.pasta.tagliatelle.ClassAliasProvider;\n+\n+import java.util.function.BiConsumer;\n+\n+@Register\n+public class BizClassAliasProvider implements ClassAliasProvider {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1927cfe2af8b56dee856810f2c9efa7fa28742c"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDUzNjI4OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/web/BizLegacyGlobalsHandler.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoyMDoyNlrOIIgwrQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjoyMDoyNlrOIIgwrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTc5NjI2OQ==", "bodyText": "JavaDoc?", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545796269", "createdAt": "2020-12-18T12:20:26Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/web/BizLegacyGlobalsHandler.java", "diffHunk": "@@ -0,0 +1,33 @@\n+/*\n+ * Made with all the love in the world\n+ * by scireum in Remshalden, Germany\n+ *\n+ * Copyright by scireum GmbH\n+ * http://www.scireum.de - info@scireum.de\n+ */\n+\n+package sirius.biz.web;\n+\n+import sirius.kernel.di.std.Register;\n+import sirius.pasta.noodle.compiler.LegacyGlobalsHandler;\n+\n+@Register\n+public class BizLegacyGlobalsHandler extends LegacyGlobalsHandler {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b1927cfe2af8b56dee856810f2c9efa7fa28742c"}, "originalPosition": 15}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDY2NjYyOnYy", "diffSide": "RIGHT", "path": "src/main/resources/default/templates/biz/login-form.html.pasta", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMjo1ODo1NFrOIIh6jA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMzozMTowOVrOIIi78Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgxNTE4MA==", "bodyText": "A macro would be nice for this", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545815180", "createdAt": "2020-12-18T12:58:54Z", "author": {"login": "jmuscireum"}, "path": "src/main/resources/default/templates/biz/login-form.html.pasta", "diffHunk": "@@ -13,7 +13,7 @@\n                name=\"user\"\n                type=\"text\"\n                autofocus=\"autofocus\"\n-               value=\"@call.get('user').asString()\"\n+               value=\"@CallContext.getCurrent().get(WebContext.class).get('user').asString()\"", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e77f426aa702d8b0060abe266e2c22fa113e78c"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgzMTkyMQ==", "bodyText": "yep, I'd still put that in another PR (a ScopeConfig macro would be nice as well) - still lets keep this concise..", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545831921", "createdAt": "2020-12-18T13:31:09Z", "author": {"login": "andyHa"}, "path": "src/main/resources/default/templates/biz/login-form.html.pasta", "diffHunk": "@@ -13,7 +13,7 @@\n                name=\"user\"\n                type=\"text\"\n                autofocus=\"autofocus\"\n-               value=\"@call.get('user').asString()\"\n+               value=\"@CallContext.getCurrent().get(WebContext.class).get('user').asString()\"", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgxNTE4MA=="}, "originalCommit": {"oid": "4e77f426aa702d8b0060abe266e2c22fa113e78c"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzQzMDY3NTc1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/default/taglib/w/jobs.html.pasta", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMzowMTo0NFrOIIiAKA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xOFQxMzozMDoyN1rOIIi6ew==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgxNjYxNg==", "bodyText": "Isn't this what PartMacro is for?", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545816616", "createdAt": "2020-12-18T13:01:44Z", "author": {"login": "jmuscireum"}, "path": "src/main/resources/default/taglib/w/jobs.html.pasta", "diffHunk": "@@ -1,11 +1,12 @@\n <i:arg type=\"String\" name=\"uri\" default=\"@call.getRequest().uri()\"/>\n <i:arg type=\"Object\" name=\"target\"/>\n \n-<i:if test=\"jobsService != null\">\n-    <i:local name=\"jobs\" value=\"@jobsService.getMatchingInteractiveJobs(uri, target)\"/>\n-    <i:if test=\"!jobs.isEmpty()\">\n+<i:local name=\"jobs\" value=\"Injector.context().getPart(Jobs.class)\" />", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4e77f426aa702d8b0060abe266e2c22fa113e78c"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgzMTU0Nw==", "bodyText": "nope PartMacro uses findPart which throws in case if a missing part. As the Jobs.class can be disabled via the framework config, we have to deal with this and use getPart here...", "url": "https://github.com/scireum/sirius-biz/pull/945#discussion_r545831547", "createdAt": "2020-12-18T13:30:27Z", "author": {"login": "andyHa"}, "path": "src/main/resources/default/taglib/w/jobs.html.pasta", "diffHunk": "@@ -1,11 +1,12 @@\n <i:arg type=\"String\" name=\"uri\" default=\"@call.getRequest().uri()\"/>\n <i:arg type=\"Object\" name=\"target\"/>\n \n-<i:if test=\"jobsService != null\">\n-    <i:local name=\"jobs\" value=\"@jobsService.getMatchingInteractiveJobs(uri, target)\"/>\n-    <i:if test=\"!jobs.isEmpty()\">\n+<i:local name=\"jobs\" value=\"Injector.context().getPart(Jobs.class)\" />", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NTgxNjYxNg=="}, "originalCommit": {"oid": "4e77f426aa702d8b0060abe266e2c22fa113e78c"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1886, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}