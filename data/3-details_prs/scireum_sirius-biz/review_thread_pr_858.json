{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDg3MDk1MzMz", "number": 858, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzozMDo0NVrOEjddgA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMjo0ODozMlrOEjk0xA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NjE4MzA0OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "isResolved": true, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzozMDo0NVrOHR0gNA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQwNzozMDo0NVrOHR0gNA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODQ0ODA1Mg==", "bodyText": "This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters. Learn more about bidirectional Unicode characters\n\n\n  \n\n\n    \n      \n        Suggested change\n        \n          \n    \n\n        \n      \n    \n    \n      \n          \n            \n                    // permission as otherwise we would perform an unwanted roles delegation (given the current user higher\n          \n          \n            \n                    // permission as otherwise we would perform an unwanted roles delegation (giving the current user higher", "url": "https://github.com/scireum/sirius-biz/pull/858#discussion_r488448052", "createdAt": "2020-09-15T07:30:45Z", "author": {"login": "jmuscireum"}, "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "diffHunk": "@@ -633,6 +634,17 @@ public void selectUserAccount(final WebContext webContext, String accountId) {\n             return;\n         }\n \n+        // If the target user belongs to the system tenant, our current user has to have highest user management\n+        // permission as otherwise we would perform an unwanted roles delegation (given the current user higher", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b31fb95d191605bfa6538cf5d648eb94b373c2ac"}, "originalPosition": 13}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzA1NzM4OTQ4OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMjo0ODozMlrOHSAHKw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0xNVQxMjo1MToxM1rOHSAO7w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODYzODI1MQ==", "bodyText": "K\u00f6nnen wir da eig ned mal irgendwo an ner zentralen Stelle ne isSystemTenantMember Methode platzieren, also im usermanager oder usercontext oder so?", "url": "https://github.com/scireum/sirius-biz/pull/858#discussion_r488638251", "createdAt": "2020-09-15T12:48:32Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "diffHunk": "@@ -633,6 +633,15 @@ public void selectUserAccount(final WebContext webContext, String accountId) {\n             return;\n         }\n \n+        // If the target user belongs to the system tenant, our current user has to have highest user management\n+        // permission as otherwise we would perform an unwanted roles delegation (given the current user higher\n+        // access rights - right up to the system management level...)\n+        if (Strings.areEqual(tenants.getTenantUserManager().getSystemTenantId(), user.getTenant().getIdAsString())", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "57a5d89ea9e15490e2842f5247958c210e86703a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODYzOTYwMQ==", "bodyText": "Bzw ne isSystemTenant die nur die Tenant ID bekommt zb", "url": "https://github.com/scireum/sirius-biz/pull/858#discussion_r488639601", "createdAt": "2020-09-15T12:50:14Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "diffHunk": "@@ -633,6 +633,15 @@ public void selectUserAccount(final WebContext webContext, String accountId) {\n             return;\n         }\n \n+        // If the target user belongs to the system tenant, our current user has to have highest user management\n+        // permission as otherwise we would perform an unwanted roles delegation (given the current user higher\n+        // access rights - right up to the system management level...)\n+        if (Strings.areEqual(tenants.getTenantUserManager().getSystemTenantId(), user.getTenant().getIdAsString())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODYzODI1MQ=="}, "originalCommit": {"oid": "57a5d89ea9e15490e2842f5247958c210e86703a"}, "originalPosition": 7}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODY0MDIzOQ==", "bodyText": "letzteres braucht man ab und zu glaube ich schon", "url": "https://github.com/scireum/sirius-biz/pull/858#discussion_r488640239", "createdAt": "2020-09-15T12:51:13Z", "author": {"login": "sabieber"}, "path": "src/main/java/sirius/biz/tenants/UserAccountController.java", "diffHunk": "@@ -633,6 +633,15 @@ public void selectUserAccount(final WebContext webContext, String accountId) {\n             return;\n         }\n \n+        // If the target user belongs to the system tenant, our current user has to have highest user management\n+        // permission as otherwise we would perform an unwanted roles delegation (given the current user higher\n+        // access rights - right up to the system management level...)\n+        if (Strings.areEqual(tenants.getTenantUserManager().getSystemTenantId(), user.getTenant().getIdAsString())", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODYzODI1MQ=="}, "originalCommit": {"oid": "57a5d89ea9e15490e2842f5247958c210e86703a"}, "originalPosition": 7}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1763, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}