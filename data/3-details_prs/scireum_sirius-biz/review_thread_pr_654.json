{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzU4NzE3MTYx", "number": 654, "reviewThreads": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNjo1NTo0NFrODVfo8w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozODowMFrODVntbA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzODY1MDc1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wMlQxNjo1NTo0NFrOFZwHEA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozMTo0MFrOFZ8WLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU0Njk2MA==", "bodyText": "Wouldn't it be easier to create a new template file 'bla/bla/hidden.html.pasta' with\n<input type=\"hidden\" name=\"@param.getName()\" value=\"@context.getOrDefault(param.getName(), null)\"/>\n\nand add some logic to the Parameter class that wraps @param.getTemplateName() and will return the 'bla/bla/hidden.html.pasta' if the parameter is hidden instead of the template name implemented in the parameter subclasses?\nAs an alternative, this could also be done using <i:if> right here in the template.\nThese solutions would have the benefit of only iterating the parameter list once instead of three times.", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362546960", "createdAt": "2020-01-02T16:55:44Z", "author": {"login": "meg1502"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 6}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0NzQzOQ==", "bodyText": "New template hidden.html.pasta returned by computeTemplateName which is now used by the pasta templates.", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362747439", "createdAt": "2020-01-03T09:31:40Z", "author": {"login": "idlira"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjU0Njk2MA=="}, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 6}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTg2NTM1OnYy", "diffSide": "RIGHT", "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwODozMjo0NFrOFZ7e3g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozMjowM1rOFZ8WrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjczMzI3OA==", "bodyText": "add this block in the interactive-job html.pasta as well?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362733278", "createdAt": "2020-01-03T08:32:44Z", "author": {"login": "andyHa"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>\n                     </i:for>\n                 </div>\n             </div>\n+            <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getInvisibleParameters(context)\">", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 10}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0NzU2NQ==", "bodyText": "Covered with new redesign", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362747565", "createdAt": "2020-01-03T09:32:03Z", "author": {"login": "idlira"}, "path": "src/main/resources/default/templates/biz/jobs/job.html.pasta", "diffHunk": "@@ -44,11 +44,14 @@\n         <div class=\"row\">\n             <div class=\"col-md-8\">\n                 <div class=\"row\">\n-                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getParameters()\">\n+                    <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getVisibleParameters(context)\">\n                         <i:dynamicInvoke template=\"@param.getTemplateName()\" param=\"@param\" context=\"@context\"/>\n                     </i:for>\n                 </div>\n             </div>\n+            <i:for type=\"sirius.biz.jobs.params.Parameter\" var=\"param\" items=\"job.getInvisibleParameters(context)\">", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2MjczMzI3OA=="}, "originalCommit": {"oid": "3284e19b3e0b84b5a3943264e062968b337d0d25"}, "originalPosition": 10}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTk3MjE2OnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozNzo0MVrOFZ8dVw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMTowNzoyNlrOFZ99cA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTI3MQ==", "bodyText": "getEffectiveTemplateName / fetchEffectiveTemplateName?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749271", "createdAt": "2020-01-03T09:37:41Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3Mzg3Mg==", "bodyText": "Refactored to getEffectiveTemplateName", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362773872", "createdAt": "2020-01-03T11:07:26Z", "author": {"login": "idlira"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTI3MQ=="}, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjIzOTk3MjkyOnYy", "diffSide": "RIGHT", "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QwOTozODowMFrOFZ8dvQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0wM1QxMTowNzo0MVrOFZ99ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw==", "bodyText": "shouldn't this also take \"ONLY_WITH_VALUE\" into account?", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749373", "createdAt": "2020-01-03T09:38:00Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {\n+        if (this.visibility == Visibility.HIDDEN) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTUyMQ==", "bodyText": "i.e. invoke isVisible", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362749521", "createdAt": "2020-01-03T09:38:24Z", "author": {"login": "andyHa"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {\n+        if (this.visibility == Visibility.HIDDEN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw=="}, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 22}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc3MzkyMw==", "bodyText": "Validating with isVisible()", "url": "https://github.com/scireum/sirius-biz/pull/654#discussion_r362773923", "createdAt": "2020-01-03T11:07:41Z", "author": {"login": "idlira"}, "path": "src/main/java/sirius/biz/jobs/params/Parameter.java", "diffHunk": "@@ -127,6 +129,21 @@ public boolean isVisible(Map<String, String> context) {\n      */\n     public abstract String getTemplateName();\n \n+    /**\n+     * Returns the name of the template used to render the parameter in the UI.\n+     * <p>\n+     * Similar to {@link #getTemplateName()}, but this method considers the visibility\n+     * of the parameter and delivers an alternative template in case the parameter should be hidden.\n+     *\n+     * @return the name or path of the template used to render the parameter\n+     */\n+    public String computeTemplateName() {\n+        if (this.visibility == Visibility.HIDDEN) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2Mjc0OTM3Mw=="}, "originalCommit": {"oid": "e391e00eb5680e31debb210b19cb4fdb4efe467a"}, "originalPosition": 22}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2076, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}