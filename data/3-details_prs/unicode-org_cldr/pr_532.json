{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQxNjUxMzAw", "number": 532, "title": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version.", "bodyText": "This is some pre-work, since the name \"PathUtilities\" is perfect for a class to fix the normalized path problem, but already exists as a deprecated class for a possibly unused tool.\nMoving for now is safe, unless someone wants me to nuke the tool as well (I'm always happy to delete code).\nChecklist\n\n Issue filed: https://unicode-org.atlassian.net/browse/CLDR-13918\n Updated PR title and link in previous line to include Issue number", "createdAt": "2020-06-29T21:09:30Z", "url": "https://github.com/unicode-org/cldr/pull/532", "merged": true, "mergeCommit": {"oid": "b1d63713932eb068dce0135fc4561f1ec9794fe7"}, "closed": true, "closedAt": "2020-08-18T16:50:33Z", "author": {"login": "hagbard"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcwH4MvAFqTQzOTUwOTU0MA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdAJzqygFqTQ2OTYzNzA2NQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NTA5NTQw", "url": "https://github.com/unicode-org/cldr/pull/532#pullrequestreview-439509540", "createdAt": "2020-06-29T21:21:23Z", "commit": {"oid": "e0d57023a2edf54fef3cb279a77d0eab9bf72ca8"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMToyMToyNFrOGqiqRA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMToyNTowNFrOGqixaA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI2MTI1Mg==", "bodyText": "Ordering is very very odd here. The array is being defined before the constants in it are defined.\nNormally IntelliJ would warn about this, but it wasn't. Maybe array initialization is different.\nI reordered the constants to ensure everything is defined top-to-bottom.", "url": "https://github.com/unicode-org/cldr/pull/532#discussion_r447261252", "createdAt": "2020-06-29T21:21:24Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/test/XPathToMenu.java", "diffHunk": "@@ -1,37 +1,40 @@\n-package org.unicode.cldr.util;\n+package org.unicode.cldr.test;\n \n import java.util.HashMap;\n import java.util.Map;\n \n import org.unicode.cldr.icu.LDMLConstants;\n+import org.unicode.cldr.util.XPathParts;\n \n /**\n- * @deprecated\n+ * Deprecated utility class only used by ConsoleCheckCLDR.\n+ *\n+ * @deprecated Do not use.\n  */\n @Deprecated\n-public class PathUtilities {\n-\n+final class XPathToMenu {\n     // ===== types of data and menu names\n-    public static final String LOCALEDISPLAYNAMES = \"//ldml/localeDisplayNames/\";\n+    private static final String LOCALEDISPLAYNAMES = \"//ldml/localeDisplayNames/\";\n+    private static final String OTHER_CALENDARS_XPATH = \"//ldml/dates/calendars/calendar\";\n+\n+    private static final String CURRENCIES = \"currencies\";\n+    private static final String TIMEZONES = \"timezones\";\n+    private static final String METAZONES = \"metazones\";\n+    private static final String MISC = \"misc\";\n+    private static final String CODEPATTERNS = \"codePatterns\";\n+    private static final String MEASNAMES = \"measurementSystemNames\";\n+\n+    private static final String LOCALEDISPLAYPATTERN_XPATH =\n+            LOCALEDISPLAYNAMES + LDMLConstants.LOCALEDISPLAYPATTERN;\n+    private static final String NUMBERSCURRENCIES =\n+            LDMLConstants.NUMBERS + \"/\" + CURRENCIES;\n+\n     /**\n      * All of the data items under LOCALEDISPLAYNAMES (menu items)\n      */\n-    public static final String LOCALEDISPLAYNAMES_ITEMS[] = { LDMLConstants.LANGUAGES,\n+    private static final String[] LOCALEDISPLAYNAMES_ITEMS = { LDMLConstants.LANGUAGES,\n         LDMLConstants.SCRIPTS, LDMLConstants.TERRITORIES, LDMLConstants.VARIANTS, LDMLConstants.KEYS,\n-        LDMLConstants.TYPES, PathUtilities.CURRENCIES, PathUtilities.TIMEZONES,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d57023a2edf54fef3cb279a77d0eab9bf72ca8"}, "originalPosition": 43}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI2MTQ5OQ==", "bodyText": "This is the only method called from outside this class. Everything else can be made private (or deleted because it's unused).", "url": "https://github.com/unicode-org/cldr/pull/532#discussion_r447261499", "createdAt": "2020-06-29T21:21:53Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/test/XPathToMenu.java", "diffHunk": "@@ -1,37 +1,40 @@\n-package org.unicode.cldr.util;\n+package org.unicode.cldr.test;\n \n import java.util.HashMap;\n import java.util.Map;\n \n import org.unicode.cldr.icu.LDMLConstants;\n+import org.unicode.cldr.util.XPathParts;\n \n /**\n- * @deprecated\n+ * Deprecated utility class only used by ConsoleCheckCLDR.\n+ *\n+ * @deprecated Do not use.\n  */\n @Deprecated\n-public class PathUtilities {\n-\n+final class XPathToMenu {\n     // ===== types of data and menu names\n-    public static final String LOCALEDISPLAYNAMES = \"//ldml/localeDisplayNames/\";\n+    private static final String LOCALEDISPLAYNAMES = \"//ldml/localeDisplayNames/\";\n+    private static final String OTHER_CALENDARS_XPATH = \"//ldml/dates/calendars/calendar\";\n+\n+    private static final String CURRENCIES = \"currencies\";\n+    private static final String TIMEZONES = \"timezones\";\n+    private static final String METAZONES = \"metazones\";\n+    private static final String MISC = \"misc\";\n+    private static final String CODEPATTERNS = \"codePatterns\";\n+    private static final String MEASNAMES = \"measurementSystemNames\";\n+\n+    private static final String LOCALEDISPLAYPATTERN_XPATH =\n+            LOCALEDISPLAYNAMES + LDMLConstants.LOCALEDISPLAYPATTERN;\n+    private static final String NUMBERSCURRENCIES =\n+            LDMLConstants.NUMBERS + \"/\" + CURRENCIES;\n+\n     /**\n      * All of the data items under LOCALEDISPLAYNAMES (menu items)\n      */\n-    public static final String LOCALEDISPLAYNAMES_ITEMS[] = { LDMLConstants.LANGUAGES,\n+    private static final String[] LOCALEDISPLAYNAMES_ITEMS = { LDMLConstants.LANGUAGES,\n         LDMLConstants.SCRIPTS, LDMLConstants.TERRITORIES, LDMLConstants.VARIANTS, LDMLConstants.KEYS,\n-        LDMLConstants.TYPES, PathUtilities.CURRENCIES, PathUtilities.TIMEZONES,\n-        PathUtilities.CODEPATTERNS, PathUtilities.MEASNAMES };\n-    public static final String OTHER_CALENDARS_XPATH = \"//ldml/dates/calendars/calendar\";\n-\n-    public static final String LOCALEDISPLAYPATTERN_XPATH = LOCALEDISPLAYNAMES\n-        + LDMLConstants.LOCALEDISPLAYPATTERN;\n-    public static final String NUMBERSCURRENCIES = LDMLConstants.NUMBERS + \"/\"\n-        + PathUtilities.CURRENCIES;\n-    public static final String CURRENCIES = \"currencies\";\n-    public static final String TIMEZONES = \"timezones\";\n-    public static final String METAZONES = \"metazones\";\n-    public static String xOTHER = \"misc\";\n-    public static final String CODEPATTERNS = \"codePatterns\";\n-    public static final String MEASNAMES = \"measurementSystemNames\";\n+        LDMLConstants.TYPES, CURRENCIES, TIMEZONES, CODEPATTERNS, MEASNAMES };\n \n     public static String xpathToMenu(String path) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d57023a2edf54fef3cb279a77d0eab9bf72ca8"}, "originalPosition": 59}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI2MjQ3Mg==", "bodyText": "This was all kinds of weird since the map is never written to so was always empty.\nIt'd have more thoughts on this if I wasn't able to just delete the whole method.", "url": "https://github.com/unicode-org/cldr/pull/532#discussion_r447262472", "createdAt": "2020-06-29T21:23:56Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/test/XPathToMenu.java", "diffHunk": "@@ -98,24 +101,13 @@ public static String xpathToMenu(String path) {\n         // }\n     }\n \n-    public static String[] getMetazonesItems() {\n-        String defaultMetazonesItems = \"Africa America Antarctica Asia Australia Europe Atlantic Indian Pacific\";\n-        return (defaultMetazonesItems.split(\" \"));\n+    private static String getMetazoneContinent(String xpath) {\n+        XPathParts parts = XPathParts.getFrozenInstance(xpath);\n+        String thisMetazone = parts.getAttributeValue(3, \"type\");\n+        return getMetazoneToContinentMap().get(thisMetazone);\n     }\n \n-    private static Map<String, String> mzXpathToContinent = new HashMap<>();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d57023a2edf54fef3cb279a77d0eab9bf72ca8"}, "originalPosition": 90}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI2MzA4MA==", "bodyText": "We could adapt the API so it handled \"null\" and returned \"general\" as a default, but I'm not even sure if this code is being used.", "url": "https://github.com/unicode-org/cldr/pull/532#discussion_r447263080", "createdAt": "2020-06-29T21:25:04Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/test/ConsoleCheckCLDR.java", "diffHunk": "@@ -1068,7 +1068,7 @@ private static void addDataToErrorFile(String localeID, String path, ErrorType s\n             Subtype subType) {\n             String section = path == null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e0d57023a2edf54fef3cb279a77d0eab9bf72ca8"}, "originalPosition": 2}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDM5NTMxMTcz", "url": "https://github.com/unicode-org/cldr/pull/532#pullrequestreview-439531173", "createdAt": "2020-06-29T22:02:04Z", "commit": {"oid": "61e64e810c0b10dfe05d5ec23c71be81e88cf886"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMjowMjowNFrOGqjxFA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0yOVQyMjowMjowNFrOGqjxFA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0NzI3OTM4MA==", "bodyText": "I search all Java files in the CLDR project and these strings aren't referenced anywhere.", "url": "https://github.com/unicode-org/cldr/pull/532#discussion_r447279380", "createdAt": "2020-06-29T22:02:04Z", "author": {"login": "hagbard"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/SurveyMain.java", "diffHunk": "@@ -370,9 +369,6 @@ public static String modifyThing(WebContext ctx) {\n \n     public static String xMAIN = \"general\";\n \n-    public static String CALENDARS_ITEMS[] = PathUtilities.getCalendarsItems();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "61e64e810c0b10dfe05d5ec23c71be81e88cf886"}, "originalPosition": 12}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "61e64e810c0b10dfe05d5ec23c71be81e88cf886", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/61e64e810c0b10dfe05d5ec23c71be81e88cf886", "committedDate": "2020-06-29T21:59:02Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version."}, "afterCommit": {"oid": "ee448705fcbc12ebaad2eedacefbdb477c6e1f97", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/ee448705fcbc12ebaad2eedacefbdb477c6e1f97", "committedDate": "2020-06-30T10:28:03Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY4Mzg1MjEx", "url": "https://github.com/unicode-org/cldr/pull/532#pullrequestreview-468385211", "createdAt": "2020-08-17T11:34:32Z", "commit": {"oid": "ee448705fcbc12ebaad2eedacefbdb477c6e1f97"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ee448705fcbc12ebaad2eedacefbdb477c6e1f97", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/ee448705fcbc12ebaad2eedacefbdb477c6e1f97", "committedDate": "2020-06-30T10:28:03Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version."}, "afterCommit": {"oid": "67cf19cc7ec7b871fab1a5e625bed6a4cae741d9", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/67cf19cc7ec7b871fab1a5e625bed6a4cae741d9", "committedDate": "2020-08-17T16:07:19Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "8316da01fe9cc6adf045897f12f2f86986d4a9bb", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/8316da01fe9cc6adf045897f12f2f86986d4a9bb", "committedDate": "2020-08-17T16:26:48Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version.\n\nSee #532"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "67cf19cc7ec7b871fab1a5e625bed6a4cae741d9", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/67cf19cc7ec7b871fab1a5e625bed6a4cae741d9", "committedDate": "2020-08-17T16:07:19Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version."}, "afterCommit": {"oid": "8316da01fe9cc6adf045897f12f2f86986d4a9bb", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/8316da01fe9cc6adf045897f12f2f86986d4a9bb", "committedDate": "2020-08-17T16:26:48Z", "message": "CLDR-13918 Moving old (used once) PathUtilities file to make way for new version.\n\nSee #532"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDY5NjM3MDY1", "url": "https://github.com/unicode-org/cldr/pull/532#pullrequestreview-469637065", "createdAt": "2020-08-18T16:42:49Z", "commit": {"oid": "8316da01fe9cc6adf045897f12f2f86986d4a9bb"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2100, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}