{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MDk2MTg2", "number": 857, "title": "CLDR-13139 Upgrade Tomcat using Ansible", "bodyText": "-Revise tomcat-playbook.yml to use robertdebock.tomcat\n-Move parts of vars/main.yml to new mysql.yml, tomcat.yml\n-Make cldr_tomcat_conf_path end in /conf\n-Use only /etc/tomcat, never /var/lib/tomcat (which no longer exists)\n-Remove roles.yml; use requirements.yml instead in ansible-lint.yml\n-Update README.md: requirements.yml not roles.yml; mvn not ant\n-Revise context.j2: com.mysql.cj.jdbc.Driver not com.mysql.jdbc.Driver; cachingAllowed; cacheMaxSize\n-For vagrant only, new vagrant-playbook.yml; just calls setup-playbook.yml but adds flexibility\n-Remove problematic AJP section from server.xml\n-In deploy-sh.j2 use only spaces for indentation, rather than mix tabs and spaces\n\nChecklist\n\n Issue filed: https://unicode-org.atlassian.net/browse/CLDR-13139\n Updated PR title and link in previous line to include Issue number", "createdAt": "2020-11-25T04:32:00Z", "url": "https://github.com/unicode-org/cldr/pull/857", "merged": true, "mergeCommit": {"oid": "df1a81ad3fb66da7d15035e186f8f5721c6a28ef"}, "closed": true, "closedAt": "2020-11-25T15:30:29Z", "author": {"login": "btangmu"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdf2chhgH2gAyNTI3MDk2MTg2Ojk1Y2Q2ODE5NTg2ZDNlOTE2MzNhYmZiNjE2M2VkOGE1ZTc3NjlkYjI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdf_tUAAFqTUzODU4NzQ3Ng==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2", "author": {"user": {"login": "btangmu", "name": "Tom Bishop"}}, "url": "https://github.com/unicode-org/cldr/commit/95cd6819586d3e91633abfb6163ed8a5e7769db2", "committedDate": "2020-11-25T04:14:55Z", "message": "CLDR-13139 Upgrade Tomcat using Ansible\n\n-Revise tomcat-playbook.yml to use robertdebock.tomcat\n\n-Move parts of vars/main.yml to new mysql.yml, tomcat.yml\n\n-Make cldr_tomcat_conf_path end in /conf\n\n-Use only /etc/tomcat, never /var/lib/tomcat (which no longer exists)\n\n-Remove roles.yml; use requirements.yml instead in ansible-lint.yml\n\n-Update README.md: requirements.yml not roles.yml; mvn not ant\n\n-Revise context.j2: com.mysql.cj.jdbc.Driver not com.mysql.jdbc.Driver; cachingAllowed; cacheMaxSize\n\n-For vagrant only, new vagrant-playbook.yml; just calls setup-playbook.yml but adds flexibility\n\n-Remove problematic AJP section from server.xml\n\n-In deploy-sh.j2 use only spaces for indentation, rather than mix tabs and spaces"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTY2NjE4", "url": "https://github.com/unicode-org/cldr/pull/857#pullrequestreview-538566618", "createdAt": "2020-11-25T14:40:57Z", "commit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0MDo1N1rOH52c4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0MDo1N1rOH52c4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyMzAwOQ==", "bodyText": "only changed tabs to spaces in this file, no significant change", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530423009", "createdAt": "2020-11-25T14:40:57Z", "author": {"login": "btangmu"}, "path": "tools/scripts/ansible/templates/deploy-sh.j2", "diffHunk": "@@ -11,8 +11,8 @@ dogit() {\n     rm -f ${WORKDIR}/git-list.txt\n     if [[ ${GITHUB_SHA} = \"master\" ]];\n     then\n-\techo \"changing 'master' to 'origin/master' to get the latest\"\n-\tGITHUB_SHA=origin/master\n+        echo \"changing 'master' to 'origin/master' to get the latest\"\n+        GITHUB_SHA=origin/master\n     fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTY5NjQx", "url": "https://github.com/unicode-org/cldr/pull/857#pullrequestreview-538569641", "createdAt": "2020-11-25T14:43:56Z", "commit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0Mzo1NlrOH52lQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0Mzo1NlrOH52lQg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA==", "bodyText": "avoid:\nSEVERE [main] org.apache.catalina.util.LifecycleBase.handleSubClassException Failed to start component [Connector[AJP/1.3-8009]]\norg.apache.catalina.LifecycleException: Protocol handler start failed\nat org.apache.catalina.connector.Connector.startInternal(Connector.java:1067)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:438)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:633)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)\nCaused by: java.lang.IllegalArgumentException: The AJP Connector is configured with secretRequired=\"true\" but the secret attribute is either null or \"\". This combination is not valid.\nat org.apache.coyote.ajp.AbstractAjpProtocol.start(AbstractAjpProtocol.java:270)", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530425154", "createdAt": "2020-11-25T14:43:56Z", "author": {"login": "btangmu"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM4NTg3NDc2", "url": "https://github.com/unicode-org/cldr/pull/857#pullrequestreview-538587476", "createdAt": "2020-11-25T15:01:55Z", "commit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMTo1NVrOH53Zrw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMjoxMVrOH53adA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzODU3NQ==", "bodyText": "Fair enough\u2026\u00a0nginx recommends proxying with http instead of AJP: https://docs.nginx.com/nginx/deployment-guides/load-balance-third-party/apache-tomcat/", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530438575", "createdAt": "2020-11-25T15:01:55Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA=="}, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzODc3Mg==", "bodyText": "this is a great idea.", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530438772", "createdAt": "2020-11-25T15:02:11Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/vagrant-playbook.yml", "diffHunk": "@@ -0,0 +1,2 @@\n+- import_playbook: setup-playbook.yml\n+# Note: any additional setup specifically for vagrant could be done here, such as adding a self-signed ssl cert", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1820, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}