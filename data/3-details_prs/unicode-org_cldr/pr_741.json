{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDkzMzAwMTE0", "number": 741, "title": "CLDR-11585 improve maven tests ", "bodyText": "you can now run specific subtests with:\nmvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q' '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q' \n\nI was unable to get code coverage to work here, but it's just a config file change away.", "createdAt": "2020-09-25T18:30:54Z", "url": "https://github.com/unicode-org/cldr/pull/741", "merged": true, "mergeCommit": {"oid": "8b6d27416abc7020534ef5463a7bec668fb0829b"}, "closed": true, "closedAt": "2020-09-28T21:22:23Z", "author": {"login": "srl295"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdNUvvjAFqTQ5NzU3MTkwMg==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdNaC-fAFqTQ5Nzg5MTMwMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3NTcxOTAy", "url": "https://github.com/unicode-org/cldr/pull/741#pullrequestreview-497571902", "createdAt": "2020-09-28T14:30:28Z", "commit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822"}, "state": "COMMENTED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNDozMDoyOFrOHZActg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOS0yOFQxNDo0Nzo0OVrOHZBOrQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk4Mzc5OA==", "bodyText": "What's the rationale for commenting this out rather than just deleting it? Unless there's a really good reason -- like a plan to restore the code in the near future -- I think deletion is better. I've been studying the book Building Maintainable Software by Joost Visser, which includes a rule \"Leave No Code in Comments Behind\"", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495983798", "createdAt": "2020-09-28T14:30:28Z", "author": {"login": "btangmu"}, "path": "tools/cldr-apps/pom.xml", "diffHunk": "@@ -178,18 +178,15 @@\n \t\t\t\t\t\t</includes>\n \t\t\t\t\t</configuration>\n \t\t\t\t</plugin>\n-\t\t\t\t<plugin>\n+\t\t\t\t<!-- <plugin>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MDc1NQ==", "bodyText": "I don't understand the comment at all: \"... system property corresponding to java.lang ... unset!\"\nCould it be clarified?", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495990755", "createdAt": "2020-09-28T14:40:03Z", "author": {"login": "btangmu"}, "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestShim.java", "diffHunk": "@@ -2,19 +2,31 @@\n \n import java.io.PrintWriter;\n \n+import org.unicode.cldr.util.TestShimUtils;\n+\n import org.junit.jupiter.api.Test;\n import static org.junit.jupiter.api.Assertions.assertEquals;\n+import static org.junit.jupiter.api.Assertions.assertArrayEquals;\n \n /**\n  * a JUnit test that calls TestAll.\n  */\n class TestShim {\n     @Test\n     public void TestAll() {\n-        String args[] = { \"-n\", \"-q\" }; // TODO: parameterize\n+        String args[] = TestShimUtils.getArgs(TestShim.class, \"-n -q\");\n         // regular main() will System.exit() which is not too friendly.\n         // call this instead.\n         int errCount = TestAll.runTests(args);\n         assertEquals(errCount, 0, \"Test had errors\");\n     }\n+\n+    @Test\n+    public void TestTestShimUtilTest() {\n+        // Note: checks the system property corresponding to java.lang,\n+        // we expect this to be unset!\n+        String args[] = TestShimUtils.getArgs(java.lang.String.class, \"-a -b -c\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822"}, "originalPosition": 28}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5MjEwMw==", "bodyText": "Again, \"Leave No Code in Comments Behind\"?", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495992103", "createdAt": "2020-09-28T14:41:51Z", "author": {"login": "btangmu"}, "path": "tools/java/pom.xml", "diffHunk": "@@ -118,13 +118,9 @@\n \t\t\t<plugin>\n \t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n \t\t\t\t<configuration>\n-\t\t\t\t\t<systemPropertyVariables>\n-\t\t\t\t\t\t<CLDR_DIR>${project.basedir}/../../</CLDR_DIR>\n-\t\t\t\t\t\t<CLDR_ENVIRONMENT>UNITTEST</CLDR_ENVIRONMENT>\n-\t\t\t\t\t\t<java.awt.headless>true</java.awt.headless>\n+\t\t\t\t\t<!-- <systemPropertyVariables>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822"}, "originalPosition": 8}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ5NTk5NjU4OQ==", "bodyText": "The indentation seems off. Do we have a linter for that? More generally I've been wishing we had an agreed-on set of tools for normalizing spacing, etc., for all kinds of source files", "url": "https://github.com/unicode-org/cldr/pull/741#discussion_r495996589", "createdAt": "2020-09-28T14:47:49Z", "author": {"login": "btangmu"}, "path": "tools/pom.xml", "diffHunk": "@@ -225,7 +225,12 @@\n \t\t\t\t\t<artifactId>maven-surefire-plugin</artifactId>\n \t\t\t\t\t<version>${maven-surefire-plugin-version}</version>\n \t\t\t\t\t<configuration>\n-\t\t\t\t\t\t<argLine>-DCLDR_ENVIRONMENT=UNITTEST -Djava.awt.headless=true  -DCLDR_DIR=../../ -Xmx6g -enableassertions</argLine>\n+\t\t\t\t\t<systemPropertyVariables>", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822"}, "originalPosition": 5}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "f7f95379d0ca8b6bebc5959b892714371e552a9a", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/f7f95379d0ca8b6bebc5959b892714371e552a9a", "committedDate": "2020-09-28T18:23:31Z", "message": "CLDR-11585 improve maven tests\n\n- You can run individual tests using testArgs properties.\n\nExample to run only one test from the main unit tests:\n\n    mvn test '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q'\n\nExample to run only one test from web: (could be combined w/ prior example)\n\n    mvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q'"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1aadc44eb0ad97502188cb32cd88db538db16822", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/1aadc44eb0ad97502188cb32cd88db538db16822", "committedDate": "2020-09-25T18:25:25Z", "message": "CLDR-11585 improve maven tests\n\n- You can run individual tests using testArgs properties. Example to run only one test from web and utils:\n\nmvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q' '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q'"}, "afterCommit": {"oid": "f7f95379d0ca8b6bebc5959b892714371e552a9a", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/f7f95379d0ca8b6bebc5959b892714371e552a9a", "committedDate": "2020-09-28T18:23:31Z", "message": "CLDR-11585 improve maven tests\n\n- You can run individual tests using testArgs properties.\n\nExample to run only one test from the main unit tests:\n\n    mvn test '-Dorg.unicode.cldr.unittest.testArgs=-f:TestUntimedCounter -n -q'\n\nExample to run only one test from web: (could be combined w/ prior example)\n\n    mvn test '-Dorg.unicode.cldr.unittest.web.testArgs=-f:TestMisc -n -q'"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDk3ODkxMzAw", "url": "https://github.com/unicode-org/cldr/pull/741#pullrequestreview-497891300", "createdAt": "2020-09-28T20:59:02Z", "commit": {"oid": "f7f95379d0ca8b6bebc5959b892714371e552a9a"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1977, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}