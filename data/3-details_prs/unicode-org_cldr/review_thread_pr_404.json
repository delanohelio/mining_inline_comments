{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkyOTgzNjg5", "number": 404, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMDoxNTo1N1rODsZ1bw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMDoxNjozNVrODsZ1nQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3ODg3MjE1OnYy", "diffSide": "RIGHT", "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMDoxNTo1N1rOF9QYHQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQyMTo0ODo1NlrOF9VbnQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc3NTc3Mw==", "bodyText": "looks like this is unused except when newVal != null, so put under that condition.", "url": "https://github.com/unicode-org/cldr/pull/404#discussion_r399775773", "createdAt": "2020-03-29T10:15:57Z", "author": {"login": "macchiati"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "diffHunk": "@@ -1143,7 +1144,12 @@ public synchronized void voteForValue(User user, String distinguishingXpath, Str\n                 }\n             }\n \n+            String oldVal = xmlsource.getValueAtDPath(distinguishingXpath);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff77af0379f8dc0ee84701ca7a4d4cd7f79f95bc"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MDY2MA==", "bodyText": "OK -- sorry I merged before I saw your comment. I'll do that in another PR.", "url": "https://github.com/unicode-org/cldr/pull/404#discussion_r399840660", "createdAt": "2020-03-29T19:17:53Z", "author": {"login": "btangmu"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "diffHunk": "@@ -1143,7 +1144,12 @@ public synchronized void voteForValue(User user, String distinguishingXpath, Str\n                 }\n             }\n \n+            String oldVal = xmlsource.getValueAtDPath(distinguishingXpath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc3NTc3Mw=="}, "originalCommit": {"oid": "ff77af0379f8dc0ee84701ca7a4d4cd7f79f95bc"}, "originalPosition": 21}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg1ODU4OQ==", "bodyText": "On further examination, we need to get oldVal before processing the vote, and we don't know whether newVal will be null until after processing the vote, so we need to get oldVal unconditionally. Note that newVal is the winning value after the vote, and isn't necessarily the same as \"value\", which is what the user voted for. \"value\" is null if the user abstained, but newVal is only null if there's no winning value, not even an inherited or baseline value. This function is only called once, when a user submits a vote, so it's not really a hot spot or inner-loop context. OK?", "url": "https://github.com/unicode-org/cldr/pull/404#discussion_r399858589", "createdAt": "2020-03-29T21:48:56Z", "author": {"login": "btangmu"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "diffHunk": "@@ -1143,7 +1144,12 @@ public synchronized void voteForValue(User user, String distinguishingXpath, Str\n                 }\n             }\n \n+            String oldVal = xmlsource.getValueAtDPath(distinguishingXpath);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc3NTc3Mw=="}, "originalCommit": {"oid": "ff77af0379f8dc0ee84701ca7a4d4cd7f79f95bc"}, "originalPosition": 21}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ3ODg3MjYxOnYy", "diffSide": "LEFT", "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxMDoxNjozNVrOF9QYWw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yOVQxOToyMzo1M1rOF9UYLg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc3NTgzNQ==", "bodyText": "Is this unused? Please explain in a comment on the PR.", "url": "https://github.com/unicode-org/cldr/pull/404#discussion_r399775835", "createdAt": "2020-03-29T10:16:35Z", "author": {"login": "macchiati"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "diffHunk": "@@ -1293,84 +1304,6 @@ private void internalSetVoteForValue(User user, String distinguishingXpath, Stri\n             stamp.next();\n         }\n \n-        @Override", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff77af0379f8dc0ee84701ca7a4d4cd7f79f95bc"}, "originalPosition": 46}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTg0MTMyNg==", "bodyText": "Yes, it's unused, unreachable code. Though I don't know the history behind WHAT_DELETE and deleteValue, I suspect their original purpose is now accomplished by Abstain.", "url": "https://github.com/unicode-org/cldr/pull/404#discussion_r399841326", "createdAt": "2020-03-29T19:23:53Z", "author": {"login": "btangmu"}, "path": "tools/cldr-apps/src/org/unicode/cldr/web/STFactory.java", "diffHunk": "@@ -1293,84 +1304,6 @@ private void internalSetVoteForValue(User user, String distinguishingXpath, Stri\n             stamp.next();\n         }\n \n-        @Override", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5OTc3NTgzNQ=="}, "originalCommit": {"oid": "ff77af0379f8dc0ee84701ca7a4d4cd7f79f95bc"}, "originalPosition": 46}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 551, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}