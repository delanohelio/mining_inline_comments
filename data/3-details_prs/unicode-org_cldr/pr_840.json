{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NTI2NzE3", "number": 840, "title": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes", "bodyText": "CLDR-14284\n\nalso removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730\n\n\nChecklist\n\n Issue filed: https://unicode-org.atlassian.net/browse/CLDR-_____\n Updated PR title and link in previous line to include Issue number", "createdAt": "2020-11-11T23:59:15Z", "url": "https://github.com/unicode-org/cldr/pull/840", "merged": true, "mergeCommit": {"oid": "a56c7f748caa5fbca06b7cef626f0684518479f9"}, "closed": true, "closedAt": "2020-11-24T02:59:47Z", "author": {"login": "srl295"}, "timelineItems": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbnBx_AFqTUyODY0MTIxMQ==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdffzyxgFqTUzNzAxNjYxNw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4NjQxMjEx", "url": "https://github.com/unicode-org/cldr/pull/840#pullrequestreview-528641211", "createdAt": "2020-11-12T00:01:26Z", "commit": {"oid": "b380bf509baf44e96981d4047eeb1f2535edee8a"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMToyNlrOHxjAxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMToyNlrOHxjAxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxNTkwOQ==", "bodyText": "This does print an error and stop the test. There may be a more graceful way to fail.", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r521715909", "createdAt": "2020-11-12T00:01:26Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestAttributeValues.java", "diffHunk": "@@ -261,6 +262,14 @@ public void checkElement(String element, Attributes atts) {\n         }\n \n         private void checkAttribute(String element, String attribute, String attrValue) {\n+            if(LdmlConvertRules.isSplittableAttr(element, attribute)) {\n+                final Set<String> asSet = new HashSet<>();\n+                SPACE_SPLITTER.splitToList(attrValue).forEach(v -> {\n+                    if(asSet.add(v) == false) {\n+                        throw new IllegalArgumentException(\"in <\" + element+ \" \" + attribute + \"=\u2026, value \" + v + \" appears twice.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b380bf509baf44e96981d4047eeb1f2535edee8a"}, "originalPosition": 16}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTI4Njc4MTg4", "url": "https://github.com/unicode-org/cldr/pull/840#pullrequestreview-528678188", "createdAt": "2020-11-12T01:52:31Z", "commit": {"oid": "b380bf509baf44e96981d4047eeb1f2535edee8a"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b380bf509baf44e96981d4047eeb1f2535edee8a", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/b380bf509baf44e96981d4047eeb1f2535edee8a", "committedDate": "2020-11-11T23:58:44Z", "message": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes\n\n- also removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730"}, "afterCommit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/8696f2d481212fa5db621833e9fbad7f71fc27dc", "committedDate": "2020-11-18T22:13:43Z", "message": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes\n\n- also removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTE5NzQ2", "url": "https://github.com/unicode-org/cldr/pull/840#pullrequestreview-536919746", "createdAt": "2020-11-23T23:16:15Z", "commit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoxNjoxNVrOH4jIxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoxNjoxNVrOH4jIxw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1Nzk5MQ==", "bodyText": "Looks good. Should add quick unit test.\nAlso, can be pithier. Split to list, then create set from it. If the sizes are not the same, fail.", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r529057991", "createdAt": "2020-11-23T23:16:15Z", "author": {"login": "macchiati"}, "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "diffHunk": "@@ -616,7 +631,14 @@ public static SetMatchValue of(String key) {\n \n         @Override\n         public  boolean is(String items) {\n-            return and(subtest,SPACE_SPLITTER.split(items));\n+            Iterable<String> splitItems = SPACE_SPLITTER.split(items);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc"}, "originalPosition": 41}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/cac1511ad85596b719e9b66f812097646ea4c11d", "committedDate": "2020-11-23T23:27:04Z", "message": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes\n\n- also removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730\n- also removed a line of dead code in MatchValue.java"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/8696f2d481212fa5db621833e9fbad7f71fc27dc", "committedDate": "2020-11-18T22:13:43Z", "message": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes\n\n- also removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730"}, "afterCommit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d", "author": {"user": {"login": "srl295", "name": "Steven R. Loomis"}}, "url": "https://github.com/unicode-org/cldr/commit/cac1511ad85596b719e9b66f812097646ea4c11d", "committedDate": "2020-11-23T23:27:04Z", "message": "CLDR-14284 TestAttributeValues check for duplicates in space-separated attributes\n\n- also removed a comment on a previously-duplicate grammaticalFeatures element\nthat was fixed with CLDR-13730\n- also removed a line of dead code in MatchValue.java"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM2OTI1Mjk2", "url": "https://github.com/unicode-org/cldr/pull/840#pullrequestreview-536925296", "createdAt": "2020-11-23T23:28:52Z", "commit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoyODo1MlrOH4jb4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoyODo1MlrOH4jb4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA2Mjg4Mg==", "bodyText": "just a line of dead code, no side effect", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r529062882", "createdAt": "2020-11-23T23:28:52Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "diffHunk": "@@ -640,7 +659,6 @@ public String getName() {\n         }\n \n         public static OrMatchValue of(String key) {\n-            IntFunction<MatchValue[]> generator = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d"}, "originalPosition": 53}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTM3MDE2NjE3", "url": "https://github.com/unicode-org/cldr/pull/840#pullrequestreview-537016617", "createdAt": "2020-11-24T01:52:31Z", "commit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1803, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}