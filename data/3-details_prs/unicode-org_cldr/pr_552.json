{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDQ1OTYyODA3", "number": 552, "title": "CLDR-13792 fix error messages for bad emoji", "bodyText": "Checklist\n\n Issue filed: https://unicode-org.atlassian.net/browse/CLDR-13792\n Updated PR title and link in previous line to include Issue number", "createdAt": "2020-07-08T04:52:48Z", "url": "https://github.com/unicode-org/cldr/pull/552", "merged": true, "mergeCommit": {"oid": "2404bb7f9fff83483dc9bc9f20a61fb9d78e631d"}, "closed": true, "closedAt": "2020-07-08T18:55:39Z", "author": {"login": "macchiati"}, "timelineItems": {"totalCount": 13, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcyzEIbAH2gAyNDQ1OTYyODA3OmQ3MWEzYWVlYjYxNGQzMDM4NmY3ZGIzNmI0MmNjNWY5MzQ1OWEyMGQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcy_HjhAFqTQ0NTA0MzczMg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestCommit", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d", "author": {"user": {"login": "macchiati", "name": "Mark Davis"}}, "url": "https://github.com/unicode-org/cldr/commit/d71a3aeeb614d30386f7db36b42cc5f93459a20d", "committedDate": "2020-07-08T04:51:58Z", "message": "CLDR-13792 fix error messages for bad emoji"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDExODAy", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444411802", "createdAt": "2020-07-08T04:53:33Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1MzozM1rOGuYEVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1MzozM1rOGuYEVg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4MjAwNg==", "bodyText": "The Eclipse reformatting cleans up some stuff like this.", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451282006", "createdAt": "2020-07-08T04:53:33Z", "author": {"login": "macchiati"}, "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestCheckCLDR.java", "diffHunk": "@@ -68,7 +71,7 @@\n \n public class TestCheckCLDR extends TestFmwk {\n     static CLDRConfig testInfo = CLDRConfig.getInstance();\n-    private final Set<String> eightPointLocales = new TreeSet<String>(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 25}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDEyMDc5", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444412079", "createdAt": "2020-07-08T04:54:24Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NDoyNFrOGuYFTw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NDoyNFrOGuYFTw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4MjI1NQ==", "bodyText": "This is the only new part. We check to make sure we return errors on both E10-386 (root emoji codes) and ^^^", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451282255", "createdAt": "2020-07-08T04:54:24Z", "author": {"login": "macchiati"}, "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestCheckCLDR.java", "diffHunk": "@@ -457,6 +460,52 @@ public void TestCheckNew() {\n         errln(\"No failure message.\");\n     }\n \n+    public void TestCheckNewRootFailure() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 177}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDEyMjgz", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444412283", "createdAt": "2020-07-08T04:55:01Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NTowMlrOGuYF9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NTowMlrOGuYF9Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4MjQyMQ==", "bodyText": "clean up the test. Better results (shouldn't have checked bailey value)", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451282421", "createdAt": "2020-07-08T04:55:02Z", "author": {"login": "macchiati"}, "path": "tools/java/org/unicode/cldr/test/CheckCLDR.java", "diffHunk": "@@ -1094,10 +1094,11 @@ public final CheckCLDR check(String path, String fullPath, String value, Options\n          */\n         // if (value == cldrFileToCheck.getBaileyValue(path, null, null) && value != cldrFileToCheck.getWinningValue(path)) {\n         if (value != null\n-            && value.equals(cldrFileToCheck.getBaileyValue(path, null, null))\n-            && !value.equals(cldrFileToCheck.getWinningValue(path))) {\n-            return this;\n+            && !value.equals(cldrFileToCheck.getWinningValue(path))\n+            && cldrFileToCheck.getUnresolved().getStringValue(path) == null) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 8}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDEyNTIw", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444412520", "createdAt": "2020-07-08T04:55:45Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NTo0NVrOGuYGwg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNDo1NTo0NVrOGuYGwg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4MjYyNg==", "bodyText": "cleaned up this code. Simpler, since we just check the format of the value.", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451282626", "createdAt": "2020-07-08T04:55:45Z", "author": {"login": "macchiati"}, "path": "tools/java/org/unicode/cldr/test/CheckNew.java", "diffHunk": "@@ -24,41 +24,27 @@ public CheckCLDR setCldrFileToCheck(CLDRFile cldrFileToCheck, Options options,\n         if (cldrFileToCheck == null) {\n             return this;\n         }\n-        //        if (Phase.VETTING == getPhase()) {\n-        //            setSkipTest(false); // ok\n-        //        } else {\n-        //            setSkipTest(true);\n-        //            return this;\n-        //        }\n-\n         super.setCldrFileToCheck(cldrFileToCheck, options, possibleErrors);\n-        annotationsRoot = CLDRConfig.getInstance().getAnnotationsFactory().make(\"root\", false);\n+        isRoot = \"root\".equals(cldrFileToCheck.getLocaleID());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 33}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDE1Njc3", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444415677", "createdAt": "2020-07-08T05:05:54Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNTowNTo1NFrOGuYQmA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNTowNTo1NFrOGuYQmA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4NTE0NA==", "bodyText": "Why are we using the locale code for Quich\u00e9 here? Do we assume it has no annotations? A comment would help...", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451285144", "createdAt": "2020-07-08T05:05:54Z", "author": {"login": "pedberg-icu"}, "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestCheckCLDR.java", "diffHunk": "@@ -457,6 +460,52 @@ public void TestCheckNew() {\n         errln(\"No failure message.\");\n     }\n \n+    public void TestCheckNewRootFailure() {\n+        // Check that we get an error with the root value for an emoji.\n+        final Factory annotationsFactory = testInfo.getCommonAndSeedAndMainAndAnnotationsFactory();\n+        String locale = \"quc\";", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 180}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDE2Njk0", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444416694", "createdAt": "2020-07-08T05:09:29Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNTowOToyOVrOGuYUUg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNy0wOFQwNTowOToyOVrOGuYUUg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ1MTI4NjA5OA==", "bodyText": "Is \"E10-836\" the root annotation for @cp=\\\"\ud83d\ude00\\\" ?? This is a bit cryptic...", "url": "https://github.com/unicode-org/cldr/pull/552#discussion_r451286098", "createdAt": "2020-07-08T05:09:29Z", "author": {"login": "pedberg-icu"}, "path": "tools/cldr-unittest/src/org/unicode/cldr/unittest/TestCheckCLDR.java", "diffHunk": "@@ -457,6 +460,52 @@ public void TestCheckNew() {\n         errln(\"No failure message.\");\n     }\n \n+    public void TestCheckNewRootFailure() {\n+        // Check that we get an error with the root value for an emoji.\n+        final Factory annotationsFactory = testInfo.getCommonAndSeedAndMainAndAnnotationsFactory();\n+        String locale = \"quc\";\n+        String path = \"//ldml/annotations/annotation[@cp=\\\"\ud83d\ude00\\\"][@type=\\\"tts\\\"]\";\n+        CheckCLDR c = new CheckNew(annotationsFactory);\n+        List<CheckStatus> result = new ArrayList<>();\n+        Map<String, String> options = new HashMap<>();\n+        for (Phase phase : Phase.values()) {\n+            options.put(Options.Option.phase.getKey(), phase.toString());\n+            for (String value : Arrays.asList(\"E10-836\", CldrUtility.INHERITANCE_MARKER)) {\n+\n+                // make a fake locale\n+                XMLSource rootSource = new SimpleXMLSource(\"root\");\n+                rootSource.putValueAtPath(path, \"E10-836\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "originalPosition": 191}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ0NDE5OTcz", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-444419973", "createdAt": "2020-07-08T05:19:42Z", "commit": {"oid": "d71a3aeeb614d30386f7db36b42cc5f93459a20d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6075d99d5bb4cf0b745b85efc0e9a76aaca941f7", "author": {"user": {"login": "macchiati", "name": "Mark Davis"}}, "url": "https://github.com/unicode-org/cldr/commit/6075d99d5bb4cf0b745b85efc0e9a76aaca941f7", "committedDate": "2020-07-08T17:32:02Z", "message": "CLDR-13792 drop bogus items so we don't get errors from them; skip purely inherited items; adjust test to be cleaner (no quc, regular root values)"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDE2MjUw", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-445016250", "createdAt": "2020-07-08T18:14:45Z", "commit": {"oid": "6075d99d5bb4cf0b745b85efc0e9a76aaca941f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDIyNjgy", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-445022682", "createdAt": "2020-07-08T18:24:10Z", "commit": {"oid": "6075d99d5bb4cf0b745b85efc0e9a76aaca941f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDIzMjY4", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-445023268", "createdAt": "2020-07-08T18:24:59Z", "commit": {"oid": "6075d99d5bb4cf0b745b85efc0e9a76aaca941f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDQ1MDQzNzMy", "url": "https://github.com/unicode-org/cldr/pull/552#pullrequestreview-445043732", "createdAt": "2020-07-08T18:54:34Z", "commit": {"oid": "6075d99d5bb4cf0b745b85efc0e9a76aaca941f7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1988, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}