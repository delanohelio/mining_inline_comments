{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDcwMjc3NTkw", "number": 646, "title": "CLDR-13918 Switching file/path operations to using normalized rather than canonical paths.", "bodyText": "Details in CLDR-13918, but this PR tries to catch every file operation and piece of code where file \"canonicalization\" was being done, and change it to go via a single utility function (which uses path normalization rather than canonicalization).\nChecklist\n\n Issue filed: https://unicode-org.atlassian.net/browse/CLDR-13918\n Updated PR title and link in previous line to include Issue number", "createdAt": "2020-08-19T16:20:13Z", "url": "https://github.com/unicode-org/cldr/pull/646", "merged": true, "mergeCommit": {"oid": "5243c62d771d776e468c223fd1d172c0a6869cba"}, "closed": true, "closedAt": "2020-08-21T14:30:40Z", "author": {"login": "hagbard"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdAeJmCAFqTQ3MDYzMTEwNw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABdBFdbtAFqTQ3MjUyNTA2OQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcwNjMxMTA3", "url": "https://github.com/unicode-org/cldr/pull/646#pullrequestreview-470631107", "createdAt": "2020-08-19T16:21:13Z", "commit": {"oid": "a941a71d1de83afee97e4837dbfe3f67ae5a363d"}, "state": "COMMENTED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNjoyMToxM1rOHDO-7A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0xOVQxNjoyMjoxMlrOHDPDJw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE1MzI2MA==", "bodyText": "No IOException possible using new utilities file.\nHere and a few other places in this PR.", "url": "https://github.com/unicode-org/cldr/pull/646#discussion_r473153260", "createdAt": "2020-08-19T16:21:13Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/tool/SearchCLDR.java", "diffHunk": "@@ -364,16 +365,12 @@ public static void main(String[] args) {\n         File[] newDirs = new File[sourceDirs.length];\n         int item = 0;\n         for (File s : sourceDirs) {\n-            try {\n-                String path = s.getCanonicalPath();\n-                int baseLoc = path.lastIndexOf(\"/cldr/\");\n-                if (baseLoc < 0) {\n-                    throw new ICUUncheckedIOException(\"source doesn't contain /cldr/\");\n-                }\n-                newDirs[item++] = new File(base, path.substring(baseLoc + 5));\n-            } catch (IOException e) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a941a71d1de83afee97e4837dbfe3f67ae5a363d"}, "originalPosition": 19}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3MzE1NDM0Mw==", "bodyText": "No longer reachable/applicable since failure cannot occur.", "url": "https://github.com/unicode-org/cldr/pull/646#discussion_r473154343", "createdAt": "2020-08-19T16:22:12Z", "author": {"login": "hagbard"}, "path": "tools/java/org/unicode/cldr/util/LDMLUtilities.java", "diffHunk": "@@ -1962,15 +1962,7 @@ public static String filenameToURL(String filename) {\n         }\n \n         File f = new File(filename);\n-        String tmp = null;\n-        try {\n-            // This normally gives a better path\n-            tmp = f.getCanonicalPath();\n-        } catch (IOException ioe) {\n-            // But this can be used as a backup, for cases\n-            // where the file does not exist, etc.\n-            tmp = f.getAbsolutePath();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a941a71d1de83afee97e4837dbfe3f67ae5a363d"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyMDY3OTk1", "url": "https://github.com/unicode-org/cldr/pull/646#pullrequestreview-472067995", "createdAt": "2020-08-21T00:24:19Z", "commit": {"oid": "a941a71d1de83afee97e4837dbfe3f67ae5a363d"}, "state": "DISMISSED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "fda815a100a6ddde3e86b79dcb5ea3ed76f658b0", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/fda815a100a6ddde3e86b79dcb5ea3ed76f658b0", "committedDate": "2020-08-21T00:34:27Z", "message": "CLDR-13918 Switching file/path operations to using normalized rather than canonical paths.\n\nSee #646"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a941a71d1de83afee97e4837dbfe3f67ae5a363d", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/a941a71d1de83afee97e4837dbfe3f67ae5a363d", "committedDate": "2020-08-19T15:46:05Z", "message": "tidying up"}, "afterCommit": {"oid": "fda815a100a6ddde3e86b79dcb5ea3ed76f658b0", "author": {"user": {"login": "hagbard", "name": "David Beaumont"}}, "url": "https://github.com/unicode-org/cldr/commit/fda815a100a6ddde3e86b79dcb5ea3ed76f658b0", "committedDate": "2020-08-21T00:34:27Z", "message": "CLDR-13918 Switching file/path operations to using normalized rather than canonical paths.\n\nSee #646"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDcyNTI1MDY5", "url": "https://github.com/unicode-org/cldr/pull/646#pullrequestreview-472525069", "createdAt": "2020-08-21T14:12:50Z", "commit": {"oid": "fda815a100a6ddde3e86b79dcb5ea3ed76f658b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1907, "cost": 1, "resetAt": "2021-11-01T16:37:27Z"}}}