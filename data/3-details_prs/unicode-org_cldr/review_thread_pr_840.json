{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE5NTI2NzE3", "number": 840, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMToyNlrOE37CGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoyODo1MlrOE8cBfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI3MDc0MzMxOnYy", "diffSide": "RIGHT", "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestAttributeValues.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMToyNlrOHxjAxQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xMlQwMDowMToyNlrOHxjAxQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyMTcxNTkwOQ==", "bodyText": "This does print an error and stop the test. There may be a more graceful way to fail.", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r521715909", "createdAt": "2020-11-12T00:01:26Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestAttributeValues.java", "diffHunk": "@@ -261,6 +262,14 @@ public void checkElement(String element, Attributes atts) {\n         }\n \n         private void checkAttribute(String element, String attribute, String attrValue) {\n+            if(LdmlConvertRules.isSplittableAttr(element, attribute)) {\n+                final Set<String> asSet = new HashSet<>();\n+                SPACE_SPLITTER.splitToList(attrValue).forEach(v -> {\n+                    if(asSet.add(v) == false) {\n+                        throw new IllegalArgumentException(\"in <\" + element+ \" \" + attribute + \"=\u2026, value \" + v + \" appears twice.\");", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b380bf509baf44e96981d4047eeb1f2535edee8a"}, "originalPosition": 16}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxODA1OTY3OnYy", "diffSide": "RIGHT", "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoxNjoxNVrOH4jIxw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoxOTowM1rOH4jNDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1Nzk5MQ==", "bodyText": "Looks good. Should add quick unit test.\nAlso, can be pithier. Split to list, then create set from it. If the sizes are not the same, fail.", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r529057991", "createdAt": "2020-11-23T23:16:15Z", "author": {"login": "macchiati"}, "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "diffHunk": "@@ -616,7 +631,14 @@ public static SetMatchValue of(String key) {\n \n         @Override\n         public  boolean is(String items) {\n-            return and(subtest,SPACE_SPLITTER.split(items));\n+            Iterable<String> splitItems = SPACE_SPLITTER.split(items);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc"}, "originalPosition": 41}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1OTA4Ng==", "bodyText": "Should add quick unit test.\n\nTestAttributeValues already hits this, and is verified to fail on the \"\u2026\u00a0fil fil \u2026\" case for grammatical features.\n\nAlso, can be pithier\u2026\u00a0If the sizes are not the same, fail\n\ngood point, will fix", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r529059086", "createdAt": "2020-11-23T23:19:03Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "diffHunk": "@@ -616,7 +631,14 @@ public static SetMatchValue of(String key) {\n \n         @Override\n         public  boolean is(String items) {\n-            return and(subtest,SPACE_SPLITTER.split(items));\n+            Iterable<String> splitItems = SPACE_SPLITTER.split(items);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA1Nzk5MQ=="}, "originalCommit": {"oid": "8696f2d481212fa5db621833e9fbad7f71fc27dc"}, "originalPosition": 41}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMxODA5MTQ4OnYy", "diffSide": "LEFT", "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoyODo1MlrOH4jb4g==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yM1QyMzoyODo1MlrOH4jb4g==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyOTA2Mjg4Mg==", "bodyText": "just a line of dead code, no side effect", "url": "https://github.com/unicode-org/cldr/pull/840#discussion_r529062882", "createdAt": "2020-11-23T23:28:52Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/main/java/org/unicode/cldr/util/MatchValue.java", "diffHunk": "@@ -640,7 +659,6 @@ public String getName() {\n         }\n \n         public static OrMatchValue of(String key) {\n-            IntFunction<MatchValue[]> generator = null;", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "cac1511ad85596b719e9b66f812097646ea4c11d"}, "originalPosition": 53}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 267, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}