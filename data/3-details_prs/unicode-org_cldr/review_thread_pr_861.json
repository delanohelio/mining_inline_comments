{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI5NzUwMjI3", "number": 861, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxOTo1NDowMlrOE-0U8Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxOTo1NDowMlrOE-0U8Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzM0MzA0NDk3OnYy", "diffSide": "RIGHT", "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "isResolved": false, "comments": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0zMFQxOTo1NDowMlrOH8LcPw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0wMVQxNjo0NDo1M1rOH81_KQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw==", "bodyText": "How could we test for MissingStatus.DISPUTED? It would require the kind of CLDRFile that reflects voting in progress; do we have a way to set that up in the context of cldr-unittest TestAll?", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r532864063", "createdAt": "2020-11-30T19:54:02Z", "author": {"login": "btangmu"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk1Mzc2Mw==", "bodyText": "We'd have to set it up so that the callback returned the interesting information, I'm guessing.", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r532953763", "createdAt": "2020-11-30T22:48:07Z", "author": {"login": "macchiati"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw=="}, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk2OTExNA==", "bodyText": "One way would be to leverage the TestSTFactory which already sets up vetters, disputes, etc. It actually creates a STFactory though which has a DB backing.\nBut all you need is a UsersChoice<Organization> subclass - VettingViewer.main() constructs one which includes disputed values, which looks quite suitable for a test case.", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r532969114", "createdAt": "2020-11-30T23:24:59Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw=="}, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjk3MDY5Mg==", "bodyText": "actually, getMissingStatus() will never return disputed, but member function getErrorOnPath() will.", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r532970692", "createdAt": "2020-11-30T23:28:50Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw=="}, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU0ODU2NQ==", "bodyText": "actually, getMissingStatus() will never return disputed, but member function getErrorOnPath() will.\n\nGood point! The ancient bug, for which this is a follow-up, was https://unicode-org.atlassian.net/browse/CLDR-11765 and it involved items under Disputed in the Dashboard, hence my confusion...\nI think this is the first unit test for any method in VettingViewer. Obviously more tests would be helpful.\nI doubt whether getMissingStatus even belongs in VettingViewer -- shouldn't the status be the same regardless of whether an item is viewed in the Dashboard or the DataSection view?", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r533548565", "createdAt": "2020-12-01T16:27:54Z", "author": {"login": "btangmu"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw=="}, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMzU2MTEyOQ==", "bodyText": "@btangmu it seems to be more of a utility function that may belong somewhere else.", "url": "https://github.com/unicode-org/cldr/pull/861#discussion_r533561129", "createdAt": "2020-12-01T16:44:53Z", "author": {"login": "srl295"}, "path": "tools/cldr-code/src/test/java/org/unicode/cldr/unittest/TestUtilities.java", "diffHunk": "@@ -1409,4 +1372,20 @@ public void TestBulkUploadHtml() {\n         assertEquals(\"writeBulkInfoHtml\", expected, out.toString());\n     }\n \n+    /**\n+     * Verify that VettingViewer.getMissingStatus returns MissingStatus.PRESENT\n+     * for a typical path in a well-populated locale\n+     *\n+     * Ideally we should also test for MissingStatus.DISPUTED, etc.; that's more difficult\n+     */", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMjg2NDA2Mw=="}, "originalCommit": {"oid": "d486a31bd7cf7cf10f1d51a908109099afd091ca"}, "originalPosition": 98}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 283, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}