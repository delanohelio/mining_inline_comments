{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI3MDk2MTg2", "number": 857, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0MDo1N1rOE9QkJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMjoxMVrOE9RKXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjY5OTg4OnYy", "diffSide": "RIGHT", "path": "tools/scripts/ansible/templates/deploy-sh.j2", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0MDo1N1rOH52c4Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0MDo1N1rOH52c4Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyMzAwOQ==", "bodyText": "only changed tabs to spaces in this file, no significant change", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530423009", "createdAt": "2020-11-25T14:40:57Z", "author": {"login": "btangmu"}, "path": "tools/scripts/ansible/templates/deploy-sh.j2", "diffHunk": "@@ -11,8 +11,8 @@ dogit() {\n     rm -f ${WORKDIR}/git-list.txt\n     if [[ ${GITHUB_SHA} = \"master\" ]];\n     then\n-\techo \"changing 'master' to 'origin/master' to get the latest\"\n-\tGITHUB_SHA=origin/master\n+        echo \"changing 'master' to 'origin/master' to get the latest\"\n+        GITHUB_SHA=origin/master\n     fi", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 8}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjcxMjk3OnYy", "diffSide": "LEFT", "path": "tools/scripts/ansible/templates/server.xml", "isResolved": false, "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNDo0Mzo1NlrOH52lQg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNjowNTozMlrOH56PgA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA==", "bodyText": "avoid:\nSEVERE [main] org.apache.catalina.util.LifecycleBase.handleSubClassException Failed to start component [Connector[AJP/1.3-8009]]\norg.apache.catalina.LifecycleException: Protocol handler start failed\nat org.apache.catalina.connector.Connector.startInternal(Connector.java:1067)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardService.startInternal(StandardService.java:438)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\nat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\nat org.apache.catalina.startup.Catalina.start(Catalina.java:633)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)\nat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)\nat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)\nCaused by: java.lang.IllegalArgumentException: The AJP Connector is configured with secretRequired=\"true\" but the secret attribute is either null or \"\". This combination is not valid.\nat org.apache.coyote.ajp.AbstractAjpProtocol.start(AbstractAjpProtocol.java:270)", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530425154", "createdAt": "2020-11-25T14:43:56Z", "author": {"login": "btangmu"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzODU3NQ==", "bodyText": "Fair enough\u2026\u00a0nginx recommends proxying with http instead of AJP: https://docs.nginx.com/nginx/deployment-guides/load-balance-third-party/apache-tomcat/", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530438575", "createdAt": "2020-11-25T15:01:55Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA=="}, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ1NzMwNg==", "bodyText": "I'm glad you knew that! I didn't, and I don't know for sure that we don't need AJP at all -- we'll see what happens on smoketest! BTW probably we don't need to supply an entire server.xml template; we could instead configure robertdebock.tomcat at a higher level", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530457306", "createdAt": "2020-11-25T15:27:45Z", "author": {"login": "btangmu"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA=="}, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ4NDY2OA==", "bodyText": "AJP is another proxy protocol (non-HTTP). We don't use it.  \"JK\" is another protocol you might read of somewhere.\nTomcat turns it on by default, but since we don't need it, best to just throw it out", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530484668", "createdAt": "2020-11-25T16:04:52Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA=="}, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQ4NTEyMA==", "bodyText": "See this apache httpd example line showing how to connect to an AJP service:\nhttps://httpd.apache.org/docs/2.4/mod/mod_proxy_ajp.html#usage", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530485120", "createdAt": "2020-11-25T16:05:32Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/templates/server.xml", "diffHunk": "@@ -84,15 +84,6 @@\n          style configuration. When using the APR/native implementation, the\n          OpenSSL style configuration is required as described in the APR/native\n          documentation -->\n-    <!--\n-    <Connector address=\"127.0.0.1\" port=\"8443\" protocol=\"org.apache.coyote.http11.Http11NioProtocol\"\n-               maxThreads=\"150\" SSLEnabled=\"true\" scheme=\"https\" secure=\"true\"\n-               clientAuth=\"false\" sslProtocol=\"TLS\" />\n-    -->\n-\n-    <!-- Define an AJP 1.3 Connector on port 8009 -->\n-    <Connector address=\"127.0.0.1\" port=\"8009\" protocol=\"AJP/1.3\" redirectPort=\"8443\" />\n-", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQyNTE1NA=="}, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 12}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzMyNjc5Nzc0OnYy", "diffSide": "RIGHT", "path": "tools/scripts/ansible/vagrant-playbook.yml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMjoxMVrOH53adA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0yNVQxNTowMjoxMVrOH53adA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUzMDQzODc3Mg==", "bodyText": "this is a great idea.", "url": "https://github.com/unicode-org/cldr/pull/857#discussion_r530438772", "createdAt": "2020-11-25T15:02:11Z", "author": {"login": "srl295"}, "path": "tools/scripts/ansible/vagrant-playbook.yml", "diffHunk": "@@ -0,0 +1,2 @@\n+- import_playbook: setup-playbook.yml\n+# Note: any additional setup specifically for vagrant could be done here, such as adding a self-signed ssl cert", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "95cd6819586d3e91633abfb6163ed8a5e7769db2"}, "originalPosition": 2}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 280, "cost": 1, "resetAt": "2021-11-12T12:57:47Z"}}}