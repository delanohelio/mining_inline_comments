{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDYyMjg1MTM4", "number": 3674, "reviewThreads": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwNjowNzo1MVrOEcbQhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwNjoxMDozNFrOEcbTAg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MjQyMTgxOnYy", "diffSide": "RIGHT", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwNjowNzo1MVrOHG9I9Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwODozMzowNFrOHJvmYA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ==", "bodyText": "Do we really need a command pattern here?", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477055221", "createdAt": "2020-08-26T06:07:51Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1Njc5Mw==", "bodyText": "This is a visitor, not command.", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479956793", "createdAt": "2020-08-31T07:48:53Z", "author": {"login": "surabujin"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ=="}, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 20}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk3OTEwNA==", "bodyText": "my bad, was thinking about the command pattern there at that moment). looks like it won't work here since you need to inject storage in it somehow, and finally end up with visitor.", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479979104", "createdAt": "2020-08-31T08:33:04Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTIyMQ=="}, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 20}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MjQyNTcyOnYy", "diffSide": "RIGHT", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwNjowOTozM1rOHG9LVg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNzo0OToyMFrOHJuQPA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTgzMA==", "bodyText": "this inverse of action make things harder to track without any pros", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477055830", "createdAt": "2020-08-26T06:09:33Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {\n+    public RegionMappingAdd(SwitchId switchId, String region, boolean readWriteMode) {\n+        super(switchId, region, readWriteMode);\n+    }\n+\n+    @Override\n+    public void apply(RegionMappingStorage storage) {\n+        storage.update(this);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 27}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1NzA1Mg==", "bodyText": "This is a visitor pattern. What do you propose to use here?", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479957052", "createdAt": "2020-08-31T07:49:20Z", "author": {"login": "surabujin"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingAdd.java", "diffHunk": "@@ -0,0 +1,29 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n+\n+import org.openkilda.model.SwitchId;\n+\n+public class RegionMappingAdd extends RegionMappingUpdate {\n+    public RegionMappingAdd(SwitchId switchId, String region, boolean readWriteMode) {\n+        super(switchId, region, readWriteMode);\n+    }\n+\n+    @Override\n+    public void apply(RegionMappingStorage storage) {\n+        storage.update(this);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NTgzMA=="}, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 27}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjk4MjQyODE4OnYy", "diffSide": "RIGHT", "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingStorage.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0yNlQwNjoxMDozNFrOHG9M0w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wOC0zMVQwNzo1MjoxMVrOHJuV5w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjIxMQ==", "bodyText": "single implementation without any signs that any other will come in future, can't see any value from this", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r477056211", "createdAt": "2020-08-26T06:10:34Z", "author": {"login": "timofei-durakov"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingStorage.java", "diffHunk": "@@ -13,12 +13,12 @@\n  *   limitations under the License.\n  */\n \n-package org.openkilda.wfm.topology.statsrouter.service;\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n \n-import org.openkilda.messaging.Message;\n+public interface RegionMappingStorage {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 14}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3OTk1ODUwMw==", "bodyText": "In this specific case - this is part of visitor pattern implementation. I can say the same about all NB services and most part of switchmanager topology (and this is only what I can remember right now).", "url": "https://github.com/telstra/open-kilda/pull/3674#discussion_r479958503", "createdAt": "2020-08-31T07:52:11Z", "author": {"login": "surabujin"}, "path": "src-java/floodlightrouter-topology/floodlightrouter-storm-topology/src/main/java/org/openkilda/wfm/topology/floodlightrouter/model/RegionMappingStorage.java", "diffHunk": "@@ -13,12 +13,12 @@\n  *   limitations under the License.\n  */\n \n-package org.openkilda.wfm.topology.statsrouter.service;\n+package org.openkilda.wfm.topology.floodlightrouter.model;\n \n-import org.openkilda.messaging.Message;\n+public interface RegionMappingStorage {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ3NzA1NjIxMQ=="}, "originalCommit": {"oid": "86950d01ce399f94462f1218b48eac2b99b990b1"}, "originalPosition": 14}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 1792, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}