{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE4NjI3NTI5", "number": 3844, "title": "Added ability to run Kilda in blue and green modes locally", "bodyText": "", "createdAt": "2020-11-10T16:54:01Z", "url": "https://github.com/telstra/open-kilda/pull/3844", "merged": true, "mergeCommit": {"oid": "cfa3a62f3e63a56c356fc7b4baad729c51d4e194"}, "closed": true, "closedAt": "2020-12-25T12:41:33Z", "author": {"login": "niksv"}, "timelineItems": {"totalCount": 24, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdbYk4oABqjM5ODI0Njc3MzQ=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdplUCLABqjQxNDg4NDU4NjI=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "19e43a8851eabf9ce9f06620d245b536877b8b1b", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/19e43a8851eabf9ce9f06620d245b536877b8b1b", "committedDate": "2020-11-10T16:52:19Z", "message": "Added blue green modes for wfm"}, "afterCommit": {"oid": "f3604dc58efe2cf60fcc41d5a6f7a88dbec1f654", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/f3604dc58efe2cf60fcc41d5a6f7a88dbec1f654", "committedDate": "2020-11-11T07:10:56Z", "message": "Added blue green modes for wfm"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "10d1890d36894472206843bb45633919c9084951", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/10d1890d36894472206843bb45633919c9084951", "committedDate": "2020-11-27T12:21:38Z", "message": "Merge pull request #3845 from telstra/add-kafka-group-id-prefix\n\nAdded kafka consumer group id prefix"}, "afterCommit": {"oid": "da6c7df6a725c7228c6a4afed9eec64401b3e60d", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/da6c7df6a725c7228c6a4afed9eec64401b3e60d", "committedDate": "2020-11-27T12:22:36Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "da6c7df6a725c7228c6a4afed9eec64401b3e60d", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/da6c7df6a725c7228c6a4afed9eec64401b3e60d", "committedDate": "2020-11-27T12:22:36Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}, "afterCommit": {"oid": "15f0dc26bebaf3864d4bf9c68f8dadffe6e1cf0c", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/15f0dc26bebaf3864d4bf9c68f8dadffe6e1cf0c", "committedDate": "2020-11-27T13:39:01Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "15f0dc26bebaf3864d4bf9c68f8dadffe6e1cf0c", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/15f0dc26bebaf3864d4bf9c68f8dadffe6e1cf0c", "committedDate": "2020-11-27T13:39:01Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}, "afterCommit": {"oid": "5102e41404663bd1312e73f5b4a8cc4e16d71696", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5102e41404663bd1312e73f5b4a8cc4e16d71696", "committedDate": "2020-12-07T09:53:06Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5102e41404663bd1312e73f5b4a8cc4e16d71696", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5102e41404663bd1312e73f5b4a8cc4e16d71696", "committedDate": "2020-12-07T09:53:06Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}, "afterCommit": {"oid": "336b7a42b4182031937676ee09481c6bc47b318f", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/336b7a42b4182031937676ee09481c6bc47b318f", "committedDate": "2020-12-07T09:56:38Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "336b7a42b4182031937676ee09481c6bc47b318f", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/336b7a42b4182031937676ee09481c6bc47b318f", "committedDate": "2020-12-07T09:56:38Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}, "afterCommit": {"oid": "c2d27e096c1efcb95bc439cfb05dd97f6d06773e", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/c2d27e096c1efcb95bc439cfb05dd97f6d06773e", "committedDate": "2020-12-10T15:17:24Z", "message": "Use 1 config insteam of 3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2d27e096c1efcb95bc439cfb05dd97f6d06773e", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/c2d27e096c1efcb95bc439cfb05dd97f6d06773e", "committedDate": "2020-12-10T15:17:24Z", "message": "Use 1 config insteam of 3"}, "afterCommit": {"oid": "9bd2e8e7cc4010bea043dc87be4424553a764eb9", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/9bd2e8e7cc4010bea043dc87be4424553a764eb9", "committedDate": "2020-12-11T06:14:21Z", "message": "Use 1 config insteam of 3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9bd2e8e7cc4010bea043dc87be4424553a764eb9", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/9bd2e8e7cc4010bea043dc87be4424553a764eb9", "committedDate": "2020-12-11T06:14:21Z", "message": "Use 1 config insteam of 3"}, "afterCommit": {"oid": "a67ae4a853e1b151c746a5a974d292cf62c019f6", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a67ae4a853e1b151c746a5a974d292cf62c019f6", "committedDate": "2020-12-11T06:14:54Z", "message": "Use 1 config insteam of 3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a67ae4a853e1b151c746a5a974d292cf62c019f6", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a67ae4a853e1b151c746a5a974d292cf62c019f6", "committedDate": "2020-12-11T06:14:54Z", "message": "Use 1 config insteam of 3"}, "afterCommit": {"oid": "204bc295b118be5c6f01c69aa83b8315df944718", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/204bc295b118be5c6f01c69aa83b8315df944718", "committedDate": "2020-12-11T12:05:17Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "204bc295b118be5c6f01c69aa83b8315df944718", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/204bc295b118be5c6f01c69aa83b8315df944718", "committedDate": "2020-12-11T12:05:17Z", "message": "Added kafka consumer group id prefix. This fix allows two northbounds read the same topic simultaneously."}, "afterCommit": {"oid": "ed3d083f85d789bf6c9bd202cc138072f7111737", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/ed3d083f85d789bf6c9bd202cc138072f7111737", "committedDate": "2020-12-11T12:36:27Z", "message": "Use 1 config insteam of 3"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ed3d083f85d789bf6c9bd202cc138072f7111737", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/ed3d083f85d789bf6c9bd202cc138072f7111737", "committedDate": "2020-12-11T12:36:27Z", "message": "Use 1 config insteam of 3"}, "afterCommit": {"oid": "e76c7d36a1f9d5b0ec52c754a1777abf8c9a8d3a", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/e76c7d36a1f9d5b0ec52c754a1777abf8c9a8d3a", "committedDate": "2020-12-11T12:38:40Z", "message": "0-Downtime: Local blue-green deployment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e76c7d36a1f9d5b0ec52c754a1777abf8c9a8d3a", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/e76c7d36a1f9d5b0ec52c754a1777abf8c9a8d3a", "committedDate": "2020-12-11T12:38:40Z", "message": "0-Downtime: Local blue-green deployment"}, "afterCommit": {"oid": "e26f8a9e9fec5fb78e3d039dc117d386a19269f2", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/e26f8a9e9fec5fb78e3d039dc117d386a19269f2", "committedDate": "2020-12-11T13:56:46Z", "message": "0-Downtime: Local blue-green deployment"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTI3MjMy", "url": "https://github.com/telstra/open-kilda/pull/3844#pullrequestreview-550127232", "createdAt": "2020-12-11T14:08:01Z", "commit": {"oid": "e26f8a9e9fec5fb78e3d039dc117d386a19269f2"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUwMTMxOTQz", "url": "https://github.com/telstra/open-kilda/pull/3844#pullrequestreview-550131943", "createdAt": "2020-12-11T14:13:47Z", "commit": {"oid": "e26f8a9e9fec5fb78e3d039dc117d386a19269f2"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDoxMzo0OFrOID6g6A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMVQxNDoxMzo0OFrOID6g6A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDk3NTMzNg==", "bodyText": "--scale northbound-blue-green=0 {{if not (exists \"/no_grpc_speaker\")}}--scale grpc-speaker-blue-green=0{{end}}\n\nThis is not needed here.", "url": "https://github.com/telstra/open-kilda/pull/3844#discussion_r540975336", "createdAt": "2020-12-11T14:13:48Z", "author": {"login": "dpoltavets"}, "path": "confd/templates/makefile/makefile.tmpl", "diffHunk": "@@ -44,7 +48,25 @@ up-test-mode:\n \t@echo ~~\n \t@echo\n \tcp -n .env.example .env\n-\tdocker-compose up -d\n+\tdocker-compose up -d --scale northbound-blue-green=0 {{if not (exists \"/no_grpc_speaker\")}}--scale grpc-speaker-blue-green=0{{end}}\n+\tdocker-compose logs -f wfm\n+\t$(MAKE) -C tools/elk-dashboards\n+\n+up-test-mode-stable:\n+\tcp -n .env.example .env\n+\tTAG=$(STABLE_TAG) WFM_TOPOLOGIES_MODE=blue docker-compose up -d --scale northbound-blue-green=0 {{if not (exists \"/no_grpc_speaker\")}}--scale grpc-speaker-blue-green=0{{end}}\n+\tdocker-compose logs -f wfm\n+\t$(MAKE) -C tools/elk-dashboards\n+\n+up-test-mode-green:\n+\tcp -n .env.example .env\n+\tWFM_TOPOLOGIES_MODE=green docker-compose up -d floodlight_2 northbound-blue-green wfm {{if not (exists \"/no_grpc_speaker\")}}grpc-speaker-blue-green{{end}}\n+\tdocker-compose logs -f wfm\n+\t$(MAKE) -C tools/elk-dashboards\n+\n+up-test-mode-blue:\n+\tcp -n .env.example .env\n+\tTAG=$(STABLE_TAG) WFM_TOPOLOGIES_MODE=blue  docker-compose up -d floodlight_1 wfm --scale northbound-blue-green=0 {{if not (exists \"/no_grpc_speaker\")}}--scale grpc-speaker-blue-green=0{{end}}", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "e26f8a9e9fec5fb78e3d039dc117d386a19269f2"}, "originalPosition": 45}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e26f8a9e9fec5fb78e3d039dc117d386a19269f2", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/e26f8a9e9fec5fb78e3d039dc117d386a19269f2", "committedDate": "2020-12-11T13:56:46Z", "message": "0-Downtime: Local blue-green deployment"}, "afterCommit": {"oid": "f8e38a7d339aa6bb59488757648bbc40370ffba2", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/f8e38a7d339aa6bb59488757648bbc40370ffba2", "committedDate": "2020-12-15T13:02:09Z", "message": "0-Downtime: Local blue-green deployment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f8e38a7d339aa6bb59488757648bbc40370ffba2", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/f8e38a7d339aa6bb59488757648bbc40370ffba2", "committedDate": "2020-12-15T13:02:09Z", "message": "0-Downtime: Local blue-green deployment"}, "afterCommit": {"oid": "46f15e0d117fa6f57b26284e3fca92479b439c4f", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/46f15e0d117fa6f57b26284e3fca92479b439c4f", "committedDate": "2020-12-15T13:04:16Z", "message": "0-Downtime: Local blue-green deployment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "46f15e0d117fa6f57b26284e3fca92479b439c4f", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/46f15e0d117fa6f57b26284e3fca92479b439c4f", "committedDate": "2020-12-15T13:04:16Z", "message": "0-Downtime: Local blue-green deployment"}, "afterCommit": {"oid": "c2c5cb9c07b6496abecb59bdaf8fe07e636a26ef", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/c2c5cb9c07b6496abecb59bdaf8fe07e636a26ef", "committedDate": "2020-12-15T13:05:13Z", "message": "0-Downtime: Local blue-green deployment"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "c2c5cb9c07b6496abecb59bdaf8fe07e636a26ef", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/c2c5cb9c07b6496abecb59bdaf8fe07e636a26ef", "committedDate": "2020-12-15T13:05:13Z", "message": "0-Downtime: Local blue-green deployment"}, "afterCommit": {"oid": "1919dfa4a63599bdb0987e123ef6351a0659eca4", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/1919dfa4a63599bdb0987e123ef6351a0659eca4", "committedDate": "2020-12-17T10:55:45Z", "message": "Added ability to run Kilda in blue and green modes locally"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU2MzE0NzM4", "url": "https://github.com/telstra/open-kilda/pull/3844#pullrequestreview-556314738", "createdAt": "2020-12-21T11:32:27Z", "commit": {"oid": "1919dfa4a63599bdb0987e123ef6351a0659eca4"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1919dfa4a63599bdb0987e123ef6351a0659eca4", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/1919dfa4a63599bdb0987e123ef6351a0659eca4", "committedDate": "2020-12-17T10:55:45Z", "message": "Added ability to run Kilda in blue and green modes locally"}, "afterCommit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d", "committedDate": "2020-12-21T19:58:33Z", "message": "Added ability to run Kilda in blue and green modes locally"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU3ODIwODM4", "url": "https://github.com/telstra/open-kilda/pull/3844#pullrequestreview-557820838", "createdAt": "2020-12-23T11:49:42Z", "commit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d"}, "state": "APPROVED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMTo0OTo0M1rOIKiZ_w==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0yM1QxMjowOTozOFrOIKi3og==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyMDM4Mw==", "bodyText": "Is it always blue(or green) or can be any one of them? Do we steel need just \"northbound\" service?", "url": "https://github.com/telstra/open-kilda/pull/3844#discussion_r547920383", "createdAt": "2020-12-23T11:49:43Z", "author": {"login": "surabujin"}, "path": "confd/templates/docker-compose/docker-compose.tmpl", "diffHunk": "@@ -441,9 +446,34 @@ services:\n          - northbound.pendev\n     mem_limit: ${NB_MEM_LIMIT:-1073741824}\n \n+  northbound-blue-green:", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d"}, "originalPosition": 119}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyNTg5Mg==", "bodyText": "do not use exec in this way. In the original code, it was some kind of optimization - we can \"close/replace\" the existing bash process with make (at the end of the script). Now you have some logic around this make call... and should not close the existing bash process too early.\nPS it can be done in a simpler way (if WFM_TOPOLOGIES_MODE can contain only \"blue\" or \"green\" or are not defined):\nmake kill-all${WFM_TOPOLOGIES_MODE:+-$WFM_TOPOLOGIES_MODE}\nexec make deploy-alll${WFM_TOPOLOGIES_MODE:+-$WFM_TOPOLOGIES_MODE}", "url": "https://github.com/telstra/open-kilda/pull/3844#discussion_r547925892", "createdAt": "2020-12-23T12:04:16Z", "author": {"login": "surabujin"}, "path": "docker/wfm/app/entry-point.sh", "diffHunk": "@@ -19,5 +19,21 @@ set -eu ${DEBUG:+-x}\n PATH=${PATH}:/opt/storm/bin\n \n cd /app\n-make kill-all\n-exec make deploy-all\n+\n+case ${WFM_TOPOLOGIES_MODE:-} in\n+\n+  blue)\n+    make kill-all-blue\n+    exec make deploy-all-blue", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0NzkyNzk3MA==", "bodyText": "Unexpected behavior, at least for me. You completely ignore the value of WFM_TOPOLOGIES_MODE. Such behavior can mask incorrect values into WFM_TOPOLOGIES_MODE.", "url": "https://github.com/telstra/open-kilda/pull/3844#discussion_r547927970", "createdAt": "2020-12-23T12:09:38Z", "author": {"login": "surabujin"}, "path": "docker/wfm/app/entry-point.sh", "diffHunk": "@@ -19,5 +19,21 @@ set -eu ${DEBUG:+-x}\n PATH=${PATH}:/opt/storm/bin\n \n cd /app\n-make kill-all\n-exec make deploy-all\n+\n+case ${WFM_TOPOLOGIES_MODE:-} in\n+\n+  blue)\n+    make kill-all-blue\n+    exec make deploy-all-blue\n+    ;;\n+\n+  green)\n+    make kill-all-green\n+    exec make deploy-all-green\n+    ;;\n+\n+  *)\n+    make kill-all", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d"}, "originalPosition": 20}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a5aacd4ff6808ba0c5ba0c88fb981d2fd183a60d", "committedDate": "2020-12-21T19:58:33Z", "message": "Added ability to run Kilda in blue and green modes locally"}, "afterCommit": {"oid": "4e29d90ee411f1361e4b6609083625fb9b5fa145", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4e29d90ee411f1361e4b6609083625fb9b5fa145", "committedDate": "2020-12-23T12:45:54Z", "message": "Added ability to run Kilda in blue and green modes locally"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "81e00f463693003af0bb56320ca8bfcaff5e301e", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/81e00f463693003af0bb56320ca8bfcaff5e301e", "committedDate": "2020-12-25T09:55:43Z", "message": "Added ability to run Kilda in blue and green modes locally"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e29d90ee411f1361e4b6609083625fb9b5fa145", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4e29d90ee411f1361e4b6609083625fb9b5fa145", "committedDate": "2020-12-23T12:45:54Z", "message": "Added ability to run Kilda in blue and green modes locally"}, "afterCommit": {"oid": "81e00f463693003af0bb56320ca8bfcaff5e301e", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/81e00f463693003af0bb56320ca8bfcaff5e301e", "committedDate": "2020-12-25T09:55:43Z", "message": "Added ability to run Kilda in blue and green modes locally"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3763, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}