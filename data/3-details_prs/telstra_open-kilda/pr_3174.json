{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNDI3MzAy", "number": 3174, "title": "Correct handle empty affected isl set in reroute throttling", "bodyText": "", "createdAt": "2020-02-05T15:13:27Z", "url": "https://github.com/telstra/open-kilda/pull/3174", "merged": true, "mergeCommit": {"oid": "ce67f3379efbb9c9aa3fa4fcc3ab457dae778958"}, "closed": true, "closedAt": "2020-02-18T13:48:17Z", "author": {"login": "rozdy"}, "timelineItems": {"totalCount": 7, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBnLaPAFqTM1NDI5NzY1OA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcFiORiAFqTM2MDM0OTEzMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0Mjk3NjU4", "url": "https://github.com/telstra/open-kilda/pull/3174#pullrequestreview-354297658", "createdAt": "2020-02-06T09:18:45Z", "commit": {"oid": "ff05c86eb2fbe80aaa8a4cb43704a1f4f5a85665"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwOToxODo0NlrOFmUAyQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMi0wNlQwOToxODo0NlrOFmUAyQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3NTcxODA4OQ==", "bodyText": "I think there's no sense to reset \"throttlingData.affectedIsl\" if it's empty already. So \"throttlingData.getAffectedIsl().isEmpty()\" must go to the \"else if\" block.", "url": "https://github.com/telstra/open-kilda/pull/3174#discussion_r375718089", "createdAt": "2020-02-06T09:18:46Z", "author": {"login": "sergii-iakovenko"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/ReroutesThrottling.java", "diffHunk": "@@ -57,12 +57,16 @@ public ReroutesThrottling(long minDelay, long maxDelay, int defaultFlowPriority)\n      * @param throttlingData the correlation ID and flow priority.\n      */\n     public void putRequest(String flowId, FlowThrottlingData throttlingData) {\n-        log.info(\"Puts flow {} with correlationId {}\", flowId, throttlingData.getCorrelationId());\n+        log.info(\"Puts reroute request for flow {} with correlationId {}\", flowId, throttlingData.getCorrelationId());\n         FlowThrottlingData prevThrottlingData = reroutes.put(flowId, throttlingData);\n         if (prevThrottlingData != null) {\n-            throttlingData.getAffectedIsl().addAll(prevThrottlingData.getAffectedIsl());\n+            if (prevThrottlingData.getAffectedIsl().isEmpty() || throttlingData.getAffectedIsl().isEmpty()) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "ff05c86eb2fbe80aaa8a4cb43704a1f4f5a85665"}, "originalPosition": 9}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "ff05c86eb2fbe80aaa8a4cb43704a1f4f5a85665", "author": {"user": {"login": "rozdy", "name": "Ievgen Rozdymakha"}}, "url": "https://github.com/telstra/open-kilda/commit/ff05c86eb2fbe80aaa8a4cb43704a1f4f5a85665", "committedDate": "2020-02-05T15:11:56Z", "message": "Correct handle empty affected isl set in reroute throttling"}, "afterCommit": {"oid": "eb6a22b3b5d2a7aeeebeb5c0a038754f1811c80f", "author": {"user": {"login": "rozdy", "name": "Ievgen Rozdymakha"}}, "url": "https://github.com/telstra/open-kilda/commit/eb6a22b3b5d2a7aeeebeb5c0a038754f1811c80f", "committedDate": "2020-02-06T10:43:13Z", "message": "Correct handle empty affected isl set in reroute throttling"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "b841eefe1bccfe065a9744f6d91d941f7e0666b0", "author": {"user": {"login": "rozdy", "name": "Ievgen Rozdymakha"}}, "url": "https://github.com/telstra/open-kilda/commit/b841eefe1bccfe065a9744f6d91d941f7e0666b0", "committedDate": "2020-02-11T10:36:23Z", "message": "Correct handle empty affected isl set in reroute throttling"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "eb6a22b3b5d2a7aeeebeb5c0a038754f1811c80f", "author": {"user": {"login": "rozdy", "name": "Ievgen Rozdymakha"}}, "url": "https://github.com/telstra/open-kilda/commit/eb6a22b3b5d2a7aeeebeb5c0a038754f1811c80f", "committedDate": "2020-02-06T10:43:13Z", "message": "Correct handle empty affected isl set in reroute throttling"}, "afterCommit": {"oid": "b841eefe1bccfe065a9744f6d91d941f7e0666b0", "author": {"user": {"login": "rozdy", "name": "Ievgen Rozdymakha"}}, "url": "https://github.com/telstra/open-kilda/commit/b841eefe1bccfe065a9744f6d91d941f7e0666b0", "committedDate": "2020-02-11T10:36:23Z", "message": "Correct handle empty affected isl set in reroute throttling"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU2NzU1NDIz", "url": "https://github.com/telstra/open-kilda/pull/3174#pullrequestreview-356755423", "createdAt": "2020-02-11T15:32:53Z", "commit": {"oid": "b841eefe1bccfe065a9744f6d91d941f7e0666b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMTI2MDU1", "url": "https://github.com/telstra/open-kilda/pull/3174#pullrequestreview-360126055", "createdAt": "2020-02-18T07:52:06Z", "commit": {"oid": "b841eefe1bccfe065a9744f6d91d941f7e0666b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzYwMzQ5MTMw", "url": "https://github.com/telstra/open-kilda/pull/3174#pullrequestreview-360349130", "createdAt": "2020-02-18T13:48:04Z", "commit": {"oid": "b841eefe1bccfe065a9744f6d91d941f7e0666b0"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3704, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}