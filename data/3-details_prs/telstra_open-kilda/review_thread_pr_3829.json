{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE2MjIzMDky", "number": 3829, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDo1OTozOFrOE5hvDg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDo1OTozOFrOE5hvDg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzI4NzU3MDA2OnYy", "diffSide": "RIGHT", "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/StatusAggregator.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xNlQxNDo1OTozOFrOH0ColA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMS0xN1QxMTowMTo0OFrOH0vkXA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzMTE1Ng==", "bodyText": "Why do you need to add space here?", "url": "https://github.com/telstra/open-kilda/pull/3829#discussion_r524331156", "createdAt": "2020-11-16T14:59:38Z", "author": {"login": "rozdy"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/StatusAggregator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.network.controller.isl;\n+\n+import org.openkilda.model.IslDownReason;\n+import org.openkilda.model.IslStatus;\n+\n+import lombok.Getter;\n+\n+import java.util.Optional;\n+\n+class StatusAggregator {\n+    private IslStatus effectiveStatus = null;\n+\n+    @Getter\n+    private IslDownReason downReason = null;\n+\n+    private String details = \"\";\n+    private boolean isFirstHit = true;\n+\n+    public void evaluate(DiscoveryMonitor<?> monitor) {\n+        Optional<IslStatus> status = monitor.evaluateStatus();\n+        String detailsEntry = monitor.getName() + \":\";\n+        if (status.isPresent()) {\n+            if (isFirstHit) {\n+                isFirstHit = false;\n+\n+                effectiveStatus = status.get();\n+                downReason = monitor.getDownReason();\n+                detailsEntry = \"*\" + detailsEntry;\n+            }\n+            detailsEntry += status.get();\n+        } else {\n+            detailsEntry += \"-\";\n+        }\n+\n+        updateDetails(detailsEntry);\n+    }\n+\n+    IslStatus getEffectiveStatus() {\n+        if (effectiveStatus == null) {\n+            return IslStatus.INACTIVE;\n+        }\n+        return effectiveStatus;\n+    }\n+\n+    String getDetails() {\n+        return String.join(\" \", details);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65"}, "originalPosition": 61}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNTA2NzM1Ng==", "bodyText": "Compare this two lines:\nISL 00:00:00:00:00:00:00:01_1 <===> 00:00:00:00:00:00:00:02_2 status evaluation details - moved:- port-down:- BFD:- round-trip:- *poll:ACTIVE\nISL 00:00:00:00:00:00:00:01_1 <===> 00:00:00:00:00:00:00:02_2 status evaluation details - moved:-port-down:-BFD:-round-trip:-*poll:ACTIVE\n\nOr you are asking why these spaces added exactly in this place? - It is the simplest way to add them - because of the nature of aggregator fill.", "url": "https://github.com/telstra/open-kilda/pull/3829#discussion_r525067356", "createdAt": "2020-11-17T11:01:48Z", "author": {"login": "surabujin"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/StatusAggregator.java", "diffHunk": "@@ -0,0 +1,71 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.wfm.topology.network.controller.isl;\n+\n+import org.openkilda.model.IslDownReason;\n+import org.openkilda.model.IslStatus;\n+\n+import lombok.Getter;\n+\n+import java.util.Optional;\n+\n+class StatusAggregator {\n+    private IslStatus effectiveStatus = null;\n+\n+    @Getter\n+    private IslDownReason downReason = null;\n+\n+    private String details = \"\";\n+    private boolean isFirstHit = true;\n+\n+    public void evaluate(DiscoveryMonitor<?> monitor) {\n+        Optional<IslStatus> status = monitor.evaluateStatus();\n+        String detailsEntry = monitor.getName() + \":\";\n+        if (status.isPresent()) {\n+            if (isFirstHit) {\n+                isFirstHit = false;\n+\n+                effectiveStatus = status.get();\n+                downReason = monitor.getDownReason();\n+                detailsEntry = \"*\" + detailsEntry;\n+            }\n+            detailsEntry += status.get();\n+        } else {\n+            detailsEntry += \"-\";\n+        }\n+\n+        updateDetails(detailsEntry);\n+    }\n+\n+    IslStatus getEffectiveStatus() {\n+        if (effectiveStatus == null) {\n+            return IslStatus.INACTIVE;\n+        }\n+        return effectiveStatus;\n+    }\n+\n+    String getDetails() {\n+        return String.join(\" \", details);", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDUyNDMzMTE1Ng=="}, "originalCommit": {"oid": "c3f653e3cc3c8014ce6f46e2dbdb473ab615fb65"}, "originalPosition": 61}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2269, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}