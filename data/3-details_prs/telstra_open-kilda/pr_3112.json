{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzYyMTY1MTc1", "number": 3112, "title": "improvement: generate topology with one-way link only", "bodyText": "", "createdAt": "2020-01-13T15:05:04Z", "url": "https://github.com/telstra/open-kilda/pull/3112", "merged": true, "mergeCommit": {"oid": "541fa5d3babd253f698ae58f6c160689124e0435"}, "closed": true, "closedAt": "2020-02-18T13:21:08Z", "author": {"login": "andriidovhan"}, "timelineItems": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb5-J4PgFqTM0MTkyODIyMA==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcB9d3NABqjMwMTcyODk1MDY=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQxOTI4MjIw", "url": "https://github.com/telstra/open-kilda/pull/3112#pullrequestreview-341928220", "createdAt": "2020-01-13T15:32:20Z", "commit": {"oid": "a3729365fb8d4e02f7fc064fa7a7edf83e3d551e"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozMjoyMFrOFc6xhQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0xM1QxNTozMjoyMFrOFc6xhQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2NTg2NzM5Nw==", "bodyText": "OK, but can be more compact:\ntopoLinks.unique { a, b -> a == b || a == b.reversed ? 0 : 1 }", "url": "https://github.com/telstra/open-kilda/pull/3112#discussion_r365867397", "createdAt": "2020-01-13T15:32:20Z", "author": {"login": "rtretyak"}, "path": "services/src/functional-tests/src/main/groovy/org/openkilda/functionaltests/helpers/TopologyHelper.groovy", "diffHunk": "@@ -91,7 +91,13 @@ class TopologyHelper {\n                     topoSwitches.find { it.dpId == link.destination.switchId }, link.destination.portNo,\n                     link.maxBandwidth, null)\n         }\n-        return new TopologyDefinition(topoSwitches, topoLinks, [], TraffGenConfig.defaultConfig())\n+        def oneWayTopoLinks = []\n+        topoLinks.each { l ->\n+            if (oneWayTopoLinks.findAll { it == l || it == l.reversed }.empty) {\n+                oneWayTopoLinks << l\n+            }\n+        }", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a3729365fb8d4e02f7fc064fa7a7edf83e3d551e"}, "originalPosition": 10}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a3729365fb8d4e02f7fc064fa7a7edf83e3d551e", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/a3729365fb8d4e02f7fc064fa7a7edf83e3d551e", "committedDate": "2020-01-13T15:03:31Z", "message": "generate topology with one-way link only"}, "afterCommit": {"oid": "05a1eeb3fa1bf8817cdebcd732a2bf4f9213df5b", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/05a1eeb3fa1bf8817cdebcd732a2bf4f9213df5b", "committedDate": "2020-01-13T15:58:03Z", "message": "generate topology with one-way link only"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "e1e3b547cde13b948daa97a163ef908d6379c4ea", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/e1e3b547cde13b948daa97a163ef908d6379c4ea", "committedDate": "2020-02-07T11:15:17Z", "message": "generate topology with one-way link only"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "05a1eeb3fa1bf8817cdebcd732a2bf4f9213df5b", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/05a1eeb3fa1bf8817cdebcd732a2bf4f9213df5b", "committedDate": "2020-01-13T15:58:03Z", "message": "generate topology with one-way link only"}, "afterCommit": {"oid": "e1e3b547cde13b948daa97a163ef908d6379c4ea", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/e1e3b547cde13b948daa97a163ef908d6379c4ea", "committedDate": "2020-02-07T11:15:17Z", "message": "generate topology with one-way link only"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3683, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}