{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTE0OTE1NTYz", "number": 3823, "title": "Lock GRPC low level particularity into a single wrapper", "bodyText": "", "createdAt": "2020-11-03T18:22:02Z", "url": "https://github.com/telstra/open-kilda/pull/3823", "merged": true, "mergeCommit": {"oid": "1a9cd11c0aecc0f6113ade2492a0d25892c06715"}, "closed": true, "closedAt": "2020-12-21T12:42:25Z", "author": {"login": "surabujin"}, "timelineItems": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdZR9wdgBqjM5NTg5MDIwODA=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdmWF32gBqjQxMTMzMDMzODU=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e34e27921f41157a3e991372670cd093dc8d9ad6", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/e34e27921f41157a3e991372670cd093dc8d9ad6", "committedDate": "2020-11-03T18:20:42Z", "message": "Lock GRPC low level particularity into a single wrapper"}, "afterCommit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf", "committedDate": "2020-11-04T18:20:48Z", "message": "Lock GRPC low level particularity into a single wrapper"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNTAyMzc2", "url": "https://github.com/telstra/open-kilda/pull/3823#pullrequestreview-551502376", "createdAt": "2020-12-14T15:50:09Z", "commit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf"}, "state": "APPROVED", "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTo1MDoxMFrOIFXESA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xNFQxNTo1MjowNFrOIFXKOA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ5MTcyMA==", "bodyText": "Rename method param as well.", "url": "https://github.com/telstra/open-kilda/pull/3823#discussion_r542491720", "createdAt": "2020-12-14T15:50:10Z", "author": {"login": "rozdy"}, "path": "src-java/grpc-speaker/grpc-service/src/main/java/org/openkilda/grpc/speaker/controller/NoviflowController.java", "diffHunk": "@@ -129,7 +129,7 @@\n     public CompletableFuture<EnableLogMessagesResponse> enableLogOferrors(\n             @PathVariable(\"switch_address\") String switchAddress,\n             @RequestBody LogOferrorsDto logOferrors) {\n-        return grpcService.enableLogOferror(switchAddress, logOferrors);\n+        return grpcService.enableLogOfError(switchAddress, logOferrors);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MjQ5MzI0MA==", "bodyText": "Can we change Consumer<Void> to Runnable here?", "url": "https://github.com/telstra/open-kilda/pull/3823#discussion_r542493240", "createdAt": "2020-12-14T15:52:04Z", "author": {"login": "rozdy"}, "path": "src-java/grpc-speaker/grpc-service/src/main/java/org/openkilda/grpc/speaker/client/GrpcSession.java", "diffHunk": "@@ -418,9 +395,36 @@ public void shutdown() {\n      * @return {@link CompletableFuture} with operation result.\n      */\n     public CompletableFuture<Optional<PacketInOutStats>> getPacketInOutStats() {\n-        GrpcResponseObserver<PacketInOutStats> observer = new GrpcResponseObserver<>(address, GET_PACKET_IN_OUT_STATS);\n         log.info(\"Getting packet in out stats for switch {}\", address);\n-        stub.showStatsPacketInOut(ShowPacketInOutStats.newBuilder().build(), observer);\n-        return observer.future.thenApply(responses -> responses.stream().findFirst());\n+\n+        GrpcResponseObserver<PacketInOutStats> observer = new GrpcResponseObserver<>(address, GET_PACKET_IN_OUT_STATS);\n+        extendChain(\n+                dummy -> stub.showStatsPacketInOut(ShowPacketInOutStats.newBuilder().build(), observer),\n+                observer.future);\n+        return observer.future\n+                .thenApply(responses -> responses.stream().findFirst());\n+    }\n+\n+    private synchronized void extendChain(Consumer<Void> action, CompletableFuture<?> operation) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf"}, "originalPosition": 295}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxNzg4NzA1", "url": "https://github.com/telstra/open-kilda/pull/3823#pullrequestreview-551788705", "createdAt": "2020-12-14T18:44:00Z", "commit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "480ef14a77a9546d7dc7c9c055173641201cce0e", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/480ef14a77a9546d7dc7c9c055173641201cce0e", "committedDate": "2020-12-15T08:30:06Z", "message": "Lock GRPC low level particularity into a single wrapper"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/b8d8369480fcb99448c0ef0021b1fa8d3afd5cdf", "committedDate": "2020-11-04T18:20:48Z", "message": "Lock GRPC low level particularity into a single wrapper"}, "afterCommit": {"oid": "480ef14a77a9546d7dc7c9c055173641201cce0e", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/480ef14a77a9546d7dc7c9c055173641201cce0e", "committedDate": "2020-12-15T08:30:06Z", "message": "Lock GRPC low level particularity into a single wrapper"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3755, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}