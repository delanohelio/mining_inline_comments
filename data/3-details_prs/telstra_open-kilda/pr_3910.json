{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTM0NTI0MTU2", "number": 3910, "title": "Handle deserialization messages in KafkaVersioning", "bodyText": "", "createdAt": "2020-12-08T15:21:49Z", "url": "https://github.com/telstra/open-kilda/pull/3910", "merged": true, "mergeCommit": {"oid": "96b3763765713a5403f9c8c7c1933eb6dbe699d0"}, "closed": true, "closedAt": "2020-12-25T13:24:42Z", "author": {"login": "niksv"}, "timelineItems": {"totalCount": 16, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdkaMNzgBqjQwODg2MDkyMTU=", "endCursor": "Y3Vyc29yOnYyOpPPAAABdpoPZYgFqTU1ODgxNTg0Mw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1fda8e30e30f5074ddb6bf935d9e721f1b85c064", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/1fda8e30e30f5074ddb6bf935d9e721f1b85c064", "committedDate": "2020-12-08T15:19:59Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "4d391d584f4ee63f572daf79bf1e929b9d3362e7", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4d391d584f4ee63f572daf79bf1e929b9d3362e7", "committedDate": "2020-12-09T08:09:07Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4d391d584f4ee63f572daf79bf1e929b9d3362e7", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4d391d584f4ee63f572daf79bf1e929b9d3362e7", "committedDate": "2020-12-09T08:09:07Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "d1165e76c4f8bda894bb0683cd4925c15a1b77bd", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d1165e76c4f8bda894bb0683cd4925c15a1b77bd", "committedDate": "2020-12-09T14:36:14Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d1165e76c4f8bda894bb0683cd4925c15a1b77bd", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d1165e76c4f8bda894bb0683cd4925c15a1b77bd", "committedDate": "2020-12-09T14:36:14Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a370d26afb2d567f57e31d06d08b6ce8ed9eaa95", "committedDate": "2020-12-10T07:23:33Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTQ5MDc3NzI4", "url": "https://github.com/telstra/open-kilda/pull/3910#pullrequestreview-549077728", "createdAt": "2020-12-10T10:55:44Z", "commit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "state": "COMMENTED", "comments": {"totalCount": 5, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMDo1NTo0NFrOIDDXcw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0xMi0xMFQxMToxMDo0M1rOIDD9ow==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA3MTc5NQ==", "bodyText": "too abstract", "url": "https://github.com/telstra/open-kilda/pull/3910#discussion_r540071795", "createdAt": "2020-12-10T10:55:44Z", "author": {"login": "surabujin"}, "path": "src-java/base-topology/base-messaging/src/main/java/org/openkilda/messaging/error/DeserializationErrorMessage.java", "diffHunk": "@@ -0,0 +1,45 @@\n+/* Copyright 2017 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.error;\n+\n+import static org.openkilda.messaging.Utils.CORRELATION_ID;\n+import static org.openkilda.messaging.Utils.PAYLOAD;\n+import static org.openkilda.messaging.Utils.TIMESTAMP;\n+\n+import org.openkilda.bluegreen.kafka.DeserializationError;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.annotation.JsonSerialize;\n+\n+@JsonSerialize\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class DeserializationErrorMessage extends ErrorMessage implements DeserializationError {\n+\n+    @JsonCreator\n+    public DeserializationErrorMessage(@JsonProperty(PAYLOAD) final ErrorData data,\n+                                       @JsonProperty(TIMESTAMP) final long timestamp,\n+                                       @JsonProperty(CORRELATION_ID) final String correlationId) {\n+        super(data, timestamp, correlationId);\n+    }\n+\n+    @Override\n+    public String getDeserializationErrorMessage() {\n+        return String.format(\"ErrorData: %s, timestamp: %d, correlationId %s\",", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "originalPosition": 42}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA3MjA1Mg==", "bodyText": "too abstract", "url": "https://github.com/telstra/open-kilda/pull/3910#discussion_r540072052", "createdAt": "2020-12-10T10:56:08Z", "author": {"login": "surabujin"}, "path": "src-java/base-topology/base-messaging/src/main/java/org/openkilda/messaging/error/DeserializationErrorAbstractMessage.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.error;\n+\n+import org.openkilda.bluegreen.kafka.DeserializationError;\n+\n+import lombok.EqualsAndHashCode;\n+import lombok.Value;\n+\n+@Value\n+@EqualsAndHashCode(callSuper = true)\n+public class DeserializationErrorAbstractMessage extends ErrorAbstractMessage implements DeserializationError {\n+\n+    public DeserializationErrorAbstractMessage(String errorMessage, String errorDescription) {\n+        super(errorMessage, errorDescription);\n+    }\n+\n+    @Override\n+    public String getDeserializationErrorMessage() {\n+        return String.format(\"Error message: %s, Error description: %s\", getErrorMessage(), getErrorDescription());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA3MjU2NA==", "bodyText": "Better remove/replace @Value", "url": "https://github.com/telstra/open-kilda/pull/3910#discussion_r540072564", "createdAt": "2020-12-10T10:56:48Z", "author": {"login": "surabujin"}, "path": "src-java/base-topology/base-messaging/src/main/java/org/openkilda/messaging/error/ErrorAbstractMessage.java", "diffHunk": "@@ -20,12 +20,14 @@\n \n import lombok.EqualsAndHashCode;\n import lombok.Value;\n+import lombok.experimental.NonFinal;\n \n /**\n  * Class represents error abstract message.\n  */\n @Value\n @EqualsAndHashCode(callSuper = false)\n+@NonFinal", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "originalPosition": 11}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA3MzM3MA==", "bodyText": "too abstract", "url": "https://github.com/telstra/open-kilda/pull/3910#discussion_r540073370", "createdAt": "2020-12-10T10:57:59Z", "author": {"login": "surabujin"}, "path": "src-java/base-topology/base-messaging/src/main/java/org/openkilda/messaging/info/DeserializationErrorInfoData.java", "diffHunk": "@@ -0,0 +1,35 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.info;\n+\n+import org.openkilda.bluegreen.kafka.DeserializationError;\n+\n+import lombok.EqualsAndHashCode;\n+import lombok.Value;\n+\n+@Value\n+@EqualsAndHashCode(callSuper = true)\n+public class DeserializationErrorInfoData extends ErrorInfoData implements DeserializationError {\n+\n+    public DeserializationErrorInfoData(String errorMessage, String errorDescription) {\n+        super(errorMessage, errorDescription);\n+    }\n+\n+    @Override\n+    public String getDeserializationErrorMessage() {\n+        return String.format(\"Error message: %s, Error description: %s\", getErrorMessage(), getErrorDescription());", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "originalPosition": 33}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU0MDA4MTU3MQ==", "bodyText": "Why are you analyzing data here?\nIf this record have passed checkRecordVersion() it will be seen to main code and it will / should react property. You do not report anything if record do not pass checkRecordVersion()... I can't say right now is it correct or not.", "url": "https://github.com/telstra/open-kilda/pull/3910#discussion_r540081571", "createdAt": "2020-12-10T11:10:43Z", "author": {"login": "surabujin"}, "path": "src-java/blue-green/src/main/java/org/openkilda/bluegreen/kafka/interceptors/VersioningConsumerInterceptor.java", "diffHunk": "@@ -61,6 +63,12 @@ public VersioningConsumerInterceptor() {\n             for (ConsumerRecord<K, V> record : records.records(partition)) {\n                 if (checkRecordVersion(record)) {\n                     filteredRecords.add(record);\n+\n+                    if (record.value() instanceof DeserializationError) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95"}, "originalPosition": 14}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a370d26afb2d567f57e31d06d08b6ce8ed9eaa95", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a370d26afb2d567f57e31d06d08b6ce8ed9eaa95", "committedDate": "2020-12-10T07:23:33Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "d3da7b76794fb645d1d45f8fbe4436169913e089", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d3da7b76794fb645d1d45f8fbe4436169913e089", "committedDate": "2020-12-11T11:24:30Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d3da7b76794fb645d1d45f8fbe4436169913e089", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d3da7b76794fb645d1d45f8fbe4436169913e089", "committedDate": "2020-12-11T11:24:30Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "6a5a6b855d7e3f5b5defa8323ba8409b06b477d1", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/6a5a6b855d7e3f5b5defa8323ba8409b06b477d1", "committedDate": "2020-12-11T12:52:37Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTUxMDc2MzQ0", "url": "https://github.com/telstra/open-kilda/pull/3910#pullrequestreview-551076344", "createdAt": "2020-12-14T06:34:28Z", "commit": {"oid": "6a5a6b855d7e3f5b5defa8323ba8409b06b477d1"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "6a5a6b855d7e3f5b5defa8323ba8409b06b477d1", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/6a5a6b855d7e3f5b5defa8323ba8409b06b477d1", "committedDate": "2020-12-11T12:52:37Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "595b3c50a9e53dbf519cdc5bfc25fb8434d4e3c4", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/595b3c50a9e53dbf519cdc5bfc25fb8434d4e3c4", "committedDate": "2020-12-17T07:32:55Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "595b3c50a9e53dbf519cdc5bfc25fb8434d4e3c4", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/595b3c50a9e53dbf519cdc5bfc25fb8434d4e3c4", "committedDate": "2020-12-17T07:32:55Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "2c3ba3a46c818b8a07d64ae9eb406d3a5c89a0d2", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/2c3ba3a46c818b8a07d64ae9eb406d3a5c89a0d2", "committedDate": "2020-12-17T12:28:18Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2c3ba3a46c818b8a07d64ae9eb406d3a5c89a0d2", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/2c3ba3a46c818b8a07d64ae9eb406d3a5c89a0d2", "committedDate": "2020-12-17T12:28:18Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "2afaaba907ce5d203a51f2b33ef6e31d20db2ebf", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/2afaaba907ce5d203a51f2b33ef6e31d20db2ebf", "committedDate": "2020-12-21T19:04:05Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "2afaaba907ce5d203a51f2b33ef6e31d20db2ebf", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/2afaaba907ce5d203a51f2b33ef6e31d20db2ebf", "committedDate": "2020-12-21T19:04:05Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "4ac36c724bfa1dbc8cd81d5f491c268e177070a1", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4ac36c724bfa1dbc8cd81d5f491c268e177070a1", "committedDate": "2020-12-21T19:19:27Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4ac36c724bfa1dbc8cd81d5f491c268e177070a1", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/4ac36c724bfa1dbc8cd81d5f491c268e177070a1", "committedDate": "2020-12-21T19:19:27Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "d286fcaf989e33a530bad8ceb3802d370ae9e41d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d286fcaf989e33a530bad8ceb3802d370ae9e41d", "committedDate": "2020-12-23T05:30:52Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d286fcaf989e33a530bad8ceb3802d370ae9e41d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/d286fcaf989e33a530bad8ceb3802d370ae9e41d", "committedDate": "2020-12-23T05:30:52Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "71dc7ddd682723d845af855d763256a15b346d88", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/71dc7ddd682723d845af855d763256a15b346d88", "committedDate": "2020-12-25T09:30:02Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "17823fe3223d2f70853d87765f1bce9d3d736c48", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/17823fe3223d2f70853d87765f1bce9d3d736c48", "committedDate": "2020-12-25T09:57:10Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "71dc7ddd682723d845af855d763256a15b346d88", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/71dc7ddd682723d845af855d763256a15b346d88", "committedDate": "2020-12-25T09:30:02Z", "message": "Handle deserialization messages in KafkaVersioning"}, "afterCommit": {"oid": "17823fe3223d2f70853d87765f1bce9d3d736c48", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/17823fe3223d2f70853d87765f1bce9d3d736c48", "committedDate": "2020-12-25T09:57:10Z", "message": "Handle deserialization messages in KafkaVersioning"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTU4ODE1ODQz", "url": "https://github.com/telstra/open-kilda/pull/3910#pullrequestreview-558815843", "createdAt": "2020-12-25T13:21:09Z", "commit": {"oid": "17823fe3223d2f70853d87765f1bce9d3d736c48"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3725, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}