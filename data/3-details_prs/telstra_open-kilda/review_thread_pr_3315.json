{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTc4MTk1", "number": 3315, "reviewThreads": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowOTo0NVrODqVMsQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMzoxNjozOFrODv_OfA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjQ1NzE0MDk3OnYy", "diffSide": "RIGHT", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowOTo0NVrOF6ApJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yNFQxMjowMDozMlrOF6tAXg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MjI2MA==", "bodyText": "why protected? not private?", "url": "https://github.com/telstra/open-kilda/pull/3315#discussion_r396372260", "createdAt": "2020-03-23T11:09:45Z", "author": {"login": "niksv"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.floodlight.utils;\n+\n+import org.openkilda.floodlight.shared.packet.VlanTag;\n+\n+import net.floodlightcontroller.packet.Ethernet;\n+import net.floodlightcontroller.packet.IPacket;\n+\n+import java.util.List;\n+\n+public class EthernetPacketToolbox {\n+    public static final EthernetPacketToolbox INSTANCE = new EthernetPacketToolbox();\n+\n+    /**\n+     * Read through intermediate vlan headers up to actual packet payload. Return both payload and vlan stack.\n+     */\n+    public IPacket extractPayload(Ethernet packet, List<Integer> vlanStack) {\n+        short rootVlan = packet.getVlanID();\n+        if (0 < rootVlan) {\n+            vlanStack.add((int) rootVlan);\n+        }\n+\n+        IPacket payload = packet.getPayload();\n+        while (payload instanceof VlanTag) {\n+            short vlanId = ((VlanTag) payload).getVlanId();\n+            vlanStack.add((int) vlanId);\n+            payload = payload.getPayload();\n+        }\n+\n+        return payload;\n+    }\n+\n+    protected EthernetPacketToolbox() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1"}, "originalPosition": 47}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NzA5OTEwMg==", "bodyText": "em. Can't say, replacing it with \"private\".", "url": "https://github.com/telstra/open-kilda/pull/3315#discussion_r397099102", "createdAt": "2020-03-24T12:00:32Z", "author": {"login": "surabujin"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.floodlight.utils;\n+\n+import org.openkilda.floodlight.shared.packet.VlanTag;\n+\n+import net.floodlightcontroller.packet.Ethernet;\n+import net.floodlightcontroller.packet.IPacket;\n+\n+import java.util.List;\n+\n+public class EthernetPacketToolbox {\n+    public static final EthernetPacketToolbox INSTANCE = new EthernetPacketToolbox();\n+\n+    /**\n+     * Read through intermediate vlan headers up to actual packet payload. Return both payload and vlan stack.\n+     */\n+    public IPacket extractPayload(Ethernet packet, List<Integer> vlanStack) {\n+        short rootVlan = packet.getVlanID();\n+        if (0 < rootVlan) {\n+            vlanStack.add((int) rootVlan);\n+        }\n+\n+        IPacket payload = packet.getPayload();\n+        while (payload instanceof VlanTag) {\n+            short vlanId = ((VlanTag) payload).getVlanId();\n+            vlanStack.add((int) vlanId);\n+            payload = payload.getPayload();\n+        }\n+\n+        return payload;\n+    }\n+\n+    protected EthernetPacketToolbox() {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MjI2MA=="}, "originalCommit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1"}, "originalPosition": 47}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNjQ1NTY0OnYy", "diffSide": "RIGHT", "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMzoxNjozOFrOGCuvGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMzoxNjozOFrOGCuvGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxNjA1OQ==", "bodyText": "nit: this could be a helper class with just static methods, no need to introduce a singleton. This will be less verbose.", "url": "https://github.com/telstra/open-kilda/pull/3315#discussion_r405516059", "createdAt": "2020-04-08T13:16:38Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.floodlight.utils;\n+\n+import org.openkilda.floodlight.shared.packet.VlanTag;\n+\n+import net.floodlightcontroller.packet.Ethernet;\n+import net.floodlightcontroller.packet.IPacket;\n+\n+import java.util.List;\n+\n+public final class EthernetPacketToolbox {\n+    public static final EthernetPacketToolbox INSTANCE = new EthernetPacketToolbox();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66"}, "originalPosition": 26}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2032, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}