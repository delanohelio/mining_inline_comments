{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzcxNDQyODM5", "number": 3175, "title": "Use round trip latency data for ISL alive confirmation", "bodyText": "Network topology design proposition.\n\n\nThis change is\u2002", "createdAt": "2020-02-05T15:42:33Z", "url": "https://github.com/telstra/open-kilda/pull/3175", "merged": true, "mergeCommit": {"oid": "e34625ea6cc4262e7557870890e1d43f6666d7ca"}, "closed": true, "closedAt": "2020-04-07T11:18:55Z", "author": {"login": "surabujin"}, "timelineItems": {"totalCount": 17, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcBtGcDABqjMwMTQ1MTMzNjY=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcT-SjEgBqjMxOTU4MDI1NDQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "80688696ff9b80dc7ac92f6718d0e14756025ff1", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/80688696ff9b80dc7ac92f6718d0e14756025ff1", "committedDate": "2020-02-06T11:15:31Z", "message": "(design-update)"}, "afterCommit": {"oid": "691618b049598e9df7055535cc349120f1d825fd", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/691618b049598e9df7055535cc349120f1d825fd", "committedDate": "2020-02-06T16:12:28Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nNetwork topology design proposition."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "691618b049598e9df7055535cc349120f1d825fd", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/691618b049598e9df7055535cc349120f1d825fd", "committedDate": "2020-02-06T16:12:28Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nNetwork topology design proposition."}, "afterCommit": {"oid": "676c7a02e3c836bfe9921388458fb90c3b89dd2b", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/676c7a02e3c836bfe9921388458fb90c3b89dd2b", "committedDate": "2020-02-07T10:43:14Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nNetwork topology design proposition."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "676c7a02e3c836bfe9921388458fb90c3b89dd2b", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/676c7a02e3c836bfe9921388458fb90c3b89dd2b", "committedDate": "2020-02-07T10:43:14Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nNetwork topology design proposition."}, "afterCommit": {"oid": "3536655437274cfc983e356ea8889a2367f85c8f", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/3536655437274cfc983e356ea8889a2367f85c8f", "committedDate": "2020-02-13T11:20:51Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "de7dbfa43de7393a4e32e7e3c561901d00060419", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/de7dbfa43de7393a4e32e7e3c561901d00060419", "committedDate": "2020-02-18T09:36:07Z", "message": "(debug)"}, "afterCommit": {"oid": "40f241e1acc4590541d3451dc5d79ae098508b11", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/40f241e1acc4590541d3451dc5d79ae098508b11", "committedDate": "2020-02-18T12:36:07Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "40f241e1acc4590541d3451dc5d79ae098508b11", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/40f241e1acc4590541d3451dc5d79ae098508b11", "committedDate": "2020-02-18T12:36:07Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}, "afterCommit": {"oid": "06d1e0110aa0cbeaa713ae7f3b4f071f9b11e2c0", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/06d1e0110aa0cbeaa713ae7f3b4f071f9b11e2c0", "committedDate": "2020-02-18T14:03:01Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "620fb6d2b4f6336e77a9e899ff6c4297cbe23eab", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/620fb6d2b4f6336e77a9e899ff6c4297cbe23eab", "committedDate": "2020-02-19T09:22:45Z", "message": "(fix)"}, "afterCommit": {"oid": "48cba0a37aaba4979823c967610dc03a591c7cf6", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/48cba0a37aaba4979823c967610dc03a591c7cf6", "committedDate": "2020-02-19T17:14:52Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48cba0a37aaba4979823c967610dc03a591c7cf6", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/48cba0a37aaba4979823c967610dc03a591c7cf6", "committedDate": "2020-02-19T17:14:52Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}, "afterCommit": {"oid": "df1490b068c20cb63212790742b2c87a99dd2a3e", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/df1490b068c20cb63212790742b2c87a99dd2a3e", "committedDate": "2020-02-20T10:25:42Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "df1490b068c20cb63212790742b2c87a99dd2a3e", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/df1490b068c20cb63212790742b2c87a99dd2a3e", "committedDate": "2020-02-20T10:25:42Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}, "afterCommit": {"oid": "230072c2f4958948f47bb77dde4292532396b2c1", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/230072c2f4958948f47bb77dde4292532396b2c1", "committedDate": "2020-02-20T10:53:15Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "230072c2f4958948f47bb77dde4292532396b2c1", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/230072c2f4958948f47bb77dde4292532396b2c1", "committedDate": "2020-02-20T10:53:15Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}, "afterCommit": {"oid": "7cf9a06427977fddcbebb3cff75cbacf55eb12fa", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/7cf9a06427977fddcbebb3cff75cbacf55eb12fa", "committedDate": "2020-02-20T15:47:58Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "7cf9a06427977fddcbebb3cff75cbacf55eb12fa", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/7cf9a06427977fddcbebb3cff75cbacf55eb12fa", "committedDate": "2020-02-20T15:47:58Z", "message": "Use roundtrip latency data for isl alive confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem and ISL alive confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow offen ISL will receive round trip discovery status (round\ntrip lateny notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this is interval of how long ISL will stay\nactive after round trip discovery window have expired.\n\nRound trip discovery time window is equal to discovery timeout."}, "afterCommit": {"oid": "d758d3ce7cedb269104e3002844d8ec287883218", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/d758d3ce7cedb269104e3002844d8ec287883218", "committedDate": "2020-03-02T14:44:21Z", "message": "Use roundtrip latency data for ISL liveness confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem as ISL liveness confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow often ISL will receive round trip discovery status (round trip\nlatency notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this interval defines how long ISL will stay\nactive after the round trip discovery window has expired.\n\nThe round trip discovery time window is equal to the discovery timeout."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d758d3ce7cedb269104e3002844d8ec287883218", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/d758d3ce7cedb269104e3002844d8ec287883218", "committedDate": "2020-03-02T14:44:21Z", "message": "Use roundtrip latency data for ISL liveness confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem as ISL liveness confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow often ISL will receive round trip discovery status (round trip\nlatency notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this interval defines how long ISL will stay\nactive after the round trip discovery window has expired.\n\nThe round trip discovery time window is equal to the discovery timeout."}, "afterCommit": {"oid": "f5395baa44615e7d9256155ee00c22cb2ff491cd", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/f5395baa44615e7d9256155ee00c22cb2ff491cd", "committedDate": "2020-03-03T15:09:39Z", "message": "Use roundtrip latency data for ISL liveness confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem as ISL liveness confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow often ISL will receive round trip discovery status (round trip\nlatency notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this interval defines how long ISL will stay\nactive after the round trip discovery window has expired.\n\nThe round trip discovery time window is equal to the discovery timeout."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzY5NTg2MDIz", "url": "https://github.com/telstra/open-kilda/pull/3175#pullrequestreview-369586023", "createdAt": "2020-03-05T13:55:46Z", "commit": {"oid": "f5395baa44615e7d9256155ee00c22cb2ff491cd"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzcyOTA4MjQ0", "url": "https://github.com/telstra/open-kilda/pull/3175#pullrequestreview-372908244", "createdAt": "2020-03-11T16:09:48Z", "commit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5"}, "state": "APPROVED", "comments": {"totalCount": 4, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMVQxNjowOTo0OFrOF0-FaQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0xMlQxMzo0Mzo1MVrOF1fIvg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTA4NzQ2NQ==", "bodyText": "'updates update' probably duplicate?", "url": "https://github.com/telstra/open-kilda/pull/3175#discussion_r391087465", "createdAt": "2020-03-11T16:09:48Z", "author": {"login": "rozdy"}, "path": "docs/design/network-discovery/README.md", "diffHunk": "@@ -99,3 +102,43 @@ Manage setup/remove BFD sessions\n Responsible for global BFD toggle.\n \n ![BFDGlobalToggleFSM](bfd-global-toggle.png)\n+\n+\n+# Discovery poll process\n+Discovery poll represented by 3 services, each one responsible for some small\n+particular part.\n+\n+![discovery-sequence-diagram](discovery-sequence.png)\n+\n+## Watch list service\n+Keep the list of ISL endpoints (switch + port) available for the discovery\n+process i.e. The port event processor is responsible for managing add and for\n+remove events into this list. Periodically for each entry in this the list,\n+it produces request to the `watcher` service.\n+\n+## Watcher service\n+This service track the state of the particular discovery request. Using request\n+from watch list service it produces discovery requests to the `speaker`.\n+\n+Each produced discovery request contains a unique identifier, discovery sent\n+confirmation, discovery response and round trip notification are bring this\n+identifier back to the watcher service. If unique identifier extracted from one\n+of these responses is missing in the \"wait\" list of the watcher, this is\n+stale/foreign response and must be ignored. See the discovery sequence diagram\n+above for details.\n+\n+Also watcher is responsible for tracking round trip status (this status is\n+represented with \"last round trip received time\" for each network endpoint). On\n+receive-round-trip event from the `speaker`, watcher updates update stored", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5"}, "originalPosition": 64}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyNjY5OQ==", "bodyText": "Maybe instantiate this condition once as a static field and use for all FSM instances?", "url": "https://github.com/telstra/open-kilda/pull/3175#discussion_r391626699", "createdAt": "2020-03-12T13:40:10Z", "author": {"login": "rozdy"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/IslFsm.java", "diffHunk": "@@ -835,14 +947,38 @@ private static String makeInvalidMappingMessage(Class<?> from, Class<?> to, Obje\n \n \n             // UP\n+            final String upHandlePollEventMethod = \"upHandlePollEvent\";\n+\n+            builder.transition()\n+                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent._BECOME_DOWN);\n+            builder.onEntry(IslFsmState.UP)\n+                    .callMethod(\"upEnter\");\n             builder.transition()\n-                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent.ISL_DOWN);\n+                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent.ISL_DOWN)\n+                    .when(new Condition<IslFsmContext>() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5"}, "originalPosition": 389}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyNzMyNA==", "bodyText": "Remove or add some description plz.", "url": "https://github.com/telstra/open-kilda/pull/3175#discussion_r391627324", "createdAt": "2020-03-12T13:41:11Z", "author": {"login": "rozdy"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/IslFsm.java", "diffHunk": "@@ -835,14 +947,38 @@ private static String makeInvalidMappingMessage(Class<?> from, Class<?> to, Obje\n \n \n             // UP\n+            final String upHandlePollEventMethod = \"upHandlePollEvent\";\n+\n+            builder.transition()\n+                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent._BECOME_DOWN);\n+            builder.onEntry(IslFsmState.UP)\n+                    .callMethod(\"upEnter\");\n             builder.transition()\n-                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent.ISL_DOWN);\n+                    .from(IslFsmState.UP).to(IslFsmState.DOWN).on(IslFsmEvent.ISL_DOWN)\n+                    .when(new Condition<IslFsmContext>() {\n+                        @Override\n+                        public boolean isSatisfied(IslFsmContext context) {\n+                            return IslDownReason.PORT_DOWN.equals(context.getDownReason());\n+                        }\n+\n+                        @Override\n+                        public String name() {\n+                            return \"isl-down-by-physical-port-down\";\n+                        }\n+                    })\n+                    .callMethod(\"upHandlePhysicalDown\");\n             builder.transition()\n-                    .from(IslFsmState.UP).to(IslFsmState.MOVED).on(IslFsmEvent.ISL_MOVE);\n+                    .from(IslFsmState.UP).to(IslFsmState.MOVED).on(IslFsmEvent.ISL_MOVE)\n+                    .callMethod(updateEndpointStatusMethod);\n+            // FIXME(surabujin): ???", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5"}, "originalPosition": 405}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5MTYyODk5MA==", "bodyText": "Why do we have some event names with starting underscore?", "url": "https://github.com/telstra/open-kilda/pull/3175#discussion_r391628990", "createdAt": "2020-03-12T13:43:51Z", "author": {"login": "rozdy"}, "path": "src-java/network-topology/network-storm-topology/src/main/java/org/openkilda/wfm/topology/network/controller/isl/IslFsm.java", "diffHunk": "@@ -920,7 +1058,8 @@ public static IslFsmContextBuilder builder(IIslCarrier output, Endpoint endpoint\n         NEXT,\n \n         HISTORY, _HISTORY_DOWN, _HISTORY_UP, _HISTORY_MOVED,\n-        ISL_UP, ISL_DOWN, ISL_MOVE,\n+        ISL_UP, ISL_DOWN, ISL_MOVE, ROUND_TRIP_STATUS,\n+        _BECOME_DOWN,", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5"}, "originalPosition": 445}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "1504cd162ae2a9ac50a42b389d1379f5254de4d5", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/1504cd162ae2a9ac50a42b389d1379f5254de4d5", "committedDate": "2020-03-06T09:55:40Z", "message": "add test for isl alive confirmation via round trip latency (#3214)\n\n* add test for isl alive confirmation via round trip latency\r\n\r\n* add missing tags\r\n\r\n* fix URL for blocking fl via lab-api"}, "afterCommit": {"oid": "3548a52b45bbb5bec47fd5d801dbae952dc497d5", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/3548a52b45bbb5bec47fd5d801dbae952dc497d5", "committedDate": "2020-04-03T09:53:19Z", "message": "add test for isl alive confirmation via round trip latency (#3214)\n\n* add test for isl alive confirmation via round trip latency\n\n* add missing tags\n\n* fix URL for blocking fl via lab-api"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "94b63203d32773c7a1f6efdb1365d7436483ca68", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/94b63203d32773c7a1f6efdb1365d7436483ca68", "committedDate": "2020-04-03T10:24:44Z", "message": "Use roundtrip latency data for ISL liveness confirmation\n\nRoute round trip latency notifications into network topology and treat\nthem as ISL liveness confirmation (in both directions).\n\nThere is new config option `discovery.round.trip.status.interval` define\nhow often ISL will receive round trip discovery status (round trip\nlatency notification last seen time). This notification trigger ISL\nstatus (re)evaluation. So this interval defines how long ISL will stay\nactive after the round trip discovery window has expired.\n\nThe round trip discovery time window is equal to the discovery timeout."}}, {"__typename": "PullRequestCommit", "commit": {"oid": "78283b5da67127c045106a6195c400a705ae5377", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/78283b5da67127c045106a6195c400a705ae5377", "committedDate": "2020-04-03T10:24:44Z", "message": "add test for isl alive confirmation via round trip latency (#3214)\n\n* add test for isl alive confirmation via round trip latency\n\n* add missing tags\n\n* fix URL for blocking fl via lab-api"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3548a52b45bbb5bec47fd5d801dbae952dc497d5", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/3548a52b45bbb5bec47fd5d801dbae952dc497d5", "committedDate": "2020-04-03T09:53:19Z", "message": "add test for isl alive confirmation via round trip latency (#3214)\n\n* add test for isl alive confirmation via round trip latency\n\n* add missing tags\n\n* fix URL for blocking fl via lab-api"}, "afterCommit": {"oid": "78283b5da67127c045106a6195c400a705ae5377", "author": {"user": {"login": "andriidovhan", "name": "AndriiDovhan"}}, "url": "https://github.com/telstra/open-kilda/commit/78283b5da67127c045106a6195c400a705ae5377", "committedDate": "2020-04-03T10:24:44Z", "message": "add test for isl alive confirmation via round trip latency (#3214)\n\n* add test for isl alive confirmation via round trip latency\n\n* add missing tags\n\n* fix URL for blocking fl via lab-api"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3705, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}