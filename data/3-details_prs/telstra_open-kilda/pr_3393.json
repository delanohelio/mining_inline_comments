{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDAzNjc1NTMy", "number": 3393, "title": "Expose discovery latency as separate log field", "bodyText": "", "createdAt": "2020-04-15T10:29:55Z", "url": "https://github.com/telstra/open-kilda/pull/3393", "merged": true, "mergeCommit": {"oid": "418ba649f28c284b82f0f93f066b46e7cc3f248b"}, "closed": true, "closedAt": "2020-04-17T08:38:48Z", "author": {"login": "surabujin"}, "timelineItems": {"totalCount": 6, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcX2k6eAFqTM5MzY5NDA2Nw==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcX6L2vgBqjMyMzYxNTIxNTM=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjk0MDY3", "url": "https://github.com/telstra/open-kilda/pull/3393#pullrequestreview-393694067", "createdAt": "2020-04-15T11:41:06Z", "commit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MTowNlrOGF1z_Q==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MTowNlrOGF1z_Q==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzcyNQ==", "bodyText": "Shouldn't the method be private? I don't a reason for  PathVerificationService to expose such methods.", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408777725", "createdAt": "2020-04-15T11:41:06Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -740,4 +740,14 @@ private long getSwitchPortSpeed(IOFSwitch sw, OFPort inPort) {\n     private long getAvailableBandwidth(long speed) {\n         return (long) (speed * islBandwidthQuotient);\n     }\n+\n+    /**\n+     * Convert milliseconds into nanoseconds, taking in account illegal (-1) latency value.\n+     */\n+    public static long scaleLatencyMsToNs(long latencyMs) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 64}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzNjkzNDk0", "url": "https://github.com/telstra/open-kilda/pull/3393#pullrequestreview-393693494", "createdAt": "2020-04-15T11:40:11Z", "commit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MDoxMVrOGF1yMQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0xNVQxMTo0MDoxMVrOGF1yMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwODc3NzI2NQ==", "bodyText": "yes, we need it because this value could be used in\n\nIsl latency database field\nopentsdb rtt metric\nboth these metrics are in nano seconds", "url": "https://github.com/telstra/open-kilda/pull/3393#discussion_r408777265", "createdAt": "2020-04-15T11:40:11Z", "author": {"login": "niksv"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/pathverification/PathVerificationService.java", "diffHunk": "@@ -601,7 +604,7 @@ private void handleDiscoveryPacket(OfInput input, IOFSwitch destSwitch, Discover\n                 source.getPortNo(),\n                 destination.getSwitchId(),\n                 destination.getPortNo(),\n-                latency,\n+                scaleLatencyMsToNs(latencyMs),  // TODO(surabujin): do we really need fake ns accuracy?", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75"}, "originalPosition": 37}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "490e2108c4895b28c607651958f8b9a468889d75", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/490e2108c4895b28c607651958f8b9a468889d75", "committedDate": "2020-04-15T10:24:55Z", "message": "Expose discovery latency as separate log field"}, "afterCommit": {"oid": "4184e41f68fbdb557c1b3f03477886d53023de97", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/4184e41f68fbdb557c1b3f03477886d53023de97", "committedDate": "2020-04-15T12:31:39Z", "message": "Expose discovery latency as separate log field"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkzODEyNDQ5", "url": "https://github.com/telstra/open-kilda/pull/3393#pullrequestreview-393812449", "createdAt": "2020-04-15T14:11:19Z", "commit": {"oid": "4184e41f68fbdb557c1b3f03477886d53023de97"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "6b22e5a64b0a4d64367d0a9751fe22226a71528a", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/6b22e5a64b0a4d64367d0a9751fe22226a71528a", "committedDate": "2020-04-15T15:53:06Z", "message": "Expose discovery latency as separate log field"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4184e41f68fbdb557c1b3f03477886d53023de97", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/4184e41f68fbdb557c1b3f03477886d53023de97", "committedDate": "2020-04-15T12:31:39Z", "message": "Expose discovery latency as separate log field"}, "afterCommit": {"oid": "6b22e5a64b0a4d64367d0a9751fe22226a71528a", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/6b22e5a64b0a4d64367d0a9751fe22226a71528a", "committedDate": "2020-04-15T15:53:06Z", "message": "Expose discovery latency as separate log field"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3623, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}