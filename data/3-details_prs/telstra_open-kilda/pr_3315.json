{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzkwNTc4MTk1", "number": 3315, "title": "Extrach ethernet packet body extractor into separate tool", "bodyText": "This change is\u2002", "createdAt": "2020-03-18T17:43:58Z", "url": "https://github.com/telstra/open-kilda/pull/3315", "merged": true, "mergeCommit": {"oid": "1fc2b15fcbd232d755bc8f1fe2e2182210256a39"}, "closed": true, "closedAt": "2020-04-13T11:02:28Z", "author": {"login": "surabujin"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcPJ1LzgBqjMxNDUwNTk0MzE=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcXMxg4gFqTM5MjA4Mjc3Mg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "27ae690d0acc9fed5623c0e5a5ce95d69c202169", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/27ae690d0acc9fed5623c0e5a5ce95d69c202169", "committedDate": "2020-03-18T17:41:26Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/edca2804999fe7d75ff98fc22f07354b96881bf1", "committedDate": "2020-03-19T11:01:51Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzc5MzI5Nzcz", "url": "https://github.com/telstra/open-kilda/pull/3315#pullrequestreview-379329773", "createdAt": "2020-03-23T11:09:45Z", "commit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowOTo0NVrOF6ApJA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMy0yM1QxMTowOTo0NVrOF6ApJA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM5NjM3MjI2MA==", "bodyText": "why protected? not private?", "url": "https://github.com/telstra/open-kilda/pull/3315#discussion_r396372260", "createdAt": "2020-03-23T11:09:45Z", "author": {"login": "niksv"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.floodlight.utils;\n+\n+import org.openkilda.floodlight.shared.packet.VlanTag;\n+\n+import net.floodlightcontroller.packet.Ethernet;\n+import net.floodlightcontroller.packet.IPacket;\n+\n+import java.util.List;\n+\n+public class EthernetPacketToolbox {\n+    public static final EthernetPacketToolbox INSTANCE = new EthernetPacketToolbox();\n+\n+    /**\n+     * Read through intermediate vlan headers up to actual packet payload. Return both payload and vlan stack.\n+     */\n+    public IPacket extractPayload(Ethernet packet, List<Integer> vlanStack) {\n+        short rootVlan = packet.getVlanID();\n+        if (0 < rootVlan) {\n+            vlanStack.add((int) rootVlan);\n+        }\n+\n+        IPacket payload = packet.getPayload();\n+        while (payload instanceof VlanTag) {\n+            short vlanId = ((VlanTag) payload).getVlanId();\n+            vlanStack.add((int) vlanId);\n+            payload = payload.getPayload();\n+        }\n+\n+        return payload;\n+    }\n+\n+    protected EthernetPacketToolbox() {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1"}, "originalPosition": 47}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "edca2804999fe7d75ff98fc22f07354b96881bf1", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/edca2804999fe7d75ff98fc22f07354b96881bf1", "committedDate": "2020-03-19T11:01:51Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "e58c1dfcb0a980fffb8a93d0a83c57aa2a38b5cb", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/e58c1dfcb0a980fffb8a93d0a83c57aa2a38b5cb", "committedDate": "2020-03-24T12:13:05Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e58c1dfcb0a980fffb8a93d0a83c57aa2a38b5cb", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/e58c1dfcb0a980fffb8a93d0a83c57aa2a38b5cb", "committedDate": "2020-03-24T12:13:05Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "9211d000f36dac24e7e2aee09f53a34a159c13f3", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/9211d000f36dac24e7e2aee09f53a34a159c13f3", "committedDate": "2020-04-06T08:45:41Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "9211d000f36dac24e7e2aee09f53a34a159c13f3", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/9211d000f36dac24e7e2aee09f53a34a159c13f3", "committedDate": "2020-04-06T08:45:41Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/3b7c16af63a1b0956742da1ff4f2a4a665cb8e66", "committedDate": "2020-04-06T09:37:21Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3Mzg5OTYyOTY2", "url": "https://github.com/telstra/open-kilda/pull/3315#pullrequestreview-389962966", "createdAt": "2020-04-08T13:16:38Z", "commit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMzoxNjozOFrOGCuvGw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxMzoxNjozOFrOGCuvGw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTUxNjA1OQ==", "bodyText": "nit: this could be a helper class with just static methods, no need to introduce a singleton. This will be less verbose.", "url": "https://github.com/telstra/open-kilda/pull/3315#discussion_r405516059", "createdAt": "2020-04-08T13:16:38Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/EthernetPacketToolbox.java", "diffHunk": "@@ -0,0 +1,50 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.floodlight.utils;\n+\n+import org.openkilda.floodlight.shared.packet.VlanTag;\n+\n+import net.floodlightcontroller.packet.Ethernet;\n+import net.floodlightcontroller.packet.IPacket;\n+\n+import java.util.List;\n+\n+public final class EthernetPacketToolbox {\n+    public static final EthernetPacketToolbox INSTANCE = new EthernetPacketToolbox();", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66"}, "originalPosition": 26}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkwMDExMDU2", "url": "https://github.com/telstra/open-kilda/pull/3315#pullrequestreview-390011056", "createdAt": "2020-04-08T14:09:06Z", "commit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "3b7c16af63a1b0956742da1ff4f2a4a665cb8e66", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/3b7c16af63a1b0956742da1ff4f2a4a665cb8e66", "committedDate": "2020-04-06T09:37:21Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "4e531a036bc875e8df2c364d0ac2f2b1b0159ecc", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/4e531a036bc875e8df2c364d0ac2f2b1b0159ecc", "committedDate": "2020-04-08T15:27:48Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1758fe587a0066c3fe29dafe397c8ea0d6a38b01", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/1758fe587a0066c3fe29dafe397c8ea0d6a38b01", "committedDate": "2020-04-08T20:04:30Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "4e531a036bc875e8df2c364d0ac2f2b1b0159ecc", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/4e531a036bc875e8df2c364d0ac2f2b1b0159ecc", "committedDate": "2020-04-08T15:27:48Z", "message": "Extrach ethernet packet body extractor into separate tool"}, "afterCommit": {"oid": "1758fe587a0066c3fe29dafe397c8ea0d6a38b01", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/1758fe587a0066c3fe29dafe397c8ea0d6a38b01", "committedDate": "2020-04-08T20:04:30Z", "message": "Extrach ethernet packet body extractor into separate tool"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzkyMDgyNzcy", "url": "https://github.com/telstra/open-kilda/pull/3315#pullrequestreview-392082772", "createdAt": "2020-04-13T10:59:17Z", "commit": {"oid": "1758fe587a0066c3fe29dafe397c8ea0d6a38b01"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3674, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}