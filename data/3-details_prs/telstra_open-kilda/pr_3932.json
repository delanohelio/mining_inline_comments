{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTQxODMwNTc5", "number": 3932, "title": "OpenTSDB topology zero-downtime upgrade", "bodyText": "", "createdAt": "2020-12-17T12:25:49Z", "url": "https://github.com/telstra/open-kilda/pull/3932", "merged": true, "mergeCommit": {"oid": "c246ce40de3d2e117d1e699622cb30ce6828a8fb"}, "closed": true, "closedAt": "2021-02-05T09:03:03Z", "author": {"login": "dpoltavets"}, "timelineItems": {"totalCount": 14, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABdnRFXsABqjQxMjgxNjk2OTM=", "endCursor": "Y3Vyc29yOnYyOpPPAAABd3FtfagFqTU4NDE0MDMxMA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "65f90903058429207629324bdede9d7ca2e316e2", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/65f90903058429207629324bdede9d7ca2e316e2", "committedDate": "2020-12-17T12:20:35Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "99bdfeb5499f043c82e57fe7df5209b95c0592a4", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/99bdfeb5499f043c82e57fe7df5209b95c0592a4", "committedDate": "2020-12-18T05:13:56Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "99bdfeb5499f043c82e57fe7df5209b95c0592a4", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/99bdfeb5499f043c82e57fe7df5209b95c0592a4", "committedDate": "2020-12-18T05:13:56Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "20e86b7446ccae9cdddeafc456a441c2b7f17dea", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/20e86b7446ccae9cdddeafc456a441c2b7f17dea", "committedDate": "2020-12-24T09:18:22Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "20e86b7446ccae9cdddeafc456a441c2b7f17dea", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/20e86b7446ccae9cdddeafc456a441c2b7f17dea", "committedDate": "2020-12-24T09:18:22Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "a00819553209ed406853789909ec2f5a1c80494c", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/a00819553209ed406853789909ec2f5a1c80494c", "committedDate": "2020-12-29T06:52:38Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a00819553209ed406853789909ec2f5a1c80494c", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/a00819553209ed406853789909ec2f5a1c80494c", "committedDate": "2020-12-29T06:52:38Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "a123971b593ee3fa706c598de14ec06e4c354667", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/a123971b593ee3fa706c598de14ec06e4c354667", "committedDate": "2020-12-29T08:23:11Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a123971b593ee3fa706c598de14ec06e4c354667", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/a123971b593ee3fa706c598de14ec06e4c354667", "committedDate": "2020-12-29T08:23:11Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "53bd679ae25e9e952e74c0fbc239d76a582dbe32", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/53bd679ae25e9e952e74c0fbc239d76a582dbe32", "committedDate": "2021-01-14T14:11:38Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "53bd679ae25e9e952e74c0fbc239d76a582dbe32", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/53bd679ae25e9e952e74c0fbc239d76a582dbe32", "committedDate": "2021-01-14T14:11:38Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "5de9d424df1f4b0996243c1dea6db948754a339a", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5de9d424df1f4b0996243c1dea6db948754a339a", "committedDate": "2021-01-20T12:55:36Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTcyMTY5Njg2", "url": "https://github.com/telstra/open-kilda/pull/3932#pullrequestreview-572169686", "createdAt": "2021-01-20T12:26:37Z", "commit": {"oid": "53bd679ae25e9e952e74c0fbc239d76a582dbe32"}, "state": "APPROVED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMjoyNjozN1rOIW77UA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMS0yMFQxMjoyNjozN1rOIW77UA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2MDkyMTQyNA==", "bodyText": "I'm not sure that we need it here because you import everything from base-storm-topology", "url": "https://github.com/telstra/open-kilda/pull/3932#discussion_r560921424", "createdAt": "2021-01-20T12:26:37Z", "author": {"login": "niksv"}, "path": "src-java/opentsdb-topology/opentsdb-storm-topology/build.gradle", "diffHunk": "@@ -13,6 +13,7 @@ dependencies {\n     testImplementation project(path: ':base-storm-topology', configuration: 'testArtifacts')\n     implementation project(':kilda-reporting')\n     runtimeClasspath project(':kilda-persistence-orientdb')\n+    implementation project(':blue-green')", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "53bd679ae25e9e952e74c0fbc239d76a582dbe32"}, "originalPosition": 4}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5de9d424df1f4b0996243c1dea6db948754a339a", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5de9d424df1f4b0996243c1dea6db948754a339a", "committedDate": "2021-01-20T12:55:36Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "5d8a744a2abb9c629523c9f3d2652ca8f4180865", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5d8a744a2abb9c629523c9f3d2652ca8f4180865", "committedDate": "2021-01-27T08:27:54Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5d8a744a2abb9c629523c9f3d2652ca8f4180865", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/5d8a744a2abb9c629523c9f3d2652ca8f4180865", "committedDate": "2021-01-27T08:27:54Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "f0ce8dd8417bf5487d6db20cae68371dabc55e38", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/f0ce8dd8417bf5487d6db20cae68371dabc55e38", "committedDate": "2021-01-29T06:16:17Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTc5OTYxNzIz", "url": "https://github.com/telstra/open-kilda/pull/3932#pullrequestreview-579961723", "createdAt": "2021-02-01T01:15:41Z", "commit": {"oid": "f0ce8dd8417bf5487d6db20cae68371dabc55e38"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMToxNTo0MVrOIdOgvA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMToxNTo0MVrOIdOgvA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUxNzM3Mg==", "bodyText": "Not clear what this means.", "url": "https://github.com/telstra/open-kilda/pull/3932#discussion_r567517372", "createdAt": "2021-02-01T01:15:41Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/opentsdb-topology/opentsdb-storm-topology/src/main/java/org/openkilda/wfm/topology/opentsdb/bolts/DatapointParseBolt.java", "diffHunk": "@@ -25,45 +32,73 @@\n import org.apache.storm.topology.base.BaseRichBolt;\n import org.apache.storm.tuple.Fields;\n import org.apache.storm.tuple.Tuple;\n+import org.apache.storm.tuple.Values;\n import org.slf4j.Logger;\n import org.slf4j.LoggerFactory;\n \n import java.util.List;\n import java.util.Map;\n+import java.util.UUID;\n import java.util.stream.Collectors;\n import java.util.stream.Stream;\n \n public class DatapointParseBolt extends BaseRichBolt {\n     private static final Logger LOGGER = LoggerFactory.getLogger(DatapointParseBolt.class);\n     private transient OutputCollector collector;\n \n+    // True for testing", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "f0ce8dd8417bf5487d6db20cae68371dabc55e38"}, "originalPosition": 34}]}}, {"__typename": "PullRequestCommit", "commit": {"oid": "1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966", "committedDate": "2021-02-03T13:08:32Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "f0ce8dd8417bf5487d6db20cae68371dabc55e38", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/f0ce8dd8417bf5487d6db20cae68371dabc55e38", "committedDate": "2021-01-29T06:16:17Z", "message": "OpenTSDB topology zero-downtime upgrade"}, "afterCommit": {"oid": "1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966", "author": {"user": {"login": "dpoltavets", "name": "Dmitriy Poltavets"}}, "url": "https://github.com/telstra/open-kilda/commit/1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966", "committedDate": "2021-02-03T13:08:32Z", "message": "OpenTSDB topology zero-downtime upgrade"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTgzNTM4NjQz", "url": "https://github.com/telstra/open-kilda/pull/3932#pullrequestreview-583538643", "createdAt": "2021-02-04T15:50:25Z", "commit": {"oid": "1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg0MTQwMzEw", "url": "https://github.com/telstra/open-kilda/pull/3932#pullrequestreview-584140310", "createdAt": "2021-02-05T09:02:17Z", "commit": {"oid": "1bfc9c90ec2a725ab2e952d82cf520d2bc4ff966"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3734, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}