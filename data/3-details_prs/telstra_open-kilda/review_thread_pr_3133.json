{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1Mzg1NTc3", "number": 3133, "reviewThreads": {"totalCount": 8, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowNjoxNlrODZuPoA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODo1OTo1NVrODbJHTg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk4NjU2OnYy", "diffSide": "RIGHT", "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjowNjoxNlrOFgRYNQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxMTo0MTowOVrOFgZNHw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MzQ3Nw==", "bodyText": "There is RerouteAffectedFlows class in the same package, why not to extend it instead?", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369383477", "createdAt": "2020-01-22T06:06:16Z", "author": {"login": "timofei-durakov"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2018 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.command.reroute;\n+\n+import org.openkilda.messaging.command.CommandData;\n+import org.openkilda.model.SwitchId;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.PropertyNamingStrategy.SnakeCaseStrategy;\n+import com.fasterxml.jackson.databind.annotation.JsonNaming;\n+import lombok.Data;\n+import lombok.EqualsAndHashCode;\n+import lombok.NonNull;\n+\n+@Data\n+@EqualsAndHashCode(callSuper = false)\n+@JsonNaming(SnakeCaseStrategy.class)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class RerouteAffectedFlowsRequest extends CommandData {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUxMTcxMQ==", "bodyText": "Renamed class. This two requests should trigger different logic so I guess better to keep them separately.", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369511711", "createdAt": "2020-01-22T11:41:09Z", "author": {"login": "rozdy"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2018 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.command.reroute;\n+\n+import org.openkilda.messaging.command.CommandData;\n+import org.openkilda.model.SwitchId;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.PropertyNamingStrategy.SnakeCaseStrategy;\n+import com.fasterxml.jackson.databind.annotation.JsonNaming;\n+import lombok.Data;\n+import lombok.EqualsAndHashCode;\n+import lombok.NonNull;\n+\n+@Data\n+@EqualsAndHashCode(callSuper = false)\n+@JsonNaming(SnakeCaseStrategy.class)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class RerouteAffectedFlowsRequest extends CommandData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4MzQ3Nw=="}, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk5NzAyOnYy", "diffSide": "RIGHT", "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "isResolved": false, "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjoxNDozMVrOFgReuQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxMTo0MTo0N1rOFgZORg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTE0NQ==", "bodyText": "I would prefer to extend repository with required method and not fetching all flows here.\nP.S. it's fine to filter out flows by segments since we do not interested in single switch flows here(kilda do not attempt to re-route them).", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369385145", "createdAt": "2020-01-22T06:14:31Z", "author": {"login": "timofei-durakov"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "diffHunk": "@@ -271,6 +296,24 @@ private boolean filterForwardPrimaryPath(FlowPath path) {\n                 );\n     }\n \n+    /**\n+     * Returns map with affected inactive flow and flow pathId set for rerouting.\n+     */\n+    public Map<Flow, Set<PathId>> getAffectedInactiveFlowsForRerouting(SwitchId switchId) {\n+        log.info(\"Get affected inactive flows for switch {}\", switchId);\n+        return flowRepository.findDownFlows().stream()\n+                .filter(f -> f.getPaths().stream()", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTY5Ng==", "bodyText": "Also there are no unit-tests", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369385696", "createdAt": "2020-01-22T06:16:57Z", "author": {"login": "timofei-durakov"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "diffHunk": "@@ -271,6 +296,24 @@ private boolean filterForwardPrimaryPath(FlowPath path) {\n                 );\n     }\n \n+    /**\n+     * Returns map with affected inactive flow and flow pathId set for rerouting.\n+     */\n+    public Map<Flow, Set<PathId>> getAffectedInactiveFlowsForRerouting(SwitchId switchId) {\n+        log.info(\"Get affected inactive flows for switch {}\", switchId);\n+        return flowRepository.findDownFlows().stream()\n+                .filter(f -> f.getPaths().stream()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTE0NQ=="}, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 49}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUxMjAwNg==", "bodyText": "Reworked and added tests.", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369512006", "createdAt": "2020-01-22T11:41:47Z", "author": {"login": "rozdy"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "diffHunk": "@@ -271,6 +296,24 @@ private boolean filterForwardPrimaryPath(FlowPath path) {\n                 );\n     }\n \n+    /**\n+     * Returns map with affected inactive flow and flow pathId set for rerouting.\n+     */\n+    public Map<Flow, Set<PathId>> getAffectedInactiveFlowsForRerouting(SwitchId switchId) {\n+        log.info(\"Get affected inactive flows for switch {}\", switchId);\n+        return flowRepository.findDownFlows().stream()\n+                .filter(f -> f.getPaths().stream()", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTE0NQ=="}, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 49}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mjk5NzcyOnYy", "diffSide": "RIGHT", "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "isResolved": true, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQwNjoxNTowN1rOFgRfLg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxMTo0MTo1OVrOFgZOmw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTI2Mg==", "bodyText": "2020:-P", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369385262", "createdAt": "2020-01-22T06:15:07Z", "author": {"login": "timofei-durakov"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2018 Telstra Open Source", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 1}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUxMjA5MQ==", "bodyText": "Fixed :)", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369512091", "createdAt": "2020-01-22T11:41:59Z", "author": {"login": "rozdy"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteAffectedFlowsRequest.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2018 Telstra Open Source", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTM4NTI2Mg=="}, "originalCommit": {"oid": "c2578665b6e50a561aed114c12a3a0887f56036e"}, "originalPosition": 1}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4MzkwNTA1OnYy", "diffSide": "RIGHT", "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteInactiveAffectedFlows.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxMjoxNDowNVrOFgaDQQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxNDo0MDo0NlrOFgef9w==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUyNTU2OQ==", "bodyText": "Maybe it should be RerouteAffectedInactiveFlows?", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369525569", "createdAt": "2020-01-22T12:14:05Z", "author": {"login": "niksv"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteInactiveAffectedFlows.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.command.reroute;\n+\n+import org.openkilda.messaging.command.CommandData;\n+import org.openkilda.model.SwitchId;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.PropertyNamingStrategy.SnakeCaseStrategy;\n+import com.fasterxml.jackson.databind.annotation.JsonNaming;\n+import lombok.Data;\n+import lombok.EqualsAndHashCode;\n+import lombok.NonNull;\n+\n+@Data\n+@EqualsAndHashCode(callSuper = false)\n+@JsonNaming(SnakeCaseStrategy.class)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class RerouteInactiveAffectedFlows extends CommandData {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af5d5f9fbb7fa595bf5c2d26e3e293533104507"}, "originalPosition": 34}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTU5ODQ1NQ==", "bodyText": "Fixed", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369598455", "createdAt": "2020-01-22T14:40:46Z", "author": {"login": "rozdy"}, "path": "services/src/messaging/src/main/java/org/openkilda/messaging/command/reroute/RerouteInactiveAffectedFlows.java", "diffHunk": "@@ -0,0 +1,42 @@\n+/* Copyright 2020 Telstra Open Source\n+ *\n+ *   Licensed under the Apache License, Version 2.0 (the \"License\");\n+ *   you may not use this file except in compliance with the License.\n+ *   You may obtain a copy of the License at\n+ *\n+ *       http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ *   Unless required by applicable law or agreed to in writing, software\n+ *   distributed under the License is distributed on an \"AS IS\" BASIS,\n+ *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ *   See the License for the specific language governing permissions and\n+ *   limitations under the License.\n+ */\n+\n+package org.openkilda.messaging.command.reroute;\n+\n+import org.openkilda.messaging.command.CommandData;\n+import org.openkilda.model.SwitchId;\n+\n+import com.fasterxml.jackson.annotation.JsonCreator;\n+import com.fasterxml.jackson.annotation.JsonInclude;\n+import com.fasterxml.jackson.annotation.JsonProperty;\n+import com.fasterxml.jackson.databind.PropertyNamingStrategy.SnakeCaseStrategy;\n+import com.fasterxml.jackson.databind.annotation.JsonNaming;\n+import lombok.Data;\n+import lombok.EqualsAndHashCode;\n+import lombok.NonNull;\n+\n+@Data\n+@EqualsAndHashCode(callSuper = false)\n+@JsonNaming(SnakeCaseStrategy.class)\n+@JsonInclude(JsonInclude.Include.NON_NULL)\n+public class RerouteInactiveAffectedFlows extends CommandData {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUyNTU2OQ=="}, "originalCommit": {"oid": "3af5d5f9fbb7fa595bf5c2d26e3e293533104507"}, "originalPosition": 34}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4Mzk1OTIzOnYy", "diffSide": "RIGHT", "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxMjozNDo1NVrOFgakHg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yMlQxNDo0MDo1M1rOFgegMQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUzMzk4Mg==", "bodyText": "it can be better. You can optimize it by getting only Flow Paths of Down and Degraded flows by Neo4j.\nTo do it you need to add new method into flowPathRepository. Something like\n\n    @Override\n    public Collection<FlowPath> findInactiveBySegmentSwitch(SwitchId switchId) {\n        Map<String, Object> parameters = ImmutableMap.of(\n                \"switch_id\", switchIdConverter.toGraphProperty(switchId));\n\n        Set<String> pathIds = new HashSet<>();\n        queryForStrings(\"MATCH (ps_src:switch)-[:source]-(ps:path_segment)-[:destination]-(ps_dst:switch)\" +\n                \"WHERE ps_src.name = $switch_id OR ps_dst.name = $switch_id\" +\n                \"MATCH (f:flow)-[:owns]-(fp:flow_path)-[:owns]-(ps)\" +\n                \"WHERE f.status = 'down' or f.status = 'degraded'\" +\n                \"RETURN fp.path_id as path_id\", parameters, \"path_id\").forEach(pathIds::add);\n\n        if (pathIds.isEmpty()) {\n            return emptyList();\n        }\n\n        Filter pathIdsFilter = new Filter(PATH_ID_PROPERTY_NAME, new InOperatorWithNoConverterComparison(pathIds));\n\n        return loadAll(pathIdsFilter);\n    }", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369533982", "createdAt": "2020-01-22T12:34:55Z", "author": {"login": "niksv"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "diffHunk": "@@ -263,14 +289,25 @@ private boolean filterForwardPrimaryPath(FlowPath path) {\n     public Map<Flow, Set<PathId>> getInactiveFlowsForRerouting() {\n         log.info(\"Get inactive flows\");\n         return flowRepository.findDownFlows().stream()\n-                .collect(Collectors.toMap(Function.identity(),\n+                .collect(toMap(Function.identity(),\n                         flow -> flow.getPaths().stream()\n                         .filter(path -> FlowPathStatus.INACTIVE.equals(path.getStatus()))\n                         .map(FlowPath::getPathId)\n                         .collect(Collectors.toSet()))\n                 );\n     }\n \n+    /**\n+     * Returns affected inactive flow set for rerouting.\n+     */\n+    public Set<Flow> getAffectedInactiveFlowsForRerouting(SwitchId switchId) {\n+        log.info(\"Get affected inactive flows for switch {}\", switchId);\n+        return flowPathRepository.findBySegmentSwitch(switchId).stream()\n+                .map(FlowPath::getFlow)\n+                .filter(f -> f.getStatus() == FlowStatus.DOWN || f.getStatus() == FlowStatus.DEGRADED)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3af5d5f9fbb7fa595bf5c2d26e3e293533104507"}, "originalPosition": 60}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTU5ODUxMw==", "bodyText": "Reworked", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369598513", "createdAt": "2020-01-22T14:40:53Z", "author": {"login": "rozdy"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/reroute/service/RerouteService.java", "diffHunk": "@@ -263,14 +289,25 @@ private boolean filterForwardPrimaryPath(FlowPath path) {\n     public Map<Flow, Set<PathId>> getInactiveFlowsForRerouting() {\n         log.info(\"Get inactive flows\");\n         return flowRepository.findDownFlows().stream()\n-                .collect(Collectors.toMap(Function.identity(),\n+                .collect(toMap(Function.identity(),\n                         flow -> flow.getPaths().stream()\n                         .filter(path -> FlowPathStatus.INACTIVE.equals(path.getStatus()))\n                         .map(FlowPath::getPathId)\n                         .collect(Collectors.toSet()))\n                 );\n     }\n \n+    /**\n+     * Returns affected inactive flow set for rerouting.\n+     */\n+    public Set<Flow> getAffectedInactiveFlowsForRerouting(SwitchId switchId) {\n+        log.info(\"Get affected inactive flows for switch {}\", switchId);\n+        return flowPathRepository.findBySegmentSwitch(switchId).stream()\n+                .map(FlowPath::getFlow)\n+                .filter(f -> f.getStatus() == FlowStatus.DOWN || f.getStatus() == FlowStatus.DEGRADED)", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTUzMzk4Mg=="}, "originalCommit": {"oid": "3af5d5f9fbb7fa595bf5c2d26e3e293533104507"}, "originalPosition": 60}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4NjQ2OTc0OnYy", "diffSide": "RIGHT", "path": "services/src/kilda-core/kilda-persistence-neo4j/src/main/java/org/openkilda/persistence/repositories/impl/Neo4jFlowPathRepository.java", "isResolved": false, "comments": {"totalCount": 2, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QwNTowNjozMlrOFgy5cA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yM1QxMjowODo0M1rOFg79IA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTkzMjY1Ng==", "bodyText": "This method is not used anywhere.", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r369932656", "createdAt": "2020-01-23T05:06:32Z", "author": {"login": "dpoltavets"}, "path": "services/src/kilda-core/kilda-persistence-neo4j/src/main/java/org/openkilda/persistence/repositories/impl/Neo4jFlowPathRepository.java", "diffHunk": "@@ -206,6 +206,27 @@ public Neo4jFlowPathRepository(Neo4jSessionFactory sessionFactory, TransactionMa\n         return loadAll(pathIdsFilter);\n     }\n \n+    @Override\n+    public Collection<FlowPath> findInactiveBySegmentSwitch(SwitchId switchId) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5ae508868775560383778af519e082ed505f12a5"}, "originalPosition": 5}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDA4MTA1Ng==", "bodyText": "Fixed", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r370081056", "createdAt": "2020-01-23T12:08:43Z", "author": {"login": "rozdy"}, "path": "services/src/kilda-core/kilda-persistence-neo4j/src/main/java/org/openkilda/persistence/repositories/impl/Neo4jFlowPathRepository.java", "diffHunk": "@@ -206,6 +206,27 @@ public Neo4jFlowPathRepository(Neo4jSessionFactory sessionFactory, TransactionMa\n         return loadAll(pathIdsFilter);\n     }\n \n+    @Override\n+    public Collection<FlowPath> findInactiveBySegmentSwitch(SwitchId switchId) {", "state": "SUBMITTED", "replyTo": {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM2OTkzMjY1Ng=="}, "originalCommit": {"oid": "5ae508868775560383778af519e082ed505f12a5"}, "originalPosition": 5}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI4OTgxODQ0OnYy", "diffSide": "RIGHT", "path": "docs/design/network-discovery/switch-FSM.puml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMjo1NzoxNVrOFhS0QA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yNFQwMjo1NzoxNVrOFhS0QA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MDQ1NTYxNg==", "bodyText": "Why you did that on sync, I prefer on Online state.", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r370455616", "createdAt": "2020-01-24T02:57:15Z", "author": {"login": "nikitamarchenko"}, "path": "docs/design/network-discovery/switch-FSM.puml", "diffHunk": "@@ -60,6 +60,7 @@ ONLINE --> OFFLINE : offline\n \n OFFLINE : enter / update status in DB\n OFFLINE : enter / emit offline for portAll()\n+OFFLINE : online / send reroute affected flows", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "3e70d04b632f8437c51e7e4a3395af368f623736"}, "originalPosition": 4}]}}, {"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjI5Nzg3NDcwOnYy", "diffSide": "RIGHT", "path": "docs/design/network-discovery/switch-FSM.puml", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODo1OTo1NVrOFidP-A==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOFQwODo1OTo1NVrOFidP-A==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTY3NTEyOA==", "bodyText": "You already have that flag in DB", "url": "https://github.com/telstra/open-kilda/pull/3133#discussion_r371675128", "createdAt": "2020-01-28T08:59:55Z", "author": {"login": "nikitamarchenko"}, "path": "docs/design/network-discovery/switch-FSM.puml", "diffHunk": "@@ -28,6 +28,8 @@ endlegend\n \n [*] --> INIT\n \n+INIT : set wasOffline = false", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "908567380b0ac3d41a31c4f78b90d6f962fe3df2"}, "originalPosition": 4}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2075, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}