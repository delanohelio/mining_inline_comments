{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0MzY1MTI1MTM0", "number": 3129, "title": "Added LLDP shared rule V2 removing and installation", "bodyText": "Closes #3056", "createdAt": "2020-01-21T07:00:56Z", "url": "https://github.com/telstra/open-kilda/pull/3129", "merged": true, "mergeCommit": {"oid": "37e7eaee802197aeac8bdeaaee0b32ec9f17585a"}, "closed": true, "closedAt": "2020-03-04T11:52:59Z", "author": {"login": "niksv"}, "timelineItems": {"totalCount": 20, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABb-eZ6EgFqTM0ODc0NjA0Ng==", "endCursor": "Y3Vyc29yOnYyOpPPAAABcJtFIaABqjMwODc3ODM0MjQ=", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NzQ2MDQ2", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-348746046", "createdAt": "2020-01-27T15:23:41Z", "commit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNToyMzo0MVrOFiGlfg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNToyMzo0MVrOFiGlfg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMwMzgwNg==", "bodyText": "I'd recommend to encapsulate such flags into a separate structure and re-use it in corresponding requests/factories/commands. This will simplify future changes - affecting the only structure, not dozens of classes.", "url": "https://github.com/telstra/open-kilda/pull/3129#discussion_r371303806", "createdAt": "2020-01-27T15:23:41Z", "author": {"login": "sergii-iakovenko"}, "path": "services/src/floodlight-service/floodlight-api/src/main/java/org/openkilda/floodlight/api/request/IngressFlowSegmentBase.java", "diffHunk": "@@ -45,14 +45,19 @@\n     @JsonProperty(\"remove_customer_port_shared_catch_rule\")\n     protected final boolean removeCustomerPortSharedCatchRule;\n \n+    @JsonProperty(\"remove_customer_port_shared_lldp_catch_rule\")\n+    protected final boolean removeCustomerPortSharedLldpCatchRule;\n+\n     IngressFlowSegmentBase(\n             MessageContext context, UUID commandId, FlowSegmentMetadata metadata, @NonNull FlowEndpoint endpoint,\n-            MeterConfig meterConfig, @NonNull SwitchId egressSwitchId, boolean removeCustomerPortSharedCatchRule) {\n+            MeterConfig meterConfig, @NonNull SwitchId egressSwitchId, boolean removeCustomerPortSharedCatchRule,\n+            boolean removeCustomerPortSharedLldpCatchRule) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "originalPosition": 11}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzQ4NzYzMjg3", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-348763287", "createdAt": "2020-01-27T15:44:37Z", "commit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "state": "COMMENTED", "comments": {"totalCount": 3, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNTo0NDozN1rOFiHYuw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yN1QxNjowNzo0OFrOFiISYQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMxNjkyMw==", "bodyText": "Are you sure that we won't have duplicates by tableId? The previous implementation handles it using Hashmap.", "url": "https://github.com/telstra/open-kilda/pull/3129#discussion_r371316923", "createdAt": "2020-01-27T15:44:37Z", "author": {"login": "sergii-iakovenko"}, "path": "services/src/floodlight-service/floodlight-modules/src/main/java/org/openkilda/floodlight/utils/OfFlowDumpProducer.java", "diffHunk": "@@ -48,16 +47,17 @@\n     public OfFlowDumpProducer(MessageContext context, IOFSwitch sw, List<OFFlowMod> expectedFlows) {\n         swId = sw.getId();\n \n-        HashMap<TableId, DumpSelector> targetTables = new HashMap<>();\n+        List<DumpSelector> dumpSelectors = new ArrayList<>();\n         for (OFFlowMod entry : expectedFlows) {\n             TableId tableId = entry.getTableId();  // can be null", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "originalPosition": 15}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMyMTg3MA==", "bodyText": "Why do you require OFInstructionGotoTable as an argument if only the tableId is used in the method?", "url": "https://github.com/telstra/open-kilda/pull/3129#discussion_r371321870", "createdAt": "2020-01-27T15:52:22Z", "author": {"login": "sergii-iakovenko"}, "path": "services/src/floodlight-service/floodlight-modules/src/test/java/org/openkilda/floodlight/command/flow/ingress/of/IngressFlowModFactoryTest.java", "diffHunk": "@@ -111,7 +112,7 @@ public void makeCustomerPortSharedCatchInstallMessage() {\n \n     // --- verify methods\n \n-    protected void verifyGoToTableInstruction(OFFlowMod message, TableId tableId) {\n+    protected void verifyGoToTableInstruction(Optional<OFInstructionGotoTable> expected, OFFlowMod message) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "originalPosition": 13}, {"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MTMzMTY4MQ==", "bodyText": "I don't think this method is appropriate for such a generic action class. Please, consider introducing another base action class.", "url": "https://github.com/telstra/open-kilda/pull/3129#discussion_r371331681", "createdAt": "2020-01-27T16:07:48Z", "author": {"login": "sergii-iakovenko"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/common/actions/FlowProcessingAction.java", "diffHunk": "@@ -101,4 +106,26 @@ protected boolean isRemoveCustomerPortSharedCatchRule(String flowId,\n \n         return flowIds.size() == 1 && flowIds.iterator().next().equals(flowId);\n     }\n+\n+    protected boolean isRemoveCustomerPortSharedLldpCatchRule(", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c"}, "originalPosition": 42}]}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/b3c10c4b84f0f1d9dcef7f35c495fe84838aee8c", "committedDate": "2020-01-17T10:19:44Z", "message": "LLDP v2"}, "afterCommit": {"oid": "a7085985d01bc530f2a1ad30a02a27a992968a84", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a7085985d01bc530f2a1ad30a02a27a992968a84", "committedDate": "2020-01-28T12:10:05Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a7085985d01bc530f2a1ad30a02a27a992968a84", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/a7085985d01bc530f2a1ad30a02a27a992968a84", "committedDate": "2020-01-28T12:10:05Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "5477d6ca3487494af82ec10f8c1ef714b11ba54d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/5477d6ca3487494af82ec10f8c1ef714b11ba54d", "committedDate": "2020-01-28T12:11:54Z", "message": "LLDP v2 shared rules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTM5MTQz", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-350139143", "createdAt": "2020-01-29T14:19:27Z", "commit": {"oid": "5477d6ca3487494af82ec10f8c1ef714b11ba54d"}, "state": "COMMENTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDoxOToyN1rOFjJ-Iw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wMS0yOVQxNDoxOToyN1rOFjJ-Iw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDM3MjQwNzg0Mw==", "bodyText": "Is it a copy of the method in RemoveOldRulesAction?", "url": "https://github.com/telstra/open-kilda/pull/3129#discussion_r372407843", "createdAt": "2020-01-29T14:19:27Z", "author": {"login": "sergii-iakovenko"}, "path": "services/wfm/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/update/actions/RevertNewRulesAction.java", "diffHunk": "@@ -92,4 +94,21 @@ protected void perform(State from, State to, Event event, FlowUpdateContext cont\n         stateMachine.saveActionToHistory(\n                 \"Commands for removing new rules and re-installing original ingress rule have been sent\");\n     }\n+\n+    private SpeakerRequestBuildContext getSpeakerRequestBuildContext(FlowUpdateFsm stateMachine) {", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5477d6ca3487494af82ec10f8c1ef714b11ba54d"}, "originalPosition": 55}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzUwMTQ1NTA4", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-350145508", "createdAt": "2020-01-29T14:27:23Z", "commit": {"oid": "5477d6ca3487494af82ec10f8c1ef714b11ba54d"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "5477d6ca3487494af82ec10f8c1ef714b11ba54d", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/5477d6ca3487494af82ec10f8c1ef714b11ba54d", "committedDate": "2020-01-28T12:11:54Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "41136fbf4feac6767d2885bceb8a96d2add8e346", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/41136fbf4feac6767d2885bceb8a96d2add8e346", "committedDate": "2020-01-29T15:51:28Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "41136fbf4feac6767d2885bceb8a96d2add8e346", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/41136fbf4feac6767d2885bceb8a96d2add8e346", "committedDate": "2020-01-29T15:51:28Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "650bab680ec9d6522b965a667df5bcffbd7efa10", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/650bab680ec9d6522b965a667df5bcffbd7efa10", "committedDate": "2020-02-05T06:48:45Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "650bab680ec9d6522b965a667df5bcffbd7efa10", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/650bab680ec9d6522b965a667df5bcffbd7efa10", "committedDate": "2020-02-05T06:48:45Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "48d87cba864ba2f621feda68b56904fb347df2a5", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/48d87cba864ba2f621feda68b56904fb347df2a5", "committedDate": "2020-02-05T08:40:58Z", "message": "LLDP v2 shared rules"}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MjA5ODUw", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-354209850", "createdAt": "2020-02-06T05:36:47Z", "commit": {"oid": "48d87cba864ba2f621feda68b56904fb347df2a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MzU0MjkxNjYx", "url": "https://github.com/telstra/open-kilda/pull/3129#pullrequestreview-354291661", "createdAt": "2020-02-06T09:09:16Z", "commit": {"oid": "48d87cba864ba2f621feda68b56904fb347df2a5"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "48d87cba864ba2f621feda68b56904fb347df2a5", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/48d87cba864ba2f621feda68b56904fb347df2a5", "committedDate": "2020-02-05T08:40:58Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "97b1bc77e155f55340137e6990e0500d1d05843b", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/97b1bc77e155f55340137e6990e0500d1d05843b", "committedDate": "2020-02-10T08:25:07Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "97b1bc77e155f55340137e6990e0500d1d05843b", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/97b1bc77e155f55340137e6990e0500d1d05843b", "committedDate": "2020-02-10T08:25:07Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "e7c30550ca0b3434d25aea4bcca68ca179322e54", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/e7c30550ca0b3434d25aea4bcca68ca179322e54", "committedDate": "2020-02-10T11:39:32Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "e7c30550ca0b3434d25aea4bcca68ca179322e54", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/e7c30550ca0b3434d25aea4bcca68ca179322e54", "committedDate": "2020-02-10T11:39:32Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "57aac5ff4458f718acba56aeee09e91e51e5d2f9", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/57aac5ff4458f718acba56aeee09e91e51e5d2f9", "committedDate": "2020-02-11T09:13:10Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "57aac5ff4458f718acba56aeee09e91e51e5d2f9", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/57aac5ff4458f718acba56aeee09e91e51e5d2f9", "committedDate": "2020-02-11T09:13:10Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "69fd29124439f8cf2981c580b97195c78c96385a", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/69fd29124439f8cf2981c580b97195c78c96385a", "committedDate": "2020-02-17T08:28:17Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "69fd29124439f8cf2981c580b97195c78c96385a", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/69fd29124439f8cf2981c580b97195c78c96385a", "committedDate": "2020-02-17T08:28:17Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "778f9b9cafcbc67e4eed0dbc7de8e83b19820342", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/778f9b9cafcbc67e4eed0dbc7de8e83b19820342", "committedDate": "2020-02-18T17:48:52Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "778f9b9cafcbc67e4eed0dbc7de8e83b19820342", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/778f9b9cafcbc67e4eed0dbc7de8e83b19820342", "committedDate": "2020-02-18T17:48:52Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "88a42b63078d04389a5d130a5838019a3fc19044", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/88a42b63078d04389a5d130a5838019a3fc19044", "committedDate": "2020-02-19T11:59:21Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "88a42b63078d04389a5d130a5838019a3fc19044", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/88a42b63078d04389a5d130a5838019a3fc19044", "committedDate": "2020-02-19T11:59:21Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "bb51028b79ceaec442c0d383f7c711a2b08db751", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/bb51028b79ceaec442c0d383f7c711a2b08db751", "committedDate": "2020-03-02T11:28:41Z", "message": "LLDP v2 shared rules"}}, {"__typename": "PullRequestCommit", "commit": {"oid": "ad4e7342ee5ade3d066822dca649264999ff861b", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/ad4e7342ee5ade3d066822dca649264999ff861b", "committedDate": "2020-03-02T12:42:28Z", "message": "LLDP v2 shared rules"}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "bb51028b79ceaec442c0d383f7c711a2b08db751", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/bb51028b79ceaec442c0d383f7c711a2b08db751", "committedDate": "2020-03-02T11:28:41Z", "message": "LLDP v2 shared rules"}, "afterCommit": {"oid": "ad4e7342ee5ade3d066822dca649264999ff861b", "author": {"user": {"login": "niksv", "name": "Sergey Nikitin"}}, "url": "https://github.com/telstra/open-kilda/commit/ad4e7342ee5ade3d066822dca649264999ff861b", "committedDate": "2020-03-02T12:42:28Z", "message": "LLDP v2 shared rules"}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3687, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}