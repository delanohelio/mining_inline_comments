{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NTI4NTc5Njcy", "number": 3879, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMTowMDo1OVrOFU_sOw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMTowMDo1OVrOFU_sOw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMzU3NTU5MzU1OnYy", "diffSide": "RIGHT", "path": "src-java/swmanager-topology/swmanager-storm-topology/src/main/java/org/openkilda/wfm/topology/switchmanager/SwitchManagerTopology.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMTowMDo1OVrOIdOXLw==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMS0wMi0wMVQwMTowMDo1OVrOIdOXLw==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU2NzUxNDkyNw==", "bodyText": "Does it make sense to introduce a dedicated \"build\" method instead of repeating \"getZkTopoName(), getConfig().getBlueGreenMode()\" each time?", "url": "https://github.com/telstra/open-kilda/pull/3879#discussion_r567514927", "createdAt": "2021-02-01T01:00:59Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/swmanager-topology/swmanager-storm-topology/src/main/java/org/openkilda/wfm/topology/switchmanager/SwitchManagerTopology.java", "diffHunk": "@@ -85,22 +94,34 @@ public StormTopology createTopology() {\n                 .workerSpoutComponent(WORKER_SPOUT)\n                 .defaultTimeout((int) TimeUnit.SECONDS.toMillis(topologyConfig.getOperationTimeout()))\n                 .build();\n-        declareKafkaSpout(builder, topologyConfig.getKafkaSwitchManagerTopic(), WORKER_SPOUT);\n+        declareKafkaSpout(builder, topologyConfig.getKafkaSwitchManagerTopic(), WORKER_SPOUT,\n+                getZkTopoName(), getConfig().getBlueGreenMode());\n         declareBolt(builder, new SpeakerWorkerBolt(speakerWorkerConfig),\n                 SpeakerWorkerBolt.ID)\n                 .fieldsGrouping(WORKER_SPOUT, FIELDS_KEY)\n                 .fieldsGrouping(SwitchManagerHub.ID, SpeakerWorkerBolt.INCOME_STREAM, FIELDS_KEY)\n                 .directGrouping(CoordinatorBolt.ID);\n \n-        declareBolt(builder, buildKafkaBolt(topologyConfig.getKafkaNorthboundTopic()), NB_KAFKA_BOLT)\n+        declareBolt(builder, buildKafkaBolt(topologyConfig.getKafkaNorthboundTopic(),\n+                getZkTopoName(), getConfig().getBlueGreenMode()), NB_KAFKA_BOLT)", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "5862f71a800d7a0ae717512c4a5d0dfd0b850d83"}, "originalPosition": 55}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2329, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}