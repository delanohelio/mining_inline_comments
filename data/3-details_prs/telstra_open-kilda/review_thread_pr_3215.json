{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0Mzc2MjM1ODkw", "number": 3215, "reviewThreads": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNzo1MVrODwEuPQ==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNzo1MVrODwEuPQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDIzOlB1bGxSZXF1ZXN0UmV2aWV3VGhyZWFkMjUxNzM1NjEzOnYy", "diffSide": "RIGHT", "path": "src-java/flowhs-topology/flowhs-storm-topology/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/common/SpeakerCommandFsm.java", "isResolved": false, "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNzo1MVrOGC3kbg==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNC0wOFQxNjozNzo1MVrOGC3kbg==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQwNTY2MDc4Mg==", "bodyText": "nit: It's the only constructor, why not just assign the field?", "url": "https://github.com/telstra/open-kilda/pull/3215#discussion_r405660782", "createdAt": "2020-04-08T16:37:51Z", "author": {"login": "sergii-iakovenko"}, "path": "src-java/flowhs-topology/flowhs-storm-topology/src/main/java/org/openkilda/wfm/topology/flowhs/fsm/common/SpeakerCommandFsm.java", "diffHunk": "@@ -30,20 +29,28 @@\n import org.squirrelframework.foundation.fsm.StateMachineBuilder;\n import org.squirrelframework.foundation.fsm.StateMachineBuilderFactory;\n \n+import java.util.HashSet;\n+import java.util.Set;\n+\n @Slf4j\n @Getter\n public final class SpeakerCommandFsm\n         extends WithCommandContextFsm<SpeakerCommandFsm, State, Event, SpeakerFlowSegmentResponse> {\n \n     private final FlowSegmentRequest request;\n     private final FlowCreateHubCarrier carrier;\n+    private final Set<ErrorCode> giveUpErrors = new HashSet<>();\n+    private final int allowedRetriesCount;\n     private int remainingRetries;\n \n-    private SpeakerCommandFsm(FlowSegmentRequest request, FlowCreateHubCarrier carrier, Integer retriesLimit) {\n+    private SpeakerCommandFsm(\n+            FlowSegmentRequest request, FlowCreateHubCarrier carrier, Set<ErrorCode> giveUpErrors,\n+            Integer retriesLimit) {\n         super(new CommandContext(request.getMessageContext().getCorrelationId()));\n         this.request = request;\n         this.carrier = carrier;\n-        this.remainingRetries = retriesLimit;\n+        this.giveUpErrors.addAll(giveUpErrors);", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "4a13555f121aa1493f3ae7a565aa3c0458bf8241"}, "originalPosition": 39}]}}]}}}, "rateLimit": {"limit": 5000, "remaining": 2149, "cost": 1, "resetAt": "2021-11-13T14:23:39Z"}}}