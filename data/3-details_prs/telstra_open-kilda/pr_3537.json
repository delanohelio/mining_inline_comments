{"data": {"repository": {"pullRequest": {"id": "MDExOlB1bGxSZXF1ZXN0NDMyNDE3NzQ2", "number": 3537, "title": "Switch validation cleanup", "bodyText": "Attempt to decrease chaos level in switch manager topology.", "createdAt": "2020-06-10T12:21:02Z", "url": "https://github.com/telstra/open-kilda/pull/3537", "merged": true, "mergeCommit": {"oid": "69a965c58f96cbb1543f40a39b7cc11b7d912a37"}, "closed": true, "closedAt": "2020-07-01T09:46:17Z", "author": {"login": "surabujin"}, "timelineItems": {"totalCount": 11, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpPPAAABcqif-eABqjM0MzgzMjI2MzI=", "endCursor": "Y3Vyc29yOnYyOpPPAAABcstxbaAFqTQzMzg1NDk5MQ==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "deb223620519c872b1f711164e0d586bc511d4bc", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/deb223620519c872b1f711164e0d586bc511d4bc", "committedDate": "2020-06-10T12:20:06Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}, "afterCommit": {"oid": "506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "committedDate": "2020-06-12T13:02:20Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/506f851992ec1f3c03c46d1b64bc8cc781c1b68c", "committedDate": "2020-06-12T13:02:20Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}, "afterCommit": {"oid": "002947776d335d1aa68fd528b2a0313d7199fd7a", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/002947776d335d1aa68fd528b2a0313d7199fd7a", "committedDate": "2020-06-12T13:05:47Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "002947776d335d1aa68fd528b2a0313d7199fd7a", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/002947776d335d1aa68fd528b2a0313d7199fd7a", "committedDate": "2020-06-12T13:05:47Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}, "afterCommit": {"oid": "a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "committedDate": "2020-06-12T13:09:48Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/a4e43bf5f88b96eabd23b276cf4eab93e5e2ad98", "committedDate": "2020-06-12T13:09:48Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}, "afterCommit": {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "committedDate": "2020-06-15T14:30:15Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzMyMDU3", "url": "https://github.com/telstra/open-kilda/pull/3537#pullrequestreview-431332057", "createdAt": "2020-06-16T09:38:33Z", "commit": {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9"}, "state": "CHANGES_REQUESTED", "comments": {"totalCount": 1, "pageInfo": {"startCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozODozM1rOGkTcWA==", "endCursor": "Y3Vyc29yOnYyOpK0MjAyMC0wNi0xNlQwOTozODozM1rOGkTcWA==", "hasNextPage": false, "hasPreviousPage": false}, "nodes": [{"id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ0MDcyMDQ3Mg==", "bodyText": "nit: You can use NORTHBOUND_STREAM_ID here instead of StreamType.TO_NORTHBOUND.toString()", "url": "https://github.com/telstra/open-kilda/pull/3537#discussion_r440720472", "createdAt": "2020-06-16T09:38:33Z", "author": {"login": "dpoltavets"}, "path": "src-java/swmanager-topology/swmanager-storm-topology/src/main/java/org/openkilda/wfm/topology/switchmanager/bolt/SwitchManagerHub.java", "diffHunk": "@@ -170,31 +179,38 @@ public void cancelTimeoutCallback(String key) {\n \n     @Override\n     public void sendCommandToSpeaker(String key, CommandData command) {\n-        emitWithContext(SpeakerWorkerBolt.INCOME_STREAM, getCurrentTuple(),\n-                new Values(KeyProvider.generateChainedKey(key), command));\n+        emit(SpeakerWorkerBolt.INCOME_STREAM, getCurrentTuple(), makeWorkerTuple(key, command));\n     }\n \n     @Override\n     public void response(String key, Message message) {\n-        getOutput().emit(StreamType.TO_NORTHBOUND.toString(), new Values(key, message));\n+        emit(StreamType.TO_NORTHBOUND.toString(), getCurrentTuple(), makeNorthboundTuple(key, message));", "state": "SUBMITTED", "replyTo": null, "originalCommit": {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9"}, "originalPosition": 58}]}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzY2NDc2", "url": "https://github.com/telstra/open-kilda/pull/3537#pullrequestreview-431366476", "createdAt": "2020-06-16T10:25:14Z", "commit": {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9"}, "state": "COMMENTED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestCommit", "commit": {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/69539bc344f779465e759ea91fdb78a7ccca6aa7", "committedDate": "2020-06-16T11:02:35Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "HeadRefForcePushedEvent", "beforeCommit": {"oid": "d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/d91cc9ea313e3e6f9b3d4ddde2e5f96552852ab9", "committedDate": "2020-06-15T14:30:15Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}, "afterCommit": {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7", "author": {"user": {"login": "surabujin", "name": "Dmitriy Bogun"}}, "url": "https://github.com/telstra/open-kilda/commit/69539bc344f779465e759ea91fdb78a7ccca6aa7", "committedDate": "2020-06-16T11:02:35Z", "message": "Switch validation cleanup\n\nAttempt to decrease chaos level in switch manager topology."}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzk0OTEw", "url": "https://github.com/telstra/open-kilda/pull/3537#pullrequestreview-431394910", "createdAt": "2020-06-16T11:06:20Z", "commit": {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMxMzk1NDAz", "url": "https://github.com/telstra/open-kilda/pull/3537#pullrequestreview-431395403", "createdAt": "2020-06-16T11:07:10Z", "commit": {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}, {"__typename": "PullRequestReview", "id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDMzODU0OTkx", "url": "https://github.com/telstra/open-kilda/pull/3537#pullrequestreview-433854991", "createdAt": "2020-06-19T07:18:28Z", "commit": {"oid": "69539bc344f779465e759ea91fdb78a7ccca6aa7"}, "state": "APPROVED", "comments": {"totalCount": 0, "pageInfo": {"startCursor": null, "endCursor": null, "hasNextPage": false, "hasPreviousPage": false}, "nodes": []}}]}}}, "rateLimit": {"limit": 5000, "remaining": 3585, "cost": 1, "resetAt": "2021-11-02T12:20:56Z"}}}